var wO=Object.defineProperty;var SO=(e,t,n)=>t in e?wO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $T=(e,t,n)=>SO(e,typeof t!="symbol"?t+"":t,n);function MR(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const u in i)if(u!=="default"&&!(u in e)){const d=Object.getOwnPropertyDescriptor(i,u);d&&Object.defineProperty(e,u,d.get?d:{enumerable:!0,get:()=>i[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var J1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function CO(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var u=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,u.get?u:{enumerable:!0,get:function(){return e[i]}})}),n}var RR={exports:{}},v0={},AR={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=Symbol.for("react.element"),PO=Symbol.for("react.portal"),TO=Symbol.for("react.fragment"),IO=Symbol.for("react.strict_mode"),EO=Symbol.for("react.profiler"),kO=Symbol.for("react.provider"),MO=Symbol.for("react.context"),RO=Symbol.for("react.forward_ref"),AO=Symbol.for("react.suspense"),zO=Symbol.for("react.memo"),DO=Symbol.for("react.lazy"),OT=Symbol.iterator;function LO(e){return e===null||typeof e!="object"?null:(e=OT&&e[OT]||e["@@iterator"],typeof e=="function"?e:null)}var zR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DR=Object.assign,LR={};function jh(e,t,n){this.props=e,this.context=t,this.refs=LR,this.updater=n||zR}jh.prototype.isReactComponent={};jh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $R(){}$R.prototype=jh.prototype;function PS(e,t,n){this.props=e,this.context=t,this.refs=LR,this.updater=n||zR}var TS=PS.prototype=new $R;TS.constructor=PS;DR(TS,jh.prototype);TS.isPureReactComponent=!0;var BT=Array.isArray,OR=Object.prototype.hasOwnProperty,IS={current:null},BR={key:!0,ref:!0,__self:!0,__source:!0};function FR(e,t,n){var i,u={},d=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(d=""+t.key),t)OR.call(t,i)&&!BR.hasOwnProperty(i)&&(u[i]=t[i]);var a=arguments.length-2;if(a===1)u.children=n;else if(1<a){for(var b=Array(a),C=0;C<a;C++)b[C]=arguments[C+2];u.children=b}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)u[i]===void 0&&(u[i]=a[i]);return{$$typeof:Am,type:e,key:d,ref:f,props:u,_owner:IS.current}}function $O(e,t){return{$$typeof:Am,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ES(e){return typeof e=="object"&&e!==null&&e.$$typeof===Am}function OO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var FT=/\/+/g;function ib(e,t){return typeof e=="object"&&e!==null&&e.key!=null?OO(""+e.key):t.toString(36)}function Qy(e,t,n,i,u){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Am:case PO:f=!0}}if(f)return f=e,u=u(f),e=i===""?"."+ib(f,0):i,BT(u)?(n="",e!=null&&(n=e.replace(FT,"$&/")+"/"),Qy(u,t,n,"",function(C){return C})):u!=null&&(ES(u)&&(u=$O(u,n+(!u.key||f&&f.key===u.key?"":(""+u.key).replace(FT,"$&/")+"/")+e)),t.push(u)),1;if(f=0,i=i===""?".":i+":",BT(e))for(var a=0;a<e.length;a++){d=e[a];var b=i+ib(d,a);f+=Qy(d,t,n,b,u)}else if(b=LO(e),typeof b=="function")for(e=b.call(e),a=0;!(d=e.next()).done;)d=d.value,b=i+ib(d,a++),f+=Qy(d,t,n,b,u);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function wy(e,t,n){if(e==null)return e;var i=[],u=0;return Qy(e,i,"","",function(d){return t.call(n,d,u++)}),i}function BO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mi={current:null},ev={transition:null},FO={ReactCurrentDispatcher:mi,ReactCurrentBatchConfig:ev,ReactCurrentOwner:IS};function jR(){throw Error("act(...) is not supported in production builds of React.")}Br.Children={map:wy,forEach:function(e,t,n){wy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wy(e,function(){t++}),t},toArray:function(e){return wy(e,function(t){return t})||[]},only:function(e){if(!ES(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=jh;Br.Fragment=TO;Br.Profiler=EO;Br.PureComponent=PS;Br.StrictMode=IO;Br.Suspense=AO;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FO;Br.act=jR;Br.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=DR({},e.props),u=e.key,d=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,f=IS.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(b in t)OR.call(t,b)&&!BR.hasOwnProperty(b)&&(i[b]=t[b]===void 0&&a!==void 0?a[b]:t[b])}var b=arguments.length-2;if(b===1)i.children=n;else if(1<b){a=Array(b);for(var C=0;C<b;C++)a[C]=arguments[C+2];i.children=a}return{$$typeof:Am,type:e.type,key:u,ref:d,props:i,_owner:f}};Br.createContext=function(e){return e={$$typeof:MO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kO,_context:e},e.Consumer=e};Br.createElement=FR;Br.createFactory=function(e){var t=FR.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:RO,render:e}};Br.isValidElement=ES;Br.lazy=function(e){return{$$typeof:DO,_payload:{_status:-1,_result:e},_init:BO}};Br.memo=function(e,t){return{$$typeof:zO,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=ev.transition;ev.transition={};try{e()}finally{ev.transition=t}};Br.unstable_act=jR;Br.useCallback=function(e,t){return mi.current.useCallback(e,t)};Br.useContext=function(e){return mi.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return mi.current.useDeferredValue(e)};Br.useEffect=function(e,t){return mi.current.useEffect(e,t)};Br.useId=function(){return mi.current.useId()};Br.useImperativeHandle=function(e,t,n){return mi.current.useImperativeHandle(e,t,n)};Br.useInsertionEffect=function(e,t){return mi.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return mi.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return mi.current.useMemo(e,t)};Br.useReducer=function(e,t,n){return mi.current.useReducer(e,t,n)};Br.useRef=function(e){return mi.current.useRef(e)};Br.useState=function(e){return mi.current.useState(e)};Br.useSyncExternalStore=function(e,t,n){return mi.current.useSyncExternalStore(e,t,n)};Br.useTransition=function(){return mi.current.useTransition()};Br.version="18.3.1";AR.exports=Br;var L=AR.exports;const tv=CS(L),Q1=MR({__proto__:null,default:tv},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO=L,NO=Symbol.for("react.element"),VO=Symbol.for("react.fragment"),UO=Object.prototype.hasOwnProperty,HO=jO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GO={key:!0,ref:!0,__self:!0,__source:!0};function NR(e,t,n){var i,u={},d=null,f=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)UO.call(t,i)&&!GO.hasOwnProperty(i)&&(u[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)u[i]===void 0&&(u[i]=t[i]);return{$$typeof:NO,type:e,key:d,ref:f,props:u,_owner:HO.current}}v0.Fragment=VO;v0.jsx=NR;v0.jsxs=NR;RR.exports=v0;var le=RR.exports;const lf={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},zm="$$joy";function tm(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ae.apply(null,arguments)}var WO=!1;function ZO(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function qO(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var KO=function(){function e(n){var i=this;this._insertTag=function(u){var d;i.tags.length===0?i.insertionPoint?d=i.insertionPoint.nextSibling:i.prepend?d=i.container.firstChild:d=i.before:d=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(u,d),i.tags.push(u)},this.isSpeedy=n.speedy===void 0?!WO:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(qO(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var d=ZO(u);try{d.insertRule(i,d.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var u;return(u=i.parentNode)==null?void 0:u.removeChild(i)}),this.tags=[],this.ctr=0},e}(),oi="-ms-",kv="-moz-",Qr="-webkit-",VR="comm",kS="rule",MS="decl",XO="@import",UR="@keyframes",YO="@layer",JO=Math.abs,_0=String.fromCharCode,QO=Object.assign;function eB(e,t){return Ho(e,0)^45?(((t<<2^Ho(e,0))<<2^Ho(e,1))<<2^Ho(e,2))<<2^Ho(e,3):0}function HR(e){return e.trim()}function tB(e,t){return(e=t.exec(e))?e[0]:e}function en(e,t,n){return e.replace(t,n)}function ew(e,t){return e.indexOf(t)}function Ho(e,t){return e.charCodeAt(t)|0}function rm(e,t,n){return e.slice(t,n)}function fs(e){return e.length}function RS(e){return e.length}function Sy(e,t){return t.push(e),e}function rB(e,t){return e.map(t).join("")}var x0=1,wh=1,GR=0,Mi=0,uo=0,Nh="";function b0(e,t,n,i,u,d,f){return{value:e,root:t,parent:n,type:i,props:u,children:d,line:x0,column:wh,length:f,return:""}}function cf(e,t){return QO(b0("",null,null,"",null,null,0),e,{length:-e.length},t)}function nB(){return uo}function oB(){return uo=Mi>0?Ho(Nh,--Mi):0,wh--,uo===10&&(wh=1,x0--),uo}function Yi(){return uo=Mi<GR?Ho(Nh,Mi++):0,wh++,uo===10&&(wh=1,x0++),uo}function ys(){return Ho(Nh,Mi)}function rv(){return Mi}function Dm(e,t){return rm(Nh,e,t)}function nm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function WR(e){return x0=wh=1,GR=fs(Nh=e),Mi=0,[]}function ZR(e){return Nh="",e}function nv(e){return HR(Dm(Mi-1,tw(e===91?e+2:e===40?e+1:e)))}function iB(e){for(;(uo=ys())&&uo<33;)Yi();return nm(e)>2||nm(uo)>3?"":" "}function aB(e,t){for(;--t&&Yi()&&!(uo<48||uo>102||uo>57&&uo<65||uo>70&&uo<97););return Dm(e,rv()+(t<6&&ys()==32&&Yi()==32))}function tw(e){for(;Yi();)switch(uo){case e:return Mi;case 34:case 39:e!==34&&e!==39&&tw(uo);break;case 40:e===41&&tw(e);break;case 92:Yi();break}return Mi}function sB(e,t){for(;Yi()&&e+uo!==57;)if(e+uo===84&&ys()===47)break;return"/*"+Dm(t,Mi-1)+"*"+_0(e===47?e:Yi())}function lB(e){for(;!nm(ys());)Yi();return Dm(e,Mi)}function cB(e){return ZR(ov("",null,null,null,[""],e=WR(e),0,[0],e))}function ov(e,t,n,i,u,d,f,a,b){for(var C=0,I=0,k=f,M=0,R=0,$=0,G=1,ee=1,F=1,j=0,O="",ne=u,Y=d,q=i,ce=O;ee;)switch($=j,j=Yi()){case 40:if($!=108&&Ho(ce,k-1)==58){ew(ce+=en(nv(j),"&","&\f"),"&\f")!=-1&&(F=-1);break}case 34:case 39:case 91:ce+=nv(j);break;case 9:case 10:case 13:case 32:ce+=iB($);break;case 92:ce+=aB(rv()-1,7);continue;case 47:switch(ys()){case 42:case 47:Sy(uB(sB(Yi(),rv()),t,n),b);break;default:ce+="/"}break;case 123*G:a[C++]=fs(ce)*F;case 125*G:case 59:case 0:switch(j){case 0:case 125:ee=0;case 59+I:F==-1&&(ce=en(ce,/\f/g,"")),R>0&&fs(ce)-k&&Sy(R>32?NT(ce+";",i,n,k-1):NT(en(ce," ","")+";",i,n,k-2),b);break;case 59:ce+=";";default:if(Sy(q=jT(ce,t,n,C,I,u,a,O,ne=[],Y=[],k),d),j===123)if(I===0)ov(ce,t,q,q,ne,d,k,a,Y);else switch(M===99&&Ho(ce,3)===110?100:M){case 100:case 108:case 109:case 115:ov(e,q,q,i&&Sy(jT(e,q,q,0,0,u,a,O,u,ne=[],k),Y),u,Y,k,a,i?ne:Y);break;default:ov(ce,q,q,q,[""],Y,0,a,Y)}}C=I=R=0,G=F=1,O=ce="",k=f;break;case 58:k=1+fs(ce),R=$;default:if(G<1){if(j==123)--G;else if(j==125&&G++==0&&oB()==125)continue}switch(ce+=_0(j),j*G){case 38:F=I>0?1:(ce+="\f",-1);break;case 44:a[C++]=(fs(ce)-1)*F,F=1;break;case 64:ys()===45&&(ce+=nv(Yi())),M=ys(),I=k=fs(O=ce+=lB(rv())),j++;break;case 45:$===45&&fs(ce)==2&&(G=0)}}return d}function jT(e,t,n,i,u,d,f,a,b,C,I){for(var k=u-1,M=u===0?d:[""],R=RS(M),$=0,G=0,ee=0;$<i;++$)for(var F=0,j=rm(e,k+1,k=JO(G=f[$])),O=e;F<R;++F)(O=HR(G>0?M[F]+" "+j:en(j,/&\f/g,M[F])))&&(b[ee++]=O);return b0(e,t,n,u===0?kS:a,b,C,I)}function uB(e,t,n){return b0(e,t,n,VR,_0(nB()),rm(e,2,-2),0)}function NT(e,t,n,i){return b0(e,t,n,MS,rm(e,0,i),rm(e,i+1,-1),i)}function lh(e,t){for(var n="",i=RS(e),u=0;u<i;u++)n+=t(e[u],u,e,t)||"";return n}function dB(e,t,n,i){switch(e.type){case YO:if(e.children.length)break;case XO:case MS:return e.return=e.return||e.value;case VR:return"";case UR:return e.return=e.value+"{"+lh(e.children,i)+"}";case kS:e.value=e.props.join(",")}return fs(n=lh(e.children,i))?e.return=e.value+"{"+n+"}":""}function hB(e){var t=RS(e);return function(n,i,u,d){for(var f="",a=0;a<t;a++)f+=e[a](n,i,u,d)||"";return f}}function pB(e){return function(t){t.root||(t=t.return)&&e(t)}}function qR(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var fB=function(t,n,i){for(var u=0,d=0;u=d,d=ys(),u===38&&d===12&&(n[i]=1),!nm(d);)Yi();return Dm(t,Mi)},mB=function(t,n){var i=-1,u=44;do switch(nm(u)){case 0:u===38&&ys()===12&&(n[i]=1),t[i]+=fB(Mi-1,n,i);break;case 2:t[i]+=nv(u);break;case 4:if(u===44){t[++i]=ys()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=_0(u)}while(u=Yi());return t},gB=function(t,n){return ZR(mB(WR(t),n))},VT=new WeakMap,yB=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,u=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!VT.get(i))&&!u){VT.set(t,!0);for(var d=[],f=gB(n,d),a=i.props,b=0,C=0;b<f.length;b++)for(var I=0;I<a.length;I++,C++)t.props[C]=d[b]?f[b].replace(/&\f/g,a[I]):a[I]+" "+f[b]}}},vB=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function KR(e,t){switch(eB(e,t)){case 5103:return Qr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qr+e+kv+e+oi+e+e;case 6828:case 4268:return Qr+e+oi+e+e;case 6165:return Qr+e+oi+"flex-"+e+e;case 5187:return Qr+e+en(e,/(\w+).+(:[^]+)/,Qr+"box-$1$2"+oi+"flex-$1$2")+e;case 5443:return Qr+e+oi+"flex-item-"+en(e,/flex-|-self/,"")+e;case 4675:return Qr+e+oi+"flex-line-pack"+en(e,/align-content|flex-|-self/,"")+e;case 5548:return Qr+e+oi+en(e,"shrink","negative")+e;case 5292:return Qr+e+oi+en(e,"basis","preferred-size")+e;case 6060:return Qr+"box-"+en(e,"-grow","")+Qr+e+oi+en(e,"grow","positive")+e;case 4554:return Qr+en(e,/([^-])(transform)/g,"$1"+Qr+"$2")+e;case 6187:return en(en(en(e,/(zoom-|grab)/,Qr+"$1"),/(image-set)/,Qr+"$1"),e,"")+e;case 5495:case 3959:return en(e,/(image-set\([^]*)/,Qr+"$1$`$1");case 4968:return en(en(e,/(.+:)(flex-)?(.*)/,Qr+"box-pack:$3"+oi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qr+e+e;case 4095:case 3583:case 4068:case 2532:return en(e,/(.+)-inline(.+)/,Qr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fs(e)-1-t>6)switch(Ho(e,t+1)){case 109:if(Ho(e,t+4)!==45)break;case 102:return en(e,/(.+:)(.+)-([^]+)/,"$1"+Qr+"$2-$3$1"+kv+(Ho(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~ew(e,"stretch")?KR(en(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ho(e,t+1)!==115)break;case 6444:switch(Ho(e,fs(e)-3-(~ew(e,"!important")&&10))){case 107:return en(e,":",":"+Qr)+e;case 101:return en(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qr+(Ho(e,14)===45?"inline-":"")+"box$3$1"+Qr+"$2$3$1"+oi+"$2box$3")+e}break;case 5936:switch(Ho(e,t+11)){case 114:return Qr+e+oi+en(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qr+e+oi+en(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qr+e+oi+en(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qr+e+oi+e+e}return e}var _B=function(t,n,i,u){if(t.length>-1&&!t.return)switch(t.type){case MS:t.return=KR(t.value,t.length);break;case UR:return lh([cf(t,{value:en(t.value,"@","@"+Qr)})],u);case kS:if(t.length)return rB(t.props,function(d){switch(tB(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lh([cf(t,{props:[en(d,/:(read-\w+)/,":"+kv+"$1")]})],u);case"::placeholder":return lh([cf(t,{props:[en(d,/:(plac\w+)/,":"+Qr+"input-$1")]}),cf(t,{props:[en(d,/:(plac\w+)/,":"+kv+"$1")]}),cf(t,{props:[en(d,/:(plac\w+)/,oi+"input-$1")]})],u)}return""})}},xB=[_B],bB=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(G){var ee=G.getAttribute("data-emotion");ee.indexOf(" ")!==-1&&(document.head.appendChild(G),G.setAttribute("data-s",""))})}var u=t.stylisPlugins||xB,d={},f,a=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(G){for(var ee=G.getAttribute("data-emotion").split(" "),F=1;F<ee.length;F++)d[ee[F]]=!0;a.push(G)});var b,C=[yB,vB];{var I,k=[dB,pB(function(G){I.insert(G)})],M=hB(C.concat(u,k)),R=function(ee){return lh(cB(ee),M)};b=function(ee,F,j,O){I=j,R(ee?ee+"{"+F.styles+"}":F.styles),O&&($.inserted[F.name]=!0)}}var $={key:n,sheet:new KO({key:n,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return $.sheet.hydrate(a),$},XR={exports:{}},un={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=typeof Symbol=="function"&&Symbol.for,AS=Do?Symbol.for("react.element"):60103,zS=Do?Symbol.for("react.portal"):60106,w0=Do?Symbol.for("react.fragment"):60107,S0=Do?Symbol.for("react.strict_mode"):60108,C0=Do?Symbol.for("react.profiler"):60114,P0=Do?Symbol.for("react.provider"):60109,T0=Do?Symbol.for("react.context"):60110,DS=Do?Symbol.for("react.async_mode"):60111,I0=Do?Symbol.for("react.concurrent_mode"):60111,E0=Do?Symbol.for("react.forward_ref"):60112,k0=Do?Symbol.for("react.suspense"):60113,wB=Do?Symbol.for("react.suspense_list"):60120,M0=Do?Symbol.for("react.memo"):60115,R0=Do?Symbol.for("react.lazy"):60116,SB=Do?Symbol.for("react.block"):60121,CB=Do?Symbol.for("react.fundamental"):60117,PB=Do?Symbol.for("react.responder"):60118,TB=Do?Symbol.for("react.scope"):60119;function na(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case AS:switch(e=e.type,e){case DS:case I0:case w0:case C0:case S0:case k0:return e;default:switch(e=e&&e.$$typeof,e){case T0:case E0:case R0:case M0:case P0:return e;default:return t}}case zS:return t}}}function YR(e){return na(e)===I0}un.AsyncMode=DS;un.ConcurrentMode=I0;un.ContextConsumer=T0;un.ContextProvider=P0;un.Element=AS;un.ForwardRef=E0;un.Fragment=w0;un.Lazy=R0;un.Memo=M0;un.Portal=zS;un.Profiler=C0;un.StrictMode=S0;un.Suspense=k0;un.isAsyncMode=function(e){return YR(e)||na(e)===DS};un.isConcurrentMode=YR;un.isContextConsumer=function(e){return na(e)===T0};un.isContextProvider=function(e){return na(e)===P0};un.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===AS};un.isForwardRef=function(e){return na(e)===E0};un.isFragment=function(e){return na(e)===w0};un.isLazy=function(e){return na(e)===R0};un.isMemo=function(e){return na(e)===M0};un.isPortal=function(e){return na(e)===zS};un.isProfiler=function(e){return na(e)===C0};un.isStrictMode=function(e){return na(e)===S0};un.isSuspense=function(e){return na(e)===k0};un.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===w0||e===I0||e===C0||e===S0||e===k0||e===wB||typeof e=="object"&&e!==null&&(e.$$typeof===R0||e.$$typeof===M0||e.$$typeof===P0||e.$$typeof===T0||e.$$typeof===E0||e.$$typeof===CB||e.$$typeof===PB||e.$$typeof===TB||e.$$typeof===SB)};un.typeOf=na;XR.exports=un;var IB=XR.exports,JR=IB,EB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},QR={};QR[JR.ForwardRef]=EB;QR[JR.Memo]=kB;var MB=!0;function eA(e,t,n){var i="";return n.split(" ").forEach(function(u){e[u]!==void 0?t.push(e[u]+";"):u&&(i+=u+" ")}),i}var LS=function(t,n,i){var u=t.key+"-"+n.name;(i===!1||MB===!1)&&t.registered[u]===void 0&&(t.registered[u]=n.styles)},$S=function(t,n,i){LS(t,n,i);var u=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+u:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function RB(e){for(var t=0,n,i=0,u=e.length;u>=4;++i,u-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(u){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var AB={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zB=/[A-Z]|^ms/g,DB=/_EMO_([^_]+?)_([^]*?)_EMO_/g,tA=function(t){return t.charCodeAt(1)===45},UT=function(t){return t!=null&&typeof t!="boolean"},ab=qR(function(e){return tA(e)?e:e.replace(zB,"-$&").toLowerCase()}),HT=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(DB,function(i,u,d){return ms={name:u,styles:d,next:ms},u})}return AB[t]!==1&&!tA(t)&&typeof n=="number"&&n!==0?n+"px":n};function om(e,t,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var u=n;if(u.anim===1)return ms={name:u.name,styles:u.styles,next:ms},u.name;var d=n;if(d.styles!==void 0){var f=d.next;if(f!==void 0)for(;f!==void 0;)ms={name:f.name,styles:f.styles,next:ms},f=f.next;var a=d.styles+";";return a}return LB(e,t,n)}case"function":{if(e!==void 0){var b=ms,C=n(e);return ms=b,om(e,t,C)}break}}var I=n;if(t==null)return I;var k=t[I];return k!==void 0?k:I}function LB(e,t,n){var i="";if(Array.isArray(n))for(var u=0;u<n.length;u++)i+=om(e,t,n[u])+";";else for(var d in n){var f=n[d];if(typeof f!="object"){var a=f;t!=null&&t[a]!==void 0?i+=d+"{"+t[a]+"}":UT(a)&&(i+=ab(d)+":"+HT(d,a)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var b=0;b<f.length;b++)UT(f[b])&&(i+=ab(d)+":"+HT(d,f[b])+";");else{var C=om(e,t,f);switch(d){case"animation":case"animationName":{i+=ab(d)+":"+C+";";break}default:i+=d+"{"+C+"}"}}}return i}var GT=/label:\s*([^\s;{]+)\s*(;|$)/g,ms;function Lm(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,u="";ms=void 0;var d=e[0];if(d==null||d.raw===void 0)i=!1,u+=om(n,t,d);else{var f=d;u+=f[0]}for(var a=1;a<e.length;a++)if(u+=om(n,t,e[a]),i){var b=d;u+=b[a]}GT.lastIndex=0;for(var C="",I;(I=GT.exec(u))!==null;)C+="-"+I[1];var k=RB(u)+C;return{name:k,styles:u,next:ms}}var $B=function(t){return t()},rA=Q1.useInsertionEffect?Q1.useInsertionEffect:!1,nA=rA||$B,WT=rA||L.useLayoutEffect,OB=!1,oA=L.createContext(typeof HTMLElement<"u"?bB({key:"css"}):null);oA.Provider;var OS=function(t){return L.forwardRef(function(n,i){var u=L.useContext(oA);return t(n,u,i)})},$m=L.createContext({}),BS={}.hasOwnProperty,rw="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",BB=function(t,n){var i={};for(var u in n)BS.call(n,u)&&(i[u]=n[u]);return i[rw]=t,i},FB=function(t){var n=t.cache,i=t.serialized,u=t.isStringTag;return LS(n,i,u),nA(function(){return $S(n,i,u)}),null},jB=OS(function(e,t,n){var i=e.css;typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var u=e[rw],d=[i],f="";typeof e.className=="string"?f=eA(t.registered,d,e.className):e.className!=null&&(f=e.className+" ");var a=Lm(d,void 0,L.useContext($m));f+=t.key+"-"+a.name;var b={};for(var C in e)BS.call(e,C)&&C!=="css"&&C!==rw&&!OB&&(b[C]=e[C]);return b.className=f,n&&(b.ref=n),L.createElement(L.Fragment,null,L.createElement(FB,{cache:t,serialized:a,isStringTag:typeof u=="string"}),L.createElement(u,b))}),NB=jB,VB=function(t,n){var i=arguments;if(n==null||!BS.call(n,"css"))return L.createElement.apply(void 0,i);var u=i.length,d=new Array(u);d[0]=NB,d[1]=BB(t,n);for(var f=2;f<u;f++)d[f]=i[f];return L.createElement.apply(null,d)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(VB);var UB=OS(function(e,t){var n=e.styles,i=Lm([n],void 0,L.useContext($m)),u=L.useRef();return WT(function(){var d=t.key+"-global",f=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,b=document.querySelector('style[data-emotion="'+d+" "+i.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),b!==null&&(a=!0,b.setAttribute("data-emotion",d),f.hydrate([b])),u.current=[f,a],function(){f.flush()}},[t]),WT(function(){var d=u.current,f=d[0],a=d[1];if(a){d[1]=!1;return}if(i.next!==void 0&&$S(t,i.next,!0),f.tags.length){var b=f.tags[f.tags.length-1].nextElementSibling;f.before=b,f.flush()}t.insert("",i,f,!1)},[t,i.name]),null});function iA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lm(t)}function HB(){var e=iA.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var GB=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,WB=qR(function(e){return GB.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),ZB=WB,qB=function(t){return t!=="theme"},ZT=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?ZB:qB},qT=function(t,n,i){var u;if(n){var d=n.shouldForwardProp;u=t.__emotion_forwardProp&&d?function(f){return t.__emotion_forwardProp(f)&&d(f)}:d}return typeof u!="function"&&i&&(u=t.__emotion_forwardProp),u},KB=function(t){var n=t.cache,i=t.serialized,u=t.isStringTag;return LS(n,i,u),nA(function(){return $S(n,i,u)}),null},XB=function e(t,n){var i=t.__emotion_real===t,u=i&&t.__emotion_base||t,d,f;n!==void 0&&(d=n.label,f=n.target);var a=qT(t,n,i),b=a||ZT(u),C=!b("as");return function(){var I=arguments,k=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&k.push("label:"+d+";"),I[0]==null||I[0].raw===void 0)k.push.apply(k,I);else{var M=I[0];k.push(M[0]);for(var R=I.length,$=1;$<R;$++)k.push(I[$],M[$])}var G=OS(function(ee,F,j){var O=C&&ee.as||u,ne="",Y=[],q=ee;if(ee.theme==null){q={};for(var ce in ee)q[ce]=ee[ce];q.theme=L.useContext($m)}typeof ee.className=="string"?ne=eA(F.registered,Y,ee.className):ee.className!=null&&(ne=ee.className+" ");var he=Lm(k.concat(Y),F.registered,q);ne+=F.key+"-"+he.name,f!==void 0&&(ne+=" "+f);var ze=C&&a===void 0?ZT(O):b,J={};for(var Ee in ee)C&&Ee==="as"||ze(Ee)&&(J[Ee]=ee[Ee]);return J.className=ne,j&&(J.ref=j),L.createElement(L.Fragment,null,L.createElement(KB,{cache:F,serialized:he,isStringTag:typeof O=="string"}),L.createElement(O,J))});return G.displayName=d!==void 0?d:"Styled("+(typeof u=="string"?u:u.displayName||u.name||"Component")+")",G.defaultProps=t.defaultProps,G.__emotion_real=G,G.__emotion_base=u,G.__emotion_styles=k,G.__emotion_forwardProp=a,Object.defineProperty(G,"toString",{value:function(){return"."+f}}),G.withComponent=function(ee,F){var j=e(ee,ae({},n,F,{shouldForwardProp:qT(G,F,!0)}));return j.apply(void 0,k)},G}},YB=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Mv=XB.bind(null);YB.forEach(function(e){Mv[e]=Mv(e)});function JB(e){return e==null||Object.keys(e).length===0}function iv(e){const{styles:t,defaultTheme:n={}}=e,i=typeof t=="function"?u=>t(JB(u)?n:u):t;return le.jsx(UB,{styles:i})}function aA(e,t){return Mv(e,t)}const QB=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function ir(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Gl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function sA(e){if(L.isValidElement(e)||!Gl(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=sA(e[n])}),t}function Ji(e,t,n={clone:!0}){const i=n.clone?ae({},e):e;return Gl(e)&&Gl(t)&&Object.keys(t).forEach(u=>{L.isValidElement(t[u])?i[u]=t[u]:Gl(t[u])&&Object.prototype.hasOwnProperty.call(e,u)&&Gl(e[u])?i[u]=Ji(e[u],t[u],n):n.clone?i[u]=Gl(t[u])?sA(t[u]):t[u]:i[u]=t[u]}),i}const eF=["values","unit","step"],tF=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>ae({},n,{[i.key]:i.val}),{})};function lA(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,u=ir(e,eF),d=tF(t),f=Object.keys(d);function a(M){return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${n})`}function b(M){return`@media (max-width:${(typeof t[M]=="number"?t[M]:M)-i/100}${n})`}function C(M,R){const $=f.indexOf(R);return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${n}) and (max-width:${($!==-1&&typeof t[f[$]]=="number"?t[f[$]]:R)-i/100}${n})`}function I(M){return f.indexOf(M)+1<f.length?C(M,f[f.indexOf(M)+1]):a(M)}function k(M){const R=f.indexOf(M);return R===0?a(f[1]):R===f.length-1?b(f[R]):C(M,f[f.indexOf(M)+1]).replace("@media","@media not all and")}return ae({keys:f,values:d,up:a,down:b,between:C,only:I,not:k,unit:n},u)}const rF={borderRadius:4};function Bf(e,t){return t?Ji(e,t,{clone:!1}):e}const FS={xs:0,sm:600,md:900,lg:1200,xl:1536},KT={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${FS[e]}px)`};function Za(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const d=i.breakpoints||KT;return t.reduce((f,a,b)=>(f[d.up(d.keys[b])]=n(t[b]),f),{})}if(typeof t=="object"){const d=i.breakpoints||KT;return Object.keys(t).reduce((f,a)=>{if(Object.keys(d.values||FS).indexOf(a)!==-1){const b=d.up(a);f[b]=n(t[a],a)}else{const b=a;f[b]=t[b]}return f},{})}return n(t)}function cA(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,u)=>{const d=e.up(u);return i[d]={},i},{}))||{}}function uA(e,t){return e.reduce((n,i)=>{const u=n[i];return(!u||Object.keys(u).length===0)&&delete n[i],n},t)}function nF(e,...t){const n=cA(e),i=[n,...t].reduce((u,d)=>Ji(u,d),{});return uA(Object.keys(n),i)}function oF(e,t){if(typeof e!="object")return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach((u,d)=>{d<e.length&&(n[u]=!0)}):i.forEach(u=>{e[u]!=null&&(n[u]=!0)}),n}function sb({values:e,breakpoints:t,base:n}){const i=n||oF(e,t),u=Object.keys(i);if(u.length===0)return e;let d;return u.reduce((f,a,b)=>(Array.isArray(e)?(f[a]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(f[a]=e[a]!=null?e[a]:e[d],d=a):f[a]=e,f),{})}function Ot(e){if(typeof e!="string")throw new Error(tm(7));return e.charAt(0).toUpperCase()+e.slice(1)}function sc(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((u,d)=>u&&u[d]?u[d]:null,e);if(i!=null)return i}return t.split(".").reduce((i,u)=>i&&i[u]!=null?i[u]:null,e)}function Rv(e,t,n,i=n){let u;return typeof e=="function"?u=e(n):Array.isArray(e)?u=e[n]||i:u=sc(e,n)||i,t&&(u=t(u,i,e)),u}function eo(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:u}=e,d=f=>{if(f[t]==null)return null;const a=f[t],b=f.theme,C=sc(b,i)||{};return Za(f,a,k=>{let M=Rv(C,u,k);return k===M&&typeof k=="string"&&(M=Rv(C,u,`${t}${k==="default"?"":Ot(k)}`,k)),n===!1?M:{[n]:M}})};return d.propTypes={},d.filterProps=[t],d}function iF(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const aF={m:"margin",p:"padding"},sF={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},XT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},lF=iF(e=>{if(e.length>2)if(XT[e])e=XT[e];else return[e];const[t,n]=e.split(""),i=aF[t],u=sF[n]||"";return Array.isArray(u)?u.map(d=>i+d):[i+u]}),jS=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],NS=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...jS,...NS];function Om(e,t,n,i){var u;const d=(u=sc(e,t,!1))!=null?u:n;return typeof d=="number"?f=>typeof f=="string"?f:d*f:Array.isArray(d)?f=>typeof f=="string"?f:d[f]:typeof d=="function"?d:()=>{}}function VS(e){return Om(e,"spacing",8)}function Pu(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),i=e(n);return t>=0?i:typeof i=="number"?-i:`-${i}`}function cF(e,t){return n=>e.reduce((i,u)=>(i[u]=Pu(t,n),i),{})}function uF(e,t,n,i){if(t.indexOf(n)===-1)return null;const u=lF(n),d=cF(u,i),f=e[n];return Za(e,f,d)}function dA(e,t){const n=VS(e.theme);return Object.keys(e).map(i=>uF(e,t,i,n)).reduce(Bf,{})}function Vn(e){return dA(e,jS)}Vn.propTypes={};Vn.filterProps=jS;function Un(e){return dA(e,NS)}Un.propTypes={};Un.filterProps=NS;function hA(e=8){if(e.mui)return e;const t=VS({spacing:e}),n=(...i)=>(i.length===0?[1]:i).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return n.mui=!0,n}function A0(...e){const t=e.reduce((i,u)=>(u.filterProps.forEach(d=>{i[d]=u}),i),{}),n=i=>Object.keys(i).reduce((u,d)=>t[d]?Bf(u,t[d](i)):u,{});return n.propTypes={},n.filterProps=e.reduce((i,u)=>i.concat(u.filterProps),[]),n}function pa(e){return typeof e!="number"?e:`${e}px solid`}function Pa(e,t){return eo({prop:e,themeKey:"borders",transform:t})}const dF=Pa("border",pa),hF=Pa("borderTop",pa),pF=Pa("borderRight",pa),fF=Pa("borderBottom",pa),mF=Pa("borderLeft",pa),gF=Pa("borderColor"),yF=Pa("borderTopColor"),vF=Pa("borderRightColor"),_F=Pa("borderBottomColor"),xF=Pa("borderLeftColor"),bF=Pa("outline",pa),wF=Pa("outlineColor"),z0=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Om(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:Pu(t,i)});return Za(e,e.borderRadius,n)}return null};z0.propTypes={};z0.filterProps=["borderRadius"];A0(dF,hF,pF,fF,mF,gF,yF,vF,_F,xF,z0,bF,wF);const D0=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Om(e.theme,"spacing",8),n=i=>({gap:Pu(t,i)});return Za(e,e.gap,n)}return null};D0.propTypes={};D0.filterProps=["gap"];const L0=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Om(e.theme,"spacing",8),n=i=>({columnGap:Pu(t,i)});return Za(e,e.columnGap,n)}return null};L0.propTypes={};L0.filterProps=["columnGap"];const $0=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Om(e.theme,"spacing",8),n=i=>({rowGap:Pu(t,i)});return Za(e,e.rowGap,n)}return null};$0.propTypes={};$0.filterProps=["rowGap"];const SF=eo({prop:"gridColumn"}),CF=eo({prop:"gridRow"}),PF=eo({prop:"gridAutoFlow"}),TF=eo({prop:"gridAutoColumns"}),IF=eo({prop:"gridAutoRows"}),EF=eo({prop:"gridTemplateColumns"}),kF=eo({prop:"gridTemplateRows"}),MF=eo({prop:"gridTemplateAreas"}),RF=eo({prop:"gridArea"});A0(D0,L0,$0,SF,CF,PF,TF,IF,EF,kF,MF,RF);function ch(e,t){return t==="grey"?t:e}const AF=eo({prop:"color",themeKey:"palette",transform:ch}),zF=eo({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ch}),DF=eo({prop:"backgroundColor",themeKey:"palette",transform:ch});A0(AF,zF,DF);function Zi(e){return e<=1&&e!==0?`${e*100}%`:e}const LF=eo({prop:"width",transform:Zi}),US=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i,u;const d=((i=e.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[n])||FS[n];return d?((u=e.theme)==null||(u=u.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Zi(n)}};return Za(e,e.maxWidth,t)}return null};US.filterProps=["maxWidth"];const $F=eo({prop:"minWidth",transform:Zi}),OF=eo({prop:"height",transform:Zi}),BF=eo({prop:"maxHeight",transform:Zi}),FF=eo({prop:"minHeight",transform:Zi});eo({prop:"size",cssProperty:"width",transform:Zi});eo({prop:"size",cssProperty:"height",transform:Zi});const jF=eo({prop:"boxSizing"});A0(LF,US,$F,OF,BF,FF,jF);const O0={border:{themeKey:"borders",transform:pa},borderTop:{themeKey:"borders",transform:pa},borderRight:{themeKey:"borders",transform:pa},borderBottom:{themeKey:"borders",transform:pa},borderLeft:{themeKey:"borders",transform:pa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:pa},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:z0},color:{themeKey:"palette",transform:ch},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ch},backgroundColor:{themeKey:"palette",transform:ch},p:{style:Un},pt:{style:Un},pr:{style:Un},pb:{style:Un},pl:{style:Un},px:{style:Un},py:{style:Un},padding:{style:Un},paddingTop:{style:Un},paddingRight:{style:Un},paddingBottom:{style:Un},paddingLeft:{style:Un},paddingX:{style:Un},paddingY:{style:Un},paddingInline:{style:Un},paddingInlineStart:{style:Un},paddingInlineEnd:{style:Un},paddingBlock:{style:Un},paddingBlockStart:{style:Un},paddingBlockEnd:{style:Un},m:{style:Vn},mt:{style:Vn},mr:{style:Vn},mb:{style:Vn},ml:{style:Vn},mx:{style:Vn},my:{style:Vn},margin:{style:Vn},marginTop:{style:Vn},marginRight:{style:Vn},marginBottom:{style:Vn},marginLeft:{style:Vn},marginX:{style:Vn},marginY:{style:Vn},marginInline:{style:Vn},marginInlineStart:{style:Vn},marginInlineEnd:{style:Vn},marginBlock:{style:Vn},marginBlockStart:{style:Vn},marginBlockEnd:{style:Vn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:D0},rowGap:{style:$0},columnGap:{style:L0},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Zi},maxWidth:{style:US},minWidth:{transform:Zi},height:{transform:Zi},maxHeight:{transform:Zi},minHeight:{transform:Zi},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function NF(...e){const t=e.reduce((i,u)=>i.concat(Object.keys(u)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function VF(e,t){return typeof e=="function"?e(t):e}function UF(){function e(n,i,u,d){const f={[n]:i,theme:u},a=d[n];if(!a)return{[n]:i};const{cssProperty:b=n,themeKey:C,transform:I,style:k}=a;if(i==null)return null;if(C==="typography"&&i==="inherit")return{[n]:i};const M=sc(u,C)||{};return k?k(f):Za(f,i,$=>{let G=Rv(M,I,$);return $===G&&typeof $=="string"&&(G=Rv(M,I,`${n}${$==="default"?"":Ot($)}`,$)),b===!1?G:{[b]:G}})}function t(n){var i;const{sx:u,theme:d={}}=n||{};if(!u)return null;const f=(i=d.unstable_sxConfig)!=null?i:O0;function a(b){let C=b;if(typeof b=="function")C=b(d);else if(typeof b!="object")return b;if(!C)return null;const I=cA(d.breakpoints),k=Object.keys(I);let M=I;return Object.keys(C).forEach(R=>{const $=VF(C[R],d);if($!=null)if(typeof $=="object")if(f[R])M=Bf(M,e(R,$,d,f));else{const G=Za({theme:d},$,ee=>({[R]:ee}));NF(G,$)?M[R]=t({sx:$,theme:d}):M=Bf(M,G)}else M=Bf(M,e(R,$,d,f))}),uA(k,M)}return Array.isArray(u)?u.map(a):a(u)}return t}const Bm=UF();Bm.filterProps=["sx"];function pA(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const HF=["breakpoints","palette","spacing","shape"];function HS(e={},...t){const{breakpoints:n={},palette:i={},spacing:u,shape:d={}}=e,f=ir(e,HF),a=lA(n),b=hA(u);let C=Ji({breakpoints:a,direction:"ltr",components:{},palette:ae({mode:"light"},i),spacing:b,shape:ae({},rF,d)},f);return C.applyStyles=pA,C=t.reduce((I,k)=>Ji(I,k),C),C.unstable_sxConfig=ae({},O0,f==null?void 0:f.unstable_sxConfig),C.unstable_sx=function(k){return Bm({sx:k,theme:this})},C}function GF(e){return Object.keys(e).length===0}function fA(e=null){const t=L.useContext($m);return!t||GF(t)?e:t}const WF=HS();function GS(e=WF){return fA(e)}function ZF({styles:e,themeId:t,defaultTheme:n={}}){const i=GS(n),u=typeof e=="function"?e(t&&i[t]||i):e;return le.jsx(iv,{styles:u})}const qF=["sx"],KF=e=>{var t,n;const i={systemProps:{},otherProps:{}},u=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:O0;return Object.keys(e).forEach(d=>{u[d]?i.systemProps[d]=e[d]:i.otherProps[d]=e[d]}),i};function WS(e){const{sx:t}=e,n=ir(e,qF),{systemProps:i,otherProps:u}=KF(n);let d;return Array.isArray(t)?d=[i,...t]:typeof t=="function"?d=(...f)=>{const a=t(...f);return Gl(a)?ae({},i,a):i}:d=ae({},i,t),ae({},u,{sx:d})}const YT=e=>e,XF=()=>{let e=YT;return{configure(t){e=t},generate(t){return e(t)},reset(){e=YT}}},mA=XF();function gA(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=gA(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function qn(){for(var e,t,n=0,i="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=gA(e))&&(i&&(i+=" "),i+=t);return i}const YF=["className","component"];function JF(e={}){const{themeId:t,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:u}=e,d=aA("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Bm);return L.forwardRef(function(b,C){const I=GS(n),k=WS(b),{className:M,component:R="div"}=k,$=ir(k,YF);return le.jsx(d,ae({as:R,ref:C,className:qn(M,u?u(i):i),theme:t&&I[t]||I},$))})}const yA={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ZS(e,t,n="Mui"){const i=yA[t];return i?`${n}-${i}`:`${mA.generate(e)}-${t}`}function vA(e,t,n="Mui"){const i={};return t.forEach(u=>{i[u]=ZS(e,u,n)}),i}const QF=["ownerState"],e4=["variants"],t4=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function r4(e){return Object.keys(e).length===0}function n4(e){return typeof e=="string"&&e.charCodeAt(0)>96}function lb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const o4=HS(),i4=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Cy({defaultTheme:e,theme:t,themeId:n}){return r4(t)?e:t[n]||t}function a4(e){return e?(t,n)=>n[e]:null}function av(e,t){let{ownerState:n}=t,i=ir(t,QF);const u=typeof e=="function"?e(ae({ownerState:n},i)):e;if(Array.isArray(u))return u.flatMap(d=>av(d,ae({ownerState:n},i)));if(u&&typeof u=="object"&&Array.isArray(u.variants)){const{variants:d=[]}=u;let a=ir(u,e4);return d.forEach(b=>{let C=!0;typeof b.props=="function"?C=b.props(ae({ownerState:n},i,n)):Object.keys(b.props).forEach(I=>{(n==null?void 0:n[I])!==b.props[I]&&i[I]!==b.props[I]&&(C=!1)}),C&&(Array.isArray(a)||(a=[a]),a.push(typeof b.style=="function"?b.style(ae({ownerState:n},i,n)):b.style))}),a}return u}function _A(e={}){const{themeId:t,defaultTheme:n=o4,rootShouldForwardProp:i=lb,slotShouldForwardProp:u=lb}=e,d=f=>Bm(ae({},f,{theme:Cy(ae({},f,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(f,a={})=>{QB(f,Y=>Y.filter(q=>!(q!=null&&q.__mui_systemSx)));const{name:b,slot:C,skipVariantsResolver:I,skipSx:k,overridesResolver:M=a4(i4(C))}=a,R=ir(a,t4),$=I!==void 0?I:C&&C!=="Root"&&C!=="root"||!1,G=k||!1;let ee,F=lb;C==="Root"||C==="root"?F=i:C?F=u:n4(f)&&(F=void 0);const j=aA(f,ae({shouldForwardProp:F,label:ee},R)),O=Y=>typeof Y=="function"&&Y.__emotion_real!==Y||Gl(Y)?q=>av(Y,ae({},q,{theme:Cy({theme:q.theme,defaultTheme:n,themeId:t})})):Y,ne=(Y,...q)=>{let ce=O(Y);const he=q?q.map(O):[];b&&M&&he.push(Ee=>{const Be=Cy(ae({},Ee,{defaultTheme:n,themeId:t}));if(!Be.components||!Be.components[b]||!Be.components[b].styleOverrides)return null;const je=Be.components[b].styleOverrides,ot={};return Object.entries(je).forEach(([He,De])=>{ot[He]=av(De,ae({},Ee,{theme:Be}))}),M(Ee,ot)}),b&&!$&&he.push(Ee=>{var Be;const je=Cy(ae({},Ee,{defaultTheme:n,themeId:t})),ot=je==null||(Be=je.components)==null||(Be=Be[b])==null?void 0:Be.variants;return av({variants:ot},ae({},Ee,{theme:je}))}),G||he.push(d);const ze=he.length-q.length;if(Array.isArray(Y)&&ze>0){const Ee=new Array(ze).fill("");ce=[...Y,...Ee],ce.raw=[...Y.raw,...Ee]}const J=j(ce,...he);return f.muiName&&(J.muiName=f.muiName),J};return j.withConfig&&(ne.withConfig=j.withConfig),ne}}const s4=_A();function xA(e,t){const n=ae({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=ae({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const u=e[i]||{},d=t[i];n[i]={},!d||!Object.keys(d)?n[i]=u:!u||!Object.keys(u)?n[i]=d:(n[i]=ae({},d),Object.keys(u).forEach(f=>{n[i][f]=xA(u[f],d[f])}))}else n[i]===void 0&&(n[i]=e[i])}),n}function l4(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:xA(t.components[n].defaultProps,i)}function bA({props:e,name:t,defaultTheme:n,themeId:i}){let u=GS(n);return i&&(u=u[i]||u),l4({theme:u,name:t,props:e})}const qs=typeof window<"u"?L.useLayoutEffect:L.useEffect;function c4(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,u)=>u<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function wA(e){if(e.type)return e;if(e.charAt(0)==="#")return wA(c4(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(tm(9,e));let i=e.substring(t+1,e.length-1),u;if(n==="color"){if(i=i.split(" "),u=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(u)===-1)throw new Error(tm(10,u))}else i=i.split(",");return i=i.map(d=>parseFloat(d)),{type:n,values:i,colorSpace:u}}const lu=e=>{const t=wA(e);return t.values.slice(0,3).map((n,i)=>t.type.indexOf("hsl")!==-1&&i!==0?`${n}%`:n).join(" ")};function JT(...e){return e.reduce((t,n)=>n==null?t:function(...u){t.apply(this,u),n.apply(this,u)},()=>{})}function qS(e,t){var n,i;return L.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(i=e.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function vs(e){return e&&e.ownerDocument||document}function KS(e){return vs(e).defaultView||window}function Av(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let QT=0;function u4(e){const[t,n]=L.useState(e),i=e||t;return L.useEffect(()=>{t==null&&(QT+=1,n(`mui-${QT}`))},[t]),i}const eI=Q1.useId;function Ri(e){if(eI!==void 0){const t=eI();return e??t}return u4(e)}function uh({controlled:e,default:t,name:n,state:i="value"}){const{current:u}=L.useRef(e!==void 0),[d,f]=L.useState(t),a=u?e:d,b=L.useCallback(C=>{u||f(C)},[]);return[a,b]}function Xl(e){const t=L.useRef(e);return qs(()=>{t.current=e}),L.useRef((...n)=>(0,t.current)(...n)).current}function ln(...e){return L.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Av(n,t)})},e)}const tI={};function d4(e,t){const n=L.useRef(tI);return n.current===tI&&(n.current=e(t)),n}const h4=[];function p4(e){L.useEffect(e,h4)}class Fm{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Fm}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function Py(){const e=d4(Fm.create).current;return p4(e.disposeEffect),e}let B0=!0,nw=!1;const f4=new Fm,m4={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function g4(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&m4[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function y4(e){e.metaKey||e.altKey||e.ctrlKey||(B0=!0)}function cb(){B0=!1}function v4(){this.visibilityState==="hidden"&&nw&&(B0=!0)}function _4(e){e.addEventListener("keydown",y4,!0),e.addEventListener("mousedown",cb,!0),e.addEventListener("pointerdown",cb,!0),e.addEventListener("touchstart",cb,!0),e.addEventListener("visibilitychange",v4,!0)}function x4(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return B0||g4(t)}function XS(){const e=L.useCallback(u=>{u!=null&&_4(u.ownerDocument)},[]),t=L.useRef(!1);function n(){return t.current?(nw=!0,f4.start(100,()=>{nw=!1}),t.current=!1,!0):!1}function i(u){return x4(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:n,ref:e}}function b4(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const w4=e=>{const t=L.useRef({});return L.useEffect(()=>{t.current=e}),t.current},S4={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Vr(e,t,n=void 0){const i={};return Object.keys(e).forEach(u=>{i[u]=e[u].reduce((d,f)=>{if(f){const a=t(f);a!==""&&d.push(a),n&&n[f]&&d.push(n[f])}return d},[]).join(" ")}),i}function C4(e){return typeof e=="string"}function SA(e,t,n){return e===void 0||C4(e)?t:ae({},t,{ownerState:ae({},t.ownerState,n)})}function Wo(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{n[i]=e[i]}),n}function rI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function CA(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:u,className:d}=e;if(!t){const R=qn(n==null?void 0:n.className,d,u==null?void 0:u.className,i==null?void 0:i.className),$=ae({},n==null?void 0:n.style,u==null?void 0:u.style,i==null?void 0:i.style),G=ae({},n,u,i);return R.length>0&&(G.className=R),Object.keys($).length>0&&(G.style=$),{props:G,internalRef:void 0}}const f=Wo(ae({},u,i)),a=rI(i),b=rI(u),C=t(f),I=qn(C==null?void 0:C.className,n==null?void 0:n.className,d,u==null?void 0:u.className,i==null?void 0:i.className),k=ae({},C==null?void 0:C.style,n==null?void 0:n.style,u==null?void 0:u.style,i==null?void 0:i.style),M=ae({},C,n,b,a);return I.length>0&&(M.className=I),Object.keys(k).length>0&&(M.style=k),{props:M,internalRef:C.ref}}function PA(e,t,n){return typeof e=="function"?e(t,n):e}const P4=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function TA(e){var t;const{elementType:n,externalSlotProps:i,ownerState:u,skipResolvingSlotProps:d=!1}=e,f=ir(e,P4),a=d?{}:PA(i,u),{props:b,internalRef:C}=CA(ae({},f,{externalSlotProps:a})),I=ln(C,a==null?void 0:a.ref,(t=e.additionalProps)==null?void 0:t.ref);return SA(n,ae({},b,{ref:I}),u)}function YS(e){if(parseInt(L.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return(e==null?void 0:e.ref)||null}const IA=L.createContext(null);function JS(){return L.useContext(IA)}const T4=typeof Symbol=="function"&&Symbol.for,I4=T4?Symbol.for("mui.nested"):"__THEME_NESTED__";function E4(e,t){return typeof t=="function"?t(e):ae({},e,t)}function k4(e){const{children:t,theme:n}=e,i=JS(),u=L.useMemo(()=>{const d=i===null?n:E4(i,n);return d!=null&&(d[I4]=i!==null),d},[n,i]);return le.jsx(IA.Provider,{value:u,children:t})}const M4=["value"],R4=L.createContext();function A4(e){let{value:t}=e,n=ir(e,M4);return le.jsx(R4.Provider,ae({value:t??!0},n))}const z4=L.createContext(void 0);function D4({value:e,children:t}){return le.jsx(z4.Provider,{value:e,children:t})}const nI={};function oI(e,t,n,i=!1){return L.useMemo(()=>{const u=e&&t[e]||t;if(typeof n=="function"){const d=n(u),f=e?ae({},t,{[e]:d}):d;return i?()=>f:f}return e?ae({},t,{[e]:n}):ae({},t,n)},[e,t,n,i])}function L4(e){const{children:t,theme:n,themeId:i}=e,u=fA(nI),d=JS()||nI,f=oI(i,u,n),a=oI(i,d,n,!0),b=f.direction==="rtl";return le.jsx(k4,{theme:a,children:le.jsx($m.Provider,{value:f,children:le.jsx(A4,{value:b,children:le.jsx(D4,{value:f==null?void 0:f.components,children:t})})})})}const QS="mode",eC="color-scheme",EA="data-color-scheme";function $4(e){const{defaultMode:t="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:i="dark",modeStorageKey:u=QS,colorSchemeStorageKey:d=eC,attribute:f=EA,colorSchemeNode:a="document.documentElement",nonce:b}=e||{};return le.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?b:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${u}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${i}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${n}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${n}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${i}';
  }
  if (colorScheme) {
    ${a}.setAttribute('${f}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function iI(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function kA(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function O4(e){return kA(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function ub(e,t){if(typeof window>"u")return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch{}return n||t}function B4(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:i,supportedColorSchemes:u=[],modeStorageKey:d=QS,colorSchemeStorageKey:f=eC,storageWindow:a=typeof window>"u"?void 0:window}=e,b=u.join(","),[C,I]=L.useState(()=>{const ee=ub(d,t),F=ub(`${f}-light`,n),j=ub(`${f}-dark`,i);return{mode:ee,systemMode:iI(ee),lightColorScheme:F,darkColorScheme:j}}),k=O4(C),M=L.useCallback(ee=>{I(F=>{if(ee===F.mode)return F;const j=ee??t;try{localStorage.setItem(d,j)}catch{}return ae({},F,{mode:j,systemMode:iI(j)})})},[d,t]),R=L.useCallback(ee=>{ee?typeof ee=="string"?ee&&!b.includes(ee)?console.error(`\`${ee}\` does not exist in \`theme.colorSchemes\`.`):I(F=>{const j=ae({},F);return kA(F,O=>{try{localStorage.setItem(`${f}-${O}`,ee)}catch{}O==="light"&&(j.lightColorScheme=ee),O==="dark"&&(j.darkColorScheme=ee)}),j}):I(F=>{const j=ae({},F),O=ee.light===null?n:ee.light,ne=ee.dark===null?i:ee.dark;if(O)if(!b.includes(O))console.error(`\`${O}\` does not exist in \`theme.colorSchemes\`.`);else{j.lightColorScheme=O;try{localStorage.setItem(`${f}-light`,O)}catch{}}if(ne)if(!b.includes(ne))console.error(`\`${ne}\` does not exist in \`theme.colorSchemes\`.`);else{j.darkColorScheme=ne;try{localStorage.setItem(`${f}-dark`,ne)}catch{}}return j}):I(F=>{try{localStorage.setItem(`${f}-light`,n),localStorage.setItem(`${f}-dark`,i)}catch{}return ae({},F,{lightColorScheme:n,darkColorScheme:i})})},[b,f,n,i]),$=L.useCallback(ee=>{C.mode==="system"&&I(F=>{const j=ee!=null&&ee.matches?"dark":"light";return F.systemMode===j?F:ae({},F,{systemMode:j})})},[C.mode]),G=L.useRef($);return G.current=$,L.useEffect(()=>{const ee=(...j)=>G.current(...j),F=window.matchMedia("(prefers-color-scheme: dark)");return F.addListener(ee),ee(F),()=>{F.removeListener(ee)}},[]),L.useEffect(()=>{if(a){const ee=F=>{const j=F.newValue;typeof F.key=="string"&&F.key.startsWith(f)&&(!j||b.match(j))&&(F.key.endsWith("light")&&R({light:j}),F.key.endsWith("dark")&&R({dark:j})),F.key===d&&(!j||["light","dark","system"].includes(j))&&M(j||t)};return a.addEventListener("storage",ee),()=>{a.removeEventListener("storage",ee)}}},[R,M,d,f,b,t,a]),ae({},C,{colorScheme:k,setMode:M,setColorScheme:R})}const F4=["colorSchemes","components","generateCssVars","cssVarPrefix"],j4="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function N4(e){const{themeId:t,theme:n={},attribute:i=EA,modeStorageKey:u=QS,colorSchemeStorageKey:d=eC,defaultMode:f="light",defaultColorScheme:a,disableTransitionOnChange:b=!1,resolveTheme:C,excludeVariablesFromRoot:I}=e;(!n.colorSchemes||typeof a=="string"&&!n.colorSchemes[a]||typeof a=="object"&&!n.colorSchemes[a==null?void 0:a.light]||typeof a=="object"&&!n.colorSchemes[a==null?void 0:a.dark])&&console.error(`MUI: \`${a}\` does not exist in \`theme.colorSchemes\`.`);const k=L.createContext(void 0),M=()=>{const F=L.useContext(k);if(!F)throw new Error(tm(19));return F};function R(F){const{children:j,theme:O=n,modeStorageKey:ne=u,colorSchemeStorageKey:Y=d,attribute:q=i,defaultMode:ce=f,defaultColorScheme:he=a,disableTransitionOnChange:ze=b,storageWindow:J=typeof window>"u"?void 0:window,documentNode:Ee=typeof document>"u"?void 0:document,colorSchemeNode:Be=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:je=":root",disableNestedContext:ot=!1,disableStyleSheetGeneration:He=!1}=F,De=L.useRef(!1),Ge=JS(),Ue=L.useContext(k),Ze=!!Ue&&!ot,at=O[t],pt=at||O,{colorSchemes:ct={},components:Ht={},generateCssVars:Dt=()=>({vars:{},css:{}}),cssVarPrefix:Nt}=pt,tr=ir(pt,F4),Tt=Object.keys(ct),st=typeof he=="string"?he:he.light,Ct=typeof he=="string"?he:he.dark,{mode:Mt,setMode:qt,systemMode:nr,lightColorScheme:ur,darkColorScheme:gr,colorScheme:Kt,setColorScheme:Lt}=B4({supportedColorSchemes:Tt,defaultLightColorScheme:st,defaultDarkColorScheme:Ct,modeStorageKey:ne,colorSchemeStorageKey:Y,defaultMode:ce,storageWindow:J});let Qt=Mt,Vt=Kt;Ze&&(Qt=Ue.mode,Vt=Ue.colorScheme);const mr=Qt||(ce==="system"?f:ce),kr=Vt||(mr==="dark"?Ct:st),{css:Ur,vars:Lr}=Dt(),pr=ae({},tr,{components:Ht,colorSchemes:ct,cssVarPrefix:Nt,vars:Lr,getColorSchemeSelector:Jt=>`[${q}="${Jt}"] &`}),$r={},jr={};Object.entries(ct).forEach(([Jt,yr])=>{const{css:wr,vars:_e}=Dt(Jt);pr.vars=Ji(pr.vars,_e),Jt===kr&&(Object.keys(yr).forEach(te=>{yr[te]&&typeof yr[te]=="object"?pr[te]=ae({},pr[te],yr[te]):pr[te]=yr[te]}),pr.palette&&(pr.palette.colorScheme=Jt));const X=typeof he=="string"?he:ce==="dark"?he.dark:he.light;if(Jt===X){if(I){const te={};I(Nt).forEach(H=>{te[H]=wr[H],delete wr[H]}),$r[`[${q}="${Jt}"]`]=te}$r[`${je}, [${q}="${Jt}"]`]=wr}else jr[`${je===":root"?"":je}[${q}="${Jt}"]`]=wr}),pr.vars=Ji(pr.vars,Lr),L.useEffect(()=>{Vt&&Be&&Be.setAttribute(q,Vt)},[Vt,q,Be]),L.useEffect(()=>{let Jt;if(ze&&De.current&&Ee){const yr=Ee.createElement("style");yr.appendChild(Ee.createTextNode(j4)),Ee.head.appendChild(yr),window.getComputedStyle(Ee.body),Jt=setTimeout(()=>{Ee.head.removeChild(yr)},1)}return()=>{clearTimeout(Jt)}},[Vt,ze,Ee]),L.useEffect(()=>(De.current=!0,()=>{De.current=!1}),[]);const br=L.useMemo(()=>({allColorSchemes:Tt,colorScheme:Vt,darkColorScheme:gr,lightColorScheme:ur,mode:Qt,setColorScheme:Lt,setMode:qt,systemMode:nr}),[Tt,Vt,gr,ur,Qt,Lt,qt,nr]);let dr=!0;(He||Ze&&(Ge==null?void 0:Ge.cssVarPrefix)===Nt)&&(dr=!1);const ar=le.jsxs(L.Fragment,{children:[dr&&le.jsxs(L.Fragment,{children:[le.jsx(iv,{styles:{[je]:Ur}}),le.jsx(iv,{styles:$r}),le.jsx(iv,{styles:jr})]}),le.jsx(L4,{themeId:at?t:void 0,theme:C?C(pr):pr,children:j})]});return Ze?ar:le.jsx(k.Provider,{value:br,children:ar})}const $=typeof a=="string"?a:a.light,G=typeof a=="string"?a:a.dark;return{CssVarsProvider:R,useColorScheme:M,getInitColorSchemeScript:F=>$4(ae({attribute:i,colorSchemeStorageKey:d,defaultMode:f,defaultLightColorScheme:$,defaultDarkColorScheme:G,modeStorageKey:u},F))}}function tC(e=""){function t(...i){if(!i.length)return"";const u=i[0];return typeof u=="string"&&!u.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${u}${t(...i.slice(1))})`:`, ${u}`}return(i,...u)=>`var(--${e?`${e}-`:""}${i}${t(...u)})`}const aI=(e,t,n,i=[])=>{let u=e;t.forEach((d,f)=>{f===t.length-1?Array.isArray(u)?u[Number(d)]=n:u&&typeof u=="object"&&(u[d]=n):u&&typeof u=="object"&&(u[d]||(u[d]=i.includes(d)?[]:{}),u=u[d])})},V4=(e,t,n)=>{function i(u,d=[],f=[]){Object.entries(u).forEach(([a,b])=>{(!n||!n([...d,a]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?i(b,[...d,a],Array.isArray(b)?[...f,a]:f):t([...d,a],b,f))})}i(e)},U4=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>e.includes(i))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function db(e,t){const{prefix:n,shouldSkipGeneratingVar:i}=t,u={},d={},f={};return V4(e,(a,b,C)=>{if((typeof b=="string"||typeof b=="number")&&(!i||!i(a,b))){const I=`--${n?`${n}-`:""}${a.join("-")}`;Object.assign(u,{[I]:U4(a,b)}),aI(d,a,`var(${I})`,C),aI(f,a,`var(${I}, ${b})`,C)}},a=>a[0]==="vars"),{css:u,vars:d,varsWithDefaults:f}}function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function H4(e,t){if(im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(im(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function G4(e){var t=H4(e,"string");return im(t)=="symbol"?t:t+""}const W4=["colorSchemes","components","defaultColorScheme"];function Z4(e,t){const{colorSchemes:n={},defaultColorScheme:i="light"}=e,u=ir(e,W4),{vars:d,css:f,varsWithDefaults:a}=db(u,t);let b=a;const C={},{[i]:I}=n,k=ir(n,[i].map(G4));if(Object.entries(k||{}).forEach(([R,$])=>{const{vars:G,css:ee,varsWithDefaults:F}=db($,t);b=Ji(b,F),C[R]={css:ee,vars:G}}),I){const{css:R,vars:$,varsWithDefaults:G}=db(I,t);b=Ji(b,G),C[i]={css:R,vars:$}}return{vars:b,generateCssVars:R=>{var $;if(!R){var G;const F=ae({},f);return{css:F,vars:d,selector:(t==null||(G=t.getSelector)==null?void 0:G.call(t,R,F))||":root"}}const ee=ae({},C[R].css);return{css:ee,vars:C[R].vars,selector:(t==null||($=t.getSelector)==null?void 0:$.call(t,R,ee))||":root"}}}}const q4=["component","direction","spacing","divider","children","className","useFlexGap"],K4=HS(),X4=s4("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Y4(e){return bA({props:e,name:"MuiStack",defaultTheme:K4})}function J4(e,t){const n=L.Children.toArray(e).filter(Boolean);return n.reduce((i,u,d)=>(i.push(u),d<n.length-1&&i.push(L.cloneElement(t,{key:`separator-${d}`})),i),[])}const Q4=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],ej=({ownerState:e,theme:t})=>{let n=ae({display:"flex",flexDirection:"column"},Za({theme:t},sb({values:e.direction,breakpoints:t.breakpoints.values}),i=>({flexDirection:i})));if(e.spacing){const i=VS(t),u=Object.keys(t.breakpoints.values).reduce((b,C)=>((typeof e.spacing=="object"&&e.spacing[C]!=null||typeof e.direction=="object"&&e.direction[C]!=null)&&(b[C]=!0),b),{}),d=sb({values:e.direction,base:u}),f=sb({values:e.spacing,base:u});typeof d=="object"&&Object.keys(d).forEach((b,C,I)=>{if(!d[b]){const M=C>0?d[I[C-1]]:"column";d[b]=M}}),n=Ji(n,Za({theme:t},f,(b,C)=>e.useFlexGap?{gap:Pu(i,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Q4(C?d[C]:e.direction)}`]:Pu(i,b)}}))}return n=nF(t.breakpoints,n),n};function tj(e={}){const{createStyledComponent:t=X4,useThemeProps:n=Y4,componentName:i="MuiStack"}=e,u=()=>Vr({root:["root"]},b=>ZS(i,b),{}),d=t(ej);return L.forwardRef(function(b,C){const I=n(b),k=WS(I),{component:M="div",direction:R="column",spacing:$=0,divider:G,children:ee,className:F,useFlexGap:j=!1}=k,O=ir(k,q4),ne={direction:R,spacing:$,useFlexGap:j},Y=u();return le.jsx(d,ae({as:M,ownerState:ne,ref:C,className:qn(Y.root,F)},O,{children:G?J4(ee,G):ee}))})}const rj=ae({},O0,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function nj(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Wr=(e,t)=>ZS(e,t,"Mui"),Fr=(e,t)=>vA(e,t,"Mui"),oj=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var n;return(n=t.match)==null?void 0:n.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),sI=(e,t,n)=>{t.includes("Color")&&(e.color=n),t.includes("Bg")&&(e.backgroundColor=n),t.includes("Border")&&(e.borderColor=n)},lI=(e,t,n)=>{const i={};return Object.entries(t||{}).forEach(([u,d])=>{if(u.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const f=n?n(u):d;u.includes("Disabled")&&(i.pointerEvents="none",i.cursor="default",i["--Icon-color"]="currentColor"),u.match(/(Hover|Active|Disabled)/)||(i["--variant-borderWidth"]||(i["--variant-borderWidth"]="0px"),u.includes("Border")&&(i["--variant-borderWidth"]="1px",i.border="var(--variant-borderWidth) solid")),sI(i,u,f)}}),i},ti=(e,t)=>{let n={};{const{getCssVar:i,palette:u}=t;Object.entries(u).forEach(d=>{const[f,a]=d;oj(a)&&typeof a=="object"&&(n=ae({},n,{[f]:lI(e,a,b=>`var(--variant-${b}, ${i(`palette-${f}-${b}`,u[f][b])})`)}))})}return n.context=lI(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),n},ij=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],aj=["colorSchemes"],sj=(e="joy")=>tC(e);function MA(e){var t,n,i,u,d,f,a,b,C,I;const k=e||{},{cssVarPrefix:M="joy",breakpoints:R,spacing:$,components:G,variants:ee,shouldSkipGeneratingVar:F=nj}=k,j=ir(k,ij),O=sj(M),ne={primary:lf.blue,neutral:lf.grey,danger:lf.red,success:lf.green,warning:lf.yellow,common:{white:"#FFF",black:"#000"}},Y=st=>{var Ct;const Mt=st.split("-"),qt=Mt[1],nr=Mt[2];return O(st,(Ct=ne[qt])==null?void 0:Ct[nr])},q=st=>({plainColor:Y(`palette-${st}-500`),plainHoverBg:Y(`palette-${st}-100`),plainActiveBg:Y(`palette-${st}-200`),plainDisabledColor:Y("palette-neutral-400"),outlinedColor:Y(`palette-${st}-500`),outlinedBorder:Y(`palette-${st}-300`),outlinedHoverBg:Y(`palette-${st}-100`),outlinedActiveBg:Y(`palette-${st}-200`),outlinedDisabledColor:Y("palette-neutral-400"),outlinedDisabledBorder:Y("palette-neutral-200"),softColor:Y(`palette-${st}-700`),softBg:Y(`palette-${st}-100`),softHoverBg:Y(`palette-${st}-200`),softActiveColor:Y(`palette-${st}-800`),softActiveBg:Y(`palette-${st}-300`),softDisabledColor:Y("palette-neutral-400"),softDisabledBg:Y("palette-neutral-50"),solidColor:Y("palette-common-white"),solidBg:Y(`palette-${st}-500`),solidHoverBg:Y(`palette-${st}-600`),solidActiveBg:Y(`palette-${st}-700`),solidDisabledColor:Y("palette-neutral-400"),solidDisabledBg:Y("palette-neutral-100")}),ce=st=>({plainColor:Y(`palette-${st}-300`),plainHoverBg:Y(`palette-${st}-800`),plainActiveBg:Y(`palette-${st}-700`),plainDisabledColor:Y("palette-neutral-500"),outlinedColor:Y(`palette-${st}-200`),outlinedBorder:Y(`palette-${st}-700`),outlinedHoverBg:Y(`palette-${st}-800`),outlinedActiveBg:Y(`palette-${st}-700`),outlinedDisabledColor:Y("palette-neutral-500"),outlinedDisabledBorder:Y("palette-neutral-800"),softColor:Y(`palette-${st}-200`),softBg:Y(`palette-${st}-800`),softHoverBg:Y(`palette-${st}-700`),softActiveColor:Y(`palette-${st}-100`),softActiveBg:Y(`palette-${st}-600`),softDisabledColor:Y("palette-neutral-500"),softDisabledBg:Y("palette-neutral-800"),solidColor:Y("palette-common-white"),solidBg:Y(`palette-${st}-500`),solidHoverBg:Y(`palette-${st}-600`),solidActiveBg:Y(`palette-${st}-700`),solidDisabledColor:Y("palette-neutral-500"),solidDisabledBg:Y("palette-neutral-800")}),he={palette:{mode:"light",primary:ae({},ne.primary,q("primary")),neutral:ae({},ne.neutral,q("neutral"),{plainColor:Y("palette-neutral-700"),plainHoverColor:Y("palette-neutral-900"),outlinedColor:Y("palette-neutral-700")}),danger:ae({},ne.danger,q("danger")),success:ae({},ne.success,q("success")),warning:ae({},ne.warning,q("warning")),common:{white:"#FFF",black:"#000"},text:{primary:Y("palette-neutral-800"),secondary:Y("palette-neutral-700"),tertiary:Y("palette-neutral-600"),icon:Y("palette-neutral-500")},background:{body:Y("palette-common-white"),surface:Y("palette-neutral-50"),popup:Y("palette-common-white"),level1:Y("palette-neutral-100"),level2:Y("palette-neutral-200"),level3:Y("palette-neutral-300"),tooltip:Y("palette-neutral-500"),backdrop:`rgba(${O("palette-neutral-darkChannel",lu(ne.neutral[900]))} / 0.25)`},divider:`rgba(${O("palette-neutral-mainChannel",lu(ne.neutral[500]))} / 0.2)`,focusVisible:Y("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},ze={palette:{mode:"dark",primary:ae({},ne.primary,ce("primary")),neutral:ae({},ne.neutral,ce("neutral"),{plainColor:Y("palette-neutral-300"),plainHoverColor:Y("palette-neutral-300")}),danger:ae({},ne.danger,ce("danger")),success:ae({},ne.success,ce("success")),warning:ae({},ne.warning,ce("warning")),common:{white:"#FFF",black:"#000"},text:{primary:Y("palette-neutral-100"),secondary:Y("palette-neutral-300"),tertiary:Y("palette-neutral-400"),icon:Y("palette-neutral-400")},background:{body:Y("palette-common-black"),surface:Y("palette-neutral-900"),popup:Y("palette-common-black"),level1:Y("palette-neutral-800"),level2:Y("palette-neutral-700"),level3:Y("palette-neutral-600"),tooltip:Y("palette-neutral-600"),backdrop:`rgba(${O("palette-neutral-darkChannel",lu(ne.neutral[50]))} / 0.25)`},divider:`rgba(${O("palette-neutral-mainChannel",lu(ne.neutral[500]))} / 0.16)`,focusVisible:Y("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},J='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Ee=ae({body:`"Inter", ${O(`fontFamily-fallback, ${J}`)}`,display:`"Inter", ${O(`fontFamily-fallback, ${J}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:J},j.fontFamily),Be=ae({sm:300,md:500,lg:600,xl:700},j.fontWeight),je=ae({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},j.fontSize),ot=ae({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},j.lineHeight),He=(t=(n=j.colorSchemes)==null||(n=n.light)==null?void 0:n.shadowRing)!=null?t:he.shadowRing,De=(i=(u=j.colorSchemes)==null||(u=u.light)==null?void 0:u.shadowChannel)!=null?i:he.shadowChannel,Ge=(d=(f=j.colorSchemes)==null||(f=f.light)==null?void 0:f.shadowOpacity)!=null?d:he.shadowOpacity,Ue={colorSchemes:{light:he,dark:ze},fontSize:je,fontFamily:Ee,fontWeight:Be,focus:{thickness:"2px",selector:`&.${Wr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${O("focus-thickness",(a=(b=j.focus)==null?void 0:b.thickness)!=null?a:"2px")})`,outline:`${O("focus-thickness",(C=(I=j.focus)==null?void 0:I.thickness)!=null?C:"2px")} solid ${O("palette-focusVisible",ne.primary[500])}`}},lineHeight:ot,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${O("shadowRing",He)}, 0px 1px 2px 0px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)})`,sm:`${O("shadowRing",He)}, 0px 1px 2px 0px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)}), 0px 2px 4px 0px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)})`,md:`${O("shadowRing",He)}, 0px 2px 8px -2px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)}), 0px 6px 12px -2px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)})`,lg:`${O("shadowRing",He)}, 0px 2px 8px -2px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)}), 0px 12px 16px -4px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)})`,xl:`${O("shadowRing",He)}, 0px 2px 8px -2px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)}), 0px 20px 24px -4px rgba(${O("shadowChannel",De)} / ${O("shadowOpacity",Ge)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:O(`fontFamily-display, ${Ee.display}`),fontWeight:O(`fontWeight-xl, ${Be.xl}`),fontSize:O(`fontSize-xl4, ${je.xl4}`),lineHeight:O(`lineHeight-xs, ${ot.xs}`),letterSpacing:"-0.025em",color:O(`palette-text-primary, ${he.palette.text.primary}`)},h2:{fontFamily:O(`fontFamily-display, ${Ee.display}`),fontWeight:O(`fontWeight-xl, ${Be.xl}`),fontSize:O(`fontSize-xl3, ${je.xl3}`),lineHeight:O(`lineHeight-xs, ${ot.xs}`),letterSpacing:"-0.025em",color:O(`palette-text-primary, ${he.palette.text.primary}`)},h3:{fontFamily:O(`fontFamily-display, ${Ee.display}`),fontWeight:O(`fontWeight-lg, ${Be.lg}`),fontSize:O(`fontSize-xl2, ${je.xl2}`),lineHeight:O(`lineHeight-xs, ${ot.xs}`),letterSpacing:"-0.025em",color:O(`palette-text-primary, ${he.palette.text.primary}`)},h4:{fontFamily:O(`fontFamily-display, ${Ee.display}`),fontWeight:O(`fontWeight-lg, ${Be.lg}`),fontSize:O(`fontSize-xl, ${je.xl}`),lineHeight:O(`lineHeight-md, ${ot.md}`),letterSpacing:"-0.025em",color:O(`palette-text-primary, ${he.palette.text.primary}`)},"title-lg":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontWeight:O(`fontWeight-lg, ${Be.lg}`),fontSize:O(`fontSize-lg, ${je.lg}`),lineHeight:O(`lineHeight-xs, ${ot.xs}`),color:O(`palette-text-primary, ${he.palette.text.primary}`)},"title-md":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontWeight:O(`fontWeight-md, ${Be.md}`),fontSize:O(`fontSize-md, ${je.md}`),lineHeight:O(`lineHeight-md, ${ot.md}`),color:O(`palette-text-primary, ${he.palette.text.primary}`)},"title-sm":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontWeight:O(`fontWeight-md, ${Be.md}`),fontSize:O(`fontSize-sm, ${je.sm}`),lineHeight:O(`lineHeight-sm, ${ot.sm}`),color:O(`palette-text-primary, ${he.palette.text.primary}`)},"body-lg":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontSize:O(`fontSize-lg, ${je.lg}`),lineHeight:O(`lineHeight-md, ${ot.md}`),color:O(`palette-text-secondary, ${he.palette.text.secondary}`)},"body-md":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontSize:O(`fontSize-md, ${je.md}`),lineHeight:O(`lineHeight-md, ${ot.md}`),color:O(`palette-text-secondary, ${he.palette.text.secondary}`)},"body-sm":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontSize:O(`fontSize-sm, ${je.sm}`),lineHeight:O(`lineHeight-md, ${ot.md}`),color:O(`palette-text-tertiary, ${he.palette.text.tertiary}`)},"body-xs":{fontFamily:O(`fontFamily-body, ${Ee.body}`),fontWeight:O(`fontWeight-md, ${Be.md}`),fontSize:O(`fontSize-xs, ${je.xs}`),lineHeight:O(`lineHeight-md, ${ot.md}`),color:O(`palette-text-tertiary, ${he.palette.text.tertiary}`)}}},Ze=j?Ji(Ue,j):Ue,{colorSchemes:at}=Ze,pt=ir(Ze,aj),ct=ae({colorSchemes:at},pt,{breakpoints:lA(R??{}),components:Ji({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:st,theme:Ct})=>{var Mt;const qt=st.instanceFontSize;return ae({margin:"var(--Icon-margin)"},st.fontSize&&st.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${Ct.vars.fontSize[st.fontSize]})`},!st.htmlColor&&ae({color:`var(--Icon-color, ${ct.vars.palette.text.icon})`},st.color&&st.color!=="inherit"&&Ct.vars.palette[st.color]&&{color:`rgba(${(Mt=Ct.vars.palette[st.color])==null?void 0:Mt.mainChannel} / 1)`}),qt&&qt!=="inherit"&&{"--Icon-fontSize":Ct.vars.fontSize[qt]})}}}},G),cssVarPrefix:M,getCssVar:O,spacing:hA($)});function Ht(st,Ct){Object.keys(Ct).forEach(Mt=>{const qt={main:"500",light:"200",dark:"700"};st==="dark"&&(qt.main=400),!Ct[Mt].mainChannel&&Ct[Mt][qt.main]&&(Ct[Mt].mainChannel=lu(Ct[Mt][qt.main])),!Ct[Mt].lightChannel&&Ct[Mt][qt.light]&&(Ct[Mt].lightChannel=lu(Ct[Mt][qt.light])),!Ct[Mt].darkChannel&&Ct[Mt][qt.dark]&&(Ct[Mt].darkChannel=lu(Ct[Mt][qt.dark]))})}Object.entries(ct.colorSchemes).forEach(([st,Ct])=>{Ht(st,Ct.palette)});const Dt={prefix:M,shouldSkipGeneratingVar:F},{vars:Nt,generateCssVars:tr}=Z4(ae({colorSchemes:at},pt),Dt);ct.vars=Nt,ct.generateCssVars=tr,ct.unstable_sxConfig=ae({},rj,e==null?void 0:e.unstable_sxConfig),ct.unstable_sx=function(Ct){return Bm({sx:Ct,theme:this})},ct.getColorSchemeSelector=st=>st==="light"?"&":`&[data-joy-color-scheme="${st}"], [data-joy-color-scheme="${st}"] &`;const Tt={getCssVar:O,palette:ct.colorSchemes.light.palette};return ct.variants=Ji({plain:ti("plain",Tt),plainHover:ti("plainHover",Tt),plainActive:ti("plainActive",Tt),plainDisabled:ti("plainDisabled",Tt),outlined:ti("outlined",Tt),outlinedHover:ti("outlinedHover",Tt),outlinedActive:ti("outlinedActive",Tt),outlinedDisabled:ti("outlinedDisabled",Tt),soft:ti("soft",Tt),softHover:ti("softHover",Tt),softActive:ti("softActive",Tt),softDisabled:ti("softDisabled",Tt),solid:ti("solid",Tt),solidHover:ti("solidHover",Tt),solidActive:ti("solidActive",Tt),solidDisabled:ti("solidDisabled",Tt)},ee),ct.palette=ae({},ct.colorSchemes.light.palette,{colorScheme:"light"}),ct.shouldSkipGeneratingVar=F,ct.applyStyles=pA,ct}const Vh=MA(),uf={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:lj,useColorScheme:rC,getInitColorSchemeScript:ine}=N4({themeId:zm,theme:Vh,attribute:uf.attribute,modeStorageKey:uf.modeStorageKey,colorSchemeStorageKey:uf.colorSchemeStorageKey,defaultColorScheme:{light:uf.defaultLightColorScheme,dark:uf.defaultDarkColorScheme}}),kt=_A({defaultTheme:Vh,themeId:zm});function Zr({props:e,name:t}){return bA({props:e,name:t,defaultTheme:ae({},Vh,{components:{}}),themeId:zm})}function cj(e){return le.jsx(ZF,ae({},e,{defaultTheme:Vh,themeId:zm}))}function cI(e,t,n=(i,u)=>i===u){return e.length===t.length&&e.every((i,u)=>n(i,t[u]))}const uj={disableDefaultClasses:!1},dj=L.createContext(uj);function hj(e){const{disableDefaultClasses:t}=L.useContext(dj);return n=>t?"":e(n)}function pj(e){const{rootElementName:t="",componentName:n}=e,[i,u]=L.useState(t.toUpperCase()),d=L.useCallback(f=>{var a;u((a=f==null?void 0:f.tagName)!=null?a:"")},[]);return[i,d]}const RA="base";function fj(e){return`${RA}--${e}`}function mj(e,t){return`${RA}-${e}-${t}`}function AA(e,t){const n=yA[t];return n?fj(n):mj(e,t)}function gj(e,t){const n={};return t.forEach(i=>{n[i]=AA(e,i)}),n}function Cs(e={}){const{disabled:t=!1,focusableWhenDisabled:n,href:i,rootRef:u,tabIndex:d,to:f,type:a,rootElementName:b}=e,C=L.useRef(null),[I,k]=L.useState(!1),{isFocusVisibleRef:M,onFocus:R,onBlur:$,ref:G}=XS(),[ee,F]=L.useState(!1);t&&!n&&ee&&F(!1),L.useEffect(()=>{M.current=ee},[ee,M]);const[j,O]=pj({rootElementName:b??(i||f?"a":void 0),componentName:"Button"}),ne=He=>De=>{var Ge;ee&&De.preventDefault(),(Ge=He.onMouseLeave)==null||Ge.call(He,De)},Y=He=>De=>{var Ge;$(De),M.current===!1&&F(!1),(Ge=He.onBlur)==null||Ge.call(He,De)},q=He=>De=>{var Ge;if(C.current||(C.current=De.currentTarget),R(De),M.current===!0){var Ue;F(!0),(Ue=He.onFocusVisible)==null||Ue.call(He,De)}(Ge=He.onFocus)==null||Ge.call(He,De)},ce=()=>{const He=C.current;return j==="BUTTON"||j==="INPUT"&&["button","submit","reset"].includes(He==null?void 0:He.type)||j==="A"&&(He==null?void 0:He.href)},he=He=>De=>{if(!t){var Ge;(Ge=He.onClick)==null||Ge.call(He,De)}},ze=He=>De=>{var Ge;t||(k(!0),document.addEventListener("mouseup",()=>{k(!1)},{once:!0})),(Ge=He.onMouseDown)==null||Ge.call(He,De)},J=He=>De=>{var Ge;if((Ge=He.onKeyDown)==null||Ge.call(He,De),!De.defaultMuiPrevented&&(De.target===De.currentTarget&&!ce()&&De.key===" "&&De.preventDefault(),De.target===De.currentTarget&&De.key===" "&&!t&&k(!0),De.target===De.currentTarget&&!ce()&&De.key==="Enter"&&!t)){var Ue;(Ue=He.onClick)==null||Ue.call(He,De),De.preventDefault()}},Ee=He=>De=>{var Ge;if(De.target===De.currentTarget&&k(!1),(Ge=He.onKeyUp)==null||Ge.call(He,De),De.target===De.currentTarget&&!ce()&&!t&&De.key===" "&&!De.defaultMuiPrevented){var Ue;(Ue=He.onClick)==null||Ue.call(He,De)}},Be=ln(O,u,G,C),je={};return d!==void 0&&(je.tabIndex=d),j==="BUTTON"?(je.type=a??"button",n?je["aria-disabled"]=t:je.disabled=t):j==="INPUT"?a&&["button","submit","reset"].includes(a)&&(n?je["aria-disabled"]=t:je.disabled=t):j!==""&&(!i&&!f&&(je.role="button",je.tabIndex=d??0),t&&(je["aria-disabled"]=t,je.tabIndex=n?d??0:-1)),{getRootProps:(He={})=>{const De=ae({},Wo(e),Wo(He)),Ge=ae({type:a},De,je,He,{onBlur:Y(De),onClick:he(De),onFocus:q(De),onKeyDown:J(De),onKeyUp:Ee(De),onMouseDown:ze(De),onMouseLeave:ne(De),ref:Be});return delete Ge.onFocusVisible,Ge},focusVisible:ee,setFocusVisible:F,active:I,rootRef:Be}}const F0=L.createContext(null);function yj(e,t){return e===t}const hb={},uI=()=>{};function ow(e,t){const n=ae({},e);return Object.keys(t).forEach(i=>{t[i]!==void 0&&(n[i]=t[i])}),n}function vj(e){const{nextState:t,initialState:n,stateComparers:i,onStateChange:u,controlledProps:d,lastActionRef:f}=e,a=L.useRef(n);L.useEffect(()=>{if(f.current===null)return;const b=ow(a.current,d);Object.keys(t).forEach(C=>{var I;const k=(I=i[C])!=null?I:yj,M=t[C],R=b[C];if(R==null&&M!=null||R!=null&&M==null||R!=null&&M!=null&&!k(M,R)){var $,G;u==null||u(($=f.current.event)!=null?$:null,C,M,(G=f.current.type)!=null?G:"",t)}}),a.current=t,f.current=null},[a,t,f,u,i,d])}function zA(e){const t=L.useRef(null),{reducer:n,initialState:i,controlledProps:u=hb,stateComparers:d=hb,onStateChange:f=uI,actionContext:a,componentName:b=""}=e;L.useRef(u);const C=L.useCallback((R,$)=>{t.current=$;const G=ow(R,u);return n(G,$)},[u,n]),[I,k]=L.useReducer(C,i),M=L.useCallback(R=>{k(ae({},R,{context:a}))},[a]);return vj({nextState:I,initialState:i,stateComparers:d??hb,onStateChange:f??uI,controlledProps:u,lastActionRef:t}),[ow(I,u),M]}const Ha={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function _j(e,t){switch(t.type){case Ha.blur:return{open:!1,changeReason:t.event};case Ha.escapeKeyDown:return{open:!1,changeReason:t.event};case Ha.toggle:return{open:!e.open,changeReason:t.event};case Ha.open:return{open:!0,changeReason:t.event};case Ha.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function xj(e={}){const{defaultOpen:t,onOpenChange:n,open:i,componentName:u="useDropdown"}=e,[d,f]=L.useState(""),[a,b]=L.useState(null),C=L.useRef(null),I=L.useCallback((G,ee,F,j)=>{ee==="open"&&(n==null||n(G,F)),C.current=j},[n]),k=L.useMemo(()=>i!==void 0?{open:i}:{},[i]),[M,R]=zA({controlledProps:k,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:I,reducer:_j,componentName:u});return L.useEffect(()=>{!M.open&&C.current!==null&&C.current!==Ha.blur&&(a==null||a.focus())},[M.open,a]),{contextValue:{state:M,dispatch:R,popupId:d,registerPopup:f,registerTrigger:b,triggerElement:a},open:M.open}}function bj(e){const{children:t,open:n,defaultOpen:i,onOpenChange:u}=e,{contextValue:d}=xj({defaultOpen:i,onOpenChange:u,open:n});return le.jsx(F0.Provider,{value:d,children:t})}const wj=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Sj(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Cj(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Pj(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Cj(e))}function Tj(e){const t=[],n=[];return Array.from(e.querySelectorAll(wj)).forEach((i,u)=>{const d=Sj(i);d===-1||!Pj(i)||(d===0?t.push(i):n.push({documentOrder:u,tabIndex:d,node:i}))}),n.sort((i,u)=>i.tabIndex===u.tabIndex?i.documentOrder-u.documentOrder:i.tabIndex-u.tabIndex).map(i=>i.node).concat(t)}function Ij(){return!0}function Ej(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:u=!1,getTabbable:d=Tj,isEnabled:f=Ij,open:a}=e,b=L.useRef(!1),C=L.useRef(null),I=L.useRef(null),k=L.useRef(null),M=L.useRef(null),R=L.useRef(!1),$=L.useRef(null),G=ln(YS(t),$),ee=L.useRef(null);L.useEffect(()=>{!a||!$.current||(R.current=!n)},[n,a]),L.useEffect(()=>{if(!a||!$.current)return;const O=vs($.current);return $.current.contains(O.activeElement)||($.current.hasAttribute("tabIndex")||$.current.setAttribute("tabIndex","-1"),R.current&&$.current.focus()),()=>{u||(k.current&&k.current.focus&&(b.current=!0,k.current.focus()),k.current=null)}},[a]),L.useEffect(()=>{if(!a||!$.current)return;const O=vs($.current),ne=ce=>{ee.current=ce,!(i||!f()||ce.key!=="Tab")&&O.activeElement===$.current&&ce.shiftKey&&(b.current=!0,I.current&&I.current.focus())},Y=()=>{const ce=$.current;if(ce===null)return;if(!O.hasFocus()||!f()||b.current){b.current=!1;return}if(ce.contains(O.activeElement)||i&&O.activeElement!==C.current&&O.activeElement!==I.current)return;if(O.activeElement!==M.current)M.current=null;else if(M.current!==null)return;if(!R.current)return;let he=[];if((O.activeElement===C.current||O.activeElement===I.current)&&(he=d($.current)),he.length>0){var ze,J;const Ee=!!((ze=ee.current)!=null&&ze.shiftKey&&((J=ee.current)==null?void 0:J.key)==="Tab"),Be=he[0],je=he[he.length-1];typeof Be!="string"&&typeof je!="string"&&(Ee?je.focus():Be.focus())}else ce.focus()};O.addEventListener("focusin",Y),O.addEventListener("keydown",ne,!0);const q=setInterval(()=>{O.activeElement&&O.activeElement.tagName==="BODY"&&Y()},50);return()=>{clearInterval(q),O.removeEventListener("focusin",Y),O.removeEventListener("keydown",ne,!0)}},[n,i,u,f,a,d]);const F=O=>{k.current===null&&(k.current=O.relatedTarget),R.current=!0,M.current=O.target;const ne=t.props.onFocus;ne&&ne(O)},j=O=>{k.current===null&&(k.current=O.relatedTarget),R.current=!0};return le.jsxs(L.Fragment,{children:[le.jsx("div",{tabIndex:a?0:-1,onFocus:j,ref:C,"data-testid":"sentinelStart"}),L.cloneElement(t,{ref:G,onFocus:F}),le.jsx("div",{tabIndex:a?0:-1,onFocus:j,ref:I,"data-testid":"sentinelEnd"})]})}const kj=L.createContext(void 0);function Mj(){return L.useContext(kj)}function Rj(e={}){const{defaultValue:t,disabled:n=!1,error:i=!1,onBlur:u,onChange:d,onFocus:f,required:a=!1,value:b,inputRef:C}=e,I=Mj();let k,M,R,$,G;if(I){var ee,F,j;k=void 0,M=(ee=I.disabled)!=null?ee:!1,R=(F=I.error)!=null?F:!1,$=(j=I.required)!=null?j:!1,G=I.value}else k=t,M=n,R=i,$=a,G=b;const{current:O}=L.useRef(G!=null),ne=L.useCallback(He=>{},[]),Y=L.useRef(null),q=ln(Y,C,ne),[ce,he]=L.useState(!1);L.useEffect(()=>{!I&&M&&ce&&(he(!1),u==null||u())},[I,M,ce,u]);const ze=He=>De=>{var Ge;if(I!=null&&I.disabled){De.stopPropagation();return}if((Ge=He.onFocus)==null||Ge.call(He,De),I&&I.onFocus){var Ue;I==null||(Ue=I.onFocus)==null||Ue.call(I)}else he(!0)},J=He=>De=>{var Ge;(Ge=He.onBlur)==null||Ge.call(He,De),I&&I.onBlur?I.onBlur():he(!1)},Ee=He=>(De,...Ge)=>{var Ue,Ze;if(!O&&(De.target||Y.current)==null)throw new Error(tm(17));I==null||(Ue=I.onChange)==null||Ue.call(I,De),(Ze=He.onChange)==null||Ze.call(He,De,...Ge)},Be=He=>De=>{var Ge;Y.current&&De.currentTarget===De.target&&Y.current.focus(),(Ge=He.onClick)==null||Ge.call(He,De)};return{disabled:M,error:R,focused:ce,formControlContext:I,getInputProps:(He={})=>{const Ge=ae({},{onBlur:u,onChange:d,onFocus:f},Wo(He)),Ue=ae({},Ge,{onBlur:J(Ge),onChange:Ee(Ge),onFocus:ze(Ge)});return ae({},Ue,{"aria-invalid":R||void 0,defaultValue:k,value:G,required:$,disabled:M},He,{ref:q},Ue)},getRootProps:(He={})=>{const De=Wo(e,["onBlur","onChange","onFocus"]),Ge=ae({},De,Wo(He));return ae({},He,Ge,{onClick:Be(Ge)})},inputRef:q,required:$,value:G}}const pn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function Aj(e,t,n,i,u,d){if(n.length===0||!i&&n.every((a,b)=>u(a,b)))return-1;let f=e;for(;;){if(!d&&t==="next"&&f===n.length||!d&&t==="previous"&&f===-1)return-1;if(i?!1:u(n[f],f))f+=t==="next"?1:-1,d&&(f=(f+n.length)%n.length);else return f}}function Ro(e,t,n){var i;const{items:u,isItemDisabled:d,disableListWrap:f,disabledItemsFocusable:a,itemComparer:b,focusManagement:C}=n,I=C==="DOM"?0:-1,k=u.length-1,M=e==null?-1:u.findIndex(F=>b(F,e));let R,$,G=!f;switch(t){case"reset":if(I===-1)return null;R=0,$="next",G=!1;break;case"start":R=0,$="next",G=!1;break;case"end":R=k,$="previous",G=!1;break;default:{const F=M+t;F<0?!G&&M!==-1||Math.abs(t)>1?(R=0,$="next"):(R=k,$="previous"):F>k?!G||Math.abs(t)>1?(R=k,$="previous"):(R=0,$="next"):(R=F,$=t>=0?"next":"previous")}}const ee=Aj(R,$,u,a,d,G);return ee===-1&&e!==null&&!d(e,M)?e:(i=u[ee])!=null?i:null}function zj(e,t,n,i){return n==="none"?[]:n==="single"?i(t[0],e)?t:[e]:t.some(u=>i(u,e))?t.filter(u=>!i(u,e)):[...t,e]}function nC(e,t,n){const{itemComparer:i,isItemDisabled:u,selectionMode:d,items:f}=n,{selectedValues:a}=t,b=f.findIndex(I=>i(e,I));if(u(e,b))return t;const C=zj(e,a,d,i);return ae({},t,{selectedValues:C,highlightedValue:e})}function Dj(e,t,n){const i=t.highlightedValue,{orientation:u,pageSize:d}=n;switch(e){case"Home":return ae({},t,{highlightedValue:Ro(i,"start",n)});case"End":return ae({},t,{highlightedValue:Ro(i,"end",n)});case"PageUp":return ae({},t,{highlightedValue:Ro(i,-d,n)});case"PageDown":return ae({},t,{highlightedValue:Ro(i,d,n)});case"ArrowUp":if(u!=="vertical")break;return ae({},t,{highlightedValue:Ro(i,-1,n)});case"ArrowDown":if(u!=="vertical")break;return ae({},t,{highlightedValue:Ro(i,1,n)});case"ArrowLeft":{if(u==="vertical")break;return ae({},t,{highlightedValue:Ro(i,u==="horizontal-ltr"?-1:1,n)})}case"ArrowRight":{if(u==="vertical")break;return ae({},t,{highlightedValue:Ro(i,u==="horizontal-ltr"?1:-1,n)})}case"Enter":case" ":return t.highlightedValue===null?t:nC(t.highlightedValue,t,n)}return t}function Lj(e,t){return t.focusManagement==="DOM"?e:ae({},e,{highlightedValue:null})}function $j(e,t,n){var i;const u=(i=n(e))==null?void 0:i.trim().toLowerCase();return!u||u.length===0?!1:u.indexOf(t)===0}function Oj(e,t,n){const{items:i,isItemDisabled:u,disabledItemsFocusable:d,getItemAsString:f}=n,a=t.length>1;let b=a?e.highlightedValue:Ro(e.highlightedValue,1,n);for(let C=0;C<i.length;C+=1){if(!b||!a&&e.highlightedValue===b)return e;if($j(b,t,f)&&(!u(b,i.indexOf(b))||d))return ae({},e,{highlightedValue:b});b=Ro(b,1,n)}return e}function Bj(e,t,n,i){var u;const{itemComparer:d,focusManagement:f}=i;let a=null;if(n.highlightedValue!=null){var b;a=(b=e.find(k=>d(k,n.highlightedValue)))!=null?b:null}else f==="DOM"&&t.length===0&&(a=Ro(null,"reset",i));const I=((u=n.selectedValues)!=null?u:[]).filter(k=>e.some(M=>d(M,k)));return ae({},n,{highlightedValue:a,selectedValues:I})}function Fj(e,t){return ae({},e,{highlightedValue:Ro(null,"reset",t)})}function jj(e,t){return ae({},e,{highlightedValue:Ro(null,"end",t)})}function Nj(e,t){return ae({},e,{selectedValues:[],highlightedValue:Ro(null,"reset",t)})}function j0(e,t){const{type:n,context:i}=t;switch(n){case pn.keyDown:return Dj(t.key,e,i);case pn.itemClick:return nC(t.item,e,i);case pn.blur:return Lj(e,i);case pn.textNavigation:return Oj(e,t.searchString,i);case pn.itemsChange:return Bj(t.items,t.previousItems,e,i);case pn.resetHighlight:return Fj(e,i);case pn.highlightLast:return jj(e,i);case pn.clearSelection:return Nj(e,i);default:return e}}const Vj=500;function Uj(e){const t=L.useRef({searchString:"",lastTime:null});return L.useCallback(n=>{if(n.key.length===1&&n.key!==" "){const i=t.current,u=n.key.toLowerCase(),d=performance.now();i.searchString.length>0&&i.lastTime&&d-i.lastTime>Vj?i.searchString=u:(i.searchString.length!==1||u!==i.searchString)&&(i.searchString+=u),i.lastTime=d,e(i.searchString,n)}},[e])}const dI={},Hj=()=>{},Gj=(e,t)=>e===t,Wj=()=>!1,Zj=e=>typeof e=="string"?e:String(e),qj=()=>({highlightedValue:null,selectedValues:[]});function oC(e){const{controlledProps:t=dI,disabledItemsFocusable:n=!1,disableListWrap:i=!1,focusManagement:u="activeDescendant",getInitialState:d=qj,getItemDomElement:f,getItemId:a,isItemDisabled:b=Wj,rootRef:C,onStateChange:I=Hj,items:k,itemComparer:M=Gj,getItemAsString:R=Zj,onChange:$,onHighlightChange:G,onItemsChange:ee,orientation:F="vertical",pageSize:j=5,reducerActionContext:O=dI,selectionMode:ne="single",stateReducer:Y,componentName:q="useList"}=e,ce=L.useRef(null),he=ln(C,ce),ze=L.useCallback((Tt,st,Ct)=>{if(G==null||G(Tt,st,Ct),u==="DOM"&&st!=null&&(Ct===pn.itemClick||Ct===pn.keyDown||Ct===pn.textNavigation)){var Mt;f==null||(Mt=f(st))==null||Mt.focus()}},[f,G,u]),J=L.useMemo(()=>({highlightedValue:M,selectedValues:(Tt,st)=>cI(Tt,st,M)}),[M]),Ee=L.useCallback((Tt,st,Ct,Mt,qt)=>{switch(I==null||I(Tt,st,Ct,Mt,qt),st){case"highlightedValue":ze(Tt,Ct,Mt);break;case"selectedValues":$==null||$(Tt,Ct,Mt);break}},[ze,$,I]),Be=L.useMemo(()=>({disabledItemsFocusable:n,disableListWrap:i,focusManagement:u,isItemDisabled:b,itemComparer:M,items:k,getItemAsString:R,onHighlightChange:ze,orientation:F,pageSize:j,selectionMode:ne,stateComparers:J}),[n,i,u,b,M,k,R,ze,F,j,ne,J]),je=d(),ot=Y??j0,He=L.useMemo(()=>ae({},O,Be),[O,Be]),[De,Ge]=zA({reducer:ot,actionContext:He,initialState:je,controlledProps:t,stateComparers:J,onStateChange:Ee,componentName:q}),{highlightedValue:Ue,selectedValues:Ze}=De,at=Uj((Tt,st)=>Ge({type:pn.textNavigation,event:st,searchString:Tt})),pt=L.useRef([]);L.useEffect(()=>{cI(pt.current,k,M)||(Ge({type:pn.itemsChange,event:null,items:k,previousItems:pt.current}),pt.current=k,ee==null||ee(k))},[k,M,Ge,ee]);const ct=Tt=>st=>{var Ct;if((Ct=Tt.onKeyDown)==null||Ct.call(Tt,st),st.defaultMuiPrevented)return;const Mt=["Home","End","PageUp","PageDown"];F==="vertical"?Mt.push("ArrowUp","ArrowDown"):Mt.push("ArrowLeft","ArrowRight"),u==="activeDescendant"&&Mt.push(" ","Enter"),Mt.includes(st.key)&&st.preventDefault(),Ge({type:pn.keyDown,key:st.key,event:st}),at(st)},Ht=Tt=>st=>{var Ct,Mt;(Ct=Tt.onBlur)==null||Ct.call(Tt,st),!st.defaultMuiPrevented&&((Mt=ce.current)!=null&&Mt.contains(st.relatedTarget)||Ge({type:pn.blur,event:st}))},Dt=(Tt={})=>{const st=Wo(Tt);return ae({},Tt,{"aria-activedescendant":u==="activeDescendant"&&Ue!=null?a(Ue):void 0,tabIndex:u==="DOM"?-1:0,ref:he},st,{onBlur:Ht(st),onKeyDown:ct(st)})},Nt=L.useCallback(Tt=>{const st=(Ze??[]).some(qt=>qt!=null&&M(Tt,qt)),Ct=Ue!=null&&M(Tt,Ue);return{focusable:u==="DOM",highlighted:Ct,selected:st}},[M,Ze,Ue,u]),tr=L.useMemo(()=>({dispatch:Ge,getItemState:Nt}),[Ge,Nt]);return L.useDebugValue({state:De}),{contextValue:tr,dispatch:Ge,getRootProps:Dt,rootRef:he,state:De}}const pc=L.createContext(null);function iC(e){const{handlePointerOverEvents:t=!1,item:n}=e,i=L.useContext(pc);if(!i)throw new Error("useListItem must be used within a ListProvider");const{dispatch:u,getItemState:d}=i,{highlighted:f,selected:a,focusable:b}=d(n),C=L.useCallback(R=>$=>{var G;(G=R.onClick)==null||G.call(R,$),!$.defaultPrevented&&u({type:pn.itemClick,item:n,event:$})},[u,n]),I=L.useCallback(R=>$=>{var G;(G=R.onMouseOver)==null||G.call(R,$),!$.defaultPrevented&&u({type:pn.itemHover,item:n,event:$})},[u,n]);let k;return b&&(k=f?0:-1),{getRootProps:(R={})=>{const $=Wo(R);return ae({},R,{onClick:C($),onPointerOver:t?I($):void 0,tabIndex:k})},highlighted:f,selected:a}}function Kj(e,t){if(t.type===pn.itemHover)return ae({},e,{highlightedValue:t.item});const n=j0(e,t);if(n.highlightedValue===null&&t.context.items.length>0)return ae({},n,{highlightedValue:t.context.items[0]});if(t.type===pn.keyDown&&t.event.key==="Escape")return ae({},n,{open:!1});if(t.type===pn.blur){var i;if(!((i=t.context.listboxRef.current)!=null&&i.contains(t.event.relatedTarget))){var u,d;const f=(u=t.context.listboxRef.current)==null?void 0:u.getAttribute("id"),a=(d=t.event.relatedTarget)==null?void 0:d.getAttribute("aria-controls");return f&&a&&f===a?n:ae({},n,{open:!1,highlightedValue:t.context.items[0]})}}return n}const jm=L.createContext(null);function Xj(e){const t=Array.from(e.keys()).map(n=>{const i=e.get(n);return{key:n,subitem:i}});return t.sort((n,i)=>{const u=n.subitem.ref.current,d=i.subitem.ref.current;return u===null||d===null||u===d?0:u.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(n=>[n.key,n.subitem]))}function N0(){const[e,t]=L.useState(new Map),n=L.useRef(new Set),i=L.useCallback(function(C){n.current.delete(C),t(I=>{const k=new Map(I);return k.delete(C),k})},[]),u=L.useCallback(function(C,I){let k;return typeof C=="function"?k=C(n.current):k=C,n.current.add(k),t(M=>{const R=new Map(M);return R.set(k,I),R}),{id:k,deregister:()=>i(k)}},[i]),d=L.useMemo(()=>Xj(e),[e]),f=L.useCallback(function(C){return Array.from(d.keys()).indexOf(C)},[d]);return{contextValue:L.useMemo(()=>({getItemIndex:f,registerItem:u,totalSubitemCount:e.size}),[f,u,e.size]),subitems:d}}function V0(e,t){const n=L.useContext(jm);if(n===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:i}=n,[u,d]=L.useState(typeof e=="function"?void 0:e);return qs(()=>{const{id:f,deregister:a}=i(e,t);return d(f),a},[i,t,e]),{id:u,index:u!==void 0?n.getItemIndex(u):-1,totalItemCount:n.totalSubitemCount}}function Ks(e,t){return function(i={}){const u=ae({},i,e(i));return ae({},u,t(u))}}const Yj={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function Jj(e={}){var t,n;const{listboxRef:i,onItemsChange:u,id:d,disabledItemsFocusable:f=!0,disableListWrap:a=!1,autoFocus:b=!0,componentName:C="useMenu"}=e,I=L.useRef(null),k=ln(I,i),M=(t=Ri(d))!=null?t:"",{state:{open:R,changeReason:$},dispatch:G,triggerElement:ee,registerPopup:F}=(n=L.useContext(F0))!=null?n:Yj,j=L.useRef(R),{subitems:O,contextValue:ne}=N0(),Y=L.useMemo(()=>Array.from(O.keys()),[O]),q=L.useCallback(Ze=>{var at,pt;return Ze==null?null:(at=(pt=O.get(Ze))==null?void 0:pt.ref.current)!=null?at:null},[O]),ce=L.useCallback(Ze=>{var at;return(O==null||(at=O.get(Ze))==null?void 0:at.disabled)||!1},[O]),he=L.useCallback(Ze=>{var at,pt;return((at=O.get(Ze))==null?void 0:at.label)||((pt=O.get(Ze))==null||(pt=pt.ref.current)==null?void 0:pt.innerText)},[O]),ze=L.useMemo(()=>({listboxRef:I}),[I]),{dispatch:J,getRootProps:Ee,contextValue:Be,state:{highlightedValue:je},rootRef:ot}=oC({disabledItemsFocusable:f,disableListWrap:a,focusManagement:"DOM",getItemDomElement:q,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:ce,items:Y,getItemAsString:he,rootRef:k,onItemsChange:u,reducerActionContext:ze,selectionMode:"none",stateReducer:Kj,componentName:C});qs(()=>{F(M)},[M,F]),qs(()=>{R&&($==null?void 0:$.type)==="keydown"&&$.key==="ArrowUp"&&J({type:pn.highlightLast,event:$})},[R,$,J]),L.useEffect(()=>{if(R&&b&&je&&!j.current){var Ze;(Ze=O.get(je))==null||(Ze=Ze.ref)==null||(Ze=Ze.current)==null||Ze.focus()}},[R,b,je,O,Y]),L.useEffect(()=>{var Ze;if((Ze=I.current)!=null&&Ze.contains(document.activeElement)&&je!==null){var at;O==null||(at=O.get(je))==null||(at=at.ref.current)==null||at.focus()}},[je,O]);const He=Ze=>at=>{var pt,ct;(pt=Ze.onBlur)==null||pt.call(Ze,at),!at.defaultMuiPrevented&&((ct=I.current)!=null&&ct.contains(at.relatedTarget)||at.relatedTarget===ee||G({type:Ha.blur,event:at}))},De=Ze=>at=>{var pt;(pt=Ze.onKeyDown)==null||pt.call(Ze,at),!at.defaultMuiPrevented&&at.key==="Escape"&&G({type:Ha.escapeKeyDown,event:at})},Ge=(Ze={})=>({onBlur:He(Ze),onKeyDown:De(Ze)}),Ue=(Ze={})=>{const at=Ks(Ge,Ee),pt=Wo(Ze);return ae({},Ze,pt,at(pt),{id:M,role:"menu"})};return L.useDebugValue({subitems:O,highlightedValue:je}),{contextValue:ae({},ne,Be),dispatch:J,getListboxProps:Ue,highlightedValue:je,listboxRef:ot,menuItems:O,open:R,triggerElement:ee}}function Qj(e){const{value:t,children:n}=e,{dispatch:i,getItemIndex:u,getItemState:d,registerItem:f,totalSubitemCount:a}=t,b=L.useMemo(()=>({dispatch:i,getItemState:d,getItemIndex:u}),[i,u,d]),C=L.useMemo(()=>({getItemIndex:u,registerItem:f,totalSubitemCount:a}),[f,u,a]);return le.jsx(jm.Provider,{value:C,children:le.jsx(pc.Provider,{value:b,children:n})})}var DA={exports:{}},oa={},LA={exports:{}},$A={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ue,Ze){var at=Ue.length;Ue.push(Ze);e:for(;0<at;){var pt=at-1>>>1,ct=Ue[pt];if(0<u(ct,Ze))Ue[pt]=Ze,Ue[at]=ct,at=pt;else break e}}function n(Ue){return Ue.length===0?null:Ue[0]}function i(Ue){if(Ue.length===0)return null;var Ze=Ue[0],at=Ue.pop();if(at!==Ze){Ue[0]=at;e:for(var pt=0,ct=Ue.length,Ht=ct>>>1;pt<Ht;){var Dt=2*(pt+1)-1,Nt=Ue[Dt],tr=Dt+1,Tt=Ue[tr];if(0>u(Nt,at))tr<ct&&0>u(Tt,Nt)?(Ue[pt]=Tt,Ue[tr]=at,pt=tr):(Ue[pt]=Nt,Ue[Dt]=at,pt=Dt);else if(tr<ct&&0>u(Tt,at))Ue[pt]=Tt,Ue[tr]=at,pt=tr;else break e}}return Ze}function u(Ue,Ze){var at=Ue.sortIndex-Ze.sortIndex;return at!==0?at:Ue.id-Ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var b=[],C=[],I=1,k=null,M=3,R=!1,$=!1,G=!1,ee=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(Ue){for(var Ze=n(C);Ze!==null;){if(Ze.callback===null)i(C);else if(Ze.startTime<=Ue)i(C),Ze.sortIndex=Ze.expirationTime,t(b,Ze);else break;Ze=n(C)}}function ne(Ue){if(G=!1,O(Ue),!$)if(n(b)!==null)$=!0,De(Y);else{var Ze=n(C);Ze!==null&&Ge(ne,Ze.startTime-Ue)}}function Y(Ue,Ze){$=!1,G&&(G=!1,F(he),he=-1),R=!0;var at=M;try{for(O(Ze),k=n(b);k!==null&&(!(k.expirationTime>Ze)||Ue&&!Ee());){var pt=k.callback;if(typeof pt=="function"){k.callback=null,M=k.priorityLevel;var ct=pt(k.expirationTime<=Ze);Ze=e.unstable_now(),typeof ct=="function"?k.callback=ct:k===n(b)&&i(b),O(Ze)}else i(b);k=n(b)}if(k!==null)var Ht=!0;else{var Dt=n(C);Dt!==null&&Ge(ne,Dt.startTime-Ze),Ht=!1}return Ht}finally{k=null,M=at,R=!1}}var q=!1,ce=null,he=-1,ze=5,J=-1;function Ee(){return!(e.unstable_now()-J<ze)}function Be(){if(ce!==null){var Ue=e.unstable_now();J=Ue;var Ze=!0;try{Ze=ce(!0,Ue)}finally{Ze?je():(q=!1,ce=null)}}else q=!1}var je;if(typeof j=="function")je=function(){j(Be)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,He=ot.port2;ot.port1.onmessage=Be,je=function(){He.postMessage(null)}}else je=function(){ee(Be,0)};function De(Ue){ce=Ue,q||(q=!0,je())}function Ge(Ue,Ze){he=ee(function(){Ue(e.unstable_now())},Ze)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ue){Ue.callback=null},e.unstable_continueExecution=function(){$||R||($=!0,De(Y))},e.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<Ue?Math.floor(1e3/Ue):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function(Ue){switch(M){case 1:case 2:case 3:var Ze=3;break;default:Ze=M}var at=M;M=Ze;try{return Ue()}finally{M=at}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ue,Ze){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var at=M;M=Ue;try{return Ze()}finally{M=at}},e.unstable_scheduleCallback=function(Ue,Ze,at){var pt=e.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?pt+at:pt):at=pt,Ue){case 1:var ct=-1;break;case 2:ct=250;break;case 5:ct=1073741823;break;case 4:ct=1e4;break;default:ct=5e3}return ct=at+ct,Ue={id:I++,callback:Ze,priorityLevel:Ue,startTime:at,expirationTime:ct,sortIndex:-1},at>pt?(Ue.sortIndex=at,t(C,Ue),n(b)===null&&Ue===n(C)&&(G?(F(he),he=-1):G=!0,Ge(ne,at-pt))):(Ue.sortIndex=ct,t(b,Ue),$||R||($=!0,De(Y))),Ue},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(Ue){var Ze=M;return function(){var at=M;M=Ze;try{return Ue.apply(this,arguments)}finally{M=at}}}})($A);LA.exports=$A;var e6=LA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=L,ta=e6;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OA=new Set,am={};function Du(e,t){Sh(e,t),Sh(e+"Capture",t)}function Sh(e,t){for(am[e]=t,e=0;e<t.length;e++)OA.add(t[e])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iw=Object.prototype.hasOwnProperty,r6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hI={},pI={};function n6(e){return iw.call(pI,e)?!0:iw.call(hI,e)?!1:r6.test(e)?pI[e]=!0:(hI[e]=!0,!1)}function o6(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function i6(e,t,n,i){if(t===null||typeof t>"u"||o6(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gi(e,t,n,i,u,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=u,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qo[e]=new gi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qo[t]=new gi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qo[e]=new gi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qo[e]=new gi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qo[e]=new gi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qo[e]=new gi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qo[e]=new gi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qo[e]=new gi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qo[e]=new gi(e,5,!1,e.toLowerCase(),null,!1,!1)});var aC=/[\-:]([a-z])/g;function sC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aC,sC);qo[t]=new gi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aC,sC);qo[t]=new gi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aC,sC);qo[t]=new gi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qo[e]=new gi(e,1,!1,e.toLowerCase(),null,!1,!1)});qo.xlinkHref=new gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qo[e]=new gi(e,1,!1,e.toLowerCase(),null,!0,!0)});function lC(e,t,n,i){var u=qo.hasOwnProperty(t)?qo[t]:null;(u!==null?u.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(i6(t,n,u,i)&&(n=null),i||u===null?n6(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):u.mustUseProperty?e[u.propertyName]=n===null?u.type===3?!1:"":n:(t=u.attributeName,i=u.attributeNamespace,n===null?e.removeAttribute(t):(u=u.type,n=u===3||u===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var rl=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ty=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Xd=Symbol.for("react.fragment"),cC=Symbol.for("react.strict_mode"),aw=Symbol.for("react.profiler"),BA=Symbol.for("react.provider"),FA=Symbol.for("react.context"),uC=Symbol.for("react.forward_ref"),sw=Symbol.for("react.suspense"),lw=Symbol.for("react.suspense_list"),dC=Symbol.for("react.memo"),Ul=Symbol.for("react.lazy"),jA=Symbol.for("react.offscreen"),fI=Symbol.iterator;function df(e){return e===null||typeof e!="object"?null:(e=fI&&e[fI]||e["@@iterator"],typeof e=="function"?e:null)}var On=Object.assign,pb;function Mf(e){if(pb===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);pb=t&&t[1]||""}return`
`+pb+e}var fb=!1;function mb(e,t){if(!e||fb)return"";fb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var i=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){i=C}e.call(t.prototype)}else{try{throw Error()}catch(C){i=C}e()}}catch(C){if(C&&i&&typeof C.stack=="string"){for(var u=C.stack.split(`
`),d=i.stack.split(`
`),f=u.length-1,a=d.length-1;1<=f&&0<=a&&u[f]!==d[a];)a--;for(;1<=f&&0<=a;f--,a--)if(u[f]!==d[a]){if(f!==1||a!==1)do if(f--,a--,0>a||u[f]!==d[a]){var b=`
`+u[f].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=f&&0<=a);break}}}finally{fb=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mf(e):""}function a6(e){switch(e.tag){case 5:return Mf(e.type);case 16:return Mf("Lazy");case 13:return Mf("Suspense");case 19:return Mf("SuspenseList");case 0:case 2:case 15:return e=mb(e.type,!1),e;case 11:return e=mb(e.type.render,!1),e;case 1:return e=mb(e.type,!0),e;default:return""}}function cw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xd:return"Fragment";case Kd:return"Portal";case aw:return"Profiler";case cC:return"StrictMode";case sw:return"Suspense";case lw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case FA:return(e.displayName||"Context")+".Consumer";case BA:return(e._context.displayName||"Context")+".Provider";case uC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dC:return t=e.displayName||null,t!==null?t:cw(e.type)||"Memo";case Ul:t=e._payload,e=e._init;try{return cw(e(t))}catch{}}return null}function s6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cw(t);case 8:return t===cC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function NA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function l6(e){var t=NA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(f){i=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Iy(e){e._valueTracker||(e._valueTracker=l6(e))}function VA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=NA(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function zv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function uw(e,t){var n=t.checked;return On({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function mI(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=lc(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function UA(e,t){t=t.checked,t!=null&&lC(e,"checked",t,!1)}function dw(e,t){UA(e,t);var n=lc(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hw(e,t.type,n):t.hasOwnProperty("defaultValue")&&hw(e,t.type,lc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gI(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hw(e,t,n){(t!=="number"||zv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Rf=Array.isArray;function dh(e,t,n,i){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&i&&(e[n].defaultSelected=!0)}else{for(n=""+lc(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function pw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return On({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yI(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(At(92));if(Rf(n)){if(1<n.length)throw Error(At(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:lc(n)}}function HA(e,t){var n=lc(t.value),i=lc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function vI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ey,WA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,u){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ey=Ey||document.createElement("div"),Ey.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ey.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sm(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c6=["Webkit","ms","Moz","O"];Object.keys(Ff).forEach(function(e){c6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ff[t]=Ff[e]})});function ZA(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ff.hasOwnProperty(e)&&Ff[e]?(""+t).trim():t+"px"}function qA(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,u=ZA(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,u):e[n]=u}}var u6=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mw(e,t){if(t){if(u6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function gw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yw=null;function hC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vw=null,hh=null,ph=null;function _I(e){if(e=Um(e)){if(typeof vw!="function")throw Error(At(280));var t=e.stateNode;t&&(t=Z0(t),vw(e.stateNode,e.type,t))}}function KA(e){hh?ph?ph.push(e):ph=[e]:hh=e}function XA(){if(hh){var e=hh,t=ph;if(ph=hh=null,_I(e),t)for(e=0;e<t.length;e++)_I(t[e])}}function YA(e,t){return e(t)}function JA(){}var gb=!1;function QA(e,t,n){if(gb)return e(t,n);gb=!0;try{return YA(e,t,n)}finally{gb=!1,(hh!==null||ph!==null)&&(JA(),XA())}}function lm(e,t){var n=e.stateNode;if(n===null)return null;var i=Z0(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(At(231,t,typeof n));return n}var _w=!1;if(Xs)try{var hf={};Object.defineProperty(hf,"passive",{get:function(){_w=!0}}),window.addEventListener("test",hf,hf),window.removeEventListener("test",hf,hf)}catch{_w=!1}function d6(e,t,n,i,u,d,f,a,b){var C=Array.prototype.slice.call(arguments,3);try{t.apply(n,C)}catch(I){this.onError(I)}}var jf=!1,Dv=null,Lv=!1,xw=null,h6={onError:function(e){jf=!0,Dv=e}};function p6(e,t,n,i,u,d,f,a,b){jf=!1,Dv=null,d6.apply(h6,arguments)}function f6(e,t,n,i,u,d,f,a,b){if(p6.apply(this,arguments),jf){if(jf){var C=Dv;jf=!1,Dv=null}else throw Error(At(198));Lv||(Lv=!0,xw=C)}}function Lu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ez(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xI(e){if(Lu(e)!==e)throw Error(At(188))}function m6(e){var t=e.alternate;if(!t){if(t=Lu(e),t===null)throw Error(At(188));return t!==e?null:e}for(var n=e,i=t;;){var u=n.return;if(u===null)break;var d=u.alternate;if(d===null){if(i=u.return,i!==null){n=i;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===n)return xI(u),e;if(d===i)return xI(u),t;d=d.sibling}throw Error(At(188))}if(n.return!==i.return)n=u,i=d;else{for(var f=!1,a=u.child;a;){if(a===n){f=!0,n=u,i=d;break}if(a===i){f=!0,i=u,n=d;break}a=a.sibling}if(!f){for(a=d.child;a;){if(a===n){f=!0,n=d,i=u;break}if(a===i){f=!0,i=d,n=u;break}a=a.sibling}if(!f)throw Error(At(189))}}if(n.alternate!==i)throw Error(At(190))}if(n.tag!==3)throw Error(At(188));return n.stateNode.current===n?e:t}function tz(e){return e=m6(e),e!==null?rz(e):null}function rz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rz(e);if(t!==null)return t;e=e.sibling}return null}var nz=ta.unstable_scheduleCallback,bI=ta.unstable_cancelCallback,g6=ta.unstable_shouldYield,y6=ta.unstable_requestPaint,Jn=ta.unstable_now,v6=ta.unstable_getCurrentPriorityLevel,pC=ta.unstable_ImmediatePriority,oz=ta.unstable_UserBlockingPriority,$v=ta.unstable_NormalPriority,_6=ta.unstable_LowPriority,iz=ta.unstable_IdlePriority,U0=null,_s=null;function x6(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(U0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ga=Math.clz32?Math.clz32:S6,b6=Math.log,w6=Math.LN2;function S6(e){return e>>>=0,e===0?32:31-(b6(e)/w6|0)|0}var ky=64,My=4194304;function Af(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ov(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,u=e.suspendedLanes,d=e.pingedLanes,f=n&268435455;if(f!==0){var a=f&~u;a!==0?i=Af(a):(d&=f,d!==0&&(i=Af(d)))}else f=n&~u,f!==0?i=Af(f):d!==0&&(i=Af(d));if(i===0)return 0;if(t!==0&&t!==i&&!(t&u)&&(u=i&-i,d=t&-t,u>=d||u===16&&(d&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Ga(t),u=1<<n,i|=e[n],t&=~u;return i}function C6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P6(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Ga(d),a=1<<f,b=u[f];b===-1?(!(a&n)||a&i)&&(u[f]=C6(a,t)):b<=t&&(e.expiredLanes|=a),d&=~a}}function bw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function az(){var e=ky;return ky<<=1,!(ky&4194240)&&(ky=64),e}function yb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ga(t),e[t]=n}function T6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var u=31-Ga(n),d=1<<u;t[u]=0,i[u]=-1,e[u]=-1,n&=~d}}function fC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Ga(n),u=1<<i;u&t|e[i]&t&&(e[i]|=t),n&=~u}}var cn=0;function sz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lz,mC,cz,uz,dz,ww=!1,Ry=[],Ql=null,ec=null,tc=null,cm=new Map,um=new Map,Wl=[],I6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wI(e,t){switch(e){case"focusin":case"focusout":Ql=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":cm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":um.delete(t.pointerId)}}function pf(e,t,n,i,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:d,targetContainers:[u]},t!==null&&(t=Um(t),t!==null&&mC(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function E6(e,t,n,i,u){switch(t){case"focusin":return Ql=pf(Ql,e,t,n,i,u),!0;case"dragenter":return ec=pf(ec,e,t,n,i,u),!0;case"mouseover":return tc=pf(tc,e,t,n,i,u),!0;case"pointerover":var d=u.pointerId;return cm.set(d,pf(cm.get(d)||null,e,t,n,i,u)),!0;case"gotpointercapture":return d=u.pointerId,um.set(d,pf(um.get(d)||null,e,t,n,i,u)),!0}return!1}function hz(e){var t=fu(e.target);if(t!==null){var n=Lu(t);if(n!==null){if(t=n.tag,t===13){if(t=ez(n),t!==null){e.blockedOn=t,dz(e.priority,function(){cz(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);yw=i,n.target.dispatchEvent(i),yw=null}else return t=Um(n),t!==null&&mC(t),e.blockedOn=n,!1;t.shift()}return!0}function SI(e,t,n){sv(e)&&n.delete(t)}function k6(){ww=!1,Ql!==null&&sv(Ql)&&(Ql=null),ec!==null&&sv(ec)&&(ec=null),tc!==null&&sv(tc)&&(tc=null),cm.forEach(SI),um.forEach(SI)}function ff(e,t){e.blockedOn===t&&(e.blockedOn=null,ww||(ww=!0,ta.unstable_scheduleCallback(ta.unstable_NormalPriority,k6)))}function dm(e){function t(u){return ff(u,e)}if(0<Ry.length){ff(Ry[0],e);for(var n=1;n<Ry.length;n++){var i=Ry[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Ql!==null&&ff(Ql,e),ec!==null&&ff(ec,e),tc!==null&&ff(tc,e),cm.forEach(t),um.forEach(t),n=0;n<Wl.length;n++)i=Wl[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Wl.length&&(n=Wl[0],n.blockedOn===null);)hz(n),n.blockedOn===null&&Wl.shift()}var fh=rl.ReactCurrentBatchConfig,Bv=!0;function M6(e,t,n,i){var u=cn,d=fh.transition;fh.transition=null;try{cn=1,gC(e,t,n,i)}finally{cn=u,fh.transition=d}}function R6(e,t,n,i){var u=cn,d=fh.transition;fh.transition=null;try{cn=4,gC(e,t,n,i)}finally{cn=u,fh.transition=d}}function gC(e,t,n,i){if(Bv){var u=Sw(e,t,n,i);if(u===null)Ib(e,t,i,Fv,n),wI(e,i);else if(E6(u,e,t,n,i))i.stopPropagation();else if(wI(e,i),t&4&&-1<I6.indexOf(e)){for(;u!==null;){var d=Um(u);if(d!==null&&lz(d),d=Sw(e,t,n,i),d===null&&Ib(e,t,i,Fv,n),d===u)break;u=d}u!==null&&i.stopPropagation()}else Ib(e,t,i,null,n)}}var Fv=null;function Sw(e,t,n,i){if(Fv=null,e=hC(i),e=fu(e),e!==null)if(t=Lu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ez(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fv=e,null}function pz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v6()){case pC:return 1;case oz:return 4;case $v:case _6:return 16;case iz:return 536870912;default:return 16}default:return 16}}var Yl=null,yC=null,lv=null;function fz(){if(lv)return lv;var e,t=yC,n=t.length,i,u="value"in Yl?Yl.value:Yl.textContent,d=u.length;for(e=0;e<n&&t[e]===u[e];e++);var f=n-e;for(i=1;i<=f&&t[n-i]===u[d-i];i++);return lv=u.slice(e,1<i?1-i:void 0)}function cv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ay(){return!0}function CI(){return!1}function ia(e){function t(n,i,u,d,f){this._reactName=n,this._targetInst=u,this.type=i,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(d):d[a]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ay:CI,this.isPropagationStopped=CI,this}return On(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ay)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ay)},persist:function(){},isPersistent:Ay}),t}var Uh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vC=ia(Uh),Vm=On({},Uh,{view:0,detail:0}),A6=ia(Vm),vb,_b,mf,H0=On({},Vm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_C,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mf&&(mf&&e.type==="mousemove"?(vb=e.screenX-mf.screenX,_b=e.screenY-mf.screenY):_b=vb=0,mf=e),vb)},movementY:function(e){return"movementY"in e?e.movementY:_b}}),PI=ia(H0),z6=On({},H0,{dataTransfer:0}),D6=ia(z6),L6=On({},Vm,{relatedTarget:0}),xb=ia(L6),$6=On({},Uh,{animationName:0,elapsedTime:0,pseudoElement:0}),O6=ia($6),B6=On({},Uh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),F6=ia(B6),j6=On({},Uh,{data:0}),TI=ia(j6),N6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=U6[e])?!!t[e]:!1}function _C(){return H6}var G6=On({},Vm,{key:function(e){if(e.key){var t=N6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?V6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_C,charCode:function(e){return e.type==="keypress"?cv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),W6=ia(G6),Z6=On({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),II=ia(Z6),q6=On({},Vm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_C}),K6=ia(q6),X6=On({},Uh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y6=ia(X6),J6=On({},H0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q6=ia(J6),eN=[9,13,27,32],xC=Xs&&"CompositionEvent"in window,Nf=null;Xs&&"documentMode"in document&&(Nf=document.documentMode);var tN=Xs&&"TextEvent"in window&&!Nf,mz=Xs&&(!xC||Nf&&8<Nf&&11>=Nf),EI=" ",kI=!1;function gz(e,t){switch(e){case"keyup":return eN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yd=!1;function rN(e,t){switch(e){case"compositionend":return yz(t);case"keypress":return t.which!==32?null:(kI=!0,EI);case"textInput":return e=t.data,e===EI&&kI?null:e;default:return null}}function nN(e,t){if(Yd)return e==="compositionend"||!xC&&gz(e,t)?(e=fz(),lv=yC=Yl=null,Yd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mz&&t.locale!=="ko"?null:t.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!oN[e.type]:t==="textarea"}function vz(e,t,n,i){KA(i),t=jv(t,"onChange"),0<t.length&&(n=new vC("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Vf=null,hm=null;function iN(e){kz(e,0)}function G0(e){var t=eh(e);if(VA(t))return e}function aN(e,t){if(e==="change")return t}var _z=!1;if(Xs){var bb;if(Xs){var wb="oninput"in document;if(!wb){var RI=document.createElement("div");RI.setAttribute("oninput","return;"),wb=typeof RI.oninput=="function"}bb=wb}else bb=!1;_z=bb&&(!document.documentMode||9<document.documentMode)}function AI(){Vf&&(Vf.detachEvent("onpropertychange",xz),hm=Vf=null)}function xz(e){if(e.propertyName==="value"&&G0(hm)){var t=[];vz(t,hm,e,hC(e)),QA(iN,t)}}function sN(e,t,n){e==="focusin"?(AI(),Vf=t,hm=n,Vf.attachEvent("onpropertychange",xz)):e==="focusout"&&AI()}function lN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return G0(hm)}function cN(e,t){if(e==="click")return G0(t)}function uN(e,t){if(e==="input"||e==="change")return G0(t)}function dN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qa=typeof Object.is=="function"?Object.is:dN;function pm(e,t){if(qa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var u=n[i];if(!iw.call(t,u)||!qa(e[u],t[u]))return!1}return!0}function zI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function DI(e,t){var n=zI(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zI(n)}}function bz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wz(){for(var e=window,t=zv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zv(e.document)}return t}function bC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hN(e){var t=wz(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bz(n.ownerDocument.documentElement,n)){if(i!==null&&bC(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=n.textContent.length,d=Math.min(i.start,u);i=i.end===void 0?d:Math.min(i.end,u),!e.extend&&d>i&&(u=i,i=d,d=u),u=DI(n,d);var f=DI(n,i);u&&f&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),d>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pN=Xs&&"documentMode"in document&&11>=document.documentMode,Jd=null,Cw=null,Uf=null,Pw=!1;function LI(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pw||Jd==null||Jd!==zv(i)||(i=Jd,"selectionStart"in i&&bC(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Uf&&pm(Uf,i)||(Uf=i,i=jv(Cw,"onSelect"),0<i.length&&(t=new vC("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Jd)))}function zy(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qd={animationend:zy("Animation","AnimationEnd"),animationiteration:zy("Animation","AnimationIteration"),animationstart:zy("Animation","AnimationStart"),transitionend:zy("Transition","TransitionEnd")},Sb={},Sz={};Xs&&(Sz=document.createElement("div").style,"AnimationEvent"in window||(delete Qd.animationend.animation,delete Qd.animationiteration.animation,delete Qd.animationstart.animation),"TransitionEvent"in window||delete Qd.transitionend.transition);function W0(e){if(Sb[e])return Sb[e];if(!Qd[e])return e;var t=Qd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sz)return Sb[e]=t[n];return e}var Cz=W0("animationend"),Pz=W0("animationiteration"),Tz=W0("animationstart"),Iz=W0("transitionend"),Ez=new Map,$I="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fc(e,t){Ez.set(e,t),Du(t,[e])}for(var Cb=0;Cb<$I.length;Cb++){var Pb=$I[Cb],fN=Pb.toLowerCase(),mN=Pb[0].toUpperCase()+Pb.slice(1);fc(fN,"on"+mN)}fc(Cz,"onAnimationEnd");fc(Pz,"onAnimationIteration");fc(Tz,"onAnimationStart");fc("dblclick","onDoubleClick");fc("focusin","onFocus");fc("focusout","onBlur");fc(Iz,"onTransitionEnd");Sh("onMouseEnter",["mouseout","mouseover"]);Sh("onMouseLeave",["mouseout","mouseover"]);Sh("onPointerEnter",["pointerout","pointerover"]);Sh("onPointerLeave",["pointerout","pointerover"]);Du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Du("onBeforeInput",["compositionend","keypress","textInput","paste"]);Du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gN=new Set("cancel close invalid load scroll toggle".split(" ").concat(zf));function OI(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,f6(i,t,void 0,e),e.currentTarget=null}function kz(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],u=i.event;i=i.listeners;e:{var d=void 0;if(t)for(var f=i.length-1;0<=f;f--){var a=i[f],b=a.instance,C=a.currentTarget;if(a=a.listener,b!==d&&u.isPropagationStopped())break e;OI(u,a,C),d=b}else for(f=0;f<i.length;f++){if(a=i[f],b=a.instance,C=a.currentTarget,a=a.listener,b!==d&&u.isPropagationStopped())break e;OI(u,a,C),d=b}}}if(Lv)throw e=xw,Lv=!1,xw=null,e}function kn(e,t){var n=t[Mw];n===void 0&&(n=t[Mw]=new Set);var i=e+"__bubble";n.has(i)||(Mz(t,e,2,!1),n.add(i))}function Tb(e,t,n){var i=0;t&&(i|=4),Mz(n,e,i,t)}var Dy="_reactListening"+Math.random().toString(36).slice(2);function fm(e){if(!e[Dy]){e[Dy]=!0,OA.forEach(function(n){n!=="selectionchange"&&(gN.has(n)||Tb(n,!1,e),Tb(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dy]||(t[Dy]=!0,Tb("selectionchange",!1,t))}}function Mz(e,t,n,i){switch(pz(t)){case 1:var u=M6;break;case 4:u=R6;break;default:u=gC}n=u.bind(null,t,n,e),u=void 0,!_w||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function Ib(e,t,n,i,u){var d=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var a=i.stateNode.containerInfo;if(a===u||a.nodeType===8&&a.parentNode===u)break;if(f===4)for(f=i.return;f!==null;){var b=f.tag;if((b===3||b===4)&&(b=f.stateNode.containerInfo,b===u||b.nodeType===8&&b.parentNode===u))return;f=f.return}for(;a!==null;){if(f=fu(a),f===null)return;if(b=f.tag,b===5||b===6){i=d=f;continue e}a=a.parentNode}}i=i.return}QA(function(){var C=d,I=hC(n),k=[];e:{var M=Ez.get(e);if(M!==void 0){var R=vC,$=e;switch(e){case"keypress":if(cv(n)===0)break e;case"keydown":case"keyup":R=W6;break;case"focusin":$="focus",R=xb;break;case"focusout":$="blur",R=xb;break;case"beforeblur":case"afterblur":R=xb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=PI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=D6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=K6;break;case Cz:case Pz:case Tz:R=O6;break;case Iz:R=Y6;break;case"scroll":R=A6;break;case"wheel":R=Q6;break;case"copy":case"cut":case"paste":R=F6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=II}var G=(t&4)!==0,ee=!G&&e==="scroll",F=G?M!==null?M+"Capture":null:M;G=[];for(var j=C,O;j!==null;){O=j;var ne=O.stateNode;if(O.tag===5&&ne!==null&&(O=ne,F!==null&&(ne=lm(j,F),ne!=null&&G.push(mm(j,ne,O)))),ee)break;j=j.return}0<G.length&&(M=new R(M,$,null,n,I),k.push({event:M,listeners:G}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",M&&n!==yw&&($=n.relatedTarget||n.fromElement)&&(fu($)||$[Ys]))break e;if((R||M)&&(M=I.window===I?I:(M=I.ownerDocument)?M.defaultView||M.parentWindow:window,R?($=n.relatedTarget||n.toElement,R=C,$=$?fu($):null,$!==null&&(ee=Lu($),$!==ee||$.tag!==5&&$.tag!==6)&&($=null)):(R=null,$=C),R!==$)){if(G=PI,ne="onMouseLeave",F="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(G=II,ne="onPointerLeave",F="onPointerEnter",j="pointer"),ee=R==null?M:eh(R),O=$==null?M:eh($),M=new G(ne,j+"leave",R,n,I),M.target=ee,M.relatedTarget=O,ne=null,fu(I)===C&&(G=new G(F,j+"enter",$,n,I),G.target=O,G.relatedTarget=ee,ne=G),ee=ne,R&&$)t:{for(G=R,F=$,j=0,O=G;O;O=Ld(O))j++;for(O=0,ne=F;ne;ne=Ld(ne))O++;for(;0<j-O;)G=Ld(G),j--;for(;0<O-j;)F=Ld(F),O--;for(;j--;){if(G===F||F!==null&&G===F.alternate)break t;G=Ld(G),F=Ld(F)}G=null}else G=null;R!==null&&BI(k,M,R,G,!1),$!==null&&ee!==null&&BI(k,ee,$,G,!0)}}e:{if(M=C?eh(C):window,R=M.nodeName&&M.nodeName.toLowerCase(),R==="select"||R==="input"&&M.type==="file")var Y=aN;else if(MI(M))if(_z)Y=uN;else{Y=lN;var q=sN}else(R=M.nodeName)&&R.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(Y=cN);if(Y&&(Y=Y(e,C))){vz(k,Y,n,I);break e}q&&q(e,M,C),e==="focusout"&&(q=M._wrapperState)&&q.controlled&&M.type==="number"&&hw(M,"number",M.value)}switch(q=C?eh(C):window,e){case"focusin":(MI(q)||q.contentEditable==="true")&&(Jd=q,Cw=C,Uf=null);break;case"focusout":Uf=Cw=Jd=null;break;case"mousedown":Pw=!0;break;case"contextmenu":case"mouseup":case"dragend":Pw=!1,LI(k,n,I);break;case"selectionchange":if(pN)break;case"keydown":case"keyup":LI(k,n,I)}var ce;if(xC)e:{switch(e){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else Yd?gz(e,n)&&(he="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(he="onCompositionStart");he&&(mz&&n.locale!=="ko"&&(Yd||he!=="onCompositionStart"?he==="onCompositionEnd"&&Yd&&(ce=fz()):(Yl=I,yC="value"in Yl?Yl.value:Yl.textContent,Yd=!0)),q=jv(C,he),0<q.length&&(he=new TI(he,e,null,n,I),k.push({event:he,listeners:q}),ce?he.data=ce:(ce=yz(n),ce!==null&&(he.data=ce)))),(ce=tN?rN(e,n):nN(e,n))&&(C=jv(C,"onBeforeInput"),0<C.length&&(I=new TI("onBeforeInput","beforeinput",null,n,I),k.push({event:I,listeners:C}),I.data=ce))}kz(k,t)})}function mm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jv(e,t){for(var n=t+"Capture",i=[];e!==null;){var u=e,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=lm(e,n),d!=null&&i.unshift(mm(e,d,u)),d=lm(e,t),d!=null&&i.push(mm(e,d,u))),e=e.return}return i}function Ld(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function BI(e,t,n,i,u){for(var d=t._reactName,f=[];n!==null&&n!==i;){var a=n,b=a.alternate,C=a.stateNode;if(b!==null&&b===i)break;a.tag===5&&C!==null&&(a=C,u?(b=lm(n,d),b!=null&&f.unshift(mm(n,b,a))):u||(b=lm(n,d),b!=null&&f.push(mm(n,b,a)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var yN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function FI(e){return(typeof e=="string"?e:""+e).replace(yN,`
`).replace(vN,"")}function Ly(e,t,n){if(t=FI(t),FI(e)!==t&&n)throw Error(At(425))}function Nv(){}var Tw=null,Iw=null;function Ew(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kw=typeof setTimeout=="function"?setTimeout:void 0,_N=typeof clearTimeout=="function"?clearTimeout:void 0,jI=typeof Promise=="function"?Promise:void 0,xN=typeof queueMicrotask=="function"?queueMicrotask:typeof jI<"u"?function(e){return jI.resolve(null).then(e).catch(bN)}:kw;function bN(e){setTimeout(function(){throw e})}function Eb(e,t){var n=t,i=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(i===0){e.removeChild(u),dm(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=u}while(n);dm(t)}function rc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function NI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hh=Math.random().toString(36).slice(2),gs="__reactFiber$"+Hh,gm="__reactProps$"+Hh,Ys="__reactContainer$"+Hh,Mw="__reactEvents$"+Hh,wN="__reactListeners$"+Hh,SN="__reactHandles$"+Hh;function fu(e){var t=e[gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ys]||n[gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=NI(e);e!==null;){if(n=e[gs])return n;e=NI(e)}return t}e=n,n=e.parentNode}return null}function Um(e){return e=e[gs]||e[Ys],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function Z0(e){return e[gm]||null}var Rw=[],th=-1;function mc(e){return{current:e}}function Mn(e){0>th||(e.current=Rw[th],Rw[th]=null,th--)}function Cn(e,t){th++,Rw[th]=e.current,e.current=t}var cc={},ai=mc(cc),Pi=mc(!1),Tu=cc;function Ch(e,t){var n=e.type.contextTypes;if(!n)return cc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in n)u[d]=t[d];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Ti(e){return e=e.childContextTypes,e!=null}function Vv(){Mn(Pi),Mn(ai)}function VI(e,t,n){if(ai.current!==cc)throw Error(At(168));Cn(ai,t),Cn(Pi,n)}function Rz(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var u in i)if(!(u in t))throw Error(At(108,s6(e)||"Unknown",u));return On({},n,i)}function Uv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cc,Tu=ai.current,Cn(ai,e),Cn(Pi,Pi.current),!0}function UI(e,t,n){var i=e.stateNode;if(!i)throw Error(At(169));n?(e=Rz(e,t,Tu),i.__reactInternalMemoizedMergedChildContext=e,Mn(Pi),Mn(ai),Cn(ai,e)):Mn(Pi),Cn(Pi,n)}var Us=null,q0=!1,kb=!1;function Az(e){Us===null?Us=[e]:Us.push(e)}function CN(e){q0=!0,Az(e)}function gc(){if(!kb&&Us!==null){kb=!0;var e=0,t=cn;try{var n=Us;for(cn=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Us=null,q0=!1}catch(u){throw Us!==null&&(Us=Us.slice(e+1)),nz(pC,gc),u}finally{cn=t,kb=!1}}return null}var rh=[],nh=0,Hv=null,Gv=0,fa=[],ma=0,Iu=null,Gs=1,Ws="";function uu(e,t){rh[nh++]=Gv,rh[nh++]=Hv,Hv=e,Gv=t}function zz(e,t,n){fa[ma++]=Gs,fa[ma++]=Ws,fa[ma++]=Iu,Iu=e;var i=Gs;e=Ws;var u=32-Ga(i)-1;i&=~(1<<u),n+=1;var d=32-Ga(t)+u;if(30<d){var f=u-u%5;d=(i&(1<<f)-1).toString(32),i>>=f,u-=f,Gs=1<<32-Ga(t)+u|n<<u|i,Ws=d+e}else Gs=1<<d|n<<u|i,Ws=e}function wC(e){e.return!==null&&(uu(e,1),zz(e,1,0))}function SC(e){for(;e===Hv;)Hv=rh[--nh],rh[nh]=null,Gv=rh[--nh],rh[nh]=null;for(;e===Iu;)Iu=fa[--ma],fa[ma]=null,Ws=fa[--ma],fa[ma]=null,Gs=fa[--ma],fa[ma]=null}var Qi=null,Xi=null,zn=!1,Ua=null;function Dz(e,t){var n=ya(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function HI(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qi=e,Xi=rc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qi=e,Xi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Iu!==null?{id:Gs,overflow:Ws}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ya(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qi=e,Xi=null,!0):!1;default:return!1}}function Aw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zw(e){if(zn){var t=Xi;if(t){var n=t;if(!HI(e,t)){if(Aw(e))throw Error(At(418));t=rc(n.nextSibling);var i=Qi;t&&HI(e,t)?Dz(i,n):(e.flags=e.flags&-4097|2,zn=!1,Qi=e)}}else{if(Aw(e))throw Error(At(418));e.flags=e.flags&-4097|2,zn=!1,Qi=e}}}function GI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qi=e}function $y(e){if(e!==Qi)return!1;if(!zn)return GI(e),zn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ew(e.type,e.memoizedProps)),t&&(t=Xi)){if(Aw(e))throw Lz(),Error(At(418));for(;t;)Dz(e,t),t=rc(t.nextSibling)}if(GI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xi=rc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xi=null}}else Xi=Qi?rc(e.stateNode.nextSibling):null;return!0}function Lz(){for(var e=Xi;e;)e=rc(e.nextSibling)}function Ph(){Xi=Qi=null,zn=!1}function CC(e){Ua===null?Ua=[e]:Ua.push(e)}var PN=rl.ReactCurrentBatchConfig;function gf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(At(309));var i=n.stateNode}if(!i)throw Error(At(147,e));var u=i,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var a=u.refs;f===null?delete a[d]:a[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(At(284));if(!n._owner)throw Error(At(290,e))}return e}function Oy(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WI(e){var t=e._init;return t(e._payload)}function $z(e){function t(F,j){if(e){var O=F.deletions;O===null?(F.deletions=[j],F.flags|=16):O.push(j)}}function n(F,j){if(!e)return null;for(;j!==null;)t(F,j),j=j.sibling;return null}function i(F,j){for(F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function u(F,j){return F=ac(F,j),F.index=0,F.sibling=null,F}function d(F,j,O){return F.index=O,e?(O=F.alternate,O!==null?(O=O.index,O<j?(F.flags|=2,j):O):(F.flags|=2,j)):(F.flags|=1048576,j)}function f(F){return e&&F.alternate===null&&(F.flags|=2),F}function a(F,j,O,ne){return j===null||j.tag!==6?(j=$b(O,F.mode,ne),j.return=F,j):(j=u(j,O),j.return=F,j)}function b(F,j,O,ne){var Y=O.type;return Y===Xd?I(F,j,O.props.children,ne,O.key):j!==null&&(j.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Ul&&WI(Y)===j.type)?(ne=u(j,O.props),ne.ref=gf(F,j,O),ne.return=F,ne):(ne=gv(O.type,O.key,O.props,null,F.mode,ne),ne.ref=gf(F,j,O),ne.return=F,ne)}function C(F,j,O,ne){return j===null||j.tag!==4||j.stateNode.containerInfo!==O.containerInfo||j.stateNode.implementation!==O.implementation?(j=Ob(O,F.mode,ne),j.return=F,j):(j=u(j,O.children||[]),j.return=F,j)}function I(F,j,O,ne,Y){return j===null||j.tag!==7?(j=xu(O,F.mode,ne,Y),j.return=F,j):(j=u(j,O),j.return=F,j)}function k(F,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return j=$b(""+j,F.mode,O),j.return=F,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ty:return O=gv(j.type,j.key,j.props,null,F.mode,O),O.ref=gf(F,null,j),O.return=F,O;case Kd:return j=Ob(j,F.mode,O),j.return=F,j;case Ul:var ne=j._init;return k(F,ne(j._payload),O)}if(Rf(j)||df(j))return j=xu(j,F.mode,O,null),j.return=F,j;Oy(F,j)}return null}function M(F,j,O,ne){var Y=j!==null?j.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Y!==null?null:a(F,j,""+O,ne);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ty:return O.key===Y?b(F,j,O,ne):null;case Kd:return O.key===Y?C(F,j,O,ne):null;case Ul:return Y=O._init,M(F,j,Y(O._payload),ne)}if(Rf(O)||df(O))return Y!==null?null:I(F,j,O,ne,null);Oy(F,O)}return null}function R(F,j,O,ne,Y){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(O)||null,a(j,F,""+ne,Y);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Ty:return F=F.get(ne.key===null?O:ne.key)||null,b(j,F,ne,Y);case Kd:return F=F.get(ne.key===null?O:ne.key)||null,C(j,F,ne,Y);case Ul:var q=ne._init;return R(F,j,O,q(ne._payload),Y)}if(Rf(ne)||df(ne))return F=F.get(O)||null,I(j,F,ne,Y,null);Oy(j,ne)}return null}function $(F,j,O,ne){for(var Y=null,q=null,ce=j,he=j=0,ze=null;ce!==null&&he<O.length;he++){ce.index>he?(ze=ce,ce=null):ze=ce.sibling;var J=M(F,ce,O[he],ne);if(J===null){ce===null&&(ce=ze);break}e&&ce&&J.alternate===null&&t(F,ce),j=d(J,j,he),q===null?Y=J:q.sibling=J,q=J,ce=ze}if(he===O.length)return n(F,ce),zn&&uu(F,he),Y;if(ce===null){for(;he<O.length;he++)ce=k(F,O[he],ne),ce!==null&&(j=d(ce,j,he),q===null?Y=ce:q.sibling=ce,q=ce);return zn&&uu(F,he),Y}for(ce=i(F,ce);he<O.length;he++)ze=R(ce,F,he,O[he],ne),ze!==null&&(e&&ze.alternate!==null&&ce.delete(ze.key===null?he:ze.key),j=d(ze,j,he),q===null?Y=ze:q.sibling=ze,q=ze);return e&&ce.forEach(function(Ee){return t(F,Ee)}),zn&&uu(F,he),Y}function G(F,j,O,ne){var Y=df(O);if(typeof Y!="function")throw Error(At(150));if(O=Y.call(O),O==null)throw Error(At(151));for(var q=Y=null,ce=j,he=j=0,ze=null,J=O.next();ce!==null&&!J.done;he++,J=O.next()){ce.index>he?(ze=ce,ce=null):ze=ce.sibling;var Ee=M(F,ce,J.value,ne);if(Ee===null){ce===null&&(ce=ze);break}e&&ce&&Ee.alternate===null&&t(F,ce),j=d(Ee,j,he),q===null?Y=Ee:q.sibling=Ee,q=Ee,ce=ze}if(J.done)return n(F,ce),zn&&uu(F,he),Y;if(ce===null){for(;!J.done;he++,J=O.next())J=k(F,J.value,ne),J!==null&&(j=d(J,j,he),q===null?Y=J:q.sibling=J,q=J);return zn&&uu(F,he),Y}for(ce=i(F,ce);!J.done;he++,J=O.next())J=R(ce,F,he,J.value,ne),J!==null&&(e&&J.alternate!==null&&ce.delete(J.key===null?he:J.key),j=d(J,j,he),q===null?Y=J:q.sibling=J,q=J);return e&&ce.forEach(function(Be){return t(F,Be)}),zn&&uu(F,he),Y}function ee(F,j,O,ne){if(typeof O=="object"&&O!==null&&O.type===Xd&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Ty:e:{for(var Y=O.key,q=j;q!==null;){if(q.key===Y){if(Y=O.type,Y===Xd){if(q.tag===7){n(F,q.sibling),j=u(q,O.props.children),j.return=F,F=j;break e}}else if(q.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===Ul&&WI(Y)===q.type){n(F,q.sibling),j=u(q,O.props),j.ref=gf(F,q,O),j.return=F,F=j;break e}n(F,q);break}else t(F,q);q=q.sibling}O.type===Xd?(j=xu(O.props.children,F.mode,ne,O.key),j.return=F,F=j):(ne=gv(O.type,O.key,O.props,null,F.mode,ne),ne.ref=gf(F,j,O),ne.return=F,F=ne)}return f(F);case Kd:e:{for(q=O.key;j!==null;){if(j.key===q)if(j.tag===4&&j.stateNode.containerInfo===O.containerInfo&&j.stateNode.implementation===O.implementation){n(F,j.sibling),j=u(j,O.children||[]),j.return=F,F=j;break e}else{n(F,j);break}else t(F,j);j=j.sibling}j=Ob(O,F.mode,ne),j.return=F,F=j}return f(F);case Ul:return q=O._init,ee(F,j,q(O._payload),ne)}if(Rf(O))return $(F,j,O,ne);if(df(O))return G(F,j,O,ne);Oy(F,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,j!==null&&j.tag===6?(n(F,j.sibling),j=u(j,O),j.return=F,F=j):(n(F,j),j=$b(O,F.mode,ne),j.return=F,F=j),f(F)):n(F,j)}return ee}var Th=$z(!0),Oz=$z(!1),Wv=mc(null),Zv=null,oh=null,PC=null;function TC(){PC=oh=Zv=null}function IC(e){var t=Wv.current;Mn(Wv),e._currentValue=t}function Dw(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function mh(e,t){Zv=e,PC=oh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ci=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(PC!==e)if(e={context:e,memoizedValue:t,next:null},oh===null){if(Zv===null)throw Error(At(308));oh=e,Zv.dependencies={lanes:0,firstContext:e}}else oh=oh.next=e;return t}var mu=null;function EC(e){mu===null?mu=[e]:mu.push(e)}function Bz(e,t,n,i){var u=t.interleaved;return u===null?(n.next=n,EC(t)):(n.next=u.next,u.next=n),t.interleaved=n,Js(e,i)}function Js(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hl=!1;function kC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Kr&2){var u=i.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),i.pending=t,Js(e,n)}return u=i.interleaved,u===null?(t.next=t,EC(i)):(t.next=u.next,u.next=t),i.interleaved=t,Js(e,n)}function uv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,fC(e,n)}}function ZI(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var u=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?u=d=f:d=d.next=f,n=n.next}while(n!==null);d===null?u=d=t:d=d.next=t}else u=d=t;n={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qv(e,t,n,i){var u=e.updateQueue;Hl=!1;var d=u.firstBaseUpdate,f=u.lastBaseUpdate,a=u.shared.pending;if(a!==null){u.shared.pending=null;var b=a,C=b.next;b.next=null,f===null?d=C:f.next=C,f=b;var I=e.alternate;I!==null&&(I=I.updateQueue,a=I.lastBaseUpdate,a!==f&&(a===null?I.firstBaseUpdate=C:a.next=C,I.lastBaseUpdate=b))}if(d!==null){var k=u.baseState;f=0,I=C=b=null,a=d;do{var M=a.lane,R=a.eventTime;if((i&M)===M){I!==null&&(I=I.next={eventTime:R,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var $=e,G=a;switch(M=t,R=n,G.tag){case 1:if($=G.payload,typeof $=="function"){k=$.call(R,k,M);break e}k=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=G.payload,M=typeof $=="function"?$.call(R,k,M):$,M==null)break e;k=On({},k,M);break e;case 2:Hl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,M=u.effects,M===null?u.effects=[a]:M.push(a))}else R={eventTime:R,lane:M,tag:a.tag,payload:a.payload,callback:a.callback,next:null},I===null?(C=I=R,b=k):I=I.next=R,f|=M;if(a=a.next,a===null){if(a=u.shared.pending,a===null)break;M=a,a=M.next,M.next=null,u.lastBaseUpdate=M,u.shared.pending=null}}while(!0);if(I===null&&(b=k),u.baseState=b,u.firstBaseUpdate=C,u.lastBaseUpdate=I,t=u.shared.interleaved,t!==null){u=t;do f|=u.lane,u=u.next;while(u!==t)}else d===null&&(u.shared.lanes=0);ku|=f,e.lanes=f,e.memoizedState=k}}function qI(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],u=i.callback;if(u!==null){if(i.callback=null,i=n,typeof u!="function")throw Error(At(191,u));u.call(i)}}}var Hm={},xs=mc(Hm),ym=mc(Hm),vm=mc(Hm);function gu(e){if(e===Hm)throw Error(At(174));return e}function MC(e,t){switch(Cn(vm,t),Cn(ym,e),Cn(xs,Hm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fw(t,e)}Mn(xs),Cn(xs,t)}function Ih(){Mn(xs),Mn(ym),Mn(vm)}function jz(e){gu(vm.current);var t=gu(xs.current),n=fw(t,e.type);t!==n&&(Cn(ym,e),Cn(xs,n))}function RC(e){ym.current===e&&(Mn(xs),Mn(ym))}var Ln=mc(0);function Kv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mb=[];function AC(){for(var e=0;e<Mb.length;e++)Mb[e]._workInProgressVersionPrimary=null;Mb.length=0}var dv=rl.ReactCurrentDispatcher,Rb=rl.ReactCurrentBatchConfig,Eu=0,$n=null,bo=null,Ao=null,Xv=!1,Hf=!1,_m=0,TN=0;function ri(){throw Error(At(321))}function zC(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qa(e[n],t[n]))return!1;return!0}function DC(e,t,n,i,u,d){if(Eu=d,$n=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dv.current=e===null||e.memoizedState===null?MN:RN,e=n(i,u),Hf){d=0;do{if(Hf=!1,_m=0,25<=d)throw Error(At(301));d+=1,Ao=bo=null,t.updateQueue=null,dv.current=AN,e=n(i,u)}while(Hf)}if(dv.current=Yv,t=bo!==null&&bo.next!==null,Eu=0,Ao=bo=$n=null,Xv=!1,t)throw Error(At(300));return e}function LC(){var e=_m!==0;return _m=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ao===null?$n.memoizedState=Ao=e:Ao=Ao.next=e,Ao}function ba(){if(bo===null){var e=$n.alternate;e=e!==null?e.memoizedState:null}else e=bo.next;var t=Ao===null?$n.memoizedState:Ao.next;if(t!==null)Ao=t,bo=e;else{if(e===null)throw Error(At(310));bo=e,e={memoizedState:bo.memoizedState,baseState:bo.baseState,baseQueue:bo.baseQueue,queue:bo.queue,next:null},Ao===null?$n.memoizedState=Ao=e:Ao=Ao.next=e}return Ao}function xm(e,t){return typeof t=="function"?t(e):t}function Ab(e){var t=ba(),n=t.queue;if(n===null)throw Error(At(311));n.lastRenderedReducer=e;var i=bo,u=i.baseQueue,d=n.pending;if(d!==null){if(u!==null){var f=u.next;u.next=d.next,d.next=f}i.baseQueue=u=d,n.pending=null}if(u!==null){d=u.next,i=i.baseState;var a=f=null,b=null,C=d;do{var I=C.lane;if((Eu&I)===I)b!==null&&(b=b.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),i=C.hasEagerState?C.eagerState:e(i,C.action);else{var k={lane:I,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};b===null?(a=b=k,f=i):b=b.next=k,$n.lanes|=I,ku|=I}C=C.next}while(C!==null&&C!==d);b===null?f=i:b.next=a,qa(i,t.memoizedState)||(Ci=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=b,n.lastRenderedState=i}if(e=n.interleaved,e!==null){u=e;do d=u.lane,$n.lanes|=d,ku|=d,u=u.next;while(u!==e)}else u===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zb(e){var t=ba(),n=t.queue;if(n===null)throw Error(At(311));n.lastRenderedReducer=e;var i=n.dispatch,u=n.pending,d=t.memoizedState;if(u!==null){n.pending=null;var f=u=u.next;do d=e(d,f.action),f=f.next;while(f!==u);qa(d,t.memoizedState)||(Ci=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,i]}function Nz(){}function Vz(e,t){var n=$n,i=ba(),u=t(),d=!qa(i.memoizedState,u);if(d&&(i.memoizedState=u,Ci=!0),i=i.queue,$C(Gz.bind(null,n,i,e),[e]),i.getSnapshot!==t||d||Ao!==null&&Ao.memoizedState.tag&1){if(n.flags|=2048,bm(9,Hz.bind(null,n,i,u,t),void 0,null),zo===null)throw Error(At(349));Eu&30||Uz(n,t,u)}return u}function Uz(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$n.updateQueue,t===null?(t={lastEffect:null,stores:null},$n.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hz(e,t,n,i){t.value=n,t.getSnapshot=i,Wz(t)&&Zz(e)}function Gz(e,t,n){return n(function(){Wz(t)&&Zz(e)})}function Wz(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qa(e,n)}catch{return!0}}function Zz(e){var t=Js(e,1);t!==null&&Wa(t,e,1,-1)}function KI(e){var t=ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xm,lastRenderedState:e},t.queue=e,e=e.dispatch=kN.bind(null,$n,e),[t.memoizedState,e]}function bm(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=$n.updateQueue,t===null?(t={lastEffect:null,stores:null},$n.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function qz(){return ba().memoizedState}function hv(e,t,n,i){var u=ps();$n.flags|=e,u.memoizedState=bm(1|t,n,void 0,i===void 0?null:i)}function K0(e,t,n,i){var u=ba();i=i===void 0?null:i;var d=void 0;if(bo!==null){var f=bo.memoizedState;if(d=f.destroy,i!==null&&zC(i,f.deps)){u.memoizedState=bm(t,n,d,i);return}}$n.flags|=e,u.memoizedState=bm(1|t,n,d,i)}function XI(e,t){return hv(8390656,8,e,t)}function $C(e,t){return K0(2048,8,e,t)}function Kz(e,t){return K0(4,2,e,t)}function Xz(e,t){return K0(4,4,e,t)}function Yz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jz(e,t,n){return n=n!=null?n.concat([e]):null,K0(4,4,Yz.bind(null,t,e),n)}function OC(){}function Qz(e,t){var n=ba();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&zC(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function eD(e,t){var n=ba();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&zC(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function tD(e,t,n){return Eu&21?(qa(n,t)||(n=az(),$n.lanes|=n,ku|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ci=!0),e.memoizedState=n)}function IN(e,t){var n=cn;cn=n!==0&&4>n?n:4,e(!0);var i=Rb.transition;Rb.transition={};try{e(!1),t()}finally{cn=n,Rb.transition=i}}function rD(){return ba().memoizedState}function EN(e,t,n){var i=ic(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},nD(e))oD(t,n);else if(n=Bz(e,t,n,i),n!==null){var u=fi();Wa(n,e,i,u),iD(n,t,i)}}function kN(e,t,n){var i=ic(e),u={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(nD(e))oD(t,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,a=d(f,n);if(u.hasEagerState=!0,u.eagerState=a,qa(a,f)){var b=t.interleaved;b===null?(u.next=u,EC(t)):(u.next=b.next,b.next=u),t.interleaved=u;return}}catch{}finally{}n=Bz(e,t,u,i),n!==null&&(u=fi(),Wa(n,e,i,u),iD(n,t,i))}}function nD(e){var t=e.alternate;return e===$n||t!==null&&t===$n}function oD(e,t){Hf=Xv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function iD(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,fC(e,n)}}var Yv={readContext:xa,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},MN={readContext:xa,useCallback:function(e,t){return ps().memoizedState=[e,t===void 0?null:t],e},useContext:xa,useEffect:XI,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hv(4194308,4,Yz.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hv(4194308,4,e,t)},useInsertionEffect:function(e,t){return hv(4,2,e,t)},useMemo:function(e,t){var n=ps();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ps();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=EN.bind(null,$n,e),[i.memoizedState,e]},useRef:function(e){var t=ps();return e={current:e},t.memoizedState=e},useState:KI,useDebugValue:OC,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=KI(!1),t=e[0];return e=IN.bind(null,e[1]),ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=$n,u=ps();if(zn){if(n===void 0)throw Error(At(407));n=n()}else{if(n=t(),zo===null)throw Error(At(349));Eu&30||Uz(i,t,n)}u.memoizedState=n;var d={value:n,getSnapshot:t};return u.queue=d,XI(Gz.bind(null,i,d,e),[e]),i.flags|=2048,bm(9,Hz.bind(null,i,d,n,t),void 0,null),n},useId:function(){var e=ps(),t=zo.identifierPrefix;if(zn){var n=Ws,i=Gs;n=(i&~(1<<32-Ga(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=_m++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=TN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RN={readContext:xa,useCallback:Qz,useContext:xa,useEffect:$C,useImperativeHandle:Jz,useInsertionEffect:Kz,useLayoutEffect:Xz,useMemo:eD,useReducer:Ab,useRef:qz,useState:function(){return Ab(xm)},useDebugValue:OC,useDeferredValue:function(e){var t=ba();return tD(t,bo.memoizedState,e)},useTransition:function(){var e=Ab(xm)[0],t=ba().memoizedState;return[e,t]},useMutableSource:Nz,useSyncExternalStore:Vz,useId:rD,unstable_isNewReconciler:!1},AN={readContext:xa,useCallback:Qz,useContext:xa,useEffect:$C,useImperativeHandle:Jz,useInsertionEffect:Kz,useLayoutEffect:Xz,useMemo:eD,useReducer:zb,useRef:qz,useState:function(){return zb(xm)},useDebugValue:OC,useDeferredValue:function(e){var t=ba();return bo===null?t.memoizedState=e:tD(t,bo.memoizedState,e)},useTransition:function(){var e=zb(xm)[0],t=ba().memoizedState;return[e,t]},useMutableSource:Nz,useSyncExternalStore:Vz,useId:rD,unstable_isNewReconciler:!1};function Na(e,t){if(e&&e.defaultProps){t=On({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Lw(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:On({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var X0={isMounted:function(e){return(e=e._reactInternals)?Lu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=fi(),u=ic(e),d=Zs(i,u);d.payload=t,n!=null&&(d.callback=n),t=nc(e,d,u),t!==null&&(Wa(t,e,u,i),uv(t,e,u))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=fi(),u=ic(e),d=Zs(i,u);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=nc(e,d,u),t!==null&&(Wa(t,e,u,i),uv(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fi(),i=ic(e),u=Zs(n,i);u.tag=2,t!=null&&(u.callback=t),t=nc(e,u,i),t!==null&&(Wa(t,e,i,n),uv(t,e,i))}};function YI(e,t,n,i,u,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,f):t.prototype&&t.prototype.isPureReactComponent?!pm(n,i)||!pm(u,d):!0}function aD(e,t,n){var i=!1,u=cc,d=t.contextType;return typeof d=="object"&&d!==null?d=xa(d):(u=Ti(t)?Tu:ai.current,i=t.contextTypes,d=(i=i!=null)?Ch(e,u):cc),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=X0,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=d),t}function JI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&X0.enqueueReplaceState(t,t.state,null)}function $w(e,t,n,i){var u=e.stateNode;u.props=n,u.state=e.memoizedState,u.refs={},kC(e);var d=t.contextType;typeof d=="object"&&d!==null?u.context=xa(d):(d=Ti(t)?Tu:ai.current,u.context=Ch(e,d)),u.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Lw(e,t,d,n),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&X0.enqueueReplaceState(u,u.state,null),qv(e,n,u,i),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Eh(e,t){try{var n="",i=t;do n+=a6(i),i=i.return;while(i);var u=n}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:u,digest:null}}function Db(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ow(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zN=typeof WeakMap=="function"?WeakMap:Map;function sD(e,t,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Qv||(Qv=!0,Zw=i),Ow(e,t)},n}function lD(e,t,n){n=Zs(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var u=t.value;n.payload=function(){return i(u)},n.callback=function(){Ow(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){Ow(e,t),typeof i!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),n}function QI(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new zN;var u=new Set;i.set(t,u)}else u=i.get(t),u===void 0&&(u=new Set,i.set(t,u));u.has(n)||(u.add(n),e=ZN.bind(null,e,t,n),t.then(e,e))}function eE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tE(e,t,n,i,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zs(-1,1),t.tag=2,nc(n,t,1))),n.lanes|=1),e)}var DN=rl.ReactCurrentOwner,Ci=!1;function pi(e,t,n,i){t.child=e===null?Oz(t,null,n,i):Th(t,e.child,n,i)}function rE(e,t,n,i,u){n=n.render;var d=t.ref;return mh(t,u),i=DC(e,t,n,i,d,u),n=LC(),e!==null&&!Ci?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Qs(e,t,u)):(zn&&n&&wC(t),t.flags|=1,pi(e,t,i,u),t.child)}function nE(e,t,n,i,u){if(e===null){var d=n.type;return typeof d=="function"&&!GC(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,cD(e,t,d,i,u)):(e=gv(n.type,null,i,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&u)){var f=d.memoizedProps;if(n=n.compare,n=n!==null?n:pm,n(f,i)&&e.ref===t.ref)return Qs(e,t,u)}return t.flags|=1,e=ac(d,i),e.ref=t.ref,e.return=t,t.child=e}function cD(e,t,n,i,u){if(e!==null){var d=e.memoizedProps;if(pm(d,i)&&e.ref===t.ref)if(Ci=!1,t.pendingProps=i=d,(e.lanes&u)!==0)e.flags&131072&&(Ci=!0);else return t.lanes=e.lanes,Qs(e,t,u)}return Bw(e,t,n,i,u)}function uD(e,t,n){var i=t.pendingProps,u=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(ah,Ui),Ui|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(ah,Ui),Ui|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=d!==null?d.baseLanes:n,Cn(ah,Ui),Ui|=i}else d!==null?(i=d.baseLanes|n,t.memoizedState=null):i=n,Cn(ah,Ui),Ui|=i;return pi(e,t,u,n),t.child}function dD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bw(e,t,n,i,u){var d=Ti(n)?Tu:ai.current;return d=Ch(t,d),mh(t,u),n=DC(e,t,n,i,d,u),i=LC(),e!==null&&!Ci?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Qs(e,t,u)):(zn&&i&&wC(t),t.flags|=1,pi(e,t,n,u),t.child)}function oE(e,t,n,i,u){if(Ti(n)){var d=!0;Uv(t)}else d=!1;if(mh(t,u),t.stateNode===null)pv(e,t),aD(t,n,i),$w(t,n,i,u),i=!0;else if(e===null){var f=t.stateNode,a=t.memoizedProps;f.props=a;var b=f.context,C=n.contextType;typeof C=="object"&&C!==null?C=xa(C):(C=Ti(n)?Tu:ai.current,C=Ch(t,C));var I=n.getDerivedStateFromProps,k=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function";k||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==i||b!==C)&&JI(t,f,i,C),Hl=!1;var M=t.memoizedState;f.state=M,qv(t,i,f,u),b=t.memoizedState,a!==i||M!==b||Pi.current||Hl?(typeof I=="function"&&(Lw(t,n,I,i),b=t.memoizedState),(a=Hl||YI(t,n,a,i,M,b,C))?(k||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=b),f.props=i,f.state=b,f.context=C,i=a):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Fz(e,t),a=t.memoizedProps,C=t.type===t.elementType?a:Na(t.type,a),f.props=C,k=t.pendingProps,M=f.context,b=n.contextType,typeof b=="object"&&b!==null?b=xa(b):(b=Ti(n)?Tu:ai.current,b=Ch(t,b));var R=n.getDerivedStateFromProps;(I=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==k||M!==b)&&JI(t,f,i,b),Hl=!1,M=t.memoizedState,f.state=M,qv(t,i,f,u);var $=t.memoizedState;a!==k||M!==$||Pi.current||Hl?(typeof R=="function"&&(Lw(t,n,R,i),$=t.memoizedState),(C=Hl||YI(t,n,C,i,M,$,b)||!1)?(I||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,$,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,$,b)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=$),f.props=i,f.state=$,f.context=b,i=C):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),i=!1)}return Fw(e,t,n,i,d,u)}function Fw(e,t,n,i,u,d){dD(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return u&&UI(t,n,!1),Qs(e,t,d);i=t.stateNode,DN.current=t;var a=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=Th(t,e.child,null,d),t.child=Th(t,null,a,d)):pi(e,t,a,d),t.memoizedState=i.state,u&&UI(t,n,!0),t.child}function hD(e){var t=e.stateNode;t.pendingContext?VI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&VI(e,t.context,!1),MC(e,t.containerInfo)}function iE(e,t,n,i,u){return Ph(),CC(u),t.flags|=256,pi(e,t,n,i),t.child}var jw={dehydrated:null,treeContext:null,retryLane:0};function Nw(e){return{baseLanes:e,cachePool:null,transitions:null}}function pD(e,t,n){var i=t.pendingProps,u=Ln.current,d=!1,f=(t.flags&128)!==0,a;if((a=f)||(a=e!==null&&e.memoizedState===null?!1:(u&2)!==0),a?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Cn(Ln,u&1),e===null)return zw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,d?(i=t.mode,d=t.child,f={mode:"hidden",children:f},!(i&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=Q0(f,i,0,null),e=xu(e,i,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Nw(n),t.memoizedState=jw,e):BC(t,f));if(u=e.memoizedState,u!==null&&(a=u.dehydrated,a!==null))return LN(e,t,f,i,a,u,n);if(d){d=i.fallback,f=t.mode,u=e.child,a=u.sibling;var b={mode:"hidden",children:i.children};return!(f&1)&&t.child!==u?(i=t.child,i.childLanes=0,i.pendingProps=b,t.deletions=null):(i=ac(u,b),i.subtreeFlags=u.subtreeFlags&14680064),a!==null?d=ac(a,d):(d=xu(d,f,n,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,f=e.child.memoizedState,f=f===null?Nw(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~n,t.memoizedState=jw,i}return d=e.child,e=d.sibling,i=ac(d,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function BC(e,t){return t=Q0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function By(e,t,n,i){return i!==null&&CC(i),Th(t,e.child,null,n),e=BC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LN(e,t,n,i,u,d,f){if(n)return t.flags&256?(t.flags&=-257,i=Db(Error(At(422))),By(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=i.fallback,u=t.mode,i=Q0({mode:"visible",children:i.children},u,0,null),d=xu(d,u,f,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,t.mode&1&&Th(t,e.child,null,f),t.child.memoizedState=Nw(f),t.memoizedState=jw,d);if(!(t.mode&1))return By(e,t,f,null);if(u.data==="$!"){if(i=u.nextSibling&&u.nextSibling.dataset,i)var a=i.dgst;return i=a,d=Error(At(419)),i=Db(d,i,void 0),By(e,t,f,i)}if(a=(f&e.childLanes)!==0,Ci||a){if(i=zo,i!==null){switch(f&-f){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(i.suspendedLanes|f)?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,Js(e,u),Wa(i,e,u,-1))}return HC(),i=Db(Error(At(421))),By(e,t,f,i)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=qN.bind(null,e),u._reactRetry=t,null):(e=d.treeContext,Xi=rc(u.nextSibling),Qi=t,zn=!0,Ua=null,e!==null&&(fa[ma++]=Gs,fa[ma++]=Ws,fa[ma++]=Iu,Gs=e.id,Ws=e.overflow,Iu=t),t=BC(t,i.children),t.flags|=4096,t)}function aE(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Dw(e.return,t,n)}function Lb(e,t,n,i,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:u}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=n,d.tailMode=u)}function fD(e,t,n){var i=t.pendingProps,u=i.revealOrder,d=i.tail;if(pi(e,t,i.children,n),i=Ln.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&aE(e,n,t);else if(e.tag===19)aE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Cn(Ln,i),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&Kv(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),Lb(t,!1,u,n,d);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Kv(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}Lb(t,!0,n,null,d);break;case"together":Lb(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ku|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,n=ac(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ac(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $N(e,t,n){switch(t.tag){case 3:hD(t),Ph();break;case 5:jz(t);break;case 1:Ti(t.type)&&Uv(t);break;case 4:MC(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,u=t.memoizedProps.value;Cn(Wv,i._currentValue),i._currentValue=u;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Cn(Ln,Ln.current&1),t.flags|=128,null):n&t.child.childLanes?pD(e,t,n):(Cn(Ln,Ln.current&1),e=Qs(e,t,n),e!==null?e.sibling:null);Cn(Ln,Ln.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return fD(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Cn(Ln,Ln.current),i)break;return null;case 22:case 23:return t.lanes=0,uD(e,t,n)}return Qs(e,t,n)}var mD,Vw,gD,yD;mD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vw=function(){};gD=function(e,t,n,i){var u=e.memoizedProps;if(u!==i){e=t.stateNode,gu(xs.current);var d=null;switch(n){case"input":u=uw(e,u),i=uw(e,i),d=[];break;case"select":u=On({},u,{value:void 0}),i=On({},i,{value:void 0}),d=[];break;case"textarea":u=pw(e,u),i=pw(e,i),d=[];break;default:typeof u.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Nv)}mw(n,i);var f;n=null;for(C in u)if(!i.hasOwnProperty(C)&&u.hasOwnProperty(C)&&u[C]!=null)if(C==="style"){var a=u[C];for(f in a)a.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(am.hasOwnProperty(C)?d||(d=[]):(d=d||[]).push(C,null));for(C in i){var b=i[C];if(a=u!=null?u[C]:void 0,i.hasOwnProperty(C)&&b!==a&&(b!=null||a!=null))if(C==="style")if(a){for(f in a)!a.hasOwnProperty(f)||b&&b.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in b)b.hasOwnProperty(f)&&a[f]!==b[f]&&(n||(n={}),n[f]=b[f])}else n||(d||(d=[]),d.push(C,n)),n=b;else C==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,a=a?a.__html:void 0,b!=null&&a!==b&&(d=d||[]).push(C,b)):C==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(C,""+b):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(am.hasOwnProperty(C)?(b!=null&&C==="onScroll"&&kn("scroll",e),d||a===b||(d=[])):(d=d||[]).push(C,b))}n&&(d=d||[]).push("style",n);var C=d;(t.updateQueue=C)&&(t.flags|=4)}};yD=function(e,t,n,i){n!==i&&(t.flags|=4)};function yf(e,t){if(!zn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ni(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,i|=u.subtreeFlags&14680064,i|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ON(e,t,n){var i=t.pendingProps;switch(SC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(t),null;case 1:return Ti(t.type)&&Vv(),ni(t),null;case 3:return i=t.stateNode,Ih(),Mn(Pi),Mn(ai),AC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&($y(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ua!==null&&(Xw(Ua),Ua=null))),Vw(e,t),ni(t),null;case 5:RC(t);var u=gu(vm.current);if(n=t.type,e!==null&&t.stateNode!=null)gD(e,t,n,i,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(At(166));return ni(t),null}if(e=gu(xs.current),$y(t)){i=t.stateNode,n=t.type;var d=t.memoizedProps;switch(i[gs]=t,i[gm]=d,e=(t.mode&1)!==0,n){case"dialog":kn("cancel",i),kn("close",i);break;case"iframe":case"object":case"embed":kn("load",i);break;case"video":case"audio":for(u=0;u<zf.length;u++)kn(zf[u],i);break;case"source":kn("error",i);break;case"img":case"image":case"link":kn("error",i),kn("load",i);break;case"details":kn("toggle",i);break;case"input":mI(i,d),kn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!d.multiple},kn("invalid",i);break;case"textarea":yI(i,d),kn("invalid",i)}mw(n,d),u=null;for(var f in d)if(d.hasOwnProperty(f)){var a=d[f];f==="children"?typeof a=="string"?i.textContent!==a&&(d.suppressHydrationWarning!==!0&&Ly(i.textContent,a,e),u=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(d.suppressHydrationWarning!==!0&&Ly(i.textContent,a,e),u=["children",""+a]):am.hasOwnProperty(f)&&a!=null&&f==="onScroll"&&kn("scroll",i)}switch(n){case"input":Iy(i),gI(i,d,!0);break;case"textarea":Iy(i),vI(i);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(i.onclick=Nv)}i=u,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GA(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(n,{is:i.is}):(e=f.createElement(n),n==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,n),e[gs]=t,e[gm]=i,mD(e,t,!1,!1),t.stateNode=e;e:{switch(f=gw(n,i),n){case"dialog":kn("cancel",e),kn("close",e),u=i;break;case"iframe":case"object":case"embed":kn("load",e),u=i;break;case"video":case"audio":for(u=0;u<zf.length;u++)kn(zf[u],e);u=i;break;case"source":kn("error",e),u=i;break;case"img":case"image":case"link":kn("error",e),kn("load",e),u=i;break;case"details":kn("toggle",e),u=i;break;case"input":mI(e,i),u=uw(e,i),kn("invalid",e);break;case"option":u=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},u=On({},i,{value:void 0}),kn("invalid",e);break;case"textarea":yI(e,i),u=pw(e,i),kn("invalid",e);break;default:u=i}mw(n,u),a=u;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];d==="style"?qA(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&WA(e,b)):d==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&sm(e,b):typeof b=="number"&&sm(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(am.hasOwnProperty(d)?b!=null&&d==="onScroll"&&kn("scroll",e):b!=null&&lC(e,d,b,f))}switch(n){case"input":Iy(e),gI(e,i,!1);break;case"textarea":Iy(e),vI(e);break;case"option":i.value!=null&&e.setAttribute("value",""+lc(i.value));break;case"select":e.multiple=!!i.multiple,d=i.value,d!=null?dh(e,!!i.multiple,d,!1):i.defaultValue!=null&&dh(e,!!i.multiple,i.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Nv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ni(t),null;case 6:if(e&&t.stateNode!=null)yD(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(At(166));if(n=gu(vm.current),gu(xs.current),$y(t)){if(i=t.stateNode,n=t.memoizedProps,i[gs]=t,(d=i.nodeValue!==n)&&(e=Qi,e!==null))switch(e.tag){case 3:Ly(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ly(i.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[gs]=t,t.stateNode=i}return ni(t),null;case 13:if(Mn(Ln),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(zn&&Xi!==null&&t.mode&1&&!(t.flags&128))Lz(),Ph(),t.flags|=98560,d=!1;else if(d=$y(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(At(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(At(317));d[gs]=t}else Ph(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ni(t),d=!1}else Ua!==null&&(Xw(Ua),Ua=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Ln.current&1?wo===0&&(wo=3):HC())),t.updateQueue!==null&&(t.flags|=4),ni(t),null);case 4:return Ih(),Vw(e,t),e===null&&fm(t.stateNode.containerInfo),ni(t),null;case 10:return IC(t.type._context),ni(t),null;case 17:return Ti(t.type)&&Vv(),ni(t),null;case 19:if(Mn(Ln),d=t.memoizedState,d===null)return ni(t),null;if(i=(t.flags&128)!==0,f=d.rendering,f===null)if(i)yf(d,!1);else{if(wo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Kv(e),f!==null){for(t.flags|=128,yf(d,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)d=n,e=i,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cn(Ln,Ln.current&1|2),t.child}e=e.sibling}d.tail!==null&&Jn()>kh&&(t.flags|=128,i=!0,yf(d,!1),t.lanes=4194304)}else{if(!i)if(e=Kv(f),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yf(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!zn)return ni(t),null}else 2*Jn()-d.renderingStartTime>kh&&n!==1073741824&&(t.flags|=128,i=!0,yf(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(n=d.last,n!==null?n.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Jn(),t.sibling=null,n=Ln.current,Cn(Ln,i?n&1|2:n&1),t):(ni(t),null);case 22:case 23:return UC(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ui&1073741824&&(ni(t),t.subtreeFlags&6&&(t.flags|=8192)):ni(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function BN(e,t){switch(SC(t),t.tag){case 1:return Ti(t.type)&&Vv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ih(),Mn(Pi),Mn(ai),AC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return RC(t),null;case 13:if(Mn(Ln),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));Ph()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Mn(Ln),null;case 4:return Ih(),null;case 10:return IC(t.type._context),null;case 22:case 23:return UC(),null;case 24:return null;default:return null}}var Fy=!1,ii=!1,FN=typeof WeakSet=="function"?WeakSet:Set,er=null;function ih(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Zn(e,t,i)}else n.current=null}function Uw(e,t,n){try{n()}catch(i){Zn(e,t,i)}}var sE=!1;function jN(e,t){if(Tw=Bv,e=wz(),bC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var u=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var f=0,a=-1,b=-1,C=0,I=0,k=e,M=null;t:for(;;){for(var R;k!==n||u!==0&&k.nodeType!==3||(a=f+u),k!==d||i!==0&&k.nodeType!==3||(b=f+i),k.nodeType===3&&(f+=k.nodeValue.length),(R=k.firstChild)!==null;)M=k,k=R;for(;;){if(k===e)break t;if(M===n&&++C===u&&(a=f),M===d&&++I===i&&(b=f),(R=k.nextSibling)!==null)break;k=M,M=k.parentNode}k=R}n=a===-1||b===-1?null:{start:a,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(Iw={focusedElem:e,selectionRange:n},Bv=!1,er=t;er!==null;)if(t=er,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,er=e;else for(;er!==null;){t=er;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var G=$.memoizedProps,ee=$.memoizedState,F=t.stateNode,j=F.getSnapshotBeforeUpdate(t.elementType===t.type?G:Na(t.type,G),ee);F.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ne){Zn(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,er=e;break}er=t.return}return $=sE,sE=!1,$}function Gf(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&e)===e){var d=u.destroy;u.destroy=void 0,d!==void 0&&Uw(t,n,d)}u=u.next}while(u!==i)}}function Y0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function Hw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vD(e){var t=e.alternate;t!==null&&(e.alternate=null,vD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[gm],delete t[Mw],delete t[wN],delete t[SN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _D(e){return e.tag===5||e.tag===3||e.tag===4}function lE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_D(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gw(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nv));else if(i!==4&&(e=e.child,e!==null))for(Gw(e,t,n),e=e.sibling;e!==null;)Gw(e,t,n),e=e.sibling}function Ww(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ww(e,t,n),e=e.sibling;e!==null;)Ww(e,t,n),e=e.sibling}var Uo=null,Va=!1;function Fl(e,t,n){for(n=n.child;n!==null;)xD(e,t,n),n=n.sibling}function xD(e,t,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(U0,n)}catch{}switch(n.tag){case 5:ii||ih(n,t);case 6:var i=Uo,u=Va;Uo=null,Fl(e,t,n),Uo=i,Va=u,Uo!==null&&(Va?(e=Uo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Uo.removeChild(n.stateNode));break;case 18:Uo!==null&&(Va?(e=Uo,n=n.stateNode,e.nodeType===8?Eb(e.parentNode,n):e.nodeType===1&&Eb(e,n),dm(e)):Eb(Uo,n.stateNode));break;case 4:i=Uo,u=Va,Uo=n.stateNode.containerInfo,Va=!0,Fl(e,t,n),Uo=i,Va=u;break;case 0:case 11:case 14:case 15:if(!ii&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){u=i=i.next;do{var d=u,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&Uw(n,t,f),u=u.next}while(u!==i)}Fl(e,t,n);break;case 1:if(!ii&&(ih(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Zn(n,t,a)}Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:n.mode&1?(ii=(i=ii)||n.memoizedState!==null,Fl(e,t,n),ii=i):Fl(e,t,n);break;default:Fl(e,t,n)}}function cE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new FN),t.forEach(function(i){var u=KN.bind(null,e,i);n.has(i)||(n.add(i),i.then(u,u))})}}function Ba(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var u=n[i];try{var d=e,f=t,a=f;e:for(;a!==null;){switch(a.tag){case 5:Uo=a.stateNode,Va=!1;break e;case 3:Uo=a.stateNode.containerInfo,Va=!0;break e;case 4:Uo=a.stateNode.containerInfo,Va=!0;break e}a=a.return}if(Uo===null)throw Error(At(160));xD(d,f,u),Uo=null,Va=!1;var b=u.alternate;b!==null&&(b.return=null),u.return=null}catch(C){Zn(u,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bD(t,e),t=t.sibling}function bD(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ba(t,e),cs(e),i&4){try{Gf(3,e,e.return),Y0(3,e)}catch(G){Zn(e,e.return,G)}try{Gf(5,e,e.return)}catch(G){Zn(e,e.return,G)}}break;case 1:Ba(t,e),cs(e),i&512&&n!==null&&ih(n,n.return);break;case 5:if(Ba(t,e),cs(e),i&512&&n!==null&&ih(n,n.return),e.flags&32){var u=e.stateNode;try{sm(u,"")}catch(G){Zn(e,e.return,G)}}if(i&4&&(u=e.stateNode,u!=null)){var d=e.memoizedProps,f=n!==null?n.memoizedProps:d,a=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{a==="input"&&d.type==="radio"&&d.name!=null&&UA(u,d),gw(a,f);var C=gw(a,d);for(f=0;f<b.length;f+=2){var I=b[f],k=b[f+1];I==="style"?qA(u,k):I==="dangerouslySetInnerHTML"?WA(u,k):I==="children"?sm(u,k):lC(u,I,k,C)}switch(a){case"input":dw(u,d);break;case"textarea":HA(u,d);break;case"select":var M=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var R=d.value;R!=null?dh(u,!!d.multiple,R,!1):M!==!!d.multiple&&(d.defaultValue!=null?dh(u,!!d.multiple,d.defaultValue,!0):dh(u,!!d.multiple,d.multiple?[]:"",!1))}u[gm]=d}catch(G){Zn(e,e.return,G)}}break;case 6:if(Ba(t,e),cs(e),i&4){if(e.stateNode===null)throw Error(At(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(G){Zn(e,e.return,G)}}break;case 3:if(Ba(t,e),cs(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{dm(t.containerInfo)}catch(G){Zn(e,e.return,G)}break;case 4:Ba(t,e),cs(e);break;case 13:Ba(t,e),cs(e),u=e.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(NC=Jn())),i&4&&cE(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(ii=(C=ii)||I,Ba(t,e),ii=C):Ba(t,e),cs(e),i&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!I&&e.mode&1)for(er=e,I=e.child;I!==null;){for(k=er=I;er!==null;){switch(M=er,R=M.child,M.tag){case 0:case 11:case 14:case 15:Gf(4,M,M.return);break;case 1:ih(M,M.return);var $=M.stateNode;if(typeof $.componentWillUnmount=="function"){i=M,n=M.return;try{t=i,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(G){Zn(i,n,G)}}break;case 5:ih(M,M.return);break;case 22:if(M.memoizedState!==null){dE(k);continue}}R!==null?(R.return=M,er=R):dE(k)}I=I.sibling}e:for(I=null,k=e;;){if(k.tag===5){if(I===null){I=k;try{u=k.stateNode,C?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(a=k.stateNode,b=k.memoizedProps.style,f=b!=null&&b.hasOwnProperty("display")?b.display:null,a.style.display=ZA("display",f))}catch(G){Zn(e,e.return,G)}}}else if(k.tag===6){if(I===null)try{k.stateNode.nodeValue=C?"":k.memoizedProps}catch(G){Zn(e,e.return,G)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;I===k&&(I=null),k=k.return}I===k&&(I=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Ba(t,e),cs(e),i&4&&cE(e);break;case 21:break;default:Ba(t,e),cs(e)}}function cs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_D(n)){var i=n;break e}n=n.return}throw Error(At(160))}switch(i.tag){case 5:var u=i.stateNode;i.flags&32&&(sm(u,""),i.flags&=-33);var d=lE(e);Ww(e,d,u);break;case 3:case 4:var f=i.stateNode.containerInfo,a=lE(e);Gw(e,a,f);break;default:throw Error(At(161))}}catch(b){Zn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function NN(e,t,n){er=e,wD(e)}function wD(e,t,n){for(var i=(e.mode&1)!==0;er!==null;){var u=er,d=u.child;if(u.tag===22&&i){var f=u.memoizedState!==null||Fy;if(!f){var a=u.alternate,b=a!==null&&a.memoizedState!==null||ii;a=Fy;var C=ii;if(Fy=f,(ii=b)&&!C)for(er=u;er!==null;)f=er,b=f.child,f.tag===22&&f.memoizedState!==null?hE(u):b!==null?(b.return=f,er=b):hE(u);for(;d!==null;)er=d,wD(d),d=d.sibling;er=u,Fy=a,ii=C}uE(e)}else u.subtreeFlags&8772&&d!==null?(d.return=u,er=d):uE(e)}}function uE(e){for(;er!==null;){var t=er;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ii||Y0(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ii)if(n===null)i.componentDidMount();else{var u=t.elementType===t.type?n.memoizedProps:Na(t.type,n.memoizedProps);i.componentDidUpdate(u,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&qI(t,d,i);break;case 3:var f=t.updateQueue;if(f!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qI(t,f,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var I=C.memoizedState;if(I!==null){var k=I.dehydrated;k!==null&&dm(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}ii||t.flags&512&&Hw(t)}catch(M){Zn(t,t.return,M)}}if(t===e){er=null;break}if(n=t.sibling,n!==null){n.return=t.return,er=n;break}er=t.return}}function dE(e){for(;er!==null;){var t=er;if(t===e){er=null;break}var n=t.sibling;if(n!==null){n.return=t.return,er=n;break}er=t.return}}function hE(e){for(;er!==null;){var t=er;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Y0(4,t)}catch(b){Zn(t,n,b)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var u=t.return;try{i.componentDidMount()}catch(b){Zn(t,u,b)}}var d=t.return;try{Hw(t)}catch(b){Zn(t,d,b)}break;case 5:var f=t.return;try{Hw(t)}catch(b){Zn(t,f,b)}}}catch(b){Zn(t,t.return,b)}if(t===e){er=null;break}var a=t.sibling;if(a!==null){a.return=t.return,er=a;break}er=t.return}}var VN=Math.ceil,Jv=rl.ReactCurrentDispatcher,FC=rl.ReactCurrentOwner,va=rl.ReactCurrentBatchConfig,Kr=0,zo=null,ho=null,Zo=0,Ui=0,ah=mc(0),wo=0,wm=null,ku=0,J0=0,jC=0,Wf=null,wi=null,NC=0,kh=1/0,Vs=null,Qv=!1,Zw=null,oc=null,jy=!1,Jl=null,e0=0,Zf=0,qw=null,fv=-1,mv=0;function fi(){return Kr&6?Jn():fv!==-1?fv:fv=Jn()}function ic(e){return e.mode&1?Kr&2&&Zo!==0?Zo&-Zo:PN.transition!==null?(mv===0&&(mv=az()),mv):(e=cn,e!==0||(e=window.event,e=e===void 0?16:pz(e.type)),e):1}function Wa(e,t,n,i){if(50<Zf)throw Zf=0,qw=null,Error(At(185));Nm(e,n,i),(!(Kr&2)||e!==zo)&&(e===zo&&(!(Kr&2)&&(J0|=n),wo===4&&Zl(e,Zo)),Ii(e,i),n===1&&Kr===0&&!(t.mode&1)&&(kh=Jn()+500,q0&&gc()))}function Ii(e,t){var n=e.callbackNode;P6(e,t);var i=Ov(e,e===zo?Zo:0);if(i===0)n!==null&&bI(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&bI(n),t===1)e.tag===0?CN(pE.bind(null,e)):Az(pE.bind(null,e)),xN(function(){!(Kr&6)&&gc()}),n=null;else{switch(sz(i)){case 1:n=pC;break;case 4:n=oz;break;case 16:n=$v;break;case 536870912:n=iz;break;default:n=$v}n=MD(n,SD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function SD(e,t){if(fv=-1,mv=0,Kr&6)throw Error(At(327));var n=e.callbackNode;if(gh()&&e.callbackNode!==n)return null;var i=Ov(e,e===zo?Zo:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=t0(e,i);else{t=i;var u=Kr;Kr|=2;var d=PD();(zo!==e||Zo!==t)&&(Vs=null,kh=Jn()+500,_u(e,t));do try{GN();break}catch(a){CD(e,a)}while(!0);TC(),Jv.current=d,Kr=u,ho!==null?t=0:(zo=null,Zo=0,t=wo)}if(t!==0){if(t===2&&(u=bw(e),u!==0&&(i=u,t=Kw(e,u))),t===1)throw n=wm,_u(e,0),Zl(e,i),Ii(e,Jn()),n;if(t===6)Zl(e,i);else{if(u=e.current.alternate,!(i&30)&&!UN(u)&&(t=t0(e,i),t===2&&(d=bw(e),d!==0&&(i=d,t=Kw(e,d))),t===1))throw n=wm,_u(e,0),Zl(e,i),Ii(e,Jn()),n;switch(e.finishedWork=u,e.finishedLanes=i,t){case 0:case 1:throw Error(At(345));case 2:du(e,wi,Vs);break;case 3:if(Zl(e,i),(i&130023424)===i&&(t=NC+500-Jn(),10<t)){if(Ov(e,0)!==0)break;if(u=e.suspendedLanes,(u&i)!==i){fi(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=kw(du.bind(null,e,wi,Vs),t);break}du(e,wi,Vs);break;case 4:if(Zl(e,i),(i&4194240)===i)break;for(t=e.eventTimes,u=-1;0<i;){var f=31-Ga(i);d=1<<f,f=t[f],f>u&&(u=f),i&=~d}if(i=u,i=Jn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VN(i/1960))-i,10<i){e.timeoutHandle=kw(du.bind(null,e,wi,Vs),i);break}du(e,wi,Vs);break;case 5:du(e,wi,Vs);break;default:throw Error(At(329))}}}return Ii(e,Jn()),e.callbackNode===n?SD.bind(null,e):null}function Kw(e,t){var n=Wf;return e.current.memoizedState.isDehydrated&&(_u(e,t).flags|=256),e=t0(e,t),e!==2&&(t=wi,wi=n,t!==null&&Xw(t)),e}function Xw(e){wi===null?wi=e:wi.push.apply(wi,e)}function UN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var u=n[i],d=u.getSnapshot;u=u.value;try{if(!qa(d(),u))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zl(e,t){for(t&=~jC,t&=~J0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ga(t),i=1<<n;e[n]=-1,t&=~i}}function pE(e){if(Kr&6)throw Error(At(327));gh();var t=Ov(e,0);if(!(t&1))return Ii(e,Jn()),null;var n=t0(e,t);if(e.tag!==0&&n===2){var i=bw(e);i!==0&&(t=i,n=Kw(e,i))}if(n===1)throw n=wm,_u(e,0),Zl(e,t),Ii(e,Jn()),n;if(n===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,du(e,wi,Vs),Ii(e,Jn()),null}function VC(e,t){var n=Kr;Kr|=1;try{return e(t)}finally{Kr=n,Kr===0&&(kh=Jn()+500,q0&&gc())}}function Mu(e){Jl!==null&&Jl.tag===0&&!(Kr&6)&&gh();var t=Kr;Kr|=1;var n=va.transition,i=cn;try{if(va.transition=null,cn=1,e)return e()}finally{cn=i,va.transition=n,Kr=t,!(Kr&6)&&gc()}}function UC(){Ui=ah.current,Mn(ah)}function _u(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_N(n)),ho!==null)for(n=ho.return;n!==null;){var i=n;switch(SC(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Vv();break;case 3:Ih(),Mn(Pi),Mn(ai),AC();break;case 5:RC(i);break;case 4:Ih();break;case 13:Mn(Ln);break;case 19:Mn(Ln);break;case 10:IC(i.type._context);break;case 22:case 23:UC()}n=n.return}if(zo=e,ho=e=ac(e.current,null),Zo=Ui=t,wo=0,wm=null,jC=J0=ku=0,wi=Wf=null,mu!==null){for(t=0;t<mu.length;t++)if(n=mu[t],i=n.interleaved,i!==null){n.interleaved=null;var u=i.next,d=n.pending;if(d!==null){var f=d.next;d.next=u,i.next=f}n.pending=i}mu=null}return e}function CD(e,t){do{var n=ho;try{if(TC(),dv.current=Yv,Xv){for(var i=$n.memoizedState;i!==null;){var u=i.queue;u!==null&&(u.pending=null),i=i.next}Xv=!1}if(Eu=0,Ao=bo=$n=null,Hf=!1,_m=0,FC.current=null,n===null||n.return===null){wo=1,wm=t,ho=null;break}e:{var d=e,f=n.return,a=n,b=t;if(t=Zo,a.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var C=b,I=a,k=I.tag;if(!(I.mode&1)&&(k===0||k===11||k===15)){var M=I.alternate;M?(I.updateQueue=M.updateQueue,I.memoizedState=M.memoizedState,I.lanes=M.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=eE(f);if(R!==null){R.flags&=-257,tE(R,f,a,d,t),R.mode&1&&QI(d,C,t),t=R,b=C;var $=t.updateQueue;if($===null){var G=new Set;G.add(b),t.updateQueue=G}else $.add(b);break e}else{if(!(t&1)){QI(d,C,t),HC();break e}b=Error(At(426))}}else if(zn&&a.mode&1){var ee=eE(f);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),tE(ee,f,a,d,t),CC(Eh(b,a));break e}}d=b=Eh(b,a),wo!==4&&(wo=2),Wf===null?Wf=[d]:Wf.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var F=sD(d,b,t);ZI(d,F);break e;case 1:a=b;var j=d.type,O=d.stateNode;if(!(d.flags&128)&&(typeof j.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(oc===null||!oc.has(O)))){d.flags|=65536,t&=-t,d.lanes|=t;var ne=lD(d,a,t);ZI(d,ne);break e}}d=d.return}while(d!==null)}ID(n)}catch(Y){t=Y,ho===n&&n!==null&&(ho=n=n.return);continue}break}while(!0)}function PD(){var e=Jv.current;return Jv.current=Yv,e===null?Yv:e}function HC(){(wo===0||wo===3||wo===2)&&(wo=4),zo===null||!(ku&268435455)&&!(J0&268435455)||Zl(zo,Zo)}function t0(e,t){var n=Kr;Kr|=2;var i=PD();(zo!==e||Zo!==t)&&(Vs=null,_u(e,t));do try{HN();break}catch(u){CD(e,u)}while(!0);if(TC(),Kr=n,Jv.current=i,ho!==null)throw Error(At(261));return zo=null,Zo=0,wo}function HN(){for(;ho!==null;)TD(ho)}function GN(){for(;ho!==null&&!g6();)TD(ho)}function TD(e){var t=kD(e.alternate,e,Ui);e.memoizedProps=e.pendingProps,t===null?ID(e):ho=t,FC.current=null}function ID(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=BN(n,t),n!==null){n.flags&=32767,ho=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wo=6,ho=null;return}}else if(n=ON(n,t,Ui),n!==null){ho=n;return}if(t=t.sibling,t!==null){ho=t;return}ho=t=e}while(t!==null);wo===0&&(wo=5)}function du(e,t,n){var i=cn,u=va.transition;try{va.transition=null,cn=1,WN(e,t,n,i)}finally{va.transition=u,cn=i}return null}function WN(e,t,n,i){do gh();while(Jl!==null);if(Kr&6)throw Error(At(327));n=e.finishedWork;var u=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(T6(e,d),e===zo&&(ho=zo=null,Zo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jy||(jy=!0,MD($v,function(){return gh(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=va.transition,va.transition=null;var f=cn;cn=1;var a=Kr;Kr|=4,FC.current=null,jN(e,n),bD(n,e),hN(Iw),Bv=!!Tw,Iw=Tw=null,e.current=n,NN(n),y6(),Kr=a,cn=f,va.transition=d}else e.current=n;if(jy&&(jy=!1,Jl=e,e0=u),d=e.pendingLanes,d===0&&(oc=null),x6(n.stateNode),Ii(e,Jn()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)u=t[n],i(u.value,{componentStack:u.stack,digest:u.digest});if(Qv)throw Qv=!1,e=Zw,Zw=null,e;return e0&1&&e.tag!==0&&gh(),d=e.pendingLanes,d&1?e===qw?Zf++:(Zf=0,qw=e):Zf=0,gc(),null}function gh(){if(Jl!==null){var e=sz(e0),t=va.transition,n=cn;try{if(va.transition=null,cn=16>e?16:e,Jl===null)var i=!1;else{if(e=Jl,Jl=null,e0=0,Kr&6)throw Error(At(331));var u=Kr;for(Kr|=4,er=e.current;er!==null;){var d=er,f=d.child;if(er.flags&16){var a=d.deletions;if(a!==null){for(var b=0;b<a.length;b++){var C=a[b];for(er=C;er!==null;){var I=er;switch(I.tag){case 0:case 11:case 15:Gf(8,I,d)}var k=I.child;if(k!==null)k.return=I,er=k;else for(;er!==null;){I=er;var M=I.sibling,R=I.return;if(vD(I),I===C){er=null;break}if(M!==null){M.return=R,er=M;break}er=R}}}var $=d.alternate;if($!==null){var G=$.child;if(G!==null){$.child=null;do{var ee=G.sibling;G.sibling=null,G=ee}while(G!==null)}}er=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,er=f;else e:for(;er!==null;){if(d=er,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Gf(9,d,d.return)}var F=d.sibling;if(F!==null){F.return=d.return,er=F;break e}er=d.return}}var j=e.current;for(er=j;er!==null;){f=er;var O=f.child;if(f.subtreeFlags&2064&&O!==null)O.return=f,er=O;else e:for(f=j;er!==null;){if(a=er,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Y0(9,a)}}catch(Y){Zn(a,a.return,Y)}if(a===f){er=null;break e}var ne=a.sibling;if(ne!==null){ne.return=a.return,er=ne;break e}er=a.return}}if(Kr=u,gc(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(U0,e)}catch{}i=!0}return i}finally{cn=n,va.transition=t}}return!1}function fE(e,t,n){t=Eh(n,t),t=sD(e,t,1),e=nc(e,t,1),t=fi(),e!==null&&(Nm(e,1,t),Ii(e,t))}function Zn(e,t,n){if(e.tag===3)fE(e,e,n);else for(;t!==null;){if(t.tag===3){fE(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(oc===null||!oc.has(i))){e=Eh(n,e),e=lD(t,e,1),t=nc(t,e,1),e=fi(),t!==null&&(Nm(t,1,e),Ii(t,e));break}}t=t.return}}function ZN(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=fi(),e.pingedLanes|=e.suspendedLanes&n,zo===e&&(Zo&n)===n&&(wo===4||wo===3&&(Zo&130023424)===Zo&&500>Jn()-NC?_u(e,0):jC|=n),Ii(e,t)}function ED(e,t){t===0&&(e.mode&1?(t=My,My<<=1,!(My&130023424)&&(My=4194304)):t=1);var n=fi();e=Js(e,t),e!==null&&(Nm(e,t,n),Ii(e,n))}function qN(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ED(e,n)}function KN(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(At(314))}i!==null&&i.delete(t),ED(e,n)}var kD;kD=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pi.current)Ci=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ci=!1,$N(e,t,n);Ci=!!(e.flags&131072)}else Ci=!1,zn&&t.flags&1048576&&zz(t,Gv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;pv(e,t),e=t.pendingProps;var u=Ch(t,ai.current);mh(t,n),u=DC(null,t,i,e,u,n);var d=LC();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(i)?(d=!0,Uv(t)):d=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,kC(t),u.updater=X0,t.stateNode=u,u._reactInternals=t,$w(t,i,e,n),t=Fw(null,t,i,!0,d,n)):(t.tag=0,zn&&d&&wC(t),pi(null,t,u,n),t=t.child),t;case 16:i=t.elementType;e:{switch(pv(e,t),e=t.pendingProps,u=i._init,i=u(i._payload),t.type=i,u=t.tag=YN(i),e=Na(i,e),u){case 0:t=Bw(null,t,i,e,n);break e;case 1:t=oE(null,t,i,e,n);break e;case 11:t=rE(null,t,i,e,n);break e;case 14:t=nE(null,t,i,Na(i.type,e),n);break e}throw Error(At(306,i,""))}return t;case 0:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:Na(i,u),Bw(e,t,i,u,n);case 1:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:Na(i,u),oE(e,t,i,u,n);case 3:e:{if(hD(t),e===null)throw Error(At(387));i=t.pendingProps,d=t.memoizedState,u=d.element,Fz(e,t),qv(t,i,null,n);var f=t.memoizedState;if(i=f.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){u=Eh(Error(At(423)),t),t=iE(e,t,i,n,u);break e}else if(i!==u){u=Eh(Error(At(424)),t),t=iE(e,t,i,n,u);break e}else for(Xi=rc(t.stateNode.containerInfo.firstChild),Qi=t,zn=!0,Ua=null,n=Oz(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ph(),i===u){t=Qs(e,t,n);break e}pi(e,t,i,n)}t=t.child}return t;case 5:return jz(t),e===null&&zw(t),i=t.type,u=t.pendingProps,d=e!==null?e.memoizedProps:null,f=u.children,Ew(i,u)?f=null:d!==null&&Ew(i,d)&&(t.flags|=32),dD(e,t),pi(e,t,f,n),t.child;case 6:return e===null&&zw(t),null;case 13:return pD(e,t,n);case 4:return MC(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Th(t,null,i,n):pi(e,t,i,n),t.child;case 11:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:Na(i,u),rE(e,t,i,u,n);case 7:return pi(e,t,t.pendingProps,n),t.child;case 8:return pi(e,t,t.pendingProps.children,n),t.child;case 12:return pi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,u=t.pendingProps,d=t.memoizedProps,f=u.value,Cn(Wv,i._currentValue),i._currentValue=f,d!==null)if(qa(d.value,f)){if(d.children===u.children&&!Pi.current){t=Qs(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var a=d.dependencies;if(a!==null){f=d.child;for(var b=a.firstContext;b!==null;){if(b.context===i){if(d.tag===1){b=Zs(-1,n&-n),b.tag=2;var C=d.updateQueue;if(C!==null){C=C.shared;var I=C.pending;I===null?b.next=b:(b.next=I.next,I.next=b),C.pending=b}}d.lanes|=n,b=d.alternate,b!==null&&(b.lanes|=n),Dw(d.return,n,t),a.lanes|=n;break}b=b.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(At(341));f.lanes|=n,a=f.alternate,a!==null&&(a.lanes|=n),Dw(f,n,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}pi(e,t,u.children,n),t=t.child}return t;case 9:return u=t.type,i=t.pendingProps.children,mh(t,n),u=xa(u),i=i(u),t.flags|=1,pi(e,t,i,n),t.child;case 14:return i=t.type,u=Na(i,t.pendingProps),u=Na(i.type,u),nE(e,t,i,u,n);case 15:return cD(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,u=t.pendingProps,u=t.elementType===i?u:Na(i,u),pv(e,t),t.tag=1,Ti(i)?(e=!0,Uv(t)):e=!1,mh(t,n),aD(t,i,u),$w(t,i,u,n),Fw(null,t,i,!0,e,n);case 19:return fD(e,t,n);case 22:return uD(e,t,n)}throw Error(At(156,t.tag))};function MD(e,t){return nz(e,t)}function XN(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(e,t,n,i){return new XN(e,t,n,i)}function GC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function YN(e){if(typeof e=="function")return GC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===uC)return 11;if(e===dC)return 14}return 2}function ac(e,t){var n=e.alternate;return n===null?(n=ya(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gv(e,t,n,i,u,d){var f=2;if(i=e,typeof e=="function")GC(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Xd:return xu(n.children,u,d,t);case cC:f=8,u|=8;break;case aw:return e=ya(12,n,t,u|2),e.elementType=aw,e.lanes=d,e;case sw:return e=ya(13,n,t,u),e.elementType=sw,e.lanes=d,e;case lw:return e=ya(19,n,t,u),e.elementType=lw,e.lanes=d,e;case jA:return Q0(n,u,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BA:f=10;break e;case FA:f=9;break e;case uC:f=11;break e;case dC:f=14;break e;case Ul:f=16,i=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ya(f,n,t,u),t.elementType=e,t.type=i,t.lanes=d,t}function xu(e,t,n,i){return e=ya(7,e,i,t),e.lanes=n,e}function Q0(e,t,n,i){return e=ya(22,e,i,t),e.elementType=jA,e.lanes=n,e.stateNode={isHidden:!1},e}function $b(e,t,n){return e=ya(6,e,null,t),e.lanes=n,e}function Ob(e,t,n){return t=ya(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JN(e,t,n,i,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yb(0),this.expirationTimes=yb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yb(0),this.identifierPrefix=i,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function WC(e,t,n,i,u,d,f,a,b){return e=new JN(e,t,n,a,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=ya(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kC(d),e}function QN(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kd,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function RD(e){if(!e)return cc;e=e._reactInternals;e:{if(Lu(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var n=e.type;if(Ti(n))return Rz(e,n,t)}return t}function AD(e,t,n,i,u,d,f,a,b){return e=WC(n,i,!0,e,u,d,f,a,b),e.context=RD(null),n=e.current,i=fi(),u=ic(n),d=Zs(i,u),d.callback=t??null,nc(n,d,u),e.current.lanes=u,Nm(e,u,i),Ii(e,i),e}function e_(e,t,n,i){var u=t.current,d=fi(),f=ic(u);return n=RD(n),t.context===null?t.context=n:t.pendingContext=n,t=Zs(d,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=nc(u,t,f),e!==null&&(Wa(e,u,f,d),uv(e,u,f)),f}function r0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function mE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ZC(e,t){mE(e,t),(e=e.alternate)&&mE(e,t)}var zD=typeof reportError=="function"?reportError:function(e){console.error(e)};function qC(e){this._internalRoot=e}t_.prototype.render=qC.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));e_(e,t,null,null)};t_.prototype.unmount=qC.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mu(function(){e_(null,e,null,null)}),t[Ys]=null}};function t_(e){this._internalRoot=e}t_.prototype.unstable_scheduleHydration=function(e){if(e){var t=uz();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wl.length&&t!==0&&t<Wl[n].priority;n++);Wl.splice(n,0,e),n===0&&hz(e)}};function KC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function r_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gE(){}function eV(e,t,n,i,u){if(u){if(typeof i=="function"){var d=i;i=function(){var C=r0(f);d.call(C)}}var f=AD(t,i,e,0,null,!1,!1,"",gE);return e._reactRootContainer=f,e[Ys]=f.current,fm(e.nodeType===8?e.parentNode:e),Mu(),f}for(;u=e.lastChild;)e.removeChild(u);if(typeof i=="function"){var a=i;i=function(){var C=r0(b);a.call(C)}}var b=WC(e,0,!1,null,null,!1,!1,"",gE);return e._reactRootContainer=b,e[Ys]=b.current,fm(e.nodeType===8?e.parentNode:e),Mu(function(){e_(t,b,n,i)}),b}function n_(e,t,n,i,u){var d=n._reactRootContainer;if(d){var f=d;if(typeof u=="function"){var a=u;u=function(){var b=r0(f);a.call(b)}}e_(t,f,e,u)}else f=eV(n,t,e,u,i);return r0(f)}lz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Af(t.pendingLanes);n!==0&&(fC(t,n|1),Ii(t,Jn()),!(Kr&6)&&(kh=Jn()+500,gc()))}break;case 13:Mu(function(){var i=Js(e,1);if(i!==null){var u=fi();Wa(i,e,1,u)}}),ZC(e,1)}};mC=function(e){if(e.tag===13){var t=Js(e,134217728);if(t!==null){var n=fi();Wa(t,e,134217728,n)}ZC(e,134217728)}};cz=function(e){if(e.tag===13){var t=ic(e),n=Js(e,t);if(n!==null){var i=fi();Wa(n,e,t,i)}ZC(e,t)}};uz=function(){return cn};dz=function(e,t){var n=cn;try{return cn=e,t()}finally{cn=n}};vw=function(e,t,n){switch(t){case"input":if(dw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var u=Z0(i);if(!u)throw Error(At(90));VA(i),dw(i,u)}}}break;case"textarea":HA(e,n);break;case"select":t=n.value,t!=null&&dh(e,!!n.multiple,t,!1)}};YA=VC;JA=Mu;var tV={usingClientEntryPoint:!1,Events:[Um,eh,Z0,KA,XA,VC]},vf={findFiberByHostInstance:fu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rV={bundleType:vf.bundleType,version:vf.version,rendererPackageName:vf.rendererPackageName,rendererConfig:vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tz(e),e===null?null:e.stateNode},findFiberByHostInstance:vf.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ny.isDisabled&&Ny.supportsFiber)try{U0=Ny.inject(rV),_s=Ny}catch{}}oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tV;oa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KC(t))throw Error(At(200));return QN(e,t,null,n)};oa.createRoot=function(e,t){if(!KC(e))throw Error(At(299));var n=!1,i="",u=zD;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=WC(e,1,!1,null,null,n,!1,i,u),e[Ys]=t.current,fm(e.nodeType===8?e.parentNode:e),new qC(t)};oa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=tz(t),e=e===null?null:e.stateNode,e};oa.flushSync=function(e){return Mu(e)};oa.hydrate=function(e,t,n){if(!r_(t))throw Error(At(200));return n_(null,e,t,!0,n)};oa.hydrateRoot=function(e,t,n){if(!KC(e))throw Error(At(405));var i=n!=null&&n.hydratedSources||null,u=!1,d="",f=zD;if(n!=null&&(n.unstable_strictMode===!0&&(u=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),t=AD(t,null,e,1,n??null,u,!1,d,f),e[Ys]=t.current,fm(e),i)for(e=0;e<i.length;e++)n=i[e],u=n._getVersion,u=u(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,u]:t.mutableSourceEagerHydrationData.push(n,u);return new t_(t)};oa.render=function(e,t,n){if(!r_(t))throw Error(At(200));return n_(null,e,t,!1,n)};oa.unmountComponentAtNode=function(e){if(!r_(e))throw Error(At(40));return e._reactRootContainer?(Mu(function(){n_(null,null,e,!1,function(){e._reactRootContainer=null,e[Ys]=null})}),!0):!1};oa.unstable_batchedUpdates=VC;oa.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!r_(n))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return n_(e,t,n,!1,i)};oa.version="18.3.1-next-f1338f8080-20240426";function DD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(DD)}catch(e){console.error(e)}}DD(),DA.exports=oa;var Gm=DA.exports;function nV(e){return typeof e=="function"?e():e}const LD=L.forwardRef(function(t,n){const{children:i,container:u,disablePortal:d=!1}=t,[f,a]=L.useState(null),b=ln(L.isValidElement(i)?YS(i):null,n);if(qs(()=>{d||a(nV(u)||document.body)},[u,d]),qs(()=>{if(f&&!d)return Av(n,f),()=>{Av(n,null)}},[n,f,d]),d){if(L.isValidElement(i)){const C={ref:b};return L.cloneElement(i,C)}return le.jsx(L.Fragment,{children:i})}return le.jsx(L.Fragment,{children:f&&Gm.createPortal(i,f)})});function oV(e={}){const{disabled:t=!1,focusableWhenDisabled:n,rootRef:i}=e,u=L.useContext(F0);if(u===null)throw new Error("useMenuButton: no menu context available.");const{state:d,dispatch:f,registerTrigger:a,popupId:b}=u,{getRootProps:C,rootRef:I,active:k}=Cs({disabled:t,focusableWhenDisabled:n,rootRef:i}),M=ln(I,a),R=F=>j=>{var O;(O=F.onClick)==null||O.call(F,j),!j.defaultMuiPrevented&&f({type:Ha.toggle,event:j})},$=F=>j=>{var O;(O=F.onKeyDown)==null||O.call(F,j),!j.defaultMuiPrevented&&(j.key==="ArrowDown"||j.key==="ArrowUp")&&(j.preventDefault(),f({type:Ha.open,event:j}))},G=(F={})=>({onClick:R(F),onKeyDown:$(F)});return{active:k,getRootProps:(F={})=>{const j=Wo(F),O=Ks(G,C);return ae({"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":b},F,j,O(j),{tabIndex:0,ref:M})},open:d.open,rootRef:M}}function iV(e){return`menu-item-${e.size}`}const aV={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function sV(e){var t;const{disabled:n=!1,id:i,rootRef:u,label:d,disableFocusOnHover:f=!1}=e,a=Ri(i),b=L.useRef(null),C=L.useMemo(()=>({disabled:n,id:a??"",label:d,ref:b}),[n,a,d]),{dispatch:I}=(t=L.useContext(F0))!=null?t:aV,{getRootProps:k,highlighted:M}=iC({item:a,handlePointerOverEvents:!f}),{index:R,totalItemCount:$}=V0(a??iV,C),{getRootProps:G,focusVisible:ee,rootRef:F}=Cs({disabled:n,focusableWhenDisabled:!0}),j=ln(F,u,b);L.useDebugValue({id:a,highlighted:M,disabled:n,label:d});const O=q=>ce=>{var he;(he=q.onClick)==null||he.call(q,ce),!ce.defaultMuiPrevented&&I({type:Ha.close,event:ce})},ne=(q={})=>ae({},q,{onClick:O(q)});function Y(q={}){const ce=Wo(q),he=Ks(ne,Ks(G,k));return ae({},q,ce,he(ce),{id:a,ref:j,role:"menuitem"})}return a===void 0?{getRootProps:Y,disabled:!1,focusVisible:ee,highlighted:!1,index:-1,totalItemCount:0,rootRef:j}:{getRootProps:Y,disabled:n,focusVisible:ee,highlighted:M,index:R,totalItemCount:$,rootRef:j}}function lV(e){const t=L.useContext(pc);if(!t)throw new Error("MenuItem: ListContext was not found.");const n=Ri(e),{getItemState:i,dispatch:u}=t;let d;n!=null?d=i(n):d={focusable:!0,highlighted:!1,selected:!1};const{highlighted:f,selected:a,focusable:b}=d,C=L.useCallback(k=>{if(k!==n)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${k} | id: ${n}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:f,selected:a,focusable:b}},[f,a,b,n]);return{contextValue:L.useMemo(()=>({dispatch:u,getItemState:C}),[u,C]),id:n}}function cV(e){const t=vs(e);return t.body===e?KS(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function qf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function yE(e){return parseInt(KS(e).getComputedStyle(e).paddingRight,10)||0}function uV(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||i}function vE(e,t,n,i,u){const d=[t,n,...i];[].forEach.call(e.children,f=>{const a=d.indexOf(f)===-1,b=!uV(f);a&&b&&qf(f,u)})}function Bb(e,t){let n=-1;return e.some((i,u)=>t(i)?(n=u,!0):!1),n}function dV(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(cV(i)){const f=b4(vs(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${yE(i)+f}px`;const a=vs(i).querySelectorAll(".mui-fixed");[].forEach.call(a,b=>{n.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${yE(b)+f}px`})}let d;if(i.parentNode instanceof DocumentFragment)d=vs(i).body;else{const f=i.parentElement,a=KS(i);d=(f==null?void 0:f.nodeName)==="HTML"&&a.getComputedStyle(f).overflowY==="scroll"?f:i}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:f,property:a})=>{d?f.style.setProperty(a,d):f.style.removeProperty(a)})}}function hV(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class pV{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&qf(t.modalRef,!1);const u=hV(n);vE(n,t.mount,t.modalRef,u,!0);const d=Bb(this.containers,f=>f.container===n);return d!==-1?(this.containers[d].modals.push(t),i):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:u}),i)}mount(t,n){const i=Bb(this.containers,d=>d.modals.indexOf(t)!==-1),u=this.containers[i];u.restore||(u.restore=dV(u,n))}remove(t,n=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const u=Bb(this.containers,f=>f.modals.indexOf(t)!==-1),d=this.containers[u];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(i,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&qf(t.modalRef,n),vE(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(u,1);else{const f=d.modals[d.modals.length-1];f.modalRef&&qf(f.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function fV(e){return typeof e=="function"?e():e}function mV(e){return e?e.props.hasOwnProperty("in"):!1}const gV=new pV;function yV(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,manager:u=gV,closeAfterTransition:d=!1,onTransitionEnter:f,onTransitionExited:a,children:b,onClose:C,open:I,rootRef:k}=e,M=L.useRef({}),R=L.useRef(null),$=L.useRef(null),G=ln($,k),[ee,F]=L.useState(!I),j=mV(b);let O=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(O=!1);const ne=()=>vs(R.current),Y=()=>(M.current.modalRef=$.current,M.current.mount=R.current,M.current),q=()=>{u.mount(Y(),{disableScrollLock:i}),$.current&&($.current.scrollTop=0)},ce=Xl(()=>{const De=fV(t)||ne().body;u.add(Y(),De),$.current&&q()}),he=L.useCallback(()=>u.isTopModal(Y()),[u]),ze=Xl(De=>{R.current=De,De&&(I&&he()?q():$.current&&qf($.current,O))}),J=L.useCallback(()=>{u.remove(Y(),O)},[O,u]);L.useEffect(()=>()=>{J()},[J]),L.useEffect(()=>{I?ce():(!j||!d)&&J()},[I,J,j,d,ce]);const Ee=De=>Ge=>{var Ue;(Ue=De.onKeyDown)==null||Ue.call(De,Ge),!(Ge.key!=="Escape"||Ge.which===229||!he())&&(n||(Ge.stopPropagation(),C&&C(Ge,"escapeKeyDown")))},Be=De=>Ge=>{var Ue;(Ue=De.onClick)==null||Ue.call(De,Ge),Ge.target===Ge.currentTarget&&C&&C(Ge,"backdropClick")};return{getRootProps:(De={})=>{const Ge=Wo(e);delete Ge.onTransitionEnter,delete Ge.onTransitionExited;const Ue=ae({},Ge,De);return ae({role:"presentation"},Ue,{onKeyDown:Ee(Ue),ref:G})},getBackdropProps:(De={})=>{const Ge=De;return ae({"aria-hidden":!0},Ge,{onClick:Be(Ge),open:I})},getTransitionProps:()=>{const De=()=>{F(!1),f&&f()},Ge=()=>{F(!0),a&&a(),d&&J()};return{onEnter:JT(De,b==null?void 0:b.props.onEnter),onExited:JT(Ge,b==null?void 0:b.props.onExited)}},rootRef:G,portalRef:ze,isTopModal:he,exited:ee,hasTransition:j}}function vV(e){const{value:t,label:n,disabled:i,rootRef:u,id:d}=e,{getRootProps:f,highlighted:a,selected:b}=iC({item:t}),{getRootProps:C,rootRef:I}=Cs({disabled:i,focusableWhenDisabled:!0}),k=Ri(d),M=L.useRef(null),R=L.useMemo(()=>({disabled:i,label:n,value:t,ref:M,id:k}),[i,n,t,k]),{index:$}=V0(t,R),G=ln(u,M,I),ee=j=>O=>{var ne;(ne=j.onKeyDown)==null||ne.call(j,O),!O.defaultMuiPrevented&&[" ","Enter"].includes(O.key)&&(O.defaultMuiPrevented=!0)},F=(j={})=>({onKeyDown:ee(j)});return{getRootProps:(j={})=>{const O=Wo(j),ne=Ks(f,Ks(C,F));return ae({},j,O,ne(O),{id:k,ref:G,role:"option","aria-selected":b})},highlighted:a,index:$,selected:b,rootRef:G}}function _V(e){const t=L.useContext(pc);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:n,dispatch:i}=t,{highlighted:u,selected:d,focusable:f}=n(e),a=L.useCallback(C=>{if(C!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:u,selected:d,focusable:f}},[u,d,f,e]);return{contextValue:L.useMemo(()=>({dispatch:i,getItemState:a}),[i,a])}}var Ei="top",wa="bottom",Sa="right",ki="left",XC="auto",Wm=[Ei,wa,Sa,ki],Mh="start",Sm="end",xV="clippingParents",$D="viewport",_f="popper",bV="reference",_E=Wm.reduce(function(e,t){return e.concat([t+"-"+Mh,t+"-"+Sm])},[]),OD=[].concat(Wm,[XC]).reduce(function(e,t){return e.concat([t,t+"-"+Mh,t+"-"+Sm])},[]),wV="beforeRead",SV="read",CV="afterRead",PV="beforeMain",TV="main",IV="afterMain",EV="beforeWrite",kV="write",MV="afterWrite",RV=[wV,SV,CV,PV,TV,IV,EV,kV,MV];function Ss(e){return e?(e.nodeName||"").toLowerCase():null}function ra(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ru(e){var t=ra(e).Element;return e instanceof t||e instanceof Element}function _a(e){var t=ra(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function YC(e){if(typeof ShadowRoot>"u")return!1;var t=ra(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function AV(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},u=t.attributes[n]||{},d=t.elements[n];!_a(d)||!Ss(d)||(Object.assign(d.style,i),Object.keys(u).forEach(function(f){var a=u[f];a===!1?d.removeAttribute(f):d.setAttribute(f,a===!0?"":a)}))})}function zV(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var u=t.elements[i],d=t.attributes[i]||{},f=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=f.reduce(function(b,C){return b[C]="",b},{});!_a(u)||!Ss(u)||(Object.assign(u.style,a),Object.keys(d).forEach(function(b){u.removeAttribute(b)}))})}}const DV={name:"applyStyles",enabled:!0,phase:"write",fn:AV,effect:zV,requires:["computeStyles"]};function bs(e){return e.split("-")[0]}var bu=Math.max,n0=Math.min,Rh=Math.round;function Yw(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function BD(){return!/^((?!chrome|android).)*safari/i.test(Yw())}function Ah(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),u=1,d=1;t&&_a(e)&&(u=e.offsetWidth>0&&Rh(i.width)/e.offsetWidth||1,d=e.offsetHeight>0&&Rh(i.height)/e.offsetHeight||1);var f=Ru(e)?ra(e):window,a=f.visualViewport,b=!BD()&&n,C=(i.left+(b&&a?a.offsetLeft:0))/u,I=(i.top+(b&&a?a.offsetTop:0))/d,k=i.width/u,M=i.height/d;return{width:k,height:M,top:I,right:C+k,bottom:I+M,left:C,x:C,y:I}}function JC(e){var t=Ah(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function FD(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&YC(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function el(e){return ra(e).getComputedStyle(e)}function LV(e){return["table","td","th"].indexOf(Ss(e))>=0}function yc(e){return((Ru(e)?e.ownerDocument:e.document)||window.document).documentElement}function o_(e){return Ss(e)==="html"?e:e.assignedSlot||e.parentNode||(YC(e)?e.host:null)||yc(e)}function xE(e){return!_a(e)||el(e).position==="fixed"?null:e.offsetParent}function $V(e){var t=/firefox/i.test(Yw()),n=/Trident/i.test(Yw());if(n&&_a(e)){var i=el(e);if(i.position==="fixed")return null}var u=o_(e);for(YC(u)&&(u=u.host);_a(u)&&["html","body"].indexOf(Ss(u))<0;){var d=el(u);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return u;u=u.parentNode}return null}function Zm(e){for(var t=ra(e),n=xE(e);n&&LV(n)&&el(n).position==="static";)n=xE(n);return n&&(Ss(n)==="html"||Ss(n)==="body"&&el(n).position==="static")?t:n||$V(e)||t}function QC(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Kf(e,t,n){return bu(e,n0(t,n))}function OV(e,t,n){var i=Kf(e,t,n);return i>n?n:i}function jD(){return{top:0,right:0,bottom:0,left:0}}function ND(e){return Object.assign({},jD(),e)}function VD(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var BV=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,ND(typeof t!="number"?t:VD(t,Wm))};function FV(e){var t,n=e.state,i=e.name,u=e.options,d=n.elements.arrow,f=n.modifiersData.popperOffsets,a=bs(n.placement),b=QC(a),C=[ki,Sa].indexOf(a)>=0,I=C?"height":"width";if(!(!d||!f)){var k=BV(u.padding,n),M=JC(d),R=b==="y"?Ei:ki,$=b==="y"?wa:Sa,G=n.rects.reference[I]+n.rects.reference[b]-f[b]-n.rects.popper[I],ee=f[b]-n.rects.reference[b],F=Zm(d),j=F?b==="y"?F.clientHeight||0:F.clientWidth||0:0,O=G/2-ee/2,ne=k[R],Y=j-M[I]-k[$],q=j/2-M[I]/2+O,ce=Kf(ne,q,Y),he=b;n.modifiersData[i]=(t={},t[he]=ce,t.centerOffset=ce-q,t)}}function jV(e){var t=e.state,n=e.options,i=n.element,u=i===void 0?"[data-popper-arrow]":i;u!=null&&(typeof u=="string"&&(u=t.elements.popper.querySelector(u),!u)||FD(t.elements.popper,u)&&(t.elements.arrow=u))}const NV={name:"arrow",enabled:!0,phase:"main",fn:FV,effect:jV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zh(e){return e.split("-")[1]}var VV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function UV(e,t){var n=e.x,i=e.y,u=t.devicePixelRatio||1;return{x:Rh(n*u)/u||0,y:Rh(i*u)/u||0}}function bE(e){var t,n=e.popper,i=e.popperRect,u=e.placement,d=e.variation,f=e.offsets,a=e.position,b=e.gpuAcceleration,C=e.adaptive,I=e.roundOffsets,k=e.isFixed,M=f.x,R=M===void 0?0:M,$=f.y,G=$===void 0?0:$,ee=typeof I=="function"?I({x:R,y:G}):{x:R,y:G};R=ee.x,G=ee.y;var F=f.hasOwnProperty("x"),j=f.hasOwnProperty("y"),O=ki,ne=Ei,Y=window;if(C){var q=Zm(n),ce="clientHeight",he="clientWidth";if(q===ra(n)&&(q=yc(n),el(q).position!=="static"&&a==="absolute"&&(ce="scrollHeight",he="scrollWidth")),q=q,u===Ei||(u===ki||u===Sa)&&d===Sm){ne=wa;var ze=k&&q===Y&&Y.visualViewport?Y.visualViewport.height:q[ce];G-=ze-i.height,G*=b?1:-1}if(u===ki||(u===Ei||u===wa)&&d===Sm){O=Sa;var J=k&&q===Y&&Y.visualViewport?Y.visualViewport.width:q[he];R-=J-i.width,R*=b?1:-1}}var Ee=Object.assign({position:a},C&&VV),Be=I===!0?UV({x:R,y:G},ra(n)):{x:R,y:G};if(R=Be.x,G=Be.y,b){var je;return Object.assign({},Ee,(je={},je[ne]=j?"0":"",je[O]=F?"0":"",je.transform=(Y.devicePixelRatio||1)<=1?"translate("+R+"px, "+G+"px)":"translate3d("+R+"px, "+G+"px, 0)",je))}return Object.assign({},Ee,(t={},t[ne]=j?G+"px":"",t[O]=F?R+"px":"",t.transform="",t))}function HV(e){var t=e.state,n=e.options,i=n.gpuAcceleration,u=i===void 0?!0:i,d=n.adaptive,f=d===void 0?!0:d,a=n.roundOffsets,b=a===void 0?!0:a,C={placement:bs(t.placement),variation:zh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:u,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,bE(Object.assign({},C,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,bE(Object.assign({},C,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const GV={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:HV,data:{}};var Vy={passive:!0};function WV(e){var t=e.state,n=e.instance,i=e.options,u=i.scroll,d=u===void 0?!0:u,f=i.resize,a=f===void 0?!0:f,b=ra(t.elements.popper),C=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&C.forEach(function(I){I.addEventListener("scroll",n.update,Vy)}),a&&b.addEventListener("resize",n.update,Vy),function(){d&&C.forEach(function(I){I.removeEventListener("scroll",n.update,Vy)}),a&&b.removeEventListener("resize",n.update,Vy)}}const ZV={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:WV,data:{}};var qV={left:"right",right:"left",bottom:"top",top:"bottom"};function yv(e){return e.replace(/left|right|bottom|top/g,function(t){return qV[t]})}var KV={start:"end",end:"start"};function wE(e){return e.replace(/start|end/g,function(t){return KV[t]})}function e2(e){var t=ra(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function t2(e){return Ah(yc(e)).left+e2(e).scrollLeft}function XV(e,t){var n=ra(e),i=yc(e),u=n.visualViewport,d=i.clientWidth,f=i.clientHeight,a=0,b=0;if(u){d=u.width,f=u.height;var C=BD();(C||!C&&t==="fixed")&&(a=u.offsetLeft,b=u.offsetTop)}return{width:d,height:f,x:a+t2(e),y:b}}function YV(e){var t,n=yc(e),i=e2(e),u=(t=e.ownerDocument)==null?void 0:t.body,d=bu(n.scrollWidth,n.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),f=bu(n.scrollHeight,n.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),a=-i.scrollLeft+t2(e),b=-i.scrollTop;return el(u||n).direction==="rtl"&&(a+=bu(n.clientWidth,u?u.clientWidth:0)-d),{width:d,height:f,x:a,y:b}}function r2(e){var t=el(e),n=t.overflow,i=t.overflowX,u=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+u+i)}function UD(e){return["html","body","#document"].indexOf(Ss(e))>=0?e.ownerDocument.body:_a(e)&&r2(e)?e:UD(o_(e))}function Xf(e,t){var n;t===void 0&&(t=[]);var i=UD(e),u=i===((n=e.ownerDocument)==null?void 0:n.body),d=ra(i),f=u?[d].concat(d.visualViewport||[],r2(i)?i:[]):i,a=t.concat(f);return u?a:a.concat(Xf(o_(f)))}function Jw(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function JV(e,t){var n=Ah(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function SE(e,t,n){return t===$D?Jw(XV(e,n)):Ru(t)?JV(t,n):Jw(YV(yc(e)))}function QV(e){var t=Xf(o_(e)),n=["absolute","fixed"].indexOf(el(e).position)>=0,i=n&&_a(e)?Zm(e):e;return Ru(i)?t.filter(function(u){return Ru(u)&&FD(u,i)&&Ss(u)!=="body"}):[]}function e8(e,t,n,i){var u=t==="clippingParents"?QV(e):[].concat(t),d=[].concat(u,[n]),f=d[0],a=d.reduce(function(b,C){var I=SE(e,C,i);return b.top=bu(I.top,b.top),b.right=n0(I.right,b.right),b.bottom=n0(I.bottom,b.bottom),b.left=bu(I.left,b.left),b},SE(e,f,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function HD(e){var t=e.reference,n=e.element,i=e.placement,u=i?bs(i):null,d=i?zh(i):null,f=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,b;switch(u){case Ei:b={x:f,y:t.y-n.height};break;case wa:b={x:f,y:t.y+t.height};break;case Sa:b={x:t.x+t.width,y:a};break;case ki:b={x:t.x-n.width,y:a};break;default:b={x:t.x,y:t.y}}var C=u?QC(u):null;if(C!=null){var I=C==="y"?"height":"width";switch(d){case Mh:b[C]=b[C]-(t[I]/2-n[I]/2);break;case Sm:b[C]=b[C]+(t[I]/2-n[I]/2);break}}return b}function Cm(e,t){t===void 0&&(t={});var n=t,i=n.placement,u=i===void 0?e.placement:i,d=n.strategy,f=d===void 0?e.strategy:d,a=n.boundary,b=a===void 0?xV:a,C=n.rootBoundary,I=C===void 0?$D:C,k=n.elementContext,M=k===void 0?_f:k,R=n.altBoundary,$=R===void 0?!1:R,G=n.padding,ee=G===void 0?0:G,F=ND(typeof ee!="number"?ee:VD(ee,Wm)),j=M===_f?bV:_f,O=e.rects.popper,ne=e.elements[$?j:M],Y=e8(Ru(ne)?ne:ne.contextElement||yc(e.elements.popper),b,I,f),q=Ah(e.elements.reference),ce=HD({reference:q,element:O,strategy:"absolute",placement:u}),he=Jw(Object.assign({},O,ce)),ze=M===_f?he:q,J={top:Y.top-ze.top+F.top,bottom:ze.bottom-Y.bottom+F.bottom,left:Y.left-ze.left+F.left,right:ze.right-Y.right+F.right},Ee=e.modifiersData.offset;if(M===_f&&Ee){var Be=Ee[u];Object.keys(J).forEach(function(je){var ot=[Sa,wa].indexOf(je)>=0?1:-1,He=[Ei,wa].indexOf(je)>=0?"y":"x";J[je]+=Be[He]*ot})}return J}function t8(e,t){t===void 0&&(t={});var n=t,i=n.placement,u=n.boundary,d=n.rootBoundary,f=n.padding,a=n.flipVariations,b=n.allowedAutoPlacements,C=b===void 0?OD:b,I=zh(i),k=I?a?_E:_E.filter(function($){return zh($)===I}):Wm,M=k.filter(function($){return C.indexOf($)>=0});M.length===0&&(M=k);var R=M.reduce(function($,G){return $[G]=Cm(e,{placement:G,boundary:u,rootBoundary:d,padding:f})[bs(G)],$},{});return Object.keys(R).sort(function($,G){return R[$]-R[G]})}function r8(e){if(bs(e)===XC)return[];var t=yv(e);return[wE(e),t,wE(t)]}function n8(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var u=n.mainAxis,d=u===void 0?!0:u,f=n.altAxis,a=f===void 0?!0:f,b=n.fallbackPlacements,C=n.padding,I=n.boundary,k=n.rootBoundary,M=n.altBoundary,R=n.flipVariations,$=R===void 0?!0:R,G=n.allowedAutoPlacements,ee=t.options.placement,F=bs(ee),j=F===ee,O=b||(j||!$?[yv(ee)]:r8(ee)),ne=[ee].concat(O).reduce(function(Dt,Nt){return Dt.concat(bs(Nt)===XC?t8(t,{placement:Nt,boundary:I,rootBoundary:k,padding:C,flipVariations:$,allowedAutoPlacements:G}):Nt)},[]),Y=t.rects.reference,q=t.rects.popper,ce=new Map,he=!0,ze=ne[0],J=0;J<ne.length;J++){var Ee=ne[J],Be=bs(Ee),je=zh(Ee)===Mh,ot=[Ei,wa].indexOf(Be)>=0,He=ot?"width":"height",De=Cm(t,{placement:Ee,boundary:I,rootBoundary:k,altBoundary:M,padding:C}),Ge=ot?je?Sa:ki:je?wa:Ei;Y[He]>q[He]&&(Ge=yv(Ge));var Ue=yv(Ge),Ze=[];if(d&&Ze.push(De[Be]<=0),a&&Ze.push(De[Ge]<=0,De[Ue]<=0),Ze.every(function(Dt){return Dt})){ze=Ee,he=!1;break}ce.set(Ee,Ze)}if(he)for(var at=$?3:1,pt=function(Nt){var tr=ne.find(function(Tt){var st=ce.get(Tt);if(st)return st.slice(0,Nt).every(function(Ct){return Ct})});if(tr)return ze=tr,"break"},ct=at;ct>0;ct--){var Ht=pt(ct);if(Ht==="break")break}t.placement!==ze&&(t.modifiersData[i]._skip=!0,t.placement=ze,t.reset=!0)}}const o8={name:"flip",enabled:!0,phase:"main",fn:n8,requiresIfExists:["offset"],data:{_skip:!1}};function CE(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function PE(e){return[Ei,Sa,wa,ki].some(function(t){return e[t]>=0})}function i8(e){var t=e.state,n=e.name,i=t.rects.reference,u=t.rects.popper,d=t.modifiersData.preventOverflow,f=Cm(t,{elementContext:"reference"}),a=Cm(t,{altBoundary:!0}),b=CE(f,i),C=CE(a,u,d),I=PE(b),k=PE(C);t.modifiersData[n]={referenceClippingOffsets:b,popperEscapeOffsets:C,isReferenceHidden:I,hasPopperEscaped:k},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":I,"data-popper-escaped":k})}const a8={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:i8};function s8(e,t,n){var i=bs(e),u=[ki,Ei].indexOf(i)>=0?-1:1,d=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,f=d[0],a=d[1];return f=f||0,a=(a||0)*u,[ki,Sa].indexOf(i)>=0?{x:a,y:f}:{x:f,y:a}}function l8(e){var t=e.state,n=e.options,i=e.name,u=n.offset,d=u===void 0?[0,0]:u,f=OD.reduce(function(I,k){return I[k]=s8(k,t.rects,d),I},{}),a=f[t.placement],b=a.x,C=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=C),t.modifiersData[i]=f}const c8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:l8};function u8(e){var t=e.state,n=e.name;t.modifiersData[n]=HD({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const d8={name:"popperOffsets",enabled:!0,phase:"read",fn:u8,data:{}};function h8(e){return e==="x"?"y":"x"}function p8(e){var t=e.state,n=e.options,i=e.name,u=n.mainAxis,d=u===void 0?!0:u,f=n.altAxis,a=f===void 0?!1:f,b=n.boundary,C=n.rootBoundary,I=n.altBoundary,k=n.padding,M=n.tether,R=M===void 0?!0:M,$=n.tetherOffset,G=$===void 0?0:$,ee=Cm(t,{boundary:b,rootBoundary:C,padding:k,altBoundary:I}),F=bs(t.placement),j=zh(t.placement),O=!j,ne=QC(F),Y=h8(ne),q=t.modifiersData.popperOffsets,ce=t.rects.reference,he=t.rects.popper,ze=typeof G=="function"?G(Object.assign({},t.rects,{placement:t.placement})):G,J=typeof ze=="number"?{mainAxis:ze,altAxis:ze}:Object.assign({mainAxis:0,altAxis:0},ze),Ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Be={x:0,y:0};if(q){if(d){var je,ot=ne==="y"?Ei:ki,He=ne==="y"?wa:Sa,De=ne==="y"?"height":"width",Ge=q[ne],Ue=Ge+ee[ot],Ze=Ge-ee[He],at=R?-he[De]/2:0,pt=j===Mh?ce[De]:he[De],ct=j===Mh?-he[De]:-ce[De],Ht=t.elements.arrow,Dt=R&&Ht?JC(Ht):{width:0,height:0},Nt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:jD(),tr=Nt[ot],Tt=Nt[He],st=Kf(0,ce[De],Dt[De]),Ct=O?ce[De]/2-at-st-tr-J.mainAxis:pt-st-tr-J.mainAxis,Mt=O?-ce[De]/2+at+st+Tt+J.mainAxis:ct+st+Tt+J.mainAxis,qt=t.elements.arrow&&Zm(t.elements.arrow),nr=qt?ne==="y"?qt.clientTop||0:qt.clientLeft||0:0,ur=(je=Ee==null?void 0:Ee[ne])!=null?je:0,gr=Ge+Ct-ur-nr,Kt=Ge+Mt-ur,Lt=Kf(R?n0(Ue,gr):Ue,Ge,R?bu(Ze,Kt):Ze);q[ne]=Lt,Be[ne]=Lt-Ge}if(a){var Qt,Vt=ne==="x"?Ei:ki,mr=ne==="x"?wa:Sa,kr=q[Y],Ur=Y==="y"?"height":"width",Lr=kr+ee[Vt],pr=kr-ee[mr],$r=[Ei,ki].indexOf(F)!==-1,jr=(Qt=Ee==null?void 0:Ee[Y])!=null?Qt:0,br=$r?Lr:kr-ce[Ur]-he[Ur]-jr+J.altAxis,dr=$r?kr+ce[Ur]+he[Ur]-jr-J.altAxis:pr,ar=R&&$r?OV(br,kr,dr):Kf(R?br:Lr,kr,R?dr:pr);q[Y]=ar,Be[Y]=ar-kr}t.modifiersData[i]=Be}}const f8={name:"preventOverflow",enabled:!0,phase:"main",fn:p8,requiresIfExists:["offset"]};function m8(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function g8(e){return e===ra(e)||!_a(e)?e2(e):m8(e)}function y8(e){var t=e.getBoundingClientRect(),n=Rh(t.width)/e.offsetWidth||1,i=Rh(t.height)/e.offsetHeight||1;return n!==1||i!==1}function v8(e,t,n){n===void 0&&(n=!1);var i=_a(t),u=_a(t)&&y8(t),d=yc(t),f=Ah(e,u,n),a={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(i||!i&&!n)&&((Ss(t)!=="body"||r2(d))&&(a=g8(t)),_a(t)?(b=Ah(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=t2(d))),{x:f.left+a.scrollLeft-b.x,y:f.top+a.scrollTop-b.y,width:f.width,height:f.height}}function _8(e){var t=new Map,n=new Set,i=[];e.forEach(function(d){t.set(d.name,d)});function u(d){n.add(d.name);var f=[].concat(d.requires||[],d.requiresIfExists||[]);f.forEach(function(a){if(!n.has(a)){var b=t.get(a);b&&u(b)}}),i.push(d)}return e.forEach(function(d){n.has(d.name)||u(d)}),i}function x8(e){var t=_8(e);return RV.reduce(function(n,i){return n.concat(t.filter(function(u){return u.phase===i}))},[])}function b8(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function w8(e){var t=e.reduce(function(n,i){var u=n[i.name];return n[i.name]=u?Object.assign({},u,i,{options:Object.assign({},u.options,i.options),data:Object.assign({},u.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var TE={placement:"bottom",modifiers:[],strategy:"absolute"};function IE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function S8(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,u=t.defaultOptions,d=u===void 0?TE:u;return function(a,b,C){C===void 0&&(C=d);var I={placement:"bottom",orderedModifiers:[],options:Object.assign({},TE,d),modifiersData:{},elements:{reference:a,popper:b},attributes:{},styles:{}},k=[],M=!1,R={state:I,setOptions:function(F){var j=typeof F=="function"?F(I.options):F;G(),I.options=Object.assign({},d,I.options,j),I.scrollParents={reference:Ru(a)?Xf(a):a.contextElement?Xf(a.contextElement):[],popper:Xf(b)};var O=x8(w8([].concat(i,I.options.modifiers)));return I.orderedModifiers=O.filter(function(ne){return ne.enabled}),$(),R.update()},forceUpdate:function(){if(!M){var F=I.elements,j=F.reference,O=F.popper;if(IE(j,O)){I.rects={reference:v8(j,Zm(O),I.options.strategy==="fixed"),popper:JC(O)},I.reset=!1,I.placement=I.options.placement,I.orderedModifiers.forEach(function(J){return I.modifiersData[J.name]=Object.assign({},J.data)});for(var ne=0;ne<I.orderedModifiers.length;ne++){if(I.reset===!0){I.reset=!1,ne=-1;continue}var Y=I.orderedModifiers[ne],q=Y.fn,ce=Y.options,he=ce===void 0?{}:ce,ze=Y.name;typeof q=="function"&&(I=q({state:I,options:he,name:ze,instance:R})||I)}}}},update:b8(function(){return new Promise(function(ee){R.forceUpdate(),ee(I)})}),destroy:function(){G(),M=!0}};if(!IE(a,b))return R;R.setOptions(C).then(function(ee){!M&&C.onFirstUpdate&&C.onFirstUpdate(ee)});function $(){I.orderedModifiers.forEach(function(ee){var F=ee.name,j=ee.options,O=j===void 0?{}:j,ne=ee.effect;if(typeof ne=="function"){var Y=ne({state:I,name:F,instance:R,options:O}),q=function(){};k.push(Y||q)}})}function G(){k.forEach(function(ee){return ee()}),k=[]}return R}}var C8=[ZV,d8,GV,DV,c8,o8,f8,NV,a8],P8=S8({defaultModifiers:C8});const GD="Popper";function T8(e){return AA(GD,e)}gj(GD,["root"]);const I8=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],E8=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function k8(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Qw(e){return typeof e=="function"?e():e}function M8(e){return e.nodeType!==void 0}const R8=()=>Vr({root:["root"]},hj(T8)),A8={},z8=L.forwardRef(function(t,n){var i;const{anchorEl:u,children:d,direction:f,disablePortal:a,modifiers:b,open:C,placement:I,popperOptions:k,popperRef:M,slotProps:R={},slots:$={},TransitionProps:G}=t,ee=ir(t,I8),F=L.useRef(null),j=ln(F,n),O=L.useRef(null),ne=ln(O,M),Y=L.useRef(ne);qs(()=>{Y.current=ne},[ne]),L.useImperativeHandle(M,()=>O.current,[]);const q=k8(I,f),[ce,he]=L.useState(q),[ze,J]=L.useState(Qw(u));L.useEffect(()=>{O.current&&O.current.forceUpdate()}),L.useEffect(()=>{u&&J(Qw(u))},[u]),qs(()=>{if(!ze||!C)return;const He=Ue=>{he(Ue.placement)};let De=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ue})=>{He(Ue)}}];b!=null&&(De=De.concat(b)),k&&k.modifiers!=null&&(De=De.concat(k.modifiers));const Ge=P8(ze,F.current,ae({placement:q},k,{modifiers:De}));return Y.current(Ge),()=>{Ge.destroy(),Y.current(null)}},[ze,a,b,C,k,q]);const Ee={placement:ce};G!==null&&(Ee.TransitionProps=G);const Be=R8(),je=(i=$.root)!=null?i:"div",ot=TA({elementType:je,externalSlotProps:R.root,externalForwardedProps:ee,additionalProps:{role:"tooltip",ref:j},ownerState:t,className:Be.root});return le.jsx(je,ae({},ot,{children:typeof d=="function"?d(Ee):d}))}),i_=L.forwardRef(function(t,n){const{anchorEl:i,children:u,container:d,direction:f="ltr",disablePortal:a=!1,keepMounted:b=!1,modifiers:C,open:I,placement:k="bottom",popperOptions:M=A8,popperRef:R,style:$,transition:G=!1,slotProps:ee={},slots:F={}}=t,j=ir(t,E8),[O,ne]=L.useState(!0),Y=()=>{ne(!1)},q=()=>{ne(!0)};if(!b&&!I&&(!G||O))return null;let ce;if(d)ce=d;else if(i){const J=Qw(i);ce=J&&M8(J)?vs(J).body:vs(null).body}const he=!I&&b&&(!G||O)?"none":void 0,ze=G?{in:I,onEnter:Y,onExited:q}:void 0;return le.jsx(LD,{disablePortal:a,container:ce,children:le.jsx(z8,ae({anchorEl:i,direction:f,disablePortal:a,modifiers:C,ref:n,open:G?!O:I,placement:k,popperOptions:M,popperRef:R,slotProps:ee,slots:F},j,{style:ae({position:"fixed",top:0,left:0,display:he},$),TransitionProps:ze,children:u}))})}),o0={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},D8=e=>{const{label:t,value:n}=e;return typeof t=="string"?t:typeof n=="string"?n:String(e)};function L8(e,t){const{open:n}=e,{context:{selectionMode:i}}=t;if(t.type===o0.buttonClick){var u;const b=(u=e.selectedValues[0])!=null?u:Ro(null,"start",t.context);return ae({},e,{open:!n,highlightedValue:n?null:b})}if(t.type===o0.browserAutoFill)return nC(t.item,e,t.context);const d=j0(e,t);switch(t.type){case pn.keyDown:if(e.open){if(t.event.key==="Escape")return ae({},d,{open:!1})}else{if(t.event.key==="ArrowDown"){var f;return ae({},e,{open:!0,highlightedValue:(f=e.selectedValues[0])!=null?f:Ro(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var a;return ae({},e,{open:!0,highlightedValue:(a=e.selectedValues[0])!=null?a:Ro(null,"end",t.context)})}}break;case pn.itemClick:if(i==="single")return ae({},d,{open:!1});break;case pn.blur:return ae({},d,{open:!1});default:return d}return d}function $8(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function O8(e){const{areOptionsEqual:t,buttonRef:n,defaultOpen:i=!1,defaultValue:u,disabled:d=!1,listboxId:f,listboxRef:a,multiple:b=!1,name:C,required:I,onChange:k,onHighlightChange:M,onOpenChange:R,open:$,options:G,getOptionAsString:ee=D8,getSerializedValue:F=$8,value:j,componentName:O="useSelect"}=e,ne=L.useRef(null),Y=ln(n,ne),q=L.useRef(null),ce=Ri(f);let he;j===void 0&&u===void 0?he=[]:u!==void 0&&(b?he=u:he=u==null?[]:[u]);const ze=L.useMemo(()=>{if(j!==void 0)return b?j:j==null?[]:[j]},[j,b]),{subitems:J,contextValue:Ee}=N0(),Be=L.useMemo(()=>G!=null?new Map(G.map((_e,X)=>[_e.value,{value:_e.value,label:_e.label,disabled:_e.disabled,ref:L.createRef(),id:`${ce}_${X}`}])):J,[G,J,ce]),je=ln(a,q),{getRootProps:ot,active:He,focusVisible:De,rootRef:Ge}=Cs({disabled:d,rootRef:Y}),Ue=L.useMemo(()=>Array.from(Be.keys()),[Be]),Ze=L.useCallback(_e=>{if(t!==void 0){const X=Ue.find(te=>t(te,_e));return Be.get(X)}return Be.get(_e)},[Be,t,Ue]),at=L.useCallback(_e=>{var X;const te=Ze(_e);return(X=te==null?void 0:te.disabled)!=null?X:!1},[Ze]),pt=L.useCallback(_e=>{const X=Ze(_e);return X?ee(X):""},[Ze,ee]),ct=L.useMemo(()=>({selectedValues:ze,open:$}),[ze,$]),Ht=L.useCallback(_e=>{var X;return(X=Be.get(_e))==null?void 0:X.id},[Be]),Dt=L.useCallback((_e,X)=>{if(b)k==null||k(_e,X);else{var te;k==null||k(_e,(te=X[0])!=null?te:null)}},[b,k]),Nt=L.useCallback((_e,X)=>{M==null||M(_e,X??null)},[M]),tr=L.useCallback((_e,X,te)=>{if(X==="open"&&(R==null||R(te),te===!1&&(_e==null?void 0:_e.type)!=="blur")){var H;(H=ne.current)==null||H.focus()}},[R]),Tt=L.useCallback(_e=>{var X,te;return _e==null?null:(X=(te=J.get(_e))==null?void 0:te.ref.current)!=null?X:null},[J]),st={getInitialState:()=>{var _e;return{highlightedValue:null,selectedValues:(_e=he)!=null?_e:[],open:i}},getItemId:Ht,controlledProps:ct,focusManagement:"DOM",getItemDomElement:Tt,itemComparer:t,isItemDisabled:at,rootRef:je,onChange:Dt,onHighlightChange:Nt,onStateChange:tr,reducerActionContext:L.useMemo(()=>({multiple:b}),[b]),items:Ue,getItemAsString:pt,selectionMode:b?"multiple":"single",stateReducer:L8,componentName:O},{dispatch:Ct,getRootProps:Mt,contextValue:qt,state:{open:nr,highlightedValue:ur,selectedValues:gr},rootRef:Kt}=oC(st),Lt=L.useRef(nr);qs(()=>{if(nr&&ur!==null){var _e;const X=(_e=Ze(ur))==null?void 0:_e.ref;if(!q.current||!(X!=null&&X.current))return;Lt.current||X.current.focus({preventScroll:!0});const te=q.current.getBoundingClientRect(),H=X.current.getBoundingClientRect();H.top<te.top?q.current.scrollTop-=te.top-H.top:H.bottom>te.bottom&&(q.current.scrollTop+=H.bottom-te.bottom)}},[nr,ur,Ze]);const Qt=L.useCallback(_e=>Ze(_e),[Ze]),Vt=_e=>X=>{var te;if(_e==null||(te=_e.onClick)==null||te.call(_e,X),!X.defaultMuiPrevented){const H={type:o0.buttonClick,event:X};Ct(H)}},mr=_e=>X=>{var te;(te=_e.onKeyDown)==null||te.call(_e,X),!X.defaultMuiPrevented&&(X.key==="ArrowDown"||X.key==="ArrowUp")&&(X.preventDefault(),Ct({type:pn.keyDown,key:X.key,event:X}))},kr=(_e={})=>({onClick:Vt(_e),onKeyDown:mr(_e)}),Ur=(_e={})=>ae({},_e,kr(_e),{role:"combobox","aria-expanded":nr,"aria-controls":ce}),Lr=(_e={})=>{const X=Wo(_e),te=Ks(Ur,ot);return ae({},_e,te(X))},pr=_e=>X=>{var te,H;(te=_e.onBlur)==null||te.call(_e,X),!X.defaultMuiPrevented&&((H=q.current)!=null&&H.contains(X.relatedTarget)||X.relatedTarget===ne.current)&&(X.defaultMuiPrevented=!0)},$r=(_e={})=>({onBlur:pr(_e)}),jr=(_e={})=>{const X=Wo(_e),te=Ks($r,Mt);return ae({id:ce,role:"listbox","aria-multiselectable":b?"true":void 0},_e,te(X))};L.useDebugValue({selectedOptions:gr,highlightedOption:ur,open:nr});const br=L.useMemo(()=>ae({},qt,Ee),[qt,Ee]);let dr;e.multiple?dr=gr:dr=gr.length>0?gr[0]:null;let ar;if(b)ar=dr.map(_e=>Qt(_e)).filter(_e=>_e!==void 0);else{var Jt;ar=(Jt=Qt(dr))!=null?Jt:null}const yr=_e=>X=>{var te;if(_e==null||(te=_e.onChange)==null||te.call(_e,X),X.defaultMuiPrevented)return;const H=Be.get(X.target.value);X.target.value===""?Ct({type:pn.clearSelection}):H!==void 0&&Ct({type:o0.browserAutoFill,item:H.value,event:X})};return{buttonActive:He,buttonFocusVisible:De,buttonRef:Ge,contextValue:br,disabled:d,dispatch:Ct,getButtonProps:Lr,getHiddenInputProps:(_e={})=>{const X=Wo(_e);return ae({name:C,tabIndex:-1,"aria-hidden":!0,required:I?!0:void 0,value:F(ar),style:S4},_e,{onChange:yr(X)})},getListboxProps:jr,getOptionMetadata:Qt,listboxRef:Kt,open:nr,options:Ue,value:dr,highlightedOption:ur}}function B8(e){const{value:t,children:n}=e,{dispatch:i,getItemIndex:u,getItemState:d,registerItem:f,totalSubitemCount:a}=t,b=L.useMemo(()=>({dispatch:i,getItemState:d,getItemIndex:u}),[i,u,d]),C=L.useMemo(()=>({getItemIndex:u,registerItem:f,totalSubitemCount:a}),[f,u,a]);return le.jsx(jm.Provider,{value:C,children:le.jsx(pc.Provider,{value:b,children:n})})}function F8(e){const{checked:t,defaultChecked:n,disabled:i,onBlur:u,onChange:d,onFocus:f,onFocusVisible:a,readOnly:b,required:C}=e,[I,k]=uh({controlled:t,default:!!n,name:"Switch",state:"checked"}),M=he=>ze=>{var J;ze.nativeEvent.defaultPrevented||(k(ze.target.checked),d==null||d(ze),(J=he.onChange)==null||J.call(he,ze))},{isFocusVisibleRef:R,onBlur:$,onFocus:G,ref:ee}=XS(),[F,j]=L.useState(!1);i&&F&&j(!1),L.useEffect(()=>{R.current=F},[F,R]);const O=L.useRef(null),ne=he=>ze=>{var J;O.current||(O.current=ze.currentTarget),G(ze),R.current===!0&&(j(!0),a==null||a(ze)),f==null||f(ze),(J=he.onFocus)==null||J.call(he,ze)},Y=he=>ze=>{var J;$(ze),R.current===!1&&j(!1),u==null||u(ze),(J=he.onBlur)==null||J.call(he,ze)},q=ln(ee,O);return{checked:I,disabled:!!i,focusVisible:F,getInputProps:(he={})=>ae({checked:t,defaultChecked:n,disabled:i,readOnly:b,ref:q,required:C,type:"checkbox",role:"switch","aria-checked":t},he,{onChange:M(he),onFocus:ne(he),onBlur:Y(he)}),inputRef:q,readOnly:!!b}}function j8(e){const{value:t,defaultValue:n,onChange:i,orientation:u="horizontal",direction:d="ltr",selectionFollowsFocus:f=!1}=e,[a,b]=uh({controlled:t,default:n,name:"Tabs",state:"value"}),C=L.useCallback((ee,F)=>{b(F),i==null||i(ee,F)},[i,b]),{subitems:I,contextValue:k}=N0(),M=L.useRef(()=>{}),R=L.useCallback(ee=>{var F;return(F=I.get(ee))==null?void 0:F.id},[I]),$=L.useCallback(ee=>M.current(ee),[]),G=L.useCallback(ee=>{M.current=ee},[]);return{contextValue:ae({direction:d,getTabId:$,getTabPanelId:R,onSelected:C,orientation:u,registerTabIdLookup:G,selectionFollowsFocus:f,value:a},k)}}const WD=L.createContext(null);function a_(){const e=L.useContext(WD);if(e==null)throw new Error("No TabsContext provided");return e}function N8(e){const{value:t,children:n}=e,{direction:i,getItemIndex:u,onSelected:d,orientation:f,registerItem:a,registerTabIdLookup:b,selectionFollowsFocus:C,totalSubitemCount:I,value:k,getTabId:M,getTabPanelId:R}=t,$=L.useMemo(()=>({getItemIndex:u,registerItem:a,totalSubitemCount:I}),[a,u,I]),G=L.useMemo(()=>({direction:i,getTabId:M,getTabPanelId:R,onSelected:d,orientation:f,registerTabIdLookup:b,selectionFollowsFocus:C,value:k}),[i,M,R,d,f,b,C,k]);return le.jsx(jm.Provider,{value:$,children:le.jsx(WD.Provider,{value:G,children:n})})}function V8(e){return e.size}function U8(e){const{value:t,id:n,rootRef:i}=e,u=a_();if(u===null)throw new Error("No TabContext provided");const{value:d,getTabId:f}=u,a=Ri(n),b=L.useRef(null),C=ln(b,i),I=L.useMemo(()=>({id:a,ref:b}),[a]),{id:k}=V0(t??V8,I),M=k!==d,R=k!==void 0?f(k):void 0;return{hidden:M,getRootProps:(G={})=>ae({"aria-labelledby":R??void 0,hidden:M,id:a??void 0},G,{ref:C}),rootRef:C}}const ZD={valueChange:"valueChange"};function H8(e,t){if(t.type===ZD.valueChange)return ae({},e,{highlightedValue:t.value});const n=j0(e,t),{context:{selectionFollowsFocus:i}}=t;if(t.type===pn.itemsChange){if(n.selectedValues.length>0)return ae({},n,{highlightedValue:n.selectedValues[0]});Ro(null,"reset",t.context)}return i&&n.highlightedValue!=null?ae({},n,{selectedValues:[n.highlightedValue]}):n}function G8(e){var t;const{rootRef:n}=e,{direction:i="ltr",onSelected:u,orientation:d="horizontal",value:f,registerTabIdLookup:a,selectionFollowsFocus:b}=a_(),{subitems:C,contextValue:I}=N0(),k=L.useCallback(Ee=>{var Be;return(Be=C.get(Ee))==null?void 0:Be.id},[C]);a(k);const M=L.useMemo(()=>Array.from(C.keys()),[C]),R=L.useCallback(Ee=>{var Be,je;return Ee==null?null:(Be=(je=C.get(Ee))==null?void 0:je.ref.current)!=null?Be:null},[C]),$=i==="rtl";let G;d==="vertical"?G="vertical":G=$?"horizontal-rtl":"horizontal-ltr";const ee=L.useCallback((Ee,Be)=>{var je;u(Ee,(je=Be[0])!=null?je:null)},[u]),F=L.useMemo(()=>f===void 0?{}:f!=null?{selectedValues:[f]}:{selectedValues:[]},[f]),j=L.useCallback(Ee=>{var Be,je;return(Be=(je=C.get(Ee))==null?void 0:je.disabled)!=null?Be:!1},[C]),{contextValue:O,dispatch:ne,getRootProps:Y,state:{highlightedValue:q,selectedValues:ce},rootRef:he}=oC({controlledProps:F,disabledItemsFocusable:!b,focusManagement:"DOM",getItemDomElement:R,isItemDisabled:j,items:M,rootRef:n,onChange:ee,orientation:G,reducerActionContext:L.useMemo(()=>({selectionFollowsFocus:b||!1}),[b]),selectionMode:"single",stateReducer:H8});L.useEffect(()=>{f!==void 0&&f!=null&&ne({type:ZD.valueChange,value:f})},[ne,f]);const ze=(Ee={})=>ae({},Ee,Y(Ee),{"aria-orientation":d==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:L.useMemo(()=>ae({},I,O),[I,O]),dispatch:ne,getRootProps:ze,highlightedValue:q,isRtl:$,orientation:d,rootRef:he,selectedValue:(t=ce[0])!=null?t:null}}function W8(e){const{value:t,children:n}=e,{dispatch:i,getItemIndex:u,getItemState:d,registerItem:f,totalSubitemCount:a}=t,b=L.useMemo(()=>({dispatch:i,getItemState:d,getItemIndex:u}),[i,u,d]),C=L.useMemo(()=>({getItemIndex:u,registerItem:f,totalSubitemCount:a}),[f,u,a]);return le.jsx(jm.Provider,{value:C,children:le.jsx(pc.Provider,{value:b,children:n})})}function Z8(e){return e.size}function q8(e){const{value:t,rootRef:n,disabled:i=!1,id:u}=e,d=L.useRef(null),f=Ri(u),{value:a,selectionFollowsFocus:b,getTabPanelId:C}=a_(),I=L.useMemo(()=>({disabled:i,ref:d,id:f}),[i,d,f]),{id:k,index:M,totalItemCount:R}=V0(t??Z8,I),{getRootProps:$,highlighted:G,selected:ee}=iC({item:k}),{getRootProps:F,rootRef:j,active:O,focusVisible:ne,setFocusVisible:Y}=Cs({disabled:i,focusableWhenDisabled:!b,type:"button"}),q=ln(d,n,j),ce=k!==void 0?C(k):void 0;return{getRootProps:(ze={})=>{const J=Wo(ze),Ee=Ks($,F);return ae({},ze,Ee(J),{role:"tab","aria-controls":ce,"aria-selected":ee,id:f,ref:q})},active:O,focusVisible:ne,highlighted:G,index:M,rootRef:q,selected:ee||k===a,setFocusVisible:Y,totalTabsCount:R}}function EE(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function s_(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:i,matchFrom:u="any",stringify:d,trim:f=!1}=e;return(a,{inputValue:b,getOptionLabel:C})=>{let I=f?b.trim():b;n&&(I=I.toLowerCase()),t&&(I=EE(I));const k=I?a.filter(M=>{let R=(d||C)(M);return n&&(R=R.toLowerCase()),t&&(R=EE(R)),u==="start"?R.indexOf(I)===0:R.indexOf(I)>-1}):a;return typeof i=="number"?k.slice(0,i):k}}function Uy(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const K8=s_(),kE=5,X8=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},Y8=[];function J8(e){const{unstable_isActiveElementInListbox:t=X8,unstable_classNamePrefix:n="Mui",autoComplete:i=!1,autoHighlight:u=!1,autoSelect:d=!1,blurOnSelect:f=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:b=!1,componentName:C="useAutocomplete",defaultValue:I=e.multiple?Y8:null,disableClearable:k=!1,disableCloseOnSelect:M=!1,disabled:R,disabledItemsFocusable:$=!1,disableListWrap:G=!1,filterOptions:ee=K8,filterSelectedOptions:F=!1,freeSolo:j=!1,getOptionDisabled:O,getOptionKey:ne,getOptionLabel:Y=rt=>{var Ie;return(Ie=rt.label)!=null?Ie:rt},groupBy:q,handleHomeEndKeys:ce=!e.freeSolo,id:he,includeInputInList:ze=!1,inputValue:J,isOptionEqualToValue:Ee=(rt,Ie)=>rt===Ie,multiple:Be=!1,onChange:je,onClose:ot,onHighlightChange:He,onInputChange:De,onOpen:Ge,open:Ue,openOnFocus:Ze=!1,options:at,readOnly:pt=!1,selectOnFocus:ct=!e.freeSolo,value:Ht}=e,Dt=Ri(he);let Nt=Y;Nt=rt=>{const Ie=Y(rt);return typeof Ie!="string"?String(Ie):Ie};const tr=L.useRef(!1),Tt=L.useRef(!0),st=L.useRef(null),Ct=L.useRef(null),[Mt,qt]=L.useState(null),[nr,ur]=L.useState(-1),gr=u?0:-1,Kt=L.useRef(gr),[Lt,Qt]=uh({controlled:Ht,default:I,name:C}),[Vt,mr]=uh({controlled:J,default:"",name:C,state:"inputValue"}),[kr,Ur]=L.useState(!1),Lr=L.useCallback((rt,Ie)=>{if(!(Be?Lt.length<Ie.length:Ie!==null)&&!a)return;let _t;if(Be)_t="";else if(Ie==null)_t="";else{const $t=Nt(Ie);_t=typeof $t=="string"?$t:""}Vt!==_t&&(mr(_t),De&&De(rt,_t,"reset"))},[Nt,Vt,Be,De,mr,a,Lt]),[pr,$r]=uh({controlled:Ue,default:!1,name:C,state:"open"}),[jr,br]=L.useState(!0),dr=!Be&&Lt!=null&&Vt===Nt(Lt),ar=pr&&!pt,Jt=ar?ee(at.filter(rt=>!(F&&(Be?Lt:[Lt]).some(Ie=>Ie!==null&&Ee(rt,Ie)))),{inputValue:dr&&jr?"":Vt,getOptionLabel:Nt}):[],yr=w4({filteredOptions:Jt,value:Lt,inputValue:Vt});L.useEffect(()=>{const rt=Lt!==yr.value;kr&&!rt||j&&!rt||Lr(null,Lt)},[Lt,Lr,kr,yr.value,j]);const wr=pr&&Jt.length>0&&!pt,_e=Xl(rt=>{rt===-1?st.current.focus():Mt.querySelector(`[data-tag-index="${rt}"]`).focus()});L.useEffect(()=>{Be&&nr>Lt.length-1&&(ur(-1),_e(-1))},[Lt,Be,nr,_e]);function X(rt,Ie){if(!Ct.current||rt<0||rt>=Jt.length)return-1;let dt=rt;for(;;){const _t=Ct.current.querySelector(`[data-option-index="${dt}"]`),$t=$?!1:!_t||_t.disabled||_t.getAttribute("aria-disabled")==="true";if(_t&&_t.hasAttribute("tabindex")&&!$t)return dt;if(Ie==="next"?dt=(dt+1)%Jt.length:dt=(dt-1+Jt.length)%Jt.length,dt===rt)return-1}}const te=Xl(({event:rt,index:Ie,reason:dt="auto"})=>{if(Kt.current=Ie,Ie===-1?st.current.removeAttribute("aria-activedescendant"):st.current.setAttribute("aria-activedescendant",`${Dt}-option-${Ie}`),He&&He(rt,Ie===-1?null:Jt[Ie],dt),!Ct.current)return;const _t=Ct.current.querySelector(`[role="option"].${n}-focused`);_t&&(_t.classList.remove(`${n}-focused`),_t.classList.remove(`${n}-focusVisible`));let $t=Ct.current;if(Ct.current.getAttribute("role")!=="listbox"&&($t=Ct.current.parentElement.querySelector('[role="listbox"]')),!$t)return;if(Ie===-1){$t.scrollTop=0;return}const Or=Ct.current.querySelector(`[data-option-index="${Ie}"]`);if(Or&&(Or.classList.add(`${n}-focused`),dt==="keyboard"&&Or.classList.add(`${n}-focusVisible`),$t.scrollHeight>$t.clientHeight&&dt!=="mouse"&&dt!=="touch")){const xr=Or,rr=$t.clientHeight+$t.scrollTop,sn=xr.offsetTop+xr.offsetHeight;sn>rr?$t.scrollTop=sn-$t.clientHeight:xr.offsetTop-xr.offsetHeight*(q?1.3:0)<$t.scrollTop&&($t.scrollTop=xr.offsetTop-xr.offsetHeight*(q?1.3:0))}}),H=Xl(({event:rt,diff:Ie,direction:dt="next",reason:_t="auto"})=>{if(!ar)return;const Or=X((()=>{const xr=Jt.length-1;if(Ie==="reset")return gr;if(Ie==="start")return 0;if(Ie==="end")return xr;const rr=Kt.current+Ie;return rr<0?rr===-1&&ze?-1:G&&Kt.current!==-1||Math.abs(Ie)>1?0:xr:rr>xr?rr===xr+1&&ze?-1:G||Math.abs(Ie)>1?xr:0:rr})(),dt);if(te({index:Or,reason:_t,event:rt}),i&&Ie!=="reset")if(Or===-1)st.current.value=Vt;else{const xr=Nt(Jt[Or]);st.current.value=xr,xr.toLowerCase().indexOf(Vt.toLowerCase())===0&&Vt.length>0&&st.current.setSelectionRange(Vt.length,xr.length)}}),oe=()=>{const rt=(Ie,dt)=>{const _t=Ie?Nt(Ie):"",$t=dt?Nt(dt):"";return _t===$t};if(Kt.current!==-1&&yr.filteredOptions&&yr.filteredOptions.length!==Jt.length&&yr.inputValue===Vt&&(Be?Lt.length===yr.value.length&&yr.value.every((Ie,dt)=>Nt(Lt[dt])===Nt(Ie)):rt(yr.value,Lt))){const Ie=yr.filteredOptions[Kt.current];if(Ie)return Uy(Jt,dt=>Nt(dt)===Nt(Ie))}return-1},xe=L.useCallback(()=>{if(!ar)return;const rt=oe();if(rt!==-1){Kt.current=rt;return}const Ie=Be?Lt[0]:Lt;if(Jt.length===0||Ie==null){H({diff:"reset"});return}if(Ct.current){if(Ie!=null){const dt=Jt[Kt.current];if(Be&&dt&&Uy(Lt,$t=>Ee(dt,$t))!==-1)return;const _t=Uy(Jt,$t=>Ee($t,Ie));_t===-1?H({diff:"reset"}):te({index:_t});return}if(Kt.current>=Jt.length-1){te({index:Jt.length-1});return}te({index:Kt.current})}},[Jt.length,Be?!1:Lt,F,H,te,ar,Vt,Be]),Ae=Xl(rt=>{Av(Ct,rt),rt&&xe()});L.useEffect(()=>{xe()},[xe]);const Fe=rt=>{pr||($r(!0),br(!0),Ge&&Ge(rt))},we=(rt,Ie)=>{pr&&($r(!1),ot&&ot(rt,Ie))},qe=(rt,Ie,dt,_t)=>{if(Be){if(Lt.length===Ie.length&&Lt.every(($t,Or)=>$t===Ie[Or]))return}else if(Lt===Ie)return;je&&je(rt,Ie,dt,_t),Qt(Ie)},We=L.useRef(!1),$e=(rt,Ie,dt="selectOption",_t="options")=>{let $t=dt,Or=Ie;if(Be){Or=Array.isArray(Lt)?Lt.slice():[];const xr=Uy(Or,rr=>Ee(Ie,rr));xr===-1?Or.push(Ie):_t!=="freeSolo"&&(Or.splice(xr,1),$t="removeOption")}Lr(rt,Or),qe(rt,Or,$t,{option:Ie}),!M&&(!rt||!rt.ctrlKey&&!rt.metaKey)&&we(rt,$t),(f===!0||f==="touch"&&We.current||f==="mouse"&&!We.current)&&st.current.blur()};function nt(rt,Ie){if(rt===-1)return-1;let dt=rt;for(;;){if(Ie==="next"&&dt===Lt.length||Ie==="previous"&&dt===-1)return-1;const _t=Mt.querySelector(`[data-tag-index="${dt}"]`);if(!_t||!_t.hasAttribute("tabindex")||_t.disabled||_t.getAttribute("aria-disabled")==="true")dt+=Ie==="next"?1:-1;else return dt}}const Me=(rt,Ie)=>{if(!Be)return;Vt===""&&we(rt,"toggleInput");let dt=nr;nr===-1?Vt===""&&Ie==="previous"&&(dt=Lt.length-1):(dt+=Ie==="next"?1:-1,dt<0&&(dt=0),dt===Lt.length&&(dt=-1)),dt=nt(dt,Ie),ur(dt),_e(dt)},mt=rt=>{tr.current=!0,mr(""),De&&De(rt,"","clear"),qe(rt,Be?[]:null,"clear")},wt=rt=>Ie=>{if(rt.onKeyDown&&rt.onKeyDown(Ie),!Ie.defaultMuiPrevented&&(nr!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ie.key)===-1&&(ur(-1),_e(-1)),Ie.which!==229))switch(Ie.key){case"Home":ar&&ce&&(Ie.preventDefault(),H({diff:"start",direction:"next",reason:"keyboard",event:Ie}));break;case"End":ar&&ce&&(Ie.preventDefault(),H({diff:"end",direction:"previous",reason:"keyboard",event:Ie}));break;case"PageUp":Ie.preventDefault(),H({diff:-kE,direction:"previous",reason:"keyboard",event:Ie}),Fe(Ie);break;case"PageDown":Ie.preventDefault(),H({diff:kE,direction:"next",reason:"keyboard",event:Ie}),Fe(Ie);break;case"ArrowDown":Ie.preventDefault(),H({diff:1,direction:"next",reason:"keyboard",event:Ie}),Fe(Ie);break;case"ArrowUp":Ie.preventDefault(),H({diff:-1,direction:"previous",reason:"keyboard",event:Ie}),Fe(Ie);break;case"ArrowLeft":Me(Ie,"previous");break;case"ArrowRight":Me(Ie,"next");break;case"Enter":if(Kt.current!==-1&&ar){const dt=Jt[Kt.current],_t=O?O(dt):!1;if(Ie.preventDefault(),_t)return;$e(Ie,dt,"selectOption"),i&&st.current.setSelectionRange(st.current.value.length,st.current.value.length)}else j&&Vt!==""&&dr===!1&&(Be&&Ie.preventDefault(),$e(Ie,Vt,"createOption","freeSolo"));break;case"Escape":ar?(Ie.preventDefault(),Ie.stopPropagation(),we(Ie,"escape")):b&&(Vt!==""||Be&&Lt.length>0)&&(Ie.preventDefault(),Ie.stopPropagation(),mt(Ie));break;case"Backspace":if(Be&&!pt&&Vt===""&&Lt.length>0){const dt=nr===-1?Lt.length-1:nr,_t=Lt.slice();_t.splice(dt,1),qe(Ie,_t,"removeOption",{option:Lt[dt]})}break;case"Delete":if(Be&&!pt&&Vt===""&&Lt.length>0&&nr!==-1){const dt=nr,_t=Lt.slice();_t.splice(dt,1),qe(Ie,_t,"removeOption",{option:Lt[dt]})}break}},ge=rt=>{Ur(!0),Ze&&!tr.current&&Fe(rt)},Re=rt=>{if(t(Ct)){st.current.focus();return}Ur(!1),Tt.current=!0,tr.current=!1,d&&Kt.current!==-1&&ar?$e(rt,Jt[Kt.current],"blur"):d&&j&&Vt!==""?$e(rt,Vt,"blur","freeSolo"):a&&Lr(rt,Lt),we(rt,"blur")},Ve=rt=>{const Ie=rt.target.value;Vt!==Ie&&(mr(Ie),br(!1),De&&De(rt,Ie,"input")),Ie===""?!k&&!Be&&qe(rt,null,"clear"):Fe(rt)},ut=rt=>{const Ie=Number(rt.currentTarget.getAttribute("data-option-index"));Kt.current!==Ie&&te({event:rt,index:Ie,reason:"mouse"})},vt=rt=>{te({event:rt,index:Number(rt.currentTarget.getAttribute("data-option-index")),reason:"touch"}),We.current=!0},It=rt=>{const Ie=Number(rt.currentTarget.getAttribute("data-option-index"));$e(rt,Jt[Ie],"selectOption"),We.current=!1},bt=rt=>Ie=>{const dt=Lt.slice();dt.splice(rt,1),qe(Ie,dt,"removeOption",{option:Lt[rt]})},xt=rt=>{pr?we(rt,"toggleInput"):Fe(rt)},Bt=rt=>{rt.currentTarget.contains(rt.target)&&rt.target.getAttribute("id")!==Dt&&rt.preventDefault()},Je=rt=>{rt.currentTarget.contains(rt.target)&&(st.current.focus(),ct&&Tt.current&&st.current.selectionEnd-st.current.selectionStart===0&&st.current.select(),Tt.current=!1)},Xt=rt=>{!R&&(Vt===""||!pr)&&xt(rt)};let zt=j&&Vt.length>0;zt=zt||(Be?Lt.length>0:Lt!==null);let lr=Jt;return q&&(lr=Jt.reduce((rt,Ie,dt)=>{const _t=q(Ie);return rt.length>0&&rt[rt.length-1].group===_t?rt[rt.length-1].options.push(Ie):rt.push({key:dt,index:dt,group:_t,options:[Ie]}),rt},[])),R&&kr&&Re(),{getRootProps:(rt={})=>ae({"aria-owns":wr?`${Dt}-listbox`:null},rt,{onKeyDown:wt(rt),onMouseDown:Bt,onClick:Je}),getInputLabelProps:()=>({id:`${Dt}-label`,htmlFor:Dt}),getInputProps:()=>({id:Dt,value:Vt,onBlur:Re,onFocus:ge,onChange:Ve,onMouseDown:Xt,"aria-activedescendant":ar?"":null,"aria-autocomplete":i?"both":"list","aria-controls":wr?`${Dt}-listbox`:void 0,"aria-expanded":wr,autoComplete:"off",ref:st,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:R}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:mt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:xt}),getTagProps:({index:rt})=>ae({key:rt,"data-tag-index":rt,tabIndex:-1},!pt&&{onDelete:bt(rt)}),getListboxProps:()=>({role:"listbox",id:`${Dt}-listbox`,"aria-labelledby":`${Dt}-label`,ref:Ae,onMouseDown:rt=>{rt.preventDefault()}}),getOptionProps:({index:rt,option:Ie})=>{var dt;const _t=(Be?Lt:[Lt]).some(Or=>Or!=null&&Ee(Ie,Or)),$t=O?O(Ie):!1;return{key:(dt=ne==null?void 0:ne(Ie))!=null?dt:Nt(Ie),tabIndex:-1,role:"option",id:`${Dt}-option-${rt}`,onMouseMove:ut,onClick:It,onTouchStart:vt,"data-option-index":rt,"aria-disabled":$t,"aria-selected":_t}},id:Dt,inputValue:Vt,value:Lt,dirty:zt,expanded:ar&&Mt,popupOpen:ar,focused:kr||nr!==-1,anchorEl:Mt,setAnchorEl:qt,focusedTag:nr,groupedOptions:lr}}const Q8=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],eU=["component","slots","slotProps"],tU=["component"];function Ut(e,t){const{className:n,elementType:i,ownerState:u,externalForwardedProps:d,getSlotOwnerState:f,internalForwardedProps:a}=t,b=ir(t,Q8),{component:C,slots:I={[e]:void 0},slotProps:k={[e]:void 0}}=d,M=ir(d,eU),R=I[e]||i,$=PA(k[e],u),G=CA(ae({className:n},b,{externalForwardedProps:e==="root"?M:void 0,externalSlotProps:$})),{props:{component:ee},internalRef:F}=G,j=ir(G.props,tU),O=ln(F,$==null?void 0:$.ref,t.ref),ne=f?f(j):{},Y=ae({},u,ne),q=e==="root"?ee||C:ee,ce=SA(R,ae({},e==="root"&&!C&&!I[e]&&a,e!=="root"&&!I[e]&&a,j,q&&{as:q},{ref:O}),Y);return Object.keys(ne).forEach(he=>{delete ce[he]}),[R,ce]}function rU(e){return Wr("MuiListItem",e)}const i0=Fr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),a0=L.createContext(!1),Gh=L.createContext(!1),qD=L.createContext(!1),n2=L.createContext(void 0),KD=L.createContext(void 0),l_=L.createContext(void 0),nU=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],oU=e=>{const{sticky:t,nested:n,nesting:i,variant:u,color:d}=e,f={root:["root",n&&"nested",i&&"nesting",t&&"sticky",d&&`color${Ot(d)}`,u&&`variant${Ot(u)}`],startAction:["startAction"],endAction:["endAction"]};return Vr(f,rU,{})},iU=kt("li")(({theme:e,ownerState:t})=>{var n;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},ae({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&ae({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${i0.nested} > &`]:{"--_ListItem-display":"flex"}}),(n=e.variants[t.variant])==null?void 0:n[t.color]]}),aU=kt(iU,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),sU=kt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),lU=kt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),$u=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyListItem"}),u=L.useContext(l_),d=L.useContext(n2),f=L.useContext(Gh),a=L.useContext(qD),b=L.useContext(a0),{component:C,className:I,children:k,nested:M=!1,sticky:R=!1,variant:$="plain",color:G="neutral",startAction:ee,endAction:F,role:j,slots:O={},slotProps:ne={}}=i,Y=ir(i,nU),[q,ce]=L.useState(""),[he,ze]=(d==null?void 0:d.split(":"))||["",""],J=C||(he&&!he.match(/^(ul|ol|menu)$/)?"div":void 0);let Ee=u==="menu"?"none":void 0;d&&(Ee={menu:"none",menubar:"none",group:"presentation"}[ze]),j&&(Ee=j);const Be=ae({},i,{sticky:R,startAction:ee,endAction:F,row:f,wrap:a,variant:$,color:G,nesting:b,nested:M,component:J,role:Ee}),je=oU(Be),ot=ae({},Y,{component:J,slots:O,slotProps:ne}),[He,De]=Ut("root",{additionalProps:{role:Ee},ref:n,className:qn(je.root,I),elementType:aU,externalForwardedProps:ot,ownerState:Be}),[Ge,Ue]=Ut("startAction",{className:je.startAction,elementType:sU,externalForwardedProps:ot,ownerState:Be}),[Ze,at]=Ut("endAction",{className:je.endAction,elementType:lU,externalForwardedProps:ot,ownerState:Be});return le.jsx(KD.Provider,{value:ce,children:le.jsx(a0.Provider,{value:M?q||!0:!1,children:le.jsxs(He,ae({},De,{children:[ee&&le.jsx(Ge,ae({},Ue,{children:ee})),L.Children.map(k,(pt,ct)=>{var Ht;return L.isValidElement(pt)?L.cloneElement(pt,ae({},ct===0&&{"data-first-child":""},qS(pt,["ListItem"])&&{component:((Ht=pt.props)==null?void 0:Ht.component)||"div"})):pt}),F&&le.jsx(Ze,ae({},at,{children:F}))]}))})})});$u.muiName="ListItem";const c_={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function qm(e){const{children:t,nested:n,row:i=!1,wrap:u=!1}=e,d=le.jsx(Gh.Provider,{value:i,children:le.jsx(qD.Provider,{value:u,children:L.Children.map(t,(f,a)=>L.isValidElement(f)?L.cloneElement(f,ae({},a===0&&{"data-first-child":""},a===L.Children.count(t)-1&&{"data-last-child":""})):f)})});return n===void 0?d:le.jsx(a0.Provider,{value:n,children:d})}const Wh=({theme:e,ownerState:t},n)=>{let i={};function u(d){if(typeof d=="function"){const f=d(e);u(f)}else Array.isArray(d)?d.forEach(f=>{typeof f!="boolean"&&u(f)}):typeof d=="object"&&(i=ae({},i,d))}return t.sx&&(u(t.sx),n.forEach(d=>{const f=i[d];if(typeof f=="string"||typeof f=="number")if(d==="borderRadius")if(typeof f=="number")i[d]=`${f}px`;else{var a;i[d]=((a=e.vars)==null?void 0:a.radius[f])||f}else["p","padding","m","margin"].indexOf(d)!==-1&&typeof f=="number"?i[d]=e.spacing(f):i[d]=f;else typeof f=="function"?i[d]=f(e):i[d]=void 0})),i};function cU(e){return Wr("MuiList",e)}const uU=Fr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),dU=L.createContext(void 0),hU=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],pU=e=>{const{variant:t,color:n,size:i,nesting:u,orientation:d,instanceSize:f}=e,a={root:["root",d,t&&`variant${Ot(t)}`,n&&`color${Ot(n)}`,!f&&!u&&i&&`size${Ot(i)}`,f&&`size${Ot(f)}`,u&&"nesting"]};return Vr(a,cU,{})},Km=kt("ul")(({theme:e,ownerState:t})=>{var n;const{p:i,padding:u,borderRadius:d}=Wh({theme:e,ownerState:t},["p","padding","borderRadius"]);function f(a){return a==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:a==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:a==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&ae({},f(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&ae({},f(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?ae({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),ae({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(n=e.variants[t.variant])==null?void 0:n[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},d!==void 0&&{"--List-radius":d},i!==void 0&&{"--List-padding":i},u!==void 0&&{"--List-padding":u})]}),fU=kt(Km,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Xm=L.forwardRef(function(t,n){var i;const u=L.useContext(a0),d=L.useContext(l_),f=L.useContext(dU),a=Zr({props:t,name:"JoyList"}),{component:b,className:C,children:I,size:k,orientation:M="vertical",wrap:R=!1,variant:$="plain",color:G="neutral",role:ee,slots:F={},slotProps:j={}}=a,O=ir(a,hU),ne=k||((i=t.size)!=null?i:"md");let Y;d&&(Y="group"),f&&(Y="presentation"),ee&&(Y=ee);const q=ae({},a,{instanceSize:t.size,size:ne,nesting:u,orientation:M,wrap:R,variant:$,color:G,role:Y}),ce=pU(q),he=ae({},O,{component:b,slots:F,slotProps:j}),[ze,J]=Ut("root",{ref:n,className:qn(ce.root,C),elementType:fU,externalForwardedProps:he,ownerState:q,additionalProps:{as:b,role:Y,"aria-labelledby":typeof u=="string"?u:void 0}});return le.jsx(ze,ae({},J,{children:le.jsx(n2.Provider,{value:`${typeof b=="string"?b:""}:${Y||""}`,children:le.jsx(qm,{row:M==="horizontal",wrap:R,children:I})})}))}),vv=Fr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),o2=L.createContext("horizontal"),Ym=kt("div")(({theme:e,ownerState:t})=>{var n,i,u,d,f,a;return ae({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:ae({},e.focus.default,{zIndex:1})},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:active":(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],[`.${i0.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${vv.selected}`]:ae({},(u=e.variants[`${t.variant}Active`])==null?void 0:u[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${vv.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(f=e.variants[`${t.variant}Active`])==null?void 0:f[t.color]},[`&.${vv.disabled}`]:ae({},(a=e.variants[`${t.variant}Disabled`])==null?void 0:a[t.color])})});kt(Ym,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>ae({},!e.row&&{[`&.${vv.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function mU(e){return Wr("MuiSvgIcon",e)}Fr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const gU=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],yU=e=>{const{color:t,size:n,fontSize:i}=e,u={root:["root",t&&t!=="inherit"&&`color${Ot(t)}`,n&&`size${Ot(n)}`,i&&`fontSize${Ot(i)}`]};return Vr(u,mU,{})},ME={sm:"xl",md:"xl2",lg:"xl3"},vU=kt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;return ae({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[ME[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[ME[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&ae({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / 1)`}))}),RE=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoySvgIcon"}),{children:u,className:d,color:f,component:a="svg",fontSize:b,htmlColor:C,inheritViewBox:I=!1,titleAccess:k,viewBox:M="0 0 24 24",size:R="md",slots:$={},slotProps:G={}}=i,ee=ir(i,gU),F=L.isValidElement(u)&&u.type==="svg",j=ae({},i,{color:f,component:a,size:R,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:M,hasSvgAsChild:F}),O=yU(j),ne=ae({},ee,{component:a,slots:$,slotProps:G}),[Y,q]=Ut("root",{ref:n,className:qn(O.root,d),elementType:vU,externalForwardedProps:ne,ownerState:j,additionalProps:ae({color:C,focusable:!1},k&&{role:"img"},!k&&{"aria-hidden":!0},!I&&{viewBox:M},F&&u.props)});return le.jsxs(Y,ae({},q,{children:[F?u.props.children:u,k?le.jsx("title",{children:k}):null]}))});function Zh(e,t){function n(i,u){return le.jsx(RE,ae({"data-testid":`${t}Icon`,ref:u},i,{children:e}))}return n.muiName=RE.muiName,L.memo(L.forwardRef(n))}const i2=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,Dh="data-skip-inverted-colors",XD=`& :not([${Dh}], [${Dh}] *)`,YD=e=>{var t,n,i,u,d,f,a,b,C,I,k,M,R,$,G,ee,F,j,O,ne,Y,q;const ce=i2(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[ce("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[ce("--palette-background-body")]:`${(n=e.colorSchemes.light)==null?void 0:n.palette.background.body} !important`,[ce("--palette-background-surface")]:`${(i=e.colorSchemes.light)==null?void 0:i.palette.background.surface} !important`,[ce("--palette-background-popup")]:`${(u=e.colorSchemes.light)==null?void 0:u.palette.background.popup} !important`,[ce("--palette-background-level1")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.level1} !important`,[ce("--palette-background-level2")]:`${(f=e.colorSchemes.light)==null?void 0:f.palette.background.level2} !important`,[ce("--palette-background-level3")]:`${(a=e.colorSchemes.light)==null?void 0:a.palette.background.level3} !important`,[ce("--palette-text-primary")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.text.primary} !important`,[ce("--palette-text-secondary")]:`${(C=e.colorSchemes.light)==null?void 0:C.palette.text.secondary} !important`,[ce("--palette-text-tertiary")]:`${(I=e.colorSchemes.light)==null?void 0:I.palette.text.tertiary} !important`,[ce("--palette-divider")]:`${(k=e.colorSchemes.light)==null?void 0:k.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[ce("--palette-focusVisible")]:`${(M=e.colorSchemes.dark)==null?void 0:M.palette.focusVisible} !important`,[ce("--palette-background-body")]:`${(R=e.colorSchemes.dark)==null?void 0:R.palette.background.body} !important`,[ce("--palette-background-surface")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.surface} !important`,[ce("--palette-background-popup")]:`${(G=e.colorSchemes.dark)==null?void 0:G.palette.background.popup} !important`,[ce("--palette-background-level1")]:`${(ee=e.colorSchemes.dark)==null?void 0:ee.palette.background.level1} !important`,[ce("--palette-background-level2")]:`${(F=e.colorSchemes.dark)==null?void 0:F.palette.background.level2} !important`,[ce("--palette-background-level3")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.background.level3} !important`,[ce("--palette-text-primary")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.text.primary} !important`,[ce("--palette-text-secondary")]:`${(ne=e.colorSchemes.dark)==null?void 0:ne.palette.text.secondary} !important`,[ce("--palette-text-tertiary")]:`${(Y=e.colorSchemes.dark)==null?void 0:Y.palette.text.tertiary} !important`,[ce("--palette-divider")]:`${(q=e.colorSchemes.dark)==null?void 0:q.palette.divider} !important`}}};function _U(e){return e.theme!==void 0}const u_=e=>t=>{const n=_U(t)?t.theme:t,i=tC(n.cssVarPrefix),u=i2(n.cssVarPrefix),d=f=>{const a=f.split("-");return i(f,n.palette[a[1]][a[2]])};return{[XD]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${n.getColorSchemeSelector("light")}, ${n.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[u("--palette-focusVisible")]:d(`palette-${e}-200`),[u("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[u("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[u("--palette-background-popup")]:d(`palette-${e}-700`),[u("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[u("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[u("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[u("--palette-text-primary")]:d("palette-common-white"),[u("--palette-text-secondary")]:d(`palette-${e}-200`),[u("--palette-text-tertiary")]:d(`palette-${e}-300`),[u("--palette-text-icon")]:d(`palette-${e}-200`),[u("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${Dh}]`]:YD(n)}},d_=e=>t=>{const{theme:n=t}=t,i=tC(n.cssVarPrefix),u=i2(n.cssVarPrefix),d=f=>{const a=f.split("-");return i(f,n.palette[a[1]][a[2]])};return{[XD]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[n.getColorSchemeSelector("dark")]:{[u("--palette-focusVisible")]:d(`palette-${e}-300`),[u("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[u("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[u("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[u("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[u("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[u("--palette-text-primary")]:d(`palette-${e}-100`),[u("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[u("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[u("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[u("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[n.getColorSchemeSelector("light")]:{[u("--palette-focusVisible")]:d(`palette-${e}-500`),[u("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[u("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[u("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[u("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[u("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[u("--palette-text-primary")]:d(`palette-${e}-700`),[u("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[u("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[u("--palette-text-icon")]:d(`palette-${e}-500`),[u("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${Dh}]`]:YD(n)}},JD=Zh(le.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),xU=Zh(le.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),QD=L.createContext(void 0);function hu(e,t){let n=t,i=e;return e==="outlined"&&(n="neutral",i="plain"),e==="plain"&&(n="neutral"),{variant:i,color:n}}function h_(e,t,n=!1){const i=L.useContext(QD),[u,d]=typeof i=="string"?i.split(":"):[],f=hu(u||void 0,d||void 0);return f.variant=e||f.variant,f.color=t||(n?d:f.color),f}function p_({children:e,color:t,variant:n}){return le.jsx(QD.Provider,{value:`${n||""}:${t||""}`,children:e})}function bU(e){return Wr("MuiIconButton",e)}Fr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const a2=L.createContext({}),eL=L.createContext(void 0);function wU(e){return Wr("MuiCircularProgress",e)}Fr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let SU=e=>e,AE;const CU=["color","backgroundColor"],PU=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],TU=HB({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),IU=e=>{const{determinate:t,color:n,variant:i,size:u}=e,d={root:["root",t&&"determinate",n&&`color${Ot(n)}`,i&&`variant${Ot(i)}`,u&&`size${Ot(u)}`],svg:["svg"],track:["track"],progress:["progress"]};return Vr(d,wU,{})};function $d(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const EU=kt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,i,u,d;const f=((n=t.variants[e.variant])==null?void 0:n[e.color])||{},{color:a,backgroundColor:b}=f,C=ir(f,CU);return ae({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":b,"--CircularProgress-progressColor":a,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":$d("track","3px"),"--_progress-thickness":$d("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":$d("track","6px"),"--_progress-thickness":$d("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":$d("track","8px"),"--_progress-thickness":$d("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:a},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},C,e.variant==="outlined"&&{"&::before":ae({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},C)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(i=t.variants.solid)==null?void 0:i[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(u=t.variants.softHover)==null?void 0:u[e.color].backgroundColor,"--CircularProgress-progressColor":(d=t.variants.solid)==null?void 0:d[e.color].backgroundColor})}),kU=kt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),MU=kt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),RU=kt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&iA(AE||(AE=SU`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),TU)),s2=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyCircularProgress"}),{children:u,className:d,color:f="primary",size:a="md",variant:b="soft",thickness:C,determinate:I=!1,value:k=I?0:25,component:M,slots:R={},slotProps:$={}}=i,G=ir(i,PU),ee=ae({},i,{color:f,size:a,variant:b,thickness:C,value:k,determinate:I,instanceSize:t.size}),F=IU(ee),j=ae({},G,{component:M,slots:R,slotProps:$}),[O,ne]=Ut("root",{ref:n,className:qn(F.root,d),elementType:EU,externalForwardedProps:j,ownerState:ee,additionalProps:ae({role:"progressbar",style:{"--CircularProgress-percent":k}},k&&I&&{"aria-valuenow":Math.round(typeof k=="number"?k:Number(k||0))})}),[Y,q]=Ut("svg",{className:F.svg,elementType:kU,externalForwardedProps:j,ownerState:ee}),[ce,he]=Ut("track",{className:F.track,elementType:MU,externalForwardedProps:j,ownerState:ee}),[ze,J]=Ut("progress",{className:F.progress,elementType:RU,externalForwardedProps:j,ownerState:ee});return le.jsxs(O,ae({},ne,{children:[le.jsxs(Y,ae({},q,{children:[le.jsx(ce,ae({},he)),le.jsx(ze,ae({},J))]})),u]}))}),AU=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],zU=e=>{const{color:t,disabled:n,focusVisible:i,focusVisibleClassName:u,size:d,variant:f,loading:a}=e,b={root:["root",n&&"disabled",i&&"focusVisible",f&&`variant${Ot(f)}`,t&&`color${Ot(t)}`,d&&`size${Ot(d)}`,a&&"loading"],loadingIndicator:["loadingIndicator"]},C=Vr(b,bU,{});return i&&u&&(C.root+=` ${u}`),C},Jm=kt("button")(({theme:e,ownerState:t})=>{var n,i,u,d;return[ae({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:ae({"--Icon-color":"currentColor"},e.focus.default)}),ae({},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":{"@media (hover: hover)":ae({"--Icon-color":"currentColor"},(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color])},'&:active, &[aria-pressed="true"]':ae({"--Icon-color":"currentColor"},(u=e.variants[`${t.variant}Active`])==null?void 0:u[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),DU=kt(Jm,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),LU=kt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var n,i;return ae({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(n=e.variants[t.variant])==null||(n=n[t.color])==null?void 0:n.color},t.disabled&&{color:(i=e.variants[`${t.variant}Disabled`])==null||(i=i[t.color])==null?void 0:i.color})}),f_=L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyIconButton"}),{children:d,action:f,component:a="button",color:b="neutral",disabled:C,variant:I="plain",loading:k=!1,loadingIndicator:M,size:R="md",slots:$={},slotProps:G={}}=u,ee=ir(u,AU),F=L.useContext(a2),j=L.useContext(eL),O=t.variant||F.variant||I,ne=t.size||F.size||R,Y=t.color||F.color||b,q=(i=t.loading||t.disabled)!=null?i:F.disabled||k||C,ce=L.useRef(null),he=ln(ce,n),{focusVisible:ze,setFocusVisible:J,getRootProps:Ee}=Cs(ae({},u,{disabled:q,rootRef:he})),Be=M??le.jsx(s2,{color:Y,thickness:{sm:2,md:3,lg:4}[ne]||3});L.useImperativeHandle(f,()=>({focusVisible:()=>{var ct;J(!0),(ct=ce.current)==null||ct.focus()}}),[J]);const je=ae({},u,{component:a,color:Y,disabled:q,variant:O,loading:k,size:ne,focusVisible:ze,instanceSize:t.size}),ot=zU(je),He=ct=>{var Ht;let Dt=u.onClick;if(typeof G.root=="function"?Dt=G.root(je).onClick:G.root&&(Dt=G.root.onClick),(Ht=Dt)==null||Ht(ct),j){var Nt;(Nt=j.onClick)==null||Nt.call(j,ct,u.value)}};let De=u["aria-pressed"];typeof G.root=="function"?De=G.root(je)["aria-pressed"]:G.root&&(De=G.root["aria-pressed"]),j!=null&&j.value&&(Array.isArray(j.value)?De=j.value.indexOf(u.value)!==-1:De=j.value===u.value);const Ge=ae({},ee,{component:a,slots:$,slotProps:G}),[Ue,Ze]=Ut("root",{ref:n,className:ot.root,elementType:DU,getSlotProps:Ee,externalForwardedProps:Ge,ownerState:je,additionalProps:{onClick:He,"aria-pressed":De}}),[at,pt]=Ut("loadingIndicator",{className:ot.loadingIndicator,elementType:LU,externalForwardedProps:Ge,ownerState:je});return le.jsx(Ue,ae({},Ze,{children:k?le.jsx(at,ae({},pt,{children:Be})):d}))});f_.muiName="IconButton";function $U(e){return Wr("MuiChip",e)}const eS=Fr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),tL=L.createContext({disabled:void 0,variant:void 0,color:void 0}),OU=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],BU=e=>{const{disabled:t,size:n,color:i,clickable:u,variant:d,focusVisible:f}=e,a={root:["root",t&&"disabled",i&&`color${Ot(i)}`,n&&`size${Ot(n)}`,d&&`variant${Ot(d)}`,u&&"clickable"],action:["action",t&&"disabled",f&&"focusVisible"],label:["label",n&&`label${Ot(n)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Vr(a,$U,{})},FU=kt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i,u;const d=(n=e.variants[t.variant])==null?void 0:n[t.color],{borderRadius:f}=Wh({theme:e,ownerState:t},["borderRadius"]);return[ae({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${eS.disabled}`]:{color:(i=e.variants[`${t.variant}Disabled`])==null||(i=i[t.color])==null?void 0:i.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:d==null?void 0:d.color}]:[ae({backgroundColor:e.vars.palette.background.surface},d,{[`&.${eS.disabled}`]:(u=e.variants[`${t.variant}Disabled`])==null?void 0:u[t.color]})],f!==void 0&&{"--_Chip-radius":f}]}),jU=kt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>ae({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),NU=kt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var n,i,u,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},ae({backgroundColor:e.vars.palette.background.surface},(n=e.variants[t.variant])==null?void 0:n[t.color]),{"&:hover":{"@media (hover: hover)":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]}},{"&:active":(u=e.variants[`${t.variant}Active`])==null?void 0:u[t.color]},{[`&.${eS.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),VU=kt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),UU=kt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),HU=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyChip"}),{children:u,className:d,color:f="neutral",onClick:a,disabled:b=!1,size:C="md",variant:I="soft",startDecorator:k,endDecorator:M,component:R,slots:$={},slotProps:G={}}=i,ee=ir(i,OU),F=!!a||!!G.action,j=ae({},i,{disabled:b,size:C,color:f,variant:I,clickable:F,focusVisible:!1}),O=typeof G.action=="function"?G.action(j):G.action,ne=L.useRef(null),{focusVisible:Y,getRootProps:q}=Cs(ae({},O,{disabled:b,rootRef:ne}));j.focusVisible=Y;const ce=BU(j),he=ae({},ee,{component:R,slots:$,slotProps:G}),[ze,J]=Ut("root",{ref:n,className:qn(ce.root,d),elementType:FU,externalForwardedProps:he,ownerState:j}),[Ee,Be]=Ut("label",{className:ce.label,elementType:jU,externalForwardedProps:he,ownerState:j}),je=Ri(Be.id),[ot,He]=Ut("action",{className:ce.action,elementType:NU,externalForwardedProps:he,ownerState:j,getSlotProps:q,additionalProps:{"aria-labelledby":je,as:O==null?void 0:O.component,onClick:a}}),[De,Ge]=Ut("startDecorator",{className:ce.startDecorator,elementType:VU,externalForwardedProps:he,ownerState:j}),[Ue,Ze]=Ut("endDecorator",{className:ce.endDecorator,elementType:UU,externalForwardedProps:he,ownerState:j}),at=L.useMemo(()=>({disabled:b}),[b]);return le.jsx(tL.Provider,{value:at,children:le.jsx(p_,{variant:I,color:f,children:le.jsxs(ze,ae({},J,{children:[F&&le.jsx(ot,ae({},He)),le.jsx(Ee,ae({},Be,{id:je,children:u})),k&&le.jsx(De,ae({},Ge,{children:k})),M&&le.jsx(Ue,ae({},Ze,{children:M}))]}))})})}),GU=Zh(le.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function WU(e){return Wr("MuiChipDelete",e)}Fr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var zE;const ZU=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],qU=["onDelete"],KU=e=>{const{focusVisible:t,variant:n,color:i,disabled:u}=e,d={root:["root",u&&"disabled",t&&"focusVisible",n&&`variant${Ot(n)}`,i&&`color${Ot(i)}`]};return Vr(d,WU,{})},XU=kt(Jm,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),YU=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyChipDelete"}),{children:u,variant:d="plain",color:f="neutral",disabled:a,onKeyDown:b,onDelete:C,onClick:I,component:k,slots:M={},slotProps:R={}}=i,$=ir(i,ZU),G=L.useContext(tL),{variant:ee=d,color:F=f}=h_(t.variant,t.color,!0),j=t.color||F,O=a??G.disabled,ne=L.useRef(null),Y=ln(ne,n),{focusVisible:q,getRootProps:ce}=Cs(ae({},i,{disabled:O,rootRef:Y})),he=ae({},i,{disabled:O,variant:ee,color:j,focusVisible:q}),ze=KU(he),J=ae({},$,{component:k,slots:M,slotProps:R}),Ee=De=>{!O&&C&&C(De),I&&I(De)},Be=De=>{["Backspace","Enter","Delete"].includes(De.key)&&(De.preventDefault(),!O&&C&&C(De)),b&&b(De)},[je,ot]=Ut("root",{ref:n,elementType:XU,getSlotProps:ce,externalForwardedProps:J,ownerState:he,additionalProps:{as:k,onKeyDown:Be,onClick:Ee},className:ze.root}),He=ir(ot,qU);return le.jsx(je,ae({},He,{children:u??(zE||(zE=le.jsx(GU,{})))}))});function JU(e){return Wr("MuiInput",e)}const rL=Fr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),m_=L.createContext(void 0),QU=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function e9(e,t){var n;const i=L.useContext(m_),{"aria-describedby":u,"aria-label":d,"aria-labelledby":f,autoComplete:a,autoFocus:b,className:C,defaultValue:I,disabled:k,disabledInProp:M,error:R,id:$,name:G,onClick:ee,onChange:F,onKeyDown:j,onKeyUp:O,onFocus:ne,onBlur:Y,placeholder:q,readOnly:ce,required:he,type:ze,value:J}=e,Ee=ir(e,QU),{getRootProps:Be,getInputProps:je,focused:ot,error:He,disabled:De}=Rj({disabled:(n=M??(i==null?void 0:i.disabled))!=null?n:k,defaultValue:I,error:R,onBlur:Y,onClick:ee,onChange:F,onFocus:ne,required:he??(i==null?void 0:i.required),value:J}),Ge={[t.disabled]:De,[t.error]:He,[t.focused]:ot,[t.formControl]:!!i,[C]:C},Ue={[t.disabled]:De};return ae({formControl:i,propsToForward:{"aria-describedby":u,"aria-label":d,"aria-labelledby":f,autoComplete:a,autoFocus:b,disabled:De,id:$,onKeyDown:j,onKeyUp:O,name:G,placeholder:q,readOnly:ce,type:ze},rootStateClasses:Ge,inputStateClasses:Ue,getRootProps:Be,getInputProps:je,focused:ot,error:He,disabled:De},Ee)}const t9=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],r9=e=>{const{disabled:t,fullWidth:n,variant:i,color:u,size:d}=e,f={root:["root",t&&"disabled",n&&"fullWidth",i&&`variant${Ot(i)}`,u&&`color${Ot(u)}`,d&&`size${Ot(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Vr(f,JU,{})},nL=kt("div")(({theme:e,ownerState:t})=>{var n,i,u,d,f,a;const b=(n=e.variants[`${t.variant}`])==null?void 0:n[t.color];return[ae({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(i=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:i[500],[`&:not([${Dh}])`]:ae({},t.instanceColor&&{"--_Input-focusedHighlight":(u=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:u[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],b,{backgroundColor:(d=b==null?void 0:b.backgroundColor)!=null?d:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":ae({},(f=e.variants[`${t.variant}Hover`])==null?void 0:f[t.color],{backgroundColor:null}),[`&.${rL.disabled}`]:(a=e.variants[`${t.variant}Disabled`])==null?void 0:a[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),oL=kt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":ae({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),iL=kt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),aL=kt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),n9=kt(nL,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),o9=kt(oL,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),i9=kt(iL,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),a9=kt(aL,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),s9=L.forwardRef(function(t,n){var i,u,d,f,a,b;const C=Zr({props:t,name:"JoyInput"}),I=e9(ae({},C,{disabledInProp:t.disabled}),rL),{propsToForward:k,rootStateClasses:M,inputStateClasses:R,getRootProps:$,getInputProps:G,formControl:ee,focused:F,error:j=!1,disabled:O,fullWidth:ne=!1,size:Y="md",color:q="neutral",variant:ce="outlined",startDecorator:he,endDecorator:ze,component:J,slots:Ee={},slotProps:Be={}}=I,je=ir(I,t9),ot=(i=(u=t.error)!=null?u:ee==null?void 0:ee.error)!=null?i:j,He=(d=(f=t.size)!=null?f:ee==null?void 0:ee.size)!=null?d:Y,De=(a=t.color)!=null?a:ot?"danger":(b=ee==null?void 0:ee.color)!=null?b:q,Ge=ae({instanceColor:ot?"danger":t.color},C,{fullWidth:ne,color:De,disabled:O,error:ot,focused:F,size:He,variant:ce}),Ue=r9(Ge),Ze=ae({},je,{component:J,slots:Ee,slotProps:Be}),[at,pt]=Ut("root",{ref:n,className:[Ue.root,M],elementType:n9,getSlotProps:$,externalForwardedProps:Ze,ownerState:Ge}),[ct,Ht]=Ut("input",ae({},ee&&{additionalProps:{id:ee.htmlFor,"aria-describedby":ee["aria-describedby"]}},{className:[Ue.input,R],elementType:o9,getSlotProps:G,internalForwardedProps:k,externalForwardedProps:Ze,ownerState:Ge})),[Dt,Nt]=Ut("startDecorator",{className:Ue.startDecorator,elementType:i9,externalForwardedProps:Ze,ownerState:Ge}),[tr,Tt]=Ut("endDecorator",{className:Ue.endDecorator,elementType:a9,externalForwardedProps:Ze,ownerState:Ge});return le.jsxs(at,ae({},pt,{children:[he&&le.jsx(Dt,ae({},Nt,{children:he})),le.jsx(ct,ae({},Ht)),ze&&le.jsx(tr,ae({},Tt,{children:ze}))]}))});function l9(e){return Wr("MuiListSubheader",e)}Fr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const c9=["component","className","children","id","sticky","variant","color","slots","slotProps"],u9=e=>{const{variant:t,color:n,sticky:i}=e,u={root:["root",i&&"sticky",n&&`color${Ot(n)}`,t&&`variant${Ot(t)}`]};return Vr(u,l9,{})},d9=kt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i;return ae({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${Dh}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(i=e.variants[t.variant])==null?void 0:i[t.color])}),h9=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyListSubheader"}),{component:u,className:d,children:f,id:a,sticky:b=!1,variant:C,color:I,slots:k={},slotProps:M={}}=i,R=ir(i,c9),$=Ri(a),G=L.useContext(KD);L.useEffect(()=>{G&&G($||"")},[G,$]);const ee=ae({instanceColor:t.color},i,{id:$,sticky:b,variant:C,color:C?I??"neutral":I}),F=u9(ee),j=ae({},R,{component:u,slots:k,slotProps:M}),[O,ne]=Ut("root",{ref:n,className:qn(F.root,d),elementType:d9,externalForwardedProps:j,ownerState:ee,additionalProps:{as:u,id:$}});return le.jsx(O,ae({},ne,{children:f}))});function p9(e){return Wr("MuiAutocomplete",e)}const ql=Fr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),sL=kt(Km)(({theme:e,ownerState:t})=>{var n;const i=(n=e.variants[t.variant])==null?void 0:n[t.color];return ae({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},c_,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(i!=null&&i.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${i0.nested}, & .${i0.nested} .${uU.root}`]:{position:"initial"}})});kt(sL,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function f9(e){return Wr("MuiAutocompleteOption",e)}Fr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const m9=["children","component","color","variant","className","slots","slotProps"],g9=e=>{const{color:t,variant:n}=e,i={root:["root",t&&`color${Ot(t)}`,n&&`variant${Ot(n)}`]};return Vr(i,f9,{})},lL=kt(Ym)(({theme:e,ownerState:t})=>{var n,i;return{'&[aria-disabled="true"]':(n=e.variants[`${t.variant}Disabled`])==null?void 0:n[t.color],'&[aria-selected="true"]':ae({},(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],{fontWeight:e.vars.fontWeight.md})}}),y9=kt(lL,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),cL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyAutocompleteOption"}),{children:u,component:d="li",color:f="neutral",variant:a="plain",className:b,slots:C={},slotProps:I={}}=i,k=ir(i,m9),{variant:M=a,color:R=f}=h_(t.variant,t.color),$=ae({},i,{component:d,color:R,variant:M}),G=g9($),ee=ae({},k,{component:d,slots:C,slotProps:I}),[F,j]=Ut("root",{ref:n,className:qn(G.root,b),elementType:y9,externalForwardedProps:ee,ownerState:$,additionalProps:{as:d,role:"option"}});return le.jsx(F,ae({},j,{children:u}))});var DE,LE;const v9=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],_9=["onDelete"],x9=["key"],b9=["onBlur","onFocus","onMouseDown"],w9=["key"],S9=e=>e.current!==null&&e.current.contains(document.activeElement),C9=e=>{var t;return(t=e.label)!=null?t:e},P9=e=>`+${e}`,T9=e=>le.jsxs($u,{nested:!0,children:[le.jsx(h9,{sticky:!0,children:e.group}),le.jsx(Xm,{children:e.children})]},e.key),I9=e=>{const{disabled:t,focused:n,hasClearIcon:i,hasPopupIcon:u,popupOpen:d,variant:f,color:a,size:b,multiple:C}=e,I={root:["root",n&&"focused",i&&"hasClearIcon",u&&"hasPopupIcon",f&&`variant${Ot(f)}`,a&&`color${Ot(a)}`,b&&`size${Ot(b)}`],wrapper:["wrapper",C&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Vr(I,p9,{})},E9=kt(nL,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>ae({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${ql.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),k9=kt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${ql.multiple}`]:ae({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),M9=kt(oL,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>ae({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),R9=kt(iL,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),A9=kt(aL,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>ae({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),z9=kt(Jm,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>ae({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),D9=kt(Jm,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${ql.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),L9=kt(sL,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),$9=kt(lL,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),O9=kt($u,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),B9=kt($u,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),F9=kt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),Pm=L.forwardRef(function(t,n){var i,u,d,f,a,b,C;const I=Zr({props:t,name:"JoyAutocomplete"}),{"aria-describedby":k,"aria-label":M,"aria-labelledby":R,autoFocus:$,clearIcon:G=DE||(DE=le.jsx(JD,{fontSize:"md"})),clearText:ee="Clear",closeText:F="Close",disableClearable:j=!1,disabled:O,endDecorator:ne,error:Y=!1,forcePopupIcon:q="auto",freeSolo:ce=!1,getLimitTagsText:he=P9,getOptionLabel:ze=C9,groupBy:J,id:Ee,limitTags:Be=-1,loading:je=!1,loadingText:ot="Loading…",multiple:He=!1,name:De,noOptionsText:Ge="No options",openText:Ue="Open",placeholder:Ze,popupIcon:at=LE||(LE=le.jsx(xU,{})),readOnly:pt=!1,renderGroup:ct=T9,renderOption:Ht,renderTags:Dt,required:Nt,type:tr,startDecorator:Tt,size:st="md",color:Ct="neutral",variant:Mt="outlined",component:qt,slots:nr={},slotProps:ur={}}=I,gr=ir(I,v9),Kt=L.useContext(m_),Lt=(i=(u=t.error)!=null?u:Kt==null?void 0:Kt.error)!=null?i:Y,Qt=(d=(f=t.size)!=null?f:Kt==null?void 0:Kt.size)!=null?d:st,Vt=(a=t.color)!=null?a:Lt?"danger":(b=Kt==null?void 0:Kt.color)!=null?b:Ct,mr=(C=O??(Kt==null?void 0:Kt.disabled))!=null?C:!1,{getRootProps:kr,getInputProps:Ur,getPopupIndicatorProps:Lr,getClearProps:pr,getTagProps:$r,getListboxProps:jr,getOptionProps:br,value:dr,dirty:ar,popupOpen:Jt,focused:yr,focusedTag:wr,anchorEl:_e,setAnchorEl:X,inputValue:te,groupedOptions:H}=J8(ae({},I,{id:Ee??(Kt==null?void 0:Kt.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:S9})),{onMouseDown:oe}=Ur(),{onClick:xe}=kr(),Ae=!j&&!mr&&ar&&!pt,Fe=(!ce||q===!0)&&q!==!1,we=ae({instanceColor:t.color},I,{value:dr,disabled:mr,focused:yr,getOptionLabel:ze,hasOptions:!!H.length,hasClearIcon:Ae,hasPopupIcon:Fe,inputFocused:wr===-1,popupOpen:Jt,size:Qt,color:Vt,variant:Mt}),qe=I9(we),We=ae({},gr,{component:qt,slots:nr,slotProps:ur});let $e;if(He&&dr.length>0){const jt=Bn=>{const nn=$r(Bn),{onDelete:zr}=nn,Pn=ir(nn,_9);return ae({disabled:mr,size:Qt,onClick:zr},Pn)};Dt?$e=Dt(dr,jt,we):$e=dr.map((Bn,nn)=>{const zr=jt({index:nn}),{key:Pn}=zr,$o=ir(zr,x9);return le.jsx(HU,{size:Qt,variant:"soft",color:"neutral",endDecorator:le.jsx(YU,ae({},$o),Pn),sx:{minWidth:0},children:ze(Bn)},nn)})}const nt=ln(n,X),Me={[ql.disabled]:mr,[ql.error]:Lt,[ql.focused]:yr,[ql.formControl]:!!Kt},[mt,wt]=Ut("root",{ref:nt,className:[qe.root,Me],elementType:E9,externalForwardedProps:We,ownerState:we,getSlotProps:kr,additionalProps:{onClick:jt=>{xe&&xe(jt),jt.currentTarget===jt.target&&oe&&oe(jt)}}}),[ge,Re]=Ut("wrapper",{className:qe.wrapper,elementType:k9,externalForwardedProps:We,ownerState:we}),Ve={[ql.disabled]:mr},[ut,vt]=Ut("input",{className:[qe.input,Ve],elementType:M9,getSlotProps:jt=>{const Bn=Ur(),{onBlur:nn,onFocus:zr,onMouseDown:Pn}=Bn,$o=ir(Bn,b9);return ae({},$o,{onBlur:li=>{var Di;nn==null||nn(li),(Di=jt.onBlur)==null||Di.call(jt,li)},onFocus:li=>{var Di;zr==null||zr(li),(Di=jt.onFocus)==null||Di.call(jt,li)},onMouseDown:li=>{var Di;Pn==null||Pn(li),(Di=jt.onMouseDown)==null||Di.call(jt,li)}})},externalForwardedProps:We,ownerState:we,additionalProps:{autoFocus:$,placeholder:Ze,name:De,readOnly:pt,disabled:mr,required:Nt??(Kt==null?void 0:Kt.required),type:tr,"aria-invalid":Lt||void 0,"aria-label":M,"aria-labelledby":R,"aria-describedby":k??(Kt==null?void 0:Kt["aria-describedby"])}}),[It,bt]=Ut("startDecorator",{className:qe.startDecorator,elementType:R9,externalForwardedProps:We,ownerState:we}),[xt,Bt]=Ut("endDecorator",{className:qe.endDecorator,elementType:A9,externalForwardedProps:We,ownerState:we}),[Je,Xt]=Ut("clearIndicator",{className:qe.clearIndicator,elementType:z9,getSlotProps:pr,externalForwardedProps:We,ownerState:we,getSlotOwnerState:jt=>({size:jt.size||Qt,variant:jt.variant||hu(Mt,Vt).variant||"plain",color:jt.color||hu(Mt,Vt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":ee,title:ee}}),[zt,lr]=Ut("popupIndicator",{className:qe.popupIndicator,elementType:D9,getSlotProps:Lr,externalForwardedProps:We,ownerState:we,getSlotOwnerState:jt=>({size:jt.size||Qt,variant:jt.variant||hu(Mt,Vt).variant||"plain",color:jt.color||hu(Mt,Vt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:mr,"aria-label":Jt?F:Ue,title:Jt?F:Ue,type:"button"}}),[rt,Ie]=Ut("listbox",{className:qe.listbox,elementType:L9,getSlotProps:jr,externalForwardedProps:We,ownerState:we,getSlotOwnerState:jt=>({size:jt.size||Qt,variant:jt.variant||Mt,color:jt.color||Vt,disableColorInversion:!jt.disablePortal}),additionalProps:{anchorEl:_e,open:Jt,style:_e?{width:_e.clientWidth}:{}}}),[dt,_t]=Ut("loading",{className:qe.loading,elementType:O9,externalForwardedProps:We,ownerState:we}),[$t,Or]=Ut("noOptions",{className:qe.noOptions,elementType:B9,externalForwardedProps:We,ownerState:we,additionalProps:{role:"presentation",onMouseDown:jt=>{jt.preventDefault()}}}),[xr,rr]=Ut("limitTag",{className:qe.limitTag,elementType:F9,externalForwardedProps:We,ownerState:we});if(Be>-1&&Array.isArray($e)){const jt=$e.length-Be;!yr&&jt>0&&($e=$e.splice(0,Be),$e.push(le.jsx(xr,ae({},rr,{children:he(jt)}),$e.length)))}const[sn,Lo]=Ut("option",{className:qe.option,elementType:$9,externalForwardedProps:We,ownerState:we,getSlotOwnerState:jt=>({variant:jt.variant||hu(Mt,Vt).variant||"plain",color:jt.color||hu(Mt,Vt).color||"neutral",disableColorInversion:!Ie.disablePortal}),additionalProps:{as:"li"}}),zi=Ht||((jt,Bn)=>{const{key:nn}=jt,zr=ir(jt,w9);return le.jsx(sn,ae({},zr,{children:ze(Bn)}),nn)}),So=(jt,Bn)=>{const nn=br({option:jt,index:Bn});return zi(ae({},Lo,nn),jt,{selected:!!nn["aria-selected"],inputValue:te,ownerState:we})},Co=L.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...Ie.modifiers||[]],[Ie.modifiers]);let Ar=null;if(_e){var Xr;Ar=le.jsx(p_,{variant:Mt,color:Vt,children:le.jsx(qm,{nested:!0,children:le.jsxs(rt,ae({},Ie,{className:qn(Ie.className),modifiers:Co},!((Xr=I.slots)!=null&&Xr.listbox)&&{as:i_,slots:{root:Ie.as||"ul"}},{children:[H.map((jt,Bn)=>{if(J){const nn=jt;return ct({key:String(nn.key),group:nn.group,children:nn.options.map((zr,Pn)=>So(zr,nn.index+Pn))})}return So(jt,Bn)}),je&&H.length===0?le.jsx(dt,ae({},_t,{children:ot})):null,H.length===0&&!ce&&!je?le.jsx($t,ae({},Or,{children:Ge})):null]}))})})}return le.jsxs(L.Fragment,{children:[le.jsxs(mt,ae({},wt,{children:[Tt&&le.jsx(It,ae({},bt,{children:Tt})),le.jsxs(ge,ae({},Re,{children:[$e,le.jsx(ut,ae({},vt))]})),ne&&le.jsx(xt,ae({},Bt,{children:ne})),Ae?le.jsx(Je,ae({},Xt,{children:G})):null,Fe?le.jsx(zt,ae({},lr,{children:at})):null]})),Ar]})}),j9=vA("MuiBox",["root"]),N9=JF({themeId:zm,defaultTheme:Vh,defaultClassName:j9.root,generateClassName:mA.generate});function V9(e){return Wr("MuiTypography",e)}Fr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const U9=["color","textColor"],H9=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],tS=L.createContext(!1),G9=L.createContext(!1),W9=e=>{const{gutterBottom:t,noWrap:n,level:i,color:u,variant:d}=e,f={root:["root",i,t&&"gutterBottom",n&&"noWrap",u&&`color${Ot(u)}`,d&&`variant${Ot(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Vr(f,V9,{})},Z9=kt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),q9=kt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),K9=kt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i,u,d,f;const a=t.level!=="inherit"?(n=e.typography[t.level])==null?void 0:n.lineHeight:"1";return ae({"--Icon-fontSize":`calc(1em * ${a})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:ae({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&ae({display:"flex",alignItems:"center"},t.nesting&&ae({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(i=(u=e.typography[t.level])==null?void 0:u.fontSize)!=null?i:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&ae({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(f=e.variants[t.variant])==null?void 0:f[t.color]))}),$E={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Ka=L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyTypography"}),{color:d,textColor:f}=u,a=ir(u,U9),b=L.useContext(tS),C=L.useContext(G9),I=WS(ae({},a,{color:f})),{component:k,gutterBottom:M=!1,noWrap:R=!1,level:$="body-md",levelMapping:G=$E,children:ee,endDecorator:F,startDecorator:j,variant:O,slots:ne={},slotProps:Y={}}=I,q=ir(I,H9),ce=(i=t.color)!=null?i:O?d??"neutral":d,he=b||C?t.level||"inherit":$,ze=qS(ee,["Skeleton"]),J=k||(b?"span":G[he]||$E[he]||"span"),Ee=ae({},I,{level:he,component:J,color:ce,gutterBottom:M,noWrap:R,nesting:b,variant:O,unstable_hasSkeleton:ze}),Be=W9(Ee),je=ae({},q,{component:J,slots:ne,slotProps:Y}),[ot,He]=Ut("root",{ref:n,className:Be.root,elementType:K9,externalForwardedProps:je,ownerState:Ee}),[De,Ge]=Ut("startDecorator",{className:Be.startDecorator,elementType:Z9,externalForwardedProps:je,ownerState:Ee}),[Ue,Ze]=Ut("endDecorator",{className:Be.endDecorator,elementType:q9,externalForwardedProps:je,ownerState:Ee});return le.jsx(tS.Provider,{value:!0,children:le.jsxs(ot,ae({},He,{children:[j&&le.jsx(De,ae({},Ge,{children:j})),ze?L.cloneElement(ee,{variant:ee.props.variant||"inline"}):ee,F&&le.jsx(Ue,ae({},Ze,{children:F}))]}))})});Ka.muiName="Typography";function X9(e){return Wr("MuiButton",e)}const OE=Fr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),Y9=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],J9=e=>{const{color:t,disabled:n,focusVisible:i,focusVisibleClassName:u,fullWidth:d,size:f,variant:a,loading:b}=e,C={root:["root",n&&"disabled",i&&"focusVisible",d&&"fullWidth",a&&`variant${Ot(a)}`,t&&`color${Ot(t)}`,f&&`size${Ot(f)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},I=Vr(C,X9,{});return i&&u&&(I.root+=` ${u}`),I},Q9=kt("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),eH=kt("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),tH=kt("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var n,i;return ae({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(n=e.variants[t.variant])==null||(n=n[t.color])==null?void 0:n.color},t.disabled&&{color:(i=e.variants[`${t.variant}Disabled`])==null||(i=i[t.color])==null?void 0:i.color})}),uL=({theme:e,ownerState:t})=>{var n,i,u,d;return[ae({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),ae({},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":{"@media (hover: hover)":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]},'&:active, &[aria-pressed="true"]':(u=e.variants[`${t.variant}Active`])==null?void 0:u[t.color],[`&.${OE.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${OE.loading}`]:{color:"transparent"}})]},rH=kt("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(uL),dL=L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyButton"}),{children:d,action:f,color:a="primary",variant:b="solid",size:C="md",fullWidth:I=!1,startDecorator:k,endDecorator:M,loading:R=!1,loadingPosition:$="center",loadingIndicator:G,disabled:ee,component:F,slots:j={},slotProps:O={}}=u,ne=ir(u,Y9),Y=L.useContext(a2),q=L.useContext(eL),ce=t.variant||Y.variant||b,he=t.size||Y.size||C,ze=t.color||Y.color||a,J=(i=t.loading||t.disabled)!=null?i:Y.disabled||R||ee,Ee=L.useRef(null),Be=ln(Ee,n),{focusVisible:je,setFocusVisible:ot,getRootProps:He}=Cs(ae({},u,{disabled:J,rootRef:Be})),De=G??le.jsx(s2,{color:ze,thickness:{sm:2,md:3,lg:4}[he]||3});L.useImperativeHandle(f,()=>({focusVisible:()=>{var Mt;ot(!0),(Mt=Ee.current)==null||Mt.focus()}}),[ot]);const Ge=ae({},u,{color:ze,fullWidth:I,variant:ce,size:he,focusVisible:je,loading:R,loadingPosition:$,disabled:J}),Ue=J9(Ge),Ze=Mt=>{var qt;let nr=u.onClick;if(typeof O.root=="function"?nr=O.root(Ge).onClick:O.root&&(nr=O.root.onClick),(qt=nr)==null||qt(Mt),q){var ur;(ur=q.onClick)==null||ur.call(q,Mt,u.value)}};let at=u["aria-pressed"];typeof O.root=="function"?at=O.root(Ge)["aria-pressed"]:O.root&&(at=O.root["aria-pressed"]),q!=null&&q.value&&(Array.isArray(q.value)?at=q.value.indexOf(u.value)!==-1:at=q.value===u.value);const pt=ae({},ne,{component:F,slots:j,slotProps:O}),[ct,Ht]=Ut("root",{ref:n,className:Ue.root,elementType:rH,externalForwardedProps:pt,getSlotProps:He,ownerState:Ge,additionalProps:{onClick:Ze,"aria-pressed":at}}),[Dt,Nt]=Ut("startDecorator",{className:Ue.startDecorator,elementType:Q9,externalForwardedProps:pt,ownerState:Ge}),[tr,Tt]=Ut("endDecorator",{className:Ue.endDecorator,elementType:eH,externalForwardedProps:pt,ownerState:Ge}),[st,Ct]=Ut("loadingIndicatorCenter",{className:Ue.loadingIndicatorCenter,elementType:tH,externalForwardedProps:pt,ownerState:Ge});return le.jsxs(ct,ae({},Ht,{children:[(k||R&&$==="start")&&le.jsx(Dt,ae({},Nt,{children:R&&$==="start"?De:k})),d,R&&$==="center"&&le.jsx(st,ae({},Ct,{children:De})),(M||R&&$==="end")&&le.jsx(tr,ae({},Tt,{children:R&&$==="end"?De:M}))]}))});dL.muiName="Button";function nH(e){return Wr("MuiCard",e)}Fr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const oH=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],iH=e=>{const{size:t,variant:n,color:i,orientation:u}=e,d={root:["root",u,n&&`variant${Ot(n)}`,i&&`color${Ot(i)}`,t&&`size${Ot(t)}`]};return Vr(d,nH,{})},aH=kt("div")(({theme:e,ownerState:t})=>{var n;const{p:i,padding:u,borderRadius:d}=Wh({theme:e,ownerState:t},["p","padding","borderRadius"]);return[ae({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&u_(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&d_(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color]),i!==void 0&&{"--Card-padding":i},u!==void 0&&{"--Card-padding":u},d!==void 0&&{"--Card-radius":d}]}),sH=kt(aH,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lH=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyCard"}),{className:u,color:d="neutral",component:f="div",invertedColors:a=!1,size:b="md",variant:C="outlined",children:I,orientation:k="vertical",slots:M={},slotProps:R={}}=i,$=ir(i,oH),G=ae({},i,{color:d,component:f,orientation:k,size:b,variant:C,invertedColors:a}),ee=iH(G),F=ae({},$,{component:f,slots:M,slotProps:R}),[j,O]=Ut("root",{ref:n,className:qn(ee.root,u),elementType:sH,externalForwardedProps:F,ownerState:G});return le.jsx(j,ae({},O,{children:L.Children.map(I,(ne,Y)=>{if(!L.isValidElement(ne))return ne;const q={};if(qS(ne,["Divider"])){var ce,he;const ze=ne.props;q.inset=(ce=ze==null?void 0:ze.inset)!=null?ce:"context";const J=k==="vertical"?"horizontal":"vertical";q.orientation=(he=ze==null?void 0:ze.orientation)!=null?he:J}return Y===0&&(q["data-first-child"]=""),Y===L.Children.count(I)-1&&(q["data-last-child"]=""),L.cloneElement(ne,q)})}))}),hL=Fr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function cH(e){return Wr("MuiDivider",e)}Fr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const pL=kt("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${hL.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));kt(pL,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const uH=Fr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function dH(e){return Wr("MuiCheckbox",e)}const wu=Fr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),hH=Zh(le.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),pH=Zh(le.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),fH=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],mH=e=>{const{checked:t,disabled:n,disableIcon:i,focusVisible:u,color:d,variant:f,size:a,indeterminate:b}=e,C={root:["root",t&&"checked",n&&"disabled",u&&"focusVisible",f&&`variant${Ot(f)}`,d&&`color${Ot(d)}`,a&&`size${Ot(a)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",n&&"disabled"],action:["action",t&&"checked",i&&n&&"disabled",u&&"focusVisible"],input:["input"],label:["label"]};return Vr(C,dH,{})},gH=kt("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,i,u;return ae({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${wu.disabled}`]:{color:(n=t.variants.plainDisabled)==null||(n=n[e.color])==null?void 0:n.color}},e.disableIcon&&{color:(i=t.variants[e.variant])==null||(i=i[e.color])==null?void 0:i.color,[`&.${wu.disabled}`]:{color:(u=t.variants[`${e.variant}Disabled`])==null||(u=u[e.color])==null?void 0:u.color}})}),yH=kt("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var n,i,u,d,f;const a=(n=e.variants[`${t.variant}`])==null?void 0:n[t.color];return[ae({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${wu.checked}, &.${wu.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[ae({},a,{backgroundColor:(i=a==null?void 0:a.backgroundColor)!=null?i:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(u=e.variants[`${t.variant}Hover`])==null?void 0:u[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${wu.disabled}`]:(f=e.variants[`${t.variant}Disabled`])==null?void 0:f[t.color]}]]}),vH=kt("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var n,i,u,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]},{"&:active":(u=e.variants[`${t.variant}Active`])==null?void 0:u[t.color]},{[`&.${wu.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),_H=kt("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),xH=kt("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>ae({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),bH=le.jsx(hH,{}),wH=le.jsx(pH,{}),Lh=L.forwardRef(function(t,n){var i,u,d,f,a;const b=Zr({props:t,name:"JoyCheckbox"}),{checked:C,uncheckedIcon:I,checkedIcon:k=bH,label:M,defaultChecked:R,disabled:$,disableIcon:G=!1,overlay:ee,id:F,indeterminate:j=!1,indeterminateIcon:O=wH,name:ne,onBlur:Y,onChange:q,onFocus:ce,onFocusVisible:he,readOnly:ze,required:J,value:Ee,color:Be,variant:je,size:ot="md",component:He,slots:De={},slotProps:Ge={}}=b,Ue=ir(b,fH),Ze=L.useContext(m_),at=(i=(u=t.disabled)!=null?u:Ze==null?void 0:Ze.disabled)!=null?i:$,pt=(d=(f=t.size)!=null?f:Ze==null?void 0:Ze.size)!=null?d:ot,ct=Ri(F??(Ze==null?void 0:Ze.htmlFor)),Ht={checked:C,defaultChecked:R,disabled:at,onBlur:Y,onChange:q,onFocus:ce,onFocusVisible:he},{getInputProps:Dt,checked:Nt,disabled:tr,focusVisible:Tt}=F8(Ht),st=Nt||j,qt=st?je||"solid":je||"outlined",nr=t.color||(Ze!=null&&Ze.error?"danger":(a=Ze==null?void 0:Ze.color)!=null?a:Be),Kt=ae({},b,{checked:Nt,disabled:tr,disableIcon:G,overlay:ee,focusVisible:Tt,color:st?nr||"primary":nr||"neutral",variant:qt,size:pt}),Lt=mH(Kt),Qt=ae({},Ue,{component:He,slots:De,slotProps:Ge}),[Vt,mr]=Ut("root",{ref:n,className:Lt.root,elementType:gH,externalForwardedProps:Qt,ownerState:Kt}),[kr,Ur]=Ut("checkbox",{className:Lt.checkbox,elementType:yH,externalForwardedProps:Qt,ownerState:Kt}),[Lr,pr]=Ut("action",{className:Lt.action,elementType:vH,externalForwardedProps:Qt,ownerState:Kt}),[$r,jr]=Ut("input",{additionalProps:ae({id:ct,name:ne,value:Ee,readOnly:ze,role:void 0,required:J??(Ze==null?void 0:Ze.required),"aria-describedby":Ze==null?void 0:Ze["aria-describedby"]},j&&{"aria-checked":"mixed"}),className:Lt.input,elementType:_H,externalForwardedProps:Qt,getSlotProps:Dt,ownerState:Kt}),[br,dr]=Ut("label",{additionalProps:{htmlFor:ct},className:Lt.label,elementType:xH,externalForwardedProps:Qt,ownerState:Kt});let ar=I;return G?ar=null:j?ar=O:Nt&&(ar=k),le.jsxs(Vt,ae({},mr,{children:[le.jsxs(kr,ae({},Ur,{children:[le.jsx(Lr,ae({},pr,{children:le.jsx($r,ae({},jr))})),ar]})),M&&le.jsx(tS.Provider,{value:!0,children:le.jsx(br,ae({},dr,{children:M}))})]}))});function SH(e){const{children:t,disableColorScheme:n=!1}=e;return le.jsxs(L.Fragment,{children:[le.jsx(cj,{styles:i=>{var u,d;const f={};n||Object.entries(i.colorSchemes).forEach(([b,C])=>{var I;f[i.getColorSchemeSelector(b).replace(/\s*&/,"")]={colorScheme:(I=C.palette)==null?void 0:I.mode}});const a=(u=(d=i.components)==null||(d=d.JoyTypography)==null||(d=d.defaultProps)==null?void 0:d.level)!=null?u:"body-md";return ae({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:i.vars.fontWeight.lg},body:ae({margin:0,color:i.vars.palette.text.primary,fontFamily:i.vars.fontFamily.body},i.typography[a],{backgroundColor:i.vars.palette.background.body,"@media print":{backgroundColor:i.vars.palette.common.white},"&::backdrop":{backgroundColor:i.vars.palette.background.backdrop}})},f)},defaultTheme:Vh}),t]})}function CH(e){return Wr("MuiDialogContent",e)}Fr("MuiDialogContent",["root"]);const g_=L.createContext(void 0);function PH(e){return Wr("MuiDialogTitle",e)}const fL=Fr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),TH=["component","children","orientation","slots","slotProps"],IH=()=>Vr({root:["root"]},CH,{}),EH=kt(pL,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${uH.root} > .${fL.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),mL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyDialogContent"}),u=L.useContext(g_),{component:d="div",children:f,orientation:a="vertical",slots:b={},slotProps:C={}}=i,I=ir(i,TH),k=ae({},I,{component:d,slots:b,slotProps:C}),M=ae({},i,{component:d,orientation:a}),R=IH(),[$,G]=Ut("root",{ref:n,className:R.root,elementType:EH,externalForwardedProps:k,ownerState:M,additionalProps:{id:u==null?void 0:u.describedBy}});return le.jsx($,ae({},G,{children:f}))}),l2=L.createContext(void 0),kH=["component","children","variant","color","level","slots","slotProps"],MH=e=>{const{level:t,color:n,variant:i}=e,u={root:["root",t,n&&`color${Ot(n)}`,i&&`variant${Ot(i)}`]};return Vr(u,PH,{})},RH=kt("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i;const u=t.level!=="inherit"?(n=e.typography[t.level])==null?void 0:n.lineHeight:"1";return ae({"--Icon-fontSize":`calc(1em * ${u})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&ae({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(i=e.variants[t.variant])==null?void 0:i[t.color]),{[`.${hL.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),AH={sm:"title-md",md:"title-lg",lg:"h4"},gL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyDialogTitle"}),u=L.useContext(l2),d=L.useContext(g_),{component:f="h2",children:a,variant:b,color:C,level:I=AH[u||"md"],slots:k={},slotProps:M={}}=i,R=ir(i,kH),$=t.color||(b?C??"neutral":C),G=ae({},R,{component:f,slots:k,slotProps:M}),ee=ae({},i,{component:f,color:$,variant:b,level:I}),F=MH(ee),[j,O]=Ut("root",{ref:n,className:F.root,elementType:RH,externalForwardedProps:G,ownerState:ee,additionalProps:{id:d==null?void 0:d.labelledBy}});return le.jsx(j,ae({},O,{children:a}))}),zH=["className","children","component","inset","orientation","role","slots","slotProps"],DH=e=>{const{orientation:t,inset:n}=e,i={root:["root",t,n&&`inset${Ot(n)}`]};return Vr(i,cH,{})},yL=kt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>ae({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?ae({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),c2=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyDivider"}),{className:u,children:d,component:f=d!=null?"div":"hr",inset:a,orientation:b="horizontal",role:C=f!=="hr"?"separator":void 0,slots:I={},slotProps:k={}}=i,M=ir(i,zH),R=ae({},i,{inset:a,role:C,orientation:b,component:f}),$=DH(R),G=ae({},M,{component:f,slots:I,slotProps:k}),[ee,F]=Ut("root",{ref:n,className:qn($.root,u),elementType:yL,externalForwardedProps:G,ownerState:R,additionalProps:ae({as:f,role:C},C==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return le.jsx(ee,ae({},F,{children:d}))});c2.muiName="Divider";const vL=L.createContext(void 0),_L=kt("div")(({ownerState:e,theme:t})=>ae({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));kt(_L,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const xL=kt("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));kt(xL,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function LH(e){return Wr("MuiDrawer",e)}Fr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const $H=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],OH=e=>{const{open:t,variant:n,color:i,size:u}=e,d={root:["root",!t&&"hidden",n&&`variant${Ot(n)}`,i&&`color${Ot(i)}`,u&&`size${Ot(u)}`],backdrop:["backdrop"],content:["content"]};return Vr(d,LH,{})},BH=kt(_L,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>ae({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),FH=kt(xL,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),jH=kt("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var n;return ae({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&u_(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&d_(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color],{[`& > .${fL.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),bL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyDrawer"}),{children:u,anchor:d="left",container:f,disableAutoFocus:a=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:C=!1,disablePortal:I=!1,disableRestoreFocus:k=!1,disableScrollLock:M=!1,hideBackdrop:R=!1,color:$="neutral",variant:G="plain",invertedColors:ee=!1,size:F="md",onClose:j,open:O,component:ne,slots:Y={},slotProps:q={}}=i,ce=ir(i,$H),he=ae({},i,{anchor:d,disableAutoFocus:a,disableEnforceFocus:b,disableEscapeKeyDown:C,disablePortal:I,disableRestoreFocus:k,disableScrollLock:M,hideBackdrop:R,invertedColors:ee,color:$,variant:G,size:F}),{getRootProps:ze,getBackdropProps:J,rootRef:Ee,portalRef:Be,isTopModal:je}=yV(ae({},he,{rootRef:n,children:null})),ot=OH(he),He=ae({},ce,{component:ne,slots:Y,slotProps:q}),De=Ri(),Ge=Ri(),Ue=L.useMemo(()=>({variant:G,color:$,labelledBy:De,describedBy:Ge}),[$,G,De,Ge]),[Ze,at]=Ut("root",{ref:Ee,className:ot.root,elementType:BH,externalForwardedProps:He,getSlotProps:ze,ownerState:he}),[pt,ct]=Ut("backdrop",{className:ot.backdrop,elementType:FH,externalForwardedProps:He,getSlotProps:J,ownerState:he}),[Ht,Dt]=Ut("content",{className:ot.content,elementType:jH,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":De,"aria-describedby":Ge},externalForwardedProps:He,ownerState:he});return le.jsx(vL.Provider,{value:j,children:le.jsx(l2.Provider,{value:F,children:le.jsx(g_.Provider,{value:Ue,children:le.jsx(LD,{ref:Be,container:f,disablePortal:I,children:le.jsxs(Ze,ae({},at,{children:[R?null:le.jsx(pt,ae({},ct)),le.jsx(Ej,{disableEnforceFocus:b,disableAutoFocus:a,disableRestoreFocus:k,isEnabled:je,open:O,children:le.jsx(Ht,ae({},Dt,{children:u}))})]}))})})})})});function NH(e){return Wr("MuiListDivider",e)}Fr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const VH=["component","role","className","children","inset","orientation","slots","slotProps"],UH=e=>{const{orientation:t,inset:n}=e,i={root:["root",t,n&&n!=="context"&&`inset${Ot(n)}`]};return Vr(i,NH,{})},HH=kt(yL,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>ae({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&ae({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&ae({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),wL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyListDivider"}),u=L.useContext(Gh),d=L.useContext(n2),{component:f,role:a,className:b,children:C,inset:I="context",orientation:k,slots:M={},slotProps:R={}}=i,$=ir(i,VH),[G]=(d==null?void 0:d.split(":"))||["",""],ee=f||(G&&!G.match(/^(ul|ol|menu)$/)?"div":"li"),F=a||(ee==="li"?"separator":void 0),j=k||(u?"vertical":"horizontal"),O=ae({},i,{inset:I,row:u,orientation:j,component:ee,role:F}),ne=UH(O),Y=ae({},$,{component:ee,slots:M,slotProps:R}),[q,ce]=Ut("root",{ref:n,className:qn(ne.root,b),elementType:HH,externalForwardedProps:Y,ownerState:O,additionalProps:ae({as:ee,role:F},F==="separator"&&j==="vertical"&&{"aria-orientation":"vertical"})});return le.jsx(q,ae({},ce,{children:C}))});function GH(e){return Wr("MuiListItemContent",e)}Fr("MuiListItemContent",["root"]);const WH=["component","className","children","slots","slotProps"],ZH=()=>Vr({root:["root"]},GH,{}),qH=kt("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),SL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyListItemContent"}),{component:u,className:d,children:f,slots:a={},slotProps:b={}}=i,C=ir(i,WH),I=ae({},i),k=ZH(),M=ae({},C,{component:u,slots:a,slotProps:b}),[R,$]=Ut("root",{ref:n,className:qn(k.root,d),elementType:qH,externalForwardedProps:M,ownerState:I});return le.jsx(R,ae({},$,{children:f}))});function KH(e){return Wr("MuiListItemDecorator",e)}Fr("MuiListItemDecorator",["root"]);const XH=["component","className","children","slots","slotProps"],YH=()=>Vr({root:["root"]},KH,{}),JH=kt("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>ae({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),Yf=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyListItemDecorator"}),{component:u,className:d,children:f,slots:a={},slotProps:b={}}=i,C=ir(i,XH),I=L.useContext(o2),k=ae({parentOrientation:I},i),M=YH(),R=ae({},C,{component:u,slots:a,slotProps:b}),[$,G]=Ut("root",{ref:n,className:qn(M.root,d),elementType:JH,externalForwardedProps:R,ownerState:k});return le.jsx($,ae({},G,{children:f}))});function QH(e){return Wr("MuiMenu",e)}Fr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const e7=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],t7=e=>{const{open:t,variant:n,color:i,size:u}=e,d={root:["root",t&&"expanded",n&&`variant${Ot(n)}`,i&&`color${Ot(i)}`,u&&`size${Ot(u)}`],listbox:["listbox"]};return Vr(d,QH,{})},BE=kt(Km,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i;const u=(n=e.variants[t.variant])==null?void 0:n[t.color];return[ae({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(u==null?void 0:u.backgroundColor)||(u==null?void 0:u.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},c_,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(u!=null&&u.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&u_(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&d_(t.color)(e),(i=e.variants[t.variant])==null?void 0:i[t.color])]}),r7=L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyMenu"}),{actions:d,children:f,color:a="neutral",component:b,disablePortal:C=!1,keepMounted:I=!1,id:k,invertedColors:M=!1,onItemsChange:R,modifiers:$,variant:G="outlined",size:ee="md",slots:F={},slotProps:j={}}=u,O=ir(u,e7),{contextValue:ne,getListboxProps:Y,dispatch:q,open:ce,triggerElement:he}=Jj({onItemsChange:R,id:k,listboxRef:n});L.useImperativeHandle(d,()=>({dispatch:q,resetHighlight:()=>q({type:pn.resetHighlight,event:null})}),[q]);const ze=ae({},u,{disablePortal:C,invertedColors:M,color:a,variant:G,size:ee,open:ce,nesting:!1,row:!1}),J=t7(ze),Ee=ae({},O,{component:b,slots:F,slotProps:j}),Be=L.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...$||[]],[$]),je=TA({elementType:BE,getSlotProps:Y,externalForwardedProps:Ee,externalSlotProps:{},ownerState:ze,additionalProps:{anchorEl:he,open:ce&&he!==null,disablePortal:C,keepMounted:I,modifiers:Be},className:J.root});return le.jsx(BE,ae({},je,!((i=u.slots)!=null&&i.root)&&{as:i_,slots:{root:b||"ul"}},{children:le.jsx(Qj,{value:ne,children:le.jsx(p_,{variant:M?void 0:G,color:a,children:le.jsx(l_.Provider,{value:"menu",children:le.jsx(qm,{nested:!0,children:f})})})})}))});function n7(e){return Wr("MuiMenuButton",e)}Fr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const o7=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],i7=e=>{const{color:t,disabled:n,fullWidth:i,size:u,variant:d,loading:f}=e,a={root:["root",n&&"disabled",i&&"fullWidth",d&&`variant${Ot(d)}`,t&&`color${Ot(t)}`,u&&`size${Ot(u)}`,f&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Vr(a,n7,{})},a7=kt("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(uL),s7=kt("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),l7=kt("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),c7=kt("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var n,i;return ae({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(n=e.variants[t.variant])==null||(n=n[t.color])==null?void 0:n.color},t.disabled&&{color:(i=e.variants[`${t.variant}Disabled`])==null||(i=i[t.color])==null?void 0:i.color})}),u7=L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyMenuButton"}),{children:d,color:f="neutral",component:a,disabled:b=!1,endDecorator:C,loading:I=!1,loadingPosition:k="center",loadingIndicator:M,size:R="md",slotProps:$={},slots:G={},startDecorator:ee,variant:F="outlined"}=u,j=ir(u,o7),O=L.useContext(a2),ne=t.variant||O.variant||F,Y=t.size||O.size||R,q=(i=t.disabled)!=null?i:O.disabled||b||I,{getRootProps:ce,open:he,active:ze}=oV({rootRef:n,disabled:q}),J=M??le.jsx(s2,{color:f,thickness:{sm:2,md:3,lg:4}[Y]||3}),Ee=ae({},u,{active:ze,color:f,disabled:q,open:he,size:Y,variant:ne}),Be=i7(Ee),je=ae({},j,{component:a,slots:G,slotProps:$}),[ot,He]=Ut("root",{elementType:a7,getSlotProps:ce,externalForwardedProps:je,ref:n,ownerState:Ee,className:Be.root}),[De,Ge]=Ut("startDecorator",{className:Be.startDecorator,elementType:s7,externalForwardedProps:je,ownerState:Ee}),[Ue,Ze]=Ut("endDecorator",{className:Be.endDecorator,elementType:l7,externalForwardedProps:je,ownerState:Ee}),[at,pt]=Ut("loadingIndicatorCenter",{className:Be.loadingIndicatorCenter,elementType:c7,externalForwardedProps:je,ownerState:Ee});return le.jsxs(ot,ae({},He,{children:[(ee||I&&k==="start")&&le.jsx(De,ae({},Ge,{children:I&&k==="start"?J:ee})),d,I&&k==="center"&&le.jsx(at,ae({},pt,{children:J})),(C||I&&k==="end")&&le.jsx(Ue,ae({},Ze,{children:I&&k==="end"?J:C}))]}))});function d7(e){return Wr("MuiMenuItem",e)}Fr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const h7=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],p7=e=>{const{focusVisible:t,disabled:n,selected:i,color:u,variant:d}=e,f={root:["root",t&&"focusVisible",n&&"disabled",i&&"selected",u&&`color${Ot(u)}`,d&&`variant${Ot(d)}`]};return Vr(f,d7,{})},f7=kt(Ym,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),m7=L.memo(L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyMenuItem"}),u=L.useContext(Gh),{children:d,disabled:f=!1,component:a="li",selected:b=!1,color:C="neutral",orientation:I="horizontal",variant:k="plain",slots:M={},slotProps:R={},id:$}=i,G=ir(i,h7),{variant:ee=k,color:F=C}=h_(t.variant,t.color),{getRootProps:j,disabled:O,focusVisible:ne}=sV({id:$,disabled:f,rootRef:n}),Y=ae({},i,{component:a,color:F,disabled:O,focusVisible:ne,orientation:I,selected:b,row:u,variant:ee}),q=p7(Y),ce=ae({},G,{component:a,slots:M,slotProps:R}),[he,ze]=Ut("root",{ref:n,elementType:f7,getSlotProps:j,externalForwardedProps:ce,className:q.root,ownerState:Y});return le.jsx(o2.Provider,{value:I,children:le.jsx(he,ae({},ze,{children:d}))})})),Fb=L.forwardRef(function(t,n){const{contextValue:i,id:u}=lV(t.id);return le.jsx(pc.Provider,{value:i,children:le.jsx(m7,ae({},t,{id:u,ref:n}))})});function g7(e){return Wr("MuiModalClose",e)}Fr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var FE;const y7=["component","color","variant","size","onClick","slots","slotProps"],v7=e=>{const{variant:t,color:n,disabled:i,focusVisible:u,size:d}=e,f={root:["root",i&&"disabled",u&&"focusVisible",t&&`variant${Ot(t)}`,n&&`color${Ot(n)}`,d&&`size${Ot(d)}`]};return Vr(f,g7,{})},_7=kt(Jm,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n;return ae({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((n=t.variants[e.variant])!=null&&(n=n[e.color])!=null&&n.backgroundColor)&&{color:t.vars.palette.text.secondary})}),x7={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},CL=L.forwardRef(function(t,n){var i,u,d,f,a,b;const C=Zr({props:t,name:"JoyModalClose"}),{component:I="button",color:k="neutral",variant:M="plain",size:R="md",onClick:$,slots:G={},slotProps:ee={}}=C,F=ir(C,y7),j=L.useContext(vL),O=L.useContext(g_),ne=(i=(u=t.variant)!=null?u:x7[O==null?void 0:O.variant])!=null?i:M,Y=(d=(f=t.color)!=null?f:O==null?void 0:O.color)!=null?d:k,q=L.useContext(l2),ce=(a=(b=t.size)!=null?b:q)!=null?a:R,{focusVisible:he,getRootProps:ze}=Cs(ae({},C,{rootRef:n})),J=ae({},C,{color:Y,component:I,variant:ne,size:ce,focusVisible:he}),Ee=v7(J),[Be,je]=Ut("root",{ref:n,elementType:_7,getSlotProps:ze,externalForwardedProps:ae({onClick:ot=>{j==null||j(ot,"closeClick"),$==null||$(ot)}},F,{component:I,slots:G,slotProps:ee}),className:Ee.root,ownerState:J});return le.jsx(Be,ae({},je,{children:FE||(FE=le.jsx(JD,{}))}))});function b7(e){return Wr("MuiOption",e)}const w7=Fr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),S7=["component","children","disabled","value","label","variant","color","slots","slotProps"],C7=e=>{const{disabled:t,highlighted:n,selected:i}=e;return Vr({root:["root",t&&"disabled",n&&"highlighted",i&&"selected"]},b7,{})},P7=kt(Ym,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;const i=(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color];return{[`&.${w7.highlighted}:not([aria-selected="true"])`]:{backgroundColor:i==null?void 0:i.backgroundColor}}}),T7=L.memo(L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyOption"}),{component:d="li",children:f,disabled:a=!1,value:b,label:C,variant:I="plain",color:k="neutral",slots:M={},slotProps:R={}}=u,$=ir(u,S7),G=L.useContext(Gh),{variant:ee=I,color:F=k}=h_(t.variant,t.color),j=L.useRef(null),O=ln(j,n),ne=C??(typeof f=="string"?f:(i=j.current)==null?void 0:i.innerText),{getRootProps:Y,selected:q,highlighted:ce,index:he}=vV({disabled:a,label:ne,value:b,rootRef:O}),ze=ae({},u,{disabled:a,selected:q,highlighted:ce,index:he,component:d,variant:ee,color:F,row:G}),J=C7(ze),Ee=ae({},$,{component:d,slots:M,slotProps:R}),[Be,je]=Ut("root",{ref:n,getSlotProps:Y,elementType:P7,externalForwardedProps:Ee,className:J.root,ownerState:ze});return le.jsx(Be,ae({},je,{children:f}))})),I7=L.forwardRef(function(t,n){const{contextValue:i}=_V(t.value);return le.jsx(pc.Provider,{value:i,children:le.jsx(T7,ae({},t,{ref:n}))})}),E7=Zh(le.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function k7(e){return Wr("MuiSelect",e)}const yh=Fr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var jE;const M7=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function R7(e){var t;return Array.isArray(e)?le.jsx(L.Fragment,{children:e.map(n=>n.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const A7=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],z7=e=>{const{color:t,disabled:n,focusVisible:i,size:u,variant:d,open:f,multiple:a}=e,b={root:["root",n&&"disabled",i&&"focusVisible",f&&"expanded",d&&`variant${Ot(d)}`,t&&`color${Ot(t)}`,u&&`size${Ot(u)}`,a&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",f&&"expanded"],listbox:["listbox",f&&"expanded",n&&"disabled"]};return Vr(b,k7,{})},D7=kt("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i,u,d,f;const a=(n=e.variants[`${t.variant}`])==null?void 0:n[t.color],{borderRadius:b}=Wh({theme:e,ownerState:t},["borderRadius"]);return[ae({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(i=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:i[500],'&:not([data-inverted-colors="false"])':ae({},t.instanceColor&&{"--_Select-focusedHighlight":(u=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:u[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":a!=null&&a.backgroundColor?a==null?void 0:a.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(a!=null&&a.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],a,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${yh.focusVisible}`]:{"--Select-indicatorColor":a==null?void 0:a.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${yh.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],[`&.${yh.disabled}`]:(f=e.variants[`${t.variant}Disabled`])==null?void 0:f[t.color]},b!==void 0&&{"--Select-radius":b}]}),L7=kt("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>ae({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),$7=kt(Km,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var n;const i=(n=e.variants[t.variant])==null?void 0:n[t.color];return ae({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},c_,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(i!=null&&i.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),O7=kt("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),B7=kt("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),F7=kt("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>ae({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${yh.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${yh.expanded}, .${yh.disabled} > &`]:{"--Icon-color":"currentColor"}})),j7=L.forwardRef(function(t,n){var i,u,d,f,a,b,C;const I=Zr({props:t,name:"JoySelect"}),k=I,{action:M,autoFocus:R,children:$,defaultValue:G,defaultListboxOpen:ee=!1,disabled:F,getSerializedValue:j,placeholder:O,listboxId:ne,listboxOpen:Y,onChange:q,onListboxOpenChange:ce,onClose:he,renderValue:ze,required:J=!1,value:Ee,size:Be="md",variant:je="outlined",color:ot="neutral",startDecorator:He,endDecorator:De,indicator:Ge=jE||(jE=le.jsx(E7,{})),"aria-describedby":Ue,"aria-label":Ze,"aria-labelledby":at,id:pt,name:ct,multiple:Ht=!1,slots:Dt={},slotProps:Nt={}}=k,tr=ir(k,M7),Tt=L.useContext(m_),st=(i=(u=t.disabled)!=null?u:Tt==null?void 0:Tt.disabled)!=null?i:F,Ct=(d=(f=t.size)!=null?f:Tt==null?void 0:Tt.size)!=null?d:Be,Mt=(a=t.color)!=null?a:Tt!=null&&Tt.error?"danger":(b=Tt==null?void 0:Tt.color)!=null?b:ot,qt=ze??R7,[nr,ur]=L.useState(null),gr=L.useRef(null),Kt=L.useRef(null),Lt=ln(n,gr);L.useImperativeHandle(M,()=>({focusVisible:()=>{var mt;(mt=Kt.current)==null||mt.focus()}}),[]),L.useEffect(()=>{ur(gr.current)},[]),L.useEffect(()=>{R&&Kt.current.focus()},[R]);const Qt=L.useCallback(mt=>{ce==null||ce(mt),mt||he==null||he()},[he,ce]),{buttonActive:Vt,buttonFocusVisible:mr,contextValue:kr,disabled:Ur,getButtonProps:Lr,getListboxProps:pr,getHiddenInputProps:$r,getOptionMetadata:jr,open:br,value:dr}=O8({buttonRef:Kt,defaultOpen:ee,defaultValue:G,disabled:st,getSerializedValue:j,listboxId:ne,multiple:Ht,name:ct,required:J,onChange:q,onOpenChange:Qt,open:Y,value:Ee}),ar=ae({},I,{active:Vt,defaultListboxOpen:ee,disabled:Ur,focusVisible:mr,open:br,renderValue:qt,value:dr,size:Ct,variant:je,color:Mt}),Jt=z7(ar),yr=ae({},tr,{slots:Dt,slotProps:Nt}),wr=L.useMemo(()=>{let mt;if(Ht)mt=dr.map(ge=>jr(ge)).filter(ge=>ge!==void 0);else{var wt;mt=(wt=jr(dr))!=null?wt:null}return mt},[jr,dr,Ht]),[_e,X]=Ut("root",{ref:Lt,className:Jt.root,elementType:D7,externalForwardedProps:yr,ownerState:ar}),[te,H]=Ut("button",{additionalProps:{"aria-describedby":Ue??(Tt==null?void 0:Tt["aria-describedby"]),"aria-label":Ze,"aria-labelledby":at??(Tt==null?void 0:Tt.labelId),"aria-required":J?"true":void 0,id:pt??(Tt==null?void 0:Tt.htmlFor),name:ct},className:Jt.button,elementType:L7,externalForwardedProps:yr,getSlotProps:Lr,ownerState:ar}),[oe,xe]=Ut("listbox",{additionalProps:{anchorEl:nr,open:br,placement:"bottom",keepMounted:!0},className:Jt.listbox,elementType:$7,externalForwardedProps:yr,getSlotProps:pr,ownerState:ae({},ar,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:mt=>({size:mt.size||Ct,variant:mt.variant||je,color:mt.color||(mt.disablePortal?Mt:ot),disableColorInversion:!mt.disablePortal})}),[Ae,Fe]=Ut("startDecorator",{className:Jt.startDecorator,elementType:O7,externalForwardedProps:yr,ownerState:ar}),[we,qe]=Ut("endDecorator",{className:Jt.endDecorator,elementType:B7,externalForwardedProps:yr,ownerState:ar}),[We,$e]=Ut("indicator",{className:Jt.indicator,elementType:F7,externalForwardedProps:yr,ownerState:ar}),nt=L.useMemo(()=>[...A7,...xe.modifiers||[]],[xe.modifiers]);let Me=O;return(Array.isArray(wr)&&wr.length>0||!Array.isArray(wr)&&wr)&&(Me=qt(wr)),le.jsxs(L.Fragment,{children:[le.jsxs(_e,ae({},X,{children:[He&&le.jsx(Ae,ae({},Fe,{children:He})),le.jsx(te,ae({},H,{children:Me})),De&&le.jsx(we,ae({},qe,{children:De})),Ge&&le.jsx(We,ae({},$e,{children:Ge})),le.jsx("input",ae({},$r()))]})),nr&&le.jsx(oe,ae({},xe,{className:qn(xe.className),modifiers:nt},!((C=I.slots)!=null&&C.listbox)&&{as:i_,slots:{root:xe.as||"ul"}},{children:le.jsx(B8,{value:kr,children:le.jsx(p_,{variant:je,color:ot,children:le.jsx(l_.Provider,{value:"select",children:le.jsx(qm,{nested:!0,children:$})})})})}))]})});function N7(e){return Wr("MuiSheet",e)}Fr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const V7=["className","color","component","variant","invertedColors","slots","slotProps"],U7=e=>{const{variant:t,color:n}=e,i={root:["root",t&&`variant${Ot(t)}`,n&&`color${Ot(n)}`]};return Vr(i,N7,{})},H7=kt("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i;const u=(n=e.variants[t.variant])==null?void 0:n[t.color],{borderRadius:d,bgcolor:f,backgroundColor:a,background:b}=Wh({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),C=sc(e,`palette.${f}`)||f||sc(e,`palette.${a}`)||a||b||(u==null?void 0:u.backgroundColor)||(u==null?void 0:u.background)||e.vars.palette.background.surface;return[ae({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":C==="transparent"?"initial":C,"--Sheet-background":C==="transparent"?"initial":C},d!==void 0&&{"--List-radius":`calc(${d} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${d} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),ae({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&u_(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&d_(t.color)(e),(i=e.variants[t.variant])==null?void 0:i[t.color],u)]}),PL=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoySheet"}),{className:u,color:d="neutral",component:f="div",variant:a="plain",invertedColors:b=!1,slots:C={},slotProps:I={}}=i,k=ir(i,V7),M=ae({},i,{color:d,component:f,invertedColors:b,variant:a}),R=U7(M),$=ae({},k,{component:f,slots:C,slotProps:I}),[G,ee]=Ut("root",{ref:n,className:qn(R.root,u),elementType:H7,externalForwardedProps:$,ownerState:M});return le.jsx(G,ae({},ee))}),Qm=tj({createStyledComponent:kt("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Zr({props:e,name:"JoyStack"})});function G7(e){return Wr("MuiTab",e)}const W7=Fr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),Z7=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],q7=e=>{const{selected:t,disabled:n,focusVisible:i,variant:u,color:d,orientation:f}=e,a={root:["root",f,n&&"disabled",i&&"focusVisible",t&&"selected",u&&`variant${Ot(u)}`,d&&`color${Ot(d)}`]};return Vr(a,G7,{})},K7=kt(Ym,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),jb=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyTab"}),u=L.useContext(Gh),{action:d,children:f,disabled:a=!1,component:b="button",orientation:C="horizontal",variant:I="plain",color:k="neutral",disableIndicator:M=!1,indicatorPlacement:R=u?"bottom":"right",indicatorInset:$=!1,slots:G={},slotProps:ee={}}=i,F=ir(i,Z7),j=L.useRef(null),O=ln(j,n),{active:ne,focusVisible:Y,setFocusVisible:q,selected:ce,getRootProps:he}=q8(ae({},i,{rootRef:O}));L.useImperativeHandle(d,()=>({focusVisible:()=>{q(!0),j.current.focus()}}),[q]);const ze=ae({},i,{disableIndicator:M,indicatorPlacement:R,indicatorInset:$,orientation:C,row:u,active:ne,focusVisible:Y,disabled:a,selected:ce,variant:I,color:k}),J=q7(ze),Ee=ae({},F,{component:b,slots:G,slotProps:ee}),[Be,je]=Ut("root",{ref:n,elementType:K7,getSlotProps:he,externalForwardedProps:Ee,ownerState:ze,className:J.root});return le.jsx(o2.Provider,{value:C,children:le.jsx(Be,ae({},je,{children:f}))})}),u2=L.createContext("md");function X7(e){return Wr("MuiTabList",e)}Fr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const Y7=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],J7=e=>{const{orientation:t,size:n,variant:i,color:u}=e,d={root:["root",t,i&&`variant${Ot(i)}`,u&&`color${Ot(u)}`,n&&`size${Ot(n)}`]};return Vr(d,X7,{})},Q7=kt(Km,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;const i=(n=e.variants[t.variant])==null?void 0:n[t.color];return ae({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},c_,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(i==null?void 0:i.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&ae({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${W7.root}`]:{flex:t.tabFlex}})}),eG=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyTabList"}),u=L.useContext(u2),{isRtl:d,orientation:f,getRootProps:a,contextValue:b}=G8({rootRef:n}),{component:C="div",children:I,variant:k="plain",color:M="neutral",size:R,disableUnderline:$=!1,underlinePlacement:G=f==="horizontal"?"bottom":"right",tabFlex:ee,sticky:F,slots:j={},slotProps:O={}}=i,ne=ir(i,Y7),q=ae({},i,{isRtl:d,orientation:f,variant:k,color:M,size:R??u,sticky:F,tabFlex:ee,nesting:!1,disableUnderline:$,underlinePlacement:G}),ce=J7(q),he=ae({},ne,{component:C,slots:j,slotProps:O}),[ze,J]=Ut("root",{ref:n,elementType:Q7,getSlotProps:a,externalForwardedProps:he,ownerState:q,className:ce.root});return le.jsx(ze,ae({},J,{children:le.jsx(W8,{value:b,children:le.jsx(qm,{row:f==="horizontal",nested:!0,children:I})})}))});function tG(e){return Wr("MuiTabPanel",e)}Fr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const rG=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],nG=e=>{const{hidden:t,size:n,variant:i,color:u,orientation:d}=e,f={root:["root",t&&"hidden",n&&`size${Ot(n)}`,d,i&&`variant${Ot(i)}`,u&&`color${Ot(u)}`,n&&`size${Ot(n)}`]};return Vr(f,tG,{})},oG=kt("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;return ae({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(n=e.variants[t.variant])==null?void 0:n[t.color])}),Nb=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyTabPanel"}),{orientation:u}=a_()||{orientation:"horizontal"},d=L.useContext(u2),{children:f,value:a=0,component:b,color:C="neutral",variant:I="plain",size:k,slots:M={},slotProps:R={},keepMounted:$=!1}=i,G=ir(i,rG),{hidden:ee,getRootProps:F}=U8(ae({},i,{value:a})),O=ae({},i,{orientation:u,hidden:ee,size:k??d,color:C,variant:I}),ne=nG(O),Y=ae({},G,{component:b,slots:M,slotProps:R}),[q,ce]=Ut("root",{ref:n,elementType:oG,getSlotProps:F,externalForwardedProps:Y,additionalProps:{role:"tabpanel",ref:n,as:b},ownerState:O,className:ne.root});return $?le.jsx(q,ae({},ce,{children:f})):le.jsx(q,ae({},ce,{children:!ee&&f}))});function iG(e){return Wr("MuiTabs",e)}Fr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const aG=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],sG=e=>{const{orientation:t,variant:n,color:i,size:u}=e,d={root:["root",t,n&&`variant${Ot(n)}`,i&&`color${Ot(i)}`,u&&`size${Ot(u)}`]};return Vr(d,iG,{})},lG=kt("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,i;const u=(n=t.variants[e.variant])==null?void 0:n[e.color],{bgcolor:d,backgroundColor:f,background:a,p:b,padding:C}=Wh({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),I=sc(t,`palette.${d}`)||d||sc(t,`palette.${f}`)||f||a||(u==null?void 0:u.backgroundColor)||(u==null?void 0:u.background)||t.vars.palette.background.surface;return ae({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":I==="transparent"?"initial":I,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(i=t.variants[e.variant])==null?void 0:i[e.color],b!==void 0&&{"--Tabs-padding":b},C!==void 0&&{"--Tabs-padding":C})}),NE=L.forwardRef(function(t,n){const i=Zr({props:t,name:"JoyTabs"}),{children:u,value:d,defaultValue:f,orientation:a="horizontal",direction:b="ltr",component:C,variant:I="plain",color:k="neutral",size:M="md",slots:R={},slotProps:$={}}=i,G=ir(i,aG),ee=f||(d===void 0?0:void 0),{contextValue:F}=j8(ae({},i,{orientation:a,defaultValue:ee})),j=ae({},i,{orientation:a,direction:b,variant:I,color:k,size:M}),O=sG(j),ne=ae({},G,{component:C,slots:R,slotProps:$}),[Y,q]=Ut("root",{ref:n,elementType:lG,externalForwardedProps:ne,additionalProps:{ref:n,as:C},ownerState:j,className:O.root});return le.jsx(Y,ae({},q,{children:le.jsx(N8,{value:F,children:le.jsx(u2.Provider,{value:M,children:u})})}))});function cG(e){return Wr("MuiTooltip",e)}Fr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const uG=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],dG=e=>{const{arrow:t,variant:n,color:i,size:u,placement:d,touch:f}=e,a={root:["root",t&&"tooltipArrow",f&&"touch",u&&`size${Ot(u)}`,i&&`color${Ot(i)}`,n&&`variant${Ot(n)}`,`tooltipPlacement${Ot(d.split("-")[0])}`],arrow:["arrow"]};return Vr(a,cG,{})},hG=kt("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,i,u;const d=(n=t.variants[e.variant])==null?void 0:n[e.color];return ae({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],d,!d.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(i=e.placement)!=null&&i.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(u=e.placement)!=null&&u.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),pG=kt("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var n,i,u;const d=(n=e.variants[t.variant])==null?void 0:n[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(i=d==null?void 0:d.backgroundColor)!=null?i:e.vars.palette.background.surface,borderRightColor:(u=d==null?void 0:d.backgroundColor)!=null?u:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${d.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let Hy=!1;const VE=new Fm;let xf={x:0,y:0};function UE(e,t){return n=>{t&&t(n),e(n)}}function HE(e,t){return(n,...i)=>{t&&t(n,...i),e(n,...i)}}const fG=L.forwardRef(function(t,n){var i;const u=Zr({props:t,name:"JoyTooltip"}),{children:d,className:f,component:a,arrow:b=!1,describeChild:C=!1,disableFocusListener:I=!1,disableHoverListener:k=!1,disableInteractive:M=!1,disableTouchListener:R=!1,enterDelay:$=100,enterNextDelay:G=0,enterTouchDelay:ee=700,followCursor:F=!1,id:j,leaveDelay:O=0,leaveTouchDelay:ne=1500,onClose:Y,onOpen:q,open:ce,disablePortal:he,direction:ze,keepMounted:J,modifiers:Ee,placement:Be="bottom",title:je,color:ot="neutral",variant:He="solid",size:De="md",slots:Ge={},slotProps:Ue={}}=u,Ze=ir(u,uG),[at,pt]=L.useState(),[ct,Ht]=L.useState(null),Dt=L.useRef(!1),Nt=M||F,tr=Py(),Tt=Py(),st=Py(),Ct=Py(),[Mt,qt]=uh({controlled:ce,default:!1,name:"Tooltip",state:"open"});let nr=Mt;const ur=Ri(j),gr=L.useRef(void 0),Kt=Xl(()=>{gr.current!==void 0&&(document.body.style.WebkitUserSelect=gr.current,gr.current=void 0),Ct.clear()});L.useEffect(()=>Kt,[Kt]);const Lt=wt=>{VE.clear(),Hy=!0,qt(!0),q&&!nr&&q(wt)},Qt=Xl(wt=>{VE.start(800+O,()=>{Hy=!1}),qt(!1),Y&&nr&&Y(wt),tr.start(150,()=>{Dt.current=!1})}),Vt=wt=>{Dt.current&&wt.type!=="touchstart"||(at&&at.removeAttribute("title"),Tt.clear(),st.clear(),$||Hy&&G?Tt.start(Hy?G:$,()=>{Lt(wt)}):Lt(wt))},mr=wt=>{Tt.clear(),st.start(O,()=>{Qt(wt)})},{isFocusVisibleRef:kr,onBlur:Ur,onFocus:Lr,ref:pr}=XS(),[,$r]=L.useState(!1),jr=wt=>{Ur(wt),kr.current===!1&&($r(!1),mr(wt))},br=wt=>{at||pt(wt.currentTarget),Lr(wt),kr.current===!0&&($r(!0),Vt(wt))},dr=wt=>{Dt.current=!0;const ge=d.props;ge.onTouchStart&&ge.onTouchStart(wt)},ar=wt=>{dr(wt),st.clear(),tr.clear(),Kt(),gr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ct.start(ee,()=>{document.body.style.WebkitUserSelect=gr.current,Vt(wt)})},Jt=wt=>{d.props.onTouchEnd&&d.props.onTouchEnd(wt),Kt(),st.start(ne,()=>{Qt(wt)})};L.useEffect(()=>{if(!nr)return;function wt(ge){(ge.key==="Escape"||ge.key==="Esc")&&Qt(ge)}return document.addEventListener("keydown",wt),()=>{document.removeEventListener("keydown",wt)}},[Qt,nr]);const yr=ln(pt,n),wr=ln(pr,yr),_e=ln(YS(d),wr);typeof je!="number"&&!je&&(nr=!1);const X=L.useRef(null),te=wt=>{const ge=d.props;ge.onMouseMove&&ge.onMouseMove(wt),xf={x:wt.clientX,y:wt.clientY},X.current&&X.current.update()},H={},oe=typeof je=="string";C?(H.title=!nr&&oe&&!k?je:null,H["aria-describedby"]=nr?ur:null):(H["aria-label"]=oe?je:null,H["aria-labelledby"]=nr&&!oe?ur:null);const xe=ae({},H,Ze,{component:a},d.props,{className:qn(f,d.props.className),onTouchStart:dr,ref:_e},F?{onMouseMove:te}:{}),Ae={};R||(xe.onTouchStart=ar,xe.onTouchEnd=Jt),k||(xe.onMouseOver=UE(Vt,xe.onMouseOver),xe.onMouseLeave=UE(mr,xe.onMouseLeave),Nt||(Ae.onMouseOver=Vt,Ae.onMouseLeave=mr)),I||(xe.onFocus=HE(br,xe.onFocus),xe.onBlur=HE(jr,xe.onBlur),Nt||(Ae.onFocus=br,Ae.onBlur=jr));const Fe=ae({},u,{arrow:b,disableInteractive:Nt,placement:Be,touch:Dt.current,color:ot,variant:He,size:De}),we=dG(Fe),qe=ae({},Ze,{component:a,slots:Ge,slotProps:Ue}),We=L.useMemo(()=>[{name:"arrow",enabled:!!ct,options:{element:ct,padding:6}},{name:"offset",options:{offset:[0,10]}},...Ee||[]],[ct,Ee]),[$e,nt]=Ut("root",{additionalProps:ae({id:ur,popperRef:X,placement:Be,anchorEl:F?{getBoundingClientRect:()=>({top:xf.y,left:xf.x,right:xf.x,bottom:xf.y,width:0,height:0})}:at,open:at?nr:!1,disablePortal:he,keepMounted:J,direction:ze,modifiers:We},Ae),ref:null,className:we.root,elementType:hG,externalForwardedProps:qe,ownerState:Fe}),[Me,mt]=Ut("arrow",{ref:Ht,className:we.arrow,elementType:pG,externalForwardedProps:qe,ownerState:Fe});return le.jsxs(L.Fragment,{children:[L.isValidElement(d)&&L.cloneElement(d,xe),le.jsxs($e,ae({},nt,!((i=u.slots)!=null&&i.root)&&{as:i_,slots:{root:a||"div"}},{children:[je,b?le.jsx(Me,ae({},mt)):null]}))]})});var TL,GE=Gm;TL=GE.createRoot,GE.hydrateRoot;var d2={};Object.defineProperty(d2,"__esModule",{value:!0});d2.parse=bG;d2.serialize=wG;const mG=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,gG=/^[\u0021-\u003A\u003C-\u007E]*$/,yG=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,vG=/^[\u0020-\u003A\u003D-\u007E]*$/,_G=Object.prototype.toString,xG=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function bG(e,t){const n=new xG,i=e.length;if(i<2)return n;const u=(t==null?void 0:t.decode)||SG;let d=0;do{const f=e.indexOf("=",d);if(f===-1)break;const a=e.indexOf(";",d),b=a===-1?i:a;if(f>b){d=e.lastIndexOf(";",f-1)+1;continue}const C=WE(e,d,f),I=ZE(e,f,C),k=e.slice(C,I);if(n[k]===void 0){let M=WE(e,f+1,b),R=ZE(e,b,M);const $=u(e.slice(M,R));n[k]=$}d=b+1}while(d<i);return n}function WE(e,t,n){do{const i=e.charCodeAt(t);if(i!==32&&i!==9)return t}while(++t<n);return n}function ZE(e,t,n){for(;t>n;){const i=e.charCodeAt(--t);if(i!==32&&i!==9)return t+1}return n}function wG(e,t,n){const i=(n==null?void 0:n.encode)||encodeURIComponent;if(!mG.test(e))throw new TypeError(`argument name is invalid: ${e}`);const u=i(t);if(!gG.test(u))throw new TypeError(`argument val is invalid: ${t}`);let d=e+"="+u;if(!n)return d;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);d+="; Max-Age="+n.maxAge}if(n.domain){if(!yG.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);d+="; Domain="+n.domain}if(n.path){if(!vG.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);d+="; Path="+n.path}if(n.expires){if(!CG(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);d+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(d+="; HttpOnly"),n.secure&&(d+="; Secure"),n.partitioned&&(d+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":d+="; Priority=Low";break;case"medium":d+="; Priority=Medium";break;case"high":d+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"none":d+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return d}function SG(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function CG(e){return _G.call(e)==="[object Date]"}/**
 * react-router v7.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var IL=e=>{throw TypeError(e)},PG=(e,t,n)=>t.has(e)||IL("Cannot "+n),Vb=(e,t,n)=>(PG(e,t,"read from private field"),n?n.call(e):t.get(e)),TG=(e,t,n)=>t.has(e)?IL("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),qE="popstate";function IG(e={}){function t(i,u){let{pathname:d,search:f,hash:a}=i.location;return Tm("",{pathname:d,search:f,hash:a},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(i,u){return typeof u=="string"?u:uc(u)}return kG(t,n,null,e)}function Rr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EG(){return Math.random().toString(36).substring(2,10)}function KE(e,t){return{usr:e.state,key:e.key,idx:t}}function Tm(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vc(t):t,state:n,key:t&&t.key||i||EG()}}function uc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function vc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function kG(e,t,n,i={}){let{window:u=document.defaultView,v5Compat:d=!1}=i,f=u.history,a="POP",b=null,C=I();C==null&&(C=0,f.replaceState({...f.state,idx:C},""));function I(){return(f.state||{idx:null}).idx}function k(){a="POP";let ee=I(),F=ee==null?null:ee-C;C=ee,b&&b({action:a,location:G.location,delta:F})}function M(ee,F){a="PUSH";let j=Tm(G.location,ee,F);C=I()+1;let O=KE(j,C),ne=G.createHref(j);try{f.pushState(O,"",ne)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;u.location.assign(ne)}d&&b&&b({action:a,location:G.location,delta:1})}function R(ee,F){a="REPLACE";let j=Tm(G.location,ee,F);C=I();let O=KE(j,C),ne=G.createHref(j);f.replaceState(O,"",ne),d&&b&&b({action:a,location:G.location,delta:0})}function $(ee){return EL(ee)}let G={get action(){return a},get location(){return e(u,f)},listen(ee){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(qE,k),b=ee,()=>{u.removeEventListener(qE,k),b=null}},createHref(ee){return t(u,ee)},createURL:$,encodeLocation(ee){let F=$(ee);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:M,replace:R,go(ee){return f.go(ee)}};return G}function EL(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Rr(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:uc(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}var Df,XE=class{constructor(e){if(TG(this,Df,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(Vb(this,Df).has(e))return Vb(this,Df).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){Vb(this,Df).set(e,t)}};Df=new WeakMap;var MG=new Set(["lazy","caseSensitive","path","id","index","children"]);function RG(e){return MG.has(e)}var AG=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function zG(e){return AG.has(e)}function DG(e){return e.index===!0}function s0(e,t,n=[],i={}){return e.map((u,d)=>{let f=[...n,String(d)],a=typeof u.id=="string"?u.id:f.join("-");if(Rr(u.index!==!0||!u.children,"Cannot specify children on an index route"),Rr(!i[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),DG(u)){let b={...u,...t(u),id:a};return i[a]=b,b}else{let b={...u,...t(u),id:a,children:void 0};return i[a]=b,u.children&&(b.children=s0(u.children,t,f,i)),b}})}function Kl(e,t,n="/"){return _v(e,t,n,!1)}function _v(e,t,n,i){let u=typeof t=="string"?vc(t):t,d=Ca(u.pathname||"/",n);if(d==null)return null;let f=kL(e);$G(f);let a=null;for(let b=0;a==null&&b<f.length;++b){let C=ZG(d);a=GG(f[b],C,i)}return a}function LG(e,t){let{route:n,pathname:i,params:u}=e;return{id:n.id,pathname:i,params:u,data:t[n.id],handle:n.handle}}function kL(e,t=[],n=[],i=""){let u=(d,f,a)=>{let b={relativePath:a===void 0?d.path||"":a,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};b.relativePath.startsWith("/")&&(Rr(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length));let C=ws([i,b.relativePath]),I=n.concat(b);d.children&&d.children.length>0&&(Rr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),kL(d.children,t,I,C)),!(d.path==null&&!d.index)&&t.push({path:C,score:UG(C,d.index),routesMeta:I})};return e.forEach((d,f)=>{var a;if(d.path===""||!((a=d.path)!=null&&a.includes("?")))u(d,f);else for(let b of ML(d.path))u(d,f,b)}),t}function ML(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(i.length===0)return u?[d,""]:[d];let f=ML(i.join("/")),a=[];return a.push(...f.map(b=>b===""?d:[d,b].join("/"))),u&&a.push(...f),a.map(b=>e.startsWith("/")&&b===""?"/":b)}function $G(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:HG(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var OG=/^:[\w-]+$/,BG=3,FG=2,jG=1,NG=10,VG=-2,YE=e=>e==="*";function UG(e,t){let n=e.split("/"),i=n.length;return n.some(YE)&&(i+=VG),t&&(i+=FG),n.filter(u=>!YE(u)).reduce((u,d)=>u+(OG.test(d)?BG:d===""?jG:NG),i)}function HG(e,t){return e.length===t.length&&e.slice(0,-1).every((i,u)=>i===t[u])?e[e.length-1]-t[t.length-1]:0}function GG(e,t,n=!1){let{routesMeta:i}=e,u={},d="/",f=[];for(let a=0;a<i.length;++a){let b=i[a],C=a===i.length-1,I=d==="/"?t:t.slice(d.length)||"/",k=l0({path:b.relativePath,caseSensitive:b.caseSensitive,end:C},I),M=b.route;if(!k&&C&&n&&!i[i.length-1].route.index&&(k=l0({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},I)),!k)return null;Object.assign(u,k.params),f.push({params:u,pathname:ws([d,k.pathname]),pathnameBase:XG(ws([d,k.pathnameBase])),route:M}),k.pathnameBase!=="/"&&(d=ws([d,k.pathnameBase]))}return f}function l0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=WG(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let d=u[0],f=d.replace(/(.)\/+$/,"$1"),a=u.slice(1);return{params:i.reduce((C,{paramName:I,isOptional:k},M)=>{if(I==="*"){let $=a[M]||"";f=d.slice(0,d.length-$.length).replace(/(.)\/+$/,"$1")}const R=a[M];return k&&!R?C[I]=void 0:C[I]=(R||"").replace(/%2F/g,"/"),C},{}),pathname:d,pathnameBase:f,pattern:e}}function WG(e,t=!1,n=!0){Qn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,a,b)=>(i.push({paramName:a,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),i]}function ZG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ca(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function qG(e,t="/"){let{pathname:n,search:i="",hash:u=""}=typeof e=="string"?vc(e):e;return{pathname:n?n.startsWith("/")?n:KG(n,t):t,search:YG(i),hash:JG(u)}}function KG(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function Ub(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RL(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function h2(e){let t=RL(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function p2(e,t,n,i=!1){let u;typeof e=="string"?u=vc(e):(u={...e},Rr(!u.pathname||!u.pathname.includes("?"),Ub("?","pathname","search",u)),Rr(!u.pathname||!u.pathname.includes("#"),Ub("#","pathname","hash",u)),Rr(!u.search||!u.search.includes("#"),Ub("#","search","hash",u)));let d=e===""||u.pathname==="",f=d?"/":u.pathname,a;if(f==null)a=n;else{let k=t.length-1;if(!i&&f.startsWith("..")){let M=f.split("/");for(;M[0]==="..";)M.shift(),k-=1;u.pathname=M.join("/")}a=k>=0?t[k]:"/"}let b=qG(u,a),C=f&&f!=="/"&&f.endsWith("/"),I=(d||f===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(C||I)&&(b.pathname+="/"),b}var ws=e=>e.join("/").replace(/\/\/+/g,"/"),XG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),YG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JG=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,c0=class{constructor(e,t,n,i=!1){this.status=e,this.statusText=t||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Im(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var AL=["POST","PUT","PATCH","DELETE"],QG=new Set(AL),eW=["GET",...AL],tW=new Set(eW),rW=new Set([301,302,303,307,308]),nW=new Set([307,308]),Hb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oW={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},f2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iW=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),zL="remix-router-transitions",DL=Symbol("ResetLoaderData");function aW(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";Rr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=e.hydrationRouteProperties||[],u=e.mapRouteProperties||iW,d={},f=s0(e.routes,u,void 0,d),a,b=e.basename||"/",C=e.dataStrategy||dW,I={unstable_middleware:!1,...e.future},k=null,M=new Set,R=null,$=null,G=null,ee=e.hydrationData!=null,F=Kl(f,e.history.location,b),j=!1,O=null,ne;if(F==null&&!e.patchRoutesOnNavigation){let ge=ha(404,{pathname:e.history.location.pathname}),{matches:Re,route:Ve}=ck(f);ne=!0,F=Re,O={[Ve.id]:ge}}else if(F&&!e.hydrationData&&nt(F,f,e.history.location.pathname).active&&(F=null),F)if(F.some(ge=>ge.route.lazy))ne=!1;else if(!F.some(ge=>ge.route.loader))ne=!0;else{let ge=e.hydrationData?e.hydrationData.loaderData:null,Re=e.hydrationData?e.hydrationData.errors:null;if(Re){let Ve=F.findIndex(ut=>Re[ut.route.id]!==void 0);ne=F.slice(0,Ve+1).every(ut=>!nS(ut.route,ge,Re))}else ne=F.every(Ve=>!nS(Ve.route,ge,Re))}else{ne=!1,F=[];let ge=nt(null,f,e.history.location.pathname);ge.active&&ge.matches&&(j=!0,F=ge.matches)}let Y,q={historyAction:e.history.action,location:e.history.location,matches:F,initialized:ne,navigation:Hb,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||O,fetchers:new Map,blockers:new Map},ce="POP",he=!1,ze,J=!1,Ee=new Map,Be=null,je=!1,ot=!1,He=new Set,De=new Map,Ge=0,Ue=-1,Ze=new Map,at=new Set,pt=new Map,ct=new Map,Ht=new Set,Dt=new Map,Nt,tr=null;function Tt(){if(k=e.history.listen(({action:ge,location:Re,delta:Ve})=>{if(Nt){Nt(),Nt=void 0;return}Qn(Dt.size===0||Ve!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ut=Ae({currentLocation:q.location,nextLocation:Re,historyAction:ge});if(ut&&Ve!=null){let vt=new Promise(It=>{Nt=It});e.history.go(Ve*-1),xe(ut,{state:"blocked",location:Re,proceed(){xe(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),vt.then(()=>e.history.go(Ve))},reset(){let It=new Map(q.blockers);It.set(ut,bf),Mt({blockers:It})}});return}return gr(ge,Re)}),n){wW(t,Ee);let ge=()=>SW(t,Ee);t.addEventListener("pagehide",ge),Be=()=>t.removeEventListener("pagehide",ge)}return q.initialized||gr("POP",q.location,{initialHydration:!0}),Y}function st(){k&&k(),Be&&Be(),M.clear(),ze&&ze.abort(),q.fetchers.forEach((ge,Re)=>Jt(Re)),q.blockers.forEach((ge,Re)=>oe(Re))}function Ct(ge){return M.add(ge),()=>M.delete(ge)}function Mt(ge,Re={}){q={...q,...ge};let Ve=[],ut=[];q.fetchers.forEach((vt,It)=>{vt.state==="idle"&&(Ht.has(It)?Ve.push(It):ut.push(It))}),Ht.forEach(vt=>{!q.fetchers.has(vt)&&!De.has(vt)&&Ve.push(vt)}),[...M].forEach(vt=>vt(q,{deletedFetchers:Ve,viewTransitionOpts:Re.viewTransitionOpts,flushSync:Re.flushSync===!0})),Ve.forEach(vt=>Jt(vt)),ut.forEach(vt=>q.fetchers.delete(vt))}function qt(ge,Re,{flushSync:Ve}={}){var Je,Xt;let ut=q.actionData!=null&&q.navigation.formMethod!=null&&Wi(q.navigation.formMethod)&&q.navigation.state==="loading"&&((Je=ge.state)==null?void 0:Je._isRedirect)!==!0,vt;Re.actionData?Object.keys(Re.actionData).length>0?vt=Re.actionData:vt=null:ut?vt=q.actionData:vt=null;let It=Re.loaderData?sk(q.loaderData,Re.loaderData,Re.matches||[],Re.errors):q.loaderData,bt=q.blockers;bt.size>0&&(bt=new Map(bt),bt.forEach((zt,lr)=>bt.set(lr,bf)));let xt=he===!0||q.navigation.formMethod!=null&&Wi(q.navigation.formMethod)&&((Xt=ge.state)==null?void 0:Xt._isRedirect)!==!0;a&&(f=a,a=void 0),je||ce==="POP"||(ce==="PUSH"?e.history.push(ge,ge.state):ce==="REPLACE"&&e.history.replace(ge,ge.state));let Bt;if(ce==="POP"){let zt=Ee.get(q.location.pathname);zt&&zt.has(ge.pathname)?Bt={currentLocation:q.location,nextLocation:ge}:Ee.has(ge.pathname)&&(Bt={currentLocation:ge,nextLocation:q.location})}else if(J){let zt=Ee.get(q.location.pathname);zt?zt.add(ge.pathname):(zt=new Set([ge.pathname]),Ee.set(q.location.pathname,zt)),Bt={currentLocation:q.location,nextLocation:ge}}Mt({...Re,actionData:vt,loaderData:It,historyAction:ce,location:ge,initialized:!0,navigation:Hb,revalidation:"idle",restoreScrollPosition:$e(ge,Re.matches||q.matches),preventScrollReset:xt,blockers:bt},{viewTransitionOpts:Bt,flushSync:Ve===!0}),ce="POP",he=!1,J=!1,je=!1,ot=!1,tr==null||tr.resolve(),tr=null}async function nr(ge,Re){if(typeof ge=="number"){e.history.go(ge);return}let Ve=rS(q.location,q.matches,b,ge,Re==null?void 0:Re.fromRouteId,Re==null?void 0:Re.relative),{path:ut,submission:vt,error:It}=JE(!1,Ve,Re),bt=q.location,xt=Tm(q.location,ut,Re&&Re.state);xt={...xt,...e.history.encodeLocation(xt)};let Bt=Re&&Re.replace!=null?Re.replace:void 0,Je="PUSH";Bt===!0?Je="REPLACE":Bt===!1||vt!=null&&Wi(vt.formMethod)&&vt.formAction===q.location.pathname+q.location.search&&(Je="REPLACE");let Xt=Re&&"preventScrollReset"in Re?Re.preventScrollReset===!0:void 0,zt=(Re&&Re.flushSync)===!0,lr=Ae({currentLocation:bt,nextLocation:xt,historyAction:Je});if(lr){xe(lr,{state:"blocked",location:xt,proceed(){xe(lr,{state:"proceeding",proceed:void 0,reset:void 0,location:xt}),nr(ge,Re)},reset(){let rt=new Map(q.blockers);rt.set(lr,bf),Mt({blockers:rt})}});return}await gr(Je,xt,{submission:vt,pendingError:It,preventScrollReset:Xt,replace:Re&&Re.replace,enableViewTransition:Re&&Re.viewTransition,flushSync:zt})}function ur(){tr||(tr=CW()),jr(),Mt({revalidation:"loading"});let ge=tr.promise;return q.navigation.state==="submitting"?ge:q.navigation.state==="idle"?(gr(q.historyAction,q.location,{startUninterruptedRevalidation:!0}),ge):(gr(ce||q.historyAction,q.navigation.location,{overrideNavigation:q.navigation,enableViewTransition:J===!0}),ge)}async function gr(ge,Re,Ve){ze&&ze.abort(),ze=null,ce=ge,je=(Ve&&Ve.startUninterruptedRevalidation)===!0,We(q.location,q.matches),he=(Ve&&Ve.preventScrollReset)===!0,J=(Ve&&Ve.enableViewTransition)===!0;let ut=a||f,vt=Ve&&Ve.overrideNavigation,It=Ve!=null&&Ve.initialHydration&&q.matches&&q.matches.length>0&&!j?q.matches:Kl(ut,Re,b),bt=(Ve&&Ve.flushSync)===!0;if(It&&q.initialized&&!ot&&yW(q.location,Re)&&!(Ve&&Ve.submission&&Wi(Ve.submission.formMethod))){qt(Re,{matches:It},{flushSync:bt});return}let xt=nt(It,ut,Re.pathname);if(xt.active&&xt.matches&&(It=xt.matches),!It){let{error:dt,notFoundMatches:_t,route:$t}=Fe(Re.pathname);qt(Re,{matches:_t,loaderData:{},errors:{[$t.id]:dt}},{flushSync:bt});return}ze=new AbortController;let Bt=Wd(e.history,Re,ze.signal,Ve&&Ve.submission),Je=new XE(e.unstable_getContext?await e.unstable_getContext():void 0),Xt;if(Ve&&Ve.pendingError)Xt=[pu(It).route.id,{type:"error",error:Ve.pendingError}];else if(Ve&&Ve.submission&&Wi(Ve.submission.formMethod)){let dt=await Kt(Bt,Re,Ve.submission,It,Je,xt.active,Ve&&Ve.initialHydration===!0,{replace:Ve.replace,flushSync:bt});if(dt.shortCircuited)return;if(dt.pendingActionResult){let[_t,$t]=dt.pendingActionResult;if(Gi($t)&&Im($t.error)&&$t.error.status===404){ze=null,qt(Re,{matches:dt.matches,loaderData:{},errors:{[_t]:$t.error}});return}}It=dt.matches||It,Xt=dt.pendingActionResult,vt=Gb(Re,Ve.submission),bt=!1,xt.active=!1,Bt=Wd(e.history,Bt.url,Bt.signal)}let{shortCircuited:zt,matches:lr,loaderData:rt,errors:Ie}=await Lt(Bt,Re,It,Je,xt.active,vt,Ve&&Ve.submission,Ve&&Ve.fetcherSubmission,Ve&&Ve.replace,Ve&&Ve.initialHydration===!0,bt,Xt);zt||(ze=null,qt(Re,{matches:lr||It,...lk(Xt),loaderData:rt,errors:Ie}))}async function Kt(ge,Re,Ve,ut,vt,It,bt,xt={}){jr();let Bt=xW(Re,Ve);if(Mt({navigation:Bt},{flushSync:xt.flushSync===!0}),It){let zt=await Me(ut,Re.pathname,ge.signal);if(zt.type==="aborted")return{shortCircuited:!0};if(zt.type==="error"){let lr=pu(zt.partialMatches).route.id;return{matches:zt.partialMatches,pendingActionResult:[lr,{type:"error",error:zt.error}]}}else if(zt.matches)ut=zt.matches;else{let{notFoundMatches:lr,error:rt,route:Ie}=Fe(Re.pathname);return{matches:lr,pendingActionResult:[Ie.id,{type:"error",error:rt}]}}}let Je,Xt=Lf(ut,Re);if(!Xt.route.action&&!Xt.route.lazy)Je={type:"error",error:ha(405,{method:ge.method,pathname:Re.pathname,routeId:Xt.route.id})};else{let zt=vh(u,d,ge,ut,Xt,bt?[]:i,vt),lr=await pr(ge,zt,vt,null);if(Je=lr[Xt.route.id],!Je){for(let rt of ut)if(lr[rt.route.id]){Je=lr[rt.route.id];break}}if(ge.signal.aborted)return{shortCircuited:!0}}if(yu(Je)){let zt;return xt&&xt.replace!=null?zt=xt.replace:zt=ok(Je.response.headers.get("Location"),new URL(ge.url),b)===q.location.pathname+q.location.search,await Lr(ge,Je,!0,{submission:Ve,replace:zt}),{shortCircuited:!0}}if(Gi(Je)){let zt=pu(ut,Xt.route.id);return(xt&&xt.replace)!==!0&&(ce="PUSH"),{matches:ut,pendingActionResult:[zt.route.id,Je,Xt.route.id]}}return{matches:ut,pendingActionResult:[Xt.route.id,Je]}}async function Lt(ge,Re,Ve,ut,vt,It,bt,xt,Bt,Je,Xt,zt){let lr=It||Gb(Re,bt),rt=bt||xt||dk(lr),Ie=!je&&!Je;if(vt){if(Ie){let Xr=Qt(zt);Mt({navigation:lr,...Xr!==void 0?{actionData:Xr}:{}},{flushSync:Xt})}let Ar=await Me(Ve,Re.pathname,ge.signal);if(Ar.type==="aborted")return{shortCircuited:!0};if(Ar.type==="error"){let Xr=pu(Ar.partialMatches).route.id;return{matches:Ar.partialMatches,loaderData:{},errors:{[Xr]:Ar.error}}}else if(Ar.matches)Ve=Ar.matches;else{let{error:Xr,notFoundMatches:jt,route:Bn}=Fe(Re.pathname);return{matches:jt,loaderData:{},errors:{[Bn.id]:Xr}}}}let dt=a||f,{dsMatches:_t,revalidatingFetchers:$t}=QE(ge,ut,u,d,e.history,q,Ve,rt,Re,Je?[]:i,Je===!0,ot,He,Ht,pt,at,dt,b,e.patchRoutesOnNavigation!=null,zt);if(Ue=++Ge,!e.dataStrategy&&!_t.some(Ar=>Ar.shouldLoad)&&$t.length===0){let Ar=X();return qt(Re,{matches:Ve,loaderData:{},errors:zt&&Gi(zt[1])?{[zt[0]]:zt[1].error}:null,...lk(zt),...Ar?{fetchers:new Map(q.fetchers)}:{}},{flushSync:Xt}),{shortCircuited:!0}}if(Ie){let Ar={};if(!vt){Ar.navigation=lr;let Xr=Qt(zt);Xr!==void 0&&(Ar.actionData=Xr)}$t.length>0&&(Ar.fetchers=Vt($t)),Mt(Ar,{flushSync:Xt})}$t.forEach(Ar=>{wr(Ar.key),Ar.controller&&De.set(Ar.key,Ar.controller)});let Or=()=>$t.forEach(Ar=>wr(Ar.key));ze&&ze.signal.addEventListener("abort",Or);let{loaderResults:xr,fetcherResults:rr}=await $r(_t,$t,ge,ut);if(ge.signal.aborted)return{shortCircuited:!0};ze&&ze.signal.removeEventListener("abort",Or),$t.forEach(Ar=>De.delete(Ar.key));let sn=Gy(xr);if(sn)return await Lr(ge,sn.result,!0,{replace:Bt}),{shortCircuited:!0};if(sn=Gy(rr),sn)return at.add(sn.key),await Lr(ge,sn.result,!0,{replace:Bt}),{shortCircuited:!0};let{loaderData:Lo,errors:rn}=ak(q,Ve,xr,zt,$t,rr);Je&&q.errors&&(rn={...q.errors,...rn});let zi=X(),So=te(Ue),Co=zi||So||$t.length>0;return{matches:Ve,loaderData:Lo,errors:rn,...Co?{fetchers:new Map(q.fetchers)}:{}}}function Qt(ge){if(ge&&!Gi(ge[1]))return{[ge[0]]:ge[1].data};if(q.actionData)return Object.keys(q.actionData).length===0?null:q.actionData}function Vt(ge){return ge.forEach(Re=>{let Ve=q.fetchers.get(Re.key),ut=wf(void 0,Ve?Ve.data:void 0);q.fetchers.set(Re.key,ut)}),new Map(q.fetchers)}async function mr(ge,Re,Ve,ut){wr(ge);let vt=(ut&&ut.flushSync)===!0,It=a||f,bt=rS(q.location,q.matches,b,Ve,Re,ut==null?void 0:ut.relative),xt=Kl(It,bt,b),Bt=nt(xt,It,bt);if(Bt.active&&Bt.matches&&(xt=Bt.matches),!xt){dr(ge,Re,ha(404,{pathname:bt}),{flushSync:vt});return}let{path:Je,submission:Xt,error:zt}=JE(!0,bt,ut);if(zt){dr(ge,Re,zt,{flushSync:vt});return}let lr=Lf(xt,Je),rt=new XE(e.unstable_getContext?await e.unstable_getContext():void 0),Ie=(ut&&ut.preventScrollReset)===!0;if(Xt&&Wi(Xt.formMethod)){await kr(ge,Re,Je,lr,xt,rt,Bt.active,vt,Ie,Xt);return}pt.set(ge,{routeId:Re,path:Je}),await Ur(ge,Re,Je,lr,xt,rt,Bt.active,vt,Ie,Xt)}async function kr(ge,Re,Ve,ut,vt,It,bt,xt,Bt,Je){jr(),pt.delete(ge);function Xt(zr){if(!zr.route.action&&!zr.route.lazy){let Pn=ha(405,{method:Je.formMethod,pathname:Ve,routeId:Re});return dr(ge,Re,Pn,{flushSync:xt}),!0}return!1}if(!bt&&Xt(ut))return;let zt=q.fetchers.get(ge);br(ge,bW(Je,zt),{flushSync:xt});let lr=new AbortController,rt=Wd(e.history,Ve,lr.signal,Je);if(bt){let zr=await Me(vt,Ve,rt.signal,ge);if(zr.type==="aborted")return;if(zr.type==="error"){dr(ge,Re,zr.error,{flushSync:xt});return}else if(zr.matches){if(vt=zr.matches,ut=Lf(vt,Ve),Xt(ut))return}else{dr(ge,Re,ha(404,{pathname:Ve}),{flushSync:xt});return}}De.set(ge,lr);let Ie=Ge,dt=vh(u,d,rt,vt,ut,i,It),$t=(await pr(rt,dt,It,ge))[ut.route.id];if(rt.signal.aborted){De.get(ge)===lr&&De.delete(ge);return}if(Ht.has(ge)){if(yu($t)||Gi($t)){br(ge,Vl(void 0));return}}else{if(yu($t))if(De.delete(ge),Ue>Ie){br(ge,Vl(void 0));return}else return at.add(ge),br(ge,wf(Je)),Lr(rt,$t,!1,{fetcherSubmission:Je,preventScrollReset:Bt});if(Gi($t)){dr(ge,Re,$t.error);return}}let Or=q.navigation.location||q.location,xr=Wd(e.history,Or,lr.signal),rr=a||f,sn=q.navigation.state!=="idle"?Kl(rr,q.navigation.location,b):q.matches;Rr(sn,"Didn't find any matches after fetcher action");let Lo=++Ge;Ze.set(ge,Lo);let rn=wf(Je,$t.data);q.fetchers.set(ge,rn);let{dsMatches:zi,revalidatingFetchers:So}=QE(xr,It,u,d,e.history,q,sn,Je,Or,i,!1,ot,He,Ht,pt,at,rr,b,e.patchRoutesOnNavigation!=null,[ut.route.id,$t]);So.filter(zr=>zr.key!==ge).forEach(zr=>{let Pn=zr.key,$o=q.fetchers.get(Pn),li=wf(void 0,$o?$o.data:void 0);q.fetchers.set(Pn,li),wr(Pn),zr.controller&&De.set(Pn,zr.controller)}),Mt({fetchers:new Map(q.fetchers)});let Co=()=>So.forEach(zr=>wr(zr.key));lr.signal.addEventListener("abort",Co);let{loaderResults:Ar,fetcherResults:Xr}=await $r(zi,So,xr,It);if(lr.signal.aborted)return;if(lr.signal.removeEventListener("abort",Co),Ze.delete(ge),De.delete(ge),So.forEach(zr=>De.delete(zr.key)),q.fetchers.has(ge)){let zr=Vl($t.data);q.fetchers.set(ge,zr)}let jt=Gy(Ar);if(jt)return Lr(xr,jt.result,!1,{preventScrollReset:Bt});if(jt=Gy(Xr),jt)return at.add(jt.key),Lr(xr,jt.result,!1,{preventScrollReset:Bt});let{loaderData:Bn,errors:nn}=ak(q,sn,Ar,void 0,So,Xr);te(Lo),q.navigation.state==="loading"&&Lo>Ue?(Rr(ce,"Expected pending action"),ze&&ze.abort(),qt(q.navigation.location,{matches:sn,loaderData:Bn,errors:nn,fetchers:new Map(q.fetchers)})):(Mt({errors:nn,loaderData:sk(q.loaderData,Bn,sn,nn),fetchers:new Map(q.fetchers)}),ot=!1)}async function Ur(ge,Re,Ve,ut,vt,It,bt,xt,Bt,Je){let Xt=q.fetchers.get(ge);br(ge,wf(Je,Xt?Xt.data:void 0),{flushSync:xt});let zt=new AbortController,lr=Wd(e.history,Ve,zt.signal);if(bt){let $t=await Me(vt,Ve,lr.signal,ge);if($t.type==="aborted")return;if($t.type==="error"){dr(ge,Re,$t.error,{flushSync:xt});return}else if($t.matches)vt=$t.matches,ut=Lf(vt,Ve);else{dr(ge,Re,ha(404,{pathname:Ve}),{flushSync:xt});return}}De.set(ge,zt);let rt=Ge,Ie=vh(u,d,lr,vt,ut,i,It),_t=(await pr(lr,Ie,It,ge))[ut.route.id];if(De.get(ge)===zt&&De.delete(ge),!lr.signal.aborted){if(Ht.has(ge)){br(ge,Vl(void 0));return}if(yu(_t))if(Ue>rt){br(ge,Vl(void 0));return}else{at.add(ge),await Lr(lr,_t,!1,{preventScrollReset:Bt});return}if(Gi(_t)){dr(ge,Re,_t.error);return}br(ge,Vl(_t.data))}}async function Lr(ge,Re,Ve,{submission:ut,fetcherSubmission:vt,preventScrollReset:It,replace:bt}={}){Re.response.headers.has("X-Remix-Revalidate")&&(ot=!0);let xt=Re.response.headers.get("Location");Rr(xt,"Expected a Location header on the redirect Response"),xt=ok(xt,new URL(ge.url),b);let Bt=Tm(q.location,xt,{_isRedirect:!0});if(n){let Ie=!1;if(Re.response.headers.has("X-Remix-Reload-Document"))Ie=!0;else if(f2.test(xt)){const dt=EL(xt,!0);Ie=dt.origin!==t.location.origin||Ca(dt.pathname,b)==null}if(Ie){bt?t.location.replace(xt):t.location.assign(xt);return}}ze=null;let Je=bt===!0||Re.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Xt,formAction:zt,formEncType:lr}=q.navigation;!ut&&!vt&&Xt&&zt&&lr&&(ut=dk(q.navigation));let rt=ut||vt;if(nW.has(Re.response.status)&&rt&&Wi(rt.formMethod))await gr(Je,Bt,{submission:{...rt,formAction:xt},preventScrollReset:It||he,enableViewTransition:Ve?J:void 0});else{let Ie=Gb(Bt,ut);await gr(Je,Bt,{overrideNavigation:Ie,fetcherSubmission:vt,preventScrollReset:It||he,enableViewTransition:Ve?J:void 0})}}async function pr(ge,Re,Ve,ut){let vt,It={};try{vt=await hW(C,ge,Re,ut,Ve,!1)}catch(bt){return Re.filter(xt=>xt.shouldLoad).forEach(xt=>{It[xt.route.id]={type:"error",error:bt}}),It}if(ge.signal.aborted)return It;for(let[bt,xt]of Object.entries(vt))if(vW(xt)){let Bt=xt.result;It[bt]={type:"redirect",response:mW(Bt,ge,bt,Re,b)}}else It[bt]=await fW(xt);return It}async function $r(ge,Re,Ve,ut){let vt=pr(Ve,ge,ut,null),It=Promise.all(Re.map(async Bt=>{if(Bt.matches&&Bt.match&&Bt.request&&Bt.controller){let Xt=(await pr(Bt.request,Bt.matches,ut,Bt.key))[Bt.match.route.id];return{[Bt.key]:Xt}}else return Promise.resolve({[Bt.key]:{type:"error",error:ha(404,{pathname:Bt.path})}})})),bt=await vt,xt=(await It).reduce((Bt,Je)=>Object.assign(Bt,Je),{});return{loaderResults:bt,fetcherResults:xt}}function jr(){ot=!0,pt.forEach((ge,Re)=>{De.has(Re)&&He.add(Re),wr(Re)})}function br(ge,Re,Ve={}){q.fetchers.set(ge,Re),Mt({fetchers:new Map(q.fetchers)},{flushSync:(Ve&&Ve.flushSync)===!0})}function dr(ge,Re,Ve,ut={}){let vt=pu(q.matches,Re);Jt(ge),Mt({errors:{[vt.route.id]:Ve},fetchers:new Map(q.fetchers)},{flushSync:(ut&&ut.flushSync)===!0})}function ar(ge){return ct.set(ge,(ct.get(ge)||0)+1),Ht.has(ge)&&Ht.delete(ge),q.fetchers.get(ge)||oW}function Jt(ge){let Re=q.fetchers.get(ge);De.has(ge)&&!(Re&&Re.state==="loading"&&Ze.has(ge))&&wr(ge),pt.delete(ge),Ze.delete(ge),at.delete(ge),Ht.delete(ge),He.delete(ge),q.fetchers.delete(ge)}function yr(ge){let Re=(ct.get(ge)||0)-1;Re<=0?(ct.delete(ge),Ht.add(ge)):ct.set(ge,Re),Mt({fetchers:new Map(q.fetchers)})}function wr(ge){let Re=De.get(ge);Re&&(Re.abort(),De.delete(ge))}function _e(ge){for(let Re of ge){let Ve=ar(Re),ut=Vl(Ve.data);q.fetchers.set(Re,ut)}}function X(){let ge=[],Re=!1;for(let Ve of at){let ut=q.fetchers.get(Ve);Rr(ut,`Expected fetcher: ${Ve}`),ut.state==="loading"&&(at.delete(Ve),ge.push(Ve),Re=!0)}return _e(ge),Re}function te(ge){let Re=[];for(let[Ve,ut]of Ze)if(ut<ge){let vt=q.fetchers.get(Ve);Rr(vt,`Expected fetcher: ${Ve}`),vt.state==="loading"&&(wr(Ve),Ze.delete(Ve),Re.push(Ve))}return _e(Re),Re.length>0}function H(ge,Re){let Ve=q.blockers.get(ge)||bf;return Dt.get(ge)!==Re&&Dt.set(ge,Re),Ve}function oe(ge){q.blockers.delete(ge),Dt.delete(ge)}function xe(ge,Re){let Ve=q.blockers.get(ge)||bf;Rr(Ve.state==="unblocked"&&Re.state==="blocked"||Ve.state==="blocked"&&Re.state==="blocked"||Ve.state==="blocked"&&Re.state==="proceeding"||Ve.state==="blocked"&&Re.state==="unblocked"||Ve.state==="proceeding"&&Re.state==="unblocked",`Invalid blocker state transition: ${Ve.state} -> ${Re.state}`);let ut=new Map(q.blockers);ut.set(ge,Re),Mt({blockers:ut})}function Ae({currentLocation:ge,nextLocation:Re,historyAction:Ve}){if(Dt.size===0)return;Dt.size>1&&Qn(!1,"A router only supports one blocker at a time");let ut=Array.from(Dt.entries()),[vt,It]=ut[ut.length-1],bt=q.blockers.get(vt);if(!(bt&&bt.state==="proceeding")&&It({currentLocation:ge,nextLocation:Re,historyAction:Ve}))return vt}function Fe(ge){let Re=ha(404,{pathname:ge}),Ve=a||f,{matches:ut,route:vt}=ck(Ve);return{notFoundMatches:ut,route:vt,error:Re}}function we(ge,Re,Ve){if(R=ge,G=Re,$=Ve||null,!ee&&q.navigation===Hb){ee=!0;let ut=$e(q.location,q.matches);ut!=null&&Mt({restoreScrollPosition:ut})}return()=>{R=null,G=null,$=null}}function qe(ge,Re){return $&&$(ge,Re.map(ut=>LG(ut,q.loaderData)))||ge.key}function We(ge,Re){if(R&&G){let Ve=qe(ge,Re);R[Ve]=G()}}function $e(ge,Re){if(R){let Ve=qe(ge,Re),ut=R[Ve];if(typeof ut=="number")return ut}return null}function nt(ge,Re,Ve){if(e.patchRoutesOnNavigation)if(ge){if(Object.keys(ge[0].params).length>0)return{active:!0,matches:_v(Re,Ve,b,!0)}}else return{active:!0,matches:_v(Re,Ve,b,!0)||[]};return{active:!1,matches:null}}async function Me(ge,Re,Ve,ut){if(!e.patchRoutesOnNavigation)return{type:"success",matches:ge};let vt=ge;for(;;){let It=a==null,bt=a||f,xt=d;try{await e.patchRoutesOnNavigation({signal:Ve,path:Re,matches:vt,fetcherKey:ut,patch:(Xt,zt)=>{Ve.aborted||ek(Xt,zt,bt,xt,u)}})}catch(Xt){return{type:"error",error:Xt,partialMatches:vt}}finally{It&&!Ve.aborted&&(f=[...f])}if(Ve.aborted)return{type:"aborted"};let Bt=Kl(bt,Re,b);if(Bt)return{type:"success",matches:Bt};let Je=_v(bt,Re,b,!0);if(!Je||vt.length===Je.length&&vt.every((Xt,zt)=>Xt.route.id===Je[zt].route.id))return{type:"success",matches:null};vt=Je}}function mt(ge){d={},a=s0(ge,u,void 0,d)}function wt(ge,Re){let Ve=a==null;ek(ge,Re,a||f,d,u),Ve&&(f=[...f],Mt({}))}return Y={get basename(){return b},get future(){return I},get state(){return q},get routes(){return f},get window(){return t},initialize:Tt,subscribe:Ct,enableScrollRestoration:we,navigate:nr,fetch:mr,revalidate:ur,createHref:ge=>e.history.createHref(ge),encodeLocation:ge=>e.history.encodeLocation(ge),getFetcher:ar,deleteFetcher:yr,dispose:st,getBlocker:H,deleteBlocker:oe,patchRoutes:wt,_internalFetchControllers:De,_internalSetRoutes:mt},Y}function sW(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function rS(e,t,n,i,u,d){let f,a;if(u){f=[];for(let C of t)if(f.push(C),C.route.id===u){a=C;break}}else f=t,a=t[t.length-1];let b=p2(i||".",h2(f),Ca(e.pathname,n)||e.pathname,d==="path");if(i==null&&(b.search=e.search,b.hash=e.hash),(i==null||i===""||i===".")&&a){let C=m2(b.search);if(a.route.index&&!C)b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&C){let I=new URLSearchParams(b.search),k=I.getAll("index");I.delete("index"),k.filter(R=>R).forEach(R=>I.append("index",R));let M=I.toString();b.search=M?`?${M}`:""}}return n!=="/"&&(b.pathname=b.pathname==="/"?n:ws([n,b.pathname])),uc(b)}function JE(e,t,n){if(!n||!sW(n))return{path:t};if(n.formMethod&&!_W(n.formMethod))return{path:t,error:ha(405,{method:n.formMethod})};let i=()=>({path:t,error:ha(400,{type:"invalid-body"})}),d=(n.formMethod||"get").toUpperCase(),f=jL(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Wi(d))return i();let k=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((M,[R,$])=>`${M}${R}=${$}
`,""):String(n.body);return{path:t,submission:{formMethod:d,formAction:f,formEncType:n.formEncType,formData:void 0,json:void 0,text:k}}}else if(n.formEncType==="application/json"){if(!Wi(d))return i();try{let k=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:d,formAction:f,formEncType:n.formEncType,formData:void 0,json:k,text:void 0}}}catch{return i()}}}Rr(typeof FormData=="function","FormData is not available in this environment");let a,b;if(n.formData)a=iS(n.formData),b=n.formData;else if(n.body instanceof FormData)a=iS(n.body),b=n.body;else if(n.body instanceof URLSearchParams)a=n.body,b=ik(a);else if(n.body==null)a=new URLSearchParams,b=new FormData;else try{a=new URLSearchParams(n.body),b=ik(a)}catch{return i()}let C={formMethod:d,formAction:f,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:b,json:void 0,text:void 0};if(Wi(C.formMethod))return{path:t,submission:C};let I=vc(t);return e&&I.search&&m2(I.search)&&a.append("index",""),I.search=`?${a}`,{path:uc(I),submission:C}}function QE(e,t,n,i,u,d,f,a,b,C,I,k,M,R,$,G,ee,F,j,O){var je;let ne=O?Gi(O[1])?O[1].error:O[1].data:void 0,Y=u.createURL(d.location),q=u.createURL(b),ce;if(I&&d.errors){let ot=Object.keys(d.errors)[0];ce=f.findIndex(He=>He.route.id===ot)}else if(O&&Gi(O[1])){let ot=O[0];ce=f.findIndex(He=>He.route.id===ot)-1}let he=O?O[1].statusCode:void 0,ze=he&&he>=400,J={currentUrl:Y,currentParams:((je=d.matches[0])==null?void 0:je.params)||{},nextUrl:q,nextParams:f[0].params,...a,actionResult:ne,actionStatus:he},Ee=f.map((ot,He)=>{let{route:De}=ot,Ge=null;if(ce!=null&&He>ce?Ge=!1:De.lazy?Ge=!0:De.loader==null?Ge=!1:I?Ge=nS(De,d.loaderData,d.errors):lW(d.loaderData,d.matches[He],ot)&&(Ge=!0),Ge!==null)return oS(n,i,e,ot,C,t,Ge);let Ue=ze?!1:k||Y.pathname+Y.search===q.pathname+q.search||Y.search!==q.search||cW(d.matches[He],ot),Ze={...J,defaultShouldRevalidate:Ue},at=u0(ot,Ze);return oS(n,i,e,ot,C,t,at,Ze)}),Be=[];return $.forEach((ot,He)=>{if(I||!f.some(Ht=>Ht.route.id===ot.routeId)||R.has(He))return;let De=d.fetchers.get(He),Ge=De&&De.state!=="idle"&&De.data===void 0,Ue=Kl(ee,ot.path,F);if(!Ue){if(j&&Ge)return;Be.push({key:He,routeId:ot.routeId,path:ot.path,matches:null,match:null,request:null,controller:null});return}if(G.has(He))return;let Ze=Lf(Ue,ot.path),at=new AbortController,pt=Wd(u,ot.path,at.signal),ct=null;if(M.has(He))M.delete(He),ct=vh(n,i,pt,Ue,Ze,C,t);else if(Ge)k&&(ct=vh(n,i,pt,Ue,Ze,C,t));else{let Ht={...J,defaultShouldRevalidate:ze?!1:k};u0(Ze,Ht)&&(ct=vh(n,i,pt,Ue,Ze,C,t,Ht))}ct&&Be.push({key:He,routeId:ot.routeId,path:ot.path,matches:ct,match:Ze,request:pt,controller:at})}),{dsMatches:Ee,revalidatingFetchers:Be}}function nS(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let i=t!=null&&e.id in t,u=n!=null&&n[e.id]!==void 0;return!i&&u?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!i&&!u}function lW(e,t,n){let i=!t||n.route.id!==t.route.id,u=!e.hasOwnProperty(n.route.id);return i||u}function cW(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function u0(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function ek(e,t,n,i,u){let d;if(e){let b=i[e];Rr(b,`No route found to patch children into: routeId = ${e}`),b.children||(b.children=[]),d=b.children}else d=n;let f=t.filter(b=>!d.some(C=>LL(b,C))),a=s0(f,u,[e||"_","patch",String((d==null?void 0:d.length)||"0")],i);d.push(...a)}function LL(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,i)=>{var u;return(u=t.children)==null?void 0:u.some(d=>LL(n,d))}):!1}var tk=new WeakMap,$L=({key:e,route:t,manifest:n,mapRouteProperties:i})=>{let u=n[t.id];if(Rr(u,"No route found in manifest"),!u.lazy||typeof u.lazy!="object")return;let d=u.lazy[e];if(!d)return;let f=tk.get(u);f||(f={},tk.set(u,f));let a=f[e];if(a)return a;let b=(async()=>{let C=RG(e),k=u[e]!==void 0&&e!=="hasErrorBoundary";if(C)Qn(!C,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),f[e]=Promise.resolve();else if(k)Qn(!1,`Route "${u.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let M=await d();M!=null&&(Object.assign(u,{[e]:M}),Object.assign(u,i(u)))}typeof u.lazy=="object"&&(u.lazy[e]=void 0,Object.values(u.lazy).every(M=>M===void 0)&&(u.lazy=void 0))})();return f[e]=b,b},rk=new WeakMap;function uW(e,t,n,i,u){let d=n[e.id];if(Rr(d,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let I=rk.get(d);if(I)return{lazyRoutePromise:I,lazyHandlerPromise:I};let k=(async()=>{Rr(typeof e.lazy=="function","No lazy route function found");let M=await e.lazy(),R={};for(let $ in M){let G=M[$];if(G===void 0)continue;let ee=zG($),j=d[$]!==void 0&&$!=="hasErrorBoundary";ee?Qn(!ee,"Route property "+$+" is not a supported property to be returned from a lazy route function. This property will be ignored."):j?Qn(!j,`Route "${d.id}" has a static property "${$}" defined but its lazy function is also returning a value for this property. The lazy route property "${$}" will be ignored.`):R[$]=G}Object.assign(d,R),Object.assign(d,{...i(d),lazy:void 0})})();return rk.set(d,k),k.catch(()=>{}),{lazyRoutePromise:k,lazyHandlerPromise:k}}let f=Object.keys(e.lazy),a=[],b;for(let I of f){if(u&&u.includes(I))continue;let k=$L({key:I,route:e,manifest:n,mapRouteProperties:i});k&&(a.push(k),I===t&&(b=k))}let C=a.length>0?Promise.all(a).then(()=>{}):void 0;return C==null||C.catch(()=>{}),b==null||b.catch(()=>{}),{lazyRoutePromise:C,lazyHandlerPromise:b}}async function nk(e){let t=e.matches.filter(u=>u.shouldLoad),n={};return(await Promise.all(t.map(u=>u.resolve()))).forEach((u,d)=>{n[t[d].route.id]=u}),n}async function dW(e){return e.matches.some(t=>t.route.unstable_middleware)?OL(e,!1,()=>nk(e),(t,n)=>({[n]:{type:"error",result:t}})):nk(e)}async function OL(e,t,n,i){let{matches:u,request:d,params:f,context:a}=e,b={handlerResult:void 0};try{let C=u.flatMap(k=>k.route.unstable_middleware?k.route.unstable_middleware.map(M=>[k.route.id,M]):[]),I=await BL({request:d,params:f,context:a},C,t,b,n);return t?I:b.handlerResult}catch(C){if(!b.middlewareError)throw C;let I=await i(b.middlewareError.error,b.middlewareError.routeId);return b.handlerResult?Object.assign(b.handlerResult,I):I}}async function BL(e,t,n,i,u,d=0){let{request:f}=e;if(f.signal.aborted)throw f.signal.reason?f.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${f.method} ${f.url}`);let a=t[d];if(!a)return i.handlerResult=await u(),i.handlerResult;let[b,C]=a,I=!1,k,M=async()=>{if(I)throw new Error("You may only call `next()` once per middleware");I=!0,await BL(e,t,n,i,u,d+1)};try{let R=await C({request:e.request,params:e.params,context:e.context},M);return I?R===void 0?k:R:M()}catch(R){throw i.middlewareError?i.middlewareError.error!==R&&(i.middlewareError={routeId:b,error:R}):i.middlewareError={routeId:b,error:R},R}}function FL(e,t,n,i,u){let d=$L({key:"unstable_middleware",route:i.route,manifest:t,mapRouteProperties:e}),f=uW(i.route,Wi(n.method)?"action":"loader",t,e,u);return{middleware:d,route:f.lazyRoutePromise,handler:f.lazyHandlerPromise}}function oS(e,t,n,i,u,d,f,a=null){let b=!1,C=FL(e,t,n,i,u);return{...i,_lazyPromises:C,shouldLoad:f,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(I){return b=!0,a?typeof I=="boolean"?u0(i,{...a,defaultShouldRevalidate:I}):u0(i,a):f},resolve(I){return b||f||I&&n.method==="GET"&&(i.route.lazy||i.route.loader)?pW({request:n,match:i,lazyHandlerPromise:C==null?void 0:C.handler,lazyRoutePromise:C==null?void 0:C.route,handlerOverride:I,scopedContext:d}):Promise.resolve({type:"data",result:void 0})}}}function vh(e,t,n,i,u,d,f,a=null){return i.map(b=>b.route.id!==u.route.id?{...b,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:FL(e,t,n,b,d),resolve:()=>Promise.resolve({type:"data",result:void 0})}:oS(e,t,n,b,d,f,!0,a))}async function hW(e,t,n,i,u,d){n.some(C=>{var I;return(I=C._lazyPromises)==null?void 0:I.middleware})&&await Promise.all(n.map(C=>{var I;return(I=C._lazyPromises)==null?void 0:I.middleware}));let f={request:t,params:n[0].params,context:u,matches:n},b=await e({...f,fetcherKey:i,unstable_runClientMiddleware:C=>{let I=f;return OL(I,!1,()=>C({...I,fetcherKey:i,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(k,M)=>({[M]:{type:"error",result:k}}))}});try{await Promise.all(n.flatMap(C=>{var I,k;return[(I=C._lazyPromises)==null?void 0:I.handler,(k=C._lazyPromises)==null?void 0:k.route]}))}catch{}return b}async function pW({request:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:i,handlerOverride:u,scopedContext:d}){let f,a,b=Wi(e.method),C=b?"action":"loader",I=k=>{let M,R=new Promise((ee,F)=>M=F);a=()=>M(),e.signal.addEventListener("abort",a);let $=ee=>typeof k!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${C}" [routeId: ${t.route.id}]`)):k({request:e,params:t.params,context:d},...ee!==void 0?[ee]:[]),G=(async()=>{try{return{type:"data",result:await(u?u(F=>$(F)):$())}}catch(ee){return{type:"error",result:ee}}})();return Promise.race([G,R])};try{let k=b?t.route.action:t.route.loader;if(n||i)if(k){let M,[R]=await Promise.all([I(k).catch($=>{M=$}),n,i]);if(M!==void 0)throw M;f=R}else{await n;let M=b?t.route.action:t.route.loader;if(M)[f]=await Promise.all([I(M),i]);else if(C==="action"){let R=new URL(e.url),$=R.pathname+R.search;throw ha(405,{method:e.method,pathname:$,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(k)f=await I(k);else{let M=new URL(e.url),R=M.pathname+M.search;throw ha(404,{pathname:R})}}catch(k){return{type:"error",result:k}}finally{a&&e.signal.removeEventListener("abort",a)}return f}async function fW(e){var i,u,d,f,a,b;let{result:t,type:n}=e;if(NL(t)){let C;try{let I=t.headers.get("Content-Type");I&&/\bapplication\/json\b/.test(I)?t.body==null?C=null:C=await t.json():C=await t.text()}catch(I){return{type:"error",error:I}}return n==="error"?{type:"error",error:new c0(t.status,t.statusText,C),statusCode:t.status,headers:t.headers}:{type:"data",data:C,statusCode:t.status,headers:t.headers}}return n==="error"?uk(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new c0(((d=t.init)==null?void 0:d.status)||500,void 0,t.data),statusCode:Im(t)?t.status:void 0,headers:(f=t.init)!=null&&f.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:Im(t)?t.status:void 0}:uk(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(b=t.init)!=null&&b.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function mW(e,t,n,i,u){let d=e.headers.get("Location");if(Rr(d,"Redirects returned/thrown from loaders/actions must have a Location header"),!f2.test(d)){let f=i.slice(0,i.findIndex(a=>a.route.id===n)+1);d=rS(new URL(t.url),f,u,d),e.headers.set("Location",d)}return e}function ok(e,t,n){if(f2.test(e)){let i=e,u=i.startsWith("//")?new URL(t.protocol+i):new URL(i),d=Ca(u.pathname,n)!=null;if(u.origin===t.origin&&d)return u.pathname+u.search+u.hash}return e}function Wd(e,t,n,i){let u=e.createURL(jL(t)).toString(),d={signal:n};if(i&&Wi(i.formMethod)){let{formMethod:f,formEncType:a}=i;d.method=f.toUpperCase(),a==="application/json"?(d.headers=new Headers({"Content-Type":a}),d.body=JSON.stringify(i.json)):a==="text/plain"?d.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?d.body=iS(i.formData):d.body=i.formData}return new Request(u,d)}function iS(e){let t=new URLSearchParams;for(let[n,i]of e.entries())t.append(n,typeof i=="string"?i:i.name);return t}function ik(e){let t=new FormData;for(let[n,i]of e.entries())t.append(n,i);return t}function gW(e,t,n,i=!1,u=!1){let d={},f=null,a,b=!1,C={},I=n&&Gi(n[1])?n[1].error:void 0;return e.forEach(k=>{if(!(k.route.id in t))return;let M=k.route.id,R=t[M];if(Rr(!yu(R),"Cannot handle redirect results in processLoaderData"),Gi(R)){let $=R.error;if(I!==void 0&&($=I,I=void 0),f=f||{},u)f[M]=$;else{let G=pu(e,M);f[G.route.id]==null&&(f[G.route.id]=$)}i||(d[M]=DL),b||(b=!0,a=Im(R.error)?R.error.status:500),R.headers&&(C[M]=R.headers)}else d[M]=R.data,R.statusCode&&R.statusCode!==200&&!b&&(a=R.statusCode),R.headers&&(C[M]=R.headers)}),I!==void 0&&n&&(f={[n[0]]:I},n[2]&&(d[n[2]]=void 0)),{loaderData:d,errors:f,statusCode:a||200,loaderHeaders:C}}function ak(e,t,n,i,u,d){let{loaderData:f,errors:a}=gW(t,n,i);return u.filter(b=>!b.matches||b.matches.some(C=>C.shouldLoad)).forEach(b=>{let{key:C,match:I,controller:k}=b,M=d[C];if(Rr(M,"Did not find corresponding fetcher result"),!(k&&k.signal.aborted))if(Gi(M)){let R=pu(e.matches,I==null?void 0:I.route.id);a&&a[R.route.id]||(a={...a,[R.route.id]:M.error}),e.fetchers.delete(C)}else if(yu(M))Rr(!1,"Unhandled fetcher revalidation redirect");else{let R=Vl(M.data);e.fetchers.set(C,R)}}),{loaderData:f,errors:a}}function sk(e,t,n,i){let u=Object.entries(t).filter(([,d])=>d!==DL).reduce((d,[f,a])=>(d[f]=a,d),{});for(let d of n){let f=d.route.id;if(!t.hasOwnProperty(f)&&e.hasOwnProperty(f)&&d.route.loader&&(u[f]=e[f]),i&&i.hasOwnProperty(f))break}return u}function lk(e){return e?Gi(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function pu(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function ck(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ha(e,{pathname:t,routeId:n,method:i,type:u,message:d}={}){let f="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(f="Bad Request",i&&t&&n?a=`You made a ${i} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:u==="invalid-body"&&(a="Unable to encode submission body")):e===403?(f="Forbidden",a=`Route "${n}" does not match URL "${t}"`):e===404?(f="Not Found",a=`No route matches URL "${t}"`):e===405&&(f="Method Not Allowed",i&&t&&n?a=`You made a ${i.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:i&&(a=`Invalid request method "${i.toUpperCase()}"`)),new c0(e||500,f,new Error(a),!0)}function Gy(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[i,u]=t[n];if(yu(u))return{key:i,result:u}}}function jL(e){let t=typeof e=="string"?vc(e):e;return uc({...t,hash:""})}function yW(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function vW(e){return NL(e.result)&&rW.has(e.result.status)}function Gi(e){return e.type==="error"}function yu(e){return(e&&e.type)==="redirect"}function uk(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function NL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _W(e){return tW.has(e.toUpperCase())}function Wi(e){return QG.has(e.toUpperCase())}function m2(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Lf(e,t){let n=typeof t=="string"?vc(t).search:t.search;if(e[e.length-1].route.index&&m2(n||""))return e[e.length-1];let i=RL(e);return i[i.length-1]}function dk(e){let{formMethod:t,formAction:n,formEncType:i,text:u,formData:d,json:f}=e;if(!(!t||!n||!i)){if(u!=null)return{formMethod:t,formAction:n,formEncType:i,formData:void 0,json:void 0,text:u};if(d!=null)return{formMethod:t,formAction:n,formEncType:i,formData:d,json:void 0,text:void 0};if(f!==void 0)return{formMethod:t,formAction:n,formEncType:i,formData:void 0,json:f,text:void 0}}}function Gb(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function xW(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function wf(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function bW(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Vl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function wW(e,t){try{let n=e.sessionStorage.getItem(zL);if(n){let i=JSON.parse(n);for(let[u,d]of Object.entries(i||{}))d&&Array.isArray(d)&&t.set(u,new Set(d||[]))}}catch{}}function SW(e,t){if(t.size>0){let n={};for(let[i,u]of t)n[i]=[...u];try{e.sessionStorage.setItem(zL,JSON.stringify(n))}catch(i){Qn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function CW(){let e,t,n=new Promise((i,u)=>{e=async d=>{i(d);try{await n}catch{}},t=async d=>{u(d);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var Ou=L.createContext(null);Ou.displayName="DataRouter";var eg=L.createContext(null);eg.displayName="DataRouterState";var g2=L.createContext({isTransitioning:!1});g2.displayName="ViewTransition";var VL=L.createContext(new Map);VL.displayName="Fetchers";var PW=L.createContext(null);PW.displayName="Await";var Ps=L.createContext(null);Ps.displayName="Navigation";var y_=L.createContext(null);y_.displayName="Location";var nl=L.createContext({outlet:null,matches:[],isDataRoute:!1});nl.displayName="Route";var y2=L.createContext(null);y2.displayName="RouteError";function TW(e,{relative:t}={}){Rr(tg(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=L.useContext(Ps),{hash:u,pathname:d,search:f}=rg(e,{relative:t}),a=d;return n!=="/"&&(a=d==="/"?n:ws([n,d])),i.createHref({pathname:a,search:f,hash:u})}function tg(){return L.useContext(y_)!=null}function _c(){return Rr(tg(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(y_).location}var UL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HL(e){L.useContext(Ps).static||L.useLayoutEffect(e)}function GL(){let{isDataRoute:e}=L.useContext(nl);return e?FW():IW()}function IW(){Rr(tg(),"useNavigate() may be used only in the context of a <Router> component.");let e=L.useContext(Ou),{basename:t,navigator:n}=L.useContext(Ps),{matches:i}=L.useContext(nl),{pathname:u}=_c(),d=JSON.stringify(h2(i)),f=L.useRef(!1);return HL(()=>{f.current=!0}),L.useCallback((b,C={})=>{if(Qn(f.current,UL),!f.current)return;if(typeof b=="number"){n.go(b);return}let I=p2(b,JSON.parse(d),u,C.relative==="path");e==null&&t!=="/"&&(I.pathname=I.pathname==="/"?t:ws([t,I.pathname])),(C.replace?n.replace:n.push)(I,C.state,C)},[t,n,d,u,e])}L.createContext(null);function rg(e,{relative:t}={}){let{matches:n}=L.useContext(nl),{pathname:i}=_c(),u=JSON.stringify(h2(n));return L.useMemo(()=>p2(e,JSON.parse(u),i,t==="path"),[e,u,i,t])}function EW(e,t,n,i){Rr(tg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=L.useContext(Ps),{matches:d}=L.useContext(nl),f=d[d.length-1],a=f?f.params:{},b=f?f.pathname:"/",C=f?f.pathnameBase:"/",I=f&&f.route;{let F=I&&I.path||"";WL(b,!I||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let k=_c(),M;M=k;let R=M.pathname||"/",$=R;if(C!=="/"){let F=C.replace(/^\//,"").split("/");$="/"+R.replace(/^\//,"").split("/").slice(F.length).join("/")}let G=Kl(e,{pathname:$});return Qn(I||G!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Qn(G==null||G[G.length-1].route.element!==void 0||G[G.length-1].route.Component!==void 0||G[G.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),zW(G&&G.map(F=>Object.assign({},F,{params:Object.assign({},a,F.params),pathname:ws([C,u.encodeLocation?u.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?C:ws([C,u.encodeLocation?u.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),d,n,i)}function kW(){let e=BW(),t=Im(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:d},"ErrorBoundary")," or"," ",L.createElement("code",{style:d},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),n?L.createElement("pre",{style:u},n):null,f)}var MW=L.createElement(kW,null),RW=class extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(nl.Provider,{value:this.props.routeContext},L.createElement(y2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AW({routeContext:e,match:t,children:n}){let i=L.useContext(Ou);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(nl.Provider,{value:e},n)}function zW(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,d=n==null?void 0:n.errors;if(d!=null){let b=u.findIndex(C=>C.route.id&&(d==null?void 0:d[C.route.id])!==void 0);Rr(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let f=!1,a=-1;if(n)for(let b=0;b<u.length;b++){let C=u[b];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(a=b),C.route.id){let{loaderData:I,errors:k}=n,M=C.route.loader&&!I.hasOwnProperty(C.route.id)&&(!k||k[C.route.id]===void 0);if(C.route.lazy||M){f=!0,a>=0?u=u.slice(0,a+1):u=[u[0]];break}}}return u.reduceRight((b,C,I)=>{let k,M=!1,R=null,$=null;n&&(k=d&&C.route.id?d[C.route.id]:void 0,R=C.route.errorElement||MW,f&&(a<0&&I===0?(WL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,$=null):a===I&&(M=!0,$=C.route.hydrateFallbackElement||null)));let G=t.concat(u.slice(0,I+1)),ee=()=>{let F;return k?F=R:M?F=$:C.route.Component?F=L.createElement(C.route.Component,null):C.route.element?F=C.route.element:F=b,L.createElement(AW,{match:C,routeContext:{outlet:b,matches:G,isDataRoute:n!=null},children:F})};return n&&(C.route.ErrorBoundary||C.route.errorElement||I===0)?L.createElement(RW,{location:n.location,revalidation:n.revalidation,component:R,error:k,children:ee(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):ee()},null)}function v2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DW(e){let t=L.useContext(Ou);return Rr(t,v2(e)),t}function LW(e){let t=L.useContext(eg);return Rr(t,v2(e)),t}function $W(e){let t=L.useContext(nl);return Rr(t,v2(e)),t}function _2(e){let t=$W(e),n=t.matches[t.matches.length-1];return Rr(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function OW(){return _2("useRouteId")}function BW(){var i;let e=L.useContext(y2),t=LW("useRouteError"),n=_2("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function FW(){let{router:e}=DW("useNavigate"),t=_2("useNavigate"),n=L.useRef(!1);return HL(()=>{n.current=!0}),L.useCallback(async(u,d={})=>{Qn(n.current,UL),n.current&&(typeof u=="number"?e.navigate(u):await e.navigate(u,{fromRouteId:t,...d}))},[e,t])}var hk={};function WL(e,t,n){!t&&!hk[e]&&(hk[e]=!0,Qn(!1,n))}var pk={};function fk(e,t){!e&&!pk[t]&&(pk[t]=!0,console.warn(t))}function jW(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Qn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:L.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Qn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:L.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Qn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:L.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var NW=["HydrateFallback","hydrateFallbackElement"],VW=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function UW({router:e,flushSync:t}){let[n,i]=L.useState(e.state),[u,d]=L.useState(),[f,a]=L.useState({isTransitioning:!1}),[b,C]=L.useState(),[I,k]=L.useState(),[M,R]=L.useState(),$=L.useRef(new Map),G=L.useCallback((O,{deletedFetchers:ne,flushSync:Y,viewTransitionOpts:q})=>{O.fetchers.forEach((he,ze)=>{he.data!==void 0&&$.current.set(ze,he.data)}),ne.forEach(he=>$.current.delete(he)),fk(Y===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let ce=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(fk(q==null||ce,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!q||!ce){t&&Y?t(()=>i(O)):L.startTransition(()=>i(O));return}if(t&&Y){t(()=>{I&&(b&&b.resolve(),I.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:q.currentLocation,nextLocation:q.nextLocation})});let he=e.window.document.startViewTransition(()=>{t(()=>i(O))});he.finished.finally(()=>{t(()=>{C(void 0),k(void 0),d(void 0),a({isTransitioning:!1})})}),t(()=>k(he));return}I?(b&&b.resolve(),I.skipTransition(),R({state:O,currentLocation:q.currentLocation,nextLocation:q.nextLocation})):(d(O),a({isTransitioning:!0,flushSync:!1,currentLocation:q.currentLocation,nextLocation:q.nextLocation}))},[e.window,t,I,b]);L.useLayoutEffect(()=>e.subscribe(G),[e,G]),L.useEffect(()=>{f.isTransitioning&&!f.flushSync&&C(new VW)},[f]),L.useEffect(()=>{if(b&&u&&e.window){let O=u,ne=b.promise,Y=e.window.document.startViewTransition(async()=>{L.startTransition(()=>i(O)),await ne});Y.finished.finally(()=>{C(void 0),k(void 0),d(void 0),a({isTransitioning:!1})}),k(Y)}},[u,b,e.window]),L.useEffect(()=>{b&&u&&n.location.key===u.location.key&&b.resolve()},[b,I,n.location,u]),L.useEffect(()=>{!f.isTransitioning&&M&&(d(M.state),a({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}),R(void 0))},[f.isTransitioning,M]);let ee=L.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:O=>e.navigate(O),push:(O,ne,Y)=>e.navigate(O,{state:ne,preventScrollReset:Y==null?void 0:Y.preventScrollReset}),replace:(O,ne,Y)=>e.navigate(O,{replace:!0,state:ne,preventScrollReset:Y==null?void 0:Y.preventScrollReset})}),[e]),F=e.basename||"/",j=L.useMemo(()=>({router:e,navigator:ee,static:!1,basename:F}),[e,ee,F]);return L.createElement(L.Fragment,null,L.createElement(Ou.Provider,{value:j},L.createElement(eg.Provider,{value:n},L.createElement(VL.Provider,{value:$.current},L.createElement(g2.Provider,{value:f},L.createElement(WW,{basename:F,location:n.location,navigationType:n.historyAction,navigator:ee},L.createElement(HW,{routes:e.routes,future:e.future,state:n})))))),null)}var HW=L.memo(GW);function GW({routes:e,future:t,state:n}){return EW(e,void 0,n,t)}function aS(e){Rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WW({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:u,static:d=!1}){Rr(!tg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=e.replace(/^\/*/,"/"),a=L.useMemo(()=>({basename:f,navigator:u,static:d,future:{}}),[f,u,d]);typeof n=="string"&&(n=vc(n));let{pathname:b="/",search:C="",hash:I="",state:k=null,key:M="default"}=n,R=L.useMemo(()=>{let $=Ca(b,f);return $==null?null:{location:{pathname:$,search:C,hash:I,state:k,key:M},navigationType:i}},[f,b,C,I,k,M,i]);return Qn(R!=null,`<Router basename="${f}"> is not able to match the URL "${b}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:L.createElement(Ps.Provider,{value:a},L.createElement(y_.Provider,{children:t,value:R}))}function sS(e,t=[]){let n=[];return L.Children.forEach(e,(i,u)=>{if(!L.isValidElement(i))return;let d=[...t,u];if(i.type===L.Fragment){n.push.apply(n,sS(i.props.children,d));return}Rr(i.type===aS,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=sS(i.props.children,d)),n.push(f)}),n}var ZW=sS,xv="get",bv="application/x-www-form-urlencoded";function v_(e){return e!=null&&typeof e.tagName=="string"}function qW(e){return v_(e)&&e.tagName.toLowerCase()==="button"}function KW(e){return v_(e)&&e.tagName.toLowerCase()==="form"}function XW(e){return v_(e)&&e.tagName.toLowerCase()==="input"}function YW(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function JW(e,t){return e.button===0&&(!t||t==="_self")&&!YW(e)}function lS(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let i=e[n];return t.concat(Array.isArray(i)?i.map(u=>[n,u]):[[n,i]])},[]))}function QW(e,t){let n=lS(e);return t&&t.forEach((i,u)=>{n.has(u)||t.getAll(u).forEach(d=>{n.append(u,d)})}),n}var Wy=null;function eZ(){if(Wy===null)try{new FormData(document.createElement("form"),0),Wy=!1}catch{Wy=!0}return Wy}var tZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wb(e){return e!=null&&!tZ.has(e)?(Qn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bv}"`),null):e}function rZ(e,t){let n,i,u,d,f;if(KW(e)){let a=e.getAttribute("action");i=a?Ca(a,t):null,n=e.getAttribute("method")||xv,u=Wb(e.getAttribute("enctype"))||bv,d=new FormData(e)}else if(qW(e)||XW(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=e.getAttribute("formaction")||a.getAttribute("action");if(i=b?Ca(b,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||xv,u=Wb(e.getAttribute("formenctype"))||Wb(a.getAttribute("enctype"))||bv,d=new FormData(a,e),!eZ()){let{name:C,type:I,value:k}=e;if(I==="image"){let M=C?`${C}.`:"";d.append(`${M}x`,"0"),d.append(`${M}y`,"0")}else C&&d.append(C,k)}}else{if(v_(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xv,i=null,u=bv,f=e}return d&&u==="text/plain"&&(f=d,d=void 0),{action:i,method:n.toLowerCase(),encType:u,formData:d,body:f}}function x2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function nZ(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function iZ(e,t,n){let i=await Promise.all(e.map(async u=>{let d=t.routes[u.route.id];if(d){let f=await nZ(d,n);return f.links?f.links():[]}return[]}));return cZ(i.flat(1).filter(oZ).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function mk(e,t,n,i,u,d){let f=(b,C)=>n[C]?b.route.id!==n[C].route.id:!0,a=(b,C)=>{var I;return n[C].pathname!==b.pathname||((I=n[C].route.path)==null?void 0:I.endsWith("*"))&&n[C].params["*"]!==b.params["*"]};return d==="assets"?t.filter((b,C)=>f(b,C)||a(b,C)):d==="data"?t.filter((b,C)=>{var k;let I=i.routes[b.route.id];if(!I||!I.hasLoader)return!1;if(f(b,C)||a(b,C))return!0;if(b.route.shouldRevalidate){let M=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((k=n[0])==null?void 0:k.params)||{},nextUrl:new URL(e,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function aZ(e,t,{includeHydrateFallback:n}={}){return sZ(e.map(i=>{let u=t.routes[i.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function sZ(e){return[...new Set(e)]}function lZ(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function cZ(e,t){let n=new Set;return new Set(t),e.reduce((i,u)=>{let d=JSON.stringify(lZ(u));return n.has(d)||(n.add(d),i.push({key:d,link:u})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uZ=new Set([100,101,204,205]);function dZ(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&Ca(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function ZL(){let e=L.useContext(Ou);return x2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function hZ(){let e=L.useContext(eg);return x2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var b2=L.createContext(void 0);b2.displayName="FrameworkContext";function qL(){let e=L.useContext(b2);return x2(e,"You must render this element inside a <HydratedRouter> element"),e}function pZ(e,t){let n=L.useContext(b2),[i,u]=L.useState(!1),[d,f]=L.useState(!1),{onFocus:a,onBlur:b,onMouseEnter:C,onMouseLeave:I,onTouchStart:k}=t,M=L.useRef(null);L.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let G=F=>{F.forEach(j=>{f(j.isIntersecting)})},ee=new IntersectionObserver(G,{threshold:.5});return M.current&&ee.observe(M.current),()=>{ee.disconnect()}}},[e]),L.useEffect(()=>{if(i){let G=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(G)}}},[i]);let R=()=>{u(!0)},$=()=>{u(!1),f(!1)};return n?e!=="intent"?[d,M,{}]:[d,M,{onFocus:Sf(a,R),onBlur:Sf(b,$),onMouseEnter:Sf(C,R),onMouseLeave:Sf(I,$),onTouchStart:Sf(k,R)}]:[!1,M,{}]}function Sf(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function fZ({page:e,...t}){let{router:n}=ZL(),i=L.useMemo(()=>Kl(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?L.createElement(gZ,{page:e,matches:i,...t}):null}function mZ(e){let{manifest:t,routeModules:n}=qL(),[i,u]=L.useState([]);return L.useEffect(()=>{let d=!1;return iZ(e,t,n).then(f=>{d||u(f)}),()=>{d=!0}},[e,t,n]),i}function gZ({page:e,matches:t,...n}){let i=_c(),{manifest:u,routeModules:d}=qL(),{basename:f}=ZL(),{loaderData:a,matches:b}=hZ(),C=L.useMemo(()=>mk(e,t,b,u,i,"data"),[e,t,b,u,i]),I=L.useMemo(()=>mk(e,t,b,u,i,"assets"),[e,t,b,u,i]),k=L.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let $=new Set,G=!1;if(t.forEach(F=>{var O;let j=u.routes[F.route.id];!j||!j.hasLoader||(!C.some(ne=>ne.route.id===F.route.id)&&F.route.id in a&&((O=d[F.route.id])!=null&&O.shouldRevalidate)||j.hasClientLoader?G=!0:$.add(F.route.id))}),$.size===0)return[];let ee=dZ(e,f);return G&&$.size>0&&ee.searchParams.set("_routes",t.filter(F=>$.has(F.route.id)).map(F=>F.route.id).join(",")),[ee.pathname+ee.search]},[f,a,i,u,C,t,e,d]),M=L.useMemo(()=>aZ(I,u),[I,u]),R=mZ(I);return L.createElement(L.Fragment,null,k.map($=>L.createElement("link",{key:$,rel:"prefetch",as:"fetch",href:$,...n})),M.map($=>L.createElement("link",{key:$,rel:"modulepreload",href:$,...n})),R.map(({key:$,link:G})=>L.createElement("link",{key:$,...G})))}function yZ(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var KL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KL&&(window.__reactRouterVersion="7.6.3")}catch{}function vZ(e,t){return aW({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:IG({window:t==null?void 0:t.window}),hydrationData:_Z(),routes:e,mapRouteProperties:jW,hydrationRouteProperties:NW,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function _Z(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:xZ(e.errors)}),e}function xZ(e){if(!e)return null;let t=Object.entries(e),n={};for(let[i,u]of t)if(u&&u.__type==="RouteErrorResponse")n[i]=new c0(u.status,u.statusText,u.data,u.internal===!0);else if(u&&u.__type==="Error"){if(u.__subType){let d=window[u.__subType];if(typeof d=="function")try{let f=new d(u.message);f.stack="",n[i]=f}catch{}}if(n[i]==null){let d=new Error(u.message);d.stack="",n[i]=d}}else n[i]=u;return n}var XL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YL=L.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:u,reloadDocument:d,replace:f,state:a,target:b,to:C,preventScrollReset:I,viewTransition:k,...M},R){let{basename:$}=L.useContext(Ps),G=typeof C=="string"&&XL.test(C),ee,F=!1;if(typeof C=="string"&&G&&(ee=C,KL))try{let ze=new URL(window.location.href),J=C.startsWith("//")?new URL(ze.protocol+C):new URL(C),Ee=Ca(J.pathname,$);J.origin===ze.origin&&Ee!=null?C=Ee+J.search+J.hash:F=!0}catch{Qn(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=TW(C,{relative:u}),[O,ne,Y]=pZ(i,M),q=CZ(C,{replace:f,state:a,target:b,preventScrollReset:I,relative:u,viewTransition:k});function ce(ze){t&&t(ze),ze.defaultPrevented||q(ze)}let he=L.createElement("a",{...M,...Y,href:ee||j,onClick:F||d?t:ce,ref:yZ(R,ne),target:b,"data-discover":!G&&n==="render"?"true":void 0});return O&&!G?L.createElement(L.Fragment,null,he,L.createElement(fZ,{page:j})):he});YL.displayName="Link";var bZ=L.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:u=!1,style:d,to:f,viewTransition:a,children:b,...C},I){let k=rg(f,{relative:C.relative}),M=_c(),R=L.useContext(eg),{navigator:$,basename:G}=L.useContext(Ps),ee=R!=null&&MZ(k)&&a===!0,F=$.encodeLocation?$.encodeLocation(k).pathname:k.pathname,j=M.pathname,O=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;n||(j=j.toLowerCase(),O=O?O.toLowerCase():null,F=F.toLowerCase()),O&&G&&(O=Ca(O,G)||O);const ne=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let Y=j===F||!u&&j.startsWith(F)&&j.charAt(ne)==="/",q=O!=null&&(O===F||!u&&O.startsWith(F)&&O.charAt(F.length)==="/"),ce={isActive:Y,isPending:q,isTransitioning:ee},he=Y?t:void 0,ze;typeof i=="function"?ze=i(ce):ze=[i,Y?"active":null,q?"pending":null,ee?"transitioning":null].filter(Boolean).join(" ");let J=typeof d=="function"?d(ce):d;return L.createElement(YL,{...C,"aria-current":he,className:ze,ref:I,style:J,to:f,viewTransition:a},typeof b=="function"?b(ce):b)});bZ.displayName="NavLink";var wZ=L.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:u,state:d,method:f=xv,action:a,onSubmit:b,relative:C,preventScrollReset:I,viewTransition:k,...M},R)=>{let $=EZ(),G=kZ(a,{relative:C}),ee=f.toLowerCase()==="get"?"get":"post",F=typeof a=="string"&&XL.test(a),j=O=>{if(b&&b(O),O.defaultPrevented)return;O.preventDefault();let ne=O.nativeEvent.submitter,Y=(ne==null?void 0:ne.getAttribute("formmethod"))||f;$(ne||O.currentTarget,{fetcherKey:t,method:Y,navigate:n,replace:u,state:d,relative:C,preventScrollReset:I,viewTransition:k})};return L.createElement("form",{ref:R,method:ee,action:G,onSubmit:i?b:j,...M,"data-discover":!F&&e==="render"?"true":void 0})});wZ.displayName="Form";function SZ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JL(e){let t=L.useContext(Ou);return Rr(t,SZ(e)),t}function CZ(e,{target:t,replace:n,state:i,preventScrollReset:u,relative:d,viewTransition:f}={}){let a=GL(),b=_c(),C=rg(e,{relative:d});return L.useCallback(I=>{if(JW(I,t)){I.preventDefault();let k=n!==void 0?n:uc(b)===uc(C);a(e,{replace:k,state:i,preventScrollReset:u,relative:d,viewTransition:f})}},[b,a,C,n,i,t,e,u,d,f])}function PZ(e){Qn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=L.useRef(lS(e)),n=L.useRef(!1),i=_c(),u=L.useMemo(()=>QW(i.search,n.current?null:t.current),[i.search]),d=GL(),f=L.useCallback((a,b)=>{const C=lS(typeof a=="function"?a(u):a);n.current=!0,d("?"+C,b)},[d,u]);return[u,f]}var TZ=0,IZ=()=>`__${String(++TZ)}__`;function EZ(){let{router:e}=JL("useSubmit"),{basename:t}=L.useContext(Ps),n=OW();return L.useCallback(async(i,u={})=>{let{action:d,method:f,encType:a,formData:b,body:C}=rZ(i,t);if(u.navigate===!1){let I=u.fetcherKey||IZ();await e.fetch(I,n,u.action||d,{preventScrollReset:u.preventScrollReset,formData:b,body:C,formMethod:u.method||f,formEncType:u.encType||a,flushSync:u.flushSync})}else await e.navigate(u.action||d,{preventScrollReset:u.preventScrollReset,formData:b,body:C,formMethod:u.method||f,formEncType:u.encType||a,replace:u.replace,state:u.state,fromRouteId:n,flushSync:u.flushSync,viewTransition:u.viewTransition})},[e,t,n])}function kZ(e,{relative:t}={}){let{basename:n}=L.useContext(Ps),i=L.useContext(nl);Rr(i,"useFormAction must be used inside a RouteContext");let[u]=i.matches.slice(-1),d={...rg(e||".",{relative:t})},f=_c();if(e==null){d.search=f.search;let a=new URLSearchParams(d.search),b=a.getAll("index");if(b.some(I=>I==="")){a.delete("index"),b.filter(k=>k).forEach(k=>a.append("index",k));let I=a.toString();d.search=I?`?${I}`:""}}return(!e||e===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:ws([n,d.pathname])),uc(d)}function MZ(e,t={}){let n=L.useContext(g2);Rr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=JL("useViewTransitionState"),u=rg(e,{relative:t.relative});if(!n.isTransitioning)return!1;let d=Ca(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=Ca(n.nextLocation.pathname,i)||n.nextLocation.pathname;return l0(u.pathname,f)!=null||l0(u.pathname,d)!=null}[...uZ];/**
 * react-router v7.6.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RZ(e){return L.createElement(UW,{flushSync:Gm.flushSync,...e})}function Sn(e,t){if(e==null)throw new Error(t);return e}function AZ(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}var ko=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Iowa=4]="Iowa",e[e.Kansas=5]="Kansas",e[e.Missouri=6]="Missouri",e[e.Montana=7]="Montana",e[e.Nebraska=8]="Nebraska",e[e.Nevada=9]="Nevada",e[e.NewMexico=10]="NewMexico",e[e.Oklahoma=11]="Oklahoma",e[e.Oregon=12]="Oregon",e[e.Texas=13]="Texas",e[e.Utah=14]="Utah",e[e.Washington=15]="Washington",e[e.Wyoming=16]="Wyoming",e))(ko||{});const Em=new Set([9,0,10,12,15,14,3,2,16,7,13,11,5,8,1,6,4]),zZ={9:"Nevada",0:"Arizona",10:"New Mexico",12:"Oregon",15:"Washington",14:"Utah",3:"Idaho",2:"Colorado",16:"Wyoming",7:"Montana",13:"Texas",11:"Oklahoma",5:"Kansas",8:"Nebraska",1:"Arkansas",6:"Missouri",4:"Iowa"},QL={0:new Set,1:new Set([9]),2:new Set([0]),3:new Set([10]),4:new Set([12]),5:new Set([15]),6:new Set([15,12]),7:new Set([14]),8:new Set([14,10]),9:new Set([3]),10:new Set([3,12]),11:new Set([3,14]),12:new Set([3,15]),13:new Set([2]),14:new Set([2,10]),15:new Set([2,14]),16:new Set([16]),17:new Set([16,2]),18:new Set([16,3]),19:new Set([16,14]),20:new Set([13]),21:new Set([13,10]),22:new Set([7]),23:new Set([7,3]),24:new Set([7,16]),25:new Set([11]),26:new Set([11,2]),27:new Set([11,10]),28:new Set([11,13]),29:new Set([5]),30:new Set([5,2]),31:new Set([5,11]),32:new Set([8]),33:new Set([8,2]),34:new Set([8,5]),35:new Set([8,16]),36:new Set([1]),37:new Set([1,11]),38:new Set([1,13]),39:new Set([6]),40:new Set([6,1]),41:new Set([6,5]),42:new Set([6,8]),43:new Set([6,11]),44:new Set([4]),45:new Set([4,6]),46:new Set([4,8])},DZ={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36,26:39,21:44};for(const e of Object.values(DZ))e!==0&&AZ(QL[e].size===1);function ng(e){const t=new Set;for(const[n,i]of Object.entries(QL))[...i].every(u=>e.has(u))&&t.add(Number(n));return t}const LZ=new Set([]);var e$=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(e$||{});const $Z="modulepreload",OZ=function(e){return"/"+e},gk={},BZ=function(t,n,i){let u=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),a=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));u=Promise.allSettled(n.map(b=>{if(b=OZ(b),b in gk)return;gk[b]=!0;const C=b.endsWith(".css"),I=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${I}`))return;const k=document.createElement("link");if(k.rel=C?"stylesheet":$Z,C||(k.as="script"),k.crossOrigin="",k.href=b,a&&k.setAttribute("nonce",a),document.head.appendChild(k),C)return new Promise((M,R)=>{k.addEventListener("load",M),k.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(f){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=f,window.dispatchEvent(a),!a.defaultPrevented)throw f}return u.then(f=>{for(const a of f||[])a.status==="rejected"&&d(a.reason);return t().catch(d)})},t$=L.createContext(null);function w2(){var i;const e=(i=L.useContext(t$))==null?void 0:i.maps,t=L.useContext(Bu);return L.useMemo(()=>({...e,current:t==null?void 0:t.map}),[e,t])}function FZ(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,u=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return n===u&&i===d}function Si(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Si(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const u of n)if(!t.hasOwnProperty(u)||!Si(e[u],t[u]))return!1;return!0}return!1}function yk(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function vk(e,t){const n=t.viewState||t,i={};if("longitude"in n&&"latitude"in n&&(n.longitude!==e.center.lng||n.latitude!==e.center.lat)){const u=e.center.constructor;i.center=new u(n.longitude,n.latitude)}return"zoom"in n&&n.zoom!==e.zoom&&(i.zoom=n.zoom),"bearing"in n&&n.bearing!==e.bearing&&(i.bearing=n.bearing),"pitch"in n&&n.pitch!==e.pitch&&(i.pitch=n.pitch),n.padding&&e.padding&&!Si(n.padding,e.padding)&&(i.padding=n.padding),i}const jZ=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _k(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const i of e.layers)t[i.id]=i;const n=e.layers.map(i=>{let u=null;"interactive"in i&&(u=Object.assign({},i),delete u.interactive);const d=t[i.ref];if(d){u=u||Object.assign({},i),delete u.ref;for(const f of jZ)f in d&&(u[f]=d[f])}return u||i});return{...e,layers:n}}const xk={version:8,sources:{},layers:[]},bk={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},wk={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Sk={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},NZ=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],VZ=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class $h{constructor(t,n,i){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=u=>{const d=this.props[Sk[u.type]];d?d(u):u.type==="error"&&console.error(u.error)},this._onCameraEvent=u=>{if(this._internalUpdate)return;u.viewState=this._propsedCameraUpdate||yk(this._map.transform);const d=this.props[wk[u.type]];d&&d(u)},this._onCameraUpdate=u=>this._internalUpdate?u:(this._propsedCameraUpdate=yk(u),vk(u,this.props)),this._onPointerEvent=u=>{(u.type==="mousemove"||u.type==="mouseout")&&this._updateHover(u);const d=this.props[bk[u.type]];d&&(this.props.interactiveLayerIds&&u.type!=="mouseover"&&u.type!=="mouseout"&&(u.features=this._hoveredFeatures||this._queryRenderedFeatures(u.point)),d(u),delete u.features)},this._MapClass=t,this.props=n,this._initialize(i)}get map(){return this._map}setProps(t){const n=this.props;this.props=t;const i=this._updateSettings(t,n),u=this._updateSize(t),d=this._updateViewState(t);this._updateStyle(t,n),this._updateStyleComponents(t),this._updateHandlers(t,n),(i||u||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const i=$h.savedMaps.pop();if(!i)return null;const u=i.map,d=u.getContainer();for(n.className=d.className;d.childNodes.length>0;)n.appendChild(d.childNodes[0]);u._container=n;const f=u._resizeObserver;f&&(f.disconnect(),f.observe(n)),i.setProps({...t,styleDiffing:!1}),u.resize();const{initialViewState:a}=t;return a&&(a.bounds?u.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):i._updateViewState(a)),u.isStyleLoaded()?u.fire("load"):u.once("style.load",()=>u.fire("load")),u._update(),i}_initialize(t){const{props:n}=this,{mapStyle:i=xk}=n,u={...n,...n.initialViewState,container:t,style:_k(i)},d=u.initialViewState||u.viewState||u;if(Object.assign(u,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),n.gl){const a=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=a,n.gl)}const f=new this._MapClass(u);d.padding&&f.setPadding(d.padding),n.cursor&&(f.getCanvas().style.cursor=n.cursor),f.transformCameraUpdate=this._onCameraUpdate,f.on("style.load",()=>{var a;this._styleComponents={light:f.getLight(),sky:f.getSky(),projection:(a=f.getProjection)==null?void 0:a.call(f),terrain:f.getTerrain()},this._updateStyleComponents(this.props)}),f.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const a in bk)f.on(a,this._onPointerEvent);for(const a in wk)f.on(a,this._onCameraEvent);for(const a in Sk)f.on(a,this._onEvent);this._map=f}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),$h.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:n}=t;if(n){const i=this._map;if(n.width!==i.transform.width||n.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(t){const n=this._map,i=n.transform;if(!n.isMoving()){const d=vk(i,t);if(Object.keys(d).length>0)return this._internalUpdate=!0,n.jumpTo(d),this._internalUpdate=!1,!0}return!1}_updateSettings(t,n){const i=this._map;let u=!1;for(const d of NZ)if(d in t&&!Si(t[d],n[d])){u=!0;const f=i[`set${d[0].toUpperCase()}${d.slice(1)}`];f==null||f.call(i,t[d])}return u}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:i=xk,styleDiffing:u=!0}=t,d={diff:u};"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(_k(i),d)}}_updateStyleComponents({light:t,projection:n,sky:i,terrain:u}){var a,b;const d=this._map,f=this._styleComponents;d.style._loaded&&(t&&!Si(t,f.light)&&(f.light=t,d.setLight(t)),n&&!Si(n,f.projection)&&n!==((a=f.projection)==null?void 0:a.type)&&(f.projection=typeof n=="string"?{type:n}:n,(b=d.setProjection)==null||b.call(d,f.projection)),i&&!Si(i,f.sky)&&(f.sky=i,d.setSky(i)),u!==void 0&&!Si(u,f.terrain)&&(!u||d.getSource(u.source))&&(f.terrain=u,d.setTerrain(u)))}_updateHandlers(t,n){const i=this._map;for(const u of VZ){const d=t[u]??!0,f=n[u]??!0;Si(d,f)||(d?i[u].enable(d):i[u].disable())}}_queryRenderedFeatures(t){const n=this._map,{interactiveLayerIds:i=[]}=this.props;try{return n.queryRenderedFeatures(t,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(t){var u;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const d=t.type,f=((u=this._hoveredFeatures)==null?void 0:u.length)>0,a=this._queryRenderedFeatures(t.point),b=a.length>0;!b&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=a,b&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}}$h.savedMaps=[];const UZ=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function HZ(e){if(!e)return null;const t=e.map,n={getMap:()=>t};for(const i of GZ(t))!(i in n)&&!UZ.includes(i)&&(n[i]=t[i].bind(t));return n}function GZ(e){const t=new Set;let n=e;for(;n;){for(const i of Object.getOwnPropertyNames(n))i[0]!=="_"&&typeof e[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&t.add(i);n=Object.getPrototypeOf(n)}return Array.from(t)}const WZ=typeof document<"u"?L.useLayoutEffect:L.useEffect;function ZZ(e,t){const{RTLTextPlugin:n,maxParallelImageRequests:i,workerCount:u,workerUrl:d}=t;if(n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:f,lazy:a=!0}=typeof n=="string"?{pluginUrl:n}:n;e.setRTLTextPlugin(f,b=>{b&&console.error(b)},a)}i!==void 0&&e.setMaxParallelImageRequests(i),u!==void 0&&e.setWorkerCount(u),d!==void 0&&e.setWorkerUrl(d)}const Bu=L.createContext(null);function qZ(e,t){const n=L.useContext(t$),[i,u]=L.useState(null),d=L.useRef(),{current:f}=L.useRef({mapLib:null,map:null});L.useEffect(()=>{const C=e.mapLib;let I=!0,k;return Promise.resolve(C||BZ(()=>Promise.resolve().then(()=>fq),[])).then(M=>{if(!I)return;if(!M)throw new Error("Invalid mapLib");const R="Map"in M?M:M.default;if(!R.Map)throw new Error("Invalid mapLib");ZZ(R,e),e.reuseMaps&&(k=$h.reuse(e,d.current)),k||(k=new $h(R.Map,e,d.current)),f.map=HZ(k),f.mapLib=R,u(k),n==null||n.onMapMount(f.map,e.id)}).catch(M=>{const{onError:R}=e;R?R({type:"error",target:null,originalEvent:null,error:M}):console.error(M)}),()=>{I=!1,k&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?k.recycle():k.destroy())}},[]),WZ(()=>{i&&i.setProps(e)}),L.useImperativeHandle(t,()=>f.map,[i]);const a=L.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return L.createElement("div",{id:e.id,ref:d,style:a},i&&L.createElement(Bu.Provider,{value:f},L.createElement("div",{"mapboxgl-children":"",style:b},e.children)))}const r$=L.forwardRef(qZ),KZ=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ol(e,t){if(!e||!t)return;const n=e.style;for(const i in t){const u=t[i];Number.isFinite(u)&&!KZ.test(i)?n[i]=`${u}px`:n[i]=u}}function n$(e,t){if(e===t)return null;const n=Ck(e),i=Ck(t),u=[];for(const d of i)n.has(d)||u.push(d);for(const d of n)i.has(d)||u.push(d);return u.length===0?null:u}function Ck(e){return new Set(e?e.trim().split(/\s+/):[])}const XZ=L.memo(L.forwardRef((e,t)=>{const{map:n,mapLib:i}=L.useContext(Bu),u=L.useRef({props:e}),d=L.useMemo(()=>{let F=!1;L.Children.forEach(e.children,ne=>{ne&&(F=!0)});const j={...e,element:F?document.createElement("div"):void 0},O=new i.Marker(j);return O.setLngLat([e.longitude,e.latitude]),O.getElement().addEventListener("click",ne=>{var Y,q;(q=(Y=u.current.props).onClick)==null||q.call(Y,{type:"click",target:O,originalEvent:ne})}),O.on("dragstart",ne=>{var q,ce;const Y=ne;Y.lngLat=d.getLngLat(),(ce=(q=u.current.props).onDragStart)==null||ce.call(q,Y)}),O.on("drag",ne=>{var q,ce;const Y=ne;Y.lngLat=d.getLngLat(),(ce=(q=u.current.props).onDrag)==null||ce.call(q,Y)}),O.on("dragend",ne=>{var q,ce;const Y=ne;Y.lngLat=d.getLngLat(),(ce=(q=u.current.props).onDragEnd)==null||ce.call(q,Y)}),O},[]);L.useEffect(()=>(d.addTo(n.getMap()),()=>{d.remove()}),[]);const{longitude:f,latitude:a,offset:b,style:C,draggable:I=!1,popup:k=null,rotation:M=0,rotationAlignment:R="auto",pitchAlignment:$="auto"}=e;L.useEffect(()=>{ol(d.getElement(),C)},[C]),L.useImperativeHandle(t,()=>d,[]);const G=u.current.props;(d.getLngLat().lng!==f||d.getLngLat().lat!==a)&&d.setLngLat([f,a]),b&&!FZ(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==I&&d.setDraggable(I),d.getRotation()!==M&&d.setRotation(M),d.getRotationAlignment()!==R&&d.setRotationAlignment(R),d.getPitchAlignment()!==$&&d.setPitchAlignment($),d.getPopup()!==k&&d.setPopup(k);const ee=n$(G.className,e.className);if(ee)for(const F of ee)d.toggleClassName(F);return u.current.props=e,Gm.createPortal(e.children,d.getElement())}));L.memo(L.forwardRef((e,t)=>{const{map:n,mapLib:i}=L.useContext(Bu),u=L.useMemo(()=>document.createElement("div"),[]),d=L.useRef({props:e}),f=L.useMemo(()=>{const a={...e},b=new i.Popup(a);return b.setLngLat([e.longitude,e.latitude]),b.once("open",C=>{var I,k;(k=(I=d.current.props).onOpen)==null||k.call(I,C)}),b},[]);if(L.useEffect(()=>{const a=b=>{var C,I;(I=(C=d.current.props).onClose)==null||I.call(C,b)};return f.on("close",a),f.setDOMContent(u).addTo(n.getMap()),()=>{f.off("close",a),f.isOpen()&&f.remove()}},[]),L.useEffect(()=>{ol(f.getElement(),e.style)},[e.style]),L.useImperativeHandle(t,()=>f,[]),f.isOpen()){const a=d.current.props;(f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Si(a.offset,e.offset)&&f.setOffset(e.offset),(a.anchor!==e.anchor||a.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth));const b=n$(a.className,e.className);if(b)for(const C of b)f.toggleClassName(C);d.current.props=e}return Gm.createPortal(e.children,u)}));function Xa(e,t,n,i){const u=L.useContext(Bu),d=L.useMemo(()=>e(u),[]);return L.useEffect(()=>{const f=t,a=typeof t=="function"?t:null,{map:b}=u;return b.hasControl(d)||b.addControl(d,f==null?void 0:f.position),()=>{a&&a(u),b.hasControl(d)&&b.removeControl(d)}},[]),d}function YZ(e){const t=Xa(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return L.useEffect(()=>{ol(t._container,e.style)},[e.style]),null}const o$=L.memo(YZ);function JZ(e){const t=Xa(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return L.useEffect(()=>{ol(t._controlContainer,e.style)},[e.style]),null}const i$=L.memo(JZ);function QZ(e,t){const n=L.useRef({props:e}),i=Xa(({mapLib:u})=>{const d=new u.GeolocateControl(e),f=d._setupUI;return d._setupUI=()=>{d._container.hasChildNodes()||f()},d.on("geolocate",a=>{var b,C;(C=(b=n.current.props).onGeolocate)==null||C.call(b,a)}),d.on("error",a=>{var b,C;(C=(b=n.current.props).onError)==null||C.call(b,a)}),d.on("outofmaxbounds",a=>{var b,C;(C=(b=n.current.props).onOutOfMaxBounds)==null||C.call(b,a)}),d.on("trackuserlocationstart",a=>{var b,C;(C=(b=n.current.props).onTrackUserLocationStart)==null||C.call(b,a)}),d.on("trackuserlocationend",a=>{var b,C;(C=(b=n.current.props).onTrackUserLocationEnd)==null||C.call(b,a)}),d},{position:e.position});return n.current.props=e,L.useImperativeHandle(t,()=>i,[]),L.useEffect(()=>{ol(i._container,e.style)},[e.style]),null}L.memo(L.forwardRef(QZ));function eq(e){const t=Xa(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return L.useEffect(()=>{ol(t._container,e.style)},[e.style]),null}const a$=L.memo(eq);function tq(e){const t=Xa(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),n=L.useRef(e),i=n.current;n.current=e;const{style:u}=e;return e.maxWidth!==void 0&&e.maxWidth!==i.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==i.unit&&t.setUnit(e.unit),L.useEffect(()=>{ol(t._container,u)},[u]),null}L.memo(tq);function rq(e){const t=Xa(({mapLib:n})=>new n.TerrainControl(e),{position:e.position});return L.useEffect(()=>{ol(t._container,e.style)},[e.style]),null}L.memo(rq);function nq(e){const t=Xa(({mapLib:n})=>new n.LogoControl(e),{position:e.position});return L.useEffect(()=>{ol(t._container,e.style)},[e.style]),null}L.memo(nq);function d0(e,t){if(!e)throw new Error(t)}let oq=0;function iq(e,t,n){if(e.style&&e.style._loaded){const i={...n};return delete i.id,delete i.children,e.addSource(t,i),e.getSource(t)}return null}function aq(e,t,n){var f,a,b;d0(t.id===n.id,"source id changed"),d0(t.type===n.type,"source type changed");let i="",u=0;for(const C in t)C!=="children"&&C!=="id"&&!Si(n[C],t[C])&&(i=C,u++);if(!u)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else switch(i){case"coordinates":(f=e.setCoordinates)==null||f.call(e,t.coordinates);break;case"url":(a=e.setUrl)==null||a.call(e,t.url);break;case"tiles":(b=e.setTiles)==null||b.call(e,t.tiles);break;default:console.warn(`Unable to update <Source> prop: ${i}`)}}function qh(e){const t=L.useContext(Bu).map.getMap(),n=L.useRef(e),[,i]=L.useState(0),u=L.useMemo(()=>e.id||`jsx-source-${oq++}`,[]);L.useEffect(()=>{if(t){const f=()=>setTimeout(()=>i(a=>a+1),0);return t.on("styledata",f),f(),()=>{var a;if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(u)){const b=(a=t.getStyle())==null?void 0:a.layers;if(b)for(const C of b)C.source===u&&t.removeLayer(C.id);t.removeSource(u)}}}},[t]);let d=t&&t.style&&t.getSource(u);return d?aq(d,e,n.current):d=iq(t,u,e),n.current=e,d&&L.Children.map(e.children,f=>f&&L.cloneElement(f,{source:u}))||null}function sq(e,t,n,i){if(d0(n.id===i.id,"layer id changed"),d0(n.type===i.type,"layer type changed"),n.type==="custom"||i.type==="custom")return;const{layout:u={},paint:d={},filter:f,minzoom:a,maxzoom:b,beforeId:C}=n;if(C!==i.beforeId&&e.moveLayer(t,C),u!==i.layout){const I=i.layout||{};for(const k in u)Si(u[k],I[k])||e.setLayoutProperty(t,k,u[k]);for(const k in I)u.hasOwnProperty(k)||e.setLayoutProperty(t,k,void 0)}if(d!==i.paint){const I=i.paint||{};for(const k in d)Si(d[k],I[k])||e.setPaintProperty(t,k,d[k]);for(const k in I)d.hasOwnProperty(k)||e.setPaintProperty(t,k,void 0)}Si(f,i.filter)||e.setFilter(t,f),(a!==i.minzoom||b!==i.maxzoom)&&e.setLayerZoomRange(t,a,b)}function lq(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const i={...n,id:t};delete i.beforeId,e.addLayer(i,n.beforeId)}}let cq=0;function qr(e){const t=L.useContext(Bu).map.getMap(),n=L.useRef(e),[,i]=L.useState(0),u=L.useMemo(()=>e.id||`jsx-layer-${cq++}`,[]);if(L.useEffect(()=>{if(t){const f=()=>i(a=>a+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(u)&&t.removeLayer(u)}}},[t]),t&&t.style&&t.getLayer(u))try{sq(t,u,e,n.current)}catch(f){console.warn(f)}else lq(t,u,e);return n.current=e,null}const uq={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},dq={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},hq={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},pq={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},S2={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:uq,secondaryTextPaint:dq,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:hq,secondaryTextPaint:pq,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var s$={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.1/LICENSE.txt
 */(function(e,t){(function(n,i){e.exports=i()})(J1,function(){var n={},i={};function u(f,a,b){if(i[f]=b,f==="index"){var C="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",I={};return i.shared(I),i.index(n,I),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),n}}u("shared",["exports"],function(f){function a(c,o,l,h){return new(l||(l=Promise))(function(g,_){function x(A){try{T(h.next(A))}catch(D){_(D)}}function S(A){try{T(h.throw(A))}catch(D){_(D)}}function T(A){var D;A.done?g(A.value):(D=A.value,D instanceof l?D:new l(function(N){N(D)})).then(x,S)}T((h=h.apply(c,o||[])).next())})}function b(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var C,I;function k(){if(I)return C;function c(o,l){this.x=o,this.y=l}return I=1,C=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,l){return this.clone()._rotateAround(o,l)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var l=o.x-this.x,h=o.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,l){return Math.atan2(this.x*l-this.y*o,this.x*o+this.y*l)},_matMult:function(o){var l=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=l,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var l=Math.cos(o),h=Math.sin(o),g=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=g,this},_rotateAround:function(o,l){var h=Math.cos(o),g=Math.sin(o),_=l.y+g*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-g*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(o){return o instanceof c?o:Array.isArray(o)?new c(o[0],o[1]):o},C}typeof SuppressedError=="function"&&SuppressedError;var M,R,$=b(k()),G=function(){if(R)return M;function c(o,l,h,g){this.cx=3*o,this.bx=3*(h-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=l,this.p2x=h,this.p2y=g}return R=1,M=c,c.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,l){if(l===void 0&&(l=1e-6),o<0)return 0;if(o>1)return 1;for(var h=o,g=0;g<8;g++){var _=this.sampleCurveX(h)-o;if(Math.abs(_)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var S=0,T=1;for(h=o,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-o)<l));g++)o>_?S=h:T=h,h=.5*(T-S)+S;return h},solve:function(o,l){return this.sampleCurveY(this.solveCurveX(o,l))}},M}(),ee=b(G);let F,j;function O(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function ne(){if(j==null&&(j=!1,O())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let h=0;h<5*5;h++){const g=4*h;o.fillStyle=`rgb(${g},${g+1},${g+2})`,o.fillRect(h%5,Math.floor(h/5),1,1)}const l=o.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){j=!0;break}}}return j||!1}var Y=1e-6,q=typeof Float32Array<"u"?Float32Array:Array;function ce(){var c=new q(9);return q!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function he(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ze(){var c=new q(3);return q!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function J(c){return Math.hypot(c[0],c[1],c[2])}function Ee(c,o,l){var h=new q(3);return h[0]=c,h[1]=o,h[2]=l,h}function Be(c,o,l){return c[0]=o[0]+l[0],c[1]=o[1]+l[1],c[2]=o[2]+l[2],c}function je(c,o,l){return c[0]=o[0]*l,c[1]=o[1]*l,c[2]=o[2]*l,c}function ot(c,o,l){var h=o[0],g=o[1],_=o[2],x=l[0],S=l[1],T=l[2];return c[0]=g*T-_*S,c[1]=_*x-h*T,c[2]=h*S-g*x,c}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var He,De=J;function Ge(c,o,l){var h=o[0],g=o[1],_=o[2],x=o[3];return c[0]=l[0]*h+l[4]*g+l[8]*_+l[12]*x,c[1]=l[1]*h+l[5]*g+l[9]*_+l[13]*x,c[2]=l[2]*h+l[6]*g+l[10]*_+l[14]*x,c[3]=l[3]*h+l[7]*g+l[11]*_+l[15]*x,c}function Ue(){var c=new q(4);return q!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Ze(c,o,l,h){var g=.5*Math.PI/180;o*=g,l*=g,h*=g;var _=Math.sin(o),x=Math.cos(o),S=Math.sin(l),T=Math.cos(l),A=Math.sin(h),D=Math.cos(h);return c[0]=_*T*D-x*S*A,c[1]=x*S*D+_*T*A,c[2]=x*T*A-_*S*D,c[3]=x*T*D+_*S*A,c}function at(){var c=new q(2);return q!=Float32Array&&(c[0]=0,c[1]=0),c}function pt(c,o){var l=new q(2);return l[0]=c,l[1]=o,l}ze(),He=new q(4),q!=Float32Array&&(He[0]=0,He[1]=0,He[2]=0,He[3]=0),ze(),Ee(1,0,0),Ee(0,1,0),Ue(),Ue(),ce(),at();const ct=8192;function Ht(c,o,l){return o*(ct/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function Dt(c,o){return(c%o+o)%o}function Nt(c,o,l){return c*(1-l)+o*l}function tr(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,l=o*c;return 4*(c<.5?l:3*(c-o)+l-.75)}function Tt(c,o,l,h){const g=new ee(c,o,l,h);return _=>g.solve(_)}const st=Tt(.25,.1,.25,1);function Ct(c,o,l){return Math.min(l,Math.max(o,c))}function Mt(c,o,l){const h=l-o,g=((c-o)%h+h)%h+o;return g===o?l:g}function qt(c,...o){for(const l of o)for(const h in l)c[h]=l[h];return c}let nr=1;function ur(c,o,l){const h={};for(const g in c)h[g]=o.call(this,c[g],g,c);return h}function gr(c,o,l){const h={};for(const g in c)o.call(this,c[g],g,c)&&(h[g]=c[g]);return h}function Kt(c){return Array.isArray(c)?c.map(Kt):typeof c=="object"&&c?ur(c,Kt):c}const Lt={};function Qt(c){Lt[c]||(typeof console<"u"&&console.warn(c),Lt[c]=!0)}function Vt(c,o,l){return(l.y-c.y)*(o.x-c.x)>(o.y-c.y)*(l.x-c.x)}function mr(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let kr=null;function Ur(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function pr(c,o,l,h,g){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(c,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),T=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(T,function(A,D,N,W,Q){const re=4*Math.max(-D,0),se=(Math.max(0,N)-N)*W*4+re,de=4*W,ye=Math.max(0,D),Oe=Math.max(0,N);return{rect:{x:ye,y:Oe,width:Math.min(A.width,D+W)-ye,height:Math.min(A.height,N+Q)-Oe},layout:[{offset:se,stride:de}]}}(c,o,l,h,g)),S)for(let A=0;A<T.length;A+=4){const D=T[A];T[A]=T[A+2],T[A+2]=D}return T}finally{_.close()}})}let $r,jr;function br(c,o,l,h){return c.addEventListener(o,l,h),{unsubscribe:()=>{c.removeEventListener(o,l,h)}}}function dr(c){return c*Math.PI/180}function ar(c){return c/Math.PI*180}const Jt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},yr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},wr="AbortError";function _e(){return new Error(wr)}const X={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function te(c){return X.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const H="global-dispatcher";class oe extends Error{constructor(o,l,h,g){super(`AJAXError: ${l} (${o}): ${h}`),this.status=o,this.statusText=l,this.url=h,this.body=g}}const xe=()=>mr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ae=function(c,o){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const h=te(c.url);if(h)return h(c,o);if(mr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:H},o)}if(!(/^file:/.test(l=c.url)||/^file:/.test(xe())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return a(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:xe(),signal:g.signal});let x,S;h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{x=yield fetch(_)}catch(A){throw new oe(0,A.message,h.url,new Blob)}if(!x.ok){const A=yield x.blob();throw new oe(x.status,x.statusText,h.url,A)}S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const T=yield S;if(g.signal.aborted)throw _e();return{data:T,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(c,o);if(mr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:H},o)}var l;return function(h,g){return new Promise((_,x)=>{var S;const T=new XMLHttpRequest;T.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(T.responseType="arraybuffer");for(const A in h.headers)T.setRequestHeader(A,h.headers[A]);h.type==="json"&&(T.responseType="text",!((S=h.headers)===null||S===void 0)&&S.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials=h.credentials==="include",T.onerror=()=>{x(new Error(T.statusText))},T.onload=()=>{if(!g.signal.aborted)if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let A=T.response;if(h.type==="json")try{A=JSON.parse(T.response)}catch(D){return void x(D)}_({data:A,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{const A=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});x(new oe(T.status,T.statusText,h.url,A))}},g.signal.addEventListener("abort",()=>{T.abort(),x(_e())}),T.send(h.body)})}(c,o)};function Fe(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const o=new URL(c),l=window.location;return o.protocol===l.protocol&&o.host===l.host}function we(c,o,l){l[c]&&l[c].indexOf(o)!==-1||(l[c]=l[c]||[],l[c].push(o))}function qe(c,o,l){if(l&&l[c]){const h=l[c].indexOf(o);h!==-1&&l[c].splice(h,1)}}class We{constructor(o,l={}){qt(this,l),this.type=o}}class $e extends We{constructor(o,l={}){super("error",qt({error:o},l))}}class nt{on(o,l){return this._listeners=this._listeners||{},we(o,l,this._listeners),{unsubscribe:()=>{this.off(o,l)}}}off(o,l){return qe(o,l,this._listeners),qe(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},we(o,l,this._oneTimeListeners),this):new Promise(h=>this.once(o,h))}fire(o,l){typeof o=="string"&&(o=new We(o,l||{}));const h=o.type;if(this.listens(h)){o.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of g)S.call(this,o);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of _)qe(h,S,this._oneTimeListeners),S.call(this,o);const x=this._eventedParent;x&&(qt(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(o))}else o instanceof $e&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const mt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wt(c,o){const l={};for(const h in c)h!=="ref"&&(l[h]=c[h]);return mt.forEach(h=>{h in o&&(l[h]=o[h])}),l}function ge(c,o){if(Array.isArray(c)){if(!Array.isArray(o)||c.length!==o.length)return!1;for(let l=0;l<c.length;l++)if(!ge(c[l],o[l]))return!1;return!0}if(typeof c=="object"&&c!==null&&o!==null){if(typeof o!="object"||Object.keys(c).length!==Object.keys(o).length)return!1;for(const l in c)if(!ge(c[l],o[l]))return!1;return!0}return c===o}function Re(c,o){c.push(o)}function Ve(c,o,l){Re(l,{command:"addSource",args:[c,o[c]]})}function ut(c,o,l){Re(o,{command:"removeSource",args:[c]}),l[c]=!0}function vt(c,o,l,h){ut(c,l,h),Ve(c,o,l)}function It(c,o,l){let h;for(h in c[l])if(Object.prototype.hasOwnProperty.call(c[l],h)&&h!=="data"&&!ge(c[l][h],o[l][h]))return!1;for(h in o[l])if(Object.prototype.hasOwnProperty.call(o[l],h)&&h!=="data"&&!ge(c[l][h],o[l][h]))return!1;return!0}function bt(c,o,l,h,g,_){c=c||{},o=o||{};for(const x in c)Object.prototype.hasOwnProperty.call(c,x)&&(ge(c[x],o[x])||l.push({command:_,args:[h,x,o[x],g]}));for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&!Object.prototype.hasOwnProperty.call(c,x)&&(ge(c[x],o[x])||l.push({command:_,args:[h,x,o[x],g]}))}function xt(c){return c.id}function Bt(c,o){return c[o.id]=o,c}class Je{constructor(o,l,h,g){this.message=(o?`${o}: `:"")+h,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function Xt(c,...o){for(const l of o)for(const h in l)c[h]=l[h];return c}class zt extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}class lr{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[h,g]of l)this.bindings[h]=g}concat(o){return new lr(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const rt={kind:"null"},Ie={kind:"number"},dt={kind:"string"},_t={kind:"boolean"},$t={kind:"color"},Or={kind:"projectionDefinition"},xr={kind:"object"},rr={kind:"value"},sn={kind:"collator"},Lo={kind:"formatted"},rn={kind:"padding"},zi={kind:"colorArray"},So={kind:"numberArray"},Co={kind:"resolvedImage"},Ar={kind:"variableAnchorOffsetCollection"};function Xr(c,o){return{kind:"array",itemType:c,N:o}}function jt(c){if(c.kind==="array"){const o=jt(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const Bn=[rt,Ie,dt,_t,$t,Or,Lo,xr,Xr(rr),rn,So,zi,Co,Ar];function nn(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!nn(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const l of Bn)if(!nn(l,o))return null}}return`Expected ${jt(c)} but found ${jt(o)} instead.`}function zr(c,o){return o.some(l=>l.kind===c.kind)}function Pn(c,o){return o.some(l=>l==="null"?c===null:l==="array"?Array.isArray(c):l==="object"?c&&!Array.isArray(c)&&typeof c=="object":l===typeof c)}function $o(c,o){return c.kind==="array"&&o.kind==="array"?c.itemType.kind===o.itemType.kind&&typeof c.N=="number":c.kind===o.kind}const li=.96422,Di=.82521,fg=4/29,sl=6/29,mg=3*sl*sl,gg=sl*sl*sl,wc=Math.PI/180,U_=180/Math.PI;function yg(c){return(c%=360)<0&&(c+=360),c}function ll([c,o,l,h]){let g,_;const x=Yh((.2225045*(c=Xh(c))+.7168786*(o=Xh(o))+.0606169*(l=Xh(l)))/1);c===o&&o===l?g=_=x:(g=Yh((.4360747*c+.3850649*o+.1430804*l)/li),_=Yh((.0139322*c+.0971045*o+.7141733*l)/Di));const S=116*x-16;return[S<0?0:S,500*(g-x),200*(x-_),h]}function Xh(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Yh(c){return c>gg?Math.pow(c,1/3):c/mg+fg}function vg([c,o,l,h]){let g=(c+16)/116,_=isNaN(o)?g:g+o/500,x=isNaN(l)?g:g-l/200;return g=1*Vu(g),_=li*Vu(_),x=Di*Vu(x),[Nu(3.1338561*_-1.6168667*g-.4906146*x),Nu(-.9787684*_+1.9161415*g+.033454*x),Nu(.0719453*_-.2289914*g+1.4052427*x),h]}function Nu(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function Vu(c){return c>sl?c*c*c:mg*(c-fg)}const aa=Object.hasOwn||function(c,o){return Object.prototype.hasOwnProperty.call(c,o)};function Sr(c,o){return aa(c,o)?c[o]:void 0}function Ea(c){return parseInt(c.padEnd(2,c),16)/255}function ka(c,o){return Ts(o?c/100:c,0,1)}function Ts(c,o,l){return Math.min(Math.max(o,c),l)}function Jh(c){return!c.some(Number.isNaN)}const Qh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function vi(c,o,l){return c+l*(o-c)}function Ma(c,o,l){return c.map((h,g)=>vi(h,o[g],l))}class Cr{constructor(o,l,h,g=1,_=!0){this.r=o,this.g=l,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[o,l,h,g]))}static parse(o){if(o instanceof Cr)return o;if(typeof o!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Sr(Qh,h);if(g){const[x,S,T]=g;return[x/255,S/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Ea(h.slice(S,S+=x)),Ea(h.slice(S,S+=x)),Ea(h.slice(S,S+=x)),Ea(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,T,A,D,N,W,Q,re,se,de,ye,Oe]=x,Pe=[D||" ",Q||" ",de].join("");if(Pe==="  "||Pe==="  /"||Pe===",,"||Pe===",,,"){const K=[A,W,se].join(""),ue=K==="%%%"?100:K===""?255:0;if(ue){const Te=[Ts(+T/ue,0,1),Ts(+N/ue,0,1),Ts(+re/ue,0,1),ye?ka(+ye,Oe):1];if(Jh(Te))return Te}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,T,A,D,N,W,Q,re]=_,se=[T||" ",D||" ",W].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const de=[+S,Ts(+A,0,100),Ts(+N,0,100),Q?ka(+Q,re):1];if(Jh(de))return function([ye,Oe,Pe,K]){function ue(Te){const Ye=(Te+ye/30)%12,ft=Oe*Math.min(Pe,1-Pe);return Pe-ft*Math.max(-1,Math.min(Ye-3,9-Ye,1))}return ye=yg(ye),Oe/=100,Pe/=100,[ue(0),ue(8),ue(4),K]}(de)}}}(o);return l?new Cr(...l,!1):void 0}get rgb(){const{r:o,g:l,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[o/_,l/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(o){const[l,h,g,_]=ll(o),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?yg(Math.atan2(g,h)*U_):NaN,x,l,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ll(this.rgb))}overwriteGetter(o,l){return Object.defineProperty(this,o,{value:l}),l}toString(){const[o,l,h,g]=this.rgb;return`rgba(${[o,l,h].map(_=>Math.round(255*_)).join(",")},${g})`}static interpolate(o,l,h,g="rgb"){switch(g){case"rgb":{const[_,x,S,T]=Ma(o.rgb,l.rgb,h);return new Cr(_,x,S,T,!1)}case"hcl":{const[_,x,S,T]=o.hcl,[A,D,N,W]=l.hcl;let Q,re;if(isNaN(_)||isNaN(A))isNaN(_)?isNaN(A)?Q=NaN:(Q=A,S!==1&&S!==0||(re=D)):(Q=_,N!==1&&N!==0||(re=x));else{let Pe=A-_;A>_&&Pe>180?Pe-=360:A<_&&_-A>180&&(Pe+=360),Q=_+h*Pe}const[se,de,ye,Oe]=function([Pe,K,ue,Te]){return Pe=isNaN(Pe)?0:Pe*wc,vg([ue,Math.cos(Pe)*K,Math.sin(Pe)*K,Te])}([Q,re??vi(x,D,h),vi(S,N,h),vi(T,W,h)]);return new Cr(se,de,ye,Oe,!1)}case"lab":{const[_,x,S,T]=vg(Ma(o.lab,l.lab,h));return new Cr(_,x,S,T,!1)}}}}Cr.black=new Cr(0,0,0,1),Cr.white=new Cr(1,1,1,1),Cr.transparent=new Cr(0,0,0,0),Cr.red=new Cr(1,0,0,1);class Sc{constructor(o,l,h){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Uu=["bottom","center","top"];class ep{constructor(o,l,h,g,_,x){this.text=o,this.image=l,this.scale=h,this.fontStack=g,this.textColor=_,this.verticalAlign=x}}class Po{constructor(o){this.sections=o}static fromString(o){return new Po([new ep(o,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Po?o:Po.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class Fn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Fn)return o;if(typeof o=="number")return new Fn([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const l of o)if(typeof l!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Fn(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,l,h){return new Fn(Ma(o.values,l.values,h))}}class To{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof To)return o;if(typeof o=="number")return new To([o]);if(Array.isArray(o)){for(const l of o)if(typeof l!="number")return;return new To(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,l,h){return new To(Ma(o.values,l.values,h))}}class ro{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ro)return o;if(typeof o=="string"){const h=Cr.parse(o);return h?new ro([h]):void 0}if(!Array.isArray(o))return;const l=[];for(const h of o){if(typeof h!="string")return;const g=Cr.parse(h);if(!g)return;l.push(g)}return new ro(l)}toString(){return JSON.stringify(this.values)}static interpolate(o,l,h,g="rgb"){const _=[];if(o.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${o.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let x=0;x<o.values.length;x++)_.push(Cr.interpolate(o.values[x],l.values[x],h,g));return new ro(_)}}class vn extends Error{constructor(o){super(o),this.name="RuntimeError"}toJSON(){return this.message}}const Hu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Mr)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let l=0;l<o.length;l+=2){const h=o[l],g=o[l+1];if(typeof h!="string"||!Hu.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Mr(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,l,h){const g=o.values,_=l.values;if(g.length!==_.length)throw new vn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${l.toString()}`);const x=[];for(let S=0;S<g.length;S+=2){if(g[S]!==_[S])throw new vn(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${g[S]}, to[${S}]: ${_[S]}`);x.push(g[S]);const[T,A]=g[S+1],[D,N]=_[S+1];x.push([vi(T,D,h),vi(A,N,h)])}return new Mr(x)}}class Ko{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Ko({name:o,available:!1}):null}}class fr{constructor(o,l,h){this.from=o,this.to=l,this.transition=h}static interpolate(o,l,h){return new fr(o,l,h)}static parse(o){return o instanceof fr?o:Array.isArray(o)&&o.length===3&&typeof o[0]=="string"&&typeof o[1]=="string"&&typeof o[2]=="number"?new fr(o[0],o[1],o[2]):typeof o=="object"&&typeof o.from=="string"&&typeof o.to=="string"&&typeof o.transition=="number"?new fr(o.from,o.to,o.transition):typeof o=="string"?new fr(o,o,1):void 0}}function vr(c,o,l,h){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[c,o,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[c,o,l,h]:[c,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Is(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof fr||c instanceof Cr||c instanceof Sc||c instanceof Po||c instanceof Fn||c instanceof To||c instanceof ro||c instanceof Mr||c instanceof Ko)return!0;if(Array.isArray(c)){for(const o of c)if(!Is(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!Is(c[o]))return!1;return!0}return!1}function hr(c){if(c===null)return rt;if(typeof c=="string")return dt;if(typeof c=="boolean")return _t;if(typeof c=="number")return Ie;if(c instanceof Cr)return $t;if(c instanceof fr)return Or;if(c instanceof Sc)return sn;if(c instanceof Po)return Lo;if(c instanceof Fn)return rn;if(c instanceof To)return So;if(c instanceof ro)return zi;if(c instanceof Mr)return Ar;if(c instanceof Ko)return Co;if(Array.isArray(c)){const o=c.length;let l;for(const h of c){const g=hr(h);if(l){if(l===g)continue;l=rr;break}l=g}return Xr(l||rr,o)}return xr}function Es(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof Cr||c instanceof fr||c instanceof Po||c instanceof Fn||c instanceof To||c instanceof ro||c instanceof Mr||c instanceof Ko?c.toString():JSON.stringify(c)}class Oo{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(o.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Is(o[1]))return l.error("invalid value");const h=o[1];let g=hr(h);const _=l.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Oo(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const cl={string:dt,number:Ie,boolean:_t,object:xr};class Xo{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let h,g=1;const _=o[0];if(_==="array"){let S,T;if(o.length>2){const A=o[1];if(typeof A!="string"||!(A in cl)||A==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=cl[A],g++}else S=rr;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);T=o[2],g++}h=Xr(S,T)}else{if(!cl[_])throw new Error(`Types doesn't contain name = ${_}`);h=cl[_]}const x=[];for(;g<o.length;g++){const S=l.parse(o[g],g,rr);if(!S)return null;x.push(S)}return new Xo(h,x)}evaluate(o){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(o);if(!nn(this.type,hr(h)))return h;if(l===this.args.length-1)throw new vn(`Expected value to be of type ${jt(this.type)}, but found ${jt(hr(h))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const tp={"to-boolean":_t,"to-color":$t,"to-number":Ie,"to-string":dt};class sa{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const h=o[0];if(!tp[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&o.length!==2)return l.error("Expected one argument.");const g=tp[h],_=[];for(let x=1;x<o.length;x++){const S=l.parse(o[x],x,rr);if(!S)return null;_.push(S)}return new sa(g,_)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let l,h;for(const g of this.args){if(l=g.evaluate(o),h=null,l instanceof Cr)return l;if(typeof l=="string"){const _=o.parseColor(l);if(_)return _}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:vr(l[0],l[1],l[2],l[3]),!h))return new Cr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new vn(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(o);const g=Fn.parse(l);if(g)return g}throw new vn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const h of this.args){l=h.evaluate(o);const g=To.parse(l);if(g)return g}throw new vn(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const h of this.args){l=h.evaluate(o);const g=ro.parse(l);if(g)return g}throw new vn(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(o);const g=Mr.parse(l);if(g)return g}throw new vn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(o),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new vn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Po.fromString(Es(this.args[0].evaluate(o)));case"resolvedImage":return Ko.fromString(Es(this.args[0].evaluate(o)));case"projectionDefinition":return this.args[0].evaluate(o);default:return Es(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const _g=["Unknown","Point","LineString","Polygon"];class xg{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?_g[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let l=this._parseColorCache.get(o);return l||(l=Cr.parse(o),this._parseColorCache.set(o,l)),l}}class Cc{constructor(o,l,h=[],g,_=new lr,x=[]){this.registry=o,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=l}parse(o,l,h,g,_={}){return l?this.concat(l,h,g)._parse(o,_):this._parse(o,_)}_parse(o,l){function h(g,_,x){return x==="assert"?new Xo(_,[g]):x==="coerce"?new sa(_,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(o,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,T=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||T.kind!=="value"){if(S.kind==="projectionDefinition"&&["string","array"].includes(T.kind)||["color","formatted","resolvedImage"].includes(S.kind)&&["value","string"].includes(T.kind)||["padding","numberArray"].includes(S.kind)&&["value","number","array"].includes(T.kind)||S.kind==="colorArray"&&["value","string","array"].includes(T.kind)||S.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(T.kind))x=h(x,S,l.typeAnnotation||"coerce");else if(this.checkSubtype(S,T))return null}else x=h(x,S,l.typeAnnotation||"assert")}if(!(x instanceof Oo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new xg;try{x=new Oo(x.type,x.evaluate(S))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,h){const g=typeof o=="number"?this.path.concat(o):this.path,_=h?this.scope.concat(h):this.scope;return new Cc(this.registry,this._isConstant,g,l||null,_,this.errors)}error(o,...l){const h=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new zt(h,o))}checkSubtype(o,l){const h=nn(o,l);return h&&this.error(h),h}}class Pc{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const h=[];for(let _=1;_<o.length-1;_+=2){const x=o[_];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=l.parse(o[_+1],_+1);if(!S)return null;h.push([x,S])}const g=l.parse(o[o.length-1],o.length-1,l.expectedType,h);return g?new Pc(h,g):null}outputDefined(){return this.result.outputDefined()}}class Li{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(o.length!==2||typeof o[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=o[1];return l.scope.has(h)?new Li(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class no{constructor(o,l,h){this.type=o,this.index=l,this.input=h}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,Ie),g=l.parse(o[2],2,Xr(l.expectedType||rr));return h&&g?new no(g.type.itemType,h,g):null}evaluate(o){const l=this.index.evaluate(o),h=this.input.evaluate(o);if(l<0)throw new vn(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new vn(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new vn(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class ul{constructor(o,l){this.type=_t,this.needle=o,this.haystack=l}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,rr),g=l.parse(o[2],2,rr);return h&&g?zr(h.type,[_t,dt,Ie,rt,rr])?new ul(h,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${jt(h.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!h)return!1;if(!Pn(l,["boolean","string","number","null"]))throw new vn(`Expected first argument to be of type boolean, string, number or null, but found ${jt(hr(l))} instead.`);if(!Pn(h,["string","array"]))throw new vn(`Expected second argument to be of type array or string, but found ${jt(hr(h))} instead.`);return h.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Tc{constructor(o,l,h){this.type=Ie,this.needle=o,this.haystack=l,this.fromIndex=h}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,rr),g=l.parse(o[2],2,rr);if(!h||!g)return null;if(!zr(h.type,[_t,dt,Ie,rt,rr]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${jt(h.type)} instead`);if(o.length===4){const _=l.parse(o[3],3,Ie);return _?new Tc(h,g,_):null}return new Tc(h,g)}evaluate(o){const l=this.needle.evaluate(o),h=this.haystack.evaluate(o);if(!Pn(l,["boolean","string","number","null"]))throw new vn(`Expected first argument to be of type boolean, string, number or null, but found ${jt(hr(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(o)),Pn(h,["string"])){const _=h.indexOf(l,g);return _===-1?-1:[...h.slice(0,_)].length}if(Pn(h,["array"]))return h.indexOf(l,g);throw new vn(`Expected second argument to be of type array or string, but found ${jt(hr(h))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class dl{constructor(o,l,h,g,_,x){this.inputType=o,this.type=l,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let h,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const _={},x=[];for(let A=2;A<o.length-1;A+=2){let D=o[A];const N=o[A+1];Array.isArray(D)||(D=[D]);const W=l.concat(A);if(D.length===0)return W.error("Expected at least one branch label.");for(const re of D){if(typeof re!="number"&&typeof re!="string")return W.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return W.error("Numeric branch labels must be integer values.");if(h){if(W.checkSubtype(h,hr(re)))return null}else h=hr(re);if(_[String(re)]!==void 0)return W.error("Branch labels must be unique.");_[String(re)]=x.length}const Q=l.parse(N,A,g);if(!Q)return null;g=g||Q.type,x.push(Q)}const S=l.parse(o[1],1,rr);if(!S)return null;const T=l.parse(o[o.length-1],o.length-1,g);return T?S.type.kind!=="value"&&l.concat(1).checkSubtype(h,S.type)?null:new dl(h,g,S,_,x,T):null}evaluate(o){const l=this.input.evaluate(o);return(hr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class jn{constructor(o,l,h){this.type=o,this.branches=l,this.otherwise=h}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const g=[];for(let x=1;x<o.length-1;x+=2){const S=l.parse(o[x],x,_t);if(!S)return null;const T=l.parse(o[x+1],x+1,h);if(!T)return null;g.push([S,T]),h=h||T.type}const _=l.parse(o[o.length-1],o.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new jn(h,g,_)}evaluate(o){for(const[l,h]of this.branches)if(l.evaluate(o))return h.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,h]of this.branches)o(l),o(h);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Ic{constructor(o,l,h,g){this.type=o,this.input=l,this.beginIndex=h,this.endIndex=g}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const h=l.parse(o[1],1,rr),g=l.parse(o[2],2,Ie);if(!h||!g)return null;if(!zr(h.type,[Xr(rr),dt,rr]))return l.error(`Expected first argument to be of type array or string, but found ${jt(h.type)} instead`);if(o.length===4){const _=l.parse(o[3],3,Ie);return _?new Ic(h.type,h,g,_):null}return new Ic(h.type,h,g)}evaluate(o){const l=this.input.evaluate(o),h=this.beginIndex.evaluate(o);let g;if(this.endIndex&&(g=this.endIndex.evaluate(o)),Pn(l,["string"]))return[...l].slice(h,g).join("");if(Pn(l,["array"]))return l.slice(h,g);throw new vn(`Expected first argument to be of type array or string, but found ${jt(hr(l))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function hl(c,o){const l=c.length-1;let h,g,_=0,x=l,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),h=c[S],g=c[S+1],h<=o){if(S===l||o<g)return S;_=S+1}else{if(!(h>o))throw new vn("Input is not a number.");x=S-1}return 0}class pl{constructor(o,l,h){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(o[1],1,Ie);if(!h)return null;const g=[];let _=null;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(let x=1;x<o.length;x+=2){const S=x===1?-1/0:o[x],T=o[x+1],A=x,D=x+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const N=l.parse(T,D,_);if(!N)return null;_=_||N.type,g.push([S,N])}return new pl(_,h,g)}evaluate(o){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return h[0].evaluate(o);const _=l.length;return g>=l[_-1]?h[_-1].evaluate(o):h[hl(l,g)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function H_(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Ya,Ec,rp=function(){if(Ec)return Ya;function c(o,l,h,g){this.cx=3*o,this.bx=3*(h-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=l,this.p2x=h,this.p2y=g}return Ec=1,Ya=c,c.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,l){if(l===void 0&&(l=1e-6),o<0)return 0;if(o>1)return 1;for(var h=o,g=0;g<8;g++){var _=this.sampleCurveX(h)-o;if(Math.abs(_)<l)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var S=0,T=1;for(h=o,g=0;g<20&&(_=this.sampleCurveX(h),!(Math.abs(_-o)<l));g++)o>_?S=h:T=h,h=.5*(T-S)+S;return h},solve:function(o,l){return this.sampleCurveY(this.solveCurveX(o,l))}},Ya}(),G_=H_(rp);class Bo{constructor(o,l,h,g,_){this.type=o,this.operator=l,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(o,l,h,g){let _=0;if(o.name==="exponential")_=fl(l,o.base,h,g);else if(o.name==="linear")_=fl(l,1,h,g);else if(o.name==="cubic-bezier"){const x=o.controlPoints;_=new G_(x[0],x[1],x[2],x[3]).solve(fl(l,1,h,g))}return _}static parse(o,l){let[h,g,_,...x]=o;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const A=g[1];if(typeof A!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(A.length!==4||A.some(D=>typeof D!="number"||D<0||D>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(_=l.parse(_,2,Ie),!_)return null;const S=[];let T=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||l.expectedType==zi?l.expectedType&&l.expectedType.kind!=="value"&&(T=l.expectedType):T=$t;for(let A=0;A<x.length;A+=2){const D=x[A],N=x[A+1],W=A+3,Q=A+4;if(typeof D!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(S.length&&S[S.length-1][0]>=D)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const re=l.parse(N,Q,T);if(!re)return null;T=T||re.type,S.push([D,re])}return $o(T,Ie)||$o(T,Or)||$o(T,$t)||$o(T,rn)||$o(T,So)||$o(T,zi)||$o(T,Ar)||$o(T,Xr(Ie))?new Bo(T,h,g,_,S):l.error(`Type ${jt(T)} is not interpolatable.`)}evaluate(o){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return h[0].evaluate(o);const _=l.length;if(g>=l[_-1])return h[_-1].evaluate(o);const x=hl(l,g),S=Bo.interpolationFactor(this.interpolation,g,l[x],l[x+1]),T=h[x].evaluate(o),A=h[x+1].evaluate(o);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return vi(T,A,S);case"color":return Cr.interpolate(T,A,S);case"padding":return Fn.interpolate(T,A,S);case"colorArray":return ro.interpolate(T,A,S);case"numberArray":return To.interpolate(T,A,S);case"variableAnchorOffsetCollection":return Mr.interpolate(T,A,S);case"array":return Ma(T,A,S);case"projectionDefinition":return fr.interpolate(T,A,S)}case"interpolate-hcl":switch(this.type.kind){case"color":return Cr.interpolate(T,A,S,"hcl");case"colorArray":return ro.interpolate(T,A,S,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Cr.interpolate(T,A,S,"lab");case"colorArray":return ro.interpolate(T,A,S,"lab")}}}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function fl(c,o,l,h){const g=h-l,_=c-l;return g===0?0:o===1?_/g:(Math.pow(o,_)-1)/(Math.pow(o,g)-1)}const ci={color:Cr.interpolate,number:vi,padding:Fn.interpolate,numberArray:To.interpolate,colorArray:ro.interpolate,variableAnchorOffsetCollection:Mr.interpolate,array:Ma};class Yo{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let h=null;const g=l.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const S of o.slice(1)){const T=l.parse(S,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,_.push(T)}if(!h)throw new Error("No output type");const x=g&&_.some(S=>nn(g,S.type));return new Yo(x?rr:h,_)}evaluate(o){let l,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(o),h&&h instanceof Ko&&!h.available&&(l||(l=h.name),h=null,g===this.args.length&&(h=l)),h!==null)break;return h}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function np(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function kc(c,o,l,h){return h.compare(o,l)===0}function ml(c,o,l){const h=c!=="=="&&c!=="!=";return class l${constructor(_,x,S){this.type=_t,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let T=x.parse(_[1],1,rr);if(!T)return null;if(!np(S,T.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${jt(T.type)}'.`);let A=x.parse(_[2],2,rr);if(!A)return null;if(!np(S,A.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${jt(A.type)}'.`);if(T.type.kind!==A.type.kind&&T.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${jt(T.type)}' and '${jt(A.type)}'.`);h&&(T.type.kind==="value"&&A.type.kind!=="value"?T=new Xo(A.type,[T]):T.type.kind!=="value"&&A.type.kind==="value"&&(A=new Xo(T.type,[A])));let D=null;if(_.length===4){if(T.type.kind!=="string"&&A.type.kind!=="string"&&T.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(D=x.parse(_[3],3,sn),!D)return null}return new l$(T,A,D)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const T=hr(x),A=hr(S);if(T.kind!==A.kind||T.kind!=="string"&&T.kind!=="number")throw new vn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${T.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const T=hr(x),A=hr(S);if(T.kind!=="string"||A.kind!=="string")return o(_,x,S)}return this.collator?l(_,x,S,this.collator.evaluate(_)):o(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const op=ml("==",function(c,o,l){return o===l},kc),W_=ml("!=",function(c,o,l){return o!==l},function(c,o,l,h){return!kc(0,o,l,h)}),Z_=ml("<",function(c,o,l){return o<l},function(c,o,l,h){return h.compare(o,l)<0}),q_=ml(">",function(c,o,l){return o>l},function(c,o,l,h){return h.compare(o,l)>0}),K_=ml("<=",function(c,o,l){return o<=l},function(c,o,l,h){return h.compare(o,l)<=0}),Gu=ml(">=",function(c,o,l){return o>=l},function(c,o,l,h){return h.compare(o,l)>=0});class Wu{constructor(o,l,h){this.type=sn,this.locale=h,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(o.length!==2)return l.error("Expected one argument.");const h=o[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const g=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,_t);if(!g)return null;const _=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,_t);if(!_)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,dt),!x)?null:new Wu(g,_,x)}evaluate(o){return new Sc(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class Zu{constructor(o,l,h,g,_){this.type=dt,this.number=o,this.locale=l,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(o,l){if(o.length!==3)return l.error("Expected two arguments.");const h=l.parse(o[1],1,Ie);if(!h)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=l.parse(g.locale,1,dt),!_))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,dt),!x))return null;let S=null;if(g["min-fraction-digits"]&&(S=l.parse(g["min-fraction-digits"],1,Ie),!S))return null;let T=null;return g["max-fraction-digits"]&&(T=l.parse(g["max-fraction-digits"],1,Ie),!T)?null:new Zu(h,_,x,S,T)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Mc{constructor(o){this.type=Lo,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const h=o[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=o.length-1;++x){const S=o[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let T=null;if(S["font-scale"]&&(T=l.parse(S["font-scale"],1,Ie),!T))return null;let A=null;if(S["text-font"]&&(A=l.parse(S["text-font"],1,Xr(dt)),!A))return null;let D=null;if(S["text-color"]&&(D=l.parse(S["text-color"],1,$t),!D))return null;let N=null;if(S["vertical-align"]){if(typeof S["vertical-align"]=="string"&&!Uu.includes(S["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${S["vertical-align"]}' instead.`);if(N=l.parse(S["vertical-align"],1,dt),!N)return null}const W=g[g.length-1];W.scale=T,W.font=A,W.textColor=D,W.verticalAlign=N}else{const T=l.parse(o[x],1,rr);if(!T)return null;const A=T.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:T,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Mc(g)}evaluate(o){return new Po(this.sections.map(l=>{const h=l.content.evaluate(o);return hr(h)===Co?new ep("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(o):null):new ep(Es(h),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null,l.verticalAlign?l.verticalAlign.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor),l.verticalAlign&&o(l.verticalAlign)}outputDefined(){return!1}}class ip{constructor(o){this.type=Co,this.input=o}static parse(o,l){if(o.length!==2)return l.error("Expected two arguments.");const h=l.parse(o[1],1,dt);return h?new ip(h):l.error("No image name provided.")}evaluate(o){const l=this.input.evaluate(o),h=Ko.fromString(l);return h&&o.availableImages&&(h.available=o.availableImages.indexOf(l)>-1),h}eachChild(o){o(this.input)}outputDefined(){return!1}}class qu{constructor(o){this.type=Ie,this.input=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=l.parse(o[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${jt(h.type)} instead.`):new qu(h):null}evaluate(o){const l=this.input.evaluate(o);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new vn(`Expected value to be of type string or array, but found ${jt(hr(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const la=8192;function X_(c,o){const l=(180+c[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(l*g*la),Math.round(h*g*la)]}function ap(c,o){const l=Math.pow(2,o.z);return[(g=(c[0]/la+o.x)/l,360*g-180),(h=(c[1]/la+o.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function Rc(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ac(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function bg(c,o,l){const h=c[0]-o[0],g=c[1]-o[1],_=c[0]-l[0],x=c[1]-l[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function zc(c,o,l,h){return(g=[h[0]-l[0],h[1]-l[1]])[0]*(_=[o[0]-c[0],o[1]-c[1]])[1]-g[1]*_[0]!=0&&!(!Ku(c,o,l,h)||!Ku(l,h,c,o));var g,_}function wg(c,o,l){for(const h of l)for(let g=0;g<h.length-1;++g)if(zc(c,o,h[g],h[g+1]))return!0;return!1}function gl(c,o,l=!1){let h=!1;for(const S of o)for(let T=0;T<S.length-1;T++){if(bg(c,S[T],S[T+1]))return l;(_=S[T])[1]>(g=c)[1]!=(x=S[T+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var g,_,x;return h}function Y_(c,o){for(const l of o)if(gl(c,l))return!0;return!1}function Sg(c,o){for(const l of c)if(!gl(l,o))return!1;for(let l=0;l<c.length-1;++l)if(wg(c[l],c[l+1],o))return!1;return!0}function J_(c,o){for(const l of o)if(Sg(c,l))return!0;return!1}function Ku(c,o,l,h){const g=h[0]-l[0],_=h[1]-l[1],x=(c[0]-l[0])*_-g*(c[1]-l[1]),S=(o[0]-l[0])*_-g*(o[1]-l[1]);return x>0&&S<0||x<0&&S>0}function sp(c,o,l){const h=[];for(let g=0;g<c.length;g++){const _=[];for(let x=0;x<c[g].length;x++){const S=X_(c[g][x],l);Rc(o,S),_.push(S)}h.push(_)}return h}function Cg(c,o,l){const h=[];for(let g=0;g<c.length;g++){const _=sp(c[g],o,l);h.push(_)}return h}function Pg(c,o,l,h){if(c[0]<l[0]||c[0]>l[2]){const g=.5*h;let _=c[0]-l[0]>g?-h:l[0]-c[0]>g?h:0;_===0&&(_=c[0]-l[2]>g?-h:l[2]-c[0]>g?h:0),c[0]+=_}Rc(o,c)}function lp(c,o,l,h){const g=Math.pow(2,h.z)*la,_=[h.x*la,h.y*la],x=[];for(const S of c)for(const T of S){const A=[T.x+_[0],T.y+_[1]];Pg(A,o,l,g),x.push(A)}return x}function cp(c,o,l,h){const g=Math.pow(2,h.z)*la,_=[h.x*la,h.y*la],x=[];for(const T of c){const A=[];for(const D of T){const N=[D.x+_[0],D.y+_[1]];Rc(o,N),A.push(N)}x.push(A)}if(o[2]-o[0]<=g/2){(S=o)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const T of x)for(const A of T)Pg(A,o,l,g)}var S;return x}class ks{constructor(o,l){this.type=_t,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Is(o[1])){const h=o[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&g.push(S),x==="MultiPolygon"&&g.push(...S)}if(g.length)return new ks(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ks(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ks(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const S=sp(h.coordinates,_,x),T=lp(l.geometry(),g,_,x);if(!Ac(g,_))return!1;for(const A of T)if(!gl(A,S))return!1}if(h.type==="MultiPolygon"){const S=Cg(h.coordinates,_,x),T=lp(l.geometry(),g,_,x);if(!Ac(g,_))return!1;for(const A of T)if(!Y_(A,S))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const S=sp(h.coordinates,_,x),T=cp(l.geometry(),g,_,x);if(!Ac(g,_))return!1;for(const A of T)if(!Sg(A,S))return!1}if(h.type==="MultiPolygon"){const S=Cg(h.coordinates,_,x),T=cp(l.geometry(),g,_,x);if(!Ac(g,_))return!1;for(const A of T)if(!J_(A,S))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Tg=class{constructor(c=[],o=(l,h)=>l<h?-1:l>h?1:0){if(this.data=c,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:o,compare:l}=this,h=o[c];for(;c>0;){const g=c-1>>1,_=o[g];if(l(h,_)>=0)break;o[c]=_,c=g}o[c]=h}_down(c){const{data:o,compare:l}=this,h=this.length>>1,g=o[c];for(;c<h;){let _=1+(c<<1);const x=_+1;if(x<this.length&&l(o[x],o[_])<0&&(_=x),l(o[_],g)>=0)break;o[c]=o[_],c=_}o[c]=g}};function up(c,o,l=0,h=c.length-1,g=Q_){for(;h>l;){if(h-l>600){const T=h-l+1,A=o-l+1,D=Math.log(T),N=.5*Math.exp(2*D/3),W=.5*Math.sqrt(D*N*(T-N)/T)*(A-T/2<0?-1:1);up(c,o,Math.max(l,Math.floor(o-A*N/T+W)),Math.min(h,Math.floor(o+(T-A)*N/T+W)),g)}const _=c[o];let x=l,S=h;for(yl(c,l,o),g(c[h],_)>0&&yl(c,l,h);x<S;){for(yl(c,x,S),x++,S--;g(c[x],_)<0;)x++;for(;g(c[S],_)>0;)S--}g(c[l],_)===0?yl(c,l,S):(S++,yl(c,S,h)),S<=o&&(l=S+1),o<=S&&(h=S-1)}}function yl(c,o,l){const h=c[o];c[o]=c[l],c[l]=h}function Q_(c,o){return c<o?-1:c>o?1:0}function Xu(c,o){if(c.length<=1)return[c];const l=[];let h,g;for(const _ of c){const x=Ig(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&l.push(h),h=[_]):h.push(_))}if(h&&l.push(h),o>1)for(let _=0;_<l.length;_++)l[_].length<=o||(up(l[_],o,1,l[_].length-1,ex),l[_]=l[_].slice(0,o));return l}function ex(c,o){return o.area-c.area}function Ig(c){let o=0;for(let l,h,g=0,_=c.length,x=_-1;g<_;x=g++)l=c[g],h=c[x],o+=(h.x-l.x)*(l.y+h.y);return o}const Eg=1/298.257223563,kg=Eg*(2-Eg),Mg=Math.PI/180;class dp{constructor(o){const l=6378.137*Mg*1e3,h=Math.cos(o*Mg),g=1/(1-kg*(1-h*h)),_=Math.sqrt(g);this.kx=l*_*h,this.ky=l*_*g*(1-kg)}distance(o,l){const h=this.wrap(o[0]-l[0])*this.kx,g=(o[1]-l[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(o,l){let h,g,_,x,S=1/0;for(let T=0;T<o.length-1;T++){let A=o[T][0],D=o[T][1],N=this.wrap(o[T+1][0]-A)*this.kx,W=(o[T+1][1]-D)*this.ky,Q=0;N===0&&W===0||(Q=(this.wrap(l[0]-A)*this.kx*N+(l[1]-D)*this.ky*W)/(N*N+W*W),Q>1?(A=o[T+1][0],D=o[T+1][1]):Q>0&&(A+=N/this.kx*Q,D+=W/this.ky*Q)),N=this.wrap(l[0]-A)*this.kx,W=(l[1]-D)*this.ky;const re=N*N+W*W;re<S&&(S=re,h=A,g=D,_=T,x=Q)}return{point:[h,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function Hr(c,o){return o[0]-c[0]}function Yu(c){return c[1]-c[0]+1}function Ra(c,o){return c[1]>=c[0]&&c[1]<o}function hp(c,o){if(c[0]>c[1])return[null,null];const l=Yu(c);if(o){if(l===2)return[c,null];const g=Math.floor(l/2);return[[c[0],c[0]+g],[c[0]+g,c[1]]]}if(l===1)return[c,null];const h=Math.floor(l/2)-1;return[[c[0],c[0]+h],[c[0]+h+1,c[1]]]}function pp(c,o){if(!Ra(o,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let h=o[0];h<=o[1];++h)Rc(l,c[h]);return l}function fp(c){const o=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const h of l)Rc(o,h);return o}function Rg(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function mp(c,o,l){if(!Rg(c)||!Rg(o))return NaN;let h=0,g=0;return c[2]<o[0]&&(h=o[0]-c[2]),c[0]>o[2]&&(h=c[0]-o[2]),c[1]>o[3]&&(g=c[1]-o[3]),c[3]<o[1]&&(g=o[1]-c[3]),l.distance([0,0],[h,g])}function Ms(c,o,l){const h=l.pointOnLine(o,c);return l.distance(c,h.point)}function gp(c,o,l,h,g){const _=Math.min(Ms(c,[l,h],g),Ms(o,[l,h],g)),x=Math.min(Ms(l,[c,o],g),Ms(h,[c,o],g));return Math.min(_,x)}function tx(c,o,l,h,g){if(!Ra(o,c.length)||!Ra(h,l.length))return 1/0;let _=1/0;for(let x=o[0];x<o[1];++x){const S=c[x],T=c[x+1];for(let A=h[0];A<h[1];++A){const D=l[A],N=l[A+1];if(zc(S,T,D,N))return 0;_=Math.min(_,gp(S,T,D,N,g))}}return _}function rx(c,o,l,h,g){if(!Ra(o,c.length)||!Ra(h,l.length))return NaN;let _=1/0;for(let x=o[0];x<=o[1];++x)for(let S=h[0];S<=h[1];++S)if(_=Math.min(_,g.distance(c[x],l[S])),_===0)return _;return _}function nx(c,o,l){if(gl(c,o,!0))return 0;let h=1/0;for(const g of o){const _=g[0],x=g[g.length-1];if(_!==x&&(h=Math.min(h,Ms(c,[x,_],l)),h===0))return h;const S=l.pointOnLine(g,c);if(h=Math.min(h,l.distance(c,S.point)),h===0)return h}return h}function ox(c,o,l,h){if(!Ra(o,c.length))return NaN;for(let _=o[0];_<=o[1];++_)if(gl(c[_],l,!0))return 0;let g=1/0;for(let _=o[0];_<o[1];++_){const x=c[_],S=c[_+1];for(const T of l)for(let A=0,D=T.length,N=D-1;A<D;N=A++){const W=T[N],Q=T[A];if(zc(x,S,W,Q))return 0;g=Math.min(g,gp(x,S,W,Q,h))}}return g}function Ag(c,o){for(const l of c)for(const h of l)if(gl(h,o,!0))return!0;return!1}function ix(c,o,l,h=1/0){const g=fp(c),_=fp(o);if(h!==1/0&&mp(g,_,l)>=h)return h;if(Ac(g,_)){if(Ag(c,o))return 0}else if(Ag(o,c))return 0;let x=1/0;for(const S of c)for(let T=0,A=S.length,D=A-1;T<A;D=T++){const N=S[D],W=S[T];for(const Q of o)for(let re=0,se=Q.length,de=se-1;re<se;de=re++){const ye=Q[de],Oe=Q[re];if(zc(N,W,ye,Oe))return 0;x=Math.min(x,gp(N,W,ye,Oe,l))}}return x}function zg(c,o,l,h,g,_){if(!_)return;const x=mp(pp(h,_),g,l);x<o&&c.push([x,_,[0,0]])}function Ju(c,o,l,h,g,_,x){if(!_||!x)return;const S=mp(pp(h,_),pp(g,x),l);S<o&&c.push([S,_,x])}function Qu(c,o,l,h,g=1/0){let _=Math.min(h.distance(c[0],l[0][0]),g);if(_===0)return _;const x=new Tg([[0,[0,c.length-1],[0,0]]],Hr),S=fp(l);for(;x.length>0;){const T=x.pop();if(T[0]>=_)continue;const A=T[1],D=o?50:100;if(Yu(A)<=D){if(!Ra(A,c.length))return NaN;if(o){const N=ox(c,A,l,h);if(isNaN(N)||N===0)return N;_=Math.min(_,N)}else for(let N=A[0];N<=A[1];++N){const W=nx(c[N],l,h);if(_=Math.min(_,W),_===0)return 0}}else{const N=hp(A,o);zg(x,_,h,c,S,N[0]),zg(x,_,h,c,S,N[1])}}return _}function ed(c,o,l,h,g,_=1/0){let x=Math.min(_,g.distance(c[0],l[0]));if(x===0)return x;const S=new Tg([[0,[0,c.length-1],[0,l.length-1]]],Hr);for(;S.length>0;){const T=S.pop();if(T[0]>=x)continue;const A=T[1],D=T[2],N=o?50:100,W=h?50:100;if(Yu(A)<=N&&Yu(D)<=W){if(!Ra(A,c.length)&&Ra(D,l.length))return NaN;let Q;if(o&&h)Q=tx(c,A,l,D,g),x=Math.min(x,Q);else if(o&&!h){const re=c.slice(A[0],A[1]+1);for(let se=D[0];se<=D[1];++se)if(Q=Ms(l[se],re,g),x=Math.min(x,Q),x===0)return x}else if(!o&&h){const re=l.slice(D[0],D[1]+1);for(let se=A[0];se<=A[1];++se)if(Q=Ms(c[se],re,g),x=Math.min(x,Q),x===0)return x}else Q=rx(c,A,l,D,g),x=Math.min(x,Q)}else{const Q=hp(A,o),re=hp(D,h);Ju(S,x,g,c,l,Q[0],re[0]),Ju(S,x,g,c,l,Q[0],re[1]),Ju(S,x,g,c,l,Q[1],re[0]),Ju(S,x,g,c,l,Q[1],re[1])}}return x}function yp(c){return c.type==="MultiPolygon"?c.coordinates.map(o=>({type:"Polygon",coordinates:o})):c.type==="MultiLineString"?c.coordinates.map(o=>({type:"LineString",coordinates:o})):c.type==="MultiPoint"?c.coordinates.map(o=>({type:"Point",coordinates:o})):[c]}class Rs{constructor(o,l){this.type=Ie,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Is(o[1])){const h=o[1];if(h.type==="FeatureCollection")return new Rs(h,h.features.map(g=>yp(g.geometry)).flat());if(h.type==="Feature")return new Rs(h,yp(h.geometry));if("type"in h&&"coordinates"in h)return new Rs(h,yp(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,h){const g=l.geometry(),_=g.flat().map(T=>ap([T.x,T.y],l.canonical));if(g.length===0)return NaN;const x=new dp(_[0][1]);let S=1/0;for(const T of h){switch(T.type){case"Point":S=Math.min(S,ed(_,!1,[T.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,ed(_,!1,T.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Qu(_,!1,T.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,h){const g=l.geometry(),_=g.flat().map(T=>ap([T.x,T.y],l.canonical));if(g.length===0)return NaN;const x=new dp(_[0][1]);let S=1/0;for(const T of h){switch(T.type){case"Point":S=Math.min(S,ed(_,!0,[T.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,ed(_,!0,T.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Qu(_,!0,T.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="Polygon")return function(l,h){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const _=Xu(g,0).map(T=>T.map(A=>A.map(D=>ap([D.x,D.y],l.canonical)))),x=new dp(_[0][0][0][1]);let S=1/0;for(const T of h)for(const A of _){switch(T.type){case"Point":S=Math.min(S,Qu([T.coordinates],!1,A,x,S));break;case"LineString":S=Math.min(S,Qu(T.coordinates,!0,A,x,S));break;case"Polygon":S=Math.min(S,ix(A,T.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Dc{constructor(o){this.type=rr,this.key=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const h=o[1];return h==null?l.error("Global state property must be defined."):typeof h!="string"?l.error(`Global state property must be string, but found ${typeof o[1]} instead.`):new Dc(h)}evaluate(o){var l;const h=(l=o.globals)===null||l===void 0?void 0:l.globalState;return h&&Object.keys(h).length!==0?Sr(h,this.key):null}eachChild(){}outputDefined(){return!1}}const vl={"==":op,"!=":W_,">":q_,"<":Z_,">=":Gu,"<=":K_,array:Xo,at:no,boolean:Xo,case:jn,coalesce:Yo,collator:Wu,format:Mc,image:ip,in:ul,"index-of":Tc,interpolate:Bo,"interpolate-hcl":Bo,"interpolate-lab":Bo,length:qu,let:Pc,literal:Oo,match:dl,number:Xo,"number-format":Zu,object:Xo,slice:Ic,step:pl,string:Xo,"to-boolean":sa,"to-color":sa,"to-number":sa,"to-string":sa,var:Li,within:ks,distance:Rs,"global-state":Dc};class _i{constructor(o,l,h,g){this.name=o,this.type=l,this._evaluate=h,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,l){const h=o[0],g=_i.definitions[h];if(!g)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,S=x.filter(([A])=>!Array.isArray(A)||A.length===o.length-1);let T=null;for(const[A,D]of S){T=new Cc(l.registry,td,l.path,null,l.scope);const N=[];let W=!1;for(let Q=1;Q<o.length;Q++){const re=o[Q],se=Array.isArray(A)?A[Q-1]:A.type,de=T.parse(re,1+N.length,se);if(!de){W=!0;break}N.push(de)}if(!W)if(Array.isArray(A)&&A.length!==N.length)T.error(`Expected ${A.length} arguments, but found ${N.length} instead.`);else{for(let Q=0;Q<N.length;Q++){const re=Array.isArray(A)?A[Q]:A.type,se=N[Q];T.concat(Q+1).checkSubtype(re,se.type)}if(T.errors.length===0)return new _i(h,_,D,N)}}if(S.length===1)l.errors.push(...T.errors);else{const A=(S.length?S:x).map(([N])=>{return W=N,Array.isArray(W)?`(${W.map(jt).join(", ")})`:`(${jt(W.type)}...)`;var W}).join(" | "),D=[];for(let N=1;N<o.length;N++){const W=l.parse(o[N],1+D.length);if(!W)return null;D.push(jt(W.type))}l.error(`Expected arguments of type ${A}, but found (${D.join(", ")}) instead.`)}return null}static register(o,l){_i.definitions=l;for(const h in l)o[h]=_i}}function Dg(c,[o,l,h,g]){o=o.evaluate(c),l=l.evaluate(c),h=h.evaluate(c);const _=g?g.evaluate(c):1,x=vr(o,l,h,_);if(x)throw new vn(x);return new Cr(o/255,l/255,h/255,_,!1)}function Lg(c,o){return c in o}function vp(c,o){const l=o[c];return l===void 0?null:l}function As(c){return{type:c}}function td(c){if(c instanceof Li)return td(c.boundExpression);if(c instanceof _i&&c.name==="error"||c instanceof Wu||c instanceof ks||c instanceof Rs||c instanceof Dc)return!1;const o=c instanceof sa||c instanceof Xo;let l=!0;return c.eachChild(h=>{l=o?l&&td(h):l&&h instanceof Oo}),!!l&&rd(c)&&_l(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function rd(c){if(c instanceof _i&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof ks||c instanceof Rs)return!1;let o=!0;return c.eachChild(l=>{o&&!rd(l)&&(o=!1)}),o}function Lc(c){if(c instanceof _i&&c.name==="feature-state")return!1;let o=!0;return c.eachChild(l=>{o&&!Lc(l)&&(o=!1)}),o}function _l(c,o){if(c instanceof _i&&o.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild(h=>{l&&!_l(h,o)&&(l=!1)}),l}function $g(c){return{result:"success",value:c}}function xl(c){return{result:"error",value:c}}function bl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function _p(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function xp(c){return!!c.expression&&c.expression.interpolated}function Pr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function zs(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&hr(c)===xr}function Og(c){return c}function Bg(c,o){const l=c.stops&&typeof c.stops[0][0]=="object",h=l||!(l||c.property!==void 0),g=c.type||(xp(o)?"exponential":"interval"),_=function(D){switch(D.type){case"color":return Cr.parse;case"padding":return Fn.parse;case"numberArray":return To.parse;case"colorArray":return ro.parse;default:return null}}(o);if(_&&((c=Xt({},c)).stops&&(c.stops=c.stops.map(D=>[D[0],_(D[1])])),c.default=_(c.default?c.default:o.default)),c.colorSpace&&(x=c.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var x;const S=function(D){switch(D){case"exponential":return Fg;case"interval":return sx;case"categorical":return ax;case"identity":return jg;default:throw new Error(`Unknown function type "${D}"`)}}(g);let T,A;if(g==="categorical"){T=Object.create(null);for(const D of c.stops)T[D[0]]=D[1];A=typeof c.stops[0][0]}if(l){const D={},N=[];for(let re=0;re<c.stops.length;re++){const se=c.stops[re],de=se[0].zoom;D[de]===void 0&&(D[de]={zoom:de,type:c.type,property:c.property,default:c.default,stops:[]},N.push(de)),D[de].stops.push([se[0].value,se[1]])}const W=[];for(const re of N)W.push([D[re].zoom,Bg(D[re],o)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:Bo.interpolationFactor.bind(void 0,Q),zoomStops:W.map(re=>re[0]),evaluate:({zoom:re},se)=>Fg({stops:W,base:c.base},o,re).evaluate(re,se)}}if(h){const D=g==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Bo.interpolationFactor.bind(void 0,D),zoomStops:c.stops.map(N=>N[0]),evaluate:({zoom:N})=>S(c,o,N,T,A)}}return{kind:"source",evaluate(D,N){const W=N&&N.properties?N.properties[c.property]:void 0;return W===void 0?$c(c.default,o.default):S(c,o,W,T,A)}}}function $c(c,o,l){return c!==void 0?c:o!==void 0?o:l!==void 0?l:void 0}function ax(c,o,l,h,g){return $c(typeof l===g?h[l]:void 0,c.default,o.default)}function sx(c,o,l){if(Pr(l)!=="number")return $c(c.default,o.default);const h=c.stops.length;if(h===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[h-1][0])return c.stops[h-1][1];const g=hl(c.stops.map(_=>_[0]),l);return c.stops[g][1]}function Fg(c,o,l){const h=c.base!==void 0?c.base:1;if(Pr(l)!=="number")return $c(c.default,o.default);const g=c.stops.length;if(g===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[g-1][0])return c.stops[g-1][1];const _=hl(c.stops.map(D=>D[0]),l),x=function(D,N,W,Q){const re=Q-W,se=D-W;return re===0?0:N===1?se/re:(Math.pow(N,se)-1)/(Math.pow(N,re)-1)}(l,h,c.stops[_][0],c.stops[_+1][0]),S=c.stops[_][1],T=c.stops[_+1][1],A=ci[o.type]||Og;return typeof S.evaluate=="function"?{evaluate(...D){const N=S.evaluate.apply(void 0,D),W=T.evaluate.apply(void 0,D);if(N!==void 0&&W!==void 0)return A(N,W,x,c.colorSpace)}}:A(S,T,x,c.colorSpace)}function jg(c,o,l){switch(o.type){case"color":l=Cr.parse(l);break;case"formatted":l=Po.fromString(l.toString());break;case"resolvedImage":l=Ko.fromString(l.toString());break;case"padding":l=Fn.parse(l);break;case"colorArray":l=ro.parse(l);break;case"numberArray":l=To.parse(l);break;default:Pr(l)===o.type||o.type==="enum"&&o.values[l]||(l=void 0)}return $c(l,c.default,o.default)}_i.register(vl,{error:[{kind:"error"},[dt],(c,[o])=>{throw new vn(o.evaluate(c))}],typeof:[dt,[rr],(c,[o])=>jt(hr(o.evaluate(c)))],"to-rgba":[Xr(Ie,4),[$t],(c,[o])=>{const[l,h,g,_]=o.evaluate(c).rgb;return[255*l,255*h,255*g,_]}],rgb:[$t,[Ie,Ie,Ie],Dg],rgba:[$t,[Ie,Ie,Ie,Ie],Dg],has:{type:_t,overloads:[[[dt],(c,[o])=>Lg(o.evaluate(c),c.properties())],[[dt,xr],(c,[o,l])=>Lg(o.evaluate(c),l.evaluate(c))]]},get:{type:rr,overloads:[[[dt],(c,[o])=>vp(o.evaluate(c),c.properties())],[[dt,xr],(c,[o,l])=>vp(o.evaluate(c),l.evaluate(c))]]},"feature-state":[rr,[dt],(c,[o])=>vp(o.evaluate(c),c.featureState||{})],properties:[xr,[],c=>c.properties()],"geometry-type":[dt,[],c=>c.geometryType()],id:[rr,[],c=>c.id()],zoom:[Ie,[],c=>c.globals.zoom],"heatmap-density":[Ie,[],c=>c.globals.heatmapDensity||0],elevation:[Ie,[],c=>c.globals.elevation||0],"line-progress":[Ie,[],c=>c.globals.lineProgress||0],accumulated:[rr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Ie,As(Ie),(c,o)=>{let l=0;for(const h of o)l+=h.evaluate(c);return l}],"*":[Ie,As(Ie),(c,o)=>{let l=1;for(const h of o)l*=h.evaluate(c);return l}],"-":{type:Ie,overloads:[[[Ie,Ie],(c,[o,l])=>o.evaluate(c)-l.evaluate(c)],[[Ie],(c,[o])=>-o.evaluate(c)]]},"/":[Ie,[Ie,Ie],(c,[o,l])=>o.evaluate(c)/l.evaluate(c)],"%":[Ie,[Ie,Ie],(c,[o,l])=>o.evaluate(c)%l.evaluate(c)],ln2:[Ie,[],()=>Math.LN2],pi:[Ie,[],()=>Math.PI],e:[Ie,[],()=>Math.E],"^":[Ie,[Ie,Ie],(c,[o,l])=>Math.pow(o.evaluate(c),l.evaluate(c))],sqrt:[Ie,[Ie],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[Ie,[Ie],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[Ie,[Ie],(c,[o])=>Math.log(o.evaluate(c))],log2:[Ie,[Ie],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[Ie,[Ie],(c,[o])=>Math.sin(o.evaluate(c))],cos:[Ie,[Ie],(c,[o])=>Math.cos(o.evaluate(c))],tan:[Ie,[Ie],(c,[o])=>Math.tan(o.evaluate(c))],asin:[Ie,[Ie],(c,[o])=>Math.asin(o.evaluate(c))],acos:[Ie,[Ie],(c,[o])=>Math.acos(o.evaluate(c))],atan:[Ie,[Ie],(c,[o])=>Math.atan(o.evaluate(c))],min:[Ie,As(Ie),(c,o)=>Math.min(...o.map(l=>l.evaluate(c)))],max:[Ie,As(Ie),(c,o)=>Math.max(...o.map(l=>l.evaluate(c)))],abs:[Ie,[Ie],(c,[o])=>Math.abs(o.evaluate(c))],round:[Ie,[Ie],(c,[o])=>{const l=o.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ie,[Ie],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[Ie,[Ie],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[_t,[dt,rr],(c,[o,l])=>c.properties()[o.value]===l.value],"filter-id-==":[_t,[rr],(c,[o])=>c.id()===o.value],"filter-type-==":[_t,[dt],(c,[o])=>c.geometryType()===o.value],"filter-<":[_t,[dt,rr],(c,[o,l])=>{const h=c.properties()[o.value],g=l.value;return typeof h==typeof g&&h<g}],"filter-id-<":[_t,[rr],(c,[o])=>{const l=c.id(),h=o.value;return typeof l==typeof h&&l<h}],"filter->":[_t,[dt,rr],(c,[o,l])=>{const h=c.properties()[o.value],g=l.value;return typeof h==typeof g&&h>g}],"filter-id->":[_t,[rr],(c,[o])=>{const l=c.id(),h=o.value;return typeof l==typeof h&&l>h}],"filter-<=":[_t,[dt,rr],(c,[o,l])=>{const h=c.properties()[o.value],g=l.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[_t,[rr],(c,[o])=>{const l=c.id(),h=o.value;return typeof l==typeof h&&l<=h}],"filter->=":[_t,[dt,rr],(c,[o,l])=>{const h=c.properties()[o.value],g=l.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[_t,[rr],(c,[o])=>{const l=c.id(),h=o.value;return typeof l==typeof h&&l>=h}],"filter-has":[_t,[rr],(c,[o])=>o.value in c.properties()],"filter-has-id":[_t,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[_t,[Xr(dt)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[_t,[Xr(rr)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[_t,[dt,Xr(rr)],(c,[o,l])=>l.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[_t,[dt,Xr(rr)],(c,[o,l])=>function(h,g,_,x){for(;_<=x;){const S=_+x>>1;if(g[S]===h)return!0;g[S]>h?x=S-1:_=S+1}return!1}(c.properties()[o.value],l.value,0,l.value.length-1)],all:{type:_t,overloads:[[[_t,_t],(c,[o,l])=>o.evaluate(c)&&l.evaluate(c)],[As(_t),(c,o)=>{for(const l of o)if(!l.evaluate(c))return!1;return!0}]]},any:{type:_t,overloads:[[[_t,_t],(c,[o,l])=>o.evaluate(c)||l.evaluate(c)],[As(_t),(c,o)=>{for(const l of o)if(l.evaluate(c))return!0;return!1}]]},"!":[_t,[_t],(c,[o])=>!o.evaluate(c)],"is-supported-script":[_t,[dt],(c,[o])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(o.evaluate(c))}],upcase:[dt,[dt],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[dt,[dt],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[dt,As(rr),(c,o)=>o.map(l=>Es(l.evaluate(c))).join("")],"resolved-locale":[dt,[sn],(c,[o])=>o.evaluate(c).resolvedLocale()]});class nd{constructor(o,l){this.expression=o,this._warningHistory={},this._evaluator=new xg,this._defaultValue=l?function(h){if(h.type==="color"&&zs(h.default))return new Cr(0,0,0,0);switch(h.type){case"color":return Cr.parse(h.default)||null;case"padding":return Fn.parse(h.default)||null;case"numberArray":return To.parse(h.default)||null;case"colorArray":return ro.parse(h.default)||null;case"variableAnchorOffsetCollection":return Mr.parse(h.default)||null;case"projectionDefinition":return fr.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(o,l,h,g,_,x){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(o,l,h,g,_,x){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new vn(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function od(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in vl}function id(c,o){const l=new Cc(vl,td,[],o?function(g){const _={color:$t,string:dt,number:Ie,enum:dt,boolean:_t,formatted:Lo,padding:rn,numberArray:So,colorArray:zi,projectionDefinition:Or,resolvedImage:Co,variableAnchorOffsetCollection:Ar};return g.type==="array"?Xr(_[g.value]||rr,g.length):_[g.type]}(o):void 0),h=l.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?$g(new nd(h,o)):xl(l.errors)}class Oc{constructor(o,l){this.kind=o,this._styleExpression=l,this.isStateDependent=o!=="constant"&&!Lc(l.expression),this.globalStateRefs=Sl(l.expression)}evaluateWithoutErrorHandling(o,l,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(o,l,h,g,_,x)}evaluate(o,l,h,g,_,x){return this._styleExpression.evaluate(o,l,h,g,_,x)}}class ad{constructor(o,l,h,g){this.kind=o,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=o!=="camera"&&!Lc(l.expression),this.globalStateRefs=Sl(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,l,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(o,l,h,g,_,x)}evaluate(o,l,h,g,_,x){return this._styleExpression.evaluate(o,l,h,g,_,x)}interpolationFactor(o,l,h){return this.interpolationType?Bo.interpolationFactor(this.interpolationType,o,l,h):0}}function bp(c,o){const l=id(c,o);if(l.result==="error")return l;const h=l.value.expression,g=rd(h);if(!g&&!bl(o))return xl([new zt("","data expressions not supported")]);const _=_l(h,["zoom"]);if(!_&&!_p(o))return xl([new zt("","zoom expressions not supported")]);const x=wl(h);return x||_?x instanceof zt?xl([x]):x instanceof Bo&&!xp(o)?xl([new zt("",'"interpolate" expressions cannot be used with this property')]):$g(x?new ad(g?"camera":"composite",l.value,x.labels,x instanceof Bo?x.interpolation:void 0):new Oc(g?"constant":"source",l.value)):xl([new zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bc{constructor(o,l){this._parameters=o,this._specification=l,Xt(this,Bg(this._parameters,this._specification))}static deserialize(o){return new Bc(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function wl(c){let o=null;if(c instanceof Pc)o=wl(c.result);else if(c instanceof Yo){for(const l of c.args)if(o=wl(l),o)break}else(c instanceof pl||c instanceof Bo)&&c.input instanceof _i&&c.input.name==="zoom"&&(o=c);return o instanceof zt||c.eachChild(l=>{const h=wl(l);h instanceof zt?o=h:!o&&h?o=new zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&h&&o!==h&&(o=new zt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function Sl(c,o=new Set){return c instanceof Dc&&o.add(c.key),c.eachChild(l=>{Sl(l,o)}),o}function Fc(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Fc(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const wp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ja(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Fc(c)||(c=sd(c));const o=id(c,wp);if(o.result==="error")throw new Error(o.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,g)=>o.value.evaluate(l,h,{},g),needGeometry:Ng(c),getGlobalStateRefs:()=>Sl(o.value.expression)}}function lx(c,o){return c<o?-1:c>o?1:0}function Ng(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let o=1;o<c.length;o++)if(Ng(c[o]))return!0;return!1}function sd(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Sp(c[1],c[2],"=="):o==="!="?jc(Sp(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Sp(c[1],c[2],o):o==="any"?(l=c.slice(1),["any"].concat(l.map(sd))):o==="all"?["all"].concat(c.slice(1).map(sd)):o==="none"?["all"].concat(c.slice(1).map(sd).map(jc)):o==="in"?Vg(c[1],c.slice(2)):o==="!in"?jc(Vg(c[1],c.slice(2))):o==="has"?Ug(c[1]):o!=="!has"||jc(Ug(c[1]));var l}function Sp(c,o,l){switch(c){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,c,o]}}function Vg(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",c,["literal",o.sort(lx)]]:["filter-in-small",c,["literal",o]]}}function Ug(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function jc(c){return["!",c]}function ld(c){const o=typeof c;if(o==="number"||o==="boolean"||o==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let g="[";for(const _ of c)g+=`${ld(_)},`;return`${g}]`}const l=Object.keys(c).sort();let h="{";for(let g=0;g<l.length;g++)h+=`${JSON.stringify(l[g])}:${ld(c[l[g]])},`;return`${h}}`}function cd(c){let o="";for(const l of mt)o+=`/${ld(c[l])}`;return o}function Hg(c){const o=c.value;return o?[new Je(c.key,o,"constants have been deprecated as of v8")]:[]}function Tn(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Qa(c){if(Array.isArray(c))return c.map(Qa);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const l in c)o[l]=Qa(c[l]);return o}return Tn(c)}function xi(c){const o=c.key,l=c.value,h=c.valueSpec||{},g=c.objectElementValidators||{},_=c.style,x=c.styleSpec,S=c.validateSpec;let T=[];const A=Pr(l);if(A!=="object")return[new Je(o,l,`object expected, ${A} found`)];for(const D in l){const N=D.split(".")[0],W=Sr(h,N)||h["*"];let Q;if(Sr(g,N))Q=g[N];else if(Sr(h,N))Q=S;else if(g["*"])Q=g["*"];else{if(!h["*"]){T.push(new Je(o,l[D],`unknown property "${D}"`));continue}Q=S}T=T.concat(Q({key:(o&&`${o}.`)+D,value:l[D],valueSpec:W,style:_,styleSpec:x,object:l,objectKey:D,validateSpec:S},l))}for(const D in h)g[D]||h[D].required&&h[D].default===void 0&&l[D]===void 0&&T.push(new Je(o,l,`missing required property "${D}"`));return T}function ud(c){const o=c.value,l=c.valueSpec,h=c.style,g=c.styleSpec,_=c.key,x=c.arrayElementValidator||c.validateSpec;if(Pr(o)!=="array")return[new Je(_,o,`array expected, ${Pr(o)} found`)];if(l.length&&o.length!==l.length)return[new Je(_,o,`array length ${l.length} expected, length ${o.length} found`)];if(l["min-length"]&&o.length<l["min-length"])return[new Je(_,o,`array length at least ${l["min-length"]} expected, length ${o.length} found`)];let S={type:l.value,values:l.values};g.$version<7&&(S.function=l.function),Pr(l.value)==="object"&&(S=l.value);let T=[];for(let A=0;A<o.length;A++)T=T.concat(x({array:o,arrayIndex:A,value:o[A],valueSpec:S,validateSpec:c.validateSpec,style:h,styleSpec:g,key:`${_}[${A}]`}));return T}function Nc(c){const o=c.key,l=c.value,h=c.valueSpec;let g=Pr(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new Je(o,l,`number expected, ${g} found`)]:"minimum"in h&&l<h.minimum?[new Je(o,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Je(o,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function Cl(c){const o=c.valueSpec,l=Tn(c.value.type);let h,g,_,x={};const S=l!=="categorical"&&c.value.property===void 0,T=!S,A=Pr(c.value.stops)==="array"&&Pr(c.value.stops[0])==="array"&&Pr(c.value.stops[0][0])==="object",D=xi({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Q){if(l==="identity")return[new Je(Q.key,Q.value,'identity function may not have a "stops" property')];let re=[];const se=Q.value;return re=re.concat(ud({key:Q.key,value:se,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:N})),Pr(se)==="array"&&se.length===0&&re.push(new Je(Q.key,se,"array must have at least one stop")),re},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:o,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return l==="identity"&&S&&D.push(new Je(c.key,c.value,'missing required property "property"')),l==="identity"||c.value.stops||D.push(new Je(c.key,c.value,'missing required property "stops"')),l==="exponential"&&c.valueSpec.expression&&!xp(c.valueSpec)&&D.push(new Je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(T&&!bl(c.valueSpec)?D.push(new Je(c.key,c.value,"property functions not supported")):S&&!_p(c.valueSpec)&&D.push(new Je(c.key,c.value,"zoom functions not supported"))),l!=="categorical"&&!A||c.value.property!==void 0||D.push(new Je(c.key,c.value,'"property" property is required')),D;function N(Q){let re=[];const se=Q.value,de=Q.key;if(Pr(se)!=="array")return[new Je(de,se,`array expected, ${Pr(se)} found`)];if(se.length!==2)return[new Je(de,se,`array length 2 expected, length ${se.length} found`)];if(A){if(Pr(se[0])!=="object")return[new Je(de,se,`object expected, ${Pr(se[0])} found`)];if(se[0].zoom===void 0)return[new Je(de,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Je(de,se,"object stop key must have value")];if(_&&_>Tn(se[0].zoom))return[new Je(de,se[0].zoom,"stop zoom values must appear in ascending order")];Tn(se[0].zoom)!==_&&(_=Tn(se[0].zoom),g=void 0,x={}),re=re.concat(xi({key:`${de}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Nc,value:W}}))}else re=re.concat(W({key:`${de}[0]`,value:se[0],validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},se));return od(Qa(se[1]))?re.concat([new Je(`${de}[1]`,se[1],"expressions are not allowed in function stops.")]):re.concat(Q.validateSpec({key:`${de}[1]`,value:se[1],valueSpec:o,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function W(Q,re){const se=Pr(Q.value),de=Tn(Q.value),ye=Q.value!==null?Q.value:re;if(h){if(se!==h)return[new Je(Q.key,ye,`${se} stop domain type must match previous stop domain type ${h}`)]}else h=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new Je(Q.key,ye,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&l!=="categorical"){let Oe=`number expected, ${se} found`;return bl(o)&&l===void 0&&(Oe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(Q.key,ye,Oe)]}return l!=="categorical"||se!=="number"||isFinite(de)&&Math.floor(de)===de?l!=="categorical"&&se==="number"&&g!==void 0&&de<g?[new Je(Q.key,ye,"stop domain values must appear in ascending order")]:(g=de,l==="categorical"&&de in x?[new Je(Q.key,ye,"stop domain values must be unique")]:(x[de]=!0,[])):[new Je(Q.key,ye,`integer expected, found ${de}`)]}}function Pl(c){const o=(c.expressionContext==="property"?bp:id)(Qa(c.value),c.valueSpec);if(o.result==="error")return o.value.map(h=>new Je(`${c.key}${h.key}`,c.value,h.message));const l=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!l.outputDefined())return[new Je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Lc(l))return[new Je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Lc(l))return[new Je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!_l(l,["zoom","feature-state"]))return[new Je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!rd(l))return[new Je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cp(c){const o=c.key,l=c.value,h=Pr(l);return h!=="string"?[new Je(o,l,`color expected, ${h} found`)]:Cr.parse(String(l))?[]:[new Je(o,l,`color expected, "${l}" found`)]}function Vc(c){const o=c.key,l=c.value,h=c.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(Tn(l))===-1&&g.push(new Je(o,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(Tn(l))===-1&&g.push(new Je(o,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Pp(c){return Fc(Qa(c.value))?Pl(Xt({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Gg(c)}function Gg(c){const o=c.value,l=c.key;if(Pr(o)!=="array")return[new Je(l,o,`array expected, ${Pr(o)} found`)];const h=c.styleSpec;let g,_=[];if(o.length<1)return[new Je(l,o,"filter array must have at least 1 element")];switch(_=_.concat(Vc({key:`${l}[0]`,value:o[0],valueSpec:h.filter_operator,style:c.style,styleSpec:c.styleSpec})),Tn(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Tn(o[1])==="$type"&&_.push(new Je(l,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&_.push(new Je(l,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Pr(o[1]),g!=="string"&&_.push(new Je(`${l}[1]`,o[1],`string expected, ${g} found`)));for(let x=2;x<o.length;x++)g=Pr(o[x]),Tn(o[1])==="$type"?_=_.concat(Vc({key:`${l}[${x}]`,value:o[x],valueSpec:h.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Je(`${l}[${x}]`,o[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<o.length;x++)_=_.concat(Gg({key:`${l}[${x}]`,value:o[x],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Pr(o[1]),o.length!==2?_.push(new Je(l,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Je(`${l}[1]`,o[1],`string expected, ${g} found`))}return _}function Wg(c,o){const l=c.key,h=c.validateSpec,g=c.style,_=c.styleSpec,x=c.value,S=c.objectKey,T=_[`${o}_${c.layerType}`];if(!T)return[];const A=S.match(/^(.*)-transition$/);if(o==="paint"&&A&&T[A[1]]&&T[A[1]].transition)return h({key:l,value:x,valueSpec:_.transition,style:g,styleSpec:_});const D=c.valueSpec||T[S];if(!D)return[new Je(l,x,`unknown property "${S}"`)];let N;if(Pr(x)==="string"&&bl(D)&&!D.tokens&&(N=/^{([^}]+)}$/.exec(x)))return[new Je(l,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const W=[];return c.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&W.push(new Je(l,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&zs(Qa(x))&&Tn(x.type)==="identity"&&W.push(new Je(l,x,'"text-font" does not support identity functions'))),W.concat(h({key:c.key,value:x,valueSpec:D,style:g,styleSpec:_,expressionContext:"property",propertyType:o,propertyKey:S}))}function Tl(c){return Wg(c,"paint")}function Il(c){return Wg(c,"layout")}function Jo(c){let o=[];const l=c.value,h=c.key,g=c.style,_=c.styleSpec;if(Pr(l)!=="object")return[new Je(h,l,`object expected, ${Pr(l)} found`)];l.type||l.ref||o.push(new Je(h,l,'either "type" or "ref" is required'));let x=Tn(l.type);const S=Tn(l.ref);if(l.id){const T=Tn(l.id);for(let A=0;A<c.arrayIndex;A++){const D=g.layers[A];Tn(D.id)===T&&o.push(new Je(h,l.id,`duplicate layer id "${l.id}", previously used at line ${D.id.__line__}`))}}if("ref"in l){let T;["type","source","source-layer","filter","layout"].forEach(A=>{A in l&&o.push(new Je(h,l[A],`"${A}" is prohibited for ref layers`))}),g.layers.forEach(A=>{Tn(A.id)===S&&(T=A)}),T?T.ref?o.push(new Je(h,l.ref,"ref cannot reference another ref layer")):x=Tn(T.type):o.push(new Je(h,l.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(l.source){const T=g.sources&&g.sources[l.source],A=T&&Tn(T.type);T?A==="vector"&&x==="raster"?o.push(new Je(h,l.source,`layer "${l.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"||A!=="raster-dem"&&x==="color-relief"?o.push(new Je(h,l.source,`layer "${l.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?o.push(new Je(h,l.source,`layer "${l.id}" requires a vector source`)):A!=="vector"||l["source-layer"]?A==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?o.push(new Je(h,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||A==="geojson"&&T.lineMetrics||o.push(new Je(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Je(h,l,`layer "${l.id}" must specify a "source-layer"`)):o.push(new Je(h,l.source,`source "${l.source}" not found`))}else o.push(new Je(h,l,'missing required property "source"'));return o=o.concat(xi({key:h,value:l,valueSpec:_.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${h}.type`,value:l.type,valueSpec:_.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:Pp,layout:T=>xi({layer:l,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":A=>Il(Xt({layerType:x},A))}}),paint:T=>xi({layer:l,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":A=>Tl(Xt({layerType:x},A))}})}})),o}function $i(c){const o=c.value,l=c.key,h=Pr(o);return h!=="string"?[new Je(l,o,`string expected, ${h} found`)]:[]}const Tp={promoteId:function({key:c,value:o}){if(Pr(o)==="string")return $i({key:c,value:o});{const l=[];for(const h in o)l.push(...$i({key:`${c}.${h}`,value:o[h]}));return l}}};function Zg(c){const o=c.value,l=c.key,h=c.styleSpec,g=c.style,_=c.validateSpec;if(!o.type)return[new Je(l,o,'"type" is required')];const x=Tn(o.type);let S;switch(x){case"vector":case"raster":return S=xi({key:l,value:o,valueSpec:h[`source_${x.replace("-","_")}`],style:c.style,styleSpec:h,objectElementValidators:Tp,validateSpec:_}),S;case"raster-dem":return S=function(T){var A;const D=(A=T.sourceName)!==null&&A!==void 0?A:"",N=T.value,W=T.styleSpec,Q=W.source_raster_dem,re=T.style;let se=[];const de=Pr(N);if(N===void 0)return se;if(de!=="object")return se.push(new Je("source_raster_dem",N,`object expected, ${de} found`)),se;const ye=Tn(N.encoding)==="custom",Oe=["redFactor","greenFactor","blueFactor","baseShift"],Pe=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const K in N)!ye&&Oe.includes(K)?se.push(new Je(K,N[K],`In "${D}": "${K}" is only valid when "encoding" is set to "custom". ${Pe} encoding found`)):Q[K]?se=se.concat(T.validateSpec({key:K,value:N[K],valueSpec:Q[K],validateSpec:T.validateSpec,style:re,styleSpec:W})):se.push(new Je(K,N[K],`unknown property "${K}"`));return se}({sourceName:l,value:o,style:c.style,styleSpec:h,validateSpec:_}),S;case"geojson":if(S=xi({key:l,value:o,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:Tp}),o.cluster)for(const T in o.clusterProperties){const[A,D]=o.clusterProperties[T],N=typeof A=="string"?[A,["accumulated"],["get",T]]:A;S.push(...Pl({key:`${l}.${T}.map`,value:D,expressionContext:"cluster-map"})),S.push(...Pl({key:`${l}.${T}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return S;case"video":return xi({key:l,value:o,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return xi({key:l,value:o,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new Je(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Vc({key:`${l}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qg(c){const o=c.value,l=c.styleSpec,h=l.light,g=c.style;let _=[];const x=Pr(o);if(o===void 0)return _;if(x!=="object")return _=_.concat([new Je("light",o,`object expected, ${x} found`)]),_;for(const S in o){const T=S.match(/^(.*)-transition$/);_=_.concat(T&&h[T[1]]&&h[T[1]].transition?c.validateSpec({key:S,value:o[S],valueSpec:l.transition,validateSpec:c.validateSpec,style:g,styleSpec:l}):h[S]?c.validateSpec({key:S,value:o[S],valueSpec:h[S],validateSpec:c.validateSpec,style:g,styleSpec:l}):[new Je(S,o[S],`unknown property "${S}"`)])}return _}function El(c){const o=c.value,l=c.styleSpec,h=l.sky,g=c.style,_=Pr(o);if(o===void 0)return[];if(_!=="object")return[new Je("sky",o,`object expected, ${_} found`)];let x=[];for(const S in o)x=x.concat(h[S]?c.validateSpec({key:S,value:o[S],valueSpec:h[S],style:g,styleSpec:l}):[new Je(S,o[S],`unknown property "${S}"`)]);return x}function Ip(c){const o=c.value,l=c.styleSpec,h=l.terrain,g=c.style;let _=[];const x=Pr(o);if(o===void 0)return _;if(x!=="object")return _=_.concat([new Je("terrain",o,`object expected, ${x} found`)]),_;for(const S in o)_=_.concat(h[S]?c.validateSpec({key:S,value:o[S],valueSpec:h[S],validateSpec:c.validateSpec,style:g,styleSpec:l}):[new Je(S,o[S],`unknown property "${S}"`)]);return _}function dd(c){let o=[];const l=c.value,h=c.key;if(Array.isArray(l)){const g=[],_=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&o.push(new Je(h,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&_.includes(l[x].url)&&o.push(new Je(h,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),_.push(l[x].url),o=o.concat(xi({key:`${h}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return o}return $i({key:h,value:l})}function Kg(c){return o=c.value,o&&o.constructor===Object?[]:[new Je(c.key,c.value,`object expected, ${Pr(c.value)} found`)];var o}const hd={"*":()=>[],array:ud,boolean:function(c){const o=c.value,l=c.key,h=Pr(o);return h!=="boolean"?[new Je(l,o,`boolean expected, ${h} found`)]:[]},number:Nc,color:Cp,constants:Hg,enum:Vc,filter:Pp,function:Cl,layer:Jo,object:xi,source:Zg,light:qg,sky:El,terrain:Ip,projection:function(c){const o=c.value,l=c.styleSpec,h=l.projection,g=c.style,_=Pr(o);if(o===void 0)return[];if(_!=="object")return[new Je("projection",o,`object expected, ${_} found`)];let x=[];for(const S in o)x=x.concat(h[S]?c.validateSpec({key:S,value:o[S],valueSpec:h[S],style:g,styleSpec:l}):[new Je(S,o[S],`unknown property "${S}"`)]);return x},projectionDefinition:function(c){const o=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const h=Pr(l);return h!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(l)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(l)?["array","string"].includes(h)?[]:[new Je(o,l,`projection expected, invalid type "${h}" found`)]:[new Je(o,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:$i,formatted:function(c){return $i(c).length===0?[]:Pl(c)},resolvedImage:function(c){return $i(c).length===0?[]:Pl(c)},padding:function(c){const o=c.key,l=c.value;if(Pr(l)==="array"){if(l.length<1||l.length>4)return[new Je(o,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<l.length;_++)g=g.concat(c.validateSpec({key:`${o}[${_}]`,value:l[_],validateSpec:c.validateSpec,valueSpec:h}));return g}return Nc({key:o,value:l,valueSpec:{}})},numberArray:function(c){const o=c.key,l=c.value;if(Pr(l)==="array"){const h={type:"number"};if(l.length<1)return[new Je(o,l,"array length at least 1 expected, length 0 found")];let g=[];for(let _=0;_<l.length;_++)g=g.concat(c.validateSpec({key:`${o}[${_}]`,value:l[_],validateSpec:c.validateSpec,valueSpec:h}));return g}return Nc({key:o,value:l,valueSpec:{}})},colorArray:function(c){const o=c.key,l=c.value;if(Pr(l)==="array"){if(l.length<1)return[new Je(o,l,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<l.length;g++)h=h.concat(Cp({key:`${o}[${g}]`,value:l[g]}));return h}return Cp({key:o,value:l})},variableAnchorOffsetCollection:function(c){const o=c.key,l=c.value,h=Pr(l),g=c.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Je(o,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<l.length;x+=2)_=_.concat(Vc({key:`${o}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(ud({key:`${o}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:g}));return _},sprite:dd,state:Kg};function pd(c){const o=c.value,l=c.valueSpec,h=c.styleSpec;return c.validateSpec=pd,l.expression&&zs(Tn(o))?Cl(c):l.expression&&od(Qa(o))?Pl(c):l.type&&hd[l.type]?hd[l.type](c):xi(Xt({},c,{valueSpec:l.type?h[l.type]:l}))}function kl(c){const o=c.value,l=c.key,h=$i(c);return h.length||(o.indexOf("{fontstack}")===-1&&h.push(new Je(l,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&h.push(new Je(l,o,'"glyphs" url must include a "{range}" token'))),h}function bi(c,o=Me){let l=[];return l=l.concat(pd({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,validateSpec:pd,objectElementValidators:{glyphs:kl,"*":()=>[]}})),c.constants&&(l=l.concat(Hg({key:"constants",value:c.constants}))),Xg(l)}function Oi(c){return function(o){return c({...o,validateSpec:pd})}}function Xg(c){return[].concat(c).sort((o,l)=>o.line-l.line)}function Fo(c){return function(...o){return Xg(c.apply(this,o))}}bi.source=Fo(Oi(Zg)),bi.sprite=Fo(Oi(dd)),bi.glyphs=Fo(Oi(kl)),bi.light=Fo(Oi(qg)),bi.sky=Fo(Oi(El)),bi.terrain=Fo(Oi(Ip)),bi.state=Fo(Oi(Kg)),bi.layer=Fo(Oi(Jo)),bi.filter=Fo(Oi(Pp)),bi.paintProperty=Fo(Oi(Tl)),bi.layoutProperty=Fo(Oi(Il));const Ml=bi,cx=Ml.light,fd=Ml.sky,ux=Ml.paintProperty,Ep=Ml.layoutProperty;function Uc(c,o){let l=!1;if(o&&o.length)for(const h of o)c.fire(new $e(new Error(h.message))),l=!0;return l}class Rl{constructor(o,l,h){const g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(l=x[1])+2*(h=x[2]);for(let T=0;T<this.d*this.d;T++){const A=x[3+T],D=x[3+T+1];g.push(A===D?null:x.subarray(A,D))}const S=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=o,this.padding=h,this.scale=l/o,this.uid=0;const _=h/l*o;this.min=-_,this.max=o+_}insert(o,l,h,g,_){this._forEachCell(l,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,l,h,g,_,x){this.cells[_].push(x)}query(o,l,h,g,_){const x=this.min,S=this.max;if(o<=x&&l<=x&&S<=h&&S<=g&&!_)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(o,l,h,g,this._queryCell,T,{},_),T}}_queryCell(o,l,h,g,_,x,S,T){const A=this.cells[_];if(A!==null){const D=this.keys,N=this.bboxes;for(let W=0;W<A.length;W++){const Q=A[W];if(S[Q]===void 0){const re=4*Q;(T?T(N[re+0],N[re+1],N[re+2],N[re+3]):o<=N[re+2]&&l<=N[re+3]&&h>=N[re+0]&&g>=N[re+1])?(S[Q]=!0,x.push(D[Q])):S[Q]=!1}}}}_forEachCell(o,l,h,g,_,x,S,T){const A=this._convertToCellCoord(o),D=this._convertToCellCoord(l),N=this._convertToCellCoord(h),W=this._convertToCellCoord(g);for(let Q=A;Q<=N;Q++)for(let re=D;re<=W;re++){const se=this.d*re+Q;if((!T||T(this._convertFromCellCoord(Q),this._convertFromCellCoord(re),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(re+1)))&&_.call(this,o,l,h,g,se,x,S,T))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,l=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(l+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=l;for(let x=0;x<o.length;x++){const S=o[x];g[3+x]=_,g.set(S,_),_+=S.length}return g[3+o.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+o.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(o,l){const h=o.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(o){return new Rl(o.buffer)}}const ca={};function Ft(c,o,l={}){if(ca[c])throw new Error(`${c} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:c,writeable:!1}),ca[c]={klass:o,omit:l.omit||[],shallow:l.shallow||[]}}Ft("Object",Object),Ft("Set",Set),Ft("TransferableGridIndex",Rl),Ft("Color",Cr),Ft("Error",Error),Ft("AJAXError",oe),Ft("ResolvedImage",Ko),Ft("StylePropertyFunction",Bc),Ft("StyleExpression",nd,{omit:["_evaluator"]}),Ft("ZoomDependentExpression",ad),Ft("ZoomConstantExpression",Oc),Ft("CompoundExpression",_i,{omit:["_evaluate"]});for(const c in vl)vl[c]._classRegistryKey||Ft(`Expression_${c}`,vl[c]);function kp(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Hc(c){return c.$name||c.constructor._classRegistryKey}function Mp(c){return!function(o){if(o===null||typeof o!="object")return!1;const l=Hc(o);return!(!l||l==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||kp(c)||Ur(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Gc(c,o){if(Mp(c))return(kp(c)||Ur(c))&&o&&o.push(c),ArrayBuffer.isView(c)&&o&&o.push(c.buffer),c instanceof ImageData&&o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const _=[];for(const x of c)_.push(Gc(x,o));return _}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const l=Hc(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!ca[l])throw new Error(`${l} is not registered.`);const{klass:h}=ca[l],g=h.serialize?h.serialize(c,o):{};if(h.serialize){if(o&&g===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in c){if(!c.hasOwnProperty(_)||ca[l].omit.indexOf(_)>=0)continue;const x=c[_];g[_]=ca[l].shallow.indexOf(_)>=0?x:Gc(x,o)}c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function Al(c){if(Mp(c))return c;if(Array.isArray(c))return c.map(Al);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const o=Hc(c)||"Object";if(!ca[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:l}=ca[o];if(!l)throw new Error(`can't deserialize unregistered class ${o}`);if(l.deserialize)return l.deserialize(c);const h=Object.create(l.prototype);for(const g of Object.keys(c)){if(g==="$name")continue;const _=c[g];h[g]=ca[o].shallow.indexOf(g)>=0?_:Al(_)}return h}class Rp{constructor(){this.first=!0}update(o,l){const h=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=h,!0))}}const Tr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Ap(c){for(const o of c)if(gd(o.charCodeAt(0)))return!0;return!1}function Yg(c){for(const o of c)if(!hx(o.charCodeAt(0)))return!1;return!0}function md(c){const o=c.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(o.join("|"),"u")}const dx=md(["Arab","Dupl","Mong","Ougr","Syrc"]);function hx(c){return!dx.test(String.fromCodePoint(c))}const zp=md(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function gd(c){return!(c!==746&&c!==747&&(c<4352||!(Tr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Tr["CJK Compatibility"](c)||Tr["CJK Strokes"](c)||!(!Tr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Tr["Enclosed CJK Letters and Months"](c)||Tr["Ideographic Description Characters"](c)||Tr.Kanbun(c)||Tr.Katakana(c)&&c!==12540||!(!Tr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Tr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Tr["Vertical Forms"](c)||Tr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||zp.test(String.fromCodePoint(c)))))}function Dp(c){return!(gd(c)||function(o){return!!(Tr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||Tr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||Tr["Letterlike Symbols"](o)||Tr["Number Forms"](o)||Tr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||Tr["Control Pictures"](o)&&o!==9251||Tr["Optical Character Recognition"](o)||Tr["Enclosed Alphanumerics"](o)||Tr["Geometric Shapes"](o)||Tr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Tr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Tr["CJK Symbols and Punctuation"](o)||Tr.Katakana(o)||Tr["Private Use Area"](o)||Tr["CJK Compatibility Forms"](o)||Tr["Small Form Variants"](o)||Tr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(c))}const Jg=md(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Wc(c){return Jg.test(String.fromCodePoint(c))}function px(c,o){return!(!o&&Wc(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Tr.Khmer(c))}function Lp(c){for(const o of c)if(Wc(o.charCodeAt(0)))return!0;return!1}const es=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(es.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,o){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const l=c.pluginURL,h=new Promise(_=>{this.loadScriptResolve=_});o(l);const g=new Promise(_=>setTimeout(()=>_(),this.TIMEOUT));if(yield Promise.race([h,g]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:l};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class fn{constructor(o,l){this.zoom=o,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new Rp,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rp,this.transition={},this.globalState={})}isSupportedScript(o){return function(l,h){for(const g of l)if(!px(g.charCodeAt(0),h))return!1;return!0}(o,es.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,l=o-Math.floor(o),h=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class Zc{constructor(o,l){this.property=o,this.value=l,this.expression=function(h,g){if(zs(h))return new Bc(h,g);if(od(h)){const _=bp(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=Cr.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?g.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?_=Mr.parse(h):g.type==="projectionDefinition"&&typeof h=="string"&&(_=fr.parse(h)):_=ro.parse(h):_=To.parse(h):_=Fn.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>_}}}(l===void 0?o.specification.default:l,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(o,l,h){return this.property.possiblyEvaluate(this,o,l,h)}}class yd{constructor(o){this.property=o,this.value=new Zc(o,void 0)}transitioned(o,l){return new Qg(this.property,this.value,l,qt({},o.transition,this.transition),o.now)}untransitioned(){return new Qg(this.property,this.value,null,{},0)}}class $p{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Kt(this._values[o].value.value)}setValue(o,l){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new yd(this._values[o].property)),this._values[o].value=new Zc(this._values[o].property,l===null?void 0:Kt(l))}getTransition(o){return Kt(this._values[o].transition)}setTransition(o,l){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new yd(this._values[o].property)),this._values[o].transition=Kt(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(o[l]=h);const g=this.getTransition(l);g!==void 0&&(o[`${l}-transition`]=g)}return o}transitioned(o,l){const h=new ey(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(o,l._values[g]);return h}untransitioned(){const o=new ey(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class Qg{constructor(o,l,h,g,_){this.property=o,this.value=l,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,o.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(o,l,h){const g=o.now||0,_=this.value.possiblyEvaluate(o,l,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(o,l,h);{const S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(o,l,h),_,tr(S))}}return _}}class ey{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,h){const g=new vd(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(o,l,h);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class fx{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Kt(this._values[o].value)}setValue(o,l){this._values[o]=new Zc(this._values[o].property,l===null?void 0:Kt(l))}serialize(){const o={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(o[l]=h)}return o}possiblyEvaluate(o,l,h){const g=new vd(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(o,l,h);return g}}class ua{constructor(o,l,h){this.property=o,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,l,h,g){return this.property.evaluate(this.value,this.parameters,o,l,h,g)}}class vd{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Zt{constructor(o){this.specification=o}possiblyEvaluate(o,l){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(l)}interpolate(o,l,h){const g=ci[this.specification.type];return g?g(o,l,h):o}}class cr{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,h,g){return new ua(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(l,null,{},h,g)}:o.expression,l)}interpolate(o,l,h){if(o.value.kind!=="constant"||l.value.kind!=="constant")return o;if(o.value.value===void 0||l.value.value===void 0)return new ua(this,{kind:"constant",value:void 0},o.parameters);const g=ci[this.specification.type];if(g){const _=g(o.value.value,l.value.value,h);return new ua(this,{kind:"constant",value:_},o.parameters)}return o}evaluate(o,l,h,g,_,x){return o.kind==="constant"?o.value:o.evaluate(l,h,g,_,x)}}class _d extends cr{possiblyEvaluate(o,l,h,g){if(o.value===void 0)return new ua(this,{kind:"constant",value:void 0},l);if(o.expression.kind==="constant"){const _=o.expression.evaluate(l,null,{},h,g),x=o.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,l);return new ua(this,{kind:"constant",value:S},l)}if(o.expression.kind==="camera"){const _=this._calculate(o.expression.evaluate({zoom:l.zoom-1}),o.expression.evaluate({zoom:l.zoom}),o.expression.evaluate({zoom:l.zoom+1}),l);return new ua(this,{kind:"constant",value:_},l)}return new ua(this,o.expression,l)}evaluate(o,l,h,g,_,x){if(o.kind==="source"){const S=o.evaluate(l,h,g,_,x);return this._calculate(S,S,S,l)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(l.zoom)-1},h,g),o.evaluate({zoom:Math.floor(l.zoom)},h,g),o.evaluate({zoom:Math.floor(l.zoom)+1},h,g),l):o.value}_calculate(o,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:l}:{from:h,to:l}}interpolate(o){return o}}class Op{constructor(o){this.specification=o}possiblyEvaluate(o,l,h,g){if(o.value!==void 0){if(o.expression.kind==="constant"){const _=o.expression.evaluate(l,null,{},h,g);return this._calculate(_,_,_,l)}return this._calculate(o.expression.evaluate(new fn(Math.floor(l.zoom-1),l)),o.expression.evaluate(new fn(Math.floor(l.zoom),l)),o.expression.evaluate(new fn(Math.floor(l.zoom+1),l)),l)}}_calculate(o,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:l}:{from:h,to:l}}interpolate(o){return o}}class qc{constructor(o){this.specification=o}possiblyEvaluate(o,l,h,g){return!!o.expression.evaluate(l,null,{},h,g)}interpolate(){return!1}}class jo{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in o){const h=o[l];h.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new Zc(h,void 0),_=this.defaultTransitionablePropertyValues[l]=new yd(h);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}Ft("DataDrivenProperty",cr),Ft("DataConstantProperty",Zt),Ft("CrossFadedDataDrivenProperty",_d),Ft("CrossFadedProperty",Op),Ft("ColorRampProperty",qc);const ty="-transition";class po extends nt{constructor(o,l){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter,this._featureFilter=Ja(o.filter)),l.layout&&(this._unevaluatedLayout=new fx(l.layout)),l.paint)){this._transitionablePaint=new $p(l.paint);for(const h in o.paint)this.setPaintProperty(h,o.paint[h],{validate:!1});for(const h in o.layout)this.setLayoutProperty(h,o.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vd(l.paint)}}setFilter(o){this.filter=o,this._featureFilter=Ja(o)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}getLayoutAffectingGlobalStateRefs(){const o=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[l];for(const g of h.getGlobalStateRefs())o.add(g)}for(const l of this._featureFilter.getGlobalStateRefs())o.add(l);return o}setLayoutProperty(o,l,h={}){l!=null&&this._validate(Ep,`layers.${this.id}.layout.${o}`,o,l,h)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,l):this.visibility=l)}getPaintProperty(o){return o.endsWith(ty)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l,h={}){if(l!=null&&this._validate(ux,`layers.${this.id}.paint.${o}`,o,l,h))return!1;if(o.endsWith(ty))return this._transitionablePaint.setTransition(o.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[o],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),S=g.value;this._transitionablePaint.setValue(o,l),this._handleSpecialPaintPropertyUpdate(o);const T=this._transitionablePaint._values[o].value;return T.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(o,S,T)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,l,h){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),gr(o,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(o,l,h,g,_={}){return(!_||_.validate!==!1)&&Uc(this,o.call(Ml,{key:l,layerType:this.type,objectKey:h,value:g,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof ua&&bl(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const ry={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ds{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _n{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function In(c,o=1){let l=0,h=0;return{members:c.map(g=>{const _=ry[g.type].BYTES_PER_ELEMENT,x=l=ny(l,Math.max(o,_)),S=g.components||1;return h=Math.max(h,_),l+=_*S,{name:g.name,type:g.type,components:S,offset:x}}),size:ny(l,Math.max(h,o)),alignment:o}}function ny(c,o){return Math.ceil(c/o)*o}class ts extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const h=this.length;return this.resize(h+1),this.emplace(h,o,l)}emplace(o,l,h){const g=2*o;return this.int16[g+0]=l,this.int16[g+1]=h,o}}ts.prototype.bytesPerElement=4,Ft("StructArrayLayout2i4",ts);class rs extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,h)}emplace(o,l,h,g){const _=3*o;return this.int16[_+0]=l,this.int16[_+1]=h,this.int16[_+2]=g,o}}rs.prototype.bytesPerElement=6,Ft("StructArrayLayout3i6",rs);class Bp extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,o,l,h,g)}emplace(o,l,h,g,_){const x=4*o;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,o}}Bp.prototype.bytesPerElement=8,Ft("StructArrayLayout4i8",Bp);class xd extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,h,g,_,x)}emplace(o,l,h,g,_,x,S){const T=6*o;return this.int16[T+0]=l,this.int16[T+1]=h,this.int16[T+2]=g,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=S,o}}xd.prototype.bytesPerElement=12,Ft("StructArrayLayout2i4i12",xd);class Ls extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,h,g,_,x)}emplace(o,l,h,g,_,x,S){const T=4*o,A=8*o;return this.int16[T+0]=l,this.int16[T+1]=h,this.uint8[A+4]=g,this.uint8[A+5]=_,this.uint8[A+6]=x,this.uint8[A+7]=S,o}}Ls.prototype.bytesPerElement=8,Ft("StructArrayLayout2i4ub8",Ls);class Kc extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const h=this.length;return this.resize(h+1),this.emplace(h,o,l)}emplace(o,l,h){const g=2*o;return this.float32[g+0]=l,this.float32[g+1]=h,o}}Kc.prototype.bytesPerElement=8,Ft("StructArrayLayout2f8",Kc);class Fp extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x,S,T,A,D){const N=this.length;return this.resize(N+1),this.emplace(N,o,l,h,g,_,x,S,T,A,D)}emplace(o,l,h,g,_,x,S,T,A,D,N){const W=10*o;return this.uint16[W+0]=l,this.uint16[W+1]=h,this.uint16[W+2]=g,this.uint16[W+3]=_,this.uint16[W+4]=x,this.uint16[W+5]=S,this.uint16[W+6]=T,this.uint16[W+7]=A,this.uint16[W+8]=D,this.uint16[W+9]=N,o}}Fp.prototype.bytesPerElement=20,Ft("StructArrayLayout10ui20",Fp);class bd extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x,S,T,A,D,N,W){const Q=this.length;return this.resize(Q+1),this.emplace(Q,o,l,h,g,_,x,S,T,A,D,N,W)}emplace(o,l,h,g,_,x,S,T,A,D,N,W,Q){const re=12*o;return this.int16[re+0]=l,this.int16[re+1]=h,this.int16[re+2]=g,this.int16[re+3]=_,this.uint16[re+4]=x,this.uint16[re+5]=S,this.uint16[re+6]=T,this.uint16[re+7]=A,this.int16[re+8]=D,this.int16[re+9]=N,this.int16[re+10]=W,this.int16[re+11]=Q,o}}bd.prototype.bytesPerElement=24,Ft("StructArrayLayout4i4ui4i24",bd);class jp extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,h)}emplace(o,l,h,g){const _=3*o;return this.float32[_+0]=l,this.float32[_+1]=h,this.float32[_+2]=g,o}}jp.prototype.bytesPerElement=12,Ft("StructArrayLayout3f12",jp);class y extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}y.prototype.bytesPerElement=4,Ft("StructArrayLayout1ul4",y);class r extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x,S,T,A){const D=this.length;return this.resize(D+1),this.emplace(D,o,l,h,g,_,x,S,T,A)}emplace(o,l,h,g,_,x,S,T,A,D){const N=10*o,W=5*o;return this.int16[N+0]=l,this.int16[N+1]=h,this.int16[N+2]=g,this.int16[N+3]=_,this.int16[N+4]=x,this.int16[N+5]=S,this.uint32[W+3]=T,this.uint16[N+8]=A,this.uint16[N+9]=D,o}}r.prototype.bytesPerElement=20,Ft("StructArrayLayout6i1ul2ui20",r);class s extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,h,g,_,x)}emplace(o,l,h,g,_,x,S){const T=6*o;return this.int16[T+0]=l,this.int16[T+1]=h,this.int16[T+2]=g,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=S,o}}s.prototype.bytesPerElement=12,Ft("StructArrayLayout2i2i2i12",s);class p extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,h,g,_)}emplace(o,l,h,g,_,x){const S=4*o,T=8*o;return this.float32[S+0]=l,this.float32[S+1]=h,this.float32[S+2]=g,this.int16[T+6]=_,this.int16[T+7]=x,o}}p.prototype.bytesPerElement=16,Ft("StructArrayLayout2f1f2i16",p);class m extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,h,g,_,x)}emplace(o,l,h,g,_,x,S){const T=16*o,A=4*o,D=8*o;return this.uint8[T+0]=l,this.uint8[T+1]=h,this.float32[A+1]=g,this.float32[A+2]=_,this.int16[D+6]=x,this.int16[D+7]=S,o}}m.prototype.bytesPerElement=16,Ft("StructArrayLayout2ub2f2i16",m);class v extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,h)}emplace(o,l,h,g){const _=3*o;return this.uint16[_+0]=l,this.uint16[_+1]=h,this.uint16[_+2]=g,o}}v.prototype.bytesPerElement=6,Ft("StructArrayLayout3ui6",v);class w extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,o,l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye)}emplace(o,l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye,Oe){const Pe=24*o,K=12*o,ue=48*o;return this.int16[Pe+0]=l,this.int16[Pe+1]=h,this.uint16[Pe+2]=g,this.uint16[Pe+3]=_,this.uint32[K+2]=x,this.uint32[K+3]=S,this.uint32[K+4]=T,this.uint16[Pe+10]=A,this.uint16[Pe+11]=D,this.uint16[Pe+12]=N,this.float32[K+7]=W,this.float32[K+8]=Q,this.uint8[ue+36]=re,this.uint8[ue+37]=se,this.uint8[ue+38]=de,this.uint32[K+10]=ye,this.int16[Pe+22]=Oe,o}}w.prototype.bytesPerElement=48,Ft("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",w);class P extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye,Oe,Pe,K,ue,Te,Ye,ft,tt,it,St,yt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,o,l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye,Oe,Pe,K,ue,Te,Ye,ft,tt,it,St,yt)}emplace(o,l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye,Oe,Pe,K,ue,Te,Ye,ft,tt,it,St,yt,Pt){const lt=32*o,Wt=16*o;return this.int16[lt+0]=l,this.int16[lt+1]=h,this.int16[lt+2]=g,this.int16[lt+3]=_,this.int16[lt+4]=x,this.int16[lt+5]=S,this.int16[lt+6]=T,this.int16[lt+7]=A,this.uint16[lt+8]=D,this.uint16[lt+9]=N,this.uint16[lt+10]=W,this.uint16[lt+11]=Q,this.uint16[lt+12]=re,this.uint16[lt+13]=se,this.uint16[lt+14]=de,this.uint16[lt+15]=ye,this.uint16[lt+16]=Oe,this.uint16[lt+17]=Pe,this.uint16[lt+18]=K,this.uint16[lt+19]=ue,this.uint16[lt+20]=Te,this.uint16[lt+21]=Ye,this.uint16[lt+22]=ft,this.uint32[Wt+12]=tt,this.float32[Wt+13]=it,this.float32[Wt+14]=St,this.uint16[lt+30]=yt,this.uint16[lt+31]=Pt,o}}P.prototype.bytesPerElement=64,Ft("StructArrayLayout8i15ui1ul2f2ui64",P);class E extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}E.prototype.bytesPerElement=4,Ft("StructArrayLayout1f4",E);class z extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,h)}emplace(o,l,h,g){const _=3*o;return this.uint16[6*o+0]=l,this.float32[_+1]=h,this.float32[_+2]=g,o}}z.prototype.bytesPerElement=12,Ft("StructArrayLayout1ui2f12",z);class B extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,h)}emplace(o,l,h,g){const _=4*o;return this.uint32[2*o+0]=l,this.uint16[_+2]=h,this.uint16[_+3]=g,o}}B.prototype.bytesPerElement=8,Ft("StructArrayLayout1ul2ui8",B);class U extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const h=this.length;return this.resize(h+1),this.emplace(h,o,l)}emplace(o,l,h){const g=2*o;return this.uint16[g+0]=l,this.uint16[g+1]=h,o}}U.prototype.bytesPerElement=4,Ft("StructArrayLayout2ui4",U);class V extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}V.prototype.bytesPerElement=2,Ft("StructArrayLayout1ui2",V);class Z extends _n{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,o,l,h,g)}emplace(o,l,h,g,_){const x=4*o;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,o}}Z.prototype.bytesPerElement=16,Ft("StructArrayLayout4f16",Z);class ie extends Ds{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new $(this.anchorPointX,this.anchorPointY)}}ie.prototype.size=20;class fe extends r{get(o){return new ie(this,o)}}Ft("CollisionBoxArray",fe);class pe extends Ds{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}pe.prototype.size=48;class me extends w{get(o){return new pe(this,o)}}Ft("PlacedSymbolArray",me);class ve extends Ds{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ve.prototype.size=64;class Ce extends P{get(o){return new ve(this,o)}}Ft("SymbolInstanceArray",Ce);class be extends E{getoffsetX(o){return this.float32[1*o+0]}}Ft("GlyphOffsetArray",be);class ke extends rs{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Ft("SymbolLineVertexArray",ke);class Le extends Ds{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Le.prototype.size=12;class Se extends z{get(o){return new Le(this,o)}}Ft("TextAnchorOffsetArray",Se);class Ne extends Ds{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ne.prototype.size=8;class Qe extends B{get(o){return new Ne(this,o)}}Ft("FeatureIndexArray",Qe);class Ke extends ts{}class Xe extends ts{}class et extends ts{}class Rt extends xd{}class Et extends Ls{}class gt extends Kc{}class Gt extends Fp{}class _r extends bd{}class Gr extends jp{}class xn extends y{}class Yr extends s{}class bn extends m{}class on extends v{}class Jr extends U{}const an=In([{name:"a_pos",components:2,type:"Int16"}],4),{members:fo}=an;class Dr{constructor(o=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=o}prepareSegment(o,l,h,g){const _=this.segments[this.segments.length-1];return o>Dr.MAX_VERTEX_ARRAY_LENGTH&&Qt(`Max vertices per segment is ${Dr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Dr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+o>Dr.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g?this.createNewSegment(l,h,g):_}createNewSegment(o,l,h){const g={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(g.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(o,l,h){return this.prepareSegment(0,o,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,h,g){return new Dr([{vertexOffset:o,primitiveOffset:l,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function oo(c,o){return 256*(c=Ct(Math.floor(c),0,255))+Ct(Math.floor(o),0,255)}Dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ft("SegmentVector",Dr);const mo=In([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ns,os,is,da={exports:{}},Xc={exports:{}},Yc={exports:{}},zl=function(){if(is)return da.exports;is=1;var c=(ns||(ns=1,Xc.exports=function(l,h){var g,_,x,S,T,A,D,N;for(_=l.length-(g=3&l.length),x=h,T=3432918353,A=461845907,N=0;N<_;)D=255&l.charCodeAt(N)|(255&l.charCodeAt(++N))<<8|(255&l.charCodeAt(++N))<<16|(255&l.charCodeAt(++N))<<24,++N,x=27492+(65535&(S=5*(65535&(x=(x^=D=(65535&(D=(D=(65535&D)*T+(((D>>>16)*T&65535)<<16)&4294967295)<<15|D>>>17))*A+(((D>>>16)*A&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(D=0,g){case 3:D^=(255&l.charCodeAt(N+2))<<16;case 2:D^=(255&l.charCodeAt(N+1))<<8;case 1:x^=D=(65535&(D=(D=(65535&(D^=255&l.charCodeAt(N)))*T+(((D>>>16)*T&65535)<<16)&4294967295)<<15|D>>>17))*A+(((D>>>16)*A&65535)<<16)&4294967295}return x^=l.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Xc.exports),o=(os||(os=1,Yc.exports=function(l,h){for(var g,_=l.length,x=h^_,S=0;_>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(S)|(255&l.charCodeAt(++S))<<8|(255&l.charCodeAt(++S))<<16|(255&l.charCodeAt(++S))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),_-=4,++S;switch(_){case 3:x^=(255&l.charCodeAt(S+2))<<16;case 2:x^=(255&l.charCodeAt(S+1))<<8;case 1:x=1540483477*(65535&(x^=255&l.charCodeAt(S)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Yc.exports);return da.exports=c,da.exports.murmur3=c,da.exports.murmur2=o,da.exports}(),Qo=b(zl);class Bi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,l,h,g){this.ids.push(as(o)),this.positions.push(l,h,g)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=as(o);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=l?g=x:h=x+1}const _=[];for(;this.ids[h]===l;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(o,l){const h=new Float64Array(o.ids),g=new Uint32Array(o.positions);return $s(h,g,0,h.length-1),l&&l.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(o){const l=new Bi;return l.ids=o.ids,l.positions=o.positions,l.indexed=!0,l}}function as(c){const o=+c;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Qo(String(c))}function $s(c,o,l,h){for(;l<h;){const g=c[l+h>>1];let _=l-1,x=h+1;for(;;){do _++;while(c[_]<g);do x--;while(c[x]>g);if(_>=x)break;Rn(c,_,x),Rn(o,3*_,3*x),Rn(o,3*_+1,3*x+1),Rn(o,3*_+2,3*x+2)}x-l<h-x?($s(c,o,l,x),l=x+1):($s(c,o,x+1,h),h=x)}}function Rn(c,o,l){const h=c[o];c[o]=c[l],c[l]=h}Ft("FeaturePositionMap",Bi);class dn{constructor(o,l){this.gl=o.gl,this.location=l}}class No extends dn{constructor(o,l){super(o,l),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class Kn extends dn{constructor(o,l){super(o,l),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class oy extends dn{constructor(o,l){super(o,l),this.current=Cr.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const mx=new Float32Array(16);function Np(c){return[oo(255*c.r,255*c.g),oo(255*c.b,255*c.a)]}class Jc{constructor(o,l,h){this.value=o,this.uniformNames=l.map(g=>`u_${g}`),this.type=h}setUniform(o,l,h){o.set(h.constantOr(this.value))}getBinding(o,l,h){return this.type==="color"?new oy(o,l):new No(o,l)}}class Dl{constructor(o,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=o.tlbr}setUniform(o,l,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&o.set(_)}getBinding(o,l,h){return h.substr(0,9)==="u_pattern"?new Kn(o,l):new No(o,l)}}class Aa{constructor(o,l,h,g){this.expression=o,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,l,h,g,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new fn(0),l,{},g,[],_);this.paintVertexArray.resize(o),this._setPaintValue(x,o,S)}updatePaintArray(o,l,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(o,l,_)}_setPaintValue(o,l,h){if(this.type==="color"){const g=Np(h);for(let _=o;_<l;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=o;g<l;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class go{constructor(o,l,h,g,_,x){this.expression=o,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,l,h,g,_){const x=this.expression.evaluate(new fn(this.zoom),l,{},g,[],_),S=this.expression.evaluate(new fn(this.zoom+1),l,{},g,[],_),T=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(T,o,x,S)}updatePaintArray(o,l,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(o,l,_,x)}_setPaintValue(o,l,h,g){if(this.type==="color"){const _=Np(h),x=Np(g);for(let S=o;S<l;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=o;_<l;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=Ct(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);o.set(g)}getBinding(o,l,h){return new No(o,l)}}class za{constructor(o,l,h,g,_,x){this.expression=o,this.type=l,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(o,l,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(g,o,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(o,l,h,g,_){this._setPaintValues(o,l,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(o,l,h,g){if(!g||!h)return;const{min:_,mid:x,max:S}=h,T=g[_],A=g[x],D=g[S];if(T&&A&&D)for(let N=o;N<l;N++)this.zoomInPaintVertexArray.emplace(N,A.tl[0],A.tl[1],A.br[0],A.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],A.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,A.tl[0],A.tl[1],A.br[0],A.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],A.pixelRatio,D.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,mo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,mo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Vp{constructor(o,l,h){this.binders={},this._buffers=[];const g=[];for(const _ in o.paint._values){if(!h(_))continue;const x=o.paint.get(_);if(!(x instanceof ua&&bl(x.property.specification)))continue;const S=Up(_,o.type),T=x.value,A=x.property.specification.type,D=x.property.useIntegerZoom,N=x.property.specification["property-type"],W=N==="cross-faded"||N==="cross-faded-data-driven";if(T.kind==="constant")this.binders[_]=W?new Dl(T.value,S):new Jc(T.value,S,A),g.push(`/u_${_}`);else if(T.kind==="source"||W){const Q=Hp(_,A,"source");this.binders[_]=W?new za(T,A,D,l,Q,o.id):new Aa(T,S,A,Q),g.push(`/a_${_}`)}else{const Q=Hp(_,A,"composite");this.binders[_]=new go(T,S,A,D,l,Q),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof Aa||l instanceof go?l.maxValue:0}populatePaintArrays(o,l,h,g,_){for(const x in this.binders){const S=this.binders[x];(S instanceof Aa||S instanceof go||S instanceof za)&&S.populatePaintArray(o,l,h,g,_)}}setConstantPatternPositions(o,l){for(const h in this.binders){const g=this.binders[h];g instanceof Dl&&g.setConstantPatternPositions(o,l)}}updatePaintArrays(o,l,h,g,_){let x=!1;for(const S in o){const T=l.getPositions(S);for(const A of T){const D=h.feature(A.index);for(const N in this.binders){const W=this.binders[N];if((W instanceof Aa||W instanceof go||W instanceof za)&&W.expression.isStateDependent===!0){const Q=g.paint.get(N);W.expression=Q.value,W.updatePaintArray(A.start,A.end,D,o[S],_),x=!0}}}}return x}defines(){const o=[];for(const l in this.binders){const h=this.binders[l];(h instanceof Jc||h instanceof Dl)&&o.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Aa||h instanceof go)for(let g=0;g<h.paintVertexAttributes.length;g++)o.push(h.paintVertexAttributes[g].name);else if(h instanceof za)for(let g=0;g<mo.members.length;g++)o.push(mo.members[g].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Jc||h instanceof Dl||h instanceof go)for(const g of h.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,l){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Jc||_ instanceof Dl||_ instanceof go){for(const x of _.uniformNames)if(l[x]){const S=_.getBinding(o,l[x],x);h.push({name:x,property:g,binding:S})}}}return h}setUniforms(o,l,h,g){for(const{name:_,property:x,binding:S}of l)this.binders[x].setUniform(S,g,h.get(x),_)}updatePaintBuffers(o){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(o&&h instanceof za){const g=o.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof Aa||h instanceof go)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(o){for(const l in this.binders){const h=this.binders[l];(h instanceof Aa||h instanceof go||h instanceof za)&&h.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof Aa||l instanceof go||l instanceof za)&&l.destroy()}}}class ss{constructor(o,l,h=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new Vp(g,l,h);this.needsUpload=!1,this._featureMap=new Bi,this._bufferOffset=0}populatePaintArrays(o,l,h,g,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(o,l,g,_,x);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(o,this._featureMap,l,_,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function Up(c,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}function Hp(c,o,l){const h={color:{source:Kc,composite:Z},number:{source:E,composite:Kc}},g=function(_){return{"line-pattern":{source:Gt,composite:Gt},"fill-pattern":{source:Gt,composite:Gt},"fill-extrusion-pattern":{source:Gt,composite:Gt}}[_]}(c);return g&&g[l]||h[o][l]}Ft("ConstantBinder",Jc),Ft("CrossFadedConstantBinder",Dl),Ft("SourceExpressionBinder",Aa),Ft("CrossFadedCompositeBinder",za),Ft("CompositeExpressionBinder",go),Ft("ProgramConfiguration",Vp,{omit:["_buffers"]}),Ft("ProgramConfigurationSet",ss);const Qc=Math.pow(2,14)-1,X2=-Qc-1;function eu(c){const o=ct/c.extent,l=c.loadGeometry();for(let h=0;h<l.length;h++){const g=l[h];for(let _=0;_<g.length;_++){const x=g[_],S=Math.round(x.x*o),T=Math.round(x.y*o);x.x=Ct(S,X2,Qc),x.y=Ct(T,X2,Qc),(S<x.x||S>x.x+1||T<x.y||T>x.y+1)&&Qt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function tu(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?eu(c):[]}}const Y2=-32768;function O3(c,o,l,h,g){c.emplaceBack(Y2+8*o+h,Y2+8*l+g)}class gx{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new on,this.segments=new Dr,this.programConfigurations=new ss(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,h){const g=this.layers[0],_=[];let x=null,S=!1,T=g.type==="heatmap";if(g.type==="circle"){const D=g;x=D.layout.get("circle-sort-key"),S=!x.isConstant(),T=T||D.paint.get("circle-pitch-alignment")==="map"}const A=T?l.subdivisionGranularity.circle:1;for(const{feature:D,id:N,index:W,sourceLayerIndex:Q}of o){const re=this.layers[0]._featureFilter.needGeometry,se=tu(D,re);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),se,h))continue;const de=S?x.evaluate(se,{},h):void 0,ye={id:N,properties:D.properties,type:D.type,sourceLayerIndex:Q,index:W,geometry:re?se.geometry:eu(D),patterns:{},sortKey:de};_.push(ye)}S&&_.sort((D,N)=>D.sortKey-N.sortKey);for(const D of _){const{geometry:N,index:W,sourceLayerIndex:Q}=D,re=o[W].feature;this.addFeature(D,N,W,h,A),l.featureIndex.insert(re,N,W,Q,this.index)}}update(o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,fo),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,h,g,_=1){let x;switch(_){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const S=x.length;for(const T of l)for(const A of T){const D=A.x,N=A.y;if(D<0||D>=ct||N<0||N>=ct)continue;const W=this.segments.prepareSegment(S*S,this.layoutVertexArray,this.indexArray,o.sortKey),Q=W.vertexLength;for(let re=0;re<S;re++)for(let se=0;se<S;se++)O3(this.layoutVertexArray,D,N,x[se],x[re]);for(let re=0;re<S-1;re++)for(let se=0;se<S-1;se++){const de=Q+re*S+se,ye=Q+(re+1)*S+se;this.indexArray.emplaceBack(de,ye+1,de+1),this.indexArray.emplaceBack(de,ye,ye+1)}W.vertexLength+=S*S,W.primitiveLength+=(S-1)*(S-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,{},g)}}function J2(c,o){for(let l=0;l<c.length;l++)if(wd(o,c[l]))return!0;for(let l=0;l<o.length;l++)if(wd(c,o[l]))return!0;return!!yx(c,o)}function B3(c,o,l){return!!wd(c,o)||!!vx(o,c,l)}function Q2(c,o){if(c.length===1)return tP(o,c[0]);for(let l=0;l<o.length;l++){const h=o[l];for(let g=0;g<h.length;g++)if(wd(c,h[g]))return!0}for(let l=0;l<c.length;l++)if(tP(o,c[l]))return!0;for(let l=0;l<o.length;l++)if(yx(c,o[l]))return!0;return!1}function F3(c,o,l){if(c.length>1){if(yx(c,o))return!0;for(let h=0;h<o.length;h++)if(vx(o[h],c,l))return!0}for(let h=0;h<c.length;h++)if(vx(c[h],o,l))return!0;return!1}function yx(c,o){if(c.length===0||o.length===0)return!1;for(let l=0;l<c.length-1;l++){const h=c[l],g=c[l+1];for(let _=0;_<o.length-1;_++)if(j3(h,g,o[_],o[_+1]))return!0}return!1}function j3(c,o,l,h){return Vt(c,l,h)!==Vt(o,l,h)&&Vt(c,o,l)!==Vt(c,o,h)}function vx(c,o,l){const h=l*l;if(o.length===1)return c.distSqr(o[0])<h;for(let g=1;g<o.length;g++)if(eP(c,o[g-1],o[g])<h)return!0;return!1}function eP(c,o,l){const h=o.distSqr(l);if(h===0)return c.distSqr(o);const g=((c.x-o.x)*(l.x-o.x)+(c.y-o.y)*(l.y-o.y))/h;return c.distSqr(g<0?o:g>1?l:l.sub(o)._mult(g)._add(o))}function tP(c,o){let l,h,g,_=!1;for(let x=0;x<c.length;x++){l=c[x];for(let S=0,T=l.length-1;S<l.length;T=S++)h=l[S],g=l[T],h.y>o.y!=g.y>o.y&&o.x<(g.x-h.x)*(o.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function wd(c,o){let l=!1;for(let h=0,g=c.length-1;h<c.length;g=h++){const _=c[h],x=c[g];_.y>o.y!=x.y>o.y&&o.x<(x.x-_.x)*(o.y-_.y)/(x.y-_.y)+_.x&&(l=!l)}return l}function N3(c,o,l){const h=l[0],g=l[2];if(c.x<h.x&&o.x<h.x||c.x>g.x&&o.x>g.x||c.y<h.y&&o.y<h.y||c.y>g.y&&o.y>g.y)return!1;const _=Vt(c,o,l[0]);return _!==Vt(c,o,l[1])||_!==Vt(c,o,l[2])||_!==Vt(c,o,l[3])}function Gp(c,o,l){const h=o.paint.get(c).value;return h.kind==="constant"?h.value:l.programConfigurations.get(o.id).getMaxValue(c)}function iy(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function ay(c,o,l,h,g){if(!o[0]&&!o[1])return c;const _=$.convert(o)._mult(g);l==="viewport"&&_._rotate(-h);const x=[];for(let S=0;S<c.length;S++)x.push(c[S].sub(_));return x}let rP,nP;Ft("CircleBucket",gx,{omit:["layers"]});var V3={get paint(){return nP=nP||new jo({"circle-radius":new cr(Me.paint_circle["circle-radius"]),"circle-color":new cr(Me.paint_circle["circle-color"]),"circle-blur":new cr(Me.paint_circle["circle-blur"]),"circle-opacity":new cr(Me.paint_circle["circle-opacity"]),"circle-translate":new Zt(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new cr(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new cr(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new cr(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return rP=rP||new jo({"circle-sort-key":new cr(Me.layout_circle["circle-sort-key"])})}};class U3 extends po{constructor(o){super(o,V3)}createBucket(o){return new gx(o)}queryRadius(o){const l=o;return Gp("circle-radius",this,l)+Gp("circle-stroke-width",this,l)+iy(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:o,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x,unwrappedTileID:S,getElevation:T}){const A=ay(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,x),D=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),N=this.paint.get("circle-pitch-alignment")==="map",W=N?A:function(re,se,de,ye){return re.map(Oe=>oP(Oe,se,de,ye))}(A,_,S,T),Q=N?D*x:D;for(const re of g)for(const se of re){const de=N?se:oP(se,_,S,T);let ye=Q;const Oe=_.projectTileCoordinates(se.x,se.y,S,T).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ye*=Oe/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ye*=_.cameraToCenterDistance/Oe),B3(W,de,ye))return!0}return!1}}function oP(c,o,l,h){const g=o.projectTileCoordinates(c.x,c.y,l,h).point;return new $((.5*g.x+.5)*o.width,(.5*-g.y+.5)*o.height)}class iP extends gx{}let aP;Ft("HeatmapBucket",iP,{omit:["layers"]});var H3={get paint(){return aP=aP||new jo({"heatmap-radius":new cr(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new cr(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qc(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(Me.paint_heatmap["heatmap-opacity"])})}};function _x(c,{width:o,height:l},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*l*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${o*l*h}`)}else g=new Uint8Array(o*l*h);return c.width=o,c.height=l,c.data=g,c}function sP(c,{width:o,height:l},h){if(o===c.width&&l===c.height)return;const g=_x({},{width:o,height:l},h);xx(c,g,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,o),height:Math.min(c.height,l)},h),c.width=o,c.height=l,c.data=g.data}function xx(c,o,l,h,g,_){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||l.x>c.width-g.width||l.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||h.x>o.width-g.width||h.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=c.data,S=o.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<g.height;T++){const A=((l.y+T)*c.width+l.x)*_,D=((h.y+T)*o.width+h.x)*_;for(let N=0;N<g.width*_;N++)S[D+N]=x[A+N]}return o}class Wp{constructor(o,l){_x(this,o,1,l)}resize(o){sP(this,o,1)}clone(){return new Wp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,h,g,_){xx(o,l,h,g,_,1)}}class ui{constructor(o,l){_x(this,o,4,l)}resize(o){sP(this,o,4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new ui({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,h,g,_){xx(o,l,h,g,_,4)}setPixel(o,l,h){const g=4*(o*this.width+l);this.data[g+0]=Math.round(255*h.r/h.a),this.data[g+1]=Math.round(255*h.g/h.a),this.data[g+2]=Math.round(255*h.b/h.a),this.data[g+3]=Math.round(255*h.a)}}function lP(c){const o={},l=c.resolution||256,h=c.clips?c.clips.length:1,g=c.image||new ui({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const _=(x,S,T)=>{o[c.evaluationKey]=T;const A=c.expression.evaluate(o);g.setPixel(x/4/l,S/4,A)};if(c.clips)for(let x=0,S=0;x<h;++x,S+=4*l)for(let T=0,A=0;T<l;T++,A+=4){const D=T/(l-1),{start:N,end:W}=c.clips[x];_(S,A,N*(1-D)+W*D)}else for(let x=0,S=0;x<l;x++,S+=4)_(0,S,x/(l-1));return g}Ft("AlphaImage",Wp),Ft("RGBAImage",ui);const bx="big-fb";class G3 extends po{createBucket(o){return new iP(o)}constructor(o){super(o,H3),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lP({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(bx)&&this.heatmapFbos.delete(bx)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let cP;var W3={get paint(){return cP=cP||new jo({"hillshade-illumination-direction":new Zt(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Zt(Me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Zt(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Zt(Me.paint_hillshade["hillshade-method"])})}};class Z3 extends po{constructor(o){super(o,W3),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let o=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const _=Math.max(o.length,l.length,h.length,g.length);o=o.concat(Array(_-o.length).fill(o.at(-1))),l=l.concat(Array(_-l.length).fill(l.at(-1))),h=h.concat(Array(_-h.length).fill(h.at(-1))),g=g.concat(Array(_-g.length).fill(g.at(-1)));const x=l.map(dr);return{directionRadians:o.map(dr),altitudeRadians:x,shadowColor:g,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let uP;var q3={get paint(){return uP=uP||new jo({"color-relief-opacity":new Zt(Me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new qc(Me["paint_color-relief"]["color-relief-color"])})}};class wx{constructor(o,l,h,g){this.context=o,this.format=h,this.texture=o.gl.createTexture(),this.update(l,g)}update(o,l,h){const{width:g,height:_}=o,x=!(this.size&&this.size[0]===g&&this.size[1]===_||h),{context:S}=this,{gl:T}=S;if(this.useMipmap=!!(l&&l.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!l||l.premultiply!==!1)),x)this.size=[g,_],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||Ur(o)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,o):T.texImage2D(T.TEXTURE_2D,0,this.format,g,_,0,this.format,T.UNSIGNED_BYTE,o.data);else{const{x:A,y:D}=h||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||Ur(o)?T.texSubImage2D(T.TEXTURE_2D,0,A,D,T.RGBA,T.UNSIGNED_BYTE,o):T.texSubImage2D(T.TEXTURE_2D,0,A,D,g,_,T.RGBA,T.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),S.pixelStoreUnpackFlipY.setDefault(),S.pixelStoreUnpack.setDefault(),S.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(o,l,h){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),o!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||o),this.filter=o),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class dP{constructor(o,l,h,g=1,_=1,x=1,S=0){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Qt(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const T=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<T;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(T,A)]=this.data[this._idx(T-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,T)]=this.data[this._idx(A,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<T;A++)for(let D=0;D<T;D++){const N=this.get(A,D);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(o,l){const h=new Uint8Array(this.data.buffer),g=4*this._idx(o,l);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}unpack(o,l,h){return o*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}pack(o){return hP(o,this.getUnpackVector())}getPixels(){return new ui({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,l,h){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,_=l*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(l){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const T=-l*this.dim,A=-h*this.dim;for(let D=x;D<S;D++)for(let N=g;N<_;N++)this.data[this._idx(N,D)]=o.data[this._idx(N+T,D+A)]}}function hP(c,o){const l=o[0],h=o[1],g=o[2],_=o[3],x=Math.min(l,h,g),S=Math.round((c+_)/x);return{r:Math.floor(S*x/l)%256,g:Math.floor(S*x/h)%256,b:Math.floor(S*x/g)%256}}Ft("DEMData",dP);class K3 extends po{constructor(o){super(o,q3)}_createColorRamp(o){const l={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Oc&&h._styleExpression.expression instanceof Bo){this.colorRampExpression=h;const x=h._styleExpression.expression;l.elevationStops=x.labels,l.colorStops=[];for(const S of l.elevationStops)l.colorStops.push(x.evaluate({globals:{elevation:S}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[Cr.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=o)return l;const g={elevationStops:[],colorStops:[]},_=(l.elevationStops.length-1)/(o-1);for(let x=0;x<l.elevationStops.length-.5;x+=_)g.elevationStops.push(l.elevationStops[Math.round(x)]),g.colorStops.push(l.colorStops[Math.round(x)]);return Qt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(o,l,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(l),_=new ui({width:g.colorStops.length,height:1}),x=new ui({width:g.colorStops.length,height:1});for(let S=0;S<g.elevationStops.length;S++){const T=hP(g.elevationStops[S],h);x.setPixel(0,S,new Cr(T.r/255,T.g/255,T.b/255,1)),_.setPixel(0,S,g.colorStops[S])}return this.colorRampTextures={elevationTexture:new wx(o,x,o.gl.RGBA),colorTexture:new wx(o,_,o.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const X3=In([{name:"a_pos",components:2,type:"Int16"}],4),{members:Y3}=X3;function Sx(c,o,l){const h=l.patternDependencies;let g=!1;for(const _ of o){const x=_.paint.get(`${c}-pattern`);x.isConstant()||(g=!0);const S=x.constantOr(null);S&&(g=!0,h[S.to]=!0,h[S.from]=!0)}return g}function Cx(c,o,l,h,g){const _=g.patternDependencies;for(const x of o){const S=x.paint.get(`${c}-pattern`).value;if(S.kind!=="constant"){let T=S.evaluate({zoom:h-1},l,{},g.availableImages),A=S.evaluate({zoom:h},l,{},g.availableImages),D=S.evaluate({zoom:h+1},l,{},g.availableImages);T=T&&T.name?T.name:T,A=A&&A.name?A.name:A,D=D&&D.name?D.name:D,_[T]=!0,_[A]=!0,_[D]=!0,l.patterns[x.id]={min:T,mid:A,max:D}}}return l}function pP(c,o,l,h,g){let _;if(g===function(x,S,T,A){let D=0;for(let N=S,W=T-A;N<T;N+=A)D+=(x[W]-x[N])*(x[N+1]+x[W+1]),W=N;return D}(c,o,l,h)>0)for(let x=o;x<l;x+=h)_=yP(x/h|0,c[x],c[x+1],_);else for(let x=l-h;x>=o;x-=h)_=yP(x/h|0,c[x],c[x+1],_);return _&&Sd(_,_.next)&&(Xp(_),_=_.next),_}function ru(c,o){if(!c)return c;o||(o=c);let l,h=c;do if(l=!1,h.steiner||!Sd(h,h.next)&&Dn(h.prev,h,h.next)!==0)h=h.next;else{if(Xp(h),h=o=h.prev,h===h.next)break;l=!0}while(l||h!==o);return o}function Zp(c,o,l,h,g,_,x){if(!c)return;!x&&_&&function(T,A,D,N){let W=T;do W.z===0&&(W.z=Px(W.x,W.y,A,D,N)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==T);W.prevZ.nextZ=null,W.prevZ=null,function(Q){let re,se=1;do{let de,ye=Q;Q=null;let Oe=null;for(re=0;ye;){re++;let Pe=ye,K=0;for(let Te=0;Te<se&&(K++,Pe=Pe.nextZ,Pe);Te++);let ue=se;for(;K>0||ue>0&&Pe;)K!==0&&(ue===0||!Pe||ye.z<=Pe.z)?(de=ye,ye=ye.nextZ,K--):(de=Pe,Pe=Pe.nextZ,ue--),Oe?Oe.nextZ=de:Q=de,de.prevZ=Oe,Oe=de;ye=Pe}Oe.nextZ=null,se*=2}while(re>1)}(W)}(c,h,g,_);let S=c;for(;c.prev!==c.next;){const T=c.prev,A=c.next;if(_?Q3(c,h,g,_):J3(c))o.push(T.i,c.i,A.i),Xp(c),c=A.next,S=A.next;else if((c=A)===S){x?x===1?Zp(c=e5(ru(c),o),o,l,h,g,_,2):x===2&&t5(c,o,l,h,g,_):Zp(ru(c),o,l,h,g,_,1);break}}}function J3(c){const o=c.prev,l=c,h=c.next;if(Dn(o,l,h)>=0)return!1;const g=o.x,_=l.x,x=h.x,S=o.y,T=l.y,A=h.y,D=Math.min(g,_,x),N=Math.min(S,T,A),W=Math.max(g,_,x),Q=Math.max(S,T,A);let re=h.next;for(;re!==o;){if(re.x>=D&&re.x<=W&&re.y>=N&&re.y<=Q&&qp(g,S,_,T,x,A,re.x,re.y)&&Dn(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function Q3(c,o,l,h){const g=c.prev,_=c,x=c.next;if(Dn(g,_,x)>=0)return!1;const S=g.x,T=_.x,A=x.x,D=g.y,N=_.y,W=x.y,Q=Math.min(S,T,A),re=Math.min(D,N,W),se=Math.max(S,T,A),de=Math.max(D,N,W),ye=Px(Q,re,o,l,h),Oe=Px(se,de,o,l,h);let Pe=c.prevZ,K=c.nextZ;for(;Pe&&Pe.z>=ye&&K&&K.z<=Oe;){if(Pe.x>=Q&&Pe.x<=se&&Pe.y>=re&&Pe.y<=de&&Pe!==g&&Pe!==x&&qp(S,D,T,N,A,W,Pe.x,Pe.y)&&Dn(Pe.prev,Pe,Pe.next)>=0||(Pe=Pe.prevZ,K.x>=Q&&K.x<=se&&K.y>=re&&K.y<=de&&K!==g&&K!==x&&qp(S,D,T,N,A,W,K.x,K.y)&&Dn(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;Pe&&Pe.z>=ye;){if(Pe.x>=Q&&Pe.x<=se&&Pe.y>=re&&Pe.y<=de&&Pe!==g&&Pe!==x&&qp(S,D,T,N,A,W,Pe.x,Pe.y)&&Dn(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.prevZ}for(;K&&K.z<=Oe;){if(K.x>=Q&&K.x<=se&&K.y>=re&&K.y<=de&&K!==g&&K!==x&&qp(S,D,T,N,A,W,K.x,K.y)&&Dn(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function e5(c,o){let l=c;do{const h=l.prev,g=l.next.next;!Sd(h,g)&&mP(h,l,l.next,g)&&Kp(h,g)&&Kp(g,h)&&(o.push(h.i,l.i,g.i),Xp(l),Xp(l.next),l=c=g),l=l.next}while(l!==c);return ru(l)}function t5(c,o,l,h,g,_){let x=c;do{let S=x.next.next;for(;S!==x.prev;){if(x.i!==S.i&&a5(x,S)){let T=gP(x,S);return x=ru(x,x.next),T=ru(T,T.next),Zp(x,o,l,h,g,_,0),void Zp(T,o,l,h,g,_,0)}S=S.next}x=x.next}while(x!==c)}function r5(c,o){let l=c.x-o.x;return l===0&&(l=c.y-o.y,l===0)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(o.next.y-o.y)/(o.next.x-o.x)),l}function n5(c,o){const l=function(g,_){let x=_;const S=g.x,T=g.y;let A,D=-1/0;if(Sd(g,x))return x;do{if(Sd(g,x.next))return x.next;if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){const se=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(se<=S&&se>D&&(D=se,A=x.x<x.next.x?x:x.next,se===S))return A}x=x.next}while(x!==_);if(!A)return null;const N=A,W=A.x,Q=A.y;let re=1/0;x=A;do{if(S>=x.x&&x.x>=W&&S!==x.x&&fP(T<Q?S:D,T,W,Q,T<Q?D:S,T,x.x,x.y)){const se=Math.abs(T-x.y)/(S-x.x);Kp(x,g)&&(se<re||se===re&&(x.x>A.x||x.x===A.x&&o5(A,x)))&&(A=x,re=se)}x=x.next}while(x!==N);return A}(c,o);if(!l)return o;const h=gP(l,c);return ru(h,h.next),ru(l,l.next)}function o5(c,o){return Dn(c.prev,c,o.prev)<0&&Dn(o.next,c,c.next)<0}function Px(c,o,l,h,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function i5(c){let o=c,l=c;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==c);return l}function fP(c,o,l,h,g,_,x,S){return(g-x)*(o-S)>=(c-x)*(_-S)&&(c-x)*(h-S)>=(l-x)*(o-S)&&(l-x)*(_-S)>=(g-x)*(h-S)}function qp(c,o,l,h,g,_,x,S){return!(c===x&&o===S)&&fP(c,o,l,h,g,_,x,S)}function a5(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!function(l,h){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==h.i&&g.next.i!==h.i&&mP(g,g.next,l,h))return!0;g=g.next}while(g!==l);return!1}(c,o)&&(Kp(c,o)&&Kp(o,c)&&function(l,h){let g=l,_=!1;const x=(l.x+h.x)/2,S=(l.y+h.y)/2;do g.y>S!=g.next.y>S&&g.next.y!==g.y&&x<(g.next.x-g.x)*(S-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==l);return _}(c,o)&&(Dn(c.prev,c,o.prev)||Dn(c,o.prev,o))||Sd(c,o)&&Dn(c.prev,c,c.next)>0&&Dn(o.prev,o,o.next)>0)}function Dn(c,o,l){return(o.y-c.y)*(l.x-o.x)-(o.x-c.x)*(l.y-o.y)}function Sd(c,o){return c.x===o.x&&c.y===o.y}function mP(c,o,l,h){const g=ly(Dn(c,o,l)),_=ly(Dn(c,o,h)),x=ly(Dn(l,h,c)),S=ly(Dn(l,h,o));return g!==_&&x!==S||!(g!==0||!sy(c,l,o))||!(_!==0||!sy(c,h,o))||!(x!==0||!sy(l,c,h))||!(S!==0||!sy(l,o,h))}function sy(c,o,l){return o.x<=Math.max(c.x,l.x)&&o.x>=Math.min(c.x,l.x)&&o.y<=Math.max(c.y,l.y)&&o.y>=Math.min(c.y,l.y)}function ly(c){return c>0?1:c<0?-1:0}function Kp(c,o){return Dn(c.prev,c,c.next)<0?Dn(c,o,c.next)>=0&&Dn(c,c.prev,o)>=0:Dn(c,o,c.prev)<0||Dn(c,c.next,o)<0}function gP(c,o){const l=Tx(c.i,c.x,c.y),h=Tx(o.i,o.x,o.y),g=c.next,_=o.prev;return c.next=o,o.prev=c,l.next=g,g.prev=l,h.next=l,l.prev=h,_.next=h,h.prev=_,h}function yP(c,o,l,h){const g=Tx(c,o,l);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function Xp(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Tx(c,o,l){return{i:c,x:o,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Cd{constructor(o,l){if(l>o)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=o,this._minGranularity=l}getGranularityForZoomLevel(o){return Math.max(Math.floor(this._baseZoomGranularity/(1<<o)),this._minGranularity,1)}}class cy{constructor(o){this.fill=o.fill,this.line=o.line,this.tile=o.tile,this.stencil=o.stencil,this.circle=o.circle}}cy.noSubdivision=new cy({fill:new Cd(0,0),line:new Cd(0,0),tile:new Cd(0,0),stencil:new Cd(0,0),circle:1}),Ft("SubdivisionGranularityExpression",Cd),Ft("SubdivisionGranularitySetting",cy);const Pd=-32768,Yp=32767;class s5{constructor(o,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=o,this._granularityCellSize=ct/o,this._canonical=l}_getKey(o,l){return(o+=32768)<<16|l+32768}_vertexToIndex(o,l){if(o<-32768||l<-32768||o>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(o),g=0|Math.round(l),_=this._getKey(h,g);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,x),this._vertexBuffer.push(h,g),x}_subdivideTrianglesScanline(o){if(this._granularity<2)return function(g,_){const x=[];for(let S=0;S<_.length;S+=3){const T=_[S],A=_[S+1],D=_[S+2],N=g[2*T],W=g[2*T+1];(g[2*A]-N)*(g[2*D+1]-W)-(g[2*A+1]-W)*(g[2*D]-N)>0?(x.push(T),x.push(D),x.push(A)):(x.push(T),x.push(A),x.push(D))}return x}(this._vertexBuffer,o);const l=[],h=o.length;for(let g=0;g<h;g+=3){const _=[o[g+0],o[g+1],o[g+2]],x=[this._vertexBuffer[2*o[g+0]+0],this._vertexBuffer[2*o[g+0]+1],this._vertexBuffer[2*o[g+1]+0],this._vertexBuffer[2*o[g+1]+1],this._vertexBuffer[2*o[g+2]+0],this._vertexBuffer[2*o[g+2]+1]];let S=1/0,T=1/0,A=-1/0,D=-1/0;for(let se=0;se<3;se++){const de=x[2*se],ye=x[2*se+1];S=Math.min(S,de),A=Math.max(A,de),T=Math.min(T,ye),D=Math.max(D,ye)}if(S===A||T===D)continue;const N=Math.floor(S/this._granularityCellSize),W=Math.ceil(A/this._granularityCellSize),Q=Math.floor(T/this._granularityCellSize),re=Math.ceil(D/this._granularityCellSize);if(N!==W||Q!==re)for(let se=Q;se<re;se++){const de=this._scanlineGenerateVertexRingForCellRow(se,x,_);l5(this._vertexBuffer,de,l)}else l.push(..._)}return l}_scanlineGenerateVertexRingForCellRow(o,l,h){const g=o*this._granularityCellSize,_=g+this._granularityCellSize,x=[];for(let S=0;S<3;S++){const T=l[2*S],A=l[2*S+1],D=l[2*(S+1)%6],N=l[(2*(S+1)+1)%6],W=l[2*(S+2)%6],Q=l[(2*(S+2)+1)%6],re=D-T,se=N-A,de=re===0,ye=se===0,Oe=(g-A)/se,Pe=(_-A)/se,K=Math.min(Oe,Pe),ue=Math.max(Oe,Pe);if(!ye&&(K>=1||ue<=0)||ye&&(A<g||A>_)){N>=g&&N<=_&&x.push(h[(S+1)%3]);continue}!ye&&K>0&&x.push(this._vertexToIndex(T+re*K,A+se*K));const Te=T+re*Math.max(K,0),Ye=T+re*Math.min(ue,1);de||this._generateIntraEdgeVertices(x,T,A,D,N,Te,Ye),!ye&&ue<1&&x.push(this._vertexToIndex(T+re*ue,A+se*ue)),(ye||N>=g&&N<=_)&&x.push(h[(S+1)%3]),!ye&&(N<=g||N>=_)&&this._generateInterEdgeVertices(x,T,A,D,N,W,Q,Ye,g,_)}return x}_generateIntraEdgeVertices(o,l,h,g,_,x,S){const T=g-l,A=_-h,D=A===0,N=D?Math.min(l,g):Math.min(x,S),W=D?Math.max(l,g):Math.max(x,S),Q=Math.floor(N/this._granularityCellSize)+1,re=Math.ceil(W/this._granularityCellSize)-1;if(D?l<g:x<S)for(let se=Q;se<=re;se++){const de=se*this._granularityCellSize;o.push(this._vertexToIndex(de,h+A*(de-l)/T))}else for(let se=re;se>=Q;se--){const de=se*this._granularityCellSize;o.push(this._vertexToIndex(de,h+A*(de-l)/T))}}_generateInterEdgeVertices(o,l,h,g,_,x,S,T,A,D){const N=_-h,W=x-g,Q=S-_,re=(A-_)/Q,se=(D-_)/Q,de=Math.min(re,se),ye=Math.max(re,se),Oe=g+W*de;let Pe=Math.floor(Math.min(Oe,T)/this._granularityCellSize)+1,K=Math.ceil(Math.max(Oe,T)/this._granularityCellSize)-1,ue=T<Oe;const Te=Q===0;if(Te&&(S===A||S===D))return;if(Te||de>=1||ye<=0){const ft=h-S,tt=x+(l-x)*Math.min((A-S)/ft,(D-S)/ft);Pe=Math.floor(Math.min(tt,T)/this._granularityCellSize)+1,K=Math.ceil(Math.max(tt,T)/this._granularityCellSize)-1,ue=T<tt}const Ye=N>0?D:A;if(ue)for(let ft=Pe;ft<=K;ft++)o.push(this._vertexToIndex(ft*this._granularityCellSize,Ye));else for(let ft=K;ft>=Pe;ft--)o.push(this._vertexToIndex(ft*this._granularityCellSize,Ye))}_generateOutline(o){const l=[];for(const h of o){const g=nu(h,this._granularity,!0),_=this._pointArrayToIndices(g),x=[];for(let S=1;S<_.length;S++)x.push(_[S-1]),x.push(_[S]);l.push(x)}return l}_handlePoles(o){let l=!1,h=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(o,l,h)}_ensureNoPoleVertices(){const o=this._vertexBuffer;for(let l=0;l<o.length;l+=2){const h=o[l+1];h===Pd&&(o[l+1]=-32767),h===Yp&&(o[l+1]=32766)}}_generatePoleQuad(o,l,h,g,_,x){g>_!=(x===Pd)?(o.push(l),o.push(h),o.push(this._vertexToIndex(g,x)),o.push(h),o.push(this._vertexToIndex(_,x)),o.push(this._vertexToIndex(g,x))):(o.push(h),o.push(l),o.push(this._vertexToIndex(g,x)),o.push(this._vertexToIndex(_,x)),o.push(h),o.push(this._vertexToIndex(g,x)))}_fillPoles(o,l,h){const g=this._vertexBuffer,_=ct,x=o.length;for(let S=2;S<x;S+=3){const T=o[S-2],A=o[S-1],D=o[S],N=g[2*T],W=g[2*T+1],Q=g[2*A],re=g[2*A+1],se=g[2*D],de=g[2*D+1];l&&(W===0&&re===0&&this._generatePoleQuad(o,T,A,N,Q,Pd),re===0&&de===0&&this._generatePoleQuad(o,A,D,Q,se,Pd),de===0&&W===0&&this._generatePoleQuad(o,D,T,se,N,Pd)),h&&(W===_&&re===_&&this._generatePoleQuad(o,T,A,N,Q,Yp),re===_&&de===_&&this._generatePoleQuad(o,A,D,Q,se,Yp),de===_&&W===_&&this._generatePoleQuad(o,D,T,se,N,Yp))}}_initializeVertices(o){for(let l=0;l<o.length;l+=2)this._vertexToIndex(o[l],o[l+1])}subdividePolygonInternal(o,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:g}=function(S){const T=[],A=[];for(const D of S)if(D.length!==0){D!==S[0]&&T.push(A.length/2);for(let N=0;N<D.length;N++)A.push(D[N].x),A.push(D[N].y)}return{flattened:A,holeIndices:T}}(o);let _;this._initializeVertices(h);try{const S=function(A,D,N=2){const W=D&&D.length,Q=W?D[0]*N:A.length;let re=pP(A,0,Q,N,!0);const se=[];if(!re||re.next===re.prev)return se;let de,ye,Oe;if(W&&(re=function(Pe,K,ue,Te){const Ye=[];for(let ft=0,tt=K.length;ft<tt;ft++){const it=pP(Pe,K[ft]*Te,ft<tt-1?K[ft+1]*Te:Pe.length,Te,!1);it===it.next&&(it.steiner=!0),Ye.push(i5(it))}Ye.sort(r5);for(let ft=0;ft<Ye.length;ft++)ue=n5(Ye[ft],ue);return ue}(A,D,re,N)),A.length>80*N){de=1/0,ye=1/0;let Pe=-1/0,K=-1/0;for(let ue=N;ue<Q;ue+=N){const Te=A[ue],Ye=A[ue+1];Te<de&&(de=Te),Ye<ye&&(ye=Ye),Te>Pe&&(Pe=Te),Ye>K&&(K=Ye)}Oe=Math.max(Pe-de,K-ye),Oe=Oe!==0?32767/Oe:0}return Zp(re,se,N,de,ye,Oe,0),se}(h,g),T=this._convertIndices(h,S);_=this._subdivideTrianglesScanline(T)}catch(S){console.error(S)}let x=[];return l&&(x=this._generateOutline(o)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:x}}_convertIndices(o,l){const h=[];for(let g=0;g<l.length;g++)h.push(this._vertexToIndex(o[2*l[g]],o[2*l[g]+1]));return h}_pointArrayToIndices(o){const l=[];for(let h=0;h<o.length;h++){const g=o[h];l.push(this._vertexToIndex(g.x,g.y))}return l}}function vP(c,o,l,h=!0){return new s5(l,o).subdividePolygonInternal(c,h)}function nu(c,o,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const h=c[0],g=c[c.length-1],_=l&&(h.x!==g.x||h.y!==g.y);if(o<2)return _?[...c,c[0]]:[...c];const x=Math.floor(ct/o),S=[];S.push(new $(c[0].x,c[0].y));const T=c.length,A=_?T:T-1;for(let D=0;D<A;D++){const N=c[D],W=D<T-1?c[D+1]:c[0],Q=N.x,re=N.y,se=W.x,de=W.y,ye=Q!==se,Oe=re!==de;if(!ye&&!Oe)continue;const Pe=se-Q,K=de-re,ue=Math.abs(Pe),Te=Math.abs(K);let Ye=Q,ft=re;for(;;){const it=Pe>0?(Math.floor(Ye/x)+1)*x:(Math.ceil(Ye/x)-1)*x,St=K>0?(Math.floor(ft/x)+1)*x:(Math.ceil(ft/x)-1)*x,yt=Math.abs(Ye-it),Pt=Math.abs(ft-St),lt=Math.abs(Ye-se),Wt=Math.abs(ft-de),sr=ye?yt/ue:Number.POSITIVE_INFINITY,or=Oe?Pt/Te:Number.POSITIVE_INFINITY;if((lt<=yt||!ye)&&(Wt<=Pt||!Oe))break;if(sr<or&&ye||!Oe){Ye=it,ft+=K*sr;const Yt=new $(Ye,Math.round(ft));S[S.length-1].x===Yt.x&&S[S.length-1].y===Yt.y||S.push(Yt)}else{Ye+=Pe*or,ft=St;const Yt=new $(Math.round(Ye),ft);S[S.length-1].x===Yt.x&&S[S.length-1].y===Yt.y||S.push(Yt)}}const tt=new $(se,de);S[S.length-1].x===tt.x&&S[S.length-1].y===tt.y||S.push(tt)}return S}function l5(c,o,l){if(o.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,g=c[2*o[0]];for(let T=1;T<o.length;T++){const A=c[2*o[T]];A<g&&(g=A,h=T)}const _=o.length;let x=h,S=(x+1)%_;for(;;){const T=x-1>=0?x-1:_-1,A=(S+1)%_,D=c[2*o[T]],N=c[2*o[A]],W=c[2*o[x]],Q=c[2*o[x]+1],re=c[2*o[S]+1];let se=!1;if(D<N)se=!0;else if(D>N)se=!1;else{const de=re-Q,ye=-(c[2*o[S]]-W),Oe=Q<re?1:-1;((D-W)*de+(c[2*o[T]+1]-Q)*ye)*Oe>((N-W)*de+(c[2*o[A]+1]-Q)*ye)*Oe&&(se=!0)}if(se){const de=o[T],ye=o[x],Oe=o[S];de!==ye&&de!==Oe&&ye!==Oe&&l.push(Oe,ye,de),x--,x<0&&(x=_-1)}else{const de=o[A],ye=o[x],Oe=o[S];de!==ye&&de!==Oe&&ye!==Oe&&l.push(Oe,ye,de),S++,S>=_&&(S=0)}if(T===A)break}}function _P(c,o,l,h,g,_,x,S,T){const A=g.length/2,D=x&&S&&T;if(A<Dr.MAX_VERTEX_ARRAY_LENGTH){const N=o.prepareSegment(A,l,h),W=N.vertexLength;for(let se=0;se<_.length;se+=3)h.emplaceBack(W+_[se],W+_[se+1],W+_[se+2]);let Q,re;N.vertexLength+=A,N.primitiveLength+=_.length/3,D&&(re=x.prepareSegment(A,l,S),Q=re.vertexLength,re.vertexLength+=A);for(let se=0;se<g.length;se+=2)c(g[se],g[se+1]);if(D)for(let se=0;se<T.length;se++){const de=T[se];for(let ye=1;ye<de.length;ye+=2)S.emplaceBack(Q+de[ye-1],Q+de[ye]);re.primitiveLength+=de.length/2}}else(function(N,W,Q,re,se,de){const ye=[];for(let Te=0;Te<re.length/2;Te++)ye.push(-1);const Oe={count:0};let Pe=0,K=N.getOrCreateLatestSegment(W,Q),ue=K.vertexLength;for(let Te=2;Te<se.length;Te+=3){const Ye=se[Te-2],ft=se[Te-1],tt=se[Te];let it=ye[Ye]<Pe,St=ye[ft]<Pe,yt=ye[tt]<Pe;K.vertexLength+((it?1:0)+(St?1:0)+(yt?1:0))>Dr.MAX_VERTEX_ARRAY_LENGTH&&(K=N.createNewSegment(W,Q),Pe=Oe.count,it=!0,St=!0,yt=!0,ue=0);const Pt=Jp(ye,re,de,Oe,Ye,it,K),lt=Jp(ye,re,de,Oe,ft,St,K),Wt=Jp(ye,re,de,Oe,tt,yt,K);Q.emplaceBack(ue+Pt-Pe,ue+lt-Pe,ue+Wt-Pe),K.primitiveLength++}})(o,l,h,g,_,c),D&&function(N,W,Q,re,se,de){const ye=[];for(let Te=0;Te<re.length/2;Te++)ye.push(-1);const Oe={count:0};let Pe=0,K=N.getOrCreateLatestSegment(W,Q),ue=K.vertexLength;for(let Te=0;Te<se.length;Te++){const Ye=se[Te];for(let ft=1;ft<se[Te].length;ft+=2){const tt=Ye[ft-1],it=Ye[ft];let St=ye[tt]<Pe,yt=ye[it]<Pe;K.vertexLength+((St?1:0)+(yt?1:0))>Dr.MAX_VERTEX_ARRAY_LENGTH&&(K=N.createNewSegment(W,Q),Pe=Oe.count,St=!0,yt=!0,ue=0);const Pt=Jp(ye,re,de,Oe,tt,St,K),lt=Jp(ye,re,de,Oe,it,yt,K);Q.emplaceBack(ue+Pt-Pe,ue+lt-Pe),K.primitiveLength++}}}(x,l,S,g,T,c),o.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function Jp(c,o,l,h,g,_,x){if(_){const S=h.count;return l(o[2*g],o[2*g+1]),c[g]=h.count,h.count++,x.vertexLength++,S}return c[g]}class Ix{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new et,this.indexArray=new on,this.indexArray2=new Jr,this.programConfigurations=new ss(o.layers,o.zoom),this.segments=new Dr,this.segments2=new Dr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,h){this.hasPattern=Sx("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:T,index:A,sourceLayerIndex:D}of o){const N=this.layers[0]._featureFilter.needGeometry,W=tu(S,N);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),W,h))continue;const Q=_?g.evaluate(W,{},h,l.availableImages):void 0,re={id:T,properties:S.properties,type:S.type,sourceLayerIndex:D,index:A,geometry:N?W.geometry:eu(S),patterns:{},sortKey:Q};x.push(re)}_&&x.sort((S,T)=>S.sortKey-T.sortKey);for(const S of x){const{geometry:T,index:A,sourceLayerIndex:D}=S;if(this.hasPattern){const N=Cx("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(N)}else this.addFeature(S,T,A,h,{},l.subdivisionGranularity);l.featureIndex.insert(o[A].feature,T,A,D,this.index)}}update(o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,h)}addFeatures(o,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Y3),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,l,h,g,_,x){for(const S of Xu(l,500)){const T=vP(S,g,x.fill.getGranularityForZoomLevel(g.z)),A=this.layoutVertexArray;_P((D,N)=>{A.emplaceBack(D,N)},this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles,this.segments2,this.indexArray2,T.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,_,g)}}let xP,bP;Ft("FillBucket",Ix,{omit:["layers","patternFeatures"]});var c5={get paint(){return bP=bP||new jo({"fill-antialias":new Zt(Me.paint_fill["fill-antialias"]),"fill-opacity":new cr(Me.paint_fill["fill-opacity"]),"fill-color":new cr(Me.paint_fill["fill-color"]),"fill-outline-color":new cr(Me.paint_fill["fill-outline-color"]),"fill-translate":new Zt(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new _d(Me.paint_fill["fill-pattern"])})},get layout(){return xP=xP||new jo({"fill-sort-key":new cr(Me.layout_fill["fill-sort-key"])})}};class u5 extends po{constructor(o){super(o,c5)}recalculate(o,l){super.recalculate(o,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Ix(o)}queryRadius(){return iy(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:o,geometry:l,transform:h,pixelsToTileUnits:g}){return Q2(ay(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,g),l)}isTileClipped(){return!0}}const d5=In([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),h5=In([{name:"a_centroid",components:2,type:"Int16"}],4),{members:p5}=d5;var Ex,wP,kx,SP,Mx,CP,PP,uy={};function TP(){if(wP)return Ex;wP=1;var c=k();function o(g,_,x,S,T){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=S,this._values=T,g.readFields(l,this,_)}function l(g,_,x){g==1?_.id=x.readVarint():g==2?function(S,T){for(var A=S.readVarint()+S.pos;S.pos<A;){var D=T._keys[S.readVarint()],N=T._values[S.readVarint()];T.properties[D]=N}}(x,_):g==3?_.type=x.readVarint():g==4&&(_._geometry=x.pos)}function h(g){for(var _,x,S=0,T=0,A=g.length,D=A-1;T<A;D=T++)S+=((x=g[D]).x-(_=g[T]).x)*(_.y+x.y);return S}return Ex=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var _,x=g.readVarint()+g.pos,S=1,T=0,A=0,D=0,N=[];g.pos<x;){if(T<=0){var W=g.readVarint();S=7&W,T=W>>3}if(T--,S===1||S===2)A+=g.readSVarint(),D+=g.readSVarint(),S===1&&(_&&N.push(_),_=[]),_.push(new c(A,D));else{if(S!==7)throw new Error("unknown command "+S);_&&_.push(_[0].clone())}}return _&&N.push(_),N},o.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var _=g.readVarint()+g.pos,x=1,S=0,T=0,A=0,D=1/0,N=-1/0,W=1/0,Q=-1/0;g.pos<_;){if(S<=0){var re=g.readVarint();x=7&re,S=re>>3}if(S--,x===1||x===2)(T+=g.readSVarint())<D&&(D=T),T>N&&(N=T),(A+=g.readSVarint())<W&&(W=A),A>Q&&(Q=A);else if(x!==7)throw new Error("unknown command "+x)}return[D,W,N,Q]},o.prototype.toGeoJSON=function(g,_,x){var S,T,A=this.extent*Math.pow(2,x),D=this.extent*g,N=this.extent*_,W=this.loadGeometry(),Q=o.types[this.type];function re(ye){for(var Oe=0;Oe<ye.length;Oe++){var Pe=ye[Oe];ye[Oe]=[360*(Pe.x+D)/A-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pe.y+N)/A)*Math.PI/180))-90]}}switch(this.type){case 1:var se=[];for(S=0;S<W.length;S++)se[S]=W[S][0];re(W=se);break;case 2:for(S=0;S<W.length;S++)re(W[S]);break;case 3:for(W=function(ye){var Oe=ye.length;if(Oe<=1)return[ye];for(var Pe,K,ue=[],Te=0;Te<Oe;Te++){var Ye=h(ye[Te]);Ye!==0&&(K===void 0&&(K=Ye<0),K===Ye<0?(Pe&&ue.push(Pe),Pe=[ye[Te]]):Pe.push(ye[Te]))}return Pe&&ue.push(Pe),ue}(W),S=0;S<W.length;S++)for(T=0;T<W[S].length;T++)re(W[S][T])}W.length===1?W=W[0]:Q="Multi"+Q;var de={type:"Feature",geometry:{type:Q,coordinates:W},properties:this.properties};return"id"in this&&(de.id=this.id),de},Ex}function IP(){if(SP)return kx;SP=1;var c=TP();function o(h,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,g),this.length=this._features.length}function l(h,g,_){h===15?g.version=_.readVarint():h===1?g.name=_.readString():h===5?g.extent=_.readVarint():h===2?g._features.push(_.pos):h===3?g._keys.push(_.readString()):h===4&&g._values.push(function(x){for(var S=null,T=x.readVarint()+x.pos;x.pos<T;){var A=x.readVarint()>>3;S=A===1?x.readString():A===2?x.readFloat():A===3?x.readDouble():A===4?x.readVarint64():A===5?x.readVarint():A===6?x.readSVarint():A===7?x.readBoolean():null}return S}(_))}return kx=o,o.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var g=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,g,this.extent,this._keys,this._values)},kx}function EP(){return PP||(PP=1,uy.VectorTile=function(){if(CP)return Mx;CP=1;var c=IP();function o(l,h,g){if(l===3){var _=new c(g,g.readVarint()+g.pos);_.length&&(h[_.name]=_)}}return Mx=function(l,h){this.layers=l.readFields(o,{},h)},Mx}(),uy.VectorTileFeature=TP(),uy.VectorTileLayer=IP()),uy}var Qp=b(EP());const f5=Qp.VectorTileFeature.types,Rx=Math.pow(2,13);function ef(c,o,l,h,g,_,x,S){c.emplaceBack(o,l,2*Math.floor(h*Rx)+x,g*Rx*2,_*Rx*2,Math.round(S))}class Ax{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Rt,this.centroidVertexArray=new Ke,this.indexArray=new on,this.programConfigurations=new ss(o.layers,o.zoom),this.segments=new Dr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,h){this.features=[],this.hasPattern=Sx("fill-extrusion",this.layers,l);for(const{feature:g,id:_,index:x,sourceLayerIndex:S}of o){const T=this.layers[0]._featureFilter.needGeometry,A=tu(g,T);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),A,h))continue;const D={id:_,sourceLayerIndex:S,index:x,geometry:T?A.geometry:eu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Cx("fill-extrusion",this.layers,D,this.zoom,l)):this.addFeature(D,D.geometry,x,h,{},l.subdivisionGranularity),l.featureIndex.insert(g,D.geometry,x,S,this.index,!0)}}addFeatures(o,l,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,l,h,o.subdivisionGranularity)}}update(o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,p5),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,h5.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,l,h,g,_,x){for(const S of Xu(l,500)){const T={x:0,y:0,sampleCount:0},A=this.layoutVertexArray.length;this.processPolygon(T,g,o,S,x);const D=this.layoutVertexArray.length-A,N=Math.floor(T.x/T.sampleCount),W=Math.floor(T.y/T.sampleCount);for(let Q=0;Q<D;Q++)this.centroidVertexArray.emplaceBack(N,W)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,_,g)}processPolygon(o,l,h,g,_){if(g.length<1||kP(g[0]))return;for(const N of g)N.length!==0&&m5(o,N);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},S=_.fill.getGranularityForZoomLevel(l.z),T=f5[h.type]==="Polygon";for(const N of g){if(N.length===0||kP(N))continue;const W=nu(N,S,T);this._generateSideFaces(W,x)}if(!T)return;const A=vP(g,l,S,!1),D=this.layoutVertexArray;_P((N,W)=>{ef(D,N,W,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,A.verticesFlattened,A.indicesTriangles)}_generateSideFaces(o,l){let h=0;for(let g=1;g<o.length;g++){const _=o[g],x=o[g-1];if(g5(_,x))continue;l.segment.vertexLength+4>Dr.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const S=_.sub(x)._perp()._unit(),T=x.dist(_);h+T>32768&&(h=0),ef(this.layoutVertexArray,_.x,_.y,S.x,S.y,0,0,h),ef(this.layoutVertexArray,_.x,_.y,S.x,S.y,0,1,h),h+=T,ef(this.layoutVertexArray,x.x,x.y,S.x,S.y,0,0,h),ef(this.layoutVertexArray,x.x,x.y,S.x,S.y,0,1,h);const A=l.segment.vertexLength;this.indexArray.emplaceBack(A,A+2,A+1),this.indexArray.emplaceBack(A+1,A+2,A+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function m5(c,o){for(let l=0;l<o.length;l++){const h=o[l];l===o.length-1&&o[0].x===h.x&&o[0].y===h.y||(c.x+=h.x,c.y+=h.y,c.sampleCount++)}}function g5(c,o){return c.x===o.x&&(c.x<0||c.x>ct)||c.y===o.y&&(c.y<0||c.y>ct)}function kP(c){return c.every(o=>o.x<0)||c.every(o=>o.x>ct)||c.every(o=>o.y<0)||c.every(o=>o.y>ct)}let MP;Ft("FillExtrusionBucket",Ax,{omit:["layers","features"]});var y5={get paint(){return MP=MP||new jo({"fill-extrusion-opacity":new Zt(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new cr(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _d(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new cr(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new cr(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class v5 extends po{constructor(o){super(o,y5)}createBucket(o){return new Ax(o)}queryRadius(){return iy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:o,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x,pixelPosMatrix:S}){const T=ay(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,x),A=this.paint.get("fill-extrusion-height").evaluate(l,h),D=this.paint.get("fill-extrusion-base").evaluate(l,h),N=function(Q,re){const se=[];for(const de of Q){const ye=[de.x,de.y,0,1];Ge(ye,ye,re),se.push(new $(ye[0]/ye[3],ye[1]/ye[3]))}return se}(T,S),W=function(Q,re,se,de){const ye=[],Oe=[],Pe=de[8]*re,K=de[9]*re,ue=de[10]*re,Te=de[11]*re,Ye=de[8]*se,ft=de[9]*se,tt=de[10]*se,it=de[11]*se;for(const St of Q){const yt=[],Pt=[];for(const lt of St){const Wt=lt.x,sr=lt.y,or=de[0]*Wt+de[4]*sr+de[12],Yt=de[1]*Wt+de[5]*sr+de[13],Er=de[2]*Wt+de[6]*sr+de[14],En=de[3]*Wt+de[7]*sr+de[15],Xn=Er+ue,Eo=En+Te,ji=or+Ye,di=Yt+ft,yo=Er+tt,wn=En+it,ao=new $((or+Pe)/Eo,(Yt+K)/Eo);ao.z=Xn/Eo,yt.push(ao);const vo=new $(ji/wn,di/wn);vo.z=yo/wn,Pt.push(vo)}ye.push(yt),Oe.push(Pt)}return[ye,Oe]}(g,D,A,S);return function(Q,re,se){let de=1/0;Q2(se,re)&&(de=RP(se,re[0]));for(let ye=0;ye<re.length;ye++){const Oe=re[ye],Pe=Q[ye];for(let K=0;K<Oe.length-1;K++){const ue=Oe[K],Te=[ue,Oe[K+1],Pe[K+1],Pe[K],ue];J2(se,Te)&&(de=Math.min(de,RP(se,Te)))}}return de!==1/0&&de}(W[0],W[1],N)}}function tf(c,o){return c.x*o.x+c.y*o.y}function RP(c,o){if(c.length===1){let l=0;const h=o[l++];let g;for(;!g||h.equals(g);)if(g=o[l++],!g)return 1/0;for(;l<o.length;l++){const _=o[l],x=c[0],S=g.sub(h),T=_.sub(h),A=x.sub(h),D=tf(S,S),N=tf(S,T),W=tf(T,T),Q=tf(A,S),re=tf(A,T),se=D*W-N*N,de=(W*Q-N*re)/se,ye=(D*re-N*Q)/se,Oe=h.z*(1-de-ye)+g.z*de+_.z*ye;if(isFinite(Oe))return Oe}return 1/0}{let l=1/0;for(const h of o)l=Math.min(l,h.z);return l}}const _5=In([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:x5}=_5,b5=In([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:w5}=b5,S5=Qp.VectorTileFeature.types,C5=Math.cos(Math.PI/180*37.5),AP=Math.pow(2,14)/.5;class zx{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Et,this.layoutVertexArray2=new gt,this.indexArray=new on,this.programConfigurations=new ss(o.layers,o.zoom),this.segments=new Dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,h){this.hasPattern=Sx("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:T,index:A,sourceLayerIndex:D}of o){const N=this.layers[0]._featureFilter.needGeometry,W=tu(S,N);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),W,h))continue;const Q=_?g.evaluate(W,{},h):void 0,re={id:T,properties:S.properties,type:S.type,sourceLayerIndex:D,index:A,geometry:N?W.geometry:eu(S),patterns:{},sortKey:Q};x.push(re)}_&&x.sort((S,T)=>S.sortKey-T.sortKey);for(const S of x){const{geometry:T,index:A,sourceLayerIndex:D}=S;if(this.hasPattern){const N=Cx("line",this.layers,S,this.zoom,l);this.patternFeatures.push(N)}else this.addFeature(S,T,A,h,{},l.subdivisionGranularity);l.featureIndex.insert(o[A].feature,T,A,D,this.index)}}update(o,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,h)}addFeatures(o,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,w5)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,x5),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,h,g,_,x){const S=this.layers[0].layout,T=S.get("line-join").evaluate(o,{}),A=S.get("line-cap"),D=S.get("line-miter-limit"),N=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const W of l)this.addLine(W,o,T,A,D,N,g,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,h,_,g)}addLine(o,l,h,g,_,x,S,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o=nu(o,S?T.line.getGranularityForZoomLevel(S.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<o.length-1;Pe++)this.totalDistance+=o[Pe].dist(o[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=S5[l.type]==="Polygon";let D=o.length;for(;D>=2&&o[D-1].equals(o[D-2]);)D--;let N=0;for(;N<D-1&&o[N].equals(o[N+1]);)N++;if(D<(A?3:2))return;h==="bevel"&&(_=1.05);const W=this.overscaling<=16?122880/(512*this.overscaling):0,Q=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let re,se,de,ye,Oe;this.e1=this.e2=-1,A&&(re=o[D-2],Oe=o[N].sub(re)._unit()._perp());for(let Pe=N;Pe<D;Pe++){if(de=Pe===D-1?A?o[N+1]:void 0:o[Pe+1],de&&o[Pe].equals(de))continue;Oe&&(ye=Oe),re&&(se=re),re=o[Pe],Oe=de?de.sub(re)._unit()._perp():ye,ye=ye||Oe;let K=ye.add(Oe);K.x===0&&K.y===0||K._unit();const ue=ye.x*Oe.x+ye.y*Oe.y,Te=K.x*Oe.x+K.y*Oe.y,Ye=Te!==0?1/Te:1/0,ft=2*Math.sqrt(2-2*Te),tt=Te<C5&&se&&de,it=ye.x*Oe.y-ye.y*Oe.x>0;if(tt&&Pe>N){const Pt=re.dist(se);if(Pt>2*W){const lt=re.sub(re.sub(se)._mult(W/Pt)._round());this.updateDistance(se,lt),this.addCurrentVertex(lt,ye,0,0,Q),se=lt}}const St=se&&de;let yt=St?h:A?"butt":g;if(St&&yt==="round"&&(Ye<x?yt="miter":Ye<=2&&(yt="fakeround")),yt==="miter"&&Ye>_&&(yt="bevel"),yt==="bevel"&&(Ye>2&&(yt="flipbevel"),Ye<_&&(yt="miter")),se&&this.updateDistance(se,re),yt==="miter")K._mult(Ye),this.addCurrentVertex(re,K,0,0,Q);else if(yt==="flipbevel"){if(Ye>100)K=Oe.mult(-1);else{const Pt=Ye*ye.add(Oe).mag()/ye.sub(Oe).mag();K._perp()._mult(Pt*(it?-1:1))}this.addCurrentVertex(re,K,0,0,Q),this.addCurrentVertex(re,K.mult(-1),0,0,Q)}else if(yt==="bevel"||yt==="fakeround"){const Pt=-Math.sqrt(Ye*Ye-1),lt=it?Pt:0,Wt=it?0:Pt;if(se&&this.addCurrentVertex(re,ye,lt,Wt,Q),yt==="fakeround"){const sr=Math.round(180*ft/Math.PI/20);for(let or=1;or<sr;or++){let Yt=or/sr;if(Yt!==.5){const En=Yt-.5;Yt+=Yt*En*(Yt-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*En*En+(.848013+ue*(.215638*ue-1.06021)))}const Er=Oe.sub(ye)._mult(Yt)._add(ye)._unit()._mult(it?-1:1);this.addHalfVertex(re,Er.x,Er.y,!1,it,0,Q)}}de&&this.addCurrentVertex(re,Oe,-lt,-Wt,Q)}else if(yt==="butt")this.addCurrentVertex(re,K,0,0,Q);else if(yt==="square"){const Pt=se?1:-1;this.addCurrentVertex(re,K,Pt,Pt,Q)}else yt==="round"&&(se&&(this.addCurrentVertex(re,ye,0,0,Q),this.addCurrentVertex(re,ye,1,1,Q,!0)),de&&(this.addCurrentVertex(re,Oe,-1,-1,Q,!0),this.addCurrentVertex(re,Oe,0,0,Q)));if(tt&&Pe<D-1){const Pt=re.dist(de);if(Pt>2*W){const lt=re.add(de.sub(re)._mult(W/Pt)._round());this.updateDistance(re,lt),this.addCurrentVertex(lt,Oe,0,0,Q),re=lt}}}}addCurrentVertex(o,l,h,g,_,x=!1){const S=l.y*g-l.x,T=-l.y-l.x*g;this.addHalfVertex(o,l.x+l.y*h,l.y-l.x*h,x,!1,h,_),this.addHalfVertex(o,S,T,x,!0,-g,_),this.distance>AP/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,l,h,g,_,x))}addHalfVertex({x:o,y:l},h,g,_,x,S,T){const A=.5*(this.lineClips?this.scaledDistance*(AP-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(_?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const D=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,D,this.e2),T.primitiveLength++),x?this.e2=D:this.e1=D}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,l){this.distance+=o.dist(l),this.updateScaledDistance()}}let zP,DP;Ft("LineBucket",zx,{omit:["layers","patternFeatures"]});var LP={get paint(){return DP=DP||new jo({"line-opacity":new cr(Me.paint_line["line-opacity"]),"line-color":new cr(Me.paint_line["line-color"]),"line-translate":new Zt(Me.paint_line["line-translate"]),"line-translate-anchor":new Zt(Me.paint_line["line-translate-anchor"]),"line-width":new cr(Me.paint_line["line-width"]),"line-gap-width":new cr(Me.paint_line["line-gap-width"]),"line-offset":new cr(Me.paint_line["line-offset"]),"line-blur":new cr(Me.paint_line["line-blur"]),"line-dasharray":new Op(Me.paint_line["line-dasharray"]),"line-pattern":new _d(Me.paint_line["line-pattern"]),"line-gradient":new qc(Me.paint_line["line-gradient"])})},get layout(){return zP=zP||new jo({"line-cap":new Zt(Me.layout_line["line-cap"]),"line-join":new cr(Me.layout_line["line-join"]),"line-miter-limit":new Zt(Me.layout_line["line-miter-limit"]),"line-round-limit":new Zt(Me.layout_line["line-round-limit"]),"line-sort-key":new cr(Me.layout_line["line-sort-key"])})}};class P5 extends cr{possiblyEvaluate(o,l){return l=new fn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(o,l)}evaluate(o,l,h,g){return l=qt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(o,l,h,g)}}let dy;class T5 extends po{constructor(o){super(o,LP),this.gradientVersion=0,dy||(dy=new P5(LP.paint.properties["line-width"].specification),dy.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof pl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,l){super.recalculate(o,l),this.paint._values["line-floorwidth"]=dy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new zx(o)}queryRadius(o){const l=o,h=$P(Gp("line-width",this,l),Gp("line-gap-width",this,l)),g=Gp("line-offset",this,l);return h/2+Math.abs(g)+iy(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:o,feature:l,featureState:h,geometry:g,transform:_,pixelsToTileUnits:x}){const S=ay(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,x),T=x/2*$P(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),A=this.paint.get("line-offset").evaluate(l,h);return A&&(g=function(D,N){const W=[];for(let Q=0;Q<D.length;Q++){const re=D[Q],se=[];for(let de=0;de<re.length;de++){const ye=re[de-1],Oe=re[de],Pe=re[de+1],K=de===0?new $(0,0):Oe.sub(ye)._unit()._perp(),ue=de===re.length-1?new $(0,0):Pe.sub(Oe)._unit()._perp(),Te=K._add(ue)._unit(),Ye=Te.x*ue.x+Te.y*ue.y;Ye!==0&&Te._mult(1/Ye),se.push(Te._mult(N)._add(Oe))}W.push(se)}return W}(g,A*x)),function(D,N,W){for(let Q=0;Q<N.length;Q++){const re=N[Q];if(D.length>=3){for(let se=0;se<re.length;se++)if(wd(D,re[se]))return!0}if(F3(D,re,W))return!0}return!1}(S,g,T)}isTileClipped(){return!0}}function $P(c,o){return o>0?o+2*c:c}const I5=In([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),E5=In([{name:"a_projected_pos",components:3,type:"Float32"}],4);In([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const k5=In([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);In([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const OP=In([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),M5=In([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function R5(c,o,l){return c.sections.forEach(h=>{h.text=function(g,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?g=g.toLocaleUpperCase():S==="lowercase"&&(g=g.toLocaleLowerCase()),es.applyArabicShaping&&(g=es.applyArabicShaping(g)),g}(h.text,o,l)}),c}In([{name:"triangle",components:3,type:"Uint16"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),In([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),In([{type:"Float32",name:"offsetX"}]),In([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),In([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const rf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var BP,Dx,FP,io=24,Lx={};function A5(){return BP||(BP=1,Lx.read=function(c,o,l,h,g){var _,x,S=8*g-h-1,T=(1<<S)-1,A=T>>1,D=-7,N=l?g-1:0,W=l?-1:1,Q=c[o+N];for(N+=W,_=Q&(1<<-D)-1,Q>>=-D,D+=S;D>0;_=256*_+c[o+N],N+=W,D-=8);for(x=_&(1<<-D)-1,_>>=-D,D+=h;D>0;x=256*x+c[o+N],N+=W,D-=8);if(_===0)_=1-A;else{if(_===T)return x?NaN:1/0*(Q?-1:1);x+=Math.pow(2,h),_-=A}return(Q?-1:1)*x*Math.pow(2,_-h)},Lx.write=function(c,o,l,h,g,_){var x,S,T,A=8*_-g-1,D=(1<<A)-1,N=D>>1,W=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=h?0:_-1,re=h?1:-1,se=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(S=isNaN(o)?1:0,x=D):(x=Math.floor(Math.log(o)/Math.LN2),o*(T=Math.pow(2,-x))<1&&(x--,T*=2),(o+=x+N>=1?W/T:W*Math.pow(2,1-N))*T>=2&&(x++,T/=2),x+N>=D?(S=0,x=D):x+N>=1?(S=(o*T-1)*Math.pow(2,g),x+=N):(S=o*Math.pow(2,N-1)*Math.pow(2,g),x=0));g>=8;c[l+Q]=255&S,Q+=re,S/=256,g-=8);for(x=x<<g|S,A+=g;A>0;c[l+Q]=255&x,Q+=re,x/=256,A-=8);c[l+Q-re]|=128*se}),Lx}function jP(){if(FP)return Dx;FP=1,Dx=o;var c=A5();function o(K){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(K)?K:new Uint8Array(K||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var l=4294967296,h=1/l,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function _(K){return K.type===o.Bytes?K.readVarint()+K.pos:K.pos+1}function x(K,ue,Te){return Te?4294967296*ue+(K>>>0):4294967296*(ue>>>0)+(K>>>0)}function S(K,ue,Te){var Ye=ue<=16383?1:ue<=2097151?2:ue<=268435455?3:Math.floor(Math.log(ue)/(7*Math.LN2));Te.realloc(Ye);for(var ft=Te.pos-1;ft>=K;ft--)Te.buf[ft+Ye]=Te.buf[ft]}function T(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeVarint(K[Te])}function A(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeSVarint(K[Te])}function D(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeFloat(K[Te])}function N(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeDouble(K[Te])}function W(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeBoolean(K[Te])}function Q(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeFixed32(K[Te])}function re(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeSFixed32(K[Te])}function se(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeFixed64(K[Te])}function de(K,ue){for(var Te=0;Te<K.length;Te++)ue.writeSFixed64(K[Te])}function ye(K,ue){return(K[ue]|K[ue+1]<<8|K[ue+2]<<16)+16777216*K[ue+3]}function Oe(K,ue,Te){K[Te]=ue,K[Te+1]=ue>>>8,K[Te+2]=ue>>>16,K[Te+3]=ue>>>24}function Pe(K,ue){return(K[ue]|K[ue+1]<<8|K[ue+2]<<16)+(K[ue+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(K,ue,Te){for(Te=Te||this.length;this.pos<Te;){var Ye=this.readVarint(),ft=Ye>>3,tt=this.pos;this.type=7&Ye,K(ft,ue,this),this.pos===tt&&this.skip(Ye)}return ue},readMessage:function(K,ue){return this.readFields(K,ue,this.readVarint()+this.pos)},readFixed32:function(){var K=ye(this.buf,this.pos);return this.pos+=4,K},readSFixed32:function(){var K=Pe(this.buf,this.pos);return this.pos+=4,K},readFixed64:function(){var K=ye(this.buf,this.pos)+ye(this.buf,this.pos+4)*l;return this.pos+=8,K},readSFixed64:function(){var K=ye(this.buf,this.pos)+Pe(this.buf,this.pos+4)*l;return this.pos+=8,K},readFloat:function(){var K=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,K},readDouble:function(){var K=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,K},readVarint:function(K){var ue,Te,Ye=this.buf;return ue=127&(Te=Ye[this.pos++]),Te<128?ue:(ue|=(127&(Te=Ye[this.pos++]))<<7,Te<128?ue:(ue|=(127&(Te=Ye[this.pos++]))<<14,Te<128?ue:(ue|=(127&(Te=Ye[this.pos++]))<<21,Te<128?ue:function(ft,tt,it){var St,yt,Pt=it.buf;if(St=(112&(yt=Pt[it.pos++]))>>4,yt<128||(St|=(127&(yt=Pt[it.pos++]))<<3,yt<128)||(St|=(127&(yt=Pt[it.pos++]))<<10,yt<128)||(St|=(127&(yt=Pt[it.pos++]))<<17,yt<128)||(St|=(127&(yt=Pt[it.pos++]))<<24,yt<128)||(St|=(1&(yt=Pt[it.pos++]))<<31,yt<128))return x(ft,St,tt);throw new Error("Expected varint not more than 10 bytes")}(ue|=(15&(Te=Ye[this.pos]))<<28,K,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var K=this.readVarint();return K%2==1?(K+1)/-2:K/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var K=this.readVarint()+this.pos,ue=this.pos;return this.pos=K,K-ue>=12&&g?function(Te,Ye,ft){return g.decode(Te.subarray(Ye,ft))}(this.buf,ue,K):function(Te,Ye,ft){for(var tt="",it=Ye;it<ft;){var St,yt,Pt,lt=Te[it],Wt=null,sr=lt>239?4:lt>223?3:lt>191?2:1;if(it+sr>ft)break;sr===1?lt<128&&(Wt=lt):sr===2?(192&(St=Te[it+1]))==128&&(Wt=(31&lt)<<6|63&St)<=127&&(Wt=null):sr===3?(yt=Te[it+2],(192&(St=Te[it+1]))==128&&(192&yt)==128&&((Wt=(15&lt)<<12|(63&St)<<6|63&yt)<=2047||Wt>=55296&&Wt<=57343)&&(Wt=null)):sr===4&&(yt=Te[it+2],Pt=Te[it+3],(192&(St=Te[it+1]))==128&&(192&yt)==128&&(192&Pt)==128&&((Wt=(15&lt)<<18|(63&St)<<12|(63&yt)<<6|63&Pt)<=65535||Wt>=1114112)&&(Wt=null)),Wt===null?(Wt=65533,sr=1):Wt>65535&&(Wt-=65536,tt+=String.fromCharCode(Wt>>>10&1023|55296),Wt=56320|1023&Wt),tt+=String.fromCharCode(Wt),it+=sr}return tt}(this.buf,ue,K)},readBytes:function(){var K=this.readVarint()+this.pos,ue=this.buf.subarray(this.pos,K);return this.pos=K,ue},readPackedVarint:function(K,ue){if(this.type!==o.Bytes)return K.push(this.readVarint(ue));var Te=_(this);for(K=K||[];this.pos<Te;)K.push(this.readVarint(ue));return K},readPackedSVarint:function(K){if(this.type!==o.Bytes)return K.push(this.readSVarint());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readSVarint());return K},readPackedBoolean:function(K){if(this.type!==o.Bytes)return K.push(this.readBoolean());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readBoolean());return K},readPackedFloat:function(K){if(this.type!==o.Bytes)return K.push(this.readFloat());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readFloat());return K},readPackedDouble:function(K){if(this.type!==o.Bytes)return K.push(this.readDouble());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readDouble());return K},readPackedFixed32:function(K){if(this.type!==o.Bytes)return K.push(this.readFixed32());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readFixed32());return K},readPackedSFixed32:function(K){if(this.type!==o.Bytes)return K.push(this.readSFixed32());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readSFixed32());return K},readPackedFixed64:function(K){if(this.type!==o.Bytes)return K.push(this.readFixed64());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readFixed64());return K},readPackedSFixed64:function(K){if(this.type!==o.Bytes)return K.push(this.readSFixed64());var ue=_(this);for(K=K||[];this.pos<ue;)K.push(this.readSFixed64());return K},skip:function(K){var ue=7&K;if(ue===o.Varint)for(;this.buf[this.pos++]>127;);else if(ue===o.Bytes)this.pos=this.readVarint()+this.pos;else if(ue===o.Fixed32)this.pos+=4;else{if(ue!==o.Fixed64)throw new Error("Unimplemented type: "+ue);this.pos+=8}},writeTag:function(K,ue){this.writeVarint(K<<3|ue)},realloc:function(K){for(var ue=this.length||16;ue<this.pos+K;)ue*=2;if(ue!==this.length){var Te=new Uint8Array(ue);Te.set(this.buf),this.buf=Te,this.length=ue}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(K){this.realloc(4),Oe(this.buf,K,this.pos),this.pos+=4},writeSFixed32:function(K){this.realloc(4),Oe(this.buf,K,this.pos),this.pos+=4},writeFixed64:function(K){this.realloc(8),Oe(this.buf,-1&K,this.pos),Oe(this.buf,Math.floor(K*h),this.pos+4),this.pos+=8},writeSFixed64:function(K){this.realloc(8),Oe(this.buf,-1&K,this.pos),Oe(this.buf,Math.floor(K*h),this.pos+4),this.pos+=8},writeVarint:function(K){(K=+K||0)>268435455||K<0?function(ue,Te){var Ye,ft;if(ue>=0?(Ye=ue%4294967296|0,ft=ue/4294967296|0):(ft=~(-ue/4294967296),4294967295^(Ye=~(-ue%4294967296))?Ye=Ye+1|0:(Ye=0,ft=ft+1|0)),ue>=18446744073709552e3||ue<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Te.realloc(10),function(tt,it,St){St.buf[St.pos++]=127&tt|128,tt>>>=7,St.buf[St.pos++]=127&tt|128,tt>>>=7,St.buf[St.pos++]=127&tt|128,tt>>>=7,St.buf[St.pos++]=127&tt|128,St.buf[St.pos]=127&(tt>>>=7)}(Ye,0,Te),function(tt,it){var St=(7&tt)<<4;it.buf[it.pos++]|=St|((tt>>>=3)?128:0),tt&&(it.buf[it.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(it.buf[it.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(it.buf[it.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(it.buf[it.pos++]=127&tt|((tt>>>=7)?128:0),tt&&(it.buf[it.pos++]=127&tt)))))}(ft,Te)}(K,this):(this.realloc(4),this.buf[this.pos++]=127&K|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=K>>>7&127))))},writeSVarint:function(K){this.writeVarint(K<0?2*-K-1:2*K)},writeBoolean:function(K){this.writeVarint(!!K)},writeString:function(K){K=String(K),this.realloc(4*K.length),this.pos++;var ue=this.pos;this.pos=function(Ye,ft,tt){for(var it,St,yt=0;yt<ft.length;yt++){if((it=ft.charCodeAt(yt))>55295&&it<57344){if(!St){it>56319||yt+1===ft.length?(Ye[tt++]=239,Ye[tt++]=191,Ye[tt++]=189):St=it;continue}if(it<56320){Ye[tt++]=239,Ye[tt++]=191,Ye[tt++]=189,St=it;continue}it=St-55296<<10|it-56320|65536,St=null}else St&&(Ye[tt++]=239,Ye[tt++]=191,Ye[tt++]=189,St=null);it<128?Ye[tt++]=it:(it<2048?Ye[tt++]=it>>6|192:(it<65536?Ye[tt++]=it>>12|224:(Ye[tt++]=it>>18|240,Ye[tt++]=it>>12&63|128),Ye[tt++]=it>>6&63|128),Ye[tt++]=63&it|128)}return tt}(this.buf,K,this.pos);var Te=this.pos-ue;Te>=128&&S(ue,Te,this),this.pos=ue-1,this.writeVarint(Te),this.pos+=Te},writeFloat:function(K){this.realloc(4),c.write(this.buf,K,this.pos,!0,23,4),this.pos+=4},writeDouble:function(K){this.realloc(8),c.write(this.buf,K,this.pos,!0,52,8),this.pos+=8},writeBytes:function(K){var ue=K.length;this.writeVarint(ue),this.realloc(ue);for(var Te=0;Te<ue;Te++)this.buf[this.pos++]=K[Te]},writeRawMessage:function(K,ue){this.pos++;var Te=this.pos;K(ue,this);var Ye=this.pos-Te;Ye>=128&&S(Te,Ye,this),this.pos=Te-1,this.writeVarint(Ye),this.pos+=Ye},writeMessage:function(K,ue,Te){this.writeTag(K,o.Bytes),this.writeRawMessage(ue,Te)},writePackedVarint:function(K,ue){ue.length&&this.writeMessage(K,T,ue)},writePackedSVarint:function(K,ue){ue.length&&this.writeMessage(K,A,ue)},writePackedBoolean:function(K,ue){ue.length&&this.writeMessage(K,W,ue)},writePackedFloat:function(K,ue){ue.length&&this.writeMessage(K,D,ue)},writePackedDouble:function(K,ue){ue.length&&this.writeMessage(K,N,ue)},writePackedFixed32:function(K,ue){ue.length&&this.writeMessage(K,Q,ue)},writePackedSFixed32:function(K,ue){ue.length&&this.writeMessage(K,re,ue)},writePackedFixed64:function(K,ue){ue.length&&this.writeMessage(K,se,ue)},writePackedSFixed64:function(K,ue){ue.length&&this.writeMessage(K,de,ue)},writeBytesField:function(K,ue){this.writeTag(K,o.Bytes),this.writeBytes(ue)},writeFixed32Field:function(K,ue){this.writeTag(K,o.Fixed32),this.writeFixed32(ue)},writeSFixed32Field:function(K,ue){this.writeTag(K,o.Fixed32),this.writeSFixed32(ue)},writeFixed64Field:function(K,ue){this.writeTag(K,o.Fixed64),this.writeFixed64(ue)},writeSFixed64Field:function(K,ue){this.writeTag(K,o.Fixed64),this.writeSFixed64(ue)},writeVarintField:function(K,ue){this.writeTag(K,o.Varint),this.writeVarint(ue)},writeSVarintField:function(K,ue){this.writeTag(K,o.Varint),this.writeSVarint(ue)},writeStringField:function(K,ue){this.writeTag(K,o.Bytes),this.writeString(ue)},writeFloatField:function(K,ue){this.writeTag(K,o.Fixed32),this.writeFloat(ue)},writeDoubleField:function(K,ue){this.writeTag(K,o.Fixed64),this.writeDouble(ue)},writeBooleanField:function(K,ue){this.writeVarintField(K,!!ue)}},Dx}var Ll,$x=b(jP());function z5(c,o,l){c===1&&l.readMessage(D5,o)}function D5(c,o,l){if(c===3){const{id:h,bitmap:g,width:_,height:x,left:S,top:T,advance:A}=l.readMessage(L5,{});o.push({id:h,bitmap:new Wp({width:_+6,height:x+6},g),metrics:{width:_,height:x,left:S,top:T,advance:A}})}}function L5(c,o,l){c===1?o.id=l.readVarint():c===2?o.bitmap=l.readBytes():c===3?o.width=l.readVarint():c===4?o.height=l.readVarint():c===5?o.left=l.readSVarint():c===6?o.top=l.readSVarint():c===7&&(o.advance=l.readVarint())}function NP(c){let o=0,l=0;for(const x of c)o+=x.w*x.h,l=Math.max(l,x.w);c.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let g=0,_=0;for(const x of c)for(let S=h.length-1;S>=0;S--){const T=h[S];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===T.w&&x.h===T.h){const A=h.pop();S<h.length&&(h[S]=A)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(h.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:g,h:_,fill:o/(g*_)||0}}class Ox{constructor(o,{pixelRatio:l,version:h,stretchX:g,stretchY:_,content:x,textFitWidth:S,textFitHeight:T}){this.paddedRect=o,this.pixelRatio=l,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=S,this.textFitHeight=T}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class VP{constructor(o,l){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(o,h,_),this.addImages(l,g,_);const{w:x,h:S}=NP(_),T=new ui({width:x||1,height:S||1});for(const A in o){const D=o[A],N=h[A].paddedRect;ui.copy(D.data,T,{x:0,y:0},{x:N.x+1,y:N.y+1},D.data)}for(const A in l){const D=l[A],N=g[A].paddedRect,W=N.x+1,Q=N.y+1,re=D.data.width,se=D.data.height;ui.copy(D.data,T,{x:0,y:0},{x:W,y:Q},D.data),ui.copy(D.data,T,{x:0,y:se-1},{x:W,y:Q-1},{width:re,height:1}),ui.copy(D.data,T,{x:0,y:0},{x:W,y:Q+se},{width:re,height:1}),ui.copy(D.data,T,{x:re-1,y:0},{x:W-1,y:Q},{width:1,height:se}),ui.copy(D.data,T,{x:0,y:0},{x:W+re,y:Q},{width:1,height:se})}this.image=T,this.iconPositions=h,this.patternPositions=g}addImages(o,l,h){for(const g in o){const _=o[g],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};h.push(x),l[g]=new Ox(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,l){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in o.updatedImages)this.patchUpdatedImage(this.iconPositions[h],o.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],o.getImage(h),l)}patchUpdatedImage(o,l,h){if(!o||!l||o.version===l.version)return;o.version=l.version;const[g,_]=o.tl;h.update(l.data,void 0,{x:g,y:_})}}Ft("ImagePosition",Ox),Ft("ImageAtlas",VP),f.an=void 0,(Ll=f.an||(f.an={}))[Ll.none=0]="none",Ll[Ll.horizontal=1]="horizontal",Ll[Ll.vertical=2]="vertical",Ll[Ll.horizontalOnly=3]="horizontalOnly";class nf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(o,l,h){const g=new nf;return g.scale=o||1,g.fontStack=l,g.verticalAlign=h||"bottom",g}static forImage(o,l){const h=new nf;return h.imageName=o,h.verticalAlign=l||"bottom",h}}class Td{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l){const h=new Td;for(let g=0;g<o.sections.length;g++){const _=o.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,l)}return h}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let l="";for(let h=0;h<o.length;h++){const g=o.charCodeAt(h+1)||null,_=o.charCodeAt(h-1)||null;l+=g&&Dp(g)&&!rf[o[h+1]]||_&&Dp(_)&&!rf[o[h-1]]||!rf[o[h]]?o[h]:rf[o[h]]}return l}(this.text)}trim(){let o=0;for(let h=0;h<this.text.length&&py[this.text.charCodeAt(h)];h++)o++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=o&&py[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const h=new Td;return h.text=this.text.substring(o,l),h.sectionIndex=this.sectionIndex.slice(o,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}getMaxImageSize(o){let l=0,h=0;for(let g=0;g<this.length();g++){const _=this.getSection(g);if(_.imageName){const x=o[_.imageName];if(!x)continue;const S=x.displaySize;l=Math.max(l,S[0]),h=Math.max(h,S[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(o,l){this.text+=o.text,this.sections.push(nf.forText(o.scale,o.fontStack||l,o.verticalAlign));const h=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(h)}addImageSection(o){const l=o.image?o.image.name:"";if(l.length===0)return void Qt("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(nf.forImage(l,o.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Qt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hy(c,o,l,h,g,_,x,S,T,A,D,N,W,Q,re){const se=Td.fromFeature(c,g);let de;N===f.an.vertical&&se.verticalizePunctuation();const{processBidirectionalText:ye,processStyledBidirectionalText:Oe}=es;if(ye&&se.sections.length===1){de=[];const ue=ye(se.toString(),Bx(se,A,_,o,h,Q));for(const Te of ue){const Ye=new Td;Ye.text=Te,Ye.sections=se.sections;for(let ft=0;ft<Te.length;ft++)Ye.sectionIndex.push(0);de.push(Ye)}}else if(Oe){de=[];const ue=Oe(se.text,se.sectionIndex,Bx(se,A,_,o,h,Q));for(const Te of ue){const Ye=new Td;Ye.text=Te[0],Ye.sectionIndex=Te[1],Ye.sections=se.sections,de.push(Ye)}}else de=function(ue,Te){const Ye=[],ft=ue.text;let tt=0;for(const it of Te)Ye.push(ue.substring(tt,it)),tt=it;return tt<ft.length&&Ye.push(ue.substring(tt,ft.length)),Ye}(se,Bx(se,A,_,o,h,Q));const Pe=[],K={positionedLines:Pe,text:se.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(ue,Te,Ye,ft,tt,it,St,yt,Pt,lt,Wt,sr){let or=0,Yt=0,Er=0,En=0;const Xn=yt==="right"?1:yt==="left"?0:.5,Eo=io/sr;let ji=0;for(const wn of tt){wn.trim();const ao=wn.getMaxScale(),vo={positionedGlyphs:[],lineOffset:0};ue.positionedLines[ji]=vo;const _o=vo.positionedGlyphs;let ei=0;if(!wn.length()){Yt+=it,++ji;continue}const Ni=F5(ft,wn,Eo);for(let hi=0;hi<wn.length();hi++){const Yn=wn.getSection(hi),lo=wn.getSectionIndex(hi),co=wn.getCharCode(hi),Nn=j5(Pt,Wt,co);let hn;if(Yn.imageName){if(ue.iconsInText=!0,Yn.scale=Yn.scale*Eo,hn=V5(Yn,Nn,ao,Ni,ft),!hn)continue;ei=Math.max(ei,hn.imageOffset)}else if(hn=N5(Yn,co,Nn,Ni,Te,Ye),!hn)continue;const{rect:Da,metrics:Md,baselineOffset:La}=hn;_o.push({glyph:co,imageName:Yn.imageName,x:or,y:Yt+La+-17,vertical:Nn,scale:Yn.scale,fontStack:Yn.fontStack,sectionIndex:lo,metrics:Md,rect:Da}),Nn?(ue.verticalizable=!0,or+=(Yn.imageName?Md.advance:io)*Yn.scale+lt):or+=Md.advance*Yn.scale+lt}_o.length!==0&&(Er=Math.max(or-lt,Er),U5(_o,0,_o.length-1,Xn)),or=0,vo.lineOffset=Math.max(ei,(ao-1)*io);const so=it*ao+ei;Yt+=so,En=Math.max(so,En),++ji}const{horizontalAlign:di,verticalAlign:yo}=Fx(St);(function(wn,ao,vo,_o,ei,Ni,so,hi,Yn){const lo=(ao-vo)*ei;let co=0;co=Ni!==so?-hi*_o- -17:-_o*Yn*so+.5*so;for(const Nn of wn)for(const hn of Nn.positionedGlyphs)hn.x+=lo,hn.y+=co})(ue.positionedLines,Xn,di,yo,Er,En,it,Yt,tt.length),ue.top+=-yo*Yt,ue.bottom=ue.top+Yt,ue.left+=-di*Er,ue.right=ue.left+Er}(K,o,l,h,de,x,S,T,N,A,W,re),!function(ue){for(const Te of ue)if(Te.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&K}const py={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$5={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},O5={40:!0};function UP(c,o,l,h,g,_){if(o.imageName){const x=h[o.imageName];return x?x.displaySize[0]*o.scale*io/_+g:0}{const x=l[o.fontStack],S=x&&x[c];return S?S.metrics.advance*o.scale+g:0}}function HP(c,o,l,h){const g=Math.pow(c-o,2);return h?c<o?g/2:2*g:g+Math.abs(l)*l}function B5(c,o,l){let h=0;return c===10&&(h-=1e4),l&&(h+=150),c!==40&&c!==65288||(h+=50),o!==41&&o!==65289||(h+=50),h}function GP(c,o,l,h,g,_){let x=null,S=HP(o,l,g,_);for(const T of h){const A=HP(o-T.x,l,g,_)+T.badness;A<=S&&(x=T,S=A)}return{index:c,x:o,priorBreak:x,badness:S}}function WP(c){return c?WP(c.priorBreak).concat(c.index):[]}function Bx(c,o,l,h,g,_){if(!c)return[];const x=[],S=function(N,W,Q,re,se,de){let ye=0;for(let Oe=0;Oe<N.length();Oe++){const Pe=N.getSection(Oe);ye+=UP(N.getCharCode(Oe),Pe,re,se,W,de)}return ye/Math.max(1,Math.ceil(ye/Q))}(c,o,l,h,g,_),T=c.text.indexOf("​")>=0;let A=0;for(let N=0;N<c.length();N++){const W=c.getSection(N),Q=c.getCharCode(N);if(py[Q]||(A+=UP(Q,W,h,g,o,_)),N<c.length()-1){const re=!((D=Q)<11904)&&(!!Tr["CJK Compatibility Forms"](D)||!!Tr["CJK Compatibility"](D)||!!Tr["CJK Strokes"](D)||!!Tr["CJK Symbols and Punctuation"](D)||!!Tr["Enclosed CJK Letters and Months"](D)||!!Tr["Halfwidth and Fullwidth Forms"](D)||!!Tr["Ideographic Description Characters"](D)||!!Tr["Vertical Forms"](D)||zp.test(String.fromCodePoint(D)));($5[Q]||re||W.imageName||N!==c.length()-2&&O5[c.getCharCode(N+1)])&&x.push(GP(N+1,A,S,x,B5(Q,c.getCharCode(N+1),re&&T),!1))}}var D;return WP(GP(c.length(),A,S,x,0,!0))}function Fx(c){let o=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function F5(c,o,l){const h=o.getMaxScale()*io,{maxImageWidth:g,maxImageHeight:_}=o.getMaxImageSize(c),x=Math.max(h,_*l);return{verticalLineContentWidth:Math.max(h,g*l),horizontalLineContentHeight:x}}function ZP(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function j5(c,o,l){return!(c===f.an.horizontal||!o&&!gd(l)||o&&(py[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function N5(c,o,l,h,g,_){const x=_[c.fontStack],S=function(A,D,N,W){if(A&&A.rect)return A;const Q=D[N.fontStack],re=Q&&Q[W];return re?{rect:null,metrics:re.metrics}:null}(x&&x[o],g,c,o);if(S===null)return null;let T;if(l)T=h.verticalLineContentWidth-c.scale*io;else{const A=ZP(c.verticalAlign);T=(h.horizontalLineContentHeight-c.scale*io)*A}return{rect:S.rect,metrics:S.metrics,baselineOffset:T}}function V5(c,o,l,h,g){const _=g[c.imageName];if(!_)return null;const x=_.paddedRect,S=_.displaySize,T={width:S[0],height:S[1],left:1,top:-3,advance:o?S[1]:S[0]};let A;if(o)A=h.verticalLineContentWidth-S[1]*c.scale;else{const D=ZP(c.verticalAlign);A=(h.horizontalLineContentHeight-S[1]*c.scale)*D}return{rect:x,metrics:T,baselineOffset:A,imageOffset:(o?S[0]:S[1])*c.scale-io*l}}function U5(c,o,l,h){if(h===0)return;const g=c[l],_=(c[l].x+g.metrics.advance*g.scale)*h;for(let x=o;x<=l;x++)c[x].x-=_}function H5(c,o,l){const{horizontalAlign:h,verticalAlign:g}=Fx(l),_=o[0]-c.displaySize[0]*h,x=o[1]-c.displaySize[1]*g;return{image:c,top:x,bottom:x+c.displaySize[1],left:_,right:_+c.displaySize[0]}}function qP(c){var o,l;let h=c.left,g=c.top,_=c.right-h,x=c.bottom-g;const S=(o=c.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",T=(l=c.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",A=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(T==="proportional"){if(S==="stretchOnly"&&_/x<A||S==="proportional"){const D=Math.ceil(x*A);h*=D/_,_=D}}else if(S==="proportional"&&T==="stretchOnly"&&A!==0&&_/x>A){const D=Math.ceil(_/A);g*=D/x,x=D}return{x1:h,y1:g,x2:h+_,y2:g+x}}function KP(c,o,l,h,g,_){const x=c.image;let S;if(x.content){const de=x.content,ye=x.pixelRatio||1;S=[de[0]/ye,de[1]/ye,x.displaySize[0]-de[2]/ye,x.displaySize[1]-de[3]/ye]}const T=o.left*_,A=o.right*_;let D,N,W,Q;l==="width"||l==="both"?(Q=g[0]+T-h[3],N=g[0]+A+h[1]):(Q=g[0]+(T+A-x.displaySize[0])/2,N=Q+x.displaySize[0]);const re=o.top*_,se=o.bottom*_;return l==="height"||l==="both"?(D=g[1]+re-h[0],W=g[1]+se+h[2]):(D=g[1]+(re+se-x.displaySize[1])/2,W=D+x.displaySize[1]),{image:x,top:D,right:N,bottom:W,left:Q,collisionPadding:S}}const Os=128,$l=32640;function XP(c,o){const{expression:l}=o;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new fn(c+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=l;let _=0;for(;_<h.length&&h[_]<=c;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<c+1;)x++;x=Math.min(h.length-1,x);const S=h[_],T=h[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:T,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:T,minSize:l.evaluate(new fn(S)),maxSize:l.evaluate(new fn(T)),interpolationType:g}}}function jx(c,o,l){let h="never";const g=c.get(o);return g?h=g:c.get(l)&&(h="always"),h}const G5=Qp.VectorTileFeature.types,W5=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fy(c,o,l,h,g,_,x,S,T,A,D,N,W){const Q=S?Math.min($l,Math.round(S[0])):0,re=S?Math.min($l,Math.round(S[1])):0;c.emplaceBack(o,l,Math.round(32*h),Math.round(32*g),_,x,(Q<<1)+(T?1:0),re,16*A,16*D,256*N,256*W)}function Nx(c,o,l){c.emplaceBack(o.x,o.y,l),c.emplaceBack(o.x,o.y,l),c.emplaceBack(o.x,o.y,l),c.emplaceBack(o.x,o.y,l)}function Z5(c){for(const o of c.sections)if(Lp(o.text))return!0;return!1}class Vx{constructor(o){this.layoutVertexArray=new _r,this.indexArray=new on,this.programConfigurations=o,this.segments=new Dr,this.dynamicLayoutVertexArray=new Gr,this.opacityVertexArray=new xn,this.hasVisibleVertices=!1,this.placedSymbolArray=new me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,l,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,I5.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,E5.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,W5,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ft("SymbolBuffers",Vx);class Ux{constructor(o,l,h){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new h,this.segments=new Dr,this.collisionVertexArray=new bn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,k5.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ft("CollisionBuffers",Ux);class Id{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(x=>x.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=XP(this.zoom,l["text-size"]),this.iconSizeData=XP(this.zoom,l["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=jx(h,"text-overlap","text-allow-overlap")!=="never"||jx(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>f.an[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=o.sourceID}createArrays(){this.text=new Vx(new ss(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Vx(new ss(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new be,this.lineVertexArray=new ke,this.symbolInstances=new Ce,this.textAnchorOffsets=new Se}calculateGlyphDependencies(o,l,h,g,_){for(let x=0;x<o.length;x++)if(l[o.charCodeAt(x)]=!0,(h||g)&&_){const S=rf[o.charAt(x)];S&&(l[S.charCodeAt(0)]=!0)}}populate(o,l,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),S=_.get("text-field"),T=_.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof Po&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),D=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,N=_.get("symbol-sort-key");if(this.features=[],!A&&!D)return;const W=l.iconDependencies,Q=l.glyphDependencies,re=l.availableImages,se=new fn(this.zoom,{globalState:this.globalState});for(const{feature:de,id:ye,index:Oe,sourceLayerIndex:Pe}of o){const K=g._featureFilter.needGeometry,ue=tu(de,K);if(!g._featureFilter.filter(se,ue,h))continue;let Te,Ye;if(K||(ue.geometry=eu(de)),A){const tt=g.getValueAndResolveTokens("text-field",ue,h,re),it=Po.factory(tt),St=this.hasRTLText=this.hasRTLText||Z5(it);(!St||es.getRTLTextPluginStatus()==="unavailable"||St&&es.isParsed())&&(Te=R5(it,g,ue))}if(D){const tt=g.getValueAndResolveTokens("icon-image",ue,h,re);Ye=tt instanceof Ko?tt:Ko.fromString(tt)}if(!Te&&!Ye)continue;const ft=this.sortFeaturesByKey?N.evaluate(ue,{},h):void 0;if(this.features.push({id:ye,text:Te,icon:Ye,index:Oe,sourceLayerIndex:Pe,geometry:ue.geometry,properties:de.properties,type:G5[de.type],sortKey:ft}),Ye&&(W[Ye.name]=!0),Te){const tt=x.evaluate(ue,{},h).join(","),it=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.an.vertical)>=0;for(const St of Te.sections)if(St.image)W[St.image.name]=!0;else{const yt=Ap(Te.toString()),Pt=St.fontStack||tt,lt=Q[Pt]=Q[Pt]||{};this.calculateGlyphDependencies(St.text,lt,it,this.allowVerticalPlacement,yt)}}}_.get("symbol-placement")==="line"&&(this.features=function(de){const ye={},Oe={},Pe=[];let K=0;function ue(tt){Pe.push(de[tt]),K++}function Te(tt,it,St){const yt=Oe[tt];return delete Oe[tt],Oe[it]=yt,Pe[yt].geometry[0].pop(),Pe[yt].geometry[0]=Pe[yt].geometry[0].concat(St[0]),yt}function Ye(tt,it,St){const yt=ye[it];return delete ye[it],ye[tt]=yt,Pe[yt].geometry[0].shift(),Pe[yt].geometry[0]=St[0].concat(Pe[yt].geometry[0]),yt}function ft(tt,it,St){const yt=St?it[0][it[0].length-1]:it[0][0];return`${tt}:${yt.x}:${yt.y}`}for(let tt=0;tt<de.length;tt++){const it=de[tt],St=it.geometry,yt=it.text?it.text.toString():null;if(!yt){ue(tt);continue}const Pt=ft(yt,St),lt=ft(yt,St,!0);if(Pt in Oe&&lt in ye&&Oe[Pt]!==ye[lt]){const Wt=Ye(Pt,lt,St),sr=Te(Pt,lt,Pe[Wt].geometry);delete ye[Pt],delete Oe[lt],Oe[ft(yt,Pe[sr].geometry,!0)]=sr,Pe[Wt].geometry=null}else Pt in Oe?Te(Pt,lt,St):lt in ye?Ye(Pt,lt,St):(ue(tt),ye[Pt]=K-1,Oe[lt]=K-1)}return Pe.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,ye)=>de.sortKey-ye.sortKey)}update(o,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(o,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const h=this.lineVertexArray.length;if(o.segment!==void 0){let g=o.dist(l[o.segment+1]),_=o.dist(l[o.segment]);const x={};for(let S=o.segment+1;S<l.length;S++)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:g},S<l.length-1&&(g+=l[S+1].dist(l[S]));for(let S=o.segment||0;S>=0;S--)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const T=x[S];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(o,l,h,g,_,x,S,T,A,D,N,W){const Q=o.indexArray,re=o.layoutVertexArray,se=o.segments.prepareSegment(4*l.length,re,Q,this.canOverlap?x.sortKey:void 0),de=this.glyphOffsetArray.length,ye=se.vertexLength,Oe=this.allowVerticalPlacement&&S===f.an.vertical?Math.PI/2:0,Pe=x.text&&x.text.sections;for(let K=0;K<l.length;K++){const{tl:ue,tr:Te,bl:Ye,br:ft,tex:tt,pixelOffsetTL:it,pixelOffsetBR:St,minFontScaleX:yt,minFontScaleY:Pt,glyphOffset:lt,isSDF:Wt,sectionIndex:sr}=l[K],or=se.vertexLength,Yt=lt[1];fy(re,T.x,T.y,ue.x,Yt+ue.y,tt.x,tt.y,h,Wt,it.x,it.y,yt,Pt),fy(re,T.x,T.y,Te.x,Yt+Te.y,tt.x+tt.w,tt.y,h,Wt,St.x,it.y,yt,Pt),fy(re,T.x,T.y,Ye.x,Yt+Ye.y,tt.x,tt.y+tt.h,h,Wt,it.x,St.y,yt,Pt),fy(re,T.x,T.y,ft.x,Yt+ft.y,tt.x+tt.w,tt.y+tt.h,h,Wt,St.x,St.y,yt,Pt),Nx(o.dynamicLayoutVertexArray,T,Oe),Q.emplaceBack(or,or+2,or+1),Q.emplaceBack(or+1,or+2,or+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),K!==l.length-1&&sr===l[K+1].sectionIndex||o.programConfigurations.populatePaintArrays(re.length,x,x.index,{},W,Pe&&Pe[sr])}o.placedSymbolArray.emplaceBack(T.x,T.y,de,this.glyphOffsetArray.length-de,ye,A,D,T.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],S,0,!1,0,N)}_addCollisionDebugVertex(o,l,h,g,_,x){return l.emplaceBack(0,0),o.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(o,l,h,g,_,x,S){const T=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),A=T.vertexLength,D=_.layoutVertexArray,N=_.collisionVertexArray,W=S.anchorX,Q=S.anchorY;this._addCollisionDebugVertex(D,N,x,W,Q,new $(o,l)),this._addCollisionDebugVertex(D,N,x,W,Q,new $(h,l)),this._addCollisionDebugVertex(D,N,x,W,Q,new $(h,g)),this._addCollisionDebugVertex(D,N,x,W,Q,new $(o,g)),T.vertexLength+=4;const re=_.indexArray;re.emplaceBack(A,A+1),re.emplaceBack(A+1,A+2),re.emplaceBack(A+2,A+3),re.emplaceBack(A+3,A),T.primitiveLength+=4}addDebugCollisionBoxes(o,l,h,g){for(let _=o;_<l;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ux(Yr,OP.members,Jr),this.iconCollisionBox=new Ux(Yr,OP.members,Jr);for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(o,l,h,g,_,x,S,T,A){const D={};for(let N=l;N<h;N++){const W=o.get(N);D.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.textFeatureIndex=W.featureIndex;break}for(let N=g;N<_;N++){const W=o.get(N);D.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.verticalTextFeatureIndex=W.featureIndex;break}for(let N=x;N<S;N++){const W=o.get(N);D.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.iconFeatureIndex=W.featureIndex;break}for(let N=T;N<A;N++){const W=o.get(N);D.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},D.verticalIconFeatureIndex=W.featureIndex;break}return D}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,l){const h=o.placedSymbolArray.get(l),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)o.indexArray.emplaceBack(_,_+2,_+1),o.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(o),h=Math.cos(o),g=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const T=this.symbolInstances.get(S);g.push(0|Math.round(l*T.anchorX+h*T.anchorY)),_.push(T.featureIndex)}return x.sort((S,T)=>g[S]-g[T]||_[T]-_[S]),x}addToSortKeyRanges(o,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let YP,JP;Ft("SymbolBucket",Id,{omit:["layers","collisionBoxArray","features","compareText"]}),Id.MAX_GLYPHS=65535,Id.addDynamicAttributes=Nx;var Hx={get paint(){return JP=JP||new jo({"icon-opacity":new cr(Me.paint_symbol["icon-opacity"]),"icon-color":new cr(Me.paint_symbol["icon-color"]),"icon-halo-color":new cr(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new cr(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new cr(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new cr(Me.paint_symbol["text-opacity"]),"text-color":new cr(Me.paint_symbol["text-color"],{runtimeType:$t,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new cr(Me.paint_symbol["text-halo-color"]),"text-halo-width":new cr(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new cr(Me.paint_symbol["text-halo-blur"]),"text-translate":new Zt(Me.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(Me.paint_symbol["text-translate-anchor"])})},get layout(){return YP=YP||new jo({"symbol-placement":new Zt(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new cr(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new cr(Me.layout_symbol["icon-size"]),"icon-text-fit":new Zt(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new cr(Me.layout_symbol["icon-image"]),"icon-rotate":new cr(Me.layout_symbol["icon-rotate"]),"icon-padding":new cr(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new cr(Me.layout_symbol["icon-offset"]),"icon-anchor":new cr(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(Me.layout_symbol["text-rotation-alignment"]),"text-field":new cr(Me.layout_symbol["text-field"]),"text-font":new cr(Me.layout_symbol["text-font"]),"text-size":new cr(Me.layout_symbol["text-size"]),"text-max-width":new cr(Me.layout_symbol["text-max-width"]),"text-line-height":new Zt(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new cr(Me.layout_symbol["text-letter-spacing"]),"text-justify":new cr(Me.layout_symbol["text-justify"]),"text-radial-offset":new cr(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new cr(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new cr(Me.layout_symbol["text-anchor"]),"text-max-angle":new Zt(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(Me.layout_symbol["text-writing-mode"]),"text-rotate":new cr(Me.layout_symbol["text-rotate"]),"text-padding":new Zt(Me.layout_symbol["text-padding"]),"text-keep-upright":new Zt(Me.layout_symbol["text-keep-upright"]),"text-transform":new cr(Me.layout_symbol["text-transform"]),"text-offset":new cr(Me.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(Me.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(Me.layout_symbol["text-optional"])})}};class QP{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:rt,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ft("FormatSectionOverride",QP,{omit:["defaultValue"]});class my extends po{constructor(o){super(o,Hx)}recalculate(o,l){if(super.recalculate(o,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,l,h,g){const _=this.layout.get(o).evaluate(l,{},h,g),x=this._unevaluatedLayout._values[o];return x.isDataDriven()||od(x.value)||!_?_:function(S,T){return T.replace(/{([^{}]+)}/g,(A,D)=>S&&D in S?String(S[D]):"")}(l.properties,_)}createBucket(o){return new Id(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Hx.paint.overridableProperties){if(!my.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),h=new QP(l),g=new nd(h,l.property.specification);let _=null;_=l.value.kind==="constant"||l.value.kind==="source"?new Oc("source",g):new ad("composite",g,l.value.zoomStops),this.paint._values[o]=new ua(l.property,_,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&my.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const h=o.get("text-field"),g=Hx.paint.properties[l];let _=!1;const x=S=>{for(const T of S)if(g.overrides&&g.overrides.hasOverride(T))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Po)x(h.value.value.sections);else if(h.value.kind==="source"){const S=A=>{_||(A instanceof Oo&&hr(A.value)===Lo?x(A.value.sections):A instanceof Mc?x(A.sections):A.eachChild(S))},T=h.value;T._styleExpression&&S(T._styleExpression.expression)}return _}}let eT;var q5={get paint(){return eT=eT||new jo({"background-color":new Zt(Me.paint_background["background-color"]),"background-pattern":new Op(Me.paint_background["background-pattern"]),"background-opacity":new Zt(Me.paint_background["background-opacity"])})}};class K5 extends po{constructor(o){super(o,q5)}}let tT;var X5={get paint(){return tT=tT||new jo({"raster-opacity":new Zt(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(Me.paint_raster["raster-saturation"]),"raster-contrast":new Zt(Me.paint_raster["raster-contrast"]),"raster-resampling":new Zt(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(Me.paint_raster["raster-fade-duration"])})}};class Y5 extends po{constructor(o){super(o,X5)}}class J5 extends po{constructor(o){super(o,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Q5{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const eO={once:!0},Gx=63710088e-1;class Ol{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ol(Mt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,h=this.lat*l,g=o.lat*l,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((o.lng-this.lng)*l);return Gx*Math.acos(Math.min(_,1))}static convert(o){if(o instanceof Ol)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Ol(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Ol(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const rT=2*Math.PI*Gx;function nT(c){return rT*Math.cos(c*Math.PI/180)}function oT(c){return(180+c)/360}function iT(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function aT(c,o){return c/nT(o)}function Wx(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function sT(c,o){return c*nT(Wx(o))}class of{constructor(o,l,h=0){this.x=+o,this.y=+l,this.z=+h}static fromLngLat(o,l=0){const h=Ol.convert(o);return new of(oT(h.lng),iT(h.lat),aT(l,h.lat))}toLngLat(){return new Ol(360*this.x-180,Wx(this.y))}toAltitude(){return sT(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/rT*(o=Wx(this.y),1/Math.cos(o*Math.PI/180));var o}}function lT(c,o,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[c*h-2*Math.PI*6378137/2,o*h-2*Math.PI*6378137/2]}class Zx{constructor(o,l,h){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(o,l,h))throw new Error(`x=${l}, y=${h}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=l,this.y=h,this.key=Ed(0,o,o,l,h)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l,h){const g=(x=this.y,S=this.z,T=lT(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),A=lT(256*(_+1),256*(x+1),S),T[0]+","+T[1]+","+A[0]+","+A[1]);var _,x,S,T,A;const D=function(N,W,Q){let re,se="";for(let de=N;de>0;de--)re=1<<de-1,se+=(W&re?1:0)+(Q&re?2:0);return se}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,D).replace(/{bbox-epsg-3857}/g,g)}isChildOf(o){const l=this.z-o.z;return l>0&&o.x===this.x>>l&&o.y===this.y>>l}getTilePoint(o){const l=Math.pow(2,this.z);return new $((o.x*l-this.x)*ct,(o.y*l-this.y)*ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class cT{constructor(o,l){this.wrap=o,this.canonical=l,this.key=Ed(o,l.z,l.z,l.x,l.y)}}class Fi{constructor(o,l,h,g,_){if(this.terrainRttPosMatrix32f=null,o<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${h}`);this.overscaledZ=o,this.wrap=l,this.canonical=new Zx(h,+g,+_),this.key=Ed(l,o,h,g,_)}clone(){return new Fi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-o;return o>this.canonical.z?new Fi(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fi(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-o;return o>this.canonical.z?Ed(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y):Ed(this.wrap*+l,o,o,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new Fi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Fi(l,this.wrap,l,h,g),new Fi(l,this.wrap,l,h+1,g),new Fi(l,this.wrap,l,h,g+1),new Fi(l,this.wrap,l,h+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Fi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Fi(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new of(o.x-this.wrap,o.y))}}function Ed(c,o,l,h,g){(c*=2)<0&&(c=-1*c-1);const _=1<<l;return(_*_*c+_*g+h).toString(36)+l.toString(36)+o.toString(36)}Ft("CanonicalTileID",Zx),Ft("OverscaledTileID",Fi,{omit:["terrainRttPosMatrix32f"]});class ou{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(o){return this.minX=Math.min(this.minX,o.x),this.minY=Math.min(this.minY,o.y),this.maxX=Math.max(this.maxX,o.x),this.maxY=Math.max(this.maxY,o.y),this}expandBy(o){return this.minX-=o,this.minY-=o,this.maxX+=o,this.maxY+=o,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(o){return this.expandBy(-o)}map(o){const l=new ou;return l.extend(o(new $(this.minX,this.minY))),l.extend(o(new $(this.maxX,this.minY))),l.extend(o(new $(this.minX,this.maxY))),l.extend(o(new $(this.maxX,this.maxY))),l}static fromPoints(o){const l=new ou;for(const h of o)l.extend(h);return l}contains(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(o){return!this.empty()&&!o.empty()&&o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY}intersects(o){return!this.empty()&&!o.empty()&&o.minX<=this.maxX&&o.maxX>=this.minX&&o.minY<=this.maxY&&o.maxY>=this.minY}}class uT{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const h=o[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class dT{constructor(o,l,h,g,_){this.type="Feature",this._vectorTileFeature=o,o._z=l,o._x=h,o._y=g,this.properties=o.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(o[l]=this[l]);return o}}class hT{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Rl(ct,16,0),this.grid3D=new Rl(ct,16,0),this.featureIndexArray=new Qe,this.promoteId=l}insert(o,l,h,g,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const T=x?this.grid3D:this.grid;for(let A=0;A<l.length;A++){const D=l[A],N=[1/0,1/0,-1/0,-1/0];for(let W=0;W<D.length;W++){const Q=D[W];N[0]=Math.min(N[0],Q.x),N[1]=Math.min(N[1],Q.y),N[2]=Math.max(N[2],Q.x),N[3]=Math.max(N[3],Q.y)}N[0]<ct&&N[1]<ct&&N[2]>=0&&N[3]>=0&&T.insert(S,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Qp.VectorTile(new $x(this.rawTileData)).layers,this.sourceLayerCoder=new uT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,l,h,g){this.loadVTLayers();const _=o.params,x=ct/o.tileSize/o.scale,S=Ja(_.filter),T=o.queryGeometry,A=o.queryPadding*x,D=ou.fromPoints(T),N=this.grid.query(D.minX-A,D.minY-A,D.maxX+A,D.maxY+A),W=ou.fromPoints(o.cameraQueryGeometry).expandBy(A),Q=this.grid3D.query(W.minX,W.minY,W.maxX,W.maxY,(de,ye,Oe,Pe)=>function(K,ue,Te,Ye,ft){for(const it of K)if(ue<=it.x&&Te<=it.y&&Ye>=it.x&&ft>=it.y)return!0;const tt=[new $(ue,Te),new $(ue,ft),new $(Ye,ft),new $(Ye,Te)];if(K.length>2){for(const it of tt)if(wd(K,it))return!0}for(let it=0;it<K.length-1;it++)if(N3(K[it],K[it+1],tt))return!0;return!1}(o.cameraQueryGeometry,de-A,ye-A,Oe+A,Pe+A));for(const de of Q)N.push(de);N.sort(tO);const re={};let se;for(let de=0;de<N.length;de++){const ye=N[de];if(ye===se)continue;se=ye;const Oe=this.featureIndexArray.get(ye);let Pe=null;this.loadMatchingFeature(re,Oe.bucketIndex,Oe.sourceLayerIndex,Oe.featureIndex,S,_.layers,_.availableImages,l,h,g,(K,ue,Te)=>(Pe||(Pe=eu(K)),ue.queryIntersectsFeature({queryGeometry:T,feature:K,featureState:Te,geometry:Pe,zoom:this.z,transform:o.transform,pixelsToTileUnits:x,pixelPosMatrix:o.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:o.getElevation})))}return re}loadMatchingFeature(o,l,h,g,_,x,S,T,A,D,N){const W=this.bucketLayerIDs[l];if(x&&!W.some(de=>x.has(de)))return;const Q=this.sourceLayerCoder.decode(h),re=this.vtLayers[Q].feature(g);if(_.needGeometry){const de=tu(re,!0);if(!_.filter(new fn(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!_.filter(new fn(this.tileID.overscaledZ),re))return;const se=this.getId(re,Q);for(let de=0;de<W.length;de++){const ye=W[de];if(x&&!x.has(ye))continue;const Oe=T[ye];if(!Oe)continue;let Pe={};se&&D&&(Pe=D.getState(Oe.sourceLayer||"_geojsonTileLayer",se));const K=qt({},A[ye]);K.paint=pT(K.paint,Oe.paint,re,Pe,S),K.layout=pT(K.layout,Oe.layout,re,Pe,S);const ue=!N||N(re,Oe,Pe);if(!ue)continue;const Te=new dT(re,this.z,this.x,this.y,se);Te.layer=K;let Ye=o[ye];Ye===void 0&&(Ye=o[ye]=[]),Ye.push({featureIndex:g,feature:Te,intersectionZ:ue})}}lookupSymbolFeatures(o,l,h,g,_,x,S,T){const A={};this.loadVTLayers();const D=Ja(_);for(const N of o)this.loadMatchingFeature(A,h,g,N,D,x,S,T,l);return A}hasLayer(o){for(const l of this.bucketLayerIDs)for(const h of l)if(o===h)return!0;return!1}getId(o,l){var h;let g=o.id;return this.promoteId&&(g=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((h=o.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(g=Number(o.properties.cluster_id))),g}}function pT(c,o,l,h,g){return ur(c,(_,x)=>{const S=o instanceof vd?o.get(x):null;return S&&S.evaluate?S.evaluate(l,h,g):S})}function tO(c,o){return o-c}function fT(c,o,l,h,g){const _=[];for(let x=0;x<c.length;x++){const S=c[x];let T;for(let A=0;A<S.length-1;A++){let D=S[A],N=S[A+1];D.x<o&&N.x<o||(D.x<o?D=new $(o,D.y+(o-D.x)/(N.x-D.x)*(N.y-D.y))._round():N.x<o&&(N=new $(o,D.y+(o-D.x)/(N.x-D.x)*(N.y-D.y))._round()),D.y<l&&N.y<l||(D.y<l?D=new $(D.x+(l-D.y)/(N.y-D.y)*(N.x-D.x),l)._round():N.y<l&&(N=new $(D.x+(l-D.y)/(N.y-D.y)*(N.x-D.x),l)._round()),D.x>=h&&N.x>=h||(D.x>=h?D=new $(h,D.y+(h-D.x)/(N.x-D.x)*(N.y-D.y))._round():N.x>=h&&(N=new $(h,D.y+(h-D.x)/(N.x-D.x)*(N.y-D.y))._round()),D.y>=g&&N.y>=g||(D.y>=g?D=new $(D.x+(g-D.y)/(N.y-D.y)*(N.x-D.x),g)._round():N.y>=g&&(N=new $(D.x+(g-D.y)/(N.y-D.y)*(N.x-D.x),g)._round()),T&&D.equals(T[T.length-1])||(T=[D],_.push(T)),T.push(N)))))}}return _}Ft("FeatureIndex",hT,{omit:["rawTileData","sourceLayerCoder"]});class Bl extends ${constructor(o,l,h,g){super(o,l),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new Bl(this.x,this.y,this.angle,this.segment)}}function mT(c,o,l,h,g){if(o.segment===void 0||l===0)return!0;let _=o,x=o.segment+1,S=0;for(;S>-l/2;){if(x--,x<0)return!1;S-=c[x].dist(_),_=c[x]}S+=c[x].dist(c[x+1]),x++;const T=[];let A=0;for(;S<l/2;){const D=c[x],N=c[x+1];if(!N)return!1;let W=c[x-1].angleTo(D)-D.angleTo(N);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:S,angleDelta:W}),A+=W;S-T[0].distance>h;)A-=T.shift().angleDelta;if(A>g)return!1;x++,S+=D.dist(N)}return!0}function gT(c){let o=0;for(let l=0;l<c.length-1;l++)o+=c[l].dist(c[l+1]);return o}function yT(c,o,l){return c?.6*o*l:0}function vT(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function rO(c,o,l,h,g,_){const x=yT(l,g,_),S=vT(l,h)*_;let T=0;const A=gT(c)/2;for(let D=0;D<c.length-1;D++){const N=c[D],W=c[D+1],Q=N.dist(W);if(T+Q>A){const re=(A-T)/Q,se=ci.number(N.x,W.x,re),de=ci.number(N.y,W.y,re),ye=new Bl(se,de,W.angleTo(N),D);return ye._round(),!x||mT(c,ye,S,x,o)?ye:void 0}T+=Q}}function nO(c,o,l,h,g,_,x,S,T){const A=yT(h,_,x),D=vT(h,g),N=D*x,W=c[0].x===0||c[0].x===T||c[0].y===0||c[0].y===T;return o-N<o/4&&(o=N+o/4),_T(c,W?o/2*S%o:(D/2+2*_)*x*S%o,o,A,l,N,W,!1,T)}function _T(c,o,l,h,g,_,x,S,T){const A=_/2,D=gT(c);let N=0,W=o-l,Q=[];for(let re=0;re<c.length-1;re++){const se=c[re],de=c[re+1],ye=se.dist(de),Oe=de.angleTo(se);for(;W+l<N+ye;){W+=l;const Pe=(W-N)/ye,K=ci.number(se.x,de.x,Pe),ue=ci.number(se.y,de.y,Pe);if(K>=0&&K<T&&ue>=0&&ue<T&&W-A>=0&&W+A<=D){const Te=new Bl(K,ue,Oe,re);Te._round(),h&&!mT(c,Te,_,h,g)||Q.push(Te)}}N+=ye}return S||Q.length||x||(Q=_T(c,N/2,l,h,g,_,x,!0,T)),Q}function xT(c,o,l,h){const g=[],_=c.image,x=_.pixelRatio,S=_.paddedRect.w-2,T=_.paddedRect.h-2;let A={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const D=_.stretchX||[[0,S]],N=_.stretchY||[[0,T]],W=(lt,Wt)=>lt+Wt[1]-Wt[0],Q=D.reduce(W,0),re=N.reduce(W,0),se=S-Q,de=T-re;let ye=0,Oe=Q,Pe=0,K=re,ue=0,Te=se,Ye=0,ft=de;if(_.content&&h){const lt=_.content,Wt=lt[2]-lt[0],sr=lt[3]-lt[1];(_.textFitWidth||_.textFitHeight)&&(A=qP(c)),ye=gy(D,0,lt[0]),Pe=gy(N,0,lt[1]),Oe=gy(D,lt[0],lt[2]),K=gy(N,lt[1],lt[3]),ue=lt[0]-ye,Ye=lt[1]-Pe,Te=Wt-Oe,ft=sr-K}const tt=A.x1,it=A.y1,St=A.x2-tt,yt=A.y2-it,Pt=(lt,Wt,sr,or)=>{const Yt=yy(lt.stretch-ye,Oe,St,tt),Er=vy(lt.fixed-ue,Te,lt.stretch,Q),En=yy(Wt.stretch-Pe,K,yt,it),Xn=vy(Wt.fixed-Ye,ft,Wt.stretch,re),Eo=yy(sr.stretch-ye,Oe,St,tt),ji=vy(sr.fixed-ue,Te,sr.stretch,Q),di=yy(or.stretch-Pe,K,yt,it),yo=vy(or.fixed-Ye,ft,or.stretch,re),wn=new $(Yt,En),ao=new $(Eo,En),vo=new $(Eo,di),_o=new $(Yt,di),ei=new $(Er/x,Xn/x),Ni=new $(ji/x,yo/x),so=o*Math.PI/180;if(so){const lo=Math.sin(so),co=Math.cos(so),Nn=[co,-lo,lo,co];wn._matMult(Nn),ao._matMult(Nn),_o._matMult(Nn),vo._matMult(Nn)}const hi=lt.stretch+lt.fixed,Yn=Wt.stretch+Wt.fixed;return{tl:wn,tr:ao,bl:_o,br:vo,tex:{x:_.paddedRect.x+1+hi,y:_.paddedRect.y+1+Yn,w:sr.stretch+sr.fixed-hi,h:or.stretch+or.fixed-Yn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ei,pixelOffsetBR:Ni,minFontScaleX:Te/x/St,minFontScaleY:ft/x/yt,isSDF:l}};if(h&&(_.stretchX||_.stretchY)){const lt=bT(D,se,Q),Wt=bT(N,de,re);for(let sr=0;sr<lt.length-1;sr++){const or=lt[sr],Yt=lt[sr+1];for(let Er=0;Er<Wt.length-1;Er++)g.push(Pt(or,Wt[Er],Yt,Wt[Er+1]))}}else g.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:T+1}));return g}function gy(c,o,l){let h=0;for(const g of c)h+=Math.max(o,Math.min(l,g[1]))-Math.max(o,Math.min(l,g[0]));return h}function bT(c,o,l){const h=[{fixed:-1,stretch:0}];for(const[g,_]of c){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:o+1,stretch:l}),h}function yy(c,o,l,h){return c/o*l+h}function vy(c,o,l,h){return c-o*l/h}Ft("Anchor",Bl);class _y{constructor(o,l,h,g,_,x,S,T,A,D){var N;if(this.boxStartIndex=o.length,A){let W=x.top,Q=x.bottom;const re=x.collisionPadding;re&&(W-=re[1],Q+=re[3]);let se=Q-W;se>0&&(se=Math.max(10,se),this.circleDiameter=se)}else{const W=!((N=x.image)===null||N===void 0)&&N.content&&(x.image.textFitWidth||x.image.textFitHeight)?qP(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};W.y1=W.y1*S-T[0],W.y2=W.y2*S+T[2],W.x1=W.x1*S-T[3],W.x2=W.x2*S+T[1];const Q=x.collisionPadding;if(Q&&(W.x1-=Q[0]*S,W.y1-=Q[1]*S,W.x2+=Q[2]*S,W.y2+=Q[3]*S),D){const re=new $(W.x1,W.y1),se=new $(W.x2,W.y1),de=new $(W.x1,W.y2),ye=new $(W.x2,W.y2),Oe=D*Math.PI/180;re._rotate(Oe),se._rotate(Oe),de._rotate(Oe),ye._rotate(Oe),W.x1=Math.min(re.x,se.x,de.x,ye.x),W.x2=Math.max(re.x,se.x,de.x,ye.x),W.y1=Math.min(re.y,se.y,de.y,ye.y),W.y2=Math.max(re.y,se.y,de.y,ye.y)}o.emplaceBack(l.x,l.y,W.x1,W.y1,W.x2,W.y2,h,g,_)}this.boxEndIndex=o.length}}class oO{constructor(o=[],l=(h,g)=>h<g?-1:h>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:h}=this,g=l[o];for(;o>0;){const _=o-1>>1,x=l[_];if(h(g,x)>=0)break;l[o]=x,o=_}l[o]=g}_down(o){const{data:l,compare:h}=this,g=this.length>>1,_=l[o];for(;o<g;){let x=1+(o<<1);const S=x+1;if(S<this.length&&h(l[S],l[x])<0&&(x=S),h(l[x],_)>=0)break;l[o]=l[x],o=x}l[o]=_}}function iO(c,o=1,l=!1){const h=ou.fromPoints(c[0]),g=Math.min(h.width(),h.height());let _=g/2;const x=new oO([],aO),{minX:S,minY:T,maxX:A,maxY:D}=h;if(g===0)return new $(S,T);for(let Q=S;Q<A;Q+=g)for(let re=T;re<D;re+=g)x.push(new kd(Q+_,re+_,_,c));let N=function(Q){let re=0,se=0,de=0;const ye=Q[0];for(let Oe=0,Pe=ye.length,K=Pe-1;Oe<Pe;K=Oe++){const ue=ye[Oe],Te=ye[K],Ye=ue.x*Te.y-Te.x*ue.y;se+=(ue.x+Te.x)*Ye,de+=(ue.y+Te.y)*Ye,re+=3*Ye}return new kd(se/re,de/re,0,Q)}(c),W=x.length;for(;x.length;){const Q=x.pop();(Q.d>N.d||!N.d)&&(N=Q,l&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,W)),Q.max-N.d<=o||(_=Q.h/2,x.push(new kd(Q.p.x-_,Q.p.y-_,_,c)),x.push(new kd(Q.p.x+_,Q.p.y-_,_,c)),x.push(new kd(Q.p.x-_,Q.p.y+_,_,c)),x.push(new kd(Q.p.x+_,Q.p.y+_,_,c)),W+=4)}return l&&(console.log(`num probes: ${W}`),console.log(`best distance: ${N.d}`)),N.p}function aO(c,o){return o.max-c.max}function kd(c,o,l,h){this.p=new $(c,o),this.h=l,this.d=function(g,_){let x=!1,S=1/0;for(let T=0;T<_.length;T++){const A=_[T];for(let D=0,N=A.length,W=N-1;D<N;W=D++){const Q=A[D],re=A[W];Q.y>g.y!=re.y>g.y&&g.x<(re.x-Q.x)*(g.y-Q.y)/(re.y-Q.y)+Q.x&&(x=!x),S=Math.min(S,eP(g,Q,re))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Io;f.aD=void 0,(Io=f.aD||(f.aD={}))[Io.center=1]="center",Io[Io.left=2]="left",Io[Io.right=3]="right",Io[Io.top=4]="top",Io[Io.bottom=5]="bottom",Io[Io["top-left"]=6]="top-left",Io[Io["top-right"]=7]="top-right",Io[Io["bottom-left"]=8]="bottom-left",Io[Io["bottom-right"]=9]="bottom-right";const qx=Number.POSITIVE_INFINITY;function wT(c,o){return o[1]!==qx?function(l,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(l){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(c,o[0],o[1]):function(l,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(l){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-h;break;case"top":_=h-7}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(c,o[0])}function ST(c,o,l){var h;const g=c.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(o,{},l);if(_){const S=_.values,T=[];for(let A=0;A<S.length;A+=2){const D=T[A]=S[A],N=S[A+1].map(W=>W*io);D.startsWith("top")?N[1]-=7:D.startsWith("bottom")&&(N[1]+=7),T[A+1]=N}return new Mr(T)}const x=g.get("text-variable-anchor");if(x){let S;S=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(o,{},l)*io,qx]:g.get("text-offset").evaluate(o,{},l).map(A=>A*io);const T=[];for(const A of x)T.push(A,wT(A,S));return new Mr(T)}return null}function Kx(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sO(c,o,l,h,g,_,x,S,T,A,D,N){let W=_.textMaxSize.evaluate(o,{});W===void 0&&(W=x);const Q=c.layers[0].layout,re=Q.get("icon-offset").evaluate(o,{},D),se=PT(l.horizontal),de=x/24,ye=c.tilePixelRatio*de,Oe=c.tilePixelRatio*W/24,Pe=c.tilePixelRatio*S,K=c.tilePixelRatio*Q.get("symbol-spacing"),ue=Q.get("text-padding")*c.tilePixelRatio,Te=function(sr,or,Yt,Er=1){const En=sr.get("icon-padding").evaluate(or,{},Yt),Xn=En&&En.values;return[Xn[0]*Er,Xn[1]*Er,Xn[2]*Er,Xn[3]*Er]}(Q,o,D,c.tilePixelRatio),Ye=Q.get("text-max-angle")/180*Math.PI,ft=Q.get("text-rotation-alignment")!=="viewport"&&Q.get("symbol-placement")!=="point",tt=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",it=Q.get("symbol-placement"),St=K/2,yt=Q.get("icon-text-fit");let Pt;h&&yt!=="none"&&(c.allowVerticalPlacement&&l.vertical&&(Pt=KP(h,l.vertical,yt,Q.get("icon-text-fit-padding"),re,de)),se&&(h=KP(h,se,yt,Q.get("icon-text-fit-padding"),re,de)));const lt=D?N.line.getGranularityForZoomLevel(D.z):1,Wt=(sr,or)=>{or.x<0||or.x>=ct||or.y<0||or.y>=ct||function(Yt,Er,En,Xn,Eo,ji,di,yo,wn,ao,vo,_o,ei,Ni,so,hi,Yn,lo,co,Nn,hn,Da,Md,La,uO){const Rd=Yt.addToLineVertexArray(Er,En);let iu,Ad,zd,Dd,kT=0,MT=0,RT=0,AT=0,nb=-1,ob=-1;const Bs={};let zT=Qo("");if(Yt.allowVerticalPlacement&&Xn.vertical){const Vo=yo.layout.get("text-rotate").evaluate(hn,{},La)+90;zd=new _y(wn,Er,ao,vo,_o,Xn.vertical,ei,Ni,so,Vo),di&&(Dd=new _y(wn,Er,ao,vo,_o,di,Yn,lo,so,Vo))}if(Eo){const Vo=yo.layout.get("icon-rotate").evaluate(hn,{}),Vi=yo.layout.get("icon-text-fit")!=="none",au=xT(Eo,Vo,Md,Vi),Oa=di?xT(di,Vo,Md,Vi):void 0;Ad=new _y(wn,Er,ao,vo,_o,Eo,Yn,lo,!1,Vo),kT=4*au.length;const su=Yt.iconSizeData;let ls=null;su.kind==="source"?(ls=[Os*yo.layout.get("icon-size").evaluate(hn,{})],ls[0]>$l&&Qt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):su.kind==="composite"&&(ls=[Os*Da.compositeIconSizes[0].evaluate(hn,{},La),Os*Da.compositeIconSizes[1].evaluate(hn,{},La)],(ls[0]>$l||ls[1]>$l)&&Qt(`${Yt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Yt.addSymbols(Yt.icon,au,ls,Nn,co,hn,f.an.none,Er,Rd.lineStartIndex,Rd.lineLength,-1,La),nb=Yt.icon.placedSymbolArray.length-1,Oa&&(MT=4*Oa.length,Yt.addSymbols(Yt.icon,Oa,ls,Nn,co,hn,f.an.vertical,Er,Rd.lineStartIndex,Rd.lineLength,-1,La),ob=Yt.icon.placedSymbolArray.length-1)}const DT=Object.keys(Xn.horizontal);for(const Vo of DT){const Vi=Xn.horizontal[Vo];if(!iu){zT=Qo(Vi.text);const Oa=yo.layout.get("text-rotate").evaluate(hn,{},La);iu=new _y(wn,Er,ao,vo,_o,Vi,ei,Ni,so,Oa)}const au=Vi.positionedLines.length===1;if(RT+=CT(Yt,Er,Vi,ji,yo,so,hn,hi,Rd,Xn.vertical?f.an.horizontal:f.an.horizontalOnly,au?DT:[Vo],Bs,nb,Da,La),au)break}Xn.vertical&&(AT+=CT(Yt,Er,Xn.vertical,ji,yo,so,hn,hi,Rd,f.an.vertical,["vertical"],Bs,ob,Da,La));const dO=iu?iu.boxStartIndex:Yt.collisionBoxArray.length,hO=iu?iu.boxEndIndex:Yt.collisionBoxArray.length,pO=zd?zd.boxStartIndex:Yt.collisionBoxArray.length,fO=zd?zd.boxEndIndex:Yt.collisionBoxArray.length,mO=Ad?Ad.boxStartIndex:Yt.collisionBoxArray.length,gO=Ad?Ad.boxEndIndex:Yt.collisionBoxArray.length,yO=Dd?Dd.boxStartIndex:Yt.collisionBoxArray.length,vO=Dd?Dd.boxEndIndex:Yt.collisionBoxArray.length;let $a=-1;const by=(Vo,Vi)=>Vo&&Vo.circleDiameter?Math.max(Vo.circleDiameter,Vi):Vi;$a=by(iu,$a),$a=by(zd,$a),$a=by(Ad,$a),$a=by(Dd,$a);const LT=$a>-1?1:0;LT&&($a*=uO/io),Yt.glyphOffsetArray.length>=Id.MAX_GLYPHS&&Qt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),hn.sortKey!==void 0&&Yt.addToSortKeyRanges(Yt.symbolInstances.length,hn.sortKey);const _O=ST(yo,hn,La),[xO,bO]=function(Vo,Vi){const au=Vo.length,Oa=Vi==null?void 0:Vi.values;if((Oa==null?void 0:Oa.length)>0)for(let su=0;su<Oa.length;su+=2){const ls=Oa[su+1];Vo.emplaceBack(f.aD[Oa[su]],ls[0],ls[1])}return[au,Vo.length]}(Yt.textAnchorOffsets,_O);Yt.symbolInstances.emplaceBack(Er.x,Er.y,Bs.right>=0?Bs.right:-1,Bs.center>=0?Bs.center:-1,Bs.left>=0?Bs.left:-1,Bs.vertical||-1,nb,ob,zT,dO,hO,pO,fO,mO,gO,yO,vO,ao,RT,AT,kT,MT,LT,0,ei,$a,xO,bO)}(c,or,sr,l,h,g,Pt,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,ye,[ue,ue,ue,ue],ft,T,Pe,Te,tt,re,o,_,A,D,x)};if(it==="line")for(const sr of fT(o.geometry,0,0,ct,ct)){const or=nu(sr,lt),Yt=nO(or,K,Ye,l.vertical||se,h,24,Oe,c.overscaling,ct);for(const Er of Yt)se&&lO(c,se.text,St,Er)||Wt(or,Er)}else if(it==="line-center"){for(const sr of o.geometry)if(sr.length>1){const or=nu(sr,lt),Yt=rO(or,Ye,l.vertical||se,h,24,Oe);Yt&&Wt(or,Yt)}}else if(o.type==="Polygon")for(const sr of Xu(o.geometry,0)){const or=iO(sr,16);Wt(nu(sr[0],lt,!0),new Bl(or.x,or.y,0))}else if(o.type==="LineString")for(const sr of o.geometry){const or=nu(sr,lt);Wt(or,new Bl(or[0].x,or[0].y,0))}else if(o.type==="Point")for(const sr of o.geometry)for(const or of sr)Wt([or],new Bl(or.x,or.y,0))}function CT(c,o,l,h,g,_,x,S,T,A,D,N,W,Q,re){const se=function(Oe,Pe,K,ue,Te,Ye,ft,tt){const it=ue.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,St=[];for(const yt of Pe.positionedLines)for(const Pt of yt.positionedGlyphs){if(!Pt.rect)continue;const lt=Pt.rect||{};let Wt=4,sr=!0,or=1,Yt=0;const Er=(Te||tt)&&Pt.vertical,En=Pt.metrics.advance*Pt.scale/2;if(tt&&Pe.verticalizable&&(Yt=yt.lineOffset/2-(Pt.imageName?-(io-Pt.metrics.width*Pt.scale)/2:(Pt.scale-1)*io)),Pt.imageName){const lo=ft[Pt.imageName];sr=lo.sdf,or=lo.pixelRatio,Wt=1/or}const Xn=Te?[Pt.x+En,Pt.y]:[0,0];let Eo=Te?[0,0]:[Pt.x+En+K[0],Pt.y+K[1]-Yt],ji=[0,0];Er&&(ji=Eo,Eo=[0,0]);const di=Pt.metrics.isDoubleResolution?2:1,yo=(Pt.metrics.left-Wt)*Pt.scale-En+Eo[0],wn=(-Pt.metrics.top-Wt)*Pt.scale+Eo[1],ao=yo+lt.w/di*Pt.scale/or,vo=wn+lt.h/di*Pt.scale/or,_o=new $(yo,wn),ei=new $(ao,wn),Ni=new $(yo,vo),so=new $(ao,vo);if(Er){const lo=new $(-En,En- -17),co=-Math.PI/2,Nn=12-En,hn=new $(22-Nn,-(Pt.imageName?Nn:0)),Da=new $(...ji);_o._rotateAround(co,lo)._add(hn)._add(Da),ei._rotateAround(co,lo)._add(hn)._add(Da),Ni._rotateAround(co,lo)._add(hn)._add(Da),so._rotateAround(co,lo)._add(hn)._add(Da)}if(it){const lo=Math.sin(it),co=Math.cos(it),Nn=[co,-lo,lo,co];_o._matMult(Nn),ei._matMult(Nn),Ni._matMult(Nn),so._matMult(Nn)}const hi=new $(0,0),Yn=new $(0,0);St.push({tl:_o,tr:ei,bl:Ni,br:so,tex:lt,writingMode:Pe.writingMode,glyphOffset:Xn,sectionIndex:Pt.sectionIndex,isSDF:sr,pixelOffsetTL:hi,pixelOffsetBR:Yn,minFontScaleX:0,minFontScaleY:0})}return St}(0,l,S,g,_,x,h,c.allowVerticalPlacement),de=c.textSizeData;let ye=null;de.kind==="source"?(ye=[Os*g.layout.get("text-size").evaluate(x,{})],ye[0]>$l&&Qt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):de.kind==="composite"&&(ye=[Os*Q.compositeTextSizes[0].evaluate(x,{},re),Os*Q.compositeTextSizes[1].evaluate(x,{},re)],(ye[0]>$l||ye[1]>$l)&&Qt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,se,ye,S,_,x,A,o,T.lineStartIndex,T.lineLength,W,re);for(const Oe of D)N[Oe]=c.text.placedSymbolArray.length-1;return 4*se.length}function PT(c){for(const o in c)return c[o];return null}function lO(c,o,l,h){const g=c.compareText;if(o in g){const _=g[o];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<l)return!0}else g[o]=[];return g[o].push(h),!1}const TT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xx{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(o,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=TT[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(o,2,1),[S]=new Uint32Array(o,4,1);return new Xx(S,x,_,o)}constructor(o,l=64,h=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const _=TT.indexOf(this.ArrayType),x=2*o*this.ArrayType.BYTES_PER_ELEMENT,S=o*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+T,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+T),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+T,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=o)}add(o,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=o,this.coords[this._pos++]=l,h}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return Yx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,l,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,T=[0,_.length-1,0],A=[];for(;T.length;){const D=T.pop()||0,N=T.pop()||0,W=T.pop()||0;if(N-W<=S){for(let de=W;de<=N;de++){const ye=x[2*de],Oe=x[2*de+1];ye>=o&&ye<=h&&Oe>=l&&Oe<=g&&A.push(_[de])}continue}const Q=W+N>>1,re=x[2*Q],se=x[2*Q+1];re>=o&&re<=h&&se>=l&&se<=g&&A.push(_[Q]),(D===0?o<=re:l<=se)&&(T.push(W),T.push(Q-1),T.push(1-D)),(D===0?h>=re:g>=se)&&(T.push(Q+1),T.push(N),T.push(1-D))}return A}within(o,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,S=[0,g.length-1,0],T=[],A=h*h;for(;S.length;){const D=S.pop()||0,N=S.pop()||0,W=S.pop()||0;if(N-W<=x){for(let de=W;de<=N;de++)ET(_[2*de],_[2*de+1],o,l)<=A&&T.push(g[de]);continue}const Q=W+N>>1,re=_[2*Q],se=_[2*Q+1];ET(re,se,o,l)<=A&&T.push(g[Q]),(D===0?o-h<=re:l-h<=se)&&(S.push(W),S.push(Q-1),S.push(1-D)),(D===0?o+h>=re:l+h>=se)&&(S.push(Q+1),S.push(N),S.push(1-D))}return T}}function Yx(c,o,l,h,g,_){if(g-h<=l)return;const x=h+g>>1;IT(c,o,x,h,g,_),Yx(c,o,l,h,x-1,1-_),Yx(c,o,l,x+1,g,1-_)}function IT(c,o,l,h,g,_){for(;g>h;){if(g-h>600){const A=g-h+1,D=l-h+1,N=Math.log(A),W=.5*Math.exp(2*N/3),Q=.5*Math.sqrt(N*W*(A-W)/A)*(D-A/2<0?-1:1);IT(c,o,l,Math.max(h,Math.floor(l-D*W/A+Q)),Math.min(g,Math.floor(l+(A-D)*W/A+Q)),_)}const x=o[2*l+_];let S=h,T=g;for(af(c,o,h,l),o[2*g+_]>x&&af(c,o,h,g);S<T;){for(af(c,o,S,T),S++,T--;o[2*S+_]<x;)S++;for(;o[2*T+_]>x;)T--}o[2*h+_]===x?af(c,o,h,T):(T++,af(c,o,T,g)),T<=l&&(h=T+1),l<=T&&(g=T-1)}}function af(c,o,l,h){Jx(c,l,h),Jx(o,2*l,2*h),Jx(o,2*l+1,2*h+1)}function Jx(c,o,l){const h=c[o];c[o]=c[l],c[l]=h}function ET(c,o,l,h){const g=c-l,_=o-h;return g*g+_*_}var Qx;f.cw=void 0,(Qx=f.cw||(f.cw={})).create="create",Qx.load="load",Qx.fullLoad="fullLoad";let xy=null,sf=[];const eb=1e3/60,tb="loadTime",rb="fullLoadTime",cO={mark(c){performance.mark(c)},frame(c){const o=c;xy!=null&&sf.push(o-xy),xy=o},clearMetrics(){xy=null,sf=[],performance.clearMeasures(tb),performance.clearMeasures(rb);for(const c in f.cw)performance.clearMarks(f.cw[c])},getPerformanceMetrics(){performance.measure(tb,f.cw.create,f.cw.load),performance.measure(rb,f.cw.create,f.cw.fullLoad);const c=performance.getEntriesByName(tb)[0].duration,o=performance.getEntriesByName(rb)[0].duration,l=sf.length,h=1/(sf.reduce((_,x)=>_+x,0)/l/1e3),g=sf.filter(_=>_>eb).reduce((_,x)=>_+(x-eb)/eb,0);return{loadTime:c,fullLoadTime:o,fps:h,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};f.$=ct,f.A=q,f.B=function([c,o,l]){return o+=90,o*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(o)*Math.sin(l),y:c*Math.sin(o)*Math.sin(l),z:c*Math.cos(l)}},f.C=ci,f.D=Zt,f.E=nt,f.F=fn,f.G=fd,f.H=function(c){if(kr==null){const o=c.navigator?c.navigator.userAgent:null;kr=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return kr},f.I=Ox,f.J=class{constructor(c,o){this.target=c,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Q5(()=>this.process()),this.subscription=br(this.target,"message",l=>this.receive(l),!1),this.globalScope=mr(self)?c:window}registerMessageHandler(c,o){this.messageHandlers[c]=o}sendAsync(c,o){return new Promise((l,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=o?br(o.signal,"abort",()=>{_==null||_.unsubscribe(),delete this.resolveRejects[g];const T={id:g,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},eO):null;this.resolveRejects[g]={resolve:T=>{_==null||_.unsubscribe(),l(T)},reject:T=>{_==null||_.unsubscribe(),h(T)}};const x=[],S=Object.assign(Object.assign({},c),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Gc(c.data,x)});this.target.postMessage(S,{transfer:x})})}receive(c){const o=c.data,l=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[l];const h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(mr(self)||o.mustQueue)return this.tasks[l]=o,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,o)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),o=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(c,o)}processTask(c,o){return a(this,void 0,void 0,function*(){if(o.type==="<response>"){const g=this.resolveRejects[c];return delete this.resolveRejects[c],g?void(o.error?g.reject(Al(o.error)):g.resolve(Al(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Al(o.data),h=new AbortController;this.abortControllers[c]=h;try{const g=yield this.messageHandlers[o.type](o.sourceMapId,l,h);this.completeTask(c,null,g)}catch(g){this.completeTask(c,g)}})}completeTask(c,o,l){const h=[];delete this.abortControllers[c];const g={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Gc(o):null,data:Gc(l,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.K=H,f.L=function(){var c=new q(16);return q!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},f.M=function(c,o,l){var h,g,_,x,S,T,A,D,N,W,Q,re,se=l[0],de=l[1],ye=l[2];return o===c?(c[12]=o[0]*se+o[4]*de+o[8]*ye+o[12],c[13]=o[1]*se+o[5]*de+o[9]*ye+o[13],c[14]=o[2]*se+o[6]*de+o[10]*ye+o[14],c[15]=o[3]*se+o[7]*de+o[11]*ye+o[15]):(g=o[1],_=o[2],x=o[3],S=o[4],T=o[5],A=o[6],D=o[7],N=o[8],W=o[9],Q=o[10],re=o[11],c[0]=h=o[0],c[1]=g,c[2]=_,c[3]=x,c[4]=S,c[5]=T,c[6]=A,c[7]=D,c[8]=N,c[9]=W,c[10]=Q,c[11]=re,c[12]=h*se+S*de+N*ye+o[12],c[13]=g*se+T*de+W*ye+o[13],c[14]=_*se+A*de+Q*ye+o[14],c[15]=x*se+D*de+re*ye+o[15]),c},f.N=function(c,o,l){var h=l[0],g=l[1],_=l[2];return c[0]=o[0]*h,c[1]=o[1]*h,c[2]=o[2]*h,c[3]=o[3]*h,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*_,c[9]=o[9]*_,c[10]=o[10]*_,c[11]=o[11]*_,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},f.O=function(c,o,l){var h=o[0],g=o[1],_=o[2],x=o[3],S=o[4],T=o[5],A=o[6],D=o[7],N=o[8],W=o[9],Q=o[10],re=o[11],se=o[12],de=o[13],ye=o[14],Oe=o[15],Pe=l[0],K=l[1],ue=l[2],Te=l[3];return c[0]=Pe*h+K*S+ue*N+Te*se,c[1]=Pe*g+K*T+ue*W+Te*de,c[2]=Pe*_+K*A+ue*Q+Te*ye,c[3]=Pe*x+K*D+ue*re+Te*Oe,c[4]=(Pe=l[4])*h+(K=l[5])*S+(ue=l[6])*N+(Te=l[7])*se,c[5]=Pe*g+K*T+ue*W+Te*de,c[6]=Pe*_+K*A+ue*Q+Te*ye,c[7]=Pe*x+K*D+ue*re+Te*Oe,c[8]=(Pe=l[8])*h+(K=l[9])*S+(ue=l[10])*N+(Te=l[11])*se,c[9]=Pe*g+K*T+ue*W+Te*de,c[10]=Pe*_+K*A+ue*Q+Te*ye,c[11]=Pe*x+K*D+ue*re+Te*Oe,c[12]=(Pe=l[12])*h+(K=l[13])*S+(ue=l[14])*N+(Te=l[15])*se,c[13]=Pe*g+K*T+ue*W+Te*de,c[14]=Pe*_+K*A+ue*Q+Te*ye,c[15]=Pe*x+K*D+ue*re+Te*Oe,c},f.P=$,f.Q=function(c,o){const l={};for(let h=0;h<o.length;h++){const g=o[h];g in c&&(l[g]=c[g])}return l},f.R=ui,f.S=Ol,f.T=wx,f.U=iT,f.V=oT,f.W=O,f.X=ne,f.Y=pr,f.Z=Fi,f._=a,f.a=X,f.a$=function(c,o,l){return c[0]=o[0]*l,c[1]=o[1]*l,c[2]=o[2]*l,c[3]=o[3]*l,c},f.a0=of,f.a1=ou,f.a2=25,f.a3=Zx,f.a4=c=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(l=>{o.onloadstart=()=>{l(o)};for(const h of c){const g=window.document.createElement("source");Fe(h)||(o.crossOrigin="Anonymous"),g.src=h,o.appendChild(g)}})},f.a5=Je,f.a6=function(){return nr++},f.a7=fe,f.a8=Id,f.a9=Ja,f.aA=io,f.aB=Ht,f.aC=function(c,o,l,h,g=!1){if(!l[0]&&!l[1])return[0,0];const _=g?h==="map"?-c.bearingInRadians:0:h==="viewport"?c.bearingInRadians:0;if(_){const x=Math.sin(_),S=Math.cos(_);l=[l[0]*S-l[1]*x,l[0]*x+l[1]*S]}return[g?l[0]:Ht(o,l[0],c.zoom),g?l[1]:Ht(o,l[1],c.zoom)]},f.aE=jx,f.aF=Kx,f.aG=Fx,f.aH=Xx,f.aI=In,f.aJ=cy,f.aK=Ke,f.aL=Dr,f.aM=on,f.aN=Mt,f.aO=ar,f.aP=sT,f.aQ=je,f.aR=Be,f.aS=function(c){var o=new q(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o},f.aT=function(c,o,l){return c[0]=o[0]-l[0],c[1]=o[1]-l[1],c[2]=o[2]-l[2],c},f.aU=function(c,o){var l=o[0],h=o[1],g=o[2],_=l*l+h*h+g*g;return _>0&&(_=1/Math.sqrt(_)),c[0]=o[0]*_,c[1]=o[1]*_,c[2]=o[2]*_,c},f.aV=ot,f.aW=function(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]},f.aX=function(c,o,l){return c[0]=o[0]*l[0],c[1]=o[1]*l[1],c[2]=o[2]*l[2],c[3]=o[3]*l[3],c},f.aY=J,f.aZ=function(c,o,l){const h=o[0]*l[0]+o[1]*l[1]+o[2]*l[2];return h===0?null:(-(c[0]*l[0]+c[1]*l[1]+c[2]*l[2])-l[3])/h},f.a_=De,f.aa=tu,f.ab=dT,f.ac=function(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,g,_)=>{const x=g||_;return o[h]=!x||x.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o},f.ad=dr,f.ae=function(c){return Math.pow(2,c)},f.af=he,f.ag=Ct,f.ah=85.051129,f.ai=aT,f.aj=function(c){return Math.log(c)/Math.LN2},f.ak=function(c){var o=c[0],l=c[1];return o*o+l*l},f.al=function(c,o){const l=[];for(const h in c)h in o||l.push(h);return l},f.am=function(c,o){let l=0,h=0;if(c.kind==="constant")h=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=c,S=g?Ct(Bo.interpolationFactor(g,o,_,x),0,1):0;c.kind==="camera"?h=ci.number(c.minSize,c.maxSize,S):l=S}return{uSizeT:l,uSize:h}},f.ao=function(c,{uSize:o,uSizeT:l},{lowerSize:h,upperSize:g}){return c.kind==="source"?h/Os:c.kind==="composite"?ci.number(h/Os,g/Os,l):o},f.ap=function(c,o){var l=o[0],h=o[1],g=o[2],_=o[3],x=o[4],S=o[5],T=o[6],A=o[7],D=o[8],N=o[9],W=o[10],Q=o[11],re=o[12],se=o[13],de=o[14],ye=o[15],Oe=l*S-h*x,Pe=l*T-g*x,K=l*A-_*x,ue=h*T-g*S,Te=h*A-_*S,Ye=g*A-_*T,ft=D*se-N*re,tt=D*de-W*re,it=D*ye-Q*re,St=N*de-W*se,yt=N*ye-Q*se,Pt=W*ye-Q*de,lt=Oe*Pt-Pe*yt+K*St+ue*it-Te*tt+Ye*ft;return lt?(c[0]=(S*Pt-T*yt+A*St)*(lt=1/lt),c[1]=(g*yt-h*Pt-_*St)*lt,c[2]=(se*Ye-de*Te+ye*ue)*lt,c[3]=(W*Te-N*Ye-Q*ue)*lt,c[4]=(T*it-x*Pt-A*tt)*lt,c[5]=(l*Pt-g*it+_*tt)*lt,c[6]=(de*K-re*Ye-ye*Pe)*lt,c[7]=(D*Ye-W*K+Q*Pe)*lt,c[8]=(x*yt-S*it+A*ft)*lt,c[9]=(h*it-l*yt-_*ft)*lt,c[10]=(re*Te-se*K+ye*Oe)*lt,c[11]=(N*K-D*Te-Q*Oe)*lt,c[12]=(S*tt-x*St-T*ft)*lt,c[13]=(l*St-h*tt+g*ft)*lt,c[14]=(se*Pe-re*ue-de*Oe)*lt,c[15]=(D*ue-N*Pe+W*Oe)*lt,c):null},f.aq=at,f.ar=function(c){return Math.hypot(c[0],c[1])},f.as=function(c){return c[0]=0,c[1]=0,c},f.at=function(c,o,l){return c[0]=o[0]*l,c[1]=o[1]*l,c},f.au=Nx,f.av=Ge,f.aw=function(c,o,l,h){const g=o.y-c.y,_=o.x-c.x,x=h.y-l.y,S=h.x-l.x,T=x*_-S*g;if(T===0)return null;const A=(S*(c.y-l.y)-x*(c.x-l.x))/T;return new $(c.x+A*_,c.y+A*g)},f.ax=fT,f.ay=J2,f.az=function(c){let o=1/0,l=1/0,h=-1/0,g=-1/0;for(const _ of c)o=Math.min(o,_.x),l=Math.min(l,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return[o,l,h,g]},f.b=Ur,f.b$=M5,f.b0=function(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]+c[3]},f.b1=cT,f.b2=Ed,f.b3=function(c,o,l,h,g){var _,x=1/Math.tan(o/2);return c[0]=x/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=x,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+h)*(_=1/(h-g)),c[14]=2*g*h*_):(c[10]=-1,c[14]=-2*h),c},f.b4=function(c){var o=new q(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},f.b5=function(c,o,l){var h=Math.sin(l),g=Math.cos(l),_=o[0],x=o[1],S=o[2],T=o[3],A=o[4],D=o[5],N=o[6],W=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=_*g+A*h,c[1]=x*g+D*h,c[2]=S*g+N*h,c[3]=T*g+W*h,c[4]=A*g-_*h,c[5]=D*g-x*h,c[6]=N*g-S*h,c[7]=W*g-T*h,c},f.b6=function(c,o,l){var h=Math.sin(l),g=Math.cos(l),_=o[4],x=o[5],S=o[6],T=o[7],A=o[8],D=o[9],N=o[10],W=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=_*g+A*h,c[5]=x*g+D*h,c[6]=S*g+N*h,c[7]=T*g+W*h,c[8]=A*g-_*h,c[9]=D*g-x*h,c[10]=N*g-S*h,c[11]=W*g-T*h,c},f.b7=function(){const c=new Float32Array(16);return he(c),c},f.b8=function(){const c=new Float64Array(16);return he(c),c},f.b9=function(){return new Float64Array(16)},f.bA=function(c){return c[0]=0,c[1]=0,c[2]=0,c},f.bB=function(c,o,l,h){const g=Math.sqrt(c*c+o*o),_=Math.sqrt(l*l+h*h);c/=g,o/=g,l/=_,h/=_;const x=Math.acos(c*l+o*h);return-o*l+c*h>0?x:-x},f.bC=function(c,o){const l=Dt(c,2*Math.PI),h=Dt(o,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},f.bD=function(){const c={},o=Me.$version;for(const l in Me.$root){const h=Me.$root[l];if(h.required){let g=null;g=l==="version"?o:h.type==="array"?[]:{},g!=null&&(c[l]=g)}}return c},f.bE=Rp,f.bF=xe,f.bG=function c(o,l){if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(let h=0;h<o.length;h++)if(!c(o[h],l[h]))return!1;return!0}if(typeof o=="object"&&o!==null&&l!==null){if(typeof l!="object"||Object.keys(o).length!==Object.keys(l).length)return!1;for(const h in o)if(!c(o[h],l[h]))return!1;return!0}return o===l},f.bH=function(c){c=c.slice();const o=Object.create(null);for(let l=0;l<c.length;l++)o[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=wt(c[l],o[c[l].ref]));return c},f.bI=function(c){if(c.type==="custom")return new J5(c);switch(c.type){case"background":return new K5(c);case"circle":return new U3(c);case"color-relief":return new K3(c);case"fill":return new u5(c);case"fill-extrusion":return new v5(c);case"heatmap":return new G3(c);case"hillshade":return new Z3(c);case"line":return new T5(c);case"raster":return new Y5(c);case"symbol":return new my(c)}},f.bJ=Kt,f.bK=function(c,o){if(!c)return[{command:"setStyle",args:[o]}];let l=[];try{if(!ge(c.version,o.version))return[{command:"setStyle",args:[o]}];ge(c.center,o.center)||l.push({command:"setCenter",args:[o.center]}),ge(c.state,o.state)||l.push({command:"setGlobalState",args:[o.state]}),ge(c.centerAltitude,o.centerAltitude)||l.push({command:"setCenterAltitude",args:[o.centerAltitude]}),ge(c.zoom,o.zoom)||l.push({command:"setZoom",args:[o.zoom]}),ge(c.bearing,o.bearing)||l.push({command:"setBearing",args:[o.bearing]}),ge(c.pitch,o.pitch)||l.push({command:"setPitch",args:[o.pitch]}),ge(c.roll,o.roll)||l.push({command:"setRoll",args:[o.roll]}),ge(c.sprite,o.sprite)||l.push({command:"setSprite",args:[o.sprite]}),ge(c.glyphs,o.glyphs)||l.push({command:"setGlyphs",args:[o.glyphs]}),ge(c.transition,o.transition)||l.push({command:"setTransition",args:[o.transition]}),ge(c.light,o.light)||l.push({command:"setLight",args:[o.light]}),ge(c.terrain,o.terrain)||l.push({command:"setTerrain",args:[o.terrain]}),ge(c.sky,o.sky)||l.push({command:"setSky",args:[o.sky]}),ge(c.projection,o.projection)||l.push({command:"setProjection",args:[o.projection]});const h={},g=[];(function(x,S,T,A){let D;for(D in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,D)&&(Object.prototype.hasOwnProperty.call(S,D)||ut(D,T,A));for(D in S)Object.prototype.hasOwnProperty.call(S,D)&&(Object.prototype.hasOwnProperty.call(x,D)?ge(x[D],S[D])||(x[D].type==="geojson"&&S[D].type==="geojson"&&It(x,S,D)?Re(T,{command:"setGeoJSONSourceData",args:[D,S[D].data]}):vt(D,S,T,A)):Ve(D,S,T))})(c.sources,o.sources,g,h);const _=[];c.layers&&c.layers.forEach(x=>{"source"in x&&h[x.source]?l.push({command:"removeLayer",args:[x.id]}):_.push(x)}),l=l.concat(g),function(x,S,T){S=S||[];const A=(x=x||[]).map(xt),D=S.map(xt),N=x.reduce(Bt,{}),W=S.reduce(Bt,{}),Q=A.slice(),re=Object.create(null);let se,de,ye,Oe,Pe;for(let K=0,ue=0;K<A.length;K++)se=A[K],Object.prototype.hasOwnProperty.call(W,se)?ue++:(Re(T,{command:"removeLayer",args:[se]}),Q.splice(Q.indexOf(se,ue),1));for(let K=0,ue=0;K<D.length;K++)se=D[D.length-1-K],Q[Q.length-1-K]!==se&&(Object.prototype.hasOwnProperty.call(N,se)?(Re(T,{command:"removeLayer",args:[se]}),Q.splice(Q.lastIndexOf(se,Q.length-ue),1)):ue++,Oe=Q[Q.length-K],Re(T,{command:"addLayer",args:[W[se],Oe]}),Q.splice(Q.length-K,0,se),re[se]=!0);for(let K=0;K<D.length;K++)if(se=D[K],de=N[se],ye=W[se],!re[se]&&!ge(de,ye))if(ge(de.source,ye.source)&&ge(de["source-layer"],ye["source-layer"])&&ge(de.type,ye.type)){for(Pe in bt(de.layout,ye.layout,T,se,null,"setLayoutProperty"),bt(de.paint,ye.paint,T,se,null,"setPaintProperty"),ge(de.filter,ye.filter)||Re(T,{command:"setFilter",args:[se,ye.filter]}),ge(de.minzoom,ye.minzoom)&&ge(de.maxzoom,ye.maxzoom)||Re(T,{command:"setLayerZoomRange",args:[se,ye.minzoom,ye.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?bt(de[Pe],ye[Pe],T,se,Pe.slice(6),"setPaintProperty"):ge(de[Pe],ye[Pe])||Re(T,{command:"setLayerProperty",args:[se,Pe,ye[Pe]]}));for(Pe in ye)Object.prototype.hasOwnProperty.call(ye,Pe)&&!Object.prototype.hasOwnProperty.call(de,Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&(Pe.indexOf("paint.")===0?bt(de[Pe],ye[Pe],T,se,Pe.slice(6),"setPaintProperty"):ge(de[Pe],ye[Pe])||Re(T,{command:"setLayerProperty",args:[se,Pe,ye[Pe]]}))}else Re(T,{command:"removeLayer",args:[se]}),Oe=Q[Q.lastIndexOf(se)+1],Re(T,{command:"addLayer",args:[ye,Oe]})}(_,o.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[o]}]}return l},f.bL=function(c){const o=[],l=c.id;return l===void 0&&o.push({message:`layers.${l}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},f.bM=ur,f.bN=gr,f.bO=class extends dn{constructor(c,o){super(c,o),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},f.bP=oy,f.bQ=class extends dn{constructor(c,o){super(c,o),this.current=mx}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let o=1;o<16;o++)if(c[o]!==this.current[o]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},f.bR=Kn,f.bS=class extends dn{constructor(c,o){super(c,o),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},f.bT=class extends dn{constructor(c,o){super(c,o),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},f.bU=ce,f.bV=function(c,o){var l=Math.sin(o),h=Math.cos(o);return c[0]=h,c[1]=l,c[2]=0,c[3]=-l,c[4]=h,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},f.bW=function(c,o,l){var h=o[0],g=o[1],_=o[2];return c[0]=h*l[0]+g*l[3]+_*l[6],c[1]=h*l[1]+g*l[4]+_*l[7],c[2]=h*l[2]+g*l[5]+_*l[8],c},f.bX=function(c,o,l,h,g,_,x){var S=1/(o-l),T=1/(h-g),A=1/(_-x);return c[0]=-2*S,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*A,c[11]=0,c[12]=(o+l)*S,c[13]=(g+h)*T,c[14]=(x+_)*A,c[15]=1,c},f.bY=class extends dn{constructor(c,o){super(c,o),this.current=new Array}set(c){if(c!=this.current){this.current=c;const o=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)o[4*l]=c[l].r,o[4*l+1]=c[l].g,o[4*l+2]=c[l].b,o[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,o)}}},f.bZ=class extends dn{constructor(c,o){super(c,o),this.current=new Array}set(c){if(c!=this.current){this.current=c;const o=new Float32Array(c);this.gl.uniform1fv(this.location,o)}}},f.b_=class extends p{},f.ba=function(c,o,l){const h=new Float64Array(4);return Ze(h,c,o-90,l),h},f.bb=function(c,o,l,h){var g,_,x,S,T,A=o[0],D=o[1],N=o[2],W=o[3],Q=l[0],re=l[1],se=l[2],de=l[3];return(_=A*Q+D*re+N*se+W*de)<0&&(_=-_,Q=-Q,re=-re,se=-se,de=-de),1-_>Y?(g=Math.acos(_),x=Math.sin(g),S=Math.sin((1-h)*g)/x,T=Math.sin(h*g)/x):(S=1-h,T=h),c[0]=S*A+T*Q,c[1]=S*D+T*re,c[2]=S*N+T*se,c[3]=S*W+T*de,c},f.bc=function(c){const o=new Float64Array(9);var l,h,g,_,x,S,T,A,D,N,W,Q,re,se,de,ye,Oe,Pe;N=(g=(h=c)[0])*(T=g+g),W=(_=h[1])*T,re=(x=h[2])*T,se=x*(A=_+_),ye=(S=h[3])*T,Oe=S*A,Pe=S*(D=x+x),(l=o)[0]=1-(Q=_*A)-(de=x*D),l[3]=W-Pe,l[6]=re+Oe,l[1]=W+Pe,l[4]=1-N-de,l[7]=se-ye,l[2]=re-Oe,l[5]=se+ye,l[8]=1-N-Q;const K=ar(-Math.asin(Ct(o[2],-1,1)));let ue,Te;return Math.hypot(o[5],o[8])<.001?(ue=0,Te=-ar(Math.atan2(o[3],o[4]))):(ue=ar(o[5]===0&&o[8]===0?0:Math.atan2(o[5],o[8])),Te=ar(o[1]===0&&o[0]===0?0:Math.atan2(o[1],o[0]))),{roll:ue,pitch:K+90,bearing:Te}},f.bd=function(c,o){return c.roll==o.roll&&c.pitch==o.pitch&&c.bearing==o.bearing},f.be=Cr,f.bf=No,f.bg=Pd,f.bh=Yp,f.bi=Cd,f.bj=Nt,f.bk=tr,f.bl=fr,f.bm=function(c,o,l,h,g){return Nt(h,g,Ct((c-o)/(l-o),0,1))},f.bn=Dt,f.bo=function(){return new Float64Array(3)},f.bp=function(c,o,l,h){return c[0]=o[0]+l[0]*h,c[1]=o[1]+l[1]*h,c[2]=o[2]+l[2]*h,c},f.bq=Ze,f.br=function(c,o,l){var h=l[0],g=l[1],_=l[2],x=o[0],S=o[1],T=o[2],A=g*T-_*S,D=_*x-h*T,N=h*S-g*x,W=g*N-_*D,Q=_*A-h*N,re=h*D-g*A,se=2*l[3];return D*=se,N*=se,Q*=2,re*=2,c[0]=x+(A*=se)+(W*=2),c[1]=S+D+Q,c[2]=T+N+re,c},f.bs=function(c,o,l){const h=(g=[c[0],c[1],c[2],o[0],o[1],o[2],l[0],l[1],l[2]])[0]*((D=g[8])*(x=g[4])-(S=g[5])*(A=g[7]))+g[1]*(-D*(_=g[3])+S*(T=g[6]))+g[2]*(A*_-x*T);var g,_,x,S,T,A,D;if(h===0)return null;const N=ot([],[o[0],o[1],o[2]],[l[0],l[1],l[2]]),W=ot([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),Q=ot([],[c[0],c[1],c[2]],[o[0],o[1],o[2]]),re=je([],N,-c[3]);return Be(re,re,je([],W,-o[3])),Be(re,re,je([],Q,-l[3])),je(re,re,1/h),re},f.bt=Gx,f.bu=function(){return new Float64Array(4)},f.bv=function(c,o,l,h){var g=[],_=[];return g[0]=o[0]-l[0],g[1]=o[1]-l[1],g[2]=o[2]-l[2],_[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),_[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),_[2]=g[2],c[0]=_[0]+l[0],c[1]=_[1]+l[1],c[2]=_[2]+l[2],c},f.bw=function(c,o,l,h){var g=[],_=[];return g[0]=o[0]-l[0],g[1]=o[1]-l[1],g[2]=o[2]-l[2],_[0]=g[0],_[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),_[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),c[0]=_[0]+l[0],c[1]=_[1]+l[1],c[2]=_[2]+l[2],c},f.bx=function(c,o,l,h){var g=[],_=[];return g[0]=o[0]-l[0],g[1]=o[1]-l[1],g[2]=o[2]-l[2],_[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),_[1]=g[1],_[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),c[0]=_[0]+l[0],c[1]=_[1]+l[1],c[2]=_[2]+l[2],c},f.by=function(c,o,l){var h=Math.sin(l),g=Math.cos(l),_=o[0],x=o[1],S=o[2],T=o[3],A=o[8],D=o[9],N=o[10],W=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=_*g-A*h,c[1]=x*g-D*h,c[2]=S*g-N*h,c[3]=T*g-W*h,c[8]=_*h+A*g,c[9]=x*h+D*g,c[10]=S*h+N*g,c[11]=T*h+W*g,c},f.bz=function(c,o){const l=Dt(c,360),h=Dt(o,360),g=h-l,_=h>l?g-360:g+360;return Math.abs(g)<Math.abs(_)?g:_},f.c=_e,f.c0=class extends v{},f.c1=bx,f.c2=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},f.c3=lP,f.c4=function(c,o,l){var h=o[0],g=o[1],_=o[2],x=l[3]*h+l[7]*g+l[11]*_+l[15];return c[0]=(l[0]*h+l[4]*g+l[8]*_+l[12])/(x=x||1),c[1]=(l[1]*h+l[5]*g+l[9]*_+l[13])/x,c[2]=(l[2]*h+l[6]*g+l[10]*_+l[14])/x,c},f.c5=class extends Bp{},f.c6=class extends V{},f.c7=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]&&c[4]===o[4]&&c[5]===o[5]&&c[6]===o[6]&&c[7]===o[7]&&c[8]===o[8]&&c[9]===o[9]&&c[10]===o[10]&&c[11]===o[11]&&c[12]===o[12]&&c[13]===o[13]&&c[14]===o[14]&&c[15]===o[15]},f.c8=function(c,o){var l=c[0],h=c[1],g=c[2],_=c[3],x=c[4],S=c[5],T=c[6],A=c[7],D=c[8],N=c[9],W=c[10],Q=c[11],re=c[12],se=c[13],de=c[14],ye=c[15],Oe=o[0],Pe=o[1],K=o[2],ue=o[3],Te=o[4],Ye=o[5],ft=o[6],tt=o[7],it=o[8],St=o[9],yt=o[10],Pt=o[11],lt=o[12],Wt=o[13],sr=o[14],or=o[15];return Math.abs(l-Oe)<=Y*Math.max(1,Math.abs(l),Math.abs(Oe))&&Math.abs(h-Pe)<=Y*Math.max(1,Math.abs(h),Math.abs(Pe))&&Math.abs(g-K)<=Y*Math.max(1,Math.abs(g),Math.abs(K))&&Math.abs(_-ue)<=Y*Math.max(1,Math.abs(_),Math.abs(ue))&&Math.abs(x-Te)<=Y*Math.max(1,Math.abs(x),Math.abs(Te))&&Math.abs(S-Ye)<=Y*Math.max(1,Math.abs(S),Math.abs(Ye))&&Math.abs(T-ft)<=Y*Math.max(1,Math.abs(T),Math.abs(ft))&&Math.abs(A-tt)<=Y*Math.max(1,Math.abs(A),Math.abs(tt))&&Math.abs(D-it)<=Y*Math.max(1,Math.abs(D),Math.abs(it))&&Math.abs(N-St)<=Y*Math.max(1,Math.abs(N),Math.abs(St))&&Math.abs(W-yt)<=Y*Math.max(1,Math.abs(W),Math.abs(yt))&&Math.abs(Q-Pt)<=Y*Math.max(1,Math.abs(Q),Math.abs(Pt))&&Math.abs(re-lt)<=Y*Math.max(1,Math.abs(re),Math.abs(lt))&&Math.abs(se-Wt)<=Y*Math.max(1,Math.abs(se),Math.abs(Wt))&&Math.abs(de-sr)<=Y*Math.max(1,Math.abs(de),Math.abs(sr))&&Math.abs(ye-or)<=Y*Math.max(1,Math.abs(ye),Math.abs(or))},f.c9=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},f.cA=function(c){delete X.REGISTERED_PROTOCOLS[c]},f.cB=function(c,o){const l={};for(let g=0;g<c.length;g++){const _=o&&o[c[g].id]||cd(c[g]);o&&(o[c[g].id]=_);let x=l[_];x||(x=l[_]=[]),x.push(c[g])}const h=[];for(const g in l)h.push(l[g]);return h},f.cC=Ft,f.cD=uT,f.cE=hT,f.cF=VP,f.cG=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ct/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const o=c.bucket.layers[0],l=o.layout,h=o._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new fn(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new fn(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new fn(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:D}=c.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new fn(A),c.canonical),h["text-size"].possiblyEvaluate(new fn(D),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:D}=c.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new fn(A),c.canonical),h["icon-size"].possiblyEvaluate(new fn(D),c.canonical)]}const _=l.get("text-line-height")*io,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),T=l.get("text-size");for(const A of c.bucket.features){const D=l.get("text-font").evaluate(A,{},c.canonical).join(","),N=T.evaluate(A,{},c.canonical),W=g.layoutTextSize.evaluate(A,{},c.canonical),Q=g.layoutIconSize.evaluate(A,{},c.canonical),re={horizontal:{},vertical:void 0},se=A.text;let de,ye=[0,0];if(se){const K=se.toString(),ue=l.get("text-letter-spacing").evaluate(A,{},c.canonical)*io,Te=Yg(K)?ue:0,Ye=l.get("text-anchor").evaluate(A,{},c.canonical),ft=ST(o,A,c.canonical);if(!ft){const yt=l.get("text-radial-offset").evaluate(A,{},c.canonical);ye=yt?wT(Ye,[yt*io,qx]):l.get("text-offset").evaluate(A,{},c.canonical).map(Pt=>Pt*io)}let tt=x?"center":l.get("text-justify").evaluate(A,{},c.canonical);const it=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(A,{},c.canonical)*io:1/0,St=()=>{c.bucket.allowVerticalPlacement&&Ap(K)&&(re.vertical=hy(se,c.glyphMap,c.glyphPositions,c.imagePositions,D,it,_,Ye,"left",Te,ye,f.an.vertical,!0,W,N))};if(!x&&ft){const yt=new Set;if(tt==="auto")for(let lt=0;lt<ft.values.length;lt+=2)yt.add(Kx(ft.values[lt]));else yt.add(tt);let Pt=!1;for(const lt of yt)if(!re.horizontal[lt])if(Pt)re.horizontal[lt]=re.horizontal[0];else{const Wt=hy(se,c.glyphMap,c.glyphPositions,c.imagePositions,D,it,_,"center",lt,Te,ye,f.an.horizontal,!1,W,N);Wt&&(re.horizontal[lt]=Wt,Pt=Wt.positionedLines.length===1)}St()}else{tt==="auto"&&(tt=Kx(Ye));const yt=hy(se,c.glyphMap,c.glyphPositions,c.imagePositions,D,it,_,Ye,tt,Te,ye,f.an.horizontal,!1,W,N);yt&&(re.horizontal[tt]=yt),St(),Ap(K)&&x&&S&&(re.vertical=hy(se,c.glyphMap,c.glyphPositions,c.imagePositions,D,it,_,Ye,tt,Te,ye,f.an.vertical,!1,W,N))}}let Oe=!1;if(A.icon&&A.icon.name){const K=c.imageMap[A.icon.name];K&&(de=H5(c.imagePositions[A.icon.name],l.get("icon-offset").evaluate(A,{},c.canonical),l.get("icon-anchor").evaluate(A,{},c.canonical)),Oe=!!K.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Oe:c.bucket.sdfIcons!==Oe&&Qt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(K.pixelRatio!==c.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Pe=PT(re.horizontal)||re.vertical;c.bucket.iconsInText=!!Pe&&Pe.iconsInText,(Pe||de)&&sO(c.bucket,A,re,de,c.imageMap,g,W,Q,ye,Oe,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},f.cH=zx,f.cI=Ix,f.cJ=Ax,f.cK=Qp,f.cL=$x,f.cM=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},f.cN=function(c,o,l,h,g){return a(this,void 0,void 0,function*(){if(ne())try{return yield pr(c,o,l,h,g)}catch{}return function(_,x,S,T,A){const D=_.width,N=_.height;$r&&jr||($r=new OffscreenCanvas(D,N),jr=$r.getContext("2d",{willReadFrequently:!0})),$r.width=D,$r.height=N,jr.drawImage(_,0,0,D,N);const W=jr.getImageData(x,S,T,A);return jr.clearRect(0,0,D,N),W.data}(c,o,l,h,g)})},f.cO=dP,f.cP=b,f.cQ=k,f.cR=EP,f.cS=jP,f.cT=id,f.cU=es,f.ca=c=>c.type==="symbol",f.cb=c=>c.type==="circle",f.cc=c=>c.type==="heatmap",f.cd=c=>c.type==="line",f.ce=c=>c.type==="fill",f.cf=c=>c.type==="fill-extrusion",f.cg=c=>c.type==="hillshade",f.ch=c=>c.type==="color-relief",f.ci=c=>c.type==="raster",f.cj=c=>c.type==="background",f.ck=c=>c.type==="custom",f.cl=Tt,f.cm=function(c,o,l){const h=pt(o.x-l.x,o.y-l.y),g=pt(c.x-l.x,c.y-l.y);var _,x;return ar(Math.atan2(h[0]*g[1]-h[1]*g[0],(_=h)[0]*(x=g)[0]+_[1]*x[1]))},f.cn=st,f.co=function(c,o){return yr[o]&&(c instanceof MouseEvent||c instanceof WheelEvent)},f.cp=function(c,o){return Jt[o]&&"touches"in c},f.cq=function(c){return Jt[c]||yr[c]},f.cr=function(c,o,l){var h=o[0],g=o[1];return c[0]=l[0]*h+l[4]*g+l[12],c[1]=l[1]*h+l[5]*g+l[13],c},f.cs=function(c,o){const{x:l,y:h}=of.fromLngLat(o);return!(c<0||c>25||h<0||h>=1||l<0||l>=1)},f.ct=function(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},f.cu=class extends rs{},f.cv=cO,f.cx=function(c){return c.message===wr},f.cy=oe,f.cz=function(c,o){X.REGISTERED_PROTOCOLS[c]=o},f.d=Fe,f.e=qt,f.f=c=>a(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(o)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.g=te,f.h=c=>new Promise((o,l)=>{const h=new Image;h.onload=()=>{o(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Lr})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(c)],{type:"image/png"});h.src=c.byteLength?URL.createObjectURL(g):Lr}),f.i=mr,f.j=(c,o)=>Ae(qt(c,{type:"json"}),o),f.k=$e,f.l=We,f.m=Ae,f.n=(c,o)=>Ae(qt(c,{type:"arrayBuffer"}),o),f.o=function(c){return new $x(c).readFields(z5,[])},f.p=NP,f.q=Wp,f.r=jo,f.s=br,f.t=$p,f.u=Tr,f.v=Me,f.w=Qt,f.x=cx,f.y=Uc,f.z=Ml}),u("worker",["./shared"],function(f){class a{constructor(X){this.keyCache={},X&&this.replace(X)}replace(X){this._layerConfigs={},this._layers={},this.update(X,[])}update(X,te){for(const oe of X){this._layerConfigs[oe.id]=oe;const xe=this._layers[oe.id]=f.bI(oe);xe._featureFilter=f.a9(xe.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of te)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const H=f.cB(Object.values(this._layerConfigs),this.keyCache);for(const oe of H){const xe=oe.map($e=>this._layers[$e.id]),Ae=xe[0];if(Ae.visibility==="none")continue;const Fe=Ae.source||"";let we=this.familiesBySource[Fe];we||(we=this.familiesBySource[Fe]={});const qe=Ae.sourceLayer||"_geojsonTileLayer";let We=we[qe];We||(We=we[qe]=[]),We.push(xe)}}}class b{constructor(X){const te={},H=[];for(const Fe in X){const we=X[Fe],qe=te[Fe]={};for(const We in we){const $e=we[+We];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;const nt={x:0,y:0,w:$e.bitmap.width+2,h:$e.bitmap.height+2};H.push(nt),qe[We]={rect:nt,metrics:$e.metrics}}}const{w:oe,h:xe}=f.p(H),Ae=new f.q({width:oe||1,height:xe||1});for(const Fe in X){const we=X[Fe];for(const qe in we){const We=we[+qe];if(!We||We.bitmap.width===0||We.bitmap.height===0)continue;const $e=te[Fe][qe].rect;f.q.copy(We.bitmap,Ae,{x:0,y:0},{x:$e.x+1,y:$e.y+1},We.bitmap)}}this.image=Ae,this.positions=te}}f.cC("GlyphAtlas",b);class C{constructor(X){this.tileID=new f.Z(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.uid=X.uid,this.zoom=X.zoom,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=X.showCollisionBoxes,this.collectResourceTiming=!!X.collectResourceTiming,this.returnDependencies=!!X.returnDependencies,this.promoteId=X.promoteId,this.inFlightDependencies=[],this.globalState=X.globalState}parse(X,te,H,oe,xe){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=X,this.collisionBoxArray=new f.a7;const Ae=new f.cD(Object.keys(X.layers).sort()),Fe=new f.cE(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];const we={},qe={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:H,subdivisionGranularity:xe},We=te.familiesBySource[this.source];for(const bt in We){const xt=X.layers[bt];if(!xt)continue;xt.version===1&&f.w(`Vector tile source "${this.source}" layer "${bt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bt=Ae.encode(bt),Je=[];for(let Xt=0;Xt<xt.length;Xt++){const zt=xt.feature(Xt),lr=Fe.getId(zt,bt);Je.push({feature:zt,id:lr,index:Xt,sourceLayerIndex:Bt})}for(const Xt of We[bt]){const zt=Xt[0];zt.source!==this.source&&f.w(`layer.source = ${zt.source} does not equal this.source = ${this.source}`),zt.minzoom&&this.zoom<Math.floor(zt.minzoom)||zt.maxzoom&&this.zoom>=zt.maxzoom||zt.visibility!=="none"&&(I(Xt,this.zoom,H),(we[zt.id]=zt.createBucket({index:Fe.bucketLayerIDs.length,layers:Xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bt,sourceID:this.source,globalState:this.globalState})).populate(Je,qe,this.tileID.canonical),Fe.bucketLayerIDs.push(Xt.map(lr=>lr.id)))}}const $e=f.bM(qe.glyphDependencies,bt=>Object.keys(bt).map(Number));this.inFlightDependencies.forEach(bt=>bt==null?void 0:bt.abort()),this.inFlightDependencies=[];let nt=Promise.resolve({});if(Object.keys($e).length){const bt=new AbortController;this.inFlightDependencies.push(bt),nt=oe.sendAsync({type:"GG",data:{stacks:$e,source:this.source,tileID:this.tileID,type:"glyphs"}},bt)}const Me=Object.keys(qe.iconDependencies);let mt=Promise.resolve({});if(Me.length){const bt=new AbortController;this.inFlightDependencies.push(bt),mt=oe.sendAsync({type:"GI",data:{icons:Me,source:this.source,tileID:this.tileID,type:"icons"}},bt)}const wt=Object.keys(qe.patternDependencies);let ge=Promise.resolve({});if(wt.length){const bt=new AbortController;this.inFlightDependencies.push(bt),ge=oe.sendAsync({type:"GI",data:{icons:wt,source:this.source,tileID:this.tileID,type:"patterns"}},bt)}const[Re,Ve,ut]=yield Promise.all([nt,mt,ge]),vt=new b(Re),It=new f.cF(Ve,ut);for(const bt in we){const xt=we[bt];xt instanceof f.a8?(I(xt.layers,this.zoom,H),f.cG({bucket:xt,glyphMap:Re,glyphPositions:vt.positions,imageMap:Ve,imagePositions:It.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:qe.subdivisionGranularity})):xt.hasPattern&&(xt instanceof f.cH||xt instanceof f.cI||xt instanceof f.cJ)&&(I(xt.layers,this.zoom,H),xt.addFeatures(qe,this.tileID.canonical,It.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(bt=>!bt.isEmpty()),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vt.image,imageAtlas:It,glyphMap:this.returnDependencies?Re:null,iconMap:this.returnDependencies?Ve:null,glyphPositions:this.returnDependencies?vt.positions:null}})}}function I(_e,X,te){const H=new f.F(X);for(const oe of _e)oe.recalculate(H,te)}class k{constructor(X,te,H){this.actor=X,this.layerIndex=te,this.availableImages=H,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(X,te){return f._(this,void 0,void 0,function*(){const H=yield f.n(X.request,te);try{return{vectorTile:new f.cK.VectorTile(new f.cL(H.data)),rawData:H.data,cacheControl:H.cacheControl,expires:H.expires}}catch(oe){const xe=new Uint8Array(H.data);let Ae=`Unable to parse the tile at ${X.request.url}, `;throw Ae+=xe[0]===31&&xe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${oe.message}`,new Error(Ae)}})}loadTile(X){return f._(this,void 0,void 0,function*(){const te=X.uid,H=!!(X&&X.request&&X.request.collectResourceTiming)&&new f.cM(X.request),oe=new C(X);this.loading[te]=oe;const xe=new AbortController;oe.abort=xe;try{const Ae=yield this.loadVectorTile(X,xe);if(delete this.loading[te],!Ae)return null;const Fe=Ae.rawData,we={};Ae.expires&&(we.expires=Ae.expires),Ae.cacheControl&&(we.cacheControl=Ae.cacheControl);const qe={};if(H){const $e=H.finish();$e&&(qe.resourceTiming=JSON.parse(JSON.stringify($e)))}oe.vectorTile=Ae.vectorTile;const We=oe.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,X.subdivisionGranularity);this.loaded[te]=oe,this.fetching[te]={rawTileData:Fe,cacheControl:we,resourceTiming:qe};try{const $e=yield We;return f.e({rawTileData:Fe.slice(0)},$e,we,qe)}finally{delete this.fetching[te]}}catch(Ae){throw delete this.loading[te],oe.status="done",this.loaded[te]=oe,Ae}})}reloadTile(X){return f._(this,void 0,void 0,function*(){const te=X.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const H=this.loaded[te];if(H.showCollisionBoxes=X.showCollisionBoxes,H.globalState=X.globalState,H.status==="parsing"){const oe=yield H.parse(H.vectorTile,this.layerIndex,this.availableImages,this.actor,X.subdivisionGranularity);let xe;if(this.fetching[te]){const{rawTileData:Ae,cacheControl:Fe,resourceTiming:we}=this.fetching[te];delete this.fetching[te],xe=f.e({rawTileData:Ae.slice(0)},oe,Fe,we)}else xe=oe;return xe}if(H.status==="done"&&H.vectorTile)return H.parse(H.vectorTile,this.layerIndex,this.availableImages,this.actor,X.subdivisionGranularity)})}abortTile(X){return f._(this,void 0,void 0,function*(){const te=this.loading,H=X.uid;te&&te[H]&&te[H].abort&&(te[H].abort.abort(),delete te[H])})}removeTile(X){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[X.uid]&&delete this.loaded[X.uid]})}}class M{constructor(){this.loaded={}}loadTile(X){return f._(this,void 0,void 0,function*(){const{uid:te,encoding:H,rawImageData:oe,redFactor:xe,greenFactor:Ae,blueFactor:Fe,baseShift:we}=X,qe=oe.width+2,We=oe.height+2,$e=f.b(oe)?new f.R({width:qe,height:We},yield f.cN(oe,-1,-1,qe,We)):oe,nt=new f.cO(te,$e,H,xe,Ae,Fe,we);return this.loaded=this.loaded||{},this.loaded[te]=nt,nt})}removeTile(X){const te=this.loaded,H=X.uid;te&&te[H]&&delete te[H]}}var R,$,G=function(){if($)return R;function _e(te,H){if(te.length!==0){X(te[0],H);for(var oe=1;oe<te.length;oe++)X(te[oe],!H)}}function X(te,H){for(var oe=0,xe=0,Ae=0,Fe=te.length,we=Fe-1;Ae<Fe;we=Ae++){var qe=(te[Ae][0]-te[we][0])*(te[we][1]+te[Ae][1]),We=oe+qe;xe+=Math.abs(oe)>=Math.abs(qe)?oe-We+qe:qe-We+oe,oe=We}oe+xe>=0!=!!H&&te.reverse()}return $=1,R=function te(H,oe){var xe,Ae=H&&H.type;if(Ae==="FeatureCollection")for(xe=0;xe<H.features.length;xe++)te(H.features[xe],oe);else if(Ae==="GeometryCollection")for(xe=0;xe<H.geometries.length;xe++)te(H.geometries[xe],oe);else if(Ae==="Feature")te(H.geometry,oe);else if(Ae==="Polygon")_e(H.coordinates,oe);else if(Ae==="MultiPolygon")for(xe=0;xe<H.coordinates.length;xe++)_e(H.coordinates[xe],oe);return H}}(),ee=f.cP(G);const F=f.cK.VectorTileFeature.prototype.toGeoJSON;class j{constructor(X){this._feature=X,this.extent=f.$,this.type=X.type,this.properties=X.tags,"id"in X&&!isNaN(X.id)&&(this.id=parseInt(X.id,10))}loadGeometry(){if(this._feature.type===1){const X=[];for(const te of this._feature.geometry)X.push([new f.P(te[0],te[1])]);return X}{const X=[];for(const te of this._feature.geometry){const H=[];for(const oe of te)H.push(new f.P(oe[0],oe[1]));X.push(H)}return X}}toGeoJSON(X,te,H){return F.call(this,X,te,H)}}class O{constructor(X){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.$,this.length=X.length,this._features=X}feature(X){return new j(this._features[X])}}var ne,Y,q,ce={exports:{}},he=function(){if(q)return ce.exports;q=1;var _e=f.cS(),X=function(){if(Y)return ne;Y=1;var We=f.cQ(),$e=f.cR().VectorTileFeature;function nt(mt,wt){this.options=wt||{},this.features=mt,this.length=mt.length}function Me(mt,wt){this.id=typeof mt.id=="number"?mt.id:void 0,this.type=mt.type,this.rawGeometry=mt.type===1?[mt.geometry]:mt.geometry,this.properties=mt.tags,this.extent=wt||4096}return ne=nt,nt.prototype.feature=function(mt){return new Me(this.features[mt],this.options.extent)},Me.prototype.loadGeometry=function(){var mt=this.rawGeometry;this.geometry=[];for(var wt=0;wt<mt.length;wt++){for(var ge=mt[wt],Re=[],Ve=0;Ve<ge.length;Ve++)Re.push(new We(ge[Ve][0],ge[Ve][1]));this.geometry.push(Re)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var mt=this.geometry,wt=1/0,ge=-1/0,Re=1/0,Ve=-1/0,ut=0;ut<mt.length;ut++)for(var vt=mt[ut],It=0;It<vt.length;It++){var bt=vt[It];wt=Math.min(wt,bt.x),ge=Math.max(ge,bt.x),Re=Math.min(Re,bt.y),Ve=Math.max(Ve,bt.y)}return[wt,Re,ge,Ve]},Me.prototype.toGeoJSON=$e.prototype.toGeoJSON,ne}();function te(We){var $e=new _e;return function(nt,Me){for(var mt in nt.layers)Me.writeMessage(3,H,nt.layers[mt])}(We,$e),$e.finish()}function H(We,$e){var nt;$e.writeVarintField(15,We.version||1),$e.writeStringField(1,We.name||""),$e.writeVarintField(5,We.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(nt=0;nt<We.length;nt++)Me.feature=We.feature(nt),$e.writeMessage(2,oe,Me);var mt=Me.keys;for(nt=0;nt<mt.length;nt++)$e.writeStringField(3,mt[nt]);var wt=Me.values;for(nt=0;nt<wt.length;nt++)$e.writeMessage(4,qe,wt[nt])}function oe(We,$e){var nt=We.feature;nt.id!==void 0&&$e.writeVarintField(1,nt.id),$e.writeMessage(2,xe,We),$e.writeVarintField(3,nt.type),$e.writeMessage(4,we,nt)}function xe(We,$e){var nt=We.feature,Me=We.keys,mt=We.values,wt=We.keycache,ge=We.valuecache;for(var Re in nt.properties){var Ve=nt.properties[Re],ut=wt[Re];if(Ve!==null){ut===void 0&&(Me.push(Re),wt[Re]=ut=Me.length-1),$e.writeVarint(ut);var vt=typeof Ve;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(Ve=JSON.stringify(Ve));var It=vt+":"+Ve,bt=ge[It];bt===void 0&&(mt.push(Ve),ge[It]=bt=mt.length-1),$e.writeVarint(bt)}}}function Ae(We,$e){return($e<<3)+(7&We)}function Fe(We){return We<<1^We>>31}function we(We,$e){for(var nt=We.loadGeometry(),Me=We.type,mt=0,wt=0,ge=nt.length,Re=0;Re<ge;Re++){var Ve=nt[Re],ut=1;Me===1&&(ut=Ve.length),$e.writeVarint(Ae(1,ut));for(var vt=Me===3?Ve.length-1:Ve.length,It=0;It<vt;It++){It===1&&Me!==1&&$e.writeVarint(Ae(2,vt-1));var bt=Ve[It].x-mt,xt=Ve[It].y-wt;$e.writeVarint(Fe(bt)),$e.writeVarint(Fe(xt)),mt+=bt,wt+=xt}Me===3&&$e.writeVarint(Ae(7,1))}}function qe(We,$e){var nt=typeof We;nt==="string"?$e.writeStringField(1,We):nt==="boolean"?$e.writeBooleanField(7,We):nt==="number"&&(We%1!=0?$e.writeDoubleField(3,We):We<0?$e.writeSVarintField(6,We):$e.writeVarintField(5,We))}return ce.exports=te,ce.exports.fromVectorTileJs=te,ce.exports.fromGeojsonVt=function(We,$e){$e=$e||{};var nt={};for(var Me in We)nt[Me]=new X(We[Me].features,$e),nt[Me].name=Me,nt[Me].version=$e.version,nt[Me].extent=$e.extent;return te({layers:nt})},ce.exports.GeoJSONWrapper=X,ce.exports}(),ze=f.cP(he);const J={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},Ee=Math.fround||(Be=new Float32Array(1),_e=>(Be[0]=+_e,Be[0]));var Be;class je{constructor(X){this.options=Object.assign(Object.create(J),X),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(X){const{log:te,minZoom:H,maxZoom:oe}=this.options;te&&console.time("total time");const xe=`prepare ${X.length} points`;te&&console.time(xe),this.points=X;const Ae=[];for(let we=0;we<X.length;we++){const qe=X[we];if(!qe.geometry)continue;const[We,$e]=qe.geometry.coordinates,nt=Ee(De(We)),Me=Ee(Ge($e));Ae.push(nt,Me,1/0,we,-1,1),this.options.reduce&&Ae.push(0)}let Fe=this.trees[oe+1]=this._createTree(Ae);te&&console.timeEnd(xe);for(let we=oe;we>=H;we--){const qe=+Date.now();Fe=this.trees[we]=this._createTree(this._cluster(Fe,we)),te&&console.log("z%d: %d clusters in %dms",we,Fe.numItems,+Date.now()-qe)}return te&&console.timeEnd("total time"),this}getClusters(X,te){let H=((X[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,X[1]));let xe=X[2]===180?180:((X[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)H=-180,xe=180;else if(H>xe){const $e=this.getClusters([H,oe,180,Ae],te),nt=this.getClusters([-180,oe,xe,Ae],te);return $e.concat(nt)}const Fe=this.trees[this._limitZoom(te)],we=Fe.range(De(H),Ge(Ae),De(xe),Ge(oe)),qe=Fe.data,We=[];for(const $e of we){const nt=this.stride*$e;We.push(qe[nt+5]>1?ot(qe,nt,this.clusterProps):this.points[qe[nt+3]])}return We}getChildren(X){const te=this._getOriginId(X),H=this._getOriginZoom(X),oe="No cluster with the specified id.",xe=this.trees[H];if(!xe)throw new Error(oe);const Ae=xe.data;if(te*this.stride>=Ae.length)throw new Error(oe);const Fe=this.options.radius/(this.options.extent*Math.pow(2,H-1)),we=xe.within(Ae[te*this.stride],Ae[te*this.stride+1],Fe),qe=[];for(const We of we){const $e=We*this.stride;Ae[$e+4]===X&&qe.push(Ae[$e+5]>1?ot(Ae,$e,this.clusterProps):this.points[Ae[$e+3]])}if(qe.length===0)throw new Error(oe);return qe}getLeaves(X,te,H){const oe=[];return this._appendLeaves(oe,X,te=te||10,H=H||0,0),oe}getTile(X,te,H){const oe=this.trees[this._limitZoom(X)],xe=Math.pow(2,X),{extent:Ae,radius:Fe}=this.options,we=Fe/Ae,qe=(H-we)/xe,We=(H+1+we)/xe,$e={features:[]};return this._addTileFeatures(oe.range((te-we)/xe,qe,(te+1+we)/xe,We),oe.data,te,H,xe,$e),te===0&&this._addTileFeatures(oe.range(1-we/xe,qe,1,We),oe.data,xe,H,xe,$e),te===xe-1&&this._addTileFeatures(oe.range(0,qe,we/xe,We),oe.data,-1,H,xe,$e),$e.features.length?$e:null}getClusterExpansionZoom(X){let te=this._getOriginZoom(X)-1;for(;te<=this.options.maxZoom;){const H=this.getChildren(X);if(te++,H.length!==1)break;X=H[0].properties.cluster_id}return te}_appendLeaves(X,te,H,oe,xe){const Ae=this.getChildren(te);for(const Fe of Ae){const we=Fe.properties;if(we&&we.cluster?xe+we.point_count<=oe?xe+=we.point_count:xe=this._appendLeaves(X,we.cluster_id,H,oe,xe):xe<oe?xe++:X.push(Fe),X.length===H)break}return xe}_createTree(X){const te=new f.aH(X.length/this.stride|0,this.options.nodeSize,Float32Array);for(let H=0;H<X.length;H+=this.stride)te.add(X[H],X[H+1]);return te.finish(),te.data=X,te}_addTileFeatures(X,te,H,oe,xe,Ae){for(const Fe of X){const we=Fe*this.stride,qe=te[we+5]>1;let We,$e,nt;if(qe)We=He(te,we,this.clusterProps),$e=te[we],nt=te[we+1];else{const wt=this.points[te[we+3]];We=wt.properties;const[ge,Re]=wt.geometry.coordinates;$e=De(ge),nt=Ge(Re)}const Me={type:1,geometry:[[Math.round(this.options.extent*($e*xe-H)),Math.round(this.options.extent*(nt*xe-oe))]],tags:We};let mt;mt=qe||this.options.generateId?te[we+3]:this.points[te[we+3]].id,mt!==void 0&&(Me.id=mt),Ae.features.push(Me)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,te){const{radius:H,extent:oe,reduce:xe,minPoints:Ae}=this.options,Fe=H/(oe*Math.pow(2,te)),we=X.data,qe=[],We=this.stride;for(let $e=0;$e<we.length;$e+=We){if(we[$e+2]<=te)continue;we[$e+2]=te;const nt=we[$e],Me=we[$e+1],mt=X.within(we[$e],we[$e+1],Fe),wt=we[$e+5];let ge=wt;for(const Re of mt){const Ve=Re*We;we[Ve+2]>te&&(ge+=we[Ve+5])}if(ge>wt&&ge>=Ae){let Re,Ve=nt*wt,ut=Me*wt,vt=-1;const It=($e/We<<5)+(te+1)+this.points.length;for(const bt of mt){const xt=bt*We;if(we[xt+2]<=te)continue;we[xt+2]=te;const Bt=we[xt+5];Ve+=we[xt]*Bt,ut+=we[xt+1]*Bt,we[xt+4]=It,xe&&(Re||(Re=this._map(we,$e,!0),vt=this.clusterProps.length,this.clusterProps.push(Re)),xe(Re,this._map(we,xt)))}we[$e+4]=It,qe.push(Ve/ge,ut/ge,1/0,It,-1,ge),xe&&qe.push(vt)}else{for(let Re=0;Re<We;Re++)qe.push(we[$e+Re]);if(ge>1)for(const Re of mt){const Ve=Re*We;if(!(we[Ve+2]<=te)){we[Ve+2]=te;for(let ut=0;ut<We;ut++)qe.push(we[Ve+ut])}}}}return qe}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,te,H){if(X[te+5]>1){const Ae=this.clusterProps[X[te+6]];return H?Object.assign({},Ae):Ae}const oe=this.points[X[te+3]].properties,xe=this.options.map(oe);return H&&xe===oe?Object.assign({},xe):xe}}function ot(_e,X,te){return{type:"Feature",id:_e[X+3],properties:He(_e,X,te),geometry:{type:"Point",coordinates:[(H=_e[X],360*(H-.5)),Ue(_e[X+1])]}};var H}function He(_e,X,te){const H=_e[X+5],oe=H>=1e4?`${Math.round(H/1e3)}k`:H>=1e3?Math.round(H/100)/10+"k":H,xe=_e[X+6],Ae=xe===-1?{}:Object.assign({},te[xe]);return Object.assign(Ae,{cluster:!0,cluster_id:_e[X+3],point_count:H,point_count_abbreviated:oe})}function De(_e){return _e/360+.5}function Ge(_e){const X=Math.sin(_e*Math.PI/180),te=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return te<0?0:te>1?1:te}function Ue(_e){const X=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function Ze(_e,X,te,H){let oe=H;const xe=X+(te-X>>1);let Ae,Fe=te-X;const we=_e[X],qe=_e[X+1],We=_e[te],$e=_e[te+1];for(let nt=X+3;nt<te;nt+=3){const Me=at(_e[nt],_e[nt+1],we,qe,We,$e);if(Me>oe)Ae=nt,oe=Me;else if(Me===oe){const mt=Math.abs(nt-xe);mt<Fe&&(Ae=nt,Fe=mt)}}oe>H&&(Ae-X>3&&Ze(_e,X,Ae,H),_e[Ae+2]=oe,te-Ae>3&&Ze(_e,Ae,te,H))}function at(_e,X,te,H,oe,xe){let Ae=oe-te,Fe=xe-H;if(Ae!==0||Fe!==0){const we=((_e-te)*Ae+(X-H)*Fe)/(Ae*Ae+Fe*Fe);we>1?(te=oe,H=xe):we>0&&(te+=Ae*we,H+=Fe*we)}return Ae=_e-te,Fe=X-H,Ae*Ae+Fe*Fe}function pt(_e,X,te,H){const oe={id:_e??null,type:X,geometry:te,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(X==="Point"||X==="MultiPoint"||X==="LineString")ct(oe,te);else if(X==="Polygon")ct(oe,te[0]);else if(X==="MultiLineString")for(const xe of te)ct(oe,xe);else if(X==="MultiPolygon")for(const xe of te)ct(oe,xe[0]);return oe}function ct(_e,X){for(let te=0;te<X.length;te+=3)_e.minX=Math.min(_e.minX,X[te]),_e.minY=Math.min(_e.minY,X[te+1]),_e.maxX=Math.max(_e.maxX,X[te]),_e.maxY=Math.max(_e.maxY,X[te+1])}function Ht(_e,X,te,H){if(!X.geometry)return;const oe=X.geometry.coordinates;if(oe&&oe.length===0)return;const xe=X.geometry.type,Ae=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let Fe=[],we=X.id;if(te.promoteId?we=X.properties[te.promoteId]:te.generateId&&(we=H||0),xe==="Point")Dt(oe,Fe);else if(xe==="MultiPoint")for(const qe of oe)Dt(qe,Fe);else if(xe==="LineString")Nt(oe,Fe,Ae,!1);else if(xe==="MultiLineString"){if(te.lineMetrics){for(const qe of oe)Fe=[],Nt(qe,Fe,Ae,!1),_e.push(pt(we,"LineString",Fe,X.properties));return}tr(oe,Fe,Ae,!1)}else if(xe==="Polygon")tr(oe,Fe,Ae,!0);else{if(xe!=="MultiPolygon"){if(xe==="GeometryCollection"){for(const qe of X.geometry.geometries)Ht(_e,{id:we,geometry:qe,properties:X.properties},te,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const qe of oe){const We=[];tr(qe,We,Ae,!0),Fe.push(We)}}_e.push(pt(we,xe,Fe,X.properties))}function Dt(_e,X){X.push(Tt(_e[0]),st(_e[1]),0)}function Nt(_e,X,te,H){let oe,xe,Ae=0;for(let we=0;we<_e.length;we++){const qe=Tt(_e[we][0]),We=st(_e[we][1]);X.push(qe,We,0),we>0&&(Ae+=H?(oe*We-qe*xe)/2:Math.sqrt(Math.pow(qe-oe,2)+Math.pow(We-xe,2))),oe=qe,xe=We}const Fe=X.length-3;X[2]=1,Ze(X,0,Fe,te),X[Fe+2]=1,X.size=Math.abs(Ae),X.start=0,X.end=X.size}function tr(_e,X,te,H){for(let oe=0;oe<_e.length;oe++){const xe=[];Nt(_e[oe],xe,te,H),X.push(xe)}}function Tt(_e){return _e/360+.5}function st(_e){const X=Math.sin(_e*Math.PI/180),te=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return te<0?0:te>1?1:te}function Ct(_e,X,te,H,oe,xe,Ae,Fe){if(H/=X,xe>=(te/=X)&&Ae<H)return _e;if(Ae<te||xe>=H)return null;const we=[];for(const qe of _e){const We=qe.geometry;let $e=qe.type;const nt=oe===0?qe.minX:qe.minY,Me=oe===0?qe.maxX:qe.maxY;if(nt>=te&&Me<H){we.push(qe);continue}if(Me<te||nt>=H)continue;let mt=[];if($e==="Point"||$e==="MultiPoint")Mt(We,mt,te,H,oe);else if($e==="LineString")qt(We,mt,te,H,oe,!1,Fe.lineMetrics);else if($e==="MultiLineString")ur(We,mt,te,H,oe,!1);else if($e==="Polygon")ur(We,mt,te,H,oe,!0);else if($e==="MultiPolygon")for(const wt of We){const ge=[];ur(wt,ge,te,H,oe,!0),ge.length&&mt.push(ge)}if(mt.length){if(Fe.lineMetrics&&$e==="LineString"){for(const wt of mt)we.push(pt(qe.id,$e,wt,qe.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(mt.length===1?($e="LineString",mt=mt[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=mt.length===3?"Point":"MultiPoint"),we.push(pt(qe.id,$e,mt,qe.tags))}}return we.length?we:null}function Mt(_e,X,te,H,oe){for(let xe=0;xe<_e.length;xe+=3){const Ae=_e[xe+oe];Ae>=te&&Ae<=H&&gr(X,_e[xe],_e[xe+1],_e[xe+2])}}function qt(_e,X,te,H,oe,xe,Ae){let Fe=nr(_e);const we=oe===0?Kt:Lt;let qe,We,$e=_e.start;for(let ge=0;ge<_e.length-3;ge+=3){const Re=_e[ge],Ve=_e[ge+1],ut=_e[ge+2],vt=_e[ge+3],It=_e[ge+4],bt=oe===0?Re:Ve,xt=oe===0?vt:It;let Bt=!1;Ae&&(qe=Math.sqrt(Math.pow(Re-vt,2)+Math.pow(Ve-It,2))),bt<te?xt>te&&(We=we(Fe,Re,Ve,vt,It,te),Ae&&(Fe.start=$e+qe*We)):bt>H?xt<H&&(We=we(Fe,Re,Ve,vt,It,H),Ae&&(Fe.start=$e+qe*We)):gr(Fe,Re,Ve,ut),xt<te&&bt>=te&&(We=we(Fe,Re,Ve,vt,It,te),Bt=!0),xt>H&&bt<=H&&(We=we(Fe,Re,Ve,vt,It,H),Bt=!0),!xe&&Bt&&(Ae&&(Fe.end=$e+qe*We),X.push(Fe),Fe=nr(_e)),Ae&&($e+=qe)}let nt=_e.length-3;const Me=_e[nt],mt=_e[nt+1],wt=oe===0?Me:mt;wt>=te&&wt<=H&&gr(Fe,Me,mt,_e[nt+2]),nt=Fe.length-3,xe&&nt>=3&&(Fe[nt]!==Fe[0]||Fe[nt+1]!==Fe[1])&&gr(Fe,Fe[0],Fe[1],Fe[2]),Fe.length&&X.push(Fe)}function nr(_e){const X=[];return X.size=_e.size,X.start=_e.start,X.end=_e.end,X}function ur(_e,X,te,H,oe,xe){for(const Ae of _e)qt(Ae,X,te,H,oe,xe,!1)}function gr(_e,X,te,H){_e.push(X,te,H)}function Kt(_e,X,te,H,oe,xe){const Ae=(xe-X)/(H-X);return gr(_e,xe,te+(oe-te)*Ae,1),Ae}function Lt(_e,X,te,H,oe,xe){const Ae=(xe-te)/(oe-te);return gr(_e,X+(H-X)*Ae,xe,1),Ae}function Qt(_e,X){const te=[];for(let H=0;H<_e.length;H++){const oe=_e[H],xe=oe.type;let Ae;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Ae=Vt(oe.geometry,X);else if(xe==="MultiLineString"||xe==="Polygon"){Ae=[];for(const Fe of oe.geometry)Ae.push(Vt(Fe,X))}else if(xe==="MultiPolygon"){Ae=[];for(const Fe of oe.geometry){const we=[];for(const qe of Fe)we.push(Vt(qe,X));Ae.push(we)}}te.push(pt(oe.id,xe,Ae,oe.tags))}return te}function Vt(_e,X){const te=[];te.size=_e.size,_e.start!==void 0&&(te.start=_e.start,te.end=_e.end);for(let H=0;H<_e.length;H+=3)te.push(_e[H]+X,_e[H+1],_e[H+2]);return te}function mr(_e,X){if(_e.transformed)return _e;const te=1<<_e.z,H=_e.x,oe=_e.y;for(const xe of _e.features){const Ae=xe.geometry,Fe=xe.type;if(xe.geometry=[],Fe===1)for(let we=0;we<Ae.length;we+=2)xe.geometry.push(kr(Ae[we],Ae[we+1],X,te,H,oe));else for(let we=0;we<Ae.length;we++){const qe=[];for(let We=0;We<Ae[we].length;We+=2)qe.push(kr(Ae[we][We],Ae[we][We+1],X,te,H,oe));xe.geometry.push(qe)}}return _e.transformed=!0,_e}function kr(_e,X,te,H,oe,xe){return[Math.round(te*(_e*H-oe)),Math.round(te*(X*H-xe))]}function Ur(_e,X,te,H,oe){const xe=X===oe.maxZoom?0:oe.tolerance/((1<<X)*oe.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:_e.length,source:null,x:te,y:H,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Fe of _e)Lr(Ae,Fe,xe,oe);return Ae}function Lr(_e,X,te,H){const oe=X.geometry,xe=X.type,Ae=[];if(_e.minX=Math.min(_e.minX,X.minX),_e.minY=Math.min(_e.minY,X.minY),_e.maxX=Math.max(_e.maxX,X.maxX),_e.maxY=Math.max(_e.maxY,X.maxY),xe==="Point"||xe==="MultiPoint")for(let Fe=0;Fe<oe.length;Fe+=3)Ae.push(oe[Fe],oe[Fe+1]),_e.numPoints++,_e.numSimplified++;else if(xe==="LineString")pr(Ae,oe,_e,te,!1,!1);else if(xe==="MultiLineString"||xe==="Polygon")for(let Fe=0;Fe<oe.length;Fe++)pr(Ae,oe[Fe],_e,te,xe==="Polygon",Fe===0);else if(xe==="MultiPolygon")for(let Fe=0;Fe<oe.length;Fe++){const we=oe[Fe];for(let qe=0;qe<we.length;qe++)pr(Ae,we[qe],_e,te,!0,qe===0)}if(Ae.length){let Fe=X.tags||null;if(xe==="LineString"&&H.lineMetrics){Fe={};for(const qe in X.tags)Fe[qe]=X.tags[qe];Fe.mapbox_clip_start=oe.start/oe.size,Fe.mapbox_clip_end=oe.end/oe.size}const we={geometry:Ae,type:xe==="Polygon"||xe==="MultiPolygon"?3:xe==="LineString"||xe==="MultiLineString"?2:1,tags:Fe};X.id!==null&&(we.id=X.id),_e.features.push(we)}}function pr(_e,X,te,H,oe,xe){const Ae=H*H;if(H>0&&X.size<(oe?Ae:H))return void(te.numPoints+=X.length/3);const Fe=[];for(let we=0;we<X.length;we+=3)(H===0||X[we+2]>Ae)&&(te.numSimplified++,Fe.push(X[we],X[we+1])),te.numPoints++;oe&&function(we,qe){let We=0;for(let $e=0,nt=we.length,Me=nt-2;$e<nt;Me=$e,$e+=2)We+=(we[$e]-we[Me])*(we[$e+1]+we[Me+1]);if(We>0===qe)for(let $e=0,nt=we.length;$e<nt/2;$e+=2){const Me=we[$e],mt=we[$e+1];we[$e]=we[nt-2-$e],we[$e+1]=we[nt-1-$e],we[nt-2-$e]=Me,we[nt-1-$e]=mt}}(Fe,xe),_e.push(Fe)}const $r={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class jr{constructor(X,te){const H=(te=this.options=function(xe,Ae){for(const Fe in Ae)xe[Fe]=Ae[Fe];return xe}(Object.create($r),te)).debug;if(H&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let oe=function(xe,Ae){const Fe=[];if(xe.type==="FeatureCollection")for(let we=0;we<xe.features.length;we++)Ht(Fe,xe.features[we],Ae,we);else Ht(Fe,xe.type==="Feature"?xe:{geometry:xe},Ae);return Fe}(X,te);this.tiles={},this.tileCoords=[],H&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(xe,Ae){const Fe=Ae.buffer/Ae.extent;let we=xe;const qe=Ct(xe,1,-1-Fe,Fe,0,-1,2,Ae),We=Ct(xe,1,1-Fe,2+Fe,0,-1,2,Ae);return(qe||We)&&(we=Ct(xe,1,-Fe,1+Fe,0,-1,2,Ae)||[],qe&&(we=Qt(qe,1).concat(we)),We&&(we=we.concat(Qt(We,-1)))),we}(oe,te),oe.length&&this.splitTile(oe,0,0,0),H&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(X,te,H,oe,xe,Ae,Fe){const we=[X,te,H,oe],qe=this.options,We=qe.debug;for(;we.length;){oe=we.pop(),H=we.pop(),te=we.pop(),X=we.pop();const $e=1<<te,nt=br(te,H,oe);let Me=this.tiles[nt];if(!Me&&(We>1&&console.time("creation"),Me=this.tiles[nt]=Ur(X,te,H,oe,qe),this.tileCoords.push({z:te,x:H,y:oe}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,H,oe,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));const Bt=`z${te}`;this.stats[Bt]=(this.stats[Bt]||0)+1,this.total++}if(Me.source=X,xe==null){if(te===qe.indexMaxZoom||Me.numPoints<=qe.indexMaxPoints)continue}else{if(te===qe.maxZoom||te===xe)continue;if(xe!=null){const Bt=xe-te;if(H!==Ae>>Bt||oe!==Fe>>Bt)continue}}if(Me.source=null,X.length===0)continue;We>1&&console.time("clipping");const mt=.5*qe.buffer/qe.extent,wt=.5-mt,ge=.5+mt,Re=1+mt;let Ve=null,ut=null,vt=null,It=null,bt=Ct(X,$e,H-mt,H+ge,0,Me.minX,Me.maxX,qe),xt=Ct(X,$e,H+wt,H+Re,0,Me.minX,Me.maxX,qe);X=null,bt&&(Ve=Ct(bt,$e,oe-mt,oe+ge,1,Me.minY,Me.maxY,qe),ut=Ct(bt,$e,oe+wt,oe+Re,1,Me.minY,Me.maxY,qe),bt=null),xt&&(vt=Ct(xt,$e,oe-mt,oe+ge,1,Me.minY,Me.maxY,qe),It=Ct(xt,$e,oe+wt,oe+Re,1,Me.minY,Me.maxY,qe),xt=null),We>1&&console.timeEnd("clipping"),we.push(Ve||[],te+1,2*H,2*oe),we.push(ut||[],te+1,2*H,2*oe+1),we.push(vt||[],te+1,2*H+1,2*oe),we.push(It||[],te+1,2*H+1,2*oe+1)}}getTile(X,te,H){X=+X,te=+te,H=+H;const oe=this.options,{extent:xe,debug:Ae}=oe;if(X<0||X>24)return null;const Fe=1<<X,we=br(X,te=te+Fe&Fe-1,H);if(this.tiles[we])return mr(this.tiles[we],xe);Ae>1&&console.log("drilling down to z%d-%d-%d",X,te,H);let qe,We=X,$e=te,nt=H;for(;!qe&&We>0;)We--,$e>>=1,nt>>=1,qe=this.tiles[br(We,$e,nt)];return qe&&qe.source?(Ae>1&&(console.log("found parent tile z%d-%d-%d",We,$e,nt),console.time("drilling down")),this.splitTile(qe.source,We,$e,nt,X,te,H),Ae>1&&console.timeEnd("drilling down"),this.tiles[we]?mr(this.tiles[we],xe):null):null}}function br(_e,X,te){return 32*((1<<_e)*te+X)+_e}function dr(_e,X){return X?_e.properties[X]:_e.id}function ar(_e,X){if(_e==null)return!0;if(_e.type==="Feature")return dr(_e,X)!=null;if(_e.type==="FeatureCollection"){const te=new Set;for(const H of _e.features){const oe=dr(H,X);if(oe==null||te.has(oe))return!1;te.add(oe)}return!0}return!1}function Jt(_e,X){const te=new Map;if(_e!=null)if(_e.type==="Feature")te.set(dr(_e,X),_e);else for(const H of _e.features)te.set(dr(H,X),H);return te}class yr extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(X,te){return f._(this,void 0,void 0,function*(){const H=X.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const oe=this._geoJSONIndex.getTile(H.z,H.x,H.y);if(!oe)return null;const xe=new O(oe.features);let Ae=ze(xe);return Ae.byteOffset===0&&Ae.byteLength===Ae.buffer.byteLength||(Ae=new Uint8Array(Ae)),{vectorTile:xe,rawData:Ae.buffer}})}loadData(X){return f._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const H=!!(X&&X.request&&X.request.collectResourceTiming)&&new f.cM(X.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(X,this._pendingRequest),this._geoJSONIndex=X.cluster?new je(function({superclusterOptions:Ae,clusterProperties:Fe}){if(!Fe||!Ae)return Ae;const we={},qe={},We={accumulated:null,zoom:0},$e={properties:null},nt=Object.keys(Fe);for(const Me of nt){const[mt,wt]=Fe[Me],ge=f.cT(wt),Re=f.cT(typeof mt=="string"?[mt,["accumulated"],["get",Me]]:mt);we[Me]=ge.value,qe[Me]=Re.value}return Ae.map=Me=>{$e.properties=Me;const mt={};for(const wt of nt)mt[wt]=we[wt].evaluate(We,$e);return mt},Ae.reduce=(Me,mt)=>{$e.properties=mt;for(const wt of nt)We.accumulated=Me[wt],Me[wt]=qe[wt].evaluate(We,$e)},Ae}(X)).load((yield this._pendingData).features):(oe=yield this._pendingData,new jr(oe,X.geojsonVtOptions)),this.loaded={};const xe={};if(H){const Ae=H.finish();Ae&&(xe.resourceTiming={},xe.resourceTiming[X.source]=JSON.parse(JSON.stringify(Ae)))}return xe}catch(xe){if(delete this._pendingRequest,f.cx(xe))return{abandoned:!0};throw xe}var oe})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(X){const te=this.loaded;return te&&te[X.uid]?super.reloadTile(X):this.loadTile(X)}loadAndProcessGeoJSON(X,te){return f._(this,void 0,void 0,function*(){let H=yield this.loadGeoJSON(X,te);if(delete this._pendingRequest,typeof H!="object")throw new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`);if(ee(H,!0),X.filter){const oe=f.cT(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));H={type:"FeatureCollection",features:H.features.filter(Ae=>oe.value.evaluate({zoom:0},Ae))}}return H})}loadGeoJSON(X,te){return f._(this,void 0,void 0,function*(){const{promoteId:H}=X;if(X.request){const oe=yield f.j(X.request,te);return this._dataUpdateable=ar(oe.data,H)?Jt(oe.data,H):void 0,oe.data}if(typeof X.data=="string")try{const oe=JSON.parse(X.data);return this._dataUpdateable=ar(oe,H)?Jt(oe,H):void 0,oe}catch{throw new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`)}if(!X.dataDiff)throw new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${X.source}`);return function(oe,xe,Ae){var Fe,we,qe,We;if(xe.removeAll&&oe.clear(),xe.remove)for(const $e of xe.remove)oe.delete($e);if(xe.add)for(const $e of xe.add){const nt=dr($e,Ae);nt!=null&&oe.set(nt,$e)}if(xe.update)for(const $e of xe.update){let nt=oe.get($e.id);if(nt==null)continue;const Me=!$e.removeAllProperties&&(((Fe=$e.removeProperties)===null||Fe===void 0?void 0:Fe.length)>0||((we=$e.addOrUpdateProperties)===null||we===void 0?void 0:we.length)>0);if(($e.newGeometry||$e.removeAllProperties||Me)&&(nt=Object.assign({},nt),oe.set($e.id,nt),Me&&(nt.properties=Object.assign({},nt.properties))),$e.newGeometry&&(nt.geometry=$e.newGeometry),$e.removeAllProperties)nt.properties={};else if(((qe=$e.removeProperties)===null||qe===void 0?void 0:qe.length)>0)for(const mt of $e.removeProperties)Object.prototype.hasOwnProperty.call(nt.properties,mt)&&delete nt.properties[mt];if(((We=$e.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0)for(const{key:mt,value:wt}of $e.addOrUpdateProperties)nt.properties[mt]=wt}}(this._dataUpdateable,X.dataDiff,H),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(X){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(X){return this._geoJSONIndex.getClusterExpansionZoom(X.clusterId)}getClusterChildren(X){return this._geoJSONIndex.getChildren(X.clusterId)}getClusterLeaves(X){return this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset)}}class wr{constructor(X){this.self=X,this.actor=new f.J(X),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,H)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=H},this.self.addProtocol=f.cz,this.self.removeProtocol=f.cA,this.self.registerRTLTextPlugin=te=>{f.cU.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,H)=>this._getDEMWorkerSource(te,H.source).loadTile(H)),this.actor.registerMessageHandler("RDT",(te,H)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,H.source).removeTile(H)})),this.actor.registerMessageHandler("GCEZ",(te,H)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(te,H.type,H.source).getClusterExpansionZoom(H)})),this.actor.registerMessageHandler("GCC",(te,H)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(te,H.type,H.source).getClusterChildren(H)})),this.actor.registerMessageHandler("GCL",(te,H)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(te,H.type,H.source).getClusterLeaves(H)})),this.actor.registerMessageHandler("LD",(te,H)=>this._getWorkerSource(te,H.type,H.source).loadData(H)),this.actor.registerMessageHandler("GD",(te,H)=>this._getWorkerSource(te,H.type,H.source).getData()),this.actor.registerMessageHandler("LT",(te,H)=>this._getWorkerSource(te,H.type,H.source).loadTile(H)),this.actor.registerMessageHandler("RT",(te,H)=>this._getWorkerSource(te,H.type,H.source).reloadTile(H)),this.actor.registerMessageHandler("AT",(te,H)=>this._getWorkerSource(te,H.type,H.source).abortTile(H)),this.actor.registerMessageHandler("RMT",(te,H)=>this._getWorkerSource(te,H.type,H.source).removeTile(H)),this.actor.registerMessageHandler("RS",(te,H)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][H.type]||!this.workerSources[te][H.type][H.source])return;const oe=this.workerSources[te][H.type][H.source];delete this.workerSources[te][H.type][H.source],oe.removeSource!==void 0&&oe.removeSource(H)})),this.actor.registerMessageHandler("RM",te=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,H)=>f._(this,void 0,void 0,function*(){this.referrer=H})),this.actor.registerMessageHandler("SRPS",(te,H)=>this._syncRTLPluginState(te,H)),this.actor.registerMessageHandler("IS",(te,H)=>f._(this,void 0,void 0,function*(){this.self.importScripts(H)})),this.actor.registerMessageHandler("SI",(te,H)=>this._setImages(te,H)),this.actor.registerMessageHandler("UL",(te,H)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(H.layers,H.removedIds)})),this.actor.registerMessageHandler("SL",(te,H)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(H)}))}_setImages(X,te){return f._(this,void 0,void 0,function*(){this.availableImages[X]=te;for(const H in this.workerSources[X]){const oe=this.workerSources[X][H];for(const xe in oe)oe[xe].availableImages=te}})}_syncRTLPluginState(X,te){return f._(this,void 0,void 0,function*(){return yield f.cU.syncState(te,this.self.importScripts)})}_getAvailableImages(X){let te=this.availableImages[X];return te||(te=[]),te}_getLayerIndex(X){let te=this.layerIndexes[X];return te||(te=this.layerIndexes[X]=new a),te}_getWorkerSource(X,te,H){if(this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][te]||(this.workerSources[X][te]={}),!this.workerSources[X][te][H]){const oe={sendAsync:(xe,Ae)=>(xe.targetMapId=X,this.actor.sendAsync(xe,Ae))};switch(te){case"vector":this.workerSources[X][te][H]=new k(oe,this._getLayerIndex(X),this._getAvailableImages(X));break;case"geojson":this.workerSources[X][te][H]=new yr(oe,this._getLayerIndex(X),this._getAvailableImages(X));break;default:this.workerSources[X][te][H]=new this.externalWorkerSourceTypes[te](oe,this._getLayerIndex(X),this._getAvailableImages(X))}}return this.workerSources[X][te][H]}_getDEMWorkerSource(X,te){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][te]||(this.demWorkerSources[X][te]=new M),this.demWorkerSources[X][te]}}return f.i(self)&&(self.worker=new wr(self)),wr}),u("index",["exports","./shared"],function(f,a){var b="5.6.1";function C(){var y=new a.A(4);return a.A!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}let I,k;const M={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(y,r,s){const p=requestAnimationFrame(v=>{m(),r(v)}),{unsubscribe:m}=a.s(y.signal,"abort",()=>{m(),cancelAnimationFrame(p),s(a.c())},!1)},frameAsync(y){return new Promise((r,s)=>{this.frame(y,r,s)})},getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,s.drawImage(y,0,0,y.width,y.height),s},resolveURL:y=>(I||(I=document.createElement("a")),I.href=y,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class R{static testProp(r){if(!R.docStyle)return r[0];for(let s=0;s<r.length;s++)if(r[s]in R.docStyle)return r[s];return r[0]}static create(r,s,p){const m=window.document.createElement(r);return s!==void 0&&(m.className=s),p&&p.appendChild(m),m}static createNS(r,s){return window.document.createElementNS(r,s)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(r,s){r.style[R.transformProp]=s}static addEventListener(r,s,p,m={}){r.addEventListener(s,p,"passive"in m?m:m.capture)}static removeEventListener(r,s,p,m={}){r.removeEventListener(s,p,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",R.suppressClickInternal,!0)},0)}static getScale(r){const s=r.getBoundingClientRect();return{x:s.width/r.offsetWidth||1,y:s.height/r.offsetHeight||1,boundingClientRect:s}}static getPoint(r,s,p){const m=s.boundingClientRect;return new a.P((p.clientX-m.left)/s.x-r.clientLeft,(p.clientY-m.top)/s.y-r.clientTop)}static mousePos(r,s){const p=R.getScale(r);return R.getPoint(r,p,s)}static touchPos(r,s){const p=[],m=R.getScale(r);for(let v=0;v<s.length;v++)p.push(R.getPoint(r,m,s[v]));return p}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const s=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),p=s.querySelectorAll("script");for(const m of p)m.remove();return R.clean(s),s.innerHTML}static isPossiblyDangerous(r,s){const p=s.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!p.includes("javascript:")&&!p.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const s=r.children;for(const p of s)R.removeAttributes(p),R.clean(p)}static removeAttributes(r){for(const{name:s,value:p}of r.attributes)R.isPossiblyDangerous(s,p)&&r.removeAttribute(s)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);const $={supported:!1,testSupport:function(y){!F&&ee&&(j?O(y):G=y)}};let G,ee,F=!1,j=!1;function O(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,ee),y.isContextLost())return;$.supported=!0}catch{}y.deleteTexture(r),F=!0}var ne;typeof document<"u"&&(ee=document.createElement("img"),ee.onload=()=>{G&&O(G),G=null,j=!0},ee.onerror=()=>{F=!0,G=null},ee.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,s,p,m;y.resetRequestQueue=()=>{r=[],s=0,p=0,m={}},y.addThrottleControl=E=>{const z=p++;return m[z]=E,z},y.removeThrottleControl=E=>{delete m[E],w()},y.getImage=(E,z,B=!0)=>new Promise((U,V)=>{$.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),a.e(E,{type:"image"}),r.push({abortController:z,requestParameters:E,supportImageRefresh:B,state:"queued",onError:Z=>{V(Z)},onSuccess:Z=>{U(Z)}}),w()});const v=E=>a._(this,void 0,void 0,function*(){E.state="running";const{requestParameters:z,supportImageRefresh:B,onError:U,onSuccess:V,abortController:Z}=E,ie=B===!1&&!a.i(self)&&!a.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((me,ve)=>me&&ve==="accept",!0));s++;const fe=ie?P(z,Z):a.m(z,Z);try{const me=yield fe;delete E.abortController,E.state="completed",me.data instanceof HTMLImageElement||a.b(me.data)?V(me):me.data&&V({data:yield(pe=me.data,typeof createImageBitmap=="function"?a.f(pe):a.h(pe)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete E.abortController,U(me)}finally{s--,w()}var pe}),w=()=>{const E=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=s;z<E&&r.length>0;z++){const B=r.shift();B.abortController.signal.aborted?z--:v(B)}},P=(E,z)=>new Promise((B,U)=>{const V=new Image,Z=E.url,ie=E.credentials;ie&&ie==="include"?V.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!a.d(Z))&&(V.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{V.src="",U(a.c())}),V.fetchPriority="high",V.onload=()=>{V.onerror=V.onload=null,B({data:V})},V.onerror=()=>{V.onerror=V.onload=null,z.signal.aborted||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},V.src=Z})}(ne||(ne={})),ne.resetRequestQueue();class Y{constructor(r){this._transformRequestFn=r}transformRequest(r,s){return this._transformRequestFn&&this._transformRequestFn(r,s)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function q(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const s=[];for(const{id:p,url:m}of y){const v=`${p}${m}`;s.indexOf(v)===-1&&(s.push(v),r.push({id:p,url:m}))}}return r}function ce(y,r,s){try{const p=new URL(y);return p.pathname+=`${r}${s}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${y}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function he(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class ze extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:s,promiseResolve:p}of this.requestors)p(this._getImagesForIds(s));this.requestors=[]}}getImage(r){const s=this.images[r];if(s&&!s.data&&s.spriteData){const p=s.spriteData;s.data=new a.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),s.spriteData=null}return s}addImage(r,s){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,s)&&(this.images[r]=s)}_validate(r,s){let p=!0;const m=s.data||s.spriteData;return this._validateStretch(s.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),p=!1),this._validateStretch(s.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),p=!1),this._validateContent(s.content,s)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),p=!1),p}_validateStretch(r,s){if(!r)return!0;let p=0;for(const m of r){if(m[0]<p||m[1]<m[0]||s<m[1])return!1;p=m[1]}return!0}_validateContent(r,s){if(!r)return!0;if(r.length!==4)return!1;const p=s.spriteData,m=p&&p.width||s.data.width,v=p&&p.height||s.data.height;return!(r[0]<0||m<r[0]||r[1]<0||v<r[1]||r[2]<0||m<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,s,p=!0){const m=this.getImage(r);if(p&&(m.data.width!==s.data.width||m.data.height!==s.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=m.version+1,this.images[r]=s,this.updatedImages[r]=!0}removeImage(r){const s=this.images[r];delete this.images[r],delete this.patterns[r],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((s,p)=>{let m=!0;if(!this.isLoaded())for(const v of r)this.images[v]||(m=!1);this.isLoaded()||m?s(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:s})})}_getImagesForIds(r){const s={};for(const p of r){let m=this.getImage(p);m||(this.fire(new a.l("styleimagemissing",{id:p})),m=this.getImage(p)),m?s[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){const{width:r,height:s}=this.atlasImage;return{width:r,height:s}}getPattern(r){const s=this.patterns[r],p=this.getImage(r);if(!p)return null;if(s&&s.position.version===p.version)return s.position;if(s)s.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},v=new a.I(m,p);this.patterns[r]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const s=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(r,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:s,h:p}=a.p(r),m=this.atlasImage;m.resize({width:s||1,height:p||1});for(const v in this.patterns){const{bin:w}=this.patterns[v],P=w.x+1,E=w.y+1,z=this.getImage(v).data,B=z.width,U=z.height;a.R.copy(z,m,{x:0,y:0},{x:P,y:E},{width:B,height:U}),a.R.copy(z,m,{x:0,y:U-1},{x:P,y:E-1},{width:B,height:1}),a.R.copy(z,m,{x:0,y:0},{x:P,y:E+U},{width:B,height:1}),a.R.copy(z,m,{x:B-1,y:0},{x:P-1,y:E},{width:1,height:U}),a.R.copy(z,m,{x:0,y:0},{x:P+B,y:E},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const s of r){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const p=this.getImage(s);p||a.w(`Image with ID: "${s}" was not found`),he(p)&&this.updateImage(s,p)}}}const J=1e20;function Ee(y,r,s,p,m,v,w,P,E){for(let z=r;z<r+p;z++)Be(y,s*v+z,v,m,w,P,E);for(let z=s;z<s+m;z++)Be(y,z*v+r,1,p,w,P,E)}function Be(y,r,s,p,m,v,w){v[0]=0,w[0]=-J,w[1]=J,m[0]=y[r];for(let P=1,E=0,z=0;P<p;P++){m[P]=y[r+P*s];const B=P*P;do{const U=v[E];z=(m[P]-m[U]+B-U*U)/(P-U)/2}while(z<=w[E]&&--E>-1);E++,v[E]=P,w[E]=z,w[E+1]=J}for(let P=0,E=0;P<p;P++){for(;w[E+1]<P;)E++;const z=v[E],B=P-z;y[r+P*s]=m[z]+B*B}}class je{constructor(r,s){this.requestManager=r,this.localIdeographFontFamily=s,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,function*(){const s=[];for(const v in r)for(const w of r[v])s.push(this._getAndCacheGlyphsPromise(v,w));const p=yield Promise.all(s),m={};for(const{stack:v,id:w,glyph:P}of p)m[v]||(m[v]={}),m[v][w]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return m})}_getAndCacheGlyphsPromise(r,s){return a._(this,void 0,void 0,function*(){let p=this.entries[r];p||(p=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[s];if(m!==void 0)return{stack:r,id:s,glyph:m};if(m=this._tinySDF(p,r,s),m)return p.glyphs[s]=m,{stack:r,id:s,glyph:m};const v=Math.floor(s/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[v])return{stack:r,id:s,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[v]){const P=je.loadGlyphRange(r,v,this.url,this.requestManager);p.requests[v]=P}const w=yield p.requests[v];for(const P in w)this._doesCharSupportLocalGlyph(+P)||(p.glyphs[+P]=w[+P]);return p.ranges[v]=!0,{stack:r,id:s,glyph:w[s]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||a.u["CJK Unified Ideographs"](r)||a.u["Hangul Syllables"](r)||a.u.Hiragana(r)||a.u.Katakana(r)||a.u["CJK Symbols and Punctuation"](r)||a.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,s,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let v=r.tinySDF;if(!v){let P="400";/bold/i.test(s)?P="900":/medium/i.test(s)?P="500":/light/i.test(s)&&(P="200"),v=r.tinySDF=new je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:P})}const w=v.draw(String.fromCharCode(p));return{id:p,bitmap:new a.q({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}je.loadGlyphRange=function(y,r,s,p){return a._(this,void 0,void 0,function*(){const m=256*r,v=m+255,w=p.transformRequest(s.replace("{fontstack}",y).replace("{range}",`${m}-${v}`),"Glyphs"),P=yield a.n(w,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${v}`);const E={};for(const z of a.o(P.data))E[z.id]=z;return E})},je.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:s=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=p,this.radius=s;const P=this.size=y+4*r,E=this._createCanvas(P),z=this.ctx=E.getContext("2d",{willReadFrequently:!0});z.font=`${w} ${v} ${y}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(y),w=Math.ceil(s),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),E=Math.min(this.size-this.buffer,w+Math.ceil(p)),z=P+2*this.buffer,B=E+2*this.buffer,U=Math.max(z*B,0),V=new Uint8ClampedArray(U),Z={data:V,width:z,height:B,glyphWidth:P,glyphHeight:E,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(P===0||E===0)return Z;const{ctx:ie,buffer:fe,gridInner:pe,gridOuter:me}=this;ie.clearRect(fe,fe,P,E),ie.fillText(y,fe,fe+w);const ve=ie.getImageData(fe,fe,P,E);me.fill(J,0,U),pe.fill(0,0,U);for(let Ce=0;Ce<E;Ce++)for(let be=0;be<P;be++){const ke=ve.data[4*(Ce*P+be)+3]/255;if(ke===0)continue;const Le=(Ce+fe)*z+be+fe;if(ke===1)me[Le]=0,pe[Le]=J;else{const Se=.5-ke;me[Le]=Se>0?Se*Se:0,pe[Le]=Se<0?Se*Se:0}}Ee(me,0,0,z,B,z,this.f,this.v,this.z),Ee(pe,fe,fe,P,E,z,this.f,this.v,this.z);for(let Ce=0;Ce<U;Ce++){const be=Math.sqrt(me[Ce])-Math.sqrt(pe[Ce]);V[Ce]=Math.round(255-255*(be/this.radius+this.cutoff))}return Z}};class ot{constructor(){this.specification=a.v.light.position}possiblyEvaluate(r,s){return a.B(r.expression.evaluate(s))}interpolate(r,s,p){return{x:a.C.number(r.x,s.x,p),y:a.C.number(r.y,s.y,p),z:a.C.number(r.z,s.z,p)}}}let He;class De extends a.E{constructor(r){super(),He=He||new a.r({anchor:new a.D(a.v.light.anchor),position:new ot,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(He),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,s={}){if(!this._validate(a.x,r,s))for(const p in r){const m=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,s,p){return(!p||p.validate!==!1)&&a.y(this,r.call(a.z,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Ge=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Ue extends a.E{constructor(r){super(),this._transitionable=new a.t(Ge),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(r,s={}){if(!this._validate(a.G,r,s)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in r){const m=r[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,s,p={}){return(p==null?void 0:p.validate)!==!1&&a.y(this,r.call(a.z,a.e({value:s,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ze{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,s){const p=r.join(",")+String(s);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(r,s)),this.dashEntry[p]}getDashRanges(r,s,p){const m=[];let v=r.length%2==1?-r[r.length-1]*p:0,w=r[0]*p,P=!0;m.push({left:v,right:w,isDash:P,zeroLength:r[0]===0});let E=r[0];for(let z=1;z<r.length;z++){P=!P;const B=r[z];v=E*p,E+=B,w=E*p,m.push({left:v,right:w,isDash:P,zeroLength:B===0})}return m}addRoundDash(r,s,p){const m=s/2;for(let v=-p;v<=p;v++){const w=this.width*(this.nextRow+p+v);let P=0,E=r[P];for(let z=0;z<this.width;z++){z/E.right>1&&(E=r[++P]);const B=Math.abs(z-E.left),U=Math.abs(z-E.right),V=Math.min(B,U);let Z;const ie=v/p*(m+1);if(E.isDash){const fe=m-Math.abs(ie);Z=Math.sqrt(V*V+fe*fe)}else Z=m-Math.sqrt(V*V+ie*ie);this.data[w+z]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(r){for(let P=r.length-1;P>=0;--P){const E=r[P],z=r[P+1];E.zeroLength?r.splice(P,1):z&&z.isDash===E.isDash&&(z.left=E.left,r.splice(P,1))}const s=r[0],p=r[r.length-1];s.isDash===p.isDash&&(s.left=p.left-this.width,p.right=s.right+this.width);const m=this.width*this.nextRow;let v=0,w=r[v];for(let P=0;P<this.width;P++){P/w.right>1&&(w=r[++v]);const E=Math.abs(P-w.left),z=Math.abs(P-w.right),B=Math.min(E,z);this.data[m+P]=Math.max(0,Math.min(255,(w.isDash?B:-B)+128))}}addDash(r,s){const p=s?7:0,m=2*p+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let v=0;for(let P=0;P<r.length;P++)v+=r[P];if(v!==0){const P=this.width/v,E=this.getDashRanges(r,this.width,P);s?this.addRoundDash(E,P,p):this.addRegularDash(E)}const w={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:v};return this.nextRow+=m,this.dirty=!0,w}bind(r){const s=r.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}const at="maplibre_preloaded_worker_pool";class pt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<pt.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[at]}numActive(){return Object.keys(this.active).length}}const ct=Math.floor(M.hardwareConcurrency/2);let Ht,Dt;function Nt(){return Ht||(Ht=new pt),Ht}pt.workerCount=a.H(globalThis)?Math.max(Math.min(ct,3),1):1;class tr{constructor(r,s){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=s;const p=this.workerPool.acquire(s);for(let m=0;m<p.length;m++){const v=new a.J(p[m],s);v.name=`Worker ${m}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,s){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:r,data:s}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(s=>{s.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,s){for(const p of this.actors)p.registerMessageHandler(r,s)}}function Tt(){return Dt||(Dt=new tr(Nt(),a.K),Dt.registerMessageHandler("GR",(y,r,s)=>a.m(r,s))),Dt}function st(y,r){const s=a.L();return a.M(s,s,[1,1,0]),a.N(s,s,[.5*y.width,.5*y.height,1]),y.calculatePosMatrix?a.O(s,s,y.calculatePosMatrix(r.toUnwrapped())):s}function Ct(y,r,s,p,m,v,w){var P;const E=function(V,Z,ie){if(V)for(const fe of V){const pe=Z[fe];if(pe&&pe.source===ie&&pe.type==="fill-extrusion")return!0}else for(const fe in Z){const pe=Z[fe];if(pe.source===ie&&pe.type==="fill-extrusion")return!0}return!1}((P=m==null?void 0:m.layers)!==null&&P!==void 0?P:null,r,y.id),z=v.maxPitchScaleFactor(),B=y.tilesIn(p,z,E);B.sort(Mt);const U=[];for(const V of B)U.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(r,s,y._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,m,v,z,st(y.transform,V.tileID),w?(Z,ie)=>w(V.tileID,Z,ie):void 0)});return function(V,Z){for(const ie in V)for(const fe of V[ie])qt(fe,Z);return V}(function(V){const Z={},ie={};for(const fe of V){const pe=fe.queryResults,me=fe.wrappedTileID,ve=ie[me]=ie[me]||{};for(const Ce in pe){const be=pe[Ce],ke=ve[Ce]=ve[Ce]||{},Le=Z[Ce]=Z[Ce]||[];for(const Se of be)ke[Se.featureIndex]||(ke[Se.featureIndex]=!0,Le.push(Se))}}return Z}(U),y)}function Mt(y,r){const s=y.tileID,p=r.tileID;return s.overscaledZ-p.overscaledZ||s.canonical.y-p.canonical.y||s.wrap-p.wrap||s.canonical.x-p.canonical.x}function qt(y,r){const s=y.feature,p=r.getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=p}function nr(y,r,s){return a._(this,void 0,void 0,function*(){let p=y;if(y.url?p=(yield a.j(r.transformRequest(y.url,"Source"),s)).data:yield M.frameAsync(s),!p)return null;const m=a.Q(a.e(p,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(v=>v.id)),m})}class ur{constructor(r,s){r&&(s?this.setSouthWest(r).setNorthEast(s):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}extend(r){const s=this._sw,p=this._ne;let m,v;if(r instanceof a.S)m=r,v=r;else{if(!(r instanceof ur))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ur.convert(r)):this.extend(a.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.S.convert(r)):this;if(m=r._sw,v=r._ne,!m||!v)return this}return s||p?(s.lng=Math.min(m.lng,s.lng),s.lat=Math.min(m.lat,s.lat),p.lng=Math.max(v.lng,p.lng),p.lat=Math.max(v.lat,p.lat)):(this._sw=new a.S(m.lng,m.lat),this._ne=new a.S(v.lng,v.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:p}=a.S.convert(r);let m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(r){return r instanceof ur?r:r&&new ur(r)}static fromLngLat(r,s=0){const p=360*s/40075017,m=p/Math.cos(Math.PI/180*r.lat);return new ur(new a.S(r.lng-m,r.lat-p),new a.S(r.lng+m,r.lat+p))}adjustAntiMeridian(){const r=new a.S(this._sw.lng,this._sw.lat),s=new a.S(this._ne.lng,this._ne.lat);return new ur(r,r.lng>s.lng?new a.S(s.lng+360,s.lat):s)}}class gr{constructor(r,s,p){this.bounds=ur.convert(this.validateBounds(r)),this.minzoom=s||0,this.maxzoom=p||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const s=Math.pow(2,r.z),p=Math.floor(a.V(this.bounds.getWest())*s),m=Math.floor(a.U(this.bounds.getNorth())*s),v=Math.ceil(a.V(this.bounds.getEast())*s),w=Math.ceil(a.U(this.bounds.getSouth())*s);return r.x>=p&&r.x<v&&r.y>=m&&r.y<w}}class Kt extends a.E{constructor(r,s,p,m){if(super(),this.id=r,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(s,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield nr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new gr(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new a.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,function*(){const s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(s,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,w)=>{r.reloadPromise={resolve:v,reject:w}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const v=yield r.actor.sendAsync({type:m,data:p},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,s){if(s&&s.resourceTiming&&(r.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&r.setExpiryData(s),r.loadVectorData(s,this.map.painter),r.reloadPromise){const p=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(p.resolve).catch(p.reject)}}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Lt extends a.E{constructor(r,s,p,m){super(),this.id=r,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},s),a.e(this,a.Q(s,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield nr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(a.e(this,s),s.bounds&&(this.tileBounds=new gr(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,function*(){const s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const p=yield ne.getImage(this.map._requestManager.transformRequest(s,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,v=m.gl,w=p.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new a.T(m,w,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Qt extends Lt{constructor(r,s,p,m){super(r,s,p,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(r){return a._(this,void 0,void 0,function*(){const s=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(s,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield ne.getImage(p,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const v=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const w=a.b(v)&&a.W()?v:yield this.readImageNow(v),P={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const E=yield r.actor.sendAsync({type:"LDT",data:P});r.dem=E,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const s=r.width+2,p=r.height+2;try{return new a.R({width:s,height:p},yield a.Y(r,-1,-1,s,p))}catch{}}return M.getImageData(r,1)})}_getNeighboringTiles(r){const s=r.canonical,p=Math.pow(2,s.z),m=(s.x-1+p)%p,v=s.x===0?r.wrap-1:r.wrap,w=(s.x+1+p)%p,P=s.x+1===p?r.wrap+1:r.wrap,E={};return E[new a.Z(r.overscaledZ,v,s.z,m,s.y).key]={backfilled:!1},E[new a.Z(r.overscaledZ,P,s.z,w,s.y).key]={backfilled:!1},s.y>0&&(E[new a.Z(r.overscaledZ,v,s.z,m,s.y-1).key]={backfilled:!1},E[new a.Z(r.overscaledZ,r.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},E[new a.Z(r.overscaledZ,P,s.z,w,s.y-1).key]={backfilled:!1}),s.y+1<p&&(E[new a.Z(r.overscaledZ,v,s.z,m,s.y+1).key]={backfilled:!1},E[new a.Z(r.overscaledZ,r.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},E[new a.Z(r.overscaledZ,P,s.z,w,s.y+1).key]={backfilled:!1}),E}unloadTile(r){return a._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Vt extends a.E{constructor(r,s,p,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=s.data,this._options=a.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId,s.clusterMaxZoom!==void 0&&this.maxzoom<=s.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${s.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(s.buffer!==void 0?s.buffer:128),tolerance:this._pixelsToTileUnits(s.tolerance!==void 0?s.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(s.clusterMaxZoom),minPoints:Math.max(2,s.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(s.clusterRadius||50),log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(a.$/this.tileSize)}_getClusterMaxZoom(r){const s=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${s}"`),s}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return a._(this,void 0,void 0,function*(){const r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(s=>s.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const r=new ur,s=yield this.getData();let p;switch(s.type){case"FeatureCollection":p=s.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(s.geometry);break;default:p=this.getCoordinatesFromGeometry(s)}if(p.length==0)return r;for(let m=0;m<p.length-1;m+=2)r.extend([p[m],p[m+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,s,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:s,offset:p}})}_updateWorkerData(r){return a._(this,void 0,void 0,function*(){const s=a.e({type:this.type},this.workerOptions);r?s.dataDiff=r:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(M.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&a.e(v,{resourceTiming:m}),this.fire(new a.l("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(p))}})}loaded(){return this._pendingLoads===0}loadTile(r){return a._(this,void 0,void 0,function*(){const s=r.actor?"RT":"LT";r.actor=this.actor;const p={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:s,data:p},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,s==="RT")})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class mr extends a.E{constructor(r,s,p,m){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=p,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=s}load(r){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const s=yield ne.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,r&&(this.coordinates=r),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new a.k(s))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const s=r.map(a.a0.fromLngLat);var p;return this.tileID=function(m){const v=a.a1.fromPoints(m),w=v.width(),P=v.height(),E=Math.max(w,P),z=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),B=Math.pow(2,z);return new a.a3(z,Math.floor((v.minX+v.maxX)/2*B),Math.floor((v.minY+v.maxY)/2*B))}(s),this.terrainTileRanges=this._getOverlappingTileRanges(s),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=s.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,s=r.gl;this.texture||(this.texture=new a.T(r,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:s,minY:p,maxX:m,maxY:v}=a.a1.fromPoints(r),w={};for(let P=0;P<=a.a2;P++){const E=Math.pow(2,P),z=Math.floor(s*E),B=Math.floor(p*E),U=Math.floor(m*E),V=Math.floor(v*E);w[P]={minTileX:z,minTileY:B,maxTileX:U,maxTileY:V}}return w}}class kr extends mr{constructor(r,s,p,m){super(r,s,p,m),this.roundZoom=!0,this.type="video",this.options=s}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const s of r.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{const s=yield a.a4(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new a.k(s))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const s=this.video.seekable;r<s.start(0)||r>s.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,s=r.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(r,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ur extends mr{constructor(r,s,p,m){super(r,s,p,m),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new a.k(new a.a5(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${r}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${r}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,p=s.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(s,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const v in this.tiles){const w=this.tiles[v];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Lr={},pr=y=>{switch(y){case"geojson":return Vt;case"image":return mr;case"raster":return Lt;case"raster-dem":return Qt;case"vector":return Kt;case"video":return kr;case"canvas":return Ur}return Lr[y]},$r="RTLPluginLoaded";class jr extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Tt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(s=>{throw this.status="error",s})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,function*(s,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l($r))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let br=null;function dr(){return br||(br=new jr),br}class ar{constructor(r,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.a6(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const s=r+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,s,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,v){const w={};if(!v)return w;for(const P of m){const E=P.layerIds.map(z=>v.getLayer(z)).filter(Boolean);if(E.length!==0){P.layers=E,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(z=>E.filter(B=>B.id===z)[0]));for(const z of E)w[z.id]=P}}return w}(r.buckets,s==null?void 0:s.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const v=this.buckets[m];if(v instanceof a.a8){if(this.hasSymbolBuckets=!0,!p)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const v=this.buckets[m];if(v instanceof a.a8&&v.hasRTLText){this.hasRTLText=!0,dr().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(m).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(r)}const s=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(r,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(r,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,s,p,m,v,w,P,E,z,B,U){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:w,tileSize:this.tileSize,pixelPosMatrix:B,transform:E,params:P,queryPadding:this.queryPadding*z,getElevation:U},r,s,p):{}}querySourceFeatures(r,s){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),v=s&&s.sourceLayer?s.sourceLayer:"",w=m._geojsonTileLayer||m[v];if(!w)return;const P=a.a9(s&&s.filter),{z:E,x:z,y:B}=this.tileID.canonical,U={z:E,x:z,y:B};for(let V=0;V<w.length;V++){const Z=w.feature(V);if(P.needGeometry){const pe=a.aa(Z,!0);if(!P.filter(new a.F(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!P.filter(new a.F(this.tileID.overscaledZ),Z))continue;const ie=p.getId(Z,v),fe=new a.ab(Z,E,z,B,ie);fe.tile=U,r.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const s=this.expirationTime;if(r.cacheControl){const p=a.ac(r.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(s)if(this.expirationTime<s)m=!0;else{const v=this.expirationTime-s;v?this.expirationTime=p+Math.max(v,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!s.style.hasLayer(m))continue;const v=this.buckets[m],w=v.layers[0].sourceLayer||"_geojsonTileLayer",P=p[w],E=r[w];if(!P||!E||Object.keys(E).length===0)continue;v.update(E,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=s&&s.style&&s.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=M.now()+r}setDependencies(r,s){const p={};for(const m of s)p[m]=!0;this.dependencies[r]=p}hasDependency(r,s){for(const p of r){const m=this.dependencies[p];if(m){for(const v of s)if(m[v])return!0}}return!1}}class Jt{constructor(r,s){this.max=r,this.onRemove=s,this.reset()}reset(){for(const r in this.data)for(const s of this.data[r])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(r,s,p){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const v={value:s,timeout:void 0};if(p!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},p)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const s=this.data[r].shift();return s.timeout&&clearTimeout(s.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),s.value}getByKey(r){const s=this.data[r];return s?s[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,s){if(!this.has(r))return this;const p=r.wrapped().key,m=s===void 0?0:this.data[p].indexOf(s),v=this.data[p][m];return this.data[p].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(v.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(r){const s=[];for(const p in this.data)for(const m of this.data[p])r(m.value)||s.push(m);for(const p of s)this.remove(p.value.tileID,p)}}class yr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,s,p){const m=String(s);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},a.e(this.stateChanges[r][m],p),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==m&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const v in this.state[r][m])p[v]||(this.deletedStates[r][m][v]=null)}else for(const v in p)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][v]===null&&delete this.deletedStates[r][m][v]}removeFeatureState(r,s,p){if(this.deletedStates[r]===null)return;const m=String(s);if(this.deletedStates[r]=this.deletedStates[r]||{},p&&s!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][p]=null);else if(s!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(p in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][p]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,s){const p=String(s),m=a.e({},(this.state[r]||{})[p],(this.stateChanges[r]||{})[p]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][s];if(v===null)return{};for(const w in v)delete m[w]}return m}initializeTileState(r,s){r.setFeatureState(this.state,s)}coalesceChanges(r,s){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const v={};for(const w in this.stateChanges[m])this.state[m][w]||(this.state[m][w]={}),a.e(this.state[m][w],this.stateChanges[m][w]),v[w]=this.state[m][w];p[m]=v}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const v={};if(this.deletedStates[m]===null)for(const w in this.state[m])v[w]={},this.state[m][w]={};else for(const w in this.deletedStates[m]){if(this.deletedStates[m][w]===null)this.state[m][w]={};else for(const P of Object.keys(this.deletedStates[m][w]))delete this.state[m][w][P];v[w]=this.state[m][w]}p[m]=p[m]||{},a.e(p[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in r)r[m].setFeatureState(p,s)}}const wr=89.25;function _e(y,r){const s=a.ag(r.lat,-a.ah,a.ah);return new a.P(a.V(r.lng)*y,a.U(s)*y)}function X(y,r){return new a.a0(r.x/y,r.y/y).toLngLat()}function te(y){return y.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-y.pitch)),Math.tan(a.ad(wr-y.pitch)))}function H(y,r){const s=y.canonical,p=r/a.ae(s.z),m=s.x+Math.pow(2,s.z)*y.wrap,v=a.af(new Float64Array(16));return a.M(v,v,[m*p,s.y*p,0]),a.N(v,v,[p/a.$,p/a.$,1]),v}function oe(y,r,s,p,m){const v=a.a0.fromLngLat(y,r),w=m*a.ai(1,y.lat),P=w*Math.cos(a.ad(s)),E=Math.sqrt(w*w-P*P),z=E*Math.sin(a.ad(-p)),B=E*Math.cos(a.ad(-p));return new a.a0(v.x+z,v.y+B,v.z+P)}function xe(y,r,s){const p=r.intersectsFrustum(y);if(!s||p===0)return p;const m=r.intersectsPlane(s);return m===0?0:p===2&&m===2?2:1}function Ae(y,r,s){let p=0;const m=(s-r)/10;for(let v=0;v<10;v++)p+=m*Math.pow(Math.cos(r+(v+.5)/10*(s-r)),y);return p}function Fe(y,r){return function(s,p,m,v,w){const P=2*((y-1)/a.aj(Math.cos(a.ad(wr-w))/Math.cos(a.ad(wr)))-1),E=Math.acos(m/v),z=2*Ae(P-1,0,a.ad(w/2)),B=Math.min(a.ad(wr),E+a.ad(w/2)),U=Ae(P-1,Math.min(B,E-a.ad(w/2)),B),V=Math.atan(p/m),Z=Math.hypot(p,m);let ie=s;return ie+=a.aj(v/Z/Math.max(.5,Math.cos(a.ad(w/2)))),ie+=P*a.aj(Math.cos(V))/2,ie-=a.aj(Math.max(1,U/z/r))/2,ie}}const we=Fe(9.314,3);function qe(y,r){const s=(r.roundZoom?Math.round:Math.floor)(y.zoom+a.aj(y.tileSize/r.tileSize));return Math.max(0,s)}function We(y,r){const s=y.getCameraFrustum(),p=y.getClippingPlane(),m=y.screenPointToMercatorCoordinate(y.getCameraPoint()),v=a.a0.fromLngLat(y.center,y.elevation);m.z=v.z+Math.cos(y.pitchInRadians)*y.cameraToCenterDistance/y.worldSize;const w=y.getCoveringTilesDetailsProvider(),P=w.allowVariableZoom(y,r),E=qe(y,r),z=r.minzoom||0,B=r.maxzoom!==void 0?r.maxzoom:y.maxZoom,U=Math.min(Math.max(0,E),B),V=Math.pow(2,U),Z=[V*m.x,V*m.y,0],ie=[V*v.x,V*v.y,0],fe=Math.hypot(v.x-m.x,v.y-m.y),pe=Math.abs(v.z-m.z),me=Math.hypot(fe,pe),ve=ke=>({zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Ce=[],be=[];if(y.renderWorldCopies&&w.allowWorldCopies())for(let ke=1;ke<=3;ke++)Ce.push(ve(-ke)),Ce.push(ve(ke));for(Ce.push(ve(0));Ce.length>0;){const ke=Ce.pop(),Le=ke.x,Se=ke.y;let Ne=ke.fullyVisible;const Qe={x:Le,y:Se,z:ke.zoom},Ke=w.getTileBoundingVolume(Qe,ke.wrap,y.elevation,r);if(!Ne){const Et=xe(s,Ke,p);if(Et===0)continue;Ne=Et===2}const Xe=w.distanceToTile2d(m.x,m.y,Qe,Ke);let et=E;P&&(et=(r.calculateTileZoom||we)(y.zoom+a.aj(y.tileSize/r.tileSize),Xe,pe,me,y.fov)),et=(r.roundZoom?Math.round:Math.floor)(et),et=Math.max(0,et);const Rt=Math.min(et,B);if(ke.wrap=w.getWrap(v,Qe,ke.wrap),ke.zoom>=Rt){if(ke.zoom<z)continue;const Et=U-ke.zoom,gt=Z[0]-.5-(Le<<Et),Gt=Z[1]-.5-(Se<<Et),_r=r.reparseOverscaled?Math.max(ke.zoom,et):ke.zoom;be.push({tileID:new a.Z(ke.zoom===B?_r:ke.zoom,ke.wrap,ke.zoom,Le,Se),distanceSq:a.ak([ie[0]-.5-Le,ie[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(gt*gt+Gt*Gt)})}else for(let Et=0;Et<4;Et++)Ce.push({zoom:ke.zoom+1,x:(Le<<1)+Et%2,y:(Se<<1)+(Et>>1),wrap:ke.wrap,fullyVisible:Ne})}return be.sort((ke,Le)=>ke.distanceSq-Le.distanceSq).map(ke=>ke.tileID)}const $e=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class nt extends a.E{constructor(r,s,p){super(),this.id=r,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,w,P)=>{const E=new(pr(v.type))(m,v,w,P);if(E.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${E.id}`);return E})(r,s,p,this),this._tiles={},this._cache=new Jt(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yr,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const s=this._tiles[r];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,s,p){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,s,p)}catch(m){r.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const p=this._tiles[s];p.upload(r),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Me).map(r=>r.key)}getRenderableIds(r){const s=[];for(const p in this._tiles)this._isIdRenderable(p,r)&&s.push(this._tiles[p]);return r?s.sort((p,m)=>{const v=p.tileID,w=m.tileID,P=new a.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians),E=new a.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians);return v.overscaledZ-w.overscaledZ||E.y-P.y||E.x-P.x}).map(p=>p.tileID.key):s.map(p=>p.tileID).sort(Me).map(p=>p.key)}hasRenderableParent(r){const s=this.findLoadedParent(r,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(r,s){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(s||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)r?this._reloadTile(s,"expired"):this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(r,s){return a._(this,void 0,void 0,function*(){const p=this._tiles[r];p&&(p.state!=="loading"&&(p.state=s),yield this._loadTile(p,r,s))})}_tileLoaded(r,s,p){r.timeAdded=M.now(),p==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(s,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const s=this.getRenderableIds();for(let m=0;m<s.length;m++){const v=s[m];if(r.neighboringTiles&&r.neighboringTiles[v]){const w=this.getTileByID(v);p(r,w),p(w,r)}}function p(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let w=v.tileID.canonical.x-m.tileID.canonical.x;const P=v.tileID.canonical.y-m.tileID.canonical.y,E=Math.pow(2,m.tileID.canonical.z),z=v.tileID.key;w===0&&P===0||Math.abs(P)>1||(Math.abs(w)>1&&(Math.abs(w+E)===1?w+=E:Math.abs(w-E)===1&&(w-=E)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,w,P),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,s,p,m){for(const v in this._tiles){let w=this._tiles[v];if(m[v]||!w.hasData()||w.tileID.overscaledZ<=s||w.tileID.overscaledZ>p)continue;let P=w.tileID;for(;w&&w.tileID.overscaledZ>s+1;){const z=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[z.key],w&&w.hasData()&&(P=z)}let E=P;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),r[E.key]||r[E.canonical.key]){m[P.key]=P;break}}}findLoadedParent(r,s){if(r.key in this._loadedParentTiles){const p=this._loadedParentTiles[r.key];return p&&p.tileID.overscaledZ>=s?p:null}for(let p=r.overscaledZ-1;p>=s;p--){const m=r.scaledTo(p),v=this._getLoadedTile(m);if(v)return v}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const s=this._tiles[r.key];return s&&s.hasData()?s:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const s=Math.ceil(r.width/this._source.tileSize)+1,p=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(s*p*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(r){const s=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,s){const p={};for(const m in this._tiles){const v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+s),p[v.tileID.key]=v}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,s,p,m,v,w){const P={},E={},z=Object.keys(r),B=M.now();for(const U of z){const V=r[U],Z=this._tiles[U];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=B)continue;const ie=this.findLoadedParent(V,s),fe=this.findLoadedSibling(V),pe=ie||fe||null;pe&&(this._addTile(pe.tileID),P[pe.tileID.key]=pe.tileID),E[U]=V}this._retainLoadedChildren(E,m,p,r);for(const U in P)r[U]||(this._coveredTiles[U]=!0,r[U]=P[U]);if(w){const U={},V={};for(const Z of v)this._tiles[Z.key].hasData()?U[Z.key]=Z:V[Z.key]=Z;for(const Z in V){const ie=V[Z].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(U[ie[0].key]=r[ie[0].key]=ie[0],U[ie[1].key]=r[ie[1].key]=ie[1],U[ie[2].key]=r[ie[2].key]=ie[2],U[ie[3].key]=r[ie[3].key]=ie[3],delete V[Z])}for(const Z in V){const ie=V[Z],fe=this.findLoadedParent(ie,this._source.minzoom),pe=this.findLoadedSibling(ie),me=fe||pe||null;if(me){U[me.tileID.key]=r[me.tileID.key]=me.tileID;for(const ve in U)U[ve].isChildOf(me.tileID)&&delete U[ve]}}for(const Z in this._tiles)U[Z]||(this._coveredTiles[Z]=!0)}}update(r,s){if(!this._sourceLoaded||this._paused)return;let p;this.transform=r,this.terrain=s,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new a.Z(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(p=We(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(B=>this._source.hasTile(B)))):p=[];const m=qe(r,this._source),v=Math.max(m-nt.maxOverzooming,this._source.minzoom),w=Math.max(m+nt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const U of p)if(U.canonical.z>this._source.minzoom){const V=U.scaledTo(U.canonical.z-1);B[V.key]=V;const Z=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));B[Z.key]=Z}p=p.concat(Object.values(B))}const P=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(p,m);mt(this._source.type)&&this._updateCoveredAndRetainedTiles(E,v,w,m,p,s);for(const B in E)this._tiles[B].clearFadeHold();const z=a.al(this._tiles,E);for(const B of z){const U=this._tiles[B];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,s){var p;const m={},v={},w=Math.max(s-nt.maxOverzooming,this._source.minzoom),P=Math.max(s+nt.maxUnderzooming,this._source.minzoom),E={};for(const z of r){const B=this._addTile(z);m[z.key]=z,B.hasData()||s<this._source.maxzoom&&(E[z.key]=z)}this._retainLoadedChildren(E,s,P,m);for(const z of r){let B=this._tiles[z.key];if(B.hasData())continue;if(s+1>this._source.maxzoom){const V=z.children(this._source.maxzoom)[0],Z=this.getTile(V);if(Z&&Z.hasData()){m[V.key]=V;continue}}else{const V=z.children(this._source.maxzoom);if(m[V[0].key]&&m[V[1].key]&&m[V[2].key]&&m[V[3].key])continue}let U=B.wasRequested();for(let V=z.overscaledZ-1;V>=w;--V){const Z=z.scaledTo(V);if(v[Z.key])break;if(v[Z.key]=!0,B=this.getTile(Z),!B&&U&&(B=this._addTile(Z)),B){const ie=B.hasData();if((ie||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||U)&&(m[Z.key]=Z),U=B.wasRequested(),ie)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const s=[];let p,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}s.push(m.key);const v=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(v),p)break;m=v}for(const v of s)this._loadedParentTiles[v]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const s=this._tiles[r].tileID,p=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=p}}_addTile(r){let s=this._tiles[r.key];if(s)return s;s=this._cache.getAndRemove(r),s&&(this._setTileReloadTimer(r.key,s),s.tileID=r,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,s)));const p=s;return s||(s=new ar(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(s,r.key,s.state)),s.uses++,this._tiles[r.key]=s,p||this._source.fire(new a.l("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(r,s){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const p=s.getExpiryTimeout();p&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},p))}refreshTiles(r){for(const s in this._tiles)(this._isIdRenderable(s)||this._tiles[s].state=="errored")&&r.some(p=>p.equals(this._tiles[s].tileID.canonical))&&this._reloadTile(s,"expired")}_removeTile(r){const s=this._tiles[r];s&&(s.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(r){const s=r.sourceDataType;r.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&s==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,s,p){const m=[],v=this.transform;if(!v)return m;const w=v.getCoveringTilesDetailsProvider().allowWorldCopies(),P=p?v.getCameraQueryGeometry(r):r,E=Z=>v.screenPointToMercatorCoordinate(Z,this.terrain),z=this.transformBbox(r,E,!w),B=this.transformBbox(P,E,!w),U=this.getIds(),V=a.a1.fromPoints(B);for(let Z=0;Z<U.length;Z++){const ie=this._tiles[U[Z]];if(ie.holdingForFade())continue;const fe=w?[ie.tileID]:[ie.tileID.unwrapTo(-1),ie.tileID.unwrapTo(0)],pe=Math.pow(2,v.zoom-ie.tileID.overscaledZ),me=s*ie.queryPadding*a.$/ie.tileSize/pe;for(const ve of fe){const Ce=V.map(be=>ve.getTilePoint(new a.a0(be.x,be.y)));if(Ce.expandBy(me),Ce.intersects($e)){const be=z.map(Le=>ve.getTilePoint(Le)),ke=B.map(Le=>ve.getTilePoint(Le));m.push({tile:ie,tileID:w?ve:ve.unwrapTo(0),queryGeometry:be,cameraQueryGeometry:ke,scale:pe})}}}return m}transformBbox(r,s,p){let m=r.map(s);if(p){const v=a.a1.fromPoints(r);v.shrinkBy(.001*Math.min(v.width(),v.height()));const w=v.map(s);a.a1.fromPoints(m).covers(w)||(m=m.map(P=>P.x>.5?new a.a0(P.x-1,P.y,P.z):P))}return m}getVisibleCoordinates(r){const s=this.getRenderableIds(r).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(s),s}hasTransition(){if(this._source.hasTransition())return!0;if(mt(this._source.type)){const r=M.now();for(const s in this._tiles)if(this._tiles[s].fadeEndTime>=r)return!0}return!1}setFeatureState(r,s,p){this._state.updateState(r=r||"_geojsonTileLayer",s,p)}removeFeatureState(r,s,p){this._state.removeFeatureState(r=r||"_geojsonTileLayer",s,p)}getFeatureState(r,s){return this._state.getState(r=r||"_geojsonTileLayer",s)}setDependencies(r,s,p){const m=this._tiles[r];m&&m.setDependencies(s,p)}reloadTilesForDependencies(r,s){for(const p in this._tiles)this._tiles[p].hasDependency(r,s)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(r,s))}}function Me(y,r){const s=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||p-s||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function mt(y){return y==="raster"||y==="image"||y==="video"}nt.maxOverzooming=10,nt.maxUnderzooming=3;class wt{constructor(r,s){this.reset(r,s)}reset(r,s){this.points=r||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ag(r,0,1);let s=1,p=this._distances[s];const m=r*this.paddedLength+this.padding;for(;p<m&&s<this._distances.length;)p=this._distances[++s];const v=s-1,w=this._distances[v],P=p-w,E=P>0?(m-w)/P:0;return this.points[v].mult(1-E).add(this.points[s].mult(E))}}function ge(y,r){let s=!0;return y==="always"||y!=="never"&&r!=="never"||(s=!1),s}class Re{constructor(r,s,p){const m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/p),this.yCellCount=Math.ceil(s/p);for(let w=0;w<this.xCellCount*this.yCellCount;w++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=s,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,s,p,m,v){this._forEachCell(s,p,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(s),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(r,s,p,m){this._forEachCell(s-m,p-m,s+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(s),this.circles.push(p),this.circles.push(m)}_insertBoxCell(r,s,p,m,v,w){this.boxCells[v].push(w)}_insertCircleCell(r,s,p,m,v,w){this.circleCells[v].push(w)}_query(r,s,p,m,v,w,P){if(p<0||r>this.width||m<0||s>this.height)return[];const E=[];if(r<=0&&s<=0&&this.width<=p&&this.height<=m){if(v)return[{key:null,x1:r,y1:s,x2:p,y2:m}];for(let z=0;z<this.boxKeys.length;z++)E.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const B=this.circles[3*z],U=this.circles[3*z+1],V=this.circles[3*z+2];E.push({key:this.circleKeys[z],x1:B-V,y1:U-V,x2:B+V,y2:U+V})}}else this._forEachCell(r,s,p,m,this._queryCell,E,{hitTest:v,overlapMode:w,seenUids:{box:{},circle:{}}},P);return E}query(r,s,p,m){return this._query(r,s,p,m,!1,null)}hitTest(r,s,p,m,v,w){return this._query(r,s,p,m,!0,v,w).length>0}hitTestCircle(r,s,p,m,v){const w=r-p,P=r+p,E=s-p,z=s+p;if(P<0||w>this.width||z<0||E>this.height)return!1;const B=[];return this._forEachCell(w,E,P,z,this._queryCellCircle,B,{hitTest:!0,overlapMode:m,circle:{x:r,y:s,radius:p},seenUids:{box:{},circle:{}}},v),B.length>0}_queryCell(r,s,p,m,v,w,P,E){const{seenUids:z,hitTest:B,overlapMode:U}=P,V=this.boxCells[v];if(V!==null){const ie=this.bboxes;for(const fe of V)if(!z.box[fe]){z.box[fe]=!0;const pe=4*fe,me=this.boxKeys[fe];if(r<=ie[pe+2]&&s<=ie[pe+3]&&p>=ie[pe+0]&&m>=ie[pe+1]&&(!E||E(me))&&(!B||!ge(U,me.overlapMode))&&(w.push({key:me,x1:ie[pe],y1:ie[pe+1],x2:ie[pe+2],y2:ie[pe+3]}),B))return!0}}const Z=this.circleCells[v];if(Z!==null){const ie=this.circles;for(const fe of Z)if(!z.circle[fe]){z.circle[fe]=!0;const pe=3*fe,me=this.circleKeys[fe];if(this._circleAndRectCollide(ie[pe],ie[pe+1],ie[pe+2],r,s,p,m)&&(!E||E(me))&&(!B||!ge(U,me.overlapMode))){const ve=ie[pe],Ce=ie[pe+1],be=ie[pe+2];if(w.push({key:me,x1:ve-be,y1:Ce-be,x2:ve+be,y2:Ce+be}),B)return!0}}}return!1}_queryCellCircle(r,s,p,m,v,w,P,E){const{circle:z,seenUids:B,overlapMode:U}=P,V=this.boxCells[v];if(V!==null){const ie=this.bboxes;for(const fe of V)if(!B.box[fe]){B.box[fe]=!0;const pe=4*fe,me=this.boxKeys[fe];if(this._circleAndRectCollide(z.x,z.y,z.radius,ie[pe+0],ie[pe+1],ie[pe+2],ie[pe+3])&&(!E||E(me))&&!ge(U,me.overlapMode))return w.push(!0),!0}}const Z=this.circleCells[v];if(Z!==null){const ie=this.circles;for(const fe of Z)if(!B.circle[fe]){B.circle[fe]=!0;const pe=3*fe,me=this.circleKeys[fe];if(this._circlesCollide(ie[pe],ie[pe+1],ie[pe+2],z.x,z.y,z.radius)&&(!E||E(me))&&!ge(U,me.overlapMode))return w.push(!0),!0}}}_forEachCell(r,s,p,m,v,w,P,E){const z=this._convertToXCellCoord(r),B=this._convertToYCellCoord(s),U=this._convertToXCellCoord(p),V=this._convertToYCellCoord(m);for(let Z=z;Z<=U;Z++)for(let ie=B;ie<=V;ie++)if(v.call(this,r,s,p,m,this.xCellCount*ie+Z,w,P,E))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,s,p,m,v,w){const P=m-r,E=v-s,z=p+w;return z*z>P*P+E*E}_circleAndRectCollide(r,s,p,m,v,w,P){const E=(w-m)/2,z=Math.abs(r-(m+E));if(z>E+p)return!1;const B=(P-v)/2,U=Math.abs(s-(v+B));if(U>B+p)return!1;if(z<=E||U<=B)return!0;const V=z-E,Z=U-B;return V*V+Z*Z<=p*p}}function Ve(y,r,s){const p=a.L();if(!y){const{vecSouth:U,vecEast:V}=vt(r),Z=C();Z[0]=V[0],Z[1]=V[1],Z[2]=U[0],Z[3]=U[1],m=Z,(B=(w=(v=Z)[0])*(z=v[3])-(E=v[2])*(P=v[1]))&&(m[0]=z*(B=1/B),m[1]=-P*B,m[2]=-E*B,m[3]=w*B),p[0]=Z[0],p[1]=Z[1],p[4]=Z[2],p[5]=Z[3]}var m,v,w,P,E,z,B;return a.N(p,p,[1/s,1/s,1]),p}function ut(y,r,s,p){if(y){const m=a.L();if(!r){const{vecSouth:v,vecEast:w}=vt(s);m[0]=w[0],m[1]=w[1],m[4]=v[0],m[5]=v[1]}return a.N(m,m,[p,p,1]),m}return s.pixelsToClipSpaceMatrix}function vt(y){const r=Math.cos(y.rollInRadians),s=Math.sin(y.rollInRadians),p=Math.cos(y.pitchInRadians),m=Math.cos(y.bearingInRadians),v=Math.sin(y.bearingInRadians),w=a.aq();w[0]=-m*p*s-v*r,w[1]=-v*p*s+m*r;const P=a.ar(w);P<1e-9?a.as(w):a.at(w,w,1/P);const E=a.aq();E[0]=m*p*r-v*s,E[1]=v*p*r+m*s;const z=a.ar(E);return z<1e-9?a.as(E):a.at(E,E,1/z),{vecEast:E,vecSouth:w}}function It(y,r,s,p){let m;p?(m=[y,r,p(y,r),1],a.av(m,m,s)):(m=[y,r,0,1],Lo(m,m,s));const v=m[3];return{point:new a.P(m[0]/v,m[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function bt(y,r){return .5+y/r*.5}function xt(y,r){return y.x>=-r[0]&&y.x<=r[0]&&y.y>=-r[1]&&y.y<=r[1]}function Bt(y,r,s,p,m,v,w,P,E,z,B,U,V){const Z=s?y.textSizeData:y.iconSizeData,ie=a.am(Z,r.transform.zoom),fe=[256/r.width*2+1,256/r.height*2+1],pe=s?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;pe.clear();const me=y.lineVertexArray,ve=s?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ce=r.transform.width/r.transform.height;let be=!1;for(let ke=0;ke<ve.length;ke++){const Le=ve.get(ke);if(Le.hidden||Le.writingMode===a.an.vertical&&!be){sn(Le.numGlyphs,pe);continue}be=!1;const Se=new a.P(Le.anchorX,Le.anchorY),Ne={getElevation:V,pitchedLabelPlaneMatrix:p,lineVertexArray:me,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:Se,unwrappedTileID:E,width:z,height:B,translation:U},Qe=_t(Le.anchorX,Le.anchorY,Ne);if(!xt(Qe.point,fe)){sn(Le.numGlyphs,pe);continue}const Ke=bt(r.transform.cameraToCenterDistance,Qe.signedDistanceFromCamera),Xe=a.ao(Z,ie,Le),et=v?Xe*r.transform.getPitchedTextCorrection(Le.anchorX,Le.anchorY,E)/Ke:Xe*Ke,Rt=zt({projectionContext:Ne,pitchedLabelPlaneMatrixInverse:m,symbol:Le,fontSize:et,flip:!1,keepUpright:w,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Ce,rotateToLine:P});be=Rt.useVertical,(Rt.notEnoughRoom||be||Rt.needsFlipping&&zt({projectionContext:Ne,pitchedLabelPlaneMatrixInverse:m,symbol:Le,fontSize:et,flip:!0,keepUpright:w,glyphOffsetArray:y.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Ce,rotateToLine:P}).notEnoughRoom)&&sn(Le.numGlyphs,pe)}s?y.text.dynamicLayoutVertexBuffer.updateData(pe):y.icon.dynamicLayoutVertexBuffer.updateData(pe)}function Je(y,r,s,p,m,v,w,P){const E=v.glyphStartIndex+v.numGlyphs,z=v.lineStartIndex,B=v.lineStartIndex+v.lineLength,U=r.getoffsetX(v.glyphStartIndex),V=r.getoffsetX(E-1),Z=xr(y*U,s,p,m,v.segment,z,B,P,w);if(!Z)return null;const ie=xr(y*V,s,p,m,v.segment,z,B,P,w);return ie?P.projectionCache.anyProjectionOccluded?null:{first:Z,last:ie}:null}function Xt(y,r,s,p){return y===a.an.horizontal&&Math.abs(s.y-r.y)>Math.abs(s.x-r.x)*p?{useVertical:!0}:(y===a.an.vertical?r.y<s.y:r.x>s.x)?{needsFlipping:!0}:null}function zt(y){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:s,symbol:p,fontSize:m,flip:v,keepUpright:w,glyphOffsetArray:P,dynamicLayoutVertexArray:E,aspectRatio:z,rotateToLine:B}=y,U=m/24,V=p.lineOffsetX*U,Z=p.lineOffsetY*U;let ie;if(p.numGlyphs>1){const fe=p.glyphStartIndex+p.numGlyphs,pe=p.lineStartIndex,me=p.lineStartIndex+p.lineLength,ve=Je(U,P,V,Z,v,p,B,r);if(!ve)return{notEnoughRoom:!0};const Ce=dt(ve.first.point.x,ve.first.point.y,r,s),be=dt(ve.last.point.x,ve.last.point.y,r,s);if(w&&!v){const ke=Xt(p.writingMode,Ce,be,z);if(ke)return ke}ie=[ve.first];for(let ke=p.glyphStartIndex+1;ke<fe-1;ke++){const Le=xr(U*P.getoffsetX(ke),V,Z,v,p.segment,pe,me,r,B);if(!Le)return{notEnoughRoom:!0};ie.push(Le)}ie.push(ve.last)}else{if(w&&!v){const pe=Ie(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,me=p.lineStartIndex+p.segment+1,ve=new a.P(r.lineVertexArray.getx(me),r.lineVertexArray.gety(me)),Ce=Ie(ve.x,ve.y,r),be=Ce.signedDistanceFromCamera>0?Ce.point:lr(r.tileAnchorPoint,ve,pe,1,r),ke=dt(pe.x,pe.y,r,s),Le=dt(be.x,be.y,r,s),Se=Xt(p.writingMode,ke,Le,z);if(Se)return Se}const fe=xr(U*P.getoffsetX(p.glyphStartIndex),V,Z,v,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,r,B);if(!fe||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[fe]}for(const fe of ie)a.au(E,fe.point,fe.angle);return{}}function lr(y,r,s,p,m){const v=y.add(y.sub(r)._unit()),w=Ie(v.x,v.y,m).point,P=s.sub(w);return s.add(P._mult(p/P.mag()))}function rt(y,r,s){const p=r.projectionCache;if(p.projections[y])return p.projections[y];const m=new a.P(r.lineVertexArray.getx(y),r.lineVertexArray.gety(y)),v=Ie(m.x,m.y,r);if(v.signedDistanceFromCamera>0)return p.projections[y]=v.point,p.anyProjectionOccluded=p.anyProjectionOccluded||v.isOccluded,v.point;const w=y-s.direction;return lr(s.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),m,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,r)}function Ie(y,r,s){const p=y+s.translation[0],m=r+s.translation[1];let v;return s.pitchWithMap?(v=It(p,m,s.pitchedLabelPlaneMatrix,s.getElevation),v.isOccluded=!1):(v=s.transform.projectTileCoordinates(p,m,s.unwrappedTileID,s.getElevation),v.point.x=(.5*v.point.x+.5)*s.width,v.point.y=(.5*-v.point.y+.5)*s.height),v}function dt(y,r,s,p){if(s.pitchWithMap){const m=[y,r,0,1];return a.av(m,m,p),s.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],s.unwrappedTileID,s.getElevation).point}return{x:y/s.width*2-1,y:1-r/s.height*2}}function _t(y,r,s){return s.transform.projectTileCoordinates(y,r,s.unwrappedTileID,s.getElevation)}function $t(y,r,s){return y._unit()._perp()._mult(r*s)}function Or(y,r,s,p,m,v,w,P,E){if(P.projectionCache.offsets[y])return P.projectionCache.offsets[y];const z=s.add(r);if(y+E.direction<p||y+E.direction>=m)return P.projectionCache.offsets[y]=z,z;const B=rt(y+E.direction,P,E),U=$t(B.sub(s),w,E.direction),V=s.add(U),Z=B.add(U);return P.projectionCache.offsets[y]=a.aw(v,z,V,Z)||z,P.projectionCache.offsets[y]}function xr(y,r,s,p,m,v,w,P,E){const z=p?y-r:y+r;let B=z>0?1:-1,U=0;p&&(B*=-1,U=Math.PI),B<0&&(U+=Math.PI);let V,Z=B>0?v+m:v+m+1;P.projectionCache.cachedAnchorPoint?V=P.projectionCache.cachedAnchorPoint:(V=Ie(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=V);let ie,fe,pe=V,me=V,ve=0,Ce=0;const be=Math.abs(z),ke=[];let Le;for(;ve+Ce<=be;){if(Z+=B,Z<v||Z>=w)return null;ve+=Ce,me=pe,fe=ie;const Qe={absOffsetX:be,direction:B,distanceFromAnchor:ve,previousVertex:me};if(pe=rt(Z,P,Qe),s===0)ke.push(me),Le=pe.sub(me);else{let Ke;const Xe=pe.sub(me);Ke=Xe.mag()===0?$t(rt(Z+B,P,Qe).sub(pe),s,B):$t(Xe,s,B),fe||(fe=me.add(Ke)),ie=Or(Z,Ke,pe,v,w,fe,s,P,Qe),ke.push(fe),Le=ie.sub(fe)}Ce=Le.mag()}const Se=Le._mult((be-ve)/Ce)._add(fe||me),Ne=U+Math.atan2(pe.y-me.y,pe.x-me.x);return ke.push(Se),{point:Se,angle:E?Ne:0,path:ke}}const rr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sn(y,r){for(let s=0;s<y;s++){const p=r.length;r.resize(p+4),r.float32.set(rr,3*p)}}function Lo(y,r,s){const p=r[0],m=r[1];return y[0]=s[0]*p+s[4]*m+s[12],y[1]=s[1]*p+s[5]*m+s[13],y[3]=s[3]*p+s[7]*m+s[15],y}const rn=100;class zi{constructor(r,s=new Re(r.width+200,r.height+200,25),p=new Re(r.width+200,r.height+200,25)){this.transform=r,this.grid=s,this.ignoredGrid=p,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+rn,this.screenBottomBoundary=r.height+rn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,s,p,m,v,w,P,E,z,B,U,V){const Z=this.projectAndGetPerspectiveRatio(r.anchorPointX+E[0],r.anchorPointY+E[1],v,B,V),ie=p*Z.perspectiveRatio;let fe;if(w||P)fe=this._projectCollisionBox(r,ie,m,v,w,P,E,Z,B,U,V);else{const Le=Z.x+(U?U.x*ie:0),Se=Z.y+(U?U.y*ie:0);fe={allPointsOccluded:!1,box:[Le+r.x1*ie,Se+r.y1*ie,Le+r.x2*ie,Se+r.y2*ie]}}const[pe,me,ve,Ce]=fe.box,be=w?fe.allPointsOccluded:Z.isOccluded;let ke=be;return ke||(ke=Z.perspectiveRatio<this.perspectiveRatioCutoff),ke||(ke=!this.isInsideGrid(pe,me,ve,Ce)),ke||s!=="always"&&this.grid.hitTest(pe,me,ve,Ce,s,z)?{box:[pe,me,ve,Ce],placeable:!1,offscreen:!1,occluded:be}:{box:[pe,me,ve,Ce],placeable:!0,offscreen:this.isOffscreen(pe,me,ve,Ce),occluded:be}}placeCollisionCircles(r,s,p,m,v,w,P,E,z,B,U,V,Z,ie){const fe=[],pe=new a.P(s.anchorX,s.anchorY),me=this.getPerspectiveRatio(pe.x,pe.y,w,ie),ve=(z?v*this.transform.getPitchedTextCorrection(s.anchorX,s.anchorY,w)/me:v*me)/a.aA,Ce={getElevation:ie,pitchedLabelPlaneMatrix:P,lineVertexArray:p,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:w,width:this.transform.width,height:this.transform.height,translation:Z},be=Je(ve,m,s.lineOffsetX*ve,s.lineOffsetY*ve,!1,s,!1,Ce);let ke=!1,Le=!1,Se=!0;if(be){const Ne=.5*U*me+V,Qe=new a.P(-100,-100),Ke=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Xe=new wt,et=be.first,Rt=be.last;let Et=[];for(let _r=et.path.length-1;_r>=1;_r--)Et.push(et.path[_r]);for(let _r=1;_r<Rt.path.length;_r++)Et.push(Rt.path[_r]);const gt=2.5*Ne;if(z){const _r=this.projectPathToScreenSpace(Et,Ce);Et=_r.some(Gr=>Gr.signedDistanceFromCamera<=0)?[]:_r.map(Gr=>Gr.point)}let Gt=[];if(Et.length>0){const _r=Et[0].clone(),Gr=Et[0].clone();for(let xn=1;xn<Et.length;xn++)_r.x=Math.min(_r.x,Et[xn].x),_r.y=Math.min(_r.y,Et[xn].y),Gr.x=Math.max(Gr.x,Et[xn].x),Gr.y=Math.max(Gr.y,Et[xn].y);Gt=_r.x>=Qe.x&&Gr.x<=Ke.x&&_r.y>=Qe.y&&Gr.y<=Ke.y?[Et]:Gr.x<Qe.x||_r.x>Ke.x||Gr.y<Qe.y||_r.y>Ke.y?[]:a.ax([Et],Qe.x,Qe.y,Ke.x,Ke.y)}for(const _r of Gt){Xe.reset(_r,.25*Ne);let Gr=0;Gr=Xe.length<=.5*Ne?1:Math.ceil(Xe.paddedLength/gt)+1;for(let xn=0;xn<Gr;xn++){const Yr=xn/Math.max(Gr-1,1),bn=Xe.lerp(Yr),on=bn.x+rn,Jr=bn.y+rn;fe.push(on,Jr,Ne,0);const an=on-Ne,fo=Jr-Ne,Dr=on+Ne,oo=Jr+Ne;if(Se=Se&&this.isOffscreen(an,fo,Dr,oo),Le=Le||this.isInsideGrid(an,fo,Dr,oo),r!=="always"&&this.grid.hitTestCircle(on,Jr,Ne,r,B)&&(ke=!0,!E))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!E&&ke||!Le||me<this.perspectiveRatioCutoff?[]:fe,offscreen:Se,collisionDetected:ke}}projectPathToScreenSpace(r,s){const p=function(m,v){const w=a.L();return a.ap(w,v.pitchedLabelPlaneMatrix),m.map(P=>{const E=It(P.x,P.y,w,v.getElevation),z=v.transform.projectTileCoordinates(E.point.x,E.point.y,v.unwrappedTileID,v.getElevation);return z.point.x=(.5*z.point.x+.5)*v.width,z.point.y=(.5*-z.point.y+.5)*v.height,z})}(r,s);return function(m){let v=0,w=0,P=0,E=0;for(let z=0;z<m.length;z++)m[z].isOccluded?(P=z+1,E=0):(E++,E>w&&(w=E,v=P));return m.slice(v,v+w)}(p)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[],p=new a.a1;for(const U of r){const V=new a.P(U.x+rn,U.y+rn);p.extend(V),s.push(V)}const{minX:m,minY:v,maxX:w,maxY:P}=p,E=this.grid.query(m,v,w,P).concat(this.ignoredGrid.query(m,v,w,P)),z={},B={};for(const U of E){const V=U.key;if(z[V.bucketInstanceId]===void 0&&(z[V.bucketInstanceId]={}),z[V.bucketInstanceId][V.featureIndex])continue;const Z=[new a.P(U.x1,U.y1),new a.P(U.x2,U.y1),new a.P(U.x2,U.y2),new a.P(U.x1,U.y2)];a.ay(s,Z)&&(z[V.bucketInstanceId][V.featureIndex]=!0,B[V.bucketInstanceId]===void 0&&(B[V.bucketInstanceId]=[]),B[V.bucketInstanceId].push(V.featureIndex))}return B}insertCollisionBox(r,s,p,m,v,w){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:w,overlapMode:s},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,s,p,m,v,w){const P=p?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:v,collisionGroupID:w,overlapMode:s};for(let z=0;z<r.length;z+=4)P.insertCircle(E,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,s,p,m,v){if(v){let w;m?(w=[r,s,m(r,s),1],a.av(w,w,v)):(w=[r,s,0,1],Lo(w,w,v));const P=w[3];return{x:(w[0]/P+1)/2*this.transform.width+rn,y:(-w[1]/P+1)/2*this.transform.height+rn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{const w=this.transform.projectTileCoordinates(r,s,p,m);return{x:(w.point.x+1)/2*this.transform.width+rn,y:(1-w.point.y)/2*this.transform.height+rn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}}getPerspectiveRatio(r,s,p,m){const v=this.transform.projectTileCoordinates(r,s,p,m);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(r,s,p,m){return p<rn||r>=this.screenRightBoundary||m<rn||s>this.screenBottomBoundary}isInsideGrid(r,s,p,m){return p>=0&&r<this.gridRightBoundary&&m>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const r=a.af([]);return a.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,s,p,m,v,w,P,E,z,B,U){let V=1,Z=0,ie=0,fe=1;const pe=r.anchorPointX+P[0],me=r.anchorPointY+P[1];if(w&&!v){const Et=this.projectAndGetPerspectiveRatio(pe+1,me,m,z,U),gt=Et.x-E.x,Gt=Math.atan((Et.y-E.y)/gt)+(gt<0?Math.PI:0),_r=Math.sin(Gt),Gr=Math.cos(Gt);V=Gr,Z=_r,ie=-_r,fe=Gr}else if(!w&&v){const Et=vt(this.transform);V=Et.vecEast[0],Z=Et.vecEast[1],ie=Et.vecSouth[0],fe=Et.vecSouth[1]}let ve=E.x,Ce=E.y,be=s;v&&(ve=pe,Ce=me,be=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),be*=this.transform.getPitchedTextCorrection(pe,me,m),B||(be*=a.ag(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(ve+=V*B.x*be+ie*B.y*be,Ce+=Z*B.x*be+fe*B.y*be);const ke=r.x1*be,Le=r.x2*be,Se=(ke+Le)/2,Ne=r.y1*be,Qe=r.y2*be,Ke=(Ne+Qe)/2,Xe=[{offsetX:ke,offsetY:Ne},{offsetX:Se,offsetY:Ne},{offsetX:Le,offsetY:Ne},{offsetX:Le,offsetY:Ke},{offsetX:Le,offsetY:Qe},{offsetX:Se,offsetY:Qe},{offsetX:ke,offsetY:Qe},{offsetX:ke,offsetY:Ke}];let et=[];for(const{offsetX:Et,offsetY:gt}of Xe)et.push(new a.P(ve+V*Et+ie*gt,Ce+Z*Et+fe*gt));let Rt=!1;if(v){const Et=et.map(gt=>this.projectAndGetPerspectiveRatio(gt.x,gt.y,m,z,U));Rt=Et.some(gt=>!gt.isOccluded),et=Et.map(gt=>new a.P(gt.x,gt.y))}else Rt=!0;return{box:a.az(et),allPointsOccluded:!Rt}}}class So{constructor(r,s,p,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?s:-s))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Co{constructor(r,s,p,m,v){this.text=new So(r?r.text:null,s,p,v),this.icon=new So(r?r.icon:null,s,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ar{constructor(r,s,p){this.text=r,this.icon=s,this.skipFade=p}}class Xr{constructor(r,s,p,m,v){this.bucketInstanceId=r,this.featureIndex=s,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=v}}class jt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const s=++this.maxGroupID;this.collisionGroups[r]={ID:s,predicate:p=>p.collisionGroupID===s}}return this.collisionGroups[r]}}function Bn(y,r,s,p,m){const{horizontalAlign:v,verticalAlign:w}=a.aG(y);return new a.P(-(v-.5)*r+p[0]*m,-(w-.5)*s+p[1]*m)}class nn{constructor(r,s,p,m,v){this.transform=r.clone(),this.terrain=s,this.collisionIndex=new zi(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new jt(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const s=this.terrain;return s?(p,m)=>s.getElevation(r,p,m):null}getBucketParts(r,s,p,m){const v=p.getBucket(s),w=p.latestFeatureIndex;if(!v||!w||s.id!==v.layerIds[0])return;const P=p.collisionBoxArray,E=v.layers[0].layout,z=v.layers[0].paint,B=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),U=p.tileSize/a.$,V=p.tileID.toUnwrapped(),Z=E.get("text-rotation-alignment")==="map",ie=a.aB(p,1,this.transform.zoom),fe=a.aC(this.collisionIndex.transform,p,z.get("text-translate"),z.get("text-translate-anchor")),pe=a.aC(this.collisionIndex.transform,p,z.get("icon-translate"),z.get("icon-translate-anchor")),me=Ve(Z,this.transform,ie);this.retainedQueryData[v.bucketInstanceId]=new Xr(v.bucketInstanceId,w,v.sourceLayerIndex,v.index,p.tileID);const ve={bucket:v,layout:E,translationText:fe,translationIcon:pe,unwrappedTileID:V,pitchedLabelPlaneMatrix:me,scale:B,textPixelRatio:U,holdingForFade:p.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:a.am(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(const Ce of v.sortKeyRanges){const{sortKey:be,symbolInstanceStart:ke,symbolInstanceEnd:Le}=Ce;r.push({sortKey:be,symbolInstanceStart:ke,symbolInstanceEnd:Le,parameters:ve})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(r,s,p,m,v,w,P,E,z,B,U,V,Z,ie,fe,pe,me,ve,Ce,be){const ke=a.aD[r.textAnchor],Le=[r.textOffset0,r.textOffset1],Se=Bn(ke,p,m,Le,v),Ne=this.collisionIndex.placeCollisionBox(s,V,E,z,B,P,w,pe,U.predicate,Ce,Se,be);if((!ve||this.collisionIndex.placeCollisionBox(ve,V,E,z,B,P,w,me,U.predicate,Ce,Se,be).placeable)&&Ne.placeable){let Qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Qe=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Le,width:p,height:m,anchor:ke,textBoxScale:v,prevAnchor:Qe},this.markUsedJustification(ie,ke,Z,fe),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,fe,Z),this.placedOrientations[Z.crossTileID]=fe),{shift:Se,placedGlyphBoxes:Ne}}}placeLayerBucketPart(r,s,p){const{bucket:m,layout:v,translationText:w,translationIcon:P,unwrappedTileID:E,pitchedLabelPlaneMatrix:z,textPixelRatio:B,holdingForFade:U,collisionBoxArray:V,partiallyEvaluatedTextSize:Z,collisionGroup:ie}=r.parameters,fe=v.get("text-optional"),pe=v.get("icon-optional"),me=a.aE(v,"text-overlap","text-allow-overlap"),ve=me==="always",Ce=a.aE(v,"icon-overlap","icon-allow-overlap"),be=Ce==="always",ke=v.get("text-rotation-alignment")==="map",Le=v.get("text-pitch-alignment")==="map",Se=v.get("icon-text-fit")!=="none",Ne=v.get("symbol-z-order")==="viewport-y",Qe=ve&&(be||!m.hasIconData()||pe),Ke=be&&(ve||!m.hasTextData()||fe);!m.collisionArrays&&V&&m.deserializeCollisionBoxes(V);const Xe=this.retainedQueryData[m.bucketInstanceId].tileID,et=this._getTerrainElevationFunc(Xe),Rt=this.transform.getFastPathSimpleProjectionMatrix(Xe),Et=(gt,Gt,_r)=>{var Gr,xn;if(s[gt.crossTileID])return;if(U)return void(this.placements[gt.crossTileID]=new Ar(!1,!1,!1));let Yr=!1,bn=!1,on=!0,Jr=null,an={box:null,placeable:!1,offscreen:null,occluded:!1},fo={placeable:!1},Dr=null,oo=null,mo=null,ns=0,os=0,is=0;Gt.textFeatureIndex?ns=Gt.textFeatureIndex:gt.useRuntimeCollisionCircles&&(ns=gt.featureIndex),Gt.verticalTextFeatureIndex&&(os=Gt.verticalTextFeatureIndex);const da=Gt.textBox;if(da){const Qo=Rn=>{let dn=a.an.horizontal;if(m.allowVerticalPlacement&&!Rn&&this.prevPlacement){const No=this.prevPlacement.placedOrientations[gt.crossTileID];No&&(this.placedOrientations[gt.crossTileID]=No,dn=No,this.markUsedOrientation(m,dn,gt))}return dn},Bi=(Rn,dn)=>{if(m.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&Gt.verticalTextBox){for(const No of m.writingModes)if(No===a.an.vertical?(an=dn(),fo=an):an=Rn(),an&&an.placeable)break}else an=Rn()},as=gt.textAnchorOffsetStartIndex,$s=gt.textAnchorOffsetEndIndex;if($s===as){const Rn=(dn,No)=>{const Kn=this.collisionIndex.placeCollisionBox(dn,me,B,Xe,E,Le,ke,w,ie.predicate,et,void 0,Rt);return Kn&&Kn.placeable&&(this.markUsedOrientation(m,No,gt),this.placedOrientations[gt.crossTileID]=No),Kn};Bi(()=>Rn(da,a.an.horizontal),()=>{const dn=Gt.verticalTextBox;return m.allowVerticalPlacement&&gt.numVerticalGlyphVertices>0&&dn?Rn(dn,a.an.vertical):{box:null,offscreen:null}}),Qo(an&&an.placeable)}else{let Rn=a.aD[(xn=(Gr=this.prevPlacement)===null||Gr===void 0?void 0:Gr.variableOffsets[gt.crossTileID])===null||xn===void 0?void 0:xn.anchor];const dn=(Kn,oy,mx)=>{const Np=Kn.x2-Kn.x1,Jc=Kn.y2-Kn.y1,Dl=gt.textBoxScale,Aa=Se&&Ce==="never"?oy:null;let go=null,za=me==="never"?1:2,Vp="never";Rn&&za++;for(let ss=0;ss<za;ss++){for(let Up=as;Up<$s;Up++){const Hp=m.textAnchorOffsets.get(Up);if(Rn&&Hp.textAnchor!==Rn)continue;const Qc=this.attemptAnchorPlacement(Hp,Kn,Np,Jc,Dl,ke,Le,B,Xe,E,ie,Vp,gt,m,mx,w,P,Aa,et);if(Qc&&(go=Qc.placedGlyphBoxes,go&&go.placeable))return Yr=!0,Jr=Qc.shift,go}Rn?Rn=null:Vp=me}return p&&!go&&(go={box:this.collisionIndex.placeCollisionBox(da,"always",B,Xe,E,Le,ke,w,ie.predicate,et,void 0,Rt).box,offscreen:!1,placeable:!1,occluded:!1}),go};Bi(()=>dn(da,Gt.iconBox,a.an.horizontal),()=>{const Kn=Gt.verticalTextBox;return m.allowVerticalPlacement&&(!an||!an.placeable)&&gt.numVerticalGlyphVertices>0&&Kn?dn(Kn,Gt.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}}),an&&(Yr=an.placeable,on=an.offscreen);const No=Qo(an&&an.placeable);if(!Yr&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[gt.crossTileID];Kn&&(this.variableOffsets[gt.crossTileID]=Kn,this.markUsedJustification(m,Kn.anchor,gt,No))}}}if(Dr=an,Yr=Dr&&Dr.placeable,on=Dr&&Dr.offscreen,gt.useRuntimeCollisionCircles){const Qo=m.text.placedSymbolArray.get(gt.centerJustifiedTextSymbolIndex),Bi=a.ao(m.textSizeData,Z,Qo),as=v.get("text-padding");oo=this.collisionIndex.placeCollisionCircles(me,Qo,m.lineVertexArray,m.glyphOffsetArray,Bi,E,z,p,Le,ie.predicate,gt.collisionCircleDiameter,as,w,et),oo.circles.length&&oo.collisionDetected&&!p&&a.w("Collisions detected, but collision boxes are not shown"),Yr=ve||oo.circles.length>0&&!oo.collisionDetected,on=on&&oo.offscreen}if(Gt.iconFeatureIndex&&(is=Gt.iconFeatureIndex),Gt.iconBox){const Qo=Bi=>this.collisionIndex.placeCollisionBox(Bi,Ce,B,Xe,E,Le,ke,P,ie.predicate,et,Se&&Jr?Jr:void 0,Rt);fo&&fo.placeable&&Gt.verticalIconBox?(mo=Qo(Gt.verticalIconBox),bn=mo.placeable):(mo=Qo(Gt.iconBox),bn=mo.placeable),on=on&&mo.offscreen}const Xc=fe||gt.numHorizontalGlyphVertices===0&&gt.numVerticalGlyphVertices===0,Yc=pe||gt.numIconVertices===0;Xc||Yc?Yc?Xc||(bn=bn&&Yr):Yr=bn&&Yr:bn=Yr=bn&&Yr;const zl=bn&&mo.placeable;if(Yr&&Dr.placeable&&this.collisionIndex.insertCollisionBox(Dr.box,me,v.get("text-ignore-placement"),m.bucketInstanceId,fo&&fo.placeable&&os?os:ns,ie.ID),zl&&this.collisionIndex.insertCollisionBox(mo.box,Ce,v.get("icon-ignore-placement"),m.bucketInstanceId,is,ie.ID),oo&&Yr&&this.collisionIndex.insertCollisionCircles(oo.circles,me,v.get("text-ignore-placement"),m.bucketInstanceId,ns,ie.ID),p&&this.storeCollisionData(m.bucketInstanceId,_r,Gt,Dr,mo,oo),gt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gt.crossTileID]=new Ar((Yr||Qe)&&!(Dr!=null&&Dr.occluded),(bn||Ke)&&!(mo!=null&&mo.occluded),on||m.justReloaded),s[gt.crossTileID]=!0};if(Ne){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const gt=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Gt=gt.length-1;Gt>=0;--Gt){const _r=gt[Gt];Et(m.symbolInstances.get(_r),m.collisionArrays[_r],_r)}}else for(let gt=r.symbolInstanceStart;gt<r.symbolInstanceEnd;gt++)Et(m.symbolInstances.get(gt),m.collisionArrays[gt],gt);m.justReloaded=!1}storeCollisionData(r,s,p,m,v,w){if(p.textBox||p.iconBox){let P,E;this.collisionBoxArrays.has(r)?P=this.collisionBoxArrays.get(r):(P=new Map,this.collisionBoxArrays.set(r,P)),P.has(s)?E=P.get(s):(E={text:null,icon:null},P.set(s,E)),p.textBox&&(E.text=m.box),p.iconBox&&(E.icon=v.box)}if(w){let P=this.collisionCircleArrays[r];P===void 0&&(P=this.collisionCircleArrays[r]=[]);for(let E=0;E<w.circles.length;E+=4)P.push(w.circles[E+0]-rn),P.push(w.circles[E+1]-rn),P.push(w.circles[E+2]),P.push(w.collisionDetected?1:0)}}markUsedJustification(r,s,p,m){let v;v=m===a.an.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[a.aF(s)];const w=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const P of w)P>=0&&(r.text.placedSymbolArray.get(P).crossTileID=v>=0&&P!==v?0:p.crossTileID)}markUsedOrientation(r,s,p){const m=s===a.an.horizontal||s===a.an.horizontalOnly?s:0,v=s===a.an.vertical?s:0,w=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const P of w)r.text.placedSymbolArray.get(P).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let p=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const m=s?s.symbolFadeChange(r):1,v=s?s.opacities:{},w=s?s.variableOffsets:{},P=s?s.placedOrientations:{};for(const E in this.placements){const z=this.placements[E],B=v[E];B?(this.opacities[E]=new Co(B,m,z.text,z.icon),p=p||z.text!==B.text.placed||z.icon!==B.icon.placed):(this.opacities[E]=new Co(null,m,z.text,z.icon,z.skipFade),p=p||z.text||z.icon)}for(const E in v){const z=v[E];if(!this.opacities[E]){const B=new Co(z,m,!1,!1);B.isHidden()||(this.opacities[E]=B,p=p||z.text.placed||z.icon.placed)}}for(const E in w)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=w[E]);for(const E in P)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=P[E]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:r)}updateLayerOpacities(r,s){const p={};for(const m of s){const v=m.getBucket(r);v&&m.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(r,s,p,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const v=r.layers[0],w=v.layout,P=new Co(null,0,!1,!1,!0),E=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),B=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=w.get("text-rotation-alignment")==="map",V=w.get("text-pitch-alignment")==="map",Z=w.get("icon-text-fit")!=="none",ie=new Co(null,0,E&&(z||!r.hasIconData()||w.get("icon-optional")),z&&(E||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const fe=(me,ve,Ce)=>{for(let be=0;be<ve/4;be++)me.opacityVertexArray.emplaceBack(Ce);me.hasVisibleVertices=me.hasVisibleVertices||Ce!==wc},pe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let me=0;me<r.symbolInstances.length;me++){const ve=r.symbolInstances.get(me),{numHorizontalGlyphVertices:Ce,numVerticalGlyphVertices:be,crossTileID:ke}=ve;let Le=this.opacities[ke];p[ke]?Le=P:Le||(Le=ie,this.opacities[ke]=Le),p[ke]=!0;const Se=ve.numIconVertices>0,Ne=this.placedOrientations[ve.crossTileID],Qe=Ne===a.an.vertical,Ke=Ne===a.an.horizontal||Ne===a.an.horizontalOnly;if(Ce>0||be>0){const et=gg(Le.text);fe(r.text,Ce,Qe?wc:et),fe(r.text,be,Ke?wc:et);const Rt=Le.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(Gt=>{Gt>=0&&(r.text.placedSymbolArray.get(Gt).hidden=Rt||Qe?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=Rt||Ke?1:0);const Et=this.variableOffsets[ve.crossTileID];Et&&this.markUsedJustification(r,Et.anchor,ve,Ne);const gt=this.placedOrientations[ve.crossTileID];gt&&(this.markUsedJustification(r,"left",ve,gt),this.markUsedOrientation(r,gt,ve))}if(Se){const et=gg(Le.icon),Rt=!(Z&&ve.verticalPlacedIconSymbolIndex&&Qe);ve.placedIconSymbolIndex>=0&&(fe(r.icon,ve.numIconVertices,Rt?et:wc),r.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=Le.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(fe(r.icon,ve.numVerticalIconVertices,Rt?wc:et),r.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=Le.icon.isHidden())}const Xe=pe&&pe.has(me)?pe.get(me):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const et=r.collisionArrays[me];if(et){let Rt=new a.P(0,0);if(et.textBox||et.verticalTextBox){let Et=!0;if(B){const gt=this.variableOffsets[ke];gt?(Rt=Bn(gt.anchor,gt.width,gt.height,gt.textOffset,gt.textBoxScale),U&&Rt._rotate(V?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Et=!1}if(et.textBox||et.verticalTextBox){let gt;et.textBox&&(gt=Qe),et.verticalTextBox&&(gt=Ke),zr(r.textCollisionBox.collisionVertexArray,Le.text.placed,!Et||gt,Xe.text,Rt.x,Rt.y)}}if(et.iconBox||et.verticalIconBox){const Et=!!(!Ke&&et.verticalIconBox);let gt;et.iconBox&&(gt=Et),et.verticalIconBox&&(gt=!Et),zr(r.iconCollisionBox.collisionVertexArray,Le.icon.placed,gt,Xe.icon,Z?Rt.x:0,Z?Rt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,s){const p=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*p>r}setStale(){this.stale=!0}}function zr(y,r,s,p,m,v){p&&p.length!==0||(p=[0,0,0,0]);const w=p[0]-rn,P=p[1]-rn,E=p[2]-rn,z=p[3]-rn;y.emplaceBack(r?1:0,s?1:0,m||0,v||0,w,P),y.emplaceBack(r?1:0,s?1:0,m||0,v||0,E,P),y.emplaceBack(r?1:0,s?1:0,m||0,v||0,E,z),y.emplaceBack(r?1:0,s?1:0,m||0,v||0,w,z)}const Pn=Math.pow(2,25),$o=Math.pow(2,24),li=Math.pow(2,17),Di=Math.pow(2,16),fg=Math.pow(2,9),sl=Math.pow(2,8),mg=Math.pow(2,1);function gg(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,s=Math.floor(127*y.opacity);return s*Pn+r*$o+s*li+r*Di+s*fg+r*sl+s*mg+r}const wc=0;class U_{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,s,p,m,v){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(s.getBucketParts(w,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((P,E)=>P.sortKey-E.sortKey));this._currentPartIndex<w.length;)if(s.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,v())return!0;return!1}}class yg{constructor(r,s,p,m,v,w,P,E){this.placement=new nn(r,s,w,P,E),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,s,p){const m=M.now(),v=()=>!this._forceFullPlacement&&M.now()-m>2;for(;this._currentPlacementIndex>=0;){const w=s[r[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=P)&&(!w.maxzoom||w.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new U_(w)),this._inProgressLayer.continuePlacement(p[w.source],this.placement,this._showCollisionBoxes,w,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ll=512/a.$/2;class Xh{constructor(r,s,p){this.tileID=r,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let v=0;v<s.length;v++){const w=s.get(v),P=w.key,E=m.get(P);E?E.push(w):m.set(P,[w])}for(const[v,w]of m){const P={positions:w.map(E=>({x:Math.floor(E.anchorX*ll),y:Math.floor(E.anchorY*ll)})),crossTileIDs:w.map(E=>E.crossTileID)};if(P.positions.length>128){const E=new a.aH(P.positions.length,16,Uint16Array);for(const{x:z,y:B}of P.positions)E.add(z,B);E.finish(),delete P.positions,P.index=E}this._symbolsByKey[v]=P}}getScaledCoordinates(r,s){const{x:p,y:m,z:v}=this.tileID.canonical,{x:w,y:P,z:E}=s.canonical,z=ll/Math.pow(2,E-v),B=(P*a.$+r.anchorY)*z,U=m*a.$*ll;return{x:Math.floor((w*a.$+r.anchorX)*z-p*a.$*ll),y:Math.floor(B-U)}}findMatches(r,s,p){const m=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let v=0;v<r.length;v++){const w=r.get(v);if(w.crossTileID)continue;const P=this._symbolsByKey[w.key];if(!P)continue;const E=this.getScaledCoordinates(w,s);if(P.index){const z=P.index.range(E.x-m,E.y-m,E.x+m,E.y+m).sort();for(const B of z){const U=P.crossTileIDs[B];if(!p[U]){p[U]=!0,w.crossTileID=U;break}}}else if(P.positions)for(let z=0;z<P.positions.length;z++){const B=P.positions[z],U=P.crossTileIDs[z];if(Math.abs(B.x-E.x)<=m&&Math.abs(B.y-E.y)<=m&&!p[U]){p[U]=!0,w.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Yh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vg{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const s=Math.round((r-this.lng)/360);if(s!==0)for(const p in this.indexes){const m=this.indexes[p],v={};for(const w in m){const P=m[w];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+s),v[P.tileID.key]=P}this.indexes[p]=v}this.lng=r}addBucket(r,s,p){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<s.symbolInstances.length;v++)s.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const w=this.indexes[v];if(Number(v)>r.overscaledZ)for(const P in w){const E=w[P];E.tileID.isChildOf(r)&&E.findMatches(s.symbolInstances,r,m)}else{const P=w[r.scaledTo(Number(v)).key];P&&P.findMatches(s.symbolInstances,r,m)}}for(let v=0;v<s.symbolInstances.length;v++){const w=s.symbolInstances.get(v);w.crossTileID||(w.crossTileID=p.generate(),m[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Xh(r,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(r,s){for(const p of s.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let s=!1;for(const p in this.indexes){const m=this.indexes[p];for(const v in m)r[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[v]),delete m[v],s=!0)}return s}}class Nu{constructor(){this.layerIndexes={},this.crossTileIDs=new Yh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,s,p){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new vg);let v=!1;const w={};m.handleWrapJump(p);for(const P of s){const E=P.getBucket(r);E&&r.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,E,this.crossTileIDs)&&(v=!0),w[E.bucketInstanceId]=!0)}return m.removeStaleBuckets(w)&&(v=!0),v}pruneUnusedLayers(r){const s={};r.forEach(p=>{s[p]=!0});for(const p in this.layerIndexes)s[p]||delete this.layerIndexes[p]}}var Vu="void main() {fragColor=vec4(1.0);}";const aa={prelude:Sr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Sr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Sr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Sr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Sr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Sr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Sr(Vu,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Sr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Sr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Sr(Vu,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Sr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Sr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Sr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Sr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Sr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Sr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Sr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Sr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Sr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Sr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Sr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Sr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Sr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Sr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Sr(y,r){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=r.match(/in ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=v?v.concat(m):m,P={};return{fragmentSource:y=y.replace(s,(E,z,B,U,V)=>(P[V]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${V}
in ${B} ${U} ${V};
#else
uniform ${B} ${U} u_${V};
#endif
`:`
#ifdef HAS_UNIFORM_u_${V}
    ${B} ${U} ${V} = u_${V};
#endif
`)),vertexSource:r=r.replace(s,(E,z,B,U,V)=>{const Z=U==="float"?"vec2":"vec4",ie=V.match(/color/)?"color":Z;return P[V]?z==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
in ${B} ${Z} a_${V};
out ${B} ${U} ${V};
#else
uniform ${B} ${U} u_${V};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${B} ${U} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${ie}(a_${V}, u_${V}_t);
#else
    ${B} ${U} ${V} = u_${V};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
in ${B} ${Z} a_${V};
#else
uniform ${B} ${U} u_${V};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${B} ${U} ${V} = a_${V};
#else
    ${B} ${U} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${B} ${U} ${V} = unpack_mix_${ie}(a_${V}, u_${V}_t);
#else
    ${B} ${U} ${V} = u_${V};
#endif
`}),staticAttributes:p,staticUniforms:w}}class Ea{constructor(r,s,p){this.vertexBuffer=r,this.indexBuffer=s,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ka=a.aI([{name:"a_pos",type:"Int16",components:2}]);const Ts="#define PROJECTION_MERCATOR",Jh="mercator";class Qh{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Jh}get shaderDefine(){return Ts}get shaderPreludeCode(){return aa.projectionMercator}get vertexShaderPreludeCode(){return aa.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,s,p,m,v){if(this._cachedMesh)return this._cachedMesh;const w=new a.aK;w.emplaceBack(0,0),w.emplaceBack(a.$,0),w.emplaceBack(0,a.$),w.emplaceBack(a.$,a.$);const P=r.createVertexBuffer(w,ka.members),E=a.aL.simpleSegment(0,0,4,2),z=new a.aM;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);const B=r.createIndexBuffer(z);return this._cachedMesh=new Ea(P,B,E),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class vi{constructor(r=0,s=0,p=0,m=0){if(isNaN(r)||r<0||isNaN(s)||s<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=s,this.left=p,this.right=m}interpolate(r,s,p){return s.top!=null&&r.top!=null&&(this.top=a.C.number(r.top,s.top,p)),s.bottom!=null&&r.bottom!=null&&(this.bottom=a.C.number(r.bottom,s.bottom,p)),s.left!=null&&r.left!=null&&(this.left=a.C.number(r.left,s.left,p)),s.right!=null&&r.right!=null&&(this.right=a.C.number(r.right,s.right,p)),this}getCenter(r,s){const p=a.ag((this.left+r-this.right)/2,0,r),m=a.ag((this.top+s-this.bottom)/2,0,s);return new a.P(p,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new vi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ma(y,r){if(!y.renderWorldCopies||y.lngRange)return;const s=r.lng-y.center.lng;r.lng+=s>180?-360:s<-180?360:0}function Cr(y){return Math.max(0,Math.floor(y))}class Sc{constructor(r,s,p,m,v,w){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=s||0,this._maxZoom=p||22,this._minPitch=m??0,this._maxPitch=v??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Cr(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new vi,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,s,p){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Cr(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new vi(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!p&&r.autoCalculateNearFarZ,s&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const s=a.aN(r,-180,180)*Math.PI/180;var p,m,v,w,P,E,z,B,U;this._bearingInRadians!==s&&(this._unmodified=!1,this._bearingInRadians=s,this._calcMatrices(),this._rotationMatrix=C(),p=this._rotationMatrix,v=-this._bearingInRadians,w=(m=this._rotationMatrix)[0],P=m[1],E=m[2],z=m[3],B=Math.sin(v),U=Math.cos(v),p[0]=w*U+E*B,p[1]=P*U+z*B,p[2]=w*-B+E*U,p[3]=P*-B+z*U)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const s=a.ag(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==s&&(this._unmodified=!1,this._pitchInRadians=s,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const s=r/180*Math.PI;this._rollInRadians!==s&&(this._unmodified=!1,this._rollInRadians=s,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(r){r=a.ag(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.ad(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const s=this.getConstrained(this._center,r).zoom;this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this._tileZoom=Math.max(0,Math.floor(s)),this._scale=a.ae(s),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,s){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=s,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,s,p){this._unmodified=!1,this._edgeInsets.interpolate(r,s,p),this._constrain(),this._calcMatrices()}resize(r,s,p=!0){this._width=r,this._height=s,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new ur([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ah,a.ah])}getConstrained(r,s){return this._callbacks.getConstrained(r,s)}getCameraQueryGeometry(r,s){if(s.length===1)return[s[0],r];{const{minX:p,minY:m,maxX:v,maxY:w}=a.a1.fromPoints(s).extend(r);return[new a.P(p,m),new a.P(v,m),new a.P(v,w),new a.P(p,w),new a.P(p,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:s,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(s),this.setZoom(p),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.af(new Float64Array(16));a.N(r,r,[this._width/2,-this._height/2,1]),a.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.af(new Float64Array(16)),a.N(r,r,[1,-1,1]),a.M(r,r,[-1,-1,0]),a.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,s,p,m){const v=p!==void 0?p:this.bearing,w=m=m!==void 0?m:this.pitch,P=a.a0.fromLngLat(r,s),E=-Math.cos(a.ad(w)),z=Math.sin(a.ad(w)),B=z*Math.sin(a.ad(v)),U=-z*Math.cos(a.ad(v));let V=this.elevation;const Z=s-V;let ie;E*Z>=0||Math.abs(E)<.1?(ie=1e4,V=s+ie*E):ie=-Z/E;let fe,pe,me=a.aP(1,P.y),ve=0;do{if(ve+=1,ve>10)break;pe=ie/me,fe=new a.a0(P.x+B*pe,P.y+U*pe),me=1/fe.meterInMercatorCoordinateUnits()}while(Math.abs(ie-pe*me)>1e-12);return{center:fe.toLngLat(),elevation:V,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/pe/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const s=a.ai(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/s,m=a.a0.fromLngLat(this.center,this.elevation),v=oe(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=r;const w=this.calculateCenterFromCameraLngLatAlt(v.toLngLat(),a.aP(v.z,m.y),this.bearing,this.pitch);this._elevation=w.elevation,this._center=w.center,this.setZoom(w.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=a.ai(1,this.center.lat)*this.worldSize;return oe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const s=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/s,r.canonical.y/s,1/s/a.$,1/s/a.$]}}class Uu{constructor(r,s){this.min=r,this.max=s,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],p=a.aS(this.min),m=a.aS(this.max);for(let v=0;v<s.length;v++)p[v]=s[v]?this.min[v]:this.center[v],m[v]=s[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new Uu(p,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let s=!0;for(let p=0;p<r.planes.length;p++){const m=this.intersectsPlane(r.planes[p]);if(m===0)return 0;m===1&&(s=!1)}return s?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let s=r[3],p=r[3];for(let m=0;m<3;m++)r[m]>0?(s+=r[m]*this.min[m],p+=r[m]*this.max[m]):(p+=r[m]*this.min[m],s+=r[m]*this.max[m]);return s>=0?2:p<0?0:1}}class ep{distanceToTile2d(r,s,p,m){const v=m.distanceX([r,s]),w=m.distanceY([r,s]);return Math.hypot(v,w)}getWrap(r,s,p){return p}getTileBoundingVolume(r,s,p,m){var v,w;let P=p,E=p;if(m!=null&&m.terrain){const B=new a.Z(r.z,s,r.z,r.x,r.y),U=m.terrain.getMinMaxElevation(B);P=(v=U.minElevation)!==null&&v!==void 0?v:p,E=(w=U.maxElevation)!==null&&w!==void 0?w:p}const z=1<<r.z;return new Uu([s+r.x/z,r.y/z,P],[s+(r.x+1)/z,(r.y+1)/z,E])}allowVariableZoom(r,s){const p=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,m=a.ag(78.5-p/2,0,60);return!!s.terrain||r.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class Po{constructor(r,s,p){this.points=r,this.planes=s,this.aabb=p}static fromInvProjectionMatrix(r,s=1,p=0,m,v){const w=v?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],P=Math.pow(2,p),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(V=>function(Z,ie,fe,pe){const me=a.av([],Z,ie),ve=1/me[3]/fe*pe;return a.aX(me,me,[ve,ve,1/me[3],ve])}(V,r,s,P));m&&function(V,Z,ie,fe){const pe=fe?4:0,me=fe?0:4;let ve=0;const Ce=[],be=[];for(let Se=0;Se<4;Se++){const Ne=a.aT([],V[Se+me],V[Se+pe]),Qe=a.aY(Ne);a.aQ(Ne,Ne,1/Qe),Ce.push(Qe),be.push(Ne)}for(let Se=0;Se<4;Se++){const Ne=a.aZ(V[Se+pe],be[Se],ie);ve=Ne!==null&&Ne>=0?Math.max(ve,Ne):Math.max(ve,Ce[Se])}const ke=function(Se,Ne){const Qe=a.aT([],Se[Ne[0]],Se[Ne[1]]),Ke=a.aT([],Se[Ne[2]],Se[Ne[1]]),Xe=[0,0,0,0];return a.aU(Xe,a.aV([],Qe,Ke)),Xe[3]=-a.aW(Xe,Se[Ne[0]]),Xe}(V,Z),Le=function(Se,Ne){const Qe=a.a_(Se),Ke=a.a$([],Se,1/Qe),Xe=a.aT([],Ne,a.aQ([],Ke,a.aW(Ne,Ke))),et=a.a_(Xe);if(et>0){const Rt=Math.sqrt(1-Ke[3]*Ke[3]),Et=a.aQ([],Ke,-Ke[3]),gt=a.aR([],Et,a.aQ([],Xe,Rt/et));return a.b0(Ne,gt)}return null}(ie,ke);if(Le!==null){const Se=Le/a.aW(be[0],ke);ve=Math.min(ve,Se)}for(let Se=0;Se<4;Se++){const Ne=Math.min(ve,Ce[Se]);V[Se+me]=[V[Se+pe][0]+be[Se][0]*Ne,V[Se+pe][1]+be[Se][1]*Ne,V[Se+pe][2]+be[Se][2]*Ne,1]}}(E,w[0],m,v);const z=w.map(V=>{const Z=a.aT([],E[V[0]],E[V[1]]),ie=a.aT([],E[V[2]],E[V[1]]),fe=a.aU([],a.aV([],Z,ie)),pe=-a.aW(fe,E[V[1]]);return fe.concat(pe)}),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],U=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const V of E)for(let Z=0;Z<3;Z++)B[Z]=Math.min(B[Z],V[Z]),U[Z]=Math.max(U[Z],V[Z]);return new Po(E,z,new Uu(B,U))}}class Fn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,p){return this._helper.interpolatePadding(r,s,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s,p=!0){this._helper.resize(r,s,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,s){}constructor(r,s,p,m,v){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Sc({calcMatrices:()=>{this._calcMatrices()},getConstrained:(w,P)=>this.getConstrained(w,P)},r,s,p,m,v),this._coveringTilesDetailsProvider=new ep}clone(){const r=new Fn;return r.apply(this),r}apply(r,s,p){this._helper.apply(r,s,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const s=[new a.b1(0,r)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),v=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),w=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),P=Math.floor(Math.min(p.x,m.x,v.x,w.x)),E=Math.floor(Math.max(p.x,m.x,v.x,w.x)),z=1;for(let B=P-z;B<=E+z;B++)B!==0&&s.push(new a.b1(B,r))}return s}getCameraFrustum(){return Po.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const s=this.screenPointToLocation(this.centerPoint,r),p=r?r.getElevationForLngLatZoom(s,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(r,s){const p=a.ai(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(s,p),v=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),w=a.a0.fromLngLat(r),P=new a.a0(w.x-(m.x-v.x),w.y-(m.y-v.y));this.setCenter(P==null?void 0:P.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,s){return s?this.coordinatePoint(a.a0.fromLngLat(r),s.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(r))}screenPointToLocation(r,s){var p;return(p=this.screenPointToMercatorCoordinate(r,s))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(r,s){if(s){const p=s.pointCoordinate(r);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,s){const p=s||0,m=[r.x,r.y,0,1],v=[r.x,r.y,1,1];a.av(m,m,this._pixelMatrixInverse),a.av(v,v,this._pixelMatrixInverse);const w=m[3],P=v[3],E=m[1]/w,z=v[1]/P,B=m[2]/w,U=v[2]/P,V=B===U?0:(p-B)/(U-B);return new a.a0(a.C.number(m[0]/w,v[0]/P,V)/this.worldSize,a.C.number(E,z,V)/this.worldSize,p)}coordinatePoint(r,s=0,p=this._pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,s,1];return a.av(m,m,p),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this._helper._height/2-te(this));return new ur().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,s){return s?s.pointCoordinate(r)!=null:r.y>this.height/2-te(this)}calculatePosMatrix(r,s=!1,p){var m;const v=(m=r.key)!==null&&m!==void 0?m:a.b2(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),w=s?this._alignedPosMatrixCache:this._posMatrixCache;if(w.has(v)){const z=w.get(v);return p?z.f32:z.f64}const P=H(r,this.worldSize);a.O(P,s?this._alignedProjMatrix:this._viewProjMatrix,P);const E={f64:P,f32:new Float32Array(P)};return w.set(v,E),p?E.f32:E.f64}calculateFogMatrix(r){const s=r.key,p=this._fogMatrixCacheF32;if(p.has(s))return p.get(s);const m=H(r,this.worldSize);return a.O(m,this._fogMatrix,m),p.set(s,new Float32Array(m)),p.get(s)}getConstrained(r,s){s=a.ag(+s,this.minZoom,this.maxZoom);const p={center:new a.S(r.lng,r.lat),zoom:s};let m=this._helper._lngRange;if(!this._helper._renderWorldCopies&&m===null){const Ce=179.9999999999;m=[-Ce,Ce]}const v=this.tileSize*a.ae(p.zoom);let w=0,P=v,E=0,z=v,B=0,U=0;const{x:V,y:Z}=this.size;if(this._helper._latRange){const Ce=this._helper._latRange;w=a.U(Ce[1])*v,P=a.U(Ce[0])*v,P-w<Z&&(B=Z/(P-w))}m&&(E=a.aN(a.V(m[0])*v,0,v),z=a.aN(a.V(m[1])*v,0,v),z<E&&(z+=v),z-E<V&&(U=V/(z-E)));const{x:ie,y:fe}=_e(v,r);let pe,me;const ve=Math.max(U||0,B||0);if(ve){const Ce=new a.P(U?(z+E)/2:ie,B?(P+w)/2:fe);return p.center=X(v,Ce).wrap(),p.zoom+=a.aj(ve),p}if(this._helper._latRange){const Ce=Z/2;fe-Ce<w&&(me=w+Ce),fe+Ce>P&&(me=P-Ce)}if(m){const Ce=(E+z)/2;let be=ie;this._helper._renderWorldCopies&&(be=a.aN(ie,Ce-v/2,Ce+v/2));const ke=V/2;be-ke<E&&(pe=E+ke),be+ke>z&&(pe=z-ke)}if(pe!==void 0||me!==void 0){const Ce=new a.P(pe??ie,me??fe);p.center=X(v,Ce).wrap()}return p}calculateCenterFromCameraLngLatAlt(r,s,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,p,m)}_calculateNearFarZIfNeeded(r,s,p){if(!this._helper.autoCalculateNearFarZ)return;const m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),v=r-m*this._helper._pixelPerMeter/Math.cos(s),w=m<0?v:r,P=Math.PI/2+this.pitchInRadians,E=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+p.y/this.height),z=Math.sin(E)*w/Math.sin(a.ag(Math.PI-P-E,.01,Math.PI-.01)),B=te(this),U=Math.atan(B/this._helper.cameraToCenterDistance),V=a.ad(.75),Z=U>V?2*U*(.5+p.y/(2*B)):V,ie=Math.sin(Z)*w/Math.sin(a.ag(Math.PI-P-Z,.01,Math.PI-.01)),fe=Math.min(z,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-s)*fe+w),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,s=_e(this.worldSize,this.center),p=s.x,m=s.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const v=a.ad(Math.min(this.pitch,wr)),w=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(v));let P;this._calculateNearFarZIfNeeded(w,v,r),P=new Float64Array(16),a.b3(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,P),P[8]=2*-r.x/this._helper._width,P[9]=2*r.y/this._helper._height,this._projectionMatrix=a.b4(P),a.N(P,P,[1,-1,1]),a.M(P,P,[0,0,-this._helper.cameraToCenterDistance]),a.b5(P,P,-this.rollInRadians),a.b6(P,P,this.pitchInRadians),a.b5(P,P,-this.bearingInRadians),a.M(P,P,[-p,-m,0]),this._mercatorMatrix=a.N([],P,[this.worldSize,this.worldSize,this.worldSize]),a.N(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),a.M(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=a.ap([],P);const E=[0,0,-1,1];a.av(E,E,this._invViewProjMatrix),this._cameraPosition=[E[0]/E[3],E[1]/E[3],E[2]/E[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,w,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-p,-m,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);const z=this._helper._width%2/2,B=this._helper._height%2/2,U=Math.cos(this.bearingInRadians),V=Math.sin(-this.bearingInRadians),Z=p-Math.round(p)+U*z+V*B,ie=m-Math.round(m)+U*B+V*z,fe=new Float64Array(P);if(a.M(fe,fe,[Z>.5?Z-1:Z,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=fe,P=a.ap(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new a.P(0,0)),s=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.av(s,s,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=a.ai(1,this.center.lat)*this.worldSize;return oe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,s){const p=a.a0.fromLngLat(r),m=[p.x*this.worldSize,p.y*this.worldSize,s,1];return a.av(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(r){const{overscaledTileID:s,aligned:p,applyTerrainMatrix:m}=r,v=this._helper.getMercatorTileCoordinates(s),w=s?this.calculatePosMatrix(s,p,!0):null;let P;return P=s&&s.terrainRttPosMatrix32f&&m?s.terrainRttPosMatrix32f:w||a.b7(),{mainMatrix:P,tileMercatorCoords:v,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,s,p){return 1}transformLightDirection(r){return a.aS(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,s,p,m){const v=this.calculatePosMatrix(p);let w;m?(w=[r,s,m(r,s),1],a.av(w,w,v)):(w=[r,s,0,1],Lo(w,w,v));const P=w[3];return{point:new a.P(w[0]/P,w[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(r){for(const s of r)this.calculatePosMatrix(s)}getMatrixForModel(r,s){const p=a.a0.fromLngLat(r,s),m=p.meterInMercatorCoordinateUnits(),v=a.b8();return a.M(v,v,[p.x,p.y,p.z]),a.b5(v,v,Math.PI),a.b6(v,v,Math.PI/2),a.N(v,v,[-m,m,m]),v}getProjectionDataForCustomLayer(r=!0){const s=new a.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:s,applyGlobeMatrix:r}),m=H(s,this.worldSize);a.O(m,this._viewProjMatrix,m),p.tileMercatorCoords=[0,0,1,1];const v=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],w=a.b9();return a.N(w,m,v),p.fallbackMatrix=w,p.mainMatrix=w,p}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function To(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ro(y){if(y.useSlerp)if(y.k<1){const r=a.ba(y.startEulerAngles.roll,y.startEulerAngles.pitch,y.startEulerAngles.bearing),s=a.ba(y.endEulerAngles.roll,y.endEulerAngles.pitch,y.endEulerAngles.bearing),p=new Float64Array(4);a.bb(p,r,s,y.k);const m=a.bc(p);y.tr.setRoll(m.roll),y.tr.setPitch(m.pitch),y.tr.setBearing(m.bearing)}else y.tr.setRoll(y.endEulerAngles.roll),y.tr.setPitch(y.endEulerAngles.pitch),y.tr.setBearing(y.endEulerAngles.bearing);else y.tr.setRoll(a.C.number(y.startEulerAngles.roll,y.endEulerAngles.roll,y.k)),y.tr.setPitch(a.C.number(y.startEulerAngles.pitch,y.endEulerAngles.pitch,y.k)),y.tr.setBearing(a.C.number(y.startEulerAngles.bearing,y.endEulerAngles.bearing,y.k))}function vn(y,r,s,p,m){const v=m.padding,w=_e(m.worldSize,s.getNorthWest()),P=_e(m.worldSize,s.getNorthEast()),E=_e(m.worldSize,s.getSouthEast()),z=_e(m.worldSize,s.getSouthWest()),B=a.ad(-p),U=w.rotate(B),V=P.rotate(B),Z=E.rotate(B),ie=z.rotate(B),fe=new a.P(Math.max(U.x,V.x,ie.x,Z.x),Math.max(U.y,V.y,ie.y,Z.y)),pe=new a.P(Math.min(U.x,V.x,ie.x,Z.x),Math.min(U.y,V.y,ie.y,Z.y)),me=fe.sub(pe),ve=(m.width-(v.left+v.right+r.left+r.right))/me.x,Ce=(m.height-(v.top+v.bottom+r.top+r.bottom))/me.y;if(Ce<0||ve<0)return void To();const be=Math.min(a.aj(m.scale*Math.min(ve,Ce)),y.maxZoom),ke=a.P.convert(y.offset),Le=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.ad(p)),Se=ke.add(Le).mult(m.scale/a.ae(be));return{center:X(m.worldSize,w.add(E).div(2).sub(Se)),zoom:be,bearing:p}}class Hu{get useGlobeControls(){return!1}handlePanInertia(r,s){return{easingOffset:r,easingCenter:s.center}}handleMapControlsRollPitchBearingZoom(r,s){r.bearingDelta&&s.setBearing(s.bearing+r.bearingDelta),r.pitchDelta&&s.setPitch(s.pitch+r.pitchDelta),r.rollDelta&&s.setRoll(s.roll+r.rollDelta),r.zoomDelta&&s.setZoom(s.zoom+r.zoomDelta)}handleMapControlsPan(r,s,p){r.around.distSqr(s.centerPoint)<.01||s.setLocationAtPoint(p,r.around)}cameraForBoxAndBearing(r,s,p,m,v){return vn(r,s,p,m,v)}handleJumpToCenterZoom(r,s){r.zoom!==(s.zoom!==void 0?+s.zoom:r.zoom)&&r.setZoom(+s.zoom),s.center!==void 0&&r.setCenter(a.S.convert(s.center))}handleEaseTo(r,s){const p=r.zoom,m=r.padding,v={roll:r.roll,pitch:r.pitch,bearing:r.bearing},w={roll:s.roll===void 0?r.roll:s.roll,pitch:s.pitch===void 0?r.pitch:s.pitch,bearing:s.bearing===void 0?r.bearing:s.bearing},P=s.zoom!==void 0,E=!r.isPaddingEqual(s.padding);let z=!1;const B=P?+s.zoom:r.zoom;let U=r.centerPoint.add(s.offsetAsPoint);const V=r.screenPointToLocation(U),{center:Z,zoom:ie}=r.getConstrained(a.S.convert(s.center||V),B??p);Ma(r,Z);const fe=_e(r.worldSize,V),pe=_e(r.worldSize,Z).sub(fe),me=a.ae(ie-p);return z=ie!==p,{easeFunc:ve=>{if(z&&r.setZoom(a.C.number(p,ie,ve)),a.bd(v,w)||ro({startEulerAngles:v,endEulerAngles:w,tr:r,k:ve,useSlerp:v.roll!=w.roll}),E&&(r.interpolatePadding(m,s.padding,ve),U=r.centerPoint.add(s.offsetAsPoint)),s.around)r.setLocationAtPoint(s.around,s.aroundPoint);else{const Ce=a.ae(r.zoom-p),be=ie>p?Math.min(2,me):Math.max(.5,me),ke=Math.pow(be,1-ve),Le=X(r.worldSize,fe.add(pe.mult(ve*ke)).mult(Ce));r.setLocationAtPoint(r.renderWorldCopies?Le.wrap():Le,U)}},isZooming:z,elevationCenter:Z}}handleFlyTo(r,s){const p=s.zoom!==void 0,m=r.zoom,v=r.getConstrained(a.S.convert(s.center||s.locationAtOffset),p?+s.zoom:m),w=v.center,P=v.zoom;Ma(r,w);const E=_e(r.worldSize,s.locationAtOffset),z=_e(r.worldSize,w).sub(E),B=z.mag(),U=a.ae(P-m);let V;if(s.minZoom!==void 0){const Z=Math.min(+s.minZoom,m,P),ie=r.getConstrained(w,Z).zoom;V=a.ae(ie-m)}return{easeFunc:(Z,ie,fe,pe)=>{r.setZoom(Z===1?P:m+a.aj(ie));const me=Z===1?w:X(r.worldSize,E.add(z.mult(fe)).mult(ie));r.setLocationAtPoint(r.renderWorldCopies?me.wrap():me,pe)},scaleOfZoom:U,targetCenter:w,scaleOfMinZoom:V,pixelPathLength:B}}}class Mr{constructor(r,s,p){this.blendFunction=r,this.blendColor=s,this.mask=p}}Mr.Replace=[1,0],Mr.disabled=new Mr(Mr.Replace,a.be.transparent,[!1,!1,!1,!1]),Mr.unblended=new Mr(Mr.Replace,a.be.transparent,[!0,!0,!0,!0]),Mr.alphaBlended=new Mr([1,771],a.be.transparent,[!0,!0,!0,!0]);const Ko=2305;class fr{constructor(r,s,p){this.enable=r,this.mode=s,this.frontFace=p}}fr.disabled=new fr(!1,1029,Ko),fr.backCCW=new fr(!0,1029,Ko),fr.frontCCW=new fr(!0,1028,Ko);class vr{constructor(r,s,p){this.func=r,this.mask=s,this.range=p}}vr.ReadOnly=!1,vr.ReadWrite=!0,vr.disabled=new vr(519,vr.ReadOnly,[0,1]);const Is=7680;class hr{constructor(r,s,p,m,v,w){this.test=r,this.ref=s,this.mask=p,this.fail=m,this.depthFail=v,this.pass=w}}hr.disabled=new hr({func:519,mask:0},0,0,Is,Is,Is);const Es=new WeakMap;function Oo(y){var r;if(Es.has(y))return Es.get(y);{const s=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Es.set(y,s),s}}class cl{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const s=r.context,p=s.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const m=new a.aK;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);const v=new a.aM;v.emplaceBack(0,1,2),this._fullscreenTriangle=new Ea(s.createVertexBuffer(m,ka.members),s.createIndexBuffer(v),a.aL.simpleSegment(0,0,m.length,v.length)),this._resultBuffer=new Uint8Array(4),s.activeTexture.set(p.TEXTURE1);const w=p.createTexture();p.bindTexture(p.TEXTURE_2D,w),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=s.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(w),Oo(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,s){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,s),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,s=r.gl;r.activeTexture.set(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,s){const p=this._cachedRenderContext.context,m=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,m.TRIANGLES,vr.disabled,hr.disabled,Mr.unblended,fr.disabled,((v,w)=>({u_input:v,u_output_expected:w}))(r,s),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Oo(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);const v=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:v}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Oo(r)){const s=r.clientWaitSync(this._readbackQueue.sync,0,0);if(s===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(s===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=cl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let s=0;return s+=r[0]/256,s+=r[1]/65536,s+=r[2]/16777216,r[3]<127&&(s=-s),s/128}}const Xo=a.$/128;function tp(y,r){const s=y.granularity!==void 0?Math.max(y.granularity,1):1,p=s+(y.generateBorders?2:0),m=s+(y.extendToNorthPole||y.generateBorders?1:0)+(y.extendToSouthPole||y.generateBorders?1:0),v=p+1,w=m+1,P=y.generateBorders?-1:0,E=y.generateBorders||y.extendToNorthPole?-1:0,z=s+(y.generateBorders?1:0),B=s+(y.generateBorders||y.extendToSouthPole?1:0),U=v*w,V=p*m*6,Z=v*w>65536;if(Z&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ie=Z||r==="32bit",fe=new Int16Array(2*U);let pe=0;for(let Ce=E;Ce<=B;Ce++)for(let be=P;be<=z;be++){let ke=be/s*a.$;be===-1&&(ke=-Xo),be===s+1&&(ke=a.$+Xo);let Le=Ce/s*a.$;Ce===-1&&(Le=y.extendToNorthPole?a.bg:-Xo),Ce===s+1&&(Le=y.extendToSouthPole?a.bh:a.$+Xo),fe[pe++]=ke,fe[pe++]=Le}const me=ie?new Uint32Array(V):new Uint16Array(V);let ve=0;for(let Ce=0;Ce<m;Ce++)for(let be=0;be<p;be++){const ke=be+1+Ce*v,Le=be+(Ce+1)*v,Se=be+1+(Ce+1)*v;me[ve++]=be+Ce*v,me[ve++]=Le,me[ve++]=ke,me[ve++]=ke,me[ve++]=Le,me[ve++]=Se}return{vertices:fe.buffer.slice(0),indices:me.buffer.slice(0),uses32bitIndices:ie}}const sa=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class _g{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return aa.projectionGlobe}get vertexShaderPreludeCode(){return aa.projectionMercator.vertexSource}get subdivisionGranularity(){return sa}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new cl(r));const s=a.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(s,p),v=M.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=v);const w=Math.min(Math.max((v-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(w))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,s,p,m,v){const w=(v==="stencil"?sa.stencil:sa.tile).getGranularityForZoomLevel(s.z);return this._getMesh(r,{granularity:w,generateBorders:p,extendToNorthPole:s.y===0&&m,extendToSouthPole:s.y===(1<<s.z)-1&&m})}_getMesh(r,s){const p=this._getMeshKey(s);if(p in this._tileMeshCache)return this._tileMeshCache[p];const m=function(v,w){const P=tp(w,"16bit"),E=a.aK.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),z=a.aM.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new Ea(v.createVertexBuffer(E,ka.members),v.createIndexBuffer(z),a.aL.simpleSegment(0,0,E.length,z.length))}(r,s);return this._tileMeshCache[p]=m,m}recalculate(r){}hasTransition(){const r=M.now();let s=!1;return s=s||(r-this._errorMeasurementLastChangeTime)/1e3<.7,s=s||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,s}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const xg=new a.r({type:new a.D(a.v.projection.type)});class Cc extends a.E{constructor(r){super(),this._transitionable=new a.t(xg),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new Qh,this._verticalPerspectiveProjection=new _g}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.bl){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,s,p,m,v){return this.currentProjection.getMeshFromTileID(r,s,p,m,v)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Pc(y){const r=ul(y.worldSize,y.center.lat);return 2*Math.PI*r}function Li(y,r,s,p,m){const v=1/(1<<m),w=r/a.$*v+p*v,P=a.bn((y/a.$*v+s*v)*Math.PI*2+Math.PI,2*Math.PI),E=2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI,z=Math.cos(E),B=new Float64Array(3);return B[0]=Math.sin(P)*z,B[1]=Math.sin(E),B[2]=Math.cos(P)*z,B}function no(y){return function(r,s){const p=Math.cos(s),m=new Float64Array(3);return m[0]=Math.sin(r)*p,m[1]=Math.sin(s),m[2]=Math.cos(r)*p,m}(y.lng*Math.PI/180,y.lat*Math.PI/180)}function ul(y,r){return y/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Tc(y){const r=Math.asin(y[1])/Math.PI*180,s=Math.sqrt(y[0]*y[0]+y[2]*y[2]);if(s>1e-6){const p=y[0]/s,m=Math.acos(y[2]/s),v=(p>0?m:-m)/Math.PI*180;return new a.S(a.aN(v,-180,180),r)}return new a.S(0,r)}function dl(y){return Math.cos(y*Math.PI/180)}function jn(y,r){const s=dl(y),p=dl(r);return a.aj(p/s)}function Ic(y,r){const s=y.rotate(r.bearingInRadians),p=r.zoom+jn(r.center.lat,0),m=a.bj(1/dl(r.center.lat),1/dl(Math.min(Math.abs(r.center.lat),60)),a.bm(p,7,3,0,1)),v=360/Pc({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.S(r.center.lng-s.x*v*m,a.ag(r.center.lat+s.y*v,-a.ah,a.ah))}function hl(y){const r=.5*y,s=Math.sin(r),p=Math.cos(r);return Math.log(s+p)-Math.log(p-s)}function pl(y,r,s,p){const m=y.lat+s*p;if(Math.abs(s)>1){const v=(Math.sign(y.lat+s)!==Math.sign(y.lat)?-Math.abs(y.lat):Math.abs(y.lat))*Math.PI/180,w=Math.abs(y.lat+s)*Math.PI/180,P=hl(v+p*(w-v)),E=hl(v),z=hl(w);return new a.S(y.lng+r*((P-E)/(z-E)),m)}return new a.S(y.lng+r*p,m)}class H_{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,s,p,m){const v=`${r.z}_${r.x}_${r.y}_${m!=null&&m.terrain?"t":""}`,w=this._cache.get(v);if(w)return w;const P=this._cachePrevious.get(v);if(P)return this._cache.set(v,P),P;const E=this._boundingVolumeFactory(r,s,p,m);return this._cache.set(v,E),this._hadAnyChanges=!0,E}}class Ya{constructor(r,s,p,m){this.min=p,this.max=m,this.points=r,this.planes=s}static fromAabb(r,s){const p=[];for(let m=0;m<8;m++)p.push([1&~m?r[0]:s[0],(m>>1&1)==1?s[1]:r[1],(m>>2&1)==1?s[2]:r[2]]);return new Ya(p,[[-1,0,0,s[0]],[1,0,0,-r[0]],[0,-1,0,s[1]],[0,1,0,-r[1]],[0,0,-1,s[2]],[0,0,1,-r[2]]],r,s)}static fromCenterSizeAngles(r,s,p){const m=a.bq([],p[0],p[1],p[2]),v=a.br([],[s[0],0,0],m),w=a.br([],[0,s[1],0],m),P=a.br([],[0,0,s[2]],m),E=[...r],z=[...r];for(let U=0;U<8;U++)for(let V=0;V<3;V++){const Z=r[V]+v[V]*(1&~U?-1:1)+w[V]*((U>>1&1)==1?1:-1)+P[V]*((U>>2&1)==1?1:-1);E[V]=Math.min(E[V],Z),z[V]=Math.max(z[V],Z)}const B=[];for(let U=0;U<8;U++){const V=[...r];a.aR(V,V,a.aQ([],v,1&~U?-1:1)),a.aR(V,V,a.aQ([],w,(U>>1&1)==1?1:-1)),a.aR(V,V,a.aQ([],P,(U>>2&1)==1?1:-1)),B.push(V)}return new Ya(B,[[...v,-a.aW(v,B[0])],[...w,-a.aW(w,B[0])],[...P,-a.aW(P,B[0])],[-v[0],-v[1],-v[2],-a.aW(v,B[7])],[-w[0],-w[1],-w[2],-a.aW(w,B[7])],[-P[0],-P[1],-P[2],-a.aW(P,B[7])]],E,z)}intersectsFrustum(r){let s=!0;const p=this.points.length,m=this.planes.length,v=r.planes.length,w=r.points.length;for(let P=0;P<v;P++){const E=r.planes[P];let z=0;for(let B=0;B<p;B++){const U=this.points[B];E[0]*U[0]+E[1]*U[1]+E[2]*U[2]+E[3]>=0&&z++}if(z===0)return 0;z<p&&(s=!1)}if(s)return 2;for(let P=0;P<m;P++){const E=this.planes[P];let z=0;for(let B=0;B<w;B++){const U=r.points[B];E[0]*U[0]+E[1]*U[1]+E[2]*U[2]+E[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(r){const s=this.points.length;let p=0;for(let m=0;m<s;m++){const v=this.points[m];r[0]*v[0]+r[1]*v[1]+r[2]*v[2]+r[3]>=0&&p++}return p===s?2:p===0?0:1}}function Ec(y,r,s){const p=y-r;return p<0?-p:Math.max(0,p-s)}function rp(y,r,s,p,m){const v=y-s;let w;return w=v<0?Math.min(-v,1+v-m):v>1?Math.min(Math.max(v-m,0),1-v):0,Math.max(w,Ec(r,p,m))}class G_{constructor(){this._boundingVolumeCache=new H_(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,s,p,m){const v=1<<p.z,w=1/v,P=p.x/v,E=p.y/v;let z=2;return z=Math.min(z,rp(r,s,P,E,w)),z=Math.min(z,rp(r,s,P+.5,-E-w,w)),z=Math.min(z,rp(r,s,P+.5,2-E-w,w)),z}getWrap(r,s,p){const m=1<<s.z,v=1/m,w=s.x/m,P=Ec(r.x,w,v),E=Ec(r.x,w-1,v),z=Ec(r.x,w+1,v),B=Math.min(P,E,z);return B===z?1:B===E?-1:0}allowVariableZoom(r,s){return qe(r,s)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,s,p,m){return this._boundingVolumeCache.getTileBoundingVolume(r,s,p,m)}_computeTileBoundingVolume(r,s,p,m){var v,w;let P=p,E=p;if(m!=null&&m.terrain){const z=new a.Z(r.z,s,r.z,r.x,r.y),B=m.terrain.getMinMaxElevation(z);P=(v=B.minElevation)!==null&&v!==void 0?v:p,E=(w=B.maxElevation)!==null&&w!==void 0?w:p}if(P/=a.bt,E/=a.bt,P+=1,E+=1,r.z<=0)return Ya.fromAabb([-E,-E,-E],[E,E,E]);if(r.z===1)return Ya.fromAabb([r.x===0?-E:0,r.y===0?0:-E,-E],[r.x===0?0:E,r.y===0?E:0,E]);{const z=[Li(0,0,r.x,r.y,r.z),Li(a.$,0,r.x,r.y,r.z),Li(a.$,a.$,r.x,r.y,r.z),Li(0,a.$,r.x,r.y,r.z)],B=[];for(const Xe of z)B.push(a.aQ([],Xe,E));if(E!==P)for(const Xe of z)B.push(a.aQ([],Xe,P));r.y===0&&B.push([0,1,0]),r.y===(1<<r.z)-1&&B.push([0,-1,0]);const U=[1,1,1],V=[-1,-1,-1];for(const Xe of B)for(let et=0;et<3;et++)U[et]=Math.min(U[et],Xe[et]),V[et]=Math.max(V[et],Xe[et]);const Z=Li(a.$/2,a.$/2,r.x,r.y,r.z),ie=a.aV([],[0,1,0],Z);a.aU(ie,ie);const fe=a.aV([],Z,ie);a.aU(fe,fe);const pe=a.aV([],z[2],z[1]);a.aU(pe,pe);const me=a.aV([],z[0],z[3]);a.aU(me,me),B.push(a.aQ([],Z,E)),r.y>=(1<<r.z)/2&&B.push(a.aQ([],Li(a.$/2,0,r.x,r.y,r.z),E)),r.y<(1<<r.z)/2&&B.push(a.aQ([],Li(a.$/2,a.$,r.x,r.y,r.z),E));const ve=Bo(Z,B),Ce=Bo(fe,B),be=[-Z[0],-Z[1],-Z[2],ve.max],ke=[Z[0],Z[1],Z[2],-ve.min],Le=[-fe[0],-fe[1],-fe[2],Ce.max],Se=[fe[0],fe[1],fe[2],-Ce.min],Ne=[...pe,0],Qe=[...me,0],Ke=[];return r.y===0?Ke.push(a.bs(Qe,Ne,be),a.bs(Qe,Ne,ke)):Ke.push(a.bs(Le,Ne,be),a.bs(Le,Ne,ke),a.bs(Le,Qe,be),a.bs(Le,Qe,ke)),r.y===(1<<r.z)-1?Ke.push(a.bs(Qe,Ne,be),a.bs(Qe,Ne,ke)):Ke.push(a.bs(Se,Ne,be),a.bs(Se,Ne,ke),a.bs(Se,Qe,be),a.bs(Se,Qe,ke)),new Ya(Ke,[be,ke,Le,Se,Ne,Qe],U,V)}}}function Bo(y,r){let s=1/0,p=-1/0;for(const m of r){const v=a.aW(y,m);s=Math.min(s,v),p=Math.max(p,v)}return{min:s,max:p}}class fl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,p){return this._helper.interpolatePadding(r,s,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s){this._helper.resize(r,s)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Sc({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,s)=>this.getConstrained(r,s)}),this._coveringTilesDetailsProvider=new G_}clone(){const r=new fl;return r.apply(this),r}apply(r,s){this._globeLatitudeErrorCorrectionRadians=s||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=a.bo();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:s,applyGlobeMatrix:p}=r,m=this._helper.getMercatorTileCoordinates(s);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const s=this.pitchInRadians,p=this.cameraToCenterDistance/r,m=Math.sin(s)*p,v=Math.cos(s)*p+1,w=1/Math.sqrt(m*m+v*v)*1;let P=-m,E=v;const z=Math.sqrt(P*P+E*E);P/=z,E/=z;const B=[0,P,E];a.bv(B,B,[0,0,0],-this.bearingInRadians),a.bw(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(B,B,[0,0,0],this.center.lng*Math.PI/180);const U=1/a.aY(B);return a.aQ(B,B,U),[...B,-w*U]}isLocationOccluded(r){return!this.isSurfacePointVisible(no(r))}transformLightDirection(r){const s=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,m=Math.cos(p),v=[Math.sin(s)*m,Math.sin(p),Math.cos(s)*m],w=[v[2],0,-v[0]],P=[0,0,0];a.aV(P,w,v),a.aU(w,w),a.aU(P,P);const E=[0,0,0];return a.aU(E,[w[0]*r[0]+P[0]*r[1]+v[0]*r[2],w[1]*r[0]+P[1]*r[1]+v[1]*r[2],w[2]*r[0]+P[2]*r[1]+v[2]*r[2]]),E}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,s,p){const m=function(P,E,z){const B=1/(1<<z.z);return new a.a0(P/a.$*B+z.x*B,E/a.$*B+z.y*B)}(r,s,p.canonical),v=(w=m.y,[a.bn(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-w*Math.PI*2))-.5*Math.PI]);var w;return this.getCircleRadiusCorrection()/Math.cos(v[1])}projectTileCoordinates(r,s,p,m){const v=p.canonical,w=Li(r,s,v.x,v.y,v.z),P=1+(m?m(r,s):0)/a.bt,E=[w[0]*P,w[1]*P,w[2]*P,1];a.av(E,E,this._globeViewProjMatrixNoCorrection);const z=this._cachedClippingPlane,B=z[0]*w[0]+z[1]*w[1]+z[2]*w[2]+z[3]<0;return{point:new a.P(E[0]/E[3],E[1]/E[3]),signedDistanceFromCamera:E[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=ul(this.worldSize,this.center.lat),s=a.b9(),p=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.b3(s,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const m=this.centerOffset;s[8]=2*-m.x/this._helper._width,s[9]=2*m.y/this._helper._height,this._projectionMatrix=a.b4(s),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,s),a.M(s,s,[0,0,-this.cameraToCenterDistance]),a.b5(s,s,this.rollInRadians),a.b6(s,s,-this.pitchInRadians),a.b5(s,s,this.bearingInRadians),a.M(s,s,[0,0,-r]);const v=a.bo();v[0]=r,v[1]=r,v[2]=r,a.b6(p,s,this.center.lat*Math.PI/180),a.by(p,p,-this.center.lng*Math.PI/180),a.N(p,p,v),this._globeViewProjMatrixNoCorrection=p,a.b6(s,s,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(s,s,-this.center.lng*Math.PI/180),a.N(s,s,v),this._globeViewProjMatrix32f=new Float32Array(s),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,p);const w=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bv(this._cameraPosition,this._cameraPosition,w,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,w,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,w,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,w,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,w,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const P=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(P,P,[1,1,-1]),this._cachedFrustum=Po.fromInvProjectionMatrix(P,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");const s=a.b9();return a.af(s),s}getVisibleUnwrappedCoordinates(r){return[new a.b1(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,s){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=no(r);a.aQ(p,p,1+s/a.bt);const m=a.bu();return a.av(m,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(r){}getBounds(){const r=.5*this.width,s=.5*this.height,p=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,s),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,s)],m=[];for(const U of p)m.push(this.unprojectScreenPoint(U));let v=0,w=0,P=0,E=0;const z=this.center;for(const U of m){const V=a.bz(z.lng,U.lng),Z=a.bz(z.lat,U.lat);V<w&&(w=V),V>v&&(v=V),Z<E&&(E=Z),Z>P&&(P=Z)}const B=[z.lng+w,z.lat+E,z.lng+v,z.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new ur(B)}getConstrained(r,s){const p=a.ag(r.lat,-a.ah,a.ah),m=a.ag(+s,this.minZoom+jn(0,p),this.maxZoom);return{center:new a.S(r.lng,p),zoom:m}}calculateCenterFromCameraLngLatAlt(r,s,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,p,m)}setLocationAtPoint(r,s){const p=no(this.unprojectScreenPoint(s)),m=no(r),v=a.bo();a.bA(v);const w=a.bo();a.bx(w,p,v,-this.center.lng*Math.PI/180),a.bw(w,w,v,this.center.lat*Math.PI/180);const P=m[0]*m[0]+m[2]*m[2],E=w[0]*w[0];if(P<E)return;const z=Math.sqrt(P-E),B=-z,U=a.bB(m[0],m[2],w[0],z),V=a.bB(m[0],m[2],w[0],B),Z=a.bo();a.bx(Z,m,v,-U);const ie=a.bB(Z[1],Z[2],w[1],w[2]),fe=a.bo();a.bx(fe,m,v,-V);const pe=a.bB(fe[1],fe[2],w[1],w[2]),me=.5*Math.PI,ve=ie>=-me&&ie<=me,Ce=pe>=-me&&pe<=me;let be,ke;if(ve&&Ce){const Qe=this.center.lng*Math.PI/180,Ke=this.center.lat*Math.PI/180;a.bC(U,Qe)+a.bC(ie,Ke)<a.bC(V,Qe)+a.bC(pe,Ke)?(be=U,ke=ie):(be=V,ke=pe)}else if(ve)be=U,ke=ie;else{if(!Ce)return;be=V,ke=pe}const Le=be/Math.PI*180,Se=ke/Math.PI*180,Ne=this.center.lat;this.setCenter(new a.S(Le,a.ag(Se,-90,90))),this.setZoom(this.zoom+jn(Ne,this.center.lat))}locationToScreenPoint(r,s){const p=no(r);if(s){const m=s.getElevationForLngLatZoom(r,this._helper._tileZoom);a.aQ(p,p,1+m/a.bt)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(r){const s=a.bu();return a.av(s,[...r,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],new a.P((.5*s[0]+.5)*this.width,(.5*-s[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,s){if(s){const p=s.pointCoordinate(r);if(p)return p}return a.a0.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,s){var p;return(p=this.screenPointToMercatorCoordinate(r,s))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(r,s){const p=this._cameraPosition,m=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(p,m)}getRayDirectionFromPixel(r){const s=a.bu();s[0]=r.x/this.width*2-1,s[1]=-1*(r.y/this.height*2-1),s[2]=1,s[3]=1,a.av(s,s,this._globeViewProjMatrixNoCorrectionInverted),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3];const p=a.bo();p[0]=s[0]-this._cameraPosition[0],p[1]=s[1]-this._cameraPosition[1],p[2]=s[2]-this._cameraPosition[2];const m=a.bo();return a.aU(m,p),m}isSurfacePointVisible(r){const s=this._cachedClippingPlane;return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const s=a.bu();return a.av(s,[...r,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3],s[0]>-1&&s[0]<1&&s[1]>-1&&s[1]<1&&s[2]>-1&&s[2]<1}rayPlanetIntersection(r,s){const p=a.aW(r,s),m=a.bo(),v=a.bo();a.aQ(v,s,p),a.aT(m,r,v);const w=1-a.aW(m,m);if(w<0)return null;const P=a.aW(r,r)-1,E=-p+(p<0?1:-1)*Math.sqrt(w),z=P/E,B=E;return{tMin:Math.min(z,B),tMax:Math.max(z,B)}}unprojectScreenPoint(r){const s=this._cameraPosition,p=this.getRayDirectionFromPixel(r),m=this.rayPlanetIntersection(s,p);if(m){const B=a.bo();a.aR(B,s,[p[0]*m.tMin,p[1]*m.tMin,p[2]*m.tMin]);const U=a.bo();return a.aU(U,B),Tc(U)}const v=this._cachedClippingPlane,w=v[0]*p[0]+v[1]*p[1]+v[2]*p[2],P=-a.b0(v,s)/w,E=a.bo();if(P>0)a.aR(E,s,[p[0]*P,p[1]*P,p[2]*P]);else{const B=a.bo();a.aR(B,s,[2*p[0],2*p[1],2*p[2]]);const U=a.b0(this._cachedClippingPlane,B);a.aT(E,B,[this._cachedClippingPlane[0]*U,this._cachedClippingPlane[1]*U,this._cachedClippingPlane[2]*U])}const z=function(B){const U=a.bo();return U[0]=B[0]*-B[3],U[1]=B[1]*-B[3],U[2]=B[2]*-B[3],{center:U,radius:Math.sqrt(1-B[3]*B[3])}}(v);return Tc(function(B,U,V){const Z=a.bo();a.aT(Z,V,B);const ie=a.bo();return a.bp(ie,B,Z,U/a.a_(Z)),ie}(z.center,z.radius,E))}getMatrixForModel(r,s){const p=a.S.convert(r),m=1/a.bt,v=a.b8();return a.by(v,v,p.lng/180*Math.PI),a.b6(v,v,-p.lat/180*Math.PI),a.M(v,v,[0,0,1+s/a.bt]),a.b6(v,v,.5*Math.PI),a.N(v,v,[m,m,m]),v}getProjectionDataForCustomLayer(r=!0){const s=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:r});return s.tileMercatorCoords=[0,0,1,1],s}getFastPathSimpleProjectionMatrix(r){}}class ci{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,s,p){return this._helper.interpolatePadding(r,s,p)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,s,p=!0){this._helper.resize(r,s,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,s){this._helper.overrideNearFarZ(r,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,s){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=s,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Sc({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,s)=>this.getConstrained(r,s)}),this._globeness=1,this._mercatorTransform=new Fn,this._verticalPerspectiveTransform=new fl}clone(){const r=new ci;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const s=this._mercatorTransform.getProjectionData(r),p=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:s.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:s.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,s,p){const m=this._mercatorTransform.getPitchedTextCorrection(r,s,p),v=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,s,p);return a.bj(m,v,this._globeness)}projectTileCoordinates(r,s,p,m){return this.currentTransform.projectTileCoordinates(r,s,p,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,s){return this.currentTransform.lngLatToCameraDepth(r,s)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,s){return this.currentTransform.getConstrained(r,s)}calculateCenterFromCameraLngLatAlt(r,s,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,s,p,m)}setLocationAtPoint(r,s){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,s),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,s),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,s){return this.currentTransform.locationToScreenPoint(r,s)}screenPointToMercatorCoordinate(r,s){return this.currentTransform.screenPointToMercatorCoordinate(r,s)}screenPointToLocation(r,s){return this.currentTransform.screenPointToLocation(r,s)}isPointOnMapSurface(r,s){return this.currentTransform.isPointOnMapSurface(r,s)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,s){return this.currentTransform.getMatrixForModel(r,s)}getProjectionDataForCustomLayer(r=!0){const s=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return s;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return p.fallbackMatrix=s.mainMatrix,p}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Yo{get useGlobeControls(){return!0}handlePanInertia(r,s){const p=Ic(r,s);return Math.abs(p.lng-s.center.lng)>180&&(p.lng=s.center.lng+179.5*Math.sign(p.lng-s.center.lng)),{easingCenter:p,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,s){const p=r.around,m=s.screenPointToLocation(p);r.bearingDelta&&s.setBearing(s.bearing+r.bearingDelta),r.pitchDelta&&s.setPitch(s.pitch+r.pitchDelta),r.rollDelta&&s.setRoll(s.roll+r.rollDelta);const v=s.zoom;r.zoomDelta&&s.setZoom(s.zoom+r.zoomDelta);const w=s.zoom-v;if(w===0)return;const P=a.bz(s.center.lng,m.lng),E=P/(Math.abs(P/180)+1),z=a.bz(s.center.lat,m.lat),B=s.getRayDirectionFromPixel(p),U=s.cameraPosition,V=-1*a.aW(U,B),Z=a.bo();a.aR(Z,U,[B[0]*V,B[1]*V,B[2]*V]);const ie=a.aY(Z)-1,fe=Math.exp(.5*-Math.max(ie-.3,0)),pe=ul(s.worldSize,s.center.lat)/Math.min(s.width,s.height),me=a.bm(pe,.9,.5,1,.25),ve=(1-a.ae(-w))*Math.min(fe,me),Ce=s.center.lat,be=s.zoom,ke=new a.S(s.center.lng+E*ve,a.ag(s.center.lat+z*ve,-a.ah,a.ah));s.setLocationAtPoint(m,p);const Le=s.center,Se=a.bm(Math.abs(P),45,85,0,1),Ne=a.bm(pe,.75,.35,0,1),Qe=Math.pow(Math.max(Se,Ne),.25),Ke=a.bz(Le.lng,ke.lng),Xe=a.bz(Le.lat,ke.lat);s.setCenter(new a.S(Le.lng+Ke*Qe,Le.lat+Xe*Qe).wrap()),s.setZoom(be+jn(Ce,s.center.lat))}handleMapControlsPan(r,s,p){if(!r.panDelta)return;const m=s.center.lat,v=s.zoom;s.setCenter(Ic(r.panDelta,s).wrap()),s.setZoom(v+jn(m,s.center.lat))}cameraForBoxAndBearing(r,s,p,m,v){const w=vn(r,s,p,m,v),P=s.left/v.width*2-1,E=(v.width-s.right)/v.width*2-1,z=s.top/v.height*-2+1,B=(v.height-s.bottom)/v.height*-2+1,U=a.bz(p.getWest(),p.getEast())<0,V=U?p.getEast():p.getWest(),Z=U?p.getWest():p.getEast(),ie=Math.max(p.getNorth(),p.getSouth()),fe=Math.min(p.getNorth(),p.getSouth()),pe=V+.5*a.bz(V,Z),me=ie+.5*a.bz(ie,fe),ve=v.clone();ve.setCenter(w.center),ve.setBearing(w.bearing),ve.setPitch(0),ve.setRoll(0),ve.setZoom(w.zoom);const Ce=ve.modelViewProjectionMatrix,be=[no(p.getNorthWest()),no(p.getNorthEast()),no(p.getSouthWest()),no(p.getSouthEast()),no(new a.S(Z,me)),no(new a.S(V,me)),no(new a.S(pe,ie)),no(new a.S(pe,fe))],ke=no(w.center);let Le=Number.POSITIVE_INFINITY;for(const Se of be)P<0&&(Le=Yo.getLesserNonNegativeNonNull(Le,Yo.solveVectorScale(Se,ke,Ce,"x",P))),E>0&&(Le=Yo.getLesserNonNegativeNonNull(Le,Yo.solveVectorScale(Se,ke,Ce,"x",E))),z>0&&(Le=Yo.getLesserNonNegativeNonNull(Le,Yo.solveVectorScale(Se,ke,Ce,"y",z))),B<0&&(Le=Yo.getLesserNonNegativeNonNull(Le,Yo.solveVectorScale(Se,ke,Ce,"y",B)));if(Number.isFinite(Le)&&Le!==0)return w.zoom=ve.zoom+a.aj(Le),w;To()}handleJumpToCenterZoom(r,s){const p=r.center.lat,m=r.getConstrained(s.center?a.S.convert(s.center):r.center,r.zoom).center;r.setCenter(m.wrap());const v=s.zoom!==void 0?+s.zoom:r.zoom+jn(p,m.lat);r.zoom!==v&&r.setZoom(v)}handleEaseTo(r,s){const p=r.zoom,m=r.center,v=r.padding,w={roll:r.roll,pitch:r.pitch,bearing:r.bearing},P={roll:s.roll===void 0?r.roll:s.roll,pitch:s.pitch===void 0?r.pitch:s.pitch,bearing:s.bearing===void 0?r.bearing:s.bearing},E=s.zoom!==void 0,z=!r.isPaddingEqual(s.padding);let B=!1;const U=s.center?a.S.convert(s.center):m,V=r.getConstrained(U,p).center;Ma(r,V);const Z=r.clone();Z.setCenter(V),Z.setZoom(E?+s.zoom:p+jn(m.lat,U.lat)),Z.setBearing(s.bearing);const ie=new a.P(a.ag(r.centerPoint.x+s.offsetAsPoint.x,0,r.width),a.ag(r.centerPoint.y+s.offsetAsPoint.y,0,r.height));Z.setLocationAtPoint(V,ie);const fe=(s.offset&&s.offsetAsPoint.mag())>0?Z.center:V,pe=E?+s.zoom:p+jn(m.lat,fe.lat),me=p+jn(m.lat,0),ve=pe+jn(fe.lat,0),Ce=a.bz(m.lng,fe.lng),be=a.bz(m.lat,fe.lat),ke=a.ae(ve-me);return B=pe!==p,{easeFunc:Le=>{if(a.bd(w,P)||ro({startEulerAngles:w,endEulerAngles:P,tr:r,k:Le,useSlerp:w.roll!=P.roll}),z&&r.interpolatePadding(v,s.padding,Le),s.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(s.around,s.aroundPoint);else{const Se=ve>me?Math.min(2,ke):Math.max(.5,ke),Ne=Math.pow(Se,1-Le),Qe=pl(m,Ce,be,Le*Ne);r.setCenter(Qe.wrap())}if(B){const Se=a.C.number(me,ve,Le)+jn(0,r.center.lat);r.setZoom(Se)}},isZooming:B,elevationCenter:fe}}handleFlyTo(r,s){const p=s.zoom!==void 0,m=r.center,v=r.zoom,w=r.padding,P=!r.isPaddingEqual(s.padding),E=r.getConstrained(a.S.convert(s.center||s.locationAtOffset),v).center,z=p?+s.zoom:r.zoom+jn(r.center.lat,E.lat),B=r.clone();B.setCenter(E),B.setZoom(z),B.setBearing(s.bearing);const U=new a.P(a.ag(r.centerPoint.x+s.offsetAsPoint.x,0,r.width),a.ag(r.centerPoint.y+s.offsetAsPoint.y,0,r.height));B.setLocationAtPoint(E,U);const V=B.center;Ma(r,V);const Z=function(be,ke,Le){const Se=no(ke),Ne=no(Le),Qe=a.aW(Se,Ne),Ke=Math.acos(Qe),Xe=Pc(be);return Ke/(2*Math.PI)*Xe}(r,m,V),ie=v+jn(m.lat,0),fe=z+jn(V.lat,0),pe=a.ae(fe-ie);let me;if(typeof s.minZoom=="number"){const be=+s.minZoom+jn(V.lat,0),ke=Math.min(be,ie,fe)+jn(0,V.lat),Le=r.getConstrained(V,ke).zoom+jn(V.lat,0);me=a.ae(Le-ie)}const ve=a.bz(m.lng,V.lng),Ce=a.bz(m.lat,V.lat);return{easeFunc:(be,ke,Le,Se)=>{const Ne=pl(m,ve,Ce,Le);P&&r.interpolatePadding(w,s.padding,be);const Qe=be===1?V:Ne;r.setCenter(Qe.wrap());const Ke=ie+a.aj(ke);r.setZoom(be===1?z:Ke+jn(0,Qe.lat))},scaleOfZoom:pe,targetCenter:V,scaleOfMinZoom:me,pixelPathLength:Z}}static solveVectorScale(r,s,p,m,v){const w=m==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],P=[p[3],p[7],p[11],p[15]],E=r[0]*w[0]+r[1]*w[1]+r[2]*w[2],z=r[0]*P[0]+r[1]*P[1]+r[2]*P[2],B=s[0]*w[0]+s[1]*w[1]+s[2]*w[2],U=s[0]*P[0]+s[1]*P[1]+s[2]*P[2];return B+v*z===E+v*U||P[3]*(E-B)+w[3]*(U-z)+E*U==B*z?null:(B+w[3]-v*U-v*P[3])/(B-E-v*U+v*z)}static getLesserNonNegativeNonNull(r,s){return s!==null&&s>=0&&s<r?s:r}}class np{constructor(r){this._globe=r,this._mercatorCameraHelper=new Hu,this._verticalPerspectiveCameraHelper=new Yo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,s){return this.currentHelper.handlePanInertia(r,s)}handleMapControlsRollPitchBearingZoom(r,s){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,s)}handleMapControlsPan(r,s,p){this.currentHelper.handleMapControlsPan(r,s,p)}cameraForBoxAndBearing(r,s,p,m,v){return this.currentHelper.cameraForBoxAndBearing(r,s,p,m,v)}handleJumpToCenterZoom(r,s){this.currentHelper.handleJumpToCenterZoom(r,s)}handleEaseTo(r,s){return this.currentHelper.handleEaseTo(r,s)}handleFlyTo(r,s){return this.currentHelper.handleFlyTo(r,s)}}const kc=(y,r)=>a.y(y,r&&r.filter(s=>s.identifier!=="source.canvas")),ml=a.bD();class op extends a.E{constructor(r,s={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=r,this.dispatcher=new tr(Nt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new ze,this.imageManager.setEventedParent(this),this.glyphManager=new je(r._requestManager,s.localIdeographFontFamily),this.lineAtlas=new Ze(256,512),this.crossTileSymbolIndex=new Nu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),dr().on($r,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const v=m.getSource();if(v&&v.vectorLayerIds)for(const w in this._layers){const P=this._layers[w];P.source===v.id&&this._validateLayer(P)}})}setGlobalStateProperty(r,s){var p,m,v;this._checkLoaded();const w=s===null?(v=(m=(p=this.stylesheet.state)===null||p===void 0?void 0:p[r])===null||m===void 0?void 0:m.default)!==null&&v!==void 0?v:null:s;if(a.bG(w,this._globalState[r]))return this;this._globalState[r]=w;const P=this._findGlobalStateAffectedSources([r]);for(const E in this.sourceCaches)P.has(E)&&(this._reloadSource(E),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const s=[];for(const m in r)!a.bG(this._globalState[m],r[m].default)&&(s.push(m),this._globalState[m]=r[m].default);const p=this._findGlobalStateAffectedSources(s);for(const m in this.sourceCaches)p.has(m)&&(this._reloadSource(m),this._changed=!0)}_findGlobalStateAffectedSources(r){if(r.length===0)return new Set;const s=new Set;for(const p in this._layers){const m=this._layers[p],v=m.getLayoutAffectingGlobalStateRefs();for(const w of r)v.has(w)&&s.add(m.source)}return s}loadURL(r,s={},p){this.fire(new a.l("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const v=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,s,p)}).catch(w=>{this._loadStyleRequest=null,w&&!v.signal.aborted&&this.fire(new a.k(w))})}loadJSON(r,s={},p){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(r,s,p)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(ml,{validate:!1})}_load(r,s,p){var m,v,w;const P=s.transformStyle?s.transformStyle(p,r):r;if(!s.validate||!kc(this,a.z(P))){this._loaded=!0,this.stylesheet=P;for(const E in P.sources)this.addSource(E,P.sources[E],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new De(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Ue(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.setGlobalState((w=this.stylesheet.state)!==null&&w!==void 0?w:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const r=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(s=>s.id),this._layers={},this._serializedLayers=null;for(const s of r){const p=a.bI(s);p.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=p}}_loadSprite(r,s=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,w,P,E){return a._(this,void 0,void 0,function*(){const z=q(v),B=P>1?"@2x":"",U={},V={};for(const{id:Z,url:ie}of z){const fe=w.transformRequest(ce(ie,B,".json"),"SpriteJSON");U[Z]=a.j(fe,E);const pe=w.transformRequest(ce(ie,B,".png"),"SpriteImage");V[Z]=ne.getImage(pe,E)}return yield Promise.all([...Object.values(U),...Object.values(V)]),function(Z,ie){return a._(this,void 0,void 0,function*(){const fe={};for(const pe in Z){fe[pe]={};const me=M.getImageCanvasContext((yield ie[pe]).data),ve=(yield Z[pe]).data;for(const Ce in ve){const{width:be,height:ke,x:Le,y:Se,sdf:Ne,pixelRatio:Qe,stretchX:Ke,stretchY:Xe,content:et,textFitWidth:Rt,textFitHeight:Et}=ve[Ce];fe[pe][Ce]={data:null,pixelRatio:Qe,sdf:Ne,stretchX:Ke,stretchY:Xe,content:et,textFitWidth:Rt,textFitHeight:Et,spriteData:{width:be,height:ke,x:Le,y:Se,context:me}}}}return fe})}(U,V)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const w in v){this._spritesImagesIds[w]=[];const P=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(E=>!(E in v)):[];for(const E of P)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in v[w]){const z=w==="default"?E:`${w}:${E}`;this._spritesImagesIds[w].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,v[w][E],!1):this.imageManager.addImage(z,v[w][E]),s&&(this._changedImages[z]=!0)}}}).catch(v=>{this._spriteRequest=null,m=v,this.fire(new a.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){const s=this.sourceCaches[r.source];if(!s)return;const p=r.sourceLayer;if(!p)return;const m=s.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new a.k(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,s=!1){const p=this._serializedAllLayers();if(!r||r.length===0)return Object.values(s?a.bJ(p):p);const m=[];for(const v of r)if(p[v]){const w=s?a.bJ(p[v]):p[v];m.push(w)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const s=Object.keys(this._layers);for(const p of s){const m=this._layers[p];m.type!=="custom"&&(r[p]=m.serialize())}return r}hasTransitions(){var r,s,p;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((s=this.sky)===null||s===void 0)&&s.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(const m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const s=this._changed;if(s){const m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(const w in this._updatedSources){const P=this._updatedSources[w];if(P==="reload")this._reloadSource(w);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const v=this.sourceCaches[m];p[m]=v.used,v.used=!1}for(const m of this._order){const v=this._layers[m];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const m in p){const v=this.sourceCaches[m];!!p[m]!=!!v.used&&v.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,s&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,s={}){var p;this._checkLoaded();const m=this.serialize();if(r=s.transformStyle?s.transformStyle(m,r):r,((p=s.validate)===null||p===void 0||p)&&kc(this,a.z(r)))return!1;(r=a.bJ(r)).layers=a.bH(r.layers);const v=a.bK(m,r),w=this._getOperationsToPerform(v);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const P of w.operations)P();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const s=[],p=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":s.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":s.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":s.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":s.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":s.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":s.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":s.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":s.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":s.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":s.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":s.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":s.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":s.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":s.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":s.push(()=>this.setGlobalState.apply(this,m.args));break;case"setTransition":s.push(()=>{});break;default:p.push(m.command)}return{operations:s,unimplemented:p}}addImage(r,s){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,s),this._afterImageUpdated(r)}updateImage(r,s){this.imageManager.updateImage(r,s)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,s,p={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(a.z.source,`sources.${r}`,s,null,p))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const m=this.sourceCaches[r]=new nt(r,s,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${p}" is using it.`)));const s=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],s.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,s){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const p=this.sourceCaches[r].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(s),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,s,p={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let v;if(r.type==="custom"){if(kc(this,a.bL(r)))return;v=a.bI(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=a.bJ(r),r=a.e(r,{source:m})),this._validate(a.z.layer,`layers.${m}`,r,{arrayIndex:-1},p))return;v=a.bI(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}const w=s?this._order.indexOf(s):this._order.length;if(s&&w===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${s}".`)));else{if(this._order.splice(w,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,s){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===s)return;const p=this._order.indexOf(r);this._order.splice(p,1);const m=s?this._order.indexOf(s):this._order.length;s&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${s}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const s=this._layers[r];if(!s)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));s.setEventedParent(null);const p=this._order.indexOf(r);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=s,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],s.onRemove&&s.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,s,p){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===s&&m.maxzoom===p||(s!=null&&(m.minzoom=s),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,s,p={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!a.bG(m.filter,s))return s==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.z.filter,`layers.${m.id}.filter`,s,null,p)||(m.setFilter(a.bJ(s)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bJ(this.getLayer(r).filter)}setLayoutProperty(r,s,p,m={}){this._checkLoaded();const v=this.getLayer(r);v?a.bG(v.getLayoutProperty(s),p)||(v.setLayoutProperty(s,p,m),this._updateLayer(v)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,s){const p=this.getLayer(r);if(p)return p.getLayoutProperty(s);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,s,p,m={}){this._checkLoaded();const v=this.getLayer(r);v?a.bG(v.getPaintProperty(s),p)||(v.setPaintProperty(s,p,m)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,s){return this.getLayer(r).getPaintProperty(s)}setFeatureState(r,s){this._checkLoaded();const p=r.source,m=r.sourceLayer,v=this.sourceCaches[p];if(v===void 0)return void this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)));const w=v.getSource().type;w==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||m?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,r.id,s)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,s){this._checkLoaded();const p=r.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)));const v=m.getSource().type,w=v==="vector"?r.sourceLayer:void 0;v!=="vector"||w?s&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(w,r.id,s):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const s=r.source,p=r.sourceLayer,m=this.sourceCaches[s];if(m!==void 0)return m.getSource().type!=="vector"||p?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=a.bM(this.sourceCaches,v=>v.serialize()),s=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return a.bN({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:r,layers:s,terrain:p},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const s=w=>this._layers[w].type==="fill-extrusion",p={},m=[];for(let w=this._order.length-1;w>=0;w--){const P=this._order[w];if(s(P)){p[P]=w;for(const E of r){const z=E[P];if(z)for(const B of z)m.push(B)}}}m.sort((w,P)=>P.intersectionZ-w.intersectionZ);const v=[];for(let w=this._order.length-1;w>=0;w--){const P=this._order[w];if(s(P))for(let E=m.length-1;E>=0;E--){const z=m[E].feature;if(p[z.layer.id]<w)break;v.push(z),m.pop()}else for(const E of r){const z=E[P];if(z)for(const B of z)v.push(B.feature)}}return v}queryRenderedFeatures(r,s,p){s&&s.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",s.filter,null,s);const m={};if(s&&s.layers){if(!(Array.isArray(s.layers)||s.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const z of s.layers){const B=this._layers[z];if(!B)return this.fire(new a.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];m[B.source]=!0}}const v=[];s.availableImages=this._availableImages;const w=this._serializedAllLayers(),P=s.layers instanceof Set?s.layers:Array.isArray(s.layers)?new Set(s.layers):null,E=Object.assign(Object.assign({},s),{layers:P});for(const z in this.sourceCaches)s.layers&&!m[z]||v.push(Ct(this.sourceCaches[z],this._layers,w,r,E,p,this.map.terrain?(B,U,V)=>this.map.terrain.getElevation(B,U,V):void 0));return this.placement&&v.push(function(z,B,U,V,Z,ie,fe){const pe={},me=ie.queryRenderedSymbols(V),ve=[];for(const Ce of Object.keys(me).map(Number))ve.push(fe[Ce]);ve.sort(Mt);for(const Ce of ve){const be=Ce.featureIndex.lookupSymbolFeatures(me[Ce.bucketInstanceId],B,Ce.bucketIndex,Ce.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,z);for(const ke in be){const Le=pe[ke]=pe[ke]||[],Se=be[ke];Se.sort((Ne,Qe)=>{const Ke=Ce.featureSortOrder;if(Ke){const Xe=Ke.indexOf(Ne.featureIndex);return Ke.indexOf(Qe.featureIndex)-Xe}return Qe.featureIndex-Ne.featureIndex});for(const Ne of Se)Le.push(Ne)}}return function(Ce,be,ke){for(const Le in Ce)for(const Se of Ce[Le])qt(Se,ke[be[Le].source]);return Ce}(pe,z,U)}(this._layers,w,this.sourceCaches,r,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,s){s&&s.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",s.filter,null,s);const p=this.sourceCaches[r];return p?function(m,v){const w=m.getRenderableIds().map(z=>m.getTileByID(z)),P=[],E={};for(let z=0;z<w.length;z++){const B=w[z],U=B.tileID.canonical.key;E[U]||(E[U]=!0,B.querySourceFeatures(P,v))}return P}(p,s):[]}getLight(){return this.light.getLight()}setLight(r,s={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const w in r)if(!a.bG(r[w],p[w])){m=!0;break}if(!m)return;const v={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,s),this.light.updateTransitions(v)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,s={}){this._checkLoaded();const p=this.getSky();let m=!1;if(!r&&!p)return;if(r&&!p)m=!0;else if(!r&&p)m=!0;else for(const w in r)if(!a.bG(r[w],p[w])){m=!0;break}if(!m)return;const v={now:M.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,s),this.sky.updateTransitions(v)}_setProjectionInternal(r){const s=function(p){if(Array.isArray(p)){const m=new Cc({type:p});return{projection:m,transform:new ci,cameraHelper:new np(m)}}switch(p){case"mercator":return{projection:new Qh,transform:new Fn,cameraHelper:new Hu};case"globe":{const m=new Cc({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new ci,cameraHelper:new np(m)}}case"vertical-perspective":return{projection:new _g,transform:new fl,cameraHelper:new Yo};default:return a.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new Qh,transform:new Fn,cameraHelper:new Hu}}}(r);this.projection=s.projection,this.map.migrateProjection(s.transform,s.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(r,s,p,m,v={}){return(!v||v.validate!==!1)&&kc(this,r.call(a.z,a.e({key:s,style:this.serialize(),value:p,styleSpec:a.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),dr().off($r,this._rtlPluginLoaded);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const p=this.sourceCaches[s];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const s in this.sourceCaches)this.sourceCaches[s].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,s,p,m,v=!1){let w=!1,P=!1;const E={};for(const z of this._order){const B=this._layers[z];if(B.type!=="symbol")continue;if(!E[B.source]){const V=this.sourceCaches[B.source];E[B.source]=V.getRenderableIds(!0).map(Z=>V.getTileByID(Z)).sort((Z,ie)=>ie.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(ie.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(B,E[B.source],r.center.lng);w=w||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),r.zoom))&&(this.pauseablePlacement=new yg(r,this.map.terrain,this._order,v,s,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),P=!0),w&&this.pauseablePlacement.placement.setStale()),P||w)for(const z of this._order){const B=this._layers[z];B.type==="symbol"&&this.placement.updateLayerOpacities(B,E[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,s){return a._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[s.source];return m&&m.setDependencies(s.tileID.key,s.type,s.icons),p})}getGlyphs(r,s){return a._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(s.stacks),m=this.sourceCaches[s.source];return m&&m.setDependencies(s.tileID.key,s.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,s={}){this._checkLoaded(),r&&this._validate(a.z.glyphs,"glyphs",r,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,s,p={},m){this._checkLoaded();const v=[{id:r,url:s}],w=[...q(this.stylesheet.sprite),...v];this._validate(a.z.sprite,"sprite",w,null,p)||(this.stylesheet.sprite=w,this._loadSprite(v,!0,m))}removeSprite(r){this._checkLoaded();const s=q(this.stylesheet.sprite);if(s.find(p=>p.id===r)){if(this._spritesImagesIds[r])for(const p of this._spritesImagesIds[r])this.imageManager.removeImage(p),this._changedImages[p]=!0;s.splice(s.findIndex(p=>p.id===r),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return q(this.stylesheet.sprite)}setSprite(r,s={},p){this._checkLoaded(),r&&this._validate(a.z.sprite,"sprite",r,null,s)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,p):(this._unloadSprite(),p&&p(null)))}}var W_=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Z_{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,s,p,m,v,w,P,E,z){this.context=r;let B=this.boundPaintVertexBuffers.length!==m.length;for(let U=0;!B&&U<m.length;U++)this.boundPaintVertexBuffers[U]!==m[U]&&(B=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==v||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==z?this.freshBind(s,p,m,v,w,P,E,z):(r.bindVertexArray.set(this.vao),P&&P.bind(),v&&v.dynamicDraw&&v.bind(),E&&E.bind(),z&&z.bind())}freshBind(r,s,p,m,v,w,P,E){const z=r.numAttributes,B=this.context,U=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=E,s.enableAttributes(U,r);for(const V of p)V.enableAttributes(U,r);w&&w.enableAttributes(U,r),P&&P.enableAttributes(U,r),E&&E.enableAttributes(U,r),s.bind(),s.setVertexAttribPointers(U,r,v);for(const V of p)V.bind(),V.setVertexAttribPointers(U,r,v);w&&(w.bind(),w.setVertexAttribPointers(U,r,v)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(U,r,v)),E&&(E.bind(),E.setVertexAttribPointers(U,r,v)),B.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const q_=(y,r,s,p,m)=>({u_texture:0,u_ele_delta:y,u_fog_matrix:r,u_fog_color:s?s.properties.get("fog-color"):a.be.white,u_fog_ground_blend:s?s.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:s?s.calculateFogBlendOpacity(p):0,u_horizon_color:s?s.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:s?s.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),K_={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Gu(y){const r=[];for(let s=0;s<y.length;s++){if(y[s]===null)continue;const p=y[s].split(" ");r.push(p.pop())}return r}class Wu{constructor(r,s,p,m,v,w,P,E,z=[]){const B=r.gl;this.program=B.createProgram();const U=Gu(s.staticAttributes),V=p?p.getBinderAttributes():[],Z=U.concat(V),ie=aa.prelude.staticUniforms?Gu(aa.prelude.staticUniforms):[],fe=P.staticUniforms?Gu(P.staticUniforms):[],pe=s.staticUniforms?Gu(s.staticUniforms):[],me=p?p.getBinderUniforms():[],ve=ie.concat(fe).concat(pe).concat(me),Ce=[];for(const Ke of ve)Ce.indexOf(Ke)<0&&Ce.push(Ke);const be=p?p.defines():[];Oo(B)&&be.unshift("#version 300 es"),v&&be.push("#define OVERDRAW_INSPECTOR;"),w&&be.push("#define TERRAIN3D;"),E&&be.push(E),z&&be.push(...z);let ke=be.concat(aa.prelude.fragmentSource,P.fragmentSource,s.fragmentSource).join(`
`),Le=be.concat(aa.prelude.vertexSource,P.vertexSource,s.vertexSource).join(`
`);Oo(B)||(ke=function(Ke){return Ke.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ke),Le=function(Ke){return Ke.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Le));const Se=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Se,ke),B.compileShader(Se),!B.getShaderParameter(Se,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(Se)}`);B.attachShader(this.program,Se);const Ne=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Ne,Le),B.compileShader(Ne),!B.getShaderParameter(Ne,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Ne)}`);B.attachShader(this.program,Ne),this.attributes={};const Qe={};this.numAttributes=Z.length;for(let Ke=0;Ke<this.numAttributes;Ke++)Z[Ke]&&(B.bindAttribLocation(this.program,Ke,Z[Ke]),this.attributes[Z[Ke]]=Ke);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Ne),B.deleteShader(Se);for(let Ke=0;Ke<Ce.length;Ke++){const Xe=Ce[Ke];if(Xe&&!Qe[Xe]){const et=B.getUniformLocation(this.program,Xe);et&&(Qe[Xe]=et)}}this.fixedUniforms=m(r,Qe),this.terrainUniforms=((Ke,Xe)=>({u_depth:new a.bO(Ke,Xe.u_depth),u_terrain:new a.bO(Ke,Xe.u_terrain),u_terrain_dim:new a.bf(Ke,Xe.u_terrain_dim),u_terrain_matrix:new a.bQ(Ke,Xe.u_terrain_matrix),u_terrain_unpack:new a.bR(Ke,Xe.u_terrain_unpack),u_terrain_exaggeration:new a.bf(Ke,Xe.u_terrain_exaggeration)}))(r,Qe),this.projectionUniforms=((Ke,Xe)=>({u_projection_matrix:new a.bQ(Ke,Xe.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(Ke,Xe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(Ke,Xe.u_projection_clipping_plane),u_projection_transition:new a.bf(Ke,Xe.u_projection_transition),u_projection_fallback_matrix:new a.bQ(Ke,Xe.u_projection_fallback_matrix)}))(r,Qe),this.binderUniforms=p?p.getUniforms(r,Qe):[]}draw(r,s,p,m,v,w,P,E,z,B,U,V,Z,ie,fe,pe,me,ve,Ce){const be=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(p),r.setStencilMode(m),r.setColorMode(v),r.setCullFace(w),E){r.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,E.depthTexture),r.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,E.texture);for(const Le in this.terrainUniforms)this.terrainUniforms[Le].set(E[Le])}if(z)for(const Le in z)this.projectionUniforms[K_[Le]].set(z[Le]);if(P)for(const Le in this.fixedUniforms)this.fixedUniforms[Le].set(P[Le]);pe&&pe.setUniforms(r,this.binderUniforms,ie,{zoom:fe});let ke=0;switch(s){case be.LINES:ke=2;break;case be.TRIANGLES:ke=3;break;case be.LINE_STRIP:ke=1}for(const Le of Z.get()){const Se=Le.vaos||(Le.vaos={});(Se[B]||(Se[B]=new Z_)).bind(r,this,U,pe?pe.getPaintVertexBuffers():[],V,Le.vertexOffset,me,ve,Ce),be.drawElements(s,Le.primitiveLength*ke,be.UNSIGNED_SHORT,Le.primitiveOffset*ke*2)}}}function Zu(y,r,s){const p=1/a.aB(s,1,r.transform.tileZoom),m=Math.pow(2,s.tileID.overscaledZ),v=s.tileSize*Math.pow(2,r.transform.tileZoom)/m,w=v*(s.tileID.canonical.x+s.tileID.wrap*m),P=v*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[w>>16,P>>16],u_pixel_coord_lower:[65535&w,65535&P]}}const Mc=(y,r,s,p)=>{const m=y.style.light,v=m.properties.get("position"),w=[v.x,v.y,v.z],P=a.bU();m.properties.get("anchor")==="viewport"&&a.bV(P,y.transform.bearingInRadians),a.bW(w,w,P);const E=y.transform.transformLightDirection(w),z=m.properties.get("color");return{u_lightpos:w,u_lightpos_globe:E,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+r,u_opacity:s,u_fill_translate:p}},ip=(y,r,s,p,m,v,w)=>a.e(Mc(y,r,s,p),Zu(v,y,w),{u_height_factor:-Math.pow(2,m.overscaledZ)/w.tileSize/8}),qu=(y,r,s,p)=>a.e(Zu(r,y,s),{u_fill_translate:p}),la=(y,r)=>({u_world:y,u_fill_translate:r}),X_=(y,r,s,p,m)=>a.e(qu(y,r,s,m),{u_world:p}),ap=(y,r,s,p,m)=>{const v=y.transform;let w,P,E=0;if(s.paint.get("circle-pitch-alignment")==="map"){const z=a.aB(r,1,v.zoom);w=!0,P=[z,z],E=z/(a.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*m}else w=!1,P=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(s.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+w,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:E,u_translate:p}},Rc=y=>({u_pixel_extrude_scale:[1/y.width,1/y.height]}),Ac=y=>({u_viewport_size:[y.width,y.height]}),bg=(y,r=1)=>({u_color:y,u_overlay:0,u_overlay_scale:r}),zc=(y,r,s,p)=>{const m=a.aB(y,1,r)/(a.$*Math.pow(2,y.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:a.aB(y,1,r),u_intensity:s,u_globe_extrude_scale:m}},wg=(y,r,s,p)=>{const m=a.L();a.bX(m,0,y.width,y.height,0,0,1);const v=y.context.gl;return{u_matrix:m,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:s,u_color_ramp:p,u_opacity:r.paint.get("heatmap-opacity")}},gl=(y,r,s)=>{const p=s.paint.get("hillshade-accent-color");let m;switch(s.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}const v=s.getIlluminationProperties();for(let w=0;w<v.directionRadians.length;w++)s.paint.get("hillshade-illumination-anchor")==="viewport"&&(v.directionRadians[w]+=y.transform.bearingInRadians);return{u_image:0,u_latrange:Sg(0,r.tileID),u_exaggeration:s.paint.get("hillshade-exaggeration"),u_altitudes:v.altitudeRadians,u_azimuths:v.directionRadians,u_accent:p,u_method:m,u_highlights:v.highlightColor,u_shadows:v.shadowColor}},Y_=(y,r)=>{const s=r.stride,p=a.L();return a.bX(p,0,a.$,-a.$,0,0,1),a.M(p,p,[0,-a.$,0]),{u_matrix:p,u_image:1,u_dimension:[s,s],u_zoom:y.overscaledZ,u_unpack:r.getUnpackVector()}};function Sg(y,r){const s=Math.pow(2,r.canonical.z),p=r.canonical.y;return[new a.a0(0,p/s).toLngLat().lat,new a.a0(0,(p+1)/s).toLngLat().lat]}const J_=(y,r,s=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:s,u_opacity:y.paint.get("color-relief-opacity")}),Ku=(y,r,s,p)=>{const m=y.transform;return{u_translation:cp(y,r,s),u_ratio:p/a.aB(r,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},sp=(y,r,s,p,m)=>a.e(Ku(y,r,s,p),{u_image:0,u_image_height:m}),Cg=(y,r,s,p,m)=>{const v=y.transform,w=lp(r,v);return{u_translation:cp(y,r,s),u_texsize:r.imageAtlasTexture.size,u_ratio:p/a.aB(r,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[w,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Pg=(y,r,s,p,m,v)=>{const w=y.lineAtlas,P=lp(r,y.transform),E=s.layout.get("line-cap")==="round",z=w.getDash(m.from,E),B=w.getDash(m.to,E),U=z.width*v.fromScale,V=B.width*v.toScale;return a.e(Ku(y,r,s,p),{u_patternscale_a:[P/U,-z.height/2],u_patternscale_b:[P/V,-B.height/2],u_sdfgamma:w.width/(256*Math.min(U,V)*y.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:B.y,u_mix:v.t})};function lp(y,r){return 1/a.aB(y,1,r.tileZoom)}function cp(y,r,s){return a.aC(y.transform,r,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const ks=(y,r,s,p,m)=>{return{u_tl_parent:y,u_scale_parent:r,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(w=p.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(v=p.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Tg(p.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var v,w};function Tg(y){y*=Math.PI/180;const r=Math.sin(y),s=Math.cos(y);return[(2*s+1)/3,(-Math.sqrt(3)*r-s+1)/3,(Math.sqrt(3)*r-s+1)/3]}const up=(y,r,s,p,m,v,w,P,E,z,B,U,V)=>{const Z=w.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:Z.width/Z.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:E,u_is_text:+B,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:v,u_texsize:U,u_texture:0,u_translation:z,u_pitched_scale:V}},yl=(y,r,s,p,m,v,w,P,E,z,B,U,V,Z)=>{const ie=w.transform;return a.e(up(y,r,s,p,m,v,w,P,E,z,B,U,Z),{u_gamma_scale:p?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},Q_=(y,r,s,p,m,v,w,P,E,z,B,U,V)=>a.e(yl(y,r,s,p,m,v,w,P,E,z,!0,B,0,V),{u_texsize_icon:U,u_texture_icon:1}),Xu=(y,r)=>({u_opacity:y,u_color:r}),ex=(y,r,s,p,m)=>a.e(function(v,w,P,E){const z=P.imageManager.getPattern(v.from.toString()),B=P.imageManager.getPattern(v.to.toString()),{width:U,height:V}=P.imageManager.getPixelSize(),Z=Math.pow(2,E.tileID.overscaledZ),ie=E.tileSize*Math.pow(2,P.transform.tileZoom)/Z,fe=ie*(E.tileID.canonical.x+E.tileID.wrap*Z),pe=ie*E.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[U,V],u_mix:w.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:w.fromScale,u_scale_b:w.toScale,u_tile_units_to_pixels:1/a.aB(E,1,P.transform.tileZoom),u_pixel_coord_upper:[fe>>16,pe>>16],u_pixel_coord_lower:[65535&fe,65535&pe]}}(s,m,r,p),{u_opacity:y}),Ig=(y,r)=>{},Eg={fillExtrusion:(y,r)=>({u_lightpos:new a.bS(y,r.u_lightpos),u_lightpos_globe:new a.bS(y,r.u_lightpos_globe),u_lightintensity:new a.bf(y,r.u_lightintensity),u_lightcolor:new a.bS(y,r.u_lightcolor),u_vertical_gradient:new a.bf(y,r.u_vertical_gradient),u_opacity:new a.bf(y,r.u_opacity),u_fill_translate:new a.bT(y,r.u_fill_translate)}),fillExtrusionPattern:(y,r)=>({u_lightpos:new a.bS(y,r.u_lightpos),u_lightpos_globe:new a.bS(y,r.u_lightpos_globe),u_lightintensity:new a.bf(y,r.u_lightintensity),u_lightcolor:new a.bS(y,r.u_lightcolor),u_vertical_gradient:new a.bf(y,r.u_vertical_gradient),u_height_factor:new a.bf(y,r.u_height_factor),u_opacity:new a.bf(y,r.u_opacity),u_fill_translate:new a.bT(y,r.u_fill_translate),u_image:new a.bO(y,r.u_image),u_texsize:new a.bT(y,r.u_texsize),u_pixel_coord_upper:new a.bT(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(y,r.u_pixel_coord_lower),u_scale:new a.bS(y,r.u_scale),u_fade:new a.bf(y,r.u_fade)}),fill:(y,r)=>({u_fill_translate:new a.bT(y,r.u_fill_translate)}),fillPattern:(y,r)=>({u_image:new a.bO(y,r.u_image),u_texsize:new a.bT(y,r.u_texsize),u_pixel_coord_upper:new a.bT(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(y,r.u_pixel_coord_lower),u_scale:new a.bS(y,r.u_scale),u_fade:new a.bf(y,r.u_fade),u_fill_translate:new a.bT(y,r.u_fill_translate)}),fillOutline:(y,r)=>({u_world:new a.bT(y,r.u_world),u_fill_translate:new a.bT(y,r.u_fill_translate)}),fillOutlinePattern:(y,r)=>({u_world:new a.bT(y,r.u_world),u_image:new a.bO(y,r.u_image),u_texsize:new a.bT(y,r.u_texsize),u_pixel_coord_upper:new a.bT(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(y,r.u_pixel_coord_lower),u_scale:new a.bS(y,r.u_scale),u_fade:new a.bf(y,r.u_fade),u_fill_translate:new a.bT(y,r.u_fill_translate)}),circle:(y,r)=>({u_camera_to_center_distance:new a.bf(y,r.u_camera_to_center_distance),u_scale_with_map:new a.bO(y,r.u_scale_with_map),u_pitch_with_map:new a.bO(y,r.u_pitch_with_map),u_extrude_scale:new a.bT(y,r.u_extrude_scale),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(y,r.u_globe_extrude_scale),u_translate:new a.bT(y,r.u_translate)}),collisionBox:(y,r)=>({u_pixel_extrude_scale:new a.bT(y,r.u_pixel_extrude_scale)}),collisionCircle:(y,r)=>({u_viewport_size:new a.bT(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new a.bP(y,r.u_color),u_overlay:new a.bO(y,r.u_overlay),u_overlay_scale:new a.bf(y,r.u_overlay_scale)}),depth:Ig,clippingMask:Ig,heatmap:(y,r)=>({u_extrude_scale:new a.bf(y,r.u_extrude_scale),u_intensity:new a.bf(y,r.u_intensity),u_globe_extrude_scale:new a.bf(y,r.u_globe_extrude_scale)}),heatmapTexture:(y,r)=>({u_matrix:new a.bQ(y,r.u_matrix),u_world:new a.bT(y,r.u_world),u_image:new a.bO(y,r.u_image),u_color_ramp:new a.bO(y,r.u_color_ramp),u_opacity:new a.bf(y,r.u_opacity)}),hillshade:(y,r)=>({u_image:new a.bO(y,r.u_image),u_latrange:new a.bT(y,r.u_latrange),u_exaggeration:new a.bf(y,r.u_exaggeration),u_altitudes:new a.bZ(y,r.u_altitudes),u_azimuths:new a.bZ(y,r.u_azimuths),u_accent:new a.bP(y,r.u_accent),u_method:new a.bO(y,r.u_method),u_shadows:new a.bY(y,r.u_shadows),u_highlights:new a.bY(y,r.u_highlights)}),hillshadePrepare:(y,r)=>({u_matrix:new a.bQ(y,r.u_matrix),u_image:new a.bO(y,r.u_image),u_dimension:new a.bT(y,r.u_dimension),u_zoom:new a.bf(y,r.u_zoom),u_unpack:new a.bR(y,r.u_unpack)}),colorRelief:(y,r)=>({u_image:new a.bO(y,r.u_image),u_unpack:new a.bR(y,r.u_unpack),u_dimension:new a.bT(y,r.u_dimension),u_elevation_stops:new a.bO(y,r.u_elevation_stops),u_color_stops:new a.bO(y,r.u_color_stops),u_color_ramp_size:new a.bO(y,r.u_color_ramp_size),u_opacity:new a.bf(y,r.u_opacity)}),line:(y,r)=>({u_translation:new a.bT(y,r.u_translation),u_ratio:new a.bf(y,r.u_ratio),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_units_to_pixels:new a.bT(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_translation:new a.bT(y,r.u_translation),u_ratio:new a.bf(y,r.u_ratio),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_units_to_pixels:new a.bT(y,r.u_units_to_pixels),u_image:new a.bO(y,r.u_image),u_image_height:new a.bf(y,r.u_image_height)}),linePattern:(y,r)=>({u_translation:new a.bT(y,r.u_translation),u_texsize:new a.bT(y,r.u_texsize),u_ratio:new a.bf(y,r.u_ratio),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_image:new a.bO(y,r.u_image),u_units_to_pixels:new a.bT(y,r.u_units_to_pixels),u_scale:new a.bS(y,r.u_scale),u_fade:new a.bf(y,r.u_fade)}),lineSDF:(y,r)=>({u_translation:new a.bT(y,r.u_translation),u_ratio:new a.bf(y,r.u_ratio),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_units_to_pixels:new a.bT(y,r.u_units_to_pixels),u_patternscale_a:new a.bT(y,r.u_patternscale_a),u_patternscale_b:new a.bT(y,r.u_patternscale_b),u_sdfgamma:new a.bf(y,r.u_sdfgamma),u_image:new a.bO(y,r.u_image),u_tex_y_a:new a.bf(y,r.u_tex_y_a),u_tex_y_b:new a.bf(y,r.u_tex_y_b),u_mix:new a.bf(y,r.u_mix)}),raster:(y,r)=>({u_tl_parent:new a.bT(y,r.u_tl_parent),u_scale_parent:new a.bf(y,r.u_scale_parent),u_buffer_scale:new a.bf(y,r.u_buffer_scale),u_fade_t:new a.bf(y,r.u_fade_t),u_opacity:new a.bf(y,r.u_opacity),u_image0:new a.bO(y,r.u_image0),u_image1:new a.bO(y,r.u_image1),u_brightness_low:new a.bf(y,r.u_brightness_low),u_brightness_high:new a.bf(y,r.u_brightness_high),u_saturation_factor:new a.bf(y,r.u_saturation_factor),u_contrast_factor:new a.bf(y,r.u_contrast_factor),u_spin_weights:new a.bS(y,r.u_spin_weights),u_coords_top:new a.bR(y,r.u_coords_top),u_coords_bottom:new a.bR(y,r.u_coords_bottom)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new a.bO(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(y,r.u_is_size_feature_constant),u_size_t:new a.bf(y,r.u_size_t),u_size:new a.bf(y,r.u_size),u_camera_to_center_distance:new a.bf(y,r.u_camera_to_center_distance),u_pitch:new a.bf(y,r.u_pitch),u_rotate_symbol:new a.bO(y,r.u_rotate_symbol),u_aspect_ratio:new a.bf(y,r.u_aspect_ratio),u_fade_change:new a.bf(y,r.u_fade_change),u_label_plane_matrix:new a.bQ(y,r.u_label_plane_matrix),u_coord_matrix:new a.bQ(y,r.u_coord_matrix),u_is_text:new a.bO(y,r.u_is_text),u_pitch_with_map:new a.bO(y,r.u_pitch_with_map),u_is_along_line:new a.bO(y,r.u_is_along_line),u_is_variable_anchor:new a.bO(y,r.u_is_variable_anchor),u_texsize:new a.bT(y,r.u_texsize),u_texture:new a.bO(y,r.u_texture),u_translation:new a.bT(y,r.u_translation),u_pitched_scale:new a.bf(y,r.u_pitched_scale)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new a.bO(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(y,r.u_is_size_feature_constant),u_size_t:new a.bf(y,r.u_size_t),u_size:new a.bf(y,r.u_size),u_camera_to_center_distance:new a.bf(y,r.u_camera_to_center_distance),u_pitch:new a.bf(y,r.u_pitch),u_rotate_symbol:new a.bO(y,r.u_rotate_symbol),u_aspect_ratio:new a.bf(y,r.u_aspect_ratio),u_fade_change:new a.bf(y,r.u_fade_change),u_label_plane_matrix:new a.bQ(y,r.u_label_plane_matrix),u_coord_matrix:new a.bQ(y,r.u_coord_matrix),u_is_text:new a.bO(y,r.u_is_text),u_pitch_with_map:new a.bO(y,r.u_pitch_with_map),u_is_along_line:new a.bO(y,r.u_is_along_line),u_is_variable_anchor:new a.bO(y,r.u_is_variable_anchor),u_texsize:new a.bT(y,r.u_texsize),u_texture:new a.bO(y,r.u_texture),u_gamma_scale:new a.bf(y,r.u_gamma_scale),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_is_halo:new a.bO(y,r.u_is_halo),u_translation:new a.bT(y,r.u_translation),u_pitched_scale:new a.bf(y,r.u_pitched_scale)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new a.bO(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(y,r.u_is_size_feature_constant),u_size_t:new a.bf(y,r.u_size_t),u_size:new a.bf(y,r.u_size),u_camera_to_center_distance:new a.bf(y,r.u_camera_to_center_distance),u_pitch:new a.bf(y,r.u_pitch),u_rotate_symbol:new a.bO(y,r.u_rotate_symbol),u_aspect_ratio:new a.bf(y,r.u_aspect_ratio),u_fade_change:new a.bf(y,r.u_fade_change),u_label_plane_matrix:new a.bQ(y,r.u_label_plane_matrix),u_coord_matrix:new a.bQ(y,r.u_coord_matrix),u_is_text:new a.bO(y,r.u_is_text),u_pitch_with_map:new a.bO(y,r.u_pitch_with_map),u_is_along_line:new a.bO(y,r.u_is_along_line),u_is_variable_anchor:new a.bO(y,r.u_is_variable_anchor),u_texsize:new a.bT(y,r.u_texsize),u_texsize_icon:new a.bT(y,r.u_texsize_icon),u_texture:new a.bO(y,r.u_texture),u_texture_icon:new a.bO(y,r.u_texture_icon),u_gamma_scale:new a.bf(y,r.u_gamma_scale),u_device_pixel_ratio:new a.bf(y,r.u_device_pixel_ratio),u_is_halo:new a.bO(y,r.u_is_halo),u_translation:new a.bT(y,r.u_translation),u_pitched_scale:new a.bf(y,r.u_pitched_scale)}),background:(y,r)=>({u_opacity:new a.bf(y,r.u_opacity),u_color:new a.bP(y,r.u_color)}),backgroundPattern:(y,r)=>({u_opacity:new a.bf(y,r.u_opacity),u_image:new a.bO(y,r.u_image),u_pattern_tl_a:new a.bT(y,r.u_pattern_tl_a),u_pattern_br_a:new a.bT(y,r.u_pattern_br_a),u_pattern_tl_b:new a.bT(y,r.u_pattern_tl_b),u_pattern_br_b:new a.bT(y,r.u_pattern_br_b),u_texsize:new a.bT(y,r.u_texsize),u_mix:new a.bf(y,r.u_mix),u_pattern_size_a:new a.bT(y,r.u_pattern_size_a),u_pattern_size_b:new a.bT(y,r.u_pattern_size_b),u_scale_a:new a.bf(y,r.u_scale_a),u_scale_b:new a.bf(y,r.u_scale_b),u_pixel_coord_upper:new a.bT(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_texture:new a.bO(y,r.u_texture),u_ele_delta:new a.bf(y,r.u_ele_delta),u_fog_matrix:new a.bQ(y,r.u_fog_matrix),u_fog_color:new a.bP(y,r.u_fog_color),u_fog_ground_blend:new a.bf(y,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(y,r.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(y,r.u_horizon_color),u_horizon_fog_blend:new a.bf(y,r.u_horizon_fog_blend),u_is_globe_mode:new a.bf(y,r.u_is_globe_mode)}),terrainDepth:(y,r)=>({u_ele_delta:new a.bf(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_texture:new a.bO(y,r.u_texture),u_terrain_coords_id:new a.bf(y,r.u_terrain_coords_id),u_ele_delta:new a.bf(y,r.u_ele_delta)}),projectionErrorMeasurement:(y,r)=>({u_input:new a.bf(y,r.u_input),u_output_expected:new a.bf(y,r.u_output_expected)}),atmosphere:(y,r)=>({u_sun_pos:new a.bS(y,r.u_sun_pos),u_atmosphere_blend:new a.bf(y,r.u_atmosphere_blend),u_globe_position:new a.bS(y,r.u_globe_position),u_globe_radius:new a.bf(y,r.u_globe_radius),u_inv_proj_matrix:new a.bQ(y,r.u_inv_proj_matrix)}),sky:(y,r)=>({u_sky_color:new a.bP(y,r.u_sky_color),u_horizon_color:new a.bP(y,r.u_horizon_color),u_horizon:new a.bT(y,r.u_horizon),u_horizon_normal:new a.bT(y,r.u_horizon_normal),u_sky_horizon_blend:new a.bf(y,r.u_sky_horizon_blend),u_sky_blend:new a.bf(y,r.u_sky_blend)})};class kg{constructor(r,s,p){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mg={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dp{constructor(r,s,p,m){this.length=s.length,this.attributes=p,this.itemSize=s.bytesPerElement,this.dynamicDraw=m,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,s){for(let p=0;p<this.attributes.length;p++){const m=s.attributes[this.attributes[p].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,s,p){for(let m=0;m<this.attributes.length;m++){const v=this.attributes[m],w=s.attributes[v.name];w!==void 0&&r.vertexAttribPointer(w,v.components,r[Mg[v.type]],!1,this.itemSize,v.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Hr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yu extends Hr{getDefault(){return a.be.transparent}set(r){const s=this.current;(r.r!==s.r||r.g!==s.g||r.b!==s.b||r.a!==s.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ra extends Hr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class hp extends Hr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class pp extends Hr{getDefault(){return[!0,!0,!0,!0]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||r[3]!==s[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class fp extends Hr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Rg extends Hr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class mp extends Hr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const s=this.current;(r.func!==s.func||r.ref!==s.ref||r.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Ms extends Hr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class gp extends Hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=r,this.dirty=!1}}class tx extends Hr{getDefault(){return[0,1]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class rx extends Hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=r,this.dirty=!1}}class nx extends Hr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ox extends Hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.BLEND):s.disable(s.BLEND),this.current=r,this.dirty=!1}}class Ag extends Hr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class ix extends Hr{getDefault(){return a.be.transparent}set(r){const s=this.current;(r.r!==s.r||r.g!==s.g||r.b!==s.b||r.a!==s.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class zg extends Hr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Ju extends Hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;r?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=r,this.dirty=!1}}class Qu extends Hr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ed extends Hr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class yp extends Hr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Rs extends Hr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Dc extends Hr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const s=this.current;(r[0]!==s[0]||r[1]!==s[1]||r[2]!==s[2]||r[3]!==s[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class vl extends Hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class _i extends Hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Dg extends Hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Lg extends Hr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class vp extends Hr{getDefault(){return null}set(r){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class As extends Hr{getDefault(){return null}set(r){var s;if(r===this.current&&!this.dirty)return;const p=this.gl;Oo(p)?p.bindVertexArray(r):(s=p.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class td extends Hr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class rd extends Hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Lc extends Hr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class _l extends Hr{constructor(r,s){super(r),this.context=r,this.parent=s}getDefault(){return null}}class $g extends _l{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class xl extends _l{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class bl extends _l{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const _p="Framebuffer is not complete";class xp{constructor(r,s,p,m,v){this.context=r,this.width=s,this.height=p;const w=r.gl,P=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new $g(r,P),m)this.depthAttachment=v?new bl(r,P):new xl(r,P);else if(v)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error(_p)}destroy(){const r=this.context.gl,s=this.colorAttachment.get();if(s&&r.deleteTexture(s),this.depthAttachment){const p=this.depthAttachment.get();p&&r.deleteRenderbuffer(p)}r.deleteFramebuffer(this.framebuffer)}}class Pr{constructor(r){var s,p;if(this.gl=r,this.clearColor=new Yu(this),this.clearDepth=new Ra(this),this.clearStencil=new hp(this),this.colorMask=new pp(this),this.depthMask=new fp(this),this.stencilMask=new Rg(this),this.stencilFunc=new mp(this),this.stencilOp=new Ms(this),this.stencilTest=new gp(this),this.depthRange=new tx(this),this.depthTest=new rx(this),this.depthFunc=new nx(this),this.blend=new ox(this),this.blendFunc=new Ag(this),this.blendColor=new ix(this),this.blendEquation=new zg(this),this.cullFace=new Ju(this),this.cullFaceSide=new Qu(this),this.frontFace=new ed(this),this.program=new yp(this),this.activeTexture=new Rs(this),this.viewport=new Dc(this),this.bindFramebuffer=new vl(this),this.bindRenderbuffer=new _i(this),this.bindTexture=new Dg(this),this.bindVertexBuffer=new Lg(this),this.bindElementBuffer=new vp(this),this.bindVertexArray=new As(this),this.pixelStoreUnpack=new td(this),this.pixelStoreUnpackPremultiplyAlpha=new rd(this),this.pixelStoreUnpackFlipY=new Lc(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Oo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=r.RGBA16F)!==null&&s!==void 0?s:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=r.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,s){return new kg(this,r,s)}createVertexBuffer(r,s,p){return new dp(this,r,s,p)}createRenderbuffer(r,s,p){const m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,r,s,p),this.bindRenderbuffer.set(null),v}createFramebuffer(r,s,p,m){return new xp(this,r,s,p,m)}clear({color:r,depth:s,stencil:p}){const m=this.gl;let v=0;r&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),p!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bG(r.blendFunction,Mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Oo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var s;return Oo(this.gl)?this.gl.deleteVertexArray(r):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let zs;function Og(y,r,s,p,m){const v=y.context,w=y.transform,P=v.gl,E=y.useProgram("collisionBox"),z=[];let B=0,U=0;for(let me=0;me<p.length;me++){const ve=p[me],Ce=r.getTile(ve).getBucket(s);if(!Ce)continue;const be=m?Ce.textCollisionBox:Ce.iconCollisionBox,ke=Ce.collisionCircleArray;ke.length>0&&(z.push({circleArray:ke,circleOffset:U,coord:ve}),B+=ke.length/4,U=B),be&&E.draw(v,P.LINES,vr.disabled,hr.disabled,y.colorModeForRenderPass(),fr.disabled,Rc(y.transform),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),w.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),s.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,y.transform.zoom,null,null,be.collisionVertexBuffer)}if(!m||!z.length)return;const V=y.useProgram("collisionCircle"),Z=new a.b_;Z.resize(4*B),Z._trim();let ie=0;for(const me of z)for(let ve=0;ve<me.circleArray.length/4;ve++){const Ce=4*ve,be=me.circleArray[Ce+0],ke=me.circleArray[Ce+1],Le=me.circleArray[Ce+2],Se=me.circleArray[Ce+3];Z.emplace(ie++,be,ke,Le,Se,0),Z.emplace(ie++,be,ke,Le,Se,1),Z.emplace(ie++,be,ke,Le,Se,2),Z.emplace(ie++,be,ke,Le,Se,3)}(!zs||zs.length<2*B)&&(zs=function(me){const ve=2*me,Ce=new a.c0;Ce.resize(ve),Ce._trim();for(let be=0;be<ve;be++){const ke=6*be;Ce.uint16[ke+0]=4*be+0,Ce.uint16[ke+1]=4*be+1,Ce.uint16[ke+2]=4*be+2,Ce.uint16[ke+3]=4*be+2,Ce.uint16[ke+4]=4*be+3,Ce.uint16[ke+5]=4*be+0}return Ce}(B));const fe=v.createIndexBuffer(zs,!0),pe=v.createVertexBuffer(Z,a.b$.members,!0);for(const me of z){const ve=Ac(y.transform);V.draw(v,P.TRIANGLES,vr.disabled,hr.disabled,y.colorModeForRenderPass(),fr.disabled,ve,y.style.map.terrain&&y.style.map.terrain.getTerrainData(me.coord),null,s.id,pe,fe,a.aL.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,y.transform.zoom,null,null,null)}pe.destroy(),fe.destroy()}const Bg=a.af(new Float32Array(16));function $c(y,r,s,p,m,v){const{horizontalAlign:w,verticalAlign:P}=a.aG(y);return new a.P((-(w-.5)*r/m+p[0])*v,(-(P-.5)*s/m+p[1])*v)}function ax(y,r,s,p,m,v){const w=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let P=p.mult(v);s||(P=P.rotate(-m));const E=w.add(P);return It(E.x,E.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(s){const P=Ie(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(y),E=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return y.add(p.rotate(E))}return y.add(p)}function sx(y,r,s,p,m,v,w,P,E,z,B,U){const V=y.text.placedSymbolArray,Z=y.text.dynamicLayoutVertexArray,ie=y.icon.dynamicLayoutVertexArray,fe={};Z.clear();for(let pe=0;pe<V.length;pe++){const me=V.get(pe),ve=me.hidden||!me.crossTileID||y.allowVerticalPlacement&&!me.placedOrientation?null:p[me.crossTileID];if(ve){const Ce=new a.P(me.anchorX,me.anchorY),be={getElevation:U,width:m.width,height:m.height,pitchedLabelPlaneMatrix:v,pitchWithMap:s,transform:m,tileAnchorPoint:Ce,translation:z,unwrappedTileID:B},ke=s?_t(Ce.x,Ce.y,be):Ie(Ce.x,Ce.y,be),Le=bt(m.cameraToCenterDistance,ke.signedDistanceFromCamera);let Se=a.ao(y.textSizeData,P,me)*Le/a.aA;s&&(Se*=y.tilePixelRatio/w);const{width:Ne,height:Qe,anchor:Ke,textOffset:Xe,textBoxScale:et}=ve,Rt=$c(Ke,Ne,Qe,Xe,et,Se),Et=m.getPitchedTextCorrection(Ce.x+z[0],Ce.y+z[1],B),gt=ax(ke.point,be,r,Rt,-m.bearingInRadians,Et),Gt=y.allowVerticalPlacement&&me.placedOrientation===a.an.vertical?Math.PI/2:0;for(let _r=0;_r<me.numGlyphs;_r++)a.au(Z,gt,Gt);E&&me.associatedIconIndex>=0&&(fe[me.associatedIconIndex]={shiftedAnchor:gt,angle:Gt})}else sn(me.numGlyphs,Z)}if(E){ie.clear();const pe=y.icon.placedSymbolArray;for(let me=0;me<pe.length;me++){const ve=pe.get(me);if(ve.hidden)sn(ve.numGlyphs,ie);else{const Ce=fe[me];if(Ce)for(let be=0;be<ve.numGlyphs;be++)a.au(ie,Ce.shiftedAnchor,Ce.angle);else sn(ve.numGlyphs,ie)}}y.icon.dynamicLayoutVertexBuffer.updateData(ie)}y.text.dynamicLayoutVertexBuffer.updateData(Z)}function Fg(y,r,s){return s.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function jg(y,r,s,p,m,v,w,P,E,z,B,U,V){const Z=y.context,ie=Z.gl,fe=y.transform,pe=P==="map",me=E==="map",ve=P!=="viewport"&&s.layout.get("symbol-placement")!=="point",Ce=pe&&!me&&!ve,be=!s.layout.get("symbol-sort-key").isConstant();let ke=!1;const Le=y.getDepthModeForSublayer(0,vr.ReadOnly),Se=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ne=[],Qe=fe.getCircleRadiusCorrection();for(const Ke of p){const Xe=r.getTile(Ke),et=Xe.getBucket(s);if(!et)continue;const Rt=m?et.text:et.icon;if(!Rt||!Rt.segments.get().length||!Rt.hasVisibleVertices)continue;const Et=Rt.programConfigurations.get(s.id),gt=m||et.sdfIcons,Gt=m?et.textSizeData:et.iconSizeData,_r=me||fe.pitch!==0,Gr=y.useProgram(Fg(gt,m,et),Et),xn=a.am(Gt,fe.zoom),Yr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);let bn,on,Jr,an,fo=[0,0],Dr=null;if(m)on=Xe.glyphAtlasTexture,Jr=ie.LINEAR,bn=Xe.glyphAtlasTexture.size,et.iconsInText&&(fo=Xe.imageAtlasTexture.size,Dr=Xe.imageAtlasTexture,an=_r||y.options.rotating||y.options.zooming||Gt.kind==="composite"||Gt.kind==="camera"?ie.LINEAR:ie.NEAREST);else{const Rn=s.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;on=Xe.imageAtlasTexture,Jr=gt||y.options.rotating||y.options.zooming||Rn||_r?ie.LINEAR:ie.NEAREST,bn=Xe.imageAtlasTexture.size}const oo=a.aB(Xe,1,y.transform.zoom),mo=Ve(pe,y.transform,oo),ns=a.L();a.ap(ns,mo);const os=ut(me,pe,y.transform,oo),is=a.aC(fe,Xe,v,w),da=fe.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),Xc=Se&&et.hasTextData(),Yc=s.layout.get("icon-text-fit")!=="none"&&Xc&&et.hasIconData();if(ve){const Rn=y.style.map.terrain?(No,Kn)=>y.style.map.terrain.getElevation(Ke,No,Kn):null,dn=s.layout.get("text-rotation-alignment")==="map";Bt(et,y,m,mo,ns,me,z,dn,Ke.toUnwrapped(),fe.width,fe.height,is,Rn)}const zl=m&&Se||Yc,Qo=ve||zl?Bg:me?mo:y.transform.clipSpaceToPixelsMatrix,Bi=gt&&s.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let as;as=gt?et.iconsInText?Q_(Gt.kind,xn,Ce,me,ve,zl,y,Qo,os,is,bn,fo,Qe):yl(Gt.kind,xn,Ce,me,ve,zl,y,Qo,os,is,m,bn,0,Qe):up(Gt.kind,xn,Ce,me,ve,zl,y,Qo,os,is,m,bn,Qe);const $s={program:Gr,buffers:Rt,uniformValues:as,projectionData:da,atlasTexture:on,atlasTextureIcon:Dr,atlasInterpolation:Jr,atlasInterpolationIcon:an,isSDF:gt,hasHalo:Bi};if(be&&et.canOverlap){ke=!0;const Rn=Rt.segments.get();for(const dn of Rn)Ne.push({segments:new a.aL([dn]),sortKey:dn.sortKey,state:$s,terrainData:Yr})}else Ne.push({segments:Rt.segments,sortKey:0,state:$s,terrainData:Yr})}ke&&Ne.sort((Ke,Xe)=>Ke.sortKey-Xe.sortKey);for(const Ke of Ne){const Xe=Ke.state;if(Z.activeTexture.set(ie.TEXTURE0),Xe.atlasTexture.bind(Xe.atlasInterpolation,ie.CLAMP_TO_EDGE),Xe.atlasTextureIcon&&(Z.activeTexture.set(ie.TEXTURE1),Xe.atlasTextureIcon&&Xe.atlasTextureIcon.bind(Xe.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),Xe.isSDF){const et=Xe.uniformValues;Xe.hasHalo&&(et.u_is_halo=1,nd(Xe.buffers,Ke.segments,s,y,Xe.program,Le,B,U,et,Xe.projectionData,Ke.terrainData)),et.u_is_halo=0}nd(Xe.buffers,Ke.segments,s,y,Xe.program,Le,B,U,Xe.uniformValues,Xe.projectionData,Ke.terrainData)}}function nd(y,r,s,p,m,v,w,P,E,z,B){const U=p.context;m.draw(U,U.gl.TRIANGLES,v,w,P,fr.backCCW,E,B,z,s.id,y.layoutVertexBuffer,y.indexBuffer,r,s.paint,p.transform.zoom,y.programConfigurations.get(s.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function od(y,r,s,p,m){const v=y.context,w=v.gl,P=hr.disabled,E=new Mr([w.ONE,w.ONE],a.be.transparent,[!0,!0,!0,!0]),z=r.getBucket(s);if(!z)return;const B=p.key;let U=s.heatmapFbos.get(B);U||(U=Oc(v,r.tileSize,r.tileSize),s.heatmapFbos.set(B,U)),v.bindFramebuffer.set(U.framebuffer),v.viewport.set([0,0,r.tileSize,r.tileSize]),v.clear({color:a.be.transparent});const V=z.programConfigurations.get(s.id),Z=y.useProgram("heatmap",V,!m),ie=y.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),fe=y.style.map.terrain.getTerrainData(p);Z.draw(v,w.TRIANGLES,vr.disabled,P,E,fr.disabled,zc(r,y.transform.zoom,s.paint.get("heatmap-intensity"),1),fe,ie,s.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,s.paint,y.transform.zoom,V)}function id(y,r,s,p,m){const v=y.context,w=v.gl,P=y.transform;v.setColorMode(y.colorModeForRenderPass());const E=ad(v,r),z=s.key,B=r.heatmapFbos.get(z);if(!B)return;v.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,B.colorAttachment.get()),v.activeTexture.set(w.TEXTURE1),E.bind(w.LINEAR,w.CLAMP_TO_EDGE);const U=P.getProjectionData({overscaledTileID:s,applyTerrainMatrix:m,applyGlobeMatrix:!p});y.useProgram("heatmapTexture").draw(v,w.TRIANGLES,vr.disabled,hr.disabled,y.colorModeForRenderPass(),fr.disabled,wg(y,r,0,1),null,U,r.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,r.paint,P.zoom),B.destroy(),r.heatmapFbos.delete(z)}function Oc(y,r,s){var p,m;const v=y.gl,w=v.createTexture();v.bindTexture(v.TEXTURE_2D,w),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);const P=(p=y.HALF_FLOAT)!==null&&p!==void 0?p:v.UNSIGNED_BYTE,E=(m=y.RGBA16F)!==null&&m!==void 0?m:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,E,r,s,0,v.RGBA,P,null);const z=y.createFramebuffer(r,s,!1,!1);return z.colorAttachment.set(w),z}function ad(y,r){return r.colorRampTexture||(r.colorRampTexture=new a.T(y,r.colorRamp,y.gl.RGBA)),r.colorRampTexture}function bp(y,r,s,p,m){if(!s||!p||!p.imageAtlas)return;const v=p.imageAtlas.patternPositions;let w=v[s.to.toString()],P=v[s.from.toString()];if(!w&&P&&(w=P),!P&&w&&(P=w),!w||!P){const E=m.getPaintProperty(r);w=v[E],P=v[E]}w&&P&&y.setConstantPatternPositions(w,P)}function Bc(y,r,s,p,m,v,w,P){const E=y.context.gl,z="fill-pattern",B=s.paint.get(z),U=B&&B.constantOr(1),V=s.getCrossfadeParameters();let Z,ie,fe,pe,me;const ve=y.transform,Ce=s.paint.get("fill-translate"),be=s.paint.get("fill-translate-anchor");w?(ie=U&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=E.LINES):(ie=U?"fillPattern":"fill",Z=E.TRIANGLES);const ke=B.constantOr(null);for(const Le of p){const Se=r.getTile(Le);if(U&&!Se.patternsLoaded())continue;const Ne=Se.getBucket(s);if(!Ne)continue;const Qe=Ne.programConfigurations.get(s.id),Ke=y.useProgram(ie,Qe),Xe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Le);U&&(y.context.activeTexture.set(E.TEXTURE0),Se.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Qe.updatePaintBuffers(V)),bp(Qe,z,ke,Se,s);const et=ve.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),Rt=a.aC(ve,Se,Ce,be);if(w){pe=Ne.indexBuffer2,me=Ne.segments2;const gt=[E.drawingBufferWidth,E.drawingBufferHeight];fe=ie==="fillOutlinePattern"&&U?X_(y,V,Se,gt,Rt):la(gt,Rt)}else pe=Ne.indexBuffer,me=Ne.segments,fe=U?qu(y,V,Se,Rt):{u_fill_translate:Rt};const Et=y.stencilModeForClipping(Le);Ke.draw(y.context,Z,m,Et,v,fr.backCCW,fe,Xe,et,s.id,Ne.layoutVertexBuffer,pe,me,s.paint,y.transform.zoom,Qe)}}function wl(y,r,s,p,m,v,w,P){const E=y.context,z=E.gl,B="fill-extrusion-pattern",U=s.paint.get(B),V=U.constantOr(1),Z=s.getCrossfadeParameters(),ie=s.paint.get("fill-extrusion-opacity"),fe=U.constantOr(null),pe=y.transform;for(const me of p){const ve=r.getTile(me),Ce=ve.getBucket(s);if(!Ce)continue;const be=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),ke=Ce.programConfigurations.get(s.id),Le=y.useProgram(V?"fillExtrusionPattern":"fillExtrusion",ke);V&&(y.context.activeTexture.set(z.TEXTURE0),ve.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ke.updatePaintBuffers(Z));const Se=pe.getProjectionData({overscaledTileID:me,applyGlobeMatrix:!P,applyTerrainMatrix:!0});bp(ke,B,fe,ve,s);const Ne=a.aC(pe,ve,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Qe=s.paint.get("fill-extrusion-vertical-gradient"),Ke=V?ip(y,Qe,ie,Ne,me,Z,ve):Mc(y,Qe,ie,Ne);Le.draw(E,E.gl.TRIANGLES,m,v,w,fr.backCCW,Ke,be,Se,s.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,s.paint,y.transform.zoom,ke,y.style.map.terrain&&Ce.centroidVertexBuffer)}}function Sl(y,r,s,p,m,v,w,P,E){var z;const B=y.style.projection,U=y.context,V=y.transform,Z=U.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${s.paint.get("hillshade-highlight-color").values.length}`],fe=y.useProgram("hillshade",null,!1,ie),pe=!y.options.moving;for(const me of p){const ve=r.getTile(me),Ce=ve.fbo;if(!Ce)continue;const be=B.getMeshFromTileID(U,me.canonical,P,!0,"raster"),ke=(z=y.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(me);U.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,Ce.colorAttachment.get());const Le=V.getProjectionData({overscaledTileID:me,aligned:pe,applyGlobeMatrix:!E,applyTerrainMatrix:!0});fe.draw(U,Z.TRIANGLES,v,m[me.overscaledZ],w,fr.backCCW,gl(y,ve,s),ke,Le,s.id,be.vertexBuffer,be.indexBuffer,be.segments)}}function Fc(y,r,s,p,m,v,w,P,E){var z;const B=y.style.projection,U=y.context,V=y.transform,Z=U.gl,ie=y.useProgram("colorRelief"),fe=!y.options.moving;let pe=!0,me=0;for(const ve of p){const Ce=r.getTile(ve),be=Ce.dem;if(pe){const Ke=Z.getParameter(Z.MAX_TEXTURE_SIZE),{elevationTexture:Xe,colorTexture:et}=s.getColorRampTextures(U,Ke,be.getUnpackVector());U.activeTexture.set(Z.TEXTURE1),Xe.bind(Z.NEAREST,Z.CLAMP_TO_EDGE),U.activeTexture.set(Z.TEXTURE4),et.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),pe=!1,me=Xe.size[0]}if(!be||!be.data)continue;const ke=be.stride,Le=be.getPixels();if(U.activeTexture.set(Z.TEXTURE0),U.pixelStoreUnpackPremultiplyAlpha.set(!1),Ce.demTexture=Ce.demTexture||y.getTileTexture(ke),Ce.demTexture){const Ke=Ce.demTexture;Ke.update(Le,{premultiply:!1}),Ke.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}else Ce.demTexture=new a.T(U,Le,Z.RGBA,{premultiply:!1}),Ce.demTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE);const Se=B.getMeshFromTileID(U,ve.canonical,P,!0,"raster"),Ne=(z=y.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(ve),Qe=V.getProjectionData({overscaledTileID:ve,aligned:fe,applyGlobeMatrix:!E,applyTerrainMatrix:!0});ie.draw(U,Z.TRIANGLES,v,m[ve.overscaledZ],w,fr.backCCW,J_(s,Ce.dem,me),Ne,Qe,s.id,Se.vertexBuffer,Se.indexBuffer,Se.segments)}}const wp=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ja(y,r,s,p,m,v,w,P,E=!1,z=!1){const B=p[p.length-1].overscaledZ,U=y.context,V=U.gl,Z=y.useProgram("raster"),ie=y.transform,fe=y.style.projection,pe=y.colorModeForRenderPass(),me=!y.options.moving;for(const ve of p){const Ce=y.getDepthModeForSublayer(ve.overscaledZ-B,s.paint.get("raster-opacity")===1?vr.ReadWrite:vr.ReadOnly,V.LESS),be=r.getTile(ve);be.registerFadeDuration(s.paint.get("raster-fade-duration"));const ke=r.findLoadedParent(ve,0),Le=r.findLoadedSibling(ve),Se=lx(be,ke||Le||null,r,s,y.transform,y.style.map.terrain);let Ne,Qe;const Ke=s.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;U.activeTexture.set(V.TEXTURE0),be.texture.bind(Ke,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),U.activeTexture.set(V.TEXTURE1),ke?(ke.texture.bind(Ke,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),Ne=Math.pow(2,ke.tileID.overscaledZ-be.tileID.overscaledZ),Qe=[be.tileID.canonical.x*Ne%1,be.tileID.canonical.y*Ne%1]):be.texture.bind(Ke,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),be.texture.useMipmap&&U.extTextureFilterAnisotropic&&y.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const Xe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),et=ie.getProjectionData({overscaledTileID:ve,aligned:me,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),Rt=ks(Qe||[0,0],Ne||1,Se,s,P),Et=fe.getMeshFromTileID(U,ve.canonical,v,w,"raster");Z.draw(U,V.TRIANGLES,Ce,m?m[ve.overscaledZ]:hr.disabled,pe,E?fr.frontCCW:fr.backCCW,Rt,Xe,et,s.id,Et.vertexBuffer,Et.indexBuffer,Et.segments)}}function lx(y,r,s,p,m,v){const w=p.paint.get("raster-fade-duration");if(!v&&w>0){const P=M.now(),E=(P-y.timeAdded)/w,z=r?(P-r.timeAdded)/w:-1,B=s.getSource(),U=qe(m,{tileSize:B.tileSize,roundZoom:B.roundZoom}),V=!r||Math.abs(r.tileID.overscaledZ-U)>Math.abs(y.tileID.overscaledZ-U),Z=V&&y.refreshedUponExpiration?1:a.ag(V?E:1-z,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const Ng=new a.be(1,0,0,1),sd=new a.be(0,1,0,1),Sp=new a.be(0,0,1,1),Vg=new a.be(1,0,1,1),Ug=new a.be(0,1,1,1);function jc(y,r,s,p){cd(y,0,r+s/2,y.transform.width,s,p)}function ld(y,r,s,p){cd(y,r-s/2,0,s,y.transform.height,p)}function cd(y,r,s,p,m,v){const w=y.context,P=w.gl;P.enable(P.SCISSOR_TEST),P.scissor(r*y.pixelRatio,s*y.pixelRatio,p*y.pixelRatio,m*y.pixelRatio),w.clear({color:v}),P.disable(P.SCISSOR_TEST)}function Hg(y,r,s){const p=y.context,m=p.gl,v=y.useProgram("debug"),w=vr.disabled,P=hr.disabled,E=y.colorModeForRenderPass(),z="$debug",B=y.style.map.terrain&&y.style.map.terrain.getTerrainData(s);p.activeTexture.set(m.TEXTURE0);const U=r.getTileByID(s.key).latestRawTileData,V=Math.floor((U&&U.byteLength||0)/1024),Z=r.getTile(s).tileSize,ie=512/Math.min(Z,512)*(s.overscaledZ/y.transform.zoom)*.5;let fe=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(fe+=` => ${s.overscaledZ}`),function(me,ve){me.initDebugOverlayCanvas();const Ce=me.debugOverlayCanvas,be=me.context.gl,ke=me.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,Ce.width,Ce.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(ve,5,5),ke.strokeText(ve,5,5),me.debugOverlayTexture.update(Ce),me.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(y,`${fe} ${V}kB`);const pe=y.transform.getProjectionData({overscaledTileID:s,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(p,m.TRIANGLES,w,P,Mr.alphaBlended,fr.disabled,bg(a.be.transparent,ie),null,pe,z,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),v.draw(p,m.LINE_STRIP,w,P,E,fr.disabled,bg(a.be.red),B,pe,z,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Tn(y,r,s,p){const{isRenderingGlobe:m}=p,v=y.context,w=v.gl,P=y.transform,E=y.colorModeForRenderPass(),z=y.getDepthModeFor3D(),B=y.useProgram("terrain");v.bindFramebuffer.set(null),v.viewport.set([0,0,y.width,y.height]);for(const U of s){const V=r.getTerrainMesh(U.tileID),Z=y.renderToTexture.getTexture(U),ie=r.getTerrainData(U.tileID);v.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,Z.texture);const fe=r.getMeshFrameDelta(P.zoom),pe=P.calculateFogMatrix(U.tileID.toUnwrapped()),me=q_(fe,pe,y.style.sky,P.pitch,m),ve=P.getProjectionData({overscaledTileID:U.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(v,w.TRIANGLES,z,hr.disabled,E,fr.backCCW,me,ie,ve,"terrain",V.vertexBuffer,V.indexBuffer,V.segments)}}function Qa(y,r){if(!r.mesh){const s=new a.aK;s.emplaceBack(-1,-1),s.emplaceBack(1,-1),s.emplaceBack(1,1),s.emplaceBack(-1,1);const p=new a.aM;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),r.mesh=new Ea(y.createVertexBuffer(s,ka.members),y.createIndexBuffer(p),a.aL.simpleSegment(0,0,s.length,p.length))}return r.mesh}class xi{constructor(r,s){this.context=new Pr(r),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=nt.maxUnderzooming+nt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Nu}resize(r,s,p){if(this.width=Math.floor(r*p),this.height=Math.floor(s*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,s=new a.aK;s.emplaceBack(0,0),s.emplaceBack(a.$,0),s.emplaceBack(0,a.$),s.emplaceBack(a.$,a.$),this.tileExtentBuffer=r.createVertexBuffer(s,ka.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const p=new a.aK;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.debugBuffer=r.createVertexBuffer(p,ka.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const m=new a.c5;m.emplaceBack(0,0,0,0),m.emplaceBack(a.$,0,a.$,0),m.emplaceBack(0,a.$,0,a.$),m.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=r.createVertexBuffer(m,W_.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const v=new a.aK;v.emplaceBack(0,0),v.emplaceBack(a.$,0),v.emplaceBack(0,a.$),v.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(v,ka.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const w=new a.aK;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(w,ka.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const P=new a.c6;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(P);const E=new a.aM;E.emplaceBack(1,0,2),E.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(E);const z=this.context.gl;this.stencilClearMode=new hr({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new Ea(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,s=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=a.L();a.bX(p,0,this.width,this.height,0,0,1),a.N(p,p,[s.drawingBufferWidth,s.drawingBufferHeight,0]);const m={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(r,s.TRIANGLES,vr.disabled,this.stencilClearMode,Mr.disabled,fr.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,s,p){if(this.currentStencilSource===r.source||!r.isTileClipped()||!s||!s.length)return;this.currentStencilSource=r.source,this.nextStencilID+s.length>256&&this.clearStencil();const m=this.context;m.setColorMode(Mr.disabled),m.setDepthMode(vr.disabled);const v={};for(const w of s)v[w.key]=this.nextStencilID++;this._renderTileMasks(v,s,p,!0),this._renderTileMasks(v,s,p,!1),this._tileClippingMaskIDs=v}_renderTileMasks(r,s,p,m){const v=this.context,w=v.gl,P=this.style.projection,E=this.transform,z=this.useProgram("clippingMask");for(const B of s){const U=r[B.key],V=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),Z=P.getMeshFromTileID(this.context,B.canonical,m,!0,"stencil"),ie=E.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!p,applyTerrainMatrix:!0});z.draw(v,w.TRIANGLES,vr.disabled,new hr({func:w.ALWAYS,mask:0},U,255,w.KEEP,w.KEEP,w.REPLACE),Mr.disabled,p?fr.disabled:fr.backCCW,null,V,ie,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){const r=this.context,s=r.gl,p=this.style.projection,m=this.transform,v=this.useProgram("depth"),w=this.getDepthModeFor3D(),P=We(m,{tileSize:m.tileSize});for(const E of P){const z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E),B=p.getMeshFromTileID(this.context,E.canonical,!0,!0,"raster"),U=m.getProjectionData({overscaledTileID:E,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(r,s.TRIANGLES,w,hr.disabled,Mr.disabled,fr.backCCW,null,z,U,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,s=this.context.gl;return new hr({func:s.NOTEQUAL,mask:255},r,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(r){const s=this.context.gl;return new hr({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,s.KEEP,s.KEEP,s.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const s=this.context.gl,p=r.sort((w,P)=>P.overscaledZ-w.overscaledZ),m=p[p.length-1].overscaledZ,v=p[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const w={};for(let P=0;P<v;P++)w[P+m]=new hr({func:s.GEQUAL,mask:255},P+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=v,[w,p]}return[{[m]:hr.disabled},p]}stencilConfigForOverlapTwoPass(r){const s=this.context.gl,p=r.sort((w,P)=>P.overscaledZ-w.overscaledZ),m=p[p.length-1].overscaledZ,v=p[0].overscaledZ-m+1;if(this.clearStencil(),v>1){const w={},P={};for(let E=0;E<v;E++)w[E+m]=new hr({func:s.GREATER,mask:255},v+1+E,255,s.KEEP,s.KEEP,s.REPLACE),P[E+m]=new hr({func:s.GREATER,mask:255},1+E,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID=2*v+1,[w,P,p]}return this.nextStencilID=3,[{[m]:new hr({func:s.GREATER,mask:255},2,255,s.KEEP,s.KEEP,s.REPLACE)},{[m]:new hr({func:s.GREATER,mask:255},1,255,s.KEEP,s.KEEP,s.REPLACE)},p]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Mr([r.CONSTANT_COLOR,r.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mr.unblended:Mr.alphaBlended}getDepthModeForSublayer(r,s,p){if(!this.opaquePassEnabledForLayer())return vr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new vr(p||this.context.gl.LEQUAL,s,[m,m])}getDepthModeFor3D(){return new vr(this.context.gl.LEQUAL,vr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,s){var p,m;this.style=r,this.options=s,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();const v=this.style._order,w=this.style.sourceCaches,P={},E={},z={},B={isRenderingToTexture:!1,isRenderingGlobe:((p=r.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const V in w){const Z=w[V];Z.used&&Z.prepare(this.context),P[V]=Z.getVisibleCoordinates(!1),E[V]=P[V].slice().reverse(),z[V]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<v.length;V++)if(this.style._layers[v[V]].is3D()){this.opaquePassCutoff=V;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const V of v){const Z=this.style._layers[V];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const ie=E[Z.source];(Z.type==="custom"||ie.length)&&this.renderLayer(this,w[Z.source],Z,ie,B)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:V=>this.useProgram(V)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(V,Z){const ie=V.context,fe=ie.gl,pe=((Le,Se,Ne)=>{const Qe=Math.cos(Se.rollInRadians),Ke=Math.sin(Se.rollInRadians),Xe=te(Se),et=Se.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Le.properties.get("sky-color"),u_horizon_color:Le.properties.get("horizon-color"),u_horizon:[(Se.width/2-Xe*Ke)*Ne,(Se.height/2+Xe*Qe)*Ne],u_horizon_normal:[-Ke,Qe],u_sky_horizon_blend:Le.properties.get("sky-horizon-blend")*Se.height/2*Ne,u_sky_blend:et}})(Z,V.style.map.transform,V.pixelRatio),me=new vr(fe.LEQUAL,vr.ReadWrite,[0,1]),ve=hr.disabled,Ce=V.colorModeForRenderPass(),be=V.useProgram("sky"),ke=Qa(ie,Z);be.draw(ie,fe.TRIANGLES,me,ve,Ce,fr.disabled,pe,null,void 0,"sky",ke.vertexBuffer,ke.indexBuffer,ke.segments)}(this,this.style.sky),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[v[this.currentLayer]],Z=w[V.source],ie=P[V.source];this._renderTileClippingMasks(V,ie,!1),this.renderLayer(this,Z,V,ie,B)}this.renderPass="translucent";let U=!1;for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const V=this.style._layers[v[this.currentLayer]],Z=w[V.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(V,B))continue;this.opaquePassEnabledForLayer()||U||(U=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ie=(V.type==="symbol"?z:E)[V.source];this._renderTileClippingMasks(V,P[V.source],!!this.renderToTexture),this.renderLayer(this,Z,V,ie,B)}if(B.isRenderingGlobe&&function(V,Z,ie){const fe=V.context,pe=fe.gl,me=V.useProgram("atmosphere"),ve=new vr(pe.LEQUAL,vr.ReadOnly,[0,1]),Ce=V.transform,be=function(et,Rt){const Et=et.properties.get("position"),gt=[-Et.x,-Et.y,-Et.z],Gt=a.af(new Float64Array(16));return et.properties.get("anchor")==="map"&&(a.b5(Gt,Gt,Rt.rollInRadians),a.b6(Gt,Gt,-Rt.pitchInRadians),a.b5(Gt,Gt,Rt.bearingInRadians),a.b6(Gt,Gt,Rt.center.lat*Math.PI/180),a.by(Gt,Gt,-Rt.center.lng*Math.PI/180)),a.c4(gt,gt,Gt),gt}(ie,V.transform),ke=Ce.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Le=Z.properties.get("atmosphere-blend")*ke.projectionTransition;if(Le===0)return;const Se=ul(Ce.worldSize,Ce.center.lat),Ne=Ce.inverseProjectionMatrix,Qe=new Float64Array(4);Qe[3]=1,a.av(Qe,Qe,Ce.modelViewProjectionMatrix),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1,a.av(Qe,Qe,Ne),Qe[0]/=Qe[3],Qe[1]/=Qe[3],Qe[2]/=Qe[3],Qe[3]=1;const Ke=((et,Rt,Et,gt,Gt)=>({u_sun_pos:et,u_atmosphere_blend:Rt,u_globe_position:Et,u_globe_radius:gt,u_inv_proj_matrix:Gt}))(be,Le,[Qe[0],Qe[1],Qe[2]],Se,Ne),Xe=Qa(fe,Z);me.draw(fe,pe.TRIANGLES,ve,hr.disabled,Mr.alphaBlended,fr.disabled,Ke,null,null,"atmosphere",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const V=function(Z,ie){let fe=null;const pe=Object.values(Z._layers).flatMap(be=>be.source&&!be.isHidden(ie)?[Z.sourceCaches[be.source]]:[]),me=pe.filter(be=>be.getSource().type==="vector"),ve=pe.filter(be=>be.getSource().type!=="vector"),Ce=be=>{(!fe||fe.getSource().maxzoom<be.getSource().maxzoom)&&(fe=be)};return me.forEach(be=>Ce(be)),fe||ve.forEach(be=>Ce(be)),fe}(this.style,this.transform.zoom);V&&function(Z,ie,fe){for(let pe=0;pe<fe.length;pe++)Hg(Z,ie,fe[pe])}(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const Z=V.transform.padding;jc(V,V.transform.height-(Z.top||0),3,Ng),jc(V,Z.bottom||0,3,sd),ld(V,Z.left||0,3,Sp),ld(V,V.transform.width-(Z.right||0),3,Vg);const ie=V.transform.centerPoint;(function(fe,pe,me,ve){cd(fe,pe-1,me-10,2,20,ve),cd(fe,pe-10,me-1,20,2,ve)})(V,ie.x,V.transform.height-ie.y,Ug)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const s=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!a.c7(s,p):!a.c8(s,p)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.c9(s,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,w){const P=v.context,E=P.gl,z=v.transform,B=Mr.unblended,U=new vr(E.LEQUAL,vr.ReadWrite,[0,1]),V=w.sourceCache.getRenderableTiles(),Z=v.useProgram("terrainDepth");P.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),P.clear({color:a.be.transparent,depth:1});for(const ie of V){const fe=w.getTerrainMesh(ie.tileID),pe=w.getTerrainData(ie.tileID),me=z.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ve={u_ele_delta:w.getMeshFrameDelta(z.zoom)};Z.draw(P,E.TRIANGLES,U,hr.disabled,B,fr.backCCW,ve,pe,me,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,w){const P=v.context,E=P.gl,z=v.transform,B=Mr.unblended,U=new vr(E.LEQUAL,vr.ReadWrite,[0,1]),V=w.getCoordsTexture(),Z=w.sourceCache.getRenderableTiles(),ie=v.useProgram("terrainCoords");P.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),P.clear({color:a.be.transparent,depth:1}),w.coordsIndex=[];for(const fe of Z){const pe=w.getTerrainMesh(fe.tileID),me=w.getTerrainData(fe.tileID);P.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,V.texture);const ve={u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(z.zoom)},Ce=z.getProjectionData({overscaledTileID:fe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(P,E.TRIANGLES,U,hr.disabled,B,fr.backCCW,ve,me,Ce,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),w.coordsIndex.push(fe.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(r,s,p,m,v){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(m||[]).length)&&(this.id=p.id,a.ca(p)?function(w,P,E,z,B,U){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:V}=U,Z=hr.disabled,ie=w.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(fe,pe,me,ve,Ce,be,ke,Le,Se){const Ne=pe.transform,Qe=pe.style.map.terrain,Ke=Ce==="map",Xe=be==="map";for(const et of fe){const Rt=ve.getTile(et),Et=Rt.getBucket(me);if(!Et||!Et.text||!Et.text.segments.get().length)continue;const gt=a.am(Et.textSizeData,Ne.zoom),Gt=a.aB(Rt,1,pe.transform.zoom),_r=Ve(Ke,pe.transform,Gt),Gr=me.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(gt){const xn=Math.pow(2,Ne.zoom-Rt.tileID.overscaledZ),Yr=Qe?(bn,on)=>Qe.getElevation(et,bn,on):null;sx(Et,Ke,Xe,Se,Ne,_r,xn,gt,Gr,a.aC(Ne,Rt,ke,Le),et.toUnwrapped(),Yr)}}}(z,w,E,P,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),B),E.paint.get("icon-opacity").constantOr(1)!==0&&jg(w,P,E,z,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),Z,ie,V),E.paint.get("text-opacity").constantOr(1)!==0&&jg(w,P,E,z,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),Z,ie,V),P.map.showCollisionBoxes&&(Og(w,P,E,z,!0),Og(w,P,E,z,!1))}(r,s,p,m,this.style.placement.variableOffsets,v):a.cb(p)?function(w,P,E,z,B){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:U}=B,V=E.paint.get("circle-opacity"),Z=E.paint.get("circle-stroke-width"),ie=E.paint.get("circle-stroke-opacity"),fe=!E.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(Z.constantOr(1)===0||ie.constantOr(1)===0))return;const pe=w.context,me=pe.gl,ve=w.transform,Ce=w.getDepthModeForSublayer(0,vr.ReadOnly),be=hr.disabled,ke=w.colorModeForRenderPass(),Le=[],Se=ve.getCircleRadiusCorrection();for(let Ne=0;Ne<z.length;Ne++){const Qe=z[Ne],Ke=P.getTile(Qe),Xe=Ke.getBucket(E);if(!Xe)continue;const et=E.paint.get("circle-translate"),Rt=E.paint.get("circle-translate-anchor"),Et=a.aC(ve,Ke,et,Rt),gt=Xe.programConfigurations.get(E.id),Gt=w.useProgram("circle",gt),_r=Xe.layoutVertexBuffer,Gr=Xe.indexBuffer,xn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Qe),Yr={programConfiguration:gt,program:Gt,layoutVertexBuffer:_r,indexBuffer:Gr,uniformValues:ap(w,Ke,E,Et,Se),terrainData:xn,projectionData:ve.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!U,applyTerrainMatrix:!0})};if(fe){const bn=Xe.segments.get();for(const on of bn)Le.push({segments:new a.aL([on]),sortKey:on.sortKey,state:Yr})}else Le.push({segments:Xe.segments,sortKey:0,state:Yr})}fe&&Le.sort((Ne,Qe)=>Ne.sortKey-Qe.sortKey);for(const Ne of Le){const{programConfiguration:Qe,program:Ke,layoutVertexBuffer:Xe,indexBuffer:et,uniformValues:Rt,terrainData:Et,projectionData:gt}=Ne.state;Ke.draw(pe,me.TRIANGLES,Ce,be,ke,fr.backCCW,Rt,Et,gt,E.id,Xe,et,Ne.segments,E.paint,w.transform.zoom,Qe)}}(r,s,p,m,v):a.cc(p)?function(w,P,E,z,B){if(E.paint.get("heatmap-opacity")===0)return;const U=w.context,{isRenderingToTexture:V,isRenderingGlobe:Z}=B;if(w.style.map.terrain){for(const ie of z){const fe=P.getTile(ie);P.hasRenderableParent(ie)||(w.renderPass==="offscreen"?od(w,fe,E,ie,Z):w.renderPass==="translucent"&&id(w,E,ie,V,Z))}U.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(ie,fe,pe,me){const ve=ie.context,Ce=ve.gl,be=ie.transform,ke=hr.disabled,Le=new Mr([Ce.ONE,Ce.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(Se,Ne,Qe){const Ke=Se.gl;Se.activeTexture.set(Ke.TEXTURE1),Se.viewport.set([0,0,Ne.width/4,Ne.height/4]);let Xe=Qe.heatmapFbos.get(a.c1);Xe?(Ke.bindTexture(Ke.TEXTURE_2D,Xe.colorAttachment.get()),Se.bindFramebuffer.set(Xe.framebuffer)):(Xe=Oc(Se,Ne.width/4,Ne.height/4),Qe.heatmapFbos.set(a.c1,Xe))})(ve,ie,pe),ve.clear({color:a.be.transparent});for(let Se=0;Se<me.length;Se++){const Ne=me[Se];if(fe.hasRenderableParent(Ne))continue;const Qe=fe.getTile(Ne),Ke=Qe.getBucket(pe);if(!Ke)continue;const Xe=Ke.programConfigurations.get(pe.id),et=ie.useProgram("heatmap",Xe),Rt=be.getProjectionData({overscaledTileID:Ne,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Et=be.getCircleRadiusCorrection();et.draw(ve,Ce.TRIANGLES,vr.disabled,ke,Le,fr.backCCW,zc(Qe,be.zoom,pe.paint.get("heatmap-intensity"),Et),null,Rt,pe.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,pe.paint,be.zoom,Xe)}ve.viewport.set([0,0,ie.width,ie.height])}(w,P,E,z):w.renderPass==="translucent"&&function(ie,fe){const pe=ie.context,me=pe.gl;pe.setColorMode(ie.colorModeForRenderPass());const ve=fe.heatmapFbos.get(a.c1);ve&&(pe.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,ve.colorAttachment.get()),pe.activeTexture.set(me.TEXTURE1),ad(pe,fe).bind(me.LINEAR,me.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(pe,me.TRIANGLES,vr.disabled,hr.disabled,ie.colorModeForRenderPass(),fr.disabled,wg(ie,fe,0,1),null,null,fe.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,fe.paint,ie.transform.zoom))}(w,E)}(r,s,p,m,v):a.cd(p)?function(w,P,E,z,B){if(w.renderPass!=="translucent")return;const{isRenderingToTexture:U}=B,V=E.paint.get("line-opacity"),Z=E.paint.get("line-width");if(V.constantOr(1)===0||Z.constantOr(1)===0)return;const ie=w.getDepthModeForSublayer(0,vr.ReadOnly),fe=w.colorModeForRenderPass(),pe=E.paint.get("line-dasharray"),me=E.paint.get("line-pattern"),ve=me.constantOr(1),Ce=E.paint.get("line-gradient"),be=E.getCrossfadeParameters(),ke=ve?"linePattern":pe?"lineSDF":Ce?"lineGradient":"line",Le=w.context,Se=Le.gl,Ne=w.transform;let Qe=!0;for(const Ke of z){const Xe=P.getTile(Ke);if(ve&&!Xe.patternsLoaded())continue;const et=Xe.getBucket(E);if(!et)continue;const Rt=et.programConfigurations.get(E.id),Et=w.context.program.get(),gt=w.useProgram(ke,Rt),Gt=Qe||gt.program!==Et,_r=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ke),Gr=me.constantOr(null);if(Gr&&Xe.imageAtlas){const Jr=Xe.imageAtlas,an=Jr.patternPositions[Gr.to.toString()],fo=Jr.patternPositions[Gr.from.toString()];an&&fo&&Rt.setConstantPatternPositions(an,fo)}const xn=Ne.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Yr=Ne.getPixelScale(),bn=ve?Cg(w,Xe,E,Yr,be):pe?Pg(w,Xe,E,Yr,pe,be):Ce?sp(w,Xe,E,Yr,et.lineClipsArray.length):Ku(w,Xe,E,Yr);if(ve)Le.activeTexture.set(Se.TEXTURE0),Xe.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Rt.updatePaintBuffers(be);else if(pe&&(Gt||w.lineAtlas.dirty))Le.activeTexture.set(Se.TEXTURE0),w.lineAtlas.bind(Le);else if(Ce){const Jr=et.gradients[E.id];let an=Jr.texture;if(E.gradientVersion!==Jr.version){let fo=256;if(E.stepInterpolant){const Dr=P.getSource().maxzoom,oo=Ke.canonical.z===Dr?Math.ceil(1<<w.transform.maxZoom-Ke.canonical.z):1;fo=a.ag(a.c2(et.maxLineLength/a.$*1024*oo),256,Le.maxTextureSize)}Jr.gradient=a.c3({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:fo,image:Jr.gradient||void 0,clips:et.lineClipsArray}),Jr.texture?Jr.texture.update(Jr.gradient):Jr.texture=new a.T(Le,Jr.gradient,Se.RGBA),Jr.version=E.gradientVersion,an=Jr.texture}Le.activeTexture.set(Se.TEXTURE0),an.bind(E.stepInterpolant?Se.NEAREST:Se.LINEAR,Se.CLAMP_TO_EDGE)}const on=w.stencilModeForClipping(Ke);gt.draw(Le,Se.TRIANGLES,ie,on,fe,fr.disabled,bn,_r,xn,E.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,E.paint,w.transform.zoom,Rt,et.layoutVertexBuffer2),Qe=!1}}(r,s,p,m,v):a.ce(p)?function(w,P,E,z,B){const U=E.paint.get("fill-color"),V=E.paint.get("fill-opacity");if(V.constantOr(1)===0)return;const{isRenderingToTexture:Z}=B,ie=w.colorModeForRenderPass(),fe=E.paint.get("fill-pattern"),pe=w.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&U.constantOr(a.be.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===pe){const me=w.getDepthModeForSublayer(1,w.renderPass==="opaque"?vr.ReadWrite:vr.ReadOnly);Bc(w,P,E,z,me,ie,!1,Z)}if(w.renderPass==="translucent"&&E.paint.get("fill-antialias")){const me=w.getDepthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,vr.ReadOnly);Bc(w,P,E,z,me,ie,!0,Z)}}(r,s,p,m,v):a.cf(p)?function(w,P,E,z,B){const U=E.paint.get("fill-extrusion-opacity");if(U===0)return;const{isRenderingToTexture:V}=B;if(w.renderPass==="translucent"){const Z=new vr(w.context.gl.LEQUAL,vr.ReadWrite,w.depthRangeFor3D);if(U!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))wl(w,P,E,z,Z,hr.disabled,Mr.disabled,V),wl(w,P,E,z,Z,w.stencilModeFor3D(),w.colorModeForRenderPass(),V);else{const ie=w.colorModeForRenderPass();wl(w,P,E,z,Z,hr.disabled,ie,V)}}}(r,s,p,m,v):a.cg(p)?function(w,P,E,z,B){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;const{isRenderingToTexture:U}=B,V=w.context,Z=w.style.projection.useSubdivision,ie=w.getDepthModeForSublayer(0,vr.ReadOnly),fe=w.colorModeForRenderPass();if(w.renderPass==="offscreen")(function(pe,me,ve,Ce,be,ke,Le){const Se=pe.context,Ne=Se.gl;for(const Qe of ve){const Ke=me.getTile(Qe),Xe=Ke.dem;if(!Xe||!Xe.data||!Ke.needsHillshadePrepare)continue;const et=Xe.dim,Rt=Xe.stride,Et=Xe.getPixels();if(Se.activeTexture.set(Ne.TEXTURE1),Se.pixelStoreUnpackPremultiplyAlpha.set(!1),Ke.demTexture=Ke.demTexture||pe.getTileTexture(Rt),Ke.demTexture){const Gt=Ke.demTexture;Gt.update(Et,{premultiply:!1}),Gt.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE)}else Ke.demTexture=new a.T(Se,Et,Ne.RGBA,{premultiply:!1}),Ke.demTexture.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);Se.activeTexture.set(Ne.TEXTURE0);let gt=Ke.fbo;if(!gt){const Gt=new a.T(Se,{width:et,height:et,data:null},Ne.RGBA);Gt.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),gt=Ke.fbo=Se.createFramebuffer(et,et,!0,!1),gt.colorAttachment.set(Gt.texture)}Se.bindFramebuffer.set(gt.framebuffer),Se.viewport.set([0,0,et,et]),pe.useProgram("hillshadePrepare").draw(Se,Ne.TRIANGLES,be,ke,Le,fr.disabled,Y_(Ke.tileID,Xe),null,null,Ce.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),Ke.needsHillshadePrepare=!1}})(w,P,z,E,ie,hr.disabled,fe),V.viewport.set([0,0,w.width,w.height]);else if(w.renderPass==="translucent")if(Z){const[pe,me,ve]=w.stencilConfigForOverlapTwoPass(z);Sl(w,P,E,ve,pe,ie,fe,!1,U),Sl(w,P,E,ve,me,ie,fe,!0,U)}else{const[pe,me]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Sl(w,P,E,me,pe,ie,fe,!1,U)}}(r,s,p,m,v):a.ch(p)?function(w,P,E,z,B){if(w.renderPass!=="translucent"||!z.length)return;const{isRenderingToTexture:U}=B,V=w.style.projection.useSubdivision,Z=w.getDepthModeForSublayer(0,vr.ReadOnly),ie=w.colorModeForRenderPass();if(V){const[fe,pe,me]=w.stencilConfigForOverlapTwoPass(z);Fc(w,P,E,me,fe,Z,ie,!1,U),Fc(w,P,E,me,pe,Z,ie,!0,U)}else{const[fe,pe]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Fc(w,P,E,pe,fe,Z,ie,!1,U)}}(r,s,p,m,v):a.ci(p)?function(w,P,E,z,B){if(w.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!z.length)return;const{isRenderingToTexture:U}=B,V=P.getSource(),Z=w.style.projection.useSubdivision;if(V instanceof mr)Ja(w,P,E,z,null,!1,!1,V.tileCoords,V.flippedWindingOrder,U);else if(Z){const[ie,fe,pe]=w.stencilConfigForOverlapTwoPass(z);Ja(w,P,E,pe,ie,!1,!0,wp,!1,U),Ja(w,P,E,pe,fe,!0,!0,wp,!1,U)}else{const[ie,fe]=w.getStencilConfigForOverlapAndUpdateStencilID(z);Ja(w,P,E,fe,ie,!1,!0,wp,!1,U)}}(r,s,p,m,v):a.cj(p)?function(w,P,E,z,B){const U=E.paint.get("background-color"),V=E.paint.get("background-opacity");if(V===0)return;const{isRenderingToTexture:Z}=B,ie=w.context,fe=ie.gl,pe=w.style.projection,me=w.transform,ve=me.tileSize,Ce=E.paint.get("background-pattern");if(w.isPatternMissing(Ce))return;const be=!Ce&&U.a===1&&V===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==be)return;const ke=hr.disabled,Le=w.getDepthModeForSublayer(0,be==="opaque"?vr.ReadWrite:vr.ReadOnly),Se=w.colorModeForRenderPass(),Ne=w.useProgram(Ce?"backgroundPattern":"background"),Qe=z||We(me,{tileSize:ve,terrain:w.style.map.terrain});Ce&&(ie.activeTexture.set(fe.TEXTURE0),w.imageManager.bind(w.context));const Ke=E.getCrossfadeParameters();for(const Xe of Qe){const et=me.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Rt=Ce?ex(V,w,Ce,{tileID:Xe,tileSize:ve},Ke):Xu(V,U),Et=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Xe),gt=pe.getMeshFromTileID(ie,Xe.canonical,!1,!0,"raster");Ne.draw(ie,fe.TRIANGLES,Le,ke,Se,fr.backCCW,Rt,Et,et,E.id,gt.vertexBuffer,gt.indexBuffer,gt.segments)}}(r,0,p,m,v):a.ck(p)&&function(w,P,E,z){const{isRenderingGlobe:B}=z,U=w.context,V=E.implementation,Z=w.style.projection,ie=w.transform,fe=ie.getProjectionDataForCustomLayer(B),pe={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:fe},me=V.renderingMode?V.renderingMode:"2d";if(w.renderPass==="offscreen"){const ve=V.prerender;ve&&(w.setCustomLayerDefaults(),U.setColorMode(w.colorModeForRenderPass()),ve.call(V,U.gl,pe),U.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),U.setColorMode(w.colorModeForRenderPass()),U.setStencilMode(hr.disabled);const ve=me==="3d"?w.getDepthModeFor3D():w.getDepthModeForSublayer(0,vr.ReadOnly);U.setDepthMode(ve),V.render(U.gl,pe),U.setDirty(),w.setBaseState(),U.bindFramebuffer.set(null)}}(r,0,p,v))}saveTileTexture(r){const s=this._tileTextures[r.size[0]];s?s.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const s=this._tileTextures[r];return s&&s.length>0?s.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const s=this.imageManager.getPattern(r.from.toString()),p=this.imageManager.getPattern(r.to.toString());return!s||!p}useProgram(r,s,p=!1,m=[]){this.cache=this.cache||{};const v=!!this.style.map.terrain,w=this.style.projection,P=p?aa.projectionMercator:w.shaderPreludeCode,E=p?Ts:w.shaderDefine,z=r+(s?s.cacheKey:"")+`/${p?Jh:w.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[z]||(this.cache[z]=new Wu(this.context,aa[r],s,Eg[r],this._showOverdrawInspector,v,P,E,m)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:s}=this.context.gl;return this.width!==r||this.height!==s}}function ud(y,r){let s,p=!1,m=null,v=null;const w=()=>{m=null,p&&(y.apply(v,s),m=setTimeout(w,r),p=!1)};return(...P)=>(p=!0,v=this,s=P,m||w(),m)}class Nc{constructor(r){this._getCurrentHash=()=>{const s=window.location.hash.replace("#","");if(this._hashName){let p;return s.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{const s=this._getCurrentHash();if(!this._isValidHash(s))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:p,pitch:+(s[4]||0)}),!0},this._updateHashUnthrottled=()=>{const s=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,s)},this._removeHash=()=>{const s=this._getCurrentHash();if(s.length===0)return;const p=s.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let v=window.location.hash.replace(m,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let w=window.location.href.replace(/(#.+)?$/,v);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=ud(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const s=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),w=Math.round(s.lng*v)/v,P=Math.round(s.lat*v)/v,E=this._map.getBearing(),z=this._map.getPitch();let B="";if(B+=r?`/${w}/${P}/${p}`:`${p}/${P}/${w}`,(E||z)&&(B+="/"+Math.round(10*E)/10),z&&(B+=`/${Math.round(z)}`),this._hashName){const U=this._hashName;let V=!1;const Z=window.location.hash.slice(1).split("&").map(ie=>{const fe=ie.split("=")[0];return fe===U?(V=!0,`${fe}=${B}`):ie}).filter(ie=>ie);return V||Z.push(`${U}=${B}`),`#${Z.join("&")}`}return`#${B}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.S(+r[2],+r[1])}catch{return!1}const s=+r[0],p=+(r[3]||0),m=+(r[4]||0);return s>=this._map.getMinZoom()&&s<=this._map.getMaxZoom()&&p>=-180&&p<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}const Cl={linearity:.3,easing:a.cl(0,0,.3,1)},Pl=a.e({deceleration:2500,maxSpeed:1400},Cl),Cp=a.e({deceleration:20,maxSpeed:1400},Cl),Vc=a.e({deceleration:1e3,maxSpeed:360},Cl),Pp=a.e({deceleration:1e3,maxSpeed:90},Cl),Gg=a.e({deceleration:1e3,maxSpeed:360},Cl);class Wg{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,s=M.now();for(;r.length>0&&s-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)s.zoom+=v.zoomDelta||0,s.bearing+=v.bearingDelta||0,s.pitch+=v.pitchDelta||0,s.roll+=v.rollDelta||0,v.panDelta&&s.pan._add(v.panDelta),v.around&&(s.around=v.around),v.pinchAround&&(s.pinchAround=v.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(s.pan.mag()){const v=Il(s.pan.mag(),p,a.e({},Pl,r||{})),w=s.pan.mult(v.amount/s.pan.mag()),P=this._map.cameraHelper.handlePanInertia(w,this._map.transform);m.center=P.easingCenter,m.offset=P.easingOffset,Tl(m,v)}if(s.zoom){const v=Il(s.zoom,p,Cp);m.zoom=this._map.transform.zoom+v.amount,Tl(m,v)}if(s.bearing){const v=Il(s.bearing,p,Vc);m.bearing=this._map.transform.bearing+a.ag(v.amount,-179,179),Tl(m,v)}if(s.pitch){const v=Il(s.pitch,p,Pp);m.pitch=this._map.transform.pitch+v.amount,Tl(m,v)}if(s.roll){const v=Il(s.roll,p,Gg);m.roll=this._map.transform.roll+a.ag(v.amount,-179,179),Tl(m,v)}if(m.zoom||m.bearing){const v=s.pinchAround===void 0?s.around:s.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function Tl(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Il(y,r,s){const{maxSpeed:p,linearity:m,deceleration:v}=s,w=a.ag(y*m/(r/1e3),-p,p),P=Math.abs(w)/(v*m);return{easing:s.easing,duration:1e3*P,amount:w*(P/2)}}class Jo extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,p,m={}){p=p instanceof MouseEvent?p:new MouseEvent(r,p);const v=R.mousePos(s.getCanvas(),p),w=s.unproject(v);super(r,a.e({point:v,lngLat:w,originalEvent:p},m)),this._defaultPrevented=!1,this.target=s}}class $i extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,p){const m=r==="touchend"?p.changedTouches:p.touches,v=R.touchPos(s.getCanvasContainer(),m),w=v.map(E=>s.unproject(E)),P=v.reduce((E,z,B,U)=>E.add(z.div(U.length)),new a.P(0,0));super(r,{points:v,point:P,lngLats:w,lngLat:s.unproject(P),originalEvent:p}),this._defaultPrevented=!1}}class Tp extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,s,p){super(r,{originalEvent:p}),this._defaultPrevented=!1}}class Zg{constructor(r,s){this._map=r,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Tp(r.type,this._map,r))}mousedown(r,s){return this._mousedownPos=s,this._firePreventable(new Jo(r.type,this._map,r))}mouseup(r){this._map.fire(new Jo(r.type,this._map,r))}click(r,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Jo(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Jo(r.type,this._map,r))}mouseover(r){this._map.fire(new Jo(r.type,this._map,r))}mouseout(r){this._map.fire(new Jo(r.type,this._map,r))}touchstart(r){return this._firePreventable(new $i(r.type,this._map,r))}touchmove(r){this._map.fire(new $i(r.type,this._map,r))}touchend(r){this._map.fire(new $i(r.type,this._map,r))}touchcancel(r){this._map.fire(new $i(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qg{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Jo(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Jo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Jo(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class El{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class Ip{constructor(r,s){this._map=r,this._tr=new El(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,s){this.isEnabled()&&r.shiftKey&&r.button===0&&(R.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(r,s){if(!this._active)return;const p=s;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=R.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(m.x,p.x),w=Math.max(m.x,p.x),P=Math.min(m.y,p.y),E=Math.max(m.y,p.y);R.setTransform(this._box,`translate(${v}px,${P}px)`),this._box.style.width=w-v+"px",this._box.style.height=E-P+"px"}mouseupWindow(r,s){if(!this._active||r.button!==0)return;const p=this._startPos,m=s;if(this.reset(),R.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,s){return this._map.fire(new a.l(r,{originalEvent:s}))}}function dd(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const s={};for(let p=0;p<y.length;p++)s[y[p].identifier]=r[p];return s}class Kg{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,s,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const v=new a.P(0,0);for(const w of m)v._add(w);return v.div(m.length)}(s),this.touches=dd(p,s)))}touchmove(r,s,p){if(this.aborted||!this.centroid)return;const m=dd(p,s);for(const v in this.touches){const w=m[v];(!w||w.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,s,p){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class hd{constructor(r){this.singleTap=new Kg(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,s,p){this.singleTap.touchstart(r,s,p)}touchmove(r,s,p){this.singleTap.touchmove(r,s,p)}touchend(r,s,p){const m=this.singleTap.touchend(r,s,p);if(m){const v=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(m)<30;if(v&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class pd{constructor(r){this._tr=new El(r),this._zoomIn=new hd({numTouches:1,numTaps:2}),this._zoomOut=new hd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,s,p){this._zoomIn.touchstart(r,s,p),this._zoomOut.touchstart(r,s,p)}touchmove(r,s,p){this._zoomIn.touchmove(r,s,p),this._zoomOut.touchmove(r,s,p)}touchend(r,s,p){const m=this._zoomIn.touchend(r,s,p),v=this._zoomOut.touchend(r,s,p),w=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(m)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const s=this._moveFunction(...r);if(s.bearingDelta||s.pitchDelta||s.rollDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(r,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(s)?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,s){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=Array.isArray(s)?s[0]:s;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&R.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const bi=0,Oi=2,Xg={[bi]:1,[Oi]:2};class Fo{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const s=R.mouseButton(r);this._eventButton=s}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(s,p){const m=Xg[p];return s.buttons===void 0||(s.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return R.mouseButton(r)===this._eventButton}}class Ml{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class cx{constructor(r=new Fo({checkCorrectEvent:()=>!0}),s=new Ml){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=s}_executeRelevantHandler(r,s,p){return r instanceof MouseEvent?s(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?p(r):void 0}startMove(r){this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.startMove(s),s=>this.oneFingerTouchMoveStateManager.startMove(s))}endMove(r){this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.endMove(s),s=>this.oneFingerTouchMoveStateManager.endMove(s))}isValidStartEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidStartEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidStartEvent(s))}isValidMoveEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidMoveEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(s))}isValidEndEvent(r){return this._executeRelevantHandler(r,s=>this.mouseMoveStateManager.isValidEndEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidEndEvent(s))}}const fd=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=r=>{r.preventDefault()}};class ux{constructor(r,s){this._clickTolerance=r.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,s,p){return this._calculateTransform(r,s,p)}touchmove(r,s,p){if(this._active){if(!this._shouldBePrevented(p.length))return r.preventDefault(),this._calculateTransform(r,s,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,s,p){this._calculateTransform(r,s,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,s,p){p.length>0&&(this._active=!0);const m=dd(p,s),v=new a.P(0,0),w=new a.P(0,0);let P=0;for(const z in m){const B=m[z],U=this._touches[z];U&&(v._add(B),w._add(B.sub(U)),P++,m[z]=B)}if(this._touches=m,this._shouldBePrevented(P)||!w.mag())return;const E=w.div(P);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(P),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ep{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,s,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([s[0],s[1]]))}touchmove(r,s,p){if(!this._firstTwoTouches)return;r.preventDefault();const[m,v]=this._firstTwoTouches,w=Uc(p,s,m),P=Uc(p,s,v);if(!w||!P)return;const E=this._aroundCenter?null:w.add(P).div(2);return this._move([w,P],E,r)}touchend(r,s,p){if(!this._firstTwoTouches)return;const[m,v]=this._firstTwoTouches,w=Uc(p,s,m),P=Uc(p,s,v);w&&P||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Uc(y,r,s){for(let p=0;p<y.length;p++)if(y[p].identifier===s)return r[p]}function Rl(y,r){return Math.log(y/r)/Math.LN2}class ca extends Ep{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,s){const p=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Rl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Rl(this._distance,p),pinchAround:s}}}function Ft(y,r){return 180*y.angleWith(r)/Math.PI}class kp extends Ep{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,s,p){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ft(this._vector,m),pinchAround:s}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const s=25/(Math.PI*this._minDiameter)*360,p=Ft(r,this._startVector);return Math.abs(p)<s}}function Hc(y){return Math.abs(y.y)>Math.abs(y.x)}class Mp extends Ep{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,s,p){super.touchstart(r,s,p),this._currentTouchCount=p.length}_start(r){this._lastPoints=r,Hc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,s,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,p.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,s,p){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,v=s.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const w=r.y>0==s.y>0;return Hc(r)&&Hc(s)&&w}}const Gc={panStep:100,bearingStep:15,pitchStep:10};class Al{constructor(r){this._tr=new El(r);const s=Gc;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let s=0,p=0,m=0,v=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:r.shiftKey?p=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?p=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:P=>{const E=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Rp,zoom:s?Math.round(E.zoom)+s*(r.shiftKey?2:1):E.zoom,bearing:E.bearing+p*this._bearingStep,pitch:E.pitch+m*this._pitchStep,offset:[-v*this._panStep,-w*this._panStep],center:E.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Rp(y){return y*(2-y)}const Tr=4.000244140625,Ap=1/450;class Yg{constructor(r,s){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=r,this._tr=new El(r),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ap}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let s=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const p=M.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,s!==0&&s%Tr==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),r.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=r,this._delta-=s,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=R.mousePos(this._map.getCanvas(),r),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(a.S.convert(p.center)):s,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const P=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Tr?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&E!==0&&(E=1/E);const z=typeof this._targetZoom!="number"?r.scale:a.ae(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),a.aj(z*E)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,p=this._startZoom,m=this._easing;let v,w=!1;if(this._type==="wheel"&&p&&m){const P=M.now()-this._lastWheelEventTime,E=Math.min((P+5)/200,1),z=m(E);v=a.C.number(p,s,z),E<1?this._frameId||(this._frameId=!0):w=!0}else v=s,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=v,{noInertia:!0,needsRenderFrame:!w,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let s=a.cn;if(this._prevEase){const p=this._prevEase,m=(M.now()-p.start)/p.duration,v=p.easing(m+.01)-p.easing(m),w=.27/Math.sqrt(v*v+1e-4)*.01,P=Math.sqrt(.0729-w*w);s=a.cl(w,P,.25,1)}return this._prevEase={start:M.now(),duration:r,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class md{constructor(r,s){this._clickZoom=r,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class dx{constructor(r){this._tr=new El(r),this.reset()}reset(){this._active=!1}dblclick(r,s){return r.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hx{constructor(){this._tap=new hd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,s,p){if(!this._swipePoint)if(this._tapTime){const m=s[0],v=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(m)<30;v&&w?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(r,s,p)}touchmove(r,s,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=s[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,s,p)}touchend(r,s,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(r,s,p);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zp{constructor(r,s,p){this._el=r,this._mousePan=s,this._touchPan=p}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class gd{constructor(r,s,p,m){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=s,this._mousePitch=p,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Dp{constructor(r,s,p,m){this._el=r,this._touchZoom=s,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Jg{constructor(r,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=R.create("div","maplibregl-cooperative-gesture-screen",r);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=s,this._container.appendChild(m);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=p,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(R.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,s){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:s})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Wc=y=>y.zoom||y.drag||y.roll||y.pitch||y.rotate;class px extends a.l{}function Lp(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta||y.rollDelta}class es{constructor(r,s){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=m.type==="renderFrame"?void 0:m,P={needsRenderFrame:!1},E={},z={};for(const{handlerName:V,handler:Z,allowed:ie}of this._handlers){if(!Z.isEnabled())continue;let fe;if(this._blockedByActive(z,ie,V))Z.reset();else if(Z[v||m.type]){if(a.co(m,v||m.type)){const pe=R.mousePos(this._map.getCanvas(),m);fe=Z[v||m.type](m,pe)}else if(a.cp(m,v||m.type)){const pe=this._getMapTouches(m.touches),me=R.touchPos(this._map.getCanvas(),pe);fe=Z[v||m.type](m,me,pe)}else a.cq(v||m.type)||(fe=Z[v||m.type](m));this.mergeHandlerResult(P,E,fe,V,w),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()}(fe||Z.isActive())&&(z[V]=Z)}const B={};for(const V in this._previousActiveHandlers)z[V]||(B[V]=w);this._previousActiveHandlers=z,(Object.keys(B).length||Lp(P))&&(this._changes.push([P,E,B]),this._triggerRenderFrame()),(Object.keys(z).length||Lp(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:U}=P;U&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],U(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Wg(r),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,v,w]of this._listeners)R.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,s,p]of this._listeners)R.removeEventListener(r,s,r===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(r){const s=this._map,p=s.getCanvasContainer();this._add("mapEvent",new Zg(s,r));const m=s.boxZoom=new Ip(s,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const v=s.cooperativeGestures=new Jg(s,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();const w=new pd(s),P=new dx(s);s.doubleClickZoom=new md(P,w),this._add("tapZoom",w),this._add("clickZoom",P),r.interactive&&r.doubleClickZoom&&s.doubleClickZoom.enable();const E=new hx;this._add("tapDragZoom",E);const z=s.touchPitch=new Mp(s);this._add("touchPitch",z),r.interactive&&r.touchPitch&&s.touchPitch.enable(r.touchPitch);const B=()=>s.project(s.getCenter()),U=function({enable:be,clickTolerance:ke,aroundCenter:Le=!0,minPixelCenterThreshold:Se=100,rotateDegreesPerPixelMoved:Ne=.8},Qe){const Ke=new Fo({checkCorrectEvent:Xe=>R.mouseButton(Xe)===0&&Xe.ctrlKey||R.mouseButton(Xe)===2&&!Xe.ctrlKey});return new kl({clickTolerance:ke,move:(Xe,et)=>{const Rt=Qe();if(Le&&Math.abs(Rt.y-Xe.y)>Se)return{bearingDelta:a.cm(new a.P(Xe.x,et.y),et,Rt)};let Et=(et.x-Xe.x)*Ne;return Le&&et.y<Rt.y&&(Et=-Et),{bearingDelta:Et}},moveStateManager:Ke,enable:be,assignEvents:fd})}(r,B),V=function({enable:be,clickTolerance:ke,pitchDegreesPerPixelMoved:Le=-.5}){const Se=new Fo({checkCorrectEvent:Ne=>R.mouseButton(Ne)===0&&Ne.ctrlKey||R.mouseButton(Ne)===2});return new kl({clickTolerance:ke,move:(Ne,Qe)=>({pitchDelta:(Qe.y-Ne.y)*Le}),moveStateManager:Se,enable:be,assignEvents:fd})}(r),Z=function({enable:be,clickTolerance:ke,rollDegreesPerPixelMoved:Le=.3},Se){const Ne=new Fo({checkCorrectEvent:Qe=>R.mouseButton(Qe)===2&&Qe.ctrlKey});return new kl({clickTolerance:ke,move:(Qe,Ke)=>{const Xe=Se();let et=(Ke.x-Qe.x)*Le;return Ke.y<Xe.y&&(et=-et),{rollDelta:et}},moveStateManager:Ne,enable:be,assignEvents:fd})}(r,B);s.dragRotate=new gd(r,U,V,Z),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",V,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),r.interactive&&r.dragRotate&&s.dragRotate.enable();const ie=function({enable:be,clickTolerance:ke}){const Le=new Fo({checkCorrectEvent:Se=>R.mouseButton(Se)===0&&!Se.ctrlKey});return new kl({clickTolerance:ke,move:(Se,Ne)=>({around:Ne,panDelta:Ne.sub(Se)}),activateOnStart:!0,moveStateManager:Le,enable:be,assignEvents:fd})}(r),fe=new ux(r,s);s.dragPan=new zp(p,ie,fe),this._add("mousePan",ie),this._add("touchPan",fe,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&s.dragPan.enable(r.dragPan);const pe=new kp,me=new ca;s.touchZoomRotate=new Dp(p,me,pe,E),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&s.touchZoomRotate.enable(r.touchZoomRotate);const ve=s.scrollZoom=new Yg(s,()=>this._triggerRenderFrame());this._add("scrollZoom",ve,["mousePan"]),r.interactive&&r.scrollZoom&&s.scrollZoom.enable(r.scrollZoom);const Ce=s.keyboard=new Al(s);this._add("keyboard",Ce),r.interactive&&r.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new qg(s))}_add(r,s,p){this._handlers.push({handlerName:r,handler:s,allowed:p}),this._handlersById[r]=s}stop(r){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Wc(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,s,p){for(const m in r)if(m!==p&&(!s||s.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const s=[];for(const p of r)this._el.contains(p.target)&&s.push(p);return s}mergeHandlerResult(r,s,p,m,v){if(!p)return;a.e(r,p);const w={handlerName:m,originalEvent:p.originalEvent||v};p.zoomDelta!==void 0&&(s.zoom=w),p.panDelta!==void 0&&(s.drag=w),p.rollDelta!==void 0&&(s.roll=w),p.pitchDelta!==void 0&&(s.pitch=w),p.bearingDelta!==void 0&&(s.rotate=w)}_applyChanges(){const r={},s={},p={};for(const[m,v,w]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(r.rollDelta=(r.rollDelta||0)+m.rollDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),a.e(s,v),a.e(p,w);this._updateMapTransform(r,s,p),this._changes=[]}_updateMapTransform(r,s,p){const m=this._map,v=m._getTransformForUpdate(),w=m.terrain;if(!(Lp(r)||w&&this._terrainMovement))return this._fireEvents(s,p,!0);m._stop(!0);let{panDelta:P,zoomDelta:E,bearingDelta:z,pitchDelta:B,rollDelta:U,around:V,pinchAround:Z}=r;Z!==void 0&&(V=Z),V=V||m.transform.centerPoint,w&&!v.isPointOnMapSurface(V)&&(V=v.centerPoint);const ie={panDelta:P,zoomDelta:E,rollDelta:U,pitchDelta:B,bearingDelta:z,around:V};this._map.cameraHelper.useGlobeControls&&!v.isPointOnMapSurface(V)&&(V=v.centerPoint);const fe=V.distSqr(v.centerPoint)<.01?v.center:v.screenPointToLocation(P?V.sub(P):V);w?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,v),this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?v.setCenter(v.screenPointToLocation(v.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(ie,v,fe):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ie,v,fe))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,v),this._map.cameraHelper.handleMapControlsPan(ie,v,fe)),m._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(s,p,!0)}_fireEvents(r,s,p){const m=Wc(this._eventsInProgress),v=Wc(r),w={};for(const U in r){const{originalEvent:V}=r[U];this._eventsInProgress[U]||(w[`${U}start`]=V),this._eventsInProgress[U]=r[U]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(const U in w)this._fireEvent(U,w[U]);v&&this._fireEvent("move",v.originalEvent);for(const U in r){const{originalEvent:V}=r[U];this._fireEvent(U,V)}const P={};let E;for(const U in this._eventsInProgress){const{handlerName:V,originalEvent:Z}=this._eventsInProgress[U];this._handlersById[V].isActive()||(delete this._eventsInProgress[U],E=s[V]||Z,P[`${U}end`]=E)}for(const U in P)this._fireEvent(U,P[U]);const z=Wc(this._eventsInProgress),B=(m||v)&&!z;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const U=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&U.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(U)}if(p&&B){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!U||!U.essential&&M.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:E})),V(this._map.getBearing())&&this._map.resetNorth()):(V(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(r,s){this._map.fire(new a.l(r,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new px("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class fn extends a.E{constructor(r,s,p){super(),this._renderFrameCallback=()=>{const m=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=p.bearingSnap,this.cameraHelper=s,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,s){r.apply(this.transform),this.transform=r,this.cameraHelper=s}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,s){return this.jumpTo({center:r},s)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,s){return this.jumpTo({elevation:r},s),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,s,p){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},s),p)}panTo(r,s,p){return this.easeTo(a.e({center:r},s),p)}getZoom(){return this.transform.zoom}setZoom(r,s){return this.jumpTo({zoom:r},s),this}zoomTo(r,s,p){return this.easeTo(a.e({zoom:r},s),p)}zoomIn(r,s){return this.zoomTo(this.getZoom()+1,r,s),this}zoomOut(r,s){return this.zoomTo(this.getZoom()-1,r,s),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,s){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",s)).fire(new a.l("move",s)).fire(new a.l("moveend",s))),this}getBearing(){return this.transform.bearing}setBearing(r,s){return this.jumpTo({bearing:r},s),this}getPadding(){return this.transform.padding}setPadding(r,s){return this.jumpTo({padding:r},s),this}rotateTo(r,s,p){return this.easeTo(a.e({bearing:r},s),p)}resetNorth(r,s){return this.rotateTo(0,a.e({duration:1e3},r),s),this}resetNorthPitch(r,s){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),s),this}snapToNorth(r,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,s):this}getPitch(){return this.transform.pitch}setPitch(r,s){return this.jumpTo({pitch:r},s),this}getRoll(){return this.transform.roll}setRoll(r,s){return this.jumpTo({roll:r},s),this}cameraForBounds(r,s){r=ur.convert(r).adjustAntiMeridian();const p=s&&s.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),p,s)}_cameraForBoxAndBearing(r,s,p,m){const v={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const z=m.padding;m.padding={top:z,bottom:z,right:z,left:z}}const w=a.e(v,m.padding);m.padding=w;const P=this.transform,E=new ur(r,s);return this.cameraHelper.cameraForBoxAndBearing(m,w,E,p,P)}fitBounds(r,s,p){return this._fitInternal(this.cameraForBounds(r,s),s,p)}fitScreenCoordinates(r,s,p,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(s)),p,m),m,v)}_fitInternal(r,s,p){return r?(delete(s=a.e(r,s)).padding,s.linear?this.easeTo(s,p):this.flyTo(s,p)):this}jumpTo(r,s){this.stop();const p=this._getTransformForUpdate();let m=!1,v=!1,w=!1;const P=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,r);const E=p.zoom!==P;return"elevation"in r&&p.elevation!==+r.elevation&&p.setElevation(+r.elevation),"bearing"in r&&p.bearing!==+r.bearing&&(m=!0,p.setBearing(+r.bearing)),"pitch"in r&&p.pitch!==+r.pitch&&(v=!0,p.setPitch(+r.pitch)),"roll"in r&&p.roll!==+r.roll&&(w=!0,p.setRoll(+r.roll)),r.padding==null||p.isPaddingEqual(r.padding)||p.setPadding(r.padding),this._applyUpdatedTransform(p),this.fire(new a.l("movestart",s)).fire(new a.l("move",s)),E&&this.fire(new a.l("zoomstart",s)).fire(new a.l("zoom",s)).fire(new a.l("zoomend",s)),m&&this.fire(new a.l("rotatestart",s)).fire(new a.l("rotate",s)).fire(new a.l("rotateend",s)),v&&this.fire(new a.l("pitchstart",s)).fire(new a.l("pitch",s)).fire(new a.l("pitchend",s)),w&&this.fire(new a.l("rollstart",s)).fire(new a.l("roll",s)).fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}calculateCameraOptionsFromTo(r,s,p,m=0){const v=a.a0.fromLngLat(r,s),w=a.a0.fromLngLat(p,m),P=w.x-v.x,E=w.y-v.y,z=w.z-v.z,B=Math.hypot(P,E,z);if(B===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(P,E),V=a.aj(this.transform.cameraToCenterDistance/B/this.transform.tileSize),Z=180*Math.atan2(P,-E)/Math.PI;let ie=180*Math.acos(U/B)/Math.PI;return ie=z<0?90-ie:90+ie,{center:w.toLngLat(),elevation:m,zoom:V,pitch:ie,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(r,s,p,m,v){const w=this.transform.calculateCenterFromCameraLngLatAlt(r,s,p,m);return{center:w.center,elevation:w.elevation,zoom:w.zoom,bearing:p,pitch:m,roll:v}}easeTo(r,s){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.cn},r)).animate===!1||!r.essential&&M.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),m=this.getBearing(),v=p.pitch,w=p.roll,P="bearing"in r?this._normalizeBearing(r.bearing,m):m,E="pitch"in r?+r.pitch:v,z="roll"in r?this._normalizeBearing(r.roll,w):w,B="padding"in r?r.padding:p.padding,U=a.P.convert(r.offset);let V,Z;r.around&&(V=a.S.convert(r.around),Z=p.locationToScreenPoint(V));const ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},fe=this.cameraHelper.handleEaseTo(p,{bearing:P,pitch:E,roll:z,padding:B,around:V,aroundPoint:Z,offsetAsPoint:U,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||m!==P,this._pitching=this._pitching||E!==v,this._rolling=this._rolling||z!==w,this._padding=!p.isPaddingEqual(B),this._zooming=this._zooming||fe.isZooming,this._easeId=r.easeId,this._prepareEase(s,r.noMoveStart,ie),this.terrain&&this._prepareElevation(fe.elevationCenter),this._ease(pe=>{fe.easeFunc(pe),this.terrain&&!r.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(p),this._fireMoveEvents(s)},pe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(s,pe)},r),this}_prepareEase(r,s,p={}){this._moving=!0,s||p.moving||this.fire(new a.l("movestart",r)),this._zooming&&!p.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!p.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!p.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!p.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&s!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(p-(s-(p*r+this._elevationStart))/(1-r)),this._elevationTarget=s}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const s=r.getCameraLngLat(),p=r.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(s,r.zoom):0;if(p<m){const v=this.calculateCameraOptionsFromTo(s,m,r.center,r.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(r){const s=[];if(s.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&s.push(m=>this.transformCameraUpdate(m)),!s.length)return;const p=r.clone();for(const m of s){const v=p.clone(),{center:w,zoom:P,roll:E,pitch:z,bearing:B,elevation:U}=m(v);w&&v.setCenter(w),U!==void 0&&v.setElevation(U),P!==void 0&&v.setZoom(P),E!==void 0&&v.setRoll(E),z!==void 0&&v.setPitch(z),B!==void 0&&v.setBearing(B),p.apply(v)}this.transform.apply(p)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const p=this._zooming,m=this._rotating,v=this._pitching,w=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new a.l("zoomend",r)),m&&this.fire(new a.l("rotateend",r)),v&&this.fire(new a.l("pitchend",r)),w&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,s){if(!r.essential&&M.prefersReducedMotion){const et=a.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(et,s)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},r);const p=this._getTransformForUpdate(),m=p.bearing,v=p.pitch,w=p.roll,P=p.padding,E="bearing"in r?this._normalizeBearing(r.bearing,m):m,z="pitch"in r?+r.pitch:v,B="roll"in r?this._normalizeBearing(r.roll,w):w,U="padding"in r?r.padding:p.padding,V=a.P.convert(r.offset);let Z=p.centerPoint.add(V);const ie=p.screenPointToLocation(Z),fe=this.cameraHelper.handleFlyTo(p,{bearing:E,pitch:z,roll:B,padding:U,locationAtOffset:ie,offsetAsPoint:V,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let pe=r.curve;const me=Math.max(p.width,p.height),ve=me/fe.scaleOfZoom,Ce=fe.pixelPathLength;typeof fe.scaleOfMinZoom=="number"&&(pe=Math.sqrt(me/fe.scaleOfMinZoom/Ce*2));const be=pe*pe;function ke(et){const Rt=(ve*ve-me*me+(et?-1:1)*be*be*Ce*Ce)/(2*(et?ve:me)*be*Ce);return Math.log(Math.sqrt(Rt*Rt+1)-Rt)}function Le(et){return(Math.exp(et)-Math.exp(-et))/2}function Se(et){return(Math.exp(et)+Math.exp(-et))/2}const Ne=ke(!1);let Qe=function(et){return Se(Ne)/Se(Ne+pe*et)},Ke=function(et){return me*((Se(Ne)*(Le(Rt=Ne+pe*et)/Se(Rt))-Le(Ne))/be)/Ce;var Rt},Xe=(ke(!0)-Ne)/pe;if(Math.abs(Ce)<2e-6||!isFinite(Xe)){if(Math.abs(me-ve)<1e-6)return this.easeTo(r,s);const et=ve<me?-1:1;Xe=Math.abs(Math.log(ve/me))/pe,Ke=()=>0,Qe=Rt=>Math.exp(et*pe*Rt)}return r.duration="duration"in r?+r.duration:1e3*Xe/("screenSpeed"in r?+r.screenSpeed/pe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=m!==E,this._pitching=z!==v,this._rolling=B!==w,this._padding=!p.isPaddingEqual(U),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(fe.targetCenter),this._ease(et=>{const Rt=et*Xe,Et=1/Qe(Rt),gt=Ke(Rt);this._rotating&&p.setBearing(a.C.number(m,E,et)),this._pitching&&p.setPitch(a.C.number(v,z,et)),this._rolling&&p.setRoll(a.C.number(w,B,et)),this._padding&&(p.interpolatePadding(P,U,et),Z=p.centerPoint.add(V)),fe.easeFunc(et,Et,gt,Z),this.terrain&&!r.freezeElevation&&this._updateElevation(et),this._applyUpdatedTransform(p),this._fireMoveEvents(s)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(s)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,s){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,s)}return r||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(r,s,p){p.animate===!1||p.duration===0?(r(1),s()):(this._easeStart=M.now(),this._easeOptions=p,this._onEaseFrame=r,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,s){r=a.aN(r,-180,180);const p=Math.abs(r-s);return Math.abs(r-360-s)<p&&(r-=360),Math.abs(r+360-s)<p&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(r),this.transform.tileZoom):null}}const Zc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class yd{constructor(r=Zc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,s){const p=this._map._getUIString(`AttributionControl.${s}`);r.title=p,r.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const s=this._map.style.sourceCaches;for(const m in s){const v=s[m];if(v.used||v.usedForTerrain){const w=v.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,v)=>m.length-v.length),r=r.filter((m,v)=>{for(let w=v+1;w<r.length;w++)if(r[w].indexOf(m)>=0)return!1;return!0});const p=r.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,r.length?(this._innerContainer.innerHTML=R.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class $p{constructor(r={}){this._updateCompact=()=>{const s=this._container.children;if(s.length){const p=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl");const s=R.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qg{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const s=++this._id;return this._queue.push({callback:r,id:s,cancelled:!1}),s}remove(r){const s=this._currentlyRunning,p=s?this._queue.concat(s):this._queue;for(const m of p)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const p of s)if(!p.cancelled&&(p.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ey=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class fx extends a.E{constructor(r){super(),this._lastTilesetChange=M.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,s){this.sourceCache.update(r,s),this._renderableTilesKeys=[];const p={};for(const m of We(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.bX(m.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[m.key]=new ar(m,this.tileSize),this._lastTilesetChange=M.now());for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(r){for(const s in this._tiles){const p=this._tiles[s];(!r||p.tileID.equals(r)||p.tileID.isChildOf(r)||r.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,s){return s?this._getTerrainCoordsForTileRanges(r,s):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const s={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID,v=r.clone(),w=a.b9();if(m.canonical.equals(r.canonical))a.bX(w,0,a.$,a.$,0,0,1);else if(m.canonical.isChildOf(r.canonical)){const P=m.canonical.z-r.canonical.z,E=m.canonical.x-(m.canonical.x>>P<<P),z=m.canonical.y-(m.canonical.y>>P<<P),B=a.$>>P;a.bX(w,0,B,B,0,0,1),a.M(w,w,[-E*B,-z*B,0])}else{if(!r.canonical.isChildOf(m.canonical))continue;{const P=r.canonical.z-m.canonical.z,E=r.canonical.x-(r.canonical.x>>P<<P),z=r.canonical.y-(r.canonical.y>>P<<P),B=a.$>>P;a.bX(w,0,a.$,a.$,0,0,1),a.M(w,w,[E*B,z*B,0]),a.N(w,w,[1/2**P,1/2**P,0])}}v.terrainRttPosMatrix32f=new Float32Array(w),s[p]=v}return s}_getTerrainCoordsForTileRanges(r,s){const p={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID;if(!this._isWithinTileRanges(v,s))continue;const w=r.clone(),P=a.b9();if(v.canonical.z===r.canonical.z){const E=r.canonical.x-v.canonical.x,z=r.canonical.y-v.canonical.y;a.bX(P,0,a.$,a.$,0,0,1),a.M(P,P,[E*a.$,z*a.$,0])}else if(v.canonical.z>r.canonical.z){const E=v.canonical.z-r.canonical.z,z=v.canonical.x-(v.canonical.x>>E<<E),B=v.canonical.y-(v.canonical.y>>E<<E),U=r.canonical.x-(v.canonical.x>>E),V=r.canonical.y-(v.canonical.y>>E),Z=a.$>>E;a.bX(P,0,Z,Z,0,0,1),a.M(P,P,[-z*Z+U*a.$,-B*Z+V*a.$,0])}else{const E=r.canonical.z-v.canonical.z,z=r.canonical.x-(r.canonical.x>>E<<E),B=r.canonical.y-(r.canonical.y>>E<<E),U=(r.canonical.x>>E)-v.canonical.x,V=(r.canonical.y>>E)-v.canonical.y,Z=a.$<<E;a.bX(P,0,Z,Z,0,0,1),a.M(P,P,[z*a.$+U*Z,B*a.$+V*Z,0])}w.terrainRttPosMatrix32f=new Float32Array(P),p[m]=w}return p}getSourceTile(r,s){const p=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&s)for(;m>=p.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(m--).key);return v}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,s){return s[r.canonical.z]&&r.canonical.x>=s[r.canonical.z].minTileX&&r.canonical.x<=s[r.canonical.z].maxTileX&&r.canonical.y>=s[r.canonical.z].minTileY&&r.canonical.y<=s[r.canonical.z].maxTileY}}class ua{constructor(r,s,p){this._meshCache={},this.painter=r,this.sourceCache=new fx(s),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,s,p,m=a.$){var v;if(!(s>=0&&s<m&&p>=0&&p<m))return 0;const w=this.getTerrainData(r),P=(v=w.tile)===null||v===void 0?void 0:v.dem;if(!P)return 0;const E=a.cr([],[s/m*a.$,p/m*a.$],w.u_terrain_matrix),z=[E[0]*P.dim,E[1]*P.dim],B=Math.floor(z[0]),U=Math.floor(z[1]),V=z[0]-B,Z=z[1]-U;return P.get(B,U)*(1-V)*(1-Z)+P.get(B+1,U)*V*(1-Z)+P.get(B,U+1)*(1-V)*Z+P.get(B+1,U+1)*V*Z}getElevationForLngLatZoom(r,s){if(!a.cs(s,r.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,s);return this.getElevation(p,m%a.$,v%a.$,a.$)}getElevation(r,s,p,m=a.$){return this.getDEMElevation(r,s,p,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,v=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const s=this.sourceCache.getSourceTile(r,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const m=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new a.T(m,s.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),s.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const p=s&&s+s.tileID.key+r.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let v=r.canonical.z-s.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?v=r.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=r.canonical.x-(r.canonical.x>>v<<v),P=r.canonical.y-(r.canonical.y>>v<<v),E=a.ct(new Float64Array(16),[1/(a.$<<v),1/(a.$<<v),0]);a.M(E,E,[w*a.$,P*a.$,0]),this._demMatrixCache[r.key]={matrix:E,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(r){const s=this.painter,p=s.width/devicePixelRatio,m=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(s.context,{width:p,height:m,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(s.context,{width:p,height:m,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,w=0;v<this._coordsTextureSize;v++)for(let P=0;P<this._coordsTextureSize;P++,w+=4)s[w+0]=255&P,s[w+1]=255&v,s[w+2]=P>>8<<4|v>>8,s[w+3]=0;const p=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),m=new a.T(r,p,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const s=new Uint8Array(4),p=this.painter.context,m=p.gl,v=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(v,P-w-1,1,1,m.RGBA,m.UNSIGNED_BYTE,s),p.bindFramebuffer.set(null);const E=s[0]+(s[2]>>4<<8),z=s[1]+((15&s[2])<<8),B=this.coordsIndex[255-s[3]],U=B&&this.sourceCache.getTileByID(B);if(!U)return null;const V=this._coordsTextureSize,Z=(1<<U.tileID.canonical.z)*V;return new a.a0((U.tileID.canonical.x*V+E)/Z+U.tileID.wrap,(U.tileID.canonical.y*V+z)/Z,this.getElevation(U.tileID,E,z,V))}depthAtPoint(r){const s=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,s),p.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(r){var s;const p=((s=this.painter.style.projection)===null||s===void 0?void 0:s.transitionState)>0,m=p&&r.canonical.y===0,v=p&&r.canonical.y===(1<<r.canonical.z)-1,w=`m_${m?"n":""}_${v?"s":""}`;if(this._meshCache[w])return this._meshCache[w];const P=this.painter.context,E=new a.cu,z=new a.aM,B=this.meshSize,U=a.$/B,V=B*B;for(let Se=0;Se<=B;Se++)for(let Ne=0;Ne<=B;Ne++)E.emplaceBack(Ne*U,Se*U,0);for(let Se=0;Se<V;Se+=B+1)for(let Ne=0;Ne<B;Ne++)z.emplaceBack(Ne+Se,B+Ne+Se+1,B+Ne+Se+2),z.emplaceBack(Ne+Se,B+Ne+Se+2,Ne+Se+1);const Z=E.length,ie=Z+(B+1),fe=(B+1)*B,pe=m?a.bg:0,me=m?0:1,ve=v?a.bh:a.$,Ce=v?0:1;for(let Se=0;Se<=B;Se++)E.emplaceBack(Se*U,pe,me);for(let Se=0;Se<=B;Se++)E.emplaceBack(Se*U,ve,Ce);for(let Se=0;Se<B;Se++)z.emplaceBack(fe+Se,ie+Se,ie+Se+1),z.emplaceBack(fe+Se,ie+Se+1,fe+Se+1),z.emplaceBack(0+Se,Z+Se+1,Z+Se),z.emplaceBack(0+Se,0+Se+1,Z+Se+1);const be=E.length,ke=be+2*(B+1);for(const Se of[0,1])for(let Ne=0;Ne<=B;Ne++)for(const Qe of[0,1])E.emplaceBack(Se*a.$,Ne*U,Qe);for(let Se=0;Se<2*B;Se+=2)z.emplaceBack(be+Se,be+Se+1,be+Se+3),z.emplaceBack(be+Se,be+Se+3,be+Se+2),z.emplaceBack(ke+Se,ke+Se+3,ke+Se+1),z.emplaceBack(ke+Se,ke+Se+2,ke+Se+3);const Le=new Ea(P.createVertexBuffer(E,ey.members),P.createIndexBuffer(z),a.aL.simpleSegment(0,0,E.length,z.length));return this._meshCache[w]=Le,Le}getMeshFrameDelta(r){return 2*Math.PI*a.bt/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,s){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,s);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(r){const s=this.getTerrainData(r).tile,p={minElevation:null,maxElevation:null};return s&&s.dem&&(p.minElevation=s.dem.min*this.exaggeration,p.maxElevation=s.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(r,s){const p=a.a0.fromLngLat(r.wrap()),m=(1<<s)*a.$,v=p.x*m,w=p.y*m,P=Math.floor(v/a.$),E=Math.floor(w/a.$);return{tileID:new a.Z(s,0,s,P,E),mercatorX:v,mercatorY:w}}}class vd{constructor(r,s,p){this._context=r,this._size=s,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(p.texture),{id:r,fbo:s,texture:p,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(s=>r.id!==s),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Zt={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class cr{constructor(r,s){this.painter=r,this.terrain=s,this.pool=new vd(r.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(p=>!r._layers[p].isHidden(s)),this._coordsAscending={};for(const p in r.sourceCaches){this._coordsAscending[p]={};const m=r.sourceCaches[p].getVisibleCoordinates(),v=r.sourceCaches[p].getSource(),w=v instanceof mr?v.terrainTileRanges:null;for(const P of m){const E=this.terrain.sourceCache.getTerrainCoords(P,w);for(const z in E)this._coordsAscending[p][z]||(this._coordsAscending[p][z]=[]),this._coordsAscending[p][z].push(E[z])}}this._coordsAscendingStr={};for(const p of r._order){const m=r._layers[p],v=m.source;if(Zt[m.type]&&!this._coordsAscendingStr[v]){this._coordsAscendingStr[v]={};for(const w in this._coordsAscending[v])this._coordsAscendingStr[v][w]=this._coordsAscending[v][w].map(P=>P.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsAscendingStr){const v=this._coordsAscendingStr[m][p.tileID.key];v&&v!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(r,s){if(r.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},s),{isRenderingToTexture:!0}),m=r.type,v=this.painter,w=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Zt[m]&&(this._prevType&&Zt[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(r.id),!w))return!0;if(Zt[this._prevType]||Zt[m]&&w){this._prevType=m;const P=this._stacks.length-1,E=this._stacks[P]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(Tn(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[P]){const U=this.pool.getObjectForId(z.rtt[P].id);if(U.stamp===z.rtt[P].stamp){this.pool.useObject(U);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),z.rtt[P]={id:B.id,stamp:B.stamp},v.context.bindFramebuffer.set(B.fbo.framebuffer),v.context.clear({color:a.be.transparent,stencil:0}),v.currentStencilSource=void 0;for(let U=0;U<E.length;U++){const V=v.style._layers[E[U]],Z=V.source?this._coordsAscending[V.source][z.tileID.key]:[z.tileID];v.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),v._renderTileClippingMasks(V,Z,!0),v.renderLayer(v,v.style.sourceCaches[V.source],V,Z,p),V.source&&(z.rttCoords[V.source]=this._coordsAscendingStr[V.source][z.tileID.key])}}return Tn(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),Zt[m]}return!1}}const _d={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Op=b,qc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zc,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},jo={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ty{constructor(r,s,p=!1){this.mousedown=v=>{this.startMove(v,R.mousePos(this.element,v)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.move(v,R.mousePos(this.element,v))},this.mouseup=v=>{this._rotatePitchHanlder.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,v.targetTouches)[0],this.startMove(v,this._startPos),R.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,v.targetTouches)[0],this.move(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=s;const m=new cx;this._rotatePitchHanlder=new kl({clickTolerance:3,move:(v,w)=>{const P=s.getBoundingClientRect(),E=new a.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:a.cm(new a.P(v.x,w.y),w,E),pitchDelta:p?-.5*(w.y-v.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=r,R.addEventListener(s,"mousedown",this.mousedown),R.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(s,"touchcancel",this.reset)}startMove(r,s){this._rotatePitchHanlder.dragStart(r,s),R.disableDrag()}move(r,s){const p=this.map,{bearingDelta:m,pitchDelta:v}=this._rotatePitchHanlder.dragMove(r,s)||{};m&&p.setBearing(p.getBearing()+m),v&&p.setPitch(p.getPitch()+v)}off(){const r=this.element;R.removeEventListener(r,"mousedown",this.mousedown),R.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend),R.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend)}}let po;function ry(y,r,s,p=!1){if(p||!s.getCoveringTilesDetailsProvider().allowWorldCopies())return y==null?void 0:y.wrap();const m=new a.S(y.lng,y.lat);if(y=new a.S(y.lng,y.lat),r){const v=new a.S(y.lng-360,y.lat),w=new a.S(y.lng+360,y.lat),P=s.locationToScreenPoint(y).distSqr(r);s.locationToScreenPoint(v).distSqr(r)<P?y=v:s.locationToScreenPoint(w).distSqr(r)<P&&(y=w)}for(;Math.abs(y.lng-s.center.lng)>180;){const v=s.locationToScreenPoint(y);if(v.x>=0&&v.y>=0&&v.x<=s.width&&v.y<=s.height)break;y.lng>s.center.lng?y.lng-=360:y.lng+=360}return y.lng!==m.lng&&s.isPointOnMapSurface(s.locationToScreenPoint(y))?y:m}const Ds={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _n(y,r,s){const p=y.classList;for(const m in Ds)p.remove(`maplibregl-${s}-anchor-${m}`);p.add(`maplibregl-${s}-anchor-${r}`)}class In extends a.E{constructor(r){if(super(),this._onKeyPress=s=>{const p=s.code,m=s.charCode||s.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=s=>{const p=s.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=s=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((s==null?void 0:s.type)==="terrain"||(s==null?void 0:s.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=ry(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||s&&s.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${Ds[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${m}`),M.frameAsync(new AbortController).then(()=>{this._updateOpacity(s&&s.type==="moveend")}).catch(()=>{})},this._onMove=s=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div");const s=R.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${p}px`),s.setAttributeNS(null,"width",`${m}px`),s.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const v=R.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const w=R.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const P=R.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of E){const ve=R.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",me.rx),ve.setAttributeNS(null,"ry",me.ry),P.appendChild(ve)}const z=R.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const B=R.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(B);const U=R.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const V=R.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(V);const Z=R.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const ie=R.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=R.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const pe=R.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),ie.appendChild(fe),ie.appendChild(pe),w.appendChild(P),w.appendChild(z),w.appendChild(U),w.appendChild(Z),w.appendChild(ie),s.appendChild(w),s.setAttributeNS(null,"height",p*this._scale+"px"),s.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(s),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",s=>{s.preventDefault()}),this._element.addEventListener("mousedown",s=>{s.preventDefault()}),_n(this._element,this._anchor,"marker"),r&&r.className)for(const s of r.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var s,p;const m=(s=this._map)===null||s===void 0?void 0:s.terrain,v=this._map.transform.isLocationOccluded(this._lngLat);if(!m||v){const Z=v?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Z&&(this._element.style.opacity=Z))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const w=this._map,P=w.terrain.depthAtPoint(this._pos),E=w.terrain.getElevationForLngLatZoom(this._lngLat,w.transform.tileZoom);if(w.transform.lngLatToCameraDepth(this._lngLat,E)-P<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/w.transform.pixelsPerMeter,B=Math.sin(w.getPitch()*Math.PI/180)*z,U=w.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),V=w.transform.lngLatToCameraDepth(this._lngLat,E+B)-U>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&V&&this._popup.remove(),this._element.style.opacity=V?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,s){return(this._opacity===void 0||r===void 0&&s===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}const ny={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ts=0,rs=!1;const Bp={maxWidth:100,unit:"metric"};function xd(y,r,s){const p=s&&s.maxWidth||100,m=y._container.clientHeight/2,v=y._container.clientWidth/2,w=y.unproject([v-p/2,m]),P=y.unproject([v+p/2,m]),E=Math.round(y.project(P).x-y.project(w).x),z=Math.min(p,E,y._container.clientWidth),B=w.distanceTo(P);if(s&&s.unit==="imperial"){const U=3.2808*B;U>5280?Ls(r,z,U/5280,y._getUIString("ScaleControl.Miles")):Ls(r,z,U,y._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?Ls(r,z,B/1852,y._getUIString("ScaleControl.NauticalMiles")):B>=1e3?Ls(r,z,B/1e3,y._getUIString("ScaleControl.Kilometers")):Ls(r,z,B,y._getUIString("ScaleControl.Meters"))}function Ls(y,r,s,p){const m=function(v){const w=Math.pow(10,`${Math.floor(v)}`.length-1);let P=v/w;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(E){const z=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*z)/z}(P),w*P}(s);y.style.width=r*(m/s)+"px",y.innerHTML=`${m}&nbsp;${p}`}const Kc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Fp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bd(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,y),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-y),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(y,0),right:new a.P(-y,0)}}if(y instanceof a.P||Array.isArray(y)){const r=a.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(y.center||[0,0]),top:a.P.convert(y.top||[0,0]),"top-left":a.P.convert(y["top-left"]||[0,0]),"top-right":a.P.convert(y["top-right"]||[0,0]),bottom:a.P.convert(y.bottom||[0,0]),"bottom-left":a.P.convert(y["bottom-left"]||[0,0]),"bottom-right":a.P.convert(y["bottom-right"]||[0,0]),left:a.P.convert(y.left||[0,0]),right:a.P.convert(y.right||[0,0])}}return bd(new a.P(0,0))}const jp=b;f.AJAXError=a.cy,f.Event=a.l,f.Evented=a.E,f.LngLat=a.S,f.MercatorCoordinate=a.a0,f.Point=a.P,f.addProtocol=a.cz,f.config=a.a,f.removeProtocol=a.cA,f.AttributionControl=yd,f.BoxZoomHandler=Ip,f.CanvasSource=Ur,f.CooperativeGesturesHandler=Jg,f.DoubleClickZoomHandler=md,f.DragPanHandler=zp,f.DragRotateHandler=gd,f.EdgeInsets=vi,f.FullscreenControl=class extends a.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=s==null?void 0:s.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Vt,f.GeolocateControl=class extends a.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const s=new a.S(r.coords.longitude,r.coords.latitude),p=r.coords.accuracy,m=this._map.getBearing(),v=a.e({bearing:m},this.options.fitBoundsOptions),w=ur.fromLngLat(s,p);this._map.fitBounds(w,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const s=new a.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&rs)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new In({element:this._dotElement}),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new In({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},ny,y)}onAdd(y){return this._map=y,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(r=!1){if(po!==void 0&&!r)return po;if(window.navigator.permissions===void 0)return po=!!window.navigator.geolocation,po;try{po=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{po=!!window.navigator.geolocation}return po})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ts=0,rs=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),s=y.coords;return r&&(s.longitude<r.getWest()||s.longitude>r.getEast()||s.latitude<r.getSouth()||s.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),s=y.getNorthEast(),p=r.distanceTo(s),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ts--,rs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ts++,ts>1?(y={maximumAge:6e5,timeout:0},rs=!0):(y=this.options.positionOptions,rs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var y;const r=(y=this._map.getProjection())===null||y===void 0?void 0:y.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var y;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((y=this._map.getProjection())===null||y===void 0?void 0:y.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(y){return this._map=y,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=R.create("button","maplibregl-ctrl-globe",this._container),R.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=Nc,f.ImageSource=mr,f.KeyboardHandler=Al,f.LngLatBounds=ur,f.LogoControl=$p,f.Map=class extends fn{constructor(y){var r,s;a.cv.mark(a.cw.create);const p=Object.assign(Object.assign(Object.assign({},qc),y),{canvasContextAttributes:Object.assign(Object.assign({},qc.canvasContextAttributes),y.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const m=new Fn,v=new Hu;if(p.minZoom!==void 0&&m.setMinZoom(p.minZoom),p.maxZoom!==void 0&&m.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&m.setMinPitch(p.minPitch),p.maxPitch!==void 0&&m.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&m.setRenderWorldCopies(p.renderWorldCopies),super(m,v,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Qg,this._controls=[],this._mapId=a.a6(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},_d),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ne.addThrottleControl(()=>this.isMoving()),this._requestManager=new Y(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let P=!1;const E=ud(z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())},50);this._resizeObserver=new ResizeObserver(z=>{P?E(z):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new es(this,p),this._hash=p.hash&&new Nc(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,a.e({},p.fitBoundsOptions,{duration:0}))));const w=typeof p.style=="string"||((s=(r=p.style)===null||r===void 0?void 0:r.projection)===null||s===void 0?void 0:s.type)!=="globe";this.resize(null,w),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new yd(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new $p,p.logoPosition),this.on("style.load",()=>{if(w||this._resizeTransform(),this.transform.unmodified){const P=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new a.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new a.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new a.l("sourcedataabort",P))})}_getMapId(){return this._mapId}setGlobalStateProperty(y,r){return this.style.setGlobalStateProperty(y,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[r];return r.indexOf("bottom")!==-1?p.insertBefore(s,p.firstChild):p.appendChild(s),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,s,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,s,p)}resize(y,r=!0){const[s,p]=this._containerDimensions(),m=this._getClampedPixelRatio(s,p);if(this._resizeCanvas(s,p,m),this.painter.resize(s,p,m),this.painter.overLimit()){const w=this.painter.context.gl;this._maxCanvasSize=[w.drawingBufferWidth,w.drawingBufferHeight];const P=this._getClampedPixelRatio(s,p);this._resizeCanvas(s,p,P),this.painter.resize(s,p,P)}this._resizeTransform(r);const v=!this._moving;return v&&(this.stop(),this.fire(new a.l("movestart",y)).fire(new a.l("move",y))),this.fire(new a.l("resize",y)),v&&this.fire(new a.l("moveend",y)),this}_resizeTransform(y=!0){var r;const[s,p]=this._containerDimensions();this.transform.resize(s,p,y),(r=this._requestedCameraState)===null||r===void 0||r.resize(s,p,y)}_getClampedPixelRatio(y,r){const{0:s,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),v=y*m,w=r*m;return Math.min(v>s?s/v:1,w>p?p/w:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(ur.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.setMinZoom(y),this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.setMaxZoom(y),this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.setMinPitch(y),this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(y>=this.transform.minPitch)return this.transform.setMaxPitch(y),this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.setRenderWorldCopies(y),this._update()}project(y){return this.transform.locationToScreenPoint(a.S.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.screenPointToLocation(a.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,s){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layers:r,listener:s,delegates:{mousemove:v=>{const w=r.filter(E=>this.getLayer(E)),P=w.length!==0?this.queryRenderedFeatures(v.point,{layers:w}):[];P.length?p||(p=!0,s.call(this,new Jo(y,this,v.originalEvent,{features:P}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layers:r,listener:s,delegates:{mousemove:w=>{const P=r.filter(E=>this.getLayer(E));(P.length!==0?this.queryRenderedFeatures(w.point,{layers:P}):[]).length?p=!0:p&&(p=!1,s.call(this,new Jo(y,this,w.originalEvent)))},mouseout:w=>{p&&(p=!1,s.call(this,new Jo(y,this,w.originalEvent)))}}}}{const p=m=>{const v=r.filter(P=>this.getLayer(P)),w=v.length!==0?this.queryRenderedFeatures(m.point,{layers:v}):[];w.length&&(m.features=w,s.call(this,m),delete m.features)};return{layers:r,listener:s,delegates:{[y]:p}}}}_saveDelegatedListener(y,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(r)}_removeDelegatedListener(y,r,s){if(!this._delegatedListeners||!this._delegatedListeners[y])return;const p=this._delegatedListeners[y];for(let m=0;m<p.length;m++){const v=p[m];if(v.listener===s&&v.layers.length===r.length&&v.layers.every(w=>r.includes(w))){for(const w in v.delegates)this.off(w,v.delegates[w]);return void p.splice(m,1)}}}on(y,r,s){if(s===void 0)return super.on(y,r);const p=typeof r=="string"?[r]:r,m=this._createDelegatedListener(y,p,s);this._saveDelegatedListener(y,m);for(const v in m.delegates)this.on(v,m.delegates[v]);return{unsubscribe:()=>{this._removeDelegatedListener(y,p,s)}}}once(y,r,s){if(s===void 0)return super.once(y,r);const p=typeof r=="string"?[r]:r,m=this._createDelegatedListener(y,p,s);for(const v in m.delegates){const w=m.delegates[v];m.delegates[v]=(...P)=>{this._removeDelegatedListener(y,p,s),w(...P)}}this._saveDelegatedListener(y,m);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(y,r,s){return s===void 0?super.off(y,r):(this._removeDelegatedListener(y,typeof r=="string"?[r]:r,s),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let s;const p=y instanceof a.P||Array.isArray(y),m=p?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(p?{}:y)||{},m instanceof a.P||typeof m[0]=="number")s=[a.P.convert(m)];else{const v=a.P.convert(m[0]),w=a.P.convert(m[1]);s=[v,new a.P(w.x,v.y),w,new a.P(v.x,w.y),v]}return this.style.queryRenderedFeatures(s,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){var s,p;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const m=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new op(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,m):this.style.loadJSON(y,r,m),this):((p=(s=this.style)===null||s===void 0?void 0:s.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new op(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const s=this._requestManager.transformRequest(y,"Style");a.j(s,new AbortController).then(p=>{this._updateDiff(p.data,r)}).catch(p=>{p&&this.fire(new a.k(p))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(s){a.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const s in this.style._layers){const p=this.style._layers[s];p.type==="hillshade"&&p.source===y.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===y.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ua(this.painter,r,y),this.painter.renderToTexture=new cr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=s=>{var p;s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==y.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=s.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const s=y[r]._tiles;for(const p in s){const m=s[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}setSourceTileLodParams(y,r,s){if(s){const p=this.getSource(s);if(!p)throw new Error(`There is no source with ID "${s}", cannot set LOD parameters`);p.calculateTileZoom=Fe(Math.max(1,y),Math.max(1,r))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=Fe(Math.max(1,y),Math.max(1,r));return this._update(!0),this}refreshTiles(y,r){const s=this.style.sourceCaches[y];if(!s)throw new Error(`There is no source cache with ID "${y}", cannot refresh tile`);r===void 0?s.reload(!0):s.refreshTiles(r.map(p=>new a.a3(p.z,p.x,p.y)))}addImage(y,r,s={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:v,stretchY:w,content:P,textFitWidth:E,textFitHeight:z}=s;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:U,data:V}=r,Z=r;return this.style.addImage(y,{data:new a.R({width:B,height:U},new Uint8Array(V)),pixelRatio:p,stretchX:v,stretchY:w,content:P,textFitWidth:E,textFitHeight:z,sdf:m,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,y),this}}{const{width:B,height:U,data:V}=M.getImageData(r);this.style.addImage(y,{data:new a.R({width:B,height:U},V),pixelRatio:p,stretchX:v,stretchY:w,content:P,textFitWidth:E,textFitHeight:z,sdf:m,version:0})}}updateImage(y,r){const s=this.style.getImage(y);if(!s)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=r instanceof HTMLImageElement||a.b(r)?M.getImageData(r):r,{width:m,height:v,data:w}=p;if(m===void 0||v===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==s.data.width||v!==s.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(r instanceof HTMLImageElement||a.b(r));return s.data.replace(w,P),this.style.updateImage(y,s),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return ne.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,s){return this.style.setLayerZoomRange(y,r,s),this._update(!0)}setFilter(y,r,s={}){return this.style.setFilter(y,r,s),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,s,p={}){return this.style.setPaintProperty(y,r,s,p),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,s,p={}){return this.style.setLayoutProperty(y,r,s,p),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,s,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,s=>{s||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(y,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=R.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const s=this._containerDimensions(),p=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],p);const m=this._controlContainer=R.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{v[w]=R.create("div",`maplibregl-ctrl-${w} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,s){this._canvas.width=Math.floor(s*y),this._canvas.height=Math.floor(s*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{r={requestedAttributes:y},p&&(r.statusMessage=p.statusMessage,r.type=p.type)},{once:!0});let s=null;if(s=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,y):this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y),!s){const p="Failed to initialize WebGL";throw r?(r.message=p,new Error(JSON.stringify(r))):new Error(p)}this.painter=new xi(s,this.transform),$.testSupport(s)}migrateProjection(y,r){super.migrateProjection(y,r),this.painter.transform=y,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){var r,s,p,m,v;const w=this._idleTriggered?this._fadeDuration:0,P=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let E=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,V=M.now();this.style.zoomHistory.update(U,V);const Z=new a.F(U,{now:V,fadeDuration:w,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ie=Z.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(E=!0,this._crossFadingFactor=ie),this.style.update(Z)}const z=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0!==P;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(v=this.style.projection)===null||v===void 0?void 0:v.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ne.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frame(this._frameRequest,y=>{a.cv.frame(y),this._frameRequest=null;try{this._render(y)}catch(r){if(!a.cx(r)&&!function(s){return s.message===_p}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Op}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(y){return this._lazyInitEmptyStyle(),this.style.setProjection(y),this._update(!0)}},f.MapMouseEvent=Jo,f.MapTouchEvent=$i,f.MapWheelEvent=Tp,f.Marker=In,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),s=r===this._map.getMaxZoom(),p=r===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,s)=>{const p=this._map._getUIString(`NavigationControl.${s}`);r.title=p,r.setAttribute("aria-label",p)},this.options=a.e({},jo,y),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),R.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),R.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=R.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ty(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const s=R.create("button",y,this._container);return s.type="button",s.addEventListener("click",r),s}},f.Popup=class extends a.E{constructor(y){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=R.create("div","maplibregl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const w of this.options.className.split(" "))this._container.classList.add(w);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ry(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const s=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const m=bd(this.options.offset);if(!p){const w=this._container.offsetWidth,P=this._container.offsetHeight;let E;E=s.y+m.bottom.y<P?["top"]:s.y>this._map.transform.height-P?["bottom"]:[],s.x<w/2?E.push("left"):s.x>this._map.transform.width-w/2&&E.push("right"),p=E.length===0?"bottom":E.join("-")}let v=s.add(m[p]);this.options.subpixelPositioning||(v=v.round()),R.setTransform(this._container,`${Ds[p]} translate(${v.x}px,${v.y}px)`),_n(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Kc),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=a.S.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),s=document.createElement("body");let p;for(s.innerHTML=y;p=s.firstChild,p;)r.appendChild(p);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Fp);y&&y.focus()}},f.RasterDEMTileSource=Qt,f.RasterTileSource=Lt,f.ScaleControl=class{constructor(y){this._onMove=()=>{xd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,xd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Bp),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Yg,f.Style=op,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Mp,f.TwoFingersTouchRotateHandler=kp,f.TwoFingersTouchZoomHandler=ca,f.TwoFingersTouchZoomRotateHandler=Dp,f.VectorTileSource=Kt,f.VideoSource=kr,f.addSourceType=(y,r)=>a._(void 0,void 0,void 0,function*(){if(pr(y))throw new Error(`A source type called "${y}" already exists.`);((s,p)=>{Lr[s]=p})(y,r)}),f.clearPrewarmedResources=function(){const y=Ht;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(at),Ht=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=tp,f.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return dr().getRTLTextPluginStatus()},f.getVersion=function(){return jp},f.getWorkerCount=function(){return pt.workerCount},f.getWorkerUrl=function(){return a.a.WORKER_URL},f.importScriptInWorkers=function(y){return Tt().broadcast("IS",y)},f.prewarm=function(){Nt().acquire(at)},f.setMaxParallelImageRequests=function(y){a.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,r){return dr().setRTLTextPlugin(y,r)},f.setWorkerCount=function(y){pt.workerCount=y},f.setWorkerUrl=function(y){a.a.WORKER_URL=y}});var d=n;return d})})(s$);var __=s$.exports;const c$=CS(__),fq=MR({__proto__:null,default:c$},[__]);var _h=Math.pow,Go=(e,t,n)=>new Promise((i,u)=>{var d=b=>{try{a(n.next(b))}catch(C){u(C)}},f=b=>{try{a(n.throw(b))}catch(C){u(C)}},a=b=>b.done?i(b.value):Promise.resolve(b.value).then(d,f);a((n=n.apply(e,t)).next())}),qi=Uint8Array,Jf=Uint16Array,mq=Int32Array,u$=new qi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),d$=new qi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gq=new qi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h$=function(e,t){for(var n=new Jf(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var u=new mq(n[30]),i=1;i<30;++i)for(var d=n[i];d<n[i+1];++d)u[d]=d-n[i]<<5|i;return{b:n,r:u}},p$=h$(u$,2),f$=p$.b,yq=p$.r;f$[28]=258,yq[258]=28;var vq=h$(d$,0),_q=vq.b,m$=new Jf(32768);for(tn=0;tn<32768;++tn)Fs=(tn&43690)>>1|(tn&21845)<<1,Fs=(Fs&52428)>>2|(Fs&13107)<<2,Fs=(Fs&61680)>>4|(Fs&3855)<<4,m$[tn]=((Fs&65280)>>8|(Fs&255)<<8)>>1;var Fs,tn,Qf=function(e,t,n){for(var i=e.length,u=0,d=new Jf(t);u<i;++u)e[u]&&++d[e[u]-1];var f=new Jf(t);for(u=1;u<t;++u)f[u]=f[u-1]+d[u-1]<<1;var a;{a=new Jf(1<<t);var b=15-t;for(u=0;u<i;++u)if(e[u])for(var C=u<<4|e[u],I=t-e[u],k=f[e[u]-1]++<<I,M=k|(1<<I)-1;k<=M;++k)a[m$[k]>>b]=C}return a},og=new qi(288);for(tn=0;tn<144;++tn)og[tn]=8;var tn;for(tn=144;tn<256;++tn)og[tn]=9;var tn;for(tn=256;tn<280;++tn)og[tn]=7;var tn;for(tn=280;tn<288;++tn)og[tn]=8;var tn,g$=new qi(32);for(tn=0;tn<32;++tn)g$[tn]=5;var tn,xq=Qf(og,9),bq=Qf(g$,5),Zb=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Fa=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&n},qb=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},wq=function(e){return(e+7)/8|0},Sq=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var i=new qi(n-t);return i.set(e.subarray(t,n)),i},Cq=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hi=function(e,t,n){var i=new Error(t||Cq[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,Hi),!n)throw i;return i},C2=function(e,t,n,i){var u=e.length,d=0;if(!u||t.f&&!t.l)return n||new qi(0);var f=!n||t.i!=2,a=t.i;n||(n=new qi(u*3));var b=function(Mt){var qt=n.length;if(Mt>qt){var nr=new qi(Math.max(qt*2,Mt));nr.set(n),n=nr}},C=t.f||0,I=t.p||0,k=t.b||0,M=t.l,R=t.d,$=t.m,G=t.n,ee=u*8;do{if(!M){C=Fa(e,I,1);var F=Fa(e,I+1,3);if(I+=3,F)if(F==1)M=xq,R=bq,$=9,G=5;else if(F==2){var Y=Fa(e,I,31)+257,q=Fa(e,I+10,15)+4,ce=Y+Fa(e,I+5,31)+1;I+=14;for(var he=new qi(ce),ze=new qi(19),J=0;J<q;++J)ze[gq[J]]=Fa(e,I+J*3,7);I+=q*3;for(var Ee=Zb(ze),Be=(1<<Ee)-1,je=Qf(ze,Ee),J=0;J<ce;){var ot=je[Fa(e,I,Be)];I+=ot&15;var j=ot>>4;if(j<16)he[J++]=j;else{var He=0,De=0;for(j==16?(De=3+Fa(e,I,3),I+=2,He=he[J-1]):j==17?(De=3+Fa(e,I,7),I+=3):j==18&&(De=11+Fa(e,I,127),I+=7);De--;)he[J++]=He}}var Ge=he.subarray(0,Y),Ue=he.subarray(Y);$=Zb(Ge),G=Zb(Ue),M=Qf(Ge,$),R=Qf(Ue,G)}else Hi(1);else{var j=wq(I)+4,O=e[j-4]|e[j-3]<<8,ne=j+O;if(ne>u){a&&Hi(0);break}f&&b(k+O),n.set(e.subarray(j,ne),k),t.b=k+=O,t.p=I=ne*8,t.f=C;continue}if(I>ee){a&&Hi(0);break}}f&&b(k+131072);for(var Ze=(1<<$)-1,at=(1<<G)-1,pt=I;;pt=I){var He=M[qb(e,I)&Ze],ct=He>>4;if(I+=He&15,I>ee){a&&Hi(0);break}if(He||Hi(2),ct<256)n[k++]=ct;else if(ct==256){pt=I,M=null;break}else{var Ht=ct-254;if(ct>264){var J=ct-257,Dt=u$[J];Ht=Fa(e,I,(1<<Dt)-1)+f$[J],I+=Dt}var Nt=R[qb(e,I)&at],tr=Nt>>4;Nt||Hi(3),I+=Nt&15;var Ue=_q[tr];if(tr>3){var Dt=d$[tr];Ue+=qb(e,I)&(1<<Dt)-1,I+=Dt}if(I>ee){a&&Hi(0);break}f&&b(k+131072);var Tt=k+Ht;if(k<Ue){var st=d-Ue,Ct=Math.min(Ue,Tt);for(st+k<0&&Hi(3);k<Ct;++k)n[k]=i[st+k]}for(;k<Tt;k+=4)n[k]=n[k-Ue],n[k+1]=n[k+1-Ue],n[k+2]=n[k+2-Ue],n[k+3]=n[k+3-Ue];k=Tt}}t.l=M,t.p=pt,t.b=k,t.f=C,M&&(C=1,t.m=$,t.d=R,t.n=G)}while(!C);return k==n.length?n:Sq(n,0,k)},Pq=new qi(0),Tq=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Hi(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(t&2)},Iq=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},Eq=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Hi(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Hi(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function kq(e,t){return C2(e,{i:2},t,t)}function Mq(e,t){var n=Tq(e);return n+8>e.length&&Hi(6,"invalid gzip data"),C2(e.subarray(n,-8),{i:2},new qi(Iq(e)),t)}function Rq(e,t){return C2(e.subarray(Eq(e,t),-4),{i:2},t,t)}function cS(e,t){return e[0]==31&&e[1]==139&&e[2]==8?Mq(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?kq(e,t):Rq(e,t)}var Aq=typeof TextDecoder<"u"&&new TextDecoder,zq=0;try{Aq.decode(Pq,{stream:!0}),zq=1}catch{}var y$=(e,t)=>e*_h(2,t),Cf=(e,t)=>Math.floor(e/_h(2,t)),h0=(e,t)=>y$(e.getUint16(t+1,!0),8)+e.getUint8(t),v$=(e,t)=>y$(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),Dq=(e,t,n,i,u)=>{if(e!==i.getUint8(u))return e-i.getUint8(u);const d=h0(i,u+1);if(t!==d)return t-d;const f=h0(i,u+4);return n!==f?n-f:0},Lq=(e,t,n,i)=>{const u=_$(e,t|128,n,i);return u?{z:t,x:n,y:i,offset:u[0],length:u[1],isDir:!0}:null},Pk=(e,t,n,i)=>{const u=_$(e,t,n,i);return u?{z:t,x:n,y:i,offset:u[0],length:u[1],isDir:!1}:null},_$=(e,t,n,i)=>{let u=0,d=e.byteLength/17-1;for(;u<=d;){const f=d+u>>1,a=Dq(t,n,i,e,f*17);if(a>0)u=f+1;else if(a<0)d=f-1;else return[v$(e,f*17+7),e.getUint32(f*17+13,!0)]}return null},$q=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,x$=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:h0(e,t*17+1),y:h0(e,t*17+4),offset:v$(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:n>>7===1}},Tk=e=>{const t=[],n=new DataView(e);for(let i=0;i<n.byteLength/17;i++)t.push(x$(n,i));return Oq(t)},Oq=e=>{e.sort($q);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++){const u=e[i];let d=u.z;u.isDir&&(d=d|128),n[i*17]=d,n[i*17+1]=u.x&255,n[i*17+2]=u.x>>8&255,n[i*17+3]=u.x>>16&255,n[i*17+4]=u.y&255,n[i*17+5]=u.y>>8&255,n[i*17+6]=u.y>>16&255,n[i*17+7]=u.offset&255,n[i*17+8]=Cf(u.offset,8)&255,n[i*17+9]=Cf(u.offset,16)&255,n[i*17+10]=Cf(u.offset,24)&255,n[i*17+11]=Cf(u.offset,32)&255,n[i*17+12]=Cf(u.offset,48)&255,n[i*17+13]=u.length&255,n[i*17+14]=u.length>>8&255,n[i*17+15]=u.length>>16&255,n[i*17+16]=u.length>>24&255}return t},Bq=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,i=x$(e,n-1);if(i.isDir){const u=i.z,d=t.z-u,f=Math.trunc(t.x/(1<<d)),a=Math.trunc(t.y/(1<<d));return{z:u,x:f,y:a}}return null};function Fq(e){return Go(this,null,function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),i=n.getUint32(4,!0),u=n.getUint16(8,!0),d=new TextDecoder("utf-8"),f=JSON.parse(d.decode(new DataView(t.data,10,i)));let a=0;f.compression==="gzip"&&(a=2);let b=0;"minzoom"in f&&(b=+f.minzoom);let C=0;"maxzoom"in f&&(C=+f.maxzoom);let I=0,k=0,M=0,R=-180,$=-85,G=180,ee=85;if(f.bounds){const j=f.bounds.split(",");R=+j[0],$=+j[1],G=+j[2],ee=+j[3]}if(f.center){const j=f.center.split(",");I=+j[0],k=+j[1],M=+j[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+i,rootDirectoryLength:u*17,jsonMetadataOffset:10,jsonMetadataLength:i,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:b,maxZoom:C,minLon:R,minLat:$,maxLon:G,maxLat:ee,centerZoom:M,centerLon:I,centerLat:k,etag:t.etag}})}function jq(e,t,n,i,u,d,f){return Go(this,null,function*(){let a=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(a=Tk(a));const b=Pk(new DataView(a),i,u,d);if(b){let k=(yield t.getBytes(b.offset,b.length,f)).data;const M=new DataView(k);return M.getUint8(0)===31&&M.getUint8(1)===139&&(k=cS(new Uint8Array(k))),{data:k}}const C=Bq(new DataView(a),{z:i,x:u,y:d});if(C){const I=Lq(new DataView(a),C.z,C.x,C.y);if(I){let k=yield n.getArrayBuffer(t,I.offset,I.length,e);e.specVersion===1&&(k=Tk(k));const M=Pk(new DataView(k),i,u,d);if(M){let $=(yield t.getBytes(M.offset,M.length,f)).data;const G=new DataView($);return G.getUint8(0)===31&&G.getUint8(1)===139&&($=cS(new Uint8Array($))),{data:$}}}}})}var b$={getHeader:Fq,getZxy:jq},Nq=e=>(t,n)=>{if(n instanceof AbortController)return e(t,n);const i=new AbortController;return e(t,i).then(u=>n(void 0,u.data,u.cacheControl||"",u.expires||""),u=>n(u)).catch(u=>n(u)),{cancel:()=>i.abort()}},Vq=class{constructor(e){this.tilev4=(t,n)=>Go(this,null,function*(){if(t.type==="json"){const M=t.url.substr(10);let R=this.tiles.get(M);if(R||(R=new Ik(M),this.tiles.set(M,R)),this.metadata)return{data:yield R.getTileJson(t.url)};const $=yield R.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:$.minZoom,maxzoom:$.maxZoom,bounds:[$.minLon,$.minLat,$.maxLon,$.maxLat]}}}const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),u=t.url.match(i);if(!u)throw new Error("Invalid PMTiles protocol URL");const d=u[1];let f=this.tiles.get(d);f||(f=new Ik(d),this.tiles.set(d,f));const a=u[2],b=u[3],C=u[4],I=yield f.getHeader(),k=yield f==null?void 0:f.getZxy(+a,+b,+C,n.signal);return k?{data:new Uint8Array(k.data),cacheControl:k.cacheControl,expires:k.expires}:I.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=Nq(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function Od(e,t){return(t>>>0)*4294967296+(e>>>0)}function Uq(e,t){const n=t.buf;let i=n[t.pos++],u=(i&112)>>4;if(i<128||(i=n[t.pos++],u|=(i&127)<<3,i<128)||(i=n[t.pos++],u|=(i&127)<<10,i<128)||(i=n[t.pos++],u|=(i&127)<<17,i<128)||(i=n[t.pos++],u|=(i&127)<<24,i<128)||(i=n[t.pos++],u|=(i&1)<<31,i<128))return Od(e,u);throw new Error("Expected varint not more than 10 bytes")}function Pf(e){const t=e.buf;let n=t[e.pos++],i=n&127;return n<128||(n=t[e.pos++],i|=(n&127)<<7,n<128)||(n=t[e.pos++],i|=(n&127)<<14,n<128)||(n=t[e.pos++],i|=(n&127)<<21,n<128)?i:(n=t[e.pos],i|=(n&15)<<28,Uq(i,e))}function Hq(e,t,n,i){if(i===0){n===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const u=t[0];t[0]=t[1],t[1]=u}}var Gq=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Wq(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>_h(2,e)-1||n>_h(2,e)-1)throw Error("tile x/y outside zoom level bounds");const i=Gq[e],u=_h(2,e);let d=0,f=0,a=0;const b=[t,n];let C=u/2;for(;C>0;)d=(b[0]&C)>0?1:0,f=(b[1]&C)>0?1:0,a+=C*C*(3*d^f),Hq(C,b,d,f),C=C/2;return i+a}function w$(e,t){return Go(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return cS(new Uint8Array(e));const n=new Response(e).body;if(!n)throw Error("Failed to read response stream");const i=n.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw Error("Compression method not supported")})}function Zq(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var qq=127;function Kq(e,t){let n=0,i=e.length-1;for(;n<=i;){const u=i+n>>1,d=t-e[u].tileId;if(d>0)n=u+1;else if(d<0)i=u-1;else return e[u]}return i>=0&&(e[i].runLength===0||t-e[i].tileId<e[i].runLength)?e[i]:null}var Xq=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let n="";"navigator"in globalThis&&(n=globalThis.navigator.userAgent||"");const i=n.indexOf("Windows")>-1,u=/Chrome|Chromium|Edg|OPR|Brave/.test(n);this.chromeWindowsNoCache=!1,i&&u&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n,i){return Go(this,null,function*(){let u,d;n?d=n:(u=new AbortController,d=u.signal);const f=new Headers(this.customHeaders);f.set("range",`bytes=${e}-${e+t-1}`);let a;this.mustReload?a="reload":this.chromeWindowsNoCache&&(a="no-store");let b=yield fetch(this.url,{signal:d,cache:a,headers:f});if(e===0&&b.status===416){const M=b.headers.get("Content-Range");if(!M||!M.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const R=+M.substr(8);b=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${R-1}`}})}let C=b.headers.get("Etag");if(C!=null&&C.startsWith("W/")&&(C=null),b.status===416||i&&C&&C!==i)throw this.mustReload=!0,new uS(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const I=b.headers.get("Content-Length");if(b.status===200&&(!I||+I>t))throw u&&u.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:C||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function ja(e,t){const n=e.getUint32(t+4,!0),i=e.getUint32(t+0,!0);return n*_h(2,32)+i}function Yq(e,t){const n=new DataView(e),i=n.getUint8(7);if(i>3)throw Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:ja(n,8),rootDirectoryLength:ja(n,16),jsonMetadataOffset:ja(n,24),jsonMetadataLength:ja(n,32),leafDirectoryOffset:ja(n,40),leafDirectoryLength:ja(n,48),tileDataOffset:ja(n,56),tileDataLength:ja(n,64),numAddressedTiles:ja(n,72),numTileEntries:ja(n,80),numTileContents:ja(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function S$(e){const t={buf:new Uint8Array(e),pos:0},n=Pf(t),i=[];let u=0;for(let d=0;d<n;d++){const f=Pf(t);i.push({tileId:u+f,offset:0,length:0,runLength:1}),u+=f}for(let d=0;d<n;d++)i[d].runLength=Pf(t);for(let d=0;d<n;d++)i[d].length=Pf(t);for(let d=0;d<n;d++){const f=Pf(t);f===0&&d>0?i[d].offset=i[d-1].offset+i[d-1].length:i[d].offset=f-1}return i}function Jq(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var uS=class extends Error{};function Qq(e,t){return Go(this,null,function*(){const n=yield e.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Jq(n.data)<3)return[yield b$.getHeader(e)];const u=n.data.slice(0,qq),d=Yq(u,n.etag),f=n.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),a=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,b=S$(yield t(f,d.internalCompression));return[d,[a,b.length,b]]})}function eK(e,t,n,i,u){return Go(this,null,function*(){const d=yield e.getBytes(n,i,void 0,u.etag),f=yield t(d.data,u.internalCompression),a=S$(f);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var tK=class{constructor(e=100,t=!0,n=w$){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=n}getHeader(e){return Go(this,null,function*(){const t=e.getKey(),n=this.cache.get(t);if(n)return n.lastUsed=this.counter++,yield n.data;const i=new Promise((u,d)=>{Qq(e,this.decompress).then(f=>{f[1]&&this.cache.set(f[1][0],{lastUsed:this.counter++,data:Promise.resolve(f[1][2])}),u(f[0]),this.prune()}).catch(f=>{d(f)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,n,i){return Go(this,null,function*(){const u=`${e.getKey()}|${i.etag||""}|${t}|${n}`,d=this.cache.get(u);if(d)return d.lastUsed=this.counter++,yield d.data;const f=new Promise((a,b)=>{eK(e,this.decompress,t,n,i).then(C=>{a(C),this.prune()}).catch(C=>{b(C)})});return this.cache.set(u,{lastUsed:this.counter++,data:f}),f})}getArrayBuffer(e,t,n,i){return Go(this,null,function*(){const u=`${e.getKey()}|${i.etag||""}|${t}|${n}`,d=this.cache.get(u);if(d)return d.lastUsed=this.counter++,yield d.data;const f=new Promise((a,b)=>{e.getBytes(t,n,void 0,i.etag).then(C=>{a(C.data),this.cache.has(u),this.prune()}).catch(C=>{b(C)})});return this.cache.set(u,{lastUsed:this.counter++,data:f}),f})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,i)=>{n.lastUsed<e&&(e=n.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return Go(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const n=new Promise((i,u)=>{this.getHeader(e).then(d=>{i(),this.invalidations.delete(t)}).catch(d=>{u(d)})});this.invalidations.set(t,n)})}},Ik=class{constructor(e,t,n){typeof e=="string"?this.source=new Xq(e):this.source=e,n?this.decompress=n:this.decompress=w$,t?this.cache=t:this.cache=new tK}getHeader(){return Go(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,i){return Go(this,null,function*(){const u=Wq(e,t,n),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return b$.getZxy(d,this.source,this.cache,e,t,n,i);if(e<d.minZoom||e>d.maxZoom)return;let f=d.rootDirectoryOffset,a=d.rootDirectoryLength;for(let b=0;b<=3;b++){const C=yield this.cache.getDirectory(this.source,f,a,d),I=Kq(C,u);if(I){if(I.runLength>0){const k=yield this.source.getBytes(d.tileDataOffset+I.offset,I.length,i,d.etag);return{data:yield this.decompress(k.data,d.tileCompression),cacheControl:k.cacheControl,expires:k.expires}}f=d.leafDirectoryOffset+I.offset,a=I.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,n,i){return Go(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,i)}catch(u){if(u instanceof uS)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,n,i);throw u}})}getMetadataAttempt(){return Go(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),n=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(n))})}getMetadata(){return Go(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof uS)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Go(this,null,function*(){const t=yield this.getHeader(),n=yield this.getMetadata(),i=Zq(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:n.vector_layers,attribution:n.attribution,description:n.description,name:n.name,version:n.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let Ek=!1;function P2(){if(Ek)return;const e=new Vq;c$.addProtocol("pmtiles",e.tile),Ek=!0}const C$=e=>{P2();const{mode:t="light",children:n,tileRootUrl:i}=e,u=S2[t];return le.jsxs(le.Fragment,{children:[le.jsx(qr,{id:"background",type:"background",paint:{"background-color":u.land}}),le.jsxs(qh,{id:"world",type:"vector",url:`pmtiles://${i}/world.pmtiles`,children:[le.jsx(qr,{"source-layer":"water",type:"fill",paint:{"fill-color":u.water}}),n,le.jsx(qr,{"source-layer":"states",type:"line",paint:{"line-color":u.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),le.jsx(qr,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":u.countryBorder,"line-width":2,"line-opacity":1}}),le.jsx(qr,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":u.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},dS=e=>(P2(),le.jsx(qh,{type:"vector",url:`pmtiles://${e.tileRootUrl}/${e.game}-contours.pmtiles`,children:le.jsx(qr,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));class x_ extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class Au{static checkArgument(t,n){if(!t)throw new Error(n)}static checkState(t,n){if(!t)throw new Error(n)}static checkExists(t,n){return Sn(t,n)}}var Wn=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e[e.Roadwork=17]="Roadwork",e[e.RailCrossing=18]="RailCrossing",e))(Wn||{});const km=new Set(Array.from({length:19},(e,t)=>t)),hS=e=>{const{game:t,tileRootUrl:n,visibleIcons:i=km,enableIconAutoHide:u=!0,mode:d="light"}=e,f=t==="ats"?Rk(t,e.dlcs??Em):Rk(t,e.dlcs??LZ),a=S2[d];return P2(),le.jsxs(qh,{id:t,type:"vector",url:`pmtiles://${n}/${t}.pmtiles`,children:[le.jsx(qr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],f],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":Xb(d),"fill-outline-color":["case",["==",["get","color"],e$.Road],a.mapAreaOutline,Xb(d)]}}),le.jsx(qr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],f],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":Xb(d)}}),le.jsx(rK,{game:t,tileRootUrl:n,mode:d,color:a.footprint}),le.jsx(qr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],f],paint:{"line-color":a.hiddenRoad,"line-width":1,"line-opacity":.7}}),le.jsx(qr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],f],layout:Ak,paint:{"line-color":lK(d),"line-gap-width":zk,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),le.jsx(qr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],f],layout:Ak,paint:{"line-color":sK(d),"line-width":zk}}),le.jsx(qr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":a.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),le.jsx(qr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":a.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),le.jsx(qr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":a.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),le.jsx(qr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":a.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),le.jsx(qr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Ns,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":a.ferryHalo,"text-color":a.ferryLabel}}),le.jsx(qr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Ns,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":a.trainHalo,"text-color":a.trainLabel}}),i.has(15)&&le.jsx(qr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:u?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],f],layout:jl(u,1,1.25,3.5)}),t==="ets2"&&i.has(16)&&le.jsx(qr,{id:"euro-road-overlays","source-layer":t,minzoom:u?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",kk]]]],layout:jl(u,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&i.has(16)&&le.jsx(qr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],f],layout:jl(u,.4,.75,1.25)}),t==="ats"&&i.has(16)&&le.jsx(qr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:u?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],f],layout:jl(u,.4,.75,1.25)}),t==="ats"&&i.has(16)&&le.jsx(qr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:u?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],f,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",kk]]]]],layout:jl(u,.4,.75,1.25)}),i.has(14)&&le.jsx(qr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:u?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],f],layout:{...Ns,"text-field":"{name}","text-allow-overlap":!u,"text-variable-anchor":Zd,"text-size":12,"icon-image":Kb,"icon-allow-overlap":!u,"icon-size":.6},paint:a.primaryTextPaint}),i.has(14)&&le.jsx(qr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:u?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],f],layout:{...Ns,"text-field":"{name}","text-allow-overlap":!u,"text-variable-anchor":Zd,"text-size":13,"icon-image":Kb,"icon-allow-overlap":!u,"icon-size":.6},paint:a.primaryTextPaint}),i.has(14)&&le.jsx(qr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:u?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],f],layout:{...Ns,"text-field":"{name}","text-allow-overlap":!u,"text-variable-anchor":Zd,"text-size":14,"icon-image":Kb,"icon-allow-overlap":!u,"icon-size":.8},paint:a.primaryTextPaint}),t==="ets2"&&i.has(14)&&le.jsx(qr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Ns,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Zd,"text-size":14},paint:a.primaryTextPaint}),t==="ats"&&i.has(14)&&le.jsx(qr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Ns,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":Zd,"text-size":["step",["zoom"],10,5,13]},paint:a.secondaryTextPaint}),pS(i)&&le.jsx(qr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:u?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],Mk(i),f],layout:jl(u,.6,1.25,2.5,{vertical:2,horizontal:2})}),pS(i)&&(i.has(8)||i.has(9)||i.has(5))&&le.jsx(qr,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:u?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["any",["in",["get","poiType"],["literal",["viewpoint","landmark"]]],["all",["==",["get","poiType"],"facility"],["==",["get","sprite"],"dealer_ico"]]],Mk(i),f],layout:{...jl(u,.6,1.25,2.5,{vertical:2,horizontal:2}),...Ns,"text-field":"{poiName}","text-allow-overlap":!u,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:a.primaryTextPaint}),(i.has(17)||i.has(18))&&le.jsx(qr,{id:t+"traffic-icons","source-layer":t,type:"symbol",minzoom:u?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"traffic"],iK(i),f],layout:jl(u,.6*.5,1.25*.5,2.5*.5,{vertical:2,horizontal:2})})]})},rK=({game:e,tileRootUrl:t,color:n,mode:i})=>le.jsxs(qh,{id:e+"footprints",type:"vector",url:`pmtiles://${t}/${e}-footprints.pmtiles`,children:[le.jsx(qr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":n,"fill-opacity":["step",["zoom"],1,9,.8]}}),le.jsx(qr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":n,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":i==="light"?.33:.67}})]});function jl(e,t,n,i,u={vertical:10,horizontal:30}){const d=["literal",[u.vertical,u.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,n,13,i]}}const Kb=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],nK=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],P$=[17,18],kk=["weigh_ico","toll_ico","agri_check","border_ico"];function pS(e){return nK.some(t=>e.has(t))}function oK(e){return P$.some(t=>e.has(t))}function iK(e){Au.checkArgument(oK(e));const t=[];return e.has(17)&&t.push("roadwork"),e.has(18)&&t.push("railcrossing"),["any",t.length>0?["in",["get","sprite"],["literal",t]]:!1]}function Mk(e){Au.checkArgument(pS(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const n=[];e.has(0)&&n.push("gas_ico"),e.has(4)&&n.push("service_ico"),e.has(13)&&n.push("weigh_station_ico"),e.has(5)&&n.push("dealer_ico"),e.has(12)&&n.push("garage_large_ico"),e.has(3)&&n.push("recruitment_ico"),e.has(2)&&n.push("parking_ico");const i=[];e.has(13)&&i.push("weigh_ico"),e.has(1)&&i.push("toll_ico"),e.has(10)&&i.push("agri_check"),e.has(11)&&i.push("border_ico");const u=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=n.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",n]]]:!1,f=i.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",i]]]:!1;return["any",u,d,f]}function Rk(e,t){if(e!=="ats")return["boolean",!0];const n=ng(t);return["in",["get","dlcGuard"],["literal",[...n]]]}const Zd=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Ns={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},Ak={"line-cap":"round","line-join":"bevel"},zk=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],T$={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},aK={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},sK=e=>["match",["get","roadType"],...Object.entries(T$[e]).flatMap(([t,[n]])=>[t,n]),"#f0f"],lK=e=>["match",["get","roadType"],...Object.entries(T$[e]).flatMap(([t,[,n]])=>[t,n]),"#b0b"],Xb=e=>["match",["get","color"],...Object.entries(aK[e]).flatMap(([t,n])=>[Number(t),n]),"#b0b"],I$="/extra-labels.geojson",E$="/ets2-villages.geojson";var xo=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.IA="IA",e.ID="ID",e.KS="KS",e.MO="MO",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(xo||{});const cK={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,IA:void 0,ID:void 0,KS:void 0,MO:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},uK=new Set(Object.keys(cK)),fS=e=>{const{game:t,enableAutoHide:n=!0,mode:i="light"}=e,u=t==="ats"?I$:E$,d=t==="ats"?["all",["boolean",["get","show"],!0],["in",["slice",["get","country"],-2],["literal",[...e.enabledStates??uK]]]]:["boolean",!0],f=S2[i];return le.jsx(qh,{id:`${t}-scenery-towns`,type:"geojson",data:u,children:le.jsx(qr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:n?7:0,filter:d,layout:{...Ns,"text-field":"{text}","text-allow-overlap":!n,"text-variable-anchor":Zd,"text-size":10.5},paint:f.primaryTextPaint})})},k$=new Proxy({version:8,sprite:"/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]},{get(e,t,n){var i;return t==="sprite"&&((i=e.sprite)!=null&&i.toString().match(/^\/\w/))?window.location.origin+e.sprite.toString():Reflect.get(e,t,n)}}),Dk=e=>e,dK=()=>{let e=Dk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Dk}}},hK=dK();function zu(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(i=>n.searchParams.append("args[]",i)),`Minified MUI error #${e}; visit ${n} for the full message.`}function Oh(e){if(typeof e!="string")throw new Error(zu(7));return e.charAt(0).toUpperCase()+e.slice(1)}function pK(e,t,n=void 0){const i={};for(const u in e){const d=e[u];let f="",a=!0;for(let b=0;b<d.length;b+=1){const C=d[b];C&&(f+=(a===!0?"":" ")+t(C),a=!1,n&&n[C]&&(f+=" "+n[C]))}i[u]=f}return i}var M$={exports:{}},yn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2=Symbol.for("react.transitional.element"),I2=Symbol.for("react.portal"),b_=Symbol.for("react.fragment"),w_=Symbol.for("react.strict_mode"),S_=Symbol.for("react.profiler"),C_=Symbol.for("react.consumer"),P_=Symbol.for("react.context"),T_=Symbol.for("react.forward_ref"),I_=Symbol.for("react.suspense"),E_=Symbol.for("react.suspense_list"),k_=Symbol.for("react.memo"),M_=Symbol.for("react.lazy"),fK=Symbol.for("react.view_transition"),mK=Symbol.for("react.client.reference");function Ta(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case T2:switch(e=e.type,e){case b_:case S_:case w_:case I_:case E_:case fK:return e;default:switch(e=e&&e.$$typeof,e){case P_:case T_:case M_:case k_:return e;case C_:return e;default:return t}}case I2:return t}}}yn.ContextConsumer=C_;yn.ContextProvider=P_;yn.Element=T2;yn.ForwardRef=T_;yn.Fragment=b_;yn.Lazy=M_;yn.Memo=k_;yn.Portal=I2;yn.Profiler=S_;yn.StrictMode=w_;yn.Suspense=I_;yn.SuspenseList=E_;yn.isContextConsumer=function(e){return Ta(e)===C_};yn.isContextProvider=function(e){return Ta(e)===P_};yn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===T2};yn.isForwardRef=function(e){return Ta(e)===T_};yn.isFragment=function(e){return Ta(e)===b_};yn.isLazy=function(e){return Ta(e)===M_};yn.isMemo=function(e){return Ta(e)===k_};yn.isPortal=function(e){return Ta(e)===I2};yn.isProfiler=function(e){return Ta(e)===S_};yn.isStrictMode=function(e){return Ta(e)===w_};yn.isSuspense=function(e){return Ta(e)===I_};yn.isSuspenseList=function(e){return Ta(e)===E_};yn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===b_||e===S_||e===w_||e===I_||e===E_||typeof e=="object"&&e!==null&&(e.$$typeof===M_||e.$$typeof===k_||e.$$typeof===P_||e.$$typeof===C_||e.$$typeof===T_||e.$$typeof===mK||e.getModuleId!==void 0)};yn.typeOf=Ta;M$.exports=yn;var R$=M$.exports;function Hs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function A$(e){if(L.isValidElement(e)||R$.isValidElementType(e)||!Hs(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=A$(e[n])}),t}function ea(e,t,n={clone:!0}){const i=n.clone?{...e}:e;return Hs(e)&&Hs(t)&&Object.keys(t).forEach(u=>{L.isValidElement(t[u])||R$.isValidElementType(t[u])?i[u]=t[u]:Hs(t[u])&&Object.prototype.hasOwnProperty.call(e,u)&&Hs(e[u])?i[u]=ea(e[u],t[u],n):n.clone?i[u]=Hs(t[u])?A$(t[u]):t[u]:i[u]=t[u]}),i}function em(e,t){return t?ea(e,t,{clone:!1}):e}function Lk(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(i=>i.startsWith("@container")).sort((i,u)=>{var f,a;const d=/min-width:\s*([0-9.]+)/;return+(((f=i.match(d))==null?void 0:f[1])||0)-+(((a=u.match(d))==null?void 0:a[1])||0)});return n.length?n.reduce((i,u)=>{const d=t[u];return delete i[u],i[u]=d,i},{...t}):t}function gK(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function yK(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,i,u]=n,d=Number.isNaN(+i)?i||0:+i;return e.containerQueries(u).up(d)}function vK(e){const t=(d,f)=>d.replace("@media",f?`@container ${f}`:"@container");function n(d,f){d.up=(...a)=>t(e.breakpoints.up(...a),f),d.down=(...a)=>t(e.breakpoints.down(...a),f),d.between=(...a)=>t(e.breakpoints.between(...a),f),d.only=(...a)=>t(e.breakpoints.only(...a),f),d.not=(...a)=>{const b=t(e.breakpoints.not(...a),f);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):b}}const i={},u=d=>(n(i,d),i);return n(u),{...e,containerQueries:u}}const R_={xs:0,sm:600,md:900,lg:1200,xl:1536},$k={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${R_[e]}px)`},_K={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:R_[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function tl(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const d=i.breakpoints||$k;return t.reduce((f,a,b)=>(f[d.up(d.keys[b])]=n(t[b]),f),{})}if(typeof t=="object"){const d=i.breakpoints||$k;return Object.keys(t).reduce((f,a)=>{if(gK(d.keys,a)){const b=yK(i.containerQueries?i:_K,a);b&&(f[b]=n(t[a],a))}else if(Object.keys(d.values||R_).includes(a)){const b=d.up(a);f[b]=n(t[a],a)}else{const b=a;f[b]=t[b]}return f},{})}return n(t)}function xK(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((i,u)=>{const d=e.up(u);return i[d]={},i},{}))||{}}function Ok(e,t){return e.reduce((n,i)=>{const u=n[i];return(!u||Object.keys(u).length===0)&&delete n[i],n},t)}function A_(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((u,d)=>u&&u[d]?u[d]:null,e);if(i!=null)return i}return t.split(".").reduce((i,u)=>i&&i[u]!=null?i[u]:null,e)}function p0(e,t,n,i=n){let u;return typeof e=="function"?u=e(n):Array.isArray(e)?u=e[n]||i:u=A_(e,n)||i,t&&(u=t(u,i,e)),u}function to(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:u}=e,d=f=>{if(f[t]==null)return null;const a=f[t],b=f.theme,C=A_(b,i)||{};return tl(f,a,k=>{let M=p0(C,u,k);return k===M&&typeof k=="string"&&(M=p0(C,u,`${t}${k==="default"?"":Oh(k)}`,k)),n===!1?M:{[n]:M}})};return d.propTypes={},d.filterProps=[t],d}function bK(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const wK={m:"margin",p:"padding"},SK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Bk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},CK=bK(e=>{if(e.length>2)if(Bk[e])e=Bk[e];else return[e];const[t,n]=e.split(""),i=wK[t],u=SK[n]||"";return Array.isArray(u)?u.map(d=>i+d):[i+u]}),E2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],k2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...E2,...k2];function ig(e,t,n,i){const u=A_(e,t,!0)??n;return typeof u=="number"||typeof u=="string"?d=>typeof d=="string"?d:typeof u=="string"?u.startsWith("var(")&&d===0?0:u.startsWith("var(")&&d===1?u:`calc(${d} * ${u})`:u*d:Array.isArray(u)?d=>{if(typeof d=="string")return d;const f=Math.abs(d),a=u[f];return d>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof u=="function"?u:()=>{}}function M2(e){return ig(e,"spacing",8)}function ag(e,t){return typeof t=="string"||t==null?t:e(t)}function PK(e,t){return n=>e.reduce((i,u)=>(i[u]=ag(t,n),i),{})}function TK(e,t,n,i){if(!t.includes(n))return null;const u=CK(n),d=PK(u,i),f=e[n];return tl(e,f,d)}function z$(e,t){const n=M2(e.theme);return Object.keys(e).map(i=>TK(e,t,i,n)).reduce(em,{})}function Hn(e){return z$(e,E2)}Hn.propTypes={};Hn.filterProps=E2;function Gn(e){return z$(e,k2)}Gn.propTypes={};Gn.filterProps=k2;function z_(...e){const t=e.reduce((i,u)=>(u.filterProps.forEach(d=>{i[d]=u}),i),{}),n=i=>Object.keys(i).reduce((u,d)=>t[d]?em(u,t[d](i)):u,{});return n.propTypes={},n.filterProps=e.reduce((i,u)=>i.concat(u.filterProps),[]),n}function ga(e){return typeof e!="number"?e:`${e}px solid`}function Ia(e,t){return to({prop:e,themeKey:"borders",transform:t})}const IK=Ia("border",ga),EK=Ia("borderTop",ga),kK=Ia("borderRight",ga),MK=Ia("borderBottom",ga),RK=Ia("borderLeft",ga),AK=Ia("borderColor"),zK=Ia("borderTopColor"),DK=Ia("borderRightColor"),LK=Ia("borderBottomColor"),$K=Ia("borderLeftColor"),OK=Ia("outline",ga),BK=Ia("outlineColor"),D_=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ig(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:ag(t,i)});return tl(e,e.borderRadius,n)}return null};D_.propTypes={};D_.filterProps=["borderRadius"];z_(IK,EK,kK,MK,RK,AK,zK,DK,LK,$K,D_,OK,BK);const L_=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ig(e.theme,"spacing",8),n=i=>({gap:ag(t,i)});return tl(e,e.gap,n)}return null};L_.propTypes={};L_.filterProps=["gap"];const $_=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ig(e.theme,"spacing",8),n=i=>({columnGap:ag(t,i)});return tl(e,e.columnGap,n)}return null};$_.propTypes={};$_.filterProps=["columnGap"];const O_=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ig(e.theme,"spacing",8),n=i=>({rowGap:ag(t,i)});return tl(e,e.rowGap,n)}return null};O_.propTypes={};O_.filterProps=["rowGap"];const FK=to({prop:"gridColumn"}),jK=to({prop:"gridRow"}),NK=to({prop:"gridAutoFlow"}),VK=to({prop:"gridAutoColumns"}),UK=to({prop:"gridAutoRows"}),HK=to({prop:"gridTemplateColumns"}),GK=to({prop:"gridTemplateRows"}),WK=to({prop:"gridTemplateAreas"}),ZK=to({prop:"gridArea"});z_(L_,$_,O_,FK,jK,NK,VK,UK,HK,GK,WK,ZK);function xh(e,t){return t==="grey"?t:e}const qK=to({prop:"color",themeKey:"palette",transform:xh}),KK=to({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:xh}),XK=to({prop:"backgroundColor",themeKey:"palette",transform:xh});z_(qK,KK,XK);function Ki(e){return e<=1&&e!==0?`${e*100}%`:e}const YK=to({prop:"width",transform:Ki}),R2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var u,d,f,a,b;const i=((f=(d=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:d.values)==null?void 0:f[n])||R_[n];return i?((b=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Ki(n)}};return tl(e,e.maxWidth,t)}return null};R2.filterProps=["maxWidth"];const JK=to({prop:"minWidth",transform:Ki}),QK=to({prop:"height",transform:Ki}),eX=to({prop:"maxHeight",transform:Ki}),tX=to({prop:"minHeight",transform:Ki});to({prop:"size",cssProperty:"width",transform:Ki});to({prop:"size",cssProperty:"height",transform:Ki});const rX=to({prop:"boxSizing"});z_(YK,R2,JK,QK,eX,tX,rX);const B_={border:{themeKey:"borders",transform:ga},borderTop:{themeKey:"borders",transform:ga},borderRight:{themeKey:"borders",transform:ga},borderBottom:{themeKey:"borders",transform:ga},borderLeft:{themeKey:"borders",transform:ga},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ga},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:D_},color:{themeKey:"palette",transform:xh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:xh},backgroundColor:{themeKey:"palette",transform:xh},p:{style:Gn},pt:{style:Gn},pr:{style:Gn},pb:{style:Gn},pl:{style:Gn},px:{style:Gn},py:{style:Gn},padding:{style:Gn},paddingTop:{style:Gn},paddingRight:{style:Gn},paddingBottom:{style:Gn},paddingLeft:{style:Gn},paddingX:{style:Gn},paddingY:{style:Gn},paddingInline:{style:Gn},paddingInlineStart:{style:Gn},paddingInlineEnd:{style:Gn},paddingBlock:{style:Gn},paddingBlockStart:{style:Gn},paddingBlockEnd:{style:Gn},m:{style:Hn},mt:{style:Hn},mr:{style:Hn},mb:{style:Hn},ml:{style:Hn},mx:{style:Hn},my:{style:Hn},margin:{style:Hn},marginTop:{style:Hn},marginRight:{style:Hn},marginBottom:{style:Hn},marginLeft:{style:Hn},marginX:{style:Hn},marginY:{style:Hn},marginInline:{style:Hn},marginInlineStart:{style:Hn},marginInlineEnd:{style:Hn},marginBlock:{style:Hn},marginBlockStart:{style:Hn},marginBlockEnd:{style:Hn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:L_},rowGap:{style:O_},columnGap:{style:$_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ki},maxWidth:{style:R2},minWidth:{transform:Ki},height:{transform:Ki},maxHeight:{transform:Ki},minHeight:{transform:Ki},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function nX(...e){const t=e.reduce((i,u)=>i.concat(Object.keys(u)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function oX(e,t){return typeof e=="function"?e(t):e}function iX(){function e(n,i,u,d){const f={[n]:i,theme:u},a=d[n];if(!a)return{[n]:i};const{cssProperty:b=n,themeKey:C,transform:I,style:k}=a;if(i==null)return null;if(C==="typography"&&i==="inherit")return{[n]:i};const M=A_(u,C)||{};return k?k(f):tl(f,i,$=>{let G=p0(M,I,$);return $===G&&typeof $=="string"&&(G=p0(M,I,`${n}${$==="default"?"":Oh($)}`,$)),b===!1?G:{[b]:G}})}function t(n){const{sx:i,theme:u={},nested:d}=n||{};if(!i)return null;const f=u.unstable_sxConfig??B_;function a(b){let C=b;if(typeof b=="function")C=b(u);else if(typeof b!="object")return b;if(!C)return null;const I=xK(u.breakpoints),k=Object.keys(I);let M=I;return Object.keys(C).forEach(R=>{const $=oX(C[R],u);if($!=null)if(typeof $=="object")if(f[R])M=em(M,e(R,$,u,f));else{const G=tl({theme:u},$,ee=>({[R]:ee}));nX(G,$)?M[R]=t({sx:$,theme:u,nested:!0}):M=em(M,G)}else M=em(M,e(R,$,u,f))}),!d&&u.modularCssLayers?{"@layer sx":Lk(u,Ok(k,M))}:Lk(u,Ok(k,M))}return Array.isArray(i)?i.map(a):a(i)}return t}const Bh=iX();Bh.filterProps=["sx"];function aX(e,t){return Mv(e,t)}function sX(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const Fk=[];function Su(e){return Fk[0]=e,Lm(Fk)}const lX=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>({...n,[i.key]:i.val}),{})};function cX(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5,...u}=e,d=lX(t),f=Object.keys(d);function a(M){return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${n})`}function b(M){return`@media (max-width:${(typeof t[M]=="number"?t[M]:M)-i/100}${n})`}function C(M,R){const $=f.indexOf(R);return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${n}) and (max-width:${($!==-1&&typeof t[f[$]]=="number"?t[f[$]]:R)-i/100}${n})`}function I(M){return f.indexOf(M)+1<f.length?C(M,f[f.indexOf(M)+1]):a(M)}function k(M){const R=f.indexOf(M);return R===0?a(f[1]):R===f.length-1?b(f[R]):C(M,f[f.indexOf(M)+1]).replace("@media","@media not all and")}return{keys:f,values:d,up:a,down:b,between:C,only:I,not:k,unit:n,...u}}const uX={borderRadius:4};function D$(e=8,t=M2({spacing:e})){if(e.mui)return e;const n=(...i)=>(i.length===0?[1]:i).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return n.mui=!0,n}function dX(e,t){var i;const n=this;if(n.vars){if(!((i=n.colorSchemes)!=null&&i[e])||typeof n.getColorSchemeSelector!="function")return{};let u=n.getColorSchemeSelector(e);return u==="&"?t:((u.includes("data-")||u.includes("."))&&(u=`*:where(${u.replace(/\s*&$/,"")}) &`),{[u]:t})}return n.palette.mode===e?t:{}}function L$(e={},...t){const{breakpoints:n={},palette:i={},spacing:u,shape:d={},...f}=e,a=cX(n),b=D$(u);let C=ea({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:b,shape:{...uX,...d}},f);return C=vK(C),C.applyStyles=dX,C=t.reduce((I,k)=>ea(I,k),C),C.unstable_sxConfig={...B_,...f==null?void 0:f.unstable_sxConfig},C.unstable_sx=function(k){return Bh({sx:k,theme:this})},C}const hX={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function $$(e,t,n="Mui"){const i=hX[t];return i?`${n}-${i}`:`${hK.generate(e)}-${t}`}function pX(e,t,n="Mui"){const i={};return t.forEach(u=>{i[u]=$$(e,u,n)}),i}function O$(e){const{variants:t,...n}=e,i={variants:t,style:Su(n),isProcessed:!0};return i.style===n||t&&t.forEach(u=>{typeof u.style!="function"&&(u.style=Su(u.style))}),i}const fX=L$();function Yb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function vu(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function mX(e){return e?(t,n)=>n[e]:null}function gX(e,t,n){e.theme=_X(e.theme)?n:e.theme[t]||e.theme}function wv(e,t,n){const i=typeof t=="function"?t(e):t;if(Array.isArray(i))return i.flatMap(u=>wv(e,u,n));if(Array.isArray(i==null?void 0:i.variants)){let u;if(i.isProcessed)u=n?vu(i.style,n):i.style;else{const{variants:d,...f}=i;u=n?vu(Su(f),n):f}return B$(e,i.variants,[u],n)}return i!=null&&i.isProcessed?n?vu(Su(i.style),n):i.style:n?vu(Su(i),n):i}function B$(e,t,n=[],i=void 0){var d;let u;e:for(let f=0;f<t.length;f+=1){const a=t[f];if(typeof a.props=="function"){if(u??(u={...e,...e.ownerState,ownerState:e.ownerState}),!a.props(u))continue}else for(const b in a.props)if(e[b]!==a.props[b]&&((d=e.ownerState)==null?void 0:d[b])!==a.props[b])continue e;typeof a.style=="function"?(u??(u={...e,...e.ownerState,ownerState:e.ownerState}),n.push(i?vu(Su(a.style(u)),i):a.style(u))):n.push(i?vu(Su(a.style),i):a.style)}return n}function yX(e={}){const{themeId:t,defaultTheme:n=fX,rootShouldForwardProp:i=Yb,slotShouldForwardProp:u=Yb}=e;function d(a){gX(a,t,n)}return(a,b={})=>{sX(a,q=>q.filter(ce=>ce!==Bh));const{name:C,slot:I,skipVariantsResolver:k,skipSx:M,overridesResolver:R=mX(bX(I)),...$}=b,G=C&&C.startsWith("Mui")||I?"components":"custom",ee=k!==void 0?k:I&&I!=="Root"&&I!=="root"||!1,F=M||!1;let j=Yb;I==="Root"||I==="root"?j=i:I?j=u:xX(a)&&(j=void 0);const O=aX(a,{shouldForwardProp:j,label:vX(),...$}),ne=q=>{if(q.__emotion_real===q)return q;if(typeof q=="function")return function(he){return wv(he,q,he.theme.modularCssLayers?G:void 0)};if(Hs(q)){const ce=O$(q);return function(ze){return ce.variants?wv(ze,ce,ze.theme.modularCssLayers?G:void 0):ze.theme.modularCssLayers?vu(ce.style,G):ce.style}}return q},Y=(...q)=>{const ce=[],he=q.map(ne),ze=[];if(ce.push(d),C&&R&&ze.push(function(je){var Ge,Ue;const He=(Ue=(Ge=je.theme.components)==null?void 0:Ge[C])==null?void 0:Ue.styleOverrides;if(!He)return null;const De={};for(const Ze in He)De[Ze]=wv(je,He[Ze],je.theme.modularCssLayers?"theme":void 0);return R(je,De)}),C&&!ee&&ze.push(function(je){var De,Ge;const ot=je.theme,He=(Ge=(De=ot==null?void 0:ot.components)==null?void 0:De[C])==null?void 0:Ge.variants;return He?B$(je,He,[],je.theme.modularCssLayers?"theme":void 0):null}),F||ze.push(Bh),Array.isArray(he[0])){const Be=he.shift(),je=new Array(ce.length).fill(""),ot=new Array(ze.length).fill("");let He;He=[...je,...Be,...ot],He.raw=[...je,...Be.raw,...ot],ce.unshift(He)}const J=[...ce,...he,...ze],Ee=O(...J);return a.muiName&&(Ee.muiName=a.muiName),Ee};return O.withConfig&&(Y.withConfig=O.withConfig),Y}}function vX(e,t){return void 0}function _X(e){for(const t in e)return!1;return!0}function xX(e){return typeof e=="string"&&e.charCodeAt(0)>96}function bX(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function mS(e,t,n=!1){const i={...t};for(const u in e)if(Object.prototype.hasOwnProperty.call(e,u)){const d=u;if(d==="components"||d==="slots")i[d]={...e[d],...i[d]};else if(d==="componentsProps"||d==="slotProps"){const f=e[d],a=t[d];if(!a)i[d]=f||{};else if(!f)i[d]=a;else{i[d]={...a};for(const b in f)if(Object.prototype.hasOwnProperty.call(f,b)){const C=b;i[d][C]=mS(f[C],a[C],n)}}}else d==="className"&&n&&t.className?i.className=qn(e==null?void 0:e.className,t==null?void 0:t.className):d==="style"&&n&&t.style?i.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:i[d]===void 0&&(i[d]=e[d])}return i}function wX(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function A2(e,t=0,n=1){return wX(e,t,n)}function SX(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,u)=>u<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function dc(e){if(e.type)return e;if(e.charAt(0)==="#")return dc(SX(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(zu(9,e));let i=e.substring(t+1,e.length-1),u;if(n==="color"){if(i=i.split(" "),u=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(u))throw new Error(zu(10,u))}else i=i.split(",");return i=i.map(d=>parseFloat(d)),{type:n,values:i,colorSpace:u}}const CX=e=>{const t=dc(e);return t.values.slice(0,3).map((n,i)=>t.type.includes("hsl")&&i!==0?`${n}%`:n).join(" ")},$f=(e,t)=>{try{return CX(e)}catch{return e}};function F_(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return t.includes("rgb")?i=i.map((u,d)=>d<3?parseInt(u,10):u):t.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.includes("color")?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function F$(e){e=dc(e);const{values:t}=e,n=t[0],i=t[1]/100,u=t[2]/100,d=i*Math.min(u,1-u),f=(C,I=(C+n/30)%12)=>u-d*Math.max(Math.min(I-3,9-I,1),-1);let a="rgb";const b=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(a+="a",b.push(t[3])),F_({type:a,values:b})}function gS(e){e=dc(e);let t=e.type==="hsl"||e.type==="hsla"?dc(F$(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function PX(e,t){const n=gS(e),i=gS(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function TX(e,t){return e=dc(e),t=A2(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,F_(e)}function Zy(e,t,n){try{return TX(e,t)}catch{return e}}function z2(e,t){if(e=dc(e),t=A2(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return F_(e)}function mn(e,t,n){try{return z2(e,t)}catch{return e}}function D2(e,t){if(e=dc(e),t=A2(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return F_(e)}function gn(e,t,n){try{return D2(e,t)}catch{return e}}function IX(e,t=.15){return gS(e)>.5?z2(e,t):D2(e,t)}function qy(e,t,n){try{return IX(e,t)}catch{return e}}const EX=L.createContext(void 0);function kX(e){const{theme:t,name:n,props:i}=e;if(!t||!t.components||!t.components[n])return i;const u=t.components[n];return u.defaultProps?mS(u.defaultProps,i,t.components.mergeClassNameAndStyle):!u.styleOverrides&&!u.variants?mS(u,i,t.components.mergeClassNameAndStyle):i}function MX({props:e,name:t}){const n=L.useContext(EX);return kX({props:e,name:t,theme:{components:n}})}const jk={theme:void 0};function RX(e){let t,n;return function(u){let d=t;return(d===void 0||u.theme!==n)&&(jk.theme=u.theme,d=O$(e(jk)),t=d,n=u.theme),d}}function AX(e=""){function t(...i){if(!i.length)return"";const u=i[0];return typeof u=="string"&&!u.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${u}${t(...i.slice(1))})`:`, ${u}`}return(i,...u)=>`var(--${e?`${e}-`:""}${i}${t(...u)})`}const Nk=(e,t,n,i=[])=>{let u=e;t.forEach((d,f)=>{f===t.length-1?Array.isArray(u)?u[Number(d)]=n:u&&typeof u=="object"&&(u[d]=n):u&&typeof u=="object"&&(u[d]||(u[d]=i.includes(d)?[]:{}),u=u[d])})},zX=(e,t,n)=>{function i(u,d=[],f=[]){Object.entries(u).forEach(([a,b])=>{(!n||!n([...d,a]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?i(b,[...d,a],Array.isArray(b)?[...f,a]:f):t([...d,a],b,f))})}i(e)},DX=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>e.includes(i))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Jb(e,t){const{prefix:n,shouldSkipGeneratingVar:i}=t||{},u={},d={},f={};return zX(e,(a,b,C)=>{if((typeof b=="string"||typeof b=="number")&&(!i||!i(a,b))){const I=`--${n?`${n}-`:""}${a.join("-")}`,k=DX(a,b);Object.assign(u,{[I]:k}),Nk(d,a,`var(${I})`,C),Nk(f,a,`var(${I}, ${k})`,C)}},a=>a[0]==="vars"),{css:u,vars:d,varsWithDefaults:f}}function LX(e,t={}){const{getSelector:n=ee,disableCssColorScheme:i,colorSchemeSelector:u}=t,{colorSchemes:d={},components:f,defaultColorScheme:a="light",...b}=e,{vars:C,css:I,varsWithDefaults:k}=Jb(b,t);let M=k;const R={},{[a]:$,...G}=d;if(Object.entries(G||{}).forEach(([O,ne])=>{const{vars:Y,css:q,varsWithDefaults:ce}=Jb(ne,t);M=ea(M,ce),R[O]={css:q,vars:Y}}),$){const{css:O,vars:ne,varsWithDefaults:Y}=Jb($,t);M=ea(M,Y),R[a]={css:O,vars:ne}}function ee(O,ne){var q,ce;let Y=u;if(u==="class"&&(Y=".%s"),u==="data"&&(Y="[data-%s]"),u!=null&&u.startsWith("data-")&&!u.includes("%s")&&(Y=`[${u}="%s"]`),O){if(Y==="media")return e.defaultColorScheme===O?":root":{[`@media (prefers-color-scheme: ${((ce=(q=d[O])==null?void 0:q.palette)==null?void 0:ce.mode)||O})`]:{":root":ne}};if(Y)return e.defaultColorScheme===O?`:root, ${Y.replace("%s",String(O))}`:Y.replace("%s",String(O))}return":root"}return{vars:M,generateThemeVars:()=>{let O={...C};return Object.entries(R).forEach(([,{vars:ne}])=>{O=ea(O,ne)}),O},generateStyleSheets:()=>{var he,ze;const O=[],ne=e.defaultColorScheme||"light";function Y(J,Ee){Object.keys(Ee).length&&O.push(typeof J=="string"?{[J]:{...Ee}}:J)}Y(n(void 0,{...I}),I);const{[ne]:q,...ce}=R;if(q){const{css:J}=q,Ee=(ze=(he=d[ne])==null?void 0:he.palette)==null?void 0:ze.mode,Be=!i&&Ee?{colorScheme:Ee,...J}:{...J};Y(n(ne,{...Be}),Be)}return Object.entries(ce).forEach(([J,{css:Ee}])=>{var ot,He;const Be=(He=(ot=d[J])==null?void 0:ot.palette)==null?void 0:He.mode,je=!i&&Be?{colorScheme:Be,...Ee}:{...Ee};Y(n(J,{...je}),je)}),O}}}function $X(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const Mm={black:"#000",white:"#fff"},OX={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Bd={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Fd={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Tf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},jd={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Nd={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Vd={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function j$(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Mm.white,default:Mm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const BX=j$();function N$(){return{text:{primary:Mm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Mm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Vk=N$();function Uk(e,t,n,i){const u=i.light||i,d=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=D2(e.main,u):t==="dark"&&(e.dark=z2(e.main,d)))}function FX(e="light"){return e==="dark"?{main:jd[200],light:jd[50],dark:jd[400]}:{main:jd[700],light:jd[400],dark:jd[800]}}function jX(e="light"){return e==="dark"?{main:Bd[200],light:Bd[50],dark:Bd[400]}:{main:Bd[500],light:Bd[300],dark:Bd[700]}}function NX(e="light"){return e==="dark"?{main:Fd[500],light:Fd[300],dark:Fd[700]}:{main:Fd[700],light:Fd[400],dark:Fd[800]}}function VX(e="light"){return e==="dark"?{main:Nd[400],light:Nd[300],dark:Nd[700]}:{main:Nd[700],light:Nd[500],dark:Nd[900]}}function UX(e="light"){return e==="dark"?{main:Vd[400],light:Vd[300],dark:Vd[700]}:{main:Vd[800],light:Vd[500],dark:Vd[900]}}function HX(e="light"){return e==="dark"?{main:Tf[400],light:Tf[300],dark:Tf[700]}:{main:"#ed6c02",light:Tf[500],dark:Tf[900]}}function L2(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2,...u}=e,d=e.primary||FX(t),f=e.secondary||jX(t),a=e.error||NX(t),b=e.info||VX(t),C=e.success||UX(t),I=e.warning||HX(t);function k(G){return PX(G,Vk.text.primary)>=n?Vk.text.primary:BX.text.primary}const M=({color:G,name:ee,mainShade:F=500,lightShade:j=300,darkShade:O=700})=>{if(G={...G},!G.main&&G[F]&&(G.main=G[F]),!G.hasOwnProperty("main"))throw new Error(zu(11,ee?` (${ee})`:"",F));if(typeof G.main!="string")throw new Error(zu(12,ee?` (${ee})`:"",JSON.stringify(G.main)));return Uk(G,"light",j,i),Uk(G,"dark",O,i),G.contrastText||(G.contrastText=k(G.main)),G};let R;return t==="light"?R=j$():t==="dark"&&(R=N$()),ea({common:{...Mm},mode:t,primary:M({color:d,name:"primary"}),secondary:M({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:M({color:a,name:"error"}),warning:M({color:I,name:"warning"}),info:M({color:b,name:"info"}),success:M({color:C,name:"success"}),grey:OX,contrastThreshold:n,getContrastText:k,augmentColor:M,tonalOffset:i,...R},u)}function GX(e){const t={};return Object.entries(e).forEach(i=>{const[u,d]=i;typeof d=="object"&&(t[u]=`${d.fontStyle?`${d.fontStyle} `:""}${d.fontVariant?`${d.fontVariant} `:""}${d.fontWeight?`${d.fontWeight} `:""}${d.fontStretch?`${d.fontStretch} `:""}${d.fontSize||""}${d.lineHeight?`/${d.lineHeight} `:""}${d.fontFamily||""}`)}),t}function WX(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function ZX(e){return Math.round(e*1e5)/1e5}const Hk={textTransform:"uppercase"},Gk='"Roboto", "Helvetica", "Arial", sans-serif';function qX(e,t){const{fontFamily:n=Gk,fontSize:i=14,fontWeightLight:u=300,fontWeightRegular:d=400,fontWeightMedium:f=500,fontWeightBold:a=700,htmlFontSize:b=16,allVariants:C,pxToRem:I,...k}=typeof t=="function"?t(e):t,M=i/14,R=I||(ee=>`${ee/b*M}rem`),$=(ee,F,j,O,ne)=>({fontFamily:n,fontWeight:ee,fontSize:R(F),lineHeight:j,...n===Gk?{letterSpacing:`${ZX(O/F)}em`}:{},...ne,...C}),G={h1:$(u,96,1.167,-1.5),h2:$(u,60,1.2,-.5),h3:$(d,48,1.167,0),h4:$(d,34,1.235,.25),h5:$(d,24,1.334,0),h6:$(f,20,1.6,.15),subtitle1:$(d,16,1.75,.15),subtitle2:$(f,14,1.57,.1),body1:$(d,16,1.5,.15),body2:$(d,14,1.43,.15),button:$(f,14,1.75,.4,Hk),caption:$(d,12,1.66,.4),overline:$(d,12,2.66,1,Hk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ea({htmlFontSize:b,pxToRem:R,fontFamily:n,fontSize:i,fontWeightLight:u,fontWeightRegular:d,fontWeightMedium:f,fontWeightBold:a,...G},k,{clone:!1})}const KX=.2,XX=.14,YX=.12;function An(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${KX})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${XX})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${YX})`].join(",")}const JX=["none",An(0,2,1,-1,0,1,1,0,0,1,3,0),An(0,3,1,-2,0,2,2,0,0,1,5,0),An(0,3,3,-2,0,3,4,0,0,1,8,0),An(0,2,4,-1,0,4,5,0,0,1,10,0),An(0,3,5,-1,0,5,8,0,0,1,14,0),An(0,3,5,-1,0,6,10,0,0,1,18,0),An(0,4,5,-2,0,7,10,1,0,2,16,1),An(0,5,5,-3,0,8,10,1,0,3,14,2),An(0,5,6,-3,0,9,12,1,0,3,16,2),An(0,6,6,-3,0,10,14,1,0,4,18,3),An(0,6,7,-4,0,11,15,1,0,4,20,3),An(0,7,8,-4,0,12,17,2,0,5,22,4),An(0,7,8,-4,0,13,19,2,0,5,24,4),An(0,7,9,-4,0,14,21,2,0,5,26,4),An(0,8,9,-5,0,15,22,2,0,6,28,5),An(0,8,10,-5,0,16,24,2,0,6,30,5),An(0,8,11,-5,0,17,26,2,0,6,32,5),An(0,9,11,-5,0,18,28,2,0,7,34,6),An(0,9,12,-6,0,19,29,2,0,7,36,6),An(0,10,13,-6,0,20,31,3,0,8,38,7),An(0,10,13,-6,0,21,33,3,0,8,40,7),An(0,10,14,-6,0,22,35,3,0,8,42,7),An(0,11,14,-7,0,23,36,3,0,9,44,8),An(0,11,15,-7,0,24,38,3,0,9,46,8)],QX={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},eY={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Wk(e){return`${Math.round(e)}ms`}function tY(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function rY(e){const t={...QX,...e.easing},n={...eY,...e.duration};return{getAutoHeightDuration:tY,create:(u=["all"],d={})=>{const{duration:f=n.standard,easing:a=t.easeInOut,delay:b=0,...C}=d;return(Array.isArray(u)?u:[u]).map(I=>`${I} ${typeof f=="string"?f:Wk(f)} ${a} ${typeof b=="string"?b:Wk(b)}`).join(",")},...e,easing:t,duration:n}}const nY={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function oY(e){return Hs(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function V$(e={}){const t={...e};function n(i){const u=Object.entries(i);for(let d=0;d<u.length;d++){const[f,a]=u[d];!oY(a)||f.startsWith("unstable_")?delete i[f]:Hs(a)&&(i[f]={...a},n(i[f]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function yS(e={},...t){const{breakpoints:n,mixins:i={},spacing:u,palette:d={},transitions:f={},typography:a={},shape:b,...C}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(zu(20));const I=L2(d),k=L$(e);let M=ea(k,{mixins:WX(k.breakpoints,i),palette:I,shadows:JX.slice(),typography:qX(I,a),transitions:rY(f),zIndex:{...nY}});return M=ea(M,C),M=t.reduce((R,$)=>ea(R,$),M),M.unstable_sxConfig={...B_,...C==null?void 0:C.unstable_sxConfig},M.unstable_sx=function($){return Bh({sx:$,theme:this})},M.toRuntimeSource=V$,M}function iY(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const aY=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=iY(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function U$(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function H$(e){return e==="dark"?aY:[]}function sY(e){const{palette:t={mode:"light"},opacity:n,overlays:i,...u}=e,d=L2(t);return{palette:d,opacity:{...U$(d.mode),...n},overlays:i||H$(d.mode),...u}}function lY(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const cY=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],uY=e=>(t,n)=>{const i=e.rootSelector||":root",u=e.colorSchemeSelector;let d=u;if(u==="class"&&(d=".%s"),u==="data"&&(d="[data-%s]"),u!=null&&u.startsWith("data-")&&!u.includes("%s")&&(d=`[${u}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const f={};return cY(e.cssVarPrefix).forEach(a=>{f[a]=n[a],delete n[a]}),d==="media"?{[i]:n,"@media (prefers-color-scheme: dark)":{[i]:f}}:d?{[d.replace("%s",t)]:f,[`${i}, ${d.replace("%s",t)}`]:n}:{[i]:{...n,...f}}}if(d&&d!=="media")return`${i}, ${d.replace("%s",String(t))}`}else if(t){if(d==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[i]:n}};if(d)return d.replace("%s",String(t))}return i};function dY(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function ht(e,t,n){!e[t]&&n&&(e[t]=n)}function Of(e){return typeof e!="string"||!e.startsWith("hsl")?e:F$(e)}function js(e,t){`${t}Channel`in e||(e[`${t}Channel`]=$f(Of(e[t])))}function hY(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const us=e=>{try{return e()}catch{}},pY=(e="mui")=>AX(e);function Qb(e,t,n,i){if(!t)return;t=t===!0?{}:t;const u=i==="dark"?"dark":"light";if(!n){e[i]=sY({...t,palette:{mode:u,...t==null?void 0:t.palette}});return}const{palette:d,...f}=yS({...n,palette:{mode:u,...t==null?void 0:t.palette}});return e[i]={...t,palette:d,opacity:{...U$(u),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||H$(u)},f}function fY(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:i,disableCssColorScheme:u=!1,cssVarPrefix:d="mui",shouldSkipGeneratingVar:f=lY,colorSchemeSelector:a=n.light&&n.dark?"media":void 0,rootSelector:b=":root",...C}=e,I=Object.keys(n)[0],k=i||(n.light&&I!=="light"?"light":I),M=pY(d),{[k]:R,light:$,dark:G,...ee}=n,F={...ee};let j=R;if((k==="dark"&&!("dark"in n)||k==="light"&&!("light"in n))&&(j=!0),!j)throw new Error(zu(21,k));const O=Qb(F,j,C,k);$&&!F.light&&Qb(F,$,void 0,"light"),G&&!F.dark&&Qb(F,G,void 0,"dark");let ne={defaultColorScheme:k,...O,cssVarPrefix:d,colorSchemeSelector:a,rootSelector:b,getCssVar:M,colorSchemes:F,font:{...GX(O.typography),...O.font},spacing:hY(C.spacing)};Object.keys(ne.colorSchemes).forEach(ze=>{const J=ne.colorSchemes[ze].palette,Ee=Be=>{const je=Be.split("-"),ot=je[1],He=je[2];return M(Be,J[ot][He])};if(J.mode==="light"&&(ht(J.common,"background","#fff"),ht(J.common,"onBackground","#000")),J.mode==="dark"&&(ht(J.common,"background","#000"),ht(J.common,"onBackground","#fff")),dY(J,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),J.mode==="light"){ht(J.Alert,"errorColor",mn(J.error.light,.6)),ht(J.Alert,"infoColor",mn(J.info.light,.6)),ht(J.Alert,"successColor",mn(J.success.light,.6)),ht(J.Alert,"warningColor",mn(J.warning.light,.6)),ht(J.Alert,"errorFilledBg",Ee("palette-error-main")),ht(J.Alert,"infoFilledBg",Ee("palette-info-main")),ht(J.Alert,"successFilledBg",Ee("palette-success-main")),ht(J.Alert,"warningFilledBg",Ee("palette-warning-main")),ht(J.Alert,"errorFilledColor",us(()=>J.getContrastText(J.error.main))),ht(J.Alert,"infoFilledColor",us(()=>J.getContrastText(J.info.main))),ht(J.Alert,"successFilledColor",us(()=>J.getContrastText(J.success.main))),ht(J.Alert,"warningFilledColor",us(()=>J.getContrastText(J.warning.main))),ht(J.Alert,"errorStandardBg",gn(J.error.light,.9)),ht(J.Alert,"infoStandardBg",gn(J.info.light,.9)),ht(J.Alert,"successStandardBg",gn(J.success.light,.9)),ht(J.Alert,"warningStandardBg",gn(J.warning.light,.9)),ht(J.Alert,"errorIconColor",Ee("palette-error-main")),ht(J.Alert,"infoIconColor",Ee("palette-info-main")),ht(J.Alert,"successIconColor",Ee("palette-success-main")),ht(J.Alert,"warningIconColor",Ee("palette-warning-main")),ht(J.AppBar,"defaultBg",Ee("palette-grey-100")),ht(J.Avatar,"defaultBg",Ee("palette-grey-400")),ht(J.Button,"inheritContainedBg",Ee("palette-grey-300")),ht(J.Button,"inheritContainedHoverBg",Ee("palette-grey-A100")),ht(J.Chip,"defaultBorder",Ee("palette-grey-400")),ht(J.Chip,"defaultAvatarColor",Ee("palette-grey-700")),ht(J.Chip,"defaultIconColor",Ee("palette-grey-700")),ht(J.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ht(J.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ht(J.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ht(J.LinearProgress,"primaryBg",gn(J.primary.main,.62)),ht(J.LinearProgress,"secondaryBg",gn(J.secondary.main,.62)),ht(J.LinearProgress,"errorBg",gn(J.error.main,.62)),ht(J.LinearProgress,"infoBg",gn(J.info.main,.62)),ht(J.LinearProgress,"successBg",gn(J.success.main,.62)),ht(J.LinearProgress,"warningBg",gn(J.warning.main,.62)),ht(J.Skeleton,"bg",`rgba(${Ee("palette-text-primaryChannel")} / 0.11)`),ht(J.Slider,"primaryTrack",gn(J.primary.main,.62)),ht(J.Slider,"secondaryTrack",gn(J.secondary.main,.62)),ht(J.Slider,"errorTrack",gn(J.error.main,.62)),ht(J.Slider,"infoTrack",gn(J.info.main,.62)),ht(J.Slider,"successTrack",gn(J.success.main,.62)),ht(J.Slider,"warningTrack",gn(J.warning.main,.62));const Be=qy(J.background.default,.8);ht(J.SnackbarContent,"bg",Be),ht(J.SnackbarContent,"color",us(()=>J.getContrastText(Be))),ht(J.SpeedDialAction,"fabHoverBg",qy(J.background.paper,.15)),ht(J.StepConnector,"border",Ee("palette-grey-400")),ht(J.StepContent,"border",Ee("palette-grey-400")),ht(J.Switch,"defaultColor",Ee("palette-common-white")),ht(J.Switch,"defaultDisabledColor",Ee("palette-grey-100")),ht(J.Switch,"primaryDisabledColor",gn(J.primary.main,.62)),ht(J.Switch,"secondaryDisabledColor",gn(J.secondary.main,.62)),ht(J.Switch,"errorDisabledColor",gn(J.error.main,.62)),ht(J.Switch,"infoDisabledColor",gn(J.info.main,.62)),ht(J.Switch,"successDisabledColor",gn(J.success.main,.62)),ht(J.Switch,"warningDisabledColor",gn(J.warning.main,.62)),ht(J.TableCell,"border",gn(Zy(J.divider,1),.88)),ht(J.Tooltip,"bg",Zy(J.grey[700],.92))}if(J.mode==="dark"){ht(J.Alert,"errorColor",gn(J.error.light,.6)),ht(J.Alert,"infoColor",gn(J.info.light,.6)),ht(J.Alert,"successColor",gn(J.success.light,.6)),ht(J.Alert,"warningColor",gn(J.warning.light,.6)),ht(J.Alert,"errorFilledBg",Ee("palette-error-dark")),ht(J.Alert,"infoFilledBg",Ee("palette-info-dark")),ht(J.Alert,"successFilledBg",Ee("palette-success-dark")),ht(J.Alert,"warningFilledBg",Ee("palette-warning-dark")),ht(J.Alert,"errorFilledColor",us(()=>J.getContrastText(J.error.dark))),ht(J.Alert,"infoFilledColor",us(()=>J.getContrastText(J.info.dark))),ht(J.Alert,"successFilledColor",us(()=>J.getContrastText(J.success.dark))),ht(J.Alert,"warningFilledColor",us(()=>J.getContrastText(J.warning.dark))),ht(J.Alert,"errorStandardBg",mn(J.error.light,.9)),ht(J.Alert,"infoStandardBg",mn(J.info.light,.9)),ht(J.Alert,"successStandardBg",mn(J.success.light,.9)),ht(J.Alert,"warningStandardBg",mn(J.warning.light,.9)),ht(J.Alert,"errorIconColor",Ee("palette-error-main")),ht(J.Alert,"infoIconColor",Ee("palette-info-main")),ht(J.Alert,"successIconColor",Ee("palette-success-main")),ht(J.Alert,"warningIconColor",Ee("palette-warning-main")),ht(J.AppBar,"defaultBg",Ee("palette-grey-900")),ht(J.AppBar,"darkBg",Ee("palette-background-paper")),ht(J.AppBar,"darkColor",Ee("palette-text-primary")),ht(J.Avatar,"defaultBg",Ee("palette-grey-600")),ht(J.Button,"inheritContainedBg",Ee("palette-grey-800")),ht(J.Button,"inheritContainedHoverBg",Ee("palette-grey-700")),ht(J.Chip,"defaultBorder",Ee("palette-grey-700")),ht(J.Chip,"defaultAvatarColor",Ee("palette-grey-300")),ht(J.Chip,"defaultIconColor",Ee("palette-grey-300")),ht(J.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ht(J.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ht(J.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ht(J.LinearProgress,"primaryBg",mn(J.primary.main,.5)),ht(J.LinearProgress,"secondaryBg",mn(J.secondary.main,.5)),ht(J.LinearProgress,"errorBg",mn(J.error.main,.5)),ht(J.LinearProgress,"infoBg",mn(J.info.main,.5)),ht(J.LinearProgress,"successBg",mn(J.success.main,.5)),ht(J.LinearProgress,"warningBg",mn(J.warning.main,.5)),ht(J.Skeleton,"bg",`rgba(${Ee("palette-text-primaryChannel")} / 0.13)`),ht(J.Slider,"primaryTrack",mn(J.primary.main,.5)),ht(J.Slider,"secondaryTrack",mn(J.secondary.main,.5)),ht(J.Slider,"errorTrack",mn(J.error.main,.5)),ht(J.Slider,"infoTrack",mn(J.info.main,.5)),ht(J.Slider,"successTrack",mn(J.success.main,.5)),ht(J.Slider,"warningTrack",mn(J.warning.main,.5));const Be=qy(J.background.default,.98);ht(J.SnackbarContent,"bg",Be),ht(J.SnackbarContent,"color",us(()=>J.getContrastText(Be))),ht(J.SpeedDialAction,"fabHoverBg",qy(J.background.paper,.15)),ht(J.StepConnector,"border",Ee("palette-grey-600")),ht(J.StepContent,"border",Ee("palette-grey-600")),ht(J.Switch,"defaultColor",Ee("palette-grey-300")),ht(J.Switch,"defaultDisabledColor",Ee("palette-grey-600")),ht(J.Switch,"primaryDisabledColor",mn(J.primary.main,.55)),ht(J.Switch,"secondaryDisabledColor",mn(J.secondary.main,.55)),ht(J.Switch,"errorDisabledColor",mn(J.error.main,.55)),ht(J.Switch,"infoDisabledColor",mn(J.info.main,.55)),ht(J.Switch,"successDisabledColor",mn(J.success.main,.55)),ht(J.Switch,"warningDisabledColor",mn(J.warning.main,.55)),ht(J.TableCell,"border",mn(Zy(J.divider,1),.68)),ht(J.Tooltip,"bg",Zy(J.grey[700],.92))}js(J.background,"default"),js(J.background,"paper"),js(J.common,"background"),js(J.common,"onBackground"),js(J,"divider"),Object.keys(J).forEach(Be=>{const je=J[Be];Be!=="tonalOffset"&&je&&typeof je=="object"&&(je.main&&ht(J[Be],"mainChannel",$f(Of(je.main))),je.light&&ht(J[Be],"lightChannel",$f(Of(je.light))),je.dark&&ht(J[Be],"darkChannel",$f(Of(je.dark))),je.contrastText&&ht(J[Be],"contrastTextChannel",$f(Of(je.contrastText))),Be==="text"&&(js(J[Be],"primary"),js(J[Be],"secondary")),Be==="action"&&(je.active&&js(J[Be],"active"),je.selected&&js(J[Be],"selected")))})}),ne=t.reduce((ze,J)=>ea(ze,J),ne);const Y={prefix:d,disableCssColorScheme:u,shouldSkipGeneratingVar:f,getSelector:uY(ne)},{vars:q,generateThemeVars:ce,generateStyleSheets:he}=LX(ne,Y);return ne.vars=q,Object.entries(ne.colorSchemes[ne.defaultColorScheme]).forEach(([ze,J])=>{ne[ze]=J}),ne.generateThemeVars=ce,ne.generateStyleSheets=he,ne.generateSpacing=function(){return D$(C.spacing,M2(this))},ne.getColorSchemeSelector=$X(a),ne.spacing=ne.generateSpacing(),ne.shouldSkipGeneratingVar=f,ne.unstable_sxConfig={...B_,...C==null?void 0:C.unstable_sxConfig},ne.unstable_sx=function(J){return Bh({sx:J,theme:this})},ne.toRuntimeSource=V$,ne}function Zk(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:L2({...n===!0?{}:n.palette,mode:t})})}function mY(e={},...t){const{palette:n,cssVariables:i=!1,colorSchemes:u=n?void 0:{light:!0},defaultColorScheme:d=n==null?void 0:n.mode,...f}=e,a=d||"light",b=u==null?void 0:u[a],C={...u,...n?{[a]:{...typeof b!="boolean"&&b,palette:n}}:void 0};if(i===!1){if(!("colorSchemes"in e))return yS(e,...t);let I=n;"palette"in e||C[a]&&(C[a]!==!0?I=C[a].palette:a==="dark"&&(I={mode:"dark"}));const k=yS({...e,palette:I},...t);return k.defaultColorScheme=a,k.colorSchemes=C,k.palette.mode==="light"&&(k.colorSchemes.light={...C.light!==!0&&C.light,palette:k.palette},Zk(k,"dark",C.dark)),k.palette.mode==="dark"&&(k.colorSchemes.dark={...C.dark!==!0&&C.dark,palette:k.palette},Zk(k,"light",C.light)),k}return!n&&!("light"in C)&&a==="light"&&(C.light=!0),fY({...f,colorSchemes:C,defaultColorScheme:a,...typeof i!="boolean"&&i},...t)}const gY=mY(),yY="$$material";function vY(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const _Y=e=>vY(e)&&e!=="classes",xY=yX({themeId:yY,defaultTheme:gY,rootShouldForwardProp:_Y}),bY=RX;function wY(e){return MX(e)}function SY(e){return $$("MuiSvgIcon",e)}pX("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const CY=e=>{const{color:t,fontSize:n,classes:i}=e,u={root:["root",t!=="inherit"&&`color${Oh(t)}`,`fontSize${Oh(n)}`]};return pK(u,SY,i)},PY=xY("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Oh(n.color)}`],t[`fontSize${Oh(n.fontSize)}`]]}})(bY(({theme:e})=>{var t,n,i,u,d,f,a,b,C,I,k,M,R,$;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(u=(t=e.transitions)==null?void 0:t.create)==null?void 0:u.call(t,"fill",{duration:(i=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:i.shorter}),variants:[{props:G=>!G.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((f=(d=e.typography)==null?void 0:d.pxToRem)==null?void 0:f.call(d,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((b=(a=e.typography)==null?void 0:a.pxToRem)==null?void 0:b.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((I=(C=e.typography)==null?void 0:C.pxToRem)==null?void 0:I.call(C,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,G])=>G&&G.main).map(([G])=>{var ee,F;return{props:{color:G},style:{color:(F=(ee=(e.vars??e).palette)==null?void 0:ee[G])==null?void 0:F.main}}}),{props:{color:"action"},style:{color:(M=(k=(e.vars??e).palette)==null?void 0:k.action)==null?void 0:M.active}},{props:{color:"disabled"},style:{color:($=(R=(e.vars??e).palette)==null?void 0:R.action)==null?void 0:$.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),vS=L.forwardRef(function(t,n){const i=wY({props:t,name:"MuiSvgIcon"}),{children:u,className:d,color:f="inherit",component:a="svg",fontSize:b="medium",htmlColor:C,inheritViewBox:I=!1,titleAccess:k,viewBox:M="0 0 24 24",...R}=i,$=L.isValidElement(u)&&u.type==="svg",G={...i,color:f,component:a,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:M,hasSvgAsChild:$},ee={};I||(ee.viewBox=M);const F=CY(G);return le.jsxs(PY,{as:a,className:qn(F.root,d),focusable:"false",color:C,"aria-hidden":k?void 0:!0,role:k?"img":void 0,ref:n,...ee,...R,...$&&u.props,ownerState:G,children:[$?u.props.children:u,k?le.jsx("title",{children:k}):null]})});vS.muiName="SvgIcon";function il(e,t){function n(i,u){return le.jsx(vS,{"data-testid":void 0,ref:u,...i,children:e})}return n.muiName=vS.muiName,L.memo(L.forwardRef(n))}const TY=il(le.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"})),IY=il(le.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"})),EY=il(le.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"})),kY=il(le.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"})),MY=il(le.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"})),RY=il(le.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"})),AY=il(le.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"})),zY=il(le.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"})),DY=il(le.jsx("path",{d:"M2 18v4h3v-2h5.5v2h3v-2H19v2h3v-4zM18 2H6c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1m-3 6H9V6h6z"})),G$={[Wn.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[Wn.Toll]:{iconName:"toll_ico",label:"Toll gate"},[Wn.Parking]:{iconName:"parking_ico",label:"Rest stop"},[Wn.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[Wn.Service]:{iconName:"service_ico",label:"Service"},[Wn.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[Wn.Port]:{iconName:"port_overlay",label:"Port"},[Wn.Train]:{iconName:"train_ico",label:"Train"},[Wn.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[Wn.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[Wn.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[Wn.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[Wn.Garage]:{iconName:"garage_large_ico",label:"Garage"},[Wn.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[Wn.CityNames]:{iconName:"city_names_ico",label:"City names"},[Wn.Company]:{iconName:"companies_ico",label:"Companies"},[Wn.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"},[Wn.Roadwork]:{iconName:"roadwork",label:"Roadwork"},[Wn.RailCrossing]:{iconName:"railcrossing",label:"Rail Crossing"}},qk=new Map(Object.entries(G$).map(([e,t])=>[Number(e),t.label])),Kk=new Map(Object.entries(zZ).map(([e,t])=>[Number(e),t]));function f0(e,t,n){return{selectedItems:e,onSelectAllToggle:i=>t(new Set(i?n:[])),onItemToggle:(i,u)=>{t(d=>{const f=new Set(d);return u?f.add(i):f.delete(i),f})}}}const W$=e=>{const t=L.useRef(null),[n,i]=L.useState(!1),[u,d]=L.useState(0);return Xa(()=>({onAdd:()=>Sn(t.current),onRemove:()=>Sn(t.current).remove()}),{position:"bottom-left"}),le.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[le.jsx(f_,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>i(!0),children:le.jsx(AY,{})}),le.jsx(bL,{open:n,onClose:()=>i(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:le.jsxs(PL,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[le.jsx(gL,{children:"Map Options"}),le.jsx(CL,{}),le.jsx(NE,{onChange:(f,a)=>d(Number(a)),children:le.jsxs(eG,{tabFlex:1,sx:{borderRadius:0},children:[le.jsx(jb,{children:"Icons"}),le.jsx(jb,{children:"ATS DLC"}),le.jsx(jb,{children:"Advanced"})]})}),le.jsx(mL,{sx:{overflowX:"hidden"},children:le.jsxs(NE,{value:u,children:[le.jsx(Nb,{sx:{p:0},value:0,children:le.jsx(Xk,{items:qk,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:f=>le.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${G$[f].iconName}.png`})})}),le.jsx(Nb,{sx:{p:0},value:1,children:le.jsx(Xk,{items:Kk,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),le.jsx(Nb,{sx:{p:0},value:2,children:le.jsx(BY,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),le.jsx(c2,{}),u===0&&le.jsx(LY,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===qk.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),u===1&&le.jsx(OY,{enableSelectAll:e.atsDlcs.selectedItems.size===Kk.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},LY=L.memo(e=>le.jsxs(Qm,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[le.jsx(fG,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:le.jsx(Lh,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var n;return(n=e.onAutoHidingToggle)==null?void 0:n.call(e,t.target.checked)}})}),le.jsx(Lh,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var n;return(n=e.onSelectAllToggle)==null?void 0:n.call(e,t.target.checked)}})]})),$Y=e=>le.jsx(Xm,{size:"lg",sx:{p:0,[`& .${wu.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,n])=>{var i;return le.jsxs($u,{children:[(i=e.icon)==null?void 0:i.call(e,t),le.jsx(Lh,{overlay:!0,label:n,checked:e.selectedItems.has(t),onChange:u=>e.onItemToggle(t,u.target.checked)})]},String(t))})}),Xk=L.memo($Y),OY=L.memo(e=>le.jsx(Qm,{direction:"row",justifyContent:"end",gap:1,mx:2,children:le.jsx(Lh,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var n;return(n=e.onSelectAllToggle)==null?void 0:n.call(e,t.target.checked)}})})),BY=e=>le.jsxs(Qm,{mx:2,children:[le.jsx(Ka,{mb:2,level:"title-lg",children:"Experimental Features"}),le.jsxs(lH,{children:[le.jsx(Lh,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),le.jsx(Ka,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),Z$=()=>{const e=L.useRef(null),{mode:t="light",setMode:n}=rC();return Xa(()=>({onAdd:()=>Sn(e.current),onRemove:()=>Sn(e.current).remove()})),le.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:le.jsxs(bj,{children:[le.jsx(u7,{slots:{root:f_},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:le.jsx(TY,{})}),le.jsxs(r7,{placement:"left",children:[le.jsx($u,{sticky:!0,children:le.jsx(Ka,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),le.jsxs(Fb,{onClick:()=>n("light"),selected:t==="light",children:[le.jsx(Yf,{children:le.jsx(EY,{})})," ","Light"]}),le.jsxs(Fb,{onClick:()=>n("dark"),selected:t==="dark",children:[le.jsx(Yf,{children:le.jsx(kY,{})})," ","Dark"]}),le.jsxs(Fb,{onClick:()=>n("system"),selected:t==="system",children:[le.jsx(Yf,{children:le.jsx(IY,{})})," ","Auto"]})]})]})})};function FY(e,t){return NY(e,t,(n,i,u,d)=>Math.sqrt(Math.pow(u-n,2)+Math.pow(d-i,2)))}function q$(e){let t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),i=Math.max(i,d[0]),n=Math.min(n,d[1]),u=Math.max(u,d[1])):(t=Math.min(t,d.x),i=Math.max(i,d.x),n=Math.min(n,d.y),u=Math.max(u,d.y));return[t,n,i,u]}function jY(e){const t=Math.PI*2;let n=e%t;return n=(n+t)%t,n<=Math.PI?n:n-t}function Yk(e){return jY(e*Math.PI/180)}function NY(e,t,n){let i,u;Array.isArray(e)?(Au.checkArgument(e.length>=2),i=e[0],u=e[1]):(i=e.x,u=e.y);let d,f;return Array.isArray(t)?(Au.checkArgument(t.length>=2),d=t[0],f=t[1]):(d=t.x,f=t.y),n(i,u,d,f)}function VY(e,t,n){let i=n.get(e);return i==null&&(i=t,n.set(e,i)),i}const UY=e=>{const{map:t,selectDecorator:n,onSelect:i}=e,[u,d]=L.useState([]);L.useEffect(()=>{const b=t==="usa"?"ats":"ets2";Promise.all([fetch(`${b}-achievements.json`).then(C=>C.json()),fetch(`${b}-achievements.geojson`).then(C=>C.json())]).then(([C,I])=>{const k=new Map;for(const R of I.features)VY(R.properties.name,[],k).push({coordinates:R.geometry.coordinates,dlcGuard:R.properties.dlcGuard});const M=new Set(I.features.map(R=>R.properties.name));d([...C.data.filter(R=>M.has(R.id)).map(R=>({...R,label:R.title,value:R.id,features:Sn(k.get(R.id))})).sort((R,$)=>R.label.localeCompare($.label))])},()=>console.error("could not load achievements json."))},[t]);const f=u.filter(b=>{if(t==="europe")return!0;const C=ng(e.visibleStateDlcs);return b.features.some(I=>C.has(I.dlcGuard))}),a=s_({stringify:b=>[b.label,b.desc].join(" ")});return le.jsx(Pm,{onChange:(b,C)=>i(C),placeholder:"Search achievements...",options:f,filterOptions:a,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:n,renderOption:(b,C)=>L.createElement(cL,{...b,key:C.value},le.jsx(Yf,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:le.jsx("img",{loading:"lazy",width:"48",height:"48",src:C.imgUrl,alt:""})}),le.jsxs(SL,{children:[le.jsx(Ka,{level:"title-md",children:C.label}),le.jsx(Ka,{level:"body-xs",children:C.desc})]}))},t)},HY=e=>{const{map:t,selectDecorator:n,onSelect:i}=e,[u,d]=L.useState([]);L.useEffect(()=>{Promise.all([fetch("cities.geojson").then(b=>b.json()),fetch(I$).then(b=>b.json()),fetch(E$).then(b=>b.json())]).then(([b,C,I])=>{d(WY(b,C,I))},()=>console.error("could not load cities/towns geojson."))},[]);const f=u.filter(b=>{const C=b.map===t;return t==="europe"?C:C&&e.visibleStates.has(b.stateCode)}),a=s_({stringify:b=>[b.state,b.label].join(" ")});return le.jsx(Pm,{onChange:(b,C)=>C&&i(C),placeholder:"Search cities...",options:f,filterOptions:a,groupBy:b=>b.state,blurOnSelect:!0,autoComplete:!0,renderGroup:GY,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:n},t)};function GY(e){return le.jsxs(L.Fragment,{children:[le.jsx(Ka,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),le.jsx(Xm,{children:e.children}),le.jsx(wL,{})]},e.key)}function WY(e,t,n){const i=[],u=new Map;for(const d of e.features)if(d.properties.type==="city")i.push(d);else if(d.properties.type==="country")u.set(d.properties.code,d.properties.name);else throw new Error;for(const d of t.features)d.properties.show===!1||d.properties.kind==="city"||d.properties.country==null||d.properties.text==null||i.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"usa",countryCode:d.properties.country.replace(/^..-/,""),name:d.properties.text}});for(const d of n.features)i.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"europe",countryCode:d.properties.state,name:d.properties.name}});return i.filter(d=>u.has(d.properties.countryCode)).map(({properties:d,geometry:f})=>({map:d.map,state:Sn(u.get(d.countryCode)),stateCode:d.countryCode,label:d.name,value:f.coordinates})).sort((d,f)=>d.state!==f.state?d.state.localeCompare(f.state):d.label.localeCompare(f.label))}var Jk=Object.prototype.toString,K$=function(t){var n=Jk.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Jk.call(t.callee)==="[object Function]"),i},e1,Qk;function ZY(){if(Qk)return e1;Qk=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=K$,u=Object.prototype.propertyIsEnumerable,d=!u.call({toString:null},"toString"),f=u.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=function(M){var R=M.constructor;return R&&R.prototype===M},C={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},I=function(){if(typeof window>"u")return!1;for(var M in window)try{if(!C["$"+M]&&t.call(window,M)&&window[M]!==null&&typeof window[M]=="object")try{b(window[M])}catch{return!0}}catch{return!0}return!1}(),k=function(M){if(typeof window>"u"||!I)return b(M);try{return b(M)}catch{return!1}};e=function(R){var $=R!==null&&typeof R=="object",G=n.call(R)==="[object Function]",ee=i(R),F=$&&n.call(R)==="[object String]",j=[];if(!$&&!G&&!ee)throw new TypeError("Object.keys called on a non-object");var O=f&&G;if(F&&R.length>0&&!t.call(R,0))for(var ne=0;ne<R.length;++ne)j.push(String(ne));if(ee&&R.length>0)for(var Y=0;Y<R.length;++Y)j.push(String(Y));else for(var q in R)!(O&&q==="prototype")&&t.call(R,q)&&j.push(String(q));if(d)for(var ce=k(R),he=0;he<a.length;++he)!(ce&&a[he]==="constructor")&&t.call(R,a[he])&&j.push(a[he]);return j}}return e1=e,e1}var qY=Array.prototype.slice,KY=K$,eM=Object.keys,Sv=eM?function(t){return eM(t)}:ZY(),tM=Object.keys;Sv.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(i){return KY(i)?tM(qY.call(i)):tM(i)})}else Object.keys=Sv;return Object.keys||Sv};var XY=Sv,Cv=Object.defineProperty||!1;if(Cv)try{Cv({},"a",{value:1})}catch{Cv=!1}var sg=Cv,xc=SyntaxError,Ir=TypeError,YY=Object.getOwnPropertyDescriptor,Pv=YY;if(Pv)try{Pv([],"length")}catch{Pv=null}var Kh=Pv,rM=sg,JY=xc,Ud=Ir,nM=Kh,X$=function(t,n,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Ud("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Ud("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Ud("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Ud("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Ud("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Ud("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,b=!!nM&&nM(t,n);if(rM)rM(t,n,{configurable:f===null&&b?b.configurable:!f,enumerable:u===null&&b?b.enumerable:!u,value:i,writable:d===null&&b?b.writable:!d});else if(a||!u&&!d&&!f)t[n]=i;else throw new JY("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},_S=sg,Y$=function(){return!!_S};Y$.hasArrayLengthDefineBug=function(){if(!_S)return null;try{return _S([],"length",{value:1}).length!==1}catch{return!0}};var $2=Y$,QY=XY,eJ=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",tJ=Object.prototype.toString,rJ=Array.prototype.concat,oM=X$,nJ=function(e){return typeof e=="function"&&tJ.call(e)==="[object Function]"},J$=$2(),oJ=function(e,t,n,i){if(t in e){if(i===!0){if(e[t]===n)return}else if(!nJ(i)||!i())return}J$?oM(e,t,n,!0):oM(e,t,n)},Q$=function(e,t){var n=arguments.length>2?arguments[2]:{},i=QY(t);eJ&&(i=rJ.call(i,Object.getOwnPropertySymbols(t)));for(var u=0;u<i.length;u+=1)oJ(e,i[u],t[i[u]],n[i[u]])};Q$.supportsDescriptors=!!J$;var e3=Q$,t3={exports:{}},iJ=Object,aJ=Error,sJ=EvalError,lJ=RangeError,cJ=ReferenceError,uJ=URIError,r3=Math.abs,n3=Math.floor,dJ=Math.max,hJ=Math.min,pJ=Math.pow,t1,iM;function o3(){return iM||(iM=1,t1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var u=42;t[n]=u;for(var d in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==u||a.enumerable!==!0)return!1}return!0}),t1}var r1,aM;function j_(){if(aM)return r1;aM=1;var e=typeof Symbol<"u"&&Symbol,t=o3();return r1=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},r1}var fJ="Function.prototype.bind called on incompatible ",mJ=Object.prototype.toString,gJ=Math.max,yJ="[object Function]",sM=function(t,n){for(var i=[],u=0;u<t.length;u+=1)i[u]=t[u];for(var d=0;d<n.length;d+=1)i[d+t.length]=n[d];return i},vJ=function(t,n){for(var i=[],u=n,d=0;u<t.length;u+=1,d+=1)i[d]=t[u];return i},_J=function(e,t){for(var n="",i=0;i<e.length;i+=1)n+=e[i],i+1<e.length&&(n+=t);return n},xJ=function(t){var n=this;if(typeof n!="function"||mJ.apply(n)!==yJ)throw new TypeError(fJ+n);for(var i=vJ(arguments,1),u,d=function(){if(this instanceof u){var I=n.apply(this,sM(i,arguments));return Object(I)===I?I:this}return n.apply(t,sM(i,arguments))},f=gJ(0,n.length-i.length),a=[],b=0;b<f;b++)a[b]="$"+b;if(u=Function("binder","return function ("+_J(a,",")+"){ return binder.apply(this,arguments); }")(d),n.prototype){var C=function(){};C.prototype=n.prototype,u.prototype=new C,C.prototype=null}return u},bJ=xJ,lg=Function.prototype.bind||bJ,O2=Function.prototype.call,B2=Function.prototype.apply,wJ=typeof Reflect<"u"&&Reflect&&Reflect.apply,SJ=lg,CJ=B2,PJ=O2,TJ=wJ,i3=TJ||SJ.call(PJ,CJ),IJ=lg,EJ=Ir,kJ=O2,MJ=i3,F2=function(t){if(t.length<1||typeof t[0]!="function")throw new EJ("a function is required");return MJ(IJ,kJ,t)},n1,lM;function RJ(){if(lM)return n1;lM=1;var e=F2,t=Kh,n;try{n=[].__proto__===Array.prototype}catch(f){if(!f||typeof f!="object"||!("code"in f)||f.code!=="ERR_PROTO_ACCESS")throw f}var i=!!n&&t&&t(Object.prototype,"__proto__"),u=Object,d=u.getPrototypeOf;return n1=i&&typeof i.get=="function"?e([i.get]):typeof d=="function"?function(a){return d(a==null?a:u(a))}:!1,n1}var o1,cM;function al(){if(cM)return o1;cM=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=lg;return o1=n.call(e,t),o1}var Nr,a3=iJ,AJ=aJ,zJ=sJ,DJ=lJ,LJ=cJ,Fh=xc,bh=Ir,$J=uJ,OJ=r3,BJ=n3,FJ=dJ,jJ=hJ,NJ=pJ,s3=Function,i1=function(e){try{return s3('"use strict"; return ('+e+").constructor;")()}catch{}},Rm=Kh,VJ=sg,a1=function(){throw new bh},UJ=Rm?function(){try{return arguments.callee,a1}catch{try{return Rm(arguments,"callee").get}catch{return a1}}}():a1,Hd=j_()(),HJ=RJ(),Mo=typeof Reflect=="function"&&Reflect.getPrototypeOf||a3.getPrototypeOf||HJ,l3=B2,cg=O2,qd={},GJ=typeof Uint8Array>"u"||!Mo?Nr:Mo(Uint8Array),Cu={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Nr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Nr:ArrayBuffer,"%ArrayIteratorPrototype%":Hd&&Mo?Mo([][Symbol.iterator]()):Nr,"%AsyncFromSyncIteratorPrototype%":Nr,"%AsyncFunction%":qd,"%AsyncGenerator%":qd,"%AsyncGeneratorFunction%":qd,"%AsyncIteratorPrototype%":qd,"%Atomics%":typeof Atomics>"u"?Nr:Atomics,"%BigInt%":typeof BigInt>"u"?Nr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Nr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Nr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Nr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":AJ,"%eval%":eval,"%EvalError%":zJ,"%Float32Array%":typeof Float32Array>"u"?Nr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Nr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Nr:FinalizationRegistry,"%Function%":s3,"%GeneratorFunction%":qd,"%Int8Array%":typeof Int8Array>"u"?Nr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Nr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Nr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Hd&&Mo?Mo(Mo([][Symbol.iterator]())):Nr,"%JSON%":typeof JSON=="object"?JSON:Nr,"%Map%":typeof Map>"u"?Nr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Hd||!Mo?Nr:Mo(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":a3,"%Object.getOwnPropertyDescriptor%":Rm,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Nr:Promise,"%Proxy%":typeof Proxy>"u"?Nr:Proxy,"%RangeError%":DJ,"%ReferenceError%":LJ,"%Reflect%":typeof Reflect>"u"?Nr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Nr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Hd||!Mo?Nr:Mo(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Nr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Hd&&Mo?Mo(""[Symbol.iterator]()):Nr,"%Symbol%":Hd?Symbol:Nr,"%SyntaxError%":Fh,"%ThrowTypeError%":UJ,"%TypedArray%":GJ,"%TypeError%":bh,"%Uint8Array%":typeof Uint8Array>"u"?Nr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Nr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Nr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Nr:Uint32Array,"%URIError%":$J,"%WeakMap%":typeof WeakMap>"u"?Nr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Nr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Nr:WeakSet,"%Function.prototype.call%":cg,"%Function.prototype.apply%":l3,"%Object.defineProperty%":VJ,"%Math.abs%":OJ,"%Math.floor%":BJ,"%Math.max%":FJ,"%Math.min%":jJ,"%Math.pow%":NJ};if(Mo)try{null.error}catch(e){var WJ=Mo(Mo(e));Cu["%Error.prototype%"]=WJ}var ZJ=function e(t){var n;if(t==="%AsyncFunction%")n=i1("async function () {}");else if(t==="%GeneratorFunction%")n=i1("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=i1("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var u=e("%AsyncGenerator%");u&&Mo&&(n=Mo(u.prototype))}return Cu[t]=n,n},uM={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ug=lg,m0=al(),qJ=ug.call(cg,Array.prototype.concat),KJ=ug.call(l3,Array.prototype.splice),dM=ug.call(cg,String.prototype.replace),g0=ug.call(cg,String.prototype.slice),XJ=ug.call(cg,RegExp.prototype.exec),YJ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,JJ=/\\(\\)?/g,QJ=function(t){var n=g0(t,0,1),i=g0(t,-1);if(n==="%"&&i!=="%")throw new Fh("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new Fh("invalid intrinsic syntax, expected opening `%`");var u=[];return dM(t,YJ,function(d,f,a,b){u[u.length]=a?dM(b,JJ,"$1"):f||d}),u},eQ=function(t,n){var i=t,u;if(m0(uM,i)&&(u=uM[i],i="%"+u[0]+"%"),m0(Cu,i)){var d=Cu[i];if(d===qd&&(d=ZJ(i)),typeof d>"u"&&!n)throw new bh("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:u,name:i,value:d}}throw new Fh("intrinsic "+t+" does not exist!")},si=function(t,n){if(typeof t!="string"||t.length===0)throw new bh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new bh('"allowMissing" argument must be a boolean');if(XJ(/^%?[^%]*%?$/,t)===null)throw new Fh("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=QJ(t),u=i.length>0?i[0]:"",d=eQ("%"+u+"%",n),f=d.name,a=d.value,b=!1,C=d.alias;C&&(u=C[0],KJ(i,qJ([0,1],C)));for(var I=1,k=!0;I<i.length;I+=1){var M=i[I],R=g0(M,0,1),$=g0(M,-1);if((R==='"'||R==="'"||R==="`"||$==='"'||$==="'"||$==="`")&&R!==$)throw new Fh("property names with quotes must have matching quotes");if((M==="constructor"||!k)&&(b=!0),u+="."+M,f="%"+u+"%",m0(Cu,f))a=Cu[f];else if(a!=null){if(!(M in a)){if(!n)throw new bh("base intrinsic for "+t+" exists, but the property is not available.");return}if(Rm&&I+1>=i.length){var G=Rm(a,M);k=!!G,k&&"get"in G&&!("originalValue"in G.get)?a=G.get:a=a[M]}else k=m0(a,M),a=a[M];k&&!b&&(Cu[f]=a)}}return a},tQ=si,hM=X$,rQ=$2(),pM=Kh,fM=Ir,nQ=tQ("%Math.floor%"),oQ=function(t,n){if(typeof t!="function")throw new fM("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||nQ(n)!==n)throw new fM("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],u=!0,d=!0;if("length"in t&&pM){var f=pM(t,"length");f&&!f.configurable&&(u=!1),f&&!f.writable&&(d=!1)}return(u||d||!i)&&(rQ?hM(t,"length",n,!0,!0):hM(t,"length",n)),t},iQ=lg,aQ=B2,sQ=i3,lQ=function(){return sQ(iQ,aQ,arguments)};(function(e){var t=oQ,n=sg,i=F2,u=lQ;e.exports=function(f){var a=i(arguments),b=f.length-(arguments.length-1);return t(a,1+(b>0?b:0),!0)},n?n(e.exports,"apply",{value:u}):e.exports.apply=u})(t3);var c3=t3.exports,Fu=function(t){return typeof t=="string"||typeof t=="symbol"},cQ=Ir,If=al(),uQ={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},ju=function(t){if(!t||typeof t!="object")return!1;for(var n in t)if(If(t,n)&&!uQ[n])return!1;var i=If(t,"[[Value]]")||If(t,"[[Writable]]"),u=If(t,"[[Get]]")||If(t,"[[Set]]");if(i&&u)throw new cQ("Property Descriptors may not be both accessor and data descriptors");return!0},dQ=Ir,mM=al(),hQ=ju,j2=function(t){if(typeof t>"u")return!1;if(!hQ(t))throw new dQ("Assertion failed: `Desc` must be a Property Descriptor");return!(!mM(t,"[[Get]]")&&!mM(t,"[[Set]]"))},s1,gM;function pQ(){return gM||(gM=1,s1=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),s1}var u3=si,fQ=u3("%Object.preventExtensions%",!0),mQ=u3("%Object.isExtensible%",!0),yM=pQ(),gQ=fQ?function(t){return!yM(t)&&mQ(t)}:function(t){return!yM(t)},d3=Function.prototype.toString,sh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,xS,Tv;if(typeof sh=="function"&&typeof Object.defineProperty=="function")try{xS=Object.defineProperty({},"length",{get:function(){throw Tv}}),Tv={},sh(function(){throw 42},null,xS)}catch(e){e!==Tv&&(sh=null)}else sh=null;var yQ=/^\s*class\b/,bS=function(t){try{var n=d3.call(t);return yQ.test(n)}catch{return!1}},l1=function(t){try{return bS(t)?!1:(d3.call(t),!0)}catch{return!1}},Iv=Object.prototype.toString,vQ="[object Object]",_Q="[object Function]",xQ="[object GeneratorFunction]",bQ="[object HTMLAllCollection]",wQ="[object HTML document.all class]",SQ="[object HTMLCollection]",CQ=typeof Symbol=="function"&&!!Symbol.toStringTag,PQ=!(0 in[,]),wS=function(){return!1};if(typeof document=="object"){var TQ=document.all;Iv.call(TQ)===Iv.call(document.all)&&(wS=function(t){if((PQ||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=Iv.call(t);return(n===bQ||n===wQ||n===SQ||n===vQ)&&t("")==null}catch{}return!1})}var h3=sh?function(t){if(wS(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{sh(t,null,xS)}catch(n){if(n!==Tv)return!1}return!bS(t)&&l1(t)}:function(t){if(wS(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(CQ)return l1(t);if(bS(t))return!1;var n=Iv.call(t);return n!==_Q&&n!==xQ&&!/^\[object HTML/.test(n)?!1:l1(t)},dg=h3,p3=function(t){return!!t},yi=function(t){return!!t&&(typeof t=="function"||typeof t=="object")},ds=al(),Ky=Ir,vM=dg,c1=p3,IQ=yi,EQ=function(t){if(!IQ(t))throw new Ky("ToPropertyDescriptor requires an object");var n={};if(ds(t,"enumerable")&&(n["[[Enumerable]]"]=c1(t.enumerable)),ds(t,"configurable")&&(n["[[Configurable]]"]=c1(t.configurable)),ds(t,"value")&&(n["[[Value]]"]=t.value),ds(t,"writable")&&(n["[[Writable]]"]=c1(t.writable)),ds(t,"get")){var i=t.get;if(typeof i<"u"&&!vM(i))throw new Ky("getter must be a function");n["[[Get]]"]=i}if(ds(t,"set")){var u=t.set;if(typeof u<"u"&&!vM(u))throw new Ky("setter must be a function");n["[[Set]]"]=u}if((ds(n,"[[Get]]")||ds(n,"[[Set]]"))&&(ds(n,"[[Value]]")||ds(n,"[[Writable]]")))throw new Ky("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return n},N2=Number.isNaN||function(t){return t!==t},_M=N2,V2=function(t,n){return t===n?t===0?1/t===1/n:!0:_M(t)&&_M(n)},f3=si,m3=F2,kQ=m3([f3("%String.prototype.indexOf%")]),Ai=function(t,n){var i=f3(t,!!n);return typeof i=="function"&&kQ(t,".prototype.")>-1?m3([i]):i},u1,xM;function U2(){if(xM)return u1;xM=1;var e=si,t=e("%Array%"),n=!t.isArray&&Ai("Object.prototype.toString");return u1=t.isArray||function(u){return n(u)==="[object Array]"},u1}var MQ=$2,bM=sg,g3=MQ.hasArrayLengthDefineBug(),RQ=g3&&U2(),AQ=Ai,zQ=AQ("Object.prototype.propertyIsEnumerable"),DQ=function(t,n,i,u,d,f){if(!bM){if(!t(f)||!f["[[Configurable]]"]||!f["[[Writable]]"]||d in u&&zQ(u,d)!==!!f["[[Enumerable]]"])return!1;var a=f["[[Value]]"];return u[d]=a,n(u[d],a)}return g3&&d==="length"&&"[[Value]]"in f&&RQ(u)&&u.length!==f["[[Value]]"]?(u.length=f["[[Value]]"],u.length===f["[[Value]]"]):(bM(u,d,i(f)),!0)},LQ=ju,$Q=function(t,n){return LQ(n)&&"[[Enumerable]]"in n&&"[[Configurable]]"in n&&(t.IsAccessorDescriptor(n)||t.IsDataDescriptor(n))},OQ=function(t){if(typeof t>"u")return t;var n={};return"[[Value]]"in t&&(n.value=t["[[Value]]"]),"[[Writable]]"in t&&(n.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(n.get=t["[[Get]]"]),"[[Set]]"in t&&(n.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(n.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(n.configurable=!!t["[[Configurable]]"]),n},BQ=Ir,FQ=ju,jQ=OQ,NQ=function(t){if(typeof t<"u"&&!FQ(t))throw new BQ("Assertion failed: `Desc` must be a Property Descriptor");return jQ(t)},VQ=Ir,wM=al(),UQ=ju,y3=function(t){if(typeof t>"u")return!1;if(!UQ(t))throw new VQ("Assertion failed: `Desc` must be a Property Descriptor");return!(!wM(t,"[[Value]]")&&!wM(t,"[[Writable]]"))},HQ=Ir,GQ=j2,WQ=y3,ZQ=ju,qQ=function(t){if(typeof t>"u")return!1;if(!ZQ(t))throw new HQ("Assertion failed: `Desc` must be a Property Descriptor");return!GQ(t)&&!WQ(t)},KQ=yi,XQ=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(KQ(t))return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"},YQ=XQ,JQ=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":YQ(t)},Gd=Ir,Ef=DQ,QQ=$Q,SM=ju,kf=NQ,cu=j2,Nl=y3,eee=qQ,tee=Fu,hs=V2,ree=JQ,nee=yi,oee=function(t,n,i,u,d){var f=ree(t);if(typeof t<"u"&&!nee(t))throw new Gd("Assertion failed: O must be undefined or an Object");if(!tee(n))throw new Gd("Assertion failed: P must be a Property Key");if(typeof i!="boolean")throw new Gd("Assertion failed: extensible must be a Boolean");if(!SM(u))throw new Gd("Assertion failed: Desc must be a Property Descriptor");if(typeof d<"u"&&!SM(d))throw new Gd("Assertion failed: current must be a Property Descriptor, or undefined");if(typeof d>"u")return i?f==="Undefined"?!0:cu(u)?Ef(Nl,hs,kf,t,n,u):Ef(Nl,hs,kf,t,n,{"[[Configurable]]":!!u["[[Configurable]]"],"[[Enumerable]]":!!u["[[Enumerable]]"],"[[Value]]":u["[[Value]]"],"[[Writable]]":!!u["[[Writable]]"]}):!1;if(!QQ({IsAccessorDescriptor:cu,IsDataDescriptor:Nl},d))throw new Gd("`current`, when present, must be a fully populated and valid Property Descriptor");if(!d["[[Configurable]]"]){if("[[Configurable]]"in u&&u["[[Configurable]]"]||"[[Enumerable]]"in u&&!hs(u["[[Enumerable]]"],d["[[Enumerable]]"])||!eee(u)&&!hs(cu(u),cu(d)))return!1;if(cu(d)){if("[[Get]]"in u&&!hs(u["[[Get]]"],d["[[Get]]"])||"[[Set]]"in u&&!hs(u["[[Set]]"],d["[[Set]]"]))return!1}else if(!d["[[Writable]]"]&&("[[Writable]]"in u&&u["[[Writable]]"]||"[[Value]]"in u&&!hs(u["[[Value]]"],d["[[Value]]"])))return!1}if(f!=="Undefined"){var a,b;return Nl(d)&&cu(u)?(a=("[[Configurable]]"in u?u:d)["[[Configurable]]"],b=("[[Enumerable]]"in u?u:d)["[[Enumerable]]"],Ef(Nl,hs,kf,t,n,{"[[Configurable]]":!!a,"[[Enumerable]]":!!b,"[[Get]]":("[[Get]]"in u?u:d)["[[Get]]"],"[[Set]]":("[[Set]]"in u?u:d)["[[Set]]"]})):cu(d)&&Nl(u)?(a=("[[Configurable]]"in u?u:d)["[[Configurable]]"],b=("[[Enumerable]]"in u?u:d)["[[Enumerable]]"],Ef(Nl,hs,kf,t,n,{"[[Configurable]]":!!a,"[[Enumerable]]":!!b,"[[Value]]":("[[Value]]"in u?u:d)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in u?u:d)["[[Writable]]"]})):Ef(Nl,hs,kf,t,n,u)}return!0},CM=Kh,PM=xc,d1=Ir,iee=ju,aee=j2,see=gQ,lee=Fu,cee=EQ,uee=V2,dee=oee,hee=yi,pee=function(t,n,i){if(!hee(t))throw new d1("Assertion failed: O must be an Object");if(!lee(n))throw new d1("Assertion failed: P must be a Property Key");if(!iee(i))throw new d1("Assertion failed: Desc must be a Property Descriptor");if(!CM){if(aee(i))throw new PM("This environment does not support accessor property descriptors.");var u=!(n in t)&&i["[[Writable]]"]&&i["[[Enumerable]]"]&&i["[[Configurable]]"]&&"[[Value]]"in i,d=n in t&&(!("[[Configurable]]"in i)||i["[[Configurable]]"])&&(!("[[Enumerable]]"in i)||i["[[Enumerable]]"])&&(!("[[Writable]]"in i)||i["[[Writable]]"])&&"[[Value]]"in i;if(u||d)return t[n]=i["[[Value]]"],uee(t[n],i["[[Value]]"]);throw new PM("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var f=CM(t,n),a=f&&cee(f),b=see(t);return dee(t,n,b,i,a)},TM=Ir,fee=Fu,mee=pee,gee=yi,yee=function(t,n,i){if(!gee(t))throw new TM("Assertion failed: Type(O) is not Object");if(!fee(n))throw new TM("Assertion failed: P is not a Property Key");var u={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":i,"[[Writable]]":!0};return mee(t,n,u)},h1=Ir,vee=yee,_ee=yi,xee=Fu,bee=function(t,n,i){if(!_ee(t))throw new h1("Assertion failed: Type(O) is not Object");if(!xee(n))throw new h1("Assertion failed: P is not a Property Key");var u=vee(t,n,i);if(!u)throw new h1("unable to create data property")},p1,IM;function H2(){return IM||(IM=1,p1=U2()),p1}var G2=function(t,n){for(var i=0;i<t.length;i+=1)n(t[i],i,t)};const wee={},See=Object.freeze(Object.defineProperty({__proto__:null,default:wee},Symbol.toStringTag,{value:"Module"})),Cee=CO(See);var f1,EM;function bc(){if(EM)return f1;EM=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,n=e&&t&&typeof t.get=="function"?t.get:null,i=e&&Map.prototype.forEach,u=typeof Set=="function"&&Set.prototype,d=Object.getOwnPropertyDescriptor&&u?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,f=u&&d&&typeof d.get=="function"?d.get:null,a=u&&Set.prototype.forEach,b=typeof WeakMap=="function"&&WeakMap.prototype,C=b?WeakMap.prototype.has:null,I=typeof WeakSet=="function"&&WeakSet.prototype,k=I?WeakSet.prototype.has:null,M=typeof WeakRef=="function"&&WeakRef.prototype,R=M?WeakRef.prototype.deref:null,$=Boolean.prototype.valueOf,G=Object.prototype.toString,ee=Function.prototype.toString,F=String.prototype.match,j=String.prototype.slice,O=String.prototype.replace,ne=String.prototype.toUpperCase,Y=String.prototype.toLowerCase,q=RegExp.prototype.test,ce=Array.prototype.concat,he=Array.prototype.join,ze=Array.prototype.slice,J=Math.floor,Ee=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Be=Object.getOwnPropertySymbols,je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ot=typeof Symbol=="function"&&typeof Symbol.iterator=="object",He=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ot||!0)?Symbol.toStringTag:null,De=Object.prototype.propertyIsEnumerable,Ge=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(H){return H.__proto__}:null);function Ue(H,oe){if(H===1/0||H===-1/0||H!==H||H&&H>-1e3&&H<1e3||q.call(/e/,oe))return oe;var xe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof H=="number"){var Ae=H<0?-J(-H):J(H);if(Ae!==H){var Fe=String(Ae),we=j.call(oe,Fe.length+1);return O.call(Fe,xe,"$&_")+"."+O.call(O.call(we,/([0-9]{3})/g,"$&_"),/_$/,"")}}return O.call(oe,xe,"$&_")}var Ze=Cee,at=Ze.custom,pt=ur(at)?at:null,ct={__proto__:null,double:'"',single:"'"},Ht={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};f1=function H(oe,xe,Ae,Fe){var we=xe||{};if(Lt(we,"quoteStyle")&&!Lt(ct,we.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Lt(we,"maxStringLength")&&(typeof we.maxStringLength=="number"?we.maxStringLength<0&&we.maxStringLength!==1/0:we.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var qe=Lt(we,"customInspect")?we.customInspect:!0;if(typeof qe!="boolean"&&qe!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Lt(we,"indent")&&we.indent!==null&&we.indent!=="	"&&!(parseInt(we.indent,10)===we.indent&&we.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Lt(we,"numericSeparator")&&typeof we.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var We=we.numericSeparator;if(typeof oe>"u")return"undefined";if(oe===null)return"null";if(typeof oe=="boolean")return oe?"true":"false";if(typeof oe=="string")return br(oe,we);if(typeof oe=="number"){if(oe===0)return 1/0/oe>0?"0":"-0";var $e=String(oe);return We?Ue(oe,$e):$e}if(typeof oe=="bigint"){var nt=String(oe)+"n";return We?Ue(oe,nt):nt}var Me=typeof we.depth>"u"?5:we.depth;if(typeof Ae>"u"&&(Ae=0),Ae>=Me&&Me>0&&typeof oe=="object")return tr(oe)?"[Array]":"[Object]";var mt=_e(we,Ae);if(typeof Fe>"u")Fe=[];else if(mr(Fe,oe)>=0)return"[Circular]";function wt(_t,$t,Or){if($t&&(Fe=ze.call(Fe),Fe.push($t)),Or){var xr={depth:we.depth};return Lt(we,"quoteStyle")&&(xr.quoteStyle=we.quoteStyle),H(_t,xr,Ae+1,Fe)}return H(_t,we,Ae+1,Fe)}if(typeof oe=="function"&&!st(oe)){var ge=Vt(oe),Re=te(oe,wt);return"[Function"+(ge?": "+ge:" (anonymous)")+"]"+(Re.length>0?" { "+he.call(Re,", ")+" }":"")}if(ur(oe)){var Ve=ot?O.call(String(oe),/^(Symbol\(.*\))_[^)]*$/,"$1"):je.call(oe);return typeof oe=="object"&&!ot?ar(Ve):Ve}if(jr(oe)){for(var ut="<"+Y.call(String(oe.nodeName)),vt=oe.attributes||[],It=0;It<vt.length;It++)ut+=" "+vt[It].name+"="+Dt(Nt(vt[It].value),"double",we);return ut+=">",oe.childNodes&&oe.childNodes.length&&(ut+="..."),ut+="</"+Y.call(String(oe.nodeName))+">",ut}if(tr(oe)){if(oe.length===0)return"[]";var bt=te(oe,wt);return mt&&!wr(bt)?"["+X(bt,mt)+"]":"[ "+he.call(bt,", ")+" ]"}if(Ct(oe)){var xt=te(oe,wt);return!("cause"in Error.prototype)&&"cause"in oe&&!De.call(oe,"cause")?"{ ["+String(oe)+"] "+he.call(ce.call("[cause]: "+wt(oe.cause),xt),", ")+" }":xt.length===0?"["+String(oe)+"]":"{ ["+String(oe)+"] "+he.call(xt,", ")+" }"}if(typeof oe=="object"&&qe){if(pt&&typeof oe[pt]=="function"&&Ze)return Ze(oe,{depth:Me-Ae});if(qe!=="symbol"&&typeof oe.inspect=="function")return oe.inspect()}if(kr(oe)){var Bt=[];return i&&i.call(oe,function(_t,$t){Bt.push(wt($t,oe,!0)+" => "+wt(_t,oe))}),yr("Map",n.call(oe),Bt,mt)}if(pr(oe)){var Je=[];return a&&a.call(oe,function(_t){Je.push(wt(_t,oe))}),yr("Set",f.call(oe),Je,mt)}if(Ur(oe))return Jt("WeakMap");if($r(oe))return Jt("WeakSet");if(Lr(oe))return Jt("WeakRef");if(qt(oe))return ar(wt(Number(oe)));if(gr(oe))return ar(wt(Ee.call(oe)));if(nr(oe))return ar($.call(oe));if(Mt(oe))return ar(wt(String(oe)));if(typeof window<"u"&&oe===window)return"{ [object Window] }";if(typeof globalThis<"u"&&oe===globalThis||typeof J1<"u"&&oe===J1)return"{ [object globalThis] }";if(!Tt(oe)&&!st(oe)){var Xt=te(oe,wt),zt=Ge?Ge(oe)===Object.prototype:oe instanceof Object||oe.constructor===Object,lr=oe instanceof Object?"":"null prototype",rt=!zt&&He&&Object(oe)===oe&&He in oe?j.call(Qt(oe),8,-1):lr?"Object":"",Ie=zt||typeof oe.constructor!="function"?"":oe.constructor.name?oe.constructor.name+" ":"",dt=Ie+(rt||lr?"["+he.call(ce.call([],rt||[],lr||[]),": ")+"] ":"");return Xt.length===0?dt+"{}":mt?dt+"{"+X(Xt,mt)+"}":dt+"{ "+he.call(Xt,", ")+" }"}return String(oe)};function Dt(H,oe,xe){var Ae=xe.quoteStyle||oe,Fe=ct[Ae];return Fe+H+Fe}function Nt(H){return O.call(String(H),/"/g,"&quot;")}function tr(H){return Qt(H)==="[object Array]"&&(!He||!(typeof H=="object"&&He in H))}function Tt(H){return Qt(H)==="[object Date]"&&(!He||!(typeof H=="object"&&He in H))}function st(H){return Qt(H)==="[object RegExp]"&&(!He||!(typeof H=="object"&&He in H))}function Ct(H){return Qt(H)==="[object Error]"&&(!He||!(typeof H=="object"&&He in H))}function Mt(H){return Qt(H)==="[object String]"&&(!He||!(typeof H=="object"&&He in H))}function qt(H){return Qt(H)==="[object Number]"&&(!He||!(typeof H=="object"&&He in H))}function nr(H){return Qt(H)==="[object Boolean]"&&(!He||!(typeof H=="object"&&He in H))}function ur(H){if(ot)return H&&typeof H=="object"&&H instanceof Symbol;if(typeof H=="symbol")return!0;if(!H||typeof H!="object"||!je)return!1;try{return je.call(H),!0}catch{}return!1}function gr(H){if(!H||typeof H!="object"||!Ee)return!1;try{return Ee.call(H),!0}catch{}return!1}var Kt=Object.prototype.hasOwnProperty||function(H){return H in this};function Lt(H,oe){return Kt.call(H,oe)}function Qt(H){return G.call(H)}function Vt(H){if(H.name)return H.name;var oe=F.call(ee.call(H),/^function\s*([\w$]+)/);return oe?oe[1]:null}function mr(H,oe){if(H.indexOf)return H.indexOf(oe);for(var xe=0,Ae=H.length;xe<Ae;xe++)if(H[xe]===oe)return xe;return-1}function kr(H){if(!n||!H||typeof H!="object")return!1;try{n.call(H);try{f.call(H)}catch{return!0}return H instanceof Map}catch{}return!1}function Ur(H){if(!C||!H||typeof H!="object")return!1;try{C.call(H,C);try{k.call(H,k)}catch{return!0}return H instanceof WeakMap}catch{}return!1}function Lr(H){if(!R||!H||typeof H!="object")return!1;try{return R.call(H),!0}catch{}return!1}function pr(H){if(!f||!H||typeof H!="object")return!1;try{f.call(H);try{n.call(H)}catch{return!0}return H instanceof Set}catch{}return!1}function $r(H){if(!k||!H||typeof H!="object")return!1;try{k.call(H,k);try{C.call(H,C)}catch{return!0}return H instanceof WeakSet}catch{}return!1}function jr(H){return!H||typeof H!="object"?!1:typeof HTMLElement<"u"&&H instanceof HTMLElement?!0:typeof H.nodeName=="string"&&typeof H.getAttribute=="function"}function br(H,oe){if(H.length>oe.maxStringLength){var xe=H.length-oe.maxStringLength,Ae="... "+xe+" more character"+(xe>1?"s":"");return br(j.call(H,0,oe.maxStringLength),oe)+Ae}var Fe=Ht[oe.quoteStyle||"single"];Fe.lastIndex=0;var we=O.call(O.call(H,Fe,"\\$1"),/[\x00-\x1f]/g,dr);return Dt(we,"single",oe)}function dr(H){var oe=H.charCodeAt(0),xe={8:"b",9:"t",10:"n",12:"f",13:"r"}[oe];return xe?"\\"+xe:"\\x"+(oe<16?"0":"")+ne.call(oe.toString(16))}function ar(H){return"Object("+H+")"}function Jt(H){return H+" { ? }"}function yr(H,oe,xe,Ae){var Fe=Ae?X(xe,Ae):he.call(xe,", ");return H+" ("+oe+") {"+Fe+"}"}function wr(H){for(var oe=0;oe<H.length;oe++)if(mr(H[oe],`
`)>=0)return!1;return!0}function _e(H,oe){var xe;if(H.indent==="	")xe="	";else if(typeof H.indent=="number"&&H.indent>0)xe=he.call(Array(H.indent+1)," ");else return null;return{base:xe,prev:he.call(Array(oe+1),xe)}}function X(H,oe){if(H.length===0)return"";var xe=`
`+oe.prev+oe.base;return xe+he.call(H,","+xe)+`
`+oe.prev}function te(H,oe){var xe=tr(H),Ae=[];if(xe){Ae.length=H.length;for(var Fe=0;Fe<H.length;Fe++)Ae[Fe]=Lt(H,Fe)?oe(H[Fe],H):""}var we=typeof Be=="function"?Be(H):[],qe;if(ot){qe={};for(var We=0;We<we.length;We++)qe["$"+we[We]]=we[We]}for(var $e in H)Lt(H,$e)&&(xe&&String(Number($e))===$e&&$e<H.length||ot&&qe["$"+$e]instanceof Symbol||(q.call(/[^\w$]/,$e)?Ae.push(oe($e,H)+": "+oe(H[$e],H)):Ae.push($e+": "+oe(H[$e],H))));if(typeof Be=="function")for(var nt=0;nt<we.length;nt++)De.call(H,we[nt])&&Ae.push("["+oe(we[nt])+"]: "+oe(H[we[nt]],H));return Ae}return f1}var m1,kM;function Pee(){if(kM)return m1;kM=1;var e=bc(),t=Ir,n=function(a,b,C){for(var I=a,k;(k=I.next)!=null;I=k)if(k.key===b)return I.next=k.next,C||(k.next=a.next,a.next=k),k},i=function(a,b){if(a){var C=n(a,b);return C&&C.value}},u=function(a,b,C){var I=n(a,b);I?I.value=C:a.next={key:b,next:a.next,value:C}},d=function(a,b){return a?!!n(a,b):!1},f=function(a,b){if(a)return n(a,b,!0)};return m1=function(){var b,C={assert:function(I){if(!C.has(I))throw new t("Side channel does not contain "+e(I))},delete:function(I){var k=b&&b.next,M=f(b,I);return M&&k&&k===M&&(b=void 0),!!M},get:function(I){return i(b,I)},has:function(I){return d(b,I)},set:function(I,k){b||(b={next:void 0}),u(b,I,k)}};return C},m1}var g1,MM;function v3(){if(MM)return g1;MM=1;var e=si,t=Ai,n=bc(),i=Ir,u=e("%Map%",!0),d=t("Map.prototype.get",!0),f=t("Map.prototype.set",!0),a=t("Map.prototype.has",!0),b=t("Map.prototype.delete",!0),C=t("Map.prototype.size",!0);return g1=!!u&&function(){var k,M={assert:function(R){if(!M.has(R))throw new i("Side channel does not contain "+n(R))},delete:function(R){if(k){var $=b(k,R);return C(k)===0&&(k=void 0),$}return!1},get:function(R){if(k)return d(k,R)},has:function(R){return k?a(k,R):!1},set:function(R,$){k||(k=new u),f(k,R,$)}};return M},g1}var y1,RM;function Tee(){if(RM)return y1;RM=1;var e=si,t=Ai,n=bc(),i=v3(),u=Ir,d=e("%WeakMap%",!0),f=t("WeakMap.prototype.get",!0),a=t("WeakMap.prototype.set",!0),b=t("WeakMap.prototype.has",!0),C=t("WeakMap.prototype.delete",!0);return y1=d?function(){var k,M,R={assert:function($){if(!R.has($))throw new u("Side channel does not contain "+n($))},delete:function($){if(d&&$&&(typeof $=="object"||typeof $=="function")){if(k)return C(k,$)}else if(i&&M)return M.delete($);return!1},get:function($){return d&&$&&(typeof $=="object"||typeof $=="function")&&k?f(k,$):M&&M.get($)},has:function($){return d&&$&&(typeof $=="object"||typeof $=="function")&&k?b(k,$):!!M&&M.has($)},set:function($,G){d&&$&&(typeof $=="object"||typeof $=="function")?(k||(k=new d),a(k,$,G)):i&&(M||(M=i()),M.set($,G))}};return R}:i,y1}var v1,AM;function Iee(){if(AM)return v1;AM=1;var e=Ir,t=bc(),n=Pee(),i=v3(),u=Tee(),d=u||i||n;return v1=function(){var a,b={assert:function(C){if(!b.has(C))throw new e("Side channel does not contain "+t(C))},delete:function(C){return!!a&&a.delete(C)},get:function(C){return a&&a.get(C)},has:function(C){return!!a&&a.has(C)},set:function(C,I){a||(a=d()),a.set(C,I)}};return b},v1}var _1,zM;function W2(){if(zM)return _1;zM=1;var e=al(),t=Iee()(),n=Ir,i={assert:function(u,d){if(!u||typeof u!="object"&&typeof u!="function")throw new n("`O` is not an object");if(typeof d!="string")throw new n("`slot` must be a string");if(t.assert(u),!i.has(u,d))throw new n("`"+d+"` is not present on `O`")},get:function(u,d){if(!u||typeof u!="object"&&typeof u!="function")throw new n("`O` is not an object");if(typeof d!="string")throw new n("`slot` must be a string");var f=t.get(u);return f&&f["$"+d]},has:function(u,d){if(!u||typeof u!="object"&&typeof u!="function")throw new n("`O` is not an object");if(typeof d!="string")throw new n("`slot` must be a string");var f=t.get(u);return!!f&&e(f,"$"+d)},set:function(u,d,f){if(!u||typeof u!="object"&&typeof u!="function")throw new n("`O` is not an object");if(typeof d!="string")throw new n("`slot` must be a string");var a=t.get(u);a||(a={},t.set(u,a)),a["$"+d]=f}};return Object.freeze&&Object.freeze(i),_1=i,_1}var x1,DM;function Eee(){if(DM)return x1;DM=1;var e={__proto__:null,foo:{}},t={__proto__:e}.foo===e.foo&&!(e instanceof Object);return x1=function(){return t},x1}var kee=si,LM=kee("%Object.create%",!0),$M=Ir,Mee=xc,Ree=H2(),Aee=G2,zee=yi,Dee=W2(),Lee=Eee()(),_3=function(t){if(t!==null&&!zee(t))throw new $M("Assertion failed: `proto` must be null or an object");var n=arguments.length<2?[]:arguments[1];if(!Ree(n))throw new $M("Assertion failed: `additionalInternalSlotsList` must be an Array");var i;if(LM)i=LM(t);else if(Lee)i={__proto__:t};else{if(t===null)throw new Mee("native Object.create support is required to create null objects");var u=function(){};u.prototype=t,i=new u}return n.length>0&&Aee(n,function(d){Dee.set(i,d,void 0)}),i},$ee=function(t){return t===0&&1/t===-1/0},x3=Number.MAX_SAFE_INTEGER||9007199254740991,b1,OM;function Oee(){return OM||(OM=1,b1=function(t,n){for(var i=0;i<t.length;i+=1)if(!n(t[i],i,t))return!1;return!0}),b1}var BM=Ir,Bee=Ai,FM=Bee("Array.prototype.push"),Fee=V2,b3=U2(),jee=Oee(),Nee=G2,jM=al(),Vee=function(e){return jM(e,"[[Key]]")&&jM(e,"[[Elements]]")&&b3(e["[[Elements]]"])},Uee=function(t,n,i){if(!b3(t)||t.length>0&&!jee(t,Vee))throw new BM("Assertion failed: `groups` must be a List of Records with [[Key]] and [[Elements]]");var u=0;if(Nee(t,function(f){if(Fee(f["[[Key]]"],n)){if(u+=1,u>1)throw new BM("Assertion failed: Exactly one element of groups meets this criterion");FM(f["[[Elements]]"],i)}}),u===0){var d={"[[Key]]":n,"[[Elements]]":[i]};FM(t,d)}},Hee=si,Gee=Ai,Wee=Ir,Zee=H2(),qee=Hee("%Reflect.apply%",!0)||Gee("Function.prototype.apply"),hg=function(t,n){var i=arguments.length>2?arguments[2]:[];if(!Zee(i))throw new Wee("Assertion failed: optional `argumentsList`, if provided, must be a List");return qee(t,n,i)},w1,NM;function w3(){return NM||(NM=1,w1=function(t){return typeof t=="number"&&t>=55296&&t<=56319}),w1}var S1,VM;function S3(){return VM||(VM=1,S1=function(t){return typeof t=="number"&&t>=56320&&t<=57343}),S1}var C1,UM;function Kee(){if(UM)return C1;UM=1;var e=si,t=Ir,n=e("%String.fromCharCode%"),i=w3(),u=S3();return C1=function(f,a){if(!i(f)||!u(a))throw new t("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return n(f)+n(a)},C1}var P1,HM;function Xee(){if(HM)return P1;HM=1;var e=Ir,t=Ai,n=w3(),i=S3(),u=Kee(),d=t("String.prototype.charAt"),f=t("String.prototype.charCodeAt");return P1=function(b,C){if(typeof b!="string")throw new e("Assertion failed: `string` must be a String");var I=b.length;if(C<0||C>=I)throw new e("Assertion failed: `position` must be >= 0, and < the length of `string`");var k=f(b,C),M=d(b,C),R=n(k),$=i(k);if(!R&&!$)return{"[[CodePoint]]":M,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if($||C+1===I)return{"[[CodePoint]]":M,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var G=f(b,C+1);return i(G)?{"[[CodePoint]]":u(k,G),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":M,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}},P1}var T1,GM;function Yee(){if(GM)return T1;GM=1;var e=N2;return T1=function(n){return(typeof n=="number"||typeof n=="bigint")&&!e(n)&&n!==1/0&&n!==-1/0},T1}var I1,WM;function Jee(){if(WM)return I1;WM=1;var e=r3,t=n3,n=N2,i=Yee();return I1=function(d){if(typeof d!="number"||n(d)||!i(d))return!1;var f=e(d);return t(f)===f},I1}var E1,ZM;function Qee(){if(ZM)return E1;ZM=1;var e=Xee(),t=Ir,n=Jee(),i=x3;return E1=function(d,f,a){if(typeof d!="string")throw new t("Assertion failed: `S` must be a String");if(!n(f)||f<0||f>i)throw new t("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof a!="boolean")throw new t("Assertion failed: `unicode` must be a Boolean");if(!a)return f+1;var b=d.length;if(f+1>=b)return f+1;var C=e(d,f);return f+C["[[CodeUnitCount]]"]},E1}var k1,qM;function C3(){if(qM)return k1;qM=1;var e=Ir;return k1=function(n,i){if(typeof i!="boolean")throw new e("Assertion failed: Type(done) is not Boolean");return{value:n,done:i}},k1}var KM=Ir,ete=bc(),tte=yi,rte=Fu,N_=function(t,n){if(!tte(t))throw new KM("Assertion failed: Type(O) is not Object");if(!rte(n))throw new KM("Assertion failed: P is not a Property Key, got "+ete(n));return t[n]},nte=Ir,ote=N_,ite=p3,ate=yi,P3=function(t){if(!ate(t))throw new nte("Assertion failed: Type(iterResult) is not Object");return ite(ote(t,"done"))},ste=Ir,lte=N_,cte=yi,T3=function(t){if(!cte(t))throw new ste("Assertion failed: Type(iterResult) is not Object");return lte(t,"value")},M1,XM;function ute(){if(XM)return M1;XM=1;var e=si,t=c3,n=xc,i=e("%Promise.resolve%",!0),u=i&&t(i);return M1=function(f,a){if(!u)throw new n("This environment does not support Promises.");return u(f,a)},M1}var R1,YM;function dte(){if(YM)return R1;YM=1;var e=si,t=xc,n=Ir,i=e("%Promise%",!0),u=Ai,d=C3(),f=P3,a=T3,b=ute(),C=yi,I=u("Promise.prototype.then",!0);return R1=function(M){if(!C(M))throw new n("Assertion failed: Type(O) is not Object");if(arguments.length>1)throw new t("although AsyncFromSyncIteratorContinuation should take a second argument, it is not used in this implementation");if(!i)throw new t("This environment does not support Promises.");return new i(function(R){var $=f(M),G=a(M),ee=b(i,G),F=function(j){return d(j,$)};R(I(ee,F))})},R1}var hte=Ir,pte=bc(),fte=Fu,mte=function(t,n){if(!fte(n))throw new hte("Assertion failed: P is not a Property Key, got "+pte(n));return t[n]},JM=Ir,gte=mte,yte=dg,vte=Fu,QM=bc(),Z2=function(t,n){if(!vte(n))throw new JM("Assertion failed: P is not a Property Key");var i=gte(t,n);if(i!=null){if(!yte(i))throw new JM(QM(n)+" is not a function: "+QM(i));return i}},A1=al(),V_=function(t){return!!t&&typeof t=="object"&&A1(t,"[[Iterator]]")&&A1(t,"[[NextMethod]]")&&A1(t,"[[Done]]")&&typeof t["[[Done]]"]=="boolean"},eR=Ir,tR=hg,_te=yi,xte=V_,I3=function(t){if(!xte(t))throw new eR("Assertion failed: `iteratorRecord` must be an Iterator Record");var n;if(arguments.length<2?n=tR(t["[[NextMethod]]"],t["[[Iterator]]"]):n=tR(t["[[NextMethod]]"],t["[[Iterator]]"],[arguments[1]]),!_te(n))throw new eR("iterator next must return an object");return n},z1,rR;function bte(){if(rR)return z1;rR=1;var e=si,t=xc,n=Ir,i=e("%Promise%",!0),u=dte(),d=hg,f=C3(),a=N_,b=Z2,C=I3,I=_3,k=yi,M=V_,R=W2(),$=e("%AsyncFromSyncIteratorPrototype%",!0)||{next:function(ee){if(!i)throw new t("This environment does not support Promises.");var F=this;R.assert(F,"[[SyncIteratorRecord]]");var j=arguments.length;return new i(function(O){var ne=R.get(F,"[[SyncIteratorRecord]]"),Y;j>0?Y=C(ne,ee):Y=C(ne),O(u(Y))})},return:function(){if(!i)throw new t("This environment does not support Promises.");var G=this;R.assert(G,"[[SyncIteratorRecord]]");var ee=arguments.length>0,F=ee?arguments[0]:void 0;return new i(function(j,O){var ne=R.get(G,"[[SyncIteratorRecord]]")["[[Iterator]]"],Y=b(ne,"return");if(typeof Y>"u"){var q=f(F,!0);d(j,void 0,[q]);return}var ce;if(ee?ce=d(Y,ne,[F]):ce=d(Y,ne),!k(ce)){d(O,void 0,[new n("Iterator `return` method returned a non-object value.")]);return}j(u(ce))})},throw:function(){if(!i)throw new t("This environment does not support Promises.");var G=this;R.assert(G,"[[SyncIteratorRecord]]");var ee=arguments.length>0,F=ee?arguments[0]:void 0;return new i(function(j,O){var ne=R.get(G,"[[SyncIteratorRecord]]")["[[Iterator]]"],Y=b(ne,"throw");if(typeof Y>"u"){d(O,void 0,[F]);return}var q;if(ee?q=d(Y,ne,[F]):q=d(Y,ne),!k(q)){d(O,void 0,[new n("Iterator `throw` method returned a non-object value.")]);return}j(u(q))})}};return z1=function(ee){if(!M(ee))throw new n("Assertion failed: `syncIteratorRecord` must be an Iterator Record");var F=I($);R.set(F,"[[SyncIteratorRecord]]",ee);var j=a(F,"next");return{"[[Iterator]]":F,"[[NextMethod]]":j,"[[Done]]":!1}},z1}var D1,nR;function wte(){if(nR)return D1;nR=1;var e=Ir,t=hg,n=N_,i=dg,u=yi;return D1=function(f,a){if(!i(a))throw new e("method must be a function");var b=t(a,f);if(!u(b))throw new e("iterator must return an object");var C=n(b,"next");return{"[[Iterator]]":b,"[[NextMethod]]":C,"[[Done]]":!1}},D1}var L1,oR;function q2(){if(oR)return L1;oR=1;var e=o3();return L1=function(){return e()&&!!Symbol.toStringTag},L1}var $1,iR;function Ste(){if(iR)return $1;iR=1;var e=Ai,t=e("String.prototype.valueOf"),n=function(a){try{return t(a),!0}catch{return!1}},i=e("Object.prototype.toString"),u="[object String]",d=q2()();return $1=function(a){return typeof a=="string"?!0:!a||typeof a!="object"?!1:d?n(a):i(a)===u},$1}var O1,aR;function Cte(){if(aR)return O1;aR=1;var e=j_()(),t=si,n=Ai,i=Ste(),u=t("%Symbol.iterator%",!0),d=n("String.prototype.slice"),f=t("%String%");return O1=function(b,C){var I;return e?I=b.GetMethod(C,u):b.IsArray(C)?I=function(){var k=-1,M=this;return{next:function(){return k+=1,{done:k>=M.length,value:M[k]}}}}:i(C)&&(I=function(){var k=0;return{next:function(){var M=b.AdvanceStringIndex(f(C),k,!0),R=d(C,k,M);return k=M,{done:M>C.length,value:R}}}}),I},O1}var Pte=si,B1=Ir,sR=Pte("%Symbol.asyncIterator%",!0),Tte=bc(),Ite=j_()(),Ete=Qee(),kte=bte(),lR=wte(),E3=Z2,Mte=H2(),Rte={AdvanceStringIndex:Ete,GetMethod:E3,IsArray:Mte},Ate=Cte(),zte=function(t,n){if(n!=="SYNC"&&n!=="ASYNC")throw new B1("Assertion failed: `kind` must be one of 'sync' or 'async', got "+Tte(n));var i;if(n==="ASYNC"&&Ite&&sR&&(i=E3(t,sR)),typeof i>"u"){var u=Ate(Rte,t);if(n==="ASYNC"){if(typeof u>"u")throw new B1("iterator method is `undefined`");var d=lR(t,u);return kte(d)}i=u}if(typeof i>"u")throw new B1("iterator method is `undefined`");return lR(t,i)},k3=xc,hc=W2(),pg=function e(t,n){if(!(this instanceof e))return new e(t,n);if(t!=="normal"&&t!=="break"&&t!=="continue"&&t!=="return"&&t!=="throw")throw new k3('Assertion failed: `type` must be one of "normal", "break", "continue", "return", or "throw"');hc.set(this,"[[Type]]",t),hc.set(this,"[[Value]]",n)};pg.prototype.type=function(){return hc.get(this,"[[Type]]")};pg.prototype.value=function(){return hc.get(this,"[[Value]]")};pg.prototype["?"]=function(){var t=hc.get(this,"[[Type]]"),n=hc.get(this,"[[Value]]");if(t==="throw")throw n;return n};pg.prototype["!"]=function(){var t=hc.get(this,"[[Type]]");if(t!=="normal")throw new k3('Assertion failed: Completion Record is not of type "normal"');return hc.get(this,"[[Value]]")};var M3=pg,Xy=Ir,Dte=hg,cR=M3,Lte=Z2,$te=dg,uR=yi,Ote=V_,Bte=function(t,n){if(!Ote(t))throw new Xy("Assertion failed: `iteratorRecord` must be an Iterator Record");if(!uR(t["[[Iterator]]"]))throw new Xy("Assertion failed: iteratorRecord.[[Iterator]] must be an Object");if(!$te(n)&&!(n instanceof cR))throw new Xy("Assertion failed: completion is not a thunk representing a Completion Record, nor a Completion Record instance");var i=n instanceof cR?function(){return n["?"]()}:n,u=t["[[Iterator]]"],d;try{d=Lte(u,"return")}catch(b){throw i(),i=null,b}if(typeof d>"u")return i();var f;try{f=Dte(d,u,[])}catch(b){throw i(),i=null,b}var a=i();if(i=null,!uR(f))throw new Xy("iterator .return must return an object");return a},Fte=Ir,jte=P3,Nte=I3,Vte=V_,Ute=function(t){if(!Vte(t))throw new Fte("Assertion failed: `iteratorRecord` must be an Iterator Record");var n=Nte(t),i=jte(n);return i===!0?!1:n},Hte=Ir,Gte=function(t){if(t==null)throw new Hte(arguments.length>0&&arguments[1]||"Cannot call method on "+t);return t},Wte=Gte,Zte=M3,qte=function(t){return new Zte("throw",t)},F1,dR;function Kte(){return dR||(dR=1,F1=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),F1}var j1,hR;function Xte(){if(hR)return j1;hR=1;var e=Ai,t=e("Date.prototype.getDay"),n=function(a){try{return t(a),!0}catch{return!1}},i=e("Object.prototype.toString"),u="[object Date]",d=q2()();return j1=function(a){return typeof a!="object"||a===null?!1:d?n(a):i(a)===u},j1}var Yy={exports:{}},N1,pR;function Yte(){if(pR)return N1;pR=1;var e=Ai,t=q2()(),n=al(),i=Kh,u;if(t){var d=e("RegExp.prototype.exec"),f={},a=function(){throw f},b={toString:a,valueOf:a};typeof Symbol.toPrimitive=="symbol"&&(b[Symbol.toPrimitive]=a),u=function(M){if(!M||typeof M!="object")return!1;var R=i(M,"lastIndex"),$=R&&n(R,"value");if(!$)return!1;try{d(M,b)}catch(G){return G===f}}}else{var C=e("Object.prototype.toString"),I="[object RegExp]";u=function(M){return!M||typeof M!="object"&&typeof M!="function"?!1:C(M)===I}}return N1=u,N1}var V1,fR;function Jte(){if(fR)return V1;fR=1;var e=Ai,t=Yte(),n=e("RegExp.prototype.exec"),i=Ir;return V1=function(d){if(!t(d))throw new i("`regex` must be a RegExp");return function(a){return n(d,a)!==null}},V1}var mR;function Qte(){if(mR)return Yy.exports;mR=1;var e=Ai,t=e("Object.prototype.toString"),n=j_()(),i=Jte();if(n){var u=e("Symbol.prototype.toString"),d=i(/^Symbol\(.*\)$/),f=function(b){return typeof b.valueOf()!="symbol"?!1:d(u(b))};Yy.exports=function(b){if(typeof b=="symbol")return!0;if(!b||typeof b!="object"||t(b)!=="[object Symbol]")return!1;try{return f(b)}catch{return!1}}}else Yy.exports=function(b){return!1};return Yy.exports}var U1,gR;function ere(){if(gR)return U1;gR=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=Kte(),n=h3,i=Xte(),u=Qte(),d=function(b,C){if(typeof b>"u"||b===null)throw new TypeError("Cannot call method on "+b);if(typeof C!="string"||C!=="number"&&C!=="string")throw new TypeError('hint must be "string" or "number"');var I=C==="string"?["toString","valueOf"]:["valueOf","toString"],k,M,R;for(R=0;R<I.length;++R)if(k=b[I[R]],n(k)&&(M=k.call(b),t(M)))return M;throw new TypeError("No default value")},f=function(b,C){var I=b[C];if(I!==null&&typeof I<"u"){if(!n(I))throw new TypeError(I+" returned for property "+String(C)+" of object "+b+" is not a function");return I}};return U1=function(b){if(t(b))return b;var C="default";arguments.length>1&&(arguments[1]===String?C="string":arguments[1]===Number&&(C="number"));var I;if(e&&(Symbol.toPrimitive?I=f(b,Symbol.toPrimitive):u(b)&&(I=Symbol.prototype.valueOf)),typeof I<"u"){var k=I.call(b,C);if(t(k))return k;throw new TypeError("unable to convert exotic object to primitive")}return C==="default"&&(i(b)||u(b))&&(C="string"),d(b,C==="default"?"number":C)},U1}var H1,yR;function tre(){if(yR)return H1;yR=1;var e=ere();return H1=function(n){return arguments.length>1?e(n,arguments[1]):e(n)},H1}var G1,vR;function rre(){if(vR)return G1;vR=1;var e=si,t=e("%String%"),n=Ir;return G1=function(u){if(typeof u=="symbol")throw new n("Cannot convert a Symbol value to a string");return t(u)},G1}var nre=si,ore=nre("%String%"),ire=tre(),are=rre(),sre=function(t){var n=ire(t,ore);return typeof n=="symbol"?n:are(n)},Jy=Ir,lre=$ee,cre=x3,ure=Uee,dre=hg,hre=zte,pre=dg,W1=Bte,fre=Ute,mre=T3,gre=Wte,Z1=qte,yre=sre,vre=function(t,n,i){if(i!=="PROPERTY"&&i!=="ZERO")throw new Jy('Assertion failed: `keyCoercion` must be `"PROPERTY"` or `"ZERO"`');if(gre(t),!pre(n))throw new Jy("callbackfn must be callable");for(var u=[],d=hre(t,"SYNC"),f=0;;){if(f>=cre){var a=Z1(new Jy("k must be less than 2 ** 53 - 1"));W1(d,a);return}var b=fre(d);if(!b)return u;var C=mre(b),I;try{I=dre(n,void 0,[C,f])}catch(k){W1(d,Z1(k));return}if(i==="PROPERTY")try{I=yre(I)}catch(k){W1(d,Z1(k));return}else{if(i!=="ZERO")throw new Jy("keyCoercion must be ~PROPERTY~ or ~ZERO~");lre(I)&&(I=0)}ure(u,I,C),f+=1}},_re=bee,xre=_3,bre=G2,wre=vre,R3=function(t,n){var i=wre(t,n,"PROPERTY"),u=xre(null);return bre(i,function(d){_re(u,d["[[Key]]"],d["[[Elements]]"])}),u},Sre=R3,A3=function(){return Object.groupBy||Sre},q1,_R;function Cre(){if(_R)return q1;_R=1;var e=e3,t=A3;return q1=function(){var i=t();return e(Object,{groupBy:i},{groupBy:function(){return Object.groupBy!==i}}),i},q1}var Pre=e3,Tre=c3,Ire=R3,z3=A3,Ere=z3(),kre=Cre(),D3=Tre(Ere,Object);Pre(D3,{getPolyfill:z3,implementation:Ire,shim:kre});var Mre=D3;const L3=CS(Mre),Rre=e=>{const{map:t,selectDecorator:n,onSelect:i}=e,[u,d]=L.useState([]);L.useEffect(()=>{Promise.all([fetch("sprites.json").then(b=>b.json()),fetch("companies.geojson").then(b=>b.json())]).then(([b,C])=>{const I=new Map(Object.entries(C.properties.tokenLut)),k=L3(C.features,R=>Sn(I.get(R.properties.token))),M=[];for(const R of Object.values(k)){const $=R[0].properties;if($.map!==e.map)continue;const G=b[$.token]??{height:0,width:0,x:0,y:0};b[$.token]==null&&console.warn("no sprite for company token:",$.token),M.push({label:I.get($.token)??$.token,token:$.token,spriteEntry:G,map:$.map,features:R.map(ee=>({coordinates:ee.geometry.coordinates,dlcGuard:ee.properties.dlcGuard}))})}M.sort((R,$)=>R.label.localeCompare($.label)),d(M)},b=>console.error("could not load company data.",b))},[t]);const f=u.filter(b=>{const C=b.map===t;if(t==="europe")return!0;const I=ng(e.visibleStateDlcs);return C&&b.features.some(k=>I.has(k.dlcGuard))}),a=s_({stringify:b=>b.label});return le.jsx(Pm,{onChange:(b,C)=>i(C),placeholder:"Search companies...",options:f,filterOptions:a,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:n,renderOption:(b,{token:C,spriteEntry:I,label:k})=>L.createElement(cL,{...b,key:C},le.jsx(Yf,{children:le.jsx(N9,{sx:{width:I.width+"px",height:I.height+"px",background:`url(sprites.png) -${I.x}px -${I.y}px`}})}),le.jsx(SL,{children:k}))},t)},SS=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"companies"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"companies"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],K1=(e,t)=>Au.checkExists(SS.find(n=>n.value.map===e&&n.value.search===t)),X1=({selected:e,onSelect:t})=>le.jsx(j7,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(n,i)=>{n!=null&&t(Sn(SS.find(u=>u.value===i)))},renderValue:n=>{if(n)return le.jsxs(Qm,{direction:"row",gap:1,sx:{alignItems:"center"},children:[le.jsx(Ka,{level:"body-xs",fontWeight:"lg",children:n.value.map==="usa"?"ATS":"ETS2"}),le.jsx(xR,{search:n.value.search})]})},children:Object.entries(L3(SS,({label:n})=>n)).map(([n,i])=>le.jsxs(Xm,{children:[le.jsx($u,{children:le.jsx(Ka,{level:"body-xs",fontWeight:"lg",children:n})}),i==null?void 0:i.map(u=>le.jsxs(I7,{value:u.value,sx:{px:"1em",textTransform:"capitalize"},children:[le.jsx(xR,{search:u.value.search}),u.value.search]},u.value.search))]},n))}),xR=({search:e})=>{switch(e){case"cities":return le.jsx(zY,{});case"companies":return le.jsx(DY,{});case"achievements":return le.jsx(MY,{});default:throw new x_(e)}},Ev={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},Are=e=>{const t=L.useRef(null);Xa(()=>({onAdd:()=>Sn(t.current),onRemove:()=>Sn(t.current).remove()}),{position:"top-left"});const{current:n}=w2(),[i,u]=L.useState(K1(localStorage.getItem("tm-map")==="europe"?"europe":"usa",Dre(localStorage.getItem("tm-search")))),d=tv.useCallback(ee=>{if(ee==null||(u(ee),localStorage.setItem("tm-map",ee.value.map),localStorage.setItem("tm-search",ee.value.search),!n||ee.value.map===i.value.map))return;const{longitude:F,latitude:j}=Ev[ee.value.map];n.easeTo({zoom:4,center:[F,j]})},[n,i]);L.useEffect(()=>{if(!n)return;const ee=()=>{const F=n.getCenter().lng,j=bR(F,Ev.usa.longitude),O=bR(F,Ev.europe.longitude);j<O&&i.value.map!=="usa"?(u(K1("usa",i.value.search)),localStorage.setItem("tm-map","usa")):O<j&&i.value.map!=="europe"&&(u(K1("europe",i.value.search)),localStorage.setItem("tm-map","europe"))};return n.on("moveend",ee),()=>void n.off("moveend",ee)},[n,i,u]);const f=tv.useCallback(ee=>{n==null||ee==null||(n.flyTo({curve:1,zoom:9,center:ee.value.map(F=>Number(F.toFixed(3)))}),n.once("moveend",F=>{const{lat:j,lng:O}=F.target.getCenter(),ne=F.target.getZoom(),Y=Number(F.target.getBearing().toFixed(1)),q=Math.round(F.target.getPitch());q?window.location.hash=`${ne}/${j.toFixed(3)}/${O.toFixed(3)}/${Y}/${q}`:Y?window.location.hash=`${ne}/${j.toFixed(3)}/${O.toFixed(3)}/${Y}`:window.location.hash=`${ne}/${j.toFixed(3)}/${O.toFixed(3)}`}))},[n]),[a,b]=L.useState([]),C=ee=>tv.useCallback((F,j={enableFitBounds:!0})=>{if(a.forEach(Y=>Y.remove()),ee(F),n==null||F==null)return;const O=ng(e.visibleStateDlcs),ne=F.features.filter(Y=>O.has(Y.dlcGuard)).map(({coordinates:Y})=>new __.Marker().setLngLat(Y).addTo(n.getMap()));if(b(ne),ne.length&&j.enableFitBounds){const Y=q$(ne.map(he=>he.getLngLat().toArray())),q=[Y[0],Y[1]],ce=[Y[2],Y[3]];n.fitBounds([q,ce],{curve:1,padding:100,maxZoom:9})}},[n,a,ee,b,e.visibleStateDlcs]),[I,k]=L.useState(null),M=C(k);L.useEffect(()=>{M(I,{enableFitBounds:!1})},[I,e.visibleStateDlcs]);const[R,$]=L.useState(null),G=C($);return L.useEffect(()=>{G(R,{enableFitBounds:!1})},[R,e.visibleStateDlcs]),le.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:le.jsx(Qm,{direction:"row",gap:1,children:le.jsx(zre,{selected:i.value,onMapSelect:d,onCitySelect:f,onCompanySelect:G,onAchievementSelect:M,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})},zre=({selected:e,onMapSelect:t,onCitySelect:n,onCompanySelect:i,onAchievementSelect:u,visibleStates:d,visibleStateDlcs:f})=>{switch(e.search){case"cities":return le.jsx(HY,{selectDecorator:le.jsx(X1,{selected:e,onSelect:t}),map:e.map,onSelect:n,visibleStates:d});case"companies":return le.jsx(Rre,{selectDecorator:le.jsx(X1,{selected:e,onSelect:t}),map:e.map,onSelect:i,visibleStateDlcs:f});case"achievements":return le.jsx(UY,{selectDecorator:le.jsx(X1,{selected:e,onSelect:t}),map:e.map,onSelect:u,visibleStateDlcs:f});default:throw new x_(e.search)}};function Dre(e){return e==="achievements"||e==="cities"||e==="companies"?e:"cities"}function bR(e,t){const n=Yk(e)/2,i=Yk(t)/2;return Math.abs(Math.sin(n)-Math.sin(i))}const Y1=(e,t)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},Lre=()=>{const e=L.useRef(null),[t,n]=L.useState(!1),[i,u]=L.useState(!1),[d,f]=L.useState(window.location.origin),a=w2();return Xa(()=>({onAdd:()=>Sn(e.current),onRemove:()=>Sn(e.current).remove()})),L.useEffect(()=>{const b=a.current;if(!b||!t)return;const C=()=>{const M=b.getCenter(),R=b.getBearing(),$=b.getPitch(),G=R||$?[R,$]:[],ee=b.getZoom(),F=I?"?"+new URLSearchParams({mlat:String(Y1(I.getLngLat().lat,2)),mlon:String(Y1(I.getLngLat().lng,2))}).toString():"",j="#"+[ee,M.lat,M.lng,...G].map(O=>Y1(O,2)).join("/");f(window.location.origin+F+j)};let I,k;if(i){I=new __.Marker,I.setLngLat(b.getCenter()).setDraggable(!0).addTo(b.getMap());let M=!0;k=()=>M&&I.setLngLat(b.getCenter()),I.on("dragend",()=>{M=!1,b.easeTo({center:I==null?void 0:I.getLngLat()}),b.once("moveend",()=>M=!0)})}return C(),b.on("moveend",C),k&&b.on("move",k),()=>{b.off("moveend",C),k&&b.off("move",k),I==null||I.remove()}},[a,t,i]),le.jsxs("div",{ref:e,children:[le.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:le.jsx(f_,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>n(!t),children:le.jsx(RY,{})})}),le.jsx(bL,{open:t,anchor:"right",onClose:()=>n(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:le.jsxs(PL,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[le.jsx(gL,{children:"Share"}),le.jsx(CL,{}),le.jsx(c2,{}),le.jsxs(mL,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[le.jsx(Ka,{children:"Share a link to this map"}),le.jsx(s9,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:b=>b.target.select(),value:d,endDecorator:le.jsx(dL,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard 🙁")),children:"Copy"})}),le.jsx(Lh,{label:"Include marker",checked:i,onChange:b=>u(b.target.checked)})]})]})})]})};function $3(e){return new Set([...e].map($re).concat(xo.CA))}function $re(e){switch(e){case ko.Arizona:return xo.AZ;case ko.Arkansas:return xo.AR;case ko.Colorado:return xo.CO;case ko.Idaho:return xo.ID;case ko.Iowa:return xo.IA;case ko.Kansas:return xo.KS;case ko.Missouri:return xo.MO;case ko.Montana:return xo.MT;case ko.Nebraska:return xo.NE;case ko.Nevada:return xo.NV;case ko.NewMexico:return xo.NM;case ko.Oklahoma:return xo.OK;case ko.Oregon:return xo.OR;case ko.Texas:return xo.TX;case ko.Utah:return xo.UT;case ko.Washington:return xo.WA;case ko.Wyoming:return xo.WY;default:throw new x_(e)}}const wR=(e,[t,n])=>!isNaN(e)&&t<=e&&e<=n,Ore=e=>{const{tileRootUrl:t}=e,{mode:n,systemMode:i}=rC(),u=n==="system"?i:n,{longitude:d,latitude:f}=Ev[Bre(localStorage.getItem("tm-map"))],[a]=PZ(),b=Number(a.get("mlat")??void 0),C=Number(a.get("mlon")??void 0),I=wR(b,[-90,90])&&wR(C,[-180,180])?{lat:b,lon:C}:void 0,k=new Set([...km].filter(ce=>!P$.includes(ce))),[M,R]=L.useState(!0),[$,G]=L.useState(k),[ee,F]=L.useState(new Set(Em)),j=$3(ee),O=f0($,G,km),ne=f0(ee,F,Em),[Y,q]=L.useState(!1);return le.jsxs(r$,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:k$,attributionControl:!1,initialViewState:{longitude:d,latitude:f,zoom:4},children:[I&&le.jsx(XZ,{longitude:I.lon,latitude:I.lat}),le.jsxs(C$,{tileRootUrl:t,mode:u,children:[le.jsx(dS,{tileRootUrl:t,game:"ats",showContours:Y}),le.jsx(dS,{tileRootUrl:t,game:"ets2",showContours:Y})]}),le.jsx(hS,{tileRootUrl:t,game:"ats",mode:u,enableIconAutoHide:M,visibleIcons:$,dlcs:ee}),le.jsx(hS,{tileRootUrl:t,game:"ets2",mode:u,enableIconAutoHide:M,visibleIcons:$}),$.has(Wn.CityNames)&&le.jsx(fS,{game:"ats",mode:u,enableAutoHide:M,enabledStates:j}),$.has(Wn.CityNames)&&le.jsx(fS,{game:"ets2",mode:u,enableAutoHide:M}),le.jsx(a$,{visualizePitch:!0}),le.jsx(i$,{containerId:"fsElem"}),le.jsx(Lre,{}),le.jsx(Z$,{}),le.jsx(o$,{compact:!0,style:{marginLeft:54},customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),le.jsx(Are,{visibleStates:j,visibleStateDlcs:ee}),le.jsx(W$,{icons:{...O,enableAutoHiding:M,onAutoHidingToggle:R},advanced:{showContours:Y,onContoursToggle:q},atsDlcs:ne})]})};function Bre(e){return e==="europe"?e:"usa"}var Fre=Object.defineProperty,jre=(e,t,n)=>t in e?Fre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nre=(e,t,n)=>(jre(e,t+"",n),n);class Vre{constructor(t){Nre(this,"_kind"),this._kind=t}}function Ure(e,t){const n=e.toString(),i=t.toString();return n>i?1:n<i?-1:0}const Hre=Ure;var Gre=Object.defineProperty,Wre=(e,t,n)=>t in e?Gre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SR=(e,t,n)=>(Wre(e,typeof t!="symbol"?t+"":t,n),n);function Zre(e,t,n){const i=t*2,u=t*2+1;let d=t;return i<e.length&&n(e[d],e[i])<0&&(d=i),u<e.length&&n(e[d],e[u])<0&&(d=u),d}function K2(e,t,n){const i=Zre(e,t,n);if(i!==t){const u=e[t];e[t]=e[i],e[i]=u,K2(e,i,n)}}function CR(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)K2(e.collection,t,e.comparator)}class y0 extends Vre{constructor({comparator:t=Hre}={}){super("BinaryHeap"),SR(this,"comparator"),SR(this,"collection",[]),this.comparator=t}static from(t,n={}){const i=new y0(n);return i.collection=Array.from(t),CR(i),i}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),K2(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const n=this.collection;for(let i=n.length-1,u=Math.floor(i/2);i>0&&this.comparator(n[u],n[i])<0;i=u,u=Math.floor(u/2)){const d=n[i];n[i]=n[u],n[u]=d}}merge(t){t instanceof y0?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),CR(this),t.clear()}isEmpty(){return!this.collection.length}}function qre(e,t,n,i,u){const d=`${e}-${t}-${n}-${i}`,{nodeLUT:f,graph:a}=u,b=Sn(f.get(e)),C=Sn(f.get(t)),I=new Xre({comparator:(j,O)=>{const ne=ee.get(j)??1/0;return(ee.get(O)??1/0)-ne}}),k={nodeUid:e,distance:0,direction:n,dlcGuard:-1};I.push(k);const M=new Map,R=new Map;R.set(k,0);const $=j=>FY(j,C),G=(j,O)=>{switch(i){case"shortest":return O.distance;case"smallRoads":return O.isOneLaneRoad?O.distance:O.distance*10;default:throw new x_(i)}},ee=new Map;ee.set(k,$(b));let F=0;for(;!I.isEmpty();){F++;const j=I.pop();if(j.nodeUid===t)return{success:!0,key:d,mode:i,...Kre(M,j)};const O=a.get(j.nodeUid);if(!O)continue;const ne=j.direction==="forward"?O.forward:O.backward;for(const Y of ne){if(!u.enabledDlcGuards.has(Y.dlcGuard))continue;const q=(R.get(j)??1/0)+G(j,Y);q<(R.get(Y)??1/0)&&(M.set(Y,j),R.set(Y,q),ee.set(Y,q+$(Sn(f.get(Y.nodeUid)))),I.has(Y)||I.push(Y))}}return{success:!1,key:d,mode:i,numIters:F}}function Kre(e,t){let n=0;const i=[t];for(;e.has(t);)t=e.get(t),i.unshift(t),n+=t.distance;return i.length===1&&i.push(i[0]),{route:i,distance:n}}class Xre extends y0{constructor(n){super(n);$T(this,"items",new Set)}has(n){return this.items.has(n)}push(n){Au.checkState(!this.items.has(n)),super.push(n),this.items.add(n)}pop(){const n=super.pop();return Au.checkState(this.items.has(n)),this.items.delete(n),n}clear(){super.clear(),this.items.clear()}merge(n){super.merge(n);for(const i of this.collection)this.items.add(i)}}const Yre=e=>{const{tileRootUrl:t}=e,{mode:n,systemMode:i}=rC(),u=n==="system"?i:n,[d,f]=L.useState(!0),[a,b]=L.useState(new Set(km)),[C,I]=L.useState(new Set(Em)),k=$3(C),M=f0(a,b,km),R=f0(C,I,Em),[$,G]=L.useState(!1);return le.jsxs(r$,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:k$,attributionControl:!1,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[le.jsx(C$,{tileRootUrl:t,mode:u,children:le.jsx(dS,{tileRootUrl:t,game:"ats",showContours:$})}),le.jsx(hS,{tileRootUrl:t,game:"ats",mode:u,enableIconAutoHide:d,visibleIcons:a,dlcs:C}),le.jsx(fS,{game:"ats",mode:u,enableAutoHide:d,enabledStates:k}),le.jsx(qh,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:le.jsx(qr,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),le.jsx(a$,{visualizePitch:!0}),le.jsx(i$,{}),le.jsx(Z$,{}),le.jsx(o$,{compact:!0,customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),le.jsx(Jre,{dlcs:C}),le.jsx(W$,{icons:{...M,enableAutoHiding:d,onAutoHidingToggle:f},advanced:{showContours:$,onContoursToggle:G},atsDlcs:R})]})},Jre=e=>{const{current:t}=w2(),n=ng(e.dlcs),[i,u]=L.useState(void 0),[d,f]=L.useState(void 0),[a,b]=L.useState([]),[C,I]=L.useState([]);L.useEffect(()=>{fetch("usa-graph-demo.json").then(ce=>ce.json()).then(ce=>{b(ce.demoCompanies.map(IR)),f(Qre(ce)),u(ce)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[k,M]=L.useState(void 0),[R,$]=L.useState(void 0),G=L.useCallback(ce=>{ce=Sn(ce),M(ce.value);let he;if(i!=null){he=Sn(i.demoCompanies.find(Ee=>Ee.n===ce.value));const ze=Sn(i.demoCompanyDefs.find(Ee=>Ee.t===he.t)),J=new Set(ze.d);I(i.demoCompanies.filter(Ee=>J.has(Ee.t)).map(IR))}if(!(t==null||d==null)&&(R!=null&&(Sn(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),$(void 0)),he)){const ze=Sn(d.nodeLUT.get(BigInt(parseInt(he.n,36))));t.flyTo({curve:1,zoom:9,center:[ze.x,ze.y]})}},[t,R,d,i]),ee=L.useCallback(ce=>{ce=Sn(ce),$(ce.value),!(t==null||d==null)&&F(Sn(k),ce.value,t,{...d,enabledDlcGuards:n})},[t,k,d,e.dlcs]),F=(ce,he,ze,J)=>{Promise.all([ER(ce,he,"shortest",J),ER(ce,he,"smallRoads",J)]).then(Ee=>{const Be=Sn(ze.getSource("route1"));if(Ee.some(ot=>ot==null)){alert("Cannot calculate a route 🙁"),Be.setData({type:"FeatureCollection",features:[]});return}const je=Ee;Be.setData({type:"FeatureCollection",features:je}),ze.fitBounds(q$(je.flatMap(ot=>ot.geometry.coordinates)),{padding:150,curve:1,duration:2500})},Ee=>{console.error("error finding route",Ee)})},j=new Map;if(i)for(const[,ce]of i.demoGraph)for(const he of[...ce.b??[],...ce.f??[]]){const ze=j.get(he.n)??0;j.set(he.n,ze||he.g)}const O=ce=>{if(d==null)return!0;const he=Sn(j.get(ce.value));return n.has(he)},ne=(ce,he)=>ce.city!==he.city?ce.city.localeCompare(he.city):ce.label.localeCompare(he.label),Y=a.filter(O).sort(ne),q=C.filter(O).sort(ne);return le.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[le.jsx("h2",{children:"Start"}),le.jsx(Pm,{options:Y,onChange:(ce,he)=>he&&G(he),groupBy:ce=>ce.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:PR}),le.jsx("h2",{children:"End"}),le.jsx(Pm,{options:q,onChange:(ce,he)=>he&&ee(he),groupBy:ce=>ce.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:k==null,renderGroup:PR},k)]})};function PR(e){return le.jsxs(le.Fragment,{children:[le.jsx(Ka,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),le.jsx(Xm,{children:e.children}),le.jsx(wL,{})]})}function Qre(e){const t=new Map,n=new Map;for(const[i,u]of e.demoGraph)t.set(BigInt(parseInt(i,36)),{forward:(u.f??[]).map(TR),backward:(u.b??[]).map(TR)});for(const[i,u]of e.demoNodes)n.set(BigInt(parseInt(i,36)),{x:u[0],y:u[1]});return{graph:t,nodeLUT:n}}function TR(e){return{nodeUid:BigInt(parseInt(e.n,36)),distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function IR(e){return{label:e.t,city:e.c,value:e.n}}function ER(e,t,n,i){return new Promise(u=>{const d=qre(BigInt(parseInt(e,36)),BigInt(parseInt(t,36)),"forward",n,i);if(!d.success){u(void 0);return}u({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(f=>{const a=Sn(i.nodeLUT.get(f.nodeUid));return[a.x,a.y]})},properties:{distance:d.distance,mode:n}})})}const kR="https://maps.truckermudgeon.com",ene=vZ(ZW([le.jsx(aS,{path:"/",element:le.jsx(Ore,{tileRootUrl:kR})}),le.jsx(aS,{path:"routes",element:le.jsx(Yre,{tileRootUrl:kR})})])),tne=MA({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),rne=document.getElementById("root"),nne=TL(rne);nne.render(le.jsx(L.StrictMode,{children:le.jsxs(lj,{defaultMode:"system",modeStorageKey:"tm-mode",theme:tne,children:[le.jsx(SH,{}),le.jsx(RZ,{router:ene})]})}));
