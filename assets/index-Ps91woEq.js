var WM=Object.defineProperty;var GM=(e,t,r)=>t in e?WM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var rS=(e,t,r)=>(GM(e,typeof t!="symbol"?t+"":t,r),r);function Sx(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(o,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var qM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ms(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:function(){return e[o]}})}),r}var wk={exports:{}},Wg={},Sk={exports:{}},Ir={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=Symbol.for("react.element"),ZM=Symbol.for("react.portal"),KM=Symbol.for("react.fragment"),XM=Symbol.for("react.strict_mode"),JM=Symbol.for("react.profiler"),YM=Symbol.for("react.provider"),QM=Symbol.for("react.context"),eD=Symbol.for("react.forward_ref"),tD=Symbol.for("react.suspense"),rD=Symbol.for("react.memo"),nD=Symbol.for("react.lazy"),nS=Symbol.iterator;function iD(e){return e===null||typeof e!="object"?null:(e=nS&&e[nS]||e["@@iterator"],typeof e=="function"?e:null)}var Ck={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kk=Object.assign,Tk={};function nd(e,t,r){this.props=e,this.context=t,this.refs=Tk,this.updater=r||Ck}nd.prototype.isReactComponent={};nd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ik(){}Ik.prototype=nd.prototype;function kx(e,t,r){this.props=e,this.context=t,this.refs=Tk,this.updater=r||Ck}var Tx=kx.prototype=new Ik;Tx.constructor=kx;kk(Tx,nd.prototype);Tx.isPureReactComponent=!0;var iS=Array.isArray,Pk=Object.prototype.hasOwnProperty,Ix={current:null},Ek={key:!0,ref:!0,__self:!0,__source:!0};function zk(e,t,r){var o,l={},d=null,m=null;if(t!=null)for(o in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(d=""+t.key),t)Pk.call(t,o)&&!Ek.hasOwnProperty(o)&&(l[o]=t[o]);var c=arguments.length-2;if(c===1)l.children=r;else if(1<c){for(var b=Array(c),w=0;w<c;w++)b[w]=arguments[w+2];l.children=b}if(e&&e.defaultProps)for(o in c=e.defaultProps,c)l[o]===void 0&&(l[o]=c[o]);return{$$typeof:Op,type:e,key:d,ref:m,props:l,_owner:Ix.current}}function oD(e,t){return{$$typeof:Op,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Px(e){return typeof e=="object"&&e!==null&&e.$$typeof===Op}function aD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var oS=/\/+/g;function m0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aD(""+e.key):t.toString(36)}function Om(e,t,r,o,l){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(d){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Op:case ZM:m=!0}}if(m)return m=e,l=l(m),e=o===""?"."+m0(m,0):o,iS(l)?(r="",e!=null&&(r=e.replace(oS,"$&/")+"/"),Om(l,t,r,"",function(w){return w})):l!=null&&(Px(l)&&(l=oD(l,r+(!l.key||m&&m.key===l.key?"":(""+l.key).replace(oS,"$&/")+"/")+e)),t.push(l)),1;if(m=0,o=o===""?".":o+":",iS(e))for(var c=0;c<e.length;c++){d=e[c];var b=o+m0(d,c);m+=Om(d,t,r,b,l)}else if(b=iD(e),typeof b=="function")for(e=b.call(e),c=0;!(d=e.next()).done;)d=d.value,b=o+m0(d,c++),m+=Om(d,t,r,b,l);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function fm(e,t,r){if(e==null)return e;var o=[],l=0;return Om(e,o,"","",function(d){return t.call(r,d,l++)}),o}function sD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var no={current:null},Fm={transition:null},lD={ReactCurrentDispatcher:no,ReactCurrentBatchConfig:Fm,ReactCurrentOwner:Ix};Ir.Children={map:fm,forEach:function(e,t,r){fm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fm(e,function(){t++}),t},toArray:function(e){return fm(e,function(t){return t})||[]},only:function(e){if(!Px(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ir.Component=nd;Ir.Fragment=KM;Ir.Profiler=JM;Ir.PureComponent=kx;Ir.StrictMode=XM;Ir.Suspense=tD;Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lD;Ir.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=kk({},e.props),l=e.key,d=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,m=Ix.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(b in t)Pk.call(t,b)&&!Ek.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&c!==void 0?c[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){c=Array(b);for(var w=0;w<b;w++)c[w]=arguments[w+2];o.children=c}return{$$typeof:Op,type:e.type,key:l,ref:d,props:o,_owner:m}};Ir.createContext=function(e){return e={$$typeof:QM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:YM,_context:e},e.Consumer=e};Ir.createElement=zk;Ir.createFactory=function(e){var t=zk.bind(null,e);return t.type=e,t};Ir.createRef=function(){return{current:null}};Ir.forwardRef=function(e){return{$$typeof:eD,render:e}};Ir.isValidElement=Px;Ir.lazy=function(e){return{$$typeof:nD,_payload:{_status:-1,_result:e},_init:sD}};Ir.memo=function(e,t){return{$$typeof:rD,type:e,compare:t===void 0?null:t}};Ir.startTransition=function(e){var t=Fm.transition;Fm.transition={};try{e()}finally{Fm.transition=t}};Ir.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ir.useCallback=function(e,t){return no.current.useCallback(e,t)};Ir.useContext=function(e){return no.current.useContext(e)};Ir.useDebugValue=function(){};Ir.useDeferredValue=function(e){return no.current.useDeferredValue(e)};Ir.useEffect=function(e,t){return no.current.useEffect(e,t)};Ir.useId=function(){return no.current.useId()};Ir.useImperativeHandle=function(e,t,r){return no.current.useImperativeHandle(e,t,r)};Ir.useInsertionEffect=function(e,t){return no.current.useInsertionEffect(e,t)};Ir.useLayoutEffect=function(e,t){return no.current.useLayoutEffect(e,t)};Ir.useMemo=function(e,t){return no.current.useMemo(e,t)};Ir.useReducer=function(e,t,r){return no.current.useReducer(e,t,r)};Ir.useRef=function(e){return no.current.useRef(e)};Ir.useState=function(e){return no.current.useState(e)};Ir.useSyncExternalStore=function(e,t,r){return no.current.useSyncExternalStore(e,t,r)};Ir.useTransition=function(){return no.current.useTransition()};Ir.version="18.3.0";Sk.exports=Ir;var O=Sk.exports;const a_=Cx(O),ig=Sx({__proto__:null,default:a_},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cD=O,uD=Symbol.for("react.element"),dD=Symbol.for("react.fragment"),hD=Object.prototype.hasOwnProperty,pD=cD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fD={key:!0,ref:!0,__self:!0,__source:!0};function Ak(e,t,r){var o,l={},d=null,m=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(m=t.ref);for(o in t)hD.call(t,o)&&!fD.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:uD,type:e,key:d,ref:m,props:l,_owner:pD.current}}Wg.Fragment=dD;Wg.jsx=Ak;Wg.jsxs=Ak;wk.exports=Wg;var ae=wk.exports;const _h={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Gg="$$joy";function op(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(this,arguments)}const mD=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));function Mk(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var gD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yD=Mk(function(e){return gD.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function vD(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function _D(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var xD=function(){function e(r){var o=this;this._insertTag=function(l){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(l,d),o.tags.push(l)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(_D(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var d=vD(l);try{d.insertRule(o,d.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Bi="-ms-",og="-moz-",Or="-webkit-",Dk="comm",Ex="rule",zx="decl",bD="@import",Rk="@keyframes",wD="@layer",SD=Math.abs,qg=String.fromCharCode,CD=Object.assign;function kD(e,t){return Si(e,0)^45?(((t<<2^Si(e,0))<<2^Si(e,1))<<2^Si(e,2))<<2^Si(e,3):0}function Lk(e){return e.trim()}function TD(e,t){return(e=t.exec(e))?e[0]:e}function Fr(e,t,r){return e.replace(t,r)}function s_(e,t){return e.indexOf(t)}function Si(e,t){return e.charCodeAt(t)|0}function ap(e,t,r){return e.slice(t,r)}function Za(e){return e.length}function Ax(e){return e.length}function mm(e,t){return t.push(e),e}function ID(e,t){return e.map(t).join("")}var Zg=1,Vu=1,$k=0,So=0,Jn=0,id="";function Kg(e,t,r,o,l,d,m){return{value:e,root:t,parent:r,type:o,props:l,children:d,line:Zg,column:Vu,length:m,return:""}}function xh(e,t){return CD(Kg("",null,null,"",null,null,0),e,{length:-e.length},t)}function PD(){return Jn}function ED(){return Jn=So>0?Si(id,--So):0,Vu--,Jn===10&&(Vu=1,Zg--),Jn}function Lo(){return Jn=So<$k?Si(id,So++):0,Vu++,Jn===10&&(Vu=1,Zg++),Jn}function Ja(){return Si(id,So)}function Nm(){return So}function Fp(e,t){return ap(id,e,t)}function sp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bk(e){return Zg=Vu=1,$k=Za(id=e),So=0,[]}function Ok(e){return id="",e}function jm(e){return Lk(Fp(So-1,l_(e===91?e+2:e===40?e+1:e)))}function zD(e){for(;(Jn=Ja())&&Jn<33;)Lo();return sp(e)>2||sp(Jn)>3?"":" "}function AD(e,t){for(;--t&&Lo()&&!(Jn<48||Jn>102||Jn>57&&Jn<65||Jn>70&&Jn<97););return Fp(e,Nm()+(t<6&&Ja()==32&&Lo()==32))}function l_(e){for(;Lo();)switch(Jn){case e:return So;case 34:case 39:e!==34&&e!==39&&l_(Jn);break;case 40:e===41&&l_(e);break;case 92:Lo();break}return So}function MD(e,t){for(;Lo()&&e+Jn!==57;)if(e+Jn===84&&Ja()===47)break;return"/*"+Fp(t,So-1)+"*"+qg(e===47?e:Lo())}function DD(e){for(;!sp(Ja());)Lo();return Fp(e,So)}function RD(e){return Ok(Vm("",null,null,null,[""],e=Bk(e),0,[0],e))}function Vm(e,t,r,o,l,d,m,c,b){for(var w=0,T=0,z=m,P=0,U=0,H=0,W=1,J=1,j=1,$=0,G="",te=l,ie=d,me=o,Z=G;J;)switch(H=$,$=Lo()){case 40:if(H!=108&&Si(Z,z-1)==58){s_(Z+=Fr(jm($),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:Z+=jm($);break;case 9:case 10:case 13:case 32:Z+=zD(H);break;case 92:Z+=AD(Nm()-1,7);continue;case 47:switch(Ja()){case 42:case 47:mm(LD(MD(Lo(),Nm()),t,r),b);break;default:Z+="/"}break;case 123*W:c[w++]=Za(Z)*j;case 125*W:case 59:case 0:switch($){case 0:case 125:J=0;case 59+T:j==-1&&(Z=Fr(Z,/\f/g,"")),U>0&&Za(Z)-z&&mm(U>32?sS(Z+";",o,r,z-1):sS(Fr(Z," ","")+";",o,r,z-2),b);break;case 59:Z+=";";default:if(mm(me=aS(Z,t,r,w,T,l,c,G,te=[],ie=[],z),d),$===123)if(T===0)Vm(Z,t,me,me,te,d,z,c,ie);else switch(P===99&&Si(Z,3)===110?100:P){case 100:case 108:case 109:case 115:Vm(e,me,me,o&&mm(aS(e,me,me,0,0,l,c,G,l,te=[],z),ie),l,ie,z,c,o?te:ie);break;default:Vm(Z,me,me,me,[""],ie,0,c,ie)}}w=T=U=0,W=j=1,G=Z="",z=m;break;case 58:z=1+Za(Z),U=H;default:if(W<1){if($==123)--W;else if($==125&&W++==0&&ED()==125)continue}switch(Z+=qg($),$*W){case 38:j=T>0?1:(Z+="\f",-1);break;case 44:c[w++]=(Za(Z)-1)*j,j=1;break;case 64:Ja()===45&&(Z+=jm(Lo())),P=Ja(),T=z=Za(G=Z+=DD(Nm())),$++;break;case 45:H===45&&Za(Z)==2&&(W=0)}}return d}function aS(e,t,r,o,l,d,m,c,b,w,T){for(var z=l-1,P=l===0?d:[""],U=Ax(P),H=0,W=0,J=0;H<o;++H)for(var j=0,$=ap(e,z+1,z=SD(W=m[H])),G=e;j<U;++j)(G=Lk(W>0?P[j]+" "+$:Fr($,/&\f/g,P[j])))&&(b[J++]=G);return Kg(e,t,r,l===0?Ex:c,b,w,T)}function LD(e,t,r){return Kg(e,t,r,Dk,qg(PD()),ap(e,2,-2),0)}function sS(e,t,r,o){return Kg(e,t,r,zx,ap(e,0,o),ap(e,o+1,-1),o)}function zu(e,t){for(var r="",o=Ax(e),l=0;l<o;l++)r+=t(e[l],l,e,t)||"";return r}function $D(e,t,r,o){switch(e.type){case wD:if(e.children.length)break;case bD:case zx:return e.return=e.return||e.value;case Dk:return"";case Rk:return e.return=e.value+"{"+zu(e.children,o)+"}";case Ex:e.value=e.props.join(",")}return Za(r=zu(e.children,o))?e.return=e.value+"{"+r+"}":""}function BD(e){var t=Ax(e);return function(r,o,l,d){for(var m="",c=0;c<t;c++)m+=e[c](r,o,l,d)||"";return m}}function OD(e){return function(t){t.root||(t=t.return)&&e(t)}}var FD=function(t,r,o){for(var l=0,d=0;l=d,d=Ja(),l===38&&d===12&&(r[o]=1),!sp(d);)Lo();return Fp(t,So)},ND=function(t,r){var o=-1,l=44;do switch(sp(l)){case 0:l===38&&Ja()===12&&(r[o]=1),t[o]+=FD(So-1,r,o);break;case 2:t[o]+=jm(l);break;case 4:if(l===44){t[++o]=Ja()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=qg(l)}while(l=Lo());return t},jD=function(t,r){return Ok(ND(Bk(t),r))},lS=new WeakMap,VD=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,l=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!lS.get(o))&&!l){lS.set(t,!0);for(var d=[],m=jD(r,d),c=o.props,b=0,w=0;b<m.length;b++)for(var T=0;T<c.length;T++,w++)t.props[w]=d[b]?m[b].replace(/&\f/g,c[T]):c[T]+" "+m[b]}}},UD=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Fk(e,t){switch(kD(e,t)){case 5103:return Or+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Or+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Or+e+og+e+Bi+e+e;case 6828:case 4268:return Or+e+Bi+e+e;case 6165:return Or+e+Bi+"flex-"+e+e;case 5187:return Or+e+Fr(e,/(\w+).+(:[^]+)/,Or+"box-$1$2"+Bi+"flex-$1$2")+e;case 5443:return Or+e+Bi+"flex-item-"+Fr(e,/flex-|-self/,"")+e;case 4675:return Or+e+Bi+"flex-line-pack"+Fr(e,/align-content|flex-|-self/,"")+e;case 5548:return Or+e+Bi+Fr(e,"shrink","negative")+e;case 5292:return Or+e+Bi+Fr(e,"basis","preferred-size")+e;case 6060:return Or+"box-"+Fr(e,"-grow","")+Or+e+Bi+Fr(e,"grow","positive")+e;case 4554:return Or+Fr(e,/([^-])(transform)/g,"$1"+Or+"$2")+e;case 6187:return Fr(Fr(Fr(e,/(zoom-|grab)/,Or+"$1"),/(image-set)/,Or+"$1"),e,"")+e;case 5495:case 3959:return Fr(e,/(image-set\([^]*)/,Or+"$1$`$1");case 4968:return Fr(Fr(e,/(.+:)(flex-)?(.*)/,Or+"box-pack:$3"+Bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Or+e+e;case 4095:case 3583:case 4068:case 2532:return Fr(e,/(.+)-inline(.+)/,Or+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Za(e)-1-t>6)switch(Si(e,t+1)){case 109:if(Si(e,t+4)!==45)break;case 102:return Fr(e,/(.+:)(.+)-([^]+)/,"$1"+Or+"$2-$3$1"+og+(Si(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~s_(e,"stretch")?Fk(Fr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Si(e,t+1)!==115)break;case 6444:switch(Si(e,Za(e)-3-(~s_(e,"!important")&&10))){case 107:return Fr(e,":",":"+Or)+e;case 101:return Fr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Or+(Si(e,14)===45?"inline-":"")+"box$3$1"+Or+"$2$3$1"+Bi+"$2box$3")+e}break;case 5936:switch(Si(e,t+11)){case 114:return Or+e+Bi+Fr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Or+e+Bi+Fr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Or+e+Bi+Fr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Or+e+Bi+e+e}return e}var HD=function(t,r,o,l){if(t.length>-1&&!t.return)switch(t.type){case zx:t.return=Fk(t.value,t.length);break;case Rk:return zu([xh(t,{value:Fr(t.value,"@","@"+Or)})],l);case Ex:if(t.length)return ID(t.props,function(d){switch(TD(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zu([xh(t,{props:[Fr(d,/:(read-\w+)/,":"+og+"$1")]})],l);case"::placeholder":return zu([xh(t,{props:[Fr(d,/:(plac\w+)/,":"+Or+"input-$1")]}),xh(t,{props:[Fr(d,/:(plac\w+)/,":"+og+"$1")]}),xh(t,{props:[Fr(d,/:(plac\w+)/,Bi+"input-$1")]})],l)}return""})}},WD=[HD],Nk=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(W){var J=W.getAttribute("data-emotion");J.indexOf(" ")!==-1&&(document.head.appendChild(W),W.setAttribute("data-s",""))})}var l=t.stylisPlugins||WD,d={},m,c=[];m=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(W){for(var J=W.getAttribute("data-emotion").split(" "),j=1;j<J.length;j++)d[J[j]]=!0;c.push(W)});var b,w=[VD,UD];{var T,z=[$D,OD(function(W){T.insert(W)})],P=BD(w.concat(l,z)),U=function(J){return zu(RD(J),P)};b=function(J,j,$,G){T=$,U(J?J+"{"+j.styles+"}":j.styles),G&&(H.inserted[j.name]=!0)}}var H={key:r,sheet:new xD({key:r,container:m,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return H.sheet.hydrate(c),H},jk={exports:{}},qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mi=typeof Symbol=="function"&&Symbol.for,Mx=mi?Symbol.for("react.element"):60103,Dx=mi?Symbol.for("react.portal"):60106,Xg=mi?Symbol.for("react.fragment"):60107,Jg=mi?Symbol.for("react.strict_mode"):60108,Yg=mi?Symbol.for("react.profiler"):60114,Qg=mi?Symbol.for("react.provider"):60109,ey=mi?Symbol.for("react.context"):60110,Rx=mi?Symbol.for("react.async_mode"):60111,ty=mi?Symbol.for("react.concurrent_mode"):60111,ry=mi?Symbol.for("react.forward_ref"):60112,ny=mi?Symbol.for("react.suspense"):60113,GD=mi?Symbol.for("react.suspense_list"):60120,iy=mi?Symbol.for("react.memo"):60115,oy=mi?Symbol.for("react.lazy"):60116,qD=mi?Symbol.for("react.block"):60121,ZD=mi?Symbol.for("react.fundamental"):60117,KD=mi?Symbol.for("react.responder"):60118,XD=mi?Symbol.for("react.scope"):60119;function Fo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Mx:switch(e=e.type,e){case Rx:case ty:case Xg:case Yg:case Jg:case ny:return e;default:switch(e=e&&e.$$typeof,e){case ey:case ry:case oy:case iy:case Qg:return e;default:return t}}case Dx:return t}}}function Vk(e){return Fo(e)===ty}qr.AsyncMode=Rx;qr.ConcurrentMode=ty;qr.ContextConsumer=ey;qr.ContextProvider=Qg;qr.Element=Mx;qr.ForwardRef=ry;qr.Fragment=Xg;qr.Lazy=oy;qr.Memo=iy;qr.Portal=Dx;qr.Profiler=Yg;qr.StrictMode=Jg;qr.Suspense=ny;qr.isAsyncMode=function(e){return Vk(e)||Fo(e)===Rx};qr.isConcurrentMode=Vk;qr.isContextConsumer=function(e){return Fo(e)===ey};qr.isContextProvider=function(e){return Fo(e)===Qg};qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mx};qr.isForwardRef=function(e){return Fo(e)===ry};qr.isFragment=function(e){return Fo(e)===Xg};qr.isLazy=function(e){return Fo(e)===oy};qr.isMemo=function(e){return Fo(e)===iy};qr.isPortal=function(e){return Fo(e)===Dx};qr.isProfiler=function(e){return Fo(e)===Yg};qr.isStrictMode=function(e){return Fo(e)===Jg};qr.isSuspense=function(e){return Fo(e)===ny};qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Xg||e===ty||e===Yg||e===Jg||e===ny||e===GD||typeof e=="object"&&e!==null&&(e.$$typeof===oy||e.$$typeof===iy||e.$$typeof===Qg||e.$$typeof===ey||e.$$typeof===ry||e.$$typeof===ZD||e.$$typeof===KD||e.$$typeof===XD||e.$$typeof===qD)};qr.typeOf=Fo;jk.exports=qr;var JD=jk.exports,Uk=JD,YD={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Hk={};Hk[Uk.ForwardRef]=YD;Hk[Uk.Memo]=QD;var eR=!0;function tR(e,t,r){var o="";return r.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):o+=l+" "}),o}var Wk=function(t,r,o){var l=t.key+"-"+r.name;(o===!1||eR===!1)&&t.registered[l]===void 0&&(t.registered[l]=r.styles)},Gk=function(t,r,o){Wk(t,r,o);var l=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+l:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function rR(e){for(var t=0,r,o=0,l=e.length;l>=4;++o,l-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var nR={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},iR=/[A-Z]|^ms/g,oR=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qk=function(t){return t.charCodeAt(1)===45},cS=function(t){return t!=null&&typeof t!="boolean"},g0=Mk(function(e){return qk(e)?e:e.replace(iR,"-$&").toLowerCase()}),uS=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(oR,function(o,l,d){return Ka={name:l,styles:d,next:Ka},l})}return nR[t]!==1&&!qk(t)&&typeof r=="number"&&r!==0?r+"px":r};function lp(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Ka={name:r.name,styles:r.styles,next:Ka},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Ka={name:o.name,styles:o.styles,next:Ka},o=o.next;var l=r.styles+";";return l}return aR(e,t,r)}case"function":{if(e!==void 0){var d=Ka,m=r(e);return Ka=d,lp(e,t,m)}break}}if(t==null)return r;var c=t[r];return c!==void 0?c:r}function aR(e,t,r){var o="";if(Array.isArray(r))for(var l=0;l<r.length;l++)o+=lp(e,t,r[l])+";";else for(var d in r){var m=r[d];if(typeof m!="object")t!=null&&t[m]!==void 0?o+=d+"{"+t[m]+"}":cS(m)&&(o+=g0(d)+":"+uS(d,m)+";");else if(Array.isArray(m)&&typeof m[0]=="string"&&(t==null||t[m[0]]===void 0))for(var c=0;c<m.length;c++)cS(m[c])&&(o+=g0(d)+":"+uS(d,m[c])+";");else{var b=lp(e,t,m);switch(d){case"animation":case"animationName":{o+=g0(d)+":"+b+";";break}default:o+=d+"{"+b+"}"}}}return o}var dS=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ka,Lx=function(t,r,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,d="";Ka=void 0;var m=t[0];m==null||m.raw===void 0?(l=!1,d+=lp(o,r,m)):d+=m[0];for(var c=1;c<t.length;c++)d+=lp(o,r,t[c]),l&&(d+=m[c]);dS.lastIndex=0;for(var b="",w;(w=dS.exec(d))!==null;)b+="-"+w[1];var T=rR(d)+b;return{name:T,styles:d,next:Ka}},sR=function(t){return t()},Zk=ig.useInsertionEffect?ig.useInsertionEffect:!1,lR=Zk||sR,hS=Zk||O.useLayoutEffect,Kk=O.createContext(typeof HTMLElement<"u"?Nk({key:"css"}):null),cR=Kk.Provider,Xk=function(t){return O.forwardRef(function(r,o){var l=O.useContext(Kk);return t(r,l,o)})},od=O.createContext({}),Jk=Xk(function(e,t){var r=e.styles,o=Lx([r],void 0,O.useContext(od)),l=O.useRef();return hS(function(){var d=t.key+"-global",m=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,b=document.querySelector('style[data-emotion="'+d+" "+o.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),b!==null&&(c=!0,b.setAttribute("data-emotion",d),m.hydrate([b])),l.current=[m,c],function(){m.flush()}},[t]),hS(function(){var d=l.current,m=d[0],c=d[1];if(c){d[1]=!1;return}if(o.next!==void 0&&Gk(t,o.next,!0),m.tags.length){var b=m.tags[m.tags.length-1].nextElementSibling;m.before=b,m.flush()}t.insert("",o,m,!1)},[t,o.name]),null});function $x(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Lx(t)}var Yk=function(){var t=$x.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},uR=yD,dR=function(t){return t!=="theme"},pS=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?uR:dR},fS=function(t,r,o){var l;if(r){var d=r.shouldForwardProp;l=t.__emotion_forwardProp&&d?function(m){return t.__emotion_forwardProp(m)&&d(m)}:d}return typeof l!="function"&&o&&(l=t.__emotion_forwardProp),l},hR=function(t){var r=t.cache,o=t.serialized,l=t.isStringTag;return Wk(r,o,l),lR(function(){return Gk(r,o,l)}),null},pR=function e(t,r){var o=t.__emotion_real===t,l=o&&t.__emotion_base||t,d,m;r!==void 0&&(d=r.label,m=r.target);var c=fS(t,r,o),b=c||pS(l),w=!b("as");return function(){var T=arguments,z=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&z.push("label:"+d+";"),T[0]==null||T[0].raw===void 0)z.push.apply(z,T);else{z.push(T[0][0]);for(var P=T.length,U=1;U<P;U++)z.push(T[U],T[0][U])}var H=Xk(function(W,J,j){var $=w&&W.as||l,G="",te=[],ie=W;if(W.theme==null){ie={};for(var me in W)ie[me]=W[me];ie.theme=O.useContext(od)}typeof W.className=="string"?G=tR(J.registered,te,W.className):W.className!=null&&(G=W.className+" ");var Z=Lx(z.concat(te),J.registered,ie);G+=J.key+"-"+Z.name,m!==void 0&&(G+=" "+m);var de=w&&c===void 0?pS($):b,Te={};for(var ve in W)w&&ve==="as"||de(ve)&&(Te[ve]=W[ve]);return Te.className=G,Te.ref=j,O.createElement(O.Fragment,null,O.createElement(hR,{cache:J,serialized:Z,isStringTag:typeof $=="string"}),O.createElement($,Te))});return H.displayName=d!==void 0?d:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",H.defaultProps=t.defaultProps,H.__emotion_real=H,H.__emotion_base=l,H.__emotion_styles=z,H.__emotion_forwardProp=c,Object.defineProperty(H,"toString",{value:function(){return"."+m}}),H.withComponent=function(W,J){return e(W,K({},r,J,{shouldForwardProp:fS(H,J,!0)})).apply(void 0,z)},H}},fR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ag=pR.bind();fR.forEach(function(e){ag[e]=ag(e)});function mR(e){return e==null||Object.keys(e).length===0}function Qk(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?l=>t(mR(l)?r:l):t;return ae.jsx(Jk,{styles:o})}function gR(e,t){return ag(e,t)}const yR=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function qt(e,t){if(e==null)return{};var r={},o=Object.keys(e),l,d;for(d=0;d<o.length;d++)l=o[d],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}function nl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eT(e){if(!nl(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=eT(e[r])}),t}function ia(e,t,r={clone:!0}){const o=r.clone?K({},e):e;return nl(e)&&nl(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(nl(t[l])&&l in e&&nl(e[l])?o[l]=ia(e[l],t[l],r):r.clone?o[l]=nl(t[l])?eT(t[l]):t[l]:o[l]=t[l])}),o}const vR=["values","unit","step"],_R=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>K({},r,{[o.key]:o.val}),{})};function tT(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,l=qt(e,vR),d=_R(t),m=Object.keys(d);function c(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r})`}function b(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-o/100}${r})`}function w(P,U){const H=m.indexOf(U);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r}) and (max-width:${(H!==-1&&typeof t[m[H]]=="number"?t[m[H]]:U)-o/100}${r})`}function T(P){return m.indexOf(P)+1<m.length?w(P,m[m.indexOf(P)+1]):c(P)}function z(P){const U=m.indexOf(P);return U===0?c(m[1]):U===m.length-1?b(m[U]):w(P,m[m.indexOf(P)+1]).replace("@media","@media not all and")}return K({keys:m,values:d,up:c,down:b,between:w,only:T,not:z,unit:r},l)}function xR(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(o=>o.startsWith("@container")).sort((o,l)=>{var m,c;const d=/min-width:\s*([0-9.]+)/;return+(((m=o.match(d))==null?void 0:m[1])||0)-+(((c=l.match(d))==null?void 0:c[1])||0)});return r.length?r.reduce((o,l)=>{const d=t[l];return delete o[l],o[l]=d,o},K({},t)):t}function bR(e,t){return t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function wR(e,t){const r=t.match(/^@([^/]+)\/?(.+)?$/);if(!r)return null;const[,o,l]=r,d=Number.isNaN(+o)?o:+o;return e.containerQueries(l).up(d)}function rT(e){const t=(d,m)=>d.replace("@media",m?`@container ${m}`:"@container");function r(d,m){d.up=(...c)=>t(e.breakpoints.up(...c),m),d.down=(...c)=>t(e.breakpoints.down(...c),m),d.between=(...c)=>t(e.breakpoints.between(...c),m),d.only=(...c)=>t(e.breakpoints.only(...c),m),d.not=(...c)=>{const b=t(e.breakpoints.not(...c),m);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>"):b}}const o={},l=d=>(r(o,d),o);return r(l),K({},e,{containerQueries:l})}const SR={borderRadius:4},CR=SR;function Uh(e,t){return t?ia(e,t,{clone:!1}):e}const ay={xs:0,sm:600,md:900,lg:1200,xl:1536},mS={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${ay[e]}px)`},kR={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:ay[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Ra(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||mS;return t.reduce((m,c,b)=>(m[d.up(d.keys[b])]=r(t[b]),m),{})}if(typeof t=="object"){const d=o.breakpoints||mS;return Object.keys(t).reduce((m,c)=>{if(bR(d.keys,c)){const b=wR(o.containerQueries?o:kR,c);b&&(m[b]=r(t[c],c))}else if(Object.keys(d.values||ay).indexOf(c)!==-1){const b=d.up(c);m[b]=r(t[c],c)}else{const b=c;m[b]=t[b]}return m},{})}return r(t)}function nT(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((o,l)=>{const d=e.up(l);return o[d]={},o},{}))||{}}function iT(e,t){return e.reduce((r,o)=>{const l=r[o];return(!l||Object.keys(l).length===0)&&delete r[o],r},t)}function TR(e,...t){const r=nT(e),o=[r,...t].reduce((l,d)=>ia(l,d),{});return iT(Object.keys(r),o)}function IR(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((l,d)=>{d<e.length&&(r[l]=!0)}):o.forEach(l=>{e[l]!=null&&(r[l]=!0)}),r}function y0({values:e,breakpoints:t,base:r}){const o=r||IR(e,t),l=Object.keys(o);if(l.length===0)return e;let d;return l.reduce((m,c,b)=>(Array.isArray(e)?(m[c]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(m[c]=e[c]!=null?e[c]:e[d],d=c):m[c]=e,m),{})}function Ft(e){if(typeof e!="string")throw new Error(op(7));return e.charAt(0).toUpperCase()+e.slice(1)}function xl(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((l,d)=>l&&l[d]?l[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function sg(e,t,r,o=r){let l;return typeof e=="function"?l=e(r):Array.isArray(e)?l=e[r]||o:l=xl(e,r)||o,t&&(l=t(l,o,e)),l}function Zn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:l}=e,d=m=>{if(m[t]==null)return null;const c=m[t],b=m.theme,w=xl(b,o)||{};return Ra(m,c,z=>{let P=sg(w,l,z);return z===P&&typeof z=="string"&&(P=sg(w,l,`${t}${z==="default"?"":Ft(z)}`,z)),r===!1?P:{[r]:P}})};return d.propTypes={},d.filterProps=[t],d}function PR(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const ER={m:"margin",p:"padding"},zR={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},gS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},AR=PR(e=>{if(e.length>2)if(gS[e])e=gS[e];else return[e];const[t,r]=e.split(""),o=ER[t],l=zR[r]||"";return Array.isArray(l)?l.map(d=>o+d):[o+l]}),Bx=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ox=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Bx,...Ox];function Np(e,t,r,o){const l=xl(e,t,!0)??r;return typeof l=="number"||typeof l=="string"?d=>typeof d=="string"?d:typeof l=="string"?`calc(${d} * ${l})`:l*d:Array.isArray(l)?d=>{if(typeof d=="string")return d;const m=Math.abs(d),c=l[m];return d>=0?c:typeof c=="number"?-c:`-${c}`}:typeof l=="function"?l:()=>{}}function sy(e){return Np(e,"spacing",8)}function cc(e,t){return typeof t=="string"||t==null?t:e(t)}function MR(e,t){return r=>e.reduce((o,l)=>(o[l]=cc(t,r),o),{})}function DR(e,t,r,o){if(t.indexOf(r)===-1)return null;const l=AR(r),d=MR(l,o),m=e[r];return Ra(e,m,d)}function oT(e,t){const r=sy(e.theme);return Object.keys(e).map(o=>DR(e,t,o,r)).reduce(Uh,{})}function Dn(e){return oT(e,Bx)}Dn.propTypes={};Dn.filterProps=Bx;function Rn(e){return oT(e,Ox)}Rn.propTypes={};Rn.filterProps=Ox;function aT(e=8,t=sy({spacing:e})){if(e.mui)return e;const r=(...o)=>(o.length===0?[1]:o).map(d=>{const m=t(d);return typeof m=="number"?`${m}px`:m}).join(" ");return r.mui=!0,r}function ly(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(d=>{o[d]=l}),o),{}),r=o=>Object.keys(o).reduce((l,d)=>t[d]?Uh(l,t[d](o)):l,{});return r.propTypes={},r.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),r}function Yo(e){return typeof e!="number"?e:`${e}px solid`}function ha(e,t){return Zn({prop:e,themeKey:"borders",transform:t})}const RR=ha("border",Yo),LR=ha("borderTop",Yo),$R=ha("borderRight",Yo),BR=ha("borderBottom",Yo),OR=ha("borderLeft",Yo),FR=ha("borderColor"),NR=ha("borderTopColor"),jR=ha("borderRightColor"),VR=ha("borderBottomColor"),UR=ha("borderLeftColor"),HR=ha("outline",Yo),WR=ha("outlineColor"),cy=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Np(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:cc(t,o)});return Ra(e,e.borderRadius,r)}return null};cy.propTypes={};cy.filterProps=["borderRadius"];ly(RR,LR,$R,BR,OR,FR,NR,jR,VR,UR,cy,HR,WR);const uy=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Np(e.theme,"spacing",8),r=o=>({gap:cc(t,o)});return Ra(e,e.gap,r)}return null};uy.propTypes={};uy.filterProps=["gap"];const dy=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Np(e.theme,"spacing",8),r=o=>({columnGap:cc(t,o)});return Ra(e,e.columnGap,r)}return null};dy.propTypes={};dy.filterProps=["columnGap"];const hy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Np(e.theme,"spacing",8),r=o=>({rowGap:cc(t,o)});return Ra(e,e.rowGap,r)}return null};hy.propTypes={};hy.filterProps=["rowGap"];const GR=Zn({prop:"gridColumn"}),qR=Zn({prop:"gridRow"}),ZR=Zn({prop:"gridAutoFlow"}),KR=Zn({prop:"gridAutoColumns"}),XR=Zn({prop:"gridAutoRows"}),JR=Zn({prop:"gridTemplateColumns"}),YR=Zn({prop:"gridTemplateRows"}),QR=Zn({prop:"gridTemplateAreas"}),eL=Zn({prop:"gridArea"});ly(uy,dy,hy,GR,qR,ZR,KR,XR,JR,YR,QR,eL);function Au(e,t){return t==="grey"?t:e}const tL=Zn({prop:"color",themeKey:"palette",transform:Au}),rL=Zn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Au}),nL=Zn({prop:"backgroundColor",themeKey:"palette",transform:Au});ly(tL,rL,nL);function zo(e){return e<=1&&e!==0?`${e*100}%`:e}const iL=Zn({prop:"width",transform:zo}),Fx=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var l,d,m,c,b;const o=((m=(d=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:d.values)==null?void 0:m[r])||ay[r];return o?((b=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:zo(r)}};return Ra(e,e.maxWidth,t)}return null};Fx.filterProps=["maxWidth"];const oL=Zn({prop:"minWidth",transform:zo}),aL=Zn({prop:"height",transform:zo}),sL=Zn({prop:"maxHeight",transform:zo}),lL=Zn({prop:"minHeight",transform:zo});Zn({prop:"size",cssProperty:"width",transform:zo});Zn({prop:"size",cssProperty:"height",transform:zo});const cL=Zn({prop:"boxSizing"});ly(iL,Fx,oL,aL,sL,lL,cL);const uL={border:{themeKey:"borders",transform:Yo},borderTop:{themeKey:"borders",transform:Yo},borderRight:{themeKey:"borders",transform:Yo},borderBottom:{themeKey:"borders",transform:Yo},borderLeft:{themeKey:"borders",transform:Yo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Yo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:cy},color:{themeKey:"palette",transform:Au},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Au},backgroundColor:{themeKey:"palette",transform:Au},p:{style:Rn},pt:{style:Rn},pr:{style:Rn},pb:{style:Rn},pl:{style:Rn},px:{style:Rn},py:{style:Rn},padding:{style:Rn},paddingTop:{style:Rn},paddingRight:{style:Rn},paddingBottom:{style:Rn},paddingLeft:{style:Rn},paddingX:{style:Rn},paddingY:{style:Rn},paddingInline:{style:Rn},paddingInlineStart:{style:Rn},paddingInlineEnd:{style:Rn},paddingBlock:{style:Rn},paddingBlockStart:{style:Rn},paddingBlockEnd:{style:Rn},m:{style:Dn},mt:{style:Dn},mr:{style:Dn},mb:{style:Dn},ml:{style:Dn},mx:{style:Dn},my:{style:Dn},margin:{style:Dn},marginTop:{style:Dn},marginRight:{style:Dn},marginBottom:{style:Dn},marginLeft:{style:Dn},marginX:{style:Dn},marginY:{style:Dn},marginInline:{style:Dn},marginInlineStart:{style:Dn},marginInlineEnd:{style:Dn},marginBlock:{style:Dn},marginBlockStart:{style:Dn},marginBlockEnd:{style:Dn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:uy},rowGap:{style:hy},columnGap:{style:dy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:zo},maxWidth:{style:Fx},minWidth:{transform:zo},height:{transform:zo},maxHeight:{transform:zo},minHeight:{transform:zo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},py=uL;function dL(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function hL(e,t){return typeof e=="function"?e(t):e}function pL(){function e(r,o,l,d){const m={[r]:o,theme:l},c=d[r];if(!c)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:T,style:z}=c;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const P=xl(l,w)||{};return z?z(m):Ra(m,o,H=>{let W=sg(P,T,H);return H===W&&typeof H=="string"&&(W=sg(P,T,`${r}${H==="default"?"":Ft(H)}`,H)),b===!1?W:{[b]:W}})}function t(r){const{sx:o,theme:l={}}=r||{};if(!o)return null;const d=l.unstable_sxConfig??py;function m(c){let b=c;if(typeof c=="function")b=c(l);else if(typeof c!="object")return c;if(!b)return null;const w=nT(l.breakpoints),T=Object.keys(w);let z=w;return Object.keys(b).forEach(P=>{const U=hL(b[P],l);if(U!=null)if(typeof U=="object")if(d[P])z=Uh(z,e(P,U,l,d));else{const H=Ra({theme:l},U,W=>({[P]:W}));dL(H,U)?z[P]=t({sx:U,theme:l}):z=Uh(z,H)}else z=Uh(z,e(P,U,l,d))}),xR(l,iT(T,z))}return Array.isArray(o)?o.map(m):m(o)}return t}const fy=pL();fy.filterProps=["sx"];function sT(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const fL=["breakpoints","palette","spacing","shape"];function Nx(e={},...t){const{breakpoints:r={},palette:o={},spacing:l,shape:d={}}=e,m=qt(e,fL),c=tT(r),b=aT(l);let w=ia({breakpoints:c,direction:"ltr",components:{},palette:K({mode:"light"},o),spacing:b,shape:K({},CR,d)},m);return w=rT(w),w.applyStyles=sT,w=t.reduce((T,z)=>ia(T,z),w),w.unstable_sxConfig=K({},py,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(z){return fy({sx:z,theme:this})},w}function mL(e){return Object.keys(e).length===0}function lT(e=null){const t=O.useContext(od);return!t||mL(t)?e:t}const gL=Nx();function cT(e=gL){return lT(e)}function yL({styles:e,themeId:t,defaultTheme:r={}}){const o=cT(r),l=typeof e=="function"?e(t&&o[t]||o):e;return ae.jsx(Qk,{styles:l})}const vL=["sx"],_L=e=>{var o;const t={systemProps:{},otherProps:{}},r=((o=e==null?void 0:e.theme)==null?void 0:o.unstable_sxConfig)??py;return Object.keys(e).forEach(l=>{r[l]?t.systemProps[l]=e[l]:t.otherProps[l]=e[l]}),t};function uT(e){const{sx:t}=e,r=qt(e,vL),{systemProps:o,otherProps:l}=_L(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...m)=>{const c=t(...m);return nl(c)?K({},o,c):o}:d=K({},o,t),K({},l,{sx:d})}const yS=e=>e,xL=()=>{let e=yS;return{configure(t){e=t},generate(t){return e(t)},reset(){e=yS}}},bL=xL();function dT(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=dT(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ji(){for(var e,t,r=0,o="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=dT(e))&&(o&&(o+=" "),o+=t);return o}const hT={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function jx(e,t,r="Mui"){const o=hT[t];return o?`${r}-${o}`:`${bL.generate(e)}-${t}`}function wL(e,t,r="Mui"){const o={};return t.forEach(l=>{o[l]=jx(e,l,r)}),o}var pT={exports:{}},Zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=Symbol.for("react.element"),Ux=Symbol.for("react.portal"),my=Symbol.for("react.fragment"),gy=Symbol.for("react.strict_mode"),yy=Symbol.for("react.profiler"),vy=Symbol.for("react.provider"),_y=Symbol.for("react.context"),SL=Symbol.for("react.server_context"),xy=Symbol.for("react.forward_ref"),by=Symbol.for("react.suspense"),wy=Symbol.for("react.suspense_list"),Sy=Symbol.for("react.memo"),Cy=Symbol.for("react.lazy"),CL=Symbol.for("react.offscreen"),fT;fT=Symbol.for("react.module.reference");function pa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Vx:switch(e=e.type,e){case my:case yy:case gy:case by:case wy:return e;default:switch(e=e&&e.$$typeof,e){case SL:case _y:case xy:case Cy:case Sy:case vy:return e;default:return t}}case Ux:return t}}}Zr.ContextConsumer=_y;Zr.ContextProvider=vy;Zr.Element=Vx;Zr.ForwardRef=xy;Zr.Fragment=my;Zr.Lazy=Cy;Zr.Memo=Sy;Zr.Portal=Ux;Zr.Profiler=yy;Zr.StrictMode=gy;Zr.Suspense=by;Zr.SuspenseList=wy;Zr.isAsyncMode=function(){return!1};Zr.isConcurrentMode=function(){return!1};Zr.isContextConsumer=function(e){return pa(e)===_y};Zr.isContextProvider=function(e){return pa(e)===vy};Zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vx};Zr.isForwardRef=function(e){return pa(e)===xy};Zr.isFragment=function(e){return pa(e)===my};Zr.isLazy=function(e){return pa(e)===Cy};Zr.isMemo=function(e){return pa(e)===Sy};Zr.isPortal=function(e){return pa(e)===Ux};Zr.isProfiler=function(e){return pa(e)===yy};Zr.isStrictMode=function(e){return pa(e)===gy};Zr.isSuspense=function(e){return pa(e)===by};Zr.isSuspenseList=function(e){return pa(e)===wy};Zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===my||e===yy||e===gy||e===by||e===wy||e===CL||typeof e=="object"&&e!==null&&(e.$$typeof===Cy||e.$$typeof===Sy||e.$$typeof===vy||e.$$typeof===_y||e.$$typeof===xy||e.$$typeof===fT||e.getModuleId!==void 0)};Zr.typeOf=pa;pT.exports=Zr;var vS=pT.exports;const kL=["ownerState"],TL=["variants"],IL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function PL(e){return Object.keys(e).length===0}function EL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function v0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const zL=Nx(),AL=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function gm({defaultTheme:e,theme:t,themeId:r}){return PL(t)?e:t[r]||t}function ML(e){return e?(t,r)=>r[e]:null}function Um(e,t){let{ownerState:r}=t,o=qt(t,kL);const l=typeof e=="function"?e(K({ownerState:r},o)):e;if(Array.isArray(l))return l.flatMap(d=>Um(d,K({ownerState:r},o)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:d=[]}=l;let c=qt(l,TL);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props(K({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style(K({ownerState:r},o,r)):b.style))}),c}return l}function mT(e={}){const{themeId:t,defaultTheme:r=zL,rootShouldForwardProp:o=v0,slotShouldForwardProp:l=v0}=e,d=m=>fy(K({},m,{theme:gm(K({},m,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(m,c={})=>{yR(m,ie=>ie.filter(me=>!(me!=null&&me.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:z,overridesResolver:P=ML(AL(w))}=c,U=qt(c,IL),H=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,W=z||!1;let J,j=v0;w==="Root"||w==="root"?j=o:w?j=l:EL(m)&&(j=void 0);const $=gR(m,K({shouldForwardProp:j,label:J},U)),G=ie=>typeof ie=="function"&&ie.__emotion_real!==ie||nl(ie)?me=>Um(ie,K({},me,{theme:gm({theme:me.theme,defaultTheme:r,themeId:t})})):ie,te=(ie,...me)=>{let Z=G(ie);const de=me?me.map(G):[];b&&P&&de.push(De=>{const ke=gm(K({},De,{defaultTheme:r,themeId:t}));if(!ke.components||!ke.components[b]||!ke.components[b].styleOverrides)return null;const Ee=ke.components[b].styleOverrides,He={};return Object.entries(Ee).forEach(([Fe,Ae])=>{He[Fe]=Um(Ae,K({},De,{theme:ke}))}),P(De,He)}),b&&!H&&de.push(De=>{var He,Fe;const ke=gm(K({},De,{defaultTheme:r,themeId:t})),Ee=(Fe=(He=ke==null?void 0:ke.components)==null?void 0:He[b])==null?void 0:Fe.variants;return Um({variants:Ee},K({},De,{theme:ke}))}),W||de.push(d);const Te=de.length-me.length;if(Array.isArray(ie)&&Te>0){const De=new Array(Te).fill("");Z=[...ie,...De],Z.raw=[...ie.raw,...De]}const ve=$(Z,...de);return m.muiName&&(ve.muiName=m.muiName),ve};return $.withConfig&&(te.withConfig=$.withConfig),te}}const DL=mT();function gT(e,t){const r=K({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=K({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const l=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=l:!l||!Object.keys(l)?r[o]=d:(r[o]=K({},d),Object.keys(l).forEach(m=>{r[o][m]=gT(l[m],d[m])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function RL(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:gT(t.components[r].defaultProps,o)}function yT({props:e,name:t,defaultTheme:r,themeId:o}){let l=cT(r);return o&&(l=l[o]||l),RL({theme:l,name:t,props:e})}const uc=typeof window<"u"?O.useLayoutEffect:O.useEffect;function LL(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function vT(e){if(e.type)return e;if(e.charAt(0)==="#")return vT(LL(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(op(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(op(10,l))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:l}}const Kl=e=>{const t=vT(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function _S(...e){return e.reduce((t,r)=>r==null?t:function(...l){t.apply(this,l),r.apply(this,l)},()=>{})}function _T(e,t){var r,o,l;return O.isValidElement(e)&&t.indexOf(e.type.muiName??((l=(o=(r=e.type)==null?void 0:r._payload)==null?void 0:o.value)==null?void 0:l.muiName))!==-1}function Ya(e){return e&&e.ownerDocument||document}function Hx(e){return Ya(e).defaultView||window}function lg(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let xS=0;function $L(e){const[t,r]=O.useState(e),o=e||t;return O.useEffect(()=>{t==null&&(xS+=1,r(`mui-${xS}`))},[t]),o}const bS=ig.useId;function La(e){if(bS!==void 0){const t=bS();return e??t}return $L(e)}function Mu({controlled:e,default:t,name:r,state:o="value"}){const{current:l}=O.useRef(e!==void 0),[d,m]=O.useState(t),c=l?e:d,b=O.useCallback(w=>{l||m(w)},[]);return[c,b]}function ll(e){const t=O.useRef(e);return uc(()=>{t.current=e}),O.useRef((...r)=>(0,t.current)(...r)).current}function cn(...e){return O.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{lg(r,t)})},e)}const wS={};function BL(e,t){const r=O.useRef(wS);return r.current===wS&&(r.current=e(t)),r}const OL=[];function FL(e){O.useEffect(e,OL)}class jp{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new jp}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function ym(){const e=BL(jp.create).current;return FL(e.disposeEffect),e}let ky=!0,c_=!1;const NL=new jp,jL={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function VL(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&jL[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function UL(e){e.metaKey||e.altKey||e.ctrlKey||(ky=!0)}function _0(){ky=!1}function HL(){this.visibilityState==="hidden"&&c_&&(ky=!0)}function WL(e){e.addEventListener("keydown",UL,!0),e.addEventListener("mousedown",_0,!0),e.addEventListener("pointerdown",_0,!0),e.addEventListener("touchstart",_0,!0),e.addEventListener("visibilitychange",HL,!0)}function GL(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return ky||VL(t)}function Wx(){const e=O.useCallback(l=>{l!=null&&WL(l.ownerDocument)},[]),t=O.useRef(!1);function r(){return t.current?(c_=!0,NL.start(100,()=>{c_=!1}),t.current=!1,!0):!1}function o(l){return GL(l)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function qL(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const ZL=e=>{const t=O.useRef({});return O.useEffect(()=>{t.current=e}),t.current},KL={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},XL=KL;function Kr(e,t,r=void 0){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((d,m)=>{if(m){const c=t(m);c!==""&&d.push(c),r&&r[m]&&d.push(r[m])}return d},[]).join(" ")}),o}const JL=O.createContext(null),xT=JL;function Gx(){return O.useContext(xT)}const YL=typeof Symbol=="function"&&Symbol.for,QL=YL?Symbol.for("mui.nested"):"__THEME_NESTED__";function e5(e,t){return typeof t=="function"?t(e):K({},e,t)}function t5(e){const{children:t,theme:r}=e,o=Gx(),l=O.useMemo(()=>{const d=o===null?r:e5(o,r);return d!=null&&(d[QL]=o!==null),d},[r,o]);return ae.jsx(xT.Provider,{value:l,children:t})}const r5=["value"],n5=O.createContext();function i5(e){let{value:t}=e,r=qt(e,r5);return ae.jsx(n5.Provider,K({value:t??!0},r))}const SS={};function CS(e,t,r,o=!1){return O.useMemo(()=>{const l=e&&t[e]||t;if(typeof r=="function"){const d=r(l),m=e?K({},t,{[e]:d}):d;return o?()=>m:m}return e?K({},t,{[e]:r}):K({},t,r)},[e,t,r,o])}function o5(e){const{children:t,theme:r,themeId:o}=e,l=lT(SS),d=Gx()||SS,m=CS(o,l,r),c=CS(o,d,r,!0),b=m.direction==="rtl";return ae.jsx(t5,{theme:c,children:ae.jsx(od.Provider,{value:m,children:ae.jsx(i5,{value:b,children:t})})})}const qx="mode",Zx="color-scheme",bT="data-color-scheme";function a5(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:l=qx,colorSchemeStorageKey:d=Zx,attribute:m=bT,colorSchemeNode:c="document.documentElement"}=e||{};return ae.jsx("script",{dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${l}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${o}';
  }
  if (colorScheme) {
    ${c}.setAttribute('${m}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function kS(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function wT(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function s5(e){return wT(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function x0(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function l5(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:l=[],modeStorageKey:d=qx,colorSchemeStorageKey:m=Zx,storageWindow:c=typeof window>"u"?void 0:window}=e,b=l.join(","),[w,T]=O.useState(()=>{const J=x0(d,t),j=x0(`${m}-light`,r),$=x0(`${m}-dark`,o);return{mode:J,systemMode:kS(J),lightColorScheme:j,darkColorScheme:$}}),z=s5(w),P=O.useCallback(J=>{T(j=>{if(J===j.mode)return j;const $=J??t;try{localStorage.setItem(d,$)}catch{}return K({},j,{mode:$,systemMode:kS($)})})},[d,t]),U=O.useCallback(J=>{J?typeof J=="string"?J&&!b.includes(J)?console.error(`\`${J}\` does not exist in \`theme.colorSchemes\`.`):T(j=>{const $=K({},j);return wT(j,G=>{try{localStorage.setItem(`${m}-${G}`,J)}catch{}G==="light"&&($.lightColorScheme=J),G==="dark"&&($.darkColorScheme=J)}),$}):T(j=>{const $=K({},j),G=J.light===null?r:J.light,te=J.dark===null?o:J.dark;if(G)if(!b.includes(G))console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`);else{$.lightColorScheme=G;try{localStorage.setItem(`${m}-light`,G)}catch{}}if(te)if(!b.includes(te))console.error(`\`${te}\` does not exist in \`theme.colorSchemes\`.`);else{$.darkColorScheme=te;try{localStorage.setItem(`${m}-dark`,te)}catch{}}return $}):T(j=>{try{localStorage.setItem(`${m}-light`,r),localStorage.setItem(`${m}-dark`,o)}catch{}return K({},j,{lightColorScheme:r,darkColorScheme:o})})},[b,m,r,o]),H=O.useCallback(J=>{w.mode==="system"&&T(j=>{const $=J!=null&&J.matches?"dark":"light";return j.systemMode===$?j:K({},j,{systemMode:$})})},[w.mode]),W=O.useRef(H);return W.current=H,O.useEffect(()=>{const J=(...$)=>W.current(...$),j=window.matchMedia("(prefers-color-scheme: dark)");return j.addListener(J),J(j),()=>{j.removeListener(J)}},[]),O.useEffect(()=>{if(c){const J=j=>{const $=j.newValue;typeof j.key=="string"&&j.key.startsWith(m)&&(!$||b.match($))&&(j.key.endsWith("light")&&U({light:$}),j.key.endsWith("dark")&&U({dark:$})),j.key===d&&(!$||["light","dark","system"].includes($))&&P($||t)};return c.addEventListener("storage",J),()=>{c.removeEventListener("storage",J)}}},[U,P,d,m,b,t,c]),K({},w,{colorScheme:z,setMode:P,setColorScheme:U})}const c5=["colorSchemes","components","cssVarPrefix"],u5="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function d5(e){const{themeId:t,theme:r={},attribute:o=bT,modeStorageKey:l=qx,colorSchemeStorageKey:d=Zx,defaultMode:m="light",defaultColorScheme:c,disableTransitionOnChange:b=!1,resolveTheme:w}=e;(!r.colorSchemes||typeof c=="string"&&!r.colorSchemes[c]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.light]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.dark])&&console.error(`MUI: \`${c}\` does not exist in \`theme.colorSchemes\`.`);const T=O.createContext(void 0),z=()=>{const J=O.useContext(T);if(!J)throw new Error(op(19));return J};function P(J){var kr,Pr;const{children:j,theme:$=r,modeStorageKey:G=l,colorSchemeStorageKey:te=d,attribute:ie=o,defaultMode:me=m,defaultColorScheme:Z=c,disableTransitionOnChange:de=b,storageWindow:Te=typeof window>"u"?void 0:window,documentNode:ve=typeof document>"u"?void 0:document,colorSchemeNode:De=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:ke=":root",disableNestedContext:Ee=!1,disableStyleSheetGeneration:He=!1}=J,Fe=O.useRef(!1),Ae=Gx(),Ge=O.useContext(T),Re=!!Ge&&!Ee,Ze=$[t],Je=Ze||$,{colorSchemes:dt={},components:vt={},cssVarPrefix:mt}=Je,Ct=qt(Je,c5),zt=Object.keys(dt),Zt=typeof Z=="string"?Z:Z.light,kt=typeof Z=="string"?Z:Z.dark,{mode:$e,setMode:rt,systemMode:ht,lightColorScheme:At,darkColorScheme:Et,colorScheme:gr,setColorScheme:Cr}=l5({supportedColorSchemes:zt,defaultLightColorScheme:Zt,defaultDarkColorScheme:kt,modeStorageKey:G,colorSchemeStorageKey:te,defaultMode:me,storageWindow:Te});let lr=$e,yt=gr;Re&&(lr=Ge.mode,yt=Ge.colorScheme);const Mr=lr||(me==="system"?m:me),er=yt||(Mr==="dark"?kt:Zt),Lr=((kr=Ct.generateThemeVars)==null?void 0:kr.call(Ct))||Ct.vars,Pe=K({},Ct,{components:vt,colorSchemes:dt,cssVarPrefix:mt,vars:Lr});typeof Pe.generateSpacing=="function"&&(Pe.spacing=Pe.generateSpacing()),Object.entries(dt).forEach(([sr,nr])=>{sr===er&&(Object.keys(nr).forEach(rr=>{nr[rr]&&typeof nr[rr]=="object"?Pe[rr]=K({},Pe[rr],nr[rr]):Pe[rr]=nr[rr]}),Pe.palette&&(Pe.palette.colorScheme=sr))});const cr=typeof Z=="string"?Z:me==="dark"?Z.dark:Z.light;$.defaultColorScheme=cr,$.colorSchemeSelector=ke,$.attribute=ie,Pe.getColorSchemeSelector||(Pe.getColorSchemeSelector=sr=>`[${ie}="${sr}"] &`),O.useEffect(()=>{yt&&De&&De.setAttribute(ie,yt)},[yt,ie,De]),O.useEffect(()=>{let sr;if(de&&Fe.current&&ve){const nr=ve.createElement("style");nr.appendChild(ve.createTextNode(u5)),ve.head.appendChild(nr),window.getComputedStyle(ve.body),sr=setTimeout(()=>{ve.head.removeChild(nr)},1)}return()=>{clearTimeout(sr)}},[yt,de,ve]),O.useEffect(()=>(Fe.current=!0,()=>{Fe.current=!1}),[]);const ir=O.useMemo(()=>({allColorSchemes:zt,colorScheme:yt,darkColorScheme:Et,lightColorScheme:At,mode:lr,setColorScheme:Cr,setMode:rt,systemMode:ht}),[zt,yt,Et,At,lr,Cr,rt,ht]);let Bt=!0;(He||Re&&(Ae==null?void 0:Ae.cssVarPrefix)===mt)&&(Bt=!1);const Gt=ae.jsxs(O.Fragment,{children:[Bt&&ae.jsx(O.Fragment,{children:(((Pr=Pe.generateStyleSheets)==null?void 0:Pr.call(Pe))||[]).map((sr,nr)=>ae.jsx(Qk,{styles:sr},nr))}),ae.jsx(o5,{themeId:Ze?t:void 0,theme:w?w(Pe):Pe,children:j})]});return Re?Gt:ae.jsx(T.Provider,{value:ir,children:Gt})}const U=typeof c=="string"?c:c.light,H=typeof c=="string"?c:c.dark;return{CssVarsProvider:P,useColorScheme:z,getInitColorSchemeScript:J=>a5(K({attribute:o,colorSchemeStorageKey:d,defaultMode:m,defaultLightColorScheme:U,defaultDarkColorScheme:H,modeStorageKey:l},J))}}function Kx(e=""){function t(...o){if(!o.length)return"";const l=o[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${l}${t(...o.slice(1))})`:`, ${l}`}return(o,...l)=>`var(--${e?`${e}-`:""}${o}${t(...l)})`}const TS=(e,t,r,o=[])=>{let l=e;t.forEach((d,m)=>{m===t.length-1?Array.isArray(l)?l[Number(d)]=r:l&&typeof l=="object"&&(l[d]=r):l&&typeof l=="object"&&(l[d]||(l[d]=o.includes(d)?[]:{}),l=l[d])})},h5=(e,t,r)=>{function o(l,d=[],m=[]){Object.entries(l).forEach(([c,b])=>{(!r||r&&!r([...d,c]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...d,c],Array.isArray(b)?[...m,c]:m):t([...d,c],b,m))})}o(e)},p5=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function b0(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t||{},l={},d={},m={};return h5(e,(c,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(c,b))){const T=`--${r?`${r}-`:""}${c.join("-")}`,z=p5(c,b);Object.assign(l,{[T]:z}),TS(d,c,`var(${T})`,w),TS(m,c,`var(${T}, ${z})`,w)}},c=>c[0]==="vars"),{css:l,vars:d,varsWithDefaults:m}}function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function f5(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(cp(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IS(e){var t=f5(e,"string");return cp(t)=="symbol"?t:t+""}const m5=["getSelector"],g5=["colorSchemes","components","defaultColorScheme"];function y5(e,t={}){let{getSelector:r}=t,o=qt(t,m5);const{colorSchemes:l={},defaultColorScheme:d="light"}=e,m=qt(e,g5),{vars:c,css:b,varsWithDefaults:w}=b0(m,o);let T=w;const z={},{[d]:P}=l,U=qt(l,[d].map(IS));if(Object.entries(U||{}).forEach(([J,j])=>{const{vars:$,css:G,varsWithDefaults:te}=b0(j,o);T=ia(T,te),z[J]={css:G,vars:$}}),P){const{css:J,vars:j,varsWithDefaults:$}=b0(P,o);T=ia(T,$),z[d]={css:J,vars:j}}return{vars:T,generateThemeVars:()=>{let J=K({},c);return Object.entries(z).forEach(([,{vars:j}])=>{J=ia(J,j)}),J},generateStyleSheets:()=>{const J=[],j=e.defaultColorScheme||"light";function $(ie,me){Object.keys(me).length&&J.push(typeof ie=="string"?{[ie]:K({},me)}:ie)}$((r==null?void 0:r(void 0,K({},b)))||":root",b);const{[j]:G}=z,te=qt(z,[j].map(IS));if(G){const{css:ie}=G;$((r==null?void 0:r(j,K({},ie)))||`[${e.attribute||"data-color-scheme"}="${j}"]`,ie)}return Object.entries(te).forEach(([ie,{css:me}])=>{$((r==null?void 0:r(ie,K({},me)))||`[${e.attribute||"data-color-scheme"}="${ie}"]`,me)}),J}}}const v5=["component","direction","spacing","divider","children","className","useFlexGap"],_5=Nx(),x5=DL("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function b5(e){return yT({props:e,name:"MuiStack",defaultTheme:_5})}function w5(e,t){const r=O.Children.toArray(e).filter(Boolean);return r.reduce((o,l,d)=>(o.push(l),d<r.length-1&&o.push(O.cloneElement(t,{key:`separator-${d}`})),o),[])}const S5=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],C5=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},Ra({theme:t},y0({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=sy(t),l=Object.keys(t.breakpoints.values).reduce((b,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(b[w]=!0),b),{}),d=y0({values:e.direction,base:l}),m=y0({values:e.spacing,base:l});typeof d=="object"&&Object.keys(d).forEach((b,w,T)=>{if(!d[b]){const P=w>0?d[T[w-1]]:"column";d[b]=P}}),r=ia(r,Ra({theme:t},m,(b,w)=>e.useFlexGap?{gap:cc(o,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${S5(w?d[w]:e.direction)}`]:cc(o,b)}}))}return r=TR(t.breakpoints,r),r};function k5(e={}){const{createStyledComponent:t=x5,useThemeProps:r=b5,componentName:o="MuiStack"}=e,l=()=>Kr({root:["root"]},b=>jx(o,b),{}),d=t(C5);return O.forwardRef(function(b,w){const T=r(b),z=uT(T),{component:P="div",direction:U="column",spacing:H=0,divider:W,children:J,className:j,useFlexGap:$=!1}=z,G=qt(z,v5),te={direction:U,spacing:H,useFlexGap:$},ie=l();return ae.jsx(d,K({as:P,ownerState:te,ref:w,className:ji(ie.root,j)},G,{children:W?w5(J,W):J}))})}const T5=K({},py,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}}),I5=T5;function P5(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Qr=(e,t)=>jx(e,t,"Mui"),Hr=(e,t)=>wL(e,t,"Mui"),E5=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),PS=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},ES=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([l,d])=>{if(l.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const m=r?r(l):d;l.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),l.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),l.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),PS(o,l,m)}}),o},Ri=(e,t)=>{let r={};if(t){const{getCssVar:o,palette:l}=t;Object.entries(l).forEach(d=>{const[m,c]=d;E5(c)&&typeof c=="object"&&(r=K({},r,{[m]:ES(e,c,b=>`var(--variant-${b}, ${o(`palette-${m}-${b}`,l[m][b])})`)}))})}return r.context=ES(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},z5=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar","getSelector"],A5=["colorSchemes"];function ST(e){return typeof e=="number"?`${e}px`:typeof e=="string"?e:typeof e=="function"?ST(e(1)):Array.isArray(e)?e:"8px"}const M5=(e="joy")=>Kx(e);function D5(e){var Je,dt,vt,mt,Ct,zt,Zt,kt;const t=e||{},{cssVarPrefix:r="joy",breakpoints:o,spacing:l,components:d,variants:m,shouldSkipGeneratingVar:c=P5,getSelector:b}=t,w=qt(t,z5),T=M5(r),z={primary:_h.blue,neutral:_h.grey,danger:_h.red,success:_h.green,warning:_h.yellow,common:{white:"#FFF",black:"#000"}},P=$e=>{var Et;const rt=$e.split("-"),ht=rt[1],At=rt[2];return T($e,(Et=z[ht])==null?void 0:Et[At])},U=$e=>({plainColor:P(`palette-${$e}-500`),plainHoverBg:P(`palette-${$e}-100`),plainActiveBg:P(`palette-${$e}-200`),plainDisabledColor:P("palette-neutral-400"),outlinedColor:P(`palette-${$e}-500`),outlinedBorder:P(`palette-${$e}-300`),outlinedHoverBg:P(`palette-${$e}-100`),outlinedActiveBg:P(`palette-${$e}-200`),outlinedDisabledColor:P("palette-neutral-400"),outlinedDisabledBorder:P("palette-neutral-200"),softColor:P(`palette-${$e}-700`),softBg:P(`palette-${$e}-100`),softHoverBg:P(`palette-${$e}-200`),softActiveColor:P(`palette-${$e}-800`),softActiveBg:P(`palette-${$e}-300`),softDisabledColor:P("palette-neutral-400"),softDisabledBg:P("palette-neutral-50"),solidColor:P("palette-common-white"),solidBg:P(`palette-${$e}-500`),solidHoverBg:P(`palette-${$e}-600`),solidActiveBg:P(`palette-${$e}-700`),solidDisabledColor:P("palette-neutral-400"),solidDisabledBg:P("palette-neutral-100")}),H=$e=>({plainColor:P(`palette-${$e}-300`),plainHoverBg:P(`palette-${$e}-800`),plainActiveBg:P(`palette-${$e}-700`),plainDisabledColor:P("palette-neutral-500"),outlinedColor:P(`palette-${$e}-200`),outlinedBorder:P(`palette-${$e}-700`),outlinedHoverBg:P(`palette-${$e}-800`),outlinedActiveBg:P(`palette-${$e}-700`),outlinedDisabledColor:P("palette-neutral-500"),outlinedDisabledBorder:P("palette-neutral-800"),softColor:P(`palette-${$e}-200`),softBg:P(`palette-${$e}-800`),softHoverBg:P(`palette-${$e}-700`),softActiveColor:P(`palette-${$e}-100`),softActiveBg:P(`palette-${$e}-600`),softDisabledColor:P("palette-neutral-500"),softDisabledBg:P("palette-neutral-800"),solidColor:P("palette-common-white"),solidBg:P(`palette-${$e}-500`),solidHoverBg:P(`palette-${$e}-600`),solidActiveBg:P(`palette-${$e}-700`),solidDisabledColor:P("palette-neutral-500"),solidDisabledBg:P("palette-neutral-800")}),W={palette:{mode:"light",primary:K({},z.primary,U("primary")),neutral:K({},z.neutral,U("neutral"),{plainColor:P("palette-neutral-700"),plainHoverColor:P("palette-neutral-900"),outlinedColor:P("palette-neutral-700")}),danger:K({},z.danger,U("danger")),success:K({},z.success,U("success")),warning:K({},z.warning,U("warning")),common:{white:"#FFF",black:"#000"},text:{primary:P("palette-neutral-800"),secondary:P("palette-neutral-700"),tertiary:P("palette-neutral-600"),icon:P("palette-neutral-500")},background:{body:P("palette-common-white"),surface:P("palette-neutral-50"),popup:P("palette-common-white"),level1:P("palette-neutral-100"),level2:P("palette-neutral-200"),level3:P("palette-neutral-300"),tooltip:P("palette-neutral-500"),backdrop:`rgba(${T("palette-neutral-darkChannel",Kl(z.neutral[900]))} / 0.25)`},divider:`rgba(${T("palette-neutral-mainChannel",Kl(z.neutral[500]))} / 0.2)`,focusVisible:P("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},J={palette:{mode:"dark",primary:K({},z.primary,H("primary")),neutral:K({},z.neutral,H("neutral"),{plainColor:P("palette-neutral-300"),plainHoverColor:P("palette-neutral-300")}),danger:K({},z.danger,H("danger")),success:K({},z.success,H("success")),warning:K({},z.warning,H("warning")),common:{white:"#FFF",black:"#000"},text:{primary:P("palette-neutral-100"),secondary:P("palette-neutral-300"),tertiary:P("palette-neutral-400"),icon:P("palette-neutral-400")},background:{body:P("palette-common-black"),surface:P("palette-neutral-900"),popup:P("palette-common-black"),level1:P("palette-neutral-800"),level2:P("palette-neutral-700"),level3:P("palette-neutral-600"),tooltip:P("palette-neutral-600"),backdrop:`rgba(${T("palette-neutral-darkChannel",Kl(z.neutral[50]))} / 0.25)`},divider:`rgba(${T("palette-neutral-mainChannel",Kl(z.neutral[500]))} / 0.16)`,focusVisible:P("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},j='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',$=K({body:`"Inter", ${T(`fontFamily-fallback, ${j}`)}`,display:`"Inter", ${T(`fontFamily-fallback, ${j}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:j},w.fontFamily),G=K({sm:300,md:500,lg:600,xl:700},w.fontWeight),te=K({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},w.fontSize),ie=K({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},w.lineHeight),me=((dt=(Je=w.colorSchemes)==null?void 0:Je.light)==null?void 0:dt.shadowRing)??W.shadowRing,Z=((mt=(vt=w.colorSchemes)==null?void 0:vt.light)==null?void 0:mt.shadowChannel)??W.shadowChannel,de=((zt=(Ct=w.colorSchemes)==null?void 0:Ct.light)==null?void 0:zt.shadowOpacity)??W.shadowOpacity,Te={colorSchemes:{light:W,dark:J},fontSize:te,fontFamily:$,fontWeight:G,focus:{thickness:"2px",selector:`&.${Qr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${T("focus-thickness",((Zt=w.focus)==null?void 0:Zt.thickness)??"2px")})`,outline:`${T("focus-thickness",((kt=w.focus)==null?void 0:kt.thickness)??"2px")} solid ${T("palette-focusVisible",z.primary[500])}`}},lineHeight:ie,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${T("shadowRing",me)}, 0px 1px 2px 0px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)})`,sm:`${T("shadowRing",me)}, 0px 1px 2px 0px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)}), 0px 2px 4px 0px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)})`,md:`${T("shadowRing",me)}, 0px 2px 8px -2px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)}), 0px 6px 12px -2px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)})`,lg:`${T("shadowRing",me)}, 0px 2px 8px -2px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)}), 0px 12px 16px -4px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)})`,xl:`${T("shadowRing",me)}, 0px 2px 8px -2px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)}), 0px 20px 24px -4px rgba(${T("shadowChannel",Z)} / ${T("shadowOpacity",de)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:T(`fontFamily-display, ${$.display}`),fontWeight:T(`fontWeight-xl, ${G.xl}`),fontSize:T(`fontSize-xl4, ${te.xl4}`),lineHeight:T(`lineHeight-xs, ${ie.xs}`),letterSpacing:"-0.025em",color:T(`palette-text-primary, ${W.palette.text.primary}`)},h2:{fontFamily:T(`fontFamily-display, ${$.display}`),fontWeight:T(`fontWeight-xl, ${G.xl}`),fontSize:T(`fontSize-xl3, ${te.xl3}`),lineHeight:T(`lineHeight-xs, ${ie.xs}`),letterSpacing:"-0.025em",color:T(`palette-text-primary, ${W.palette.text.primary}`)},h3:{fontFamily:T(`fontFamily-display, ${$.display}`),fontWeight:T(`fontWeight-lg, ${G.lg}`),fontSize:T(`fontSize-xl2, ${te.xl2}`),lineHeight:T(`lineHeight-xs, ${ie.xs}`),letterSpacing:"-0.025em",color:T(`palette-text-primary, ${W.palette.text.primary}`)},h4:{fontFamily:T(`fontFamily-display, ${$.display}`),fontWeight:T(`fontWeight-lg, ${G.lg}`),fontSize:T(`fontSize-xl, ${te.xl}`),lineHeight:T(`lineHeight-md, ${ie.md}`),letterSpacing:"-0.025em",color:T(`palette-text-primary, ${W.palette.text.primary}`)},"title-lg":{fontFamily:T(`fontFamily-body, ${$.body}`),fontWeight:T(`fontWeight-lg, ${G.lg}`),fontSize:T(`fontSize-lg, ${te.lg}`),lineHeight:T(`lineHeight-xs, ${ie.xs}`),color:T(`palette-text-primary, ${W.palette.text.primary}`)},"title-md":{fontFamily:T(`fontFamily-body, ${$.body}`),fontWeight:T(`fontWeight-md, ${G.md}`),fontSize:T(`fontSize-md, ${te.md}`),lineHeight:T(`lineHeight-md, ${ie.md}`),color:T(`palette-text-primary, ${W.palette.text.primary}`)},"title-sm":{fontFamily:T(`fontFamily-body, ${$.body}`),fontWeight:T(`fontWeight-md, ${G.md}`),fontSize:T(`fontSize-sm, ${te.sm}`),lineHeight:T(`lineHeight-sm, ${ie.sm}`),color:T(`palette-text-primary, ${W.palette.text.primary}`)},"body-lg":{fontFamily:T(`fontFamily-body, ${$.body}`),fontSize:T(`fontSize-lg, ${te.lg}`),lineHeight:T(`lineHeight-md, ${ie.md}`),color:T(`palette-text-secondary, ${W.palette.text.secondary}`)},"body-md":{fontFamily:T(`fontFamily-body, ${$.body}`),fontSize:T(`fontSize-md, ${te.md}`),lineHeight:T(`lineHeight-md, ${ie.md}`),color:T(`palette-text-secondary, ${W.palette.text.secondary}`)},"body-sm":{fontFamily:T(`fontFamily-body, ${$.body}`),fontSize:T(`fontSize-sm, ${te.sm}`),lineHeight:T(`lineHeight-md, ${ie.md}`),color:T(`palette-text-tertiary, ${W.palette.text.tertiary}`)},"body-xs":{fontFamily:T(`fontFamily-body, ${$.body}`),fontWeight:T(`fontWeight-md, ${G.md}`),fontSize:T(`fontSize-xs, ${te.xs}`),lineHeight:T(`lineHeight-md, ${ie.md}`),color:T(`palette-text-tertiary, ${W.palette.text.tertiary}`)}}},ve=w?ia(Te,w):Te,{colorSchemes:De}=ve,ke=qt(ve,A5);let Ee=K({colorSchemes:De,defaultColorScheme:"light"},ke,{breakpoints:tT(o??{}),components:ia({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:$e,theme:rt})=>{var At;const ht=$e.instanceFontSize;return K({margin:"var(--Icon-margin)"},$e.fontSize&&$e.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${rt.vars.fontSize[$e.fontSize]})`},!$e.htmlColor&&K({color:`var(--Icon-color, ${Ee.vars.palette.text.icon})`},$e.color&&$e.color!=="inherit"&&rt.vars.palette[$e.color]&&{color:`rgba(${(At=rt.vars.palette[$e.color])==null?void 0:At.mainChannel} / 1)`}),ht&&ht!=="inherit"&&{"--Icon-fontSize":rt.vars.fontSize[ht]})}}}},d),cssVarPrefix:r,getCssVar:T,spacing:ST(l)});Ee=rT(Ee);function He($e,rt){Object.keys(rt).forEach(ht=>{const At={main:"500",light:"200",dark:"700"};$e==="dark"&&(At.main=400),!rt[ht].mainChannel&&rt[ht][At.main]&&(rt[ht].mainChannel=Kl(rt[ht][At.main])),!rt[ht].lightChannel&&rt[ht][At.light]&&(rt[ht].lightChannel=Kl(rt[ht][At.light])),!rt[ht].darkChannel&&rt[ht][At.dark]&&(rt[ht].darkChannel=Kl(rt[ht][At.dark]))})}Object.entries(Ee.colorSchemes).forEach(([$e,rt])=>{He($e,rt.palette)});const Fe={prefix:r,shouldSkipGeneratingVar:c,getSelector:b||($e=>Ee.defaultColorScheme===$e?`${Ee.colorSchemeSelector}, [${Ee.attribute}="${$e}"]`:$e?`[${Ee.attribute}="${$e}"]`:Ee.colorSchemeSelector)},{vars:Ae,generateThemeVars:Ge,generateStyleSheets:Re}=y5(Ee,Fe);Ee.attribute="data-joy-color-scheme",Ee.colorSchemeSelector=":root",Ee.vars=Ae,Ee.generateThemeVars=Ge,Ee.generateStyleSheets=Re,Ee.generateSpacing=function(){return aT(l,sy(this))},Ee.spacing=Ee.generateSpacing(),Ee.unstable_sxConfig=K({},I5,e==null?void 0:e.unstable_sxConfig),Ee.unstable_sx=function(rt){return fy({sx:rt,theme:this})},Ee.getColorSchemeSelector=$e=>`[${Ee.attribute}="${$e}"] &`;const Ze={getCssVar:T,palette:Ee.colorSchemes.light.palette};return Ee.variants=ia({plain:Ri("plain",Ze),plainHover:Ri("plainHover",Ze),plainActive:Ri("plainActive",Ze),plainDisabled:Ri("plainDisabled",Ze),outlined:Ri("outlined",Ze),outlinedHover:Ri("outlinedHover",Ze),outlinedActive:Ri("outlinedActive",Ze),outlinedDisabled:Ri("outlinedDisabled",Ze),soft:Ri("soft",Ze),softHover:Ri("softHover",Ze),softActive:Ri("softActive",Ze),softDisabled:Ri("softDisabled",Ze),solid:Ri("solid",Ze),solidHover:Ri("solidHover",Ze),solidActive:Ri("solidActive",Ze),solidDisabled:Ri("solidDisabled",Ze)},m),Object.entries(Ee.colorSchemes[Ee.defaultColorScheme]).forEach(([$e,rt])=>{Ee[$e]=rt}),Ee.palette=K({},Ee.colorSchemes.light.palette,{colorScheme:"light"}),Ee.shouldSkipGeneratingVar=c,Ee.applyStyles=sT,Ee}const R5=D5(),Vp=R5,{CssVarsProvider:L5,useColorScheme:MW,getInitColorSchemeScript:DW}=d5({themeId:Gg,theme:Vp,attribute:"data-joy-color-scheme",modeStorageKey:"joy-mode",colorSchemeStorageKey:"joy-color-scheme",defaultColorScheme:{light:"light",dark:"dark"}}),gt=mT({defaultTheme:Vp,themeId:Gg});function en({props:e,name:t}){return yT({props:e,name:t,defaultTheme:K({},Vp,{components:{}}),themeId:Gg})}function $5(e){return ae.jsx(yL,K({},e,{defaultTheme:Vp,themeId:Gg}))}function B5(e){return typeof e=="string"}function CT(e,t,r){return e===void 0||B5(e)?t:K({},t,{ownerState:K({},t.ownerState,r)})}function zS(e,t,r=(o,l)=>o===l){return e.length===t.length&&e.every((o,l)=>r(o,t[l]))}const O5={disableDefaultClasses:!1},F5=O.createContext(O5);function N5(e){const{disableDefaultClasses:t}=O.useContext(F5);return r=>t?"":e(r)}function yo(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function kT(e,t,r){return typeof e=="function"?e(t,r):e}function j5(e){const{rootElementName:t="",componentName:r}=e,[o,l]=O.useState(t.toUpperCase()),d=O.useCallback(m=>{l((m==null?void 0:m.tagName)??"")},[]);return[o,d]}function AS(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function TT(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:l,className:d}=e;if(!t){const U=ji(r==null?void 0:r.className,d,l==null?void 0:l.className,o==null?void 0:o.className),H=K({},r==null?void 0:r.style,l==null?void 0:l.style,o==null?void 0:o.style),W=K({},r,l,o);return U.length>0&&(W.className=U),Object.keys(H).length>0&&(W.style=H),{props:W,internalRef:void 0}}const m=yo(K({},l,o)),c=AS(o),b=AS(l),w=t(m),T=ji(w==null?void 0:w.className,r==null?void 0:r.className,d,l==null?void 0:l.className,o==null?void 0:o.className),z=K({},w==null?void 0:w.style,r==null?void 0:r.style,l==null?void 0:l.style,o==null?void 0:o.style),P=K({},w,r,b,c);return T.length>0&&(P.className=T),Object.keys(z).length>0&&(P.style=z),{props:P,internalRef:w.ref}}const V5=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function U5(e){var z;const{elementType:t,externalSlotProps:r,ownerState:o,skipResolvingSlotProps:l=!1}=e,d=qt(e,V5),m=l?{}:kT(r,o),{props:c,internalRef:b}=TT(K({},d,{externalSlotProps:m})),w=cn(b,m==null?void 0:m.ref,(z=e.additionalProps)==null?void 0:z.ref);return CT(t,K({},c,{ref:w}),o)}const IT="base";function H5(e){return`${IT}--${e}`}function W5(e,t){return`${IT}-${e}-${t}`}function PT(e,t){const r=hT[t];return r?H5(r):W5(e,t)}function G5(e,t){const r={};return t.forEach(o=>{r[o]=PT(e,o)}),r}function Sl(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:l,tabIndex:d,to:m,type:c,rootElementName:b}=e,w=O.useRef(),[T,z]=O.useState(!1),{isFocusVisibleRef:P,onFocus:U,onBlur:H,ref:W}=Wx(),[J,j]=O.useState(!1);t&&!r&&J&&j(!1),O.useEffect(()=>{P.current=J},[J,P]);const[$,G]=j5({rootElementName:b??(o||m?"a":void 0),componentName:"Button"}),te=Fe=>Ae=>{var Ge;J&&Ae.preventDefault(),(Ge=Fe.onMouseLeave)==null||Ge.call(Fe,Ae)},ie=Fe=>Ae=>{var Ge;H(Ae),P.current===!1&&j(!1),(Ge=Fe.onBlur)==null||Ge.call(Fe,Ae)},me=Fe=>Ae=>{var Ge,Re;w.current||(w.current=Ae.currentTarget),U(Ae),P.current===!0&&(j(!0),(Ge=Fe.onFocusVisible)==null||Ge.call(Fe,Ae)),(Re=Fe.onFocus)==null||Re.call(Fe,Ae)},Z=()=>{const Fe=w.current;return $==="BUTTON"||$==="INPUT"&&["button","submit","reset"].includes(Fe==null?void 0:Fe.type)||$==="A"&&(Fe==null?void 0:Fe.href)},de=Fe=>Ae=>{var Ge;t||(Ge=Fe.onClick)==null||Ge.call(Fe,Ae)},Te=Fe=>Ae=>{var Ge;t||(z(!0),document.addEventListener("mouseup",()=>{z(!1)},{once:!0})),(Ge=Fe.onMouseDown)==null||Ge.call(Fe,Ae)},ve=Fe=>Ae=>{var Ge,Re;(Ge=Fe.onKeyDown)==null||Ge.call(Fe,Ae),!Ae.defaultMuiPrevented&&(Ae.target===Ae.currentTarget&&!Z()&&Ae.key===" "&&Ae.preventDefault(),Ae.target===Ae.currentTarget&&Ae.key===" "&&!t&&z(!0),Ae.target===Ae.currentTarget&&!Z()&&Ae.key==="Enter"&&!t&&((Re=Fe.onClick)==null||Re.call(Fe,Ae),Ae.preventDefault()))},De=Fe=>Ae=>{var Ge,Re;Ae.target===Ae.currentTarget&&z(!1),(Ge=Fe.onKeyUp)==null||Ge.call(Fe,Ae),Ae.target===Ae.currentTarget&&!Z()&&!t&&Ae.key===" "&&!Ae.defaultMuiPrevented&&((Re=Fe.onClick)==null||Re.call(Fe,Ae))},ke=cn(G,l,W,w),Ee={};return d!==void 0&&(Ee.tabIndex=d),$==="BUTTON"?(Ee.type=c??"button",r?Ee["aria-disabled"]=t:Ee.disabled=t):$==="INPUT"?c&&["button","submit","reset"].includes(c)&&(r?Ee["aria-disabled"]=t:Ee.disabled=t):$!==""&&(!o&&!m&&(Ee.role="button",Ee.tabIndex=d??0),t&&(Ee["aria-disabled"]=t,Ee.tabIndex=r?d??0:-1)),{getRootProps:(Fe={})=>{const Ae=K({},yo(e),yo(Fe)),Ge=K({type:c},Ae,Ee,Fe,{onBlur:ie(Ae),onClick:de(Ae),onFocus:me(Ae),onKeyDown:ve(Ae),onKeyUp:De(Ae),onMouseDown:Te(Ae),onMouseLeave:te(Ae),ref:ke});return delete Ge.onFocusVisible,Ge},focusVisible:J,setFocusVisible:j,active:T,rootRef:ke}}function q5(e,t){return e===t}const w0={},MS=()=>{};function u_(e,t){const r=K({},e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(r[o]=t[o])}),r}function Z5(e){const{nextState:t,initialState:r,stateComparers:o,onStateChange:l,controlledProps:d,lastActionRef:m}=e,c=O.useRef(r);O.useEffect(()=>{if(m.current===null)return;const b=u_(c.current,d);Object.keys(t).forEach(w=>{const T=o[w]??q5,z=t[w],P=b[w];(P==null&&z!=null||P!=null&&z==null||P!=null&&z!=null&&!T(z,P))&&(l==null||l(m.current.event??null,w,z,m.current.type??"",t))}),c.current=t,m.current=null},[c,t,m,l,o,d])}function K5(e){const t=O.useRef(null),{reducer:r,initialState:o,controlledProps:l=w0,stateComparers:d=w0,onStateChange:m=MS,actionContext:c,componentName:b=""}=e;O.useRef(l);const w=O.useCallback((U,H)=>{t.current=H;const W=u_(U,l);return r(W,H)},[l,r]),[T,z]=O.useReducer(w,o),P=O.useCallback(U=>{z(K({},U,{context:c}))},[c]);return Z5({nextState:T,initialState:o,stateComparers:d??w0,onStateChange:m??MS,controlledProps:l,lastActionRef:t}),[u_(T,l),P]}const X5=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function J5(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Y5(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function Q5(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Y5(e))}function e3(e){const t=[],r=[];return Array.from(e.querySelectorAll(X5)).forEach((o,l)=>{const d=J5(o);d===-1||!Q5(o)||(d===0?t.push(o):r.push({documentOrder:l,tabIndex:d,node:o}))}),r.sort((o,l)=>o.tabIndex===l.tabIndex?o.documentOrder-l.documentOrder:o.tabIndex-l.tabIndex).map(o=>o.node).concat(t)}function t3(){return!0}function r3(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:o=!1,disableRestoreFocus:l=!1,getTabbable:d=e3,isEnabled:m=t3,open:c}=e,b=O.useRef(!1),w=O.useRef(null),T=O.useRef(null),z=O.useRef(null),P=O.useRef(null),U=O.useRef(!1),H=O.useRef(null),W=cn(t.ref,H),J=O.useRef(null);O.useEffect(()=>{!c||!H.current||(U.current=!r)},[r,c]),O.useEffect(()=>{if(!c||!H.current)return;const G=Ya(H.current);return H.current.contains(G.activeElement)||(H.current.hasAttribute("tabIndex")||H.current.setAttribute("tabIndex","-1"),U.current&&H.current.focus()),()=>{l||(z.current&&z.current.focus&&(b.current=!0,z.current.focus()),z.current=null)}},[c]),O.useEffect(()=>{if(!c||!H.current)return;const G=Ya(H.current),te=Z=>{J.current=Z,!(o||!m()||Z.key!=="Tab")&&G.activeElement===H.current&&Z.shiftKey&&(b.current=!0,T.current&&T.current.focus())},ie=()=>{var Te,ve;const Z=H.current;if(Z===null)return;if(!G.hasFocus()||!m()||b.current){b.current=!1;return}if(Z.contains(G.activeElement)||o&&G.activeElement!==w.current&&G.activeElement!==T.current)return;if(G.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!U.current)return;let de=[];if((G.activeElement===w.current||G.activeElement===T.current)&&(de=d(H.current)),de.length>0){const De=!!((Te=J.current)!=null&&Te.shiftKey&&((ve=J.current)==null?void 0:ve.key)==="Tab"),ke=de[0],Ee=de[de.length-1];typeof ke!="string"&&typeof Ee!="string"&&(De?Ee.focus():ke.focus())}else Z.focus()};G.addEventListener("focusin",ie),G.addEventListener("keydown",te,!0);const me=setInterval(()=>{G.activeElement&&G.activeElement.tagName==="BODY"&&ie()},50);return()=>{clearInterval(me),G.removeEventListener("focusin",ie),G.removeEventListener("keydown",te,!0)}},[r,o,l,m,c,d]);const j=G=>{z.current===null&&(z.current=G.relatedTarget),U.current=!0,P.current=G.target;const te=t.props.onFocus;te&&te(G)},$=G=>{z.current===null&&(z.current=G.relatedTarget),U.current=!0};return ae.jsxs(O.Fragment,{children:[ae.jsx("div",{tabIndex:c?0:-1,onFocus:$,ref:w,"data-testid":"sentinelStart"}),O.cloneElement(t,{ref:W,onFocus:j}),ae.jsx("div",{tabIndex:c?0:-1,onFocus:$,ref:T,"data-testid":"sentinelEnd"})]})}const n3=O.createContext(void 0);function i3(){return O.useContext(n3)}function o3(e={}){const{defaultValue:t,disabled:r=!1,error:o=!1,onBlur:l,onChange:d,onFocus:m,required:c=!1,value:b,inputRef:w}=e,T=i3();let z,P,U,H,W;T?(z=void 0,P=T.disabled??!1,U=T.error??!1,H=T.required??!1,W=T.value):(z=t,P=r,U=o,H=c,W=b);const{current:J}=O.useRef(W!=null),j=O.useCallback(ke=>{},[]),$=O.useRef(null),G=cn($,w,j),[te,ie]=O.useState(!1);O.useEffect(()=>{!T&&P&&te&&(ie(!1),l==null||l())},[T,P,te,l]);const me=ke=>Ee=>{var He,Fe;if(T!=null&&T.disabled){Ee.stopPropagation();return}(He=ke.onFocus)==null||He.call(ke,Ee),T&&T.onFocus?(Fe=T==null?void 0:T.onFocus)==null||Fe.call(T):ie(!0)},Z=ke=>Ee=>{var He;(He=ke.onBlur)==null||He.call(ke,Ee),T&&T.onBlur?T.onBlur():ie(!1)},de=ke=>(Ee,...He)=>{var Fe,Ae;if(!J&&(Ee.target||$.current)==null)throw new Error(op(17));(Fe=T==null?void 0:T.onChange)==null||Fe.call(T,Ee),(Ae=ke.onChange)==null||Ae.call(ke,Ee,...He)},Te=ke=>Ee=>{var He;$.current&&Ee.currentTarget===Ee.target&&$.current.focus(),(He=ke.onClick)==null||He.call(ke,Ee)};return{disabled:P,error:U,focused:te,formControlContext:T,getInputProps:(ke={})=>{const He=K({},{onBlur:l,onChange:d,onFocus:m},yo(ke)),Fe=K({},He,{onBlur:Z(He),onChange:de(He),onFocus:me(He)});return K({},Fe,{"aria-invalid":U||void 0,defaultValue:z,value:W,required:H,disabled:P},ke,{ref:G},Fe)},getRootProps:(ke={})=>{const Ee=yo(e,["onBlur","onChange","onFocus"]),He=K({},Ee,yo(ke));return K({},ke,He,{onClick:Te(He)})},inputRef:G,required:H,value:W}}const Tn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function a3(e,t,r,o,l,d){if(r.length===0||!o&&r.every((c,b)=>l(c,b)))return-1;let m=e;for(;;){if(!d&&t==="next"&&m===r.length||!d&&t==="previous"&&m===-1)return-1;if(o?!1:l(r[m],m))m+=t==="next"?1:-1,d&&(m=(m+r.length)%r.length);else return m}}function hi(e,t,r){const{items:o,isItemDisabled:l,disableListWrap:d,disabledItemsFocusable:m,itemComparer:c,focusManagement:b}=r,w=b==="DOM"?0:-1,T=o.length-1,z=e==null?-1:o.findIndex(J=>c(J,e));let P,U,H=!d;switch(t){case"reset":if(w===-1)return null;P=0,U="next",H=!1;break;case"start":P=0,U="next",H=!1;break;case"end":P=T,U="previous",H=!1;break;default:{const J=z+t;J<0?!H&&z!==-1||Math.abs(t)>1?(P=0,U="next"):(P=T,U="previous"):J>T?!H||Math.abs(t)>1?(P=T,U="previous"):(P=0,U="next"):(P=J,U=t>=0?"next":"previous")}}const W=a3(P,U,o,m,l,H);return W===-1&&e!==null&&!l(e,z)?e:o[W]??null}function s3(e,t,r,o){return r==="none"?[]:r==="single"?o(t[0],e)?t:[e]:t.some(l=>o(l,e))?t.filter(l=>!o(l,e)):[...t,e]}function Xx(e,t,r){const{itemComparer:o,isItemDisabled:l,selectionMode:d,items:m}=r,{selectedValues:c}=t,b=m.findIndex(T=>o(e,T));if(l(e,b))return t;const w=s3(e,c,d,o);return K({},t,{selectedValues:w,highlightedValue:e})}function l3(e,t,r){const o=t.highlightedValue,{orientation:l,pageSize:d}=r;switch(e){case"Home":return K({},t,{highlightedValue:hi(o,"start",r)});case"End":return K({},t,{highlightedValue:hi(o,"end",r)});case"PageUp":return K({},t,{highlightedValue:hi(o,-d,r)});case"PageDown":return K({},t,{highlightedValue:hi(o,d,r)});case"ArrowUp":if(l!=="vertical")break;return K({},t,{highlightedValue:hi(o,-1,r)});case"ArrowDown":if(l!=="vertical")break;return K({},t,{highlightedValue:hi(o,1,r)});case"ArrowLeft":{if(l==="vertical")break;return K({},t,{highlightedValue:hi(o,l==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(l==="vertical")break;return K({},t,{highlightedValue:hi(o,l==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:Xx(t.highlightedValue,t,r)}return t}function c3(e,t){return t.focusManagement==="DOM"?e:K({},e,{highlightedValue:null})}function u3(e,t,r){var l;const o=(l=r(e))==null?void 0:l.trim().toLowerCase();return!o||o.length===0?!1:o.indexOf(t)===0}function d3(e,t,r){const{items:o,isItemDisabled:l,disabledItemsFocusable:d,getItemAsString:m}=r,c=t.length>1;let b=c?e.highlightedValue:hi(e.highlightedValue,1,r);for(let w=0;w<o.length;w+=1){if(!b||!c&&e.highlightedValue===b)return e;if(u3(b,t,m)&&(!l(b,o.indexOf(b))||d))return K({},e,{highlightedValue:b});b=hi(b,1,r)}return e}function h3(e,t,r,o){const{itemComparer:l,focusManagement:d}=o;let m=null;r.highlightedValue!=null?m=e.find(w=>l(w,r.highlightedValue))??null:d==="DOM"&&t.length===0&&(m=hi(null,"reset",o));const b=(r.selectedValues??[]).filter(w=>e.some(T=>l(T,w)));return K({},r,{highlightedValue:m,selectedValues:b})}function p3(e,t){return K({},e,{highlightedValue:hi(null,"reset",t)})}function f3(e,t){return K({},e,{highlightedValue:hi(null,"end",t)})}function m3(e,t){return K({},e,{selectedValues:[],highlightedValue:hi(null,"reset",t)})}function Jx(e,t){const{type:r,context:o}=t;switch(r){case Tn.keyDown:return l3(t.key,e,o);case Tn.itemClick:return Xx(t.item,e,o);case Tn.blur:return c3(e,o);case Tn.textNavigation:return d3(e,t.searchString,o);case Tn.itemsChange:return h3(t.items,t.previousItems,e,o);case Tn.resetHighlight:return p3(e,o);case Tn.highlightLast:return f3(e,o);case Tn.clearSelection:return m3(e,o);default:return e}}const g3=500;function y3(e){const t=O.useRef({searchString:"",lastTime:null});return O.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const o=t.current,l=r.key.toLowerCase(),d=performance.now();o.searchString.length>0&&o.lastTime&&d-o.lastTime>g3?o.searchString=l:(o.searchString.length!==1||l!==o.searchString)&&(o.searchString+=l),o.lastTime=d,e(o.searchString,r)}},[e])}const DS={},v3=()=>{},_3=(e,t)=>e===t,x3=()=>!1,b3=e=>typeof e=="string"?e:String(e),w3=()=>({highlightedValue:null,selectedValues:[]});function ET(e){const{controlledProps:t=DS,disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:l="activeDescendant",getInitialState:d=w3,getItemDomElement:m,getItemId:c,isItemDisabled:b=x3,rootRef:w,onStateChange:T=v3,items:z,itemComparer:P=_3,getItemAsString:U=b3,onChange:H,onHighlightChange:W,onItemsChange:J,orientation:j="vertical",pageSize:$=5,reducerActionContext:G=DS,selectionMode:te="single",stateReducer:ie,componentName:me="useList"}=e,Z=O.useRef(null),de=cn(w,Z),Te=O.useCallback((kt,$e,rt)=>{var ht;W==null||W(kt,$e,rt),l==="DOM"&&$e!=null&&(rt===Tn.itemClick||rt===Tn.keyDown||rt===Tn.textNavigation)&&((ht=m==null?void 0:m($e))==null||ht.focus())},[m,W,l]),ve=O.useMemo(()=>({highlightedValue:P,selectedValues:(kt,$e)=>zS(kt,$e,P)}),[P]),De=O.useCallback((kt,$e,rt,ht,At)=>{switch(T==null||T(kt,$e,rt,ht,At),$e){case"highlightedValue":Te(kt,rt,ht);break;case"selectedValues":H==null||H(kt,rt,ht);break}},[Te,H,T]),ke=O.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:o,focusManagement:l,isItemDisabled:b,itemComparer:P,items:z,getItemAsString:U,onHighlightChange:Te,orientation:j,pageSize:$,selectionMode:te,stateComparers:ve}),[r,o,l,b,P,z,U,Te,j,$,te,ve]),Ee=d(),He=ie??Jx,Fe=O.useMemo(()=>K({},G,ke),[G,ke]),[Ae,Ge]=K5({reducer:He,actionContext:Fe,initialState:Ee,controlledProps:t,stateComparers:ve,onStateChange:De,componentName:me}),{highlightedValue:Re,selectedValues:Ze}=Ae,Je=y3((kt,$e)=>Ge({type:Tn.textNavigation,event:$e,searchString:kt})),dt=O.useRef([]);O.useEffect(()=>{zS(dt.current,z,P)||(Ge({type:Tn.itemsChange,event:null,items:z,previousItems:dt.current}),dt.current=z,J==null||J(z))},[z,P,Ge,J]);const vt=kt=>$e=>{var ht;if((ht=kt.onKeyDown)==null||ht.call(kt,$e),$e.defaultMuiPrevented)return;const rt=["Home","End","PageUp","PageDown"];j==="vertical"?rt.push("ArrowUp","ArrowDown"):rt.push("ArrowLeft","ArrowRight"),l==="activeDescendant"&&rt.push(" ","Enter"),rt.includes($e.key)&&$e.preventDefault(),Ge({type:Tn.keyDown,key:$e.key,event:$e}),Je($e)},mt=kt=>$e=>{var rt,ht;(rt=kt.onBlur)==null||rt.call(kt,$e),!$e.defaultMuiPrevented&&((ht=Z.current)!=null&&ht.contains($e.relatedTarget)||Ge({type:Tn.blur,event:$e}))},Ct=(kt={})=>{const $e=yo(kt);return K({},kt,{"aria-activedescendant":l==="activeDescendant"&&Re!=null?c(Re):void 0,tabIndex:l==="DOM"?-1:0,ref:de},$e,{onBlur:mt($e),onKeyDown:vt($e)})},zt=O.useCallback(kt=>{const $e=(Ze??[]).some(At=>At!=null&&P(kt,At)),rt=Re!=null&&P(kt,Re);return{focusable:l==="DOM",highlighted:rt,selected:$e}},[P,Ze,Re,l]),Zt=O.useMemo(()=>({dispatch:Ge,getItemState:zt}),[Ge,zt]);return O.useDebugValue({state:Ae}),{contextValue:Zt,dispatch:Ge,getRootProps:Ct,rootRef:de,state:Ae}}const Up=O.createContext(null);function zT(e){const{handlePointerOverEvents:t=!1,item:r}=e,o=O.useContext(Up);if(!o)throw new Error("useListItem must be used within a ListProvider");const{dispatch:l,getItemState:d}=o,{highlighted:m,selected:c,focusable:b}=d(r),w=O.useCallback(U=>H=>{var W;(W=U.onClick)==null||W.call(U,H),!H.defaultPrevented&&l({type:Tn.itemClick,item:r,event:H})},[l,r]),T=O.useCallback(U=>H=>{var W;(W=U.onMouseOver)==null||W.call(U,H),!H.defaultPrevented&&l({type:Tn.itemHover,item:r,event:H})},[l,r]);let z;return b&&(z=m?0:-1),{getRootProps:(U={})=>{const H=yo(U);return K({},U,{onClick:w(H),onPointerOver:t?T(H):void 0,tabIndex:z})},highlighted:m,selected:c}}const Ty=O.createContext(null);function S3(e){const t=Array.from(e.keys()).map(r=>{const o=e.get(r);return{key:r,subitem:o}});return t.sort((r,o)=>{const l=r.subitem.ref.current,d=o.subitem.ref.current;return l===null||d===null||l===d?0:l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function Yx(){const[e,t]=O.useState(new Map),r=O.useRef(new Set),o=O.useCallback(function(w){r.current.delete(w),t(T=>{const z=new Map(T);return z.delete(w),z})},[]),l=O.useCallback(function(w,T){let z;return typeof w=="function"?z=w(r.current):z=w,r.current.add(z),t(P=>{const U=new Map(P);return U.set(z,T),U}),{id:z,deregister:()=>o(z)}},[o]),d=O.useMemo(()=>S3(e),[e]),m=O.useCallback(function(w){return Array.from(d.keys()).indexOf(w)},[d]);return{contextValue:O.useMemo(()=>({getItemIndex:m,registerItem:l,totalSubitemCount:e.size}),[m,l,e.size]),subitems:d}}function Qx(e,t){const r=O.useContext(Ty);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=r,[l,d]=O.useState(typeof e=="function"?void 0:e);return uc(()=>{const{id:m,deregister:c}=o(e,t);return d(m),c},[o,t,e]),{id:l,index:l!==void 0?r.getItemIndex(l):-1,totalItemCount:r.totalSubitemCount}}function up(e,t){return function(o={}){const l=K({},o,e(o));return K({},l,t(l))}}var AT={exports:{}},No={},MT={exports:{}},DT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Re,Ze){var Je=Re.length;Re.push(Ze);e:for(;0<Je;){var dt=Je-1>>>1,vt=Re[dt];if(0<l(vt,Ze))Re[dt]=Ze,Re[Je]=vt,Je=dt;else break e}}function r(Re){return Re.length===0?null:Re[0]}function o(Re){if(Re.length===0)return null;var Ze=Re[0],Je=Re.pop();if(Je!==Ze){Re[0]=Je;e:for(var dt=0,vt=Re.length,mt=vt>>>1;dt<mt;){var Ct=2*(dt+1)-1,zt=Re[Ct],Zt=Ct+1,kt=Re[Zt];if(0>l(zt,Je))Zt<vt&&0>l(kt,zt)?(Re[dt]=kt,Re[Zt]=Je,dt=Zt):(Re[dt]=zt,Re[Ct]=Je,dt=Ct);else if(Zt<vt&&0>l(kt,Je))Re[dt]=kt,Re[Zt]=Je,dt=Zt;else break e}}return Ze}function l(Re,Ze){var Je=Re.sortIndex-Ze.sortIndex;return Je!==0?Je:Re.id-Ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,c=m.now();e.unstable_now=function(){return m.now()-c}}var b=[],w=[],T=1,z=null,P=3,U=!1,H=!1,W=!1,J=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Re){for(var Ze=r(w);Ze!==null;){if(Ze.callback===null)o(w);else if(Ze.startTime<=Re)o(w),Ze.sortIndex=Ze.expirationTime,t(b,Ze);else break;Ze=r(w)}}function te(Re){if(W=!1,G(Re),!H)if(r(b)!==null)H=!0,Ae(ie);else{var Ze=r(w);Ze!==null&&Ge(te,Ze.startTime-Re)}}function ie(Re,Ze){H=!1,W&&(W=!1,j(de),de=-1),U=!0;var Je=P;try{for(G(Ze),z=r(b);z!==null&&(!(z.expirationTime>Ze)||Re&&!De());){var dt=z.callback;if(typeof dt=="function"){z.callback=null,P=z.priorityLevel;var vt=dt(z.expirationTime<=Ze);Ze=e.unstable_now(),typeof vt=="function"?z.callback=vt:z===r(b)&&o(b),G(Ze)}else o(b);z=r(b)}if(z!==null)var mt=!0;else{var Ct=r(w);Ct!==null&&Ge(te,Ct.startTime-Ze),mt=!1}return mt}finally{z=null,P=Je,U=!1}}var me=!1,Z=null,de=-1,Te=5,ve=-1;function De(){return!(e.unstable_now()-ve<Te)}function ke(){if(Z!==null){var Re=e.unstable_now();ve=Re;var Ze=!0;try{Ze=Z(!0,Re)}finally{Ze?Ee():(me=!1,Z=null)}}else me=!1}var Ee;if(typeof $=="function")Ee=function(){$(ke)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Fe=He.port2;He.port1.onmessage=ke,Ee=function(){Fe.postMessage(null)}}else Ee=function(){J(ke,0)};function Ae(Re){Z=Re,me||(me=!0,Ee())}function Ge(Re,Ze){de=J(function(){Re(e.unstable_now())},Ze)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Re){Re.callback=null},e.unstable_continueExecution=function(){H||U||(H=!0,Ae(ie))},e.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<Re?Math.floor(1e3/Re):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Re){switch(P){case 1:case 2:case 3:var Ze=3;break;default:Ze=P}var Je=P;P=Ze;try{return Re()}finally{P=Je}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Re,Ze){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var Je=P;P=Re;try{return Ze()}finally{P=Je}},e.unstable_scheduleCallback=function(Re,Ze,Je){var dt=e.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?dt+Je:dt):Je=dt,Re){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=Je+vt,Re={id:T++,callback:Ze,priorityLevel:Re,startTime:Je,expirationTime:vt,sortIndex:-1},Je>dt?(Re.sortIndex=Je,t(w,Re),r(b)===null&&Re===r(w)&&(W?(j(de),de=-1):W=!0,Ge(te,Je-dt))):(Re.sortIndex=vt,t(b,Re),H||U||(H=!0,Ae(ie))),Re},e.unstable_shouldYield=De,e.unstable_wrapCallback=function(Re){var Ze=P;return function(){var Je=P;P=Ze;try{return Re.apply(this,arguments)}finally{P=Je}}}})(DT);MT.exports=DT;var C3=MT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k3=O,Bo=C3;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RT=new Set,dp={};function vc(e,t){Uu(e,t),Uu(e+"Capture",t)}function Uu(e,t){for(dp[e]=t,e=0;e<t.length;e++)RT.add(t[e])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d_=Object.prototype.hasOwnProperty,T3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RS={},LS={};function I3(e){return d_.call(LS,e)?!0:d_.call(RS,e)?!1:T3.test(e)?LS[e]=!0:(RS[e]=!0,!1)}function P3(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E3(e,t,r,o){if(t===null||typeof t>"u"||P3(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function io(e,t,r,o,l,d,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=m}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ki[e]=new io(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ki[t]=new io(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ki[e]=new io(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ki[e]=new io(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ki[e]=new io(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ki[e]=new io(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ki[e]=new io(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ki[e]=new io(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ki[e]=new io(e,5,!1,e.toLowerCase(),null,!1,!1)});var e1=/[\-:]([a-z])/g;function t1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(e1,t1);ki[t]=new io(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(e1,t1);ki[t]=new io(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(e1,t1);ki[t]=new io(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ki[e]=new io(e,1,!1,e.toLowerCase(),null,!1,!1)});ki.xlinkHref=new io("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ki[e]=new io(e,1,!1,e.toLowerCase(),null,!0,!0)});function r1(e,t,r,o){var l=ki.hasOwnProperty(t)?ki[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E3(t,r,l,o)&&(r=null),o||l===null?I3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,o=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Ds=k3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vm=Symbol.for("react.element"),gu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),h_=Symbol.for("react.profiler"),LT=Symbol.for("react.provider"),$T=Symbol.for("react.context"),i1=Symbol.for("react.forward_ref"),p_=Symbol.for("react.suspense"),f_=Symbol.for("react.suspense_list"),o1=Symbol.for("react.memo"),tl=Symbol.for("react.lazy"),BT=Symbol.for("react.offscreen"),$S=Symbol.iterator;function bh(e){return e===null||typeof e!="object"?null:(e=$S&&e[$S]||e["@@iterator"],typeof e=="function"?e:null)}var En=Object.assign,S0;function Bh(e){if(S0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);S0=t&&t[1]||""}return`
`+S0+e}var C0=!1;function k0(e,t){if(!e||C0)return"";C0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var l=w.stack.split(`
`),d=o.stack.split(`
`),m=l.length-1,c=d.length-1;1<=m&&0<=c&&l[m]!==d[c];)c--;for(;1<=m&&0<=c;m--,c--)if(l[m]!==d[c]){if(m!==1||c!==1)do if(m--,c--,0>c||l[m]!==d[c]){var b=`
`+l[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=c);break}}}finally{C0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bh(e):""}function z3(e){switch(e.tag){case 5:return Bh(e.type);case 16:return Bh("Lazy");case 13:return Bh("Suspense");case 19:return Bh("SuspenseList");case 0:case 2:case 15:return e=k0(e.type,!1),e;case 11:return e=k0(e.type.render,!1),e;case 1:return e=k0(e.type,!0),e;default:return""}}function m_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yu:return"Fragment";case gu:return"Portal";case h_:return"Profiler";case n1:return"StrictMode";case p_:return"Suspense";case f_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $T:return(e.displayName||"Context")+".Consumer";case LT:return(e._context.displayName||"Context")+".Provider";case i1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case o1:return t=e.displayName||null,t!==null?t:m_(e.type)||"Memo";case tl:t=e._payload,e=e._init;try{return m_(e(t))}catch{}}return null}function A3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m_(t);case 8:return t===n1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function OT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M3(e){var t=OT(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){o=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _m(e){e._valueTracker||(e._valueTracker=M3(e))}function FT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=OT(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function cg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function g_(e,t){var r=t.checked;return En({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function BS(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=bl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function NT(e,t){t=t.checked,t!=null&&r1(e,"checked",t,!1)}function y_(e,t){NT(e,t);var r=bl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?v_(e,t.type,r):t.hasOwnProperty("defaultValue")&&v_(e,t.type,bl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function v_(e,t,r){(t!=="number"||cg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Oh=Array.isArray;function Du(e,t,r,o){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&o&&(e[r].defaultSelected=!0)}else{for(r=""+bl(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function __(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return En({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function FS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(lt(92));if(Oh(r)){if(1<r.length)throw Error(lt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bl(r)}}function jT(e,t){var r=bl(t.value),o=bl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function NS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function VT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function x_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?VT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xm,UT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D3=["Webkit","ms","Moz","O"];Object.keys(Hh).forEach(function(e){D3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hh[t]=Hh[e]})});function HT(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hh.hasOwnProperty(e)&&Hh[e]?(""+t).trim():t+"px"}function WT(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,l=HT(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,l):e[r]=l}}var R3=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b_(e,t){if(t){if(R3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function w_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S_=null;function a1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var C_=null,Ru=null,Lu=null;function jS(e){if(e=Gp(e)){if(typeof C_!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=Ay(t),C_(e.stateNode,e.type,t))}}function GT(e){Ru?Lu?Lu.push(e):Lu=[e]:Ru=e}function qT(){if(Ru){var e=Ru,t=Lu;if(Lu=Ru=null,jS(e),t)for(e=0;e<t.length;e++)jS(t[e])}}function ZT(e,t){return e(t)}function KT(){}var T0=!1;function XT(e,t,r){if(T0)return e(t,r);T0=!0;try{return ZT(e,t,r)}finally{T0=!1,(Ru!==null||Lu!==null)&&(KT(),qT())}}function pp(e,t){var r=e.stateNode;if(r===null)return null;var o=Ay(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(lt(231,t,typeof r));return r}var k_=!1;if(Ts)try{var wh={};Object.defineProperty(wh,"passive",{get:function(){k_=!0}}),window.addEventListener("test",wh,wh),window.removeEventListener("test",wh,wh)}catch{k_=!1}function L3(e,t,r,o,l,d,m,c,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var Wh=!1,ug=null,dg=!1,T_=null,$3={onError:function(e){Wh=!0,ug=e}};function B3(e,t,r,o,l,d,m,c,b){Wh=!1,ug=null,L3.apply($3,arguments)}function O3(e,t,r,o,l,d,m,c,b){if(B3.apply(this,arguments),Wh){if(Wh){var w=ug;Wh=!1,ug=null}else throw Error(lt(198));dg||(dg=!0,T_=w)}}function _c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function JT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function VS(e){if(_c(e)!==e)throw Error(lt(188))}function F3(e){var t=e.alternate;if(!t){if(t=_c(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var r=e,o=t;;){var l=r.return;if(l===null)break;var d=l.alternate;if(d===null){if(o=l.return,o!==null){r=o;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===r)return VS(l),e;if(d===o)return VS(l),t;d=d.sibling}throw Error(lt(188))}if(r.return!==o.return)r=l,o=d;else{for(var m=!1,c=l.child;c;){if(c===r){m=!0,r=l,o=d;break}if(c===o){m=!0,o=l,r=d;break}c=c.sibling}if(!m){for(c=d.child;c;){if(c===r){m=!0,r=d,o=l;break}if(c===o){m=!0,o=d,r=l;break}c=c.sibling}if(!m)throw Error(lt(189))}}if(r.alternate!==o)throw Error(lt(190))}if(r.tag!==3)throw Error(lt(188));return r.stateNode.current===r?e:t}function YT(e){return e=F3(e),e!==null?QT(e):null}function QT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=QT(e);if(t!==null)return t;e=e.sibling}return null}var eI=Bo.unstable_scheduleCallback,US=Bo.unstable_cancelCallback,N3=Bo.unstable_shouldYield,j3=Bo.unstable_requestPaint,qn=Bo.unstable_now,V3=Bo.unstable_getCurrentPriorityLevel,s1=Bo.unstable_ImmediatePriority,tI=Bo.unstable_UserBlockingPriority,hg=Bo.unstable_NormalPriority,U3=Bo.unstable_LowPriority,rI=Bo.unstable_IdlePriority,Iy=null,Qa=null;function H3(e){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Iy,e,void 0,(e.current.flags&128)===128)}catch{}}var Ma=Math.clz32?Math.clz32:q3,W3=Math.log,G3=Math.LN2;function q3(e){return e>>>=0,e===0?32:31-(W3(e)/G3|0)|0}var bm=64,wm=4194304;function Fh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pg(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,l=e.suspendedLanes,d=e.pingedLanes,m=r&268435455;if(m!==0){var c=m&~l;c!==0?o=Fh(c):(d&=m,d!==0&&(o=Fh(d)))}else m=r&~l,m!==0?o=Fh(m):d!==0&&(o=Fh(d));if(o===0)return 0;if(t!==0&&t!==o&&!(t&l)&&(l=o&-o,d=t&-t,l>=d||l===16&&(d&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Ma(t),l=1<<r,o|=e[r],t&=~l;return o}function Z3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K3(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var m=31-Ma(d),c=1<<m,b=l[m];b===-1?(!(c&r)||c&o)&&(l[m]=Z3(c,t)):b<=t&&(e.expiredLanes|=c),d&=~c}}function I_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nI(){var e=bm;return bm<<=1,!(bm&4194240)&&(bm=64),e}function I0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Hp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ma(t),e[t]=r}function X3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Ma(r),d=1<<l;t[l]=0,o[l]=-1,e[l]=-1,r&=~d}}function l1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Ma(r),l=1<<o;l&t|e[o]&t&&(e[o]|=t),r&=~l}}var Gr=0;function iI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var oI,c1,aI,sI,lI,P_=!1,Sm=[],dl=null,hl=null,pl=null,fp=new Map,mp=new Map,il=[],J3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HS(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":fp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mp.delete(t.pointerId)}}function Sh(e,t,r,o,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[l]},t!==null&&(t=Gp(t),t!==null&&c1(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Y3(e,t,r,o,l){switch(t){case"focusin":return dl=Sh(dl,e,t,r,o,l),!0;case"dragenter":return hl=Sh(hl,e,t,r,o,l),!0;case"mouseover":return pl=Sh(pl,e,t,r,o,l),!0;case"pointerover":var d=l.pointerId;return fp.set(d,Sh(fp.get(d)||null,e,t,r,o,l)),!0;case"gotpointercapture":return d=l.pointerId,mp.set(d,Sh(mp.get(d)||null,e,t,r,o,l)),!0}return!1}function cI(e){var t=ec(e.target);if(t!==null){var r=_c(t);if(r!==null){if(t=r.tag,t===13){if(t=JT(r),t!==null){e.blockedOn=t,lI(e.priority,function(){aI(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=E_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);S_=o,r.target.dispatchEvent(o),S_=null}else return t=Gp(r),t!==null&&c1(t),e.blockedOn=r,!1;t.shift()}return!0}function WS(e,t,r){Hm(e)&&r.delete(t)}function Q3(){P_=!1,dl!==null&&Hm(dl)&&(dl=null),hl!==null&&Hm(hl)&&(hl=null),pl!==null&&Hm(pl)&&(pl=null),fp.forEach(WS),mp.forEach(WS)}function Ch(e,t){e.blockedOn===t&&(e.blockedOn=null,P_||(P_=!0,Bo.unstable_scheduleCallback(Bo.unstable_NormalPriority,Q3)))}function gp(e){function t(l){return Ch(l,e)}if(0<Sm.length){Ch(Sm[0],e);for(var r=1;r<Sm.length;r++){var o=Sm[r];o.blockedOn===e&&(o.blockedOn=null)}}for(dl!==null&&Ch(dl,e),hl!==null&&Ch(hl,e),pl!==null&&Ch(pl,e),fp.forEach(t),mp.forEach(t),r=0;r<il.length;r++)o=il[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<il.length&&(r=il[0],r.blockedOn===null);)cI(r),r.blockedOn===null&&il.shift()}var $u=Ds.ReactCurrentBatchConfig,fg=!0;function e$(e,t,r,o){var l=Gr,d=$u.transition;$u.transition=null;try{Gr=1,u1(e,t,r,o)}finally{Gr=l,$u.transition=d}}function t$(e,t,r,o){var l=Gr,d=$u.transition;$u.transition=null;try{Gr=4,u1(e,t,r,o)}finally{Gr=l,$u.transition=d}}function u1(e,t,r,o){if(fg){var l=E_(e,t,r,o);if(l===null)B0(e,t,o,mg,r),HS(e,o);else if(Y3(l,e,t,r,o))o.stopPropagation();else if(HS(e,o),t&4&&-1<J3.indexOf(e)){for(;l!==null;){var d=Gp(l);if(d!==null&&oI(d),d=E_(e,t,r,o),d===null&&B0(e,t,o,mg,r),d===l)break;l=d}l!==null&&o.stopPropagation()}else B0(e,t,o,null,r)}}var mg=null;function E_(e,t,r,o){if(mg=null,e=a1(o),e=ec(e),e!==null)if(t=_c(e),t===null)e=null;else if(r=t.tag,r===13){if(e=JT(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mg=e,null}function uI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V3()){case s1:return 1;case tI:return 4;case hg:case U3:return 16;case rI:return 536870912;default:return 16}default:return 16}}var cl=null,d1=null,Wm=null;function dI(){if(Wm)return Wm;var e,t=d1,r=t.length,o,l="value"in cl?cl.value:cl.textContent,d=l.length;for(e=0;e<r&&t[e]===l[e];e++);var m=r-e;for(o=1;o<=m&&t[r-o]===l[d-o];o++);return Wm=l.slice(e,1<o?1-o:void 0)}function Gm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cm(){return!0}function GS(){return!1}function jo(e){function t(r,o,l,d,m){this._reactName=r,this._targetInst=l,this.type=o,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(d):d[c]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Cm:GS,this.isPropagationStopped=GS,this}return En(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cm)},persist:function(){},isPersistent:Cm}),t}var ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h1=jo(ad),Wp=En({},ad,{view:0,detail:0}),r$=jo(Wp),P0,E0,kh,Py=En({},Wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kh&&(kh&&e.type==="mousemove"?(P0=e.screenX-kh.screenX,E0=e.screenY-kh.screenY):E0=P0=0,kh=e),P0)},movementY:function(e){return"movementY"in e?e.movementY:E0}}),qS=jo(Py),n$=En({},Py,{dataTransfer:0}),i$=jo(n$),o$=En({},Wp,{relatedTarget:0}),z0=jo(o$),a$=En({},ad,{animationName:0,elapsedTime:0,pseudoElement:0}),s$=jo(a$),l$=En({},ad,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c$=jo(l$),u$=En({},ad,{data:0}),ZS=jo(u$),d$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=p$[e])?!!t[e]:!1}function p1(){return f$}var m$=En({},Wp,{key:function(e){if(e.key){var t=d$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p1,charCode:function(e){return e.type==="keypress"?Gm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g$=jo(m$),y$=En({},Py,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KS=jo(y$),v$=En({},Wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p1}),_$=jo(v$),x$=En({},ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),b$=jo(x$),w$=En({},Py,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S$=jo(w$),C$=[9,13,27,32],f1=Ts&&"CompositionEvent"in window,Gh=null;Ts&&"documentMode"in document&&(Gh=document.documentMode);var k$=Ts&&"TextEvent"in window&&!Gh,hI=Ts&&(!f1||Gh&&8<Gh&&11>=Gh),XS=" ",JS=!1;function pI(e,t){switch(e){case"keyup":return C$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vu=!1;function T$(e,t){switch(e){case"compositionend":return fI(t);case"keypress":return t.which!==32?null:(JS=!0,XS);case"textInput":return e=t.data,e===XS&&JS?null:e;default:return null}}function I$(e,t){if(vu)return e==="compositionend"||!f1&&pI(e,t)?(e=dI(),Wm=d1=cl=null,vu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hI&&t.locale!=="ko"?null:t.data;default:return null}}var P$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!P$[e.type]:t==="textarea"}function mI(e,t,r,o){GT(o),t=gg(t,"onChange"),0<t.length&&(r=new h1("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var qh=null,yp=null;function E$(e){TI(e,0)}function Ey(e){var t=bu(e);if(FT(t))return e}function z$(e,t){if(e==="change")return t}var gI=!1;if(Ts){var A0;if(Ts){var M0="oninput"in document;if(!M0){var QS=document.createElement("div");QS.setAttribute("oninput","return;"),M0=typeof QS.oninput=="function"}A0=M0}else A0=!1;gI=A0&&(!document.documentMode||9<document.documentMode)}function e2(){qh&&(qh.detachEvent("onpropertychange",yI),yp=qh=null)}function yI(e){if(e.propertyName==="value"&&Ey(yp)){var t=[];mI(t,yp,e,a1(e)),XT(E$,t)}}function A$(e,t,r){e==="focusin"?(e2(),qh=t,yp=r,qh.attachEvent("onpropertychange",yI)):e==="focusout"&&e2()}function M$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ey(yp)}function D$(e,t){if(e==="click")return Ey(t)}function R$(e,t){if(e==="input"||e==="change")return Ey(t)}function L$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $a=typeof Object.is=="function"?Object.is:L$;function vp(e,t){if($a(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var l=r[o];if(!d_.call(t,l)||!$a(e[l],t[l]))return!1}return!0}function t2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r2(e,t){var r=t2(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=t2(r)}}function vI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _I(){for(var e=window,t=cg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=cg(e.document)}return t}function m1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $$(e){var t=_I(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vI(r.ownerDocument.documentElement,r)){if(o!==null&&m1(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,d=Math.min(o.start,l);o=o.end===void 0?d:Math.min(o.end,l),!e.extend&&d>o&&(l=o,o=d,d=l),l=r2(r,d);var m=r2(r,o);l&&m&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var B$=Ts&&"documentMode"in document&&11>=document.documentMode,_u=null,z_=null,Zh=null,A_=!1;function n2(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;A_||_u==null||_u!==cg(o)||(o=_u,"selectionStart"in o&&m1(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Zh&&vp(Zh,o)||(Zh=o,o=gg(z_,"onSelect"),0<o.length&&(t=new h1("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=_u)))}function km(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xu={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},D0={},xI={};Ts&&(xI=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function zy(e){if(D0[e])return D0[e];if(!xu[e])return e;var t=xu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in xI)return D0[e]=t[r];return e}var bI=zy("animationend"),wI=zy("animationiteration"),SI=zy("animationstart"),CI=zy("transitionend"),kI=new Map,i2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(e,t){kI.set(e,t),vc(t,[e])}for(var R0=0;R0<i2.length;R0++){var L0=i2[R0],O$=L0.toLowerCase(),F$=L0[0].toUpperCase()+L0.slice(1);Cl(O$,"on"+F$)}Cl(bI,"onAnimationEnd");Cl(wI,"onAnimationIteration");Cl(SI,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(CI,"onTransitionEnd");Uu("onMouseEnter",["mouseout","mouseover"]);Uu("onMouseLeave",["mouseout","mouseover"]);Uu("onPointerEnter",["pointerout","pointerover"]);Uu("onPointerLeave",["pointerout","pointerover"]);vc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vc("onBeforeInput",["compositionend","keypress","textInput","paste"]);vc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nh));function o2(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,O3(o,t,void 0,e),e.currentTarget=null}function TI(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],l=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var m=o.length-1;0<=m;m--){var c=o[m],b=c.instance,w=c.currentTarget;if(c=c.listener,b!==d&&l.isPropagationStopped())break e;o2(l,c,w),d=b}else for(m=0;m<o.length;m++){if(c=o[m],b=c.instance,w=c.currentTarget,c=c.listener,b!==d&&l.isPropagationStopped())break e;o2(l,c,w),d=b}}}if(dg)throw e=T_,dg=!1,T_=null,e}function pn(e,t){var r=t[$_];r===void 0&&(r=t[$_]=new Set);var o=e+"__bubble";r.has(o)||(II(t,e,2,!1),r.add(o))}function $0(e,t,r){var o=0;t&&(o|=4),II(r,e,o,t)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function _p(e){if(!e[Tm]){e[Tm]=!0,RT.forEach(function(r){r!=="selectionchange"&&(N$.has(r)||$0(r,!1,e),$0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tm]||(t[Tm]=!0,$0("selectionchange",!1,t))}}function II(e,t,r,o){switch(uI(t)){case 1:var l=e$;break;case 4:l=t$;break;default:l=u1}r=l.bind(null,t,r,e),l=void 0,!k_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function B0(e,t,r,o,l){var d=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var c=o.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(m===4)for(m=o.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===l||b.nodeType===8&&b.parentNode===l))return;m=m.return}for(;c!==null;){if(m=ec(c),m===null)return;if(b=m.tag,b===5||b===6){o=d=m;continue e}c=c.parentNode}}o=o.return}XT(function(){var w=d,T=a1(r),z=[];e:{var P=kI.get(e);if(P!==void 0){var U=h1,H=e;switch(e){case"keypress":if(Gm(r)===0)break e;case"keydown":case"keyup":U=g$;break;case"focusin":H="focus",U=z0;break;case"focusout":H="blur",U=z0;break;case"beforeblur":case"afterblur":U=z0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=qS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=i$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=_$;break;case bI:case wI:case SI:U=s$;break;case CI:U=b$;break;case"scroll":U=r$;break;case"wheel":U=S$;break;case"copy":case"cut":case"paste":U=c$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=KS}var W=(t&4)!==0,J=!W&&e==="scroll",j=W?P!==null?P+"Capture":null:P;W=[];for(var $=w,G;$!==null;){G=$;var te=G.stateNode;if(G.tag===5&&te!==null&&(G=te,j!==null&&(te=pp($,j),te!=null&&W.push(xp($,te,G)))),J)break;$=$.return}0<W.length&&(P=new U(P,H,null,r,T),z.push({event:P,listeners:W}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",P&&r!==S_&&(H=r.relatedTarget||r.fromElement)&&(ec(H)||H[Is]))break e;if((U||P)&&(P=T.window===T?T:(P=T.ownerDocument)?P.defaultView||P.parentWindow:window,U?(H=r.relatedTarget||r.toElement,U=w,H=H?ec(H):null,H!==null&&(J=_c(H),H!==J||H.tag!==5&&H.tag!==6)&&(H=null)):(U=null,H=w),U!==H)){if(W=qS,te="onMouseLeave",j="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(W=KS,te="onPointerLeave",j="onPointerEnter",$="pointer"),J=U==null?P:bu(U),G=H==null?P:bu(H),P=new W(te,$+"leave",U,r,T),P.target=J,P.relatedTarget=G,te=null,ec(T)===w&&(W=new W(j,$+"enter",H,r,T),W.target=G,W.relatedTarget=J,te=W),J=te,U&&H)t:{for(W=U,j=H,$=0,G=W;G;G=au(G))$++;for(G=0,te=j;te;te=au(te))G++;for(;0<$-G;)W=au(W),$--;for(;0<G-$;)j=au(j),G--;for(;$--;){if(W===j||j!==null&&W===j.alternate)break t;W=au(W),j=au(j)}W=null}else W=null;U!==null&&a2(z,P,U,W,!1),H!==null&&J!==null&&a2(z,J,H,W,!0)}}e:{if(P=w?bu(w):window,U=P.nodeName&&P.nodeName.toLowerCase(),U==="select"||U==="input"&&P.type==="file")var ie=z$;else if(YS(P))if(gI)ie=R$;else{ie=M$;var me=A$}else(U=P.nodeName)&&U.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(ie=D$);if(ie&&(ie=ie(e,w))){mI(z,ie,r,T);break e}me&&me(e,P,w),e==="focusout"&&(me=P._wrapperState)&&me.controlled&&P.type==="number"&&v_(P,"number",P.value)}switch(me=w?bu(w):window,e){case"focusin":(YS(me)||me.contentEditable==="true")&&(_u=me,z_=w,Zh=null);break;case"focusout":Zh=z_=_u=null;break;case"mousedown":A_=!0;break;case"contextmenu":case"mouseup":case"dragend":A_=!1,n2(z,r,T);break;case"selectionchange":if(B$)break;case"keydown":case"keyup":n2(z,r,T)}var Z;if(f1)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else vu?pI(e,r)&&(de="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(de="onCompositionStart");de&&(hI&&r.locale!=="ko"&&(vu||de!=="onCompositionStart"?de==="onCompositionEnd"&&vu&&(Z=dI()):(cl=T,d1="value"in cl?cl.value:cl.textContent,vu=!0)),me=gg(w,de),0<me.length&&(de=new ZS(de,e,null,r,T),z.push({event:de,listeners:me}),Z?de.data=Z:(Z=fI(r),Z!==null&&(de.data=Z)))),(Z=k$?T$(e,r):I$(e,r))&&(w=gg(w,"onBeforeInput"),0<w.length&&(T=new ZS("onBeforeInput","beforeinput",null,r,T),z.push({event:T,listeners:w}),T.data=Z))}TI(z,t)})}function xp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gg(e,t){for(var r=t+"Capture",o=[];e!==null;){var l=e,d=l.stateNode;l.tag===5&&d!==null&&(l=d,d=pp(e,r),d!=null&&o.unshift(xp(e,d,l)),d=pp(e,t),d!=null&&o.push(xp(e,d,l))),e=e.return}return o}function au(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function a2(e,t,r,o,l){for(var d=t._reactName,m=[];r!==null&&r!==o;){var c=r,b=c.alternate,w=c.stateNode;if(b!==null&&b===o)break;c.tag===5&&w!==null&&(c=w,l?(b=pp(r,d),b!=null&&m.unshift(xp(r,b,c))):l||(b=pp(r,d),b!=null&&m.push(xp(r,b,c)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var j$=/\r\n?/g,V$=/\u0000|\uFFFD/g;function s2(e){return(typeof e=="string"?e:""+e).replace(j$,`
`).replace(V$,"")}function Im(e,t,r){if(t=s2(t),s2(e)!==t&&r)throw Error(lt(425))}function yg(){}var M_=null,D_=null;function R_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var L_=typeof setTimeout=="function"?setTimeout:void 0,U$=typeof clearTimeout=="function"?clearTimeout:void 0,l2=typeof Promise=="function"?Promise:void 0,H$=typeof queueMicrotask=="function"?queueMicrotask:typeof l2<"u"?function(e){return l2.resolve(null).then(e).catch(W$)}:L_;function W$(e){setTimeout(function(){throw e})}function O0(e,t){var r=t,o=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(o===0){e.removeChild(l),gp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=l}while(r);gp(t)}function fl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function c2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var sd=Math.random().toString(36).slice(2),Xa="__reactFiber$"+sd,bp="__reactProps$"+sd,Is="__reactContainer$"+sd,$_="__reactEvents$"+sd,G$="__reactListeners$"+sd,q$="__reactHandles$"+sd;function ec(e){var t=e[Xa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Is]||r[Xa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=c2(e);e!==null;){if(r=e[Xa])return r;e=c2(e)}return t}e=r,r=e.parentNode}return null}function Gp(e){return e=e[Xa]||e[Is],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function Ay(e){return e[bp]||null}var B_=[],wu=-1;function kl(e){return{current:e}}function fn(e){0>wu||(e.current=B_[wu],B_[wu]=null,wu--)}function ln(e,t){wu++,B_[wu]=e.current,e.current=t}var wl={},Vi=kl(wl),vo=kl(!1),dc=wl;function Hu(e,t){var r=e.type.contextTypes;if(!r)return wl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},d;for(d in r)l[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function _o(e){return e=e.childContextTypes,e!=null}function vg(){fn(vo),fn(Vi)}function u2(e,t,r){if(Vi.current!==wl)throw Error(lt(168));ln(Vi,t),ln(vo,r)}function PI(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(lt(108,A3(e)||"Unknown",l));return En({},r,o)}function _g(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wl,dc=Vi.current,ln(Vi,e),ln(vo,vo.current),!0}function d2(e,t,r){var o=e.stateNode;if(!o)throw Error(lt(169));r?(e=PI(e,t,dc),o.__reactInternalMemoizedMergedChildContext=e,fn(vo),fn(Vi),ln(Vi,e)):fn(vo),ln(vo,r)}var ws=null,My=!1,F0=!1;function EI(e){ws===null?ws=[e]:ws.push(e)}function Z$(e){My=!0,EI(e)}function Tl(){if(!F0&&ws!==null){F0=!0;var e=0,t=Gr;try{var r=ws;for(Gr=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}ws=null,My=!1}catch(l){throw ws!==null&&(ws=ws.slice(e+1)),eI(s1,Tl),l}finally{Gr=t,F0=!1}}return null}var Su=[],Cu=0,xg=null,bg=0,Qo=[],ea=0,hc=null,Ss=1,Cs="";function Xl(e,t){Su[Cu++]=bg,Su[Cu++]=xg,xg=e,bg=t}function zI(e,t,r){Qo[ea++]=Ss,Qo[ea++]=Cs,Qo[ea++]=hc,hc=e;var o=Ss;e=Cs;var l=32-Ma(o)-1;o&=~(1<<l),r+=1;var d=32-Ma(t)+l;if(30<d){var m=l-l%5;d=(o&(1<<m)-1).toString(32),o>>=m,l-=m,Ss=1<<32-Ma(t)+l|r<<l|o,Cs=d+e}else Ss=1<<d|r<<l|o,Cs=e}function g1(e){e.return!==null&&(Xl(e,1),zI(e,1,0))}function y1(e){for(;e===xg;)xg=Su[--Cu],Su[Cu]=null,bg=Su[--Cu],Su[Cu]=null;for(;e===hc;)hc=Qo[--ea],Qo[ea]=null,Cs=Qo[--ea],Qo[ea]=null,Ss=Qo[--ea],Qo[ea]=null}var $o=null,Ro=null,bn=!1,Aa=null;function AI(e,t){var r=na(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function h2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$o=e,Ro=fl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$o=e,Ro=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hc!==null?{id:Ss,overflow:Cs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=na(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$o=e,Ro=null,!0):!1;default:return!1}}function O_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function F_(e){if(bn){var t=Ro;if(t){var r=t;if(!h2(e,t)){if(O_(e))throw Error(lt(418));t=fl(r.nextSibling);var o=$o;t&&h2(e,t)?AI(o,r):(e.flags=e.flags&-4097|2,bn=!1,$o=e)}}else{if(O_(e))throw Error(lt(418));e.flags=e.flags&-4097|2,bn=!1,$o=e}}}function p2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$o=e}function Pm(e){if(e!==$o)return!1;if(!bn)return p2(e),bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!R_(e.type,e.memoizedProps)),t&&(t=Ro)){if(O_(e))throw MI(),Error(lt(418));for(;t;)AI(e,t),t=fl(t.nextSibling)}if(p2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ro=fl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ro=null}}else Ro=$o?fl(e.stateNode.nextSibling):null;return!0}function MI(){for(var e=Ro;e;)e=fl(e.nextSibling)}function Wu(){Ro=$o=null,bn=!1}function v1(e){Aa===null?Aa=[e]:Aa.push(e)}var K$=Ds.ReactCurrentBatchConfig;function Th(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(lt(309));var o=r.stateNode}if(!o)throw Error(lt(147,e));var l=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(m){var c=l.refs;m===null?delete c[d]:c[d]=m},t._stringRef=d,t)}if(typeof e!="string")throw Error(lt(284));if(!r._owner)throw Error(lt(290,e))}return e}function Em(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function f2(e){var t=e._init;return t(e._payload)}function DI(e){function t(j,$){if(e){var G=j.deletions;G===null?(j.deletions=[$],j.flags|=16):G.push($)}}function r(j,$){if(!e)return null;for(;$!==null;)t(j,$),$=$.sibling;return null}function o(j,$){for(j=new Map;$!==null;)$.key!==null?j.set($.key,$):j.set($.index,$),$=$.sibling;return j}function l(j,$){return j=vl(j,$),j.index=0,j.sibling=null,j}function d(j,$,G){return j.index=G,e?(G=j.alternate,G!==null?(G=G.index,G<$?(j.flags|=2,$):G):(j.flags|=2,$)):(j.flags|=1048576,$)}function m(j){return e&&j.alternate===null&&(j.flags|=2),j}function c(j,$,G,te){return $===null||$.tag!==6?($=G0(G,j.mode,te),$.return=j,$):($=l($,G),$.return=j,$)}function b(j,$,G,te){var ie=G.type;return ie===yu?T(j,$,G.props.children,te,G.key):$!==null&&($.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===tl&&f2(ie)===$.type)?(te=l($,G.props),te.ref=Th(j,$,G),te.return=j,te):(te=Qm(G.type,G.key,G.props,null,j.mode,te),te.ref=Th(j,$,G),te.return=j,te)}function w(j,$,G,te){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=q0(G,j.mode,te),$.return=j,$):($=l($,G.children||[]),$.return=j,$)}function T(j,$,G,te,ie){return $===null||$.tag!==7?($=ac(G,j.mode,te,ie),$.return=j,$):($=l($,G),$.return=j,$)}function z(j,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return $=G0(""+$,j.mode,G),$.return=j,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case vm:return G=Qm($.type,$.key,$.props,null,j.mode,G),G.ref=Th(j,null,$),G.return=j,G;case gu:return $=q0($,j.mode,G),$.return=j,$;case tl:var te=$._init;return z(j,te($._payload),G)}if(Oh($)||bh($))return $=ac($,j.mode,G,null),$.return=j,$;Em(j,$)}return null}function P(j,$,G,te){var ie=$!==null?$.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ie!==null?null:c(j,$,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case vm:return G.key===ie?b(j,$,G,te):null;case gu:return G.key===ie?w(j,$,G,te):null;case tl:return ie=G._init,P(j,$,ie(G._payload),te)}if(Oh(G)||bh(G))return ie!==null?null:T(j,$,G,te,null);Em(j,G)}return null}function U(j,$,G,te,ie){if(typeof te=="string"&&te!==""||typeof te=="number")return j=j.get(G)||null,c($,j,""+te,ie);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case vm:return j=j.get(te.key===null?G:te.key)||null,b($,j,te,ie);case gu:return j=j.get(te.key===null?G:te.key)||null,w($,j,te,ie);case tl:var me=te._init;return U(j,$,G,me(te._payload),ie)}if(Oh(te)||bh(te))return j=j.get(G)||null,T($,j,te,ie,null);Em($,te)}return null}function H(j,$,G,te){for(var ie=null,me=null,Z=$,de=$=0,Te=null;Z!==null&&de<G.length;de++){Z.index>de?(Te=Z,Z=null):Te=Z.sibling;var ve=P(j,Z,G[de],te);if(ve===null){Z===null&&(Z=Te);break}e&&Z&&ve.alternate===null&&t(j,Z),$=d(ve,$,de),me===null?ie=ve:me.sibling=ve,me=ve,Z=Te}if(de===G.length)return r(j,Z),bn&&Xl(j,de),ie;if(Z===null){for(;de<G.length;de++)Z=z(j,G[de],te),Z!==null&&($=d(Z,$,de),me===null?ie=Z:me.sibling=Z,me=Z);return bn&&Xl(j,de),ie}for(Z=o(j,Z);de<G.length;de++)Te=U(Z,j,de,G[de],te),Te!==null&&(e&&Te.alternate!==null&&Z.delete(Te.key===null?de:Te.key),$=d(Te,$,de),me===null?ie=Te:me.sibling=Te,me=Te);return e&&Z.forEach(function(De){return t(j,De)}),bn&&Xl(j,de),ie}function W(j,$,G,te){var ie=bh(G);if(typeof ie!="function")throw Error(lt(150));if(G=ie.call(G),G==null)throw Error(lt(151));for(var me=ie=null,Z=$,de=$=0,Te=null,ve=G.next();Z!==null&&!ve.done;de++,ve=G.next()){Z.index>de?(Te=Z,Z=null):Te=Z.sibling;var De=P(j,Z,ve.value,te);if(De===null){Z===null&&(Z=Te);break}e&&Z&&De.alternate===null&&t(j,Z),$=d(De,$,de),me===null?ie=De:me.sibling=De,me=De,Z=Te}if(ve.done)return r(j,Z),bn&&Xl(j,de),ie;if(Z===null){for(;!ve.done;de++,ve=G.next())ve=z(j,ve.value,te),ve!==null&&($=d(ve,$,de),me===null?ie=ve:me.sibling=ve,me=ve);return bn&&Xl(j,de),ie}for(Z=o(j,Z);!ve.done;de++,ve=G.next())ve=U(Z,j,de,ve.value,te),ve!==null&&(e&&ve.alternate!==null&&Z.delete(ve.key===null?de:ve.key),$=d(ve,$,de),me===null?ie=ve:me.sibling=ve,me=ve);return e&&Z.forEach(function(ke){return t(j,ke)}),bn&&Xl(j,de),ie}function J(j,$,G,te){if(typeof G=="object"&&G!==null&&G.type===yu&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case vm:e:{for(var ie=G.key,me=$;me!==null;){if(me.key===ie){if(ie=G.type,ie===yu){if(me.tag===7){r(j,me.sibling),$=l(me,G.props.children),$.return=j,j=$;break e}}else if(me.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===tl&&f2(ie)===me.type){r(j,me.sibling),$=l(me,G.props),$.ref=Th(j,me,G),$.return=j,j=$;break e}r(j,me);break}else t(j,me);me=me.sibling}G.type===yu?($=ac(G.props.children,j.mode,te,G.key),$.return=j,j=$):(te=Qm(G.type,G.key,G.props,null,j.mode,te),te.ref=Th(j,$,G),te.return=j,j=te)}return m(j);case gu:e:{for(me=G.key;$!==null;){if($.key===me)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){r(j,$.sibling),$=l($,G.children||[]),$.return=j,j=$;break e}else{r(j,$);break}else t(j,$);$=$.sibling}$=q0(G,j.mode,te),$.return=j,j=$}return m(j);case tl:return me=G._init,J(j,$,me(G._payload),te)}if(Oh(G))return H(j,$,G,te);if(bh(G))return W(j,$,G,te);Em(j,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,$!==null&&$.tag===6?(r(j,$.sibling),$=l($,G),$.return=j,j=$):(r(j,$),$=G0(G,j.mode,te),$.return=j,j=$),m(j)):r(j,$)}return J}var Gu=DI(!0),RI=DI(!1),wg=kl(null),Sg=null,ku=null,_1=null;function x1(){_1=ku=Sg=null}function b1(e){var t=wg.current;fn(wg),e._currentValue=t}function N_(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Bu(e,t){Sg=e,_1=ku=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(go=!0),e.firstContext=null)}function sa(e){var t=e._currentValue;if(_1!==e)if(e={context:e,memoizedValue:t,next:null},ku===null){if(Sg===null)throw Error(lt(308));ku=e,Sg.dependencies={lanes:0,firstContext:e}}else ku=ku.next=e;return t}var tc=null;function w1(e){tc===null?tc=[e]:tc.push(e)}function LI(e,t,r,o){var l=t.interleaved;return l===null?(r.next=r,w1(t)):(r.next=l.next,l.next=r),t.interleaved=r,Ps(e,o)}function Ps(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var rl=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $I(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ml(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Rr&2){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,Ps(e,r)}return l=o.interleaved,l===null?(t.next=t,w1(o)):(t.next=l.next,l.next=t),o.interleaved=t,Ps(e,r)}function qm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,l1(e,r)}}function m2(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var l=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?l=d=m:d=d.next=m,r=r.next}while(r!==null);d===null?l=d=t:d=d.next=t}else l=d=t;r={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cg(e,t,r,o){var l=e.updateQueue;rl=!1;var d=l.firstBaseUpdate,m=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var b=c,w=b.next;b.next=null,m===null?d=w:m.next=w,m=b;var T=e.alternate;T!==null&&(T=T.updateQueue,c=T.lastBaseUpdate,c!==m&&(c===null?T.firstBaseUpdate=w:c.next=w,T.lastBaseUpdate=b))}if(d!==null){var z=l.baseState;m=0,T=w=b=null,c=d;do{var P=c.lane,U=c.eventTime;if((o&P)===P){T!==null&&(T=T.next={eventTime:U,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var H=e,W=c;switch(P=t,U=r,W.tag){case 1:if(H=W.payload,typeof H=="function"){z=H.call(U,z,P);break e}z=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=W.payload,P=typeof H=="function"?H.call(U,z,P):H,P==null)break e;z=En({},z,P);break e;case 2:rl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,P=l.effects,P===null?l.effects=[c]:P.push(c))}else U={eventTime:U,lane:P,tag:c.tag,payload:c.payload,callback:c.callback,next:null},T===null?(w=T=U,b=z):T=T.next=U,m|=P;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;P=c,c=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);if(T===null&&(b=z),l.baseState=b,l.firstBaseUpdate=w,l.lastBaseUpdate=T,t=l.shared.interleaved,t!==null){l=t;do m|=l.lane,l=l.next;while(l!==t)}else d===null&&(l.shared.lanes=0);fc|=m,e.lanes=m,e.memoizedState=z}}function g2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=r,typeof l!="function")throw Error(lt(191,l));l.call(o)}}}var qp={},es=kl(qp),wp=kl(qp),Sp=kl(qp);function rc(e){if(e===qp)throw Error(lt(174));return e}function C1(e,t){switch(ln(Sp,t),ln(wp,e),ln(es,qp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:x_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=x_(t,e)}fn(es),ln(es,t)}function qu(){fn(es),fn(wp),fn(Sp)}function BI(e){rc(Sp.current);var t=rc(es.current),r=x_(t,e.type);t!==r&&(ln(wp,e),ln(es,r))}function k1(e){wp.current===e&&(fn(es),fn(wp))}var In=kl(0);function kg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var N0=[];function T1(){for(var e=0;e<N0.length;e++)N0[e]._workInProgressVersionPrimary=null;N0.length=0}var Zm=Ds.ReactCurrentDispatcher,j0=Ds.ReactCurrentBatchConfig,pc=0,Pn=null,ii=null,pi=null,Tg=!1,Kh=!1,Cp=0,X$=0;function Li(){throw Error(lt(321))}function I1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$a(e[r],t[r]))return!1;return!0}function P1(e,t,r,o,l,d){if(pc=d,Pn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zm.current=e===null||e.memoizedState===null?eB:tB,e=r(o,l),Kh){d=0;do{if(Kh=!1,Cp=0,25<=d)throw Error(lt(301));d+=1,pi=ii=null,t.updateQueue=null,Zm.current=rB,e=r(o,l)}while(Kh)}if(Zm.current=Ig,t=ii!==null&&ii.next!==null,pc=0,pi=ii=Pn=null,Tg=!1,t)throw Error(lt(300));return e}function E1(){var e=Cp!==0;return Cp=0,e}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Pn.memoizedState=pi=e:pi=pi.next=e,pi}function la(){if(ii===null){var e=Pn.alternate;e=e!==null?e.memoizedState:null}else e=ii.next;var t=pi===null?Pn.memoizedState:pi.next;if(t!==null)pi=t,ii=e;else{if(e===null)throw Error(lt(310));ii=e,e={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},pi===null?Pn.memoizedState=pi=e:pi=pi.next=e}return pi}function kp(e,t){return typeof t=="function"?t(e):t}function V0(e){var t=la(),r=t.queue;if(r===null)throw Error(lt(311));r.lastRenderedReducer=e;var o=ii,l=o.baseQueue,d=r.pending;if(d!==null){if(l!==null){var m=l.next;l.next=d.next,d.next=m}o.baseQueue=l=d,r.pending=null}if(l!==null){d=l.next,o=o.baseState;var c=m=null,b=null,w=d;do{var T=w.lane;if((pc&T)===T)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var z={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(c=b=z,m=o):b=b.next=z,Pn.lanes|=T,fc|=T}w=w.next}while(w!==null&&w!==d);b===null?m=o:b.next=c,$a(o,t.memoizedState)||(go=!0),t.memoizedState=o,t.baseState=m,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){l=e;do d=l.lane,Pn.lanes|=d,fc|=d,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function U0(e){var t=la(),r=t.queue;if(r===null)throw Error(lt(311));r.lastRenderedReducer=e;var o=r.dispatch,l=r.pending,d=t.memoizedState;if(l!==null){r.pending=null;var m=l=l.next;do d=e(d,m.action),m=m.next;while(m!==l);$a(d,t.memoizedState)||(go=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function OI(){}function FI(e,t){var r=Pn,o=la(),l=t(),d=!$a(o.memoizedState,l);if(d&&(o.memoizedState=l,go=!0),o=o.queue,z1(VI.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||pi!==null&&pi.memoizedState.tag&1){if(r.flags|=2048,Tp(9,jI.bind(null,r,o,l,t),void 0,null),fi===null)throw Error(lt(349));pc&30||NI(r,t,l)}return l}function NI(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Pn.updateQueue,t===null?(t={lastEffect:null,stores:null},Pn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function jI(e,t,r,o){t.value=r,t.getSnapshot=o,UI(t)&&HI(e)}function VI(e,t,r){return r(function(){UI(t)&&HI(e)})}function UI(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$a(e,r)}catch{return!0}}function HI(e){var t=Ps(e,1);t!==null&&Da(t,e,1,-1)}function y2(e){var t=qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:e},t.queue=e,e=e.dispatch=Q$.bind(null,Pn,e),[t.memoizedState,e]}function Tp(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=Pn.updateQueue,t===null?(t={lastEffect:null,stores:null},Pn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function WI(){return la().memoizedState}function Km(e,t,r,o){var l=qa();Pn.flags|=e,l.memoizedState=Tp(1|t,r,void 0,o===void 0?null:o)}function Dy(e,t,r,o){var l=la();o=o===void 0?null:o;var d=void 0;if(ii!==null){var m=ii.memoizedState;if(d=m.destroy,o!==null&&I1(o,m.deps)){l.memoizedState=Tp(t,r,d,o);return}}Pn.flags|=e,l.memoizedState=Tp(1|t,r,d,o)}function v2(e,t){return Km(8390656,8,e,t)}function z1(e,t){return Dy(2048,8,e,t)}function GI(e,t){return Dy(4,2,e,t)}function qI(e,t){return Dy(4,4,e,t)}function ZI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function KI(e,t,r){return r=r!=null?r.concat([e]):null,Dy(4,4,ZI.bind(null,t,e),r)}function A1(){}function XI(e,t){var r=la();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&I1(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function JI(e,t){var r=la();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&I1(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function YI(e,t,r){return pc&21?($a(r,t)||(r=nI(),Pn.lanes|=r,fc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,go=!0),e.memoizedState=r)}function J$(e,t){var r=Gr;Gr=r!==0&&4>r?r:4,e(!0);var o=j0.transition;j0.transition={};try{e(!1),t()}finally{Gr=r,j0.transition=o}}function QI(){return la().memoizedState}function Y$(e,t,r){var o=yl(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},eP(e))tP(t,r);else if(r=LI(e,t,r,o),r!==null){var l=ro();Da(r,e,o,l),rP(r,t,o)}}function Q$(e,t,r){var o=yl(e),l={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(eP(e))tP(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,c=d(m,r);if(l.hasEagerState=!0,l.eagerState=c,$a(c,m)){var b=t.interleaved;b===null?(l.next=l,w1(t)):(l.next=b.next,b.next=l),t.interleaved=l;return}}catch{}finally{}r=LI(e,t,l,o),r!==null&&(l=ro(),Da(r,e,o,l),rP(r,t,o))}}function eP(e){var t=e.alternate;return e===Pn||t!==null&&t===Pn}function tP(e,t){Kh=Tg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function rP(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,l1(e,r)}}var Ig={readContext:sa,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},eB={readContext:sa,useCallback:function(e,t){return qa().memoizedState=[e,t===void 0?null:t],e},useContext:sa,useEffect:v2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Km(4194308,4,ZI.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Km(4194308,4,e,t)},useInsertionEffect:function(e,t){return Km(4,2,e,t)},useMemo:function(e,t){var r=qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=qa();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Y$.bind(null,Pn,e),[o.memoizedState,e]},useRef:function(e){var t=qa();return e={current:e},t.memoizedState=e},useState:y2,useDebugValue:A1,useDeferredValue:function(e){return qa().memoizedState=e},useTransition:function(){var e=y2(!1),t=e[0];return e=J$.bind(null,e[1]),qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=Pn,l=qa();if(bn){if(r===void 0)throw Error(lt(407));r=r()}else{if(r=t(),fi===null)throw Error(lt(349));pc&30||NI(o,t,r)}l.memoizedState=r;var d={value:r,getSnapshot:t};return l.queue=d,v2(VI.bind(null,o,d,e),[e]),o.flags|=2048,Tp(9,jI.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=qa(),t=fi.identifierPrefix;if(bn){var r=Cs,o=Ss;r=(o&~(1<<32-Ma(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=X$++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tB={readContext:sa,useCallback:XI,useContext:sa,useEffect:z1,useImperativeHandle:KI,useInsertionEffect:GI,useLayoutEffect:qI,useMemo:JI,useReducer:V0,useRef:WI,useState:function(){return V0(kp)},useDebugValue:A1,useDeferredValue:function(e){var t=la();return YI(t,ii.memoizedState,e)},useTransition:function(){var e=V0(kp)[0],t=la().memoizedState;return[e,t]},useMutableSource:OI,useSyncExternalStore:FI,useId:QI,unstable_isNewReconciler:!1},rB={readContext:sa,useCallback:XI,useContext:sa,useEffect:z1,useImperativeHandle:KI,useInsertionEffect:GI,useLayoutEffect:qI,useMemo:JI,useReducer:U0,useRef:WI,useState:function(){return U0(kp)},useDebugValue:A1,useDeferredValue:function(e){var t=la();return ii===null?t.memoizedState=e:YI(t,ii.memoizedState,e)},useTransition:function(){var e=U0(kp)[0],t=la().memoizedState;return[e,t]},useMutableSource:OI,useSyncExternalStore:FI,useId:QI,unstable_isNewReconciler:!1};function Pa(e,t){if(e&&e.defaultProps){t=En({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function j_(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:En({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ry={isMounted:function(e){return(e=e._reactInternals)?_c(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=ro(),l=yl(e),d=ks(o,l);d.payload=t,r!=null&&(d.callback=r),t=ml(e,d,l),t!==null&&(Da(t,e,l,o),qm(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=ro(),l=yl(e),d=ks(o,l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=ml(e,d,l),t!==null&&(Da(t,e,l,o),qm(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ro(),o=yl(e),l=ks(r,o);l.tag=2,t!=null&&(l.callback=t),t=ml(e,l,o),t!==null&&(Da(t,e,o,r),qm(t,e,o))}};function _2(e,t,r,o,l,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,m):t.prototype&&t.prototype.isPureReactComponent?!vp(r,o)||!vp(l,d):!0}function nP(e,t,r){var o=!1,l=wl,d=t.contextType;return typeof d=="object"&&d!==null?d=sa(d):(l=_o(t)?dc:Vi.current,o=t.contextTypes,d=(o=o!=null)?Hu(e,l):wl),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ry,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=d),t}function x2(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Ry.enqueueReplaceState(t,t.state,null)}function V_(e,t,r,o){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},S1(e);var d=t.contextType;typeof d=="object"&&d!==null?l.context=sa(d):(d=_o(t)?dc:Vi.current,l.context=Hu(e,d)),l.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(j_(e,t,d,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ry.enqueueReplaceState(l,l.state,null),Cg(e,r,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Zu(e,t){try{var r="",o=t;do r+=z3(o),o=o.return;while(o);var l=r}catch(d){l=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:l,digest:null}}function H0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function U_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var nB=typeof WeakMap=="function"?WeakMap:Map;function iP(e,t,r){r=ks(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Eg||(Eg=!0,Q_=o),U_(e,t)},r}function oP(e,t,r){r=ks(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;r.payload=function(){return o(l)},r.callback=function(){U_(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){U_(e,t),typeof o!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function b2(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new nB;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(r)||(l.add(r),e=yB.bind(null,e,t,r),t.then(e,e))}function w2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function S2(e,t,r,o,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ks(-1,1),t.tag=2,ml(r,t,1))),r.lanes|=1),e)}var iB=Ds.ReactCurrentOwner,go=!1;function to(e,t,r,o){t.child=e===null?RI(t,null,r,o):Gu(t,e.child,r,o)}function C2(e,t,r,o,l){r=r.render;var d=t.ref;return Bu(t,l),o=P1(e,t,r,o,d,l),r=E1(),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Es(e,t,l)):(bn&&r&&g1(t),t.flags|=1,to(e,t,o,l),t.child)}function k2(e,t,r,o,l){if(e===null){var d=r.type;return typeof d=="function"&&!F1(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,aP(e,t,d,o,l)):(e=Qm(r.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&l)){var m=d.memoizedProps;if(r=r.compare,r=r!==null?r:vp,r(m,o)&&e.ref===t.ref)return Es(e,t,l)}return t.flags|=1,e=vl(d,o),e.ref=t.ref,e.return=t,t.child=e}function aP(e,t,r,o,l){if(e!==null){var d=e.memoizedProps;if(vp(d,o)&&e.ref===t.ref)if(go=!1,t.pendingProps=o=d,(e.lanes&l)!==0)e.flags&131072&&(go=!0);else return t.lanes=e.lanes,Es(e,t,l)}return H_(e,t,r,o,l)}function sP(e,t,r){var o=t.pendingProps,l=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Iu,Po),Po|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ln(Iu,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,ln(Iu,Po),Po|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,ln(Iu,Po),Po|=o;return to(e,t,l,r),t.child}function lP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function H_(e,t,r,o,l){var d=_o(r)?dc:Vi.current;return d=Hu(t,d),Bu(t,l),r=P1(e,t,r,o,d,l),o=E1(),e!==null&&!go?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Es(e,t,l)):(bn&&o&&g1(t),t.flags|=1,to(e,t,r,l),t.child)}function T2(e,t,r,o,l){if(_o(r)){var d=!0;_g(t)}else d=!1;if(Bu(t,l),t.stateNode===null)Xm(e,t),nP(t,r,o),V_(t,r,o,l),o=!0;else if(e===null){var m=t.stateNode,c=t.memoizedProps;m.props=c;var b=m.context,w=r.contextType;typeof w=="object"&&w!==null?w=sa(w):(w=_o(r)?dc:Vi.current,w=Hu(t,w));var T=r.getDerivedStateFromProps,z=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function";z||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(c!==o||b!==w)&&x2(t,m,o,w),rl=!1;var P=t.memoizedState;m.state=P,Cg(t,o,m,l),b=t.memoizedState,c!==o||P!==b||vo.current||rl?(typeof T=="function"&&(j_(t,r,T,o),b=t.memoizedState),(c=rl||_2(t,r,c,o,P,b,w))?(z||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),m.props=o,m.state=b,m.context=w,o=c):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,$I(e,t),c=t.memoizedProps,w=t.type===t.elementType?c:Pa(t.type,c),m.props=w,z=t.pendingProps,P=m.context,b=r.contextType,typeof b=="object"&&b!==null?b=sa(b):(b=_o(r)?dc:Vi.current,b=Hu(t,b));var U=r.getDerivedStateFromProps;(T=typeof U=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(c!==z||P!==b)&&x2(t,m,o,b),rl=!1,P=t.memoizedState,m.state=P,Cg(t,o,m,l);var H=t.memoizedState;c!==z||P!==H||vo.current||rl?(typeof U=="function"&&(j_(t,r,U,o),H=t.memoizedState),(w=rl||_2(t,r,w,o,P,H,b)||!1)?(T||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,H,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,H,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=H),m.props=o,m.state=H,m.context=b,o=w):(typeof m.componentDidUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),o=!1)}return W_(e,t,r,o,d,l)}function W_(e,t,r,o,l,d){lP(e,t);var m=(t.flags&128)!==0;if(!o&&!m)return l&&d2(t,r,!1),Es(e,t,d);o=t.stateNode,iB.current=t;var c=m&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=Gu(t,e.child,null,d),t.child=Gu(t,null,c,d)):to(e,t,c,d),t.memoizedState=o.state,l&&d2(t,r,!0),t.child}function cP(e){var t=e.stateNode;t.pendingContext?u2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&u2(e,t.context,!1),C1(e,t.containerInfo)}function I2(e,t,r,o,l){return Wu(),v1(l),t.flags|=256,to(e,t,r,o),t.child}var G_={dehydrated:null,treeContext:null,retryLane:0};function q_(e){return{baseLanes:e,cachePool:null,transitions:null}}function uP(e,t,r){var o=t.pendingProps,l=In.current,d=!1,m=(t.flags&128)!==0,c;if((c=m)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),ln(In,l&1),e===null)return F_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=o.children,e=o.fallback,d?(o=t.mode,d=t.child,m={mode:"hidden",children:m},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=m):d=By(m,o,0,null),e=ac(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=q_(r),t.memoizedState=G_,e):M1(t,m));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return oB(e,t,m,o,c,l,r);if(d){d=o.fallback,m=t.mode,l=e.child,c=l.sibling;var b={mode:"hidden",children:o.children};return!(m&1)&&t.child!==l?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=vl(l,b),o.subtreeFlags=l.subtreeFlags&14680064),c!==null?d=vl(c,d):(d=ac(d,m,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,m=e.child.memoizedState,m=m===null?q_(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},d.memoizedState=m,d.childLanes=e.childLanes&~r,t.memoizedState=G_,o}return d=e.child,e=d.sibling,o=vl(d,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function M1(e,t){return t=By({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zm(e,t,r,o){return o!==null&&v1(o),Gu(t,e.child,null,r),e=M1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oB(e,t,r,o,l,d,m){if(r)return t.flags&256?(t.flags&=-257,o=H0(Error(lt(422))),zm(e,t,m,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,l=t.mode,o=By({mode:"visible",children:o.children},l,0,null),d=ac(d,l,m,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,t.mode&1&&Gu(t,e.child,null,m),t.child.memoizedState=q_(m),t.memoizedState=G_,d);if(!(t.mode&1))return zm(e,t,m,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var c=o.dgst;return o=c,d=Error(lt(419)),o=H0(d,o,void 0),zm(e,t,m,o)}if(c=(m&e.childLanes)!==0,go||c){if(o=fi,o!==null){switch(m&-m){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(o.suspendedLanes|m)?0:l,l!==0&&l!==d.retryLane&&(d.retryLane=l,Ps(e,l),Da(o,e,l,-1))}return O1(),o=H0(Error(lt(421))),zm(e,t,m,o)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=vB.bind(null,e),l._reactRetry=t,null):(e=d.treeContext,Ro=fl(l.nextSibling),$o=t,bn=!0,Aa=null,e!==null&&(Qo[ea++]=Ss,Qo[ea++]=Cs,Qo[ea++]=hc,Ss=e.id,Cs=e.overflow,hc=t),t=M1(t,o.children),t.flags|=4096,t)}function P2(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),N_(e.return,t,r)}function W0(e,t,r,o,l){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=l)}function dP(e,t,r){var o=t.pendingProps,l=o.revealOrder,d=o.tail;if(to(e,t,o.children,r),o=In.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P2(e,r,t);else if(e.tag===19)P2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(ln(In,o),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&kg(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),W0(t,!1,l,r,d);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&kg(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}W0(t,!0,r,null,d);break;case"together":W0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Es(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,r=vl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function aB(e,t,r){switch(t.tag){case 3:cP(t),Wu();break;case 5:BI(t);break;case 1:_o(t.type)&&_g(t);break;case 4:C1(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;ln(wg,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(ln(In,In.current&1),t.flags|=128,null):r&t.child.childLanes?uP(e,t,r):(ln(In,In.current&1),e=Es(e,t,r),e!==null?e.sibling:null);ln(In,In.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return dP(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ln(In,In.current),o)break;return null;case 22:case 23:return t.lanes=0,sP(e,t,r)}return Es(e,t,r)}var hP,Z_,pP,fP;hP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Z_=function(){};pP=function(e,t,r,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,rc(es.current);var d=null;switch(r){case"input":l=g_(e,l),o=g_(e,o),d=[];break;case"select":l=En({},l,{value:void 0}),o=En({},o,{value:void 0}),d=[];break;case"textarea":l=__(e,l),o=__(e,o),d=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=yg)}b_(r,o);var m;r=null;for(w in l)if(!o.hasOwnProperty(w)&&l.hasOwnProperty(w)&&l[w]!=null)if(w==="style"){var c=l[w];for(m in c)c.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(dp.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in o){var b=o[w];if(c=l!=null?l[w]:void 0,o.hasOwnProperty(w)&&b!==c&&(b!=null||c!=null))if(w==="style")if(c){for(m in c)!c.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in b)b.hasOwnProperty(m)&&c[m]!==b[m]&&(r||(r={}),r[m]=b[m])}else r||(d||(d=[]),d.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,c=c?c.__html:void 0,b!=null&&c!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(dp.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&pn("scroll",e),d||c===b||(d=[])):(d=d||[]).push(w,b))}r&&(d=d||[]).push("style",r);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};fP=function(e,t,r,o){r!==o&&(t.flags|=4)};function Ih(e,t){if(!bn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function $i(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function sB(e,t,r){var o=t.pendingProps;switch(y1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(t),null;case 1:return _o(t.type)&&vg(),$i(t),null;case 3:return o=t.stateNode,qu(),fn(vo),fn(Vi),T1(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Pm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Aa!==null&&(rx(Aa),Aa=null))),Z_(e,t),$i(t),null;case 5:k1(t);var l=rc(Sp.current);if(r=t.type,e!==null&&t.stateNode!=null)pP(e,t,r,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(lt(166));return $i(t),null}if(e=rc(es.current),Pm(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[Xa]=t,o[bp]=d,e=(t.mode&1)!==0,r){case"dialog":pn("cancel",o),pn("close",o);break;case"iframe":case"object":case"embed":pn("load",o);break;case"video":case"audio":for(l=0;l<Nh.length;l++)pn(Nh[l],o);break;case"source":pn("error",o);break;case"img":case"image":case"link":pn("error",o),pn("load",o);break;case"details":pn("toggle",o);break;case"input":BS(o,d),pn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},pn("invalid",o);break;case"textarea":FS(o,d),pn("invalid",o)}b_(r,d),l=null;for(var m in d)if(d.hasOwnProperty(m)){var c=d[m];m==="children"?typeof c=="string"?o.textContent!==c&&(d.suppressHydrationWarning!==!0&&Im(o.textContent,c,e),l=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(d.suppressHydrationWarning!==!0&&Im(o.textContent,c,e),l=["children",""+c]):dp.hasOwnProperty(m)&&c!=null&&m==="onScroll"&&pn("scroll",o)}switch(r){case"input":_m(o),OS(o,d,!0);break;case"textarea":_m(o),NS(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=yg)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{m=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=VT(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(r,{is:o.is}):(e=m.createElement(r),r==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,r),e[Xa]=t,e[bp]=o,hP(e,t,!1,!1),t.stateNode=e;e:{switch(m=w_(r,o),r){case"dialog":pn("cancel",e),pn("close",e),l=o;break;case"iframe":case"object":case"embed":pn("load",e),l=o;break;case"video":case"audio":for(l=0;l<Nh.length;l++)pn(Nh[l],e);l=o;break;case"source":pn("error",e),l=o;break;case"img":case"image":case"link":pn("error",e),pn("load",e),l=o;break;case"details":pn("toggle",e),l=o;break;case"input":BS(e,o),l=g_(e,o),pn("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=En({},o,{value:void 0}),pn("invalid",e);break;case"textarea":FS(e,o),l=__(e,o),pn("invalid",e);break;default:l=o}b_(r,l),c=l;for(d in c)if(c.hasOwnProperty(d)){var b=c[d];d==="style"?WT(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&UT(e,b)):d==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&hp(e,b):typeof b=="number"&&hp(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(dp.hasOwnProperty(d)?b!=null&&d==="onScroll"&&pn("scroll",e):b!=null&&r1(e,d,b,m))}switch(r){case"input":_m(e),OS(e,o,!1);break;case"textarea":_m(e),NS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+bl(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?Du(e,!!o.multiple,d,!1):o.defaultValue!=null&&Du(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=yg)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $i(t),null;case 6:if(e&&t.stateNode!=null)fP(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(lt(166));if(r=rc(Sp.current),rc(es.current),Pm(t)){if(o=t.stateNode,r=t.memoizedProps,o[Xa]=t,(d=o.nodeValue!==r)&&(e=$o,e!==null))switch(e.tag){case 3:Im(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Im(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Xa]=t,t.stateNode=o}return $i(t),null;case 13:if(fn(In),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bn&&Ro!==null&&t.mode&1&&!(t.flags&128))MI(),Wu(),t.flags|=98560,d=!1;else if(d=Pm(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(lt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(lt(317));d[Xa]=t}else Wu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$i(t),d=!1}else Aa!==null&&(rx(Aa),Aa=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||In.current&1?oi===0&&(oi=3):O1())),t.updateQueue!==null&&(t.flags|=4),$i(t),null);case 4:return qu(),Z_(e,t),e===null&&_p(t.stateNode.containerInfo),$i(t),null;case 10:return b1(t.type._context),$i(t),null;case 17:return _o(t.type)&&vg(),$i(t),null;case 19:if(fn(In),d=t.memoizedState,d===null)return $i(t),null;if(o=(t.flags&128)!==0,m=d.rendering,m===null)if(o)Ih(d,!1);else{if(oi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=kg(e),m!==null){for(t.flags|=128,Ih(d,!1),o=m.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,m=d.alternate,m===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,e=m.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ln(In,In.current&1|2),t.child}e=e.sibling}d.tail!==null&&qn()>Ku&&(t.flags|=128,o=!0,Ih(d,!1),t.lanes=4194304)}else{if(!o)if(e=kg(m),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ih(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!bn)return $i(t),null}else 2*qn()-d.renderingStartTime>Ku&&r!==1073741824&&(t.flags|=128,o=!0,Ih(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(r=d.last,r!==null?r.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=qn(),t.sibling=null,r=In.current,ln(In,o?r&1|2:r&1),t):($i(t),null);case 22:case 23:return B1(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Po&1073741824&&($i(t),t.subtreeFlags&6&&(t.flags|=8192)):$i(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function lB(e,t){switch(y1(t),t.tag){case 1:return _o(t.type)&&vg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qu(),fn(vo),fn(Vi),T1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return k1(t),null;case 13:if(fn(In),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));Wu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fn(In),null;case 4:return qu(),null;case 10:return b1(t.type._context),null;case 22:case 23:return B1(),null;case 24:return null;default:return null}}var Am=!1,Fi=!1,cB=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Tu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Bn(e,t,o)}else r.current=null}function K_(e,t,r){try{r()}catch(o){Bn(e,t,o)}}var E2=!1;function uB(e,t){if(M_=fg,e=_I(),m1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var l=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var m=0,c=-1,b=-1,w=0,T=0,z=e,P=null;t:for(;;){for(var U;z!==r||l!==0&&z.nodeType!==3||(c=m+l),z!==d||o!==0&&z.nodeType!==3||(b=m+o),z.nodeType===3&&(m+=z.nodeValue.length),(U=z.firstChild)!==null;)P=z,z=U;for(;;){if(z===e)break t;if(P===r&&++w===l&&(c=m),P===d&&++T===o&&(b=m),(U=z.nextSibling)!==null)break;z=P,P=z.parentNode}z=U}r=c===-1||b===-1?null:{start:c,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(D_={focusedElem:e,selectionRange:r},fg=!1,Ut=t;Ut!==null;)if(t=Ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ut=e;else for(;Ut!==null;){t=Ut;try{var H=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var W=H.memoizedProps,J=H.memoizedState,j=t.stateNode,$=j.getSnapshotBeforeUpdate(t.elementType===t.type?W:Pa(t.type,W),J);j.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(te){Bn(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,Ut=e;break}Ut=t.return}return H=E2,E2=!1,H}function Xh(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var d=l.destroy;l.destroy=void 0,d!==void 0&&K_(t,r,d)}l=l.next}while(l!==o)}}function Ly(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function X_(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mP(e){var t=e.alternate;t!==null&&(e.alternate=null,mP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xa],delete t[bp],delete t[$_],delete t[G$],delete t[q$])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gP(e){return e.tag===5||e.tag===3||e.tag===4}function z2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function J_(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yg));else if(o!==4&&(e=e.child,e!==null))for(J_(e,t,r),e=e.sibling;e!==null;)J_(e,t,r),e=e.sibling}function Y_(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Y_(e,t,r),e=e.sibling;e!==null;)Y_(e,t,r),e=e.sibling}var wi=null,Ea=!1;function Qs(e,t,r){for(r=r.child;r!==null;)yP(e,t,r),r=r.sibling}function yP(e,t,r){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Iy,r)}catch{}switch(r.tag){case 5:Fi||Tu(r,t);case 6:var o=wi,l=Ea;wi=null,Qs(e,t,r),wi=o,Ea=l,wi!==null&&(Ea?(e=wi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wi.removeChild(r.stateNode));break;case 18:wi!==null&&(Ea?(e=wi,r=r.stateNode,e.nodeType===8?O0(e.parentNode,r):e.nodeType===1&&O0(e,r),gp(e)):O0(wi,r.stateNode));break;case 4:o=wi,l=Ea,wi=r.stateNode.containerInfo,Ea=!0,Qs(e,t,r),wi=o,Ea=l;break;case 0:case 11:case 14:case 15:if(!Fi&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var d=l,m=d.destroy;d=d.tag,m!==void 0&&(d&2||d&4)&&K_(r,t,m),l=l.next}while(l!==o)}Qs(e,t,r);break;case 1:if(!Fi&&(Tu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(c){Bn(r,t,c)}Qs(e,t,r);break;case 21:Qs(e,t,r);break;case 22:r.mode&1?(Fi=(o=Fi)||r.memoizedState!==null,Qs(e,t,r),Fi=o):Qs(e,t,r);break;default:Qs(e,t,r)}}function A2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new cB),t.forEach(function(o){var l=_B.bind(null,e,o);r.has(o)||(r.add(o),o.then(l,l))})}}function ka(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];try{var d=e,m=t,c=m;e:for(;c!==null;){switch(c.tag){case 5:wi=c.stateNode,Ea=!1;break e;case 3:wi=c.stateNode.containerInfo,Ea=!0;break e;case 4:wi=c.stateNode.containerInfo,Ea=!0;break e}c=c.return}if(wi===null)throw Error(lt(160));yP(d,m,l),wi=null,Ea=!1;var b=l.alternate;b!==null&&(b.return=null),l.return=null}catch(w){Bn(l,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vP(t,e),t=t.sibling}function vP(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ka(t,e),Ga(e),o&4){try{Xh(3,e,e.return),Ly(3,e)}catch(W){Bn(e,e.return,W)}try{Xh(5,e,e.return)}catch(W){Bn(e,e.return,W)}}break;case 1:ka(t,e),Ga(e),o&512&&r!==null&&Tu(r,r.return);break;case 5:if(ka(t,e),Ga(e),o&512&&r!==null&&Tu(r,r.return),e.flags&32){var l=e.stateNode;try{hp(l,"")}catch(W){Bn(e,e.return,W)}}if(o&4&&(l=e.stateNode,l!=null)){var d=e.memoizedProps,m=r!==null?r.memoizedProps:d,c=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{c==="input"&&d.type==="radio"&&d.name!=null&&NT(l,d),w_(c,m);var w=w_(c,d);for(m=0;m<b.length;m+=2){var T=b[m],z=b[m+1];T==="style"?WT(l,z):T==="dangerouslySetInnerHTML"?UT(l,z):T==="children"?hp(l,z):r1(l,T,z,w)}switch(c){case"input":y_(l,d);break;case"textarea":jT(l,d);break;case"select":var P=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!d.multiple;var U=d.value;U!=null?Du(l,!!d.multiple,U,!1):P!==!!d.multiple&&(d.defaultValue!=null?Du(l,!!d.multiple,d.defaultValue,!0):Du(l,!!d.multiple,d.multiple?[]:"",!1))}l[bp]=d}catch(W){Bn(e,e.return,W)}}break;case 6:if(ka(t,e),Ga(e),o&4){if(e.stateNode===null)throw Error(lt(162));l=e.stateNode,d=e.memoizedProps;try{l.nodeValue=d}catch(W){Bn(e,e.return,W)}}break;case 3:if(ka(t,e),Ga(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{gp(t.containerInfo)}catch(W){Bn(e,e.return,W)}break;case 4:ka(t,e),Ga(e);break;case 13:ka(t,e),Ga(e),l=e.child,l.flags&8192&&(d=l.memoizedState!==null,l.stateNode.isHidden=d,!d||l.alternate!==null&&l.alternate.memoizedState!==null||(L1=qn())),o&4&&A2(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(Fi=(w=Fi)||T,ka(t,e),Fi=w):ka(t,e),Ga(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!T&&e.mode&1)for(Ut=e,T=e.child;T!==null;){for(z=Ut=T;Ut!==null;){switch(P=Ut,U=P.child,P.tag){case 0:case 11:case 14:case 15:Xh(4,P,P.return);break;case 1:Tu(P,P.return);var H=P.stateNode;if(typeof H.componentWillUnmount=="function"){o=P,r=P.return;try{t=o,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(W){Bn(o,r,W)}}break;case 5:Tu(P,P.return);break;case 22:if(P.memoizedState!==null){D2(z);continue}}U!==null?(U.return=P,Ut=U):D2(z)}T=T.sibling}e:for(T=null,z=e;;){if(z.tag===5){if(T===null){T=z;try{l=z.stateNode,w?(d=l.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(c=z.stateNode,b=z.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,c.style.display=HT("display",m))}catch(W){Bn(e,e.return,W)}}}else if(z.tag===6){if(T===null)try{z.stateNode.nodeValue=w?"":z.memoizedProps}catch(W){Bn(e,e.return,W)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;T===z&&(T=null),z=z.return}T===z&&(T=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:ka(t,e),Ga(e),o&4&&A2(e);break;case 21:break;default:ka(t,e),Ga(e)}}function Ga(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(gP(r)){var o=r;break e}r=r.return}throw Error(lt(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(hp(l,""),o.flags&=-33);var d=z2(e);Y_(e,d,l);break;case 3:case 4:var m=o.stateNode.containerInfo,c=z2(e);J_(e,c,m);break;default:throw Error(lt(161))}}catch(b){Bn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dB(e,t,r){Ut=e,_P(e)}function _P(e,t,r){for(var o=(e.mode&1)!==0;Ut!==null;){var l=Ut,d=l.child;if(l.tag===22&&o){var m=l.memoizedState!==null||Am;if(!m){var c=l.alternate,b=c!==null&&c.memoizedState!==null||Fi;c=Am;var w=Fi;if(Am=m,(Fi=b)&&!w)for(Ut=l;Ut!==null;)m=Ut,b=m.child,m.tag===22&&m.memoizedState!==null?R2(l):b!==null?(b.return=m,Ut=b):R2(l);for(;d!==null;)Ut=d,_P(d),d=d.sibling;Ut=l,Am=c,Fi=w}M2(e)}else l.subtreeFlags&8772&&d!==null?(d.return=l,Ut=d):M2(e)}}function M2(e){for(;Ut!==null;){var t=Ut;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fi||Ly(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Fi)if(r===null)o.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Pa(t.type,r.memoizedProps);o.componentDidUpdate(l,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&g2(t,d,o);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}g2(t,m,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var z=T.dehydrated;z!==null&&gp(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}Fi||t.flags&512&&X_(t)}catch(P){Bn(t,t.return,P)}}if(t===e){Ut=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ut=r;break}Ut=t.return}}function D2(e){for(;Ut!==null;){var t=Ut;if(t===e){Ut=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ut=r;break}Ut=t.return}}function R2(e){for(;Ut!==null;){var t=Ut;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ly(4,t)}catch(b){Bn(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(b){Bn(t,l,b)}}var d=t.return;try{X_(t)}catch(b){Bn(t,d,b)}break;case 5:var m=t.return;try{X_(t)}catch(b){Bn(t,m,b)}}}catch(b){Bn(t,t.return,b)}if(t===e){Ut=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ut=c;break}Ut=t.return}}var hB=Math.ceil,Pg=Ds.ReactCurrentDispatcher,D1=Ds.ReactCurrentOwner,oa=Ds.ReactCurrentBatchConfig,Rr=0,fi=null,Yn=null,Ci=0,Po=0,Iu=kl(0),oi=0,Ip=null,fc=0,$y=0,R1=0,Jh=null,mo=null,L1=0,Ku=1/0,bs=null,Eg=!1,Q_=null,gl=null,Mm=!1,ul=null,zg=0,Yh=0,ex=null,Jm=-1,Ym=0;function ro(){return Rr&6?qn():Jm!==-1?Jm:Jm=qn()}function yl(e){return e.mode&1?Rr&2&&Ci!==0?Ci&-Ci:K$.transition!==null?(Ym===0&&(Ym=nI()),Ym):(e=Gr,e!==0||(e=window.event,e=e===void 0?16:uI(e.type)),e):1}function Da(e,t,r,o){if(50<Yh)throw Yh=0,ex=null,Error(lt(185));Hp(e,r,o),(!(Rr&2)||e!==fi)&&(e===fi&&(!(Rr&2)&&($y|=r),oi===4&&ol(e,Ci)),xo(e,o),r===1&&Rr===0&&!(t.mode&1)&&(Ku=qn()+500,My&&Tl()))}function xo(e,t){var r=e.callbackNode;K3(e,t);var o=pg(e,e===fi?Ci:0);if(o===0)r!==null&&US(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&US(r),t===1)e.tag===0?Z$(L2.bind(null,e)):EI(L2.bind(null,e)),H$(function(){!(Rr&6)&&Tl()}),r=null;else{switch(iI(o)){case 1:r=s1;break;case 4:r=tI;break;case 16:r=hg;break;case 536870912:r=rI;break;default:r=hg}r=IP(r,xP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xP(e,t){if(Jm=-1,Ym=0,Rr&6)throw Error(lt(327));var r=e.callbackNode;if(Ou()&&e.callbackNode!==r)return null;var o=pg(e,e===fi?Ci:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Ag(e,o);else{t=o;var l=Rr;Rr|=2;var d=wP();(fi!==e||Ci!==t)&&(bs=null,Ku=qn()+500,oc(e,t));do try{mB();break}catch(c){bP(e,c)}while(!0);x1(),Pg.current=d,Rr=l,Yn!==null?t=0:(fi=null,Ci=0,t=oi)}if(t!==0){if(t===2&&(l=I_(e),l!==0&&(o=l,t=tx(e,l))),t===1)throw r=Ip,oc(e,0),ol(e,o),xo(e,qn()),r;if(t===6)ol(e,o);else{if(l=e.current.alternate,!(o&30)&&!pB(l)&&(t=Ag(e,o),t===2&&(d=I_(e),d!==0&&(o=d,t=tx(e,d))),t===1))throw r=Ip,oc(e,0),ol(e,o),xo(e,qn()),r;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(lt(345));case 2:Jl(e,mo,bs);break;case 3:if(ol(e,o),(o&130023424)===o&&(t=L1+500-qn(),10<t)){if(pg(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){ro(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=L_(Jl.bind(null,e,mo,bs),t);break}Jl(e,mo,bs);break;case 4:if(ol(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var m=31-Ma(o);d=1<<m,m=t[m],m>l&&(l=m),o&=~d}if(o=l,o=qn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*hB(o/1960))-o,10<o){e.timeoutHandle=L_(Jl.bind(null,e,mo,bs),o);break}Jl(e,mo,bs);break;case 5:Jl(e,mo,bs);break;default:throw Error(lt(329))}}}return xo(e,qn()),e.callbackNode===r?xP.bind(null,e):null}function tx(e,t){var r=Jh;return e.current.memoizedState.isDehydrated&&(oc(e,t).flags|=256),e=Ag(e,t),e!==2&&(t=mo,mo=r,t!==null&&rx(t)),e}function rx(e){mo===null?mo=e:mo.push.apply(mo,e)}function pB(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var l=r[o],d=l.getSnapshot;l=l.value;try{if(!$a(d(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ol(e,t){for(t&=~R1,t&=~$y,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ma(t),o=1<<r;e[r]=-1,t&=~o}}function L2(e){if(Rr&6)throw Error(lt(327));Ou();var t=pg(e,0);if(!(t&1))return xo(e,qn()),null;var r=Ag(e,t);if(e.tag!==0&&r===2){var o=I_(e);o!==0&&(t=o,r=tx(e,o))}if(r===1)throw r=Ip,oc(e,0),ol(e,t),xo(e,qn()),r;if(r===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jl(e,mo,bs),xo(e,qn()),null}function $1(e,t){var r=Rr;Rr|=1;try{return e(t)}finally{Rr=r,Rr===0&&(Ku=qn()+500,My&&Tl())}}function mc(e){ul!==null&&ul.tag===0&&!(Rr&6)&&Ou();var t=Rr;Rr|=1;var r=oa.transition,o=Gr;try{if(oa.transition=null,Gr=1,e)return e()}finally{Gr=o,oa.transition=r,Rr=t,!(Rr&6)&&Tl()}}function B1(){Po=Iu.current,fn(Iu)}function oc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,U$(r)),Yn!==null)for(r=Yn.return;r!==null;){var o=r;switch(y1(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&vg();break;case 3:qu(),fn(vo),fn(Vi),T1();break;case 5:k1(o);break;case 4:qu();break;case 13:fn(In);break;case 19:fn(In);break;case 10:b1(o.type._context);break;case 22:case 23:B1()}r=r.return}if(fi=e,Yn=e=vl(e.current,null),Ci=Po=t,oi=0,Ip=null,R1=$y=fc=0,mo=Jh=null,tc!==null){for(t=0;t<tc.length;t++)if(r=tc[t],o=r.interleaved,o!==null){r.interleaved=null;var l=o.next,d=r.pending;if(d!==null){var m=d.next;d.next=l,o.next=m}r.pending=o}tc=null}return e}function bP(e,t){do{var r=Yn;try{if(x1(),Zm.current=Ig,Tg){for(var o=Pn.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Tg=!1}if(pc=0,pi=ii=Pn=null,Kh=!1,Cp=0,D1.current=null,r===null||r.return===null){oi=1,Ip=t,Yn=null;break}e:{var d=e,m=r.return,c=r,b=t;if(t=Ci,c.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,T=c,z=T.tag;if(!(T.mode&1)&&(z===0||z===11||z===15)){var P=T.alternate;P?(T.updateQueue=P.updateQueue,T.memoizedState=P.memoizedState,T.lanes=P.lanes):(T.updateQueue=null,T.memoizedState=null)}var U=w2(m);if(U!==null){U.flags&=-257,S2(U,m,c,d,t),U.mode&1&&b2(d,w,t),t=U,b=w;var H=t.updateQueue;if(H===null){var W=new Set;W.add(b),t.updateQueue=W}else H.add(b);break e}else{if(!(t&1)){b2(d,w,t),O1();break e}b=Error(lt(426))}}else if(bn&&c.mode&1){var J=w2(m);if(J!==null){!(J.flags&65536)&&(J.flags|=256),S2(J,m,c,d,t),v1(Zu(b,c));break e}}d=b=Zu(b,c),oi!==4&&(oi=2),Jh===null?Jh=[d]:Jh.push(d),d=m;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var j=iP(d,b,t);m2(d,j);break e;case 1:c=b;var $=d.type,G=d.stateNode;if(!(d.flags&128)&&(typeof $.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(gl===null||!gl.has(G)))){d.flags|=65536,t&=-t,d.lanes|=t;var te=oP(d,c,t);m2(d,te);break e}}d=d.return}while(d!==null)}CP(r)}catch(ie){t=ie,Yn===r&&r!==null&&(Yn=r=r.return);continue}break}while(!0)}function wP(){var e=Pg.current;return Pg.current=Ig,e===null?Ig:e}function O1(){(oi===0||oi===3||oi===2)&&(oi=4),fi===null||!(fc&268435455)&&!($y&268435455)||ol(fi,Ci)}function Ag(e,t){var r=Rr;Rr|=2;var o=wP();(fi!==e||Ci!==t)&&(bs=null,oc(e,t));do try{fB();break}catch(l){bP(e,l)}while(!0);if(x1(),Rr=r,Pg.current=o,Yn!==null)throw Error(lt(261));return fi=null,Ci=0,oi}function fB(){for(;Yn!==null;)SP(Yn)}function mB(){for(;Yn!==null&&!N3();)SP(Yn)}function SP(e){var t=TP(e.alternate,e,Po);e.memoizedProps=e.pendingProps,t===null?CP(e):Yn=t,D1.current=null}function CP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=lB(r,t),r!==null){r.flags&=32767,Yn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oi=6,Yn=null;return}}else if(r=sB(r,t,Po),r!==null){Yn=r;return}if(t=t.sibling,t!==null){Yn=t;return}Yn=t=e}while(t!==null);oi===0&&(oi=5)}function Jl(e,t,r){var o=Gr,l=oa.transition;try{oa.transition=null,Gr=1,gB(e,t,r,o)}finally{oa.transition=l,Gr=o}return null}function gB(e,t,r,o){do Ou();while(ul!==null);if(Rr&6)throw Error(lt(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(X3(e,d),e===fi&&(Yn=fi=null,Ci=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mm||(Mm=!0,IP(hg,function(){return Ou(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=oa.transition,oa.transition=null;var m=Gr;Gr=1;var c=Rr;Rr|=4,D1.current=null,uB(e,r),vP(r,e),$$(D_),fg=!!M_,D_=M_=null,e.current=r,dB(r),j3(),Rr=c,Gr=m,oa.transition=d}else e.current=r;if(Mm&&(Mm=!1,ul=e,zg=l),d=e.pendingLanes,d===0&&(gl=null),H3(r.stateNode),xo(e,qn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],o(l.value,{componentStack:l.stack,digest:l.digest});if(Eg)throw Eg=!1,e=Q_,Q_=null,e;return zg&1&&e.tag!==0&&Ou(),d=e.pendingLanes,d&1?e===ex?Yh++:(Yh=0,ex=e):Yh=0,Tl(),null}function Ou(){if(ul!==null){var e=iI(zg),t=oa.transition,r=Gr;try{if(oa.transition=null,Gr=16>e?16:e,ul===null)var o=!1;else{if(e=ul,ul=null,zg=0,Rr&6)throw Error(lt(331));var l=Rr;for(Rr|=4,Ut=e.current;Ut!==null;){var d=Ut,m=d.child;if(Ut.flags&16){var c=d.deletions;if(c!==null){for(var b=0;b<c.length;b++){var w=c[b];for(Ut=w;Ut!==null;){var T=Ut;switch(T.tag){case 0:case 11:case 15:Xh(8,T,d)}var z=T.child;if(z!==null)z.return=T,Ut=z;else for(;Ut!==null;){T=Ut;var P=T.sibling,U=T.return;if(mP(T),T===w){Ut=null;break}if(P!==null){P.return=U,Ut=P;break}Ut=U}}}var H=d.alternate;if(H!==null){var W=H.child;if(W!==null){H.child=null;do{var J=W.sibling;W.sibling=null,W=J}while(W!==null)}}Ut=d}}if(d.subtreeFlags&2064&&m!==null)m.return=d,Ut=m;else e:for(;Ut!==null;){if(d=Ut,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Xh(9,d,d.return)}var j=d.sibling;if(j!==null){j.return=d.return,Ut=j;break e}Ut=d.return}}var $=e.current;for(Ut=$;Ut!==null;){m=Ut;var G=m.child;if(m.subtreeFlags&2064&&G!==null)G.return=m,Ut=G;else e:for(m=$;Ut!==null;){if(c=Ut,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Ly(9,c)}}catch(ie){Bn(c,c.return,ie)}if(c===m){Ut=null;break e}var te=c.sibling;if(te!==null){te.return=c.return,Ut=te;break e}Ut=c.return}}if(Rr=l,Tl(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Iy,e)}catch{}o=!0}return o}finally{Gr=r,oa.transition=t}}return!1}function $2(e,t,r){t=Zu(r,t),t=iP(e,t,1),e=ml(e,t,1),t=ro(),e!==null&&(Hp(e,1,t),xo(e,t))}function Bn(e,t,r){if(e.tag===3)$2(e,e,r);else for(;t!==null;){if(t.tag===3){$2(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(gl===null||!gl.has(o))){e=Zu(r,e),e=oP(t,e,1),t=ml(t,e,1),e=ro(),t!==null&&(Hp(t,1,e),xo(t,e));break}}t=t.return}}function yB(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=ro(),e.pingedLanes|=e.suspendedLanes&r,fi===e&&(Ci&r)===r&&(oi===4||oi===3&&(Ci&130023424)===Ci&&500>qn()-L1?oc(e,0):R1|=r),xo(e,t)}function kP(e,t){t===0&&(e.mode&1?(t=wm,wm<<=1,!(wm&130023424)&&(wm=4194304)):t=1);var r=ro();e=Ps(e,t),e!==null&&(Hp(e,t,r),xo(e,r))}function vB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),kP(e,r)}function _B(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(lt(314))}o!==null&&o.delete(t),kP(e,r)}var TP;TP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vo.current)go=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return go=!1,aB(e,t,r);go=!!(e.flags&131072)}else go=!1,bn&&t.flags&1048576&&zI(t,bg,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Xm(e,t),e=t.pendingProps;var l=Hu(t,Vi.current);Bu(t,r),l=P1(null,t,o,e,l,r);var d=E1();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_o(o)?(d=!0,_g(t)):d=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,S1(t),l.updater=Ry,t.stateNode=l,l._reactInternals=t,V_(t,o,e,r),t=W_(null,t,o,!0,d,r)):(t.tag=0,bn&&d&&g1(t),to(null,t,l,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Xm(e,t),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=bB(o),e=Pa(o,e),l){case 0:t=H_(null,t,o,e,r);break e;case 1:t=T2(null,t,o,e,r);break e;case 11:t=C2(null,t,o,e,r);break e;case 14:t=k2(null,t,o,Pa(o.type,e),r);break e}throw Error(lt(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Pa(o,l),H_(e,t,o,l,r);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Pa(o,l),T2(e,t,o,l,r);case 3:e:{if(cP(t),e===null)throw Error(lt(387));o=t.pendingProps,d=t.memoizedState,l=d.element,$I(e,t),Cg(t,o,null,r);var m=t.memoizedState;if(o=m.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){l=Zu(Error(lt(423)),t),t=I2(e,t,o,r,l);break e}else if(o!==l){l=Zu(Error(lt(424)),t),t=I2(e,t,o,r,l);break e}else for(Ro=fl(t.stateNode.containerInfo.firstChild),$o=t,bn=!0,Aa=null,r=RI(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wu(),o===l){t=Es(e,t,r);break e}to(e,t,o,r)}t=t.child}return t;case 5:return BI(t),e===null&&F_(t),o=t.type,l=t.pendingProps,d=e!==null?e.memoizedProps:null,m=l.children,R_(o,l)?m=null:d!==null&&R_(o,d)&&(t.flags|=32),lP(e,t),to(e,t,m,r),t.child;case 6:return e===null&&F_(t),null;case 13:return uP(e,t,r);case 4:return C1(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Gu(t,null,o,r):to(e,t,o,r),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Pa(o,l),C2(e,t,o,l,r);case 7:return to(e,t,t.pendingProps,r),t.child;case 8:return to(e,t,t.pendingProps.children,r),t.child;case 12:return to(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,d=t.memoizedProps,m=l.value,ln(wg,o._currentValue),o._currentValue=m,d!==null)if($a(d.value,m)){if(d.children===l.children&&!vo.current){t=Es(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var c=d.dependencies;if(c!==null){m=d.child;for(var b=c.firstContext;b!==null;){if(b.context===o){if(d.tag===1){b=ks(-1,r&-r),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?b.next=b:(b.next=T.next,T.next=b),w.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),N_(d.return,r,t),c.lanes|=r;break}b=b.next}}else if(d.tag===10)m=d.type===t.type?null:d.child;else if(d.tag===18){if(m=d.return,m===null)throw Error(lt(341));m.lanes|=r,c=m.alternate,c!==null&&(c.lanes|=r),N_(m,r,t),m=d.sibling}else m=d.child;if(m!==null)m.return=d;else for(m=d;m!==null;){if(m===t){m=null;break}if(d=m.sibling,d!==null){d.return=m.return,m=d;break}m=m.return}d=m}to(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,Bu(t,r),l=sa(l),o=o(l),t.flags|=1,to(e,t,o,r),t.child;case 14:return o=t.type,l=Pa(o,t.pendingProps),l=Pa(o.type,l),k2(e,t,o,l,r);case 15:return aP(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Pa(o,l),Xm(e,t),t.tag=1,_o(o)?(e=!0,_g(t)):e=!1,Bu(t,r),nP(t,o,l),V_(t,o,l,r),W_(null,t,o,!0,e,r);case 19:return dP(e,t,r);case 22:return sP(e,t,r)}throw Error(lt(156,t.tag))};function IP(e,t){return eI(e,t)}function xB(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,r,o){return new xB(e,t,r,o)}function F1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bB(e){if(typeof e=="function")return F1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===i1)return 11;if(e===o1)return 14}return 2}function vl(e,t){var r=e.alternate;return r===null?(r=na(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qm(e,t,r,o,l,d){var m=2;if(o=e,typeof e=="function")F1(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case yu:return ac(r.children,l,d,t);case n1:m=8,l|=8;break;case h_:return e=na(12,r,t,l|2),e.elementType=h_,e.lanes=d,e;case p_:return e=na(13,r,t,l),e.elementType=p_,e.lanes=d,e;case f_:return e=na(19,r,t,l),e.elementType=f_,e.lanes=d,e;case BT:return By(r,l,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case LT:m=10;break e;case $T:m=9;break e;case i1:m=11;break e;case o1:m=14;break e;case tl:m=16,o=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=na(m,r,t,l),t.elementType=e,t.type=o,t.lanes=d,t}function ac(e,t,r,o){return e=na(7,e,o,t),e.lanes=r,e}function By(e,t,r,o){return e=na(22,e,o,t),e.elementType=BT,e.lanes=r,e.stateNode={isHidden:!1},e}function G0(e,t,r){return e=na(6,e,null,t),e.lanes=r,e}function q0(e,t,r){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wB(e,t,r,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=I0(0),this.expirationTimes=I0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I0(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function N1(e,t,r,o,l,d,m,c,b){return e=new wB(e,t,r,c,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=na(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(d),e}function SB(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function PP(e){if(!e)return wl;e=e._reactInternals;e:{if(_c(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var r=e.type;if(_o(r))return PI(e,r,t)}return t}function EP(e,t,r,o,l,d,m,c,b){return e=N1(r,o,!0,e,l,d,m,c,b),e.context=PP(null),r=e.current,o=ro(),l=yl(r),d=ks(o,l),d.callback=t??null,ml(r,d,l),e.current.lanes=l,Hp(e,l,o),xo(e,o),e}function Oy(e,t,r,o){var l=t.current,d=ro(),m=yl(l);return r=PP(r),t.context===null?t.context=r:t.pendingContext=r,t=ks(d,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=ml(l,t,m),e!==null&&(Da(e,l,m,d),qm(e,l,m)),m}function Mg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function B2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function j1(e,t){B2(e,t),(e=e.alternate)&&B2(e,t)}function CB(){return null}var zP=typeof reportError=="function"?reportError:function(e){console.error(e)};function V1(e){this._internalRoot=e}Fy.prototype.render=V1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));Oy(e,t,null,null)};Fy.prototype.unmount=V1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mc(function(){Oy(null,e,null,null)}),t[Is]=null}};function Fy(e){this._internalRoot=e}Fy.prototype.unstable_scheduleHydration=function(e){if(e){var t=sI();e={blockedOn:null,target:e,priority:t};for(var r=0;r<il.length&&t!==0&&t<il[r].priority;r++);il.splice(r,0,e),r===0&&cI(e)}};function U1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ny(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function O2(){}function kB(e,t,r,o,l){if(l){if(typeof o=="function"){var d=o;o=function(){var w=Mg(m);d.call(w)}}var m=EP(t,o,e,0,null,!1,!1,"",O2);return e._reactRootContainer=m,e[Is]=m.current,_p(e.nodeType===8?e.parentNode:e),mc(),m}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var c=o;o=function(){var w=Mg(b);c.call(w)}}var b=N1(e,0,!1,null,null,!1,!1,"",O2);return e._reactRootContainer=b,e[Is]=b.current,_p(e.nodeType===8?e.parentNode:e),mc(function(){Oy(t,b,r,o)}),b}function jy(e,t,r,o,l){var d=r._reactRootContainer;if(d){var m=d;if(typeof l=="function"){var c=l;l=function(){var b=Mg(m);c.call(b)}}Oy(t,m,e,l)}else m=kB(r,t,e,l,o);return Mg(m)}oI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Fh(t.pendingLanes);r!==0&&(l1(t,r|1),xo(t,qn()),!(Rr&6)&&(Ku=qn()+500,Tl()))}break;case 13:mc(function(){var o=Ps(e,1);if(o!==null){var l=ro();Da(o,e,1,l)}}),j1(e,1)}};c1=function(e){if(e.tag===13){var t=Ps(e,134217728);if(t!==null){var r=ro();Da(t,e,134217728,r)}j1(e,134217728)}};aI=function(e){if(e.tag===13){var t=yl(e),r=Ps(e,t);if(r!==null){var o=ro();Da(r,e,t,o)}j1(e,t)}};sI=function(){return Gr};lI=function(e,t){var r=Gr;try{return Gr=e,t()}finally{Gr=r}};C_=function(e,t,r){switch(t){case"input":if(y_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var l=Ay(o);if(!l)throw Error(lt(90));FT(o),y_(o,l)}}}break;case"textarea":jT(e,r);break;case"select":t=r.value,t!=null&&Du(e,!!r.multiple,t,!1)}};ZT=$1;KT=mc;var TB={usingClientEntryPoint:!1,Events:[Gp,bu,Ay,GT,qT,$1]},Ph={findFiberByHostInstance:ec,bundleType:0,version:"18.3.0",rendererPackageName:"react-dom"},IB={bundleType:Ph.bundleType,version:Ph.version,rendererPackageName:Ph.rendererPackageName,rendererConfig:Ph.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=YT(e),e===null?null:e.stateNode},findFiberByHostInstance:Ph.findFiberByHostInstance||CB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.0-next-8a015b68cc-20240425"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dm.isDisabled&&Dm.supportsFiber)try{Iy=Dm.inject(IB),Qa=Dm}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TB;No.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U1(t))throw Error(lt(200));return SB(e,t,null,r)};No.createRoot=function(e,t){if(!U1(e))throw Error(lt(299));var r=!1,o="",l=zP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=N1(e,1,!1,null,null,r,!1,o,l),e[Is]=t.current,_p(e.nodeType===8?e.parentNode:e),new V1(t)};No.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=YT(t),e=e===null?null:e.stateNode,e};No.flushSync=function(e){return mc(e)};No.hydrate=function(e,t,r){if(!Ny(t))throw Error(lt(200));return jy(null,e,t,!0,r)};No.hydrateRoot=function(e,t,r){if(!U1(e))throw Error(lt(405));var o=r!=null&&r.hydratedSources||null,l=!1,d="",m=zP;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=EP(t,null,e,1,r??null,l,!1,d,m),e[Is]=t.current,_p(e),o)for(e=0;e<o.length;e++)r=o[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new Fy(t)};No.render=function(e,t,r){if(!Ny(t))throw Error(lt(200));return jy(null,e,t,!1,r)};No.unmountComponentAtNode=function(e){if(!Ny(e))throw Error(lt(40));return e._reactRootContainer?(mc(function(){jy(null,null,e,!1,function(){e._reactRootContainer=null,e[Is]=null})}),!0):!1};No.unstable_batchedUpdates=$1;No.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Ny(r))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return jy(e,t,r,!1,o)};No.version="18.3.0-next-8a015b68cc-20240425";function AP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AP)}catch(e){console.error(e)}}AP(),AT.exports=No;var ld=AT.exports;const PB=Cx(ld),EB=Sx({__proto__:null,default:PB},[ld]);function zB(e){return typeof e=="function"?e():e}const MP=O.forwardRef(function(t,r){const{children:o,container:l,disablePortal:d=!1}=t,[m,c]=O.useState(null),b=cn(O.isValidElement(o)?o.ref:null,r);if(uc(()=>{d||c(zB(l)||document.body)},[l,d]),uc(()=>{if(m&&!d)return lg(r,m),()=>{lg(r,null)}},[r,m,d]),d){if(O.isValidElement(o)){const w={ref:b};return O.cloneElement(o,w)}return ae.jsx(O.Fragment,{children:o})}return ae.jsx(O.Fragment,{children:m&&ld.createPortal(o,m)})});function AB(e){const t=Ya(e);return t.body===e?Hx(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Qh(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function F2(e){return parseInt(Hx(e).getComputedStyle(e).paddingRight,10)||0}function MB(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||o}function N2(e,t,r,o,l){const d=[t,r,...o];[].forEach.call(e.children,m=>{const c=d.indexOf(m)===-1,b=!MB(m);c&&b&&Qh(m,l)})}function Z0(e,t){let r=-1;return e.some((o,l)=>t(o)?(r=l,!0):!1),r}function DB(e,t){const r=[],o=e.container;if(!t.disableScrollLock){if(AB(o)){const m=qL(Ya(o));r.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${F2(o)+m}px`;const c=Ya(o).querySelectorAll(".mui-fixed");[].forEach.call(c,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${F2(b)+m}px`})}let d;if(o.parentNode instanceof DocumentFragment)d=Ya(o).body;else{const m=o.parentElement,c=Hx(o);d=(m==null?void 0:m.nodeName)==="HTML"&&c.getComputedStyle(m).overflowY==="scroll"?m:o}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:m,property:c})=>{d?m.style.setProperty(c,d):m.style.removeProperty(c)})}}function RB(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class LB{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&Qh(t.modalRef,!1);const l=RB(r);N2(r,t.mount,t.modalRef,l,!0);const d=Z0(this.containers,m=>m.container===r);return d!==-1?(this.containers[d].modals.push(t),o):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:l}),o)}mount(t,r){const o=Z0(this.containers,d=>d.modals.indexOf(t)!==-1),l=this.containers[o];l.restore||(l.restore=DB(l,r))}remove(t,r=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const l=Z0(this.containers,m=>m.modals.indexOf(t)!==-1),d=this.containers[l];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(o,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Qh(t.modalRef,r),N2(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(l,1);else{const m=d.modals[d.modals.length-1];m.modalRef&&Qh(m.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function $B(e){return typeof e=="function"?e():e}function BB(e){return e?e.props.hasOwnProperty("in"):!1}const OB=new LB;function FB(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,manager:l=OB,closeAfterTransition:d=!1,onTransitionEnter:m,onTransitionExited:c,children:b,onClose:w,open:T,rootRef:z}=e,P=O.useRef({}),U=O.useRef(null),H=O.useRef(null),W=cn(H,z),[J,j]=O.useState(!T),$=BB(b);let G=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(G=!1);const te=()=>Ya(U.current),ie=()=>(P.current.modalRef=H.current,P.current.mount=U.current,P.current),me=()=>{l.mount(ie(),{disableScrollLock:o}),H.current&&(H.current.scrollTop=0)},Z=ll(()=>{const Ae=$B(t)||te().body;l.add(ie(),Ae),H.current&&me()}),de=O.useCallback(()=>l.isTopModal(ie()),[l]),Te=ll(Ae=>{U.current=Ae,Ae&&(T&&de()?me():H.current&&Qh(H.current,G))}),ve=O.useCallback(()=>{l.remove(ie(),G)},[G,l]);O.useEffect(()=>()=>{ve()},[ve]),O.useEffect(()=>{T?Z():(!$||!d)&&ve()},[T,ve,$,d,Z]);const De=Ae=>Ge=>{var Re;(Re=Ae.onKeyDown)==null||Re.call(Ae,Ge),!(Ge.key!=="Escape"||Ge.which===229||!de())&&(r||(Ge.stopPropagation(),w&&w(Ge,"escapeKeyDown")))},ke=Ae=>Ge=>{var Re;(Re=Ae.onClick)==null||Re.call(Ae,Ge),Ge.target===Ge.currentTarget&&w&&w(Ge,"backdropClick")};return{getRootProps:(Ae={})=>{const Ge=yo(e);delete Ge.onTransitionEnter,delete Ge.onTransitionExited;const Re=K({},Ge,Ae);return K({role:"presentation"},Re,{onKeyDown:De(Re),ref:W})},getBackdropProps:(Ae={})=>{const Ge=Ae;return K({"aria-hidden":!0},Ge,{onClick:ke(Ge),open:T})},getTransitionProps:()=>{const Ae=()=>{j(!1),m&&m()},Ge=()=>{j(!0),c&&c(),d&&ve()};return{onEnter:_S(Ae,b==null?void 0:b.props.onEnter),onExited:_S(Ge,b==null?void 0:b.props.onExited)}},rootRef:W,portalRef:Te,isTopModal:de,exited:J,hasTransition:$}}function NB(e){const{value:t,label:r,disabled:o,rootRef:l,id:d}=e,{getRootProps:m,highlighted:c,selected:b}=zT({item:t}),{getRootProps:w,rootRef:T}=Sl({disabled:o,focusableWhenDisabled:!0}),z=La(d),P=O.useRef(null),U=O.useMemo(()=>({disabled:o,label:r,value:t,ref:P,id:z}),[o,r,t,z]),{index:H}=Qx(t,U),W=cn(l,P,T),J=$=>G=>{var te;(te=$.onKeyDown)==null||te.call($,G),!G.defaultMuiPrevented&&[" ","Enter"].includes(G.key)&&(G.defaultMuiPrevented=!0)},j=($={})=>({onKeyDown:J($)});return{getRootProps:($={})=>{const G=yo($),te=up(m,up(w,j));return K({},$,G,te(G),{id:z,ref:W,role:"option","aria-selected":b})},highlighted:c,index:H,selected:b,rootRef:W}}function jB(e){const t=O.useContext(Up);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:o}=t,{highlighted:l,selected:d,focusable:m}=r(e),c=O.useCallback(w=>{if(w!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:l,selected:d,focusable:m}},[l,d,m,e]);return{contextValue:O.useMemo(()=>({dispatch:o,getItemState:c}),[o,c])}}var bo="top",ca="bottom",ua="right",wo="left",H1="auto",Zp=[bo,ca,ua,wo],Xu="start",Pp="end",VB="clippingParents",DP="viewport",Eh="popper",UB="reference",j2=Zp.reduce(function(e,t){return e.concat([t+"-"+Xu,t+"-"+Pp])},[]),RP=[].concat(Zp,[H1]).reduce(function(e,t){return e.concat([t,t+"-"+Xu,t+"-"+Pp])},[]),HB="beforeRead",WB="read",GB="afterRead",qB="beforeMain",ZB="main",KB="afterMain",XB="beforeWrite",JB="write",YB="afterWrite",QB=[HB,WB,GB,qB,ZB,KB,XB,JB,YB];function ns(e){return e?(e.nodeName||"").toLowerCase():null}function Oo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function gc(e){var t=Oo(e).Element;return e instanceof t||e instanceof Element}function aa(e){var t=Oo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function W1(e){if(typeof ShadowRoot>"u")return!1;var t=Oo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function e4(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},l=t.attributes[r]||{},d=t.elements[r];!aa(d)||!ns(d)||(Object.assign(d.style,o),Object.keys(l).forEach(function(m){var c=l[m];c===!1?d.removeAttribute(m):d.setAttribute(m,c===!0?"":c)}))})}function t4(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var l=t.elements[o],d=t.attributes[o]||{},m=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),c=m.reduce(function(b,w){return b[w]="",b},{});!aa(l)||!ns(l)||(Object.assign(l.style,c),Object.keys(d).forEach(function(b){l.removeAttribute(b)}))})}}const r4={name:"applyStyles",enabled:!0,phase:"write",fn:e4,effect:t4,requires:["computeStyles"]};function ts(e){return e.split("-")[0]}var sc=Math.max,Dg=Math.min,Ju=Math.round;function nx(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function LP(){return!/^((?!chrome|android).)*safari/i.test(nx())}function Yu(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),l=1,d=1;t&&aa(e)&&(l=e.offsetWidth>0&&Ju(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&Ju(o.height)/e.offsetHeight||1);var m=gc(e)?Oo(e):window,c=m.visualViewport,b=!LP()&&r,w=(o.left+(b&&c?c.offsetLeft:0))/l,T=(o.top+(b&&c?c.offsetTop:0))/d,z=o.width/l,P=o.height/d;return{width:z,height:P,top:T,right:w+z,bottom:T+P,left:w,x:w,y:T}}function G1(e){var t=Yu(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function $P(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&W1(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function zs(e){return Oo(e).getComputedStyle(e)}function n4(e){return["table","td","th"].indexOf(ns(e))>=0}function Il(e){return((gc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Vy(e){return ns(e)==="html"?e:e.assignedSlot||e.parentNode||(W1(e)?e.host:null)||Il(e)}function V2(e){return!aa(e)||zs(e).position==="fixed"?null:e.offsetParent}function i4(e){var t=/firefox/i.test(nx()),r=/Trident/i.test(nx());if(r&&aa(e)){var o=zs(e);if(o.position==="fixed")return null}var l=Vy(e);for(W1(l)&&(l=l.host);aa(l)&&["html","body"].indexOf(ns(l))<0;){var d=zs(l);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return l;l=l.parentNode}return null}function Kp(e){for(var t=Oo(e),r=V2(e);r&&n4(r)&&zs(r).position==="static";)r=V2(r);return r&&(ns(r)==="html"||ns(r)==="body"&&zs(r).position==="static")?t:r||i4(e)||t}function q1(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ep(e,t,r){return sc(e,Dg(t,r))}function o4(e,t,r){var o=ep(e,t,r);return o>r?r:o}function BP(){return{top:0,right:0,bottom:0,left:0}}function OP(e){return Object.assign({},BP(),e)}function FP(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var a4=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,OP(typeof t!="number"?t:FP(t,Zp))};function s4(e){var t,r=e.state,o=e.name,l=e.options,d=r.elements.arrow,m=r.modifiersData.popperOffsets,c=ts(r.placement),b=q1(c),w=[wo,ua].indexOf(c)>=0,T=w?"height":"width";if(!(!d||!m)){var z=a4(l.padding,r),P=G1(d),U=b==="y"?bo:wo,H=b==="y"?ca:ua,W=r.rects.reference[T]+r.rects.reference[b]-m[b]-r.rects.popper[T],J=m[b]-r.rects.reference[b],j=Kp(d),$=j?b==="y"?j.clientHeight||0:j.clientWidth||0:0,G=W/2-J/2,te=z[U],ie=$-P[T]-z[H],me=$/2-P[T]/2+G,Z=ep(te,me,ie),de=b;r.modifiersData[o]=(t={},t[de]=Z,t.centerOffset=Z-me,t)}}function l4(e){var t=e.state,r=e.options,o=r.element,l=o===void 0?"[data-popper-arrow]":o;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||$P(t.elements.popper,l)&&(t.elements.arrow=l))}const c4={name:"arrow",enabled:!0,phase:"main",fn:s4,effect:l4,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qu(e){return e.split("-")[1]}var u4={top:"auto",right:"auto",bottom:"auto",left:"auto"};function d4(e,t){var r=e.x,o=e.y,l=t.devicePixelRatio||1;return{x:Ju(r*l)/l||0,y:Ju(o*l)/l||0}}function U2(e){var t,r=e.popper,o=e.popperRect,l=e.placement,d=e.variation,m=e.offsets,c=e.position,b=e.gpuAcceleration,w=e.adaptive,T=e.roundOffsets,z=e.isFixed,P=m.x,U=P===void 0?0:P,H=m.y,W=H===void 0?0:H,J=typeof T=="function"?T({x:U,y:W}):{x:U,y:W};U=J.x,W=J.y;var j=m.hasOwnProperty("x"),$=m.hasOwnProperty("y"),G=wo,te=bo,ie=window;if(w){var me=Kp(r),Z="clientHeight",de="clientWidth";if(me===Oo(r)&&(me=Il(r),zs(me).position!=="static"&&c==="absolute"&&(Z="scrollHeight",de="scrollWidth")),me=me,l===bo||(l===wo||l===ua)&&d===Pp){te=ca;var Te=z&&me===ie&&ie.visualViewport?ie.visualViewport.height:me[Z];W-=Te-o.height,W*=b?1:-1}if(l===wo||(l===bo||l===ca)&&d===Pp){G=ua;var ve=z&&me===ie&&ie.visualViewport?ie.visualViewport.width:me[de];U-=ve-o.width,U*=b?1:-1}}var De=Object.assign({position:c},w&&u4),ke=T===!0?d4({x:U,y:W},Oo(r)):{x:U,y:W};if(U=ke.x,W=ke.y,b){var Ee;return Object.assign({},De,(Ee={},Ee[te]=$?"0":"",Ee[G]=j?"0":"",Ee.transform=(ie.devicePixelRatio||1)<=1?"translate("+U+"px, "+W+"px)":"translate3d("+U+"px, "+W+"px, 0)",Ee))}return Object.assign({},De,(t={},t[te]=$?W+"px":"",t[G]=j?U+"px":"",t.transform="",t))}function h4(e){var t=e.state,r=e.options,o=r.gpuAcceleration,l=o===void 0?!0:o,d=r.adaptive,m=d===void 0?!0:d,c=r.roundOffsets,b=c===void 0?!0:c,w={placement:ts(t.placement),variation:Qu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,U2(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:m,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,U2(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const p4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:h4,data:{}};var Rm={passive:!0};function f4(e){var t=e.state,r=e.instance,o=e.options,l=o.scroll,d=l===void 0?!0:l,m=o.resize,c=m===void 0?!0:m,b=Oo(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&w.forEach(function(T){T.addEventListener("scroll",r.update,Rm)}),c&&b.addEventListener("resize",r.update,Rm),function(){d&&w.forEach(function(T){T.removeEventListener("scroll",r.update,Rm)}),c&&b.removeEventListener("resize",r.update,Rm)}}const m4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:f4,data:{}};var g4={left:"right",right:"left",bottom:"top",top:"bottom"};function eg(e){return e.replace(/left|right|bottom|top/g,function(t){return g4[t]})}var y4={start:"end",end:"start"};function H2(e){return e.replace(/start|end/g,function(t){return y4[t]})}function Z1(e){var t=Oo(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function K1(e){return Yu(Il(e)).left+Z1(e).scrollLeft}function v4(e,t){var r=Oo(e),o=Il(e),l=r.visualViewport,d=o.clientWidth,m=o.clientHeight,c=0,b=0;if(l){d=l.width,m=l.height;var w=LP();(w||!w&&t==="fixed")&&(c=l.offsetLeft,b=l.offsetTop)}return{width:d,height:m,x:c+K1(e),y:b}}function _4(e){var t,r=Il(e),o=Z1(e),l=(t=e.ownerDocument)==null?void 0:t.body,d=sc(r.scrollWidth,r.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),m=sc(r.scrollHeight,r.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),c=-o.scrollLeft+K1(e),b=-o.scrollTop;return zs(l||r).direction==="rtl"&&(c+=sc(r.clientWidth,l?l.clientWidth:0)-d),{width:d,height:m,x:c,y:b}}function X1(e){var t=zs(e),r=t.overflow,o=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+l+o)}function NP(e){return["html","body","#document"].indexOf(ns(e))>=0?e.ownerDocument.body:aa(e)&&X1(e)?e:NP(Vy(e))}function tp(e,t){var r;t===void 0&&(t=[]);var o=NP(e),l=o===((r=e.ownerDocument)==null?void 0:r.body),d=Oo(o),m=l?[d].concat(d.visualViewport||[],X1(o)?o:[]):o,c=t.concat(m);return l?c:c.concat(tp(Vy(m)))}function ix(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function x4(e,t){var r=Yu(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function W2(e,t,r){return t===DP?ix(v4(e,r)):gc(t)?x4(t,r):ix(_4(Il(e)))}function b4(e){var t=tp(Vy(e)),r=["absolute","fixed"].indexOf(zs(e).position)>=0,o=r&&aa(e)?Kp(e):e;return gc(o)?t.filter(function(l){return gc(l)&&$P(l,o)&&ns(l)!=="body"}):[]}function w4(e,t,r,o){var l=t==="clippingParents"?b4(e):[].concat(t),d=[].concat(l,[r]),m=d[0],c=d.reduce(function(b,w){var T=W2(e,w,o);return b.top=sc(T.top,b.top),b.right=Dg(T.right,b.right),b.bottom=Dg(T.bottom,b.bottom),b.left=sc(T.left,b.left),b},W2(e,m,o));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function jP(e){var t=e.reference,r=e.element,o=e.placement,l=o?ts(o):null,d=o?Qu(o):null,m=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,b;switch(l){case bo:b={x:m,y:t.y-r.height};break;case ca:b={x:m,y:t.y+t.height};break;case ua:b={x:t.x+t.width,y:c};break;case wo:b={x:t.x-r.width,y:c};break;default:b={x:t.x,y:t.y}}var w=l?q1(l):null;if(w!=null){var T=w==="y"?"height":"width";switch(d){case Xu:b[w]=b[w]-(t[T]/2-r[T]/2);break;case Pp:b[w]=b[w]+(t[T]/2-r[T]/2);break}}return b}function Ep(e,t){t===void 0&&(t={});var r=t,o=r.placement,l=o===void 0?e.placement:o,d=r.strategy,m=d===void 0?e.strategy:d,c=r.boundary,b=c===void 0?VB:c,w=r.rootBoundary,T=w===void 0?DP:w,z=r.elementContext,P=z===void 0?Eh:z,U=r.altBoundary,H=U===void 0?!1:U,W=r.padding,J=W===void 0?0:W,j=OP(typeof J!="number"?J:FP(J,Zp)),$=P===Eh?UB:Eh,G=e.rects.popper,te=e.elements[H?$:P],ie=w4(gc(te)?te:te.contextElement||Il(e.elements.popper),b,T,m),me=Yu(e.elements.reference),Z=jP({reference:me,element:G,strategy:"absolute",placement:l}),de=ix(Object.assign({},G,Z)),Te=P===Eh?de:me,ve={top:ie.top-Te.top+j.top,bottom:Te.bottom-ie.bottom+j.bottom,left:ie.left-Te.left+j.left,right:Te.right-ie.right+j.right},De=e.modifiersData.offset;if(P===Eh&&De){var ke=De[l];Object.keys(ve).forEach(function(Ee){var He=[ua,ca].indexOf(Ee)>=0?1:-1,Fe=[bo,ca].indexOf(Ee)>=0?"y":"x";ve[Ee]+=ke[Fe]*He})}return ve}function S4(e,t){t===void 0&&(t={});var r=t,o=r.placement,l=r.boundary,d=r.rootBoundary,m=r.padding,c=r.flipVariations,b=r.allowedAutoPlacements,w=b===void 0?RP:b,T=Qu(o),z=T?c?j2:j2.filter(function(H){return Qu(H)===T}):Zp,P=z.filter(function(H){return w.indexOf(H)>=0});P.length===0&&(P=z);var U=P.reduce(function(H,W){return H[W]=Ep(e,{placement:W,boundary:l,rootBoundary:d,padding:m})[ts(W)],H},{});return Object.keys(U).sort(function(H,W){return U[H]-U[W]})}function C4(e){if(ts(e)===H1)return[];var t=eg(e);return[H2(e),t,H2(t)]}function k4(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var l=r.mainAxis,d=l===void 0?!0:l,m=r.altAxis,c=m===void 0?!0:m,b=r.fallbackPlacements,w=r.padding,T=r.boundary,z=r.rootBoundary,P=r.altBoundary,U=r.flipVariations,H=U===void 0?!0:U,W=r.allowedAutoPlacements,J=t.options.placement,j=ts(J),$=j===J,G=b||($||!H?[eg(J)]:C4(J)),te=[J].concat(G).reduce(function(Ct,zt){return Ct.concat(ts(zt)===H1?S4(t,{placement:zt,boundary:T,rootBoundary:z,padding:w,flipVariations:H,allowedAutoPlacements:W}):zt)},[]),ie=t.rects.reference,me=t.rects.popper,Z=new Map,de=!0,Te=te[0],ve=0;ve<te.length;ve++){var De=te[ve],ke=ts(De),Ee=Qu(De)===Xu,He=[bo,ca].indexOf(ke)>=0,Fe=He?"width":"height",Ae=Ep(t,{placement:De,boundary:T,rootBoundary:z,altBoundary:P,padding:w}),Ge=He?Ee?ua:wo:Ee?ca:bo;ie[Fe]>me[Fe]&&(Ge=eg(Ge));var Re=eg(Ge),Ze=[];if(d&&Ze.push(Ae[ke]<=0),c&&Ze.push(Ae[Ge]<=0,Ae[Re]<=0),Ze.every(function(Ct){return Ct})){Te=De,de=!1;break}Z.set(De,Ze)}if(de)for(var Je=H?3:1,dt=function(zt){var Zt=te.find(function(kt){var $e=Z.get(kt);if($e)return $e.slice(0,zt).every(function(rt){return rt})});if(Zt)return Te=Zt,"break"},vt=Je;vt>0;vt--){var mt=dt(vt);if(mt==="break")break}t.placement!==Te&&(t.modifiersData[o]._skip=!0,t.placement=Te,t.reset=!0)}}const T4={name:"flip",enabled:!0,phase:"main",fn:k4,requiresIfExists:["offset"],data:{_skip:!1}};function G2(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function q2(e){return[bo,ua,ca,wo].some(function(t){return e[t]>=0})}function I4(e){var t=e.state,r=e.name,o=t.rects.reference,l=t.rects.popper,d=t.modifiersData.preventOverflow,m=Ep(t,{elementContext:"reference"}),c=Ep(t,{altBoundary:!0}),b=G2(m,o),w=G2(c,l,d),T=q2(b),z=q2(w);t.modifiersData[r]={referenceClippingOffsets:b,popperEscapeOffsets:w,isReferenceHidden:T,hasPopperEscaped:z},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":z})}const P4={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:I4};function E4(e,t,r){var o=ts(e),l=[wo,bo].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,m=d[0],c=d[1];return m=m||0,c=(c||0)*l,[wo,ua].indexOf(o)>=0?{x:c,y:m}:{x:m,y:c}}function z4(e){var t=e.state,r=e.options,o=e.name,l=r.offset,d=l===void 0?[0,0]:l,m=RP.reduce(function(T,z){return T[z]=E4(z,t.rects,d),T},{}),c=m[t.placement],b=c.x,w=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=w),t.modifiersData[o]=m}const A4={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:z4};function M4(e){var t=e.state,r=e.name;t.modifiersData[r]=jP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const D4={name:"popperOffsets",enabled:!0,phase:"read",fn:M4,data:{}};function R4(e){return e==="x"?"y":"x"}function L4(e){var t=e.state,r=e.options,o=e.name,l=r.mainAxis,d=l===void 0?!0:l,m=r.altAxis,c=m===void 0?!1:m,b=r.boundary,w=r.rootBoundary,T=r.altBoundary,z=r.padding,P=r.tether,U=P===void 0?!0:P,H=r.tetherOffset,W=H===void 0?0:H,J=Ep(t,{boundary:b,rootBoundary:w,padding:z,altBoundary:T}),j=ts(t.placement),$=Qu(t.placement),G=!$,te=q1(j),ie=R4(te),me=t.modifiersData.popperOffsets,Z=t.rects.reference,de=t.rects.popper,Te=typeof W=="function"?W(Object.assign({},t.rects,{placement:t.placement})):W,ve=typeof Te=="number"?{mainAxis:Te,altAxis:Te}:Object.assign({mainAxis:0,altAxis:0},Te),De=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ke={x:0,y:0};if(me){if(d){var Ee,He=te==="y"?bo:wo,Fe=te==="y"?ca:ua,Ae=te==="y"?"height":"width",Ge=me[te],Re=Ge+J[He],Ze=Ge-J[Fe],Je=U?-de[Ae]/2:0,dt=$===Xu?Z[Ae]:de[Ae],vt=$===Xu?-de[Ae]:-Z[Ae],mt=t.elements.arrow,Ct=U&&mt?G1(mt):{width:0,height:0},zt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:BP(),Zt=zt[He],kt=zt[Fe],$e=ep(0,Z[Ae],Ct[Ae]),rt=G?Z[Ae]/2-Je-$e-Zt-ve.mainAxis:dt-$e-Zt-ve.mainAxis,ht=G?-Z[Ae]/2+Je+$e+kt+ve.mainAxis:vt+$e+kt+ve.mainAxis,At=t.elements.arrow&&Kp(t.elements.arrow),Et=At?te==="y"?At.clientTop||0:At.clientLeft||0:0,gr=(Ee=De==null?void 0:De[te])!=null?Ee:0,Cr=Ge+rt-gr-Et,lr=Ge+ht-gr,yt=ep(U?Dg(Re,Cr):Re,Ge,U?sc(Ze,lr):Ze);me[te]=yt,ke[te]=yt-Ge}if(c){var Mr,er=te==="x"?bo:wo,Lr=te==="x"?ca:ua,Pe=me[ie],cr=ie==="y"?"height":"width",ir=Pe+J[er],Bt=Pe-J[Lr],Gt=[bo,wo].indexOf(j)!==-1,kr=(Mr=De==null?void 0:De[ie])!=null?Mr:0,Pr=Gt?ir:Pe-Z[cr]-de[cr]-kr+ve.altAxis,sr=Gt?Pe+Z[cr]+de[cr]-kr-ve.altAxis:Bt,nr=U&&Gt?o4(Pr,Pe,sr):ep(U?Pr:ir,Pe,U?sr:Bt);me[ie]=nr,ke[ie]=nr-Pe}t.modifiersData[o]=ke}}const $4={name:"preventOverflow",enabled:!0,phase:"main",fn:L4,requiresIfExists:["offset"]};function B4(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function O4(e){return e===Oo(e)||!aa(e)?Z1(e):B4(e)}function F4(e){var t=e.getBoundingClientRect(),r=Ju(t.width)/e.offsetWidth||1,o=Ju(t.height)/e.offsetHeight||1;return r!==1||o!==1}function N4(e,t,r){r===void 0&&(r=!1);var o=aa(t),l=aa(t)&&F4(t),d=Il(t),m=Yu(e,l,r),c={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(o||!o&&!r)&&((ns(t)!=="body"||X1(d))&&(c=O4(t)),aa(t)?(b=Yu(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=K1(d))),{x:m.left+c.scrollLeft-b.x,y:m.top+c.scrollTop-b.y,width:m.width,height:m.height}}function j4(e){var t=new Map,r=new Set,o=[];e.forEach(function(d){t.set(d.name,d)});function l(d){r.add(d.name);var m=[].concat(d.requires||[],d.requiresIfExists||[]);m.forEach(function(c){if(!r.has(c)){var b=t.get(c);b&&l(b)}}),o.push(d)}return e.forEach(function(d){r.has(d.name)||l(d)}),o}function V4(e){var t=j4(e);return QB.reduce(function(r,o){return r.concat(t.filter(function(l){return l.phase===o}))},[])}function U4(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function H4(e){var t=e.reduce(function(r,o){var l=r[o.name];return r[o.name]=l?Object.assign({},l,o,{options:Object.assign({},l.options,o.options),data:Object.assign({},l.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var Z2={placement:"bottom",modifiers:[],strategy:"absolute"};function K2(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function W4(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,l=t.defaultOptions,d=l===void 0?Z2:l;return function(c,b,w){w===void 0&&(w=d);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},Z2,d),modifiersData:{},elements:{reference:c,popper:b},attributes:{},styles:{}},z=[],P=!1,U={state:T,setOptions:function(j){var $=typeof j=="function"?j(T.options):j;W(),T.options=Object.assign({},d,T.options,$),T.scrollParents={reference:gc(c)?tp(c):c.contextElement?tp(c.contextElement):[],popper:tp(b)};var G=V4(H4([].concat(o,T.options.modifiers)));return T.orderedModifiers=G.filter(function(te){return te.enabled}),H(),U.update()},forceUpdate:function(){if(!P){var j=T.elements,$=j.reference,G=j.popper;if(K2($,G)){T.rects={reference:N4($,Kp(G),T.options.strategy==="fixed"),popper:G1(G)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(ve){return T.modifiersData[ve.name]=Object.assign({},ve.data)});for(var te=0;te<T.orderedModifiers.length;te++){if(T.reset===!0){T.reset=!1,te=-1;continue}var ie=T.orderedModifiers[te],me=ie.fn,Z=ie.options,de=Z===void 0?{}:Z,Te=ie.name;typeof me=="function"&&(T=me({state:T,options:de,name:Te,instance:U})||T)}}}},update:U4(function(){return new Promise(function(J){U.forceUpdate(),J(T)})}),destroy:function(){W(),P=!0}};if(!K2(c,b))return U;U.setOptions(w).then(function(J){!P&&w.onFirstUpdate&&w.onFirstUpdate(J)});function H(){T.orderedModifiers.forEach(function(J){var j=J.name,$=J.options,G=$===void 0?{}:$,te=J.effect;if(typeof te=="function"){var ie=te({state:T,name:j,instance:U,options:G}),me=function(){};z.push(ie||me)}})}function W(){z.forEach(function(J){return J()}),z=[]}return U}}var G4=[m4,D4,p4,r4,A4,T4,$4,c4,P4],q4=W4({defaultModifiers:G4});const VP="Popper";function Z4(e){return PT(VP,e)}G5(VP,["root"]);const K4=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],X4=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function J4(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function ox(e){return typeof e=="function"?e():e}function Y4(e){return e.nodeType!==void 0}const Q4=()=>Kr({root:["root"]},N5(Z4)),eO={},tO=O.forwardRef(function(t,r){const{anchorEl:o,children:l,direction:d,disablePortal:m,modifiers:c,open:b,placement:w,popperOptions:T,popperRef:z,slotProps:P={},slots:U={},TransitionProps:H}=t,W=qt(t,K4),J=O.useRef(null),j=cn(J,r),$=O.useRef(null),G=cn($,z),te=O.useRef(G);uc(()=>{te.current=G},[G]),O.useImperativeHandle(z,()=>$.current,[]);const ie=J4(w,d),[me,Z]=O.useState(ie),[de,Te]=O.useState(ox(o));O.useEffect(()=>{$.current&&$.current.forceUpdate()}),O.useEffect(()=>{o&&Te(ox(o))},[o]),uc(()=>{if(!de||!b)return;const He=Ge=>{Z(Ge.placement)};let Fe=[{name:"preventOverflow",options:{altBoundary:m}},{name:"flip",options:{altBoundary:m}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ge})=>{He(Ge)}}];c!=null&&(Fe=Fe.concat(c)),T&&T.modifiers!=null&&(Fe=Fe.concat(T.modifiers));const Ae=q4(de,J.current,K({placement:ie},T,{modifiers:Fe}));return te.current(Ae),()=>{Ae.destroy(),te.current(null)}},[de,m,c,b,T,ie]);const ve={placement:me};H!==null&&(ve.TransitionProps=H);const De=Q4(),ke=U.root??"div",Ee=U5({elementType:ke,externalSlotProps:P.root,externalForwardedProps:W,additionalProps:{role:"tooltip",ref:j},ownerState:t,className:De.root});return ae.jsx(ke,K({},Ee,{children:typeof l=="function"?l(ve):l}))}),J1=O.forwardRef(function(t,r){const{anchorEl:o,children:l,container:d,direction:m="ltr",disablePortal:c=!1,keepMounted:b=!1,modifiers:w,open:T,placement:z="bottom",popperOptions:P=eO,popperRef:U,style:H,transition:W=!1,slotProps:J={},slots:j={}}=t,$=qt(t,X4),[G,te]=O.useState(!0),ie=()=>{te(!1)},me=()=>{te(!0)};if(!b&&!T&&(!W||G))return null;let Z;if(d)Z=d;else if(o){const ve=ox(o);Z=ve&&Y4(ve)?Ya(ve).body:Ya(null).body}const de=!T&&b&&(!W||G)?"none":void 0,Te=W?{in:T,onEnter:ie,onExited:me}:void 0;return ae.jsx(MP,{disablePortal:c,container:Z,children:ae.jsx(tO,K({anchorEl:o,direction:m,disablePortal:c,modifiers:w,ref:r,open:W?!G:T,placement:z,popperOptions:P,popperRef:U,slotProps:J,slots:j},$,{style:K({position:"fixed",top:0,left:0,display:de},H),TransitionProps:Te,children:l}))})}),Rg={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},rO=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function nO(e,t){const{open:r}=e,{context:{selectionMode:o}}=t;if(t.type===Rg.buttonClick){const d=e.selectedValues[0]??hi(null,"start",t.context);return K({},e,{open:!r,highlightedValue:r?null:d})}if(t.type===Rg.browserAutoFill)return Xx(t.item,e,t.context);const l=Jx(e,t);switch(t.type){case Tn.keyDown:if(e.open){if(t.event.key==="Escape")return K({},l,{open:!1})}else{if(t.event.key==="ArrowDown")return K({},e,{open:!0,highlightedValue:e.selectedValues[0]??hi(null,"start",t.context)});if(t.event.key==="ArrowUp")return K({},e,{open:!0,highlightedValue:e.selectedValues[0]??hi(null,"end",t.context)})}break;case Tn.itemClick:if(o==="single")return K({},l,{open:!1});break;case Tn.blur:return K({},l,{open:!1});default:return l}return l}function iO(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function oO(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:o=!1,defaultValue:l,disabled:d=!1,listboxId:m,listboxRef:c,multiple:b=!1,name:w,required:T,onChange:z,onHighlightChange:P,onOpenChange:U,open:H,options:W,getOptionAsString:J=rO,getSerializedValue:j=iO,value:$,componentName:G="useSelect"}=e,te=O.useRef(null),ie=cn(r,te),me=O.useRef(null),Z=La(m);let de;$===void 0&&l===void 0?de=[]:l!==void 0&&(b?de=l:de=l==null?[]:[l]);const Te=O.useMemo(()=>{if($!==void 0)return b?$:$==null?[]:[$]},[$,b]),{subitems:ve,contextValue:De}=Yx(),ke=O.useMemo(()=>W!=null?new Map(W.map((it,Le)=>[it.value,{value:it.value,label:it.label,disabled:it.disabled,ref:O.createRef(),id:`${Z}_${Le}`}])):ve,[W,ve,Z]),Ee=cn(c,me),{getRootProps:He,active:Fe,focusVisible:Ae,rootRef:Ge}=Sl({disabled:d,rootRef:ie}),Re=O.useMemo(()=>Array.from(ke.keys()),[ke]),Ze=O.useCallback(it=>{if(t!==void 0){const Le=Re.find(Ht=>t(Ht,it));return ke.get(Le)}return ke.get(it)},[ke,t,Re]),Je=O.useCallback(it=>{const Le=Ze(it);return(Le==null?void 0:Le.disabled)??!1},[Ze]),dt=O.useCallback(it=>{const Le=Ze(it);return Le?J(Le):""},[Ze,J]),vt=O.useMemo(()=>({selectedValues:Te,open:H}),[Te,H]),mt=O.useCallback(it=>{var Le;return(Le=ke.get(it))==null?void 0:Le.id},[ke]),Ct=O.useCallback((it,Le)=>{b?z==null||z(it,Le):z==null||z(it,Le[0]??null)},[b,z]),zt=O.useCallback((it,Le)=>{P==null||P(it,Le??null)},[P]),Zt=O.useCallback((it,Le,Ht)=>{var Mt;Le==="open"&&(U==null||U(Ht),Ht===!1&&(it==null?void 0:it.type)!=="blur"&&((Mt=te.current)==null||Mt.focus()))},[U]),kt=O.useCallback(it=>{var Le;return it==null?null:((Le=ve.get(it))==null?void 0:Le.ref.current)??null},[ve]),$e={getInitialState:()=>({highlightedValue:null,selectedValues:de??[],open:o}),getItemId:mt,controlledProps:vt,focusManagement:"DOM",getItemDomElement:kt,itemComparer:t,isItemDisabled:Je,rootRef:Ee,onChange:Ct,onHighlightChange:zt,onStateChange:Zt,reducerActionContext:O.useMemo(()=>({multiple:b}),[b]),items:Re,getItemAsString:dt,selectionMode:b?"multiple":"single",stateReducer:nO,componentName:G},{dispatch:rt,getRootProps:ht,contextValue:At,state:{open:Et,highlightedValue:gr,selectedValues:Cr},rootRef:lr}=ET($e),yt=O.useRef(Et);uc(()=>{var it;if(Et&&gr!==null){const Le=(it=Ze(gr))==null?void 0:it.ref;if(!me.current||!(Le!=null&&Le.current))return;yt.current||Le.current.focus({preventScroll:!0});const Ht=me.current.getBoundingClientRect(),Mt=Le.current.getBoundingClientRect();Mt.top<Ht.top?me.current.scrollTop-=Ht.top-Mt.top:Mt.bottom>Ht.bottom&&(me.current.scrollTop+=Mt.bottom-Ht.bottom)}},[Et,gr,Ze]);const Mr=O.useCallback(it=>Ze(it),[Ze]),er=it=>Le=>{var Ht;if((Ht=it==null?void 0:it.onClick)==null||Ht.call(it,Le),!Le.defaultMuiPrevented){const Mt={type:Rg.buttonClick,event:Le};rt(Mt)}},Lr=it=>Le=>{var Ht;(Ht=it.onKeyDown)==null||Ht.call(it,Le),!Le.defaultMuiPrevented&&(Le.key==="ArrowDown"||Le.key==="ArrowUp")&&(Le.preventDefault(),rt({type:Tn.keyDown,key:Le.key,event:Le}))},Pe=(it={})=>({onClick:er(it),onKeyDown:Lr(it)}),cr=(it={})=>K({},it,Pe(it),{role:"combobox","aria-expanded":Et,"aria-controls":Z}),ir=(it={})=>{const Le=yo(it),Ht=up(cr,He);return K({},it,Ht(Le))},Bt=it=>Le=>{var Ht,Mt;(Ht=it.onBlur)==null||Ht.call(it,Le),!Le.defaultMuiPrevented&&((Mt=me.current)!=null&&Mt.contains(Le.relatedTarget)||Le.relatedTarget===te.current)&&(Le.defaultMuiPrevented=!0)},Gt=(it={})=>({onBlur:Bt(it)}),kr=(it={})=>{const Le=yo(it),Ht=up(Gt,ht);return K({id:Z,role:"listbox","aria-multiselectable":b?"true":void 0},it,Ht(Le))};O.useDebugValue({selectedOptions:Cr,highlightedOption:gr,open:Et});const Pr=O.useMemo(()=>K({},At,De),[At,De]);let sr;e.multiple?sr=Cr:sr=Cr.length>0?Cr[0]:null;let nr;b?nr=sr.map(it=>Mr(it)).filter(it=>it!==void 0):nr=Mr(sr)??null;const rr=it=>Le=>{var Mt;if((Mt=it==null?void 0:it.onChange)==null||Mt.call(it,Le),Le.defaultMuiPrevented)return;const Ht=ke.get(Le.target.value);Le.target.value===""?rt({type:Tn.clearSelection}):Ht!==void 0&&rt({type:Rg.browserAutoFill,item:Ht.value,event:Le})};return{buttonActive:Fe,buttonFocusVisible:Ae,buttonRef:Ge,contextValue:Pr,disabled:d,dispatch:rt,getButtonProps:ir,getHiddenInputProps:(it={})=>{const Le=yo(it);return K({name:w,tabIndex:-1,"aria-hidden":!0,required:T?!0:void 0,value:j(nr),style:XL},it,{onChange:rr(Le)})},getListboxProps:kr,getOptionMetadata:Mr,listboxRef:lr,open:Et,options:Re,value:sr,highlightedOption:gr}}function aO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:l,getItemState:d,registerItem:m,totalSubitemCount:c}=t,b=O.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:l}),[o,l,d]),w=O.useMemo(()=>({getItemIndex:l,registerItem:m,totalSubitemCount:c}),[m,l,c]);return ae.jsx(Ty.Provider,{value:w,children:ae.jsx(Up.Provider,{value:b,children:r})})}function sO(e){const{checked:t,defaultChecked:r,disabled:o,onBlur:l,onChange:d,onFocus:m,onFocusVisible:c,readOnly:b,required:w}=e,[T,z]=Mu({controlled:t,default:!!r,name:"Switch",state:"checked"}),P=de=>Te=>{var ve;Te.nativeEvent.defaultPrevented||(z(Te.target.checked),d==null||d(Te),(ve=de.onChange)==null||ve.call(de,Te))},{isFocusVisibleRef:U,onBlur:H,onFocus:W,ref:J}=Wx(),[j,$]=O.useState(!1);o&&j&&$(!1),O.useEffect(()=>{U.current=j},[j,U]);const G=O.useRef(null),te=de=>Te=>{var ve;G.current||(G.current=Te.currentTarget),W(Te),U.current===!0&&($(!0),c==null||c(Te)),m==null||m(Te),(ve=de.onFocus)==null||ve.call(de,Te)},ie=de=>Te=>{var ve;H(Te),U.current===!1&&$(!1),l==null||l(Te),(ve=de.onBlur)==null||ve.call(de,Te)},me=cn(J,G);return{checked:T,disabled:!!o,focusVisible:j,getInputProps:(de={})=>K({checked:t,defaultChecked:r,disabled:o,readOnly:b,ref:me,required:w,type:"checkbox",role:"switch","aria-checked":t},de,{onChange:P(de),onFocus:te(de),onBlur:ie(de)}),inputRef:me,readOnly:!!b}}function lO(e){const{value:t,defaultValue:r,onChange:o,orientation:l="horizontal",direction:d="ltr",selectionFollowsFocus:m=!1}=e,[c,b]=Mu({controlled:t,default:r,name:"Tabs",state:"value"}),w=O.useCallback((J,j)=>{b(j),o==null||o(J,j)},[o,b]),{subitems:T,contextValue:z}=Yx(),P=O.useRef(()=>{}),U=O.useCallback(J=>{var j;return(j=T.get(J))==null?void 0:j.id},[T]),H=O.useCallback(J=>P.current(J),[]),W=O.useCallback(J=>{P.current=J},[]);return{contextValue:K({direction:d,getTabId:H,getTabPanelId:U,onSelected:w,orientation:l,registerTabIdLookup:W,selectionFollowsFocus:m,value:c},z)}}const UP=O.createContext(null);function Uy(){const e=O.useContext(UP);if(e==null)throw new Error("No TabsContext provided");return e}function cO(e){const{value:t,children:r}=e,{direction:o,getItemIndex:l,onSelected:d,orientation:m,registerItem:c,registerTabIdLookup:b,selectionFollowsFocus:w,totalSubitemCount:T,value:z,getTabId:P,getTabPanelId:U}=t,H=O.useMemo(()=>({getItemIndex:l,registerItem:c,totalSubitemCount:T}),[c,l,T]),W=O.useMemo(()=>({direction:o,getTabId:P,getTabPanelId:U,onSelected:d,orientation:m,registerTabIdLookup:b,selectionFollowsFocus:w,value:z}),[o,P,U,d,m,b,w,z]);return ae.jsx(Ty.Provider,{value:H,children:ae.jsx(UP.Provider,{value:W,children:r})})}function uO(e){return e.size}function dO(e){const{value:t,id:r,rootRef:o}=e,l=Uy();if(l===null)throw new Error("No TabContext provided");const{value:d,getTabId:m}=l,c=La(r),b=O.useRef(null),w=cn(b,o),T=O.useMemo(()=>({id:c,ref:b}),[c]),{id:z}=Qx(t??uO,T),P=z!==d,U=z!==void 0?m(z):void 0;return{hidden:P,getRootProps:(W={})=>K({"aria-labelledby":U??void 0,hidden:P,id:c??void 0},W,{ref:w}),rootRef:w}}const HP={valueChange:"valueChange"};function hO(e,t){if(t.type===HP.valueChange)return K({},e,{highlightedValue:t.value});const r=Jx(e,t),{context:{selectionFollowsFocus:o}}=t;if(t.type===Tn.itemsChange){if(r.selectedValues.length>0)return K({},r,{highlightedValue:r.selectedValues[0]});hi(null,"reset",t.context)}return o&&r.highlightedValue!=null?K({},r,{selectedValues:[r.highlightedValue]}):r}function pO(e){const{rootRef:t}=e,{direction:r="ltr",onSelected:o,orientation:l="horizontal",value:d,registerTabIdLookup:m,selectionFollowsFocus:c}=Uy(),{subitems:b,contextValue:w}=Yx(),T=O.useCallback(ve=>{var De;return(De=b.get(ve))==null?void 0:De.id},[b]);m(T);const z=O.useMemo(()=>Array.from(b.keys()),[b]),P=O.useCallback(ve=>{var De;return ve==null?null:((De=b.get(ve))==null?void 0:De.ref.current)??null},[b]),U=r==="rtl";let H;l==="vertical"?H="vertical":H=U?"horizontal-rtl":"horizontal-ltr";const W=O.useCallback((ve,De)=>{o(ve,De[0]??null)},[o]),J=O.useMemo(()=>d===void 0?{}:d!=null?{selectedValues:[d]}:{selectedValues:[]},[d]),j=O.useCallback(ve=>{var De;return((De=b.get(ve))==null?void 0:De.disabled)??!1},[b]),{contextValue:$,dispatch:G,getRootProps:te,state:{highlightedValue:ie,selectedValues:me},rootRef:Z}=ET({controlledProps:J,disabledItemsFocusable:!c,focusManagement:"DOM",getItemDomElement:P,isItemDisabled:j,items:z,rootRef:t,onChange:W,orientation:H,reducerActionContext:O.useMemo(()=>({selectionFollowsFocus:c||!1}),[c]),selectionMode:"single",stateReducer:hO});O.useEffect(()=>{d!==void 0&&d!=null&&G({type:HP.valueChange,value:d})},[G,d]);const de=(ve={})=>K({},ve,te(ve),{"aria-orientation":l==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:O.useMemo(()=>K({},w,$),[w,$]),dispatch:G,getRootProps:de,highlightedValue:ie,isRtl:U,orientation:l,rootRef:Z,selectedValue:me[0]??null}}function fO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:l,getItemState:d,registerItem:m,totalSubitemCount:c}=t,b=O.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:l}),[o,l,d]),w=O.useMemo(()=>({getItemIndex:l,registerItem:m,totalSubitemCount:c}),[m,l,c]);return ae.jsx(Ty.Provider,{value:w,children:ae.jsx(Up.Provider,{value:b,children:r})})}function mO(e){return e.size}function gO(e){const{value:t,rootRef:r,disabled:o=!1,id:l}=e,d=O.useRef(null),m=La(l),{value:c,selectionFollowsFocus:b,getTabPanelId:w}=Uy(),T=O.useMemo(()=>({disabled:o,ref:d,id:m}),[o,d,m]),{id:z,index:P,totalItemCount:U}=Qx(t??mO,T),{getRootProps:H,highlighted:W,selected:J}=zT({item:z}),{getRootProps:j,rootRef:$,active:G,focusVisible:te,setFocusVisible:ie}=Sl({disabled:o,focusableWhenDisabled:!b,type:"button"}),me=cn(d,r,$),Z=z!==void 0?w(z):void 0;return{getRootProps:(Te={})=>{const ve=yo(Te),De=up(H,j);return K({},Te,De(ve),{role:"tab","aria-controls":Z,"aria-selected":J,id:m,ref:me})},active:G,focusVisible:te,highlighted:W,index:P,rootRef:me,selected:J||z===c,setFocusVisible:ie,totalTabsCount:U}}function X2(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function WP(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:o,matchFrom:l="any",stringify:d,trim:m=!1}=e;return(c,{inputValue:b,getOptionLabel:w})=>{let T=m?b.trim():b;r&&(T=T.toLowerCase()),t&&(T=X2(T));const z=T?c.filter(P=>{let U=(d||w)(P);return r&&(U=U.toLowerCase()),t&&(U=X2(U)),l==="start"?U.indexOf(T)===0:U.indexOf(T)>-1}):c;return typeof o=="number"?z.slice(0,o):z}}function Lm(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const yO=WP(),J2=5,vO=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function _O(e){const{unstable_isActiveElementInListbox:t=vO,unstable_classNamePrefix:r="Mui",autoComplete:o=!1,autoHighlight:l=!1,autoSelect:d=!1,blurOnSelect:m=!1,clearOnBlur:c=!e.freeSolo,clearOnEscape:b=!1,componentName:w="useAutocomplete",defaultValue:T=e.multiple?[]:null,disableClearable:z=!1,disableCloseOnSelect:P=!1,disabled:U,disabledItemsFocusable:H=!1,disableListWrap:W=!1,filterOptions:J=yO,filterSelectedOptions:j=!1,freeSolo:$=!1,getOptionDisabled:G,getOptionKey:te,getOptionLabel:ie=Me=>Me.label??Me,groupBy:me,handleHomeEndKeys:Z=!e.freeSolo,id:de,includeInputInList:Te=!1,inputValue:ve,isOptionEqualToValue:De=(Me,Oe)=>Me===Oe,multiple:ke=!1,onChange:Ee,onClose:He,onHighlightChange:Fe,onInputChange:Ae,onOpen:Ge,open:Re,openOnFocus:Ze=!1,options:Je,readOnly:dt=!1,selectOnFocus:vt=!e.freeSolo,value:mt}=e,Ct=La(de);let zt=ie;zt=Me=>{const Oe=ie(Me);return typeof Oe!="string"?String(Oe):Oe};const Zt=O.useRef(!1),kt=O.useRef(!0),$e=O.useRef(null),rt=O.useRef(null),[ht,At]=O.useState(null),[Et,gr]=O.useState(-1),Cr=l?0:-1,lr=O.useRef(Cr),[yt,Mr]=Mu({controlled:mt,default:T,name:w}),[er,Lr]=Mu({controlled:ve,default:"",name:w,state:"inputValue"}),[Pe,cr]=O.useState(!1),ir=O.useCallback((Me,Oe)=>{if(!(ke?yt.length<Oe.length:Oe!==null)&&!c)return;let ct;if(ke)ct="";else if(Oe==null)ct="";else{const _t=zt(Oe);ct=typeof _t=="string"?_t:""}er!==ct&&(Lr(ct),Ae&&Ae(Me,ct,"reset"))},[zt,er,ke,Ae,Lr,c,yt]),[Bt,Gt]=Mu({controlled:Re,default:!1,name:w,state:"open"}),[kr,Pr]=O.useState(!0),sr=!ke&&yt!=null&&er===zt(yt),nr=Bt&&!dt,rr=nr?J(Je.filter(Me=>!(j&&(ke?yt:[yt]).some(Oe=>Oe!==null&&De(Me,Oe)))),{inputValue:sr&&kr?"":er,getOptionLabel:zt}):[],Dr=ZL({filteredOptions:rr,value:yt,inputValue:er});O.useEffect(()=>{const Me=yt!==Dr.value;Pe&&!Me||$&&!Me||ir(null,yt)},[yt,ir,Pe,Dr.value,$]);const it=Bt&&rr.length>0&&!dt,Le=ll(Me=>{Me===-1?$e.current.focus():ht.querySelector(`[data-tag-index="${Me}"]`).focus()});O.useEffect(()=>{ke&&Et>yt.length-1&&(gr(-1),Le(-1))},[yt,ke,Et,Le]);function Ht(Me,Oe){if(!rt.current||Me<0||Me>=rr.length)return-1;let nt=Me;for(;;){const ct=rt.current.querySelector(`[data-option-index="${nt}"]`),_t=H?!1:!ct||ct.disabled||ct.getAttribute("aria-disabled")==="true";if(ct&&ct.hasAttribute("tabindex")&&!_t)return nt;if(Oe==="next"?nt=(nt+1)%rr.length:nt=(nt-1+rr.length)%rr.length,nt===Me)return-1}}const Mt=ll(({event:Me,index:Oe,reason:nt="auto"})=>{if(lr.current=Oe,Oe===-1?$e.current.removeAttribute("aria-activedescendant"):$e.current.setAttribute("aria-activedescendant",`${Ct}-option-${Oe}`),Fe&&Fe(Me,Oe===-1?null:rr[Oe],nt),!rt.current)return;const ct=rt.current.querySelector(`[role="option"].${r}-focused`);ct&&(ct.classList.remove(`${r}-focused`),ct.classList.remove(`${r}-focusVisible`));let _t=rt.current;if(rt.current.getAttribute("role")!=="listbox"&&(_t=rt.current.parentElement.querySelector('[role="listbox"]')),!_t)return;if(Oe===-1){_t.scrollTop=0;return}const ur=rt.current.querySelector(`[data-option-index="${Oe}"]`);if(ur&&(ur.classList.add(`${r}-focused`),nt==="keyboard"&&ur.classList.add(`${r}-focusVisible`),_t.scrollHeight>_t.clientHeight&&nt!=="mouse"&&nt!=="touch")){const tr=ur,yr=_t.clientHeight+_t.scrollTop,Xt=tr.offsetTop+tr.offsetHeight;Xt>yr?_t.scrollTop=Xt-_t.clientHeight:tr.offsetTop-tr.offsetHeight*(me?1.3:0)<_t.scrollTop&&(_t.scrollTop=tr.offsetTop-tr.offsetHeight*(me?1.3:0))}}),_r=ll(({event:Me,diff:Oe,direction:nt="next",reason:ct="auto"})=>{if(!nr)return;const ur=Ht((()=>{const tr=rr.length-1;if(Oe==="reset")return Cr;if(Oe==="start")return 0;if(Oe==="end")return tr;const yr=lr.current+Oe;return yr<0?yr===-1&&Te?-1:W&&lr.current!==-1||Math.abs(Oe)>1?0:tr:yr>tr?yr===tr+1&&Te?-1:W||Math.abs(Oe)>1?tr:0:yr})(),nt);if(Mt({index:ur,reason:ct,event:Me}),o&&Oe!=="reset")if(ur===-1)$e.current.value=er;else{const tr=zt(rr[ur]);$e.current.value=tr,tr.toLowerCase().indexOf(er.toLowerCase())===0&&er.length>0&&$e.current.setSelectionRange(er.length,tr.length)}}),xr=()=>{const Me=(Oe,nt)=>{const ct=Oe?zt(Oe):"",_t=nt?zt(nt):"";return ct===_t};if(lr.current!==-1&&Dr.filteredOptions&&Dr.filteredOptions.length!==rr.length&&Dr.inputValue===er&&(ke?yt.length===Dr.value.length&&Dr.value.every((Oe,nt)=>zt(yt[nt])===zt(Oe)):Me(Dr.value,yt))){const Oe=Dr.filteredOptions[lr.current];if(Oe)return Lm(rr,nt=>zt(nt)===zt(Oe))}return-1},Qe=O.useCallback(()=>{if(!nr)return;const Me=xr();if(Me!==-1){lr.current=Me;return}const Oe=ke?yt[0]:yt;if(rr.length===0||Oe==null){_r({diff:"reset"});return}if(rt.current){if(Oe!=null){const nt=rr[lr.current];if(ke&&nt&&Lm(yt,_t=>De(nt,_t))!==-1)return;const ct=Lm(rr,_t=>De(_t,Oe));ct===-1?_r({diff:"reset"}):Mt({index:ct});return}if(lr.current>=rr.length-1){Mt({index:rr.length-1});return}Mt({index:lr.current})}},[rr.length,ke?!1:yt,j,_r,Mt,nr,er,ke]),Kt=ll(Me=>{lg(rt,Me),Me&&Qe()});O.useEffect(()=>{Qe()},[Qe]);const Rt=Me=>{Bt||(Gt(!0),Pr(!0),Ge&&Ge(Me))},ar=(Me,Oe)=>{Bt&&(Gt(!1),He&&He(Me,Oe))},jr=(Me,Oe,nt,ct)=>{if(ke){if(yt.length===Oe.length&&yt.every((_t,ur)=>_t===Oe[ur]))return}else if(yt===Oe)return;Ee&&Ee(Me,Oe,nt,ct),Mr(Oe)},Jt=O.useRef(!1),mn=(Me,Oe,nt="selectOption",ct="options")=>{let _t=nt,ur=Oe;if(ke){ur=Array.isArray(yt)?yt.slice():[];const tr=Lm(ur,yr=>De(Oe,yr));tr===-1?ur.push(Oe):ct!=="freeSolo"&&(ur.splice(tr,1),_t="removeOption")}ir(Me,ur),jr(Me,ur,_t,{option:Oe}),!P&&(!Me||!Me.ctrlKey&&!Me.metaKey)&&ar(Me,_t),(m===!0||m==="touch"&&Jt.current||m==="mouse"&&!Jt.current)&&$e.current.blur()};function ue(Me,Oe){if(Me===-1)return-1;let nt=Me;for(;;){if(Oe==="next"&&nt===yt.length||Oe==="previous"&&nt===-1)return-1;const ct=ht.querySelector(`[data-tag-index="${nt}"]`);if(!ct||!ct.hasAttribute("tabindex")||ct.disabled||ct.getAttribute("aria-disabled")==="true")nt+=Oe==="next"?1:-1;else return nt}}const M=(Me,Oe)=>{if(!ke)return;er===""&&ar(Me,"toggleInput");let nt=Et;Et===-1?er===""&&Oe==="previous"&&(nt=yt.length-1):(nt+=Oe==="next"?1:-1,nt<0&&(nt=0),nt===yt.length&&(nt=-1)),nt=ue(nt,Oe),gr(nt),Le(nt)},R=Me=>{Zt.current=!0,Lr(""),Ae&&Ae(Me,"","clear"),jr(Me,ke?[]:null,"clear")},V=Me=>Oe=>{if(Me.onKeyDown&&Me.onKeyDown(Oe),!Oe.defaultMuiPrevented&&(Et!==-1&&["ArrowLeft","ArrowRight"].indexOf(Oe.key)===-1&&(gr(-1),Le(-1)),Oe.which!==229))switch(Oe.key){case"Home":nr&&Z&&(Oe.preventDefault(),_r({diff:"start",direction:"next",reason:"keyboard",event:Oe}));break;case"End":nr&&Z&&(Oe.preventDefault(),_r({diff:"end",direction:"previous",reason:"keyboard",event:Oe}));break;case"PageUp":Oe.preventDefault(),_r({diff:-J2,direction:"previous",reason:"keyboard",event:Oe}),Rt(Oe);break;case"PageDown":Oe.preventDefault(),_r({diff:J2,direction:"next",reason:"keyboard",event:Oe}),Rt(Oe);break;case"ArrowDown":Oe.preventDefault(),_r({diff:1,direction:"next",reason:"keyboard",event:Oe}),Rt(Oe);break;case"ArrowUp":Oe.preventDefault(),_r({diff:-1,direction:"previous",reason:"keyboard",event:Oe}),Rt(Oe);break;case"ArrowLeft":M(Oe,"previous");break;case"ArrowRight":M(Oe,"next");break;case"Enter":if(lr.current!==-1&&nr){const nt=rr[lr.current],ct=G?G(nt):!1;if(Oe.preventDefault(),ct)return;mn(Oe,nt,"selectOption"),o&&$e.current.setSelectionRange($e.current.value.length,$e.current.value.length)}else $&&er!==""&&sr===!1&&(ke&&Oe.preventDefault(),mn(Oe,er,"createOption","freeSolo"));break;case"Escape":nr?(Oe.preventDefault(),Oe.stopPropagation(),ar(Oe,"escape")):b&&(er!==""||ke&&yt.length>0)&&(Oe.preventDefault(),Oe.stopPropagation(),R(Oe));break;case"Backspace":if(ke&&!dt&&er===""&&yt.length>0){const nt=Et===-1?yt.length-1:Et,ct=yt.slice();ct.splice(nt,1),jr(Oe,ct,"removeOption",{option:yt[nt]})}break;case"Delete":if(ke&&!dt&&er===""&&yt.length>0&&Et!==-1){const nt=Et,ct=yt.slice();ct.splice(nt,1),jr(Oe,ct,"removeOption",{option:yt[nt]})}break}},Q=Me=>{cr(!0),Ze&&!Zt.current&&Rt(Me)},re=Me=>{if(t(rt)){$e.current.focus();return}cr(!1),kt.current=!0,Zt.current=!1,d&&lr.current!==-1&&nr?mn(Me,rr[lr.current],"blur"):d&&$&&er!==""?mn(Me,er,"blur","freeSolo"):c&&ir(Me,yt),ar(Me,"blur")},xe=Me=>{const Oe=Me.target.value;er!==Oe&&(Lr(Oe),Pr(!1),Ae&&Ae(Me,Oe,"input")),Oe===""?!z&&!ke&&jr(Me,null,"clear"):Rt(Me)},pe=Me=>{const Oe=Number(Me.currentTarget.getAttribute("data-option-index"));lr.current!==Oe&&Mt({event:Me,index:Oe,reason:"mouse"})},ne=Me=>{Mt({event:Me,index:Number(Me.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Jt.current=!0},_e=Me=>{const Oe=Number(Me.currentTarget.getAttribute("data-option-index"));mn(Me,rr[Oe],"selectOption"),Jt.current=!1},ze=Me=>Oe=>{const nt=yt.slice();nt.splice(Me,1),jr(Oe,nt,"removeOption",{option:yt[Me]})},Ve=Me=>{Bt?ar(Me,"toggleInput"):Rt(Me)},We=Me=>{Me.currentTarget.contains(Me.target)&&Me.target.getAttribute("id")!==Ct&&Me.preventDefault()},Ye=Me=>{Me.currentTarget.contains(Me.target)&&($e.current.focus(),vt&&kt.current&&$e.current.selectionEnd-$e.current.selectionStart===0&&$e.current.select(),kt.current=!1)},St=Me=>{!U&&(er===""||!Bt)&&Ve(Me)};let at=$&&er.length>0;at=at||(ke?yt.length>0:yt!==null);let Dt=rr;return me&&(Dt=rr.reduce((Me,Oe,nt)=>{const ct=me(Oe);return Me.length>0&&Me[Me.length-1].group===ct?Me[Me.length-1].options.push(Oe):Me.push({key:nt,index:nt,group:ct,options:[Oe]}),Me},[])),U&&Pe&&re(),{getRootProps:(Me={})=>K({"aria-owns":it?`${Ct}-listbox`:null},Me,{onKeyDown:V(Me),onMouseDown:We,onClick:Ye}),getInputLabelProps:()=>({id:`${Ct}-label`,htmlFor:Ct}),getInputProps:()=>({id:Ct,value:er,onBlur:re,onFocus:Q,onChange:xe,onMouseDown:St,"aria-activedescendant":nr?"":null,"aria-autocomplete":o?"both":"list","aria-controls":it?`${Ct}-listbox`:void 0,"aria-expanded":it,autoComplete:"off",ref:$e,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:U}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:R}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ve}),getTagProps:({index:Me})=>K({key:Me,"data-tag-index":Me,tabIndex:-1},!dt&&{onDelete:ze(Me)}),getListboxProps:()=>({role:"listbox",id:`${Ct}-listbox`,"aria-labelledby":`${Ct}-label`,ref:Kt,onMouseDown:Me=>{Me.preventDefault()}}),getOptionProps:({index:Me,option:Oe})=>{const nt=(ke?yt:[yt]).some(_t=>_t!=null&&De(Oe,_t)),ct=G?G(Oe):!1;return{key:(te==null?void 0:te(Oe))??zt(Oe),tabIndex:-1,role:"option",id:`${Ct}-option-${Me}`,onMouseMove:pe,onClick:_e,onTouchStart:ne,"data-option-index":Me,"aria-disabled":ct,"aria-selected":nt}},id:Ct,inputValue:er,value:yt,dirty:at,expanded:nr&&ht,popupOpen:nr,focused:Pe||Et!==-1,anchorEl:ht,setAnchorEl:At,focusedTag:Et,groupedOptions:Dt}}const xO=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],bO=["component","slots","slotProps"],wO=["component"];function jt(e,t){const{className:r,elementType:o,ownerState:l,externalForwardedProps:d,getSlotOwnerState:m,internalForwardedProps:c}=t,b=qt(t,xO),{component:w,slots:T={[e]:void 0},slotProps:z={[e]:void 0}}=d,P=qt(d,bO),U=T[e]||o,H=kT(z[e],l),W=TT(K({className:r},b,{externalForwardedProps:e==="root"?P:void 0,externalSlotProps:H})),{props:{component:J},internalRef:j}=W,$=qt(W.props,wO),G=cn(j,H==null?void 0:H.ref,t.ref),te=m?m($):{},ie=K({},l,te),me=e==="root"?J||w:J,Z=CT(U,K({},e==="root"&&!w&&!T[e]&&c,e!=="root"&&!T[e]&&c,$,me&&{as:me},{ref:G}),ie);return Object.keys(te).forEach(de=>{delete Z[de]}),[U,Z]}function SO(e){return Qr("MuiListItem",e)}const Lg=Hr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),CO=O.createContext(!1),$g=CO,kO=O.createContext(!1),Xp=kO,TO=O.createContext(!1),GP=TO,IO=O.createContext(void 0),Y1=IO,PO=O.createContext(void 0),qP=PO,EO=O.createContext(void 0),Q1=EO,zO=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],AO=e=>{const{sticky:t,nested:r,nesting:o,variant:l,color:d}=e,m={root:["root",r&&"nested",o&&"nesting",t&&"sticky",d&&`color${Ft(d)}`,l&&`variant${Ft(l)}`],startAction:["startAction"],endAction:["endAction"]};return Kr(m,SO,{})},MO=gt("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},K({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&K({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${Lg.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),DO=gt(MO,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),RO=gt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),LO=gt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),ZP=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyListItem"}),l=O.useContext(Q1),d=O.useContext(Y1),m=O.useContext(Xp),c=O.useContext(GP),b=O.useContext($g),{component:w,className:T,children:z,nested:P=!1,sticky:U=!1,variant:H="plain",color:W="neutral",startAction:J,endAction:j,role:$,slots:G={},slotProps:te={}}=o,ie=qt(o,zO),[me,Z]=O.useState(""),[de,Te]=(d==null?void 0:d.split(":"))||["",""],ve=w||(de&&!de.match(/^(ul|ol|menu)$/)?"div":void 0);let De=l==="menu"?"none":void 0;d&&(De={menu:"none",menubar:"none",group:"presentation"}[Te]),$&&(De=$);const ke=K({},o,{sticky:U,startAction:J,endAction:j,row:m,wrap:c,variant:H,color:W,nesting:b,nested:P,component:ve,role:De}),Ee=AO(ke),He=K({},ie,{component:ve,slots:G,slotProps:te}),[Fe,Ae]=jt("root",{additionalProps:{role:De},ref:r,className:ji(Ee.root,T),elementType:DO,externalForwardedProps:He,ownerState:ke}),[Ge,Re]=jt("startAction",{className:Ee.startAction,elementType:RO,externalForwardedProps:He,ownerState:ke}),[Ze,Je]=jt("endAction",{className:Ee.endAction,elementType:LO,externalForwardedProps:He,ownerState:ke});return ae.jsx(qP.Provider,{value:Z,children:ae.jsx($g.Provider,{value:P?me||!0:!1,children:ae.jsxs(Fe,K({},Ae,{children:[J&&ae.jsx(Ge,K({},Re,{children:J})),O.Children.map(z,(dt,vt)=>O.isValidElement(dt)?O.cloneElement(dt,K({},vt===0&&{"data-first-child":""},_T(dt,["ListItem"])&&{component:dt.props.component||"div"})):dt),j&&ae.jsx(Ze,K({},Je,{children:j}))]}))})})});ZP.muiName="ListItem";const Hy=ZP,eb={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function Wy(e){const{children:t,nested:r,row:o=!1,wrap:l=!1}=e,d=ae.jsx(Xp.Provider,{value:o,children:ae.jsx(GP.Provider,{value:l,children:O.Children.map(t,(m,c)=>O.isValidElement(m)?O.cloneElement(m,K({},c===0&&{"data-first-child":""},c===O.Children.count(t)-1&&{"data-last-child":""})):m)})});return r===void 0?d:ae.jsx($g.Provider,{value:r,children:d})}const Jp=({theme:e,ownerState:t},r)=>{let o={};function l(d){if(typeof d=="function"){const m=d(e);l(m)}else Array.isArray(d)?d.forEach(m=>{typeof m!="boolean"&&l(m)}):typeof d=="object"&&(o=K({},o,d))}return t.sx&&(l(t.sx),r.forEach(d=>{var c;const m=o[d];typeof m=="string"||typeof m=="number"?d==="borderRadius"?typeof m=="number"?o[d]=`${m}px`:o[d]=((c=e.vars)==null?void 0:c.radius[m])||m:["p","padding","m","margin"].indexOf(d)!==-1&&typeof m=="number"?o[d]=e.spacing(m):o[d]=m:typeof m=="function"?o[d]=m(e):o[d]=void 0})),o};function $O(e){return Qr("MuiList",e)}const BO=Hr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),OO=O.createContext(void 0),FO=OO,NO=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],jO=e=>{const{variant:t,color:r,size:o,nesting:l,orientation:d,instanceSize:m}=e,c={root:["root",d,t&&`variant${Ft(t)}`,r&&`color${Ft(r)}`,!m&&!l&&o&&`size${Ft(o)}`,m&&`size${Ft(m)}`,l&&"nesting"]};return Kr(c,$O,{})},Gy=gt("ul")(({theme:e,ownerState:t})=>{var m;const{p:r,padding:o,borderRadius:l}=Jp({theme:e,ownerState:t},["p","padding","borderRadius"]);function d(c){return c==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:c==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:c==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&K({},d(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&K({},d(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?K({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),K({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(m=e.variants[t.variant])==null?void 0:m[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},l!==void 0&&{"--List-radius":l},r!==void 0&&{"--List-padding":r},o!==void 0&&{"--List-padding":o})]}),VO=gt(Gy,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),UO=O.forwardRef(function(t,r){const o=O.useContext($g),l=O.useContext(Q1),d=O.useContext(FO),m=en({props:t,name:"JoyList"}),{component:c,className:b,children:w,size:T,orientation:z="vertical",wrap:P=!1,variant:U="plain",color:H="neutral",role:W,slots:J={},slotProps:j={}}=m,$=qt(m,NO),G=T||(t.size??"md");let te;l&&(te="group"),d&&(te="presentation"),W&&(te=W);const ie=K({},m,{instanceSize:t.size,size:G,nesting:o,orientation:z,wrap:P,variant:U,color:H,role:te}),me=jO(ie),Z=K({},$,{component:c,slots:J,slotProps:j}),[de,Te]=jt("root",{ref:r,className:ji(me.root,b),elementType:VO,externalForwardedProps:Z,ownerState:ie,additionalProps:{as:c,role:te,"aria-labelledby":typeof o=="string"?o:void 0}});return ae.jsx(de,K({},Te,{children:ae.jsx(Y1.Provider,{value:`${typeof c=="string"?c:""}:${te||""}`,children:ae.jsx(Wy,{row:z==="horizontal",wrap:P,children:w})})}))}),qy=UO,HO=Hr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),tg=HO,WO=O.createContext("horizontal"),GO=WO,Zy=gt("div")(({theme:e,ownerState:t})=>{var r,o,l,d,m,c;return K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:K({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${Lg.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${tg.selected}`]:K({},(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${tg.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(m=e.variants[`${t.variant}Active`])==null?void 0:m[t.color]},[`&.${tg.disabled}`]:K({},(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])})});gt(Zy,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>K({},!e.row&&{[`&.${tg.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function qO(e){return Qr("MuiSvgIcon",e)}Hr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const ZO=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],KO=e=>{const{color:t,size:r,fontSize:o}=e,l={root:["root",t&&t!=="inherit"&&`color${Ft(t)}`,r&&`size${Ft(r)}`,o&&`fontSize${Ft(o)}`]};return Kr(l,qO,{})},Y2={sm:"xl",md:"xl2",lg:"xl3"},XO=gt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[Y2[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[Y2[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&K({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),Q2=O.forwardRef(function(t,r){const o=en({props:t,name:"JoySvgIcon"}),{children:l,className:d,color:m,component:c="svg",fontSize:b,htmlColor:w,inheritViewBox:T=!1,titleAccess:z,viewBox:P="0 0 24 24",size:U="md",slots:H={},slotProps:W={}}=o,J=qt(o,ZO),j=O.isValidElement(l)&&l.type==="svg",$=K({},o,{color:m,component:c,size:U,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:P,hasSvgAsChild:j}),G=KO($),te=K({},J,{component:c,slots:H,slotProps:W}),[ie,me]=jt("root",{ref:r,className:ji(G.root,d),elementType:XO,externalForwardedProps:te,ownerState:$,additionalProps:K({color:w,focusable:!1},z&&{role:"img"},!z&&{"aria-hidden":!0},!T&&{viewBox:P},j&&l.props)});return ae.jsxs(ie,K({},me,{children:[j?l.props.children:l,z?ae.jsx("title",{children:z}):null]}))});function cd(e,t){function r(o,l){return ae.jsx(Q2,K({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return r.muiName=Q2.muiName,O.memo(O.forwardRef(r))}const tb=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,ed="data-skip-inverted-colors",KP=`& :not([${ed}], [${ed}] *)`,XP=e=>{var r,o,l,d,m,c,b,w,T,z,P,U,H,W,J,j,$,G,te,ie,me,Z;const t=tb(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[t("--palette-focusVisible")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.focusVisible} !important`,[t("--palette-background-body")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.body} !important`,[t("--palette-background-surface")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.surface} !important`,[t("--palette-background-popup")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.popup} !important`,[t("--palette-background-level1")]:`${(m=e.colorSchemes.light)==null?void 0:m.palette.background.level1} !important`,[t("--palette-background-level2")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.level2} !important`,[t("--palette-background-level3")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.background.level3} !important`,[t("--palette-text-primary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.primary} !important`,[t("--palette-text-secondary")]:`${(T=e.colorSchemes.light)==null?void 0:T.palette.text.secondary} !important`,[t("--palette-text-tertiary")]:`${(z=e.colorSchemes.light)==null?void 0:z.palette.text.tertiary} !important`,[t("--palette-divider")]:`${(P=e.colorSchemes.light)==null?void 0:P.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[t("--palette-focusVisible")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.focusVisible} !important`,[t("--palette-background-body")]:`${(H=e.colorSchemes.dark)==null?void 0:H.palette.background.body} !important`,[t("--palette-background-surface")]:`${(W=e.colorSchemes.dark)==null?void 0:W.palette.background.surface} !important`,[t("--palette-background-popup")]:`${(J=e.colorSchemes.dark)==null?void 0:J.palette.background.popup} !important`,[t("--palette-background-level1")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.background.level1} !important`,[t("--palette-background-level2")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.level2} !important`,[t("--palette-background-level3")]:`${(G=e.colorSchemes.dark)==null?void 0:G.palette.background.level3} !important`,[t("--palette-text-primary")]:`${(te=e.colorSchemes.dark)==null?void 0:te.palette.text.primary} !important`,[t("--palette-text-secondary")]:`${(ie=e.colorSchemes.dark)==null?void 0:ie.palette.text.secondary} !important`,[t("--palette-text-tertiary")]:`${(me=e.colorSchemes.dark)==null?void 0:me.palette.text.tertiary} !important`,[t("--palette-divider")]:`${(Z=e.colorSchemes.dark)==null?void 0:Z.palette.divider} !important`}}};function JO(e){return e.theme!==void 0}const JP=e=>t=>{const r=JO(t)?t.theme:t,o=Kx(r.cssVarPrefix),l=tb(r.cssVarPrefix),d=m=>{const c=m.split("-");return o(m,r.palette[c[1]][c[2]])};return{[KP]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[l("--palette-focusVisible")]:d(`palette-${e}-200`),[l("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[l("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[l("--palette-background-popup")]:d(`palette-${e}-700`),[l("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[l("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[l("--palette-text-primary")]:d("palette-common-white"),[l("--palette-text-secondary")]:d(`palette-${e}-200`),[l("--palette-text-tertiary")]:d(`palette-${e}-300`),[l("--palette-text-icon")]:d(`palette-${e}-200`),[l("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${ed}]`]:XP(r)}},YP=e=>t=>{const{theme:r=t}=t,o=Kx(r.cssVarPrefix),l=tb(r.cssVarPrefix),d=m=>{const c=m.split("-");return o(m,r.palette[c[1]][c[2]])};return{[KP]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[l("--palette-focusVisible")]:d(`palette-${e}-300`),[l("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[l("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[l("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[l("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[l("--palette-text-primary")]:d(`palette-${e}-100`),[l("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[l("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[l("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[l("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[l("--palette-focusVisible")]:d(`palette-${e}-500`),[l("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[l("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[l("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[l("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[l("--palette-text-primary")]:d(`palette-${e}-700`),[l("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[l("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[l("--palette-text-icon")]:d(`palette-${e}-500`),[l("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${ed}]`]:XP(r)}},QP=cd(ae.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),YO=cd(ae.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),eE=O.createContext(void 0);function Yl(e,t){let r=t,o=e;return e==="outlined"&&(r="neutral",o="plain"),e==="plain"&&(r="neutral"),{variant:o,color:r}}function tE(e,t,r=!1){const o=O.useContext(eE),[l,d]=typeof o=="string"?o.split(":"):[],m=Yl(l||void 0,d||void 0);return m.variant=e||m.variant,m.color=t||(r?d:m.color),m}function rb({children:e,color:t,variant:r}){return ae.jsx(eE.Provider,{value:`${r||""}:${t||""}`,children:e})}function QO(e){return Qr("MuiIconButton",e)}Hr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const eF=O.createContext({}),rE=eF,tF=O.createContext(void 0),nE=tF;function rF(e){return Qr("MuiCircularProgress",e)}Hr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const nF=["color","backgroundColor"],iF=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],oF=Yk({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),aF=e=>{const{determinate:t,color:r,variant:o,size:l}=e,d={root:["root",t&&"determinate",r&&`color${Ft(r)}`,o&&`variant${Ft(o)}`,l&&`size${Ft(l)}`],svg:["svg"],track:["track"],progress:["progress"]};return Kr(d,rF,{})};function su(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const sF=gt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var m,c,b,w;const r=((m=t.variants[e.variant])==null?void 0:m[e.color])||{},{color:o,backgroundColor:l}=r,d=qt(r,nF);return K({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":l,"--CircularProgress-progressColor":o,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":su("track","3px"),"--_progress-thickness":su("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":su("track","6px"),"--_progress-thickness":su("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":su("track","8px"),"--_progress-thickness":su("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:o},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},d,e.variant==="outlined"&&{"&::before":K({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},d)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(c=t.variants.solid)==null?void 0:c[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(b=t.variants.softHover)==null?void 0:b[e.color].backgroundColor,"--CircularProgress-progressColor":(w=t.variants.solid)==null?void 0:w[e.color].backgroundColor})}),lF=gt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),cF=gt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),uF=gt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&$x`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${oF};
    `),dF=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyCircularProgress"}),{children:l,className:d,color:m="primary",size:c="md",variant:b="soft",thickness:w,determinate:T=!1,value:z=T?0:25,component:P,slots:U={},slotProps:H={}}=o,W=qt(o,iF),J=K({},o,{color:m,size:c,variant:b,thickness:w,value:z,determinate:T,instanceSize:t.size}),j=aF(J),$=K({},W,{component:P,slots:U,slotProps:H}),[G,te]=jt("root",{ref:r,className:ji(j.root,d),elementType:sF,externalForwardedProps:$,ownerState:J,additionalProps:K({role:"progressbar",style:{"--CircularProgress-percent":z}},z&&T&&{"aria-valuenow":Math.round(typeof z=="number"?z:Number(z||0))})}),[ie,me]=jt("svg",{className:j.svg,elementType:lF,externalForwardedProps:$,ownerState:J}),[Z,de]=jt("track",{className:j.track,elementType:cF,externalForwardedProps:$,ownerState:J}),[Te,ve]=jt("progress",{className:j.progress,elementType:uF,externalForwardedProps:$,ownerState:J});return ae.jsxs(G,K({},te,{children:[ae.jsxs(ie,K({},me,{children:[ae.jsx(Z,K({},de)),ae.jsx(Te,K({},ve))]})),l]}))}),iE=dF,hF=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],pF=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,size:d,variant:m,loading:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&`variant${Ft(m)}`,t&&`color${Ft(t)}`,d&&`size${Ft(d)}`,c&&"loading"],loadingIndicator:["loadingIndicator"]},w=Kr(b,QO,{});return o&&l&&(w.root+=` ${l}`),w},Yp=gt("button")(({theme:e,ownerState:t})=>{var r,o,l,d;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:K({"--Icon-color":"currentColor"},e.focus.default)}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":K({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':K({"--Icon-color":"currentColor"},(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),fF=gt(Yp,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),mF=gt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o,l,d;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(o=(r=e.variants[t.variant])==null?void 0:r[t.color])==null?void 0:o.color},t.disabled&&{color:(d=(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])==null?void 0:d.color})}),oE=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyIconButton"}),{children:l,action:d,component:m="button",color:c="neutral",disabled:b,variant:w="plain",loading:T=!1,loadingIndicator:z,size:P="md",slots:U={},slotProps:H={}}=o,W=qt(o,hF),J=O.useContext(rE),j=O.useContext(nE),$=t.variant||J.variant||w,G=t.size||J.size||P,te=t.color||J.color||c,ie=(t.loading||t.disabled)??(J.disabled||T||b),me=O.useRef(null),Z=cn(me,r),{focusVisible:de,setFocusVisible:Te,getRootProps:ve}=Sl(K({},o,{disabled:ie,rootRef:Z})),De=z??ae.jsx(iE,{color:te,thickness:{sm:2,md:3,lg:4}[G]||3});O.useImperativeHandle(d,()=>({focusVisible:()=>{var dt;Te(!0),(dt=me.current)==null||dt.focus()}}),[Te]);const ke=K({},o,{component:m,color:te,disabled:ie,variant:$,loading:T,size:G,focusVisible:de,instanceSize:t.size}),Ee=pF(ke),He=dt=>{var mt;let vt=o.onClick;typeof H.root=="function"?vt=H.root(ke).onClick:H.root&&(vt=H.root.onClick),vt==null||vt(dt),j&&((mt=j.onClick)==null||mt.call(j,dt,o.value))};let Fe=o["aria-pressed"];typeof H.root=="function"?Fe=H.root(ke)["aria-pressed"]:H.root&&(Fe=H.root["aria-pressed"]),j!=null&&j.value&&(Array.isArray(j.value)?Fe=j.value.indexOf(o.value)!==-1:Fe=j.value===o.value);const Ae=K({},W,{component:m,slots:U,slotProps:H}),[Ge,Re]=jt("root",{ref:r,className:Ee.root,elementType:fF,getSlotProps:ve,externalForwardedProps:Ae,ownerState:ke,additionalProps:{onClick:He,"aria-pressed":Fe}}),[Ze,Je]=jt("loadingIndicator",{className:Ee.loadingIndicator,elementType:mF,externalForwardedProps:Ae,ownerState:ke});return ae.jsx(Ge,K({},Re,{children:T?ae.jsx(Ze,K({},Je,{children:De})):l}))});oE.muiName="IconButton";const aE=oE;function gF(e){return Qr("MuiChip",e)}const yF=Hr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),ax=yF,vF=O.createContext({disabled:void 0,variant:void 0,color:void 0}),sE=vF,_F=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],xF=e=>{const{disabled:t,size:r,color:o,clickable:l,variant:d,focusVisible:m}=e,c={root:["root",t&&"disabled",o&&`color${Ft(o)}`,r&&`size${Ft(r)}`,d&&`variant${Ft(d)}`,l&&"clickable"],action:["action",t&&"disabled",m&&"focusVisible"],label:["label",r&&`label${Ft(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Kr(c,gF,{})},bF=gt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var l,d,m,c;const r=(l=e.variants[t.variant])==null?void 0:l[t.color],{borderRadius:o}=Jp({theme:e,ownerState:t},["borderRadius"]);return[K({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${ax.disabled}`]:{color:(m=(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color])==null?void 0:m.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:r==null?void 0:r.color}]:[K({backgroundColor:e.vars.palette.background.surface},r,{[`&.${ax.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color]})],o!==void 0&&{"--_Chip-radius":o}]}),wF=gt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),SF=gt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,l,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},K({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]}},{"&:active":(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]},{[`&.${ax.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),CF=gt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),kF=gt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),TF=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyChip"}),{children:l,className:d,color:m="neutral",onClick:c,disabled:b=!1,size:w="md",variant:T="soft",startDecorator:z,endDecorator:P,component:U,slots:H={},slotProps:W={}}=o,J=qt(o,_F),j=!!c||!!W.action,$=K({},o,{disabled:b,size:w,color:m,variant:T,clickable:j,focusVisible:!1}),G=typeof W.action=="function"?W.action($):W.action,te=O.useRef(null),{focusVisible:ie,getRootProps:me}=Sl(K({},G,{disabled:b,rootRef:te}));$.focusVisible=ie;const Z=xF($),de=K({},J,{component:U,slots:H,slotProps:W}),[Te,ve]=jt("root",{ref:r,className:ji(Z.root,d),elementType:bF,externalForwardedProps:de,ownerState:$}),[De,ke]=jt("label",{className:Z.label,elementType:wF,externalForwardedProps:de,ownerState:$}),Ee=La(ke.id),[He,Fe]=jt("action",{className:Z.action,elementType:SF,externalForwardedProps:de,ownerState:$,getSlotProps:me,additionalProps:{"aria-labelledby":Ee,as:G==null?void 0:G.component,onClick:c}}),[Ae,Ge]=jt("startDecorator",{className:Z.startDecorator,elementType:CF,externalForwardedProps:de,ownerState:$}),[Re,Ze]=jt("endDecorator",{className:Z.endDecorator,elementType:kF,externalForwardedProps:de,ownerState:$}),Je=O.useMemo(()=>({disabled:b}),[b]);return ae.jsx(sE.Provider,{value:Je,children:ae.jsx(rb,{variant:T,color:m,children:ae.jsxs(Te,K({},ve,{children:[j&&ae.jsx(He,K({},Fe)),ae.jsx(De,K({},ke,{id:Ee,children:l})),z&&ae.jsx(Ae,K({},Ge,{children:z})),P&&ae.jsx(Re,K({},Ze,{children:P}))]}))})})}),IF=TF,PF=cd(ae.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function EF(e){return Qr("MuiChipDelete",e)}Hr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var eC;const zF=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],AF=["onDelete"],MF=e=>{const{focusVisible:t,variant:r,color:o,disabled:l}=e,d={root:["root",l&&"disabled",t&&"focusVisible",r&&`variant${Ft(r)}`,o&&`color${Ft(o)}`]};return Kr(d,EF,{})},DF=gt(Yp,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),RF=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyChipDelete"}),{children:l,variant:d="plain",color:m="neutral",disabled:c,onKeyDown:b,onDelete:w,onClick:T,component:z,slots:P={},slotProps:U={}}=o,H=qt(o,zF),W=O.useContext(sE),{variant:J=d,color:j=m}=tE(t.variant,t.color,!0),$=t.color||j,G=c??W.disabled,te=O.useRef(null),ie=cn(te,r),{focusVisible:me,getRootProps:Z}=Sl(K({},o,{disabled:G,rootRef:ie})),de=K({},o,{disabled:G,variant:J,color:$,focusVisible:me}),Te=MF(de),ve=K({},H,{component:z,slots:P,slotProps:U}),De=Ae=>{!G&&w&&w(Ae),T&&T(Ae)},ke=Ae=>{["Backspace","Enter","Delete"].includes(Ae.key)&&(Ae.preventDefault(),!G&&w&&w(Ae)),b&&b(Ae)},[Ee,He]=jt("root",{ref:r,elementType:DF,getSlotProps:Z,externalForwardedProps:ve,ownerState:de,additionalProps:{as:z,onKeyDown:ke,onClick:De},className:Te.root}),Fe=qt(He,AF);return ae.jsx(Ee,K({},Fe,{children:l??(eC||(eC=ae.jsx(PF,{})))}))}),LF=RF;function $F(e){return Qr("MuiInput",e)}const BF=Hr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),lE=BF,OF=O.createContext(void 0),Ky=OF,FF=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function NF(e,t){const r=O.useContext(Ky),{"aria-describedby":o,"aria-label":l,"aria-labelledby":d,autoComplete:m,autoFocus:c,className:b,defaultValue:w,disabled:T,disabledInProp:z,error:P,id:U,name:H,onClick:W,onChange:J,onKeyDown:j,onKeyUp:$,onFocus:G,onBlur:te,placeholder:ie,readOnly:me,required:Z,type:de,value:Te}=e,ve=qt(e,FF),{getRootProps:De,getInputProps:ke,focused:Ee,error:He,disabled:Fe}=o3({disabled:z??(r==null?void 0:r.disabled)??T,defaultValue:w,error:P,onBlur:te,onClick:W,onChange:J,onFocus:G,required:Z??(r==null?void 0:r.required),value:Te}),Ae={[t.disabled]:Fe,[t.error]:He,[t.focused]:Ee,[t.formControl]:!!r,[b]:b},Ge={[t.disabled]:Fe};return K({formControl:r,propsToForward:{"aria-describedby":o,"aria-label":l,"aria-labelledby":d,autoComplete:m,autoFocus:c,disabled:Fe,id:U,onKeyDown:j,onKeyUp:$,name:H,placeholder:ie,readOnly:me,type:de},rootStateClasses:Ae,inputStateClasses:Ge,getRootProps:De,getInputProps:ke,focused:Ee,error:He,disabled:Fe},ve)}const jF=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],VF=e=>{const{disabled:t,fullWidth:r,variant:o,color:l,size:d}=e,m={root:["root",t&&"disabled",r&&"fullWidth",o&&`variant${Ft(o)}`,l&&`color${Ft(l)}`,d&&`size${Ft(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Kr(m,$F,{})},cE=gt("div")(({theme:e,ownerState:t})=>{var o,l,d,m,c;const r=(o=e.variants[`${t.variant}`])==null?void 0:o[t.color];return[K({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(l=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:l[500],[`&:not([${ed}])`]:K({},t.instanceColor&&{"--_Input-focusedHighlight":(d=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:d[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],r,{backgroundColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":K({},(m=e.variants[`${t.variant}Hover`])==null?void 0:m[t.color],{backgroundColor:null}),[`&.${lE.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),uE=gt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":K({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),dE=gt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),hE=gt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),UF=gt(cE,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),HF=gt(uE,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),WF=gt(dE,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),GF=gt(hE,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),qF=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyInput"}),l=NF(K({},o,{disabledInProp:t.disabled}),lE),{propsToForward:d,rootStateClasses:m,inputStateClasses:c,getRootProps:b,getInputProps:w,formControl:T,focused:z,error:P=!1,disabled:U,fullWidth:H=!1,size:W="md",color:J="neutral",variant:j="outlined",startDecorator:$,endDecorator:G,component:te,slots:ie={},slotProps:me={}}=l,Z=qt(l,jF),de=t.error??(T==null?void 0:T.error)??P,Te=t.size??(T==null?void 0:T.size)??W,ve=t.color??(de?"danger":(T==null?void 0:T.color)??J),De=K({instanceColor:de?"danger":t.color},o,{fullWidth:H,color:ve,disabled:U,error:de,focused:z,size:Te,variant:j}),ke=VF(De),Ee=K({},Z,{component:te,slots:ie,slotProps:me}),[He,Fe]=jt("root",{ref:r,className:[ke.root,m],elementType:UF,getSlotProps:b,externalForwardedProps:Ee,ownerState:De}),[Ae,Ge]=jt("input",K({},T&&{additionalProps:{id:T.htmlFor,"aria-describedby":T["aria-describedby"]}},{className:[ke.input,c],elementType:HF,getSlotProps:w,internalForwardedProps:d,externalForwardedProps:Ee,ownerState:De})),[Re,Ze]=jt("startDecorator",{className:ke.startDecorator,elementType:WF,externalForwardedProps:Ee,ownerState:De}),[Je,dt]=jt("endDecorator",{className:ke.endDecorator,elementType:GF,externalForwardedProps:Ee,ownerState:De});return ae.jsxs(He,K({},Fe,{children:[$&&ae.jsx(Re,K({},Ze,{children:$})),ae.jsx(Ae,K({},Ge)),G&&ae.jsx(Je,K({},dt,{children:G}))]}))}),ZF=qF;function KF(e){return Qr("MuiListSubheader",e)}Hr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const XF=["component","className","children","id","sticky","variant","color","slots","slotProps"],JF=e=>{const{variant:t,color:r,sticky:o}=e,l={root:["root",o&&"sticky",r&&`color${Ft(r)}`,t&&`variant${Ft(t)}`]};return Kr(l,KF,{})},YF=gt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;return K({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${ed}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(o=e.variants[t.variant])==null?void 0:o[t.color])}),QF=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyListSubheader"}),{component:l,className:d,children:m,id:c,sticky:b=!1,variant:w,color:T,slots:z={},slotProps:P={}}=o,U=qt(o,XF),H=La(c),W=O.useContext(qP);O.useEffect(()=>{W&&W(H||"")},[W,H]);const J=K({instanceColor:t.color},o,{id:H,sticky:b,variant:w,color:w?T??"neutral":T}),j=JF(J),$=K({},U,{component:l,slots:z,slotProps:P}),[G,te]=jt("root",{ref:r,className:ji(j.root,d),elementType:YF,externalForwardedProps:$,ownerState:J,additionalProps:{as:l,id:H}});return ae.jsx(G,K({},te,{children:m}))}),e6=QF;function t6(e){return Qr("MuiAutocomplete",e)}const r6=Hr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),al=r6,pE=gt(Gy)(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},eb,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${Lg.nested}, & .${Lg.nested} .${BO.root}`]:{position:"initial"}})});gt(pE,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});const fE=gt(Zy)(({theme:e,ownerState:t})=>{var r,o;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':K({},(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],{fontWeight:e.vars.fontWeight.md})}});gt(fE,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({});var tC,rC;const n6=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],i6=["onDelete"],o6=["onBlur","onFocus","onMouseDown"],a6=e=>e.current!==null&&e.current.contains(document.activeElement),s6=e=>e.label??e,l6=e=>`+${e}`,c6=e=>ae.jsxs(Hy,{nested:!0,children:[ae.jsx(e6,{sticky:!0,children:e.group}),ae.jsx(qy,{children:e.children})]},e.key),u6=e=>{const{disabled:t,focused:r,hasClearIcon:o,hasPopupIcon:l,popupOpen:d,variant:m,color:c,size:b,multiple:w}=e,T={root:["root",r&&"focused",o&&"hasClearIcon",l&&"hasPopupIcon",m&&`variant${Ft(m)}`,c&&`color${Ft(c)}`,b&&`size${Ft(b)}`],wrapper:["wrapper",w&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Kr(T,t6,{})},d6=gt(cE,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${al.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),h6=gt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${al.multiple}`]:K({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),p6=gt(uE,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>K({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),f6=gt(dE,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),m6=gt(hE,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>K({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),g6=gt(Yp,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>K({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),y6=gt(Yp,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${al.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),v6=gt(pE,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),_6=gt(fE,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),x6=gt(Hy,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),b6=gt(Hy,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),w6=gt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),S6=O.forwardRef(function(t,r){var Xt;const o=en({props:t,name:"JoyAutocomplete"}),{"aria-describedby":l,"aria-label":d,"aria-labelledby":m,autoFocus:c,clearIcon:b=tC||(tC=ae.jsx(QP,{fontSize:"md"})),clearText:w="Clear",closeText:T="Close",disableClearable:z=!1,disabled:P,endDecorator:U,error:H=!1,forcePopupIcon:W="auto",freeSolo:J=!1,getLimitTagsText:j=l6,getOptionLabel:$=s6,groupBy:G,id:te,limitTags:ie=-1,loading:me=!1,loadingText:Z="Loading",multiple:de=!1,name:Te,noOptionsText:ve="No options",openText:De="Open",placeholder:ke,popupIcon:Ee=rC||(rC=ae.jsx(YO,{})),readOnly:He=!1,renderGroup:Fe=c6,renderOption:Ae,renderTags:Ge,required:Re,type:Ze,startDecorator:Je,size:dt="md",color:vt="neutral",variant:mt="outlined",component:Ct,slots:zt={},slotProps:Zt={}}=o,kt=qt(o,n6),$e=O.useContext(Ky),rt=t.error??($e==null?void 0:$e.error)??H,ht=t.size??($e==null?void 0:$e.size)??dt,At=t.color??(rt?"danger":($e==null?void 0:$e.color)??vt),Et=P??($e==null?void 0:$e.disabled)??!1,{getRootProps:gr,getInputProps:Cr,getPopupIndicatorProps:lr,getClearProps:yt,getTagProps:Mr,getListboxProps:er,getOptionProps:Lr,value:Pe,dirty:cr,popupOpen:ir,focused:Bt,focusedTag:Gt,anchorEl:kr,setAnchorEl:Pr,inputValue:sr,groupedOptions:nr}=_O(K({},o,{id:te??($e==null?void 0:$e.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:a6})),{onMouseDown:rr}=Cr(),{onClick:Dr}=gr(),it=!z&&!Et&&cr&&!He,Le=(!J||W===!0)&&W!==!1,Ht=K({instanceColor:t.color},o,{value:Pe,disabled:Et,focused:Bt,getOptionLabel:$,hasOptions:!!nr.length,hasClearIcon:it,hasPopupIcon:Le,inputFocused:Gt===-1,popupOpen:ir,size:ht,color:At,variant:mt}),Mt=u6(Ht),_r=K({},kt,{component:Ct,slots:zt,slotProps:Zt});let xr;if(de&&Pe.length>0){const Tt=Vr=>{const dr=Mr(Vr),{onDelete:zn}=dr,oo=qt(dr,i6);return K({disabled:Et,size:ht,onClick:zn},oo)};Ge?xr=Ge(Pe,Tt,Ht):xr=Pe.map((Vr,dr)=>ae.jsx(IF,{size:ht,variant:"soft",color:"neutral",endDecorator:ae.jsx(LF,K({},Tt({index:dr}))),sx:{minWidth:0},children:$(Vr)},dr))}const Qe=cn(r,Pr),Kt={[al.disabled]:Et,[al.error]:rt,[al.focused]:Bt,[al.formControl]:!!$e},[Rt,ar]=jt("root",{ref:Qe,className:[Mt.root,Kt],elementType:d6,externalForwardedProps:_r,ownerState:Ht,getSlotProps:gr,additionalProps:{onClick:Tt=>{Dr&&Dr(Tt),Tt.currentTarget===Tt.target&&rr&&rr(Tt)}}}),[jr,Jt]=jt("wrapper",{className:Mt.wrapper,elementType:h6,externalForwardedProps:_r,ownerState:Ht}),mn={[al.disabled]:Et},[ue,M]=jt("input",{className:[Mt.input,mn],elementType:p6,getSlotProps:Tt=>{const Vr=Cr(),{onBlur:dr,onFocus:zn,onMouseDown:oo}=Vr,Tr=qt(Vr,o6);return K({},Tr,{onBlur:ao=>{var Ui;dr==null||dr(ao),(Ui=Tt.onBlur)==null||Ui.call(Tt,ao)},onFocus:ao=>{var Ui;zn==null||zn(ao),(Ui=Tt.onFocus)==null||Ui.call(Tt,ao)},onMouseDown:ao=>{var Ui;oo==null||oo(ao),(Ui=Tt.onMouseDown)==null||Ui.call(Tt,ao)}})},externalForwardedProps:_r,ownerState:Ht,additionalProps:{autoFocus:c,placeholder:ke,name:Te,readOnly:He,disabled:Et,required:Re??($e==null?void 0:$e.required),type:Ze,"aria-invalid":rt||void 0,"aria-label":d,"aria-labelledby":m,"aria-describedby":l??($e==null?void 0:$e["aria-describedby"])}}),[R,V]=jt("startDecorator",{className:Mt.startDecorator,elementType:f6,externalForwardedProps:_r,ownerState:Ht}),[Q,re]=jt("endDecorator",{className:Mt.endDecorator,elementType:m6,externalForwardedProps:_r,ownerState:Ht}),[xe,pe]=jt("clearIndicator",{className:Mt.clearIndicator,elementType:g6,getSlotProps:yt,externalForwardedProps:_r,ownerState:Ht,getSlotOwnerState:Tt=>({size:Tt.size||ht,variant:Tt.variant||Yl(mt,At).variant||"plain",color:Tt.color||Yl(mt,At).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":w,title:w}}),[ne,_e]=jt("popupIndicator",{className:Mt.popupIndicator,elementType:y6,getSlotProps:lr,externalForwardedProps:_r,ownerState:Ht,getSlotOwnerState:Tt=>({size:Tt.size||ht,variant:Tt.variant||Yl(mt,At).variant||"plain",color:Tt.color||Yl(mt,At).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Et,"aria-label":ir?T:De,title:ir?T:De,type:"button"}}),[ze,Ve]=jt("listbox",{className:Mt.listbox,elementType:v6,getSlotProps:er,externalForwardedProps:_r,ownerState:Ht,getSlotOwnerState:Tt=>({size:Tt.size||ht,variant:Tt.variant||mt,color:Tt.color||At,disableColorInversion:!Tt.disablePortal}),additionalProps:{anchorEl:kr,open:ir,style:kr?{width:kr.clientWidth}:{}}}),[We,Ye]=jt("loading",{className:Mt.loading,elementType:x6,externalForwardedProps:_r,ownerState:Ht}),[St,at]=jt("noOptions",{className:Mt.noOptions,elementType:b6,externalForwardedProps:_r,ownerState:Ht,additionalProps:{role:"presentation",onMouseDown:Tt=>{Tt.preventDefault()}}}),[Dt,Me]=jt("limitTag",{className:Mt.limitTag,elementType:w6,externalForwardedProps:_r,ownerState:Ht});if(ie>-1&&Array.isArray(xr)){const Tt=xr.length-ie;!Bt&&Tt>0&&(xr=xr.splice(0,ie),xr.push(ae.jsx(Dt,K({},Me,{children:j(Tt)}),xr.length)))}const[Oe,nt]=jt("option",{className:Mt.option,elementType:_6,externalForwardedProps:_r,ownerState:Ht,getSlotOwnerState:Tt=>({variant:Tt.variant||Yl(mt,At).variant||"plain",color:Tt.color||Yl(mt,At).color||"neutral",disableColorInversion:!Ve.disablePortal}),additionalProps:{as:"li"}}),_t=Ae||((Tt,Vr)=>ae.jsx(Oe,K({},Tt,{children:$(Vr)}))),ur=(Tt,Vr)=>{const dr=Lr({option:Tt,index:Vr});return _t(K({},nt,dr),Tt,{selected:!!dr["aria-selected"],inputValue:sr,ownerState:Ht})},tr=O.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...Ve.modifiers||[]],[Ve.modifiers]);let yr=null;return kr&&(yr=ae.jsx(rb,{variant:mt,color:At,children:ae.jsx(Wy,{nested:!0,children:ae.jsxs(ze,K({},Ve,{className:ji(Ve.className),modifiers:tr},!((Xt=o.slots)!=null&&Xt.listbox)&&{as:J1,slots:{root:Ve.as||"ul"}},{children:[nr.map((Tt,Vr)=>{if(G){const dr=Tt;return Fe({key:String(dr.key),group:dr.group,children:dr.options.map((zn,oo)=>ur(zn,dr.index+oo))})}return ur(Tt,Vr)}),me&&nr.length===0?ae.jsx(We,K({},Ye,{children:Z})):null,nr.length===0&&!J&&!me?ae.jsx(St,K({},at,{children:ve})):null]}))})})),ae.jsxs(O.Fragment,{children:[ae.jsxs(Rt,K({},ar,{children:[Je&&ae.jsx(R,K({},V,{children:Je})),ae.jsxs(jr,K({},Jt,{children:[xr,ae.jsx(ue,K({},M))]})),U&&ae.jsx(Q,K({},re,{children:U})),it?ae.jsx(xe,K({},pe,{children:b})):null,Le?ae.jsx(ne,K({},_e,{children:Ee})):null]})),yr]})}),sx=S6;function C6(e){return Qr("MuiTypography",e)}Hr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const k6=["color","textColor"],T6=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],lx=O.createContext(!1),I6=O.createContext(!1),P6=e=>{const{gutterBottom:t,noWrap:r,level:o,color:l,variant:d}=e,m={root:["root",o,t&&"gutterBottom",r&&"noWrap",l&&`color${Ft(l)}`,d&&`variant${Ft(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Kr(m,C6,{})},E6=gt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),z6=gt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),A6=gt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o,l,d,m;const r=t.level!=="inherit"?(o=e.typography[t.level])==null?void 0:o.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${r})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:K({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&K({display:"flex",alignItems:"center"},t.nesting&&K({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"?((l=e.typography[t.level])==null?void 0:l.fontSize)??"inherit":"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(m=e.variants[t.variant])==null?void 0:m[t.color]))}),nC={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Xy=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyTypography"}),{color:l,textColor:d}=o,m=qt(o,k6),c=O.useContext(lx),b=O.useContext(I6),w=uT(K({},m,{color:d})),{component:T,gutterBottom:z=!1,noWrap:P=!1,level:U="body-md",levelMapping:H=nC,children:W,endDecorator:J,startDecorator:j,variant:$,slots:G={},slotProps:te={}}=w,ie=qt(w,T6),me=t.color??($?l??"neutral":l),Z=c||b?t.level||"inherit":U,de=_T(W,["Skeleton"]),Te=T||(c?"span":H[Z]||nC[Z]||"span"),ve=K({},w,{level:Z,component:Te,color:me,gutterBottom:z,noWrap:P,nesting:c,variant:$,unstable_hasSkeleton:de}),De=P6(ve),ke=K({},ie,{component:Te,slots:G,slotProps:te}),[Ee,He]=jt("root",{ref:r,className:De.root,elementType:A6,externalForwardedProps:ke,ownerState:ve}),[Fe,Ae]=jt("startDecorator",{className:De.startDecorator,elementType:E6,externalForwardedProps:ke,ownerState:ve}),[Ge,Re]=jt("endDecorator",{className:De.endDecorator,elementType:z6,externalForwardedProps:ke,ownerState:ve});return ae.jsx(lx.Provider,{value:!0,children:ae.jsxs(Ee,K({},He,{children:[j&&ae.jsx(Fe,K({},Ae,{children:j})),de?O.cloneElement(W,{variant:W.props.variant||"inline"}):W,J&&ae.jsx(Ge,K({},Re,{children:J}))]}))})});Xy.muiName="Typography";function M6(e){return Qr("MuiButton",e)}const D6=Hr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),iC=D6,R6=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],L6=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,fullWidth:d,size:m,variant:c,loading:b}=e,w={root:["root",r&&"disabled",o&&"focusVisible",d&&"fullWidth",c&&`variant${Ft(c)}`,t&&`color${Ft(t)}`,m&&`size${Ft(m)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},T=Kr(w,M6,{});return o&&l&&(T.root+=` ${l}`),T},$6=gt("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),B6=gt("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),O6=gt("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o,l,d;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(o=(r=e.variants[t.variant])==null?void 0:r[t.color])==null?void 0:o.color},t.disabled&&{color:(d=(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])==null?void 0:d.color})}),F6=({theme:e,ownerState:t})=>{var r,o,l,d;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color],[`&.${iC.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${iC.loading}`]:{color:"transparent"}})]},N6=gt("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(F6),mE=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyButton"}),{children:l,action:d,color:m="primary",variant:c="solid",size:b="md",fullWidth:w=!1,startDecorator:T,endDecorator:z,loading:P=!1,loadingPosition:U="center",loadingIndicator:H,disabled:W,component:J,slots:j={},slotProps:$={}}=o,G=qt(o,R6),te=O.useContext(rE),ie=O.useContext(nE),me=t.variant||te.variant||c,Z=t.size||te.size||b,de=t.color||te.color||m,Te=(t.loading||t.disabled)??(te.disabled||P||W),ve=O.useRef(null),De=cn(ve,r),{focusVisible:ke,setFocusVisible:Ee,getRootProps:He}=Sl(K({},o,{disabled:Te,rootRef:De})),Fe=H??ae.jsx(iE,{color:de,thickness:{sm:2,md:3,lg:4}[Z]||3});O.useImperativeHandle(d,()=>({focusVisible:()=>{var rt;Ee(!0),(rt=ve.current)==null||rt.focus()}}),[Ee]);const Ae=K({},o,{color:de,fullWidth:w,variant:me,size:Z,focusVisible:ke,loading:P,loadingPosition:U,disabled:Te}),Ge=L6(Ae),Re=rt=>{var At;let ht=o.onClick;typeof $.root=="function"?ht=$.root(Ae).onClick:$.root&&(ht=$.root.onClick),ht==null||ht(rt),ie&&((At=ie.onClick)==null||At.call(ie,rt,o.value))};let Ze=o["aria-pressed"];typeof $.root=="function"?Ze=$.root(Ae)["aria-pressed"]:$.root&&(Ze=$.root["aria-pressed"]),ie!=null&&ie.value&&(Array.isArray(ie.value)?Ze=ie.value.indexOf(o.value)!==-1:Ze=ie.value===o.value);const Je=K({},G,{component:J,slots:j,slotProps:$}),[dt,vt]=jt("root",{ref:r,className:Ge.root,elementType:N6,externalForwardedProps:Je,getSlotProps:He,ownerState:Ae,additionalProps:{onClick:Re,"aria-pressed":Ze}}),[mt,Ct]=jt("startDecorator",{className:Ge.startDecorator,elementType:$6,externalForwardedProps:Je,ownerState:Ae}),[zt,Zt]=jt("endDecorator",{className:Ge.endDecorator,elementType:B6,externalForwardedProps:Je,ownerState:Ae}),[kt,$e]=jt("loadingIndicatorCenter",{className:Ge.loadingIndicatorCenter,elementType:O6,externalForwardedProps:Je,ownerState:Ae});return ae.jsxs(dt,K({},vt,{children:[(T||P&&U==="start")&&ae.jsx(mt,K({},Ct,{children:P&&U==="start"?Fe:T})),l,P&&U==="center"&&ae.jsx(kt,K({},$e,{children:Fe})),(z||P&&U==="end")&&ae.jsx(zt,K({},Zt,{children:P&&U==="end"?Fe:z}))]}))});mE.muiName="Button";const j6=mE,gE=Hr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function V6(e){return Qr("MuiDivider",e)}Hr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const yE=gt("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${gE.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));gt(yE,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const U6=Hr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]),H6=U6;function W6(e){return Qr("MuiCheckbox",e)}const G6=Hr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),lc=G6,q6=cd(ae.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),Z6=cd(ae.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),K6=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],X6=e=>{const{checked:t,disabled:r,disableIcon:o,focusVisible:l,color:d,variant:m,size:c,indeterminate:b}=e,w={root:["root",t&&"checked",r&&"disabled",l&&"focusVisible",m&&`variant${Ft(m)}`,d&&`color${Ft(d)}`,c&&`size${Ft(c)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",o&&r&&"disabled",l&&"focusVisible"],input:["input"],label:["label"]};return Kr(w,W6,{})},J6=gt("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,l,d,m,c;return K({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${lc.disabled}`]:{color:(o=(r=t.variants.plainDisabled)==null?void 0:r[e.color])==null?void 0:o.color}},e.disableIcon&&{color:(d=(l=t.variants[e.variant])==null?void 0:l[e.color])==null?void 0:d.color,[`&.${lc.disabled}`]:{color:(c=(m=t.variants[`${e.variant}Disabled`])==null?void 0:m[e.color])==null?void 0:c.color}})}),Y6=gt("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var o,l,d,m;const r=(o=e.variants[`${t.variant}`])==null?void 0:o[t.color];return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${lc.checked}, &.${lc.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[K({},r,{backgroundColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(l=e.variants[`${t.variant}Hover`])==null?void 0:l[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${lc.disabled}`]:(m=e.variants[`${t.variant}Disabled`])==null?void 0:m[t.color]}]]}),Q6=gt("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,l,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},{"&:active":(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]},{[`&.${lc.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),eN=gt("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),tN=gt("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),rN=ae.jsx(q6,{}),nN=ae.jsx(Z6,{}),iN=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyCheckbox"}),{checked:l,uncheckedIcon:d,checkedIcon:m=rN,label:c,defaultChecked:b,disabled:w,disableIcon:T=!1,overlay:z,id:P,indeterminate:U=!1,indeterminateIcon:H=nN,name:W,onBlur:J,onChange:j,onFocus:$,onFocusVisible:G,readOnly:te,required:ie,value:me,color:Z,variant:de,size:Te="md",component:ve,slots:De={},slotProps:ke={}}=o,Ee=qt(o,K6),He=O.useContext(Ky),Fe=t.disabled??(He==null?void 0:He.disabled)??w,Ae=t.size??(He==null?void 0:He.size)??Te,Ge=La(P??(He==null?void 0:He.htmlFor)),Re={checked:l,defaultChecked:b,disabled:Fe,onBlur:J,onChange:j,onFocus:$,onFocusVisible:G},{getInputProps:Ze,checked:Je,disabled:dt,focusVisible:vt}=sO(Re),mt=Je||U,Zt=mt?de||"solid":de||"outlined",kt=t.color||(He!=null&&He.error?"danger":(He==null?void 0:He.color)??Z),ht=K({},o,{checked:Je,disabled:dt,disableIcon:T,overlay:z,focusVisible:vt,color:mt?kt||"primary":kt||"neutral",variant:Zt,size:Ae}),At=X6(ht),Et=K({},Ee,{component:ve,slots:De,slotProps:ke}),[gr,Cr]=jt("root",{ref:r,className:At.root,elementType:J6,externalForwardedProps:Et,ownerState:ht}),[lr,yt]=jt("checkbox",{className:At.checkbox,elementType:Y6,externalForwardedProps:Et,ownerState:ht}),[Mr,er]=jt("action",{className:At.action,elementType:Q6,externalForwardedProps:Et,ownerState:ht}),[Lr,Pe]=jt("input",{additionalProps:K({id:Ge,name:W,value:me,readOnly:te,role:void 0,required:ie??(He==null?void 0:He.required),"aria-describedby":He==null?void 0:He["aria-describedby"]},U&&{"aria-checked":"mixed"}),className:At.input,elementType:eN,externalForwardedProps:Et,getSlotProps:Ze,ownerState:ht}),[cr,ir]=jt("label",{additionalProps:{htmlFor:Ge},className:At.label,elementType:tN,externalForwardedProps:Et,ownerState:ht});let Bt=d;return T?Bt=null:U?Bt=H:Je&&(Bt=m),ae.jsxs(gr,K({},Cr,{children:[ae.jsxs(lr,K({},yt,{children:[ae.jsx(Mr,K({},er,{children:ae.jsx(Lr,K({},Pe))})),Bt]})),c&&ae.jsx(lx.Provider,{value:!0,children:ae.jsx(cr,K({},ir,{children:c}))})]}))}),zp=iN;function oN(e){const{children:t,disableColorScheme:r=!1}=e;return ae.jsxs(O.Fragment,{children:[ae.jsx($5,{styles:o=>{var m,c,b;const l={};r||Object.entries(o.colorSchemes).forEach(([w,T])=>{var z;l[o.getColorSchemeSelector(w).replace(/\s*&/,"")]={colorScheme:(z=T.palette)==null?void 0:z.mode}});const d=((b=(c=(m=o.components)==null?void 0:m.JoyTypography)==null?void 0:c.defaultProps)==null?void 0:b.level)??"body-md";return K({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:K({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[d],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},l)},defaultTheme:Vp}),t]})}function aN(e){return Qr("MuiDialogContent",e)}Hr("MuiDialogContent",["root"]);const sN=O.createContext(void 0),Jy=sN;function lN(e){return Qr("MuiDialogTitle",e)}const cN=Hr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),vE=cN,uN=["component","children","orientation","slots","slotProps"],dN=()=>Kr({root:["root"]},aN,{}),hN=gt(yE,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${H6.root} > .${vE.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),pN=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyDialogContent"}),l=O.useContext(Jy),{component:d="div",children:m,orientation:c="vertical",slots:b={},slotProps:w={}}=o,T=qt(o,uN),z=K({},T,{component:d,slots:b,slotProps:w}),P=K({},o,{component:d,orientation:c}),U=dN(),[H,W]=jt("root",{ref:r,className:U.root,elementType:hN,externalForwardedProps:z,ownerState:P,additionalProps:{id:l==null?void 0:l.describedBy}});return ae.jsx(H,K({},W,{children:m}))}),_E=pN,fN=O.createContext(void 0),nb=fN,mN=["component","children","variant","color","level","slots","slotProps"],gN=e=>{const{level:t,color:r,variant:o}=e,l={root:["root",t,r&&`color${Ft(r)}`,o&&`variant${Ft(o)}`]};return Kr(l,lN,{})},yN=gt("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o,l;const r=t.level!=="inherit"?(o=e.typography[t.level])==null?void 0:o.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${r})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(l=e.variants[t.variant])==null?void 0:l[t.color]),{[`.${gE.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),vN={sm:"title-md",md:"title-lg",lg:"h4"},_N=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyDialogTitle"}),l=O.useContext(nb),d=O.useContext(Jy),{component:m="h2",children:c,variant:b,color:w,level:T=vN[l||"md"],slots:z={},slotProps:P={}}=o,U=qt(o,mN),H=t.color||(b?w??"neutral":w),W=K({},U,{component:m,slots:z,slotProps:P}),J=K({},o,{component:m,color:H,variant:b,level:T}),j=gN(J),[$,G]=jt("root",{ref:r,className:j.root,elementType:yN,externalForwardedProps:W,ownerState:J,additionalProps:{id:d==null?void 0:d.labelledBy}});return ae.jsx($,K({},G,{children:c}))}),xE=_N,xN=["className","children","component","inset","orientation","role","slots","slotProps"],bN=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${Ft(r)}`]};return Kr(o,V6,{})},bE=gt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>K({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?K({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),wE=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyDivider"}),{className:l,children:d,component:m=d!=null?"div":"hr",inset:c,orientation:b="horizontal",role:w=m!=="hr"?"separator":void 0,slots:T={},slotProps:z={}}=o,P=qt(o,xN),U=K({},o,{inset:c,role:w,orientation:b,component:m}),H=bN(U),W=K({},P,{component:m,slots:T,slotProps:z}),[J,j]=jt("root",{ref:r,className:ji(H.root,l),elementType:bE,externalForwardedProps:W,ownerState:U,additionalProps:K({as:m,role:w},w==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return ae.jsx(J,K({},j,{children:d}))});wE.muiName="Divider";const SE=wE,wN=O.createContext(void 0),CE=wN,kE=gt("div")(({ownerState:e,theme:t})=>K({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));gt(kE,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const TE=gt("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));gt(TE,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function SN(e){return Qr("MuiDrawer",e)}Hr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const CN=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],kN=e=>{const{open:t,variant:r,color:o,size:l}=e,d={root:["root",!t&&"hidden",r&&`variant${Ft(r)}`,o&&`color${Ft(o)}`,l&&`size${Ft(l)}`],backdrop:["backdrop"],content:["content"]};return Kr(d,SN,{})},TN=gt(kE,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),IN=gt(TE,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),PN=gt("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return K({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&JP(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&YP(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${vE.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),EN=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyDrawer"}),{children:l,anchor:d="left",container:m,disableAutoFocus:c=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:T=!1,disableRestoreFocus:z=!1,disableScrollLock:P=!1,hideBackdrop:U=!1,color:H="neutral",variant:W="plain",invertedColors:J=!1,size:j="md",onClose:$,open:G,component:te,slots:ie={},slotProps:me={}}=o,Z=qt(o,CN),de=K({},o,{anchor:d,disableAutoFocus:c,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:T,disableRestoreFocus:z,disableScrollLock:P,hideBackdrop:U,invertedColors:J,color:H,variant:W,size:j}),{getRootProps:Te,getBackdropProps:ve,rootRef:De,portalRef:ke,isTopModal:Ee}=FB(K({},de,{rootRef:r,children:null})),He=kN(de),Fe=K({},Z,{component:te,slots:ie,slotProps:me}),Ae=La(),Ge=La(),Re=O.useMemo(()=>({variant:W,color:H,labelledBy:Ae,describedBy:Ge}),[H,W,Ae,Ge]),[Ze,Je]=jt("root",{ref:De,className:He.root,elementType:TN,externalForwardedProps:Fe,getSlotProps:Te,ownerState:de}),[dt,vt]=jt("backdrop",{className:He.backdrop,elementType:IN,externalForwardedProps:Fe,getSlotProps:ve,ownerState:de}),[mt,Ct]=jt("content",{className:He.content,elementType:PN,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Ae,"aria-describedby":Ge},externalForwardedProps:Fe,ownerState:de});return ae.jsx(CE.Provider,{value:$,children:ae.jsx(nb.Provider,{value:j,children:ae.jsx(Jy.Provider,{value:Re,children:ae.jsx(MP,{ref:ke,container:m,disablePortal:T,children:ae.jsxs(Ze,K({},Je,{children:[U?null:ae.jsx(dt,K({},vt)),ae.jsx(r3,{disableEnforceFocus:b,disableAutoFocus:c,disableRestoreFocus:z,isEnabled:Ee,open:G,children:ae.jsx(mt,K({},Ct,{children:l}))})]}))})})})})}),IE=EN;function zN(e){return Qr("MuiListDivider",e)}Hr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const AN=["component","role","className","children","inset","orientation","slots","slotProps"],MN=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${Ft(r)}`]};return Kr(o,zN,{})},DN=gt(bE,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&K({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&K({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),RN=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyListDivider"}),l=O.useContext(Xp),d=O.useContext(Y1),{component:m,role:c,className:b,children:w,inset:T="context",orientation:z,slots:P={},slotProps:U={}}=o,H=qt(o,AN),[W]=(d==null?void 0:d.split(":"))||["",""],J=m||(W&&!W.match(/^(ul|ol|menu)$/)?"div":"li"),j=c||(J==="li"?"separator":void 0),$=z||(l?"vertical":"horizontal"),G=K({},o,{inset:T,row:l,orientation:$,component:J,role:j}),te=MN(G),ie=K({},H,{component:J,slots:P,slotProps:U}),[me,Z]=jt("root",{ref:r,className:ji(te.root,b),elementType:DN,externalForwardedProps:ie,ownerState:G,additionalProps:K({as:J,role:j},j==="separator"&&$==="vertical"&&{"aria-orientation":"vertical"})});return ae.jsx(me,K({},Z,{children:w}))}),PE=RN;function LN(e){return Qr("MuiModalClose",e)}Hr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var oC;const $N=["component","color","variant","size","onClick","slots","slotProps"],BN=e=>{const{variant:t,color:r,disabled:o,focusVisible:l,size:d}=e,m={root:["root",o&&"disabled",l&&"focusVisible",t&&`variant${Ft(t)}`,r&&`color${Ft(r)}`,d&&`size${Ft(d)}`]};return Kr(m,LN,{})},ON=gt(Yp,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o;return K({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((o=(r=t.variants[e.variant])==null?void 0:r[e.color])!=null&&o.backgroundColor)&&{color:t.vars.palette.text.secondary})}),FN={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},NN=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyModalClose"}),{component:l="button",color:d="neutral",variant:m="plain",size:c="md",onClick:b,slots:w={},slotProps:T={}}=o,z=qt(o,$N),P=O.useContext(CE),U=O.useContext(Jy),H=t.variant??FN[U==null?void 0:U.variant]??m,W=t.color??(U==null?void 0:U.color)??d,J=O.useContext(nb),j=t.size??J??c,{focusVisible:$,getRootProps:G}=Sl(K({},o,{rootRef:r})),te=K({},o,{color:W,component:l,variant:H,size:j,focusVisible:$}),ie=BN(te),[me,Z]=jt("root",{ref:r,elementType:ON,getSlotProps:G,externalForwardedProps:K({onClick:de=>{P==null||P(de,"closeClick"),b==null||b(de)}},z,{component:l,slots:w,slotProps:T}),className:ie.root,ownerState:te});return ae.jsx(me,K({},Z,{children:oC||(oC=ae.jsx(QP,{}))}))}),EE=NN;function jN(e){return Qr("MuiOption",e)}const VN=Hr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),UN=VN,HN=["component","children","disabled","value","label","variant","color","slots","slotProps"],WN=e=>{const{disabled:t,highlighted:r,selected:o}=e;return Kr({root:["root",t&&"disabled",r&&"highlighted",o&&"selected"]},jN,{})},GN=gt(Zy,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color];return{[`&.${UN.highlighted}:not([aria-selected="true"])`]:{backgroundColor:r==null?void 0:r.backgroundColor}}}),qN=O.memo(O.forwardRef(function(t,r){var Ee;const o=en({props:t,name:"JoyOption"}),{component:l="li",children:d,disabled:m=!1,value:c,label:b,variant:w="plain",color:T="neutral",slots:z={},slotProps:P={}}=o,U=qt(o,HN),H=O.useContext(Xp),{variant:W=w,color:J=T}=tE(t.variant,t.color),j=O.useRef(null),$=cn(j,r),G=b??(typeof d=="string"?d:(Ee=j.current)==null?void 0:Ee.innerText),{getRootProps:te,selected:ie,highlighted:me,index:Z}=NB({disabled:m,label:G,value:c,rootRef:$}),de=K({},o,{disabled:m,selected:ie,highlighted:me,index:Z,component:l,variant:W,color:J,row:H}),Te=WN(de),ve=K({},U,{component:l,slots:z,slotProps:P}),[De,ke]=jt("root",{ref:r,getSlotProps:te,elementType:GN,externalForwardedProps:ve,className:Te.root,ownerState:de});return ae.jsx(De,K({},ke,{children:d}))})),ZN=O.forwardRef(function(t,r){const{contextValue:o}=jB(t.value);return ae.jsx(Up.Provider,{value:o,children:ae.jsx(qN,K({},t,{ref:r}))})}),KN=ZN,XN=cd(ae.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function JN(e){return Qr("MuiSelect",e)}const Fu=Hr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var aC;const YN=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function QN(e){return Array.isArray(e)?ae.jsx(O.Fragment,{children:e.map(t=>t.label).join(", ")}):(e==null?void 0:e.label)??""}const ej=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],tj=e=>{const{color:t,disabled:r,focusVisible:o,size:l,variant:d,open:m,multiple:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&"expanded",d&&`variant${Ft(d)}`,t&&`color${Ft(t)}`,l&&`size${Ft(l)}`,c&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",m&&"expanded"],listbox:["listbox",m&&"expanded",r&&"disabled"]};return Kr(b,JN,{})},rj=gt("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var l,d,m,c,b;const r=(l=e.variants[`${t.variant}`])==null?void 0:l[t.color],{borderRadius:o}=Jp({theme:e,ownerState:t},["borderRadius"]);return[K({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(d=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:d[500],'&:not([data-inverted-colors="false"])':K({},t.instanceColor&&{"--_Select-focusedHighlight":(m=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:m[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":r!=null&&r.backgroundColor?r==null?void 0:r.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],r,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${Fu.focusVisible}`]:{"--Select-indicatorColor":r==null?void 0:r.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${Fu.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(c=e.variants[`${t.variant}Hover`])==null?void 0:c[t.color],[`&.${Fu.disabled}`]:(b=e.variants[`${t.variant}Disabled`])==null?void 0:b[t.color]},o!==void 0&&{"--Select-radius":o}]}),nj=gt("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>K({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),ij=gt(Gy,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},eb,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),oj=gt("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),aj=gt("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),sj=gt("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${Fu.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${Fu.expanded}, .${Fu.disabled} > &`]:{"--Icon-color":"currentColor"}})),lj=O.forwardRef(function(t,r){var Rt;const o=en({props:t,name:"JoySelect"}),l=o,{action:d,autoFocus:m,children:c,defaultValue:b,defaultListboxOpen:w=!1,disabled:T,getSerializedValue:z,placeholder:P,listboxId:U,listboxOpen:H,onChange:W,onListboxOpenChange:J,onClose:j,renderValue:$,required:G=!1,value:te,size:ie="md",variant:me="outlined",color:Z="neutral",startDecorator:de,endDecorator:Te,indicator:ve=aC||(aC=ae.jsx(XN,{})),"aria-describedby":De,"aria-label":ke,"aria-labelledby":Ee,id:He,name:Fe,multiple:Ae=!1,slots:Ge={},slotProps:Re={}}=l,Ze=qt(l,YN),Je=O.useContext(Ky),dt=t.disabled??(Je==null?void 0:Je.disabled)??T,vt=t.size??(Je==null?void 0:Je.size)??ie,mt=t.color??(Je!=null&&Je.error?"danger":(Je==null?void 0:Je.color)??Z),Ct=$??QN,[zt,Zt]=O.useState(null),kt=O.useRef(null),$e=O.useRef(null),rt=cn(r,kt);O.useImperativeHandle(d,()=>({focusVisible:()=>{var ar;(ar=$e.current)==null||ar.focus()}}),[]),O.useEffect(()=>{Zt(kt.current)},[]),O.useEffect(()=>{m&&$e.current.focus()},[m]);const ht=O.useCallback(ar=>{J==null||J(ar),ar||j==null||j()},[j,J]),{buttonActive:At,buttonFocusVisible:Et,contextValue:gr,disabled:Cr,getButtonProps:lr,getListboxProps:yt,getHiddenInputProps:Mr,getOptionMetadata:er,open:Lr,value:Pe}=oO({buttonRef:$e,defaultOpen:w,defaultValue:b,disabled:dt,getSerializedValue:z,listboxId:U,multiple:Ae,name:Fe,required:G,onChange:W,onOpenChange:ht,open:H,value:te}),cr=K({},o,{active:At,defaultListboxOpen:w,disabled:Cr,focusVisible:Et,open:Lr,renderValue:Ct,value:Pe,size:vt,variant:me,color:mt}),ir=tj(cr),Bt=K({},Ze,{slots:Ge,slotProps:Re}),Gt=O.useMemo(()=>{let ar;return Ae?ar=Pe.map(jr=>er(jr)).filter(jr=>jr!==void 0):ar=er(Pe)??null,ar},[er,Pe,Ae]),[kr,Pr]=jt("root",{ref:rt,className:ir.root,elementType:rj,externalForwardedProps:Bt,ownerState:cr}),[sr,nr]=jt("button",{additionalProps:{"aria-describedby":De??(Je==null?void 0:Je["aria-describedby"]),"aria-label":ke,"aria-labelledby":Ee??(Je==null?void 0:Je.labelId),"aria-required":G?"true":void 0,id:He??(Je==null?void 0:Je.htmlFor),name:Fe},className:ir.button,elementType:nj,externalForwardedProps:Bt,getSlotProps:lr,ownerState:cr}),[rr,Dr]=jt("listbox",{additionalProps:{anchorEl:zt,open:Lr,placement:"bottom",keepMounted:!0},className:ir.listbox,elementType:ij,externalForwardedProps:Bt,getSlotProps:yt,ownerState:K({},cr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:ar=>({size:ar.size||vt,variant:ar.variant||me,color:ar.color||(ar.disablePortal?mt:Z),disableColorInversion:!ar.disablePortal})}),[it,Le]=jt("startDecorator",{className:ir.startDecorator,elementType:oj,externalForwardedProps:Bt,ownerState:cr}),[Ht,Mt]=jt("endDecorator",{className:ir.endDecorator,elementType:aj,externalForwardedProps:Bt,ownerState:cr}),[_r,xr]=jt("indicator",{className:ir.indicator,elementType:sj,externalForwardedProps:Bt,ownerState:cr}),Qe=O.useMemo(()=>[...ej,...Dr.modifiers||[]],[Dr.modifiers]);let Kt=P;return(Array.isArray(Gt)&&Gt.length>0||!Array.isArray(Gt)&&Gt)&&(Kt=Ct(Gt)),ae.jsxs(O.Fragment,{children:[ae.jsxs(kr,K({},Pr,{children:[de&&ae.jsx(it,K({},Le,{children:de})),ae.jsx(sr,K({},nr,{children:Kt})),Te&&ae.jsx(Ht,K({},Mt,{children:Te})),ve&&ae.jsx(_r,K({},xr,{children:ve})),ae.jsx("input",K({},Mr()))]})),zt&&ae.jsx(rr,K({},Dr,{className:ji(Dr.className),modifiers:Qe},!((Rt=o.slots)!=null&&Rt.listbox)&&{as:J1,slots:{root:Dr.as||"ul"}},{children:ae.jsx(aO,{value:gr,children:ae.jsx(rb,{variant:me,color:Z,children:ae.jsx(Q1.Provider,{value:"select",children:ae.jsx(Wy,{nested:!0,children:c})})})})}))]})}),cj=lj;function uj(e){return Qr("MuiSheet",e)}Hr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const dj=["className","color","component","variant","invertedColors","slots","slotProps"],hj=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${Ft(t)}`,r&&`color${Ft(r)}`]};return Kr(o,uj,{})},pj=gt("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var b,w;const r=(b=e.variants[t.variant])==null?void 0:b[t.color],{borderRadius:o,bgcolor:l,backgroundColor:d,background:m}=Jp({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),c=xl(e,`palette.${l}`)||l||xl(e,`palette.${d}`)||d||m||(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.surface;return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":c==="transparent"?"initial":c,"--Sheet-background":c==="transparent"?"initial":c},o!==void 0&&{"--List-radius":`calc(${o} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${o} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),K({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&JP(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&YP(t.color)(e),(w=e.variants[t.variant])==null?void 0:w[t.color],r)]}),fj=O.forwardRef(function(t,r){const o=en({props:t,name:"JoySheet"}),{className:l,color:d="neutral",component:m="div",variant:c="plain",invertedColors:b=!1,slots:w={},slotProps:T={}}=o,z=qt(o,dj),P=K({},o,{color:d,component:m,invertedColors:b,variant:c}),U=hj(P),H=K({},z,{component:m,slots:w,slotProps:T}),[W,J]=jt("root",{ref:r,className:ji(U.root,l),elementType:pj,externalForwardedProps:H,ownerState:P});return ae.jsx(W,K({},J))}),zE=fj,mj=k5({createStyledComponent:gt("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>en({props:e,name:"JoyStack"})}),AE=mj;function gj(e){return Qr("MuiTab",e)}const yj=Hr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),vj=yj,_j=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],xj=e=>{const{selected:t,disabled:r,focusVisible:o,variant:l,color:d,orientation:m}=e,c={root:["root",m,r&&"disabled",o&&"focusVisible",t&&"selected",l&&`variant${Ft(l)}`,d&&`color${Ft(d)}`]};return Kr(c,gj,{})},bj=gt(Zy,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),wj=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyTab"}),l=O.useContext(Xp),{action:d,children:m,disabled:c=!1,component:b="button",orientation:w="horizontal",variant:T="plain",color:z="neutral",disableIndicator:P=!1,indicatorPlacement:U=l?"bottom":"right",indicatorInset:H=!1,slots:W={},slotProps:J={}}=o,j=qt(o,_j),$=O.useRef(),G=cn($,r),{active:te,focusVisible:ie,setFocusVisible:me,selected:Z,getRootProps:de}=gO(K({},o,{rootRef:G}));O.useImperativeHandle(d,()=>({focusVisible:()=>{me(!0),$.current.focus()}}),[me]);const Te=K({},o,{disableIndicator:P,indicatorPlacement:U,indicatorInset:H,orientation:w,row:l,active:te,focusVisible:ie,disabled:c,selected:Z,variant:T,color:z}),ve=xj(Te),De=K({},j,{component:b,slots:W,slotProps:J}),[ke,Ee]=jt("root",{ref:r,elementType:bj,getSlotProps:de,externalForwardedProps:De,ownerState:Te,className:ve.root});return ae.jsx(GO.Provider,{value:w,children:ae.jsx(ke,K({},Ee,{children:m}))})}),sC=wj,Sj=O.createContext("md"),ib=Sj;function Cj(e){return Qr("MuiTabList",e)}Hr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const kj=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],Tj=e=>{const{orientation:t,size:r,variant:o,color:l}=e,d={root:["root",t,o&&`variant${Ft(o)}`,l&&`color${Ft(l)}`,r&&`size${Ft(r)}`]};return Kr(d,Cj,{})},Ij=gt(Gy,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return K({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},eb,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(r==null?void 0:r.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&K({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${vj.root}`]:{flex:t.tabFlex}})}),Pj=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyTabList"}),l=O.useContext(ib),{isRtl:d,orientation:m,getRootProps:c,contextValue:b}=pO({rootRef:r}),{component:w="div",children:T,variant:z="plain",color:P="neutral",size:U,disableUnderline:H=!1,underlinePlacement:W=m==="horizontal"?"bottom":"right",tabFlex:J,sticky:j,slots:$={},slotProps:G={}}=o,te=qt(o,kj),me=K({},o,{isRtl:d,orientation:m,variant:z,color:P,size:U??l,sticky:j,tabFlex:J,nesting:!1,disableUnderline:H,underlinePlacement:W}),Z=Tj(me),de=K({},te,{component:w,slots:$,slotProps:G}),[Te,ve]=jt("root",{ref:r,elementType:Ij,getSlotProps:c,externalForwardedProps:de,ownerState:me,className:Z.root});return ae.jsx(Te,K({},ve,{children:ae.jsx(fO,{value:b,children:ae.jsx(Wy,{row:m==="horizontal",nested:!0,children:T})})}))}),Ej=Pj;function zj(e){return Qr("MuiTabPanel",e)}Hr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Aj=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],Mj=e=>{const{hidden:t,size:r,variant:o,color:l,orientation:d}=e,m={root:["root",t&&"hidden",r&&`size${Ft(r)}`,d,o&&`variant${Ft(o)}`,l&&`color${Ft(l)}`,r&&`size${Ft(r)}`]};return Kr(m,zj,{})},Dj=gt("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),Rj=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyTabPanel"}),{orientation:l}=Uy()||{orientation:"horizontal"},d=O.useContext(ib),{children:m,value:c=0,component:b,color:w="neutral",variant:T="plain",size:z,slots:P={},slotProps:U={},keepMounted:H=!1}=o,W=qt(o,Aj),{hidden:J,getRootProps:j}=dO(K({},o,{value:c})),G=K({},o,{orientation:l,hidden:J,size:z??d,color:w,variant:T}),te=Mj(G),ie=K({},W,{component:b,slots:P,slotProps:U}),[me,Z]=jt("root",{ref:r,elementType:Dj,getSlotProps:j,externalForwardedProps:ie,additionalProps:{role:"tabpanel",ref:r,as:b},ownerState:G,className:te.root});return H?ae.jsx(me,K({},Z,{children:m})):ae.jsx(me,K({},Z,{children:!J&&m}))}),lC=Rj;function Lj(e){return Qr("MuiTabs",e)}Hr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const $j=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],Bj=e=>{const{orientation:t,variant:r,color:o,size:l}=e,d={root:["root",t,r&&`variant${Ft(r)}`,o&&`color${Ft(o)}`,l&&`size${Ft(l)}`]};return Kr(d,Lj,{})},Oj=gt("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var w,T;const r=(w=t.variants[e.variant])==null?void 0:w[e.color],{bgcolor:o,backgroundColor:l,background:d,p:m,padding:c}=Jp({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),b=xl(t,`palette.${o}`)||o||xl(t,`palette.${l}`)||l||d||(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||t.vars.palette.background.surface;return K({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":b==="transparent"?"initial":b,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(T=t.variants[e.variant])==null?void 0:T[e.color],m!==void 0&&{"--Tabs-padding":m},c!==void 0&&{"--Tabs-padding":c})}),Fj=O.forwardRef(function(t,r){const o=en({props:t,name:"JoyTabs"}),{children:l,value:d,defaultValue:m,orientation:c="horizontal",direction:b="ltr",component:w,variant:T="plain",color:z="neutral",size:P="md",slots:U={},slotProps:H={}}=o,W=qt(o,$j),J=m||(d===void 0?0:void 0),{contextValue:j}=lO(K({},o,{orientation:c,defaultValue:J})),$=K({},o,{orientation:c,direction:b,variant:T,color:z,size:P}),G=Bj($),te=K({},W,{component:w,slots:U,slotProps:H}),[ie,me]=jt("root",{ref:r,elementType:Oj,externalForwardedProps:te,additionalProps:{ref:r,as:w},ownerState:$,className:G.root});return ae.jsx(ie,K({},me,{children:ae.jsx(cO,{value:j,children:ae.jsx(ib.Provider,{value:P,children:l})})}))}),cC=Fj;function Nj(e){return Qr("MuiTooltip",e)}Hr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const jj=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],Vj=e=>{const{arrow:t,variant:r,color:o,size:l,placement:d,touch:m}=e,c={root:["root",t&&"tooltipArrow",m&&"touch",l&&`size${Ft(l)}`,o&&`color${Ft(o)}`,r&&`variant${Ft(r)}`,`tooltipPlacement${Ft(d.split("-")[0])}`],arrow:["arrow"]};return Kr(c,Nj,{})},Uj=gt("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var o,l,d;const r=(o=t.variants[e.variant])==null?void 0:o[e.color];return K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],r,!r.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(l=e.placement)!=null&&l.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(d=e.placement)!=null&&d.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),Hj=gt("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface,borderRightColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${r.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let $m=!1;const uC=new jp;let zh={x:0,y:0};function dC(e,t){return r=>{t&&t(r),e(r)}}function hC(e,t){return(r,...o)=>{t&&t(r,...o),e(r,...o)}}const Wj=O.forwardRef(function(t,r){var R;const o=en({props:t,name:"JoyTooltip"}),{children:l,className:d,component:m,arrow:c=!1,describeChild:b=!1,disableFocusListener:w=!1,disableHoverListener:T=!1,disableInteractive:z=!1,disableTouchListener:P=!1,enterDelay:U=100,enterNextDelay:H=0,enterTouchDelay:W=700,followCursor:J=!1,id:j,leaveDelay:$=0,leaveTouchDelay:G=1500,onClose:te,onOpen:ie,open:me,disablePortal:Z,direction:de,keepMounted:Te,modifiers:ve,placement:De="bottom",title:ke,color:Ee="neutral",variant:He="solid",size:Fe="md",slots:Ae={},slotProps:Ge={}}=o,Re=qt(o,jj),[Ze,Je]=O.useState(),[dt,vt]=O.useState(null),mt=O.useRef(!1),Ct=z||J,zt=ym(),Zt=ym(),kt=ym(),$e=ym(),[rt,ht]=Mu({controlled:me,default:!1,name:"Tooltip",state:"open"});let At=rt;const Et=La(j),gr=O.useRef(),Cr=ll(()=>{gr.current!==void 0&&(document.body.style.WebkitUserSelect=gr.current,gr.current=void 0),$e.clear()});O.useEffect(()=>Cr,[Cr]);const lr=V=>{uC.clear(),$m=!0,ht(!0),ie&&!At&&ie(V)},yt=ll(V=>{uC.start(800+$,()=>{$m=!1}),ht(!1),te&&At&&te(V),zt.start(150,()=>{mt.current=!1})}),Mr=V=>{mt.current&&V.type!=="touchstart"||(Ze&&Ze.removeAttribute("title"),Zt.clear(),kt.clear(),U||$m&&H?Zt.start($m?H:U,()=>{lr(V)}):lr(V))},er=V=>{Zt.clear(),kt.start($,()=>{yt(V)})},{isFocusVisibleRef:Lr,onBlur:Pe,onFocus:cr,ref:ir}=Wx(),[,Bt]=O.useState(!1),Gt=V=>{Pe(V),Lr.current===!1&&(Bt(!1),er(V))},kr=V=>{Ze||Je(V.currentTarget),cr(V),Lr.current===!0&&(Bt(!0),Mr(V))},Pr=V=>{mt.current=!0;const Q=l.props;Q.onTouchStart&&Q.onTouchStart(V)},sr=V=>{Pr(V),kt.clear(),zt.clear(),Cr(),gr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",$e.start(W,()=>{document.body.style.WebkitUserSelect=gr.current,Mr(V)})},nr=V=>{l.props.onTouchEnd&&l.props.onTouchEnd(V),Cr(),kt.start(G,()=>{yt(V)})};O.useEffect(()=>{if(!At)return;function V(Q){Q.key==="Escape"&&yt(Q)}return document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)}},[yt,At]);const rr=cn(Je,r),Dr=cn(ir,rr),it=cn(l.ref,Dr);typeof ke!="number"&&!ke&&(At=!1);const Le=O.useRef(null),Ht=V=>{const Q=l.props;Q.onMouseMove&&Q.onMouseMove(V),zh={x:V.clientX,y:V.clientY},Le.current&&Le.current.update()},Mt={},_r=typeof ke=="string";b?(Mt.title=!At&&_r&&!T?ke:null,Mt["aria-describedby"]=At?Et:null):(Mt["aria-label"]=_r?ke:null,Mt["aria-labelledby"]=At&&!_r?Et:null);const xr=K({},Mt,Re,{component:m},l.props,{className:ji(d,l.props.className),onTouchStart:Pr,ref:it},J?{onMouseMove:Ht}:{}),Qe={};P||(xr.onTouchStart=sr,xr.onTouchEnd=nr),T||(xr.onMouseOver=dC(Mr,xr.onMouseOver),xr.onMouseLeave=dC(er,xr.onMouseLeave),Ct||(Qe.onMouseOver=Mr,Qe.onMouseLeave=er)),w||(xr.onFocus=hC(kr,xr.onFocus),xr.onBlur=hC(Gt,xr.onBlur),Ct||(Qe.onFocus=kr,Qe.onBlur=Gt));const Kt=K({},o,{arrow:c,disableInteractive:Ct,placement:De,touch:mt.current,color:Ee,variant:He,size:Fe}),Rt=Vj(Kt),ar=K({},Re,{component:m,slots:Ae,slotProps:Ge}),jr=O.useMemo(()=>[{name:"arrow",enabled:!!dt,options:{element:dt,padding:6}},{name:"offset",options:{offset:[0,10]}},...ve||[]],[dt,ve]),[Jt,mn]=jt("root",{additionalProps:K({id:Et,popperRef:Le,placement:De,anchorEl:J?{getBoundingClientRect:()=>({top:zh.y,left:zh.x,right:zh.x,bottom:zh.y,width:0,height:0})}:Ze,open:Ze?At:!1,disablePortal:Z,keepMounted:Te,direction:de,modifiers:jr},Qe),ref:null,className:Rt.root,elementType:Uj,externalForwardedProps:ar,ownerState:Kt}),[ue,M]=jt("arrow",{ref:vt,className:Rt.arrow,elementType:Hj,externalForwardedProps:ar,ownerState:Kt});return ae.jsxs(O.Fragment,{children:[O.isValidElement(l)&&O.cloneElement(l,xr),ae.jsxs(Jt,K({},mn,!((R=o.slots)!=null&&R.root)&&{as:J1,slots:{root:m||"div"}},{children:[ke,c?ae.jsx(ue,K({},M)):null]}))]})}),Gj=Wj;var ME,pC=ld;ME=pC.createRoot,pC.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},kn.apply(this,arguments)}var Gn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gn||(Gn={}));const fC="popstate";function qj(e){e===void 0&&(e={});function t(o,l){let{pathname:d,search:m,hash:c}=o.location;return Ap("",{pathname:d,search:m,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(o,l){return typeof l=="string"?l:Qp(l)}return Kj(t,r,null,e)}function Sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function td(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zj(){return Math.random().toString(36).substr(2,8)}function mC(e,t){return{usr:e.state,key:e.key,idx:t}}function Ap(e,t,r,o){return r===void 0&&(r=null),kn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rs(t):t,{state:r,key:t&&t.key||o||Zj()})}function Qp(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Rs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Kj(e,t,r,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:d=!1}=o,m=l.history,c=Gn.Pop,b=null,w=T();w==null&&(w=0,m.replaceState(kn({},m.state,{idx:w}),""));function T(){return(m.state||{idx:null}).idx}function z(){c=Gn.Pop;let J=T(),j=J==null?null:J-w;w=J,b&&b({action:c,location:W.location,delta:j})}function P(J,j){c=Gn.Push;let $=Ap(W.location,J,j);r&&r($,J),w=T()+1;let G=mC($,w),te=W.createHref($);try{m.pushState(G,"",te)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;l.location.assign(te)}d&&b&&b({action:c,location:W.location,delta:1})}function U(J,j){c=Gn.Replace;let $=Ap(W.location,J,j);r&&r($,J),w=T();let G=mC($,w),te=W.createHref($);m.replaceState(G,"",te),d&&b&&b({action:c,location:W.location,delta:0})}function H(J){let j=l.location.origin!=="null"?l.location.origin:l.location.href,$=typeof J=="string"?J:Qp(J);return $=$.replace(/ $/,"%20"),Sr(j,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,j)}let W={get action(){return c},get location(){return e(l,m)},listen(J){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(fC,z),b=J,()=>{l.removeEventListener(fC,z),b=null}},createHref(J){return t(l,J)},createURL:H,encodeLocation(J){let j=H(J);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:P,replace:U,go(J){return m.go(J)}};return W}var xn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xn||(xn={}));const Xj=new Set(["lazy","caseSensitive","path","id","index","children"]);function Jj(e){return e.index===!0}function cx(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((l,d)=>{let m=[...r,d],c=typeof l.id=="string"?l.id:m.join("-");if(Sr(l.index!==!0||!l.children,"Cannot specify children on an index route"),Sr(!o[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),Jj(l)){let b=kn({},l,t(l),{id:c});return o[c]=b,b}else{let b=kn({},l,t(l),{id:c,children:void 0});return o[c]=b,l.children&&(b.children=cx(l.children,t,m,o)),b}})}function Pu(e,t,r){r===void 0&&(r="/");let o=typeof t=="string"?Rs(t):t,l=ef(o.pathname||"/",r);if(l==null)return null;let d=DE(e);Qj(d);let m=null;for(let c=0;m==null&&c<d.length;++c){let b=dV(l);m=lV(d[c],b)}return m}function Yj(e,t){let{route:r,pathname:o,params:l}=e;return{id:r.id,pathname:o,params:l,data:t[r.id],handle:r.handle}}function DE(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let l=(d,m,c)=>{let b={relativePath:c===void 0?d.path||"":c,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};b.relativePath.startsWith("/")&&(Sr(b.relativePath.startsWith(o),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(o.length));let w=_l([o,b.relativePath]),T=r.concat(b);d.children&&d.children.length>0&&(Sr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),DE(d.children,t,T,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:aV(w,d.index),routesMeta:T})};return e.forEach((d,m)=>{var c;if(d.path===""||!((c=d.path)!=null&&c.includes("?")))l(d,m);else for(let b of RE(d.path))l(d,m,b)}),t}function RE(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return l?[d,""]:[d];let m=RE(o.join("/")),c=[];return c.push(...m.map(b=>b===""?d:[d,b].join("/"))),l&&c.push(...m),c.map(b=>e.startsWith("/")&&b===""?"/":b)}function Qj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:sV(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const eV=/^:[\w-]+$/,tV=3,rV=2,nV=1,iV=10,oV=-2,gC=e=>e==="*";function aV(e,t){let r=e.split("/"),o=r.length;return r.some(gC)&&(o+=oV),t&&(o+=rV),r.filter(l=>!gC(l)).reduce((l,d)=>l+(eV.test(d)?tV:d===""?nV:iV),o)}function sV(e,t){return e.length===t.length&&e.slice(0,-1).every((o,l)=>o===t[l])?e[e.length-1]-t[t.length-1]:0}function lV(e,t){let{routesMeta:r}=e,o={},l="/",d=[];for(let m=0;m<r.length;++m){let c=r[m],b=m===r.length-1,w=l==="/"?t:t.slice(l.length)||"/",T=cV({path:c.relativePath,caseSensitive:c.caseSensitive,end:b},w);if(!T)return null;Object.assign(o,T.params);let z=c.route;d.push({params:o,pathname:_l([l,T.pathname]),pathnameBase:fV(_l([l,T.pathnameBase])),route:z}),T.pathnameBase!=="/"&&(l=_l([l,T.pathnameBase]))}return d}function cV(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=uV(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let d=l[0],m=d.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:o.reduce((w,T,z)=>{let{paramName:P,isOptional:U}=T;if(P==="*"){let W=c[z]||"";m=d.slice(0,d.length-W.length).replace(/(.)\/+$/,"$1")}const H=c[z];return U&&!H?w[P]=void 0:w[P]=(H||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:m,pattern:e}}function uV(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),td(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,c,b)=>(o.push({paramName:c,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),o]}function dV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return td(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ef(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function hV(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:l=""}=typeof e=="string"?Rs(e):e;return{pathname:r?r.startsWith("/")?r:pV(r,t):t,search:mV(o),hash:gV(l)}}function pV(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function K0(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LE(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function $E(e,t){let r=LE(e);return t?r.map((o,l)=>l===e.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function BE(e,t,r,o){o===void 0&&(o=!1);let l;typeof e=="string"?l=Rs(e):(l=kn({},e),Sr(!l.pathname||!l.pathname.includes("?"),K0("?","pathname","search",l)),Sr(!l.pathname||!l.pathname.includes("#"),K0("#","pathname","hash",l)),Sr(!l.search||!l.search.includes("#"),K0("#","search","hash",l)));let d=e===""||l.pathname==="",m=d?"/":l.pathname,c;if(m==null)c=r;else{let z=t.length-1;if(!o&&m.startsWith("..")){let P=m.split("/");for(;P[0]==="..";)P.shift(),z-=1;l.pathname=P.join("/")}c=z>=0?t[z]:"/"}let b=hV(l,c),w=m&&m!=="/"&&m.endsWith("/"),T=(d||m===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(w||T)&&(b.pathname+="/"),b}const _l=e=>e.join("/").replace(/\/\/+/g,"/"),fV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ob{constructor(t,r,o,l){l===void 0&&(l=!1),this.status=t,this.statusText=r||"",this.internal=l,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function ab(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const OE=["post","put","patch","delete"],yV=new Set(OE),vV=["get",...OE],_V=new Set(vV),xV=new Set([301,302,303,307,308]),bV=new Set([307,308]),X0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ah={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},sb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SV=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),FE="remix-router-transitions";function CV(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!r;Sr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let l;if(e.mapRouteProperties)l=e.mapRouteProperties;else if(e.detectErrorBoundary){let M=e.detectErrorBoundary;l=R=>({hasErrorBoundary:M(R)})}else l=SV;let d={},m=cx(e.routes,l,void 0,d),c,b=e.basename||"/",w=e.unstable_dataStrategy||PV,T=kn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),z=null,P=new Set,U=null,H=null,W=null,J=e.hydrationData!=null,j=Pu(m,e.history.location,b),$=null;if(j==null){let M=Xo(404,{pathname:e.history.location.pathname}),{matches:R,route:V}=TC(m);j=R,$={[V.id]:M}}let G,te=j.some(M=>M.route.lazy),ie=j.some(M=>M.route.loader);if(te)G=!1;else if(!ie)G=!0;else if(T.v7_partialHydration){let M=e.hydrationData?e.hydrationData.loaderData:null,R=e.hydrationData?e.hydrationData.errors:null,V=Q=>Q.route.loader?typeof Q.route.loader=="function"&&Q.route.loader.hydrate===!0?!1:M&&M[Q.route.id]!==void 0||R&&R[Q.route.id]!==void 0:!0;if(R){let Q=j.findIndex(re=>R[re.route.id]!==void 0);G=j.slice(0,Q+1).every(V)}else G=j.every(V)}else G=e.hydrationData!=null;let me,Z={historyAction:e.history.action,location:e.history.location,matches:j,initialized:G,navigation:X0,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||$,fetchers:new Map,blockers:new Map},de=Gn.Pop,Te=!1,ve,De=!1,ke=new Map,Ee=null,He=!1,Fe=!1,Ae=[],Ge=[],Re=new Map,Ze=0,Je=-1,dt=new Map,vt=new Set,mt=new Map,Ct=new Map,zt=new Set,Zt=new Map,kt=new Map,$e=!1;function rt(){if(z=e.history.listen(M=>{let{action:R,location:V,delta:Q}=M;if($e){$e=!1;return}td(kt.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=Kt({currentLocation:Z.location,nextLocation:V,historyAction:R});if(re&&Q!=null){$e=!0,e.history.go(Q*-1),Qe(re,{state:"blocked",location:V,proceed(){Qe(re,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),e.history.go(Q)},reset(){let xe=new Map(Z.blockers);xe.set(re,Ah),Et({blockers:xe})}});return}return yt(R,V)}),r){NV(t,ke);let M=()=>jV(t,ke);t.addEventListener("pagehide",M),Ee=()=>t.removeEventListener("pagehide",M)}return Z.initialized||yt(Gn.Pop,Z.location,{initialHydration:!0}),me}function ht(){z&&z(),Ee&&Ee(),P.clear(),ve&&ve.abort(),Z.fetchers.forEach((M,R)=>rr(R)),Z.blockers.forEach((M,R)=>xr(R))}function At(M){return P.add(M),()=>P.delete(M)}function Et(M,R){R===void 0&&(R={}),Z=kn({},Z,M);let V=[],Q=[];T.v7_fetcherPersist&&Z.fetchers.forEach((re,xe)=>{re.state==="idle"&&(zt.has(xe)?Q.push(xe):V.push(xe))}),[...P].forEach(re=>re(Z,{deletedFetchers:Q,unstable_viewTransitionOpts:R.viewTransitionOpts,unstable_flushSync:R.flushSync===!0})),T.v7_fetcherPersist&&(V.forEach(re=>Z.fetchers.delete(re)),Q.forEach(re=>rr(re)))}function gr(M,R,V){var Q,re;let{flushSync:xe}=V===void 0?{}:V,pe=Z.actionData!=null&&Z.navigation.formMethod!=null&&za(Z.navigation.formMethod)&&Z.navigation.state==="loading"&&((Q=M.state)==null?void 0:Q._isRedirect)!==!0,ne;R.actionData?Object.keys(R.actionData).length>0?ne=R.actionData:ne=null:pe?ne=Z.actionData:ne=null;let _e=R.loaderData?CC(Z.loaderData,R.loaderData,R.matches||[],R.errors):Z.loaderData,ze=Z.blockers;ze.size>0&&(ze=new Map(ze),ze.forEach((Ye,St)=>ze.set(St,Ah)));let Ve=Te===!0||Z.navigation.formMethod!=null&&za(Z.navigation.formMethod)&&((re=M.state)==null?void 0:re._isRedirect)!==!0;c&&(m=c,c=void 0),He||de===Gn.Pop||(de===Gn.Push?e.history.push(M,M.state):de===Gn.Replace&&e.history.replace(M,M.state));let We;if(de===Gn.Pop){let Ye=ke.get(Z.location.pathname);Ye&&Ye.has(M.pathname)?We={currentLocation:Z.location,nextLocation:M}:ke.has(M.pathname)&&(We={currentLocation:M,nextLocation:Z.location})}else if(De){let Ye=ke.get(Z.location.pathname);Ye?Ye.add(M.pathname):(Ye=new Set([M.pathname]),ke.set(Z.location.pathname,Ye)),We={currentLocation:Z.location,nextLocation:M}}Et(kn({},R,{actionData:ne,loaderData:_e,historyAction:de,location:M,initialized:!0,navigation:X0,revalidation:"idle",restoreScrollPosition:mn(M,R.matches||Z.matches),preventScrollReset:Ve,blockers:ze}),{viewTransitionOpts:We,flushSync:xe===!0}),de=Gn.Pop,Te=!1,De=!1,He=!1,Fe=!1,Ae=[],Ge=[]}async function Cr(M,R){if(typeof M=="number"){e.history.go(M);return}let V=ux(Z.location,Z.matches,b,T.v7_prependBasename,M,T.v7_relativeSplatPath,R==null?void 0:R.fromRouteId,R==null?void 0:R.relative),{path:Q,submission:re,error:xe}=yC(T.v7_normalizeFormMethod,!1,V,R),pe=Z.location,ne=Ap(Z.location,Q,R&&R.state);ne=kn({},ne,e.history.encodeLocation(ne));let _e=R&&R.replace!=null?R.replace:void 0,ze=Gn.Push;_e===!0?ze=Gn.Replace:_e===!1||re!=null&&za(re.formMethod)&&re.formAction===Z.location.pathname+Z.location.search&&(ze=Gn.Replace);let Ve=R&&"preventScrollReset"in R?R.preventScrollReset===!0:void 0,We=(R&&R.unstable_flushSync)===!0,Ye=Kt({currentLocation:pe,nextLocation:ne,historyAction:ze});if(Ye){Qe(Ye,{state:"blocked",location:ne,proceed(){Qe(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:ne}),Cr(M,R)},reset(){let St=new Map(Z.blockers);St.set(Ye,Ah),Et({blockers:St})}});return}return await yt(ze,ne,{submission:re,pendingError:xe,preventScrollReset:Ve,replace:R&&R.replace,enableViewTransition:R&&R.unstable_viewTransition,flushSync:We})}function lr(){if(kr(),Et({revalidation:"loading"}),Z.navigation.state!=="submitting"){if(Z.navigation.state==="idle"){yt(Z.historyAction,Z.location,{startUninterruptedRevalidation:!0});return}yt(de||Z.historyAction,Z.navigation.location,{overrideNavigation:Z.navigation})}}async function yt(M,R,V){ve&&ve.abort(),ve=null,de=M,He=(V&&V.startUninterruptedRevalidation)===!0,Jt(Z.location,Z.matches),Te=(V&&V.preventScrollReset)===!0,De=(V&&V.enableViewTransition)===!0;let Q=c||m,re=V&&V.overrideNavigation,xe=Pu(Q,R,b),pe=(V&&V.flushSync)===!0;if(!xe){let Ye=Xo(404,{pathname:R.pathname}),{matches:St,route:at}=TC(Q);Rt(),gr(R,{matches:St,loaderData:{},errors:{[at.id]:Ye}},{flushSync:pe});return}if(Z.initialized&&!Fe&&RV(Z.location,R)&&!(V&&V.submission&&za(V.submission.formMethod))){gr(R,{matches:xe},{flushSync:pe});return}ve=new AbortController;let ne=lu(e.history,R,ve.signal,V&&V.submission),_e;if(V&&V.pendingError)_e=[rp(xe).route.id,{type:xn.error,error:V.pendingError}];else if(V&&V.submission&&za(V.submission.formMethod)){let Ye=await Mr(ne,R,V.submission,xe,{replace:V.replace,flushSync:pe});if(Ye.shortCircuited)return;_e=Ye.pendingActionResult,re=J0(R,V.submission),pe=!1,ne=lu(e.history,ne.url,ne.signal)}let{shortCircuited:ze,loaderData:Ve,errors:We}=await er(ne,R,xe,re,V&&V.submission,V&&V.fetcherSubmission,V&&V.replace,V&&V.initialHydration===!0,pe,_e);ze||(ve=null,gr(R,kn({matches:xe},kC(_e),{loaderData:Ve,errors:We})))}async function Mr(M,R,V,Q,re){re===void 0&&(re={}),kr();let xe=OV(R,V);Et({navigation:xe},{flushSync:re.flushSync===!0});let pe,ne=hx(Q,R);if(!ne.route.action&&!ne.route.lazy)pe={type:xn.error,error:Xo(405,{method:M.method,pathname:R.pathname,routeId:ne.route.id})};else if(pe=(await Bt("action",M,[ne],Q))[0],M.signal.aborted)return{shortCircuited:!0};if(ic(pe)){let _e;return re&&re.replace!=null?_e=re.replace:_e=bC(pe.response.headers.get("Location"),new URL(M.url),b)===Z.location.pathname+Z.location.search,await ir(M,pe,{submission:V,replace:_e}),{shortCircuited:!0}}if(nc(pe))throw Xo(400,{type:"defer-action"});if(ta(pe)){let _e=rp(Q,ne.route.id);return(re&&re.replace)!==!0&&(de=Gn.Push),{pendingActionResult:[_e.route.id,pe]}}return{pendingActionResult:[ne.route.id,pe]}}async function er(M,R,V,Q,re,xe,pe,ne,_e,ze){let Ve=Q||J0(R,re),We=re||xe||EC(Ve),Ye=c||m,[St,at]=vC(e.history,Z,V,We,R,T.v7_partialHydration&&ne===!0,T.unstable_skipActionErrorRevalidation,Fe,Ae,Ge,zt,mt,vt,Ye,b,ze);if(Rt(Xt=>!(V&&V.some(Tt=>Tt.route.id===Xt))||St&&St.some(Tt=>Tt.route.id===Xt)),Je=++Ze,St.length===0&&at.length===0){let Xt=Ht();return gr(R,kn({matches:V,loaderData:{},errors:ze&&ta(ze[1])?{[ze[0]]:ze[1].error}:null},kC(ze),Xt?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:_e}),{shortCircuited:!0}}if(!He&&(!T.v7_partialHydration||!ne)){at.forEach(Tt=>{let Vr=Z.fetchers.get(Tt.key),dr=Mh(void 0,Vr?Vr.data:void 0);Z.fetchers.set(Tt.key,dr)});let Xt;ze&&!ta(ze[1])?Xt={[ze[0]]:ze[1].data}:Z.actionData&&(Object.keys(Z.actionData).length===0?Xt=null:Xt=Z.actionData),Et(kn({navigation:Ve},Xt!==void 0?{actionData:Xt}:{},at.length>0?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:_e})}at.forEach(Xt=>{Re.has(Xt.key)&&it(Xt.key),Xt.controller&&Re.set(Xt.key,Xt.controller)});let Dt=()=>at.forEach(Xt=>it(Xt.key));ve&&ve.signal.addEventListener("abort",Dt);let{loaderResults:Me,fetcherResults:Oe}=await Gt(Z.matches,V,St,at,M);if(M.signal.aborted)return{shortCircuited:!0};ve&&ve.signal.removeEventListener("abort",Dt),at.forEach(Xt=>Re.delete(Xt.key));let nt=IC([...Me,...Oe]);if(nt){if(nt.idx>=St.length){let Xt=at[nt.idx-St.length].key;vt.add(Xt)}return await ir(M,nt.result,{replace:pe}),{shortCircuited:!0}}let{loaderData:ct,errors:_t}=SC(Z,V,St,Me,ze,at,Oe,Zt);Zt.forEach((Xt,Tt)=>{Xt.subscribe(Vr=>{(Vr||Xt.done)&&Zt.delete(Tt)})}),T.v7_partialHydration&&ne&&Z.errors&&Object.entries(Z.errors).filter(Xt=>{let[Tt]=Xt;return!St.some(Vr=>Vr.route.id===Tt)}).forEach(Xt=>{let[Tt,Vr]=Xt;_t=Object.assign(_t||{},{[Tt]:Vr})});let ur=Ht(),tr=Mt(Je),yr=ur||tr||at.length>0;return kn({loaderData:ct,errors:_t},yr?{fetchers:new Map(Z.fetchers)}:{})}function Lr(M,R,V,Q){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Re.has(M)&&it(M);let re=(Q&&Q.unstable_flushSync)===!0,xe=c||m,pe=ux(Z.location,Z.matches,b,T.v7_prependBasename,V,T.v7_relativeSplatPath,R,Q==null?void 0:Q.relative),ne=Pu(xe,pe,b);if(!ne){sr(M,R,Xo(404,{pathname:pe}),{flushSync:re});return}let{path:_e,submission:ze,error:Ve}=yC(T.v7_normalizeFormMethod,!0,pe,Q);if(Ve){sr(M,R,Ve,{flushSync:re});return}let We=hx(ne,_e);if(Te=(Q&&Q.preventScrollReset)===!0,ze&&za(ze.formMethod)){Pe(M,R,_e,We,ne,re,ze);return}mt.set(M,{routeId:R,path:_e}),cr(M,R,_e,We,ne,re,ze)}async function Pe(M,R,V,Q,re,xe,pe){if(kr(),mt.delete(M),!Q.route.action&&!Q.route.lazy){let dr=Xo(405,{method:pe.formMethod,pathname:V,routeId:R});sr(M,R,dr,{flushSync:xe});return}let ne=Z.fetchers.get(M);Pr(M,FV(pe,ne),{flushSync:xe});let _e=new AbortController,ze=lu(e.history,V,_e.signal,pe);Re.set(M,_e);let Ve=Ze,Ye=(await Bt("action",ze,[Q],re))[0];if(ze.signal.aborted){Re.get(M)===_e&&Re.delete(M);return}if(T.v7_fetcherPersist&&zt.has(M)){if(ic(Ye)||ta(Ye)){Pr(M,el(void 0));return}}else{if(ic(Ye))if(Re.delete(M),Je>Ve){Pr(M,el(void 0));return}else return vt.add(M),Pr(M,Mh(pe)),ir(ze,Ye,{fetcherSubmission:pe});if(ta(Ye)){sr(M,R,Ye.error);return}}if(nc(Ye))throw Xo(400,{type:"defer-action"});let St=Z.navigation.location||Z.location,at=lu(e.history,St,_e.signal),Dt=c||m,Me=Z.navigation.state!=="idle"?Pu(Dt,Z.navigation.location,b):Z.matches;Sr(Me,"Didn't find any matches after fetcher action");let Oe=++Ze;dt.set(M,Oe);let nt=Mh(pe,Ye.data);Z.fetchers.set(M,nt);let[ct,_t]=vC(e.history,Z,Me,pe,St,!1,T.unstable_skipActionErrorRevalidation,Fe,Ae,Ge,zt,mt,vt,Dt,b,[Q.route.id,Ye]);_t.filter(dr=>dr.key!==M).forEach(dr=>{let zn=dr.key,oo=Z.fetchers.get(zn),Tr=Mh(void 0,oo?oo.data:void 0);Z.fetchers.set(zn,Tr),Re.has(zn)&&it(zn),dr.controller&&Re.set(zn,dr.controller)}),Et({fetchers:new Map(Z.fetchers)});let ur=()=>_t.forEach(dr=>it(dr.key));_e.signal.addEventListener("abort",ur);let{loaderResults:tr,fetcherResults:yr}=await Gt(Z.matches,Me,ct,_t,at);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",ur),dt.delete(M),Re.delete(M),_t.forEach(dr=>Re.delete(dr.key));let Xt=IC([...tr,...yr]);if(Xt){if(Xt.idx>=ct.length){let dr=_t[Xt.idx-ct.length].key;vt.add(dr)}return ir(at,Xt.result)}let{loaderData:Tt,errors:Vr}=SC(Z,Z.matches,ct,tr,void 0,_t,yr,Zt);if(Z.fetchers.has(M)){let dr=el(Ye.data);Z.fetchers.set(M,dr)}Mt(Oe),Z.navigation.state==="loading"&&Oe>Je?(Sr(de,"Expected pending action"),ve&&ve.abort(),gr(Z.navigation.location,{matches:Me,loaderData:Tt,errors:Vr,fetchers:new Map(Z.fetchers)})):(Et({errors:Vr,loaderData:CC(Z.loaderData,Tt,Me,Vr),fetchers:new Map(Z.fetchers)}),Fe=!1)}async function cr(M,R,V,Q,re,xe,pe){let ne=Z.fetchers.get(M);Pr(M,Mh(pe,ne?ne.data:void 0),{flushSync:xe});let _e=new AbortController,ze=lu(e.history,V,_e.signal);Re.set(M,_e);let Ve=Ze,Ye=(await Bt("loader",ze,[Q],re))[0];if(nc(Ye)&&(Ye=await UE(Ye,ze.signal,!0)||Ye),Re.get(M)===_e&&Re.delete(M),!ze.signal.aborted){if(zt.has(M)){Pr(M,el(void 0));return}if(ic(Ye))if(Je>Ve){Pr(M,el(void 0));return}else{vt.add(M),await ir(ze,Ye);return}if(ta(Ye)){sr(M,R,Ye.error);return}Sr(!nc(Ye),"Unhandled fetcher deferred data"),Pr(M,el(Ye.data))}}async function ir(M,R,V){let{submission:Q,fetcherSubmission:re,replace:xe}=V===void 0?{}:V;R.response.headers.has("X-Remix-Revalidate")&&(Fe=!0);let pe=R.response.headers.get("Location");Sr(pe,"Expected a Location header on the redirect Response"),pe=bC(pe,new URL(M.url),b);let ne=Ap(Z.location,pe,{_isRedirect:!0});if(r){let St=!1;if(R.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(sb.test(pe)){const at=e.history.createURL(pe);St=at.origin!==t.location.origin||ef(at.pathname,b)==null}if(St){xe?t.location.replace(pe):t.location.assign(pe);return}}ve=null;let _e=xe===!0?Gn.Replace:Gn.Push,{formMethod:ze,formAction:Ve,formEncType:We}=Z.navigation;!Q&&!re&&ze&&Ve&&We&&(Q=EC(Z.navigation));let Ye=Q||re;if(bV.has(R.response.status)&&Ye&&za(Ye.formMethod))await yt(_e,ne,{submission:kn({},Ye,{formAction:pe}),preventScrollReset:Te});else{let St=J0(ne,Q);await yt(_e,ne,{overrideNavigation:St,fetcherSubmission:re,preventScrollReset:Te})}}async function Bt(M,R,V,Q){try{let re=await EV(w,M,R,V,Q,d,l);return await Promise.all(re.map((xe,pe)=>{if(LV(xe)){let ne=xe.result;return{type:xn.redirect,response:MV(ne,R,V[pe].route.id,Q,b,T.v7_relativeSplatPath)}}return AV(xe)}))}catch(re){return V.map(()=>({type:xn.error,error:re}))}}async function Gt(M,R,V,Q,re){let[xe,...pe]=await Promise.all([V.length?Bt("loader",re,V,R):[],...Q.map(ne=>{if(ne.matches&&ne.match&&ne.controller){let _e=lu(e.history,ne.path,ne.controller.signal);return Bt("loader",_e,[ne.match],ne.matches).then(ze=>ze[0])}else return Promise.resolve({type:xn.error,error:Xo(404,{pathname:ne.path})})})]);return await Promise.all([PC(M,V,xe,xe.map(()=>re.signal),!1,Z.loaderData),PC(M,Q.map(ne=>ne.match),pe,Q.map(ne=>ne.controller?ne.controller.signal:null),!0)]),{loaderResults:xe,fetcherResults:pe}}function kr(){Fe=!0,Ae.push(...Rt()),mt.forEach((M,R)=>{Re.has(R)&&(Ge.push(R),it(R))})}function Pr(M,R,V){V===void 0&&(V={}),Z.fetchers.set(M,R),Et({fetchers:new Map(Z.fetchers)},{flushSync:(V&&V.flushSync)===!0})}function sr(M,R,V,Q){Q===void 0&&(Q={});let re=rp(Z.matches,R);rr(M),Et({errors:{[re.route.id]:V},fetchers:new Map(Z.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function nr(M){return T.v7_fetcherPersist&&(Ct.set(M,(Ct.get(M)||0)+1),zt.has(M)&&zt.delete(M)),Z.fetchers.get(M)||wV}function rr(M){let R=Z.fetchers.get(M);Re.has(M)&&!(R&&R.state==="loading"&&dt.has(M))&&it(M),mt.delete(M),dt.delete(M),vt.delete(M),zt.delete(M),Z.fetchers.delete(M)}function Dr(M){if(T.v7_fetcherPersist){let R=(Ct.get(M)||0)-1;R<=0?(Ct.delete(M),zt.add(M)):Ct.set(M,R)}else rr(M);Et({fetchers:new Map(Z.fetchers)})}function it(M){let R=Re.get(M);Sr(R,"Expected fetch controller: "+M),R.abort(),Re.delete(M)}function Le(M){for(let R of M){let V=nr(R),Q=el(V.data);Z.fetchers.set(R,Q)}}function Ht(){let M=[],R=!1;for(let V of vt){let Q=Z.fetchers.get(V);Sr(Q,"Expected fetcher: "+V),Q.state==="loading"&&(vt.delete(V),M.push(V),R=!0)}return Le(M),R}function Mt(M){let R=[];for(let[V,Q]of dt)if(Q<M){let re=Z.fetchers.get(V);Sr(re,"Expected fetcher: "+V),re.state==="loading"&&(it(V),dt.delete(V),R.push(V))}return Le(R),R.length>0}function _r(M,R){let V=Z.blockers.get(M)||Ah;return kt.get(M)!==R&&kt.set(M,R),V}function xr(M){Z.blockers.delete(M),kt.delete(M)}function Qe(M,R){let V=Z.blockers.get(M)||Ah;Sr(V.state==="unblocked"&&R.state==="blocked"||V.state==="blocked"&&R.state==="blocked"||V.state==="blocked"&&R.state==="proceeding"||V.state==="blocked"&&R.state==="unblocked"||V.state==="proceeding"&&R.state==="unblocked","Invalid blocker state transition: "+V.state+" -> "+R.state);let Q=new Map(Z.blockers);Q.set(M,R),Et({blockers:Q})}function Kt(M){let{currentLocation:R,nextLocation:V,historyAction:Q}=M;if(kt.size===0)return;kt.size>1&&td(!1,"A router only supports one blocker at a time");let re=Array.from(kt.entries()),[xe,pe]=re[re.length-1],ne=Z.blockers.get(xe);if(!(ne&&ne.state==="proceeding")&&pe({currentLocation:R,nextLocation:V,historyAction:Q}))return xe}function Rt(M){let R=[];return Zt.forEach((V,Q)=>{(!M||M(Q))&&(V.cancel(),R.push(Q),Zt.delete(Q))}),R}function ar(M,R,V){if(U=M,W=R,H=V||null,!J&&Z.navigation===X0){J=!0;let Q=mn(Z.location,Z.matches);Q!=null&&Et({restoreScrollPosition:Q})}return()=>{U=null,W=null,H=null}}function jr(M,R){return H&&H(M,R.map(Q=>Yj(Q,Z.loaderData)))||M.key}function Jt(M,R){if(U&&W){let V=jr(M,R);U[V]=W()}}function mn(M,R){if(U){let V=jr(M,R),Q=U[V];if(typeof Q=="number")return Q}return null}function ue(M){d={},c=cx(M,l,void 0,d)}return me={get basename(){return b},get future(){return T},get state(){return Z},get routes(){return m},get window(){return t},initialize:rt,subscribe:At,enableScrollRestoration:ar,navigate:Cr,fetch:Lr,revalidate:lr,createHref:M=>e.history.createHref(M),encodeLocation:M=>e.history.encodeLocation(M),getFetcher:nr,deleteFetcher:Dr,dispose:ht,getBlocker:_r,deleteBlocker:xr,_internalFetchControllers:Re,_internalActiveDeferreds:Zt,_internalSetRoutes:ue},me}function kV(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function ux(e,t,r,o,l,d,m,c){let b,w;if(m){b=[];for(let z of t)if(b.push(z),z.route.id===m){w=z;break}}else b=t,w=t[t.length-1];let T=BE(l||".",$E(b,d),ef(e.pathname,r)||e.pathname,c==="path");return l==null&&(T.search=e.search,T.hash=e.hash),(l==null||l===""||l===".")&&w&&w.route.index&&!lb(T.search)&&(T.search=T.search?T.search.replace(/^\?/,"?index&"):"?index"),o&&r!=="/"&&(T.pathname=T.pathname==="/"?r:_l([r,T.pathname])),Qp(T)}function yC(e,t,r,o){if(!o||!kV(o))return{path:r};if(o.formMethod&&!BV(o.formMethod))return{path:r,error:Xo(405,{method:o.formMethod})};let l=()=>({path:r,error:Xo(400,{type:"invalid-body"})}),d=o.formMethod||"get",m=e?d.toUpperCase():d.toLowerCase(),c=jE(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!za(m))return l();let P=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((U,H)=>{let[W,J]=H;return""+U+W+"="+J+`
`},""):String(o.body);return{path:r,submission:{formMethod:m,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:P}}}else if(o.formEncType==="application/json"){if(!za(m))return l();try{let P=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:m,formAction:c,formEncType:o.formEncType,formData:void 0,json:P,text:void 0}}}catch{return l()}}}Sr(typeof FormData=="function","FormData is not available in this environment");let b,w;if(o.formData)b=dx(o.formData),w=o.formData;else if(o.body instanceof FormData)b=dx(o.body),w=o.body;else if(o.body instanceof URLSearchParams)b=o.body,w=wC(b);else if(o.body==null)b=new URLSearchParams,w=new FormData;else try{b=new URLSearchParams(o.body),w=wC(b)}catch{return l()}let T={formMethod:m,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(za(T.formMethod))return{path:r,submission:T};let z=Rs(r);return t&&z.search&&lb(z.search)&&b.append("index",""),z.search="?"+b,{path:Qp(z),submission:T}}function TV(e,t){let r=e;if(t){let o=e.findIndex(l=>l.route.id===t);o>=0&&(r=e.slice(0,o))}return r}function vC(e,t,r,o,l,d,m,c,b,w,T,z,P,U,H,W){let J=W?ta(W[1])?W[1].error:W[1].data:void 0,j=e.createURL(t.location),$=e.createURL(l),G=W&&ta(W[1])?W[0]:void 0,te=G?TV(r,G):r,ie=W?W[1].statusCode:void 0,me=m&&ie&&ie>=400,Z=te.filter((Te,ve)=>{let{route:De}=Te;if(De.lazy)return!0;if(De.loader==null)return!1;if(d)return typeof De.loader!="function"||De.loader.hydrate?!0:t.loaderData[De.id]===void 0&&(!t.errors||t.errors[De.id]===void 0);if(IV(t.loaderData,t.matches[ve],Te)||b.some(He=>He===Te.route.id))return!0;let ke=t.matches[ve],Ee=Te;return _C(Te,kn({currentUrl:j,currentParams:ke.params,nextUrl:$,nextParams:Ee.params},o,{actionResult:J,unstable_actionStatus:ie,defaultShouldRevalidate:me?!1:c||j.pathname+j.search===$.pathname+$.search||j.search!==$.search||NE(ke,Ee)}))}),de=[];return z.forEach((Te,ve)=>{if(d||!r.some(Fe=>Fe.route.id===Te.routeId)||T.has(ve))return;let De=Pu(U,Te.path,H);if(!De){de.push({key:ve,routeId:Te.routeId,path:Te.path,matches:null,match:null,controller:null});return}let ke=t.fetchers.get(ve),Ee=hx(De,Te.path),He=!1;P.has(ve)?He=!1:w.includes(ve)?He=!0:ke&&ke.state!=="idle"&&ke.data===void 0?He=c:He=_C(Ee,kn({currentUrl:j,currentParams:t.matches[t.matches.length-1].params,nextUrl:$,nextParams:r[r.length-1].params},o,{actionResult:J,unstable_actionStatus:ie,defaultShouldRevalidate:me?!1:c})),He&&de.push({key:ve,routeId:Te.routeId,path:Te.path,matches:De,match:Ee,controller:new AbortController})}),[Z,de]}function IV(e,t,r){let o=!t||r.route.id!==t.route.id,l=e[r.route.id]===void 0;return o||l}function NE(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function _C(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function xC(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let l=r[e.id];Sr(l,"No route found in manifest");let d={};for(let m in o){let b=l[m]!==void 0&&m!=="hasErrorBoundary";td(!b,'Route "'+l.id+'" has a static property "'+m+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+m+'" will be ignored.')),!b&&!Xj.has(m)&&(d[m]=o[m])}Object.assign(l,d),Object.assign(l,kn({},t(l),{lazy:void 0}))}function PV(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function EV(e,t,r,o,l,d,m,c){let b=o.reduce((z,P)=>z.add(P.route.id),new Set),w=new Set,T=await e({matches:l.map(z=>{let P=b.has(z.route.id);return kn({},z,{shouldLoad:P,resolve:H=>(w.add(z.route.id),P?zV(t,r,z,d,m,H,c):Promise.resolve({type:xn.data,result:void 0}))})}),request:r,params:l[0].params,context:c});return l.forEach(z=>Sr(w.has(z.route.id),'`match.resolve()` was not called for route id "'+z.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),T.filter((z,P)=>b.has(l[P].route.id))}async function zV(e,t,r,o,l,d,m){let c,b,w=T=>{let z,P=new Promise((W,J)=>z=J);b=()=>z(),t.signal.addEventListener("abort",b);let U=W=>typeof T!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):T({request:t,params:r.params,context:m},...W!==void 0?[W]:[]),H;return d?H=d(W=>U(W)):H=(async()=>{try{return{type:"data",result:await U()}}catch(W){return{type:"error",result:W}}})(),Promise.race([H,P])};try{let T=r.route[e];if(r.route.lazy)if(T){let z,[P]=await Promise.all([w(T).catch(U=>{z=U}),xC(r.route,l,o)]);if(z!==void 0)throw z;c=P}else if(await xC(r.route,l,o),T=r.route[e],T)c=await w(T);else if(e==="action"){let z=new URL(t.url),P=z.pathname+z.search;throw Xo(405,{method:t.method,pathname:P,routeId:r.route.id})}else return{type:xn.data,result:void 0};else if(T)c=await w(T);else{let z=new URL(t.url),P=z.pathname+z.search;throw Xo(404,{pathname:P})}Sr(c.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(T){return{type:xn.error,result:T}}finally{b&&t.signal.removeEventListener("abort",b)}return c}async function AV(e){let{result:t,type:r,status:o}=e;if(VE(t)){let m;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?m=null:m=await t.json():m=await t.text()}catch(c){return{type:xn.error,error:c}}return r===xn.error?{type:xn.error,error:new ob(t.status,t.statusText,m),statusCode:t.status,headers:t.headers}:{type:xn.data,data:m,statusCode:t.status,headers:t.headers}}if(r===xn.error)return{type:xn.error,error:t,statusCode:ab(t)?t.status:o};if($V(t)){var l,d;return{type:xn.deferred,deferredData:t,statusCode:(l=t.init)==null?void 0:l.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}return{type:xn.data,data:t,statusCode:o}}function MV(e,t,r,o,l,d){let m=e.headers.get("Location");if(Sr(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!sb.test(m)){let c=o.slice(0,o.findIndex(b=>b.route.id===r)+1);m=ux(new URL(t.url),c,l,!0,m,d),e.headers.set("Location",m)}return e}function bC(e,t,r){if(sb.test(e)){let o=e,l=o.startsWith("//")?new URL(t.protocol+o):new URL(o),d=ef(l.pathname,r)!=null;if(l.origin===t.origin&&d)return l.pathname+l.search+l.hash}return e}function lu(e,t,r,o){let l=e.createURL(jE(t)).toString(),d={signal:r};if(o&&za(o.formMethod)){let{formMethod:m,formEncType:c}=o;d.method=m.toUpperCase(),c==="application/json"?(d.headers=new Headers({"Content-Type":c}),d.body=JSON.stringify(o.json)):c==="text/plain"?d.body=o.text:c==="application/x-www-form-urlencoded"&&o.formData?d.body=dx(o.formData):d.body=o.formData}return new Request(l,d)}function dx(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,typeof o=="string"?o:o.name);return t}function wC(e){let t=new FormData;for(let[r,o]of e.entries())t.append(r,o);return t}function DV(e,t,r,o,l,d){let m={},c=null,b,w=!1,T={},z=o&&ta(o[1])?o[1].error:void 0;return r.forEach((P,U)=>{let H=t[U].route.id;if(Sr(!ic(P),"Cannot handle redirect results in processLoaderData"),ta(P)){let W=P.error;if(z!==void 0&&(W=z,z=void 0),c=c||{},d)c[H]=W;else{let J=rp(e,H);c[J.route.id]==null&&(c[J.route.id]=W)}m[H]=void 0,w||(w=!0,b=ab(P.error)?P.error.status:500),P.headers&&(T[H]=P.headers)}else nc(P)?(l.set(H,P.deferredData),m[H]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!w&&(b=P.statusCode),P.headers&&(T[H]=P.headers)):(m[H]=P.data,P.statusCode&&P.statusCode!==200&&!w&&(b=P.statusCode),P.headers&&(T[H]=P.headers))}),z!==void 0&&o&&(c={[o[0]]:z},m[o[0]]=void 0),{loaderData:m,errors:c,statusCode:b||200,loaderHeaders:T}}function SC(e,t,r,o,l,d,m,c){let{loaderData:b,errors:w}=DV(t,r,o,l,c,!1);for(let T=0;T<d.length;T++){let{key:z,match:P,controller:U}=d[T];Sr(m!==void 0&&m[T]!==void 0,"Did not find corresponding fetcher result");let H=m[T];if(!(U&&U.signal.aborted))if(ta(H)){let W=rp(e.matches,P==null?void 0:P.route.id);w&&w[W.route.id]||(w=kn({},w,{[W.route.id]:H.error})),e.fetchers.delete(z)}else if(ic(H))Sr(!1,"Unhandled fetcher revalidation redirect");else if(nc(H))Sr(!1,"Unhandled fetcher deferred data");else{let W=el(H.data);e.fetchers.set(z,W)}}return{loaderData:b,errors:w}}function CC(e,t,r,o){let l=kn({},t);for(let d of r){let m=d.route.id;if(t.hasOwnProperty(m)?t[m]!==void 0&&(l[m]=t[m]):e[m]!==void 0&&d.route.loader&&(l[m]=e[m]),o&&o.hasOwnProperty(m))break}return l}function kC(e){return e?ta(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function rp(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function TC(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Xo(e,t){let{pathname:r,routeId:o,method:l,type:d}=t===void 0?{}:t,m="Unknown Server Error",c="Unknown @remix-run/router error";return e===400?(m="Bad Request",l&&r&&o?c="You made a "+l+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":d==="defer-action"?c="defer() is not supported in actions":d==="invalid-body"&&(c="Unable to encode submission body")):e===403?(m="Forbidden",c='Route "'+o+'" does not match URL "'+r+'"'):e===404?(m="Not Found",c='No route matches URL "'+r+'"'):e===405&&(m="Method Not Allowed",l&&r&&o?c="You made a "+l.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":l&&(c='Invalid request method "'+l.toUpperCase()+'"')),new ob(e||500,m,new Error(c),!0)}function IC(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(ic(r))return{result:r,idx:t}}}function jE(e){let t=typeof e=="string"?Rs(e):e;return Qp(kn({},t,{hash:""}))}function RV(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function LV(e){return VE(e.result)&&xV.has(e.result.status)}function nc(e){return e.type===xn.deferred}function ta(e){return e.type===xn.error}function ic(e){return(e&&e.type)===xn.redirect}function $V(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function VE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function BV(e){return _V.has(e.toLowerCase())}function za(e){return yV.has(e.toLowerCase())}async function PC(e,t,r,o,l,d){for(let m=0;m<r.length;m++){let c=r[m],b=t[m];if(!b)continue;let w=e.find(z=>z.route.id===b.route.id),T=w!=null&&!NE(w,b)&&(d&&d[b.route.id])!==void 0;if(nc(c)&&(l||T)){let z=o[m];Sr(z,"Expected an AbortSignal for revalidating fetcher deferred result"),await UE(c,z,l).then(P=>{P&&(r[m]=P||r[m])})}}}async function UE(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:xn.data,data:e.deferredData.unwrappedData}}catch(l){return{type:xn.error,error:l}}return{type:xn.data,data:e.deferredData.data}}}function lb(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function hx(e,t){let r=typeof t=="string"?Rs(t).search:t.search;if(e[e.length-1].route.index&&lb(r||""))return e[e.length-1];let o=LE(e);return o[o.length-1]}function EC(e){let{formMethod:t,formAction:r,formEncType:o,text:l,formData:d,json:m}=e;if(!(!t||!r||!o)){if(l!=null)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:void 0,text:l};if(d!=null)return{formMethod:t,formAction:r,formEncType:o,formData:d,json:void 0,text:void 0};if(m!==void 0)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:m,text:void 0}}}function J0(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function OV(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Mh(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function FV(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function el(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function NV(e,t){try{let r=e.sessionStorage.getItem(FE);if(r){let o=JSON.parse(r);for(let[l,d]of Object.entries(o||{}))d&&Array.isArray(d)&&t.set(l,new Set(d||[]))}}catch{}}function jV(e,t){if(t.size>0){let r={};for(let[o,l]of t)r[o]=[...l];try{e.sessionStorage.setItem(FE,JSON.stringify(r))}catch(o){td(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Mp.apply(this,arguments)}const Yy=O.createContext(null),HE=O.createContext(null),Qy=O.createContext(null),ev=O.createContext(null),ud=O.createContext({outlet:null,matches:[],isDataRoute:!1}),WE=O.createContext(null);function tv(){return O.useContext(ev)!=null}function cb(){return tv()||Sr(!1),O.useContext(ev).location}function GE(e){O.useContext(Qy).static||O.useLayoutEffect(e)}function VV(){let{isDataRoute:e}=O.useContext(ud);return e?e8():UV()}function UV(){tv()||Sr(!1);let e=O.useContext(Yy),{basename:t,future:r,navigator:o}=O.useContext(Qy),{matches:l}=O.useContext(ud),{pathname:d}=cb(),m=JSON.stringify($E(l,r.v7_relativeSplatPath)),c=O.useRef(!1);return GE(()=>{c.current=!0}),O.useCallback(function(w,T){if(T===void 0&&(T={}),!c.current)return;if(typeof w=="number"){o.go(w);return}let z=BE(w,JSON.parse(m),d,T.relative==="path");e==null&&t!=="/"&&(z.pathname=z.pathname==="/"?t:_l([t,z.pathname])),(T.replace?o.replace:o.push)(z,T.state,T)},[t,o,m,d,e])}function HV(e,t,r,o){tv()||Sr(!1);let{navigator:l}=O.useContext(Qy),{matches:d}=O.useContext(ud),m=d[d.length-1],c=m?m.params:{};m&&m.pathname;let b=m?m.pathnameBase:"/";m&&m.route;let w=cb(),T;if(t){var z;let J=typeof t=="string"?Rs(t):t;b==="/"||(z=J.pathname)!=null&&z.startsWith(b)||Sr(!1),T=J}else T=w;let P=T.pathname||"/",U=P;if(b!=="/"){let J=b.replace(/^\//,"").split("/");U="/"+P.replace(/^\//,"").split("/").slice(J.length).join("/")}let H=Pu(e,{pathname:U}),W=KV(H&&H.map(J=>Object.assign({},J,{params:Object.assign({},c,J.params),pathname:_l([b,l.encodeLocation?l.encodeLocation(J.pathname).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?b:_l([b,l.encodeLocation?l.encodeLocation(J.pathnameBase).pathname:J.pathnameBase])})),d,r,o);return t&&W?O.createElement(ev.Provider,{value:{location:Mp({pathname:"/",search:"",hash:"",state:null,key:"default"},T),navigationType:Gn.Pop}},W):W}function WV(){let e=QV(),t=ab(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),r?O.createElement("pre",{style:l},r):null,null)}const GV=O.createElement(WV,null);class qV extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?O.createElement(ud.Provider,{value:this.props.routeContext},O.createElement(WE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ZV(e){let{routeContext:t,match:r,children:o}=e,l=O.useContext(Yy);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),O.createElement(ud.Provider,{value:t},o)}function KV(e,t,r,o){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var d;if((d=r)!=null&&d.errors)e=r.matches;else return null}let m=e,c=(l=r)==null?void 0:l.errors;if(c!=null){let T=m.findIndex(z=>z.route.id&&(c==null?void 0:c[z.route.id])!==void 0);T>=0||Sr(!1),m=m.slice(0,Math.min(m.length,T+1))}let b=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let T=0;T<m.length;T++){let z=m[T];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(w=T),z.route.id){let{loaderData:P,errors:U}=r,H=z.route.loader&&P[z.route.id]===void 0&&(!U||U[z.route.id]===void 0);if(z.route.lazy||H){b=!0,w>=0?m=m.slice(0,w+1):m=[m[0]];break}}}return m.reduceRight((T,z,P)=>{let U,H=!1,W=null,J=null;r&&(U=c&&z.route.id?c[z.route.id]:void 0,W=z.route.errorElement||GV,b&&(w<0&&P===0?(t8("route-fallback",!1),H=!0,J=null):w===P&&(H=!0,J=z.route.hydrateFallbackElement||null)));let j=t.concat(m.slice(0,P+1)),$=()=>{let G;return U?G=W:H?G=J:z.route.Component?G=O.createElement(z.route.Component,null):z.route.element?G=z.route.element:G=T,O.createElement(ZV,{match:z,routeContext:{outlet:T,matches:j,isDataRoute:r!=null},children:G})};return r&&(z.route.ErrorBoundary||z.route.errorElement||P===0)?O.createElement(qV,{location:r.location,revalidation:r.revalidation,component:W,error:U,children:$(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):$()},null)}var qE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qE||{}),Bg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bg||{});function XV(e){let t=O.useContext(Yy);return t||Sr(!1),t}function JV(e){let t=O.useContext(HE);return t||Sr(!1),t}function YV(e){let t=O.useContext(ud);return t||Sr(!1),t}function ZE(e){let t=YV(),r=t.matches[t.matches.length-1];return r.route.id||Sr(!1),r.route.id}function QV(){var e;let t=O.useContext(WE),r=JV(Bg.UseRouteError),o=ZE(Bg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function e8(){let{router:e}=XV(qE.UseNavigateStable),t=ZE(Bg.UseNavigateStable),r=O.useRef(!1);return GE(()=>{r.current=!0}),O.useCallback(function(l,d){d===void 0&&(d={}),r.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Mp({fromRouteId:t},d)))},[e,t])}const zC={};function t8(e,t,r){!t&&!zC[e]&&(zC[e]=!0)}function px(e){Sr(!1)}function r8(e){let{basename:t="/",children:r=null,location:o,navigationType:l=Gn.Pop,navigator:d,static:m=!1,future:c}=e;tv()&&Sr(!1);let b=t.replace(/^\/*/,"/"),w=O.useMemo(()=>({basename:b,navigator:d,static:m,future:Mp({v7_relativeSplatPath:!1},c)}),[b,c,d,m]);typeof o=="string"&&(o=Rs(o));let{pathname:T="/",search:z="",hash:P="",state:U=null,key:H="default"}=o,W=O.useMemo(()=>{let J=ef(T,b);return J==null?null:{location:{pathname:J,search:z,hash:P,state:U,key:H},navigationType:l}},[b,T,z,P,U,H,l]);return W==null?null:O.createElement(Qy.Provider,{value:w},O.createElement(ev.Provider,{children:r,value:W}))}new Promise(()=>{});function fx(e,t){t===void 0&&(t=[]);let r=[];return O.Children.forEach(e,(o,l)=>{if(!O.isValidElement(o))return;let d=[...t,l];if(o.type===O.Fragment){r.push.apply(r,fx(o.props.children,d));return}o.type!==px&&Sr(!1),!o.props.index||!o.props.children||Sr(!1);let m={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=fx(o.props.children,d)),r.push(m)}),r}function n8(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:O.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:O.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:O.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Og.apply(this,arguments)}function mx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(l=>[r,l]):[[r,o]])},[]))}function i8(e,t){let r=mx(e);return t&&t.forEach((o,l)=>{r.has(l)||t.getAll(l).forEach(d=>{r.append(l,d)})}),r}const o8="6";try{window.__reactRouterVersion=o8}catch{}function a8(e,t){return CV({basename:t==null?void 0:t.basename,future:Og({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:qj({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||s8(),routes:e,mapRouteProperties:n8,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function s8(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Og({},t,{errors:l8(t.errors)})),t}function l8(e){if(!e)return null;let t=Object.entries(e),r={};for(let[o,l]of t)if(l&&l.__type==="RouteErrorResponse")r[o]=new ob(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let d=window[l.__subType];if(typeof d=="function")try{let m=new d(l.message);m.stack="",r[o]=m}catch{}}if(r[o]==null){let d=new Error(l.message);d.stack="",r[o]=d}}else r[o]=l;return r}const c8=O.createContext({isTransitioning:!1}),u8=O.createContext(new Map),d8="startTransition",AC=ig[d8],h8="flushSync",MC=EB[h8];function p8(e){AC?AC(e):e()}function Dh(e){MC?MC(e):e()}class f8{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}}function m8(e){let{fallbackElement:t,router:r,future:o}=e,[l,d]=O.useState(r.state),[m,c]=O.useState(),[b,w]=O.useState({isTransitioning:!1}),[T,z]=O.useState(),[P,U]=O.useState(),[H,W]=O.useState(),J=O.useRef(new Map),{v7_startTransition:j}=o||{},$=O.useCallback(Z=>{j?p8(Z):Z()},[j]),G=O.useCallback((Z,de)=>{let{deletedFetchers:Te,unstable_flushSync:ve,unstable_viewTransitionOpts:De}=de;Te.forEach(Ee=>J.current.delete(Ee)),Z.fetchers.forEach((Ee,He)=>{Ee.data!==void 0&&J.current.set(He,Ee.data)});let ke=r.window==null||typeof r.window.document.startViewTransition!="function";if(!De||ke){ve?Dh(()=>d(Z)):$(()=>d(Z));return}if(ve){Dh(()=>{P&&(T&&T.resolve(),P.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:De.currentLocation,nextLocation:De.nextLocation})});let Ee=r.window.document.startViewTransition(()=>{Dh(()=>d(Z))});Ee.finished.finally(()=>{Dh(()=>{z(void 0),U(void 0),c(void 0),w({isTransitioning:!1})})}),Dh(()=>U(Ee));return}P?(T&&T.resolve(),P.skipTransition(),W({state:Z,currentLocation:De.currentLocation,nextLocation:De.nextLocation})):(c(Z),w({isTransitioning:!0,flushSync:!1,currentLocation:De.currentLocation,nextLocation:De.nextLocation}))},[r.window,P,T,J,$]);O.useLayoutEffect(()=>r.subscribe(G),[r,G]),O.useEffect(()=>{b.isTransitioning&&!b.flushSync&&z(new f8)},[b]),O.useEffect(()=>{if(T&&m&&r.window){let Z=m,de=T.promise,Te=r.window.document.startViewTransition(async()=>{$(()=>d(Z)),await de});Te.finished.finally(()=>{z(void 0),U(void 0),c(void 0),w({isTransitioning:!1})}),U(Te)}},[$,m,T,r.window]),O.useEffect(()=>{T&&m&&l.location.key===m.location.key&&T.resolve()},[T,P,l.location,m]),O.useEffect(()=>{!b.isTransitioning&&H&&(c(H.state),w({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}),W(void 0))},[b.isTransitioning,H]),O.useEffect(()=>{},[]);let te=O.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:Z=>r.navigate(Z),push:(Z,de,Te)=>r.navigate(Z,{state:de,preventScrollReset:Te==null?void 0:Te.preventScrollReset}),replace:(Z,de,Te)=>r.navigate(Z,{replace:!0,state:de,preventScrollReset:Te==null?void 0:Te.preventScrollReset})}),[r]),ie=r.basename||"/",me=O.useMemo(()=>({router:r,navigator:te,static:!1,basename:ie}),[r,te,ie]);return O.createElement(O.Fragment,null,O.createElement(Yy.Provider,{value:me},O.createElement(HE.Provider,{value:l},O.createElement(u8.Provider,{value:J.current},O.createElement(c8.Provider,{value:b},O.createElement(r8,{basename:ie,location:l.location,navigationType:l.historyAction,navigator:te,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},l.initialized||r.future.v7_partialHydration?O.createElement(g8,{routes:r.routes,future:r.future,state:l}):t))))),null)}function g8(e){let{routes:t,future:r,state:o}=e;return HV(t,void 0,o,r)}var DC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DC||(DC={}));var RC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(RC||(RC={}));function y8(e){let t=O.useRef(mx(e)),r=O.useRef(!1),o=cb(),l=O.useMemo(()=>i8(o.search,r.current?null:t.current),[o.search]),d=VV(),m=O.useCallback((c,b)=>{const w=mx(typeof c=="function"?c(l):c);r.current=!0,d("?"+w,b)},[d,l]);return[l,m]}var eo=(e=>(e[e.Arizona=0]="Arizona",e[e.Colorado=1]="Colorado",e[e.Idaho=2]="Idaho",e[e.Kansas=3]="Kansas",e[e.Montana=4]="Montana",e[e.Nebraska=5]="Nebraska",e[e.Nevada=6]="Nevada",e[e.NewMexico=7]="NewMexico",e[e.Oklahoma=8]="Oklahoma",e[e.Oregon=9]="Oregon",e[e.Texas=10]="Texas",e[e.Utah=11]="Utah",e[e.Washington=12]="Washington",e[e.Wyoming=13]="Wyoming",e))(eo||{});const Dp=new Set([6,0,7,9,12,11,2,1,13,4,10,8,3,5]),v8={6:"Nevada",0:"Arizona",7:"New Mexico",9:"Oregon",12:"Washington",11:"Utah",2:"Idaho",1:"Colorado",13:"Wyoming",4:"Montana",10:"Texas",8:"Oklahoma",3:"Kansas",5:"Nebraska"},_8={0:new Set,1:new Set([6]),2:new Set([0]),3:new Set([7]),4:new Set([9]),5:new Set([12]),6:new Set([9,12]),7:new Set([11]),8:new Set([7,11]),9:new Set([2]),10:new Set([2,9]),11:new Set([2,11]),12:new Set([2,12]),13:new Set([1]),14:new Set([1,7]),15:new Set([1,11]),16:new Set([13]),17:new Set([1,13]),18:new Set([2,13]),19:new Set([11,13]),20:new Set([10]),21:new Set([7,10]),22:new Set([4]),23:new Set([2,4]),24:new Set([4,13]),25:new Set([8]),26:new Set([8,1]),27:new Set([8,7]),28:new Set([8,10]),29:new Set([3]),30:new Set([3,1]),31:new Set([3,8]),32:new Set([5]),33:new Set([5,1]),34:new Set([5,3]),35:new Set([5,13])};function KE(e){const t=new Set;for(const[r,o]of Object.entries(_8))[...o].every(l=>e.has(l))&&t.add(Number(r));return t}const x8=new Set([]);var XE=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e))(XE||{});const b8="modulepreload",w8=function(e){return"/"+e},LC={},S8=function(t,r,o){let l=Promise.resolve();if(r&&r.length>0){const d=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),c=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));l=Promise.all(r.map(b=>{if(b=w8(b),b in LC)return;LC[b]=!0;const w=b.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(!!o)for(let U=d.length-1;U>=0;U--){const H=d[U];if(H.href===b&&(!w||H.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${T}`))return;const P=document.createElement("link");if(P.rel=w?"stylesheet":b8,w||(P.as="script",P.crossOrigin=""),P.href=b,c&&P.setAttribute("nonce",c),document.head.appendChild(P),w)return new Promise((U,H)=>{P.addEventListener("load",U),P.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${b}`)))})}))}return l.then(()=>t()).catch(d=>{const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d})},JE=O.createContext(null);function C8(){var e;const t=(e=O.useContext(JE))===null||e===void 0?void 0:e.maps,r=O.useContext(xc);return O.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function k8(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,l=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===l&&o===d}function Ao(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ao(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const l of r)if(!t.hasOwnProperty(l)||!Ao(e[l],t[l]))return!1;return!0}return!1}function T8(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function $C(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();Ao(r,o)||t.setProjection(r)}function BC(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function OC(e,t){const r=t.viewState||t;let o=!1;if("longitude"in r&&"latitude"in r){const l=e.center;e.center=new l.constructor(r.longitude,r.latitude),o=o||l!==e.center}if("zoom"in r){const l=e.zoom;e.zoom=r.zoom,o=o||l!==e.zoom}if("bearing"in r){const l=e.bearing;e.bearing=r.bearing,o=o||l!==e.bearing}if("pitch"in r){const l=e.pitch;e.pitch=r.pitch,o=o||l!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),o}const I8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function FC(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let l=null;"interactive"in o&&(l=Object.assign({},o),delete l.interactive);const d=t[o.ref];if(d){l=l||Object.assign({},o),delete l.ref;for(const m of I8)m in d&&(l[m]=d[m])}return l||o});return{...e,layers:r}}var NC={};const jC={version:8,sources:{},layers:[]},VC={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Y0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},UC={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},P8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],E8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class rd{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=l=>{const d=this.props[UC[l.type]];d?d(l):l.type==="error"&&console.error(l.error)},this._onPointerEvent=l=>{(l.type==="mousemove"||l.type==="mouseout")&&this._updateHover(l);const d=this.props[VC[l.type]];d&&(this.props.interactiveLayerIds&&l.type!=="mouseover"&&l.type!=="mouseout"&&(l.features=this._hoveredFeatures||this._queryRenderedFeatures(l.point)),d(l),delete l.features)},this._onCameraEvent=l=>{if(!this._internalUpdate){const d=this.props[Y0[l.type]];d&&d(l)}l.type in this._deferredEvents&&(this._deferredEvents[l.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const l=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||l||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=rd.savedMaps.pop();if(!o)return null;const l=o.map,d=l.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);l._container=r;const m=l._resizeObserver;m&&(m.disconnect(),m.observe(r)),o.setProps({...t,styleDiffing:!1}),l.resize();const{initialViewState:c}=t;return c&&(c.bounds?l.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):o._updateViewState(c,!1)),l.isStyleLoaded()?l.fire("load"):l.once("styledata",()=>l.fire("load")),l._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=jC}=r,l={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||z8()||null,container:t,style:FC(o)},d=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),r.gl){const T=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=T,r.gl)}const m=new this._MapClass(l);d.padding&&m.setPadding(d.padding),r.cursor&&(m.getCanvas().style.cursor=r.cursor),this._createShadowTransform(m);const c=m._render;m._render=T=>{this._inRender=!0,c.call(m,T),this._inRender=!1};const b=m._renderTaskQueue.run;m._renderTaskQueue.run=T=>{b.call(m._renderTaskQueue,T),this._onBeforeRepaint()},m.on("render",()=>this._onAfterRepaint());const w=m.fire;m.fire=this._fireEvent.bind(this,w),m.on("resize",()=>{this._renderTransform.resize(m.transform.width,m.transform.height)}),m.on("styledata",()=>{this._updateStyleComponents(this.props,{}),$C(m.transform,this._renderTransform)}),m.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const T in VC)m.on(T,this._onPointerEvent);for(const T in Y0)m.on(T,this._onCameraEvent);for(const T in UC)m.on(T,this._onEvent);this._map=m}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),rd.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=T8(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,l=this._renderTransform,{zoom:d,pitch:m,bearing:c}=l,b=o.isMoving();b&&(l.cameraElevationReference="sea");const w=OC(l,{...BC(o.transform),...t});if(b&&(l.cameraElevationReference="ground"),w&&r){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=d!==l.zoom),T.rotate||(T.rotate=c!==l.bearing),T.pitch||(T.pitch=m!==l.pitch)}return b||OC(o.transform,t),w}_updateSettings(t,r){const o=this._map;let l=!1;for(const d of P8)if(d in t&&!Ao(t[d],r[d])){l=!0;const m=o[`set${d[0].toUpperCase()}${d.slice(1)}`];m==null||m.call(o,t[d])}return l}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=jC,styleDiffing:l=!0}=t,d={diff:l};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(FC(o),d),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let l=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!Ao(t.light,r.light)&&(l=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!Ao(t.fog,r.fog)&&(l=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!Ao(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(l=!0,o.setTerrain(t.terrain))),l}_updateHandlers(t,r){var o,l;const d=this._map;let m=!1;for(const c of E8){const b=(o=t[c])!==null&&o!==void 0?o:!0,w=(l=r[c])!==null&&l!==void 0?l:!0;Ao(b,w)||(m=!0,b?d[c].enable(b):d[c].disable())}return m}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:l=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:l.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const d=t.type,m=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,c=this._queryRenderedFeatures(t.point),b=c.length>0;!b&&m&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,b&&!m&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,o){const l=this._map,d=l.transform,m=typeof r=="string"?r:r.type;return m==="move"&&this._updateViewState(this.props,!1),m in Y0&&(typeof r=="object"&&(r.viewState=BC(d)),this._map.isMoving())?(l.transform=this._renderTransform,t.call(l,r,o),l.transform=d,l):(t.call(l,r,o),l)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{$C(this._renderTransform,r),t.transform=r}}}rd.savedMaps=[];function z8(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||NC.MapboxAccessToken}catch{}try{e=e||NC.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const A8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function M8(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const l=t.transform;t.transform=e.transform;const d=t.project(o);return t.transform=l,d},unproject:o=>{const l=t.transform;t.transform=e.transform;const d=t.unproject(o);return t.transform=l,d},queryTerrainElevation:(o,l)=>{const d=t.transform;t.transform=e.transform;const m=t.queryTerrainElevation(o,l);return t.transform=d,m},queryRenderedFeatures:(o,l)=>{const d=t.transform;t.transform=e.transform;const m=t.queryRenderedFeatures(o,l);return t.transform=d,m}};for(const o of D8(t))!(o in r)&&!A8.includes(o)&&(r[o]=t[o].bind(t));return r}function D8(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const R8=typeof document<"u"?O.useLayoutEffect:O.useEffect,L8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function $8(e,t){for(const o of L8)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const xc=O.createContext(null);function B8(e,t,r){const o=O.useContext(JE),[l,d]=O.useState(null),m=O.useRef(),{current:c}=O.useRef({mapLib:null,map:null});O.useEffect(()=>{const T=e.mapLib;let z=!0,P;return Promise.resolve(T||r).then(U=>{if(!z)return;if(!U)throw new Error("Invalid mapLib");const H="Map"in U?U:U.default;if(!H.Map)throw new Error("Invalid mapLib");if($8(H,e),!H.supported||H.supported(e))e.reuseMaps&&(P=rd.reuse(e,m.current)),P||(P=new rd(H.Map,e,m.current)),c.map=M8(P),c.mapLib=H,d(P),o==null||o.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(U=>{const{onError:H}=e;H?H({type:"error",target:null,originalEvent:null,error:U}):console.error(U)}),()=>{z=!1,P&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?P.recycle():P.destroy())}},[]),R8(()=>{l&&l.setProps(e)}),O.useImperativeHandle(t,()=>c.map,[l]);const b=O.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return O.createElement("div",{id:e.id,ref:m,style:b},l&&O.createElement(xc.Provider,{value:c},O.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const O8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function bc(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const l=t[o];Number.isFinite(l)&&!O8.test(o)?r[o]=`${l}px`:r[o]=l}}function F8(e,t){const{map:r,mapLib:o}=O.useContext(xc),l=O.useRef({props:e});l.current.props=e;const d=O.useMemo(()=>{let W=!1;O.Children.forEach(e.children,$=>{$&&(W=!0)});const J={...e,element:W?document.createElement("div"):null},j=new o.Marker(J);return j.setLngLat([e.longitude,e.latitude]),j.getElement().addEventListener("click",$=>{var G,te;(te=(G=l.current.props).onClick)===null||te===void 0||te.call(G,{type:"click",target:j,originalEvent:$})}),j.on("dragstart",$=>{var G,te;const ie=$;ie.lngLat=d.getLngLat(),(te=(G=l.current.props).onDragStart)===null||te===void 0||te.call(G,ie)}),j.on("drag",$=>{var G,te;const ie=$;ie.lngLat=d.getLngLat(),(te=(G=l.current.props).onDrag)===null||te===void 0||te.call(G,ie)}),j.on("dragend",$=>{var G,te;const ie=$;ie.lngLat=d.getLngLat(),(te=(G=l.current.props).onDragEnd)===null||te===void 0||te.call(G,ie)}),j},[]);O.useEffect(()=>(d.addTo(r.getMap()),()=>{d.remove()}),[]);const{longitude:m,latitude:c,offset:b,style:w,draggable:T=!1,popup:z=null,rotation:P=0,rotationAlignment:U="auto",pitchAlignment:H="auto"}=e;return O.useEffect(()=>{bc(d.getElement(),w)},[w]),O.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==m||d.getLngLat().lat!==c)&&d.setLngLat([m,c]),b&&!k8(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==T&&d.setDraggable(T),d.getRotation()!==P&&d.setRotation(P),d.getRotationAlignment()!==U&&d.setRotationAlignment(U),d.getPitchAlignment()!==H&&d.setPitchAlignment(H),d.getPopup()!==z&&d.setPopup(z),ld.createPortal(e.children,d.getElement())}const N8=O.memo(O.forwardRef(F8));function HC(e){return new Set(e?e.trim().split(/\s+/):[])}function j8(e,t){const{map:r,mapLib:o}=O.useContext(xc),l=O.useMemo(()=>document.createElement("div"),[]),d=O.useRef({props:e});d.current.props=e;const m=O.useMemo(()=>{const c={...e},b=new o.Popup(c);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var T,z;(z=(T=d.current.props).onOpen)===null||z===void 0||z.call(T,w)}),b},[]);if(O.useEffect(()=>{const c=b=>{var w,T;(T=(w=d.current.props).onClose)===null||T===void 0||T.call(w,b)};return m.on("close",c),m.setDOMContent(l).addTo(r.getMap()),()=>{m.off("close",c),m.isOpen()&&m.remove()}},[]),O.useEffect(()=>{bc(m.getElement(),e.style)},[e.style]),O.useImperativeHandle(t,()=>m,[]),m.isOpen()&&((m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!Ao(m.options.offset,e.offset)&&m.setOffset(e.offset),(m.options.anchor!==e.anchor||m.options.maxWidth!==e.maxWidth)&&(m.options.anchor=e.anchor,m.setMaxWidth(e.maxWidth)),m.options.className!==e.className)){const c=HC(m.options.className),b=HC(e.className);for(const w of c)b.has(w)||m.removeClassName(w);for(const w of b)c.has(w)||m.addClassName(w);m.options.className=e.className}return ld.createPortal(e.children,l)}O.memo(O.forwardRef(j8));function dd(e,t,r,o){const l=O.useContext(xc),d=O.useMemo(()=>e(l),[]);return O.useEffect(()=>{const m=o||r||t,c=typeof t=="function"&&typeof r=="function"?t:null,b=typeof r=="function"?r:typeof t=="function"?t:null,{map:w}=l;return w.hasControl(d)||(w.addControl(d,m==null?void 0:m.position),c&&c(l)),()=>{b&&b(l),w.hasControl(d)&&w.removeControl(d)}},[]),d}function V8(e){const t=dd(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return O.useEffect(()=>{bc(t._container,e.style)},[e.style]),null}const U8=O.memo(V8);function H8(e){const t=dd(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return O.useEffect(()=>{bc(t._controlContainer,e.style)},[e.style]),null}const W8=O.memo(H8);function G8(e,t){const r=O.useRef({props:e}),o=dd(({mapLib:l})=>{const d=new l.GeolocateControl(e),m=d._setupUI;return d._setupUI=c=>{d._container.hasChildNodes()||m(c)},d.on("geolocate",c=>{var b,w;(w=(b=r.current.props).onGeolocate)===null||w===void 0||w.call(b,c)}),d.on("error",c=>{var b,w;(w=(b=r.current.props).onError)===null||w===void 0||w.call(b,c)}),d.on("outofmaxbounds",c=>{var b,w;(w=(b=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,c)}),d.on("trackuserlocationstart",c=>{var b,w;(w=(b=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,c)}),d.on("trackuserlocationend",c=>{var b,w;(w=(b=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,c)}),d},{position:e.position});return r.current.props=e,O.useImperativeHandle(t,()=>o,[]),O.useEffect(()=>{bc(o._container,e.style)},[e.style]),null}O.memo(O.forwardRef(G8));function q8(e){const t=dd(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return O.useEffect(()=>{bc(t._container,e.style)},[e.style]),null}const Z8=O.memo(q8);function K8(e){const t=dd(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),r=O.useRef(e),o=r.current;r.current=e;const{style:l}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),O.useEffect(()=>{bc(t._container,l)},[l]),null}O.memo(K8);function Fg(e,t){if(!e)throw new Error(t)}function X8(e,t,r,o){if(Fg(r.id===o.id,"layer id changed"),Fg(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:l={},paint:d={},filter:m,minzoom:c,maxzoom:b,beforeId:w}=r;if(w!==o.beforeId&&e.moveLayer(t,w),l!==o.layout){const T=o.layout||{};for(const z in l)Ao(l[z],T[z])||e.setLayoutProperty(t,z,l[z]);for(const z in T)l.hasOwnProperty(z)||e.setLayoutProperty(t,z,void 0)}if(d!==o.paint){const T=o.paint||{};for(const z in d)Ao(d[z],T[z])||e.setPaintProperty(t,z,d[z]);for(const z in T)d.hasOwnProperty(z)||e.setPaintProperty(t,z,void 0)}Ao(m,o.filter)||e.setFilter(t,m),(c!==o.minzoom||b!==o.maxzoom)&&e.setLayerZoomRange(t,c,b)}function J8(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let Y8=0;function Q8(e){const t=O.useContext(xc).map.getMap(),r=O.useRef(e),[,o]=O.useState(0),l=O.useMemo(()=>e.id||`jsx-layer-${Y8++}`,[]);if(O.useEffect(()=>{if(t){const m=()=>o(c=>c+1);return t.on("styledata",m),m(),()=>{t.off("styledata",m),t.style&&t.style._loaded&&t.getLayer(l)&&t.removeLayer(l)}}},[t]),t&&t.style&&t.getLayer(l))try{X8(t,l,e,r.current)}catch(m){console.warn(m)}else J8(t,l,e);return r.current=e,null}let eU=0;function tU(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function rU(e,t,r){Fg(t.id===r.id,"source id changed"),Fg(t.type===r.type,"source type changed");let o="",l=0;for(const m in t)m!=="children"&&m!=="id"&&!Ao(r[m],t[m])&&(o=m,l++);if(!l)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&l===1&&o==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(o){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${o}`)}function nU(e){const t=O.useContext(xc).map.getMap(),r=O.useRef(e),[,o]=O.useState(0),l=O.useMemo(()=>e.id||`jsx-source-${eU++}`,[]);O.useEffect(()=>{if(t){const m=()=>setTimeout(()=>o(c=>c+1),0);return t.on("styledata",m),m(),()=>{var c;if(t.off("styledata",m),t.style&&t.style._loaded&&t.getSource(l)){const b=(c=t.getStyle())===null||c===void 0?void 0:c.layers;if(b)for(const w of b)w.source===l&&t.removeLayer(w.id);t.removeSource(l)}}}},[t]);let d=t&&t.style&&t.getSource(l);return d?rU(d,e,r.current):d=tU(t,l,e),r.current=e,d&&O.Children.map(e.children,m=>m&&O.cloneElement(m,{source:l}))||null}function ub(){return C8()}const iU=S8(()=>Promise.resolve().then(()=>aU),void 0),YE=O.forwardRef(function(t,r){return B8(t,r,iU)}),oU=N8,QE=U8,ez=W8,tz=Z8,Ur=Q8,tf=nU;var rz={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(qM,function(){var r,o,l;function d(c,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),l=b(T),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(c){function b(a,n,s,h){return new(s||(s=Promise))(function(f,v){function x(A){try{I(h.next(A))}catch(L){v(L)}}function S(A){try{I(h.throw(A))}catch(L){v(L)}}function I(A){var L;A.done?f(A.value):(L=A.value,L instanceof s?L:new s(function(N){N(L)})).then(x,S)}I((h=h.apply(a,n||[])).next())})}function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var T=z;function z(a,n){this.x=a,this.y=n}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(a,n){var s=Math.cos(a),h=Math.sin(a),f=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},z.convert=function(a){return a instanceof z?a:Array.isArray(a)?new z(a[0],a[1]):a};var P=w(T),U=H;function H(a,n,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=h}H.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var f=this.sampleCurveX(s)-a;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,S=1;for(s=a,h=0;h<20&&(f=this.sampleCurveX(s),!(Math.abs(f-a)<n));h++)a>f?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var W=w(U);let J,j;function $(){return J==null&&(J=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),J}function G(){if(j==null&&(j=!1,$())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const f=4*h;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){j=!0;break}}}return j||!1}function te(a,n,s,h){const f=new W(a,n,s,h);return function(v){return f.solve(v)}}const ie=te(.25,.1,.25,1);function me(a,n,s){return Math.min(s,Math.max(n,a))}function Z(a,n,s){const h=s-n,f=((a-n)%h+h)%h+n;return f===n?s:f}function de(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}let Te=1;function ve(a,n,s){const h={};for(const f in a)h[f]=n.call(s||this,a[f],f,a);return h}function De(a,n,s){const h={};for(const f in a)n.call(s||this,a[f],f,a)&&(h[f]=a[f]);return h}function ke(a){return Array.isArray(a)?a.map(ke):typeof a=="object"&&a?ve(a,ke):a}const Ee={};function He(a){Ee[a]||(typeof console<"u"&&console.warn(a),Ee[a]=!0)}function Fe(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function Ae(a){let n=0;for(let s,h,f=0,v=a.length,x=v-1;f<v;x=f++)s=a[f],h=a[x],n+=(h.x-s.x)*(s.y+h.y);return n}function Ge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Re=null;function Ze(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function dt(a,n,s,h,f){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),I=new Uint8ClampedArray(h*f*4);if(yield v.copyTo(I,function(A,L,N,q,Y){const ee=4*Math.max(-L,0),se=(Math.max(0,N)-N)*q*4+ee,fe=4*q,ye=Math.max(0,L),Ce=Math.max(0,N);return{rect:{x:ye,y:Ce,width:Math.min(A.width,L+q)-ye,height:Math.min(A.height,N+Y)-Ce},layout:[{offset:se,stride:fe}]}}(a,n,s,h,f)),S)for(let A=0;A<I.length;A+=4){const L=I[A];I[A]=I[A+2],I[A+2]=L}return I}finally{v.close()}})}let vt,mt,Ct,zt;const Zt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(Ct||(Ct=document.createElement("a")),Ct.href=a,Ct.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(zt==null&&(zt=matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},kt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class $e extends Error{constructor(n,s,h,f){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=f}}const rt=Ge()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,ht=a=>kt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function At(a,n){const s=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:rt(),signal:s.signal});let f=!1,v=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(I=>{v||(f=!0,n(null,I,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(I=>{v||n(new Error(I.message))})})(x):x.blob().then(S=>n(new $e(x.status,x.statusText,a.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,f||s.abort()}}}const Et=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Ge())return(ht(a.url)||At)(a,n)}if(!(/^file:/.test(s=a.url)||/^file:/.test(rt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return At(a,n);if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(h,f){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return f(S)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});f(new $e(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(a,n)},gr=function(a,n){return Et(de(a,{type:"arrayBuffer"}),n)};function Cr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function lr(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function yt(a,n,s){if(s&&s[a]){const h=s[a].indexOf(n);h!==-1&&s[a].splice(h,1)}}class Mr{constructor(n,s={}){de(this,s),this.type=n}}class er extends Mr{constructor(n,s={}){super("error",de({error:n},s))}}class Lr{on(n,s){return this._listeners=this._listeners||{},lr(n,s,this._listeners),this}off(n,s){return yt(n,s,this._listeners),yt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},lr(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Mr(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of f)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)yt(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(de(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof er&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const cr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ir(a,n){const s={};for(const h in a)h!=="ref"&&(s[h]=a[h]);return cr.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Bt(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let s=0;s<a.length;s++)if(!Bt(a[s],n[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const s in a)if(!Bt(a[s],n[s]))return!1;return!0}return a===n}const Gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kr(a,n,s){s.push({command:Gt.addSource,args:[a,n[a]]})}function Pr(a,n,s){n.push({command:Gt.removeSource,args:[a]}),s[a]=!0}function sr(a,n,s,h){Pr(a,s,h),kr(a,n,s)}function nr(a,n,s){let h;for(h in a[s])if(Object.prototype.hasOwnProperty.call(a[s],h)&&h!=="data"&&!Bt(a[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Bt(a[s][h],n[s][h]))return!1;return!0}function rr(a,n,s,h,f,v){let x;for(x in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,x)&&(Bt(a[x],n[x])||s.push({command:v,args:[h,x,n[x],f]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(Bt(a[x],n[x])||s.push({command:v,args:[h,x,n[x],f]}))}function Dr(a){return a.id}function it(a,n){return a[n.id]=n,a}class Le{constructor(n,s,h,f){this.message=(n?`${n}: `:"")+h,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function Ht(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}class Mt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class _r{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,f]of s)this.bindings[h]=f}concat(n){return new _r(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const xr={kind:"null"},Qe={kind:"number"},Kt={kind:"string"},Rt={kind:"boolean"},ar={kind:"color"},jr={kind:"object"},Jt={kind:"value"},mn={kind:"collator"},ue={kind:"formatted"},M={kind:"padding"},R={kind:"resolvedImage"},V={kind:"variableAnchorOffsetCollection"};function Q(a,n){return{kind:"array",itemType:a,N:n}}function re(a){if(a.kind==="array"){const n=re(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const xe=[xr,Qe,Kt,Rt,ar,ue,jr,Q(Jt),M,R,V];function pe(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!pe(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of xe)if(!pe(s,n))return null}}return`Expected ${re(a)} but found ${re(n)} instead.`}function ne(a,n){return n.some(s=>s.kind===a.kind)}function _e(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function ze(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const Ve=.96422,We=.82521,Ye=4/29,St=6/29,at=3*St*St,Dt=St*St*St,Me=Math.PI/180,Oe=180/Math.PI;function nt(a){return(a%=360)<0&&(a+=360),a}function ct([a,n,s,h]){let f,v;const x=ur((.2225045*(a=_t(a))+.7168786*(n=_t(n))+.0606169*(s=_t(s)))/1);a===n&&n===s?f=v=x:(f=ur((.4360747*a+.3850649*n+.1430804*s)/Ve),v=ur((.0139322*a+.0971045*n+.7141733*s)/We));const S=116*x-16;return[S<0?0:S,500*(f-x),200*(x-v),h]}function _t(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function ur(a){return a>Dt?Math.pow(a,1/3):a/at+Ye}function tr([a,n,s,h]){let f=(a+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*Xt(f),v=Ve*Xt(v),x=We*Xt(x),[yr(3.1338561*v-1.6168667*f-.4906146*x),yr(-.9787684*v+1.9161415*f+.033454*x),yr(.0719453*v-.2289914*f+1.4052427*x),h]}function yr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Xt(a){return a>St?a*a*a:at*(a-Ye)}function Tt(a){return parseInt(a.padEnd(2,a),16)/255}function Vr(a,n){return dr(n?a/100:a,0,1)}function dr(a,n,s){return Math.min(Math.max(n,a),s)}function zn(a){return!a.some(Number.isNaN)}const oo={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Tr{constructor(n,s,h,f=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,h,f]))}static parse(n){if(n instanceof Tr)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=oo[h];if(f){const[x,S,I]=f;return[x/255,S/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Tt(h.slice(S,S+=x)),Tt(h.slice(S,S+=x)),Tt(h.slice(S,S+=x)),Tt(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,I,A,L,N,q,Y,ee,se,fe,ye,Ce]=x,be=[L||" ",Y||" ",fe].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Ie=[A,q,se].join(""),Ne=Ie==="%%%"?100:Ie===""?255:0;if(Ne){const Ke=[dr(+I/Ne,0,1),dr(+N/Ne,0,1),dr(+ee/Ne,0,1),ye?Vr(+ye,Ce):1];if(zn(Ke))return Ke}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,I,A,L,N,q,Y,ee]=v,se=[I||" ",L||" ",q].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const fe=[+S,dr(+A,0,100),dr(+N,0,100),Y?Vr(+Y,ee):1];if(zn(fe))return function([ye,Ce,be,Ie]){function Ne(Ke){const wt=(Ke+ye/30)%12,$t=Ce*Math.min(be,1-be);return be-$t*Math.max(-1,Math.min(wt-3,9-wt,1))}return ye=nt(ye),Ce/=100,be/=100,[Ne(0),Ne(8),Ne(4),Ie]}(fe)}}}(n);return s?new Tr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,f,v]=ct(n),x=Math.sqrt(h*h+f*f);return[Math.round(1e4*x)?nt(Math.atan2(f,h)*Oe):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ct(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,f]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${f})`}}Tr.black=new Tr(0,0,0,1),Tr.white=new Tr(1,1,1,1),Tr.transparent=new Tr(0,0,0,0),Tr.red=new Tr(1,0,0,1);class ao{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ui{constructor(n,s,h,f,v){this.text=n,this.image=s,this.scale=h,this.fontStack=f,this.textColor=v}}class ai{constructor(n){this.sections=n}static fromString(n){return new ai([new Ui(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ai?n:ai.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Hi)return n;if(typeof n=="number")return new Hi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Hi(n)}}toString(){return JSON.stringify(this.values)}}const cv=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class so{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof so)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],f=n[s+1];if(typeof h!="string"||!cv.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new so(n)}}toString(){return JSON.stringify(this.values)}}class Qn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Qn({name:n,available:!1}):null}}function wc(a,n,s,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,s,h]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ls(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Tr||a instanceof ao||a instanceof ai||a instanceof Hi||a instanceof so||a instanceof Qn)return!0;if(Array.isArray(a)){for(const n of a)if(!Ls(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Ls(a[n]))return!1;return!0}return!1}function nn(a){if(a===null)return xr;if(typeof a=="string")return Kt;if(typeof a=="boolean")return Rt;if(typeof a=="number")return Qe;if(a instanceof Tr)return ar;if(a instanceof ao)return mn;if(a instanceof ai)return ue;if(a instanceof Hi)return M;if(a instanceof so)return V;if(a instanceof Qn)return R;if(Array.isArray(a)){const n=a.length;let s;for(const h of a){const f=nn(h);if(s){if(s===f)continue;s=Jt;break}s=f}return Q(s||Jt,n)}return jr}function Er(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof Tr||a instanceof ai||a instanceof Hi||a instanceof so||a instanceof Qn?a.toString():JSON.stringify(a)}class is{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ls(n[1]))return s.error("invalid value");const h=n[1];let f=nn(h);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new is(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class un{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Sc={string:Kt,number:Qe,boolean:Rt,object:jr};class lo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,f=1;const v=n[0];if(v==="array"){let S,I;if(n.length>2){const A=n[1];if(typeof A!="string"||!(A in Sc)||A==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Sc[A],f++}else S=Jt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],f++}h=Q(S,I)}else{if(!Sc[v])throw new Error(`Types doesn't contain name = ${v}`);h=Sc[v]}const x=[];for(;f<n.length;f++){const S=s.parse(n[f],f,Jt);if(!S)return null;x.push(S)}return new lo(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!pe(this.type,nn(h)))return h;if(s===this.args.length-1)throw new un(`Expected value to be of type ${re(this.type)}, but found ${re(nn(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const fd={"to-boolean":Rt,"to-color":ar,"to-number":Qe,"to-string":Kt};class Ba{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!fd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=fd[h],v=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,Jt);if(!S)return null;v.push(S)}return new Ba(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const f of this.args){if(s=f.evaluate(n),h=null,s instanceof Tr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:wc(s[0],s[1],s[2],s[3]),!h))return new Tr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new un(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const f=Hi.parse(s);if(f)return f}throw new un(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const f=so.parse(s);if(f)return f}throw new un(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new un(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return ai.fromString(Er(this.args[0].evaluate(n)));case"resolvedImage":return Qn.fromString(Er(this.args[0].evaluate(n)));default:return Er(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const lf=["Unknown","Point","LineString","Polygon"];class md{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?lf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Tr.parse(n)),s}}class Cc{constructor(n,s,h=[],f,v=new _r,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,h,f,v={}){return s?this.concat(s,h,f)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(f,v,x){return x==="assert"?new lo(v,[f]):x==="coerce"?new Ba(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,I=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||I.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(S.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(S,I))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof is)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new md;try{x=new is(x.type,x.evaluate(S))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const f=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Cc(this.registry,this._isConstant,f,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new Mt(h,n))}checkSubtype(n,s){const h=pe(n,s);return h&&this.error(h),h}}class kc{constructor(n,s,h){this.type=mn,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const f=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Rt);if(!f)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Rt);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Kt),!x)?null:new kc(f,v,x)}evaluate(n){return new ao(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Oa=8192;function gd(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Pl(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function cf(a,n){const s=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*Oa),Math.round(h*f*Oa)]}function uv(a,n,s){const h=a[0]-n[0],f=a[1]-n[1],v=a[0]-s[0],x=a[1]-s[1];return h*x-v*f==0&&h*v<=0&&f*x<=0}function yd(a,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const I=n[x];for(let A=0,L=I.length;A<L-1;A++){if(uv(a,I[A],I[A+1]))return!1;(f=I[A])[1]>(h=a)[1]!=(v=I[A+1])[1]>h[1]&&h[0]<(v[0]-f[0])*(h[1]-f[1])/(v[1]-f[1])+f[0]&&(s=!s)}}var h,f,v;return s}function vd(a,n){for(let s=0;s<n.length;s++)if(yd(a,n[s]))return!0;return!1}function uf(a,n,s,h){const f=h[0]-s[0],v=h[1]-s[1],x=(a[0]-s[0])*v-f*(a[1]-s[1]),S=(n[0]-s[0])*v-f*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function dv(a,n,s){for(const A of s)for(let L=0;L<A.length-1;++L)if((S=[(x=A[L+1])[0]-(v=A[L])[0],x[1]-v[1]])[0]*(I=[(f=n)[0]-(h=a)[0],f[1]-h[1]])[1]-S[1]*I[0]!=0&&uf(h,f,v,x)&&uf(v,x,h,f))return!0;var h,f,v,x,S,I;return!1}function df(a,n){for(let s=0;s<a.length;++s)if(!yd(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(dv(a[s],a[s+1],n))return!1;return!0}function hf(a,n){for(let s=0;s<n.length;s++)if(df(a,n[s]))return!0;return!1}function Tc(a,n,s){const h=[];for(let f=0;f<a.length;f++){const v=[];for(let x=0;x<a[f].length;x++){const S=cf(a[f][x],s);gd(n,S),v.push(S)}h.push(v)}return h}function pf(a,n,s){const h=[];for(let f=0;f<a.length;f++){const v=Tc(a[f],n,s);h.push(v)}return h}function ff(a,n,s,h){if(a[0]<s[0]||a[0]>s[2]){const f=.5*h;let v=a[0]-s[0]>f?-h:s[0]-a[0]>f?h:0;v===0&&(v=a[0]-s[2]>f?-h:s[2]-a[0]>f?h:0),a[0]+=v}gd(n,a)}function _d(a,n,s,h){const f=Math.pow(2,h.z)*Oa,v=[h.x*Oa,h.y*Oa],x=[];for(const S of a)for(const I of S){const A=[I.x+v[0],I.y+v[1]];ff(A,n,s,f),x.push(A)}return x}function xd(a,n,s,h){const f=Math.pow(2,h.z)*Oa,v=[h.x*Oa,h.y*Oa],x=[];for(const I of a){const A=[];for(const L of I){const N=[L.x+v[0],L.y+v[1]];gd(n,N),A.push(N)}x.push(A)}if(n[2]-n[0]<=f/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const I of x)for(const A of I)ff(A,n,s,f)}var S;return x}class os{constructor(n,s){this.type=Rt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ls(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let f=0;f<h.features.length;++f){const v=h.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new os(h,h.features[f].geometry)}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new os(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new os(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Tc(h.coordinates,v,x),I=_d(s.geometry(),f,v,x);if(!Pl(f,v))return!1;for(const A of I)if(!yd(A,S))return!1}if(h.type==="MultiPolygon"){const S=pf(h.coordinates,v,x),I=_d(s.geometry(),f,v,x);if(!Pl(f,v))return!1;for(const A of I)if(!vd(A,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Tc(h.coordinates,v,x),I=xd(s.geometry(),f,v,x);if(!Pl(f,v))return!1;for(const A of I)if(!df(A,S))return!1}if(h.type==="MultiPolygon"){const S=pf(h.coordinates,v,x),I=xd(s.geometry(),f,v,x);if(!Pl(f,v))return!1;for(const A of I)if(!hf(A,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ic{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Ic(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class co{constructor(n,s,h,f){this.name=n,this.type=s,this._evaluate=h,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],f=co.definitions[h];if(!f)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,S=x.filter(([A])=>!Array.isArray(A)||A.length===n.length-1);let I=null;for(const[A,L]of S){I=new Cc(s.registry,Pc,s.path,null,s.scope);const N=[];let q=!1;for(let Y=1;Y<n.length;Y++){const ee=n[Y],se=Array.isArray(A)?A[Y-1]:A.type,fe=I.parse(ee,1+N.length,se);if(!fe){q=!0;break}N.push(fe)}if(!q)if(Array.isArray(A)&&A.length!==N.length)I.error(`Expected ${A.length} arguments, but found ${N.length} instead.`);else{for(let Y=0;Y<N.length;Y++){const ee=Array.isArray(A)?A[Y]:A.type,se=N[Y];I.concat(Y+1).checkSubtype(ee,se.type)}if(I.errors.length===0)return new co(h,v,L,N)}}if(S.length===1)s.errors.push(...I.errors);else{const A=(S.length?S:x).map(([N])=>{return q=N,Array.isArray(q)?`(${q.map(re).join(", ")})`:`(${re(q.type)}...)`;var q}).join(" | "),L=[];for(let N=1;N<n.length;N++){const q=s.parse(n[N],1+L.length);if(!q)return null;L.push(re(q.type))}s.error(`Expected arguments of type ${A}, but found (${L.join(", ")}) instead.`)}return null}static register(n,s){co.definitions=s;for(const h in s)n[h]=co}}function Pc(a){if(a instanceof Ic)return Pc(a.boundExpression);if(a instanceof co&&a.name==="error"||a instanceof kc||a instanceof os)return!1;const n=a instanceof Ba||a instanceof lo;let s=!0;return a.eachChild(h=>{s=n?s&&Pc(h):s&&h instanceof is}),!!s&&Ec(a)&&zc(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ec(a){if(a instanceof co&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof os)return!1;let n=!0;return a.eachChild(s=>{n&&!Ec(s)&&(n=!1)}),n}function El(a){if(a instanceof co&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!El(s)&&(n=!1)}),n}function zc(a,n){if(a instanceof co&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(h=>{s&&!zc(h,n)&&(s=!1)}),s}function $s(a,n){const s=a.length-1;let h,f,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=a[S],f=a[S+1],h<=n){if(S===s||n<f)return S;v=S+1}else{if(!(h>n))throw new un("Input is not a number.");x=S-1}return 0}class Fa{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of h)this.labels.push(f),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Qe);if(!h)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],I=n[x+1],A=x,L=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(f.length&&f[f.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const N=s.parse(I,L,v);if(!N)return null;v=v||N.type,f.push([S,N])}return new Fa(v,h,f)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const v=s.length;return f>=s[v-1]?h[v-1].evaluate(n):h[$s(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function br(a,n,s){return a+s*(n-a)}function Ac(a,n,s){return a.map((h,f)=>br(h,n[f],s))}const Wi={number:br,color:function(a,n,s,h="rgb"){switch(h){case"rgb":{const[f,v,x,S]=Ac(a.rgb,n.rgb,s);return new Tr(f,v,x,S,!1)}case"hcl":{const[f,v,x,S]=a.hcl,[I,A,L,N]=n.hcl;let q,Y;if(isNaN(f)||isNaN(I))isNaN(f)?isNaN(I)?q=NaN:(q=I,x!==1&&x!==0||(Y=A)):(q=f,L!==1&&L!==0||(Y=v));else{let Ce=I-f;I>f&&Ce>180?Ce-=360:I<f&&f-I>180&&(Ce+=360),q=f+s*Ce}const[ee,se,fe,ye]=function([Ce,be,Ie,Ne]){return Ce=isNaN(Ce)?0:Ce*Me,tr([Ie,Math.cos(Ce)*be,Math.sin(Ce)*be,Ne])}([q,Y??br(v,A,s),br(x,L,s),br(S,N,s)]);return new Tr(ee,se,fe,ye,!1)}case"lab":{const[f,v,x,S]=tr(Ac(a.lab,n.lab,s));return new Tr(f,v,x,S,!1)}}},array:Ac,padding:function(a,n,s){return new Hi(Ac(a.values,n.values,s))},variableAnchorOffsetCollection:function(a,n,s){const h=a.values,f=n.values;if(h.length!==f.length)throw new un(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==f[x])throw new un(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${f[x]}`);v.push(h[x]);const[S,I]=h[x+1],[A,L]=f[x+1];v.push([br(S,A,s),br(I,L,s)])}return new so(v)}};class Gi{constructor(n,s,h,f,v){this.type=n,this.operator=s,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,f){let v=0;if(n.name==="exponential")v=bd(s,n.base,h,f);else if(n.name==="linear")v=bd(s,1,h,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new W(x[0],x[1],x[2],x[3]).solve(bd(s,1,h,f))}return v}static parse(n,s){let[h,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const A=f[1];if(typeof A!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:A}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const A=f.slice(1);if(A.length!==4||A.some(L=>typeof L!="number"||L<0||L>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:A}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Qe),!v)return null;const S=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=ar:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let A=0;A<x.length;A+=2){const L=x[A],N=x[A+1],q=A+3,Y=A+4;if(typeof L!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(S.length&&S[S.length-1][0]>=L)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const ee=s.parse(N,Y,I);if(!ee)return null;I=I||ee.type,S.push([L,ee])}return ze(I,Qe)||ze(I,ar)||ze(I,M)||ze(I,V)||ze(I,Q(Qe))?new Gi(I,h,f,v,S):s.error(`Type ${re(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const v=s.length;if(f>=s[v-1])return h[v-1].evaluate(n);const x=$s(s,f),S=Gi.interpolationFactor(this.interpolation,f,s[x],s[x+1]),I=h[x].evaluate(n),A=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Wi[this.type.kind](I,A,S);case"interpolate-hcl":return Wi.color(I,A,S,"hcl");case"interpolate-lab":return Wi.color(I,A,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function bd(a,n,s,h){const f=h-s,v=a-s;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class Mc{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const f=s.expectedType;f&&f.kind!=="value"&&(h=f);const v=[];for(const S of n.slice(1)){const I=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,v.push(I)}if(!h)throw new Error("No output type");const x=f&&v.some(S=>pe(f,S.type));return new Mc(x?Jt:h,v)}evaluate(n){let s,h=null,f=0;for(const v of this.args)if(f++,h=v.evaluate(n),h&&h instanceof Qn&&!h.available&&(s||(s=h.name),h=null,f===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Dc{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return f?new Dc(h,f):null}outputDefined(){return this.result.outputDefined()}}class wd{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Qe),f=s.parse(n[2],2,Q(s.expectedType||Jt));return h&&f?new wd(f.type.itemType,h,f):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new un(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new un(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new un(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Sd{constructor(n,s){this.type=Rt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Jt),f=s.parse(n[2],2,Jt);return h&&f?ne(h.type,[Rt,Kt,Qe,xr,Jt])?new Sd(h,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${re(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!_e(s,["boolean","string","number","null"]))throw new un(`Expected first argument to be of type boolean, string, number or null, but found ${re(nn(s))} instead.`);if(!_e(h,["string","array"]))throw new un(`Expected second argument to be of type array or string, but found ${re(nn(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Rc{constructor(n,s,h){this.type=Qe,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Jt),f=s.parse(n[2],2,Jt);if(!h||!f)return null;if(!ne(h.type,[Rt,Kt,Qe,xr,Jt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${re(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Qe);return v?new Rc(h,f,v):null}return new Rc(h,f)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!_e(s,["boolean","string","number","null"]))throw new un(`Expected first argument to be of type boolean, string, number or null, but found ${re(nn(s))} instead.`);if(!_e(h,["string","array"]))throw new un(`Expected second argument to be of type array or string, but found ${re(nn(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return h.indexOf(s,f)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Cd{constructor(n,s,h,f,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let A=2;A<n.length-1;A+=2){let L=n[A];const N=n[A+1];Array.isArray(L)||(L=[L]);const q=s.concat(A);if(L.length===0)return q.error("Expected at least one branch label.");for(const ee of L){if(typeof ee!="number"&&typeof ee!="string")return q.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return q.error("Numeric branch labels must be integer values.");if(h){if(q.checkSubtype(h,nn(ee)))return null}else h=nn(ee);if(v[String(ee)]!==void 0)return q.error("Branch labels must be unique.");v[String(ee)]=x.length}const Y=s.parse(N,A,f);if(!Y)return null;f=f||Y.type,x.push(Y)}const S=s.parse(n[1],1,Jt);if(!S)return null;const I=s.parse(n[n.length-1],n.length-1,f);return I?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Cd(h,f,S,v,x,I):null}evaluate(n){const s=this.input.evaluate(n);return(nn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class kd{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,Rt);if(!S)return null;const I=s.parse(n[x+1],x+1,h);if(!I)return null;f.push([S,I]),h=h||I.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new kd(h,f,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Lc{constructor(n,s,h,f){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Jt),f=s.parse(n[2],2,Qe);if(!h||!f)return null;if(!ne(h.type,[Q(Jt),Kt,Jt]))return s.error(`Expected first argument to be of type array or string, but found ${re(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Qe);return v?new Lc(h.type,h,f,v):null}return new Lc(h.type,h,f)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!_e(s,["string","array"]))throw new un(`Expected first argument to be of type array or string, but found ${re(nn(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return s.slice(h,f)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function mf(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function gf(a,n,s,h){return h.compare(n,s)===0}function Bs(a,n,s){const h=a!=="=="&&a!=="!=";return class nz{constructor(v,x,S){this.type=Rt,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let I=x.parse(v[1],1,Jt);if(!I)return null;if(!mf(S,I.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${re(I.type)}'.`);let A=x.parse(v[2],2,Jt);if(!A)return null;if(!mf(S,A.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${re(A.type)}'.`);if(I.type.kind!==A.type.kind&&I.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${re(I.type)}' and '${re(A.type)}'.`);h&&(I.type.kind==="value"&&A.type.kind!=="value"?I=new lo(A.type,[I]):I.type.kind!=="value"&&A.type.kind==="value"&&(A=new lo(I.type,[A])));let L=null;if(v.length===4){if(I.type.kind!=="string"&&A.type.kind!=="string"&&I.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(v[3],3,mn),!L)return null}return new nz(I,A,L)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const I=nn(x),A=nn(S);if(I.kind!==A.kind||I.kind!=="string"&&I.kind!=="number")throw new un(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${I.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=nn(x),A=nn(S);if(I.kind!=="string"||A.kind!=="string")return n(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const hv=Bs("==",function(a,n,s){return n===s},gf),pv=Bs("!=",function(a,n,s){return n!==s},function(a,n,s,h){return!gf(0,n,s,h)}),fv=Bs("<",function(a,n,s){return n<s},function(a,n,s,h){return h.compare(n,s)<0}),mv=Bs(">",function(a,n,s){return n>s},function(a,n,s,h){return h.compare(n,s)>0}),gv=Bs("<=",function(a,n,s){return n<=s},function(a,n,s,h){return h.compare(n,s)<=0}),yv=Bs(">=",function(a,n,s){return n>=s},function(a,n,s,h){return h.compare(n,s)>=0});class Td{constructor(n,s,h,f,v){this.type=Kt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Qe);if(!h)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,Kt),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,Kt),!x))return null;let S=null;if(f["min-fraction-digits"]&&(S=s.parse(f["min-fraction-digits"],1,Qe),!S))return null;let I=null;return f["max-fraction-digits"]&&(I=s.parse(f["max-fraction-digits"],1,Qe),!I)?null:new Td(h,v,x,S,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class $c{constructor(n){this.type=ue,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let I=null;if(S["font-scale"]&&(I=s.parse(S["font-scale"],1,Qe),!I))return null;let A=null;if(S["text-font"]&&(A=s.parse(S["text-font"],1,Q(Kt)),!A))return null;let L=null;if(S["text-color"]&&(L=s.parse(S["text-color"],1,ar),!L))return null;const N=f[f.length-1];N.scale=I,N.font=A,N.textColor=L}else{const I=s.parse(n[x],1,Jt);if(!I)return null;const A=I.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:I,scale:null,font:null,textColor:null})}}return new $c(f)}evaluate(n){return new ai(this.sections.map(s=>{const h=s.content.evaluate(n);return nn(h)===R?new Ui("",h,null,null,null):new Ui(Er(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class Id{constructor(n){this.type=R,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Kt);return h?new Id(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Qn.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Pd{constructor(n){this.type=Qe,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${re(h.type)} instead.`):new Pd(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new un(`Expected value to be of type string or array, but found ${re(nn(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Os={"==":hv,"!=":pv,">":mv,"<":fv,">=":yv,"<=":gv,array:lo,at:wd,boolean:lo,case:kd,coalesce:Mc,collator:kc,format:$c,image:Id,in:Sd,"index-of":Rc,interpolate:Gi,"interpolate-hcl":Gi,"interpolate-lab":Gi,length:Pd,let:Dc,literal:is,match:Cd,number:lo,"number-format":Td,object:lo,slice:Lc,step:Fa,string:lo,"to-boolean":Ba,"to-color":Ba,"to-number":Ba,"to-string":Ba,var:Ic,within:os};function yf(a,[n,s,h,f]){n=n.evaluate(a),s=s.evaluate(a),h=h.evaluate(a);const v=f?f.evaluate(a):1,x=wc(n,s,h,v);if(x)throw new un(x);return new Tr(n/255,s/255,h/255,v,!1)}function vf(a,n){return a in n}function Ed(a,n){const s=n[a];return s===void 0?null:s}function as(a){return{type:a}}function _f(a){return{result:"success",value:a}}function Na(a){return{result:"error",value:a}}function Fs(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function xf(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function zd(a){return!!a.expression&&a.expression.interpolated}function zr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function on(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function vv(a){return a}function wr(a,n){const s=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",f=h||!(h||a.property!==void 0),v=a.type||(zd(n)?"exponential":"interval");if(s||n.type==="padding"){const L=s?Tr.parse:Hi.parse;(a=Ht({},a)).stops&&(a.stops=a.stops.map(N=>[N[0],L(N[1])])),a.default=L(a.default?a.default:n.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let S,I,A;if(v==="exponential")S=zl;else if(v==="interval")S=tn;else if(v==="categorical"){S=an,I=Object.create(null);for(const L of a.stops)I[L[0]]=L[1];A=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=bf}if(h){const L={},N=[];for(let ee=0;ee<a.stops.length;ee++){const se=a.stops[ee],fe=se[0].zoom;L[fe]===void 0&&(L[fe]={zoom:fe,type:a.type,property:a.property,default:a.default,stops:[]},N.push(fe)),L[fe].stops.push([se[0].value,se[1]])}const q=[];for(const ee of N)q.push([L[ee].zoom,wr(L[ee],n)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Gi.interpolationFactor.bind(void 0,Y),zoomStops:q.map(ee=>ee[0]),evaluate:({zoom:ee},se)=>zl({stops:q,base:a.base},n,ee).evaluate(ee,se)}}if(f){const L=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Gi.interpolationFactor.bind(void 0,L),zoomStops:a.stops.map(N=>N[0]),evaluate:({zoom:N})=>S(a,n,N,I,A)}}return{kind:"source",evaluate(L,N){const q=N&&N.properties?N.properties[a.property]:void 0;return q===void 0?ss(a.default,n.default):S(a,n,q,I,A)}}}function ss(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function an(a,n,s,h,f){return ss(typeof s===f?h[s]:void 0,a.default,n.default)}function tn(a,n,s){if(zr(s)!=="number")return ss(a.default,n.default);const h=a.stops.length;if(h===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[h-1][0])return a.stops[h-1][1];const f=$s(a.stops.map(v=>v[0]),s);return a.stops[f][1]}function zl(a,n,s){const h=a.base!==void 0?a.base:1;if(zr(s)!=="number")return ss(a.default,n.default);const f=a.stops.length;if(f===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[f-1][0])return a.stops[f-1][1];const v=$s(a.stops.map(L=>L[0]),s),x=function(L,N,q,Y){const ee=Y-q,se=L-q;return ee===0?0:N===1?se/ee:(Math.pow(N,se)-1)/(Math.pow(N,ee)-1)}(s,h,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],I=a.stops[v+1][1],A=Wi[n.type]||vv;return typeof S.evaluate=="function"?{evaluate(...L){const N=S.evaluate.apply(void 0,L),q=I.evaluate.apply(void 0,L);if(N!==void 0&&q!==void 0)return A(N,q,x,a.colorSpace)}}:A(S,I,x,a.colorSpace)}function bf(a,n,s){switch(n.type){case"color":s=Tr.parse(s);break;case"formatted":s=ai.fromString(s.toString());break;case"resolvedImage":s=Qn.fromString(s.toString());break;case"padding":s=Hi.parse(s);break;default:zr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return ss(s,a.default,n.default)}co.register(Os,{error:[{kind:"error"},[Kt],(a,[n])=>{throw new un(n.evaluate(a))}],typeof:[Kt,[Jt],(a,[n])=>re(nn(n.evaluate(a)))],"to-rgba":[Q(Qe,4),[ar],(a,[n])=>{const[s,h,f,v]=n.evaluate(a).rgb;return[255*s,255*h,255*f,v]}],rgb:[ar,[Qe,Qe,Qe],yf],rgba:[ar,[Qe,Qe,Qe,Qe],yf],has:{type:Rt,overloads:[[[Kt],(a,[n])=>vf(n.evaluate(a),a.properties())],[[Kt,jr],(a,[n,s])=>vf(n.evaluate(a),s.evaluate(a))]]},get:{type:Jt,overloads:[[[Kt],(a,[n])=>Ed(n.evaluate(a),a.properties())],[[Kt,jr],(a,[n,s])=>Ed(n.evaluate(a),s.evaluate(a))]]},"feature-state":[Jt,[Kt],(a,[n])=>Ed(n.evaluate(a),a.featureState||{})],properties:[jr,[],a=>a.properties()],"geometry-type":[Kt,[],a=>a.geometryType()],id:[Jt,[],a=>a.id()],zoom:[Qe,[],a=>a.globals.zoom],"heatmap-density":[Qe,[],a=>a.globals.heatmapDensity||0],"line-progress":[Qe,[],a=>a.globals.lineProgress||0],accumulated:[Jt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Qe,as(Qe),(a,n)=>{let s=0;for(const h of n)s+=h.evaluate(a);return s}],"*":[Qe,as(Qe),(a,n)=>{let s=1;for(const h of n)s*=h.evaluate(a);return s}],"-":{type:Qe,overloads:[[[Qe,Qe],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[Qe],(a,[n])=>-n.evaluate(a)]]},"/":[Qe,[Qe,Qe],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[Qe,[Qe,Qe],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[Qe,[Qe],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[Qe,[Qe],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[Qe,[Qe],(a,[n])=>Math.log(n.evaluate(a))],log2:[Qe,[Qe],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[Qe,[Qe],(a,[n])=>Math.sin(n.evaluate(a))],cos:[Qe,[Qe],(a,[n])=>Math.cos(n.evaluate(a))],tan:[Qe,[Qe],(a,[n])=>Math.tan(n.evaluate(a))],asin:[Qe,[Qe],(a,[n])=>Math.asin(n.evaluate(a))],acos:[Qe,[Qe],(a,[n])=>Math.acos(n.evaluate(a))],atan:[Qe,[Qe],(a,[n])=>Math.atan(n.evaluate(a))],min:[Qe,as(Qe),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[Qe,as(Qe),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[Qe,[Qe],(a,[n])=>Math.abs(n.evaluate(a))],round:[Qe,[Qe],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[Qe,[Qe],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[Qe,[Qe],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[Rt,[Kt,Jt],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[Rt,[Jt],(a,[n])=>a.id()===n.value],"filter-type-==":[Rt,[Kt],(a,[n])=>a.geometryType()===n.value],"filter-<":[Rt,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Rt,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Rt,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h>f}],"filter-id->":[Rt,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Rt,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Rt,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Rt,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Rt,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Rt,[Jt],(a,[n])=>n.value in a.properties()],"filter-has-id":[Rt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Rt,[Q(Kt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[Rt,[Q(Jt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[Rt,[Kt,Q(Jt)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[Rt,[Kt,Q(Jt)],(a,[n,s])=>function(h,f,v,x){for(;v<=x;){const S=v+x>>1;if(f[S]===h)return!0;f[S]>h?x=S-1:v=S+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Rt,overloads:[[[Rt,Rt],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[as(Rt),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[as(Rt),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[Rt,[Rt],(a,[n])=>!n.evaluate(a)],"is-supported-script":[Rt,[Kt],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Kt,[Kt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Kt,[Kt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Kt,as(Jt),(a,n)=>n.map(s=>Er(s.evaluate(a))).join("")],"resolved-locale":[Kt,[mn],(a,[n])=>n.evaluate(a).resolvedLocale()]});class Ad{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new md,this._defaultValue=s?(h=s).type==="color"&&on(h.default)?new Tr(0,0,0,0):h.type==="color"?Tr.parse(h.default)||null:h.type==="padding"?Hi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?so.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,f,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new un(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Bc(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Os}function Oc(a,n){const s=new Cc(Os,Pc,[],n?function(f){const v={color:ar,string:Kt,number:Qe,enum:Kt,boolean:Rt,formatted:ue,padding:M,resolvedImage:R,variableAnchorOffsetCollection:V};return f.type==="array"?Q(v[f.value]||Jt,f.length):v[f.type]}(n):void 0),h=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?_f(new Ad(h,n)):Na(s.errors)}class Md{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!El(s.expression)}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,v,x)}evaluate(n,s,h,f,v,x){return this._styleExpression.evaluate(n,s,h,f,v,x)}}class Fc{constructor(n,s,h,f){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!El(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,v,x)}evaluate(n,s,h,f,v,x){return this._styleExpression.evaluate(n,s,h,f,v,x)}interpolationFactor(n,s,h){return this.interpolationType?Gi.interpolationFactor(this.interpolationType,n,s,h):0}}function Dd(a,n){const s=Oc(a,n);if(s.result==="error")return s;const h=s.value.expression,f=Ec(h);if(!f&&!Fs(n))return Na([new Mt("","data expressions not supported")]);const v=zc(h,["zoom"]);if(!v&&!xf(n))return Na([new Mt("","zoom expressions not supported")]);const x=Ml(h);return x||v?x instanceof Mt?Na([x]):x instanceof Gi&&!zd(n)?Na([new Mt("",'"interpolate" expressions cannot be used with this property')]):_f(x?new Fc(f?"camera":"composite",s.value,x.labels,x instanceof Gi?x.interpolation:void 0):new Md(f?"constant":"source",s.value)):Na([new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Al{constructor(n,s){this._parameters=n,this._specification=s,Ht(this,wr(this._parameters,this._specification))}static deserialize(n){return new Al(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ml(a){let n=null;if(a instanceof Dc)n=Ml(a.result);else if(a instanceof Mc){for(const s of a.args)if(n=Ml(s),n)break}else(a instanceof Fa||a instanceof Gi)&&a.input instanceof co&&a.input.name==="zoom"&&(n=a);return n instanceof Mt||a.eachChild(s=>{const h=Ml(s);h instanceof Mt?n=h:!n&&h?n=new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Dl(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Dl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const _v={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Rd(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Dl(a)||(a=Nc(a));const n=Oc(a,_v);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,f)=>n.value.evaluate(s,h,{},f),needGeometry:wf(a)}}function xv(a,n){return a<n?-1:a>n?1:0}function wf(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(wf(a[n]))return!0;return!1}function Nc(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Ld(a[1],a[2],"=="):n==="!="?Rl(Ld(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Ld(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(Nc))):n==="all"?["all"].concat(a.slice(1).map(Nc)):n==="none"?["all"].concat(a.slice(1).map(Nc).map(Rl)):n==="in"?Sf(a[1],a.slice(2)):n==="!in"?Rl(Sf(a[1],a.slice(2))):n==="has"?Cf(a[1]):n==="!has"?Rl(Cf(a[1])):n!=="within"||a;var s}function Ld(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function Sf(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(xv)]]:["filter-in-small",a,["literal",n]]}}function Cf(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Rl(a){return["!",a]}function jc(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let f="[";for(const v of a)f+=`${jc(v)},`;return`${f}]`}const s=Object.keys(a).sort();let h="{";for(let f=0;f<s.length;f++)h+=`${JSON.stringify(s[f])}:${jc(a[s[f]])},`;return`${h}}`}function Vc(a){let n="";for(const s of cr)n+=`/${jc(a[s])}`;return n}function kf(a){const n=a.value;return n?[new Le(a.key,n,"constants have been deprecated as of v8")]:[]}function dn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ls(a){if(Array.isArray(a))return a.map(ls);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=ls(a[s]);return n}return dn(a)}function Ti(a){const n=a.key,s=a.value,h=a.valueSpec||{},f=a.objectElementValidators||{},v=a.style,x=a.styleSpec,S=a.validateSpec;let I=[];const A=zr(s);if(A!=="object")return[new Le(n,s,`object expected, ${A} found`)];for(const L in s){const N=L.split(".")[0],q=h[N]||h["*"];let Y;if(f[N])Y=f[N];else if(h[N])Y=S;else if(f["*"])Y=f["*"];else{if(!h["*"]){I.push(new Le(n,s[L],`unknown property "${L}"`));continue}Y=S}I=I.concat(Y({key:(n&&`${n}.`)+L,value:s[L],valueSpec:q,style:v,styleSpec:x,object:s,objectKey:L,validateSpec:S},s))}for(const L in h)f[L]||h[L].required&&h[L].default===void 0&&s[L]===void 0&&I.push(new Le(n,s,`missing required property "${L}"`));return I}function Ns(a){const n=a.value,s=a.valueSpec,h=a.style,f=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(zr(n)!=="array")return[new Le(v,n,`array expected, ${zr(n)} found`)];if(s.length&&n.length!==s.length)return[new Le(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Le(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};f.$version<7&&(S.function=s.function),zr(s.value)==="object"&&(S=s.value);let I=[];for(let A=0;A<n.length;A++)I=I.concat(x({array:n,arrayIndex:A,value:n[A],valueSpec:S,validateSpec:a.validateSpec,style:h,styleSpec:f,key:`${v}[${A}]`}));return I}function Ll(a){const n=a.key,s=a.value,h=a.valueSpec;let f=zr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new Le(n,s,`number expected, ${f} found`)]:"minimum"in h&&s<h.minimum?[new Le(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Le(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Uc(a){const n=a.valueSpec,s=dn(a.value.type);let h,f,v,x={};const S=s!=="categorical"&&a.value.property===void 0,I=!S,A=zr(a.value.stops)==="array"&&zr(a.value.stops[0])==="array"&&zr(a.value.stops[0][0])==="object",L=Ti({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Y){if(s==="identity")return[new Le(Y.key,Y.value,'identity function may not have a "stops" property')];let ee=[];const se=Y.value;return ee=ee.concat(Ns({key:Y.key,value:se,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:N})),zr(se)==="array"&&se.length===0&&ee.push(new Le(Y.key,se,"array must have at least one stop")),ee},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:n,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return s==="identity"&&S&&L.push(new Le(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||L.push(new Le(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!zd(a.valueSpec)&&L.push(new Le(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(I&&!Fs(a.valueSpec)?L.push(new Le(a.key,a.value,"property functions not supported")):S&&!xf(a.valueSpec)&&L.push(new Le(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!A||a.value.property!==void 0||L.push(new Le(a.key,a.value,'"property" property is required')),L;function N(Y){let ee=[];const se=Y.value,fe=Y.key;if(zr(se)!=="array")return[new Le(fe,se,`array expected, ${zr(se)} found`)];if(se.length!==2)return[new Le(fe,se,`array length 2 expected, length ${se.length} found`)];if(A){if(zr(se[0])!=="object")return[new Le(fe,se,`object expected, ${zr(se[0])} found`)];if(se[0].zoom===void 0)return[new Le(fe,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Le(fe,se,"object stop key must have value")];if(v&&v>dn(se[0].zoom))return[new Le(fe,se[0].zoom,"stop zoom values must appear in ascending order")];dn(se[0].zoom)!==v&&(v=dn(se[0].zoom),f=void 0,x={}),ee=ee.concat(Ti({key:`${fe}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Ll,value:q}}))}else ee=ee.concat(q({key:`${fe}[0]`,value:se[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},se));return Bc(ls(se[1]))?ee.concat([new Le(`${fe}[1]`,se[1],"expressions are not allowed in function stops.")]):ee.concat(Y.validateSpec({key:`${fe}[1]`,value:se[1],valueSpec:n,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function q(Y,ee){const se=zr(Y.value),fe=dn(Y.value),ye=Y.value!==null?Y.value:ee;if(h){if(se!==h)return[new Le(Y.key,ye,`${se} stop domain type must match previous stop domain type ${h}`)]}else h=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new Le(Y.key,ye,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&s!=="categorical"){let Ce=`number expected, ${se} found`;return Fs(n)&&s===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Le(Y.key,ye,Ce)]}return s!=="categorical"||se!=="number"||isFinite(fe)&&Math.floor(fe)===fe?s!=="categorical"&&se==="number"&&f!==void 0&&fe<f?[new Le(Y.key,ye,"stop domain values must appear in ascending order")]:(f=fe,s==="categorical"&&fe in x?[new Le(Y.key,ye,"stop domain values must be unique")]:(x[fe]=!0,[])):[new Le(Y.key,ye,`integer expected, found ${fe}`)]}}function cs(a){const n=(a.expressionContext==="property"?Dd:Oc)(ls(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Le(`${a.key}${h.key}`,a.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Le(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!El(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!El(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!zc(s,["zoom","feature-state"]))return[new Le(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Ec(s))return[new Le(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $l(a){const n=a.key,s=a.value,h=a.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(dn(s))===-1&&f.push(new Le(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(dn(s))===-1&&f.push(new Le(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function js(a){return Dl(ls(a.value))?cs(Ht({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tf(a)}function Tf(a){const n=a.value,s=a.key;if(zr(n)!=="array")return[new Le(s,n,`array expected, ${zr(n)} found`)];const h=a.styleSpec;let f,v=[];if(n.length<1)return[new Le(s,n,"filter array must have at least 1 element")];switch(v=v.concat($l({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),dn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&dn(n[1])==="$type"&&v.push(new Le(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Le(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=zr(n[1]),f!=="string"&&v.push(new Le(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=zr(n[x]),dn(n[1])==="$type"?v=v.concat($l({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Le(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Tf({key:`${s}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":f=zr(n[1]),n.length!==2?v.push(new Le(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Le(`${s}[1]`,n[1],`string expected, ${f} found`));break;case"within":f=zr(n[1]),n.length!==2?v.push(new Le(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new Le(`${s}[1]`,n[1],`object expected, ${f} found`))}return v}function If(a,n){const s=a.key,h=a.validateSpec,f=a.style,v=a.styleSpec,x=a.value,S=a.objectKey,I=v[`${n}_${a.layerType}`];if(!I)return[];const A=S.match(/^(.*)-transition$/);if(n==="paint"&&A&&I[A[1]]&&I[A[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const L=a.valueSpec||I[S];if(!L)return[new Le(s,x,`unknown property "${S}"`)];let N;if(zr(x)==="string"&&Fs(L)&&!L.tokens&&(N=/^{([^}]+)}$/.exec(x)))return[new Le(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const q=[];return a.layerType==="symbol"&&(S==="text-field"&&f&&!f.glyphs&&q.push(new Le(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&on(ls(x))&&dn(x.type)==="identity"&&q.push(new Le(s,x,'"text-font" does not support identity functions'))),q.concat(h({key:a.key,value:x,valueSpec:L,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function Pf(a){return If(a,"paint")}function Ef(a){return If(a,"layout")}function zf(a){let n=[];const s=a.value,h=a.key,f=a.style,v=a.styleSpec;s.type||s.ref||n.push(new Le(h,s,'either "type" or "ref" is required'));let x=dn(s.type);const S=dn(s.ref);if(s.id){const I=dn(s.id);for(let A=0;A<a.arrayIndex;A++){const L=f.layers[A];dn(L.id)===I&&n.push(new Le(h,s.id,`duplicate layer id "${s.id}", previously used at line ${L.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(A=>{A in s&&n.push(new Le(h,s[A],`"${A}" is prohibited for ref layers`))}),f.layers.forEach(A=>{dn(A.id)===S&&(I=A)}),I?I.ref?n.push(new Le(h,s.ref,"ref cannot reference another ref layer")):x=dn(I.type):n.push(new Le(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const I=f.sources&&f.sources[s.source],A=I&&dn(I.type);I?A==="vector"&&x==="raster"?n.push(new Le(h,s.source,`layer "${s.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?n.push(new Le(h,s.source,`layer "${s.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?n.push(new Le(h,s.source,`layer "${s.id}" requires a vector source`)):A!=="vector"||s["source-layer"]?A==="raster-dem"&&x!=="hillshade"?n.push(new Le(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||A==="geojson"&&I.lineMetrics||n.push(new Le(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Le(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Le(h,s.source,`source "${s.source}" not found`))}else n.push(new Le(h,s,'missing required property "source"'));return n=n.concat(Ti({key:h,value:s,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:js,layout:I=>Ti({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":A=>Ef(Ht({layerType:x},A))}}),paint:I=>Ti({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":A=>Pf(Ht({layerType:x},A))}})}})),n}function Vo(a){const n=a.value,s=a.key,h=zr(n);return h!=="string"?[new Le(s,n,`string expected, ${h} found`)]:[]}const Bl={promoteId:function({key:a,value:n}){if(zr(n)==="string")return Vo({key:a,value:n});{const s=[];for(const h in n)s.push(...Vo({key:`${a}.${h}`,value:n[h]}));return s}}};function qi(a){const n=a.value,s=a.key,h=a.styleSpec,f=a.style,v=a.validateSpec;if(!n.type)return[new Le(s,n,'"type" is required')];const x=dn(n.type);let S;switch(x){case"vector":case"raster":return S=Ti({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Bl,validateSpec:v}),S;case"raster-dem":return S=function(I){var A;const L=(A=I.sourceName)!==null&&A!==void 0?A:"",N=I.value,q=I.styleSpec,Y=q.source_raster_dem,ee=I.style;let se=[];const fe=zr(N);if(N===void 0)return se;if(fe!=="object")return se.push(new Le("source_raster_dem",N,`object expected, ${fe} found`)),se;const ye=dn(N.encoding)==="custom",Ce=["redFactor","greenFactor","blueFactor","baseShift"],be=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ie in N)!ye&&Ce.includes(Ie)?se.push(new Le(Ie,N[Ie],`In "${L}": "${Ie}" is only valid when "encoding" is set to "custom". ${be} encoding found`)):Y[Ie]?se=se.concat(I.validateSpec({key:Ie,value:N[Ie],valueSpec:Y[Ie],validateSpec:I.validateSpec,style:ee,styleSpec:q})):se.push(new Le(Ie,N[Ie],`unknown property "${Ie}"`));return se}({sourceName:s,value:n,style:a.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Ti({key:s,value:n,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:v,objectElementValidators:Bl}),n.cluster)for(const I in n.clusterProperties){const[A,L]=n.clusterProperties[I],N=typeof A=="string"?[A,["accumulated"],["get",I]]:A;S.push(...cs({key:`${s}.${I}.map`,value:L,validateSpec:v,expressionContext:"cluster-map"})),S.push(...cs({key:`${s}.${I}.reduce`,value:N,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Ti({key:s,value:n,valueSpec:h.source_video,style:f,validateSpec:v,styleSpec:h});case"image":return Ti({key:s,value:n,valueSpec:h.source_image,style:f,validateSpec:v,styleSpec:h});case"canvas":return[new Le(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $l({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:h})}}function Ol(a){const n=a.value,s=a.styleSpec,h=s.light,f=a.style;let v=[];const x=zr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Le("light",n,`object expected, ${x} found`)]),v;for(const S in n){const I=S.match(/^(.*)-transition$/);v=v.concat(I&&h[I[1]]&&h[I[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:a.validateSpec,style:f,styleSpec:s}):h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:f,styleSpec:s}):[new Le(S,n[S],`unknown property "${S}"`)])}return v}function Af(a){const n=a.value,s=a.styleSpec,h=s.terrain,f=a.style;let v=[];const x=zr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Le("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:f,styleSpec:s}):[new Le(S,n[S],`unknown property "${S}"`)]);return v}function Mf(a){let n=[];const s=a.value,h=a.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new Le(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Le(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Ti({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Vo({key:h,value:s})}const Df={"*":()=>[],array:Ns,boolean:function(a){const n=a.value,s=a.key,h=zr(n);return h!=="boolean"?[new Le(s,n,`boolean expected, ${h} found`)]:[]},number:Ll,color:function(a){const n=a.key,s=a.value,h=zr(s);return h!=="string"?[new Le(n,s,`color expected, ${h} found`)]:Tr.parse(String(s))?[]:[new Le(n,s,`color expected, "${s}" found`)]},constants:kf,enum:$l,filter:js,function:Uc,layer:zf,object:Ti,source:qi,light:Ol,terrain:Af,string:Vo,formatted:function(a){return Vo(a).length===0?[]:cs(a)},resolvedImage:function(a){return Vo(a).length===0?[]:cs(a)},padding:function(a){const n=a.key,s=a.value;if(zr(s)==="array"){if(s.length<1||s.length>4)return[new Le(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(a.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:a.validateSpec,valueSpec:h}));return f}return Ll({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,s=a.value,h=zr(s),f=a.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Le(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat($l({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(Ns({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:f}));return v},sprite:Mf};function ma(a){const n=a.value,s=a.valueSpec,h=a.styleSpec;return a.validateSpec=ma,s.expression&&on(dn(n))?Uc(a):s.expression&&Bc(ls(n))?cs(a):s.type&&Df[s.type]?Df[s.type](a):Ti(Ht({},a,{valueSpec:s.type?h[s.type]:s}))}function Rf(a){const n=a.value,s=a.key,h=Vo(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Le(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Le(s,n,'"glyphs" url must include a "{range}" token'))),h}function uo(a,n=Pe){let s=[];return s=s.concat(ma({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:ma,objectElementValidators:{glyphs:Rf,"*":()=>[]}})),a.constants&&(s=s.concat(kf({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:ma}))),Hc(s)}function ga(a){return function(n){return a({...n,validateSpec:ma})}}function Hc(a){return[].concat(a).sort((n,s)=>n.line-s.line)}function ya(a){return function(...n){return Hc(a.apply(this,n))}}uo.source=ya(ga(qi)),uo.sprite=ya(ga(Mf)),uo.glyphs=ya(ga(Rf)),uo.light=ya(ga(Ol)),uo.terrain=ya(ga(Af)),uo.layer=ya(ga(zf)),uo.filter=ya(ga(js)),uo.paintProperty=ya(ga(Pf)),uo.layoutProperty=ya(ga(Ef));const va=uo,bv=va.light,$d=va.paintProperty,Lf=va.layoutProperty;function Wc(a,n){let s=!1;if(n&&n.length)for(const h of n)a.fire(new er(new Error(h.message))),s=!0;return s}class Vs{constructor(n,s,h){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let I=0;I<this.d*this.d;I++){const A=x[3+I],L=x[3+I+1];f.push(A===L?null:x.subarray(A,L))}const S=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,f,v){this._forEachCell(s,h,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,f,v,x){this.cells[v].push(x)}query(n,s,h,f,v){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=f&&!v)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,h,f,this._queryCell,I,{},v),I}}_queryCell(n,s,h,f,v,x,S,I){const A=this.cells[v];if(A!==null){const L=this.keys,N=this.bboxes;for(let q=0;q<A.length;q++){const Y=A[q];if(S[Y]===void 0){const ee=4*Y;(I?I(N[ee+0],N[ee+1],N[ee+2],N[ee+3]):n<=N[ee+2]&&s<=N[ee+3]&&h>=N[ee+0]&&f>=N[ee+1])?(S[Y]=!0,x.push(L[Y])):S[Y]=!1}}}}_forEachCell(n,s,h,f,v,x,S,I){const A=this._convertToCellCoord(n),L=this._convertToCellCoord(s),N=this._convertToCellCoord(h),q=this._convertToCellCoord(f);for(let Y=A;Y<=N;Y++)for(let ee=L;ee<=q;ee++){const se=this.d*ee+Y;if((!I||I(this._convertFromCellCoord(Y),this._convertFromCellCoord(ee),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(ee+1)))&&v.call(this,n,s,h,f,se,x,S,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const f=new Int32Array(s+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const S=n[x];f[3+x]=v,f.set(S,v),v+=S.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Vs(n.buffer)}}const _a={};function It(a,n,s={}){if(_a[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),_a[a]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}It("Object",Object),It("TransferableGridIndex",Vs),It("Color",Tr),It("Error",Error),It("AJAXError",$e),It("ResolvedImage",Qn),It("StylePropertyFunction",Al),It("StyleExpression",Ad,{omit:["_evaluator"]}),It("ZoomDependentExpression",Fc),It("ZoomConstantExpression",Md),It("CompoundExpression",co,{omit:["_evaluate"]});for(const a in Os)Os[a]._classRegistryKey||It(`Expression_${a}`,Os[a]);function Gc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ja(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Gc(a)||Ze(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const h of a)s.push(ja(h,n));return s}if(typeof a=="object"){const s=a.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!_a[h])throw new Error(`${h} is not registered.`);const f=s.serialize?s.serialize(a,n):{};if(s.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||_a[h].omit.indexOf(v)>=0)continue;const x=a[v];f[v]=_a[h].shallow.indexOf(v)>=0?x:ja(x,n)}a instanceof Error&&(f.message=a.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(f.$name=h),f}throw new Error("can't serialize object of type "+typeof a)}function Us(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Gc(a)||Ze(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Us);if(typeof a=="object"){const n=a.$name||"Object";if(!_a[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=_a[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const h=Object.create(s.prototype);for(const f of Object.keys(a)){if(f==="$name")continue;const v=a[f];h[f]=_a[n].shallow.indexOf(f)>=0?v:Us(v)}return h}throw new Error("can't deserialize object of type "+typeof a)}class $f{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const bt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Bd(a){for(const n of a)if(Fd(n.charCodeAt(0)))return!0;return!1}function Od(a){for(const n of a)if(!wv(n.charCodeAt(0)))return!1;return!0}function wv(a){return!(bt.Arabic(a)||bt["Arabic Supplement"](a)||bt["Arabic Extended-A"](a)||bt["Arabic Presentation Forms-A"](a)||bt["Arabic Presentation Forms-B"](a))}function Fd(a){return!(a!==746&&a!==747&&(a<4352||!(bt["Bopomofo Extended"](a)||bt.Bopomofo(a)||bt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||bt["CJK Compatibility Ideographs"](a)||bt["CJK Compatibility"](a)||bt["CJK Radicals Supplement"](a)||bt["CJK Strokes"](a)||!(!bt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||bt["CJK Unified Ideographs Extension A"](a)||bt["CJK Unified Ideographs"](a)||bt["Enclosed CJK Letters and Months"](a)||bt["Hangul Compatibility Jamo"](a)||bt["Hangul Jamo Extended-A"](a)||bt["Hangul Jamo Extended-B"](a)||bt["Hangul Jamo"](a)||bt["Hangul Syllables"](a)||bt.Hiragana(a)||bt["Ideographic Description Characters"](a)||bt.Kanbun(a)||bt["Kangxi Radicals"](a)||bt["Katakana Phonetic Extensions"](a)||bt.Katakana(a)&&a!==12540||!(!bt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!bt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||bt["Unified Canadian Aboriginal Syllabics"](a)||bt["Unified Canadian Aboriginal Syllabics Extended"](a)||bt["Vertical Forms"](a)||bt["Yijing Hexagram Symbols"](a)||bt["Yi Syllables"](a)||bt["Yi Radicals"](a))))}function Bf(a){return!(Fd(a)||function(n){return!!(bt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||bt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||bt["Letterlike Symbols"](n)||bt["Number Forms"](n)||bt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||bt["Control Pictures"](n)&&n!==9251||bt["Optical Character Recognition"](n)||bt["Enclosed Alphanumerics"](n)||bt["Geometric Shapes"](n)||bt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||bt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||bt["CJK Symbols and Punctuation"](n)||bt.Katakana(n)||bt["Private Use Area"](n)||bt["CJK Compatibility Forms"](n)||bt["Small Form Variants"](n)||bt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function Of(a){return a>=1424&&a<=2303||bt["Arabic Presentation Forms-A"](a)||bt["Arabic Presentation Forms-B"](a)}function Ff(a,n){return!(!n&&Of(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||bt.Khmer(a))}function Sv(a){for(const n of a)if(Of(n.charCodeAt(0)))return!0;return!1}const Nd="deferred",jd="loading",Vd="loaded";let Ud=null,Ii="unavailable",Va=null;const Fl=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Ii="error"),Ud&&Ud(a)};function Hd(){Nl.fire(new Mr("pluginStateChange",{pluginStatus:Ii,pluginURL:Va}))}const Nl=new Lr,Wd=function(){return Ii},Nf=function(){if(Ii!==Nd||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ii=jd,Hd(),Va&&gr({url:Va},a=>{a?Fl(a):(Ii=Vd,Hd())})},Zi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ii===Vd||Zi.applyArabicShaping!=null,isLoading:()=>Ii===jd,setState(a){if(!Ge())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ii=a.pluginStatus,Va=a.pluginURL},isParsed(){if(!Ge())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Zi.applyArabicShaping!=null&&Zi.processBidirectionalText!=null&&Zi.processStyledBidirectionalText!=null},getPluginURL(){if(!Ge())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Va}};class Xr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $f,this.transition={})}isSupportedScript(n){return function(s,h){for(const f of s)if(!Ff(f.charCodeAt(0),h))return!1;return!0}(n,Zi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class qc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,f){if(on(h))return new Al(h,f);if(Bc(h)){const v=Dd(h,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return f.type==="color"&&typeof h=="string"?v=Tr.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=so.parse(h)):v=Hi.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Gd{constructor(n){this.property=n,this.value=new qc(n,void 0)}transitioned(n,s){return new Vf(this.property,this.value,s,de({},n.transition,this.transition),n.now)}untransitioned(){return new Vf(this.property,this.value,null,{},0)}}class jf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ke(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Gd(this._values[n].property)),this._values[n].value=new qc(this._values[n].property,s===null?void 0:ke(s))}getTransition(n){return ke(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Gd(this._values[n].property)),this._values[n].transition=ke(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const h=new Uf(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(n,s._values[f]);return h}untransitioned(){const n=new Uf(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Vf{constructor(n,s,h,f,v){this.property=n,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const f=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(I){if(I<=0)return 0;if(I>=1)return 1;const A=I*I,L=A*I;return 4*(I<.5?L:3*(I-A)+L-.75)}(S))}}return v}}class Uf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const f=new Zc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,h);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Cv{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ke(this._values[n].value)}setValue(n,s){this._values[n]=new qc(this._values[n].property,s===null?void 0:ke(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const f=new Zc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,h);return f}}class gi{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,f){return this.property.evaluate(this.value,this.parameters,n,s,h,f)}}class Zc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Vt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const f=Wi[this.specification.type];return f?f(n,s,h):n}}class Yt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,f){return new gi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,f)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new gi(this,{kind:"constant",value:void 0},n.parameters);const f=Wi[this.specification.type];if(f){const v=f(n.value.value,s.value.value,h);return new gi(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,f,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,f,v,x)}}class jl extends Yt{possiblyEvaluate(n,s,h,f){if(n.value===void 0)return new gi(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new gi(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new gi(this,{kind:"constant",value:v},s)}return new gi(this,n.expression,s)}evaluate(n,s,h,f,v,x){if(n.kind==="source"){const S=n.evaluate(s,h,f,v,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,f),n.evaluate({zoom:Math.floor(s.zoom)},h,f),n.evaluate({zoom:Math.floor(s.zoom)+1},h,f),s):n.value}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class qd{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,f);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new Xr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Xr(Math.floor(s.zoom),s)),n.expression.evaluate(new Xr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Zd{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){return!!n.expression.evaluate(s,null,{},h,f)}interpolate(){return!1}}class wn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new qc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Gd(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}It("DataDrivenProperty",Yt),It("DataConstantProperty",Vt),It("CrossFadedDataDrivenProperty",jl),It("CrossFadedProperty",qd),It("ColorRampProperty",Zd);const Kd="-transition";class ho extends Lr{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Cv(s.layout)),s.paint)){this._transitionablePaint=new jf(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Lf,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Kd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate($d,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Kd))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),De(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,f,v={}){return(!v||v.validate!==!1)&&Wc(this,n.call(va,{key:s,layerType:this.type,objectKey:h,value:f,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof gi&&Fs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Hf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class us{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function sn(a,n=1){let s=0,h=0;return{members:a.map(f=>{const v=Hf[f.type].BYTES_PER_ELEMENT,x=s=Hs(s,Math.max(n,v)),S=f.components||1;return h=Math.max(h,v),s+=v*S,{name:f.name,type:f.type,components:S,offset:x}}),size:Hs(s,Math.max(h,n)),alignment:n}}function Hs(a,n){return Math.ceil(a/n)*n}class Vl extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=h,n}}Vl.prototype.bytesPerElement=4,It("StructArrayLayout2i4",Vl);class Ul extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=f,n}}Ul.prototype.bytesPerElement=6,It("StructArrayLayout3i6",Ul);class ds extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=v,n}}ds.prototype.bytesPerElement=8,It("StructArrayLayout4i8",ds);class Xd extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=S,n}}Xd.prototype.bytesPerElement=12,It("StructArrayLayout2i4i12",Xd);class Jd extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=4*n,A=8*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[A+4]=f,this.uint8[A+5]=v,this.uint8[A+6]=x,this.uint8[A+7]=S,n}}Jd.prototype.bytesPerElement=8,It("StructArrayLayout2i4ub8",Jd);class Ws extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=h,n}}Ws.prototype.bytesPerElement=8,It("StructArrayLayout2f8",Ws);class Yd extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,A,L){const N=this.length;return this.resize(N+1),this.emplace(N,n,s,h,f,v,x,S,I,A,L)}emplace(n,s,h,f,v,x,S,I,A,L,N){const q=10*n;return this.uint16[q+0]=s,this.uint16[q+1]=h,this.uint16[q+2]=f,this.uint16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=S,this.uint16[q+6]=I,this.uint16[q+7]=A,this.uint16[q+8]=L,this.uint16[q+9]=N,n}}Yd.prototype.bytesPerElement=20,It("StructArrayLayout10ui20",Yd);class Qd extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,A,L,N,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,s,h,f,v,x,S,I,A,L,N,q)}emplace(n,s,h,f,v,x,S,I,A,L,N,q,Y){const ee=12*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=f,this.int16[ee+3]=v,this.uint16[ee+4]=x,this.uint16[ee+5]=S,this.uint16[ee+6]=I,this.uint16[ee+7]=A,this.int16[ee+8]=L,this.int16[ee+9]=N,this.int16[ee+10]=q,this.int16[ee+11]=Y,n}}Qd.prototype.bytesPerElement=24,It("StructArrayLayout4i4ui4i24",Qd);class Ar extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=f,n}}Ar.prototype.bytesPerElement=12,It("StructArrayLayout3f12",Ar);class y extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,It("StructArrayLayout1ul4",y);class i extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,A){const L=this.length;return this.resize(L+1),this.emplace(L,n,s,h,f,v,x,S,I,A)}emplace(n,s,h,f,v,x,S,I,A,L){const N=10*n,q=5*n;return this.int16[N+0]=s,this.int16[N+1]=h,this.int16[N+2]=f,this.int16[N+3]=v,this.int16[N+4]=x,this.int16[N+5]=S,this.uint32[q+3]=I,this.uint16[N+8]=A,this.uint16[N+9]=L,n}}i.prototype.bytesPerElement=20,It("StructArrayLayout6i1ul2ui20",i);class u extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=S,n}}u.prototype.bytesPerElement=12,It("StructArrayLayout2i2i2i12",u);class p extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,f,v)}emplace(n,s,h,f,v,x){const S=4*n,I=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=f,this.int16[I+6]=v,this.int16[I+7]=x,n}}p.prototype.bytesPerElement=16,It("StructArrayLayout2f1f2i16",p);class g extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=f,this.float32[S+2]=v,n}}g.prototype.bytesPerElement=12,It("StructArrayLayout2ub2f12",g);class _ extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=f,n}}_.prototype.bytesPerElement=6,It("StructArrayLayout3ui6",_);class C extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se,fe,ye){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se,fe,ye)}emplace(n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se,fe,ye,Ce){const be=24*n,Ie=12*n,Ne=48*n;return this.int16[be+0]=s,this.int16[be+1]=h,this.uint16[be+2]=f,this.uint16[be+3]=v,this.uint32[Ie+2]=x,this.uint32[Ie+3]=S,this.uint32[Ie+4]=I,this.uint16[be+10]=A,this.uint16[be+11]=L,this.uint16[be+12]=N,this.float32[Ie+7]=q,this.float32[Ie+8]=Y,this.uint8[Ne+36]=ee,this.uint8[Ne+37]=se,this.uint8[Ne+38]=fe,this.uint32[Ie+10]=ye,this.int16[be+22]=Ce,n}}C.prototype.bytesPerElement=48,It("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class k extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se,fe,ye,Ce,be,Ie,Ne,Ke,wt,$t,xt,ft,st,Pt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se,fe,ye,Ce,be,Ie,Ne,Ke,wt,$t,xt,ft,st,Pt)}emplace(n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se,fe,ye,Ce,be,Ie,Ne,Ke,wt,$t,xt,ft,st,Pt,ut){const tt=32*n,Wt=16*n;return this.int16[tt+0]=s,this.int16[tt+1]=h,this.int16[tt+2]=f,this.int16[tt+3]=v,this.int16[tt+4]=x,this.int16[tt+5]=S,this.int16[tt+6]=I,this.int16[tt+7]=A,this.uint16[tt+8]=L,this.uint16[tt+9]=N,this.uint16[tt+10]=q,this.uint16[tt+11]=Y,this.uint16[tt+12]=ee,this.uint16[tt+13]=se,this.uint16[tt+14]=fe,this.uint16[tt+15]=ye,this.uint16[tt+16]=Ce,this.uint16[tt+17]=be,this.uint16[tt+18]=Ie,this.uint16[tt+19]=Ne,this.uint16[tt+20]=Ke,this.uint16[tt+21]=wt,this.uint16[tt+22]=$t,this.uint32[Wt+12]=xt,this.float32[Wt+13]=ft,this.float32[Wt+14]=st,this.uint16[tt+30]=Pt,this.uint16[tt+31]=ut,n}}k.prototype.bytesPerElement=64,It("StructArrayLayout8i15ui1ul2f2ui64",k);class E extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}E.prototype.bytesPerElement=4,It("StructArrayLayout1f4",E);class D extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=f,n}}D.prototype.bytesPerElement=12,It("StructArrayLayout1ui2f12",D);class B extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=f,n}}B.prototype.bytesPerElement=8,It("StructArrayLayout1ul2ui8",B);class F extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=h,n}}F.prototype.bytesPerElement=4,It("StructArrayLayout2ui4",F);class X extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}X.prototype.bytesPerElement=2,It("StructArrayLayout1ui2",X);class ce extends hn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=v,n}}ce.prototype.bytesPerElement=16,It("StructArrayLayout4f16",ce);class le extends us{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}le.prototype.size=20;class he extends i{get(n){return new le(this,n)}}It("CollisionBoxArray",he);class oe extends us{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oe.prototype.size=48;class we extends C{get(n){return new oe(this,n)}}It("PlacedSymbolArray",we);class Be extends us{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Be.prototype.size=64;class ge extends k{get(n){return new Be(this,n)}}It("SymbolInstanceArray",ge);class Se extends E{getoffsetX(n){return this.float32[1*n+0]}}It("GlyphOffsetArray",Se);class je extends Ul{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}It("SymbolLineVertexArray",je);class Ue extends us{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ue.prototype.size=12;class qe extends D{get(n){return new Ue(this,n)}}It("TextAnchorOffsetArray",qe);class et extends us{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}et.prototype.size=8;class Xe extends B{get(n){return new et(this,n)}}It("FeatureIndexArray",Xe);class ot extends Vl{}class Lt extends Vl{}class fr extends Vl{}class pt extends Xd{}class Qt extends Jd{}class Ot extends Ws{}class $r extends Yd{}class pr extends Qd{}class or extends Ar{}class mr extends y{}class gn extends u{}class Wr extends g{}class ei extends _{}class On extends F{}const Sn=sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ki}=Sn;class Jr{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,f){let v=this.segments[this.segments.length-1];return n>Jr.MAX_VERTEX_ARRAY_LENGTH&&He(`Max vertices per segment is ${Jr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Jr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,f){return new Jr([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function Uo(a,n){return 256*(a=me(Math.floor(a),0,255))+me(Math.floor(n),0,255)}Jr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,It("SegmentVector",Jr);const Ho=sn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ua={exports:{}},hs={exports:{}};hs.exports=function(a,n){var s,h,f,v,x,S,I,A;for(h=a.length-(s=3&a.length),f=n,x=3432918353,S=461845907,A=0;A<h;)I=255&a.charCodeAt(A)|(255&a.charCodeAt(++A))<<8|(255&a.charCodeAt(++A))<<16|(255&a.charCodeAt(++A))<<24,++A,f=27492+(65535&(v=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&a.charCodeAt(A+2))<<16;case 2:I^=(255&a.charCodeAt(A+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&a.charCodeAt(A)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295}return f^=a.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Gs=hs.exports,si={exports:{}};si.exports=function(a,n){for(var s,h=a.length,f=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:f^=(255&a.charCodeAt(v+2))<<16;case 2:f^=(255&a.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&a.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var ti=Gs,yi=si.exports;Ua.exports=ti,Ua.exports.murmur3=ti,Ua.exports.murmur2=yi;var ps=w(Ua.exports);class yn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,f){this.ids.push(Fn(n)),this.positions.push(s,h,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Fn(n);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=s?f=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Pi(h,f,0,h.length-1),s&&s.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(n){const s=new yn;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Fn(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ps(String(a))}function Pi(a,n,s,h){for(;s<h;){const f=a[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(a[v]<f);do x--;while(a[x]>f);if(v>=x)break;vn(a,v,x),vn(n,3*v,3*x),vn(n,3*v+1,3*x+1),vn(n,3*v+2,3*x+2)}x-s<h-x?(Pi(a,n,s,x),s=x+1):(Pi(a,n,x+1,h),h=x)}}function vn(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}It("FeaturePositionMap",yn);class fs{constructor(n,s){this.gl=n.gl,this.location=s}}class Kc extends fs{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Wf extends fs{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Gf extends fs{constructor(n,s){super(n,s),this.current=Tr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const kv=new Float32Array(16);function eh(a){return[Uo(255*a.r,255*a.g),Uo(255*a.b,255*a.a)]}class Wo{constructor(n,s,h){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Gf(n,s):new Kc(n,s)}}class ms{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Wf(n,s):new Kc(n,s)}}class Go{constructor(n,s,h,f){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,h,f,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Xr(0),s,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,f){const v=this.expression.evaluate({zoom:0},h,f);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const f=eh(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class po{constructor(n,s,h,f,v,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,f,v){const x=this.expression.evaluate(new Xr(this.zoom),s,{},f,[],v),S=this.expression.evaluate(new Xr(this.zoom+1),s,{},f,[],v),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,x,S)}updatePaintArray(n,s,h,f){const v=this.expression.evaluate({zoom:this.zoom},h,f),x=this.expression.evaluate({zoom:this.zoom+1},h,f);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,f){if(this.type==="color"){const v=eh(h),x=eh(f);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=me(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,h){return new Kc(n,s)}}class qo{constructor(n,s,h,f,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,f,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,f){if(!f||!h)return;const{min:v,mid:x,max:S}=h,I=f[v],A=f[x],L=f[S];if(I&&A&&L)for(let N=n;N<s;N++)this.zoomInPaintVertexArray.emplace(N,A.tl[0],A.tl[1],A.br[0],A.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],A.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,A.tl[0],A.tl[1],A.br[0],A.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],A.pixelRatio,L.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Ho.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Ho.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class th{constructor(n,s,h){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof gi&&Fs(x.property.specification)))continue;const S=Jz(v,n.type),I=x.value,A=x.property.specification.type,L=x.property.useIntegerZoom,N=x.property.specification["property-type"],q=N==="cross-faded"||N==="cross-faded-data-driven";if(I.kind==="constant")this.binders[v]=q?new ms(I.value,S):new Wo(I.value,S,A),f.push(`/u_${v}`);else if(I.kind==="source"||q){const Y=wb(v,A,"source");this.binders[v]=q?new qo(I,A,L,s,Y,n.id):new Go(I,S,A,Y),f.push(`/a_${v}`)}else{const Y=wb(v,A,"composite");this.binders[v]=new po(I,S,A,L,s,Y),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Go||s instanceof po?s.maxValue:0}populatePaintArrays(n,s,h,f,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Go||S instanceof po||S instanceof qo)&&S.populatePaintArray(n,s,h,f,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const f=this.binders[h];f instanceof ms&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,f,v){let x=!1;for(const S in n){const I=s.getPositions(S);for(const A of I){const L=h.feature(A.index);for(const N in this.binders){const q=this.binders[N];if((q instanceof Go||q instanceof po||q instanceof qo)&&q.expression.isStateDependent===!0){const Y=f.paint.get(N);q.expression=Y.value,q.updatePaintArray(A.start,A.end,L,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Wo||h instanceof ms)&&n.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Go||h instanceof po)for(let f=0;f<h.paintVertexAttributes.length;f++)n.push(h.paintVertexAttributes[f].name);else if(h instanceof qo)for(let f=0;f<Ho.members.length;f++)n.push(Ho.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Wo||h instanceof ms||h instanceof po)for(const f of h.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Wo||v instanceof ms||v instanceof po){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(n,s[x],x);h.push({name:x,property:f,binding:S})}}}return h}setUniforms(n,s,h,f){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,f,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof qo){const f=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof Go||h instanceof po)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Go||h instanceof po||h instanceof qo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Go||s instanceof po||s instanceof qo)&&s.destroy()}}}class xa{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new th(f,s,h);this.needsUpload=!1,this._featureMap=new yn,this._bufferOffset=0}populatePaintArrays(n,s,h,f,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,f){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Jz(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function wb(a,n,s){const h={color:{source:Ws,composite:ce},number:{source:E,composite:Ws}},f=function(v){return{"line-pattern":{source:$r,composite:$r},"fill-pattern":{source:$r,composite:$r},"fill-extrusion-pattern":{source:$r,composite:$r}}[v]}(a);return f&&f[s]||h[n][s]}It("ConstantBinder",Wo),It("CrossFadedConstantBinder",ms),It("SourceExpressionBinder",Go),It("CrossFadedCompositeBinder",qo),It("CompositeExpressionBinder",po),It("ProgramConfiguration",th,{omit:["_buffers"]}),It("ProgramConfigurationSet",xa);const An=8192,Tv=Math.pow(2,14)-1,Sb=-Tv-1;function Hl(a){const n=An/a.extent,s=a.loadGeometry();for(let h=0;h<s.length;h++){const f=s[h];for(let v=0;v<f.length;v++){const x=f[v],S=Math.round(x.x*n),I=Math.round(x.y*n);x.x=me(S,Sb,Tv),x.y=me(I,Sb,Tv),(S<x.x||S>x.x+1||I<x.y||I>x.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Wl(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Hl(a):[]}}function qf(a,n,s,h,f){a.emplaceBack(2*n+(h+1)/2,2*s+(f+1)/2)}class Iv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Lt,this.indexArray=new ei,this.segments=new Jr,this.programConfigurations=new xa(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const f=this.layers[0],v=[];let x=null,S=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:I,id:A,index:L,sourceLayerIndex:N}of n){const q=this.layers[0]._featureFilter.needGeometry,Y=Wl(I,q);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),Y,h))continue;const ee=S?x.evaluate(Y,{},h):void 0,se={id:A,properties:I.properties,type:I.type,sourceLayerIndex:N,index:L,geometry:q?Y.geometry:Hl(I),patterns:{},sortKey:ee};v.push(se)}S&&v.sort((I,A)=>I.sortKey-A.sortKey);for(const I of v){const{geometry:A,index:L,sourceLayerIndex:N}=I,q=n[L].feature;this.addFeature(I,A,L,h),s.featureIndex.insert(q,A,L,N,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ki),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,f){for(const v of s)for(const x of v){const S=x.x,I=x.y;if(S<0||S>=An||I<0||I>=An)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),L=A.vertexLength;qf(this.layoutVertexArray,S,I,-1,-1),qf(this.layoutVertexArray,S,I,1,-1),qf(this.layoutVertexArray,S,I,1,1),qf(this.layoutVertexArray,S,I,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},f)}}function Cb(a,n){for(let s=0;s<a.length;s++)if(Xc(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Xc(a,n[s]))return!0;return!!Pv(a,n)}function Yz(a,n,s){return!!Xc(a,n)||!!Ev(n,a,s)}function kb(a,n){if(a.length===1)return Ib(n,a[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let f=0;f<h.length;f++)if(Xc(a,h[f]))return!0}for(let s=0;s<a.length;s++)if(Ib(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Pv(a,n[s]))return!0;return!1}function Qz(a,n,s){if(a.length>1){if(Pv(a,n))return!0;for(let h=0;h<n.length;h++)if(Ev(n[h],a,s))return!0}for(let h=0;h<a.length;h++)if(Ev(a[h],n,s))return!0;return!1}function Pv(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const h=a[s],f=a[s+1];for(let v=0;v<n.length-1;v++)if(eA(h,f,n[v],n[v+1]))return!0}return!1}function eA(a,n,s,h){return Fe(a,s,h)!==Fe(n,s,h)&&Fe(a,n,s)!==Fe(a,n,h)}function Ev(a,n,s){const h=s*s;if(n.length===1)return a.distSqr(n[0])<h;for(let f=1;f<n.length;f++)if(Tb(a,n[f-1],n[f])<h)return!0;return!1}function Tb(a,n,s){const h=n.distSqr(s);if(h===0)return a.distSqr(n);const f=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/h;return a.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function Ib(a,n){let s,h,f,v=!1;for(let x=0;x<a.length;x++){s=a[x];for(let S=0,I=s.length-1;S<s.length;I=S++)h=s[S],f=s[I],h.y>n.y!=f.y>n.y&&n.x<(f.x-h.x)*(n.y-h.y)/(f.y-h.y)+h.x&&(v=!v)}return v}function Xc(a,n){let s=!1;for(let h=0,f=a.length-1;h<a.length;f=h++){const v=a[h],x=a[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function tA(a,n,s){const h=s[0],f=s[2];if(a.x<h.x&&n.x<h.x||a.x>f.x&&n.x>f.x||a.y<h.y&&n.y<h.y||a.y>f.y&&n.y>f.y)return!1;const v=Fe(a,n,s[0]);return v!==Fe(a,n,s[1])||v!==Fe(a,n,s[2])||v!==Fe(a,n,s[3])}function rh(a,n,s){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(a)}function Zf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Kf(a,n,s,h,f){if(!n[0]&&!n[1])return a;const v=P.convert(n)._mult(f);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<a.length;S++)x.push(a[S].sub(v));return x}let Pb,Eb;It("CircleBucket",Iv,{omit:["layers"]});var rA={get paint(){return Eb=Eb||new wn({"circle-radius":new Yt(Pe.paint_circle["circle-radius"]),"circle-color":new Yt(Pe.paint_circle["circle-color"]),"circle-blur":new Yt(Pe.paint_circle["circle-blur"]),"circle-opacity":new Yt(Pe.paint_circle["circle-opacity"]),"circle-translate":new Vt(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Vt(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vt(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vt(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yt(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yt(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yt(Pe.paint_circle["circle-stroke-opacity"])})},get layout(){return Pb=Pb||new wn({"circle-sort-key":new Yt(Pe.layout_circle["circle-sort-key"])})}},Ei=1e-6,Jc=typeof Float32Array<"u"?Float32Array:Array;function zv(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function zb(a,n,s){var h=n[0],f=n[1],v=n[2],x=n[3],S=n[4],I=n[5],A=n[6],L=n[7],N=n[8],q=n[9],Y=n[10],ee=n[11],se=n[12],fe=n[13],ye=n[14],Ce=n[15],be=s[0],Ie=s[1],Ne=s[2],Ke=s[3];return a[0]=be*h+Ie*S+Ne*N+Ke*se,a[1]=be*f+Ie*I+Ne*q+Ke*fe,a[2]=be*v+Ie*A+Ne*Y+Ke*ye,a[3]=be*x+Ie*L+Ne*ee+Ke*Ce,a[4]=(be=s[4])*h+(Ie=s[5])*S+(Ne=s[6])*N+(Ke=s[7])*se,a[5]=be*f+Ie*I+Ne*q+Ke*fe,a[6]=be*v+Ie*A+Ne*Y+Ke*ye,a[7]=be*x+Ie*L+Ne*ee+Ke*Ce,a[8]=(be=s[8])*h+(Ie=s[9])*S+(Ne=s[10])*N+(Ke=s[11])*se,a[9]=be*f+Ie*I+Ne*q+Ke*fe,a[10]=be*v+Ie*A+Ne*Y+Ke*ye,a[11]=be*x+Ie*L+Ne*ee+Ke*Ce,a[12]=(be=s[12])*h+(Ie=s[13])*S+(Ne=s[14])*N+(Ke=s[15])*se,a[13]=be*f+Ie*I+Ne*q+Ke*fe,a[14]=be*v+Ie*A+Ne*Y+Ke*ye,a[15]=be*x+Ie*L+Ne*ee+Ke*Ce,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var nh,nA=zb;function Xf(a,n,s){var h=n[0],f=n[1],v=n[2],x=n[3];return a[0]=s[0]*h+s[4]*f+s[8]*v+s[12]*x,a[1]=s[1]*h+s[5]*f+s[9]*v+s[13]*x,a[2]=s[2]*h+s[6]*f+s[10]*v+s[14]*x,a[3]=s[3]*h+s[7]*f+s[11]*v+s[15]*x,a}nh=new Jc(4),Jc!=Float32Array&&(nh[0]=0,nh[1]=0,nh[2]=0,nh[3]=0);class iA extends ho{constructor(n){super(n,rA)}createBucket(n){return new Iv(n)}queryRadius(n){const s=n;return rh("circle-radius",this,s)+rh("circle-stroke-width",this,s)+Zf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S,I){const A=Kf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),L=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),N=this.paint.get("circle-pitch-alignment")==="map",q=N?A:function(ee,se){return ee.map(fe=>Ab(fe,se))}(A,I),Y=N?L*S:L;for(const ee of f)for(const se of ee){const fe=N?se:Ab(se,I);let ye=Y;const Ce=Xf([],[se.x,se.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ye*=Ce[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ye*=x.cameraToCenterDistance/Ce[3]),Yz(q,fe,ye))return!0}return!1}}function Ab(a,n){const s=Xf([],[a.x,a.y,0,1],n);return new P(s[0]/s[3],s[1]/s[3])}class Mb extends Iv{}let Db;It("HeatmapBucket",Mb,{omit:["layers"]});var oA={get paint(){return Db=Db||new wn({"heatmap-radius":new Yt(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yt(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vt(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zd(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vt(Pe.paint_heatmap["heatmap-opacity"])})}};function Av(a,{width:n,height:s},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*h}`)}else f=new Uint8Array(n*s*h);return a.width=n,a.height=s,a.data=f,a}function Rb(a,{width:n,height:s},h){if(n===a.width&&s===a.height)return;const f=Av({},{width:n,height:s},h);Mv(a,f,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,s)},h),a.width=n,a.height=s,a.data=f.data}function Mv(a,n,s,h,f,v){if(f.width===0||f.height===0)return n;if(f.width>a.width||f.height>a.height||s.x>a.width-f.width||s.y>a.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||h.x>n.width-f.width||h.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<f.height;I++){const A=((s.y+I)*a.width+s.x)*v,L=((h.y+I)*n.width+h.x)*v;for(let N=0;N<f.width*v;N++)S[L+N]=x[A+N]}return n}class ih{constructor(n,s){Av(this,n,1,s)}resize(n){Rb(this,n,1)}clone(){return new ih({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,v){Mv(n,s,h,f,v,1)}}class Co{constructor(n,s){Av(this,n,4,s)}resize(n){Rb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Co({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,v){Mv(n,s,h,f,v,4)}}function Lb(a){const n={},s=a.resolution||256,h=a.clips?a.clips.length:1,f=a.image||new Co({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,I)=>{n[a.evaluationKey]=I;const A=a.expression.evaluate(n);f.data[x+S+0]=Math.floor(255*A.r/A.a),f.data[x+S+1]=Math.floor(255*A.g/A.a),f.data[x+S+2]=Math.floor(255*A.b/A.a),f.data[x+S+3]=Math.floor(255*A.a)};if(a.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let I=0,A=0;I<s;I++,A+=4){const L=I/(s-1),{start:N,end:q}=a.clips[x];v(S,A,N*(1-L)+q*L)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return f}It("AlphaImage",ih),It("RGBAImage",Co);class aA extends ho{createBucket(n){return new Mb(n)}constructor(n){super(n,oA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Lb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let $b;var sA={get paint(){return $b=$b||new wn({"hillshade-illumination-direction":new Vt(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vt(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vt(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vt(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vt(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vt(Pe.paint_hillshade["hillshade-accent-color"])})}};class lA extends ho{constructor(n){super(n,sA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const cA=sn([{name:"a_pos",components:2,type:"Int16"}],4),{members:uA}=cA;var Dv={exports:{}};function Jf(a,n,s){s=s||2;var h,f,v,x,S,I,A,L=n&&n.length,N=L?n[0]*s:a.length,q=Bb(a,0,N,s,!0),Y=[];if(!q||q.next===q.prev)return Y;if(L&&(q=function(se,fe,ye,Ce){var be,Ie,Ne,Ke=[];for(be=0,Ie=fe.length;be<Ie;be++)(Ne=Bb(se,fe[be]*Ce,be<Ie-1?fe[be+1]*Ce:se.length,Ce,!1))===Ne.next&&(Ne.steiner=!0),Ke.push(vA(Ne));for(Ke.sort(mA),be=0;be<Ke.length;be++)ye=gA(Ke[be],ye);return ye}(a,n,q,s)),a.length>80*s){h=v=a[0],f=x=a[1];for(var ee=s;ee<N;ee+=s)(S=a[ee])<h&&(h=S),(I=a[ee+1])<f&&(f=I),S>v&&(v=S),I>x&&(x=I);A=(A=Math.max(v-h,x-f))!==0?32767/A:0}return oh(q,Y,s,h,f,A,0),Y}function Bb(a,n,s,h,f){var v,x;if(f===$v(a,n,s,h)>0)for(v=n;v<s;v+=h)x=Nb(v,a[v],a[v+1],x);else for(v=s-h;v>=n;v-=h)x=Nb(v,a[v],a[v+1],x);return x&&Yf(x,x.next)&&(sh(x),x=x.next),x}function Gl(a,n){if(!a)return a;n||(n=a);var s,h=a;do if(s=!1,h.steiner||!Yf(h,h.next)&&Cn(h.prev,h,h.next)!==0)h=h.next;else{if(sh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function oh(a,n,s,h,f,v,x){if(a){!x&&v&&function(L,N,q,Y){var ee=L;do ee.z===0&&(ee.z=Rv(ee.x,ee.y,N,q,Y)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==L);ee.prevZ.nextZ=null,ee.prevZ=null,function(se){var fe,ye,Ce,be,Ie,Ne,Ke,wt,$t=1;do{for(ye=se,se=null,Ie=null,Ne=0;ye;){for(Ne++,Ce=ye,Ke=0,fe=0;fe<$t&&(Ke++,Ce=Ce.nextZ);fe++);for(wt=$t;Ke>0||wt>0&&Ce;)Ke!==0&&(wt===0||!Ce||ye.z<=Ce.z)?(be=ye,ye=ye.nextZ,Ke--):(be=Ce,Ce=Ce.nextZ,wt--),Ie?Ie.nextZ=be:se=be,be.prevZ=Ie,Ie=be;ye=Ce}Ie.nextZ=null,$t*=2}while(Ne>1)}(ee)}(a,h,f,v);for(var S,I,A=a;a.prev!==a.next;)if(S=a.prev,I=a.next,v?hA(a,h,f,v):dA(a))n.push(S.i/s|0),n.push(a.i/s|0),n.push(I.i/s|0),sh(a),a=I.next,A=I.next;else if((a=I)===A){x?x===1?oh(a=pA(Gl(a),n,s),n,s,h,f,v,2):x===2&&fA(a,n,s,h,f,v):oh(Gl(a),n,s,h,f,v,1);break}}}function dA(a){var n=a.prev,s=a,h=a.next;if(Cn(n,s,h)>=0)return!1;for(var f=n.x,v=s.x,x=h.x,S=n.y,I=s.y,A=h.y,L=f<v?f<x?f:x:v<x?v:x,N=S<I?S<A?S:A:I<A?I:A,q=f>v?f>x?f:x:v>x?v:x,Y=S>I?S>A?S:A:I>A?I:A,ee=h.next;ee!==n;){if(ee.x>=L&&ee.x<=q&&ee.y>=N&&ee.y<=Y&&Yc(f,S,v,I,x,A,ee.x,ee.y)&&Cn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function hA(a,n,s,h){var f=a.prev,v=a,x=a.next;if(Cn(f,v,x)>=0)return!1;for(var S=f.x,I=v.x,A=x.x,L=f.y,N=v.y,q=x.y,Y=S<I?S<A?S:A:I<A?I:A,ee=L<N?L<q?L:q:N<q?N:q,se=S>I?S>A?S:A:I>A?I:A,fe=L>N?L>q?L:q:N>q?N:q,ye=Rv(Y,ee,n,s,h),Ce=Rv(se,fe,n,s,h),be=a.prevZ,Ie=a.nextZ;be&&be.z>=ye&&Ie&&Ie.z<=Ce;){if(be.x>=Y&&be.x<=se&&be.y>=ee&&be.y<=fe&&be!==f&&be!==x&&Yc(S,L,I,N,A,q,be.x,be.y)&&Cn(be.prev,be,be.next)>=0||(be=be.prevZ,Ie.x>=Y&&Ie.x<=se&&Ie.y>=ee&&Ie.y<=fe&&Ie!==f&&Ie!==x&&Yc(S,L,I,N,A,q,Ie.x,Ie.y)&&Cn(Ie.prev,Ie,Ie.next)>=0))return!1;Ie=Ie.nextZ}for(;be&&be.z>=ye;){if(be.x>=Y&&be.x<=se&&be.y>=ee&&be.y<=fe&&be!==f&&be!==x&&Yc(S,L,I,N,A,q,be.x,be.y)&&Cn(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Ie&&Ie.z<=Ce;){if(Ie.x>=Y&&Ie.x<=se&&Ie.y>=ee&&Ie.y<=fe&&Ie!==f&&Ie!==x&&Yc(S,L,I,N,A,q,Ie.x,Ie.y)&&Cn(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.nextZ}return!0}function pA(a,n,s){var h=a;do{var f=h.prev,v=h.next.next;!Yf(f,v)&&Ob(f,h,h.next,v)&&ah(f,v)&&ah(v,f)&&(n.push(f.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),sh(h),sh(h.next),h=a=v),h=h.next}while(h!==a);return Gl(h)}function fA(a,n,s,h,f,v){var x=a;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&_A(x,S)){var I=Fb(x,S);return x=Gl(x,x.next),I=Gl(I,I.next),oh(x,n,s,h,f,v,0),void oh(I,n,s,h,f,v,0)}S=S.next}x=x.next}while(x!==a)}function mA(a,n){return a.x-n.x}function gA(a,n){var s=function(f,v){var x,S=v,I=f.x,A=f.y,L=-1/0;do{if(A<=S.y&&A>=S.next.y&&S.next.y!==S.y){var N=S.x+(A-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(N<=I&&N>L&&(L=N,x=S.x<S.next.x?S:S.next,N===I))return x}S=S.next}while(S!==v);if(!x)return null;var q,Y=x,ee=x.x,se=x.y,fe=1/0;S=x;do I>=S.x&&S.x>=ee&&I!==S.x&&Yc(A<se?I:L,A,ee,se,A<se?L:I,A,S.x,S.y)&&(q=Math.abs(A-S.y)/(I-S.x),ah(S,f)&&(q<fe||q===fe&&(S.x>x.x||S.x===x.x&&yA(x,S)))&&(x=S,fe=q)),S=S.next;while(S!==Y);return x}(a,n);if(!s)return n;var h=Fb(s,a);return Gl(h,h.next),Gl(s,s.next)}function yA(a,n){return Cn(a.prev,a,n.prev)<0&&Cn(n.next,a,a.next)<0}function Rv(a,n,s,h,f){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*f|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function vA(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function Yc(a,n,s,h,f,v,x,S){return(f-x)*(n-S)>=(a-x)*(v-S)&&(a-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(v-S)>=(f-x)*(h-S)}function _A(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,h){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==h.i&&f.next.i!==h.i&&Ob(f,f.next,s,h))return!0;f=f.next}while(f!==s);return!1}(a,n)&&(ah(a,n)&&ah(n,a)&&function(s,h){var f=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do f.y>S!=f.next.y>S&&f.next.y!==f.y&&x<(f.next.x-f.x)*(S-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(a,n)&&(Cn(a.prev,a,n.prev)||Cn(a,n.prev,n))||Yf(a,n)&&Cn(a.prev,a,a.next)>0&&Cn(n.prev,n,n.next)>0)}function Cn(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function Yf(a,n){return a.x===n.x&&a.y===n.y}function Ob(a,n,s,h){var f=em(Cn(a,n,s)),v=em(Cn(a,n,h)),x=em(Cn(s,h,a)),S=em(Cn(s,h,n));return f!==v&&x!==S||!(f!==0||!Qf(a,s,n))||!(v!==0||!Qf(a,h,n))||!(x!==0||!Qf(s,a,h))||!(S!==0||!Qf(s,n,h))}function Qf(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function em(a){return a>0?1:a<0?-1:0}function ah(a,n){return Cn(a.prev,a,a.next)<0?Cn(a,n,a.next)>=0&&Cn(a,a.prev,n)>=0:Cn(a,n,a.prev)<0||Cn(a,a.next,n)<0}function Fb(a,n){var s=new Lv(a.i,a.x,a.y),h=new Lv(n.i,n.x,n.y),f=a.next,v=n.prev;return a.next=n,n.prev=a,s.next=f,f.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Nb(a,n,s,h){var f=new Lv(a,n,s);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function sh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Lv(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $v(a,n,s,h){for(var f=0,v=n,x=s-h;v<s;v+=h)f+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return f}Dv.exports=Jf,Dv.exports.default=Jf,Jf.deviation=function(a,n,s,h){var f=n&&n.length,v=Math.abs($v(a,0,f?n[0]*s:a.length,s));if(f)for(var x=0,S=n.length;x<S;x++)v-=Math.abs($v(a,n[x]*s,x<S-1?n[x+1]*s:a.length,s));var I=0;for(x=0;x<h.length;x+=3){var A=h[x]*s,L=h[x+1]*s,N=h[x+2]*s;I+=Math.abs((a[A]-a[N])*(a[L+1]-a[A+1])-(a[A]-a[L])*(a[N+1]-a[A+1]))}return v===0&&I===0?0:Math.abs((I-v)/v)},Jf.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,f=0;f<a.length;f++){for(var v=0;v<a[f].length;v++)for(var x=0;x<n;x++)s.vertices.push(a[f][v][x]);f>0&&s.holes.push(h+=a[f-1].length)}return s};var jb=w(Dv.exports);function xA(a,n,s,h,f){Vb(a,n,s||0,h||a.length-1,f||bA)}function Vb(a,n,s,h,f){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,S=Math.log(v),I=.5*Math.exp(2*S/3),A=.5*Math.sqrt(S*I*(v-I)/v)*(x-v/2<0?-1:1);Vb(a,n,Math.max(s,Math.floor(n-x*I/v+A)),Math.min(h,Math.floor(n+(v-x)*I/v+A)),f)}var L=a[n],N=s,q=h;for(lh(a,s,n),f(a[h],L)>0&&lh(a,s,h);N<q;){for(lh(a,N,q),N++,q--;f(a[N],L)<0;)N++;for(;f(a[q],L)>0;)q--}f(a[s],L)===0?lh(a,s,q):lh(a,++q,h),q<=n&&(s=q+1),n<=q&&(h=q-1)}}function lh(a,n,s){var h=a[n];a[n]=a[s],a[s]=h}function bA(a,n){return a<n?-1:a>n?1:0}function Bv(a,n){const s=a.length;if(s<=1)return[a];const h=[];let f,v;for(let x=0;x<s;x++){const S=Ae(a[x]);S!==0&&(a[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(f&&h.push(f),f=[a[x]]):f.push(a[x]))}if(f&&h.push(f),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(xA(h[x],n,1,h[x].length-1,wA),h[x]=h[x].slice(0,n));return h}function wA(a,n){return n.area-a.area}function Ov(a,n,s){const h=s.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(f=!0);const S=x.constantOr(null);S&&(f=!0,h[S.to]=!0,h[S.from]=!0)}return f}function Fv(a,n,s,h,f){const v=f.patternDependencies;for(const x of n){const S=x.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let I=S.evaluate({zoom:h-1},s,{},f.availableImages),A=S.evaluate({zoom:h},s,{},f.availableImages),L=S.evaluate({zoom:h+1},s,{},f.availableImages);I=I&&I.name?I.name:I,A=A&&A.name?A.name:A,L=L&&L.name?L.name:L,v[I]=!0,v[A]=!0,v[L]=!0,s.patterns[x.id]={min:I,mid:A,max:L}}}return s}class Nv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fr,this.indexArray=new ei,this.indexArray2=new On,this.programConfigurations=new xa(n.layers,n.zoom),this.segments=new Jr,this.segments2=new Jr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Ov("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:S,id:I,index:A,sourceLayerIndex:L}of n){const N=this.layers[0]._featureFilter.needGeometry,q=Wl(S,N);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),q,h))continue;const Y=v?f.evaluate(q,{},h,s.availableImages):void 0,ee={id:I,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:N?q.geometry:Hl(S),patterns:{},sortKey:Y};x.push(ee)}v&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const N=Fv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(N)}else this.addFeature(S,I,A,h,{});s.featureIndex.insert(n[A].feature,I,A,L,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,f,v){for(const x of Bv(s,500)){let S=0;for(const Y of x)S+=Y.length;const I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=I.vertexLength,L=[],N=[];for(const Y of x){if(Y.length===0)continue;Y!==x[0]&&N.push(L.length/2);const ee=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),se=ee.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(se+Y.length-1,se),L.push(Y[0].x),L.push(Y[0].y);for(let fe=1;fe<Y.length;fe++)this.layoutVertexArray.emplaceBack(Y[fe].x,Y[fe].y),this.indexArray2.emplaceBack(se+fe-1,se+fe),L.push(Y[fe].x),L.push(Y[fe].y);ee.vertexLength+=Y.length,ee.primitiveLength+=Y.length}const q=jb(L,N);for(let Y=0;Y<q.length;Y+=3)this.indexArray.emplaceBack(A+q[Y],A+q[Y+1],A+q[Y+2]);I.vertexLength+=S,I.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}let Ub,Hb;It("FillBucket",Nv,{omit:["layers","patternFeatures"]});var SA={get paint(){return Hb=Hb||new wn({"fill-antialias":new Vt(Pe.paint_fill["fill-antialias"]),"fill-opacity":new Yt(Pe.paint_fill["fill-opacity"]),"fill-color":new Yt(Pe.paint_fill["fill-color"]),"fill-outline-color":new Yt(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Vt(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Vt(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new jl(Pe.paint_fill["fill-pattern"])})},get layout(){return Ub=Ub||new wn({"fill-sort-key":new Yt(Pe.layout_fill["fill-sort-key"])})}};class CA extends ho{constructor(n){super(n,SA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Nv(n)}queryRadius(){return Zf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S){return kb(Kf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),f)}isTileClipped(){return!0}}const kA=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),TA=sn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:IA}=kA;var qs={},PA=T,Wb=Qc;function Qc(a,n,s,h,f){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=f,a.readFields(EA,this,n)}function EA(a,n,s){a==1?n.id=s.readVarint():a==2?function(h,f){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=f._keys[h.readVarint()],S=f._values[h.readVarint()];f.properties[x]=S}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function zA(a){for(var n,s,h=0,f=0,v=a.length,x=v-1;f<v;x=f++)h+=((s=a[x]).x-(n=a[f]).x)*(n.y+s.y);return h}Qc.types=["Unknown","Point","LineString","Polygon"],Qc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,h=1,f=0,v=0,x=0,S=[];a.pos<s;){if(f<=0){var I=a.readVarint();h=7&I,f=I>>3}if(f--,h===1||h===2)v+=a.readSVarint(),x+=a.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new PA(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Qc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,h=0,f=0,v=0,x=1/0,S=-1/0,I=1/0,A=-1/0;a.pos<n;){if(h<=0){var L=a.readVarint();s=7&L,h=L>>3}if(h--,s===1||s===2)(f+=a.readSVarint())<x&&(x=f),f>S&&(S=f),(v+=a.readSVarint())<I&&(I=v),v>A&&(A=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,S,A]},Qc.prototype.toGeoJSON=function(a,n,s){var h,f,v=this.extent*Math.pow(2,s),x=this.extent*a,S=this.extent*n,I=this.loadGeometry(),A=Qc.types[this.type];function L(Y){for(var ee=0;ee<Y.length;ee++){var se=Y[ee];Y[ee]=[360*(se.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(h=0;h<I.length;h++)N[h]=I[h][0];L(I=N);break;case 2:for(h=0;h<I.length;h++)L(I[h]);break;case 3:for(I=function(Y){var ee=Y.length;if(ee<=1)return[Y];for(var se,fe,ye=[],Ce=0;Ce<ee;Ce++){var be=zA(Y[Ce]);be!==0&&(fe===void 0&&(fe=be<0),fe===be<0?(se&&ye.push(se),se=[Y[Ce]]):se.push(Y[Ce]))}return se&&ye.push(se),ye}(I),h=0;h<I.length;h++)for(f=0;f<I[h].length;f++)L(I[h][f])}I.length===1?I=I[0]:A="Multi"+A;var q={type:"Feature",geometry:{type:A,coordinates:I},properties:this.properties};return"id"in this&&(q.id=this.id),q};var AA=Wb,Gb=qb;function qb(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(MA,this,n),this.length=this._features.length}function MA(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(h){for(var f=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(s))}qb.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new AA(this._pbf,n,this.extent,this._keys,this._values)};var DA=Gb;function RA(a,n,s){if(a===3){var h=new DA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}qs.VectorTile=function(a,n){this.layers=a.readFields(RA,{},n)},qs.VectorTileFeature=Wb,qs.VectorTileLayer=Gb;const LA=qs.VectorTileFeature.types,jv=Math.pow(2,13);function ch(a,n,s,h,f,v,x,S){a.emplaceBack(n,s,2*Math.floor(h*jv)+x,f*jv*2,v*jv*2,Math.round(S))}class Vv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new pt,this.centroidVertexArray=new ot,this.indexArray=new ei,this.programConfigurations=new xa(n.layers,n.zoom),this.segments=new Jr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Ov("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:S}of n){const I=this.layers[0]._featureFilter.needGeometry,A=Wl(f,I);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),A,h))continue;const L={id:v,sourceLayerIndex:S,index:x,geometry:I?A.geometry:Hl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Fv("fill-extrusion",this.layers,L,this.zoom,s)):this.addFeature(L,L.geometry,x,h,{}),s.featureIndex.insert(f,L.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,IA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,TA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,f,v){const x={x:0,y:0,vertexCount:0};for(const S of Bv(s,500)){let I=0;for(const ee of S)I+=ee.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of S){if(ee.length===0||BA(ee))continue;let se=0;for(let fe=0;fe<ee.length;fe++){const ye=ee[fe];if(fe>=1){const Ce=ee[fe-1];if(!$A(ye,Ce)){A.vertexLength+4>Jr.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const be=ye.sub(Ce)._perp()._unit(),Ie=Ce.dist(ye);se+Ie>32768&&(se=0),ch(this.layoutVertexArray,ye.x,ye.y,be.x,be.y,0,0,se),ch(this.layoutVertexArray,ye.x,ye.y,be.x,be.y,0,1,se),x.x+=2*ye.x,x.y+=2*ye.y,x.vertexCount+=2,se+=Ie,ch(this.layoutVertexArray,Ce.x,Ce.y,be.x,be.y,0,0,se),ch(this.layoutVertexArray,Ce.x,Ce.y,be.x,be.y,0,1,se),x.x+=2*Ce.x,x.y+=2*Ce.y,x.vertexCount+=2;const Ne=A.vertexLength;this.indexArray.emplaceBack(Ne,Ne+2,Ne+1),this.indexArray.emplaceBack(Ne+1,Ne+2,Ne+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+I>Jr.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),LA[n.type]!=="Polygon")continue;const L=[],N=[],q=A.vertexLength;for(const ee of S)if(ee.length!==0){ee!==S[0]&&N.push(L.length/2);for(let se=0;se<ee.length;se++){const fe=ee[se];ch(this.layoutVertexArray,fe.x,fe.y,0,0,1,1,0),x.x+=fe.x,x.y+=fe.y,x.vertexCount+=1,L.push(fe.x),L.push(fe.y)}}const Y=jb(L,N);for(let ee=0;ee<Y.length;ee+=3)this.indexArray.emplaceBack(q+Y[ee],q+Y[ee+2],q+Y[ee+1]);A.primitiveLength+=Y.length/3,A.vertexLength+=I}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}function $A(a,n){return a.x===n.x&&(a.x<0||a.x>An)||a.y===n.y&&(a.y<0||a.y>An)}function BA(a){return a.every(n=>n.x<0)||a.every(n=>n.x>An)||a.every(n=>n.y<0)||a.every(n=>n.y>An)}let Zb;It("FillExtrusionBucket",Vv,{omit:["layers","features"]});var OA={get paint(){return Zb=Zb||new wn({"fill-extrusion-opacity":new Vt(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yt(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vt(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vt(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jl(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yt(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yt(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vt(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class FA extends ho{constructor(n){super(n,OA)}createBucket(n){return new Vv(n)}queryRadius(){return Zf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,f,v,x,S,I){const A=Kf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),L=this.paint.get("fill-extrusion-height").evaluate(s,h),N=this.paint.get("fill-extrusion-base").evaluate(s,h),q=function(ee,se,fe,ye){const Ce=[];for(const be of ee){const Ie=[be.x,be.y,0,1];Xf(Ie,Ie,se),Ce.push(new P(Ie[0]/Ie[3],Ie[1]/Ie[3]))}return Ce}(A,I),Y=function(ee,se,fe,ye){const Ce=[],be=[],Ie=ye[8]*se,Ne=ye[9]*se,Ke=ye[10]*se,wt=ye[11]*se,$t=ye[8]*fe,xt=ye[9]*fe,ft=ye[10]*fe,st=ye[11]*fe;for(const Pt of ee){const ut=[],tt=[];for(const Wt of Pt){const Nt=Wt.x,hr=Wt.y,Yr=ye[0]*Nt+ye[4]*hr+ye[12],rn=ye[1]*Nt+ye[5]*hr+ye[13],jn=ye[2]*Nt+ye[6]*hr+ye[14],fo=ye[3]*Nt+ye[7]*hr+ye[15],zi=jn+Ke,Mn=fo+wt,ri=Yr+$t,ci=rn+xt,Ai=jn+ft,Mi=fo+st,Vn=new P((Yr+Ie)/Mn,(rn+Ne)/Mn);Vn.z=zi/Mn,ut.push(Vn);const Un=new P(ri/Mi,ci/Mi);Un.z=Ai/Mi,tt.push(Un)}Ce.push(ut),be.push(tt)}return[Ce,be]}(f,N,L,I);return function(ee,se,fe){let ye=1/0;kb(fe,se)&&(ye=Kb(fe,se[0]));for(let Ce=0;Ce<se.length;Ce++){const be=se[Ce],Ie=ee[Ce];for(let Ne=0;Ne<be.length-1;Ne++){const Ke=be[Ne],wt=[Ke,be[Ne+1],Ie[Ne+1],Ie[Ne],Ke];Cb(fe,wt)&&(ye=Math.min(ye,Kb(fe,wt)))}}return ye!==1/0&&ye}(Y[0],Y[1],q)}}function uh(a,n){return a.x*n.x+a.y*n.y}function Kb(a,n){if(a.length===1){let s=0;const h=n[s++];let f;for(;!f||h.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const v=n[s],x=a[0],S=f.sub(h),I=v.sub(h),A=x.sub(h),L=uh(S,S),N=uh(S,I),q=uh(I,I),Y=uh(A,S),ee=uh(A,I),se=L*q-N*N,fe=(q*Y-N*ee)/se,ye=(L*ee-N*Y)/se,Ce=h.z*(1-fe-ye)+f.z*fe+v.z*ye;if(isFinite(Ce))return Ce}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const NA=sn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:jA}=NA,VA=sn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:UA}=VA,HA=qs.VectorTileFeature.types,WA=Math.cos(Math.PI/180*37.5),Xb=Math.pow(2,14)/.5;class Uv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Qt,this.layoutVertexArray2=new Ot,this.indexArray=new ei,this.programConfigurations=new xa(n.layers,n.zoom),this.segments=new Jr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Ov("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:S,id:I,index:A,sourceLayerIndex:L}of n){const N=this.layers[0]._featureFilter.needGeometry,q=Wl(S,N);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),q,h))continue;const Y=v?f.evaluate(q,{},h):void 0,ee={id:I,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:N?q.geometry:Hl(S),patterns:{},sortKey:Y};x.push(ee)}v&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const N=Fv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(N)}else this.addFeature(S,I,A,h,{});s.featureIndex.insert(n[A].feature,I,A,L,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,UA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,jA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,f,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),I=x.get("line-cap"),A=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const N of s)this.addLine(N,n,S,I,A,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}addLine(n,s,h,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<n.length-1;ye++)this.totalDistance+=n[ye].dist(n[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=HA[s.type]==="Polygon";let I=n.length;for(;I>=2&&n[I-1].equals(n[I-2]);)I--;let A=0;for(;A<I-1&&n[A].equals(n[A+1]);)A++;if(I<(S?3:2))return;h==="bevel"&&(v=1.05);const L=this.overscaling<=16?15*An/(512*this.overscaling):0,N=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let q,Y,ee,se,fe;this.e1=this.e2=-1,S&&(q=n[I-2],fe=n[A].sub(q)._unit()._perp());for(let ye=A;ye<I;ye++){if(ee=ye===I-1?S?n[A+1]:void 0:n[ye+1],ee&&n[ye].equals(ee))continue;fe&&(se=fe),q&&(Y=q),q=n[ye],fe=ee?ee.sub(q)._unit()._perp():se,se=se||fe;let Ce=se.add(fe);Ce.x===0&&Ce.y===0||Ce._unit();const be=se.x*fe.x+se.y*fe.y,Ie=Ce.x*fe.x+Ce.y*fe.y,Ne=Ie!==0?1/Ie:1/0,Ke=2*Math.sqrt(2-2*Ie),wt=Ie<WA&&Y&&ee,$t=se.x*fe.y-se.y*fe.x>0;if(wt&&ye>A){const st=q.dist(Y);if(st>2*L){const Pt=q.sub(q.sub(Y)._mult(L/st)._round());this.updateDistance(Y,Pt),this.addCurrentVertex(Pt,se,0,0,N),Y=Pt}}const xt=Y&&ee;let ft=xt?h:S?"butt":f;if(xt&&ft==="round"&&(Ne<x?ft="miter":Ne<=2&&(ft="fakeround")),ft==="miter"&&Ne>v&&(ft="bevel"),ft==="bevel"&&(Ne>2&&(ft="flipbevel"),Ne<v&&(ft="miter")),Y&&this.updateDistance(Y,q),ft==="miter")Ce._mult(Ne),this.addCurrentVertex(q,Ce,0,0,N);else if(ft==="flipbevel"){if(Ne>100)Ce=fe.mult(-1);else{const st=Ne*se.add(fe).mag()/se.sub(fe).mag();Ce._perp()._mult(st*($t?-1:1))}this.addCurrentVertex(q,Ce,0,0,N),this.addCurrentVertex(q,Ce.mult(-1),0,0,N)}else if(ft==="bevel"||ft==="fakeround"){const st=-Math.sqrt(Ne*Ne-1),Pt=$t?st:0,ut=$t?0:st;if(Y&&this.addCurrentVertex(q,se,Pt,ut,N),ft==="fakeround"){const tt=Math.round(180*Ke/Math.PI/20);for(let Wt=1;Wt<tt;Wt++){let Nt=Wt/tt;if(Nt!==.5){const Yr=Nt-.5;Nt+=Nt*Yr*(Nt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*Yr*Yr+(.848013+be*(.215638*be-1.06021)))}const hr=fe.sub(se)._mult(Nt)._add(se)._unit()._mult($t?-1:1);this.addHalfVertex(q,hr.x,hr.y,!1,$t,0,N)}}ee&&this.addCurrentVertex(q,fe,-Pt,-ut,N)}else if(ft==="butt")this.addCurrentVertex(q,Ce,0,0,N);else if(ft==="square"){const st=Y?1:-1;this.addCurrentVertex(q,Ce,st,st,N)}else ft==="round"&&(Y&&(this.addCurrentVertex(q,se,0,0,N),this.addCurrentVertex(q,se,1,1,N,!0)),ee&&(this.addCurrentVertex(q,fe,-1,-1,N,!0),this.addCurrentVertex(q,fe,0,0,N)));if(wt&&ye<I-1){const st=q.dist(ee);if(st>2*L){const Pt=q.add(ee.sub(q)._mult(L/st)._round());this.updateDistance(q,Pt),this.addCurrentVertex(Pt,fe,0,0,N),q=Pt}}}}addCurrentVertex(n,s,h,f,v,x=!1){const S=s.y*f-s.x,I=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,S,I,x,!0,-f,v),this.distance>Xb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,f,v,x))}addHalfVertex({x:n,y:s},h,f,v,x,S,I){const A=.5*(this.lineClips?this.scaledDistance*(Xb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),I.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Jb,Yb;It("LineBucket",Uv,{omit:["layers","patternFeatures"]});var Qb={get paint(){return Yb=Yb||new wn({"line-opacity":new Yt(Pe.paint_line["line-opacity"]),"line-color":new Yt(Pe.paint_line["line-color"]),"line-translate":new Vt(Pe.paint_line["line-translate"]),"line-translate-anchor":new Vt(Pe.paint_line["line-translate-anchor"]),"line-width":new Yt(Pe.paint_line["line-width"]),"line-gap-width":new Yt(Pe.paint_line["line-gap-width"]),"line-offset":new Yt(Pe.paint_line["line-offset"]),"line-blur":new Yt(Pe.paint_line["line-blur"]),"line-dasharray":new qd(Pe.paint_line["line-dasharray"]),"line-pattern":new jl(Pe.paint_line["line-pattern"]),"line-gradient":new Zd(Pe.paint_line["line-gradient"])})},get layout(){return Jb=Jb||new wn({"line-cap":new Vt(Pe.layout_line["line-cap"]),"line-join":new Yt(Pe.layout_line["line-join"]),"line-miter-limit":new Vt(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Vt(Pe.layout_line["line-round-limit"]),"line-sort-key":new Yt(Pe.layout_line["line-sort-key"])})}};class GA extends Yt{possiblyEvaluate(n,s){return s=new Xr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,f){return s=de({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,f)}}let tm;class qA extends ho{constructor(n){super(n,Qb),this.gradientVersion=0,tm||(tm=new GA(Qb.paint.properties["line-width"].specification),tm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=tm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Uv(n)}queryRadius(n){const s=n,h=ew(rh("line-width",this,s),rh("line-gap-width",this,s)),f=rh("line-offset",this,s);return h/2+Math.abs(f)+Zf(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S){const I=Kf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),A=S/2*ew(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),L=this.paint.get("line-offset").evaluate(s,h);return L&&(f=function(N,q){const Y=[];for(let ee=0;ee<N.length;ee++){const se=N[ee],fe=[];for(let ye=0;ye<se.length;ye++){const Ce=se[ye-1],be=se[ye],Ie=se[ye+1],Ne=ye===0?new P(0,0):be.sub(Ce)._unit()._perp(),Ke=ye===se.length-1?new P(0,0):Ie.sub(be)._unit()._perp(),wt=Ne._add(Ke)._unit(),$t=wt.x*Ke.x+wt.y*Ke.y;$t!==0&&wt._mult(1/$t),fe.push(wt._mult(q)._add(be))}Y.push(fe)}return Y}(f,L*S)),function(N,q,Y){for(let ee=0;ee<q.length;ee++){const se=q[ee];if(N.length>=3){for(let fe=0;fe<se.length;fe++)if(Xc(N,se[fe]))return!0}if(Qz(N,se,Y))return!0}return!1}(I,f,A)}isTileClipped(){return!0}}function ew(a,n){return n>0?n+2*a:a}const ZA=sn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),KA=sn([{name:"a_projected_pos",components:3,type:"Float32"}],4);sn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const XA=sn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);sn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const tw=sn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),JA=sn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function YA(a,n,s){return a.sections.forEach(h=>{h.text=function(f,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?f=f.toLocaleUpperCase():S==="lowercase"&&(f=f.toLocaleLowerCase()),Zi.applyArabicShaping&&(f=Zi.applyArabicShaping(f)),f}(h.text,n,s)}),a}sn([{name:"triangle",components:3,type:"Uint16"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),sn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),sn([{type:"Float32",name:"offsetX"}]),sn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),sn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const dh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Nn=24,rw=Br,nw=function(a,n,s,h,f){var v,x,S=8*f-h-1,I=(1<<S)-1,A=I>>1,L=-7,N=s?f-1:0,q=s?-1:1,Y=a[n+N];for(N+=q,v=Y&(1<<-L)-1,Y>>=-L,L+=S;L>0;v=256*v+a[n+N],N+=q,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=h;L>0;x=256*x+a[n+N],N+=q,L-=8);if(v===0)v=1-A;else{if(v===I)return x?NaN:1/0*(Y?-1:1);x+=Math.pow(2,h),v-=A}return(Y?-1:1)*x*Math.pow(2,v-h)},iw=function(a,n,s,h,f,v){var x,S,I,A=8*v-f-1,L=(1<<A)-1,N=L>>1,q=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=h?0:v-1,ee=h?1:-1,se=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=L):(x=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-x))<1&&(x--,I*=2),(n+=x+N>=1?q/I:q*Math.pow(2,1-N))*I>=2&&(x++,I/=2),x+N>=L?(S=0,x=L):x+N>=1?(S=(n*I-1)*Math.pow(2,f),x+=N):(S=n*Math.pow(2,N-1)*Math.pow(2,f),x=0));f>=8;a[s+Y]=255&S,Y+=ee,S/=256,f-=8);for(x=x<<f|S,A+=f;A>0;a[s+Y]=255&x,Y+=ee,x/=256,A-=8);a[s+Y-ee]|=128*se};function Br(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Br.Varint=0,Br.Fixed64=1,Br.Bytes=2,Br.Fixed32=5;var Hv=4294967296,ow=1/Hv,aw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function gs(a){return a.type===Br.Bytes?a.readVarint()+a.pos:a.pos+1}function eu(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function sw(a,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var f=s.pos-1;f>=a;f--)s.buf[f+h]=s.buf[f]}function QA(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function eM(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function tM(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function rM(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function nM(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function iM(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function oM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function aM(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function sM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function rm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function tu(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function lw(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Br.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),f=h>>3,v=this.pos;this.type=7&h,a(f,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=rm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=lw(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=rm(this.buf,this.pos)+rm(this.buf,this.pos+4)*Hv;return this.pos+=8,a},readSFixed64:function(){var a=rm(this.buf,this.pos)+lw(this.buf,this.pos+4)*Hv;return this.pos+=8,a},readFloat:function(){var a=nw(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=nw(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(f,v,x){var S,I,A=x.buf;if(S=(112&(I=A[x.pos++]))>>4,I<128||(S|=(127&(I=A[x.pos++]))<<3,I<128)||(S|=(127&(I=A[x.pos++]))<<10,I<128)||(S|=(127&(I=A[x.pos++]))<<17,I<128)||(S|=(127&(I=A[x.pos++]))<<24,I<128)||(S|=(1&(I=A[x.pos++]))<<31,I<128))return eu(f,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&aw?function(s,h,f){return aw.decode(s.subarray(h,f))}(this.buf,n,a):function(s,h,f){for(var v="",x=h;x<f;){var S,I,A,L=s[x],N=null,q=L>239?4:L>223?3:L>191?2:1;if(x+q>f)break;q===1?L<128&&(N=L):q===2?(192&(S=s[x+1]))==128&&(N=(31&L)<<6|63&S)<=127&&(N=null):q===3?(I=s[x+2],(192&(S=s[x+1]))==128&&(192&I)==128&&((N=(15&L)<<12|(63&S)<<6|63&I)<=2047||N>=55296&&N<=57343)&&(N=null)):q===4&&(I=s[x+2],A=s[x+3],(192&(S=s[x+1]))==128&&(192&I)==128&&(192&A)==128&&((N=(15&L)<<18|(63&S)<<12|(63&I)<<6|63&A)<=65535||N>=1114112)&&(N=null)),N===null?(N=65533,q=1):N>65535&&(N-=65536,v+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),v+=String.fromCharCode(N),x+=q}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Br.Bytes)return a.push(this.readVarint(n));var s=gs(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Br.Bytes)return a.push(this.readSVarint());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Br.Bytes)return a.push(this.readBoolean());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Br.Bytes)return a.push(this.readFloat());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Br.Bytes)return a.push(this.readDouble());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Br.Bytes)return a.push(this.readFixed32());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Br.Bytes)return a.push(this.readSFixed32());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Br.Bytes)return a.push(this.readFixed64());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Br.Bytes)return a.push(this.readSFixed64());var n=gs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Br.Varint)for(;this.buf[this.pos++]>127;);else if(n===Br.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Br.Fixed32)this.pos+=4;else{if(n!==Br.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),tu(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),tu(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),tu(this.buf,-1&a,this.pos),tu(this.buf,Math.floor(a*ow),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),tu(this.buf,-1&a,this.pos),tu(this.buf,Math.floor(a*ow),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var h,f;if(n>=0?(h=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,f,v){for(var x,S,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!S){x>56319||I+1===f.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&sw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),iw(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),iw(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var h=this.pos-s;h>=128&&sw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,s){this.writeTag(a,Br.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,QA,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,eM,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,nM,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,tM,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,rM,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,iM,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,oM,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,aM,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,sM,n)},writeBytesField:function(a,n){this.writeTag(a,Br.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Br.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Br.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Br.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Br.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Br.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Br.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Br.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Br.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Br.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var Wv=w(rw);const Gv=3;function lM(a,n,s){a===1&&s.readMessage(cM,n)}function cM(a,n,s){if(a===3){const{id:h,bitmap:f,width:v,height:x,left:S,top:I,advance:A}=s.readMessage(uM,{});n.push({id:h,bitmap:new ih({width:v+2*Gv,height:x+2*Gv},f),metrics:{width:v,height:x,left:S,top:I,advance:A}})}}function uM(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}const cw=Gv;function uw(a){let n=0,s=0;for(const x of a)n+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,v=0;for(const x of a)for(let S=h.length-1;S>=0;S--){const I=h[S];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===I.w&&x.h===I.h){const A=h.pop();S<h.length&&(h[S]=A)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(h.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const Xi=1;class qv{constructor(n,{pixelRatio:s,version:h,stretchX:f,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Xi,this.paddedRect.y+Xi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Xi,this.paddedRect.y+this.paddedRect.h-Xi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Xi)/this.pixelRatio,(this.paddedRect.h-2*Xi)/this.pixelRatio]}}class dw{constructor(n,s){const h={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,f,v);const{w:x,h:S}=uw(v),I=new Co({width:x||1,height:S||1});for(const A in n){const L=n[A],N=h[A].paddedRect;Co.copy(L.data,I,{x:0,y:0},{x:N.x+Xi,y:N.y+Xi},L.data)}for(const A in s){const L=s[A],N=f[A].paddedRect,q=N.x+Xi,Y=N.y+Xi,ee=L.data.width,se=L.data.height;Co.copy(L.data,I,{x:0,y:0},{x:q,y:Y},L.data),Co.copy(L.data,I,{x:0,y:se-1},{x:q,y:Y-1},{width:ee,height:1}),Co.copy(L.data,I,{x:0,y:0},{x:q,y:Y+se},{width:ee,height:1}),Co.copy(L.data,I,{x:ee-1,y:0},{x:q-1,y:Y},{width:1,height:se}),Co.copy(L.data,I,{x:0,y:0},{x:q+ee,y:Y},{width:1,height:se})}this.image=I,this.iconPositions=h,this.patternPositions=f}addImages(n,s,h){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*Xi,h:v.data.height+2*Xi};h.push(x),s[f]=new qv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,v]=n.tl;h.update(s.data,void 0,{x:f,y:v})}}var Zs;It("ImagePosition",qv),It("ImageAtlas",dw),c.ai=void 0,(Zs=c.ai||(c.ai={}))[Zs.none=0]="none",Zs[Zs.horizontal=1]="horizontal",Zs[Zs.vertical=2]="vertical",Zs[Zs.horizontalOnly=3]="horizontalOnly";const hh=-17;class ph{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new ph;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new ph;return s.imageName=n,s}}class ru{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new ru;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const f=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=f&&Bf(f)&&!dh[n[h+1]]||v&&Bf(v)&&!dh[n[h-1]]||!dh[n[h]]?n[h]:dh[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&im[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&im[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new ru;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(ph.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void He("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(ph.forImage(s)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function nm(a,n,s,h,f,v,x,S,I,A,L,N,q,Y,ee,se){const fe=ru.fromFeature(a,f);let ye;N===c.ai.vertical&&fe.verticalizePunctuation();const{processBidirectionalText:Ce,processStyledBidirectionalText:be}=Zi;if(Ce&&fe.sections.length===1){ye=[];const Ke=Ce(fe.toString(),Zv(fe,A,v,n,h,Y,ee));for(const wt of Ke){const $t=new ru;$t.text=wt,$t.sections=fe.sections;for(let xt=0;xt<wt.length;xt++)$t.sectionIndex.push(0);ye.push($t)}}else if(be){ye=[];const Ke=be(fe.text,fe.sectionIndex,Zv(fe,A,v,n,h,Y,ee));for(const wt of Ke){const $t=new ru;$t.text=wt[0],$t.sectionIndex=wt[1],$t.sections=fe.sections,ye.push($t)}}else ye=function(Ke,wt){const $t=[],xt=Ke.text;let ft=0;for(const st of wt)$t.push(Ke.substring(ft,st)),ft=st;return ft<xt.length&&$t.push(Ke.substring(ft,xt.length)),$t}(fe,Zv(fe,A,v,n,h,Y,ee));const Ie=[],Ne={positionedLines:Ie,text:fe.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(Ke,wt,$t,xt,ft,st,Pt,ut,tt,Wt,Nt,hr){let Yr=0,rn=hh,jn=0,fo=0;const zi=ut==="right"?1:ut==="left"?0:.5;let Mn=0;for(const Vn of ft){Vn.trim();const Un=Vn.getMaxScale(),vi=(Un-1)*Nn,Di={positionedGlyphs:[],lineOffset:0};Ke.positionedLines[Mn]=Di;const _i=Di.positionedGlyphs;let Ji=0;if(!Vn.length()){rn+=st,++Mn;continue}for(let Hn=0;Hn<Vn.length();Hn++){const vr=Vn.getSection(Hn),xi=Vn.getSectionIndex(Hn),ui=Vn.getCharCode(Hn);let Wn=0,Zo=null,ba=null,wa=null,ys=Nn;const Ko=!(tt===c.ai.horizontal||!Nt&&!Fd(ui)||Nt&&(im[ui]||(ri=ui,bt.Arabic(ri)||bt["Arabic Supplement"](ri)||bt["Arabic Extended-A"](ri)||bt["Arabic Presentation Forms-A"](ri)||bt["Arabic Presentation Forms-B"](ri))));if(vr.imageName){const To=xt[vr.imageName];if(!To)continue;wa=vr.imageName,Ke.iconsInText=Ke.iconsInText||!0,ba=To.paddedRect;const Qi=To.displaySize;vr.scale=vr.scale*Nn/hr,Zo={width:Qi[0],height:Qi[1],left:Xi,top:-cw,advance:Ko?Qi[1]:Qi[0]},Wn=vi+(Nn-Qi[1]*vr.scale),ys=Zo.advance;const vs=Ko?Qi[0]*vr.scale-Nn*Un:Qi[1]*vr.scale-Nn*Un;vs>0&&vs>Ji&&(Ji=vs)}else{const To=$t[vr.fontStack],Qi=To&&To[ui];if(Qi&&Qi.rect)ba=Qi.rect,Zo=Qi.metrics;else{const vs=wt[vr.fontStack],vh=vs&&vs[ui];if(!vh)continue;Zo=vh.metrics}Wn=(Un-vr.scale)*Nn}Ko?(Ke.verticalizable=!0,_i.push({glyph:ui,imageName:wa,x:Yr,y:rn+Wn,vertical:Ko,scale:vr.scale,fontStack:vr.fontStack,sectionIndex:xi,metrics:Zo,rect:ba}),Yr+=ys*vr.scale+Wt):(_i.push({glyph:ui,imageName:wa,x:Yr,y:rn+Wn,vertical:Ko,scale:vr.scale,fontStack:vr.fontStack,sectionIndex:xi,metrics:Zo,rect:ba}),Yr+=Zo.advance*vr.scale+Wt)}_i.length!==0&&(jn=Math.max(Yr-Wt,jn),pM(_i,0,_i.length-1,zi,Ji)),Yr=0;const Yi=st*Un+Ji;Di.lineOffset=Math.max(Ji,vi),rn+=Yi,fo=Math.max(Yi,fo),++Mn}var ri;const ci=rn-hh,{horizontalAlign:Ai,verticalAlign:Mi}=Kv(Pt);(function(Vn,Un,vi,Di,_i,Ji,Yi,Hn,vr){const xi=(Un-vi)*_i;let ui=0;ui=Ji!==Yi?-Hn*Di-hh:(-Di*vr+.5)*Yi;for(const Wn of Vn)for(const Zo of Wn.positionedGlyphs)Zo.x+=xi,Zo.y+=ui})(Ke.positionedLines,zi,Ai,Mi,jn,fo,st,ci,ft.length),Ke.top+=-Mi*ci,Ke.bottom=Ke.top+ci,Ke.left+=-Ai*jn,Ke.right=Ke.left+jn}(Ne,n,s,h,ye,x,S,I,N,A,q,se),!function(Ke){for(const wt of Ke)if(wt.positionedGlyphs.length!==0)return!1;return!0}(Ie)&&Ne}const im={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},dM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function hw(a,n,s,h,f,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Nn/v+f:0}{const x=s[n.fontStack],S=x&&x[a];return S?S.metrics.advance*n.scale+f:0}}function pw(a,n,s,h){const f=Math.pow(a-n,2);return h?a<n?f/2:2*f:f+Math.abs(s)*s}function hM(a,n,s){let h=0;return a===10&&(h-=1e4),s&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function fw(a,n,s,h,f,v){let x=null,S=pw(n,s,f,v);for(const I of h){const A=pw(n-I.x,s,f,v)+I.badness;A<=S&&(x=I,S=A)}return{index:a,x:n,priorBreak:x,badness:S}}function mw(a){return a?mw(a.priorBreak).concat(a.index):[]}function Zv(a,n,s,h,f,v,x){if(v!=="point")return[];if(!a)return[];const S=[],I=function(q,Y,ee,se,fe,ye){let Ce=0;for(let be=0;be<q.length();be++){const Ie=q.getSection(be);Ce+=hw(q.getCharCode(be),Ie,se,fe,Y,ye)}return Ce/Math.max(1,Math.ceil(Ce/ee))}(a,n,s,h,f,x),A=a.text.indexOf("")>=0;let L=0;for(let q=0;q<a.length();q++){const Y=a.getSection(q),ee=a.getCharCode(q);if(im[ee]||(L+=hw(ee,Y,h,f,n,x)),q<a.length()-1){const se=!((N=ee)<11904||!(bt["Bopomofo Extended"](N)||bt.Bopomofo(N)||bt["CJK Compatibility Forms"](N)||bt["CJK Compatibility Ideographs"](N)||bt["CJK Compatibility"](N)||bt["CJK Radicals Supplement"](N)||bt["CJK Strokes"](N)||bt["CJK Symbols and Punctuation"](N)||bt["CJK Unified Ideographs Extension A"](N)||bt["CJK Unified Ideographs"](N)||bt["Enclosed CJK Letters and Months"](N)||bt["Halfwidth and Fullwidth Forms"](N)||bt.Hiragana(N)||bt["Ideographic Description Characters"](N)||bt["Kangxi Radicals"](N)||bt["Katakana Phonetic Extensions"](N)||bt.Katakana(N)||bt["Vertical Forms"](N)||bt["Yi Radicals"](N)||bt["Yi Syllables"](N)));(dM[ee]||se||Y.imageName)&&S.push(fw(q+1,L,I,S,hM(ee,a.getCharCode(q+1),se&&A),!1))}}var N;return mw(fw(a.length(),L,I,S,0,!0))}function Kv(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function pM(a,n,s,h,f){if(!h&&!f)return;const v=a[s],x=(a[s].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=s;S++)a[S].x-=x,a[S].y+=f}function fM(a,n,s){const{horizontalAlign:h,verticalAlign:f}=Kv(s),v=n[0]-a.displaySize[0]*h,x=n[1]-a.displaySize[1]*f;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function gw(a,n,s,h,f,v){const x=a.image;let S;if(x.content){const fe=x.content,ye=x.pixelRatio||1;S=[fe[0]/ye,fe[1]/ye,x.displaySize[0]-fe[2]/ye,x.displaySize[1]-fe[3]/ye]}const I=n.left*v,A=n.right*v;let L,N,q,Y;s==="width"||s==="both"?(Y=f[0]+I-h[3],N=f[0]+A+h[1]):(Y=f[0]+(I+A-x.displaySize[0])/2,N=Y+x.displaySize[0]);const ee=n.top*v,se=n.bottom*v;return s==="height"||s==="both"?(L=f[1]+ee-h[0],q=f[1]+se+h[2]):(L=f[1]+(ee+se-x.displaySize[1])/2,q=L+x.displaySize[1]),{image:x,top:L,right:N,bottom:q,left:Y,collisionPadding:S}}const fh=255,Ha=128,Ks=fh*Ha;function yw(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Xr(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=s;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const S=h[v],I=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:S,maxZoom:I,minSize:s.evaluate(new Xr(S)),maxSize:s.evaluate(new Xr(I)),interpolationType:f}}}function Xv(a,n,s){let h="never";const f=a.get(n);return f?h=f:a.get(s)&&(h="always"),h}const mM=qs.VectorTileFeature.types,gM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function om(a,n,s,h,f,v,x,S,I,A,L,N,q){const Y=S?Math.min(Ks,Math.round(S[0])):0,ee=S?Math.min(Ks,Math.round(S[1])):0;a.emplaceBack(n,s,Math.round(32*h),Math.round(32*f),v,x,(Y<<1)+(I?1:0),ee,16*A,16*L,256*N,256*q)}function Jv(a,n,s){a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s)}function yM(a){for(const n of a.sections)if(Sv(n.text))return!0;return!1}class Yv{constructor(n){this.layoutVertexArray=new pr,this.indexArray=new ei,this.programConfigurations=n,this.segments=new Jr,this.dynamicLayoutVertexArray=new or,this.opacityVertexArray=new mr,this.hasVisibleVertices=!1,this.placedSymbolArray=new we}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ZA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,KA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,gM,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}It("SymbolBuffers",Yv);class Qv{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Jr,this.collisionVertexArray=new Wr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,XA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}It("CollisionBuffers",Qv);class nu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zv([]),this.placementViewportMatrix=zv([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yw(this.zoom,s["text-size"]),this.iconSizeData=yw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Xv(h,"text-overlap","text-allow-overlap")!=="never"||Xv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>c.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Yv(new xa(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Yv(new xa(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Se,this.lineVertexArray=new je,this.symbolInstances=new ge,this.textAnchorOffsets=new qe}calculateGlyphDependencies(n,s,h,f,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||f)&&v){const S=dh[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const f=this.layers[0],v=f.layout,x=v.get("text-font"),S=v.get("text-field"),I=v.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof ai&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,N=v.get("symbol-sort-key");if(this.features=[],!A&&!L)return;const q=s.iconDependencies,Y=s.glyphDependencies,ee=s.availableImages,se=new Xr(this.zoom);for(const{feature:fe,id:ye,index:Ce,sourceLayerIndex:be}of n){const Ie=f._featureFilter.needGeometry,Ne=Wl(fe,Ie);if(!f._featureFilter.filter(se,Ne,h))continue;let Ke,wt;if(Ie||(Ne.geometry=Hl(fe)),A){const xt=f.getValueAndResolveTokens("text-field",Ne,h,ee),ft=ai.factory(xt);yM(ft)&&(this.hasRTLText=!0),(!this.hasRTLText||Wd()==="unavailable"||this.hasRTLText&&Zi.isParsed())&&(Ke=YA(ft,f,Ne))}if(L){const xt=f.getValueAndResolveTokens("icon-image",Ne,h,ee);wt=xt instanceof Qn?xt:Qn.fromString(xt)}if(!Ke&&!wt)continue;const $t=this.sortFeaturesByKey?N.evaluate(Ne,{},h):void 0;if(this.features.push({id:ye,text:Ke,icon:wt,index:Ce,sourceLayerIndex:be,geometry:Ne.geometry,properties:fe.properties,type:mM[fe.type],sortKey:$t}),wt&&(q[wt.name]=!0),Ke){const xt=x.evaluate(Ne,{},h).join(","),ft=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const st of Ke.sections)if(st.image)q[st.image.name]=!0;else{const Pt=Bd(Ke.toString()),ut=st.fontStack||xt,tt=Y[ut]=Y[ut]||{};this.calculateGlyphDependencies(st.text,tt,ft,this.allowVerticalPlacement,Pt)}}}v.get("symbol-placement")==="line"&&(this.features=function(fe){const ye={},Ce={},be=[];let Ie=0;function Ne(xt){be.push(fe[xt]),Ie++}function Ke(xt,ft,st){const Pt=Ce[xt];return delete Ce[xt],Ce[ft]=Pt,be[Pt].geometry[0].pop(),be[Pt].geometry[0]=be[Pt].geometry[0].concat(st[0]),Pt}function wt(xt,ft,st){const Pt=ye[ft];return delete ye[ft],ye[xt]=Pt,be[Pt].geometry[0].shift(),be[Pt].geometry[0]=st[0].concat(be[Pt].geometry[0]),Pt}function $t(xt,ft,st){const Pt=st?ft[0][ft[0].length-1]:ft[0][0];return`${xt}:${Pt.x}:${Pt.y}`}for(let xt=0;xt<fe.length;xt++){const ft=fe[xt],st=ft.geometry,Pt=ft.text?ft.text.toString():null;if(!Pt){Ne(xt);continue}const ut=$t(Pt,st),tt=$t(Pt,st,!0);if(ut in Ce&&tt in ye&&Ce[ut]!==ye[tt]){const Wt=wt(ut,tt,st),Nt=Ke(ut,tt,be[Wt].geometry);delete ye[ut],delete Ce[tt],Ce[$t(Pt,be[Nt].geometry,!0)]=Nt,be[Wt].geometry=null}else ut in Ce?Ke(ut,tt,st):tt in ye?wt(ut,tt,st):(Ne(xt),ye[ut]=Ie-1,Ce[tt]=Ie-1)}return be.filter(xt=>xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,ye)=>fe.sortKey-ye.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:f},S<s.length-1&&(f+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const I=x[S];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,f,v,x,S,I,A,L,N,q){const Y=n.indexArray,ee=n.layoutVertexArray,se=n.segments.prepareSegment(4*s.length,ee,Y,this.canOverlap?x.sortKey:void 0),fe=this.glyphOffsetArray.length,ye=se.vertexLength,Ce=this.allowVerticalPlacement&&S===c.ai.vertical?Math.PI/2:0,be=x.text&&x.text.sections;for(let Ie=0;Ie<s.length;Ie++){const{tl:Ne,tr:Ke,bl:wt,br:$t,tex:xt,pixelOffsetTL:ft,pixelOffsetBR:st,minFontScaleX:Pt,minFontScaleY:ut,glyphOffset:tt,isSDF:Wt,sectionIndex:Nt}=s[Ie],hr=se.vertexLength,Yr=tt[1];om(ee,I.x,I.y,Ne.x,Yr+Ne.y,xt.x,xt.y,h,Wt,ft.x,ft.y,Pt,ut),om(ee,I.x,I.y,Ke.x,Yr+Ke.y,xt.x+xt.w,xt.y,h,Wt,st.x,ft.y,Pt,ut),om(ee,I.x,I.y,wt.x,Yr+wt.y,xt.x,xt.y+xt.h,h,Wt,ft.x,st.y,Pt,ut),om(ee,I.x,I.y,$t.x,Yr+$t.y,xt.x+xt.w,xt.y+xt.h,h,Wt,st.x,st.y,Pt,ut),Jv(n.dynamicLayoutVertexArray,I,Ce),Y.emplaceBack(hr,hr+1,hr+2),Y.emplaceBack(hr+1,hr+2,hr+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tt[0]),Ie!==s.length-1&&Nt===s[Ie+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,x,x.index,{},q,be&&be[Nt])}n.placedSymbolArray.emplaceBack(I.x,I.y,fe,this.glyphOffsetArray.length-fe,ye,A,L,I.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],S,0,!1,0,N)}_addCollisionDebugVertex(n,s,h,f,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,f,v,x,S){const I=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),A=I.vertexLength,L=v.layoutVertexArray,N=v.collisionVertexArray,q=S.anchorX,Y=S.anchorY;this._addCollisionDebugVertex(L,N,x,q,Y,new P(n,s)),this._addCollisionDebugVertex(L,N,x,q,Y,new P(h,s)),this._addCollisionDebugVertex(L,N,x,q,Y,new P(h,f)),this._addCollisionDebugVertex(L,N,x,q,Y,new P(n,f)),I.vertexLength+=4;const ee=v.indexArray;ee.emplaceBack(A,A+1),ee.emplaceBack(A+1,A+2),ee.emplaceBack(A+2,A+3),ee.emplaceBack(A+3,A),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,f){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Qv(gn,tw.members,On),this.iconCollisionBox=new Qv(gn,tw.members,On);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,f,v,x,S,I,A){const L={};for(let N=s;N<h;N++){const q=n.get(N);L.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},L.textFeatureIndex=q.featureIndex;break}for(let N=f;N<v;N++){const q=n.get(N);L.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},L.verticalTextFeatureIndex=q.featureIndex;break}for(let N=x;N<S;N++){const q=n.get(N);L.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},L.iconFeatureIndex=q.featureIndex;break}for(let N=I;N<A;N++){const q=n.get(N);L.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},L.verticalIconFeatureIndex=q.featureIndex;break}return L}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),f=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),f=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const I=this.symbolInstances.get(S);f.push(0|Math.round(s*I.anchorX+h*I.anchorY)),v.push(I.featureIndex)}return x.sort((S,I)=>f[S]-f[I]||v[I]-v[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let vw,_w;It("SymbolBucket",nu,{omit:["layers","collisionBoxArray","features","compareText"]}),nu.MAX_GLYPHS=65535,nu.addDynamicAttributes=Jv;var e0={get paint(){return _w=_w||new wn({"icon-opacity":new Yt(Pe.paint_symbol["icon-opacity"]),"icon-color":new Yt(Pe.paint_symbol["icon-color"]),"icon-halo-color":new Yt(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yt(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yt(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Vt(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vt(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yt(Pe.paint_symbol["text-opacity"]),"text-color":new Yt(Pe.paint_symbol["text-color"],{runtimeType:ar,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Yt(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new Yt(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new Yt(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Vt(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Vt(Pe.paint_symbol["text-translate-anchor"])})},get layout(){return vw=vw||new wn({"symbol-placement":new Vt(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Vt(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vt(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yt(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vt(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vt(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Vt(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Vt(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vt(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vt(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yt(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Vt(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vt(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yt(Pe.layout_symbol["icon-image"]),"icon-rotate":new Yt(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Yt(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Vt(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new Yt(Pe.layout_symbol["icon-offset"]),"icon-anchor":new Yt(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vt(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vt(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vt(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new Yt(Pe.layout_symbol["text-field"]),"text-font":new Yt(Pe.layout_symbol["text-font"]),"text-size":new Yt(Pe.layout_symbol["text-size"]),"text-max-width":new Yt(Pe.layout_symbol["text-max-width"]),"text-line-height":new Vt(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new Yt(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new Yt(Pe.layout_symbol["text-justify"]),"text-radial-offset":new Yt(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vt(Pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Yt(Pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Yt(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Vt(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Vt(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new Yt(Pe.layout_symbol["text-rotate"]),"text-padding":new Vt(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Vt(Pe.layout_symbol["text-keep-upright"]),"text-transform":new Yt(Pe.layout_symbol["text-transform"]),"text-offset":new Yt(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Vt(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Vt(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Vt(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Vt(Pe.layout_symbol["text-optional"])})}};class xw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:xr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}It("FormatSectionOverride",xw,{omit:["defaultValue"]});class am extends ho{constructor(n){super(n,e0)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const v of h)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,f){const v=this.layout.get(n).evaluate(s,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Bc(x.value)||!v?v:function(S,I){return I.replace(/{([^{}]+)}/g,(A,L)=>S&&L in S?String(S[L]):"")}(s.properties,v)}createBucket(n){return new nu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of e0.paint.overridableProperties){if(!am.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new xw(s),f=new Ad(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Md("source",f):new Fc("composite",f,s.value.zoomStops),this.paint._values[n]=new gi(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&am.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),f=e0.paint.properties[s];let v=!1;const x=S=>{for(const I of S)if(f.overrides&&f.overrides.hasOverride(I))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ai)x(h.value.value.sections);else if(h.value.kind==="source"){const S=A=>{v||(A instanceof is&&nn(A.value)===ue?x(A.value.sections):A instanceof $c?x(A.sections):A.eachChild(S))},I=h.value;I._styleExpression&&S(I._styleExpression.expression)}return v}}let bw;var vM={get paint(){return bw=bw||new wn({"background-color":new Vt(Pe.paint_background["background-color"]),"background-pattern":new qd(Pe.paint_background["background-pattern"]),"background-opacity":new Vt(Pe.paint_background["background-opacity"])})}};class _M extends ho{constructor(n){super(n,vM)}}let ww;var xM={get paint(){return ww=ww||new wn({"raster-opacity":new Vt(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vt(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vt(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vt(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Vt(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Vt(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Vt(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Vt(Pe.paint_raster["raster-fade-duration"])})}};class bM extends ho{constructor(n){super(n,xM)}}class wM extends ho{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class SM{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const t0=63710088e-1;class Xs{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xs(Z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,f=n.lat*s,v=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return t0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Xs)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Xs(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Xs(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Sw=2*Math.PI*t0;function Cw(a){return Sw*Math.cos(a*Math.PI/180)}function kw(a){return(180+a)/360}function Tw(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Iw(a,n){return a/Cw(n)}function Pw(a){return 360*a-180}function r0(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class sm{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Xs.convert(n);return new sm(kw(h.lng),Tw(h.lat),Iw(s,h.lat))}toLngLat(){return new Xs(Pw(this.x),r0(this.y))}toAltitude(){return this.z*Cw(r0(this.y))}meterInMercatorCoordinateUnits(){return 1/Sw*(n=r0(this.y),1/Math.cos(n*Math.PI/180));var n}}function Ew(a,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class n0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=mh(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const f=(x=this.y,S=this.z,I=Ew(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),A=Ew(256*(v+1),256*(x+1),S),I[0]+","+I[1]+","+A[0]+","+A[1]);var v,x,S,I,A;const L=function(N,q,Y){let ee,se="";for(let fe=N;fe>0;fe--)ee=1<<fe-1,se+=(q&ee?1:0)+(Y&ee?2:0);return se}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new P((n.x*s-this.x)*An,(n.y*s-this.y)*An)}toString(){return`${this.z}/${this.x}/${this.y}`}}class zw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=mh(n,s.z,s.z,s.x,s.y)}}class ko{constructor(n,s,h,f,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new n0(h,+f,+v),this.key=mh(s,n,h,f,v)}clone(){return new ko(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new ko(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ko(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?mh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):mh(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new ko(s,this.wrap,s,h,f),new ko(s,this.wrap,s,h+1,f),new ko(s,this.wrap,s,h,f+1),new ko(s,this.wrap,s,h+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ko(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new zw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new sm(n.x-this.wrap,n.y))}}function mh(a,n,s,h,f){(a*=2)<0&&(a=-1*a-1);const v=1<<s;return(v*v*a+v*f+h).toString(36)+s.toString(36)+n.toString(36)}It("CanonicalTileID",n0),It("OverscaledTileID",ko,{omit:["posMatrix"]});class Aw{constructor(n,s,h,f=1,v=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void He(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<I;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(I,A)]=this.data[this._idx(I-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,I)]=this.data[this._idx(A,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<I;A++)for(let L=0;L<I;L++){const N=this.get(A,L);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(n,s){const h=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Co({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const I=-s*this.dim,A=-h*this.dim;for(let L=x;L<S;L++)for(let N=f;N<v;N++)this.data[this._idx(N,L)]=n.data[this._idx(N+I,L+A)]}}It("DEMData",Aw);class Mw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Dw{constructor(n,s,h,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Rw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Vs(An,16,0),this.grid3D=new Vs(An,16,0),this.featureIndexArray=new Xe,this.promoteId=s}insert(n,s,h,f,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,v);const I=x?this.grid3D:this.grid;for(let A=0;A<s.length;A++){const L=s[A],N=[1/0,1/0,-1/0,-1/0];for(let q=0;q<L.length;q++){const Y=L[q];N[0]=Math.min(N[0],Y.x),N[1]=Math.min(N[1],Y.y),N[2]=Math.max(N[2],Y.x),N[3]=Math.max(N[3],Y.y)}N[0]<An&&N[1]<An&&N[2]>=0&&N[3]>=0&&I.insert(S,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new qs.VectorTile(new Wv(this.rawTileData)).layers,this.sourceLayerCoder=new Mw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,f){this.loadVTLayers();const v=n.params||{},x=An/n.tileSize/n.scale,S=Rd(v.filter),I=n.queryGeometry,A=n.queryPadding*x,L=$w(I),N=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),q=$w(n.cameraQueryGeometry),Y=this.grid3D.query(q.minX-A,q.minY-A,q.maxX+A,q.maxY+A,(fe,ye,Ce,be)=>function(Ie,Ne,Ke,wt,$t){for(const ft of Ie)if(Ne<=ft.x&&Ke<=ft.y&&wt>=ft.x&&$t>=ft.y)return!0;const xt=[new P(Ne,Ke),new P(Ne,$t),new P(wt,$t),new P(wt,Ke)];if(Ie.length>2){for(const ft of xt)if(Xc(Ie,ft))return!0}for(let ft=0;ft<Ie.length-1;ft++)if(tA(Ie[ft],Ie[ft+1],xt))return!0;return!1}(n.cameraQueryGeometry,fe-A,ye-A,Ce+A,be+A));for(const fe of Y)N.push(fe);N.sort(CM);const ee={};let se;for(let fe=0;fe<N.length;fe++){const ye=N[fe];if(ye===se)continue;se=ye;const Ce=this.featureIndexArray.get(ye);let be=null;this.loadMatchingFeature(ee,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,S,v.layers,v.availableImages,s,h,f,(Ie,Ne,Ke)=>(be||(be=Hl(Ie)),Ne.queryIntersectsFeature(I,Ie,Ke,be,this.z,n.transform,x,n.pixelPosMatrix)))}return ee}loadMatchingFeature(n,s,h,f,v,x,S,I,A,L,N){const q=this.bucketLayerIDs[s];if(x&&!function(fe,ye){for(let Ce=0;Ce<fe.length;Ce++)if(ye.indexOf(fe[Ce])>=0)return!0;return!1}(x,q))return;const Y=this.sourceLayerCoder.decode(h),ee=this.vtLayers[Y].feature(f);if(v.needGeometry){const fe=Wl(ee,!0);if(!v.filter(new Xr(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!v.filter(new Xr(this.tileID.overscaledZ),ee))return;const se=this.getId(ee,Y);for(let fe=0;fe<q.length;fe++){const ye=q[fe];if(x&&x.indexOf(ye)<0)continue;const Ce=I[ye];if(!Ce)continue;let be={};se&&L&&(be=L.getState(Ce.sourceLayer||"_geojsonTileLayer",se));const Ie=de({},A[ye]);Ie.paint=Lw(Ie.paint,Ce.paint,ee,be,S),Ie.layout=Lw(Ie.layout,Ce.layout,ee,be,S);const Ne=!N||N(ee,Ce,be);if(!Ne)continue;const Ke=new Dw(ee,this.z,this.x,this.y,se);Ke.layer=Ie;let wt=n[ye];wt===void 0&&(wt=n[ye]=[]),wt.push({featureIndex:f,feature:Ke,intersectionZ:Ne})}}lookupSymbolFeatures(n,s,h,f,v,x,S,I){const A={};this.loadVTLayers();const L=Rd(v);for(const N of n)this.loadMatchingFeature(A,h,f,N,L,x,S,I,s);return A}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Lw(a,n,s,h,f){return ve(a,(v,x)=>{const S=n instanceof Zc?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,f):S})}function $w(a){let n=1/0,s=1/0,h=-1/0,f=-1/0;for(const v of a)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y);return{minX:n,minY:s,maxX:h,maxY:f}}function CM(a,n){return n-a}function Bw(a,n,s,h,f){const v=[];for(let x=0;x<a.length;x++){const S=a[x];let I;for(let A=0;A<S.length-1;A++){let L=S[A],N=S[A+1];L.x<n&&N.x<n||(L.x<n?L=new P(n,L.y+(n-L.x)/(N.x-L.x)*(N.y-L.y))._round():N.x<n&&(N=new P(n,L.y+(n-L.x)/(N.x-L.x)*(N.y-L.y))._round()),L.y<s&&N.y<s||(L.y<s?L=new P(L.x+(s-L.y)/(N.y-L.y)*(N.x-L.x),s)._round():N.y<s&&(N=new P(L.x+(s-L.y)/(N.y-L.y)*(N.x-L.x),s)._round()),L.x>=h&&N.x>=h||(L.x>=h?L=new P(h,L.y+(h-L.x)/(N.x-L.x)*(N.y-L.y))._round():N.x>=h&&(N=new P(h,L.y+(h-L.x)/(N.x-L.x)*(N.y-L.y))._round()),L.y>=f&&N.y>=f||(L.y>=f?L=new P(L.x+(f-L.y)/(N.y-L.y)*(N.x-L.x),f)._round():N.y>=f&&(N=new P(L.x+(f-L.y)/(N.y-L.y)*(N.x-L.x),f)._round()),I&&L.equals(I[I.length-1])||(I=[L],v.push(I)),I.push(N)))))}}return v}It("FeatureIndex",Rw,{omit:["rawTileData","sourceLayerCoder"]});class Js extends P{constructor(n,s,h,f){super(n,s),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new Js(this.x,this.y,this.angle,this.segment)}}function Ow(a,n,s,h,f){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=a[x].dist(v),v=a[x]}S+=a[x].dist(a[x+1]),x++;const I=[];let A=0;for(;S<s/2;){const L=a[x],N=a[x+1];if(!N)return!1;let q=a[x-1].angleTo(L)-L.angleTo(N);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:S,angleDelta:q}),A+=q;S-I[0].distance>h;)A-=I.shift().angleDelta;if(A>f)return!1;x++,S+=L.dist(N)}return!0}function Fw(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function Nw(a,n,s){return a?.6*n*s:0}function jw(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function kM(a,n,s,h,f,v){const x=Nw(s,f,v),S=jw(s,h)*v;let I=0;const A=Fw(a)/2;for(let L=0;L<a.length-1;L++){const N=a[L],q=a[L+1],Y=N.dist(q);if(I+Y>A){const ee=(A-I)/Y,se=Wi.number(N.x,q.x,ee),fe=Wi.number(N.y,q.y,ee),ye=new Js(se,fe,q.angleTo(N),L);return ye._round(),!x||Ow(a,ye,S,x,n)?ye:void 0}I+=Y}}function TM(a,n,s,h,f,v,x,S,I){const A=Nw(h,v,x),L=jw(h,f),N=L*x,q=a[0].x===0||a[0].x===I||a[0].y===0||a[0].y===I;return n-N<n/4&&(n=N+n/4),Vw(a,q?n/2*S%n:(L/2+2*v)*x*S%n,n,A,s,N,q,!1,I)}function Vw(a,n,s,h,f,v,x,S,I){const A=v/2,L=Fw(a);let N=0,q=n-s,Y=[];for(let ee=0;ee<a.length-1;ee++){const se=a[ee],fe=a[ee+1],ye=se.dist(fe),Ce=fe.angleTo(se);for(;q+s<N+ye;){q+=s;const be=(q-N)/ye,Ie=Wi.number(se.x,fe.x,be),Ne=Wi.number(se.y,fe.y,be);if(Ie>=0&&Ie<I&&Ne>=0&&Ne<I&&q-A>=0&&q+A<=L){const Ke=new Js(Ie,Ne,Ce,ee);Ke._round(),h&&!Ow(a,Ke,v,h,f)||Y.push(Ke)}}N+=ye}return S||Y.length||x||(Y=Vw(a,N/2,s,h,f,v,x,!0,I)),Y}It("Anchor",Js);const iu=Xi;function Uw(a,n,s,h){const f=[],v=a.image,x=v.pixelRatio,S=v.paddedRect.w-2*iu,I=v.paddedRect.h-2*iu,A=a.right-a.left,L=a.bottom-a.top,N=v.stretchX||[[0,S]],q=v.stretchY||[[0,I]],Y=(st,Pt)=>st+Pt[1]-Pt[0],ee=N.reduce(Y,0),se=q.reduce(Y,0),fe=S-ee,ye=I-se;let Ce=0,be=ee,Ie=0,Ne=se,Ke=0,wt=fe,$t=0,xt=ye;if(v.content&&h){const st=v.content;Ce=lm(N,0,st[0]),Ie=lm(q,0,st[1]),be=lm(N,st[0],st[2]),Ne=lm(q,st[1],st[3]),Ke=st[0]-Ce,$t=st[1]-Ie,wt=st[2]-st[0]-be,xt=st[3]-st[1]-Ne}const ft=(st,Pt,ut,tt)=>{const Wt=cm(st.stretch-Ce,be,A,a.left),Nt=um(st.fixed-Ke,wt,st.stretch,ee),hr=cm(Pt.stretch-Ie,Ne,L,a.top),Yr=um(Pt.fixed-$t,xt,Pt.stretch,se),rn=cm(ut.stretch-Ce,be,A,a.left),jn=um(ut.fixed-Ke,wt,ut.stretch,ee),fo=cm(tt.stretch-Ie,Ne,L,a.top),zi=um(tt.fixed-$t,xt,tt.stretch,se),Mn=new P(Wt,hr),ri=new P(rn,hr),ci=new P(rn,fo),Ai=new P(Wt,fo),Mi=new P(Nt/x,Yr/x),Vn=new P(jn/x,zi/x),Un=n*Math.PI/180;if(Un){const _i=Math.sin(Un),Ji=Math.cos(Un),Yi=[Ji,-_i,_i,Ji];Mn._matMult(Yi),ri._matMult(Yi),Ai._matMult(Yi),ci._matMult(Yi)}const vi=st.stretch+st.fixed,Di=Pt.stretch+Pt.fixed;return{tl:Mn,tr:ri,bl:Ai,br:ci,tex:{x:v.paddedRect.x+iu+vi,y:v.paddedRect.y+iu+Di,w:ut.stretch+ut.fixed-vi,h:tt.stretch+tt.fixed-Di},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mi,pixelOffsetBR:Vn,minFontScaleX:wt/x/A,minFontScaleY:xt/x/L,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const st=Hw(N,fe,ee),Pt=Hw(q,ye,se);for(let ut=0;ut<st.length-1;ut++){const tt=st[ut],Wt=st[ut+1];for(let Nt=0;Nt<Pt.length-1;Nt++)f.push(ft(tt,Pt[Nt],Wt,Pt[Nt+1]))}}else f.push(ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:I+1}));return f}function lm(a,n,s){let h=0;for(const f of a)h+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return h}function Hw(a,n,s){const h=[{fixed:-iu,stretch:0}];for(const[f,v]of a){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return h.push({fixed:n+iu,stretch:s}),h}function cm(a,n,s,h){return a/n*s+h}function um(a,n,s,h){return a-n*s/h}class dm{constructor(n,s,h,f,v,x,S,I,A,L){if(this.boxStartIndex=n.length,A){let N=x.top,q=x.bottom;const Y=x.collisionPadding;Y&&(N-=Y[1],q+=Y[3]);let ee=q-N;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let N=x.top*S-I[0],q=x.bottom*S+I[2],Y=x.left*S-I[3],ee=x.right*S+I[1];const se=x.collisionPadding;if(se&&(Y-=se[0]*S,N-=se[1]*S,ee+=se[2]*S,q+=se[3]*S),L){const fe=new P(Y,N),ye=new P(ee,N),Ce=new P(Y,q),be=new P(ee,q),Ie=L*Math.PI/180;fe._rotate(Ie),ye._rotate(Ie),Ce._rotate(Ie),be._rotate(Ie),Y=Math.min(fe.x,ye.x,Ce.x,be.x),ee=Math.max(fe.x,ye.x,Ce.x,be.x),N=Math.min(fe.y,ye.y,Ce.y,be.y),q=Math.max(fe.y,ye.y,Ce.y,be.y)}n.emplaceBack(s.x,s.y,Y,N,ee,q,h,f,v)}this.boxEndIndex=n.length}}class IM{constructor(n=[],s=PM){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,f=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(f,x)>=0)break;s[n]=x,n=v}s[n]=f}_down(n){const{data:s,compare:h}=this,f=this.length>>1,v=s[n];for(;n<f;){let x=1+(n<<1),S=s[x];const I=x+1;if(I<this.length&&h(s[I],S)<0&&(x=I,S=s[I]),h(S,v)>=0)break;s[n]=S,n=x}s[n]=v}}function PM(a,n){return a<n?-1:a>n?1:0}function EM(a,n=1,s=!1){let h=1/0,f=1/0,v=-1/0,x=-1/0;const S=a[0];for(let Y=0;Y<S.length;Y++){const ee=S[Y];(!Y||ee.x<h)&&(h=ee.x),(!Y||ee.y<f)&&(f=ee.y),(!Y||ee.x>v)&&(v=ee.x),(!Y||ee.y>x)&&(x=ee.y)}const I=Math.min(v-h,x-f);let A=I/2;const L=new IM([],zM);if(I===0)return new P(h,f);for(let Y=h;Y<v;Y+=I)for(let ee=f;ee<x;ee+=I)L.push(new ou(Y+A,ee+A,A,a));let N=function(Y){let ee=0,se=0,fe=0;const ye=Y[0];for(let Ce=0,be=ye.length,Ie=be-1;Ce<be;Ie=Ce++){const Ne=ye[Ce],Ke=ye[Ie],wt=Ne.x*Ke.y-Ke.x*Ne.y;se+=(Ne.x+Ke.x)*wt,fe+=(Ne.y+Ke.y)*wt,ee+=3*wt}return new ou(se/ee,fe/ee,0,Y)}(a),q=L.length;for(;L.length;){const Y=L.pop();(Y.d>N.d||!N.d)&&(N=Y,s&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,q)),Y.max-N.d<=n||(A=Y.h/2,L.push(new ou(Y.p.x-A,Y.p.y-A,A,a)),L.push(new ou(Y.p.x+A,Y.p.y-A,A,a)),L.push(new ou(Y.p.x-A,Y.p.y+A,A,a)),L.push(new ou(Y.p.x+A,Y.p.y+A,A,a)),q+=4)}return s&&(console.log(`num probes: ${q}`),console.log(`best distance: ${N.d}`)),N.p}function zM(a,n){return n.max-a.max}function ou(a,n,s,h){this.p=new P(a,n),this.h=s,this.d=function(f,v){let x=!1,S=1/0;for(let I=0;I<v.length;I++){const A=v[I];for(let L=0,N=A.length,q=N-1;L<N;q=L++){const Y=A[L],ee=A[q];Y.y>f.y!=ee.y>f.y&&f.x<(ee.x-Y.x)*(f.y-Y.y)/(ee.y-Y.y)+Y.x&&(x=!x),S=Math.min(S,Tb(f,Y,ee))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var li;c.aq=void 0,(li=c.aq||(c.aq={}))[li.center=1]="center",li[li.left=2]="left",li[li.right=3]="right",li[li.top=4]="top",li[li.bottom=5]="bottom",li[li["top-left"]=6]="top-left",li[li["top-right"]=7]="top-right",li[li["bottom-left"]=8]="bottom-left",li[li["bottom-right"]=9]="bottom-right";const Ys=7,i0=Number.POSITIVE_INFINITY;function Ww(a,n){return n[1]!==i0?function(s,h,f){let v=0,x=0;switch(h=Math.abs(h),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Ys;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Ys}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(a,n[0],n[1]):function(s,h){let f=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ys;break;case"bottom-right":case"bottom-left":v=-x+Ys;break;case"bottom":v=-h+Ys;break;case"top":v=h-Ys}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=h;break;case"right":f=-h}return[f,v]}(a,n[0])}function Gw(a,n,s){var h;const f=a.layout,v=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const S=v.values,I=[];for(let A=0;A<S.length;A+=2){const L=I[A]=S[A],N=S[A+1].map(q=>q*Nn);L.startsWith("top")?N[1]-=Ys:L.startsWith("bottom")&&(N[1]+=Ys),I[A+1]=N}return new so(I)}const x=f.get("text-variable-anchor");if(x){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*Nn,i0]:f.get("text-offset").evaluate(n,{},s).map(A=>A*Nn);const I=[];for(const A of x)I.push(A,Ww(A,S));return new so(I)}return null}function o0(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function AM(a,n,s,h,f,v,x,S,I,A,L){let N=v.textMaxSize.evaluate(n,{});N===void 0&&(N=x);const q=a.layers[0].layout,Y=q.get("icon-offset").evaluate(n,{},L),ee=Zw(s.horizontal),se=x/24,fe=a.tilePixelRatio*se,ye=a.tilePixelRatio*N/24,Ce=a.tilePixelRatio*S,be=a.tilePixelRatio*q.get("symbol-spacing"),Ie=q.get("text-padding")*a.tilePixelRatio,Ne=function(tt,Wt,Nt,hr=1){const Yr=tt.get("icon-padding").evaluate(Wt,{},Nt),rn=Yr&&Yr.values;return[rn[0]*hr,rn[1]*hr,rn[2]*hr,rn[3]*hr]}(q,n,L,a.tilePixelRatio),Ke=q.get("text-max-angle")/180*Math.PI,wt=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",$t=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",xt=q.get("symbol-placement"),ft=be/2,st=q.get("icon-text-fit");let Pt;h&&st!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(Pt=gw(h,s.vertical,st,q.get("icon-text-fit-padding"),Y,se)),ee&&(h=gw(h,ee,st,q.get("icon-text-fit-padding"),Y,se)));const ut=(tt,Wt)=>{Wt.x<0||Wt.x>=An||Wt.y<0||Wt.y>=An||function(Nt,hr,Yr,rn,jn,fo,zi,Mn,ri,ci,Ai,Mi,Vn,Un,vi,Di,_i,Ji,Yi,Hn,vr,xi,ui,Wn,Zo){const ba=Nt.addToLineVertexArray(hr,Yr);let wa,ys,Ko,To,Qi=0,vs=0,vh=0,Yw=0,p0=-1,f0=-1;const _s={};let Qw=ps("");if(Nt.allowVerticalPlacement&&rn.vertical){const bi=Mn.layout.get("text-rotate").evaluate(vr,{},Wn)+90;Ko=new dm(ri,hr,ci,Ai,Mi,rn.vertical,Vn,Un,vi,bi),zi&&(To=new dm(ri,hr,ci,Ai,Mi,zi,_i,Ji,vi,bi))}if(jn){const bi=Mn.layout.get("icon-rotate").evaluate(vr,{}),Io=Mn.layout.get("icon-text-fit")!=="none",ql=Uw(jn,bi,ui,Io),Ca=zi?Uw(zi,bi,ui,Io):void 0;ys=new dm(ri,hr,ci,Ai,Mi,jn,_i,Ji,!1,bi),Qi=4*ql.length;const Zl=Nt.iconSizeData;let Wa=null;Zl.kind==="source"?(Wa=[Ha*Mn.layout.get("icon-size").evaluate(vr,{})],Wa[0]>Ks&&He(`${Nt.layerIds[0]}: Value for "icon-size" is >= ${fh}. Reduce your "icon-size".`)):Zl.kind==="composite"&&(Wa=[Ha*xi.compositeIconSizes[0].evaluate(vr,{},Wn),Ha*xi.compositeIconSizes[1].evaluate(vr,{},Wn)],(Wa[0]>Ks||Wa[1]>Ks)&&He(`${Nt.layerIds[0]}: Value for "icon-size" is >= ${fh}. Reduce your "icon-size".`)),Nt.addSymbols(Nt.icon,ql,Wa,Hn,Yi,vr,c.ai.none,hr,ba.lineStartIndex,ba.lineLength,-1,Wn),p0=Nt.icon.placedSymbolArray.length-1,Ca&&(vs=4*Ca.length,Nt.addSymbols(Nt.icon,Ca,Wa,Hn,Yi,vr,c.ai.vertical,hr,ba.lineStartIndex,ba.lineLength,-1,Wn),f0=Nt.icon.placedSymbolArray.length-1)}const eS=Object.keys(rn.horizontal);for(const bi of eS){const Io=rn.horizontal[bi];if(!wa){Qw=ps(Io.text);const Ca=Mn.layout.get("text-rotate").evaluate(vr,{},Wn);wa=new dm(ri,hr,ci,Ai,Mi,Io,Vn,Un,vi,Ca)}const ql=Io.positionedLines.length===1;if(vh+=qw(Nt,hr,Io,fo,Mn,vi,vr,Di,ba,rn.vertical?c.ai.horizontal:c.ai.horizontalOnly,ql?eS:[bi],_s,p0,xi,Wn),ql)break}rn.vertical&&(Yw+=qw(Nt,hr,rn.vertical,fo,Mn,vi,vr,Di,ba,c.ai.vertical,["vertical"],_s,f0,xi,Wn));const RM=wa?wa.boxStartIndex:Nt.collisionBoxArray.length,LM=wa?wa.boxEndIndex:Nt.collisionBoxArray.length,$M=Ko?Ko.boxStartIndex:Nt.collisionBoxArray.length,BM=Ko?Ko.boxEndIndex:Nt.collisionBoxArray.length,OM=ys?ys.boxStartIndex:Nt.collisionBoxArray.length,FM=ys?ys.boxEndIndex:Nt.collisionBoxArray.length,NM=To?To.boxStartIndex:Nt.collisionBoxArray.length,jM=To?To.boxEndIndex:Nt.collisionBoxArray.length;let Sa=-1;const pm=(bi,Io)=>bi&&bi.circleDiameter?Math.max(bi.circleDiameter,Io):Io;Sa=pm(wa,Sa),Sa=pm(Ko,Sa),Sa=pm(ys,Sa),Sa=pm(To,Sa);const tS=Sa>-1?1:0;tS&&(Sa*=Zo/Nn),Nt.glyphOffsetArray.length>=nu.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vr.sortKey!==void 0&&Nt.addToSortKeyRanges(Nt.symbolInstances.length,vr.sortKey);const VM=Gw(Mn,vr,Wn),[UM,HM]=function(bi,Io){const ql=bi.length,Ca=Io==null?void 0:Io.values;if((Ca==null?void 0:Ca.length)>0)for(let Zl=0;Zl<Ca.length;Zl+=2){const Wa=Ca[Zl+1];bi.emplaceBack(c.aq[Ca[Zl]],Wa[0],Wa[1])}return[ql,bi.length]}(Nt.textAnchorOffsets,VM);Nt.symbolInstances.emplaceBack(hr.x,hr.y,_s.right>=0?_s.right:-1,_s.center>=0?_s.center:-1,_s.left>=0?_s.left:-1,_s.vertical||-1,p0,f0,Qw,RM,LM,$M,BM,OM,FM,NM,jM,ci,vh,Yw,Qi,vs,tS,0,Vn,Sa,UM,HM)}(a,Wt,tt,s,h,f,Pt,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,fe,[Ie,Ie,Ie,Ie],wt,I,Ce,Ne,$t,Y,n,v,A,L,x)};if(xt==="line")for(const tt of Bw(n.geometry,0,0,An,An)){const Wt=TM(tt,be,Ke,s.vertical||ee,h,24,ye,a.overscaling,An);for(const Nt of Wt)ee&&MM(a,ee.text,ft,Nt)||ut(tt,Nt)}else if(xt==="line-center"){for(const tt of n.geometry)if(tt.length>1){const Wt=kM(tt,Ke,s.vertical||ee,h,24,ye);Wt&&ut(tt,Wt)}}else if(n.type==="Polygon")for(const tt of Bv(n.geometry,0)){const Wt=EM(tt,16);ut(tt[0],new Js(Wt.x,Wt.y,0))}else if(n.type==="LineString")for(const tt of n.geometry)ut(tt,new Js(tt[0].x,tt[0].y,0));else if(n.type==="Point")for(const tt of n.geometry)for(const Wt of tt)ut([Wt],new Js(Wt.x,Wt.y,0))}function qw(a,n,s,h,f,v,x,S,I,A,L,N,q,Y,ee){const se=function(Ce,be,Ie,Ne,Ke,wt,$t,xt){const ft=Ne.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,st=[];for(const Pt of be.positionedLines)for(const ut of Pt.positionedGlyphs){if(!ut.rect)continue;const tt=ut.rect||{};let Wt=cw+1,Nt=!0,hr=1,Yr=0;const rn=(Ke||xt)&&ut.vertical,jn=ut.metrics.advance*ut.scale/2;if(xt&&be.verticalizable&&(Yr=Pt.lineOffset/2-(ut.imageName?-(Nn-ut.metrics.width*ut.scale)/2:(ut.scale-1)*Nn)),ut.imageName){const Hn=$t[ut.imageName];Nt=Hn.sdf,hr=Hn.pixelRatio,Wt=Xi/hr}const fo=Ke?[ut.x+jn,ut.y]:[0,0];let zi=Ke?[0,0]:[ut.x+jn+Ie[0],ut.y+Ie[1]-Yr],Mn=[0,0];rn&&(Mn=zi,zi=[0,0]);const ri=ut.metrics.isDoubleResolution?2:1,ci=(ut.metrics.left-Wt)*ut.scale-jn+zi[0],Ai=(-ut.metrics.top-Wt)*ut.scale+zi[1],Mi=ci+tt.w/ri*ut.scale/hr,Vn=Ai+tt.h/ri*ut.scale/hr,Un=new P(ci,Ai),vi=new P(Mi,Ai),Di=new P(ci,Vn),_i=new P(Mi,Vn);if(rn){const Hn=new P(-jn,jn-hh),vr=-Math.PI/2,xi=Nn/2-jn,ui=new P(5-hh-xi,-(ut.imageName?xi:0)),Wn=new P(...Mn);Un._rotateAround(vr,Hn)._add(ui)._add(Wn),vi._rotateAround(vr,Hn)._add(ui)._add(Wn),Di._rotateAround(vr,Hn)._add(ui)._add(Wn),_i._rotateAround(vr,Hn)._add(ui)._add(Wn)}if(ft){const Hn=Math.sin(ft),vr=Math.cos(ft),xi=[vr,-Hn,Hn,vr];Un._matMult(xi),vi._matMult(xi),Di._matMult(xi),_i._matMult(xi)}const Ji=new P(0,0),Yi=new P(0,0);st.push({tl:Un,tr:vi,bl:Di,br:_i,tex:tt,writingMode:be.writingMode,glyphOffset:fo,sectionIndex:ut.sectionIndex,isSDF:Nt,pixelOffsetTL:Ji,pixelOffsetBR:Yi,minFontScaleX:0,minFontScaleY:0})}return st}(0,s,S,f,v,x,h,a.allowVerticalPlacement),fe=a.textSizeData;let ye=null;fe.kind==="source"?(ye=[Ha*f.layout.get("text-size").evaluate(x,{})],ye[0]>Ks&&He(`${a.layerIds[0]}: Value for "text-size" is >= ${fh}. Reduce your "text-size".`)):fe.kind==="composite"&&(ye=[Ha*Y.compositeTextSizes[0].evaluate(x,{},ee),Ha*Y.compositeTextSizes[1].evaluate(x,{},ee)],(ye[0]>Ks||ye[1]>Ks)&&He(`${a.layerIds[0]}: Value for "text-size" is >= ${fh}. Reduce your "text-size".`)),a.addSymbols(a.text,se,ye,S,v,x,A,n,I.lineStartIndex,I.lineLength,q,ee);for(const Ce of L)N[Ce]=a.text.placedSymbolArray.length-1;return 4*se.length}function Zw(a){for(const n in a)return a[n];return null}function MM(a,n,s,h){const f=a.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else f[n]=[];return f[n].push(h),!1}const Kw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class a0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=Kw[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new a0(S,x,v,n)}constructor(n,s=64,h=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Kw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return s0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,I=[0,v.length-1,0],A=[];for(;I.length;){const L=I.pop()||0,N=I.pop()||0,q=I.pop()||0;if(N-q<=S){for(let fe=q;fe<=N;fe++){const ye=x[2*fe],Ce=x[2*fe+1];ye>=n&&ye<=h&&Ce>=s&&Ce<=f&&A.push(v[fe])}continue}const Y=q+N>>1,ee=x[2*Y],se=x[2*Y+1];ee>=n&&ee<=h&&se>=s&&se<=f&&A.push(v[Y]),(L===0?n<=ee:s<=se)&&(I.push(q),I.push(Y-1),I.push(1-L)),(L===0?h>=ee:f>=se)&&(I.push(Y+1),I.push(N),I.push(1-L))}return A}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,S=[0,f.length-1,0],I=[],A=h*h;for(;S.length;){const L=S.pop()||0,N=S.pop()||0,q=S.pop()||0;if(N-q<=x){for(let fe=q;fe<=N;fe++)Jw(v[2*fe],v[2*fe+1],n,s)<=A&&I.push(f[fe]);continue}const Y=q+N>>1,ee=v[2*Y],se=v[2*Y+1];Jw(ee,se,n,s)<=A&&I.push(f[Y]),(L===0?n-h<=ee:s-h<=se)&&(S.push(q),S.push(Y-1),S.push(1-L)),(L===0?n+h>=ee:s+h>=se)&&(S.push(Y+1),S.push(N),S.push(1-L))}return I}}function s0(a,n,s,h,f,v){if(f-h<=s)return;const x=h+f>>1;Xw(a,n,x,h,f,v),s0(a,n,s,h,x-1,1-v),s0(a,n,s,x+1,f,1-v)}function Xw(a,n,s,h,f,v){for(;f>h;){if(f-h>600){const A=f-h+1,L=s-h+1,N=Math.log(A),q=.5*Math.exp(2*N/3),Y=.5*Math.sqrt(N*q*(A-q)/A)*(L-A/2<0?-1:1);Xw(a,n,s,Math.max(h,Math.floor(s-L*q/A+Y)),Math.min(f,Math.floor(s+(A-L)*q/A+Y)),v)}const x=n[2*s+v];let S=h,I=f;for(gh(a,n,h,s),n[2*f+v]>x&&gh(a,n,h,f);S<I;){for(gh(a,n,S,I),S++,I--;n[2*S+v]<x;)S++;for(;n[2*I+v]>x;)I--}n[2*h+v]===x?gh(a,n,h,I):(I++,gh(a,n,I,f)),I<=s&&(h=I+1),s<=I&&(f=I-1)}}function gh(a,n,s,h){l0(a,s,h),l0(n,2*s,2*h),l0(n,2*s+1,2*h+1)}function l0(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}function Jw(a,n,s,h){const f=a-s,v=n-h;return f*f+v*v}var c0;c.bh=void 0,(c0=c.bh||(c.bh={})).create="create",c0.load="load",c0.fullLoad="fullLoad";let hm=null,yh=[];const u0=1e3/60,d0="loadTime",h0="fullLoadTime",DM={mark(a){performance.mark(a)},frame(a){const n=a;hm!=null&&yh.push(n-hm),hm=n},clearMetrics(){hm=null,yh=[],performance.clearMeasures(d0),performance.clearMeasures(h0);for(const a in c.bh)performance.clearMarks(c.bh[a])},getPerformanceMetrics(){performance.measure(d0,c.bh.create,c.bh.load),performance.measure(h0,c.bh.create,c.bh.fullLoad);const a=performance.getEntriesByName(d0)[0].duration,n=performance.getEntriesByName(h0)[0].duration,s=yh.length,h=1/(yh.reduce((v,x)=>v+x,0)/s/1e3),f=yh.filter(v=>v>u0).reduce((v,x)=>v+(x-u0)/u0,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};c.$=function(a,n,s){var h,f,v,x,S,I,A,L,N,q,Y,ee,se=s[0],fe=s[1],ye=s[2];return n===a?(a[12]=n[0]*se+n[4]*fe+n[8]*ye+n[12],a[13]=n[1]*se+n[5]*fe+n[9]*ye+n[13],a[14]=n[2]*se+n[6]*fe+n[10]*ye+n[14],a[15]=n[3]*se+n[7]*fe+n[11]*ye+n[15]):(f=n[1],v=n[2],x=n[3],S=n[4],I=n[5],A=n[6],L=n[7],N=n[8],q=n[9],Y=n[10],ee=n[11],a[0]=h=n[0],a[1]=f,a[2]=v,a[3]=x,a[4]=S,a[5]=I,a[6]=A,a[7]=L,a[8]=N,a[9]=q,a[10]=Y,a[11]=ee,a[12]=h*se+S*fe+N*ye+n[12],a[13]=f*se+I*fe+q*ye+n[13],a[14]=v*se+A*fe+Y*ye+n[14],a[15]=x*se+L*fe+ee*ye+n[15]),a},c.A=Jc,c.B=Wi,c.C=class{constructor(a,n,s){this.receive=h=>{const f=h.data,v=f.id;if(v&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Ge()||f.mustQueue?(this.tasks[v]=f,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,f)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),f=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(h,f)},this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new SM(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ge()?a:window}send(a,n,s,h,f=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],S={id:v,type:a,hasCallback:!!s,targetMapId:h,mustQueue:f,sourceMapId:this.mapId,data:ja(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(Us(n.error)):s(null,Us(n.data)))}else{let s=!1;const h=[],f=n.hasCallback?(S,I)=>{s=!0,delete this.cancelCallbacks[a];const A={id:a,type:"<response>",sourceMapId:this.mapId,error:S?ja(S):null,data:ja(I,h)};this.target.postMessage(A,{transfer:h})}:S=>{s=!0};let v=null;const x=Us(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,f);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,f)}else f(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=Vt,c.E=Lr,c.F=function(a,n){const s={};for(let h=0;h<n.length;h++){const f=n[h];f in a&&(s[f]=a[f])}return s},c.G=kw,c.H=Tw,c.I=qv,c.J=$,c.K=G,c.L=Xs,c.M=dt,c.N=An,c.O=ko,c.P=P,c.Q=sn,c.R=Co,c.S=Jr,c.T=jf,c.U=sm,c.V=class extends ds{},c.W=n0,c.X=function(a,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<a.length;h++){const f=window.document.createElement("source");Cr(a[h])||(s.crossOrigin="Anonymous"),f.src=a[h],s.appendChild(f)}return{cancel:()=>{}}},c.Y=Le,c.Z=function(){var a=new Jc(16);return Jc!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},c._=b,c.a=Ze,c.a$=class extends X{},c.a0=function(a,n,s){var h=s[0],f=s[1],v=s[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*f,a[5]=n[5]*f,a[6]=n[6]*f,a[7]=n[7]*f,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.a1=zb,c.a2=function(){return Te++},c.a3=he,c.a4=nu,c.a5=function(){Zi.isLoading()||Zi.isLoaded()||Wd()!=="deferred"||Nf()},c.a6=Rd,c.a7=Wl,c.a8=Xr,c.a9=Dw,c.aA=Fl,c.aB=function(a){a=a.slice();const n=Object.create(null);for(let s=0;s<a.length;s++)n[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=ir(a[s],n[a[s].ref]));return a},c.aC=function(a){if(a.type==="custom")return new wM(a);switch(a.type){case"background":return new _M(a);case"circle":return new iA(a);case"fill":return new CA(a);case"fill-extrusion":return new FA(a);case"heatmap":return new aA(a);case"hillshade":return new lA(a);case"line":return new qA(a);case"raster":return new bM(a);case"symbol":return new am(a)}},c.aD=ke,c.aE=function(a,n){if(!a)return[{command:Gt.setStyle,args:[n]}];let s=[];try{if(!Bt(a.version,n.version))return[{command:Gt.setStyle,args:[n]}];Bt(a.center,n.center)||s.push({command:Gt.setCenter,args:[n.center]}),Bt(a.zoom,n.zoom)||s.push({command:Gt.setZoom,args:[n.zoom]}),Bt(a.bearing,n.bearing)||s.push({command:Gt.setBearing,args:[n.bearing]}),Bt(a.pitch,n.pitch)||s.push({command:Gt.setPitch,args:[n.pitch]}),Bt(a.sprite,n.sprite)||s.push({command:Gt.setSprite,args:[n.sprite]}),Bt(a.glyphs,n.glyphs)||s.push({command:Gt.setGlyphs,args:[n.glyphs]}),Bt(a.transition,n.transition)||s.push({command:Gt.setTransition,args:[n.transition]}),Bt(a.light,n.light)||s.push({command:Gt.setLight,args:[n.light]});const h={},f=[];(function(x,S,I,A){let L;for(L in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(S,L)||Pr(L,I,A));for(L in S)Object.prototype.hasOwnProperty.call(S,L)&&(Object.prototype.hasOwnProperty.call(x,L)?Bt(x[L],S[L])||(x[L].type==="geojson"&&S[L].type==="geojson"&&nr(x,S,L)?I.push({command:Gt.setGeoJSONSourceData,args:[L,S[L].data]}):sr(L,S,I,A)):kr(L,S,I))})(a.sources,n.sources,f,h);const v=[];a.layers&&a.layers.forEach(x=>{h[x.source]?s.push({command:Gt.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,S,I){S=S||[];const A=(x=x||[]).map(Dr),L=S.map(Dr),N=x.reduce(it,{}),q=S.reduce(it,{}),Y=A.slice(),ee=Object.create(null);let se,fe,ye,Ce,be,Ie,Ne;for(se=0,fe=0;se<A.length;se++)ye=A[se],Object.prototype.hasOwnProperty.call(q,ye)?fe++:(I.push({command:Gt.removeLayer,args:[ye]}),Y.splice(Y.indexOf(ye,fe),1));for(se=0,fe=0;se<L.length;se++)ye=L[L.length-1-se],Y[Y.length-1-se]!==ye&&(Object.prototype.hasOwnProperty.call(N,ye)?(I.push({command:Gt.removeLayer,args:[ye]}),Y.splice(Y.lastIndexOf(ye,Y.length-fe),1)):fe++,Ie=Y[Y.length-se],I.push({command:Gt.addLayer,args:[q[ye],Ie]}),Y.splice(Y.length-se,0,ye),ee[ye]=!0);for(se=0;se<L.length;se++)if(ye=L[se],Ce=N[ye],be=q[ye],!ee[ye]&&!Bt(Ce,be))if(Bt(Ce.source,be.source)&&Bt(Ce["source-layer"],be["source-layer"])&&Bt(Ce.type,be.type)){for(Ne in rr(Ce.layout,be.layout,I,ye,null,Gt.setLayoutProperty),rr(Ce.paint,be.paint,I,ye,null,Gt.setPaintProperty),Bt(Ce.filter,be.filter)||I.push({command:Gt.setFilter,args:[ye,be.filter]}),Bt(Ce.minzoom,be.minzoom)&&Bt(Ce.maxzoom,be.maxzoom)||I.push({command:Gt.setLayerZoomRange,args:[ye,be.minzoom,be.maxzoom]}),Ce)Object.prototype.hasOwnProperty.call(Ce,Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?rr(Ce[Ne],be[Ne],I,ye,Ne.slice(6),Gt.setPaintProperty):Bt(Ce[Ne],be[Ne])||I.push({command:Gt.setLayerProperty,args:[ye,Ne,be[Ne]]}));for(Ne in be)Object.prototype.hasOwnProperty.call(be,Ne)&&!Object.prototype.hasOwnProperty.call(Ce,Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?rr(Ce[Ne],be[Ne],I,ye,Ne.slice(6),Gt.setPaintProperty):Bt(Ce[Ne],be[Ne])||I.push({command:Gt.setLayerProperty,args:[ye,Ne,be[Ne]]}))}else I.push({command:Gt.removeLayer,args:[ye]}),Ie=Y[Y.lastIndexOf(ye)+1],I.push({command:Gt.addLayer,args:[be,Ie]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Gt.setStyle,args:[n]}]}return s},c.aF=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},c.aG=function a(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!a(n[h],s[h]))return!1;return!0}return n===s},c.aH=ve,c.aI=De,c.aJ=Nl,c.aK=function(a){return a({pluginStatus:Ii,pluginURL:Va}),Nl.on("pluginStateChange",a),a},c.aL=class extends fs{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},c.aM=Kc,c.aN=class extends fs{constructor(a,n){super(a,n),this.current=kv}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},c.aO=Wf,c.aP=class extends fs{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},c.aQ=class extends fs{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},c.aR=Gf,c.aS=function(a,n,s,h,f,v,x){var S=1/(n-s),I=1/(h-f),A=1/(v-x);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*I,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*A,a[11]=0,a[12]=(n+s)*S,a[13]=(f+h)*I,a[14]=(x+v)*A,a[15]=1,a},c.aT=Tr,c.aU=nA,c.aV=class extends p{},c.aW=JA,c.aX=class extends _{},c.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},c.aZ=Lb,c.a_=ot,c.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,f,v)=>{const x=f||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},c.ab=function(a,n){const s=[];for(const h in a)h in n||s.push(h);return s},c.ac=function(a){if(Re==null){const n=a.navigator?a.navigator.userAgent:null;Re=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Re},c.ad=me,c.ae=function(a,n,s){var h=Math.sin(s),f=Math.cos(s),v=n[0],x=n[1],S=n[2],I=n[3],A=n[4],L=n[5],N=n[6],q=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*f+A*h,a[1]=x*f+L*h,a[2]=S*f+N*h,a[3]=I*f+q*h,a[4]=A*f-v*h,a[5]=L*f-x*h,a[6]=N*f-S*h,a[7]=q*f-I*h,a},c.af=function(a){var n=new Jc(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},c.ag=Xf,c.ah=function(a,n){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=a,S=f?me(Gi.interpolationFactor(f,n,v,x),0,1):0;a.kind==="camera"?h=Wi.number(a.minSize,a.maxSize,S):s=S}return{uSizeT:s,uSize:h}},c.aj=function(a,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:f}){return a.kind==="source"?h/Ha:a.kind==="composite"?Wi.number(h/Ha,f/Ha,s):n},c.ak=Jv,c.al=function(a,n,s,h){const f=n.y-a.y,v=n.x-a.x,x=h.y-s.y,S=h.x-s.x,I=x*v-S*f;if(I===0)return null;const A=(S*(a.y-s.y)-x*(a.x-s.x))/I;return new P(a.x+A*v,a.y+A*f)},c.am=Bw,c.an=Cb,c.ao=zv,c.ap=Nn,c.ar=Xv,c.as=function(a,n){var s=n[0],h=n[1],f=n[2],v=n[3],x=n[4],S=n[5],I=n[6],A=n[7],L=n[8],N=n[9],q=n[10],Y=n[11],ee=n[12],se=n[13],fe=n[14],ye=n[15],Ce=s*S-h*x,be=s*I-f*x,Ie=s*A-v*x,Ne=h*I-f*S,Ke=h*A-v*S,wt=f*A-v*I,$t=L*se-N*ee,xt=L*fe-q*ee,ft=L*ye-Y*ee,st=N*fe-q*se,Pt=N*ye-Y*se,ut=q*ye-Y*fe,tt=Ce*ut-be*Pt+Ie*st+Ne*ft-Ke*xt+wt*$t;return tt?(a[0]=(S*ut-I*Pt+A*st)*(tt=1/tt),a[1]=(f*Pt-h*ut-v*st)*tt,a[2]=(se*wt-fe*Ke+ye*Ne)*tt,a[3]=(q*Ke-N*wt-Y*Ne)*tt,a[4]=(I*ft-x*ut-A*xt)*tt,a[5]=(s*ut-f*ft+v*xt)*tt,a[6]=(fe*Ie-ee*wt-ye*be)*tt,a[7]=(L*wt-q*Ie+Y*be)*tt,a[8]=(x*Pt-S*ft+A*$t)*tt,a[9]=(h*ft-s*Pt-v*$t)*tt,a[10]=(ee*Ke-se*Ie+ye*Ce)*tt,a[11]=(N*Ie-L*Ke-Y*Ce)*tt,a[12]=(S*xt-x*st-I*$t)*tt,a[13]=(s*st-h*xt+f*$t)*tt,a[14]=(se*be-ee*Ne-fe*Ce)*tt,a[15]=(L*Ne-N*be+q*Ce)*tt,a):null},c.at=o0,c.au=Kv,c.av=a0,c.aw=function(){const a={},n=Pe.$version;for(const s in Pe.$root){const h=Pe.$root[s];if(h.required){let f=null;f=s==="version"?n:h.type==="array"?[]:{},f!=null&&(a[s]=f)}}return a},c.ax=Gt,c.ay=$f,c.az=rt,c.b=function(a,n){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=ei,c.b1=function(a,n){var s=a[0],h=a[1],f=a[2],v=a[3],x=a[4],S=a[5],I=a[6],A=a[7],L=a[8],N=a[9],q=a[10],Y=a[11],ee=a[12],se=a[13],fe=a[14],ye=a[15],Ce=n[0],be=n[1],Ie=n[2],Ne=n[3],Ke=n[4],wt=n[5],$t=n[6],xt=n[7],ft=n[8],st=n[9],Pt=n[10],ut=n[11],tt=n[12],Wt=n[13],Nt=n[14],hr=n[15];return Math.abs(s-Ce)<=Ei*Math.max(1,Math.abs(s),Math.abs(Ce))&&Math.abs(h-be)<=Ei*Math.max(1,Math.abs(h),Math.abs(be))&&Math.abs(f-Ie)<=Ei*Math.max(1,Math.abs(f),Math.abs(Ie))&&Math.abs(v-Ne)<=Ei*Math.max(1,Math.abs(v),Math.abs(Ne))&&Math.abs(x-Ke)<=Ei*Math.max(1,Math.abs(x),Math.abs(Ke))&&Math.abs(S-wt)<=Ei*Math.max(1,Math.abs(S),Math.abs(wt))&&Math.abs(I-$t)<=Ei*Math.max(1,Math.abs(I),Math.abs($t))&&Math.abs(A-xt)<=Ei*Math.max(1,Math.abs(A),Math.abs(xt))&&Math.abs(L-ft)<=Ei*Math.max(1,Math.abs(L),Math.abs(ft))&&Math.abs(N-st)<=Ei*Math.max(1,Math.abs(N),Math.abs(st))&&Math.abs(q-Pt)<=Ei*Math.max(1,Math.abs(q),Math.abs(Pt))&&Math.abs(Y-ut)<=Ei*Math.max(1,Math.abs(Y),Math.abs(ut))&&Math.abs(ee-tt)<=Ei*Math.max(1,Math.abs(ee),Math.abs(tt))&&Math.abs(se-Wt)<=Ei*Math.max(1,Math.abs(se),Math.abs(Wt))&&Math.abs(fe-Nt)<=Ei*Math.max(1,Math.abs(fe),Math.abs(Nt))&&Math.abs(ye-hr)<=Ei*Math.max(1,Math.abs(ye),Math.abs(hr))},c.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.b3=function(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a[3]=n[3]*s[3],a},c.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},c.b5=Z,c.b6=zw,c.b7=Iw,c.b8=function(a,n,s,h,f){var v,x=1/Math.tan(n/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,f!=null&&f!==1/0?(a[10]=(f+h)*(v=1/(h-f)),a[14]=2*f*h*v):(a[10]=-1,a[14]=-2*h),a},c.b9=function(a,n,s){var h=Math.sin(s),f=Math.cos(s),v=n[4],x=n[5],S=n[6],I=n[7],A=n[8],L=n[9],N=n[10],q=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*f+A*h,a[5]=x*f+L*h,a[6]=S*f+N*h,a[7]=I*f+q*h,a[8]=A*f-v*h,a[9]=L*f-x*h,a[10]=N*f-S*h,a[11]=q*f-I*h,a},c.bA=T,c.bB=rw,c.bC=Oc,c.bD=Zi,c.ba=te,c.bb=ie,c.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},c.bd=class extends Ul{},c.be=t0,c.bf=Pw,c.bg=DM,c.bi=$e,c.bj=function(a,n,s=!1){if(Ii===Nd||Ii===jd||Ii===Vd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=Zt.resolveURL(a),Ii=Nd,Ud=n,Hd(),s||Nf()},c.bk=Wd,c.bl=function(a,n){const s={};for(let f=0;f<a.length;f++){const v=n&&n[a[f].id]||Vc(a[f]);n&&(n[a[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(a[f])}const h=[];for(const f in s)h.push(s[f]);return h},c.bm=It,c.bn=Mw,c.bo=Rw,c.bp=dw,c.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=An/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new Xr(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Xr(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Xr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=a.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Xr(A),a.canonical),h["text-size"].possiblyEvaluate(new Xr(L),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=a.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Xr(A),a.canonical),h["icon-size"].possiblyEvaluate(new Xr(L),a.canonical)]}const v=s.get("text-line-height")*Nn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),I=s.get("text-size");for(const A of a.bucket.features){const L=s.get("text-font").evaluate(A,{},a.canonical).join(","),N=I.evaluate(A,{},a.canonical),q=f.layoutTextSize.evaluate(A,{},a.canonical),Y=f.layoutIconSize.evaluate(A,{},a.canonical),ee={horizontal:{},vertical:void 0},se=A.text;let fe,ye=[0,0];if(se){const Ie=se.toString(),Ne=s.get("text-letter-spacing").evaluate(A,{},a.canonical)*Nn,Ke=Od(Ie)?Ne:0,wt=s.get("text-anchor").evaluate(A,{},a.canonical),$t=Gw(n,A,a.canonical);if(!$t){const ut=s.get("text-radial-offset").evaluate(A,{},a.canonical);ye=ut?Ww(wt,[ut*Nn,i0]):s.get("text-offset").evaluate(A,{},a.canonical).map(tt=>tt*Nn)}let xt=x?"center":s.get("text-justify").evaluate(A,{},a.canonical);const ft=s.get("symbol-placement"),st=ft==="point"?s.get("text-max-width").evaluate(A,{},a.canonical)*Nn:0,Pt=()=>{a.bucket.allowVerticalPlacement&&Bd(Ie)&&(ee.vertical=nm(se,a.glyphMap,a.glyphPositions,a.imagePositions,L,st,v,wt,"left",Ke,ye,c.ai.vertical,!0,ft,q,N))};if(!x&&$t){const ut=new Set;if(xt==="auto")for(let Wt=0;Wt<$t.values.length;Wt+=2)ut.add(o0($t.values[Wt]));else ut.add(xt);let tt=!1;for(const Wt of ut)if(!ee.horizontal[Wt])if(tt)ee.horizontal[Wt]=ee.horizontal[0];else{const Nt=nm(se,a.glyphMap,a.glyphPositions,a.imagePositions,L,st,v,"center",Wt,Ke,ye,c.ai.horizontal,!1,ft,q,N);Nt&&(ee.horizontal[Wt]=Nt,tt=Nt.positionedLines.length===1)}Pt()}else{xt==="auto"&&(xt=o0(wt));const ut=nm(se,a.glyphMap,a.glyphPositions,a.imagePositions,L,st,v,wt,xt,Ke,ye,c.ai.horizontal,!1,ft,q,N);ut&&(ee.horizontal[xt]=ut),Pt(),Bd(Ie)&&x&&S&&(ee.vertical=nm(se,a.glyphMap,a.glyphPositions,a.imagePositions,L,st,v,wt,xt,Ke,ye,c.ai.vertical,!1,ft,q,N))}}let Ce=!1;if(A.icon&&A.icon.name){const Ie=a.imageMap[A.icon.name];Ie&&(fe=fM(a.imagePositions[A.icon.name],s.get("icon-offset").evaluate(A,{},a.canonical),s.get("icon-anchor").evaluate(A,{},a.canonical)),Ce=!!Ie.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Ce:a.bucket.sdfIcons!==Ce&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ie.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const be=Zw(ee.horizontal)||ee.vertical;a.bucket.iconsInText=!!be&&be.iconsInText,(be||fe)&&AM(a.bucket,A,ee,fe,a.imageMap,f,q,Y,ye,Ce,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},c.br=Uv,c.bs=Nv,c.bt=Vv,c.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},c.bv=Wv,c.bw=qs,c.bx=function(a,n,s,h,f){return b(this,void 0,void 0,function*(){if(G())try{return yield dt(a,n,s,h,f)}catch{}return function(v,x,S,I,A){const L=v.width,N=v.height;vt&&mt||(vt=new OffscreenCanvas(L,N),mt=vt.getContext("2d",{willReadFrequently:!0})),vt.width=L,vt.height=N,mt.drawImage(v,0,0,L,N);const q=mt.getImageData(x,S,I,A);return mt.clearRect(0,0,L,N),q.data}(a,n,s,h,f)})},c.by=Aw,c.bz=w,c.c=kt,c.d=function(a,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Je})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(h):Je},c.e=de,c.f=function(a,n){return Et(de(a,{type:"json"}),n)},c.g=ht,c.h=Zt,c.i=Ge,c.j=er,c.k=Mr,c.l=gr,c.m=Et,c.n=function(a){return new Wv(a).readFields(lM,[])},c.o=function(a,n,s){if(!a.length)return s(null,[]);let h=a.length;const f=new Array(a.length);let v=null;a.forEach((x,S)=>{n(x,(I,A)=>{I&&(v=I),f[S]=A,--h==0&&s(v,f)})})},c.p=uw,c.q=ih,c.r=wn,c.s=Cr,c.t=bv,c.u=bt,c.v=Pe,c.w=He,c.x=Wc,c.y=va,c.z=function([a,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(s),y:a*Math.sin(n)*Math.sin(s),z:a*Math.cos(s)}}}),d(["./shared"],function(c){class b{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,R){for(const Q of M){this._layerConfigs[Q.id]=Q;const re=this._layers[Q.id]=c.aC(Q);re._featureFilter=c.a6(re.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(const Q of R)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};const V=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const Q of V){const re=Q.map(Ve=>this._layers[Ve.id]),xe=re[0];if(xe.visibility==="none")continue;const pe=xe.source||"";let ne=this.familiesBySource[pe];ne||(ne=this.familiesBySource[pe]={});const _e=xe.sourceLayer||"_geojsonTileLayer";let ze=ne[_e];ze||(ze=ne[_e]=[]),ze.push(re)}}}class w{constructor(M){const R={},V=[];for(const pe in M){const ne=M[pe],_e=R[pe]={};for(const ze in ne){const Ve=ne[+ze];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const We={x:0,y:0,w:Ve.bitmap.width+2,h:Ve.bitmap.height+2};V.push(We),_e[ze]={rect:We,metrics:Ve.metrics}}}const{w:Q,h:re}=c.p(V),xe=new c.q({width:Q||1,height:re||1});for(const pe in M){const ne=M[pe];for(const _e in ne){const ze=ne[+_e];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const Ve=R[pe][_e].rect;c.q.copy(ze.bitmap,xe,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},ze.bitmap)}}this.image=xe,this.positions=R}}c.bm("GlyphAtlas",w);class T{constructor(M){this.tileID=new c.O(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(M,R,V,Q,re){this.status="parsing",this.data=M,this.collisionBoxArray=new c.a3;const xe=new c.bn(Object.keys(M.layers).sort()),pe=new c.bo(this.tileID,this.promoteId);pe.bucketLayerIDs=[];const ne={},_e={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:V},ze=R.familiesBySource[this.source];for(const ct in ze){const _t=M.layers[ct];if(!_t)continue;_t.version===1&&c.w(`Vector tile source "${this.source}" layer "${ct}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ur=xe.encode(ct),tr=[];for(let yr=0;yr<_t.length;yr++){const Xt=_t.feature(yr),Tt=pe.getId(Xt,ct);tr.push({feature:Xt,id:Tt,index:yr,sourceLayerIndex:ur})}for(const yr of ze[ct]){const Xt=yr[0];Xt.source!==this.source&&c.w(`layer.source = ${Xt.source} does not equal this.source = ${this.source}`),Xt.minzoom&&this.zoom<Math.floor(Xt.minzoom)||Xt.maxzoom&&this.zoom>=Xt.maxzoom||Xt.visibility!=="none"&&(z(yr,this.zoom,V),(ne[Xt.id]=Xt.createBucket({index:pe.bucketLayerIDs.length,layers:yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ur,sourceID:this.source})).populate(tr,_e,this.tileID.canonical),pe.bucketLayerIDs.push(yr.map(Tt=>Tt.id)))}}let Ve,We,Ye,St;const at=c.aH(_e.glyphDependencies,ct=>Object.keys(ct).map(Number));this.inFlightDependencies.forEach(ct=>ct==null?void 0:ct.cancel()),this.inFlightDependencies=[];const Dt=++this.dependencySentinel;Object.keys(at).length?this.inFlightDependencies.push(Q.send("getGlyphs",{uid:this.uid,stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"},(ct,_t)=>{Dt===this.dependencySentinel&&(Ve||(Ve=ct,We=_t,nt.call(this)))})):We={};const Me=Object.keys(_e.iconDependencies);Me.length?this.inFlightDependencies.push(Q.send("getImages",{icons:Me,source:this.source,tileID:this.tileID,type:"icons"},(ct,_t)=>{Dt===this.dependencySentinel&&(Ve||(Ve=ct,Ye=_t,nt.call(this)))})):Ye={};const Oe=Object.keys(_e.patternDependencies);function nt(){if(Ve)return re(Ve);if(We&&Ye&&St){const ct=new w(We),_t=new c.bp(Ye,St);for(const ur in ne){const tr=ne[ur];tr instanceof c.a4?(z(tr.layers,this.zoom,V),c.bq({bucket:tr,glyphMap:We,glyphPositions:ct.positions,imageMap:Ye,imagePositions:_t.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):tr.hasPattern&&(tr instanceof c.br||tr instanceof c.bs||tr instanceof c.bt)&&(z(tr.layers,this.zoom,V),tr.addFeatures(_e,this.tileID.canonical,_t.patternPositions))}this.status="done",re(null,{buckets:Object.values(ne).filter(ur=>!ur.isEmpty()),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ct.image,imageAtlas:_t,glyphMap:this.returnDependencies?We:null,iconMap:this.returnDependencies?Ye:null,glyphPositions:this.returnDependencies?ct.positions:null})}}Oe.length?this.inFlightDependencies.push(Q.send("getImages",{icons:Oe,source:this.source,tileID:this.tileID,type:"patterns"},(ct,_t)=>{Dt===this.dependencySentinel&&(Ve||(Ve=ct,St=_t,nt.call(this)))})):St={},nt.call(this)}}function z(ue,M,R){const V=new c.a8(M);for(const Q of ue)Q.recalculate(V,R)}function P(ue,M){const R=c.l(ue.request,(V,Q,re,xe)=>{if(V)M(V);else if(Q)try{const pe=new c.bw.VectorTile(new c.bv(Q));M(null,{vectorTile:pe,rawData:Q,cacheControl:re,expires:xe})}catch(pe){const ne=new Uint8Array(Q);let _e=`Unable to parse the tile at ${ue.request.url}, `;_e+=ne[0]===31&&ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.messge}`,M(new Error(_e))}});return()=>{R.cancel(),M()}}class U{constructor(M,R,V,Q){this.actor=M,this.layerIndex=R,this.availableImages=V,this.loadVectorData=Q||P,this.fetching={},this.loading={},this.loaded={}}loadTile(M,R){const V=M.uid;this.loading||(this.loading={});const Q=!!(M&&M.request&&M.request.collectResourceTiming)&&new c.bu(M.request),re=this.loading[V]=new T(M);re.abort=this.loadVectorData(M,(xe,pe)=>{if(delete this.loading[V],xe||!pe)return re.status="done",this.loaded[V]=re,R(xe);const ne=pe.rawData,_e={};pe.expires&&(_e.expires=pe.expires),pe.cacheControl&&(_e.cacheControl=pe.cacheControl);const ze={};if(Q){const Ve=Q.finish();Ve&&(ze.resourceTiming=JSON.parse(JSON.stringify(Ve)))}re.vectorTile=pe.vectorTile,re.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ve,We)=>{if(delete this.fetching[V],Ve||!We)return R(Ve);R(null,c.e({rawTileData:ne.slice(0)},We,_e,ze))}),this.loaded=this.loaded||{},this.loaded[V]=re,this.fetching[V]={rawTileData:ne,cacheControl:_e,resourceTiming:ze}})}reloadTile(M,R){const V=this.loaded,Q=M.uid;if(V&&V[Q]){const re=V[Q];re.showCollisionBoxes=M.showCollisionBoxes,re.status==="parsing"?re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,(xe,pe)=>{if(xe||!pe)return R(xe,pe);let ne;if(this.fetching[Q]){const{rawTileData:_e,cacheControl:ze,resourceTiming:Ve}=this.fetching[Q];delete this.fetching[Q],ne=c.e({rawTileData:_e.slice(0)},pe,ze,Ve)}else ne=pe;R(null,ne)}):re.status==="done"&&(re.vectorTile?re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,R):R())}}abortTile(M,R){const V=this.loading,Q=M.uid;V&&V[Q]&&V[Q].abort&&(V[Q].abort(),delete V[Q]),R()}removeTile(M,R){const V=this.loaded,Q=M.uid;V&&V[Q]&&delete V[Q],R()}}class H{constructor(){this.loaded={}}loadTile(M,R){return c._(this,void 0,void 0,function*(){const{uid:V,encoding:Q,rawImageData:re,redFactor:xe,greenFactor:pe,blueFactor:ne,baseShift:_e}=M,ze=re.width+2,Ve=re.height+2,We=c.a(re)?new c.R({width:ze,height:Ve},yield c.bx(re,-1,-1,ze,Ve)):re,Ye=new c.by(V,We,Q,xe,pe,ne,_e);this.loaded=this.loaded||{},this.loaded[V]=Ye,R(null,Ye)})}removeTile(M){const R=this.loaded,V=M.uid;R&&R[V]&&delete R[V]}}function W(ue,M){if(ue.length!==0){J(ue[0],M);for(var R=1;R<ue.length;R++)J(ue[R],!M)}}function J(ue,M){for(var R=0,V=0,Q=0,re=ue.length,xe=re-1;Q<re;xe=Q++){var pe=(ue[Q][0]-ue[xe][0])*(ue[xe][1]+ue[Q][1]),ne=R+pe;V+=Math.abs(R)>=Math.abs(pe)?R-ne+pe:pe-ne+R,R=ne}R+V>=0!=!!M&&ue.reverse()}var j=c.bz(function ue(M,R){var V,Q=M&&M.type;if(Q==="FeatureCollection")for(V=0;V<M.features.length;V++)ue(M.features[V],R);else if(Q==="GeometryCollection")for(V=0;V<M.geometries.length;V++)ue(M.geometries[V],R);else if(Q==="Feature")ue(M.geometry,R);else if(Q==="Polygon")W(M.coordinates,R);else if(Q==="MultiPolygon")for(V=0;V<M.coordinates.length;V++)W(M.coordinates[V],R);return M});const $=c.bw.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},te=c.bA,ie=c.bw.VectorTileFeature,me=Z;function Z(ue,M){this.options=M||{},this.features=ue,this.length=ue.length}function de(ue,M){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=M||4096}Z.prototype.feature=function(ue){return new de(this.features[ue],this.options.extent)},de.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var M=0;M<ue.length;M++){for(var R=ue[M],V=[],Q=0;Q<R.length;Q++)V.push(new te(R[Q][0],R[Q][1]));this.geometry.push(V)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,M=1/0,R=-1/0,V=1/0,Q=-1/0,re=0;re<ue.length;re++)for(var xe=ue[re],pe=0;pe<xe.length;pe++){var ne=xe[pe];M=Math.min(M,ne.x),R=Math.max(R,ne.x),V=Math.min(V,ne.y),Q=Math.max(Q,ne.y)}return[M,V,R,Q]},de.prototype.toGeoJSON=ie.prototype.toGeoJSON;var Te=c.bB,ve=me;function De(ue){var M=new Te;return function(R,V){for(var Q in R.layers)V.writeMessage(3,ke,R.layers[Q])}(ue,M),M.finish()}function ke(ue,M){var R;M.writeVarintField(15,ue.version||1),M.writeStringField(1,ue.name||""),M.writeVarintField(5,ue.extent||4096);var V={keys:[],values:[],keycache:{},valuecache:{}};for(R=0;R<ue.length;R++)V.feature=ue.feature(R),M.writeMessage(2,Ee,V);var Q=V.keys;for(R=0;R<Q.length;R++)M.writeStringField(3,Q[R]);var re=V.values;for(R=0;R<re.length;R++)M.writeMessage(4,Re,re[R])}function Ee(ue,M){var R=ue.feature;R.id!==void 0&&M.writeVarintField(1,R.id),M.writeMessage(2,He,ue),M.writeVarintField(3,R.type),M.writeMessage(4,Ge,R)}function He(ue,M){var R=ue.feature,V=ue.keys,Q=ue.values,re=ue.keycache,xe=ue.valuecache;for(var pe in R.properties){var ne=R.properties[pe],_e=re[pe];if(ne!==null){_e===void 0&&(V.push(pe),re[pe]=_e=V.length-1),M.writeVarint(_e);var ze=typeof ne;ze!=="string"&&ze!=="boolean"&&ze!=="number"&&(ne=JSON.stringify(ne));var Ve=ze+":"+ne,We=xe[Ve];We===void 0&&(Q.push(ne),xe[Ve]=We=Q.length-1),M.writeVarint(We)}}}function Fe(ue,M){return(M<<3)+(7&ue)}function Ae(ue){return ue<<1^ue>>31}function Ge(ue,M){for(var R=ue.loadGeometry(),V=ue.type,Q=0,re=0,xe=R.length,pe=0;pe<xe;pe++){var ne=R[pe],_e=1;V===1&&(_e=ne.length),M.writeVarint(Fe(1,_e));for(var ze=V===3?ne.length-1:ne.length,Ve=0;Ve<ze;Ve++){Ve===1&&V!==1&&M.writeVarint(Fe(2,ze-1));var We=ne[Ve].x-Q,Ye=ne[Ve].y-re;M.writeVarint(Ae(We)),M.writeVarint(Ae(Ye)),Q+=We,re+=Ye}V===3&&M.writeVarint(Fe(7,1))}}function Re(ue,M){var R=typeof ue;R==="string"?M.writeStringField(1,ue):R==="boolean"?M.writeBooleanField(7,ue):R==="number"&&(ue%1!=0?M.writeDoubleField(3,ue):ue<0?M.writeSVarintField(6,ue):M.writeVarintField(5,ue))}G.exports=De,G.exports.fromVectorTileJs=De,G.exports.fromGeojsonVt=function(ue,M){M=M||{};var R={};for(var V in ue)R[V]=new ve(ue[V].features,M),R[V].name=V,R[V].version=M.version,R[V].extent=M.extent;return De({layers:R})},G.exports.GeoJSONWrapper=ve;var Ze=c.bz(G.exports);const Je={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},dt=Math.fround||(vt=new Float32Array(1),ue=>(vt[0]=+ue,vt[0]));var vt;const mt=3,Ct=5,zt=6;class Zt{constructor(M){this.options=Object.assign(Object.create(Je),M),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(M){const{log:R,minZoom:V,maxZoom:Q}=this.options;R&&console.time("total time");const re=`prepare ${M.length} points`;R&&console.time(re),this.points=M;const xe=[];for(let ne=0;ne<M.length;ne++){const _e=M[ne];if(!_e.geometry)continue;const[ze,Ve]=_e.geometry.coordinates,We=dt(rt(ze)),Ye=dt(ht(Ve));xe.push(We,Ye,1/0,ne,-1,1),this.options.reduce&&xe.push(0)}let pe=this.trees[Q+1]=this._createTree(xe);R&&console.timeEnd(re);for(let ne=Q;ne>=V;ne--){const _e=+Date.now();pe=this.trees[ne]=this._createTree(this._cluster(pe,ne)),R&&console.log("z%d: %d clusters in %dms",ne,pe.numItems,+Date.now()-_e)}return R&&console.timeEnd("total time"),this}getClusters(M,R){let V=((M[0]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,M[1]));let re=M[2]===180?180:((M[2]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)V=-180,re=180;else if(V>re){const Ve=this.getClusters([V,Q,180,xe],R),We=this.getClusters([-180,Q,re,xe],R);return Ve.concat(We)}const pe=this.trees[this._limitZoom(R)],ne=pe.range(rt(V),ht(xe),rt(re),ht(Q)),_e=pe.data,ze=[];for(const Ve of ne){const We=this.stride*Ve;ze.push(_e[We+Ct]>1?kt(_e,We,this.clusterProps):this.points[_e[We+mt]])}return ze}getChildren(M){const R=this._getOriginId(M),V=this._getOriginZoom(M),Q="No cluster with the specified id.",re=this.trees[V];if(!re)throw new Error(Q);const xe=re.data;if(R*this.stride>=xe.length)throw new Error(Q);const pe=this.options.radius/(this.options.extent*Math.pow(2,V-1)),ne=re.within(xe[R*this.stride],xe[R*this.stride+1],pe),_e=[];for(const ze of ne){const Ve=ze*this.stride;xe[Ve+4]===M&&_e.push(xe[Ve+Ct]>1?kt(xe,Ve,this.clusterProps):this.points[xe[Ve+mt]])}if(_e.length===0)throw new Error(Q);return _e}getLeaves(M,R,V){const Q=[];return this._appendLeaves(Q,M,R=R||10,V=V||0,0),Q}getTile(M,R,V){const Q=this.trees[this._limitZoom(M)],re=Math.pow(2,M),{extent:xe,radius:pe}=this.options,ne=pe/xe,_e=(V-ne)/re,ze=(V+1+ne)/re,Ve={features:[]};return this._addTileFeatures(Q.range((R-ne)/re,_e,(R+1+ne)/re,ze),Q.data,R,V,re,Ve),R===0&&this._addTileFeatures(Q.range(1-ne/re,_e,1,ze),Q.data,re,V,re,Ve),R===re-1&&this._addTileFeatures(Q.range(0,_e,ne/re,ze),Q.data,-1,V,re,Ve),Ve.features.length?Ve:null}getClusterExpansionZoom(M){let R=this._getOriginZoom(M)-1;for(;R<=this.options.maxZoom;){const V=this.getChildren(M);if(R++,V.length!==1)break;M=V[0].properties.cluster_id}return R}_appendLeaves(M,R,V,Q,re){const xe=this.getChildren(R);for(const pe of xe){const ne=pe.properties;if(ne&&ne.cluster?re+ne.point_count<=Q?re+=ne.point_count:re=this._appendLeaves(M,ne.cluster_id,V,Q,re):re<Q?re++:M.push(pe),M.length===V)break}return re}_createTree(M){const R=new c.av(M.length/this.stride|0,this.options.nodeSize,Float32Array);for(let V=0;V<M.length;V+=this.stride)R.add(M[V],M[V+1]);return R.finish(),R.data=M,R}_addTileFeatures(M,R,V,Q,re,xe){for(const pe of M){const ne=pe*this.stride,_e=R[ne+Ct]>1;let ze,Ve,We;if(_e)ze=$e(R,ne,this.clusterProps),Ve=R[ne],We=R[ne+1];else{const at=this.points[R[ne+mt]];ze=at.properties;const[Dt,Me]=at.geometry.coordinates;Ve=rt(Dt),We=ht(Me)}const Ye={type:1,geometry:[[Math.round(this.options.extent*(Ve*re-V)),Math.round(this.options.extent*(We*re-Q))]],tags:ze};let St;St=_e||this.options.generateId?R[ne+mt]:this.points[R[ne+mt]].id,St!==void 0&&(Ye.id=St),xe.features.push(Ye)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(Math.floor(+M),this.options.maxZoom+1))}_cluster(M,R){const{radius:V,extent:Q,reduce:re,minPoints:xe}=this.options,pe=V/(Q*Math.pow(2,R)),ne=M.data,_e=[],ze=this.stride;for(let Ve=0;Ve<ne.length;Ve+=ze){if(ne[Ve+2]<=R)continue;ne[Ve+2]=R;const We=ne[Ve],Ye=ne[Ve+1],St=M.within(ne[Ve],ne[Ve+1],pe),at=ne[Ve+Ct];let Dt=at;for(const Me of St){const Oe=Me*ze;ne[Oe+2]>R&&(Dt+=ne[Oe+Ct])}if(Dt>at&&Dt>=xe){let Me,Oe=We*at,nt=Ye*at,ct=-1;const _t=((Ve/ze|0)<<5)+(R+1)+this.points.length;for(const ur of St){const tr=ur*ze;if(ne[tr+2]<=R)continue;ne[tr+2]=R;const yr=ne[tr+Ct];Oe+=ne[tr]*yr,nt+=ne[tr+1]*yr,ne[tr+4]=_t,re&&(Me||(Me=this._map(ne,Ve,!0),ct=this.clusterProps.length,this.clusterProps.push(Me)),re(Me,this._map(ne,tr)))}ne[Ve+4]=_t,_e.push(Oe/Dt,nt/Dt,1/0,_t,-1,Dt),re&&_e.push(ct)}else{for(let Me=0;Me<ze;Me++)_e.push(ne[Ve+Me]);if(Dt>1)for(const Me of St){const Oe=Me*ze;if(!(ne[Oe+2]<=R)){ne[Oe+2]=R;for(let nt=0;nt<ze;nt++)_e.push(ne[Oe+nt])}}}}return _e}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,R,V){if(M[R+Ct]>1){const xe=this.clusterProps[M[R+zt]];return V?Object.assign({},xe):xe}const Q=this.points[M[R+mt]].properties,re=this.options.map(Q);return V&&re===Q?Object.assign({},re):re}}function kt(ue,M,R){return{type:"Feature",id:ue[M+mt],properties:$e(ue,M,R),geometry:{type:"Point",coordinates:[(V=ue[M],360*(V-.5)),At(ue[M+1])]}};var V}function $e(ue,M,R){const V=ue[M+Ct],Q=V>=1e4?`${Math.round(V/1e3)}k`:V>=1e3?Math.round(V/100)/10+"k":V,re=ue[M+zt],xe=re===-1?{}:Object.assign({},R[re]);return Object.assign(xe,{cluster:!0,cluster_id:ue[M+mt],point_count:V,point_count_abbreviated:Q})}function rt(ue){return ue/360+.5}function ht(ue){const M=Math.sin(ue*Math.PI/180),R=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return R<0?0:R>1?1:R}function At(ue){const M=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function Et(ue,M,R,V){for(var Q,re=V,xe=R-M>>1,pe=R-M,ne=ue[M],_e=ue[M+1],ze=ue[R],Ve=ue[R+1],We=M+3;We<R;We+=3){var Ye=gr(ue[We],ue[We+1],ne,_e,ze,Ve);if(Ye>re)Q=We,re=Ye;else if(Ye===re){var St=Math.abs(We-xe);St<pe&&(Q=We,pe=St)}}re>V&&(Q-M>3&&Et(ue,M,Q,V),ue[Q+2]=re,R-Q>3&&Et(ue,Q,R,V))}function gr(ue,M,R,V,Q,re){var xe=Q-R,pe=re-V;if(xe!==0||pe!==0){var ne=((ue-R)*xe+(M-V)*pe)/(xe*xe+pe*pe);ne>1?(R=Q,V=re):ne>0&&(R+=xe*ne,V+=pe*ne)}return(xe=ue-R)*xe+(pe=M-V)*pe}function Cr(ue,M,R,V){var Q={id:ue===void 0?null:ue,type:M,geometry:R,tags:V,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var xe=re.geometry,pe=re.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")lr(re,xe);else if(pe==="Polygon"||pe==="MultiLineString")for(var ne=0;ne<xe.length;ne++)lr(re,xe[ne]);else if(pe==="MultiPolygon")for(ne=0;ne<xe.length;ne++)for(var _e=0;_e<xe[ne].length;_e++)lr(re,xe[ne][_e])}(Q),Q}function lr(ue,M){for(var R=0;R<M.length;R+=3)ue.minX=Math.min(ue.minX,M[R]),ue.minY=Math.min(ue.minY,M[R+1]),ue.maxX=Math.max(ue.maxX,M[R]),ue.maxY=Math.max(ue.maxY,M[R+1])}function yt(ue,M,R,V){if(M.geometry){var Q=M.geometry.coordinates,re=M.geometry.type,xe=Math.pow(R.tolerance/((1<<R.maxZoom)*R.extent),2),pe=[],ne=M.id;if(R.promoteId?ne=M.properties[R.promoteId]:R.generateId&&(ne=V||0),re==="Point")Mr(Q,pe);else if(re==="MultiPoint")for(var _e=0;_e<Q.length;_e++)Mr(Q[_e],pe);else if(re==="LineString")er(Q,pe,xe,!1);else if(re==="MultiLineString"){if(R.lineMetrics){for(_e=0;_e<Q.length;_e++)er(Q[_e],pe=[],xe,!1),ue.push(Cr(ne,"LineString",pe,M.properties));return}Lr(Q,pe,xe,!1)}else if(re==="Polygon")Lr(Q,pe,xe,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(_e=0;_e<M.geometry.geometries.length;_e++)yt(ue,{id:ne,geometry:M.geometry.geometries[_e],properties:M.properties},R,V);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<Q.length;_e++){var ze=[];Lr(Q[_e],ze,xe,!0),pe.push(ze)}}ue.push(Cr(ne,re,pe,M.properties))}}function Mr(ue,M){M.push(Pe(ue[0])),M.push(cr(ue[1])),M.push(0)}function er(ue,M,R,V){for(var Q,re,xe=0,pe=0;pe<ue.length;pe++){var ne=Pe(ue[pe][0]),_e=cr(ue[pe][1]);M.push(ne),M.push(_e),M.push(0),pe>0&&(xe+=V?(Q*_e-ne*re)/2:Math.sqrt(Math.pow(ne-Q,2)+Math.pow(_e-re,2))),Q=ne,re=_e}var ze=M.length-3;M[2]=1,Et(M,0,ze,R),M[ze+2]=1,M.size=Math.abs(xe),M.start=0,M.end=M.size}function Lr(ue,M,R,V){for(var Q=0;Q<ue.length;Q++){var re=[];er(ue[Q],re,R,V),M.push(re)}}function Pe(ue){return ue/360+.5}function cr(ue){var M=Math.sin(ue*Math.PI/180),R=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return R<0?0:R>1?1:R}function ir(ue,M,R,V,Q,re,xe,pe){if(V/=M,re>=(R/=M)&&xe<V)return ue;if(xe<R||re>=V)return null;for(var ne=[],_e=0;_e<ue.length;_e++){var ze=ue[_e],Ve=ze.geometry,We=ze.type,Ye=Q===0?ze.minX:ze.minY,St=Q===0?ze.maxX:ze.maxY;if(Ye>=R&&St<V)ne.push(ze);else if(!(St<R||Ye>=V)){var at=[];if(We==="Point"||We==="MultiPoint")Bt(Ve,at,R,V,Q);else if(We==="LineString")Gt(Ve,at,R,V,Q,!1,pe.lineMetrics);else if(We==="MultiLineString")Pr(Ve,at,R,V,Q,!1);else if(We==="Polygon")Pr(Ve,at,R,V,Q,!0);else if(We==="MultiPolygon")for(var Dt=0;Dt<Ve.length;Dt++){var Me=[];Pr(Ve[Dt],Me,R,V,Q,!0),Me.length&&at.push(Me)}if(at.length){if(pe.lineMetrics&&We==="LineString"){for(Dt=0;Dt<at.length;Dt++)ne.push(Cr(ze.id,We,at[Dt],ze.tags));continue}We!=="LineString"&&We!=="MultiLineString"||(at.length===1?(We="LineString",at=at[0]):We="MultiLineString"),We!=="Point"&&We!=="MultiPoint"||(We=at.length===3?"Point":"MultiPoint"),ne.push(Cr(ze.id,We,at,ze.tags))}}}return ne.length?ne:null}function Bt(ue,M,R,V,Q){for(var re=0;re<ue.length;re+=3){var xe=ue[re+Q];xe>=R&&xe<=V&&(M.push(ue[re]),M.push(ue[re+1]),M.push(ue[re+2]))}}function Gt(ue,M,R,V,Q,re,xe){for(var pe,ne,_e=kr(ue),ze=Q===0?nr:rr,Ve=ue.start,We=0;We<ue.length-3;We+=3){var Ye=ue[We],St=ue[We+1],at=ue[We+2],Dt=ue[We+3],Me=ue[We+4],Oe=Q===0?Ye:St,nt=Q===0?Dt:Me,ct=!1;xe&&(pe=Math.sqrt(Math.pow(Ye-Dt,2)+Math.pow(St-Me,2))),Oe<R?nt>R&&(ne=ze(_e,Ye,St,Dt,Me,R),xe&&(_e.start=Ve+pe*ne)):Oe>V?nt<V&&(ne=ze(_e,Ye,St,Dt,Me,V),xe&&(_e.start=Ve+pe*ne)):sr(_e,Ye,St,at),nt<R&&Oe>=R&&(ne=ze(_e,Ye,St,Dt,Me,R),ct=!0),nt>V&&Oe<=V&&(ne=ze(_e,Ye,St,Dt,Me,V),ct=!0),!re&&ct&&(xe&&(_e.end=Ve+pe*ne),M.push(_e),_e=kr(ue)),xe&&(Ve+=pe)}var _t=ue.length-3;Ye=ue[_t],St=ue[_t+1],at=ue[_t+2],(Oe=Q===0?Ye:St)>=R&&Oe<=V&&sr(_e,Ye,St,at),_t=_e.length-3,re&&_t>=3&&(_e[_t]!==_e[0]||_e[_t+1]!==_e[1])&&sr(_e,_e[0],_e[1],_e[2]),_e.length&&M.push(_e)}function kr(ue){var M=[];return M.size=ue.size,M.start=ue.start,M.end=ue.end,M}function Pr(ue,M,R,V,Q,re){for(var xe=0;xe<ue.length;xe++)Gt(ue[xe],M,R,V,Q,re,!1)}function sr(ue,M,R,V){ue.push(M),ue.push(R),ue.push(V)}function nr(ue,M,R,V,Q,re){var xe=(re-M)/(V-M);return ue.push(re),ue.push(R+(Q-R)*xe),ue.push(1),xe}function rr(ue,M,R,V,Q,re){var xe=(re-R)/(Q-R);return ue.push(M+(V-M)*xe),ue.push(re),ue.push(1),xe}function Dr(ue,M){for(var R=[],V=0;V<ue.length;V++){var Q,re=ue[V],xe=re.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Q=it(re.geometry,M);else if(xe==="MultiLineString"||xe==="Polygon"){Q=[];for(var pe=0;pe<re.geometry.length;pe++)Q.push(it(re.geometry[pe],M))}else if(xe==="MultiPolygon")for(Q=[],pe=0;pe<re.geometry.length;pe++){for(var ne=[],_e=0;_e<re.geometry[pe].length;_e++)ne.push(it(re.geometry[pe][_e],M));Q.push(ne)}R.push(Cr(re.id,xe,Q,re.tags))}return R}function it(ue,M){var R=[];R.size=ue.size,ue.start!==void 0&&(R.start=ue.start,R.end=ue.end);for(var V=0;V<ue.length;V+=3)R.push(ue[V]+M,ue[V+1],ue[V+2]);return R}function Le(ue,M){if(ue.transformed)return ue;var R,V,Q,re=1<<ue.z,xe=ue.x,pe=ue.y;for(R=0;R<ue.features.length;R++){var ne=ue.features[R],_e=ne.geometry,ze=ne.type;if(ne.geometry=[],ze===1)for(V=0;V<_e.length;V+=2)ne.geometry.push(Ht(_e[V],_e[V+1],M,re,xe,pe));else for(V=0;V<_e.length;V++){var Ve=[];for(Q=0;Q<_e[V].length;Q+=2)Ve.push(Ht(_e[V][Q],_e[V][Q+1],M,re,xe,pe));ne.geometry.push(Ve)}}return ue.transformed=!0,ue}function Ht(ue,M,R,V,Q,re){return[Math.round(R*(ue*V-Q)),Math.round(R*(M*V-re))]}function Mt(ue,M,R,V,Q){for(var re=M===Q.maxZoom?0:Q.tolerance/((1<<M)*Q.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:R,y:V,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<ue.length;pe++){xe.numFeatures++,_r(xe,ue[pe],re,Q);var ne=ue[pe].minX,_e=ue[pe].minY,ze=ue[pe].maxX,Ve=ue[pe].maxY;ne<xe.minX&&(xe.minX=ne),_e<xe.minY&&(xe.minY=_e),ze>xe.maxX&&(xe.maxX=ze),Ve>xe.maxY&&(xe.maxY=Ve)}return xe}function _r(ue,M,R,V){var Q=M.geometry,re=M.type,xe=[];if(re==="Point"||re==="MultiPoint")for(var pe=0;pe<Q.length;pe+=3)xe.push(Q[pe]),xe.push(Q[pe+1]),ue.numPoints++,ue.numSimplified++;else if(re==="LineString")xr(xe,Q,ue,R,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(pe=0;pe<Q.length;pe++)xr(xe,Q[pe],ue,R,re==="Polygon",pe===0);else if(re==="MultiPolygon")for(var ne=0;ne<Q.length;ne++){var _e=Q[ne];for(pe=0;pe<_e.length;pe++)xr(xe,_e[pe],ue,R,!0,pe===0)}if(xe.length){var ze=M.tags||null;if(re==="LineString"&&V.lineMetrics){for(var Ve in ze={},M.tags)ze[Ve]=M.tags[Ve];ze.mapbox_clip_start=Q.start/Q.size,ze.mapbox_clip_end=Q.end/Q.size}var We={geometry:xe,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:ze};M.id!==null&&(We.id=M.id),ue.features.push(We)}}function xr(ue,M,R,V,Q,re){var xe=V*V;if(V>0&&M.size<(Q?xe:V))R.numPoints+=M.length/3;else{for(var pe=[],ne=0;ne<M.length;ne+=3)(V===0||M[ne+2]>xe)&&(R.numSimplified++,pe.push(M[ne]),pe.push(M[ne+1])),R.numPoints++;Q&&function(_e,ze){for(var Ve=0,We=0,Ye=_e.length,St=Ye-2;We<Ye;St=We,We+=2)Ve+=(_e[We]-_e[St])*(_e[We+1]+_e[St+1]);if(Ve>0===ze)for(We=0,Ye=_e.length;We<Ye/2;We+=2){var at=_e[We],Dt=_e[We+1];_e[We]=_e[Ye-2-We],_e[We+1]=_e[Ye-1-We],_e[Ye-2-We]=at,_e[Ye-1-We]=Dt}}(pe,re),ue.push(pe)}}function Qe(ue,M){var R=(M=this.options=function(Q,re){for(var xe in re)Q[xe]=re[xe];return Q}(Object.create(this.options),M)).debug;if(R&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var V=function(Q,re){var xe=[];if(Q.type==="FeatureCollection")for(var pe=0;pe<Q.features.length;pe++)yt(xe,Q.features[pe],re,pe);else yt(xe,Q.type==="Feature"?Q:{geometry:Q},re);return xe}(ue,M);this.tiles={},this.tileCoords=[],R&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),V=function(Q,re){var xe=re.buffer/re.extent,pe=Q,ne=ir(Q,1,-1-xe,xe,0,-1,2,re),_e=ir(Q,1,1-xe,2+xe,0,-1,2,re);return(ne||_e)&&(pe=ir(Q,1,-xe,1+xe,0,-1,2,re)||[],ne&&(pe=Dr(ne,1).concat(pe)),_e&&(pe=pe.concat(Dr(_e,-1)))),pe}(V,M),V.length&&this.splitTile(V,0,0,0),R&&(V.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kt(ue,M,R){return 32*((1<<ue)*R+M)+ue}function Rt(ue,M){return M?ue.properties[M]:ue.id}function ar(ue,M){if(ue==null)return!0;if(ue.type==="Feature")return Rt(ue,M)!=null;if(ue.type==="FeatureCollection"){const R=new Set;for(const V of ue.features){const Q=Rt(V,M);if(Q==null||R.has(Q))return!1;R.add(Q)}return!0}return!1}function jr(ue,M){const R=new Map;if(ue!=null)if(ue.type==="Feature")R.set(Rt(ue,M),ue);else for(const V of ue.features)R.set(Rt(V,M),V);return R}Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(ue,M,R,V,Q,re,xe){for(var pe=[ue,M,R,V],ne=this.options,_e=ne.debug;pe.length;){V=pe.pop(),R=pe.pop(),M=pe.pop(),ue=pe.pop();var ze=1<<M,Ve=Kt(M,R,V),We=this.tiles[Ve];if(!We&&(_e>1&&console.time("creation"),We=this.tiles[Ve]=Mt(ue,M,R,V,ne),this.tileCoords.push({z:M,x:R,y:V}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,R,V,We.numFeatures,We.numPoints,We.numSimplified),console.timeEnd("creation"));var Ye="z"+M;this.stats[Ye]=(this.stats[Ye]||0)+1,this.total++}if(We.source=ue,Q){if(M===ne.maxZoom||M===Q)continue;var St=1<<Q-M;if(R!==Math.floor(re/St)||V!==Math.floor(xe/St))continue}else if(M===ne.indexMaxZoom||We.numPoints<=ne.indexMaxPoints)continue;if(We.source=null,ue.length!==0){_e>1&&console.time("clipping");var at,Dt,Me,Oe,nt,ct,_t=.5*ne.buffer/ne.extent,ur=.5-_t,tr=.5+_t,yr=1+_t;at=Dt=Me=Oe=null,nt=ir(ue,ze,R-_t,R+tr,0,We.minX,We.maxX,ne),ct=ir(ue,ze,R+ur,R+yr,0,We.minX,We.maxX,ne),ue=null,nt&&(at=ir(nt,ze,V-_t,V+tr,1,We.minY,We.maxY,ne),Dt=ir(nt,ze,V+ur,V+yr,1,We.minY,We.maxY,ne),nt=null),ct&&(Me=ir(ct,ze,V-_t,V+tr,1,We.minY,We.maxY,ne),Oe=ir(ct,ze,V+ur,V+yr,1,We.minY,We.maxY,ne),ct=null),_e>1&&console.timeEnd("clipping"),pe.push(at||[],M+1,2*R,2*V),pe.push(Dt||[],M+1,2*R,2*V+1),pe.push(Me||[],M+1,2*R+1,2*V),pe.push(Oe||[],M+1,2*R+1,2*V+1)}}},Qe.prototype.getTile=function(ue,M,R){var V=this.options,Q=V.extent,re=V.debug;if(ue<0||ue>24)return null;var xe=1<<ue,pe=Kt(ue,M=(M%xe+xe)%xe,R);if(this.tiles[pe])return Le(this.tiles[pe],Q);re>1&&console.log("drilling down to z%d-%d-%d",ue,M,R);for(var ne,_e=ue,ze=M,Ve=R;!ne&&_e>0;)_e--,ze=Math.floor(ze/2),Ve=Math.floor(Ve/2),ne=this.tiles[Kt(_e,ze,Ve)];return ne&&ne.source?(re>1&&console.log("found parent tile z%d-%d-%d",_e,ze,Ve),re>1&&console.time("drilling down"),this.splitTile(ne.source,_e,ze,Ve,ue,M,R),re>1&&console.timeEnd("drilling down"),this.tiles[pe]?Le(this.tiles[pe],Q):null):null};class Jt extends U{constructor(M,R,V,Q){super(M,R,V),this._dataUpdateable=new Map,this.loadGeoJSON=(re,xe)=>{const{promoteId:pe}=re;if(re.request)return c.f(re.request,(ne,_e,ze,Ve)=>{this._dataUpdateable=ar(_e,pe)?jr(_e,pe):void 0,xe(ne,_e,ze,Ve)});if(typeof re.data=="string")try{const ne=JSON.parse(re.data);this._dataUpdateable=ar(ne,pe)?jr(ne,pe):void 0,xe(null,ne)}catch{xe(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`))}else re.dataDiff?this._dataUpdateable?(function(ne,_e,ze){var Ve,We,Ye,St;if(_e.removeAll&&ne.clear(),_e.remove)for(const at of _e.remove)ne.delete(at);if(_e.add)for(const at of _e.add){const Dt=Rt(at,ze);Dt!=null&&ne.set(Dt,at)}if(_e.update)for(const at of _e.update){let Dt=ne.get(at.id);if(Dt==null)continue;const Me=!at.removeAllProperties&&(((Ve=at.removeProperties)===null||Ve===void 0?void 0:Ve.length)>0||((We=at.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0);if((at.newGeometry||at.removeAllProperties||Me)&&(Dt=Object.assign({},Dt),ne.set(at.id,Dt),Me&&(Dt.properties=Object.assign({},Dt.properties))),at.newGeometry&&(Dt.geometry=at.newGeometry),at.removeAllProperties)Dt.properties={};else if(((Ye=at.removeProperties)===null||Ye===void 0?void 0:Ye.length)>0)for(const Oe of at.removeProperties)Object.prototype.hasOwnProperty.call(Dt.properties,Oe)&&delete Dt.properties[Oe];if(((St=at.addOrUpdateProperties)===null||St===void 0?void 0:St.length)>0)for(const{key:Oe,value:nt}of at.addOrUpdateProperties)Dt.properties[Oe]=nt}}(this._dataUpdateable,re.dataDiff,pe),xe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):xe(new Error(`Cannot update existing geojson data in ${re.source}`)):xe(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Q&&(this.loadGeoJSON=Q)}loadGeoJSONTile(M,R){const V=M.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);const Q=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!Q)return R(null,null);const re=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(ne){this._feature=ne,this.extent=c.N,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))}loadGeometry(){if(this._feature.type===1){const ne=[];for(const _e of this._feature.geometry)ne.push([new c.P(_e[0],_e[1])]);return ne}{const ne=[];for(const _e of this._feature.geometry){const ze=[];for(const Ve of _e)ze.push(new c.P(Ve[0],Ve[1]));ne.push(ze)}return ne}}toGeoJSON(ne,_e,ze){return $.call(this,ne,_e,ze)}}(this._features[pe])}}(Q.features);let xe=Ze(re);xe.byteOffset===0&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),R(null,{vectorTile:re,rawData:xe.buffer})}loadData(M,R){var V;(V=this._pendingRequest)===null||V===void 0||V.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Q=!!(M&&M.request&&M.request.collectResourceTiming)&&new c.bu(M.request);this._pendingCallback=R,this._pendingRequest=this.loadGeoJSON(M,(re,xe)=>{if(delete this._pendingCallback,delete this._pendingRequest,re||!xe)return R(re);if(typeof xe!="object")return R(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));{j(xe,!0);try{if(M.filter){const ne=c.bC(M.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map(ze=>`${ze.key}: ${ze.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(ze=>ne.value.evaluate({zoom:0},ze))}}this._geoJSONIndex=M.cluster?new Zt(function({superclusterOptions:ne,clusterProperties:_e}){if(!_e||!ne)return ne;const ze={},Ve={},We={accumulated:null,zoom:0},Ye={properties:null},St=Object.keys(_e);for(const at of St){const[Dt,Me]=_e[at],Oe=c.bC(Me),nt=c.bC(typeof Dt=="string"?[Dt,["accumulated"],["get",at]]:Dt);ze[at]=Oe.value,Ve[at]=nt.value}return ne.map=at=>{Ye.properties=at;const Dt={};for(const Me of St)Dt[Me]=ze[Me].evaluate(We,Ye);return Dt},ne.reduce=(at,Dt)=>{Ye.properties=Dt;for(const Me of St)We.accumulated=at[Me],at[Me]=Ve[Me].evaluate(We,Ye)},ne}(M)).load(xe.features):function(ne,_e){return new Qe(ne,_e)}(xe,M.geojsonVtOptions)}catch(ne){return R(ne)}this.loaded={};const pe={};if(Q){const ne=Q.finish();ne&&(pe.resourceTiming={},pe.resourceTiming[M.source]=JSON.parse(JSON.stringify(ne)))}R(null,pe)}})}reloadTile(M,R){const V=this.loaded;return V&&V[M.uid]?super.reloadTile(M,R):this.loadTile(M,R)}removeSource(M,R){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),R()}getClusterExpansionZoom(M,R){try{R(null,this._geoJSONIndex.getClusterExpansionZoom(M.clusterId))}catch(V){R(V)}}getClusterChildren(M,R){try{R(null,this._geoJSONIndex.getChildren(M.clusterId))}catch(V){R(V)}}getClusterLeaves(M,R){try{R(null,this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset))}catch(V){R(V)}}}class mn{constructor(M){this.self=M,this.actor=new c.C(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:U,geojson:Jt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(R,V)=>{if(this.workerSourceTypes[R])throw new Error(`Worker source with name "${R}" already registered.`);this.workerSourceTypes[R]=V},this.self.registerRTLTextPlugin=R=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=R.applyArabicShaping,c.bD.processBidirectionalText=R.processBidirectionalText,c.bD.processStyledBidirectionalText=R.processStyledBidirectionalText}}setReferrer(M,R){this.referrer=R}setImages(M,R,V){this.availableImages[M]=R;for(const Q in this.workerSources[M]){const re=this.workerSources[M][Q];for(const xe in re)re[xe].availableImages=R}V()}setLayers(M,R,V){this.getLayerIndex(M).replace(R),V()}updateLayers(M,R,V){this.getLayerIndex(M).update(R.layers,R.removedIds),V()}loadTile(M,R,V){this.getWorkerSource(M,R.type,R.source).loadTile(R,V)}loadDEMTile(M,R,V){this.getDEMWorkerSource(M,R.source).loadTile(R,V)}reloadTile(M,R,V){this.getWorkerSource(M,R.type,R.source).reloadTile(R,V)}abortTile(M,R,V){this.getWorkerSource(M,R.type,R.source).abortTile(R,V)}removeTile(M,R,V){this.getWorkerSource(M,R.type,R.source).removeTile(R,V)}removeDEMTile(M,R){this.getDEMWorkerSource(M,R.source).removeTile(R)}removeSource(M,R,V){if(!this.workerSources[M]||!this.workerSources[M][R.type]||!this.workerSources[M][R.type][R.source])return;const Q=this.workerSources[M][R.type][R.source];delete this.workerSources[M][R.type][R.source],Q.removeSource!==void 0?Q.removeSource(R,V):V()}loadWorkerSource(M,R,V){try{this.self.importScripts(R.url),V()}catch(Q){V(Q.toString())}}syncRTLPluginState(M,R,V){try{c.bD.setState(R);const Q=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&Q!=null){this.self.importScripts(Q);const re=c.bD.isParsed();V(re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Q}`),re)}}catch(Q){V(Q.toString())}}getAvailableImages(M){let R=this.availableImages[M];return R||(R=[]),R}getLayerIndex(M){let R=this.layerIndexes[M];return R||(R=this.layerIndexes[M]=new b),R}getWorkerSource(M,R,V){return this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][R]||(this.workerSources[M][R]={}),this.workerSources[M][R][V]||(this.workerSources[M][R][V]=new this.workerSourceTypes[R]({send:(Q,re,xe)=>{this.actor.send(Q,re,xe,M)}},this.getLayerIndex(M),this.getAvailableImages(M))),this.workerSources[M][R][V]}getDEMWorkerSource(M,R){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][R]||(this.demWorkerSources[M][R]=new H),this.demWorkerSources[M][R]}}return c.i()&&(self.worker=new mn(self)),mn}),d(["./shared"],function(c){var b="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,p){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,p,g={}){i.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(i,u,p,g={}){i.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new c.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new c.P(u[_].clientX-p.left-i.clientLeft,u[_].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(y){!U&&P&&(H?W(y):z=y)}};let z,P,U=!1,H=!1;function W(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,P),y.isContextLost())return;T.supported=!0}catch{}y.deleteTexture(i),U=!0}var J,j;typeof document<"u"&&(P=document.createElement("img"),P.onload=function(){z&&W(z),z=null,H=!0},P.onerror=function(){U=!0,z=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,g;y.resetRequestQueue=()=>{i=[],u=0,p=0,g={}},y.addThrottleControl=D=>{const B=p++;return g[B]=D,B},y.removeThrottleControl=D=>{delete g[D],k()},y.getImage=(D,B,F=!0)=>{T.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const X={requestParameters:D,supportImageRefresh:F,callback:B,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),u--),k())}};return i.push(X),k(),X};const _=D=>{const{requestParameters:B,supportImageRefresh:F,callback:X}=D;return c.e(B,{type:"image"}),(F!==!1||c.i()||c.g(B.url)||B.headers&&!Object.keys(B.headers).reduce((ce,le)=>ce&&le==="accept",!0)?c.m:E)(B,(ce,le,he,oe)=>{C(D,X,ce,le,he,oe)})},C=(D,B,F,X,ce,le)=>{F?B(F):X instanceof HTMLImageElement||c.a(X)?B(null,X):X&&((he,oe)=>{typeof createImageBitmap=="function"?c.b(he,oe):c.d(he,oe)})(X,(he,oe)=>{he!=null?B(he):oe!=null&&B(null,oe,{cacheControl:ce,expires:le})}),D.cancelled||(D.completed=!0,u--,k())},k=()=>{const D=(()=>{const B=Object.keys(g);let F=!1;if(B.length>0){for(const X of B)if(F=g[X](),F)break}return F})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=u;B<D&&i.length>0;B++){const F=i.shift();if(F.cancelled){B--;continue}const X=_(F);u++,F.innerRequest=X}},E=(D,B)=>{const F=new Image,X=D.url;let ce=!1;const le=D.credentials;return le&&le==="include"?F.crossOrigin="use-credentials":(le&&le==="same-origin"||!c.s(X))&&(F.crossOrigin="anonymous"),F.fetchPriority="high",F.onload=()=>{B(null,F),F.onerror=F.onload=null},F.onerror=()=>{ce||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),F.onerror=F.onload=null},F.src=X,{cancel:()=>{ce=!0,F.src=""}}}}(J||(J={})),J.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(j||(j={}));class ${constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const g=function(_){const C=_.match(G);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${p}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const G=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(y){var i=new c.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var ie,me=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};ie=new c.A(3),c.A!=Float32Array&&(ie[0]=0,ie[1]=0,ie[2]=0);var Z=function(y){var i=y[0],u=y[1];return i*i+u*u};function de(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:p,url:g}))}}return i}function Te(y,i,u,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const k=c.h.getImageCanvasContext(u[C]),E=i[C];for(const D in E){const{width:B,height:F,x:X,y:ce,sdf:le,pixelRatio:he,stretchX:oe,stretchY:we,content:Be}=E[D];_[C][D]={data:null,pixelRatio:he,sdf:le,stretchX:oe,stretchY:we,content:Be,spriteData:{width:B,height:F,x:X,y:ce,context:k}}}}y(null,_)}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ve{constructor(i,u,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,p){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:k}=this,{gl:E}=k;if(this.useMipmap=!!(u&&u.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:D,y:B}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texSubImage2D(E.TEXTURE_2D,0,D,B,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,D,B,g,_,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(i,u,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function De(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class ke extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const g of i){let _=this.getImage(g);_||(this.fire(new c.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?p[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new c.I(g,p);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ve(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:p}=c.p(i),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],k=C.x+1,E=C.y+1,D=this.getImage(_).data,B=D.width,F=D.height;c.R.copy(D,g,{x:0,y:0},{x:k,y:E},{width:B,height:F}),c.R.copy(D,g,{x:0,y:F-1},{x:k,y:E-1},{width:B,height:1}),c.R.copy(D,g,{x:0,y:0},{x:k,y:E+F},{width:B,height:1}),c.R.copy(D,g,{x:B-1,y:0},{x:k-1,y:E},{width:1,height:F}),c.R.copy(D,g,{x:0,y:0},{x:k+B,y:E},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||c.w(`Image with ID: "${u}" was not found`),De(p)&&this.updateImage(u,p)}}}const Ee=1e20;function He(y,i,u,p,g,_,C,k,E){for(let D=i;D<i+p;D++)Fe(y,u*_+D,_,g,C,k,E);for(let D=u;D<u+g;D++)Fe(y,D*_+i,1,p,C,k,E)}function Fe(y,i,u,p,g,_,C){_[0]=0,C[0]=-Ee,C[1]=Ee,g[0]=y[i];for(let k=1,E=0,D=0;k<p;k++){g[k]=y[i+k*u];const B=k*k;do{const F=_[E];D=(g[k]-g[F]+B-F*F)/(k-F)/2}while(D<=C[E]&&--E>-1);E++,_[E]=k,C[E]=D,C[E+1]=Ee}for(let k=0,E=0;k<p;k++){for(;C[E+1]<k;)E++;const D=_[E],B=k-D;y[i+k*u]=g[D]+B*B}}class Ae{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const g in i)for(const _ of i[g])p.push({stack:g,id:_});c.o(p,({stack:g,id:_},C)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let E=k.glyphs[_];if(E!==void 0)return void C(null,{stack:g,id:_,glyph:E});if(E=this._tinySDF(k,g,_),E)return k.glyphs[_]=E,void C(null,{stack:g,id:_,glyph:E});const D=Math.floor(_/256);if(256*D>65535)return void C(new Error("glyphs > 65535 not supported"));if(k.ranges[D])return void C(null,{stack:g,id:_,glyph:E});if(!this.url)return void C(new Error("glyphsUrl is not set"));let B=k.requests[D];B||(B=k.requests[D]=[],Ae.loadGlyphRange(g,D,this.url,this.requestManager,(F,X)=>{if(X){for(const ce in X)this._doesCharSupportLocalGlyph(+ce)||(k.glyphs[+ce]=X[+ce]);k.ranges[D]=!0}for(const ce of B)ce(F,X);delete k.requests[D]})),B.push((F,X)=>{F?C(F):X&&C(null,{stack:g,id:_,glyph:X[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:k,id:E,glyph:D}of _)(C[k]||(C[k]={}))[E]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),_=i.tinySDF=new Ae.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const C=_.draw(String.fromCharCode(p));return{id:p,bitmap:new c.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ae.loadGlyphRange=function(y,i,u,p,g){const _=256*i,C=_+255,k=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),j.Glyphs);c.l(k,(E,D)=>{if(E)g(E);else if(D){const B={};for(const F of c.n(D))B[F.id]=F;g(null,B)}})},Ae.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const k=this.size=y+4*i,E=this._createCanvas(k),D=this.ctx=E.getContext("2d",{willReadFrequently:!0});D.font=`${C} ${_} ${y}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),E=Math.min(this.size-this.buffer,C+Math.ceil(p)),D=k+2*this.buffer,B=E+2*this.buffer,F=Math.max(D*B,0),X=new Uint8ClampedArray(F),ce={data:X,width:D,height:B,glyphWidth:k,glyphHeight:E,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(k===0||E===0)return ce;const{ctx:le,buffer:he,gridInner:oe,gridOuter:we}=this;le.clearRect(he,he,k,E),le.fillText(y,he,he+C);const Be=le.getImageData(he,he,k,E);we.fill(Ee,0,F),oe.fill(0,0,F);for(let ge=0;ge<E;ge++)for(let Se=0;Se<k;Se++){const je=Be.data[4*(ge*k+Se)+3]/255;if(je===0)continue;const Ue=(ge+he)*D+Se+he;if(je===1)we[Ue]=0,oe[Ue]=Ee;else{const qe=.5-je;we[Ue]=qe>0?qe*qe:0,oe[Ue]=qe<0?qe*qe:0}}He(we,0,0,D,B,D,this.f,this.v,this.z),He(oe,he,he,k,E,D,this.f,this.v,this.z);for(let ge=0;ge<F;ge++){const Se=Math.sqrt(we[ge])-Math.sqrt(oe[ge]);X[ge]=Math.round(255-255*(Se/this.radius+this.cutoff))}return ce}};class Ge{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,u){return c.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:c.B.number(i.x,u.x,p),y:c.B.number(i.y,u.y,p),z:c.B.number(i.z,u.z,p)}}}let Re;class Ze extends c.E{constructor(i){super(),Re=Re||new c.r({anchor:new c.D(c.v.light.anchor),position:new Ge,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Re),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(c.t,i,u))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class Je{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const g=[];let _=i.length%2==1?-i[i.length-1]*p:0,C=i[0]*p,k=!0;g.push({left:_,right:C,isDash:k,zeroLength:i[0]===0});let E=i[0];for(let D=1;D<i.length;D++){k=!k;const B=i[D];_=E*p,E+=B,C=E*p,g.push({left:_,right:C,isDash:k,zeroLength:B===0})}return g}addRoundDash(i,u,p){const g=u/2;for(let _=-p;_<=p;_++){const C=this.width*(this.nextRow+p+_);let k=0,E=i[k];for(let D=0;D<this.width;D++){D/E.right>1&&(E=i[++k]);const B=Math.abs(D-E.left),F=Math.abs(D-E.right),X=Math.min(B,F);let ce;const le=_/p*(g+1);if(E.isDash){const he=g-Math.abs(le);ce=Math.sqrt(X*X+he*he)}else ce=g-Math.sqrt(X*X+le*le);this.data[C+D]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(i){for(let k=i.length-1;k>=0;--k){const E=i[k],D=i[k+1];E.zeroLength?i.splice(k,1):D&&D.isDash===E.isDash&&(D.left=E.left,i.splice(k,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let k=0;k<this.width;k++){k/C.right>1&&(C=i[++_]);const E=Math.abs(k-C.left),D=Math.abs(k-C.right),B=Math.min(E,D);this.data[g+k]=Math.max(0,Math.min(255,(C.isDash?B:-B)+128))}}addDash(i,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let k=0;k<i.length;k++)_+=i[k];if(_!==0){const k=this.width/_,E=this.getDashRanges(i,this.width,k);u?this.addRoundDash(E,k,p):this.addRegularDash(E)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class dt{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let _=0;_<g.length;_++){const C=new c.C(g[_],u,p);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){c.o(this.actors,(g,_)=>{g.send(i,u,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function vt(y,i,u){const p=function(g,_){if(g)return u(g);if(_){const C=c.F(c.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(k=>k.id)),u(null,C)}};return y.url?c.f(i.transformRequest(y.url,j.Source),p):c.h.frame(()=>p(null,y))}class mt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let g,_;if(i instanceof c.L)g=i,_=i;else{if(!(i instanceof mt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(mt.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new c.L(g.lng,g.lat),this._ne=new c.L(_.lng,_.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=c.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof mt?i:i&&new mt(i)}static fromLngLat(i,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new mt(new c.L(i.lng-g,i.lat-p),new c.L(i.lng+g,i.lat+p))}}class Ct{constructor(i,u,p){this.bounds=mt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(c.G(this.bounds.getWest())*u),g=Math.floor(c.H(this.bounds.getNorth())*u),_=Math.ceil(c.G(this.bounds.getEast())*u),C=Math.ceil(c.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<_&&i.y>=g&&i.y<C}}class zt extends c.E{constructor(i,u,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vt(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new c.j(_)):C&&(c.e(this,C),C.bounds&&(this.tileBounds=new Ct(C.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,j.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,k){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(k&&k.resourceTiming&&(i.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&i.setExpiryData(k),i.loadVectorData(k,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Zt extends c.E{constructor(i,u,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vt(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):u&&(c.e(this,u),u.bounds&&(this.tileBounds=new Ct(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=J.getImage(this.map._requestManager.transformRequest(p,j.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const k=this.map.painter.context,E=k.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new ve(k,_,E.RGBA,{useMipmap:!0}),i.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&E.texParameterf(E.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class kt extends Zt{constructor(i,u,p,g){super(i,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,j.Tile);function _(C,k){C&&(i.state="errored",u(C)),k&&(i.dem=k,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=J.getImage(g,(C,k,E)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(k){this.map._refreshExpiredTiles&&i.setExpiryData(E);const D=c.a(k)&&c.J()?k:yield function(F){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const X=F.width+2,ce=F.height+2;try{return new c.R({width:X,height:ce},yield c.M(F,-1,-1,X,ce))}catch{}}return c.h.getImageData(F,1)})}(k),B={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",B,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+p)%p,k=u.x+1===p?i.wrap+1:i.wrap,E={};return E[new c.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},E[new c.O(i.overscaledZ,k,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,k,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<p&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,k,u.z,C,u.y+1).key]={backfilled:!1}),E}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class $e extends c.E{constructor(i,u,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},g),this}_updateWorkerData(i){const u=c.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),j.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new c.j(p));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&c.e(C,{resourceTiming:_}),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var rt=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ht extends c.E{constructor(i,u,p,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=J.getImage(this.map._requestManager.transformRequest(this.url,j.Image),(k,E)=>{this._request=null,this._loaded=!0,k?this.fire(new c.j(k)):E&&(this.image=E,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ve(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let k=!1;for(const E in this.tiles){const D=this.tiles[E];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,k=!0)}k&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(c.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,k=-1/0,E=-1/0;for(const X of g)_=Math.min(_,X.x),C=Math.min(C,X.y),k=Math.max(k,X.x),E=Math.max(E,X.y);const D=Math.max(k-_,E-C),B=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),F=Math.pow(2,B);return new c.W(B,Math.floor((_+k)/2*F),Math.floor((C+E)/2*F))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,c.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,c.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class At extends ht{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,j.Source).url);c.X(this.urls,(C,k)=>{this._loaded=!0,C?this.fire(new c.j(C)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new ve(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let k=!1;for(const E in this.tiles){const D=this.tiles[E];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,k=!0)}k&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Et extends ht{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,k=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ve(C,this.canvas,k.RGBA,{premultiply:!0});let E=!1;for(const D in this.tiles){const B=this.tiles[D];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,E=!0)}E&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const gr={},Cr=y=>{switch(y){case"geojson":return $e;case"image":return ht;case"raster":return Zt;case"raster-dem":return kt;case"vector":return zt;case"video":return At;case"canvas":return Et}return gr[y]};function lr(y,i){const u=c.Z();return c.$(u,u,[1,1,0]),c.a0(u,u,[.5*y.width,.5*y.height,1]),c.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function yt(y,i,u,p,g,_){const C=function(F,X,ce){if(F)for(const le of F){const he=X[le];if(he&&he.source===ce&&he.type==="fill-extrusion")return!0}else for(const le in X){const he=X[le];if(he.source===ce&&he.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),k=_.maxPitchScaleFactor(),E=y.tilesIn(p,k,C);E.sort(Mr);const D=[];for(const F of E)D.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(i,u,y._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,g,_,k,lr(y.transform,F.tileID))});const B=function(F){const X={},ce={};for(const le of F){const he=le.queryResults,oe=le.wrappedTileID,we=ce[oe]=ce[oe]||{};for(const Be in he){const ge=he[Be],Se=we[Be]=we[Be]||{},je=X[Be]=X[Be]||[];for(const Ue of ge)Se[Ue.featureIndex]||(Se[Ue.featureIndex]=!0,je.push(Ue))}}return X}(D);for(const F in B)B[F].forEach(X=>{const ce=X.feature,le=y.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=le});return B}function Mr(y,i){const u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class er{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const k of g){const E=k.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(E.length!==0){k.layers=E,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(D=>E.filter(B=>B.id===D)[0]));for(const D of E)C[D.id]=k}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4&&_.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ve(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ve(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,g,_,C,k,E,D,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:B,transform:E,params:k,queryPadding:this.queryPadding*D},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const k=c.a6(u&&u.filter),{z:E,x:D,y:B}=this.tileID.canonical,F={z:E,x:D,y:B};for(let X=0;X<C.length;X++){const ce=C.feature(X);if(k.needGeometry){const oe=c.a7(ce,!0);if(!k.filter(new c.a8(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!k.filter(new c.a8(this.tileID.overscaledZ),ce))continue;const le=p.getId(ce,_),he=new c.a9(ce,E,D,B,le);he.tile=F,i.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=c.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",k=p[C],E=i[C];if(!k||!E||Object.keys(E).length===0)continue;_.update(E,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=u&&u.style&&u.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,u){const p={};for(const g of u)p[g]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const g=this.dependencies[p];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Lr{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class Pe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},c.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])p[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),g=c.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),c.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const k of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][k];_[C]=this.state[g][C]}p[g]=p[g]||{},c.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,u)}}class cr extends c.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,k)=>{const E=new(Cr(_.type))(g,_,C,k);if(E.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${E.id}`);return E})(i,u,p,this),this._tiles={},this._cache=new Lr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Pe,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(ir).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,g)=>{const _=p.tileID,C=g.tileID,k=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),E=new c.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||E.y-k.y||E.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(ir).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new c.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);p(i,C),p(C,i)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const k=_.tileID.canonical.y-g.tileID.canonical.y,E=Math.pow(2,g.tileID.canonical.z),D=_.tileID.key;C===0&&k===0||Math.abs(k)>1||(Math.abs(C)>1&&(Math.abs(C+E)===1?C+=E:Math.abs(C-E)===1&&(C-=E)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,k),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>p)continue;let k=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const D=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[D.key],C&&C.hasData()&&(k=D)}let E=k;for(;E.overscaledZ>u;)if(E=E.scaledTo(E.overscaledZ-1),i[E.key]){g[k.key]=k;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const g=i.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new c.O(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(B=>this._source.hasTile(B)))):p=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-cr.maxOverzooming,this._source.minzoom),C=Math.max(g+cr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const F of p)if(F.canonical.z>this._source.minzoom){const X=F.scaledTo(F.canonical.z-1);B[X.key]=X;const ce=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));B[ce.key]=ce}p=p.concat(Object.values(B))}const k=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(p,g);if(Bt(this._source.type)){const B={},F={},X=Object.keys(E),ce=c.h.now();for(const le of X){const he=E[le],oe=this._tiles[le];if(!oe||oe.fadeEndTime!==0&&oe.fadeEndTime<=ce)continue;const we=this.findLoadedParent(he,_);we&&(this._addTile(we.tileID),B[we.tileID.key]=we.tileID),F[le]=he}this._retainLoadedChildren(F,g,C,E);for(const le in B)E[le]||(this._coveredTiles[le]=!0,E[le]=B[le]);if(u){const le={},he={};for(const oe of p)this._tiles[oe.key].hasData()?le[oe.key]=oe:he[oe.key]=oe;for(const oe in he){const we=he[oe].children(this._source.maxzoom);this._tiles[we[0].key]&&this._tiles[we[1].key]&&this._tiles[we[2].key]&&this._tiles[we[3].key]&&(le[we[0].key]=E[we[0].key]=we[0],le[we[1].key]=E[we[1].key]=we[1],le[we[2].key]=E[we[2].key]=we[2],le[we[3].key]=E[we[3].key]=we[3],delete he[oe])}for(const oe in he){const we=this.findLoadedParent(he[oe],this._source.minzoom);if(we){le[we.tileID.key]=E[we.tileID.key]=we.tileID;for(const Be in le)le[Be].isChildOf(we.tileID)&&delete le[Be]}}for(const oe in this._tiles)le[oe]||(this._coveredTiles[oe]=!0)}}for(const B in E)this._tiles[B].clearFadeHold();const D=c.ab(this._tiles,E);for(const B of D){const F=this._tiles[B];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},g={},_=Math.max(u-cr.maxOverzooming,this._source.minzoom),C=Math.max(u+cr.maxUnderzooming,this._source.minzoom),k={};for(const E of i){const D=this._addTile(E);p[E.key]=E,D.hasData()||u<this._source.maxzoom&&(k[E.key]=E)}this._retainLoadedChildren(k,u,C,p);for(const E of i){let D=this._tiles[E.key];if(D.hasData())continue;if(u+1>this._source.maxzoom){const F=E.children(this._source.maxzoom)[0],X=this.getTile(F);if(X&&X.hasData()){p[F.key]=F;continue}}else{const F=E.children(this._source.maxzoom);if(p[F[0].key]&&p[F[1].key]&&p[F[2].key]&&p[F[3].key])continue}let B=D.wasRequested();for(let F=E.overscaledZ-1;F>=_;--F){const X=E.scaledTo(F);if(g[X.key])break;if(g[X.key]=!0,D=this.getTile(X),!D&&B&&(D=this._addTile(X)),D){const ce=D.hasData();if((B||ce)&&(p[X.key]=X),B=D.wasRequested(),ce)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of u)this._loadedParentTiles[_]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new er(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const g=[],_=this.transform;if(!_)return g;const C=p?_.getCameraQueryGeometry(i):i,k=i.map(le=>_.pointCoordinate(le,this.terrain)),E=C.map(le=>_.pointCoordinate(le,this.terrain)),D=this.getIds();let B=1/0,F=1/0,X=-1/0,ce=-1/0;for(const le of E)B=Math.min(B,le.x),F=Math.min(F,le.y),X=Math.max(X,le.x),ce=Math.max(ce,le.y);for(let le=0;le<D.length;le++){const he=this._tiles[D[le]];if(he.holdingForFade())continue;const oe=he.tileID,we=Math.pow(2,_.zoom-he.tileID.overscaledZ),Be=u*he.queryPadding*c.N/he.tileSize/we,ge=[oe.getTilePoint(new c.U(B,F)),oe.getTilePoint(new c.U(X,ce))];if(ge[0].x-Be<c.N&&ge[0].y-Be<c.N&&ge[1].x+Be>=0&&ge[1].y+Be>=0){const Se=k.map(Ue=>oe.getTilePoint(Ue)),je=E.map(Ue=>oe.getTilePoint(Ue));g.push({tile:he,tileID:oe,queryGeometry:Se,cameraQueryGeometry:je,scale:we})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Bt(this._source.type)){const i=c.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const g=this._tiles[i];g&&g.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function ir(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Bt(y){return y==="raster"||y==="image"||y==="video"}cr.maxOverzooming=10,cr.maxUnderzooming=3;const Gt="mapboxgl_preloaded_worker_pool";class kr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<kr.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Gt]}numActive(){return Object.keys(this.active).length}}const Pr=Math.floor(c.h.hardwareConcurrency/2);let sr;function nr(){return sr||(sr=new kr),sr}kr.workerCount=c.ac(globalThis)?Math.max(Math.min(Pr,3),1):1;class rr{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let u=1,p=this._distances[u];const g=i*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const _=u-1,C=this._distances[_],k=p-C,E=k>0?(g-C)/k:0;return this.points[_].mult(1-E).add(this.points[u].mult(E))}}function Dr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class it{constructor(i,u,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,g,_){this._forEachCell(u,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,u,p,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,p,g,_,C){this.circleCells[_].push(C)}_query(i,u,p,g,_,C,k){if(p<0||i>this.width||g<0||u>this.height)return[];const E=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:p,y2:g}];for(let D=0;D<this.boxKeys.length;D++)E.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const B=this.circles[3*D],F=this.circles[3*D+1],X=this.circles[3*D+2];E.push({key:this.circleKeys[D],x1:B-X,y1:F-X,x2:B+X,y2:F+X})}}else this._forEachCell(i,u,p,g,this._queryCell,E,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},k);return E}query(i,u,p,g){return this._query(i,u,p,g,!1,null)}hitTest(i,u,p,g,_,C){return this._query(i,u,p,g,!0,_,C).length>0}hitTestCircle(i,u,p,g,_){const C=i-p,k=i+p,E=u-p,D=u+p;if(k<0||C>this.width||D<0||E>this.height)return!1;const B=[];return this._forEachCell(C,E,k,D,this._queryCellCircle,B,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},_),B.length>0}_queryCell(i,u,p,g,_,C,k,E){const{seenUids:D,hitTest:B,overlapMode:F}=k,X=this.boxCells[_];if(X!==null){const le=this.bboxes;for(const he of X)if(!D.box[he]){D.box[he]=!0;const oe=4*he,we=this.boxKeys[he];if(i<=le[oe+2]&&u<=le[oe+3]&&p>=le[oe+0]&&g>=le[oe+1]&&(!E||E(we))&&(!B||!Dr(F,we.overlapMode))&&(C.push({key:we,x1:le[oe],y1:le[oe+1],x2:le[oe+2],y2:le[oe+3]}),B))return!0}}const ce=this.circleCells[_];if(ce!==null){const le=this.circles;for(const he of ce)if(!D.circle[he]){D.circle[he]=!0;const oe=3*he,we=this.circleKeys[he];if(this._circleAndRectCollide(le[oe],le[oe+1],le[oe+2],i,u,p,g)&&(!E||E(we))&&(!B||!Dr(F,we.overlapMode))){const Be=le[oe],ge=le[oe+1],Se=le[oe+2];if(C.push({key:we,x1:Be-Se,y1:ge-Se,x2:Be+Se,y2:ge+Se}),B)return!0}}}return!1}_queryCellCircle(i,u,p,g,_,C,k,E){const{circle:D,seenUids:B,overlapMode:F}=k,X=this.boxCells[_];if(X!==null){const le=this.bboxes;for(const he of X)if(!B.box[he]){B.box[he]=!0;const oe=4*he,we=this.boxKeys[he];if(this._circleAndRectCollide(D.x,D.y,D.radius,le[oe+0],le[oe+1],le[oe+2],le[oe+3])&&(!E||E(we))&&!Dr(F,we.overlapMode))return C.push(!0),!0}}const ce=this.circleCells[_];if(ce!==null){const le=this.circles;for(const he of ce)if(!B.circle[he]){B.circle[he]=!0;const oe=3*he,we=this.circleKeys[he];if(this._circlesCollide(le[oe],le[oe+1],le[oe+2],D.x,D.y,D.radius)&&(!E||E(we))&&!Dr(F,we.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,p,g,_,C,k,E){const D=this._convertToXCellCoord(i),B=this._convertToYCellCoord(u),F=this._convertToXCellCoord(p),X=this._convertToYCellCoord(g);for(let ce=D;ce<=F;ce++)for(let le=B;le<=X;le++)if(_.call(this,i,u,p,g,this.xCellCount*le+ce,C,k,E))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,g,_,C){const k=g-i,E=_-u,D=p+C;return D*D>k*k+E*E}_circleAndRectCollide(i,u,p,g,_,C,k){const E=(C-g)/2,D=Math.abs(i-(g+E));if(D>E+p)return!1;const B=(k-_)/2,F=Math.abs(u-(_+B));if(F>B+p)return!1;if(D<=E||F<=B)return!0;const X=D-E,ce=F-B;return X*X+ce*ce<=p*p}}function Le(y,i,u,p,g){const _=c.Z();return i?(c.a0(_,_,[1/g,1/g,1]),u||c.ae(_,_,p.angle)):c.a1(_,p.labelPlaneMatrix,y),_}function Ht(y,i,u,p,g){if(i){const _=c.af(y);return c.a0(_,_,[g,g,1]),u||c.ae(_,_,-p.angle),_}return p.glCoordMatrix}function Mt(y,i,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],c.ag(p,p,i)):(p=[y.x,y.y,0,1],Q(p,p,i));const g=p[3];return{point:new c.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function _r(y,i){return .5+y/i*.5}function xr(y,i){const u=y[0]/y[3],p=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function Qe(y,i,u,p,g,_,C,k,E,D){const B=p?y.textSizeData:y.iconSizeData,F=c.ah(B,u.transform.zoom),X=[256/u.width*2+1,256/u.height*2+1],ce=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ce.clear();const le=y.lineVertexArray,he=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,oe=u.transform.width/u.transform.height;let we=!1;for(let Be=0;Be<he.length;Be++){const ge=he.get(Be);if(ge.hidden||ge.writingMode===c.ai.vertical&&!we){V(ge.numGlyphs,ce);continue}let Se;if(we=!1,D?(Se=[ge.anchorX,ge.anchorY,D(ge.anchorX,ge.anchorY),1],c.ag(Se,Se,i)):(Se=[ge.anchorX,ge.anchorY,0,1],Q(Se,Se,i)),!xr(Se,X)){V(ge.numGlyphs,ce);continue}const je=_r(u.transform.cameraToCenterDistance,Se[3]),Ue=c.aj(B,F,ge),qe=C?Ue/je:Ue*je,et=new c.P(ge.anchorX,ge.anchorY),Xe=Mt(et,g,D).point,ot={projections:{},offsets:{}},Lt=ar(ge,qe,!1,k,i,g,_,y.glyphOffsetArray,le,ce,Xe,et,ot,oe,E,D);we=Lt.useVertical,(Lt.notEnoughRoom||we||Lt.needsFlipping&&ar(ge,qe,!0,k,i,g,_,y.glyphOffsetArray,le,ce,Xe,et,ot,oe,E,D).notEnoughRoom)&&V(ge.numGlyphs,ce)}p?y.text.dynamicLayoutVertexBuffer.updateData(ce):y.icon.dynamicLayoutVertexBuffer.updateData(ce)}function Kt(y,i,u,p,g,_,C,k,E,D,B,F,X){const ce=k.glyphStartIndex+k.numGlyphs,le=k.lineStartIndex,he=k.lineStartIndex+k.lineLength,oe=i.getoffsetX(k.glyphStartIndex),we=i.getoffsetX(ce-1),Be=M(y*oe,u,p,g,_,C,k.segment,le,he,E,D,B,F,X);if(!Be)return null;const ge=M(y*we,u,p,g,_,C,k.segment,le,he,E,D,B,F,X);return ge?{first:Be,last:ge}:null}function Rt(y,i,u,p){return y===c.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===c.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function ar(y,i,u,p,g,_,C,k,E,D,B,F,X,ce,le,he){const oe=i/24,we=y.lineOffsetX*oe,Be=y.lineOffsetY*oe;let ge;if(y.numGlyphs>1){const Se=y.glyphStartIndex+y.numGlyphs,je=y.lineStartIndex,Ue=y.lineStartIndex+y.lineLength,qe=Kt(oe,k,we,Be,u,B,F,y,E,_,X,le,he);if(!qe)return{notEnoughRoom:!0};const et=Mt(qe.first.point,C,he).point,Xe=Mt(qe.last.point,C,he).point;if(p&&!u){const ot=Rt(y.writingMode,et,Xe,ce);if(ot)return ot}ge=[qe.first];for(let ot=y.glyphStartIndex+1;ot<Se-1;ot++)ge.push(M(oe*k.getoffsetX(ot),we,Be,u,B,F,y.segment,je,Ue,E,_,X,le,he));ge.push(qe.last)}else{if(p&&!u){const je=Mt(F,g,he).point,Ue=y.lineStartIndex+y.segment+1,qe=new c.P(E.getx(Ue),E.gety(Ue)),et=Mt(qe,g,he),Xe=et.signedDistanceFromCamera>0?et.point:jr(F,qe,je,1,g,he),ot=Rt(y.writingMode,je,Xe,ce);if(ot)return ot}const Se=M(oe*k.getoffsetX(y.glyphStartIndex),we,Be,u,B,F,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,E,_,X,le,he);if(!Se)return{notEnoughRoom:!0};ge=[Se]}for(const Se of ge)c.ak(D,Se.point,Se.angle);return{}}function jr(y,i,u,p,g,_){const C=Mt(y.add(y.sub(i)._unit()),g,_).point,k=u.sub(C);return u.add(k._mult(p/k.mag()))}function Jt(y,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:k,previousVertex:E,direction:D,absOffsetX:B}=i;if(u.projections[y])return u.projections[y];const F=new c.P(p.getx(y),p.gety(y)),X=Mt(F,g,k);if(X.signedDistanceFromCamera>0)return u.projections[y]=X.point,X.point;const ce=y-D;return jr(C===0?_:new c.P(p.getx(ce),p.gety(ce)),F,E,B-C+1,g,k)}function mn(y,i,u){return y._unit()._perp()._mult(i*u)}function ue(y,i,u,p,g,_,C,k){const{projectionCache:E,direction:D}=k;if(E.offsets[y])return E.offsets[y];const B=u.add(i);if(y+D<p||y+D>=g)return E.offsets[y]=B,B;const F=Jt(y+D,k),X=mn(F.sub(u),C,D),ce=u.add(X),le=F.add(X);return E.offsets[y]=c.al(_,B,ce,le)||B,E.offsets[y]}function M(y,i,u,p,g,_,C,k,E,D,B,F,X,ce){const le=p?y-i:y+i;let he=le>0?1:-1,oe=0;p&&(he*=-1,oe=Math.PI),he<0&&(oe+=Math.PI);let we,Be,ge=he>0?k+C:k+C+1,Se=g,je=g,Ue=0,qe=0;const et=Math.abs(le),Xe=[];let ot;for(;Ue+qe<=et;){if(ge+=he,ge<k||ge>=E)return null;Ue+=qe,je=Se,Be=we;const pt={projectionCache:F,lineVertexArray:D,labelPlaneMatrix:B,tileAnchorPoint:_,distanceFromAnchor:Ue,getElevation:ce,previousVertex:je,direction:he,absOffsetX:et};if(Se=Jt(ge,pt),u===0)Xe.push(je),ot=Se.sub(je);else{let Qt;const Ot=Se.sub(je);Qt=Ot.mag()===0?mn(Jt(ge+he,pt).sub(Se),u,he):mn(Ot,u,he),Be||(Be=je.add(Qt)),we=ue(ge,Qt,Se,k,E,Be,u,pt),Xe.push(Be),ot=we.sub(Be)}qe=ot.mag()}const Lt=ot._mult((et-Ue)/qe)._add(Be||je),fr=oe+Math.atan2(Se.y-je.y,Se.x-je.x);return Xe.push(Lt),{point:Lt,angle:X?fr:0,path:Xe}}const R=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function V(y,i){for(let u=0;u<y;u++){const p=i.length;i.resize(p+4),i.float32.set(R,3*p)}}function Q(y,i,u){const p=i[0],g=i[1];return y[0]=u[0]*p+u[4]*g+u[12],y[1]=u[1]*p+u[5]*g+u[13],y[3]=u[3]*p+u[7]*g+u[15],y}const re=100;class xe{constructor(i,u=new it(i.width+200,i.height+200,25),p=new it(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+re,this.screenBottomBoundary=i.height+re,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,g,_,C){const k=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),E=p*k.perspectiveRatio,D=i.x1*E+k.point.x,B=i.y1*E+k.point.y,F=i.x2*E+k.point.x,X=i.y2*E+k.point.y;return!this.isInsideGrid(D,B,F,X)||u!=="always"&&this.grid.hitTest(D,B,F,X,u,_)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,B,F,X],offscreen:this.isOffscreen(D,B,F,X)}}placeCollisionCircles(i,u,p,g,_,C,k,E,D,B,F,X,ce,le){const he=[],oe=new c.P(u.anchorX,u.anchorY),we=Mt(oe,C,le),Be=_r(this.transform.cameraToCenterDistance,we.signedDistanceFromCamera),ge=(B?_/Be:_*Be)/c.ap,Se=Mt(oe,k,le).point,je=Kt(ge,g,u.lineOffsetX*ge,u.lineOffsetY*ge,!1,Se,oe,u,p,k,{projections:{},offsets:{}},!1,le);let Ue=!1,qe=!1,et=!0;if(je){const Xe=.5*X*Be+ce,ot=new c.P(-100,-100),Lt=new c.P(this.screenRightBoundary,this.screenBottomBoundary),fr=new rr,pt=je.first,Qt=je.last;let Ot=[];for(let or=pt.path.length-1;or>=1;or--)Ot.push(pt.path[or]);for(let or=1;or<Qt.path.length;or++)Ot.push(Qt.path[or]);const $r=2.5*Xe;if(E){const or=Ot.map(mr=>Mt(mr,E,le));Ot=or.some(mr=>mr.signedDistanceFromCamera<=0)?[]:or.map(mr=>mr.point)}let pr=[];if(Ot.length>0){const or=Ot[0].clone(),mr=Ot[0].clone();for(let gn=1;gn<Ot.length;gn++)or.x=Math.min(or.x,Ot[gn].x),or.y=Math.min(or.y,Ot[gn].y),mr.x=Math.max(mr.x,Ot[gn].x),mr.y=Math.max(mr.y,Ot[gn].y);pr=or.x>=ot.x&&mr.x<=Lt.x&&or.y>=ot.y&&mr.y<=Lt.y?[Ot]:mr.x<ot.x||or.x>Lt.x||mr.y<ot.y||or.y>Lt.y?[]:c.am([Ot],ot.x,ot.y,Lt.x,Lt.y)}for(const or of pr){fr.reset(or,.25*Xe);let mr=0;mr=fr.length<=.5*Xe?1:Math.ceil(fr.paddedLength/$r)+1;for(let gn=0;gn<mr;gn++){const Wr=gn/Math.max(mr-1,1),ei=fr.lerp(Wr),On=ei.x+re,Sn=ei.y+re;he.push(On,Sn,Xe,0);const Ki=On-Xe,Jr=Sn-Xe,Uo=On+Xe,Ho=Sn+Xe;if(et=et&&this.isOffscreen(Ki,Jr,Uo,Ho),qe=qe||this.isInsideGrid(Ki,Jr,Uo,Ho),i!=="always"&&this.grid.hitTestCircle(On,Sn,Xe,i,F)&&(Ue=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ue}}}}return{circles:!D&&Ue||!qe||Be<this.perspectiveRatioCutoff?[]:he,offscreen:et,collisionDetected:Ue}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,_=-1/0,C=-1/0;for(const B of i){const F=new c.P(B.x+re,B.y+re);p=Math.min(p,F.x),g=Math.min(g,F.y),_=Math.max(_,F.x),C=Math.max(C,F.y),u.push(F)}const k=this.grid.query(p,g,_,C).concat(this.ignoredGrid.query(p,g,_,C)),E={},D={};for(const B of k){const F=B.key;if(E[F.bucketInstanceId]===void 0&&(E[F.bucketInstanceId]={}),E[F.bucketInstanceId][F.featureIndex])continue;const X=[new c.P(B.x1,B.y1),new c.P(B.x2,B.y1),new c.P(B.x2,B.y2),new c.P(B.x1,B.y2)];c.an(u,X)&&(E[F.bucketInstanceId][F.featureIndex]=!0,D[F.bucketInstanceId]===void 0&&(D[F.bucketInstanceId]=[]),D[F.bucketInstanceId].push(F.featureIndex))}return D}insertCollisionBox(i,u,p,g,_,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,g,_,C){const k=p?this.ignoredGrid:this.grid,E={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let D=0;D<i.length;D+=4)k.insertCircle(E,i[D],i[D+1],i[D+2])}projectAndGetPerspectiveRatio(i,u,p,g){let _;return g?(_=[u,p,g(u,p),1],c.ag(_,_,i)):(_=[u,p,0,1],Q(_,_,i)),{point:new c.P((_[0]/_[3]+1)/2*this.transform.width+re,(-_[1]/_[3]+1)/2*this.transform.height+re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,p,g){return p<re||i>=this.screenRightBoundary||g<re||u>this.screenBottomBoundary}isInsideGrid(i,u,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function pe(y,i,u){return i*(c.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class ne{constructor(i,u,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,u,p,g,_){this.text=new ne(i?i.text:null,u,p,_),this.icon=new ne(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ze{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class Ve{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class We{constructor(i,u,p,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Ye{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function St(y,i,u,p,g){const{horizontalAlign:_,verticalAlign:C}=c.au(y);return new c.P(-(_-.5)*i+p[0]*g,-(C-.5)*u+p[1]*g)}function at(y,i,u,p,g,_){const{x1:C,x2:k,y1:E,y2:D,anchorPointX:B,anchorPointY:F}=y,X=new c.P(i,u);return p&&X._rotate(g?_:-_),{x1:C+X.x,y1:E+X.y,x2:k+X.x,y2:D+X.y,anchorPointX:B,anchorPointY:F}}class Dt{constructor(i,u,p,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new xe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ye(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,g){const _=p.getBucket(u),C=p.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const k=p.collisionBoxArray,E=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),B=p.tileSize/c.N,F=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),X=E.get("text-pitch-alignment")==="map",ce=E.get("text-rotation-alignment")==="map",le=pe(p,1,this.transform.zoom),he=Le(F,X,ce,this.transform,le);let oe=null;if(X){const Be=Ht(F,X,ce,this.transform,le);oe=c.a1([],this.transform.labelPlaneMatrix,Be)}this.retainedQueryData[_.bucketInstanceId]=new We(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,p.tileID);const we={bucket:_,layout:E,posMatrix:F,textLabelPlaneMatrix:he,labelToScreenMatrix:oe,scale:D,textPixelRatio:B,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:c.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Be of _.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:Se,symbolInstanceEnd:je}=Be;i.push({sortKey:ge,symbolInstanceStart:Se,symbolInstanceEnd:je,parameters:we})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:we})}attemptAnchorPlacement(i,u,p,g,_,C,k,E,D,B,F,X,ce,le,he,oe){const we=c.aq[i.textAnchor],Be=[i.textOffset0,i.textOffset1],ge=St(we,p,g,Be,_),Se=this.collisionIndex.placeCollisionBox(at(u,ge.x,ge.y,C,k,this.transform.angle),F,E,D,B.predicate,oe);if((!he||this.collisionIndex.placeCollisionBox(at(he,ge.x,ge.y,C,k,this.transform.angle),F,E,D,B.predicate,oe).box.length!==0)&&Se.box.length>0){let je;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(je=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Be,width:p,height:g,anchor:we,textBoxScale:_,prevAnchor:je},this.markUsedJustification(ce,we,X,le),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,le,X),this.placedOrientations[X.crossTileID]=le),{shift:ge,placedGlyphBoxes:Se}}}placeLayerBucketPart(i,u,p){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:k,labelToScreenMatrix:E,textPixelRatio:D,holdingForFade:B,collisionBoxArray:F,partiallyEvaluatedTextSize:X,collisionGroup:ce}=i.parameters,le=_.get("text-optional"),he=_.get("icon-optional"),oe=c.ar(_,"text-overlap","text-allow-overlap"),we=oe==="always",Be=c.ar(_,"icon-overlap","icon-allow-overlap"),ge=Be==="always",Se=_.get("text-rotation-alignment")==="map",je=_.get("text-pitch-alignment")==="map",Ue=_.get("icon-text-fit")!=="none",qe=_.get("symbol-z-order")==="viewport-y",et=we&&(ge||!g.hasIconData()||he),Xe=ge&&(we||!g.hasTextData()||le);!g.collisionArrays&&F&&g.deserializeCollisionBoxes(F);const ot=this.retainedQueryData[g.bucketInstanceId].tileID,Lt=this.terrain?(pt,Qt)=>this.terrain.getElevation(ot,pt,Qt):null,fr=(pt,Qt)=>{var Ot,$r;if(u[pt.crossTileID])return;if(B)return void(this.placements[pt.crossTileID]=new ze(!1,!1,!1));let pr=!1,or=!1,mr=!0,gn=null,Wr={box:null,offscreen:null},ei={box:null,offscreen:null},On=null,Sn=null,Ki=null,Jr=0,Uo=0,Ho=0;Qt.textFeatureIndex?Jr=Qt.textFeatureIndex:pt.useRuntimeCollisionCircles&&(Jr=pt.featureIndex),Qt.verticalTextFeatureIndex&&(Uo=Qt.verticalTextFeatureIndex);const Ua=Qt.textBox;if(Ua){const si=yn=>{let Fn=c.ai.horizontal;if(g.allowVerticalPlacement&&!yn&&this.prevPlacement){const Pi=this.prevPlacement.placedOrientations[pt.crossTileID];Pi&&(this.placedOrientations[pt.crossTileID]=Pi,Fn=Pi,this.markUsedOrientation(g,Fn,pt))}return Fn},ti=(yn,Fn)=>{if(g.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Qt.verticalTextBox){for(const Pi of g.writingModes)if(Pi===c.ai.vertical?(Wr=Fn(),ei=Wr):Wr=yn(),Wr&&Wr.box&&Wr.box.length)break}else Wr=yn()},yi=pt.textAnchorOffsetStartIndex,ps=pt.textAnchorOffsetEndIndex;if(ps===yi){const yn=(Fn,Pi)=>{const vn=this.collisionIndex.placeCollisionBox(Fn,oe,D,C,ce.predicate,Lt);return vn&&vn.box&&vn.box.length&&(this.markUsedOrientation(g,Pi,pt),this.placedOrientations[pt.crossTileID]=Pi),vn};ti(()=>yn(Ua,c.ai.horizontal),()=>{const Fn=Qt.verticalTextBox;return g.allowVerticalPlacement&&pt.numVerticalGlyphVertices>0&&Fn?yn(Fn,c.ai.vertical):{box:null,offscreen:null}}),si(Wr&&Wr.box&&Wr.box.length)}else{let yn=c.aq[($r=(Ot=this.prevPlacement)===null||Ot===void 0?void 0:Ot.variableOffsets[pt.crossTileID])===null||$r===void 0?void 0:$r.anchor];const Fn=(vn,fs,Kc)=>{const Wf=vn.x2-vn.x1,Gf=vn.y2-vn.y1,kv=pt.textBoxScale,eh=Ue&&Be==="never"?fs:null;let Wo={box:[],offscreen:!1},ms=oe==="never"?1:2,Go="never";yn&&ms++;for(let po=0;po<ms;po++){for(let qo=yi;qo<ps;qo++){const th=g.textAnchorOffsets.get(qo);if(yn&&th.textAnchor!==yn)continue;const xa=this.attemptAnchorPlacement(th,vn,Wf,Gf,kv,Se,je,D,C,ce,Go,pt,g,Kc,eh,Lt);if(xa&&(Wo=xa.placedGlyphBoxes,Wo&&Wo.box&&Wo.box.length))return pr=!0,gn=xa.shift,Wo}yn?yn=null:Go=oe}return Wo};ti(()=>Fn(Ua,Qt.iconBox,c.ai.horizontal),()=>{const vn=Qt.verticalTextBox;return g.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&pt.numVerticalGlyphVertices>0&&vn?Fn(vn,Qt.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),Wr&&(pr=Wr.box,mr=Wr.offscreen);const Pi=si(Wr&&Wr.box);if(!pr&&this.prevPlacement){const vn=this.prevPlacement.variableOffsets[pt.crossTileID];vn&&(this.variableOffsets[pt.crossTileID]=vn,this.markUsedJustification(g,vn.anchor,pt,Pi))}}}if(On=Wr,pr=On&&On.box&&On.box.length>0,mr=On&&On.offscreen,pt.useRuntimeCollisionCircles){const si=g.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex),ti=c.aj(g.textSizeData,X,si),yi=_.get("text-padding");Sn=this.collisionIndex.placeCollisionCircles(oe,si,g.lineVertexArray,g.glyphOffsetArray,ti,C,k,E,p,je,ce.predicate,pt.collisionCircleDiameter,yi,Lt),Sn.circles.length&&Sn.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),pr=we||Sn.circles.length>0&&!Sn.collisionDetected,mr=mr&&Sn.offscreen}if(Qt.iconFeatureIndex&&(Ho=Qt.iconFeatureIndex),Qt.iconBox){const si=ti=>{const yi=Ue&&gn?at(ti,gn.x,gn.y,Se,je,this.transform.angle):ti;return this.collisionIndex.placeCollisionBox(yi,Be,D,C,ce.predicate,Lt)};ei&&ei.box&&ei.box.length&&Qt.verticalIconBox?(Ki=si(Qt.verticalIconBox),or=Ki.box.length>0):(Ki=si(Qt.iconBox),or=Ki.box.length>0),mr=mr&&Ki.offscreen}const hs=le||pt.numHorizontalGlyphVertices===0&&pt.numVerticalGlyphVertices===0,Gs=he||pt.numIconVertices===0;if(hs||Gs?Gs?hs||(or=or&&pr):pr=or&&pr:or=pr=or&&pr,pr&&On&&On.box&&this.collisionIndex.insertCollisionBox(On.box,oe,_.get("text-ignore-placement"),g.bucketInstanceId,ei&&ei.box&&Uo?Uo:Jr,ce.ID),or&&Ki&&this.collisionIndex.insertCollisionBox(Ki.box,Be,_.get("icon-ignore-placement"),g.bucketInstanceId,Ho,ce.ID),Sn&&(pr&&this.collisionIndex.insertCollisionCircles(Sn.circles,oe,_.get("text-ignore-placement"),g.bucketInstanceId,Jr,ce.ID),p)){const si=g.bucketInstanceId;let ti=this.collisionCircleArrays[si];ti===void 0&&(ti=this.collisionCircleArrays[si]=new Ve);for(let yi=0;yi<Sn.circles.length;yi+=4)ti.circles.push(Sn.circles[yi+0]),ti.circles.push(Sn.circles[yi+1]),ti.circles.push(Sn.circles[yi+2]),ti.circles.push(Sn.collisionDetected?1:0)}if(pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[pt.crossTileID]=new ze(pr||et,or||Xe,mr||g.justReloaded),u[pt.crossTileID]=!0};if(qe){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const pt=g.getSortedSymbolIndexes(this.transform.angle);for(let Qt=pt.length-1;Qt>=0;--Qt){const Ot=pt[Qt];fr(g.symbolInstances.get(Ot),g.collisionArrays[Ot])}}else for(let pt=i.symbolInstanceStart;pt<i.symbolInstanceEnd;pt++)fr(g.symbolInstances.get(pt),g.collisionArrays[pt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const pt=this.collisionCircleArrays[g.bucketInstanceId];c.as(pt.invProjMatrix,C),pt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,p,g){let _;_=g===c.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.at(u)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of C)k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=_>=0&&k!==_?0:p.crossTileID)}markUsedOrientation(i,u,p){const g=u===c.ai.horizontal||u===c.ai.horizontalOnly?u:0,_=u===c.ai.vertical?u:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of C)i.text.placedSymbolArray.get(k).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const E in this.placements){const D=this.placements[E],B=_[E];B?(this.opacities[E]=new _e(B,g,D.text,D.icon),p=p||D.text!==B.text.placed||D.icon!==B.icon.placed):(this.opacities[E]=new _e(null,g,D.text,D.icon,D.skipFade),p=p||D.text||D.icon)}for(const E in _){const D=_[E];if(!this.opacities[E]){const B=new _e(D,g,!1,!1);B.isHidden()||(this.opacities[E]=B,p=p||D.text.placed||D.icon.placed)}}for(const E in C)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=C[E]);for(const E in k)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=k[E]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,g.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new _e(null,0,!1,!1,!0),k=_.get("text-allow-overlap"),E=_.get("icon-allow-overlap"),D=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=_.get("text-rotation-alignment")==="map",F=_.get("text-pitch-alignment")==="map",X=_.get("icon-text-fit")!=="none",ce=new _e(null,0,k&&(E||!i.hasIconData()||_.get("icon-optional")),E&&(k||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const le=(he,oe,we)=>{for(let Be=0;Be<oe/4;Be++)he.opacityVertexArray.emplaceBack(we);he.hasVisibleVertices=he.hasVisibleVertices||we!==Tt};for(let he=0;he<i.symbolInstances.length;he++){const oe=i.symbolInstances.get(he),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:Be,crossTileID:ge}=oe;let Se=this.opacities[ge];u[ge]?Se=C:Se||(Se=ce,this.opacities[ge]=Se),u[ge]=!0;const je=oe.numIconVertices>0,Ue=this.placedOrientations[oe.crossTileID],qe=Ue===c.ai.vertical,et=Ue===c.ai.horizontal||Ue===c.ai.horizontalOnly;if(we>0||Be>0){const Xe=Xt(Se.text);le(i.text,we,qe?Tt:Xe),le(i.text,Be,et?Tt:Xe);const ot=Se.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(pt=>{pt>=0&&(i.text.placedSymbolArray.get(pt).hidden=ot||qe?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=ot||et?1:0);const Lt=this.variableOffsets[oe.crossTileID];Lt&&this.markUsedJustification(i,Lt.anchor,oe,Ue);const fr=this.placedOrientations[oe.crossTileID];fr&&(this.markUsedJustification(i,"left",oe,fr),this.markUsedOrientation(i,fr,oe))}if(je){const Xe=Xt(Se.icon),ot=!(X&&oe.verticalPlacedIconSymbolIndex&&qe);oe.placedIconSymbolIndex>=0&&(le(i.icon,oe.numIconVertices,ot?Xe:Tt),i.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=Se.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(le(i.icon,oe.numVerticalIconVertices,ot?Tt:Xe),i.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=Se.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Xe=i.collisionArrays[he];if(Xe){let ot=new c.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let fr=!0;if(D){const pt=this.variableOffsets[ge];pt?(ot=St(pt.anchor,pt.width,pt.height,pt.textOffset,pt.textBoxScale),B&&ot._rotate(F?this.transform.angle:-this.transform.angle)):fr=!1}Xe.textBox&&Me(i.textCollisionBox.collisionVertexArray,Se.text.placed,!fr||qe,ot.x,ot.y),Xe.verticalTextBox&&Me(i.textCollisionBox.collisionVertexArray,Se.text.placed,!fr||et,ot.x,ot.y)}const Lt=!!(!et&&Xe.verticalIconBox);Xe.iconBox&&Me(i.iconCollisionBox.collisionVertexArray,Se.icon.placed,Lt,X?ot.x:0,X?ot.y:0),Xe.verticalIconBox&&Me(i.iconCollisionBox.collisionVertexArray,Se.icon.placed,!Lt,X?ot.x:0,X?ot.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const he=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=he.invProjMatrix,i.placementViewportMatrix=he.viewportMatrix,i.collisionCircleArray=he.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Me(y,i,u,p,g){y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0)}const Oe=Math.pow(2,25),nt=Math.pow(2,24),ct=Math.pow(2,17),_t=Math.pow(2,16),ur=Math.pow(2,9),tr=Math.pow(2,8),yr=Math.pow(2,1);function Xt(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Oe+i*nt+u*ct+i*_t+u*ur+i*tr+u*yr+i}const Tt=0;class Vr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((k,E)=>k.sortKey-E.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class dr{constructor(i,u,p,g,_,C,k,E){this.placement=new Dt(i,u,C,k,E),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const g=c.h.now(),_=()=>!this._forceFullPlacement&&c.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=k)&&(!C.maxzoom||C.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Vr(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const zn=512/c.N/2;class oo{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),k=C.key,E=g.get(k);E?E.push(C):g.set(k,[C])}for(const[_,C]of g){const k={positions:C.map(E=>({x:Math.floor(E.anchorX*zn),y:Math.floor(E.anchorY*zn)})),crossTileIDs:C.map(E=>E.crossTileID)};if(k.positions.length>128){const E=new c.av(k.positions.length,16,Uint16Array);for(const{x:D,y:B}of k.positions)E.add(D,B);E.finish(),delete k.positions,k.index=E}this._symbolsByKey[_]=k}}getScaledCoordinates(i,u){const{x:p,y:g,z:_}=this.tileID.canonical,{x:C,y:k,z:E}=u.canonical,D=zn/Math.pow(2,E-_),B=(k*c.N+i.anchorY)*D,F=g*c.N*zn;return{x:Math.floor((C*c.N+i.anchorX)*D-p*c.N*zn),y:Math.floor(B-F)}}findMatches(i,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const k=this._symbolsByKey[C.key];if(!k)continue;const E=this.getScaledCoordinates(C,u);if(k.index){const D=k.index.range(E.x-g,E.y-g,E.x+g,E.y+g).sort();for(const B of D){const F=k.crossTileIDs[B];if(!p[F]){p[F]=!0,C.crossTileID=F;break}}}else if(k.positions)for(let D=0;D<k.positions.length;D++){const B=k.positions[D],F=k.crossTileIDs[D];if(Math.abs(B.x-E.x)<=g&&Math.abs(B.y-E.y)<=g&&!p[F]){p[F]=!0,C.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Tr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ao{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const C in g){const k=g[C];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),_[k.tileID.key]=k}this.indexes[p]=_}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const k in C){const E=C[k];E.tileID.isChildOf(i)&&E.findMatches(u.symbolInstances,i,g)}else{const k=C[i.scaledTo(Number(_)).key];k&&k.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new oo(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],u=!0)}return u}}class Ui{constructor(){this.layerIndexes={},this.crossTileIDs=new Tr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new ao);let _=!1;const C={};g.handleWrapJump(p);for(const k of u){const E=k.getBucket(i);E&&i.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,E,this.crossTileIDs)&&(_=!0),C[E.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const ai=(y,i)=>c.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Hi=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),cv=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),so=c.aw();class Qn extends c.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new dt(nr(),this,i._getMapId()),this.imageManager=new ke,this.imageManager.setEventedParent(this),this.glyphManager=new Ae(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new Ui,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const p=this;this._rtlTextPluginCallback=Qn.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(c.aA(_),C&&C.every(k=>k))for(const k in p.sourceCaches){const E=p.sourceCaches[k].getSource().type;E!=="vector"&&E!=="geojson"||p.sourceCaches[k].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const k in this._layers){const E=this._layers[k];E.source===C.id&&this._validateLayer(E)}})}loadURL(i,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,j.Style);this._request=c.f(g,(_,C)=>{this._request=null,_?this.fire(new c.j(_)):C&&this._load(C,u,p)})}loadJSON(i,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(so,{validate:!1})}_load(i,u,p){var g;const _=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!ai(this,c.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Ze(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=c.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,k){const E=de(g),D=E.length,B=C>1?"@2x":"",F={},X={},ce={};for(const{id:le,url:he}of E){const oe=_.transformRequest(_.normalizeSpriteURL(he,B,".json"),j.SpriteJSON),we=`${le}_${oe.url}`;F[we]=c.f(oe,(Se,je)=>{delete F[we],X[le]=je,Te(k,X,ce,Se,D)});const Be=_.transformRequest(_.normalizeSpriteURL(he,B,".png"),j.SpriteImage),ge=`${le}_${Be.url}`;F[ge]=J.getImage(Be,(Se,je)=>{delete F[ge],ce[le]=je,Te(k,X,ce,Se,D)})}return{cancel(){for(const le of Object.values(F))le.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new c.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const k=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(E=>!(E in _)):[];for(const E of k)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in _[C]){const D=C==="default"?E:`${C}:${E}`;this._spritesImagesIds[C].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[C][E],!1):this.imageManager.addImage(D,_[C][E]),u&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const g of i)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const k=this._updatedSources[C];if(k==="reload")this._reloadSource(C);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];p[g]!==_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,ai(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const g=c.aE(p,i).filter(C=>!(C.command in cv));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in Hi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new cr(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new c.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(ai(this,c.aF(i)))return;_=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=c.aD(i),i=c.e(i,{source:g})),this._validate(c.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;_=c.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new c.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!c.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.y.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=c.aD(u),this._updateLayer(g)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,g),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,g=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return c.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",p={},g=[];for(let C=this._order.length-1;C>=0;C--){const k=this._order[C];if(u(k)){p[k]=C;for(const E of i){const D=E[k];if(D)for(const B of D)g.push(B)}}}g.sort((C,k)=>k.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const k=this._order[C];if(u(k))for(let E=g.length-1;E>=0;E--){const D=g[E].feature;if(p[D.layer.id]<C)break;_.push(D),g.pop()}else for(const E of i){const D=E[k];if(D)for(const B of D)_.push(B.feature)}}return _}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const k of u.layers){const E=this._layers[k];if(!E)return this.fire(new c.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[E.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const k in this.sourceCaches)u.layers&&!g[k]||_.push(yt(this.sourceCaches[k],this._layers,C,i,u,p));return this.placement&&_.push(function(k,E,D,B,F,X,ce){const le={},he=X.queryRenderedSymbols(B),oe=[];for(const we of Object.keys(he).map(Number))oe.push(ce[we]);oe.sort(Mr);for(const we of oe){const Be=we.featureIndex.lookupSymbolFeatures(he[we.bucketInstanceId],E,we.bucketIndex,we.sourceLayerIndex,F.filter,F.layers,F.availableImages,k);for(const ge in Be){const Se=le[ge]=le[ge]||[],je=Be[ge];je.sort((Ue,qe)=>{const et=we.featureSortOrder;if(et){const Xe=et.indexOf(Ue.featureIndex);return et.indexOf(qe.featureIndex)-Xe}return qe.featureIndex-Ue.featureIndex});for(const Ue of je)Se.push(Ue)}}for(const we in le)le[we].forEach(Be=>{const ge=Be.feature,Se=D[k[we].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=Se});return le}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(g,_){const C=g.getRenderableIds().map(D=>g.getTileByID(D)),k=[],E={};for(let D=0;D<C.length;D++){const B=C[D],F=B.tileID.canonical.key;E[F]||(E[F]=!0,B.querySourceFeatures(k,_))}return k}(p,u):[]}addSourceType(i,u,p){return Cr(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{gr[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in i)if(!c.aG(i[C],p[C])){g=!0;break}if(!g)return;const _={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,p,g,_={}){return(!_||_.validate!==!1)&&ai(this,i.call(c.y,c.e({key:u,style:this.serialize(),value:p,styleSpec:c.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,g,_=!1){let C=!1,k=!1;const E={};for(const D of this._order){const B=this._layers[D];if(B.type!=="symbol")continue;if(!E[B.source]){const X=this.sourceCaches[B.source];E[B.source]=X.getRenderableIds(!0).map(ce=>X.getTileByID(ce)).sort((ce,le)=>le.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(le.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(B,E[B.source],i.center.lng);C=C||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new dr(i,this.map.terrain,this._order,_,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),k=!0),C&&this.pauseablePlacement.placement.setStale()),k||C)for(const D of this._order){const B=this._layers[D];B.type==="symbol"&&this.placement.updateLayerOpacities(B,E[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return c.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...de(this.stylesheet.sprite),..._];this._validate(c.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=de(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return de(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}Qn.registerForPluginStateChange=c.aK;var wc=c.Q([{name:"a_pos",type:"Int16",components:2}]),Ls="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const nn={prelude:Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Er(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Er("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ls),terrainDepth:Er("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ls),terrainCoords:Er("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ls)};function Er(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,k={};return{fragmentSource:y=y.replace(u,(E,D,B,F,X)=>(k[X]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${B} ${F} ${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(u,(E,D,B,F,X)=>{const ce=F==="float"?"vec2":"vec4",le=X.match(/color/)?"color":ce;return k[X]?D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${ce} a_${X};
varying ${B} ${F} ${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${ce} a_${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = a_${X};
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${B} ${F} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:C}}class is{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,g,_,C,k,E,D){this.context=i;let B=this.boundPaintVertexBuffers.length!==g.length;for(let F=0;!B&&F<g.length;F++)this.boundPaintVertexBuffers[F]!==g[F]&&(B=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==D?this.freshBind(u,p,g,_,C,k,E,D):(i.bindVertexArray.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),E&&E.bind(),D&&D.bind())}freshBind(i,u,p,g,_,C,k,E){const D=i.numAttributes,B=this.context,F=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=E,u.enableAttributes(F,i);for(const X of p)X.enableAttributes(F,i);C&&C.enableAttributes(F,i),k&&k.enableAttributes(F,i),E&&E.enableAttributes(F,i),u.bind(),u.setVertexAttribPointers(F,i,_);for(const X of p)X.bind(),X.setVertexAttribPointers(F,i,_);C&&(C.bind(),C.setVertexAttribPointers(F,i,_)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(F,i,_)),E&&(E.bind(),E.setVertexAttribPointers(F,i,_)),B.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function un(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");i.push(p.pop())}return i}class Sc{constructor(i,u,p,g,_,C){const k=i.gl;this.program=k.createProgram();const E=un(u.staticAttributes),D=p?p.getBinderAttributes():[],B=E.concat(D),F=nn.prelude.staticUniforms?un(nn.prelude.staticUniforms):[],X=u.staticUniforms?un(u.staticUniforms):[],ce=p?p.getBinderUniforms():[],le=F.concat(X).concat(ce),he=[];for(const Ue of le)he.indexOf(Ue)<0&&he.push(Ue);const oe=p?p.defines():[];_&&oe.push("#define OVERDRAW_INSPECTOR;"),C&&oe.push("#define TERRAIN3D;");const we=oe.concat(nn.prelude.fragmentSource,u.fragmentSource).join(`
`),Be=oe.concat(nn.prelude.vertexSource,u.vertexSource).join(`
`),ge=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(ge,we),k.compileShader(ge),!k.getShaderParameter(ge,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(ge)}`);k.attachShader(this.program,ge);const Se=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(Se,Be),k.compileShader(Se),!k.getShaderParameter(Se,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(Se)}`);k.attachShader(this.program,Se),this.attributes={};const je={};this.numAttributes=B.length;for(let Ue=0;Ue<this.numAttributes;Ue++)B[Ue]&&(k.bindAttribLocation(this.program,Ue,B[Ue]),this.attributes[B[Ue]]=Ue);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(Se),k.deleteShader(ge);for(let Ue=0;Ue<he.length;Ue++){const qe=he[Ue];if(qe&&!je[qe]){const et=k.getUniformLocation(this.program,qe);et&&(je[qe]=et)}}this.fixedUniforms=g(i,je),this.terrainUniforms=((Ue,qe)=>({u_depth:new c.aL(Ue,qe.u_depth),u_terrain:new c.aL(Ue,qe.u_terrain),u_terrain_dim:new c.aM(Ue,qe.u_terrain_dim),u_terrain_matrix:new c.aN(Ue,qe.u_terrain_matrix),u_terrain_unpack:new c.aO(Ue,qe.u_terrain_unpack),u_terrain_exaggeration:new c.aM(Ue,qe.u_terrain_exaggeration)}))(i,je),this.binderUniforms=p?p.getUniforms(i,je):[]}draw(i,u,p,g,_,C,k,E,D,B,F,X,ce,le,he,oe,we,Be){const ge=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),E){i.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,E.depthTexture),i.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,E.texture);for(const je in this.terrainUniforms)this.terrainUniforms[je].set(E[je])}for(const je in this.fixedUniforms)this.fixedUniforms[je].set(k[je]);he&&he.setUniforms(i,this.binderUniforms,ce,{zoom:le});let Se=0;switch(u){case ge.LINES:Se=2;break;case ge.TRIANGLES:Se=3;break;case ge.LINE_STRIP:Se=1}for(const je of X.get()){const Ue=je.vaos||(je.vaos={});(Ue[D]||(Ue[D]=new is)).bind(i,this,B,he?he.getPaintVertexBuffers():[],F,je.vertexOffset,oe,we,Be),ge.drawElements(u,je.primitiveLength*Se,ge.UNSIGNED_SHORT,je.primitiveOffset*Se*2)}}}function lo(y,i,u){const p=1/pe(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),k=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,k>>16],u_pixel_coord_lower:[65535&C,65535&k]}}const fd=(y,i,u,p)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],k=function(){var D=new c.A(9);return c.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();g.properties.get("anchor")==="viewport"&&function(D,B){var F=Math.sin(B),X=Math.cos(B);D[0]=X,D[1]=F,D[2]=0,D[3]=-F,D[4]=X,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(k,-i.transform.angle),function(D,B,F){var X=B[0],ce=B[1],le=B[2];D[0]=X*F[0]+ce*F[3]+le*F[6],D[1]=X*F[1]+ce*F[4]+le*F[7],D[2]=X*F[2]+ce*F[5]+le*F[8]}(C,C,k);const E=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+u,u_opacity:p}},Ba=(y,i,u,p,g,_,C)=>c.e(fd(y,i,u,p),lo(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),lf=y=>({u_matrix:y}),md=(y,i,u,p)=>c.e(lf(y),lo(u,i,p)),Cc=(y,i)=>({u_matrix:y,u_world:i}),kc=(y,i,u,p,g)=>c.e(md(y,i,u,p),{u_world:g}),Oa=(y,i,u,p)=>{const g=y.transform;let _,C;if(p.paint.get("circle-pitch-alignment")==="map"){const k=pe(u,1,g.zoom);_=!0,C=[k,k]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},gd=(y,i,u)=>{const p=pe(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:_}},Pl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),cf=y=>({u_matrix:y}),uv=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:pe(i,1,u),u_intensity:p});function yd(y,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new c.U(0,p/u).toLngLat().lat,new c.U(0,(p+1)/u).toLngLat().lat]}const vd=(y,i,u,p)=>{const g=y.transform;return{u_matrix:Tc(y,i,u,p),u_ratio:1/pe(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},uf=(y,i,u,p,g)=>c.e(vd(y,i,u,g),{u_image:0,u_image_height:p}),dv=(y,i,u,p,g)=>{const _=y.transform,C=hf(i,_);return{u_matrix:Tc(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/pe(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},df=(y,i,u,p,g,_)=>{const C=y.lineAtlas,k=hf(i,y.transform),E=u.layout.get("line-cap")==="round",D=C.getDash(p.from,E),B=C.getDash(p.to,E),F=D.width*g.fromScale,X=B.width*g.toScale;return c.e(vd(y,i,u,_),{u_patternscale_a:[k/F,-D.height/2],u_patternscale_b:[k/X,-B.height/2],u_sdfgamma:C.width/(256*Math.min(F,X)*y.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:B.y,u_mix:g.t})};function hf(y,i){return 1/pe(y,1,i.tileZoom)}function Tc(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const pf=(y,i,u,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:ff(g.paint.get("raster-hue-rotate"))};var _,C};function ff(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const _d=(y,i,u,p,g,_,C,k,E,D)=>{const B=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:B.cameraToCenterDistance,u_pitch:B.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:B.width/B.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:k,u_is_text:+E,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},xd=(y,i,u,p,g,_,C,k,E,D,B)=>{const F=g.transform;return c.e(_d(y,i,u,p,g,_,C,k,E,D),{u_gamma_scale:p?Math.cos(F._pitch)*F.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+B})},os=(y,i,u,p,g,_,C,k,E,D)=>c.e(xd(y,i,u,p,g,_,C,k,!0,E,!0),{u_texsize_icon:D,u_texture_icon:1}),Ic=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),co=(y,i,u,p,g,_)=>c.e(function(C,k,E,D){const B=E.imageManager.getPattern(C.from.toString()),F=E.imageManager.getPattern(C.to.toString()),{width:X,height:ce}=E.imageManager.getPixelSize(),le=Math.pow(2,D.tileID.overscaledZ),he=D.tileSize*Math.pow(2,E.transform.tileZoom)/le,oe=he*(D.tileID.canonical.x+D.tileID.wrap*le),we=he*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[X,ce],u_mix:k.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/pe(D,1,E.transform.tileZoom),u_pixel_coord_upper:[oe>>16,we>>16],u_pixel_coord_lower:[65535&oe,65535&we]}}(p,_,u,g),{u_matrix:y,u_opacity:i}),Pc={fillExtrusion:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_opacity:new c.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_height_factor:new c.aM(y,i.u_height_factor),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade),u_opacity:new c.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(y,i.u_scale_with_map),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_matrix:new c.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_overscale_factor:new c.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_inv_matrix:new c.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new c.aR(y,i.u_color),u_matrix:new c.aN(y,i.u_matrix),u_overlay:new c.aL(y,i.u_overlay),u_overlay_scale:new c.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new c.aM(y,i.u_extrude_scale),u_intensity:new c.aM(y,i.u_intensity),u_matrix:new c.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_color_ramp:new c.aL(y,i.u_color_ramp),u_opacity:new c.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_latrange:new c.aQ(y,i.u_latrange),u_light:new c.aQ(y,i.u_light),u_shadow:new c.aR(y,i.u_shadow),u_highlight:new c.aR(y,i.u_highlight),u_accent:new c.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_dimension:new c.aQ(y,i.u_dimension),u_zoom:new c.aM(y,i.u_zoom),u_unpack:new c.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_image:new c.aL(y,i.u_image),u_image_height:new c.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texsize:new c.aQ(y,i.u_texsize),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_image:new c.aL(y,i.u_image),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_patternscale_a:new c.aQ(y,i.u_patternscale_a),u_patternscale_b:new c.aQ(y,i.u_patternscale_b),u_sdfgamma:new c.aM(y,i.u_sdfgamma),u_image:new c.aL(y,i.u_image),u_tex_y_a:new c.aM(y,i.u_tex_y_a),u_tex_y_b:new c.aM(y,i.u_tex_y_b),u_mix:new c.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_tl_parent:new c.aQ(y,i.u_tl_parent),u_scale_parent:new c.aM(y,i.u_scale_parent),u_buffer_scale:new c.aM(y,i.u_buffer_scale),u_fade_t:new c.aM(y,i.u_fade_t),u_opacity:new c.aM(y,i.u_opacity),u_image0:new c.aL(y,i.u_image0),u_image1:new c.aL(y,i.u_image1),u_brightness_low:new c.aM(y,i.u_brightness_low),u_brightness_high:new c.aM(y,i.u_brightness_high),u_saturation_factor:new c.aM(y,i.u_saturation_factor),u_contrast_factor:new c.aM(y,i.u_contrast_factor),u_spin_weights:new c.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texsize_icon:new c.aQ(y,i.u_texsize_icon),u_texture:new c.aL(y,i.u_texture),u_texture_icon:new c.aL(y,i.u_texture_icon),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_color:new c.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_image:new c.aL(y,i.u_image),u_pattern_tl_a:new c.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(y,i.u_pattern_br_b),u_texsize:new c.aQ(y,i.u_texsize),u_mix:new c.aM(y,i.u_mix),u_pattern_size_a:new c.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(y,i.u_pattern_size_b),u_scale_a:new c.aM(y,i.u_scale_a),u_scale_b:new c.aM(y,i.u_scale_b),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_terrain_coords_id:new c.aM(y,i.u_terrain_coords_id),u_ele_delta:new c.aM(y,i.u_ele_delta)})};class Ec{constructor(i,u,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const El={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zc{constructor(i,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[El[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $s=new WeakMap;function Fa(y){var i;if($s.has(y))return $s.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return $s.set(y,u),u}}class br{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ac extends br{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Wi extends br{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Gi extends br{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class bd extends br{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Mc extends br{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Dc extends br{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class wd extends br{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Sd extends br{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Rc extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Cd extends br{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class kd extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Lc extends br{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class mf extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class gf extends br{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Bs extends br{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class hv extends br{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class pv extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class fv extends br{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class mv extends br{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class gv extends br{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class yv extends br{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Td extends br{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class $c extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Id extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Pd extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Os extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class yf extends br{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class vf extends br{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Fa(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Ed extends br{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class as extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class _f extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Na extends br{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Fs extends Na{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class xf extends Na{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class zd extends Na{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class zr{constructor(i,u,p,g,_){this.context=i,this.width=u,this.height=p;const C=i.gl,k=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Fs(i,k),g)this.depthAttachment=_?new zd(i,k):new xf(i,k);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class on{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}on.Replace=[1,0],on.disabled=new on(on.Replace,c.aT.transparent,[!1,!1,!1,!1]),on.unblended=new on(on.Replace,c.aT.transparent,[!0,!0,!0,!0]),on.alphaBlended=new on([1,771],c.aT.transparent,[!0,!0,!0,!0]);class vv{constructor(i){var u,p;if(this.gl=i,this.clearColor=new Ac(this),this.clearDepth=new Wi(this),this.clearStencil=new Gi(this),this.colorMask=new bd(this),this.depthMask=new Mc(this),this.stencilMask=new Dc(this),this.stencilFunc=new wd(this),this.stencilOp=new Sd(this),this.stencilTest=new Rc(this),this.depthRange=new Cd(this),this.depthTest=new kd(this),this.depthFunc=new Lc(this),this.blend=new mf(this),this.blendFunc=new gf(this),this.blendColor=new Bs(this),this.blendEquation=new hv(this),this.cullFace=new pv(this),this.cullFaceSide=new fv(this),this.frontFace=new mv(this),this.program=new gv(this),this.activeTexture=new yv(this),this.viewport=new Td(this),this.bindFramebuffer=new $c(this),this.bindRenderbuffer=new Id(this),this.bindTexture=new Pd(this),this.bindVertexBuffer=new Os(this),this.bindElementBuffer=new yf(this),this.bindVertexArray=new vf(this),this.pixelStoreUnpack=new Ed(this),this.pixelStoreUnpackPremultiplyAlpha=new as(this),this.pixelStoreUnpackFlipY=new _f(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Fa(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Ec(this,i,u)}createVertexBuffer(i,u,p){return new zc(this,i,u,p)}createRenderbuffer(i,u,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,p,g){return new zr(this,i,u,p,g)}clear({color:i,depth:u,stencil:p}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,on.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Fa(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Fa(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class wr{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}wr.ReadOnly=!1,wr.ReadWrite=!0,wr.disabled=new wr(519,wr.ReadOnly,[0,1]);const ss=7680;class an{constructor(i,u,p,g,_,C){this.test=i,this.ref=u,this.mask=p,this.fail=g,this.depthFail=_,this.pass=C}}an.disabled=new an({func:519,mask:0},0,0,ss,ss,ss);class tn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let zl;function bf(y,i,u,p,g,_,C){const k=y.context,E=k.gl,D=y.useProgram("collisionBox"),B=[];let F=0,X=0;for(let ge=0;ge<p.length;ge++){const Se=p[ge],je=i.getTile(Se),Ue=je.getBucket(u);if(!Ue)continue;let qe=Se.posMatrix;g[0]===0&&g[1]===0||(qe=y.translatePosMatrix(Se.posMatrix,je,g,_));const et=C?Ue.textCollisionBox:Ue.iconCollisionBox,Xe=Ue.collisionCircleArray;if(Xe.length>0){const ot=c.Z(),Lt=qe;c.aU(ot,Ue.placementInvProjMatrix,y.transform.glCoordMatrix),c.aU(ot,ot,Ue.placementViewportMatrix),B.push({circleArray:Xe,circleOffset:X,transform:Lt,invTransform:ot,coord:Se}),F+=Xe.length/4,X=F}et&&D.draw(k,E.LINES,wr.disabled,an.disabled,y.colorModeForRenderPass(),tn.disabled,gd(qe,y.transform,je),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Se),u.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,y.transform.zoom,null,null,et.collisionVertexBuffer)}if(!C||!B.length)return;const ce=y.useProgram("collisionCircle"),le=new c.aV;le.resize(4*F),le._trim();let he=0;for(const ge of B)for(let Se=0;Se<ge.circleArray.length/4;Se++){const je=4*Se,Ue=ge.circleArray[je+0],qe=ge.circleArray[je+1],et=ge.circleArray[je+2],Xe=ge.circleArray[je+3];le.emplace(he++,Ue,qe,et,Xe,0),le.emplace(he++,Ue,qe,et,Xe,1),le.emplace(he++,Ue,qe,et,Xe,2),le.emplace(he++,Ue,qe,et,Xe,3)}(!zl||zl.length<2*F)&&(zl=function(ge){const Se=2*ge,je=new c.aX;je.resize(Se),je._trim();for(let Ue=0;Ue<Se;Ue++){const qe=6*Ue;je.uint16[qe+0]=4*Ue+0,je.uint16[qe+1]=4*Ue+1,je.uint16[qe+2]=4*Ue+2,je.uint16[qe+3]=4*Ue+2,je.uint16[qe+4]=4*Ue+3,je.uint16[qe+5]=4*Ue+0}return je}(F));const oe=k.createIndexBuffer(zl,!0),we=k.createVertexBuffer(le,c.aW.members,!0);for(const ge of B){const Se={u_matrix:ge.transform,u_inv_matrix:ge.invTransform,u_camera_to_center_distance:(Be=y.transform).cameraToCenterDistance,u_viewport_size:[Be.width,Be.height]};ce.draw(k,E.TRIANGLES,wr.disabled,an.disabled,y.colorModeForRenderPass(),tn.disabled,Se,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge.coord),u.id,we,oe,c.S.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Be;we.destroy(),oe.destroy()}tn.disabled=new tn(!1,1029,2305),tn.backCCW=new tn(!0,1029,2305);const Ad=c.ao(new Float32Array(16));function Bc(y,i,u,p,g,_){const{horizontalAlign:C,verticalAlign:k}=c.au(y);return new c.P((-(C-.5)*i/g+p[0])*_,(-(k-.5)*u/g+p[1])*_)}function Oc(y,i,u,p,g,_,C,k,E,D,B){const F=y.text.placedSymbolArray,X=y.text.dynamicLayoutVertexArray,ce=y.icon.dynamicLayoutVertexArray,le={};X.clear();for(let he=0;he<F.length;he++){const oe=F.get(he),we=oe.hidden||!oe.crossTileID||y.allowVerticalPlacement&&!oe.placedOrientation?null:p[oe.crossTileID];if(we){const Be=new c.P(oe.anchorX,oe.anchorY),ge=Mt(Be,u?C:_,B),Se=_r(g.cameraToCenterDistance,ge.signedDistanceFromCamera);let je=c.aj(y.textSizeData,E,oe)*Se/c.ap;u&&(je*=y.tilePixelRatio/k);const{width:Ue,height:qe,anchor:et,textOffset:Xe,textBoxScale:ot}=we,Lt=Bc(et,Ue,qe,Xe,ot,je),fr=u?Mt(Be.add(Lt),_,B).point:ge.point.add(i?Lt.rotate(-g.angle):Lt),pt=y.allowVerticalPlacement&&oe.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let Qt=0;Qt<oe.numGlyphs;Qt++)c.ak(X,fr,pt);D&&oe.associatedIconIndex>=0&&(le[oe.associatedIconIndex]={shiftedAnchor:fr,angle:pt})}else V(oe.numGlyphs,X)}if(D){ce.clear();const he=y.icon.placedSymbolArray;for(let oe=0;oe<he.length;oe++){const we=he.get(oe);if(we.hidden)V(we.numGlyphs,ce);else{const Be=le[oe];if(Be)for(let ge=0;ge<we.numGlyphs;ge++)c.ak(ce,Be.shiftedAnchor,Be.angle);else V(we.numGlyphs,ce)}}y.icon.dynamicLayoutVertexBuffer.updateData(ce)}y.text.dynamicLayoutVertexBuffer.updateData(X)}function Md(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Fc(y,i,u,p,g,_,C,k,E,D,B,F){const X=y.context,ce=X.gl,le=y.transform,he=k==="map",oe=E==="map",we=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Be=he&&!oe&&!we,ge=!u.layout.get("symbol-sort-key").isConstant();let Se=!1;const je=y.depthModeForSublayer(0,wr.ReadOnly),Ue=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qe=[];for(const et of p){const Xe=i.getTile(et),ot=Xe.getBucket(u);if(!ot)continue;const Lt=g?ot.text:ot.icon;if(!Lt||!Lt.segments.get().length||!Lt.hasVisibleVertices)continue;const fr=Lt.programConfigurations.get(u.id),pt=g||ot.sdfIcons,Qt=g?ot.textSizeData:ot.iconSizeData,Ot=oe||le.pitch!==0,$r=y.useProgram(Md(pt,g,ot),fr),pr=c.ah(Qt,le.zoom),or=y.style.map.terrain&&y.style.map.terrain.getTerrainData(et);let mr,gn,Wr,ei,On=[0,0],Sn=null;if(g)gn=Xe.glyphAtlasTexture,Wr=ce.LINEAR,mr=Xe.glyphAtlasTexture.size,ot.iconsInText&&(On=Xe.imageAtlasTexture.size,Sn=Xe.imageAtlasTexture,ei=Ot||y.options.rotating||y.options.zooming||Qt.kind==="composite"||Qt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const yn=u.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;gn=Xe.imageAtlasTexture,Wr=pt||y.options.rotating||y.options.zooming||yn||Ot?ce.LINEAR:ce.NEAREST,mr=Xe.imageAtlasTexture.size}const Ki=pe(Xe,1,y.transform.zoom),Jr=Le(et.posMatrix,oe,he,y.transform,Ki),Uo=Ht(et.posMatrix,oe,he,y.transform,Ki),Ho=Ue&&ot.hasTextData(),Ua=u.layout.get("icon-text-fit")!=="none"&&Ho&&ot.hasIconData();if(we){const yn=y.style.map.terrain?(Pi,vn)=>y.style.map.terrain.getElevation(et,Pi,vn):null,Fn=u.layout.get("text-rotation-alignment")==="map";Qe(ot,et.posMatrix,y,g,Jr,Uo,oe,D,Fn,yn)}const hs=y.translatePosMatrix(et.posMatrix,Xe,_,C),Gs=we||g&&Ue||Ua?Ad:Jr,si=y.translatePosMatrix(Uo,Xe,_,C,!0),ti=pt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yi;yi=pt?ot.iconsInText?os(Qt.kind,pr,Be,oe,y,hs,Gs,si,mr,On):xd(Qt.kind,pr,Be,oe,y,hs,Gs,si,g,mr,!0):_d(Qt.kind,pr,Be,oe,y,hs,Gs,si,g,mr);const ps={program:$r,buffers:Lt,uniformValues:yi,atlasTexture:gn,atlasTextureIcon:Sn,atlasInterpolation:Wr,atlasInterpolationIcon:ei,isSDF:pt,hasHalo:ti};if(ge&&ot.canOverlap){Se=!0;const yn=Lt.segments.get();for(const Fn of yn)qe.push({segments:new c.S([Fn]),sortKey:Fn.sortKey,state:ps,terrainData:or})}else qe.push({segments:Lt.segments,sortKey:0,state:ps,terrainData:or})}Se&&qe.sort((et,Xe)=>et.sortKey-Xe.sortKey);for(const et of qe){const Xe=et.state;if(X.activeTexture.set(ce.TEXTURE0),Xe.atlasTexture.bind(Xe.atlasInterpolation,ce.CLAMP_TO_EDGE),Xe.atlasTextureIcon&&(X.activeTexture.set(ce.TEXTURE1),Xe.atlasTextureIcon&&Xe.atlasTextureIcon.bind(Xe.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Xe.isSDF){const ot=Xe.uniformValues;Xe.hasHalo&&(ot.u_is_halo=1,Dd(Xe.buffers,et.segments,u,y,Xe.program,je,B,F,ot,et.terrainData)),ot.u_is_halo=0}Dd(Xe.buffers,et.segments,u,y,Xe.program,je,B,F,Xe.uniformValues,et.terrainData)}}function Dd(y,i,u,p,g,_,C,k,E,D){const B=p.context;g.draw(B,B.gl.TRIANGLES,_,C,k,tn.disabled,E,D,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Al(y,i,u,p,g){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let C=_[u.to.toString()],k=_[u.from.toString()];if(!C&&k&&(C=k),!k&&C&&(k=C),!C||!k){const E=g.getPaintProperty(i);C=_[E],k=_[E]}C&&k&&y.setConstantPatternPositions(C,k)}function Ml(y,i,u,p,g,_,C){const k=y.context.gl,E="fill-pattern",D=u.paint.get(E),B=D&&D.constantOr(1),F=u.getCrossfadeParameters();let X,ce,le,he,oe;C?(ce=B&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=k.LINES):(ce=B?"fillPattern":"fill",X=k.TRIANGLES);const we=D.constantOr(null);for(const Be of p){const ge=i.getTile(Be);if(B&&!ge.patternsLoaded())continue;const Se=ge.getBucket(u);if(!Se)continue;const je=Se.programConfigurations.get(u.id),Ue=y.useProgram(ce,je),qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Be);B&&(y.context.activeTexture.set(k.TEXTURE0),ge.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),je.updatePaintBuffers(F)),Al(je,E,we,ge,u);const et=qe?Be:null,Xe=y.translatePosMatrix(et?et.posMatrix:Be.posMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){he=Se.indexBuffer2,oe=Se.segments2;const ot=[k.drawingBufferWidth,k.drawingBufferHeight];le=ce==="fillOutlinePattern"&&B?kc(Xe,y,F,ge,ot):Cc(Xe,ot)}else he=Se.indexBuffer,oe=Se.segments,le=B?md(Xe,y,F,ge):lf(Xe);Ue.draw(y.context,X,g,y.stencilModeForClipping(Be),_,tn.disabled,le,qe,u.id,Se.layoutVertexBuffer,he,oe,u.paint,y.transform.zoom,je)}}function Dl(y,i,u,p,g,_,C){const k=y.context,E=k.gl,D="fill-extrusion-pattern",B=u.paint.get(D),F=B.constantOr(1),X=u.getCrossfadeParameters(),ce=u.paint.get("fill-extrusion-opacity"),le=B.constantOr(null);for(const he of p){const oe=i.getTile(he),we=oe.getBucket(u);if(!we)continue;const Be=y.style.map.terrain&&y.style.map.terrain.getTerrainData(he),ge=we.programConfigurations.get(u.id),Se=y.useProgram(F?"fillExtrusionPattern":"fillExtrusion",ge);F&&(y.context.activeTexture.set(E.TEXTURE0),oe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ge.updatePaintBuffers(X)),Al(ge,D,le,oe,u);const je=y.translatePosMatrix(he.posMatrix,oe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ue=u.paint.get("fill-extrusion-vertical-gradient"),qe=F?Ba(je,y,Ue,ce,he,X,oe):fd(je,y,Ue,ce);Se.draw(k,k.gl.TRIANGLES,g,_,C,tn.backCCW,qe,Be,u.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,u.paint,y.transform.zoom,ge,y.style.map.terrain&&we.centroidVertexBuffer)}}function _v(y,i,u,p,g,_,C){const k=y.context,E=k.gl,D=u.fbo;if(!D)return;const B=y.useProgram("hillshade"),F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);k.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,D.colorAttachment.get()),B.draw(k,E.TRIANGLES,g,_,C,tn.disabled,((X,ce,le,he)=>{const oe=le.paint.get("hillshade-shadow-color"),we=le.paint.get("hillshade-highlight-color"),Be=le.paint.get("hillshade-accent-color");let ge=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=X.transform.angle);const Se=!X.options.moving;return{u_matrix:he?he.posMatrix:X.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Se),u_image:0,u_latrange:yd(0,ce.tileID),u_light:[le.paint.get("hillshade-exaggeration"),ge],u_shadow:oe,u_highlight:we,u_accent:Be}})(y,u,p,F?i:null),F,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Rd(y,i,u,p,g,_){const C=y.context,k=C.gl,E=i.dem;if(E&&E.data){const D=E.dim,B=E.stride,F=E.getPixels();if(C.activeTexture.set(k.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(B),i.demTexture){const ce=i.demTexture;ce.update(F,{premultiply:!1}),ce.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else i.demTexture=new ve(C,F,k.RGBA,{premultiply:!1}),i.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);C.activeTexture.set(k.TEXTURE0);let X=i.fbo;if(!X){const ce=new ve(C,{width:D,height:D,data:null},k.RGBA);ce.bind(k.LINEAR,k.CLAMP_TO_EDGE),X=i.fbo=C.createFramebuffer(D,D,!0,!1),X.colorAttachment.set(ce.texture)}C.bindFramebuffer.set(X.framebuffer),C.viewport.set([0,0,D,D]),y.useProgram("hillshadePrepare").draw(C,k.TRIANGLES,p,g,_,tn.disabled,((ce,le)=>{const he=le.stride,oe=c.Z();return c.aS(oe,0,c.N,-c.N,0,0,1),c.$(oe,oe,[0,-c.N,0]),{u_matrix:oe,u_image:1,u_dimension:[he,he],u_zoom:ce.overscaledZ,u_unpack:le.getUnpackVector()}})(i.tileID,E),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function xv(y,i,u,p,g,_){const C=p.paint.get("raster-fade-duration");if(!_&&C>0){const k=c.h.now(),E=(k-y.timeAdded)/C,D=i?(k-i.timeAdded)/C:-1,B=u.getSource(),F=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),X=!i||Math.abs(i.tileID.overscaledZ-F)>Math.abs(y.tileID.overscaledZ-F),ce=X&&y.refreshedUponExpiration?1:c.ad(X?E:1-D,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}const wf=new c.aT(1,0,0,1),Nc=new c.aT(0,1,0,1),Ld=new c.aT(0,0,1,1),Sf=new c.aT(1,0,1,1),Cf=new c.aT(0,1,1,1);function Rl(y,i,u,p){Vc(y,0,i+u/2,y.transform.width,u,p)}function jc(y,i,u,p){Vc(y,i-u/2,0,u,y.transform.height,p)}function Vc(y,i,u,p,g,_){const C=y.context,k=C.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),k.disable(k.SCISSOR_TEST)}function kf(y,i,u){const p=y.context,g=p.gl,_=u.posMatrix,C=y.useProgram("debug"),k=wr.disabled,E=an.disabled,D=y.colorModeForRenderPass(),B="$debug",F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const X=i.getTileByID(u.key).latestRawTileData,ce=Math.floor((X&&X.byteLength||0)/1024),le=i.getTile(u).tileSize,he=512/Math.min(le,512)*(u.overscaledZ/y.transform.zoom)*.5;let oe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(oe+=` => ${u.overscaledZ}`),function(we,Be){we.initDebugOverlayCanvas();const ge=we.debugOverlayCanvas,Se=we.context.gl,je=we.debugOverlayCanvas.getContext("2d");je.clearRect(0,0,ge.width,ge.height),je.shadowColor="white",je.shadowBlur=2,je.lineWidth=1.5,je.strokeStyle="white",je.textBaseline="top",je.font="bold 36px Open Sans, sans-serif",je.fillText(Be,5,5),je.strokeText(Be,5,5),we.debugOverlayTexture.update(ge),we.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(y,`${oe} ${ce}kB`),C.draw(p,g.TRIANGLES,k,E,on.alphaBlended,tn.disabled,Pl(_,c.aT.transparent,he),null,B,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(p,g.LINE_STRIP,k,E,D,tn.disabled,Pl(_,c.aT.red),F,B,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function dn(y,i,u){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),C=new wr(g.LEQUAL,wr.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),E=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const D of u){const B=y.renderToTexture.getTexture(D),F=i.getTerrainData(D.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.texture);const X={u_matrix:y.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};k.draw(p,g.TRIANGLES,C,an.disabled,_,tn.backCCW,X,F,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class ls{constructor(i,u){this.context=new vv(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=cr.maxUnderzooming+cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ui}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new c.a_;u.emplaceBack(0,0),u.emplaceBack(c.N,0),u.emplaceBack(0,c.N),u.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(u,wc.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const p=new c.a_;p.emplaceBack(0,0),p.emplaceBack(c.N,0),p.emplaceBack(0,c.N),p.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(p,wc.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const g=new c.V;g.emplaceBack(0,0,0,0),g.emplaceBack(c.N,0,c.N,0),g.emplaceBack(0,c.N,0,c.N),g.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,rt.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const _=new c.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,wc.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const C=new c.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const k=new c.b0;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k);const E=this.context.gl;this.stencilClearMode=new an({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.Z();c.aS(p,0,this.width,this.height,0,0,1),c.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,wr.disabled,this.stencilClearMode,on.disabled,tn.disabled,cf(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(on.disabled),p.setDepthMode(wr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const k=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(p,g.TRIANGLES,wr.disabled,new an({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),on.disabled,tn.disabled,cf(C.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new an({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new an({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((C,k)=>k.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let k=0;k<_;k++)C[k+g]=new an({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,p]}return[{[g]:an.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new on([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?on.unblended:on.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return wr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new wr(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},C={},k={};for(const E in g){const D=g[E];D.used&&D.prepare(this.context),_[E]=D.getVisibleCoordinates(),C[E]=_[E].slice().reverse(),k[E]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<p.length;E++)if(this.style._layers[p[E]].is3D()){this.opaquePassCutoff=E;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const E=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||E.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,B){const F=D.context,X=F.gl,ce=on.unblended,le=new wr(X.LEQUAL,wr.ReadWrite,[0,1]),he=B.getTerrainMesh(),oe=B.sourceCache.getRenderableTiles(),we=D.useProgram("terrainDepth");F.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),F.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),F.clear({color:c.aT.transparent,depth:1});for(const Be of oe){const ge=B.getTerrainData(Be.tileID),Se={u_matrix:D.transform.calculatePosMatrix(Be.tileID.toUnwrapped()),u_ele_delta:B.getMeshFrameDelta(D.transform.zoom)};we.draw(F,X.TRIANGLES,le,an.disabled,ce,tn.backCCW,Se,ge,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}F.bindFramebuffer.set(null),F.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,B){const F=D.context,X=F.gl,ce=on.unblended,le=new wr(X.LEQUAL,wr.ReadWrite,[0,1]),he=B.getTerrainMesh(),oe=B.getCoordsTexture(),we=B.sourceCache.getRenderableTiles(),Be=D.useProgram("terrainCoords");F.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),F.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),F.clear({color:c.aT.transparent,depth:1}),B.coordsIndex=[];for(const ge of we){const Se=B.getTerrainData(ge.tileID);F.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,oe.texture);const je={u_matrix:D.transform.calculatePosMatrix(ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(D.transform.zoom)};Be.draw(F,X.TRIANGLES,le,an.disabled,ce,tn.backCCW,je,Se,"terrain",he.vertexBuffer,he.indexBuffer,he.segments),B.coordsIndex.push(ge.tileID.key)}F.bindFramebuffer.set(null),F.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const E of p){const D=this.style._layers[E];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const B=C[D.source];(D.type==="custom"||B.length)&&this.renderLayer(this,g[D.source],D,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[p[this.currentLayer]],D=g[E.source],B=_[E.source];this._renderTileClippingMasks(E,B),this.renderLayer(this,D,E,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const E=this.style._layers[p[this.currentLayer]],D=g[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const B=(E.type==="symbol"?k:C)[E.source];this._renderTileClippingMasks(E,_[E.source]),this.renderLayer(this,D,E,B)}if(this.options.showTileBoundaries){const E=function(D,B){let F=null;const X=Object.values(D._layers).flatMap(oe=>oe.source&&!oe.isHidden(B)?[D.sourceCaches[oe.source]]:[]),ce=X.filter(oe=>oe.getSource().type==="vector"),le=X.filter(oe=>oe.getSource().type!=="vector"),he=oe=>{(!F||F.getSource().maxzoom<oe.getSource().maxzoom)&&(F=oe)};return ce.forEach(oe=>he(oe)),F||le.forEach(oe=>he(oe)),F}(this.style,this.transform.zoom);E&&function(D,B,F){for(let X=0;X<F.length;X++)kf(D,B,F[X])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const D=E.transform.padding;Rl(E,E.transform.height-(D.top||0),3,wf),Rl(E,D.bottom||0,3,Nc),jc(E,D.left||0,3,Ld),jc(E,E.transform.width-(D.right||0),3,Sf);const B=E.transform.centerPoint;(function(F,X,ce,le){Vc(F,X-1,ce-10,2,20,le),Vc(F,X-10,ce-1,20,2,le)})(E,B.x,E.transform.height-B.y,Cf)}(this),this.context.setDefault()}renderLayer(i,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,C,k,E,D){if(_.renderPass!=="translucent")return;const B=an.disabled,F=_.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ce,le,he,oe,we,Be){const ge=ce.transform,Se=oe==="map",je=we==="map";for(const Ue of X){const qe=he.getTile(Ue),et=qe.getBucket(le);if(!et||!et.text||!et.text.segments.get().length)continue;const Xe=c.ah(et.textSizeData,ge.zoom),ot=pe(qe,1,ce.transform.zoom),Lt=Le(Ue.posMatrix,je,Se,ce.transform,ot),fr=le.layout.get("icon-text-fit")!=="none"&&et.hasIconData();if(Xe){const pt=Math.pow(2,ge.zoom-qe.tileID.overscaledZ);Oc(et,Se,je,Be,ge,Lt,Ue.posMatrix,pt,Xe,fr,ce.style.map.terrain?(Qt,Ot)=>ce.style.map.terrain.getElevation(Ue,Qt,Ot):null)}}}(E,_,k,C,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),D),k.paint.get("icon-opacity").constantOr(1)!==0&&Fc(_,C,k,E,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),B,F),k.paint.get("text-opacity").constantOr(1)!==0&&Fc(_,C,k,E,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),B,F),C.map.showCollisionBoxes&&(bf(_,C,k,E,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),bf(_,C,k,E,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(i,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,k,E){if(_.renderPass!=="translucent")return;const D=k.paint.get("circle-opacity"),B=k.paint.get("circle-stroke-width"),F=k.paint.get("circle-stroke-opacity"),X=!k.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(B.constantOr(1)===0||F.constantOr(1)===0))return;const ce=_.context,le=ce.gl,he=_.depthModeForSublayer(0,wr.ReadOnly),oe=an.disabled,we=_.colorModeForRenderPass(),Be=[];for(let ge=0;ge<E.length;ge++){const Se=E[ge],je=C.getTile(Se),Ue=je.getBucket(k);if(!Ue)continue;const qe=Ue.programConfigurations.get(k.id),et=_.useProgram("circle",qe),Xe=Ue.layoutVertexBuffer,ot=Ue.indexBuffer,Lt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Se),fr={programConfiguration:qe,program:et,layoutVertexBuffer:Xe,indexBuffer:ot,uniformValues:Oa(_,Se,je,k),terrainData:Lt};if(X){const pt=Ue.segments.get();for(const Qt of pt)Be.push({segments:new c.S([Qt]),sortKey:Qt.sortKey,state:fr})}else Be.push({segments:Ue.segments,sortKey:0,state:fr})}X&&Be.sort((ge,Se)=>ge.sortKey-Se.sortKey);for(const ge of Be){const{programConfiguration:Se,program:je,layoutVertexBuffer:Ue,indexBuffer:qe,uniformValues:et,terrainData:Xe}=ge.state;je.draw(ce,le.TRIANGLES,he,oe,we,tn.disabled,et,Xe,k.id,Ue,qe,ge.segments,k.paint,_.transform.zoom,Se)}})(i,u,p,g);break;case"heatmap":(function(_,C,k,E){if(k.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,B=D.gl,F=an.disabled,X=new on([B.ONE,B.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(ce,le,he){const oe=ce.gl;ce.activeTexture.set(oe.TEXTURE1),ce.viewport.set([0,0,le.width/4,le.height/4]);let we=he.heatmapFbo;if(we)oe.bindTexture(oe.TEXTURE_2D,we.colorAttachment.get()),ce.bindFramebuffer.set(we.framebuffer);else{const Be=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,Be),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),we=he.heatmapFbo=ce.createFramebuffer(le.width/4,le.height/4,!1,!1),function(ge,Se,je,Ue){var qe,et;const Xe=ge.gl,ot=(qe=ge.HALF_FLOAT)!==null&&qe!==void 0?qe:Xe.UNSIGNED_BYTE,Lt=(et=ge.RGBA16F)!==null&&et!==void 0?et:Xe.RGBA;Xe.texImage2D(Xe.TEXTURE_2D,0,Lt,Se.width/4,Se.height/4,0,Xe.RGBA,ot,null),Ue.colorAttachment.set(je)}(ce,le,Be,we)}})(D,_,k),D.clear({color:c.aT.transparent});for(let ce=0;ce<E.length;ce++){const le=E[ce];if(C.hasRenderableParent(le))continue;const he=C.getTile(le),oe=he.getBucket(k);if(!oe)continue;const we=oe.programConfigurations.get(k.id),Be=_.useProgram("heatmap",we),{zoom:ge}=_.transform;Be.draw(D,B.TRIANGLES,wr.disabled,F,X,tn.disabled,uv(le.posMatrix,he,ge,k.paint.get("heatmap-intensity")),null,k.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,k.paint,_.transform.zoom,we)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,B){const F=D.context,X=F.gl,ce=B.heatmapFbo;if(!ce)return;F.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ce.colorAttachment.get()),F.activeTexture.set(X.TEXTURE1);let le=B.colorRampTexture;le||(le=B.colorRampTexture=new ve(F,B.colorRamp,X.RGBA)),le.bind(X.LINEAR,X.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(F,X.TRIANGLES,wr.disabled,an.disabled,D.colorModeForRenderPass(),tn.disabled,((he,oe,we,Be)=>{const ge=c.Z();c.aS(ge,0,he.width,he.height,0,0,1);const Se=he.context.gl;return{u_matrix:ge,u_world:[Se.drawingBufferWidth,Se.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:oe.paint.get("heatmap-opacity")}})(D,B),null,B.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,B.paint,D.transform.zoom)}(_,k))})(i,u,p,g);break;case"line":(function(_,C,k,E){if(_.renderPass!=="translucent")return;const D=k.paint.get("line-opacity"),B=k.paint.get("line-width");if(D.constantOr(1)===0||B.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,wr.ReadOnly),X=_.colorModeForRenderPass(),ce=k.paint.get("line-dasharray"),le=k.paint.get("line-pattern"),he=le.constantOr(1),oe=k.paint.get("line-gradient"),we=k.getCrossfadeParameters(),Be=he?"linePattern":ce?"lineSDF":oe?"lineGradient":"line",ge=_.context,Se=ge.gl;let je=!0;for(const Ue of E){const qe=C.getTile(Ue);if(he&&!qe.patternsLoaded())continue;const et=qe.getBucket(k);if(!et)continue;const Xe=et.programConfigurations.get(k.id),ot=_.context.program.get(),Lt=_.useProgram(Be,Xe),fr=je||Lt.program!==ot,pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ue),Qt=le.constantOr(null);if(Qt&&qe.imageAtlas){const pr=qe.imageAtlas,or=pr.patternPositions[Qt.to.toString()],mr=pr.patternPositions[Qt.from.toString()];or&&mr&&Xe.setConstantPatternPositions(or,mr)}const Ot=pt?Ue:null,$r=he?dv(_,qe,k,we,Ot):ce?df(_,qe,k,ce,we,Ot):oe?uf(_,qe,k,et.lineClipsArray.length,Ot):vd(_,qe,k,Ot);if(he)ge.activeTexture.set(Se.TEXTURE0),qe.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Xe.updatePaintBuffers(we);else if(ce&&(fr||_.lineAtlas.dirty))ge.activeTexture.set(Se.TEXTURE0),_.lineAtlas.bind(ge);else if(oe){const pr=et.gradients[k.id];let or=pr.texture;if(k.gradientVersion!==pr.version){let mr=256;if(k.stepInterpolant){const gn=C.getSource().maxzoom,Wr=Ue.canonical.z===gn?Math.ceil(1<<_.transform.maxZoom-Ue.canonical.z):1;mr=c.ad(c.aY(et.maxLineLength/c.N*1024*Wr),256,ge.maxTextureSize)}pr.gradient=c.aZ({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:mr,image:pr.gradient||void 0,clips:et.lineClipsArray}),pr.texture?pr.texture.update(pr.gradient):pr.texture=new ve(ge,pr.gradient,Se.RGBA),pr.version=k.gradientVersion,or=pr.texture}ge.activeTexture.set(Se.TEXTURE0),or.bind(k.stepInterpolant?Se.NEAREST:Se.LINEAR,Se.CLAMP_TO_EDGE)}Lt.draw(ge,Se.TRIANGLES,F,_.stencilModeForClipping(Ue),X,tn.disabled,$r,pt,k.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,k.paint,_.transform.zoom,Xe,et.layoutVertexBuffer2),je=!1}})(i,u,p,g);break;case"fill":(function(_,C,k,E){const D=k.paint.get("fill-color"),B=k.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),X=k.paint.get("fill-pattern"),ce=_.opaquePassEnabledForLayer()&&!X.constantOr(1)&&D.constantOr(c.aT.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ce){const le=_.depthModeForSublayer(1,_.renderPass==="opaque"?wr.ReadWrite:wr.ReadOnly);Ml(_,C,k,E,le,F,!1)}if(_.renderPass==="translucent"&&k.paint.get("fill-antialias")){const le=_.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,wr.ReadOnly);Ml(_,C,k,E,le,F,!0)}})(i,u,p,g);break;case"fill-extrusion":(function(_,C,k,E){const D=k.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const B=new wr(_.context.gl.LEQUAL,wr.ReadWrite,_.depthRangeFor3D);if(D!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Dl(_,C,k,E,B,an.disabled,on.disabled),Dl(_,C,k,E,B,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const F=_.colorModeForRenderPass();Dl(_,C,k,E,B,an.disabled,F)}}})(i,u,p,g);break;case"hillshade":(function(_,C,k,E){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,B=_.depthModeForSublayer(0,wr.ReadOnly),F=_.colorModeForRenderPass(),[X,ce]=_.renderPass==="translucent"?_.stencilConfigForOverlap(E):[{},E];for(const le of ce){const he=C.getTile(le);he.needsHillshadePrepare!==void 0&&he.needsHillshadePrepare&&_.renderPass==="offscreen"?Rd(_,he,k,B,an.disabled,F):_.renderPass==="translucent"&&_v(_,le,he,k,B,X[le.overscaledZ],F)}D.viewport.set([0,0,_.width,_.height])})(i,u,p,g);break;case"raster":(function(_,C,k,E){if(_.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!E.length)return;const D=_.context,B=D.gl,F=C.getSource(),X=_.useProgram("raster"),ce=_.colorModeForRenderPass(),[le,he]=F instanceof ht?[{},E]:_.stencilConfigForOverlap(E),oe=he[he.length-1].overscaledZ,we=!_.options.moving;for(const Be of he){const ge=_.depthModeForSublayer(Be.overscaledZ-oe,k.paint.get("raster-opacity")===1?wr.ReadWrite:wr.ReadOnly,B.LESS),Se=C.getTile(Be);Se.registerFadeDuration(k.paint.get("raster-fade-duration"));const je=C.findLoadedParent(Be,0),Ue=xv(Se,je,C,k,_.transform,_.style.map.terrain);let qe,et;const Xe=k.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;D.activeTexture.set(B.TEXTURE0),Se.texture.bind(Xe,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(B.TEXTURE1),je?(je.texture.bind(Xe,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),qe=Math.pow(2,je.tileID.overscaledZ-Se.tileID.overscaledZ),et=[Se.tileID.canonical.x*qe%1,Se.tileID.canonical.y*qe%1]):Se.texture.bind(Xe,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Be),Lt=ot?Be:null,fr=Lt?Lt.posMatrix:_.transform.calculatePosMatrix(Be.toUnwrapped(),we),pt=pf(fr,et||[0,0],qe||1,Ue,k);F instanceof ht?X.draw(D,B.TRIANGLES,ge,an.disabled,ce,tn.disabled,pt,ot,k.id,F.boundsBuffer,_.quadTriangleIndexBuffer,F.boundsSegments):X.draw(D,B.TRIANGLES,ge,le[Be.overscaledZ],ce,tn.disabled,pt,ot,k.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,p,g);break;case"background":(function(_,C,k,E){const D=k.paint.get("background-color"),B=k.paint.get("background-opacity");if(B===0)return;const F=_.context,X=F.gl,ce=_.transform,le=ce.tileSize,he=k.paint.get("background-pattern");if(_.isPatternMissing(he))return;const oe=!he&&D.a===1&&B===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==oe)return;const we=an.disabled,Be=_.depthModeForSublayer(0,oe==="opaque"?wr.ReadWrite:wr.ReadOnly),ge=_.colorModeForRenderPass(),Se=_.useProgram(he?"backgroundPattern":"background"),je=E||ce.coveringTiles({tileSize:le,terrain:_.style.map.terrain});he&&(F.activeTexture.set(X.TEXTURE0),_.imageManager.bind(_.context));const Ue=k.getCrossfadeParameters();for(const qe of je){const et=E?qe.posMatrix:_.transform.calculatePosMatrix(qe.toUnwrapped()),Xe=he?co(et,B,_,he,{tileID:qe,tileSize:le},Ue):Ic(et,B,D),ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(qe);Se.draw(F,X.TRIANGLES,Be,we,ge,tn.disabled,Xe,ot,k.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(_,C,k){const E=_.context,D=k.implementation;if(_.renderPass==="offscreen"){const B=D.prerender;B&&(_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),B.call(D,E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),E.setStencilMode(an.disabled);const B=D.renderingMode==="3d"?new wr(_.context.gl.LEQUAL,wr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,wr.ReadOnly);E.setDepthMode(B),D.render(E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState(),E.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,g,_){if(!p[0]&&!p[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const D=Math.sin(C),B=Math.cos(C);p=[p[0]*B-p[1]*D,p[0]*D+p[1]*B]}const k=[_?p[0]:pe(u,p[0],this.transform.zoom),_?p[1]:pe(u,p[1],this.transform.zoom),0],E=new Float32Array(16);return c.$(E,i,k),E}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Sc(this.context,nn[i],u,Pc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Ti{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const E=1/(k=c.ag([],k,i))[3]/u*g;return c.b3(k,k,[E,E,1/k[3],E])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const E=function(X,ce){var le=ce[0],he=ce[1],oe=ce[2],we=le*le+he*he+oe*oe;return we>0&&(we=1/Math.sqrt(we)),X[0]=ce[0]*we,X[1]=ce[1]*we,X[2]=ce[2]*we,X}([],function(X,ce,le){var he=ce[0],oe=ce[1],we=ce[2],Be=le[0],ge=le[1],Se=le[2];return X[0]=oe*Se-we*ge,X[1]=we*Be-he*Se,X[2]=he*ge-oe*Be,X}([],me([],_[k[0]],_[k[1]]),me([],_[k[2]],_[k[1]]))),D=-((B=E)[0]*(F=_[k[1]])[0]+B[1]*F[1]+B[2]*F[2]);var B,F;return E.concat(D)});return new Ti(_,C)}}class Ns{constructor(i,u){this.min=i,this.max=u,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=te(this.min),g=te(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Ns(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let k=0;k<u.length;k++)c.b4(_,u[k])>=0&&C++;if(C===0)return 0;C!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const E=i.points[k][g]-this.min[g];_=Math.min(_,E),C=Math.max(C,E)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Ll{constructor(i=0,u=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=g}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=c.ad((this.left+i-this.right)/2,0,i),g=c.ad((this.top+u-this.bottom)/2,0,u);return new c.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ll(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Uc{constructor(i,u,p,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ll,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Uc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-c.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new c.A(4);return c.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var C=g[0],k=g[1],E=g[2],D=g[3],B=Math.sin(_),F=Math.cos(_);p[0]=C*F+E*B,p[1]=k*F+D*B,p[2]=C*-B+E*F,p[3]=k*-B+D*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new c.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new c.P(0,0)),g=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),C=this.pointCoordinate(new c.P(0,this.height)),k=Math.floor(Math.min(p.x,g.x,_.x,C.x)),E=Math.floor(Math.max(p.x,g.x,_.x,C.x)),D=1;for(let B=k-D;B<=E+D;B++)B!==0&&u.push(new c.b6(B,i))}return u}coveringTiles(i){var u,p;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),k=c.U.fromLngLat(this.center),E=Math.pow(2,g),D=[E*C.x,E*C.y,0],B=[E*k.x,E*k.y,0],F=Ti.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let X=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=g);const ce=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,le=ge=>({aabb:new Ns([ge*E,0,0],[(ge+1)*E,E,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),he=[],oe=[],we=g,Be=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)he.push(le(-ge)),he.push(le(ge));for(he.push(le(0));he.length>0;){const ge=he.pop(),Se=ge.x,je=ge.y;let Ue=ge.fullyVisible;if(!Ue){const Lt=ge.aabb.intersects(F);if(Lt===0)continue;Ue=Lt===2}const qe=i.terrain?D:B,et=ge.aabb.distanceX(qe),Xe=ge.aabb.distanceY(qe),ot=Math.max(Math.abs(et),Math.abs(Xe));if(ge.zoom===we||ot>ce+(1<<we-ge.zoom)-2&&ge.zoom>=X){const Lt=we-ge.zoom,fr=D[0]-.5-(Se<<Lt),pt=D[1]-.5-(je<<Lt);oe.push({tileID:new c.O(ge.zoom===we?Be:ge.zoom,ge.wrap,ge.zoom,Se,je),distanceSq:Z([B[0]-.5-Se,B[1]-.5-je]),tileDistanceToCamera:Math.sqrt(fr*fr+pt*pt)})}else for(let Lt=0;Lt<4;Lt++){const fr=(Se<<1)+Lt%2,pt=(je<<1)+(Lt>>1),Qt=ge.zoom+1;let Ot=ge.aabb.quadrant(Lt);if(i.terrain){const $r=new c.O(Qt,ge.wrap,Qt,fr,pt),pr=i.terrain.getMinMaxElevation($r),or=(u=pr.minElevation)!==null&&u!==void 0?u:this.elevation,mr=(p=pr.maxElevation)!==null&&p!==void 0?p:this.elevation;Ot=new Ns([Ot.min[0],Ot.min[1],or],[Ot.max[0],Ot.max[1],mr])}he.push({aabb:Ot,zoom:Qt,x:fr,y:pt,wrap:ge.wrap,fullyVisible:Ue})}}return oe.sort((ge,Se)=>ge.distanceSq-Se.distanceSq).map(ge=>ge.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(u)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),_=c.U.fromLngLat(g.lngLat,g.altitude),C=c.U.fromLngLat(u,p),k=_.x-C.x,E=_.y-C.y,D=_.z-C.z,B=Math.sqrt(k*k+E*E+D*D),F=this.scaleZoom(this.cameraToCenterDistance/B/this.tileSize);this._elevation=p,this._center=u,this.zoom=F}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new c.U(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const X=u.pointCoordinate(i);if(X!=null)return X}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];c.ag(p,p,this.pixelMatrixInverse),c.ag(g,g,this.pixelMatrixInverse);const _=p[3],C=g[3],k=p[1]/_,E=g[1]/C,D=p[2]/_,B=g[2]/C,F=D===B?0:(0-D)/(B-D);return new c.U(c.B.number(p[0]/_,g[0]/C,F)/this.worldSize,c.B.number(k,E,F)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return c.ag(g,g,p),new c.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new mt().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new mt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),k=_.x+Math.pow(2,_.z)*i.wrap,E=c.ao(new Float64Array(16));return c.$(E,E,[k*C,_.y*C,0]),c.a0(E,E,[C/c.N,C/c.N,1]),c.a1(E,u?this.alignedProjMatrix:this.projMatrix,E),g[p]=new Float32Array(E),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,g,_=-90,C=90,k=-180,E=180;const D=this.size,B=this._unmodified;if(this.latRange){const ce=this.latRange;_=c.H(ce[1])*this.worldSize,C=c.H(ce[0])*this.worldSize,i=C-_<D.y?D.y/(C-_):0}if(this.lngRange){const ce=this.lngRange;k=c.b5(c.G(ce[0])*this.worldSize,0,this.worldSize),E=c.b5(c.G(ce[1])*this.worldSize,0,this.worldSize),E<k&&(E+=this.worldSize),u=E-k<D.x?D.x/(E-k):0}const F=this.point,X=Math.max(u||0,i||0);if(X)return this.center=this.unproject(new c.P(u?(E+k)/2:F.x,i?(C+_)/2:F.y)),this.zoom+=this.scaleZoom(X),this._unmodified=B,void(this._constraining=!1);if(this.latRange){const ce=F.y,le=D.y/2;ce-le<_&&(g=_+le),ce+le>C&&(g=C-le)}if(this.lngRange){const ce=(k+E)/2,le=c.b5(F.x,ce-this.worldSize/2,ce+this.worldSize/2),he=D.x/2;le-he<k&&(p=k+he),le+he>E&&(p=E-he)}p===void 0&&g===void 0||(this.center=this.unproject(new c.P(p!==void 0?p:F.x,g!==void 0?g:F.y)).wrap()),this._unmodified=B,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let g=c.ao(new Float64Array(16));c.a0(g,g,[this.width/2,-this.height/2,1]),c.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.ao(new Float64Array(16)),c.a0(g,g,[1,-1,1]),c.$(g,g,[-1,-1,0]),c.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),k=_-C*this._pixelPerMeter/Math.cos(this._pitch),E=C<0?k:_,D=Math.PI/2+this._pitch,B=this._fov*(.5+i.y/this.height),F=Math.sin(B)*E/Math.sin(c.ad(Math.PI-D-B,.01,Math.PI-.01)),X=this.getHorizon(),ce=2*Math.atan(X/this.cameraToCenterDistance)*(.5+i.y/(2*X)),le=Math.sin(ce)*E/Math.sin(c.ad(Math.PI-D-ce,.01,Math.PI-.01)),he=Math.min(F,le),oe=1.01*(Math.cos(Math.PI/2-this._pitch)*he+E),we=this.height/50;g=new Float64Array(16),c.b8(g,this._fov,this.width/this.height,we,oe),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,c.a0(g,g,[1,-1,1]),c.$(g,g,[0,0,-this.cameraToCenterDistance]),c.b9(g,g,this._pitch),c.ae(g,g,this.angle),c.$(g,g,[-u,-p,0]),this.mercatorMatrix=c.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),c.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,g),c.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.as([],g),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Be=this.width%2/2,ge=this.height%2/2,Se=Math.cos(this.angle),je=Math.sin(this.angle),Ue=u-Math.round(u)+Se*Be+je*ge,qe=p-Math.round(p)+Se*ge+je*Be,et=new Float64Array(g);if(c.$(et,et,[Ue>.5?Ue-1:Ue,qe>.5?qe-1:qe,0]),this.alignedProjMatrix=et,g=c.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,g=u.y,_=u.x,C=u.y;for(const k of i)p=Math.min(p,k.x),g=Math.min(g,k.y),_=Math.max(_,k.x),C=Math.max(C,k.y);return[new c.P(p,g),new c.P(_,g),new c.P(_,C),new c.P(p,C),new c.P(p,g)]}}}function cs(y,i){let u,p=!1,g=null,_=null;const C=()=>{g=null,p&&(y.apply(_,u),g=setTimeout(C,i),p=!1)};return(...k)=>(p=!0,_=this,u=k,g||C(),g)}class $l{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=cs(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,k=Math.round(u.lat*_)/_,E=this._map.getBearing(),D=this._map.getPitch();let B="";if(B+=i?`/${C}/${k}/${p}`:`${p}/${k}/${C}`,(E||D)&&(B+="/"+Math.round(10*E)/10),D&&(B+=`/${Math.round(D)}`),this._hashName){const F=this._hashName;let X=!1;const ce=window.location.hash.slice(1).split("&").map(le=>{const he=le.split("=")[0];return he===F?(X=!0,`${he}=${B}`):le}).filter(le=>le);return X||ce.push(`${F}=${B}`),`#${ce.join("&")}`}return`#${B}`}}const js={linearity:.3,easing:c.ba(0,0,.3,1)},Tf=c.e({deceleration:2500,maxSpeed:1400},js),If=c.e({deceleration:20,maxSpeed:1400},js),Pf=c.e({deceleration:1e3,maxSpeed:360},js),Ef=c.e({deceleration:1e3,maxSpeed:90},js);class zf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=c.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Bl(u.pan.mag(),p,c.e({},Tf,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Vo(g,_)}if(u.zoom){const _=Bl(u.zoom,p,If);g.zoom=this._map.transform.zoom+_.amount,Vo(g,_)}if(u.bearing){const _=Bl(u.bearing,p,Pf);g.bearing=this._map.transform.bearing+c.ad(_.amount,-179,179),Vo(g,_)}if(u.pitch){const _=Bl(u.pitch,p,Ef);g.pitch=this._map.transform.pitch+_.amount,Vo(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(g,{noMoveStart:!0})}}function Vo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Bl(y,i,u){const{maxSpeed:p,linearity:g,deceleration:_}=u,C=c.ad(y*g/(i/1e3),-p,p),k=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*k,amount:C*(k/2)}}class qi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,g={}){const _=w.mousePos(u.getCanvasContainer(),p),C=u.unproject(_);super(i,c.e({point:_,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class Ol extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const g=i==="touchend"?p.changedTouches:p.touches,_=w.touchPos(u.getCanvasContainer(),g),C=_.map(E=>u.unproject(E)),k=_.reduce((E,D,B,F)=>E.add(D.div(F.length)),new c.P(0,0));super(i,{points:_,point:k,lngLats:C,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Af extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Mf{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Af(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new qi(i.type,this._map,i))}mouseup(i){this._map.fire(new qi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new qi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new qi(i.type,this._map,i))}mouseover(i){this._map.fire(new qi(i.type,this._map,i))}mouseout(i){this._map.fire(new qi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ol(i.type,this._map,i))}touchmove(i){this._map.fire(new Ol(i.type,this._map,i))}touchend(i){this._map.fire(new Ol(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ol(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Df{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new qi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new qi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ma{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class Rf{constructor(i,u){this._map=i,this._tr=new ma(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,p.x),C=Math.max(g.x,p.x),k=Math.min(g.y,p.y),E=Math.max(g.y,p.y);w.setTransform(this._box,`translate(${_}px,${k}px)`),this._box.style.width=C-_+"px",this._box.style.height=E-k+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,g=u;if(this.reset(),w.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new c.k(i,{originalEvent:u}))}}function uo(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class ga{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new c.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=uo(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const g=uo(p,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Hc{constructor(i){this.singleTap=new ga(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const g=this.singleTap.touchend(i,u,p);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class ya{constructor(i){this._tr=new ma(i),this._zoomIn=new Hc({numTouches:1,numTaps:2}),this._zoomOut=new Hc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const g=this._zoomIn.touchend(i,u,p),_=this._zoomOut.touchend(i,u,p),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class va{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const bv={0:1,2:2};class $d{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const g=bv[p];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class Lf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Wc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Vs=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new $d({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new va({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:p,enable:y,assignEvents:Wc})},_a=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new $d({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new va({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:p,enable:y,assignEvents:Wc})};class It{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const g=uo(p,u),_=new c.P(0,0),C=new c.P(0,0);let k=0;for(const D in g){const B=g[D],F=this._touches[D];F&&(_._add(B),C._add(B.sub(F)),k++,g[D]=B)}if(this._touches=g,k<this._minTouches||!C.mag())return;const E=C.div(k);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(k),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=ja(p,u,g),k=ja(p,u,_);if(!C||!k)return;const E=this._aroundCenter?null:C.add(k).div(2);return this._move([C,k],E,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=ja(p,u,g),k=ja(p,u,_);C&&k||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ja(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function Us(y,i){return Math.log(y/i)/Math.LN2}class $f extends Gc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Us(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Us(this._distance,p),pinchAround:u}}}function bt(y,i){return 180*y.angleWith(i)/Math.PI}class Bd extends Gc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bt(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=bt(i,this._startVector);return Math.abs(p)<u}}function Od(y){return Math.abs(y.y)>Math.abs(y.x)}class wv extends Gc{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Od(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return Od(i)&&Od(u)&&C}}const Fd={panStep:100,bearingStep:15,pitchStep:10};class Bf{constructor(i){this._tr=new ma(i);const u=Fd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:k=>{const E=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Of,zoom:u?Math.round(E.zoom)+u*(i.shiftKey?2:1):E.zoom,bearing:E.bearing+p*this._bearingStep,pitch:E.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:E.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Of(y){return y*(2-y)}const Ff=4.000244140625;class Sv{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new ma(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=c.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Ff==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),p=this._tr;this._around=c.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Ff?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&E!==0&&(E=1/E);const D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*E))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&p&&g){const k=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),E=g(k);_=c.B.number(p,u,E),k<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=c.bb;if(this._prevEase){const p=this._prevEase,g=(c.h.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-C*C);u=c.ba(C,k,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Nd{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jd{constructor(i){this._tr=new ma(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vd{constructor(){this._tap=new Hc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,u,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ud{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ii{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Va{constructor(i,u,p,g){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Fl=y=>y.zoom||y.drag||y.pitch||y.rotate;class Hd extends c.k{}function Nl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Wd{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,k={needsRenderFrame:!1},E={},D={},B=g.touches,F=B?this._getMapTouches(B):void 0,X=F?w.touchPos(this._el,F):w.mousePos(this._el,g);for(const{handlerName:he,handler:oe,allowed:we}of this._handlers){if(!oe.isEnabled())continue;let Be;this._blockedByActive(D,we,he)?oe.reset():oe[_||g.type]&&(Be=oe[_||g.type](g,X,F),this.mergeHandlerResult(k,E,Be,he,C),Be&&Be.needsRenderFrame&&this._triggerRenderFrame()),(Be||oe.isActive())&&(D[he]=oe)}const ce={};for(const he in this._previousActiveHandlers)D[he]||(ce[he]=C);this._previousActiveHandlers=D,(Object.keys(ce).length||Nl(k))&&(this._changes.push([k,E,ce]),this._triggerRenderFrame()),(Object.keys(D).length||Nl(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=k;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zf(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)w.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,p]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Mf(u,i));const g=u.boxZoom=new Rf(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new ya(u),C=new jd(u);u.doubleClickZoom=new Nd(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const k=new Vd;this._add("tapDragZoom",k);const E=u.touchPitch=new wv(u);this._add("touchPitch",E),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const D=Vs(i),B=_a(i);u.dragRotate=new Ii(i,D,B),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const F=(({enable:we,clickTolerance:Be})=>{const ge=new $d({checkCorrectEvent:Se=>w.mouseButton(Se)===0&&!Se.ctrlKey});return new va({clickTolerance:Be,move:(Se,je)=>({around:je,panDelta:je.sub(Se)}),activateOnStart:!0,moveStateManager:ge,enable:we,assignEvents:Wc})})(i),X=new It(i,u);u.dragPan=new Ud(p,F,X),this._add("mousePan",F),this._add("touchPan",X,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ce=new Bd,le=new $f;u.touchZoomRotate=new Va(p,le,ce,k),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const he=u.scrollZoom=new Sv(u,()=>this._triggerRenderFrame());this._add("scrollZoom",he,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const oe=u.keyboard=new Bf(u);this._add("keyboard",oe),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Df(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Fl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const g in i)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,g,_){if(!p)return;c.e(i,p);const C={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=C),p.panDelta!==void 0&&(u.drag=C),p.pitchDelta!==void 0&&(u.pitch=C),p.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},p={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),c.e(u,_),c.e(p,C);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(Nl(i)||C&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:k,zoomDelta:E,bearingDelta:D,pitchDelta:B,around:F,pinchAround:X}=i;X!==void 0&&(F=X),g._stop(!0),F=F||g.transform.centerPoint;const ce=_.pointLocation(k?F.sub(k):F);D&&(_.bearing+=D),B&&(_.pitch+=B),E&&(_.zoom+=E),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(k)):_.setLocationAtPoint(ce,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ce,F),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(ce,F),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const g=Fl(this._eventsInProgress),_=Fl(i),C={};for(const B in i){const{originalEvent:F}=i[B];this._eventsInProgress[B]||(C[`${B}start`]=F),this._eventsInProgress[B]=i[B]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const B in C)this._fireEvent(B,C[B]);_&&this._fireEvent("move",_.originalEvent);for(const B in i){const{originalEvent:F}=i[B];this._fireEvent(B,F)}const k={};let E;for(const B in this._eventsInProgress){const{handlerName:F,originalEvent:X}=this._eventsInProgress[B];this._handlersById[F].isActive()||(delete this._eventsInProgress[B],E=u[F]||X,k[`${B}end`]=E)}for(const B in k)this._fireEvent(B,k[B]);const D=Fl(this._eventsInProgress);if(p&&(g||_)&&!D){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!B||!B.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:E})),F(this._map.getBearing())&&this._map.resetNorth()):(F(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new c.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Hd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Nf extends c.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(c.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(c.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(c.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,c.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=mt.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const je=g.padding;g.padding={top:je,bottom:je,right:je,left:je}}g.padding=c.e(_,g.padding);const C=this.transform,k=C.padding,E=C.project(c.L.convert(i)),D=C.project(c.L.convert(u)),B=E.rotate(-p*Math.PI/180),F=D.rotate(-p*Math.PI/180),X=new c.P(Math.max(B.x,F.x),Math.max(B.y,F.y)),ce=new c.P(Math.min(B.x,F.x),Math.min(B.y,F.y)),le=X.sub(ce),he=(C.width-(k.left+k.right+g.padding.left+g.padding.right))/le.x,oe=(C.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/le.y;if(oe<0||he<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const we=Math.min(C.scaleZoom(C.scale*Math.min(he,oe)),g.maxZoom),Be=c.P.convert(g.offset),ge=new c.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),Se=Be.add(ge).mult(C.scale/C.zoomScale(we));return{center:C.unproject(E.add(D).div(2).sub(Se)),zoom:we,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(u)),p,g),g,_)}_fitInternal(i,u,p){return i?(delete(u=c.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=c.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(C=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),g&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),C&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,g=0){const _=c.U.fromLngLat(i,u),C=c.U.fromLngLat(p,g),k=C.x-_.x,E=C.y-_.y,D=C.z-_.z,B=Math.hypot(k,E,D);if(B===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(k,E),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),ce=180*Math.atan2(k,-E)/Math.PI;let le=180*Math.acos(F/B)/Math.PI;return le=D<0?90-le:90+le,{center:C.toLngLat(),zoom:X,pitch:le,bearing:ce}}easeTo(i,u){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),k=this.getPadding(),E="zoom"in i?+i.zoom:g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,B="pitch"in i?+i.pitch:C,F="padding"in i?i.padding:p.padding,X=c.P.convert(i.offset);let ce=p.centerPoint.add(X);const le=p.pointLocation(ce),he=c.L.convert(i.center||le);this._normalizeCenter(he);const oe=p.project(le),we=p.project(he).sub(oe),Be=p.zoomScale(E-g);let ge,Se;i.around&&(ge=c.L.convert(i.around),Se=p.locationPoint(ge));const je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||E!==g,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||B!==C,this._padding=!p.isPaddingEqual(F),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,je),this.terrain&&this._prepareElevation(he),this._ease(Ue=>{if(this._zooming&&(p.zoom=c.B.number(g,E,Ue)),this._rotating&&(p.bearing=c.B.number(_,D,Ue)),this._pitching&&(p.pitch=c.B.number(C,B,Ue)),this._padding&&(p.interpolatePadding(k,F,Ue),ce=p.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ue),ge)p.setLocationAtPoint(ge,Se);else{const qe=p.zoomScale(p.zoom-g),et=E>g?Math.min(2,Be):Math.max(.5,Be),Xe=Math.pow(et,1-Ue),ot=p.unproject(oe.add(we.mult(Ue*Xe)).mult(qe));p.setLocationAtPoint(p.renderWorldCopies?ot.wrap():ot,ce)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},Ue=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ue)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new c.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:g,pitch:_,bearing:C,elevation:k}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),k!==void 0&&(u.elevation=k),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new c.k("zoomend",i)),g&&this.fire(new c.k("rotateend",i)),_&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,u){if(!i.essential&&c.h.prefersReducedMotion){const Ot=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ot,u)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),k=this.getPadding(),E="zoom"in i?c.ad(+i.zoom,p.minZoom,p.maxZoom):g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,B="pitch"in i?+i.pitch:C,F="padding"in i?i.padding:p.padding,X=p.zoomScale(E-g),ce=c.P.convert(i.offset);let le=p.centerPoint.add(ce);const he=p.pointLocation(le),oe=c.L.convert(i.center||he);this._normalizeCenter(oe);const we=p.project(he),Be=p.project(oe).sub(we);let ge=i.curve;const Se=Math.max(p.width,p.height),je=Se/X,Ue=Be.mag();if("minZoom"in i){const Ot=c.ad(Math.min(i.minZoom,g,E),p.minZoom,p.maxZoom),$r=Se/p.zoomScale(Ot-g);ge=Math.sqrt($r/Ue*2)}const qe=ge*ge;function et(Ot){const $r=(je*je-Se*Se+(Ot?-1:1)*qe*qe*Ue*Ue)/(2*(Ot?je:Se)*qe*Ue);return Math.log(Math.sqrt($r*$r+1)-$r)}function Xe(Ot){return(Math.exp(Ot)-Math.exp(-Ot))/2}function ot(Ot){return(Math.exp(Ot)+Math.exp(-Ot))/2}const Lt=et(!1);let fr=function(Ot){return ot(Lt)/ot(Lt+ge*Ot)},pt=function(Ot){return Se*((ot(Lt)*(Xe($r=Lt+ge*Ot)/ot($r))-Xe(Lt))/qe)/Ue;var $r},Qt=(et(!0)-Lt)/ge;if(Math.abs(Ue)<1e-6||!isFinite(Qt)){if(Math.abs(Se-je)<1e-6)return this.easeTo(i,u);const Ot=je<Se?-1:1;Qt=Math.abs(Math.log(je/Se))/ge,pt=function(){return 0},fr=function($r){return Math.exp(Ot*ge*$r)}}return i.duration="duration"in i?+i.duration:1e3*Qt/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=B!==C,this._padding=!p.isPaddingEqual(F),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(oe),this._ease(Ot=>{const $r=Ot*Qt,pr=1/fr($r);p.zoom=Ot===1?E:g+p.scaleZoom(pr),this._rotating&&(p.bearing=c.B.number(_,D,Ot)),this._pitching&&(p.pitch=c.B.number(C,B,Ot)),this._padding&&(p.interpolatePadding(k,F,Ot),le=p.centerPoint.add(ce)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ot);const or=Ot===1?oe:p.unproject(we.add(Be.mult(pt($r))).mult(pr));p.setLocationAtPoint(p.renderWorldCopies?or.wrap():or,le),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=c.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=c.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Zi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xr{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class qc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Gd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var jf=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Vf extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.aS(g.posMatrix,0,c.N,0,c.N,0,1),this._tiles[g.key]=new er(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),c.aS(_.posMatrix,0,c.N,0,c.N,0,1),u[p]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,k=g.canonical.x-(g.canonical.x>>C<<C),E=g.canonical.y-(g.canonical.y>>C<<C),D=c.N>>C;c.aS(_.posMatrix,0,D,0,D,0,1),c.$(_.posMatrix,_.posMatrix,[-k*D,-E*D,0]),u[p]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,k=i.canonical.x-(i.canonical.x>>C<<C),E=i.canonical.y-(i.canonical.y>>C<<C),D=c.N>>C;c.aS(_.posMatrix,0,c.N,0,c.N,0,1),c.$(_.posMatrix,_.posMatrix,[k*D,E*D,0]),c.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[p]=_}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class Uf{constructor(i,u,p){this.painter=i,this.sourceCache=new Vf(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,g=c.N){var _;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(i),k=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!k)return 0;const E=function(le,he,oe){var we=he[0],Be=he[1];return le[0]=oe[0]*we+oe[4]*Be+oe[12],le[1]=oe[1]*we+oe[5]*Be+oe[13],le}([],[u/g*c.N,p/g*c.N],C.u_terrain_matrix),D=[E[0]*k.dim,E[1]*k.dim],B=Math.floor(D[0]),F=Math.floor(D[1]),X=D[0]-B,ce=D[1]-F;return k.get(B,F)*(1-X)*(1-ce)+k.get(B+1,F)*X*(1-ce)+k.get(B,F+1)*(1-X)*ce+k.get(B+1,F+1)*X*ce}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,g%c.N,_%c.N,c.N)}getElevation(i,u,p,g=c.N){return this.getDEMElevation(i,u,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ve(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ve(g,new c.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ve(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),k=i.canonical.y-(i.canonical.y>>_<<_),E=c.bc(new Float64Array(16),[1/(c.N<<_),1/(c.N<<_),0]);c.$(E,E,[C*c.N,k*c.N,0]),this._demMatrixCache[i.key]={matrix:E,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ve(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ve(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let k=0;k<this._coordsTextureSize;k++,C+=4)u[C+0]=255&k,u[C+1]=255&_,u[C+2]=k>>8<<4|_>>8,u[C+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new ve(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],E=k&&this.sourceCache.getTileByID(k);if(!E)return null;const D=this._coordsTextureSize,B=(1<<E.tileID.canonical.z)*D;return new c.U(this._allowMercatorOverflow(i,(E.tileID.canonical.x*D+_)/B),(E.tileID.canonical.y*D+C)/B,this.getElevation(E.tileID,_,C,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new c.bd,p=new c.b0,g=this.meshSize,_=c.N/g,C=g*g;for(let F=0;F<=g;F++)for(let X=0;X<=g;X++)u.emplaceBack(X*_,F*_,0);for(let F=0;F<C;F+=g+1)for(let X=0;X<g;X++)p.emplaceBack(X+F,g+X+F+1,g+X+F+2),p.emplaceBack(X+F,g+X+F+2,X+F+1);const k=u.length,E=k+2*(g+1);for(const F of[0,1])for(let X=0;X<=g;X++)for(const ce of[0,1])u.emplaceBack(X*_,F*c.N,ce);for(let F=0;F<2*g;F+=2)p.emplaceBack(E+F,E+F+1,E+F+3),p.emplaceBack(E+F,E+F+3,E+F+2),p.emplaceBack(k+F,k+F+3,k+F+1),p.emplaceBack(k+F,k+F+2,k+F+3);const D=u.length,B=D+2*(g+1);for(const F of[0,1])for(let X=0;X<=g;X++)for(const ce of[0,1])u.emplaceBack(F*c.N,X*_,ce);for(let F=0;F<2*g;F+=2)p.emplaceBack(D+F,D+F+1,D+F+3),p.emplaceBack(D+F,D+F+3,D+F+2),p.emplaceBack(B+F,B+F+3,B+F+1),p.emplaceBack(B+F,B+F+2,B+F+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,jf.members),segments:c.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=c.U.fromLngLat(i.wrap()),g=(1<<u)*c.N,_=p.x*g,C=p.y*g,k=Math.floor(_/c.N),E=Math.floor(C/c.N);return{tileID:new c.O(u,0,u,k,E),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let g=c.bf(u);const _=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(_)<0||!p&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,c.G(g)):u}}class Cv{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const gi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zc{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Cv(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const k in C)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(C[k])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],_=g.source;if(gi[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(gi[u]&&(this._prevType&&gi[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(gi[this._prevType]||gi[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(dn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[_]){const D=this.pool.getObjectForId(k.rtt[_].id);if(D.stamp===k.rtt[_].stamp){this.pool.useObject(D);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),k.rtt[_]={id:E.id,stamp:E.stamp},p.context.bindFramebuffer.set(E.fbo.framebuffer),p.context.clear({color:c.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let D=0;D<C.length;D++){const B=p.style._layers[C[D]],F=B.source?this._coordsDescendingInv[B.source][k.tileID.key]:[k.tileID];p.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),p._renderTileClippingMasks(B,F),p.renderLayer(p,p.style.sourceCaches[B.source],B,F),B.source&&(k.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][k.tileID.key])}}return dn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),gi[u]}return!1}}const Vt=b,Yt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},jl=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},qd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Zd{constructor(i,u,p=!1){this.mousedown=C=>{this.startMouse(c.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Vs({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:k,bearingDegreesPerPixelMoved:E=.8})=>{const D=new Lf;return new va({clickTolerance:k,move:(B,F)=>({bearingDelta:(F.x-B.x)*E}),moveStateManager:D,enable:C,assignEvents:jl})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=_a({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:k,pitchDegreesPerPixelMoved:E=-.5})=>{const D=new Lf;return new va({clickTolerance:k,move:(B,F)=>({pitchDelta:(F.y-B.y)*E}),moveStateManager:D,enable:C,assignEvents:jl})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let wn;function Kd(y,i,u){if(y=new c.L(y.lng,y.lat),i){const p=new c.L(y.lng-360,y.lat),g=new c.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(p).distSqr(i)<_?y=p:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const ho={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hf(y,i,u){const p=y.classList;for(const g in ho)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${i}`)}class us extends c.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Kd(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${ho[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),k=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*k?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const k=w.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of E){const Be=w.createNS("http://www.w3.org/2000/svg","ellipse");Be.setAttributeNS(null,"opacity","0.04"),Be.setAttributeNS(null,"cx","10.5"),Be.setAttributeNS(null,"cy","5.80029008"),Be.setAttributeNS(null,"rx",we.rx),Be.setAttributeNS(null,"ry",we.ry),k.appendChild(Be)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const B=w.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(B);const F=w.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(X);const ce=w.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");const le=w.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const he=w.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");const oe=w.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),le.appendChild(he),le.appendChild(oe),C.appendChild(k),C.appendChild(D),C.appendChild(F),C.appendChild(ce),C.appendChild(le),u.appendChild(C),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Hf(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let sn=0,Hs=!1;const Vl={maxWidth:100,unit:"metric"};function Ul(y,i,u){const p=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([p,g]),k=_.distanceTo(C);if(u&&u.unit==="imperial"){const E=3.2808*k;E>5280?ds(i,p,E/5280,y._getUIString("ScaleControl.Miles")):ds(i,p,E,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ds(i,p,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?ds(i,p,k/1e3,y._getUIString("ScaleControl.Kilometers")):ds(i,p,k,y._getUIString("ScaleControl.Meters"))}function ds(y,i,u,p){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let k=_/C;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(E){const D=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*D)/D}(k),C*k}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Xd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Jd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ws(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-y),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const i=c.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return Ws(new c.P(0,0))}const Yd={extend:(y,...i)=>c.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},Qd=b;class Ar{static get version(){return Qd}static get workerCount(){return kr.workerCount}static set workerCount(i){kr.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,u){c.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return Ar.Map=class extends Nf{constructor(y){if(c.bg.mark(c.bh.create),(y=c.e({},Yt,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Uc(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new qc,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},Gd,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=J.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=cs(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Wd(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new $l(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Zi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new Xr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;const u=this._containerDimensions(),p=u[0],g=u[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const E=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,E),this.painter.resize(p,g,E)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),C&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>p?p/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(mt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(c.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?p||(p=!0,u.call(this,new qi(y,this,_.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new qi(y,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,u.call(this,new qi(y,this,C.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:p}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const k in C.delegates)this.off(k,C.delegates[k]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const p=y instanceof c.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof c.P||typeof g[0]=="number")u=[c.P.convert(g)];else{const _=c.P.convert(g[0]),C=c.P.convert(g[1]);u=[_,new c.P(C.x,_.y),C,new c.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Qn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,j.Style);c.f(u,(p,g)=>{p?this.fire(new c.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Uf(this.painter,i,y),this.painter.renderToTexture=new Zc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:C,content:k}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:E,height:D,data:B}=i,F=i;return this.style.addImage(y,{data:new c.R({width:E,height:D},new Uint8Array(B)),pixelRatio:p,stretchX:_,stretchY:C,content:k,sdf:g,version:0,userImage:F}),F.onAdd&&F.onAdd(this,y),this}}{const{width:E,height:D,data:B}=c.h.getImageData(i);this.style.addImage(y,{data:new c.R({width:E,height:D},B),pixelRatio:p,stretchX:_,stretchY:C,content:k,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:g,height:_,data:C}=p;if(g===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(i instanceof HTMLImageElement||c.a(i));return u.data.replace(C,k),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){J.getImage(this._requestManager.transformRequest(y,j.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new ls(u,this.transform),T.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=c.h.now();this.style.zoomHistory.update(g,_);const C=new c.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=C.crossFadingFactor();k===1&&k===this._crossFadingFactor||(u=!0,this._crossFadingFactor=k),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),J.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(y=>{c.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Vt}getCameraTargetElevation(){return this.transform.elevation}},Ar.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=c.e({},qd,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Zd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},Ar.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new c.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),_=c.e({bearing:g},this.options.fitBoundsOptions),C=mt.fromLngLat(u,p);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Hs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new us({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new us({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},hn,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){wn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{wn=p.state!=="denied",i(wn)}).catch(()=>{wn=!!window.navigator.geolocation,i(wn)}):(wn=!!window.navigator.geolocation,i(wn)):i(wn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,sn=0,Hs=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sn--,Hs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),sn++,sn>1?(y={maximumAge:6e5,timeout:0},Hs=!0):(y=this.options.positionOptions,Hs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Ar.AttributionControl=Zi,Ar.LogoControl=Xr,Ar.ScaleControl=class{constructor(y){this._onMove=()=>{Ul(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Ul(this._map,this._container,this.options)},this.options=c.e({},Vl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Ar.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Ar.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Ar.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Kd(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=Ws(this.options.offset);if(!p){const C=this._container.offsetWidth,k=this._container.offsetHeight;let E;E=u.y+g.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<C/2?E.push("left"):u.x>this._map.transform.width-C/2&&E.push("right"),p=E.length===0?"bottom":E.join("-")}const _=u.add(g[p]).round();w.setTransform(this._container,`${ho[p]} translate(${_.x}px,${_.y}px)`),Hf(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Xd),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Jd);y&&y.focus()}},Ar.Marker=us,Ar.Style=Qn,Ar.LngLat=c.L,Ar.LngLatBounds=mt,Ar.Point=c.P,Ar.MercatorCoordinate=c.U,Ar.Evented=c.E,Ar.AJAXError=c.bi,Ar.config=c.c,Ar.CanvasSource=Et,Ar.GeoJSONSource=$e,Ar.ImageSource=ht,Ar.RasterDEMTileSource=kt,Ar.RasterTileSource=Zt,Ar.VectorTileSource=zt,Ar.VideoSource=At,Ar.setRTLTextPlugin=c.bj,Ar.getRTLTextPluginStatus=c.bk,Ar.prewarm=function(){nr().acquire(Gt)},Ar.clearPrewarmedResources=function(){const y=sr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Gt),sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Yd.extend(Ar,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),Ar});var m=l;return m})})(rz);var db=rz.exports;const iz=Cx(db),aU=Sx({__proto__:null,default:iz},[db]);var Nu=Math.pow,Ni=(e,t,r)=>new Promise((o,l)=>{var d=b=>{try{c(r.next(b))}catch(w){l(w)}},m=b=>{try{c(r.throw(b))}catch(w){l(w)}},c=b=>b.done?o(b.value):Promise.resolve(b.value).then(d,m);c((r=r.apply(e,t)).next())}),Mo=Uint8Array,Eu=Uint16Array,sU=Int32Array,oz=new Mo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),az=new Mo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lU=new Mo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sz=function(e,t){for(var r=new Eu(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var l=new sU(r[30]),o=1;o<30;++o)for(var d=r[o];d<r[o+1];++d)l[d]=d-r[o]<<5|o;return{b:r,r:l}},lz=sz(oz,2),cz=lz.b,cU=lz.r;cz[28]=258,cU[258]=28;var uU=sz(az,0),dU=uU.b,gx=new Eu(32768);for(Nr=0;Nr<32768;++Nr)xs=(Nr&43690)>>1|(Nr&21845)<<1,xs=(xs&52428)>>2|(xs&13107)<<2,xs=(xs&61680)>>4|(xs&3855)<<4,gx[Nr]=((xs&65280)>>8|(xs&255)<<8)>>1;var xs,Nr,np=function(e,t,r){for(var o=e.length,l=0,d=new Eu(t);l<o;++l)e[l]&&++d[e[l]-1];var m=new Eu(t);for(l=1;l<t;++l)m[l]=m[l-1]+d[l-1]<<1;var c;if(r){c=new Eu(1<<t);var b=15-t;for(l=0;l<o;++l)if(e[l])for(var w=l<<4|e[l],T=t-e[l],z=m[e[l]-1]++<<T,P=z|(1<<T)-1;z<=P;++z)c[gx[z]>>b]=w}else for(c=new Eu(o),l=0;l<o;++l)e[l]&&(c[l]=gx[m[e[l]-1]++]>>15-e[l]);return c},rf=new Mo(288);for(Nr=0;Nr<144;++Nr)rf[Nr]=8;var Nr;for(Nr=144;Nr<256;++Nr)rf[Nr]=9;var Nr;for(Nr=256;Nr<280;++Nr)rf[Nr]=7;var Nr;for(Nr=280;Nr<288;++Nr)rf[Nr]=8;var Nr,uz=new Mo(32);for(Nr=0;Nr<32;++Nr)uz[Nr]=5;var Nr,hU=np(rf,9,1),pU=np(uz,5,1),Q0=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ta=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},e_=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},fU=function(e){return(e+7)/8|0},mU=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var o=new Mo(r-t);return o.set(e.subarray(t,r)),o},gU=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Eo=function(e,t,r){var o=new Error(t||gU[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,Eo),!r)throw o;return o},hb=function(e,t,r,o){var l=e.length,d=o?o.length:0;if(!l||t.f&&!t.l)return r||new Mo(0);var m=!r||t.i!=2,c=t.i;r||(r=new Mo(l*3));var b=function(ht){var At=r.length;if(ht>At){var Et=new Mo(Math.max(At*2,ht));Et.set(r),r=Et}},w=t.f||0,T=t.p||0,z=t.b||0,P=t.l,U=t.d,H=t.m,W=t.n,J=l*8;do{if(!P){w=Ta(e,T,1);var j=Ta(e,T+1,3);if(T+=3,j)if(j==1)P=hU,U=pU,H=9,W=5;else if(j==2){var ie=Ta(e,T,31)+257,me=Ta(e,T+10,15)+4,Z=ie+Ta(e,T+5,31)+1;T+=14;for(var de=new Mo(Z),Te=new Mo(19),ve=0;ve<me;++ve)Te[lU[ve]]=Ta(e,T+ve*3,7);T+=me*3;for(var De=Q0(Te),ke=(1<<De)-1,Ee=np(Te,De,1),ve=0;ve<Z;){var He=Ee[Ta(e,T,ke)];T+=He&15;var $=He>>4;if($<16)de[ve++]=$;else{var Fe=0,Ae=0;for($==16?(Ae=3+Ta(e,T,3),T+=2,Fe=de[ve-1]):$==17?(Ae=3+Ta(e,T,7),T+=3):$==18&&(Ae=11+Ta(e,T,127),T+=7);Ae--;)de[ve++]=Fe}}var Ge=de.subarray(0,ie),Re=de.subarray(ie);H=Q0(Ge),W=Q0(Re),P=np(Ge,H,1),U=np(Re,W,1)}else Eo(1);else{var $=fU(T)+4,G=e[$-4]|e[$-3]<<8,te=$+G;if(te>l){c&&Eo(0);break}m&&b(z+G),r.set(e.subarray($,te),z),t.b=z+=G,t.p=T=te*8,t.f=w;continue}if(T>J){c&&Eo(0);break}}m&&b(z+131072);for(var Ze=(1<<H)-1,Je=(1<<W)-1,dt=T;;dt=T){var Fe=P[e_(e,T)&Ze],vt=Fe>>4;if(T+=Fe&15,T>J){c&&Eo(0);break}if(Fe||Eo(2),vt<256)r[z++]=vt;else if(vt==256){dt=T,P=null;break}else{var mt=vt-254;if(vt>264){var ve=vt-257,Ct=oz[ve];mt=Ta(e,T,(1<<Ct)-1)+cz[ve],T+=Ct}var zt=U[e_(e,T)&Je],Zt=zt>>4;zt||Eo(3),T+=zt&15;var Re=dU[Zt];if(Zt>3){var Ct=az[Zt];Re+=e_(e,T)&(1<<Ct)-1,T+=Ct}if(T>J){c&&Eo(0);break}m&&b(z+131072);var kt=z+mt;if(z<Re){var $e=d-Re,rt=Math.min(Re,kt);for($e+z<0&&Eo(3);z<rt;++z)r[z]=o[$e+z]}for(;z<kt;z+=4)r[z]=r[z-Re],r[z+1]=r[z+1-Re],r[z+2]=r[z+2-Re],r[z+3]=r[z+3-Re];z=kt}}t.l=P,t.p=dt,t.b=z,t.f=w,P&&(w=1,t.m=H,t.d=U,t.n=W)}while(!w);return z==r.length?r:mU(r,0,z)},yU=new Mo(0),vU=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Eo(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},_U=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},xU=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Eo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Eo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function bU(e,t){return hb(e,{i:2},t&&t.out,t&&t.dictionary)}function wU(e,t){var r=vU(e);return r+8>e.length&&Eo(6,"invalid gzip data"),hb(e.subarray(r,-8),{i:2},t&&t.out||new Mo(_U(e)),t&&t.dictionary)}function SU(e,t){return hb(e.subarray(xU(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function yx(e,t){return e[0]==31&&e[1]==139&&e[2]==8?wU(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?bU(e,t):SU(e,t)}var CU=typeof TextDecoder<"u"&&new TextDecoder,kU=0;try{CU.decode(yU,{stream:!0}),kU=1}catch{}var dz=(e,t)=>e*Nu(2,t),Rh=(e,t)=>Math.floor(e/Nu(2,t)),Ng=(e,t)=>dz(e.getUint16(t+1,!0),8)+e.getUint8(t),hz=(e,t)=>dz(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),TU=(e,t,r,o,l)=>{if(e!==o.getUint8(l))return e-o.getUint8(l);const d=Ng(o,l+1);if(t!==d)return t-d;const m=Ng(o,l+4);return r!==m?r-m:0},IU=(e,t,r,o)=>{const l=pz(e,t|128,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],isDir:!0}:null},WC=(e,t,r,o)=>{const l=pz(e,t,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],isDir:!1}:null},pz=(e,t,r,o)=>{let l=0,d=e.byteLength/17-1;for(;l<=d;){const m=d+l>>1,c=TU(t,r,o,e,m*17);if(c>0)l=m+1;else if(c<0)d=m-1;else return[hz(e,m*17+7),e.getUint32(m*17+13,!0)]}return null},PU=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,fz=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Ng(e,t*17+1),y:Ng(e,t*17+4),offset:hz(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},GC=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(fz(r,o));return EU(t)},EU=e=>{e.sort(PU);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const l=e[o];let d=l.z;l.isDir&&(d=d|128),r[o*17]=d,r[o*17+1]=l.x&255,r[o*17+2]=l.x>>8&255,r[o*17+3]=l.x>>16&255,r[o*17+4]=l.y&255,r[o*17+5]=l.y>>8&255,r[o*17+6]=l.y>>16&255,r[o*17+7]=l.offset&255,r[o*17+8]=Rh(l.offset,8)&255,r[o*17+9]=Rh(l.offset,16)&255,r[o*17+10]=Rh(l.offset,24)&255,r[o*17+11]=Rh(l.offset,32)&255,r[o*17+12]=Rh(l.offset,48)&255,r[o*17+13]=l.length&255,r[o*17+14]=l.length>>8&255,r[o*17+15]=l.length>>16&255,r[o*17+16]=l.length>>24&255}return t},zU=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=fz(e,r-1);if(o.isDir){const l=o.z,d=t.z-l,m=Math.trunc(t.x/(1<<d)),c=Math.trunc(t.y/(1<<d));return{z:l,x:m,y:c}}return null};function AU(e){return Ni(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),l=r.getUint16(8,!0),d=new TextDecoder("utf-8"),m=JSON.parse(d.decode(new DataView(t.data,10,o)));let c=0;m.compression==="gzip"&&(c=2);let b=0;"minzoom"in m&&(b=+m.minzoom);let w=0;"maxzoom"in m&&(w=+m.maxzoom);let T=0,z=0,P=0,U=-180,H=-85,W=180,J=85;if(m.bounds){const $=m.bounds.split(",");U=+$[0],H=+$[1],W=+$[2],J=+$[3]}if(m.center){const $=m.center.split(",");T=+$[0],z=+$[1],P=+$[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:b,maxZoom:w,minLon:U,minLat:H,maxLon:W,maxLat:J,centerZoom:P,centerLon:T,centerLat:z,etag:t.etag}})}function MU(e,t,r,o,l,d,m){return Ni(this,null,function*(){let c=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=GC(c));const b=WC(new DataView(c),o,l,d);if(b){let z=(yield t.getBytes(b.offset,b.length,m)).data;const P=new DataView(z);return P.getUint8(0)===31&&P.getUint8(1)===139&&(z=yx(new Uint8Array(z))),{data:z}}const w=zU(new DataView(c),{z:o,x:l,y:d});if(w){const T=IU(new DataView(c),w.z,w.x,w.y);if(T){let z=yield r.getArrayBuffer(t,T.offset,T.length,e);e.specVersion===1&&(z=GC(z));const P=WC(new DataView(z),o,l,d);if(P){let H=(yield t.getBytes(P.offset,P.length,m)).data;const W=new DataView(H);return W.getUint8(0)===31&&W.getUint8(1)===139&&(H=yx(new Uint8Array(H))),{data:H}}}}})}var mz={getHeader:AU,getZxy:MU},DU=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(l=>r(void 0,l.data,l.cacheControl||"",l.expires||""),l=>r(l)).catch(l=>r(l)),{cancel:()=>o.abort()}},RU=class{constructor(){this.tilev4=(e,t)=>Ni(this,null,function*(){if(e.type==="json"){const z=e.url.substr(10);let P=this.tiles.get(z);P||(P=new qC(z),this.tiles.set(z,P));const U=yield P.getHeader();return{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:U.minZoom,maxzoom:U.maxZoom,bounds:[U.minLon,U.minLat,U.maxLon,U.maxLat]}}}const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=e.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");const l=o[1];let d=this.tiles.get(l);d||(d=new qC(l),this.tiles.set(l,d));const m=o[2],c=o[3],b=o[4],w=yield d.getHeader(),T=yield d==null?void 0:d.getZxy(+m,+c,+b,t.signal);return T?{data:new Uint8Array(T.data),cacheControl:T.cacheControl,expires:T.expires}:w.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=DU(this.tilev4),this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function cu(e,t){return(t>>>0)*4294967296+(e>>>0)}function LU(e,t){const r=t.buf;let o=r[t.pos++],l=(o&112)>>4;if(o<128||(o=r[t.pos++],l|=(o&127)<<3,o<128)||(o=r[t.pos++],l|=(o&127)<<10,o<128)||(o=r[t.pos++],l|=(o&127)<<17,o<128)||(o=r[t.pos++],l|=(o&127)<<24,o<128)||(o=r[t.pos++],l|=(o&1)<<31,o<128))return cu(e,l);throw new Error("Expected varint not more than 10 bytes")}function Lh(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,LU(o,e))}function $U(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const l=t[0];t[0]=t[1],t[1]=l}}var BU=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function OU(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Nu(2,e)-1||r>Nu(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=BU[e],l=Nu(2,e);let d=0,m=0,c=0;const b=[t,r];let w=l/2;for(;w>0;)d=(b[0]&w)>0?1:0,m=(b[1]&w)>0?1:0,c+=w*w*(3*d^m),$U(w,b,d,m),w=w/2;return o+c}function gz(e,t){return Ni(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return yx(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}var FU=127;function NU(e,t){let r=0,o=e.length-1;for(;r<=o;){const l=o+r>>1,d=t-e[l].tileId;if(d>0)r=l+1;else if(d<0)o=l-1;else return e[l]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var jU=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return Ni(this,null,function*(){let l,d;r?d=r:(l=new AbortController,d=l.signal);const m=new Headers(this.customHeaders);m.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload&&(c="reload");let b=yield fetch(this.url,{signal:d,cache:c,headers:m});if(e===0&&b.status===416){const P=b.headers.get("Content-Range");if(!P||!P.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const U=+P.substr(8);b=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${U-1}`}})}let w=b.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),b.status===416||o&&w&&w!==o)throw this.mustReload=!0,new vx(o);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const T=b.headers.get("Content-Length");if(b.status===200&&(!T||+T>t))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:w||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function Ia(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*Nu(2,32)+o}function VU(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Ia(r,8),rootDirectoryLength:Ia(r,16),jsonMetadataOffset:Ia(r,24),jsonMetadataLength:Ia(r,32),leafDirectoryOffset:Ia(r,40),leafDirectoryLength:Ia(r,48),tileDataOffset:Ia(r,56),tileDataLength:Ia(r,64),numAddressedTiles:Ia(r,72),numTileEntries:Ia(r,80),numTileContents:Ia(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function yz(e){const t={buf:new Uint8Array(e),pos:0},r=Lh(t),o=[];let l=0;for(let d=0;d<r;d++){const m=Lh(t);o.push({tileId:l+m,offset:0,length:0,runLength:1}),l+=m}for(let d=0;d<r;d++)o[d].runLength=Lh(t);for(let d=0;d<r;d++)o[d].length=Lh(t);for(let d=0;d<r;d++){const m=Lh(t);m===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=m-1}return o}function UU(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var vx=class extends Error{};function HU(e,t){return Ni(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(UU(r.data)<3)return[yield mz.getHeader(e)];const l=r.data.slice(0,FU),d=VU(l,r.etag),m=r.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),c=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,b=yz(yield t(m,d.internalCompression));return[d,[c,b.length,b]]})}function WU(e,t,r,o,l){return Ni(this,null,function*(){const d=yield e.getBytes(r,o,void 0,l.etag),m=yield t(d.data,l.internalCompression),c=yz(m);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var GU=class{constructor(e=100,t=!0,r=gz){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Ni(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((l,d)=>{HU(e,this.decompress).then(m=>{m[1]&&this.cache.set(m[1][0],{lastUsed:this.counter++,data:Promise.resolve(m[1][2])}),l(m[0]),this.prune()}).catch(m=>{d(m)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return Ni(this,null,function*(){const l=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(l);if(d)return d.lastUsed=this.counter++,yield d.data;const m=new Promise((c,b)=>{WU(e,this.decompress,t,r,o).then(w=>{c(w),this.prune()}).catch(w=>{b(w)})});return this.cache.set(l,{lastUsed:this.counter++,data:m}),m})}getArrayBuffer(e,t,r,o){return Ni(this,null,function*(){const l=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(l);if(d)return d.lastUsed=this.counter++,yield d.data;const m=new Promise((c,b)=>{e.getBytes(t,r,void 0,o.etag).then(w=>{c(w.data),this.cache.has(l),this.prune()}).catch(w=>{b(w)})});return this.cache.set(l,{lastUsed:this.counter++,data:m}),m})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return Ni(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,l)=>{this.getHeader(e).then(d=>{o(),this.invalidations.delete(t)}).catch(d=>{l(d)})});this.invalidations.set(t,r)})}},qC=class{constructor(e,t,r){typeof e=="string"?this.source=new jU(e):this.source=e,r?this.decompress=r:this.decompress=gz,t?this.cache=t:this.cache=new GU}getHeader(){return Ni(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return Ni(this,null,function*(){const l=OU(e,t,r),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return mz.getZxy(d,this.source,this.cache,e,t,r,o);if(e<d.minZoom||e>d.maxZoom)return;let m=d.rootDirectoryOffset,c=d.rootDirectoryLength;for(let b=0;b<=3;b++){const w=yield this.cache.getDirectory(this.source,m,c,d),T=NU(w,l);if(T){if(T.runLength>0){const z=yield this.source.getBytes(d.tileDataOffset+T.offset,T.length,o,d.etag);return{data:yield this.decompress(z.data,d.tileCompression),cacheControl:z.cacheControl,expires:z.expires}}m=d.leafDirectoryOffset+T.offset,c=T.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return Ni(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(l){if(l instanceof vx)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw l}})}getMetadataAttempt(){return Ni(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return Ni(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof vx)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}};let ZC=!1;function vz(){if(ZC)return;const e=new RU;iz.addProtocol("pmtiles",e.tile),ZC=!0}const _z=()=>(vz(),ae.jsxs(ae.Fragment,{children:[ae.jsx(Ur,{id:"background",type:"background",paint:{"background-color":"#9cc0facc"}}),ae.jsxs(tf,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[ae.jsx(Ur,{"source-layer":"land",type:"fill",paint:{"fill-color":"#f8f8f8"}}),ae.jsx(Ur,{"source-layer":"states",type:"line",paint:{"line-color":"#aaa","line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),ae.jsx(Ur,{"source-layer":"countries",type:"line",paint:{"line-color":"#ccc","line-width":1,"line-opacity":1}}),ae.jsx(Ur,{"source-layer":"lakes",type:"fill",paint:{"fill-color":"#9cc0facc"}})]})]}));function di(e,t){if(e==null)throw new Error(t);return e}class xz extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class Rp{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return di(t,r)}}var ni=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(ni||{});const Lp=new Set(Array.from({length:17},(e,t)=>t)),_x=e=>{const{game:t,visibleIcons:r=Lp,enableIconAutoHide:o=!0}=e,l=t==="ats"?XC(t,e.dlcs??Dp):XC(t,e.dlcs??x8);return vz(),ae.jsxs(tf,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[ae.jsx(Ur,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],l],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":r_,"fill-outline-color":["case",["==",["get","color"],XE.Road],"#999a",r_]}}),ae.jsx(Ur,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],l],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":r_}}),ae.jsx(qU,{game:t}),ae.jsx(Ur,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],l],paint:{"line-color":"#e9e9e8","line-width":1,"line-opacity":.7}}),ae.jsx(Ur,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],l],layout:JC,paint:{"line-color":YU,"line-gap-width":YC,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),ae.jsx(Ur,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],l],layout:JC,paint:{"line-color":JU,"line-width":YC}}),ae.jsx(Ur,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":"#6c90ff88","line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),ae.jsx(Ur,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":"#aaa","line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),ae.jsx(Ur,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":"#aaa","line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),ae.jsx(Ur,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":"#aaa","line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),ae.jsx(Ur,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Ql,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":"#eefc","text-color":"#6c80ff"}}),ae.jsx(Ur,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Ql,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":"#eefc","text-color":"#555c"}}),r.has(15)&&ae.jsx(Ur,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],l],layout:uu(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&ae.jsx(Ur,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",KC]]]],layout:uu(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&ae.jsx(Ur,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],l],layout:uu(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&ae.jsx(Ur,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],l],layout:uu(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&ae.jsx(Ur,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],l,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",KC]]]]],layout:uu(o,.4,.75,1.25)}),r.has(14)&&ae.jsx(Ur,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],l],layout:{...Ql,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":jh,"text-size":12,"icon-image":t_,"icon-allow-overlap":!o,"icon-size":.6},paint:Vh}),r.has(14)&&ae.jsx(Ur,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],l],layout:{...Ql,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":jh,"text-size":13,"icon-image":t_,"icon-allow-overlap":!o,"icon-size":.6},paint:Vh}),r.has(14)&&ae.jsx(Ur,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],l],layout:{...Ql,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":jh,"text-size":14,"icon-image":t_,"icon-allow-overlap":!o,"icon-size":.8},paint:Vh}),t==="ets2"&&r.has(14)&&ae.jsx(Ur,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Ql,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":jh,"text-size":14},paint:Vh}),bz(r)&&ae.jsx(Ur,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],KU(r),l],layout:uu(o,.6,1.25,2.5,{vertical:2,horizontal:2})})]})},qU=({game:e})=>ae.jsxs(tf,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[ae.jsx(Ur,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":"#e9e9e8","fill-opacity":["step",["zoom"],1,9,.8]}}),ae.jsx(Ur,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":"#e9e9e8","fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":.33}})]});function uu(e,t,r,o,l={vertical:10,horizontal:30}){const d=["literal",[l.vertical,l.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const t_=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],ZU=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],KC=["weigh_ico","toll_ico","agri_check","border_ico"];function bz(e){return ZU.some(t=>e.has(t))}function KU(e){Rp.checkArgument(bz(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const l=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,m=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",l,d,m]}function XC(e,t){if(e!=="ats")return["boolean",!0];const r=KE(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const jh=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Ql={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},Vh={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},JC={"line-cap":"round","line-join":"bevel"},YC=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],wz={freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},XU={0:"#eaeced",1:"#e6cc9f",2:"#d8a54e",3:"#b1ca9b"},JU=["match",["get","roadType"],...Object.entries(wz).flatMap(([e,[t]])=>[e,t]),"#f0f"],YU=["match",["get","roadType"],...Object.entries(wz).flatMap(([e,[t,r]])=>[e,r]),"#b0b"],r_=["match",["get","color"],...Object.entries(XU).flatMap(([e,t])=>[Number(e),t]),"#b0b"],Sz="https://raw.githubusercontent.com/nautofon/ats-towns/nebraska/all-towns.geojson";var Oi=(e=>(e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Oi||{});const QU={AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},e9=new Set(Object.keys(QU)),Cz=e=>{const{enableAutoHide:t=!0,enabledStates:r=e9}=e;return ae.jsx(tf,{id:"scenery-towns",type:"geojson",data:Sz,children:ae.jsx(Ur,{id:"scenery-towns",type:"symbol",minzoom:t?7:0,filter:["in",["get","state"],["literal",[...r]]],layout:{...Ql,"text-field":"{name}","text-allow-overlap":!t,"text-variable-anchor":jh,"text-size":10.5},paint:Vh})})},kz={version:8,sprite:"https://truckermudgeon.github.io/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]};function sl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Tz(e){if(!sl(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Tz(e[r])}),t}function rs(e,t,r={clone:!0}){const o=r.clone?K({},e):e;return sl(e)&&sl(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(sl(t[l])&&l in e&&sl(e[l])?o[l]=rs(e[l],t[l],r):r.clone?o[l]=sl(t[l])?Tz(t[l]):t[l]:o[l]=t[l])}),o}const t9=Object.freeze(Object.defineProperty({__proto__:null,default:rs,isPlainObject:sl},Symbol.toStringTag,{value:"Module"}));function $p(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const r9=Object.freeze(Object.defineProperty({__proto__:null,default:$p},Symbol.toStringTag,{value:"Module"})),n9=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Iz(e){const t=`${e}`.match(n9);return t&&t[1]||""}function Pz(e,t=""){return e.displayName||e.name||Iz(e)||t}function QC(e,t,r){const o=Pz(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function i9(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return Pz(e,"Component");if(typeof e=="object")switch(e.$$typeof){case vS.ForwardRef:return QC(e,e.render,"ForwardRef");case vS.Memo:return QC(e,e.type,"memo");default:return}}}const o9=Object.freeze(Object.defineProperty({__proto__:null,default:i9,getFunctionName:Iz},Symbol.toStringTag,{value:"Module"}));function yc(e){if(typeof e!="string")throw new Error($p(7));return e.charAt(0).toUpperCase()+e.slice(1)}const a9=Object.freeze(Object.defineProperty({__proto__:null,default:yc},Symbol.toStringTag,{value:"Module"}));function Ez(e,t){const r=K({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=K({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const l=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=l:!l||!Object.keys(l)?r[o]=d:(r[o]=K({},d),Object.keys(l).forEach(m=>{r[o][m]=Ez(l[m],d[m])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function s9(e,t,r=void 0){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((d,m)=>{if(m){const c=t(m);c!==""&&d.push(c),r&&r[m]&&d.push(r[m])}return d},[]).join(" ")}),o}const ek=e=>e,l9=()=>{let e=ek;return{configure(t){e=t},generate(t){return e(t)},reset(){e=ek}}},c9=l9(),u9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function zz(e,t,r="Mui"){const o=u9[t];return o?`${r}-${o}`:`${c9.generate(e)}-${t}`}function d9(e,t,r="Mui"){const o={};return t.forEach(l=>{o[l]=zz(e,l,r)}),o}function h9(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const p9=Object.freeze(Object.defineProperty({__proto__:null,default:h9},Symbol.toStringTag,{value:"Module"}));function f9(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:Ez(t.components[r].defaultProps,o)}const m9=["values","unit","step"],g9=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>K({},r,{[o.key]:o.val}),{})};function Az(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,l=qt(e,m9),d=g9(t),m=Object.keys(d);function c(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r})`}function b(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-o/100}${r})`}function w(P,U){const H=m.indexOf(U);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r}) and (max-width:${(H!==-1&&typeof t[m[H]]=="number"?t[m[H]]:U)-o/100}${r})`}function T(P){return m.indexOf(P)+1<m.length?w(P,m[m.indexOf(P)+1]):c(P)}function z(P){const U=m.indexOf(P);return U===0?c(m[1]):U===m.length-1?b(m[U]):w(P,m[m.indexOf(P)+1]).replace("@media","@media not all and")}return K({keys:m,values:d,up:c,down:b,between:w,only:T,not:z,unit:r},l)}const y9={borderRadius:4},v9=y9;function ip(e,t){return t?rs(e,t,{clone:!1}):e}const pb={xs:0,sm:600,md:900,lg:1200,xl:1536},tk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${pb[e]}px)`};function As(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||tk;return t.reduce((m,c,b)=>(m[d.up(d.keys[b])]=r(t[b]),m),{})}if(typeof t=="object"){const d=o.breakpoints||tk;return Object.keys(t).reduce((m,c)=>{if(Object.keys(d.values||pb).indexOf(c)!==-1){const b=d.up(c);m[b]=r(t[c],c)}else{const b=c;m[b]=t[b]}return m},{})}return r(t)}function _9(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,l)=>{const d=e.up(l);return o[d]={},o},{}))||{}}function x9(e,t){return e.reduce((r,o)=>{const l=r[o];return(!l||Object.keys(l).length===0)&&delete r[o],r},t)}function rv(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((l,d)=>l&&l[d]?l[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function jg(e,t,r,o=r){let l;return typeof e=="function"?l=e(r):Array.isArray(e)?l=e[r]||o:l=rv(e,r)||o,t&&(l=t(l,o,e)),l}function Kn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:l}=e,d=m=>{if(m[t]==null)return null;const c=m[t],b=m.theme,w=rv(b,o)||{};return As(m,c,z=>{let P=jg(w,l,z);return z===P&&typeof z=="string"&&(P=jg(w,l,`${t}${z==="default"?"":yc(z)}`,z)),r===!1?P:{[r]:P}})};return d.propTypes={},d.filterProps=[t],d}function b9(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const w9={m:"margin",p:"padding"},S9={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},C9=b9(e=>{if(e.length>2)if(rk[e])e=rk[e];else return[e];const[t,r]=e.split(""),o=w9[t],l=S9[r]||"";return Array.isArray(l)?l.map(d=>o+d):[o+l]}),fb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],mb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...fb,...mb];function nf(e,t,r,o){var l;const d=(l=rv(e,t,!1))!=null?l:r;return typeof d=="number"?m=>typeof m=="string"?m:d*m:Array.isArray(d)?m=>typeof m=="string"?m:d[m]:typeof d=="function"?d:()=>{}}function Mz(e){return nf(e,"spacing",8)}function of(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function k9(e,t){return r=>e.reduce((o,l)=>(o[l]=of(t,r),o),{})}function T9(e,t,r,o){if(t.indexOf(r)===-1)return null;const l=C9(r),d=k9(l,o),m=e[r];return As(e,m,d)}function Dz(e,t){const r=Mz(e.theme);return Object.keys(e).map(o=>T9(e,t,o,r)).reduce(ip,{})}function Ln(e){return Dz(e,fb)}Ln.propTypes={};Ln.filterProps=fb;function $n(e){return Dz(e,mb)}$n.propTypes={};$n.filterProps=mb;function I9(e=8){if(e.mui)return e;const t=Mz({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(d=>{const m=t(d);return typeof m=="number"?`${m}px`:m}).join(" ");return r.mui=!0,r}function nv(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(d=>{o[d]=l}),o),{}),r=o=>Object.keys(o).reduce((l,d)=>t[d]?ip(l,t[d](o)):l,{});return r.propTypes={},r.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),r}function ra(e){return typeof e!="number"?e:`${e}px solid`}function fa(e,t){return Kn({prop:e,themeKey:"borders",transform:t})}const P9=fa("border",ra),E9=fa("borderTop",ra),z9=fa("borderRight",ra),A9=fa("borderBottom",ra),M9=fa("borderLeft",ra),D9=fa("borderColor"),R9=fa("borderTopColor"),L9=fa("borderRightColor"),$9=fa("borderBottomColor"),B9=fa("borderLeftColor"),O9=fa("outline",ra),F9=fa("outlineColor"),iv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=nf(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:of(t,o)});return As(e,e.borderRadius,r)}return null};iv.propTypes={};iv.filterProps=["borderRadius"];nv(P9,E9,z9,A9,M9,D9,R9,L9,$9,B9,iv,O9,F9);const ov=e=>{if(e.gap!==void 0&&e.gap!==null){const t=nf(e.theme,"spacing",8),r=o=>({gap:of(t,o)});return As(e,e.gap,r)}return null};ov.propTypes={};ov.filterProps=["gap"];const av=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=nf(e.theme,"spacing",8),r=o=>({columnGap:of(t,o)});return As(e,e.columnGap,r)}return null};av.propTypes={};av.filterProps=["columnGap"];const sv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=nf(e.theme,"spacing",8),r=o=>({rowGap:of(t,o)});return As(e,e.rowGap,r)}return null};sv.propTypes={};sv.filterProps=["rowGap"];const N9=Kn({prop:"gridColumn"}),j9=Kn({prop:"gridRow"}),V9=Kn({prop:"gridAutoFlow"}),U9=Kn({prop:"gridAutoColumns"}),H9=Kn({prop:"gridAutoRows"}),W9=Kn({prop:"gridTemplateColumns"}),G9=Kn({prop:"gridTemplateRows"}),q9=Kn({prop:"gridTemplateAreas"}),Z9=Kn({prop:"gridArea"});nv(ov,av,sv,N9,j9,V9,U9,H9,W9,G9,q9,Z9);function ju(e,t){return t==="grey"?t:e}const K9=Kn({prop:"color",themeKey:"palette",transform:ju}),X9=Kn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ju}),J9=Kn({prop:"backgroundColor",themeKey:"palette",transform:ju});nv(K9,X9,J9);function Do(e){return e<=1&&e!==0?`${e*100}%`:e}const Y9=Kn({prop:"width",transform:Do}),gb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,l;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||pb[r];return d?((l=e.theme)==null||(l=l.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Do(r)}};return As(e,e.maxWidth,t)}return null};gb.filterProps=["maxWidth"];const Q9=Kn({prop:"minWidth",transform:Do}),e7=Kn({prop:"height",transform:Do}),t7=Kn({prop:"maxHeight",transform:Do}),r7=Kn({prop:"minHeight",transform:Do});Kn({prop:"size",cssProperty:"width",transform:Do});Kn({prop:"size",cssProperty:"height",transform:Do});const n7=Kn({prop:"boxSizing"});nv(Y9,gb,Q9,e7,t7,r7,n7);const i7={border:{themeKey:"borders",transform:ra},borderTop:{themeKey:"borders",transform:ra},borderRight:{themeKey:"borders",transform:ra},borderBottom:{themeKey:"borders",transform:ra},borderLeft:{themeKey:"borders",transform:ra},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ra},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:iv},color:{themeKey:"palette",transform:ju},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ju},backgroundColor:{themeKey:"palette",transform:ju},p:{style:$n},pt:{style:$n},pr:{style:$n},pb:{style:$n},pl:{style:$n},px:{style:$n},py:{style:$n},padding:{style:$n},paddingTop:{style:$n},paddingRight:{style:$n},paddingBottom:{style:$n},paddingLeft:{style:$n},paddingX:{style:$n},paddingY:{style:$n},paddingInline:{style:$n},paddingInlineStart:{style:$n},paddingInlineEnd:{style:$n},paddingBlock:{style:$n},paddingBlockStart:{style:$n},paddingBlockEnd:{style:$n},m:{style:Ln},mt:{style:Ln},mr:{style:Ln},mb:{style:Ln},ml:{style:Ln},mx:{style:Ln},my:{style:Ln},margin:{style:Ln},marginTop:{style:Ln},marginRight:{style:Ln},marginBottom:{style:Ln},marginLeft:{style:Ln},marginX:{style:Ln},marginY:{style:Ln},marginInline:{style:Ln},marginInlineStart:{style:Ln},marginInlineEnd:{style:Ln},marginBlock:{style:Ln},marginBlockStart:{style:Ln},marginBlockEnd:{style:Ln},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ov},rowGap:{style:sv},columnGap:{style:av},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Do},maxWidth:{style:gb},minWidth:{transform:Do},height:{transform:Do},maxHeight:{transform:Do},minHeight:{transform:Do},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},af=i7;function o7(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function a7(e,t){return typeof e=="function"?e(t):e}function Rz(){function e(r,o,l,d){const m={[r]:o,theme:l},c=d[r];if(!c)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:T,style:z}=c;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const P=rv(l,w)||{};return z?z(m):As(m,o,H=>{let W=jg(P,T,H);return H===W&&typeof H=="string"&&(W=jg(P,T,`${r}${H==="default"?"":yc(H)}`,H)),b===!1?W:{[b]:W}})}function t(r){var o;const{sx:l,theme:d={}}=r||{};if(!l)return null;const m=(o=d.unstable_sxConfig)!=null?o:af;function c(b){let w=b;if(typeof b=="function")w=b(d);else if(typeof b!="object")return b;if(!w)return null;const T=_9(d.breakpoints),z=Object.keys(T);let P=T;return Object.keys(w).forEach(U=>{const H=a7(w[U],d);if(H!=null)if(typeof H=="object")if(m[U])P=ip(P,e(U,H,d,m));else{const W=As({theme:d},H,J=>({[U]:J}));o7(W,H)?P[U]=t({sx:H,theme:d}):P=ip(P,W)}else P=ip(P,e(U,H,d,m))}),x9(z,P)}return Array.isArray(l)?l.map(c):c(l)}return t}const lv=Rz();lv.filterProps=["sx"];function Lz(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const s7=["breakpoints","palette","spacing","shape"];function yb(e={},...t){const{breakpoints:r={},palette:o={},spacing:l,shape:d={}}=e,m=qt(e,s7),c=Az(r),b=I9(l);let w=rs({breakpoints:c,direction:"ltr",components:{},palette:K({mode:"light"},o),spacing:b,shape:K({},v9,d)},m);return w.applyStyles=Lz,w=t.reduce((T,z)=>rs(T,z),w),w.unstable_sxConfig=K({},af,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(z){return lv({sx:z,theme:this})},w}const l7=Object.freeze(Object.defineProperty({__proto__:null,default:yb,private_createBreakpoints:Az,unstable_applyStyles:Lz},Symbol.toStringTag,{value:"Module"}));let xx;typeof document=="object"&&(xx=Nk({key:"css",prepend:!0}));function c7(e){const{injectFirst:t,children:r}=e;return t&&xx?ae.jsx(cR,{value:xx,children:r}):r}function u7(e){return e==null||Object.keys(e).length===0}function d7(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?l=>t(u7(l)?r:l):t;return ae.jsx(Jk,{styles:o})}function h7(e,t){return ag(e,t)}const p7=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},f7=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:d7,StyledEngineProvider:c7,ThemeContext:od,css:$x,default:h7,internal_processStyles:p7,keyframes:Yk},Symbol.toStringTag,{value:"Module"}));function m7(e){return Object.keys(e).length===0}function g7(e=null){const t=O.useContext(od);return!t||m7(t)?e:t}const y7=yb();function v7(e=y7){return g7(e)}function _7({props:e,name:t,defaultTheme:r,themeId:o}){let l=v7(r);return o&&(l=l[o]||l),f9({theme:l,name:t,props:e})}const x7=["sx"],b7=e=>{var t,r;const o={systemProps:{},otherProps:{}},l=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:af;return Object.keys(e).forEach(d=>{l[d]?o.systemProps[d]=e[d]:o.otherProps[d]=e[d]}),o};function w7(e){const{sx:t}=e,r=qt(e,x7),{systemProps:o,otherProps:l}=b7(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...m)=>{const c=t(...m);return sl(c)?K({},o,c):o}:d=K({},o,t),K({},l,{sx:d})}const S7=Object.freeze(Object.defineProperty({__proto__:null,default:lv,extendSxProp:w7,unstable_createStyleFunctionSx:Rz,unstable_defaultSxConfig:af},Symbol.toStringTag,{value:"Module"}));function C7(e,t){return K({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Xn={},$z={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})($z);var Bz=$z.exports;const k7=Ms(r9),T7=Ms(p9);var Oz=Bz;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.alpha=Vz;Xn.blend=F7;Xn.colorChannel=void 0;var I7=Xn.darken=_b;Xn.decomposeColor=da;Xn.emphasize=Uz;var P7=Xn.getContrastRatio=R7;Xn.getLuminance=Vg;Xn.hexToRgb=Fz;Xn.hslToRgb=jz;var E7=Xn.lighten=xb;Xn.private_safeAlpha=L7;Xn.private_safeColorChannel=void 0;Xn.private_safeDarken=$7;Xn.private_safeEmphasize=O7;Xn.private_safeLighten=B7;Xn.recomposeColor=hd;Xn.rgbToHex=D7;var nk=Oz(k7),z7=Oz(T7);function vb(e,t=0,r=1){return(0,z7.default)(e,t,r)}function Fz(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function A7(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function da(e){if(e.type)return e;if(e.charAt(0)==="#")return da(Fz(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,nk.default)(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error((0,nk.default)(10,l))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:l}}const Nz=e=>{const t=da(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};Xn.colorChannel=Nz;const M7=(e,t)=>{try{return Nz(e)}catch{return e}};Xn.private_safeColorChannel=M7;function hd(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((l,d)=>d<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function D7(e){if(e.indexOf("#")===0)return e;const{values:t}=da(e);return`#${t.map((r,o)=>A7(o===3?Math.round(255*r):r)).join("")}`}function jz(e){e=da(e);const{values:t}=e,r=t[0],o=t[1]/100,l=t[2]/100,d=o*Math.min(l,1-l),m=(w,T=(w+r/30)%12)=>l-d*Math.max(Math.min(T-3,9-T,1),-1);let c="rgb";const b=[Math.round(m(0)*255),Math.round(m(8)*255),Math.round(m(4)*255)];return e.type==="hsla"&&(c+="a",b.push(t[3])),hd({type:c,values:b})}function Vg(e){e=da(e);let t=e.type==="hsl"||e.type==="hsla"?da(jz(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function R7(e,t){const r=Vg(e),o=Vg(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function Vz(e,t){return e=da(e),t=vb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,hd(e)}function L7(e,t,r){try{return Vz(e,t)}catch{return e}}function _b(e,t){if(e=da(e),t=vb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return hd(e)}function $7(e,t,r){try{return _b(e,t)}catch{return e}}function xb(e,t){if(e=da(e),t=vb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return hd(e)}function B7(e,t,r){try{return xb(e,t)}catch{return e}}function Uz(e,t=.15){return Vg(e)>.5?_b(e,t):xb(e,t)}function O7(e,t,r){try{return Uz(e,t)}catch{return e}}function F7(e,t,r,o=1){const l=(b,w)=>Math.round((b**(1/o)*(1-r)+w**(1/o)*r)**o),d=da(e),m=da(t),c=[l(d.values[0],m.values[0]),l(d.values[1],m.values[1]),l(d.values[2],m.values[2])];return hd({type:"rgb",values:c})}const N7={black:"#000",white:"#fff"},Bp=N7,j7={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},V7=j7,U7={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},du=U7,H7={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},hu=H7,W7={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},$h=W7,G7={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},pu=G7,q7={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},fu=q7,Z7={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},mu=Z7,K7=["mode","contrastThreshold","tonalOffset"],ik={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Bp.white,default:Bp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},n_={text:{primary:Bp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Bp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ok(e,t,r,o){const l=o.light||o,d=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=E7(e.main,l):t==="dark"&&(e.dark=I7(e.main,d)))}function X7(e="light"){return e==="dark"?{main:pu[200],light:pu[50],dark:pu[400]}:{main:pu[700],light:pu[400],dark:pu[800]}}function J7(e="light"){return e==="dark"?{main:du[200],light:du[50],dark:du[400]}:{main:du[500],light:du[300],dark:du[700]}}function Y7(e="light"){return e==="dark"?{main:hu[500],light:hu[300],dark:hu[700]}:{main:hu[700],light:hu[400],dark:hu[800]}}function Q7(e="light"){return e==="dark"?{main:fu[400],light:fu[300],dark:fu[700]}:{main:fu[700],light:fu[500],dark:fu[900]}}function eH(e="light"){return e==="dark"?{main:mu[400],light:mu[300],dark:mu[700]}:{main:mu[800],light:mu[500],dark:mu[900]}}function tH(e="light"){return e==="dark"?{main:$h[400],light:$h[300],dark:$h[700]}:{main:"#ed6c02",light:$h[500],dark:$h[900]}}function rH(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,l=qt(e,K7),d=e.primary||X7(t),m=e.secondary||J7(t),c=e.error||Y7(t),b=e.info||Q7(t),w=e.success||eH(t),T=e.warning||tH(t);function z(W){return P7(W,n_.text.primary)>=r?n_.text.primary:ik.text.primary}const P=({color:W,name:J,mainShade:j=500,lightShade:$=300,darkShade:G=700})=>{if(W=K({},W),!W.main&&W[j]&&(W.main=W[j]),!W.hasOwnProperty("main"))throw new Error($p(11,J?` (${J})`:"",j));if(typeof W.main!="string")throw new Error($p(12,J?` (${J})`:"",JSON.stringify(W.main)));return ok(W,"light",$,o),ok(W,"dark",G,o),W.contrastText||(W.contrastText=z(W.main)),W},U={dark:n_,light:ik};return rs(K({common:K({},Bp),mode:t,primary:P({color:d,name:"primary"}),secondary:P({color:m,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:c,name:"error"}),warning:P({color:T,name:"warning"}),info:P({color:b,name:"info"}),success:P({color:w,name:"success"}),grey:V7,contrastThreshold:r,getContrastText:z,augmentColor:P,tonalOffset:o},U[t]),l)}const nH=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function iH(e){return Math.round(e*1e5)/1e5}const ak={textTransform:"uppercase"},sk='"Roboto", "Helvetica", "Arial", sans-serif';function oH(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=sk,fontSize:l=14,fontWeightLight:d=300,fontWeightRegular:m=400,fontWeightMedium:c=500,fontWeightBold:b=700,htmlFontSize:w=16,allVariants:T,pxToRem:z}=r,P=qt(r,nH),U=l/14,H=z||(j=>`${j/w*U}rem`),W=(j,$,G,te,ie)=>K({fontFamily:o,fontWeight:j,fontSize:H($),lineHeight:G},o===sk?{letterSpacing:`${iH(te/$)}em`}:{},ie,T),J={h1:W(d,96,1.167,-1.5),h2:W(d,60,1.2,-.5),h3:W(m,48,1.167,0),h4:W(m,34,1.235,.25),h5:W(m,24,1.334,0),h6:W(c,20,1.6,.15),subtitle1:W(m,16,1.75,.15),subtitle2:W(c,14,1.57,.1),body1:W(m,16,1.5,.15),body2:W(m,14,1.43,.15),button:W(c,14,1.75,.4,ak),caption:W(m,12,1.66,.4),overline:W(m,12,2.66,1,ak),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return rs(K({htmlFontSize:w,pxToRem:H,fontFamily:o,fontSize:l,fontWeightLight:d,fontWeightRegular:m,fontWeightMedium:c,fontWeightBold:b},J),P,{clone:!1})}const aH=.2,sH=.14,lH=.12;function _n(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${aH})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${sH})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${lH})`].join(",")}const cH=["none",_n(0,2,1,-1,0,1,1,0,0,1,3,0),_n(0,3,1,-2,0,2,2,0,0,1,5,0),_n(0,3,3,-2,0,3,4,0,0,1,8,0),_n(0,2,4,-1,0,4,5,0,0,1,10,0),_n(0,3,5,-1,0,5,8,0,0,1,14,0),_n(0,3,5,-1,0,6,10,0,0,1,18,0),_n(0,4,5,-2,0,7,10,1,0,2,16,1),_n(0,5,5,-3,0,8,10,1,0,3,14,2),_n(0,5,6,-3,0,9,12,1,0,3,16,2),_n(0,6,6,-3,0,10,14,1,0,4,18,3),_n(0,6,7,-4,0,11,15,1,0,4,20,3),_n(0,7,8,-4,0,12,17,2,0,5,22,4),_n(0,7,8,-4,0,13,19,2,0,5,24,4),_n(0,7,9,-4,0,14,21,2,0,5,26,4),_n(0,8,9,-5,0,15,22,2,0,6,28,5),_n(0,8,10,-5,0,16,24,2,0,6,30,5),_n(0,8,11,-5,0,17,26,2,0,6,32,5),_n(0,9,11,-5,0,18,28,2,0,7,34,6),_n(0,9,12,-6,0,19,29,2,0,7,36,6),_n(0,10,13,-6,0,20,31,3,0,8,38,7),_n(0,10,13,-6,0,21,33,3,0,8,40,7),_n(0,10,14,-6,0,22,35,3,0,8,42,7),_n(0,11,14,-7,0,23,36,3,0,9,44,8),_n(0,11,15,-7,0,24,38,3,0,9,46,8)],uH=["duration","easing","delay"],dH={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},hH={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function lk(e){return`${Math.round(e)}ms`}function pH(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function fH(e){const t=K({},dH,e.easing),r=K({},hH,e.duration);return K({getAutoHeightDuration:pH,create:(l=["all"],d={})=>{const{duration:m=r.standard,easing:c=t.easeInOut,delay:b=0}=d;return qt(d,uH),(Array.isArray(l)?l:[l]).map(w=>`${w} ${typeof m=="string"?m:lk(m)} ${c} ${typeof b=="string"?b:lk(b)}`).join(",")}},e,{easing:t,duration:r})}const mH={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},gH=mH,yH=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function vH(e={},...t){const{mixins:r={},palette:o={},transitions:l={},typography:d={}}=e,m=qt(e,yH);if(e.vars)throw new Error($p(18));const c=rH(o),b=yb(e);let w=rs(b,{mixins:C7(b.breakpoints,r),palette:c,shadows:cH.slice(),typography:oH(c,d),transitions:fH(l),zIndex:K({},gH)});return w=rs(w,m),w=t.reduce((T,z)=>rs(T,z),w),w.unstable_sxConfig=K({},af,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(z){return lv({sx:z,theme:this})},w}const _H=vH(),Hz=_H,Wz="$$material";function xH({props:e,name:t}){return _7({props:e,name:t,defaultTheme:Hz,themeId:Wz})}var sf={};const bH=Ms(mD);var i_={exports:{}},ck;function wH(){return ck||(ck=1,function(e){function t(r,o){if(r==null)return{};var l={},d=Object.keys(r),m,c;for(c=0;c<d.length;c++)m=d[c],!(o.indexOf(m)>=0)&&(l[m]=r[m]);return l}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(i_)),i_.exports}const SH=Ms(f7),CH=Ms(t9),kH=Ms(a9),TH=Ms(o9),IH=Ms(l7),PH=Ms(S7);var pd=Bz;Object.defineProperty(sf,"__esModule",{value:!0});var EH=sf.default=VH;sf.shouldForwardProp=rg;sf.systemDefaultTheme=void 0;var Jo=pd(bH),bx=pd(wH()),uk=$H(SH),zH=CH;pd(kH);pd(TH);var AH=pd(IH),MH=pd(PH);const DH=["ownerState"],RH=["variants"],LH=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Gz(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Gz=function(o){return o?r:t})(e)}function $H(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Gz(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var m=l?Object.getOwnPropertyDescriptor(e,d):null;m&&(m.get||m.set)?Object.defineProperty(o,d,m):o[d]=e[d]}return o.default=e,r&&r.set(e,o),o}function BH(e){return Object.keys(e).length===0}function OH(e){return typeof e=="string"&&e.charCodeAt(0)>96}function rg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const FH=sf.systemDefaultTheme=(0,AH.default)(),NH=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Bm({defaultTheme:e,theme:t,themeId:r}){return BH(t)?e:t[r]||t}function jH(e){return e?(t,r)=>r[e]:null}function ng(e,t){let{ownerState:r}=t,o=(0,bx.default)(t,DH);const l=typeof e=="function"?e((0,Jo.default)({ownerState:r},o)):e;if(Array.isArray(l))return l.flatMap(d=>ng(d,(0,Jo.default)({ownerState:r},o)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:d=[]}=l;let c=(0,bx.default)(l,RH);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props((0,Jo.default)({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style((0,Jo.default)({ownerState:r},o,r)):b.style))}),c}return l}function VH(e={}){const{themeId:t,defaultTheme:r=FH,rootShouldForwardProp:o=rg,slotShouldForwardProp:l=rg}=e,d=m=>(0,MH.default)((0,Jo.default)({},m,{theme:Bm((0,Jo.default)({},m,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(m,c={})=>{(0,uk.internal_processStyles)(m,ie=>ie.filter(me=>!(me!=null&&me.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:z,overridesResolver:P=jH(NH(w))}=c,U=(0,bx.default)(c,LH),H=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,W=z||!1;let J,j=rg;w==="Root"||w==="root"?j=o:w?j=l:OH(m)&&(j=void 0);const $=(0,uk.default)(m,(0,Jo.default)({shouldForwardProp:j,label:J},U)),G=ie=>typeof ie=="function"&&ie.__emotion_real!==ie||(0,zH.isPlainObject)(ie)?me=>ng(ie,(0,Jo.default)({},me,{theme:Bm({theme:me.theme,defaultTheme:r,themeId:t})})):ie,te=(ie,...me)=>{let Z=G(ie);const de=me?me.map(G):[];b&&P&&de.push(De=>{const ke=Bm((0,Jo.default)({},De,{defaultTheme:r,themeId:t}));if(!ke.components||!ke.components[b]||!ke.components[b].styleOverrides)return null;const Ee=ke.components[b].styleOverrides,He={};return Object.entries(Ee).forEach(([Fe,Ae])=>{He[Fe]=ng(Ae,(0,Jo.default)({},De,{theme:ke}))}),P(De,He)}),b&&!H&&de.push(De=>{var ke;const Ee=Bm((0,Jo.default)({},De,{defaultTheme:r,themeId:t})),He=Ee==null||(ke=Ee.components)==null||(ke=ke[b])==null?void 0:ke.variants;return ng({variants:He},(0,Jo.default)({},De,{theme:Ee}))}),W||de.push(d);const Te=de.length-me.length;if(Array.isArray(ie)&&Te>0){const De=new Array(Te).fill("");Z=[...ie,...De],Z.raw=[...ie.raw,...De]}const ve=$(Z,...de);return m.muiName&&(ve.muiName=m.muiName),ve};return $.withConfig&&(te.withConfig=$.withConfig),te}}function UH(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const HH=e=>UH(e)&&e!=="classes",WH=HH,GH=EH({themeId:Wz,defaultTheme:Hz,rootShouldForwardProp:WH});function qH(e){return zz("MuiSvgIcon",e)}d9("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const ZH=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],KH=e=>{const{color:t,fontSize:r,classes:o}=e,l={root:["root",t!=="inherit"&&`color${yc(t)}`,`fontSize${yc(r)}`]};return s9(l,qH,o)},XH=GH("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${yc(r.color)}`],t[`fontSize${yc(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,l,d,m,c,b,w,T,z,P,U,H;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(l=e.transitions)==null||(l=l.duration)==null?void 0:l.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(m=d.pxToRem)==null?void 0:m.call(d,20))||"1.25rem",medium:((c=e.typography)==null||(b=c.pxToRem)==null?void 0:b.call(c,24))||"1.5rem",large:((w=e.typography)==null||(T=w.pxToRem)==null?void 0:T.call(w,35))||"2.1875rem"}[t.fontSize],color:(z=(P=(e.vars||e).palette)==null||(P=P[t.color])==null?void 0:P.main)!=null?z:{action:(U=(e.vars||e).palette)==null||(U=U.action)==null?void 0:U.active,disabled:(H=(e.vars||e).palette)==null||(H=H.action)==null?void 0:H.disabled,inherit:void 0}[t.color]}}),wx=O.forwardRef(function(t,r){const o=xH({props:t,name:"MuiSvgIcon"}),{children:l,className:d,color:m="inherit",component:c="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:z,viewBox:P="0 0 24 24"}=o,U=qt(o,ZH),H=O.isValidElement(l)&&l.type==="svg",W=K({},o,{color:m,component:c,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:P,hasSvgAsChild:H}),J={};T||(J.viewBox=P);const j=KH(W);return ae.jsxs(XH,K({as:c,className:ji(j.root,d),focusable:"false",color:w,"aria-hidden":z?void 0:!0,role:z?"img":void 0,ref:r},J,U,H&&l.props,{ownerState:W,children:[H?l.props.children:l,z?ae.jsx("title",{children:z}):null]}))});wx.muiName="SvgIcon";function qz(e,t){function r(o,l){return ae.jsx(wx,K({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return r.muiName=wx.muiName,O.memo(O.forwardRef(r))}const JH=qz(ae.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),YH=qz(ae.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),Zz={[ni.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[ni.Toll]:{iconName:"toll_ico",label:"Toll gate"},[ni.Parking]:{iconName:"parking_ico",label:"Rest stop"},[ni.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[ni.Service]:{iconName:"service_ico",label:"Service"},[ni.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[ni.Port]:{iconName:"port_overlay",label:"Port"},[ni.Train]:{iconName:"train_ico",label:"Train"},[ni.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[ni.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[ni.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[ni.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[ni.Garage]:{iconName:"garage_large_ico",label:"Garage"},[ni.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[ni.CityNames]:{iconName:"city_names_ico",label:"City names"},[ni.Company]:{iconName:"companies_ico",label:"Companies"},[ni.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},dk=new Map(Object.entries(Zz).map(([e,t])=>[Number(e),t.label])),hk=new Map(Object.entries(v8).map(([e,t])=>[Number(e),t]));function Ug(e,t,r){return{selectedItems:e,onSelectAllToggle:o=>t(new Set(o?r:[])),onItemToggle:(o,l)=>{t(d=>{const m=new Set(d);return l?m.add(o):m.delete(o),m})}}}const Kz=e=>{const[t,r]=O.useState(!1),[o,l]=O.useState(0);return ae.jsxs(ae.Fragment,{children:[ae.jsx(aE,{title:"Map Options",variant:"outlined",sx:{backgroundColor:"background.body",position:"absolute",left:0,bottom:0,m:2},onClick:()=>r(!0),children:ae.jsx(YH,{})}),ae.jsx(IE,{open:t,onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:2,boxShadow:"none",justifyContent:"end"}}},children:ae.jsxs(zE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[ae.jsx(xE,{children:"Map Options"}),ae.jsx(EE,{}),ae.jsx(cC,{onChange:(d,m)=>l(Number(m)),children:ae.jsxs(Ej,{tabFlex:1,sx:{borderRadius:0},children:[ae.jsx(sC,{children:"Icons"}),ae.jsx(sC,{children:"ATS DLC"})]})}),ae.jsx(_E,{sx:{overflowX:"hidden"},children:ae.jsxs(cC,{value:o,children:[ae.jsx(lC,{sx:{p:0},value:0,children:ae.jsx(pk,{items:dk,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:d=>ae.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${Zz[d].iconName}.png`})})}),ae.jsx(lC,{sx:{p:0},value:1,children:ae.jsx(pk,{items:hk,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})})]})}),ae.jsx(SE,{}),o===0&&ae.jsx(QH,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===dk.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),o===1&&ae.jsx(tW,{enableSelectAll:e.atsDlcs.selectedItems.size===hk.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},QH=O.memo(e=>ae.jsxs(AE,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[ae.jsx(Gj,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:ae.jsx(zp,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),ae.jsx(zp,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),eW=e=>ae.jsx(qy,{size:"lg",sx:{p:0,[`& .${lc.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var o;return ae.jsxs(Hy,{children:[(o=e.icon)==null?void 0:o.call(e,t),ae.jsx(zp,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:l=>e.onItemToggle(t,l.target.checked)})]},String(t))})}),pk=O.memo(eW),tW=O.memo(e=>ae.jsx(AE,{direction:"row",justifyContent:"end",gap:1,mx:2,children:ae.jsx(zp,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),fk=[{label:"ATS",value:"usa"},{label:"ETS2",value:"europe"}],rW=({map:e,onSelect:t})=>ae.jsx("div",{style:{width:90,margin:10,display:"inline-block"},children:ae.jsx(cj,{value:e,onChange:(r,o)=>t(di(fk.find(l=>l.value===o))),children:fk.map(r=>ae.jsx(KN,{value:r.value,children:r.label},r.value))})}),nW=e=>{const{map:t,onSelect:r}=e,[o,l]=O.useState([]);O.useEffect(()=>{Promise.all([fetch("cities.geojson").then(c=>c.json()),fetch(Sz).then(c=>c.json())]).then(([c,b])=>{l(oW(c,b))},()=>console.error("could not load cities/towns geojson."))},[]);const d=o.filter(c=>{const b=c.map===t;return t==="europe"?b:b&&e.visibleStates.has(c.stateCode)}),m=WP({stringify:c=>[c.state,c.label].join(" ")});return ae.jsx("div",{style:{width:250,margin:10,marginLeft:0,display:"inline-block"},children:ae.jsx(sx,{onChange:(c,b)=>b&&r(b),placeholder:"Fly to...",options:d,filterOptions:m,groupBy:c=>c.state,blurOnSelect:!0,autoComplete:!0,renderGroup:iW},t)})};function iW(e){return ae.jsxs(ae.Fragment,{children:[ae.jsx(Xy,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),ae.jsx(qy,{children:e.children}),ae.jsx(PE,{})]})}function oW(e,t){const r=[],o=new Map;for(const l of e.features)if(l.properties.type==="city")r.push(l);else if(l.properties.type==="country")o.set(l.properties.code,l.properties.name);else throw new Error;for(const l of t.features)r.push({type:"Feature",geometry:l.geometry,properties:{type:"city",map:"usa",countryCode:l.properties.state,name:l.properties.name}});return r.map(({properties:l,geometry:d})=>({map:l.map,state:di(o.get(l.countryCode)),stateCode:l.countryCode,label:l.name,value:d.coordinates})).sort((l,d)=>l.state!==d.state?l.state.localeCompare(d.state):l.label.localeCompare(d.label))}const aW=e=>{const{current:t}=ub(),r=localStorage.getItem("tm-map")==="europe"?{label:"ETS2",value:"europe"}:{label:"ATS",value:"usa"},[o,l]=O.useState(r),d=a_.useCallback(c=>{c!=null&&(l(c),localStorage.setItem("tm-map",c.value),t&&(c.value==="europe"?t.flyTo({curve:1,zoom:9,center:[8,50]}):t.flyTo({curve:1,zoom:9,center:[-108,40]})))},[t]),m=a_.useCallback(c=>{t==null||c==null||(t.flyTo({curve:1,zoom:9,center:c.value.map(b=>Number(b.toFixed(3)))}),t.once("moveend",b=>{const{lat:w,lng:T}=b.target.getCenter(),z=b.target.getZoom(),P=Number(b.target.getBearing().toFixed(1)),U=Math.round(b.target.getPitch());U?window.location.hash=`${z}/${w.toFixed(3)}/${T.toFixed(3)}/${P}/${U}`:P?window.location.hash=`${z}/${w.toFixed(3)}/${T.toFixed(3)}/${P}`:window.location.hash=`${z}/${w.toFixed(3)}/${T.toFixed(3)}`}))},[t]);return ae.jsxs(ae.Fragment,{children:[ae.jsx(rW,{map:o.value,onSelect:d}),ae.jsx(nW,{map:o.value,onSelect:m,visibleStates:e.visibleStates})]})},o_=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},sW=()=>{const e=O.useRef(null),[t,r]=O.useState(!1),[o,l]=O.useState(!1),[d,m]=O.useState(window.location.origin),c=ub();return dd(()=>({onAdd:()=>di(e.current),onRemove:()=>di(e.current).remove()})),O.useEffect(()=>{const b=c.current;if(!b||!t)return;const w=()=>{const P=b.getCenter(),U=b.getBearing(),H=b.getPitch(),W=U||H?[U,H]:[],J=b.getZoom(),j=T?"?"+new URLSearchParams({mlat:String(o_(T.getLngLat().lat,2)),mlon:String(o_(T.getLngLat().lng,2))}).toString():"",$="#"+[J,P.lat,P.lng,...W].map(G=>o_(G,2)).join("/");m(window.location.origin+j+$)};let T,z;if(o){T=new db.Marker,T.setLngLat(b.getCenter()).setDraggable(!0).addTo(b.getMap());let P=!0;z=()=>P&&T.setLngLat(b.getCenter()),T.on("dragend",()=>{P=!1,b.easeTo({center:T==null?void 0:T.getLngLat()}),b.once("moveend",()=>P=!0)})}return w(),b.on("moveend",w),z&&b.on("move",z),()=>{b.off("moveend",w),z&&b.off("move",z),T==null||T.remove()}},[c,t,o]),ae.jsxs("div",{ref:e,children:[ae.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:ae.jsx(aE,{sx:{minWidth:0,minHeight:0},title:"Share",onClick:()=>r(!t),children:ae.jsx(JH,{})})}),ae.jsx(IE,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:ae.jsxs(zE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[ae.jsx(xE,{children:"Share"}),ae.jsx(EE,{}),ae.jsx(SE,{}),ae.jsxs(_E,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[ae.jsx(Xy,{children:"Share a link to this map"}),ae.jsx(ZF,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:b=>b.target.select(),value:d,endDecorator:ae.jsx(j6,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard ")),children:"Copy"})}),ae.jsx(zp,{label:"Include marker",checked:o,onChange:b=>l(b.target.checked)})]})]})})]})};function Xz(e){return new Set([...e].map(lW).concat(Oi.CA))}function lW(e){switch(e){case eo.Arizona:return Oi.AZ;case eo.Colorado:return Oi.CO;case eo.Idaho:return Oi.ID;case eo.Kansas:return Oi.KS;case eo.Montana:return Oi.MT;case eo.Nebraska:return Oi.NE;case eo.Nevada:return Oi.NV;case eo.NewMexico:return Oi.NM;case eo.Oklahoma:return Oi.OK;case eo.Oregon:return Oi.OR;case eo.Texas:return Oi.TX;case eo.Utah:return Oi.UT;case eo.Washington:return Oi.WA;case eo.Wyoming:return Oi.WY;default:throw new xz(e)}}const mk=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,cW=()=>{const[e]=y8(),t=Number(e.get("mlat")),r=Number(e.get("mlon")),o=mk(t,[-90,90])&&mk(r,[-180,180])?{lat:t,lon:r}:void 0,[l,d]=O.useState(!0),[m,c]=O.useState(new Set(Lp)),[b,w]=O.useState(new Set(Dp)),T=Xz(b),z=Ug(m,c,Lp),P=Ug(b,w,Dp);return ae.jsxs(YE,{style:{width:"100vw",height:"100vh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:kz,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[o&&ae.jsx(oU,{longitude:o.lon,latitude:o.lat}),ae.jsx(_z,{}),ae.jsx(_x,{game:"ats",enableIconAutoHide:l,visibleIcons:m,dlcs:b}),ae.jsx(_x,{game:"ets2",enableIconAutoHide:l,visibleIcons:m}),m.has(ni.CityNames)&&ae.jsx(Cz,{enableAutoHide:l,enabledStates:T}),ae.jsx(tz,{visualizePitch:!0}),ae.jsx(ez,{}),ae.jsx(sW,{}),ae.jsx(QE,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),ae.jsx(aW,{visibleStates:T}),ae.jsx(Kz,{icons:{...z,enableAutoHiding:l,onAutoHidingToggle:d},atsDlcs:P})]})};function uW(e,t){return hW(e,t,(r,o,l,d)=>Math.sqrt(Math.pow(l-r,2)+Math.pow(d-o,2)))}function dW(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),o=Math.max(o,d[0]),r=Math.min(r,d[1]),l=Math.max(l,d[1])):(t=Math.min(t,d.x),o=Math.max(o,d.x),r=Math.min(r,d.y),l=Math.max(l,d.y));return[t,r,o,l]}function hW(e,t,r){let o,l;Array.isArray(e)?(Rp.checkArgument(e.length>=2),o=e[0],l=e[1]):(o=e.x,l=e.y);let d,m;return Array.isArray(t)?(Rp.checkArgument(t.length>=2),d=t[0],m=t[1]):(d=t.x,m=t.y),r(o,l,d,m)}var pW=Object.defineProperty,fW=(e,t,r)=>t in e?pW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mW=(e,t,r)=>(fW(e,typeof t!="symbol"?t+"":t,r),r);class gW{constructor(t){mW(this,"_kind"),this._kind=t}}function yW(e,t){const r=e.toString(),o=t.toString();return r>o?1:r<o?-1:0}const vW=yW;var _W=Object.defineProperty,xW=(e,t,r)=>t in e?_W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gk=(e,t,r)=>(xW(e,typeof t!="symbol"?t+"":t,r),r);function bW(e,t,r){const o=t*2,l=t*2+1;let d=t;return o<e.length&&r(e[d],e[o])<0&&(d=o),l<e.length&&r(e[d],e[l])<0&&(d=l),d}function bb(e,t,r){const o=bW(e,t,r);if(o!==t){const l=e[t];e[t]=e[o],e[o]=l,bb(e,o,r)}}function yk(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)bb(e.collection,t,e.comparator)}class Hg extends gW{constructor({comparator:t=vW}={}){super("BinaryHeap"),gk(this,"comparator"),gk(this,"collection",[]),this.comparator=t}static from(t,r={}){const o=new Hg(r);return o.collection=Array.from(t),yk(o),o}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),bb(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let o=r.length-1,l=Math.floor(o/2);o>0&&this.comparator(r[l],r[o])<0;o=l,l=Math.floor(l/2)){const d=r[o];r[o]=r[l],r[l]=d}}merge(t){t instanceof Hg?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),yk(this),t.clear()}isEmpty(){return!this.collection.length}}function wW(e,t,r,o,l){const{nodeLUT:d,graph:m}=l,c=di(d.get(e)),b=di(d.get(t)),w=new CW({comparator:(j,$)=>{const G=W.get(j)??1/0;return(W.get($)??1/0)-G}}),T={nodeId:e,distance:0,direction:r,dlcGuard:-1};w.push(T);const z=new Map,P=new Map;P.set(T,0);const U=j=>uW(j,b),H=(j,$)=>{switch(o){case"shortest":return $.distance;case"smallRoads":return $.isOneLaneRoad?$.distance:$.distance*10;default:throw new xz(o)}},W=new Map;W.set(T,U(c));let J=0;for(;!w.isEmpty();){J++;const j=w.pop();if(j.nodeId===t)return SW(z,j);const $=m.get(j.nodeId);if(!$)continue;const G=j.direction==="forward"?$.forward:$.backward;for(const te of G){if(!l.enabledDlcGuards.has(te.dlcGuard))continue;const ie=(P.get(j)??1/0)+H(j,te);ie<(P.get(te)??1/0)&&(z.set(te,j),P.set(te,ie),W.set(te,ie+U(di(d.get(te.nodeId)))),w.has(te)||w.push(te))}}console.warn(`no ${r} route found from`,c,"and",b,`(${J} iterations)`)}function SW(e,t){let r=0;const o=[t];for(;e.has(t);)t=e.get(t),o.unshift(t),r+=t.distance;return o.length===1&&o.push(o[0]),{route:o,distance:r}}class CW extends Hg{constructor(r){super(r);rS(this,"items",new Set)}has(r){return this.items.has(r)}push(r){Rp.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return Rp.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const o of this.collection)this.items.add(o)}}const kW=()=>{const[e,t]=O.useState(!0),[r,o]=O.useState(new Set(Lp)),[l,d]=O.useState(new Set(Dp)),m=Xz(l),c=Ug(r,o,Lp),b=Ug(l,d,Dp);return ae.jsxs(YE,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:kz,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[ae.jsx(_z,{}),ae.jsx(_x,{game:"ats",enableIconAutoHide:e,visibleIcons:r,dlcs:l}),ae.jsx(Cz,{enableAutoHide:e,enabledStates:m}),ae.jsx(tf,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:ae.jsx(Ur,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),ae.jsx(tz,{visualizePitch:!0}),ae.jsx(ez,{}),ae.jsx(QE,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),ae.jsx(TW,{dlcs:l}),ae.jsx(Kz,{icons:{...c,enableAutoHiding:e,onAutoHidingToggle:t},atsDlcs:b})]})},TW=e=>{const{current:t}=ub(),r=KE(e.dlcs),[o,l]=O.useState(void 0),[d,m]=O.useState(void 0),[c,b]=O.useState([]),[w,T]=O.useState([]);O.useEffect(()=>{fetch("usa-graph-demo.json").then(Z=>Z.json()).then(Z=>{b(Z.demoCompanies.map(xk)),m(IW(Z)),l(Z)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[z,P]=O.useState(void 0),[U,H]=O.useState(void 0),W=O.useCallback(Z=>{Z=di(Z),P(Z.value);let de;if(o!=null){de=di(o.demoCompanies.find(De=>De.n===Z.value));const Te=di(o.demoCompanyDefs.find(De=>De.t===de.t)),ve=new Set(Te.d);T(o.demoCompanies.filter(De=>ve.has(De.t)).map(xk))}if(!(t==null||d==null)&&(U!=null&&(di(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),H(void 0)),de)){const Te=di(d.nodeLUT.get(de.n));t.flyTo({curve:1,zoom:9,center:[Te.x,Te.y]})}},[t,U,d,o]),J=O.useCallback(Z=>{Z=di(Z),H(Z.value),!(t==null||d==null)&&j(di(z),Z.value,t,{...d,enabledDlcGuards:r})},[t,z,d,e.dlcs]),j=(Z,de,Te,ve)=>{Promise.all([bk(Z,de,"shortest",ve),bk(Z,de,"smallRoads",ve)]).then(De=>{const ke=di(Te.getSource("route1"));if(De.some(He=>He==null)){alert("Cannot calculate a route "),ke.setData({type:"FeatureCollection",features:[]});return}const Ee=De;ke.setData({type:"FeatureCollection",features:Ee}),Te.fitBounds(dW(Ee.flatMap(He=>He.geometry.coordinates)),{padding:150,curve:1,duration:2500})},De=>{console.error("error finding route",De)})},$=new Map;if(o)for(const[,Z]of o.demoGraph)for(const de of[...Z.b??[],...Z.f??[]]){const Te=$.get(de.n)??0;$.set(de.n,Te||de.g)}const G=Z=>{if(d==null)return!0;const de=di($.get(Z.value));return r.has(de)},te=(Z,de)=>Z.city!==de.city?Z.city.localeCompare(de.city):Z.label.localeCompare(de.label),ie=c.filter(G).sort(te),me=w.filter(G).sort(te);return ae.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[ae.jsx("h2",{children:"Start"}),ae.jsx(sx,{options:ie,onChange:(Z,de)=>de&&W(de),groupBy:Z=>Z.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:vk}),ae.jsx("h2",{children:"End"}),ae.jsx(sx,{options:me,onChange:(Z,de)=>de&&J(de),groupBy:Z=>Z.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:z==null,renderGroup:vk},z)]})};function vk(e){return ae.jsxs(ae.Fragment,{children:[ae.jsx(Xy,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),ae.jsx(qy,{children:e.children}),ae.jsx(PE,{})]})}function IW(e){const t=new Map,r=new Map;for(const[o,l]of e.demoGraph)t.set(o,{forward:(l.f??[]).map(_k),backward:(l.b??[]).map(_k)});for(const[o,l]of e.demoNodes)r.set(o,{x:l[0],y:l[1]});return{graph:t,nodeLUT:r}}function _k(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function xk(e){return{label:e.t,city:e.c,value:e.n}}function bk(e,t,r,o){return new Promise(l=>{const d=wW(e,t,"forward",r,o);if(!d){l(void 0);return}l({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(m=>{const c=di(o.nodeLUT.get(m.nodeId));return[c.x,c.y]})},properties:{distance:d.distance,mode:r}})})}const PW=a8(fx([ae.jsx(px,{path:"/",element:ae.jsx(cW,{})}),ae.jsx(px,{path:"routes",element:ae.jsx(kW,{})})])),EW=document.getElementById("root"),zW=ME(EW);zW.render(ae.jsx(O.StrictMode,{children:ae.jsxs(L5,{children:[ae.jsx(oN,{}),ae.jsx(m8,{router:PW})]})}));
