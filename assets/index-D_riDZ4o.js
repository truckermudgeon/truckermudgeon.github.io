function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var OA=Object.defineProperty;var FA=(e,t,n)=>t in e?OA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cw=(e,t,n)=>(FA(e,typeof t!="symbol"?t+"":t,n),n);function Z_(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const h=Object.getOwnPropertyDescriptor(a,c);h&&Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const g of h.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function n(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(c){if(c.ep)return;c.ep=!0;const h=n(c);fetch(c.href,h)}})();var NA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ks(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),n}var BC={exports:{}},Ag={},OC={exports:{}},Pr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=Symbol.for("react.element"),jA=Symbol.for("react.portal"),VA=Symbol.for("react.fragment"),UA=Symbol.for("react.strict_mode"),HA=Symbol.for("react.profiler"),WA=Symbol.for("react.provider"),GA=Symbol.for("react.context"),qA=Symbol.for("react.forward_ref"),ZA=Symbol.for("react.suspense"),KA=Symbol.for("react.memo"),XA=Symbol.for("react.lazy"),kw=Symbol.iterator;function JA(e){return e===null||typeof e!="object"?null:(e=kw&&e[kw]||e["@@iterator"],typeof e=="function"?e:null)}var FC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NC=Object.assign,jC={};function Gu(e,t,n){this.props=e,this.context=t,this.refs=jC,this.updater=n||FC}Gu.prototype.isReactComponent={};Gu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function VC(){}VC.prototype=Gu.prototype;function X_(e,t,n){this.props=e,this.context=t,this.refs=jC,this.updater=n||FC}var J_=X_.prototype=new VC;J_.constructor=X_;NC(J_,Gu.prototype);J_.isPureReactComponent=!0;var Tw=Array.isArray,UC=Object.prototype.hasOwnProperty,Y_={current:null},HC={key:!0,ref:!0,__self:!0,__source:!0};function WC(e,t,n){var a,c={},h=null,g=null;if(t!=null)for(a in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(h=""+t.key),t)UC.call(t,a)&&!HC.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=n;else if(1<l){for(var b=Array(l),C=0;C<l;C++)b[C]=arguments[C+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:kp,type:e,key:h,ref:g,props:c,_owner:Y_.current}}function YA(e,t){return{$$typeof:kp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Q_(e){return typeof e=="object"&&e!==null&&e.$$typeof===kp}function QA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Iw=/\/+/g;function Nv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QA(""+e.key):t.toString(36)}function km(e,t,n,a,c){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(h){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case kp:case jA:g=!0}}if(g)return g=e,c=c(g),e=a===""?"."+Nv(g,0):a,Tw(c)?(n="",e!=null&&(n=e.replace(Iw,"$&/")+"/"),km(c,t,n,"",function(C){return C})):c!=null&&(Q_(c)&&(c=YA(c,n+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(Iw,"$&/")+"/")+e)),t.push(c)),1;if(g=0,a=a===""?".":a+":",Tw(e))for(var l=0;l<e.length;l++){h=e[l];var b=a+Nv(h,l);g+=km(h,t,n,b,c)}else if(b=JA(e),typeof b=="function")for(e=b.call(e),l=0;!(h=e.next()).done;)h=h.value,b=a+Nv(h,l++),g+=km(h,t,n,b,c);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function tm(e,t,n){if(e==null)return e;var a=[],c=0;return km(e,a,"","",function(h){return t.call(n,h,c++)}),a}function eM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ro={current:null},Tm={transition:null},tM={ReactCurrentDispatcher:ro,ReactCurrentBatchConfig:Tm,ReactCurrentOwner:Y_};Pr.Children={map:tm,forEach:function(e,t,n){tm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tm(e,function(){t++}),t},toArray:function(e){return tm(e,function(t){return t})||[]},only:function(e){if(!Q_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pr.Component=Gu;Pr.Fragment=VA;Pr.Profiler=HA;Pr.PureComponent=X_;Pr.StrictMode=UA;Pr.Suspense=ZA;Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tM;Pr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=NC({},e.props),c=e.key,h=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,g=Y_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)UC.call(t,b)&&!HC.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=n;else if(1<b){l=Array(b);for(var C=0;C<b;C++)l[C]=arguments[C+2];a.children=l}return{$$typeof:kp,type:e.type,key:c,ref:h,props:a,_owner:g}};Pr.createContext=function(e){return e={$$typeof:GA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WA,_context:e},e.Consumer=e};Pr.createElement=WC;Pr.createFactory=function(e){var t=WC.bind(null,e);return t.type=e,t};Pr.createRef=function(){return{current:null}};Pr.forwardRef=function(e){return{$$typeof:qA,render:e}};Pr.isValidElement=Q_;Pr.lazy=function(e){return{$$typeof:XA,_payload:{_status:-1,_result:e},_init:eM}};Pr.memo=function(e,t){return{$$typeof:KA,type:e,compare:t===void 0?null:t}};Pr.startTransition=function(e){var t=Tm.transition;Tm.transition={};try{e()}finally{Tm.transition=t}};Pr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pr.useCallback=function(e,t){return ro.current.useCallback(e,t)};Pr.useContext=function(e){return ro.current.useContext(e)};Pr.useDebugValue=function(){};Pr.useDeferredValue=function(e){return ro.current.useDeferredValue(e)};Pr.useEffect=function(e,t){return ro.current.useEffect(e,t)};Pr.useId=function(){return ro.current.useId()};Pr.useImperativeHandle=function(e,t,n){return ro.current.useImperativeHandle(e,t,n)};Pr.useInsertionEffect=function(e,t){return ro.current.useInsertionEffect(e,t)};Pr.useLayoutEffect=function(e,t){return ro.current.useLayoutEffect(e,t)};Pr.useMemo=function(e,t){return ro.current.useMemo(e,t)};Pr.useReducer=function(e,t,n){return ro.current.useReducer(e,t,n)};Pr.useRef=function(e){return ro.current.useRef(e)};Pr.useState=function(e){return ro.current.useState(e)};Pr.useSyncExternalStore=function(e,t,n){return ro.current.useSyncExternalStore(e,t,n)};Pr.useTransition=function(){return ro.current.useTransition()};Pr.version="18.2.0";OC.exports=Pr;var V=OC.exports;const z0=K_(V),Wm=Z_({__proto__:null,default:z0},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=V,nM=Symbol.for("react.element"),iM=Symbol.for("react.fragment"),oM=Object.prototype.hasOwnProperty,aM=rM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sM={key:!0,ref:!0,__self:!0,__source:!0};function GC(e,t,n){var a,c={},h=null,g=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(g=t.ref);for(a in t)oM.call(t,a)&&!sM.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:nM,type:e,key:h,ref:g,props:c,_owner:aM.current}}Ag.Fragment=iM;Ag.jsx=GC;Ag.jsxs=GC;BC.exports=Ag;var de=BC.exports;const lh={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Mg="$$joy";function ul(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const lM=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"}));function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Q.apply(this,arguments)}const cM=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));function qC(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var uM=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dM=qC(function(e){return uM.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function hM(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function pM(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var fM=function(){function e(n){var a=this;this._insertTag=function(c){var h;a.tags.length===0?a.insertionPoint?h=a.insertionPoint.nextSibling:a.prepend?h=a.container.firstChild:h=a.before:h=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,h),a.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(pM(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var h=hM(c);try{h.insertRule(a,h.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),$i="-ms-",Gm="-moz-",Nr="-webkit-",ZC="comm",ex="rule",tx="decl",mM="@import",KC="@keyframes",gM="@layer",yM=Math.abs,Dg=String.fromCharCode,vM=Object.assign;function _M(e,t){return wi(e,0)^45?(((t<<2^wi(e,0))<<2^wi(e,1))<<2^wi(e,2))<<2^wi(e,3):0}function XC(e){return e.trim()}function xM(e,t){return(e=t.exec(e))?e[0]:e}function jr(e,t,n){return e.replace(t,n)}function A0(e,t){return e.indexOf(t)}function wi(e,t){return e.charCodeAt(t)|0}function Xh(e,t,n){return e.slice(t,n)}function Va(e){return e.length}function rx(e){return e.length}function rm(e,t){return t.push(e),e}function bM(e,t){return e.map(t).join("")}var Rg=1,Au=1,JC=0,_o=0,Jn=0,qu="";function Lg(e,t,n,a,c,h,g){return{value:e,root:t,parent:n,type:a,props:c,children:h,line:Rg,column:Au,length:g,return:""}}function ch(e,t){return vM(Lg("",null,null,"",null,null,0),e,{length:-e.length},t)}function wM(){return Jn}function SM(){return Jn=_o>0?wi(qu,--_o):0,Au--,Jn===10&&(Au=1,Rg--),Jn}function Ao(){return Jn=_o<JC?wi(qu,_o++):0,Au++,Jn===10&&(Au=1,Rg++),Jn}function Wa(){return wi(qu,_o)}function Im(){return _o}function Tp(e,t){return Xh(qu,e,t)}function Jh(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YC(e){return Rg=Au=1,JC=Va(qu=e),_o=0,[]}function QC(e){return qu="",e}function Pm(e){return XC(Tp(_o-1,M0(e===91?e+2:e===40?e+1:e)))}function CM(e){for(;(Jn=Wa())&&Jn<33;)Ao();return Jh(e)>2||Jh(Jn)>3?"":" "}function kM(e,t){for(;--t&&Ao()&&!(Jn<48||Jn>102||Jn>57&&Jn<65||Jn>70&&Jn<97););return Tp(e,Im()+(t<6&&Wa()==32&&Ao()==32))}function M0(e){for(;Ao();)switch(Jn){case e:return _o;case 34:case 39:e!==34&&e!==39&&M0(Jn);break;case 40:e===41&&M0(e);break;case 92:Ao();break}return _o}function TM(e,t){for(;Ao()&&e+Jn!==57;)if(e+Jn===84&&Wa()===47)break;return"/*"+Tp(t,_o-1)+"*"+Dg(e===47?e:Ao())}function IM(e){for(;!Jh(Wa());)Ao();return Tp(e,_o)}function PM(e){return QC(Em("",null,null,null,[""],e=YC(e),0,[0],e))}function Em(e,t,n,a,c,h,g,l,b){for(var C=0,P=0,A=g,D=0,W=0,Z=0,U=1,J=1,O=1,$=0,N="",ie=c,te=h,ee=a,re=N;J;)switch(Z=$,$=Ao()){case 40:if(Z!=108&&wi(re,A-1)==58){A0(re+=jr(Pm($),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:re+=Pm($);break;case 9:case 10:case 13:case 32:re+=CM(Z);break;case 92:re+=kM(Im()-1,7);continue;case 47:switch(Wa()){case 42:case 47:rm(EM(TM(Ao(),Im()),t,n),b);break;default:re+="/"}break;case 123*U:l[C++]=Va(re)*O;case 125*U:case 59:case 0:switch($){case 0:case 125:J=0;case 59+P:O==-1&&(re=jr(re,/\f/g,"")),W>0&&Va(re)-A&&rm(W>32?Ew(re+";",a,n,A-1):Ew(jr(re," ","")+";",a,n,A-2),b);break;case 59:re+=";";default:if(rm(ee=Pw(re,t,n,C,P,c,l,N,ie=[],te=[],A),h),$===123)if(P===0)Em(re,t,ee,ee,ie,h,A,l,te);else switch(D===99&&wi(re,3)===110?100:D){case 100:case 108:case 109:case 115:Em(e,ee,ee,a&&rm(Pw(e,ee,ee,0,0,c,l,N,c,ie=[],A),te),c,te,A,l,a?ie:te);break;default:Em(re,ee,ee,ee,[""],te,0,l,te)}}C=P=W=0,U=O=1,N=re="",A=g;break;case 58:A=1+Va(re),W=Z;default:if(U<1){if($==123)--U;else if($==125&&U++==0&&SM()==125)continue}switch(re+=Dg($),$*U){case 38:O=P>0?1:(re+="\f",-1);break;case 44:l[C++]=(Va(re)-1)*O,O=1;break;case 64:Wa()===45&&(re+=Pm(Ao())),D=Wa(),P=A=Va(N=re+=IM(Im())),$++;break;case 45:Z===45&&Va(re)==2&&(U=0)}}return h}function Pw(e,t,n,a,c,h,g,l,b,C,P){for(var A=c-1,D=c===0?h:[""],W=rx(D),Z=0,U=0,J=0;Z<a;++Z)for(var O=0,$=Xh(e,A+1,A=yM(U=g[Z])),N=e;O<W;++O)(N=XC(U>0?D[O]+" "+$:jr($,/&\f/g,D[O])))&&(b[J++]=N);return Lg(e,t,n,c===0?ex:l,b,C,P)}function EM(e,t,n){return Lg(e,t,n,ZC,Dg(wM()),Xh(e,2,-2),0)}function Ew(e,t,n,a){return Lg(e,t,n,tx,Xh(e,0,a),Xh(e,a+1,-1),a)}function xu(e,t){for(var n="",a=rx(e),c=0;c<a;c++)n+=t(e[c],c,e,t)||"";return n}function zM(e,t,n,a){switch(e.type){case gM:if(e.children.length)break;case mM:case tx:return e.return=e.return||e.value;case ZC:return"";case KC:return e.return=e.value+"{"+xu(e.children,a)+"}";case ex:e.value=e.props.join(",")}return Va(n=xu(e.children,a))?e.return=e.value+"{"+n+"}":""}function AM(e){var t=rx(e);return function(n,a,c,h){for(var g="",l=0;l<t;l++)g+=e[l](n,a,c,h)||"";return g}}function MM(e){return function(t){t.root||(t=t.return)&&e(t)}}var DM=function(t,n,a){for(var c=0,h=0;c=h,h=Wa(),c===38&&h===12&&(n[a]=1),!Jh(h);)Ao();return Tp(t,_o)},RM=function(t,n){var a=-1,c=44;do switch(Jh(c)){case 0:c===38&&Wa()===12&&(n[a]=1),t[a]+=DM(_o-1,n,a);break;case 2:t[a]+=Pm(c);break;case 4:if(c===44){t[++a]=Wa()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=Dg(c)}while(c=Ao());return t},LM=function(t,n){return QC(RM(YC(t),n))},zw=new WeakMap,$M=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!zw.get(a))&&!c){zw.set(t,!0);for(var h=[],g=LM(n,h),l=a.props,b=0,C=0;b<g.length;b++)for(var P=0;P<l.length;P++,C++)t.props[C]=h[b]?g[b].replace(/&\f/g,l[P]):l[P]+" "+g[b]}}},BM=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function ek(e,t){switch(_M(e,t)){case 5103:return Nr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Nr+e+Gm+e+$i+e+e;case 6828:case 4268:return Nr+e+$i+e+e;case 6165:return Nr+e+$i+"flex-"+e+e;case 5187:return Nr+e+jr(e,/(\w+).+(:[^]+)/,Nr+"box-$1$2"+$i+"flex-$1$2")+e;case 5443:return Nr+e+$i+"flex-item-"+jr(e,/flex-|-self/,"")+e;case 4675:return Nr+e+$i+"flex-line-pack"+jr(e,/align-content|flex-|-self/,"")+e;case 5548:return Nr+e+$i+jr(e,"shrink","negative")+e;case 5292:return Nr+e+$i+jr(e,"basis","preferred-size")+e;case 6060:return Nr+"box-"+jr(e,"-grow","")+Nr+e+$i+jr(e,"grow","positive")+e;case 4554:return Nr+jr(e,/([^-])(transform)/g,"$1"+Nr+"$2")+e;case 6187:return jr(jr(jr(e,/(zoom-|grab)/,Nr+"$1"),/(image-set)/,Nr+"$1"),e,"")+e;case 5495:case 3959:return jr(e,/(image-set\([^]*)/,Nr+"$1$`$1");case 4968:return jr(jr(e,/(.+:)(flex-)?(.*)/,Nr+"box-pack:$3"+$i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nr+e+e;case 4095:case 3583:case 4068:case 2532:return jr(e,/(.+)-inline(.+)/,Nr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Va(e)-1-t>6)switch(wi(e,t+1)){case 109:if(wi(e,t+4)!==45)break;case 102:return jr(e,/(.+:)(.+)-([^]+)/,"$1"+Nr+"$2-$3$1"+Gm+(wi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~A0(e,"stretch")?ek(jr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(wi(e,t+1)!==115)break;case 6444:switch(wi(e,Va(e)-3-(~A0(e,"!important")&&10))){case 107:return jr(e,":",":"+Nr)+e;case 101:return jr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Nr+(wi(e,14)===45?"inline-":"")+"box$3$1"+Nr+"$2$3$1"+$i+"$2box$3")+e}break;case 5936:switch(wi(e,t+11)){case 114:return Nr+e+$i+jr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Nr+e+$i+jr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Nr+e+$i+jr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Nr+e+$i+e+e}return e}var OM=function(t,n,a,c){if(t.length>-1&&!t.return)switch(t.type){case tx:t.return=ek(t.value,t.length);break;case KC:return xu([ch(t,{value:jr(t.value,"@","@"+Nr)})],c);case ex:if(t.length)return bM(t.props,function(h){switch(xM(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xu([ch(t,{props:[jr(h,/:(read-\w+)/,":"+Gm+"$1")]})],c);case"::placeholder":return xu([ch(t,{props:[jr(h,/:(plac\w+)/,":"+Nr+"input-$1")]}),ch(t,{props:[jr(h,/:(plac\w+)/,":"+Gm+"$1")]}),ch(t,{props:[jr(h,/:(plac\w+)/,$i+"input-$1")]})],c)}return""})}},FM=[OM],tk=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(U){var J=U.getAttribute("data-emotion");J.indexOf(" ")!==-1&&(document.head.appendChild(U),U.setAttribute("data-s",""))})}var c=t.stylisPlugins||FM,h={},g,l=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(U){for(var J=U.getAttribute("data-emotion").split(" "),O=1;O<J.length;O++)h[J[O]]=!0;l.push(U)});var b,C=[$M,BM];{var P,A=[zM,MM(function(U){P.insert(U)})],D=AM(C.concat(c,A)),W=function(J){return xu(PM(J),D)};b=function(J,O,$,N){P=$,W(J?J+"{"+O.styles+"}":O.styles),N&&(Z.inserted[O.name]=!0)}}var Z={key:n,sheet:new fM({key:n,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return Z.sheet.hydrate(l),Z},rk={exports:{}},qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pi=typeof Symbol=="function"&&Symbol.for,nx=pi?Symbol.for("react.element"):60103,ix=pi?Symbol.for("react.portal"):60106,$g=pi?Symbol.for("react.fragment"):60107,Bg=pi?Symbol.for("react.strict_mode"):60108,Og=pi?Symbol.for("react.profiler"):60114,Fg=pi?Symbol.for("react.provider"):60109,Ng=pi?Symbol.for("react.context"):60110,ox=pi?Symbol.for("react.async_mode"):60111,jg=pi?Symbol.for("react.concurrent_mode"):60111,Vg=pi?Symbol.for("react.forward_ref"):60112,Ug=pi?Symbol.for("react.suspense"):60113,NM=pi?Symbol.for("react.suspense_list"):60120,Hg=pi?Symbol.for("react.memo"):60115,Wg=pi?Symbol.for("react.lazy"):60116,jM=pi?Symbol.for("react.block"):60121,VM=pi?Symbol.for("react.fundamental"):60117,UM=pi?Symbol.for("react.responder"):60118,HM=pi?Symbol.for("react.scope"):60119;function Lo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nx:switch(e=e.type,e){case ox:case jg:case $g:case Og:case Bg:case Ug:return e;default:switch(e=e&&e.$$typeof,e){case Ng:case Vg:case Wg:case Hg:case Fg:return e;default:return t}}case ix:return t}}}function nk(e){return Lo(e)===jg}qr.AsyncMode=ox;qr.ConcurrentMode=jg;qr.ContextConsumer=Ng;qr.ContextProvider=Fg;qr.Element=nx;qr.ForwardRef=Vg;qr.Fragment=$g;qr.Lazy=Wg;qr.Memo=Hg;qr.Portal=ix;qr.Profiler=Og;qr.StrictMode=Bg;qr.Suspense=Ug;qr.isAsyncMode=function(e){return nk(e)||Lo(e)===ox};qr.isConcurrentMode=nk;qr.isContextConsumer=function(e){return Lo(e)===Ng};qr.isContextProvider=function(e){return Lo(e)===Fg};qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nx};qr.isForwardRef=function(e){return Lo(e)===Vg};qr.isFragment=function(e){return Lo(e)===$g};qr.isLazy=function(e){return Lo(e)===Wg};qr.isMemo=function(e){return Lo(e)===Hg};qr.isPortal=function(e){return Lo(e)===ix};qr.isProfiler=function(e){return Lo(e)===Og};qr.isStrictMode=function(e){return Lo(e)===Bg};qr.isSuspense=function(e){return Lo(e)===Ug};qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$g||e===jg||e===Og||e===Bg||e===Ug||e===NM||typeof e=="object"&&e!==null&&(e.$$typeof===Wg||e.$$typeof===Hg||e.$$typeof===Fg||e.$$typeof===Ng||e.$$typeof===Vg||e.$$typeof===VM||e.$$typeof===UM||e.$$typeof===HM||e.$$typeof===jM)};qr.typeOf=Lo;rk.exports=qr;var WM=rk.exports,ik=WM,GM={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ok={};ok[ik.ForwardRef]=GM;ok[ik.Memo]=qM;var ZM=!0;function KM(e,t,n){var a="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var ak=function(t,n,a){var c=t.key+"-"+n.name;(a===!1||ZM===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},sk=function(t,n,a){ak(t,n,a);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var h=n;do t.insert(n===h?"."+c:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function XM(e){for(var t=0,n,a=0,c=e.length;c>=4;++a,c-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var JM={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},YM=/[A-Z]|^ms/g,QM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lk=function(t){return t.charCodeAt(1)===45},Aw=function(t){return t!=null&&typeof t!="boolean"},jv=qC(function(e){return lk(e)?e:e.replace(YM,"-$&").toLowerCase()}),Mw=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(QM,function(a,c,h){return Ua={name:c,styles:h,next:Ua},c})}return JM[t]!==1&&!lk(t)&&typeof n=="number"&&n!==0?n+"px":n};function Yh(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ua={name:n.name,styles:n.styles,next:Ua},n.name;if(n.styles!==void 0){var a=n.next;if(a!==void 0)for(;a!==void 0;)Ua={name:a.name,styles:a.styles,next:Ua},a=a.next;var c=n.styles+";";return c}return eD(e,t,n)}case"function":{if(e!==void 0){var h=Ua,g=n(e);return Ua=h,Yh(e,t,g)}break}}if(t==null)return n;var l=t[n];return l!==void 0?l:n}function eD(e,t,n){var a="";if(Array.isArray(n))for(var c=0;c<n.length;c++)a+=Yh(e,t,n[c])+";";else for(var h in n){var g=n[h];if(typeof g!="object")t!=null&&t[g]!==void 0?a+=h+"{"+t[g]+"}":Aw(g)&&(a+=jv(h)+":"+Mw(h,g)+";");else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var l=0;l<g.length;l++)Aw(g[l])&&(a+=jv(h)+":"+Mw(h,g[l])+";");else{var b=Yh(e,t,g);switch(h){case"animation":case"animationName":{a+=jv(h)+":"+b+";";break}default:a+=h+"{"+b+"}"}}}return a}var Dw=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ua,ax=function(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,h="";Ua=void 0;var g=t[0];g==null||g.raw===void 0?(c=!1,h+=Yh(a,n,g)):h+=g[0];for(var l=1;l<t.length;l++)h+=Yh(a,n,t[l]),c&&(h+=g[l]);Dw.lastIndex=0;for(var b="",C;(C=Dw.exec(h))!==null;)b+="-"+C[1];var P=XM(h)+b;return{name:P,styles:h,next:Ua}},tD=function(t){return t()},ck=Wm.useInsertionEffect?Wm.useInsertionEffect:!1,rD=ck||tD,Rw=ck||V.useLayoutEffect,uk=V.createContext(typeof HTMLElement<"u"?tk({key:"css"}):null),nD=uk.Provider,dk=function(t){return V.forwardRef(function(n,a){var c=V.useContext(uk);return t(n,c,a)})},Ip=V.createContext({}),iD=dk(function(e,t){var n=e.styles,a=ax([n],void 0,V.useContext(Ip)),c=V.useRef();return Rw(function(){var h=t.key+"-global",g=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+h+" "+a.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",h),g.hydrate([b])),c.current=[g,l],function(){g.flush()}},[t]),Rw(function(){var h=c.current,g=h[0],l=h[1];if(l){h[1]=!1;return}if(a.next!==void 0&&sk(t,a.next,!0),g.tags.length){var b=g.tags[g.tags.length-1].nextElementSibling;g.before=b,g.flush()}t.insert("",a,g,!1)},[t,a.name]),null});function sx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ax(t)}var hk=function(){var t=sx.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},oD=dM,aD=function(t){return t!=="theme"},Lw=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?oD:aD},$w=function(t,n,a){var c;if(n){var h=n.shouldForwardProp;c=t.__emotion_forwardProp&&h?function(g){return t.__emotion_forwardProp(g)&&h(g)}:h}return typeof c!="function"&&a&&(c=t.__emotion_forwardProp),c},sD=function(t){var n=t.cache,a=t.serialized,c=t.isStringTag;return ak(n,a,c),rD(function(){return sk(n,a,c)}),null},lD=function e(t,n){var a=t.__emotion_real===t,c=a&&t.__emotion_base||t,h,g;n!==void 0&&(h=n.label,g=n.target);var l=$w(t,n,a),b=l||Lw(c),C=!b("as");return function(){var P=arguments,A=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&A.push("label:"+h+";"),P[0]==null||P[0].raw===void 0)A.push.apply(A,P);else{A.push(P[0][0]);for(var D=P.length,W=1;W<D;W++)A.push(P[W],P[0][W])}var Z=dk(function(U,J,O){var $=C&&U.as||c,N="",ie=[],te=U;if(U.theme==null){te={};for(var ee in U)te[ee]=U[ee];te.theme=V.useContext(Ip)}typeof U.className=="string"?N=KM(J.registered,ie,U.className):U.className!=null&&(N=U.className+" ");var re=ax(A.concat(ie),J.registered,te);N+=J.key+"-"+re.name,g!==void 0&&(N+=" "+g);var fe=C&&l===void 0?Lw($):b,Te={};for(var be in U)C&&be==="as"||fe(be)&&(Te[be]=U[be]);return Te.className=N,Te.ref=O,V.createElement(V.Fragment,null,V.createElement(sD,{cache:J,serialized:re,isStringTag:typeof $=="string"}),V.createElement($,Te))});return Z.displayName=h!==void 0?h:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",Z.defaultProps=t.defaultProps,Z.__emotion_real=Z,Z.__emotion_base=c,Z.__emotion_styles=A,Z.__emotion_forwardProp=l,Object.defineProperty(Z,"toString",{value:function(){return"."+g}}),Z.withComponent=function(U,J){return e(U,Q({},n,J,{shouldForwardProp:$w(Z,J,!0)})).apply(void 0,A)},Z}},cD=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],D0=lD.bind();cD.forEach(function(e){D0[e]=D0(e)});let R0;typeof document=="object"&&(R0=tk({key:"css",prepend:!0}));function uD(e){const{injectFirst:t,children:n}=e;return t&&R0?de.jsx(nD,{value:R0,children:n}):n}function dD(e){return e==null||Object.keys(e).length===0}function Rh(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?c=>t(dD(c)?n:c):t;return de.jsx(iD,{styles:a})}function pk(e,t){return D0(e,t)}const fk=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},hD=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Rh,StyledEngineProvider:uD,ThemeContext:Ip,css:sx,default:pk,internal_processStyles:fk,keyframes:hk},Symbol.toStringTag,{value:"Module"}));function nr(e,t){if(e==null)return{};var n={},a=Object.keys(e),c,h;for(h=0;h<a.length;h++)c=a[h],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function gs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function mk(e){if(!gs(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=mk(e[n])}),t}function oi(e,t,n={clone:!0}){const a=n.clone?Q({},e):e;return gs(e)&&gs(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(gs(t[c])&&c in e&&gs(e[c])?a[c]=oi(e[c],t[c],n):n.clone?a[c]=gs(t[c])?mk(t[c]):t[c]:a[c]=t[c])}),a}const pD=Object.freeze(Object.defineProperty({__proto__:null,default:oi,isPlainObject:gs},Symbol.toStringTag,{value:"Module"})),fD=["values","unit","step"],mD=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>Q({},n,{[a.key]:a.val}),{})};function lx(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=nr(e,fD),h=mD(t),g=Object.keys(h);function l(D){return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${n})`}function b(D){return`@media (max-width:${(typeof t[D]=="number"?t[D]:D)-a/100}${n})`}function C(D,W){const Z=g.indexOf(W);return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${n}) and (max-width:${(Z!==-1&&typeof t[g[Z]]=="number"?t[g[Z]]:W)-a/100}${n})`}function P(D){return g.indexOf(D)+1<g.length?C(D,g[g.indexOf(D)+1]):l(D)}function A(D){const W=g.indexOf(D);return W===0?l(g[1]):W===g.length-1?b(g[W]):C(D,g[g.indexOf(D)+1]).replace("@media","@media not all and")}return Q({keys:g,values:h,up:l,down:b,between:C,only:P,not:A,unit:n},c)}const gD={borderRadius:4},yD=gD;function Lh(e,t){return t?oi(e,t,{clone:!1}):e}const cx={xs:0,sm:600,md:900,lg:1200,xl:1536},Bw={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${cx[e]}px)`};function Ia(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const h=a.breakpoints||Bw;return t.reduce((g,l,b)=>(g[h.up(h.keys[b])]=n(t[b]),g),{})}if(typeof t=="object"){const h=a.breakpoints||Bw;return Object.keys(t).reduce((g,l)=>{if(Object.keys(h.values||cx).indexOf(l)!==-1){const b=h.up(l);g[b]=n(t[l],l)}else{const b=l;g[b]=t[b]}return g},{})}return n(t)}function gk(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((a,c)=>{const h=e.up(c);return a[h]={},a},{}))||{}}function yk(e,t){return e.reduce((n,a)=>{const c=n[a];return(!c||Object.keys(c).length===0)&&delete n[a],n},t)}function vD(e,...t){const n=gk(e),a=[n,...t].reduce((c,h)=>oi(c,h),{});return yk(Object.keys(n),a)}function _D(e,t){if(typeof e!="object")return{};const n={},a=Object.keys(t);return Array.isArray(e)?a.forEach((c,h)=>{h<e.length&&(n[c]=!0)}):a.forEach(c=>{e[c]!=null&&(n[c]=!0)}),n}function Vv({values:e,breakpoints:t,base:n}){const a=n||_D(e,t),c=Object.keys(a);if(c.length===0)return e;let h;return c.reduce((g,l,b)=>(Array.isArray(e)?(g[l]=e[b]!=null?e[b]:e[h],h=b):typeof e=="object"?(g[l]=e[l]!=null?e[l]:e[h],h=l):g[l]=e,g),{})}function Ft(e){if(typeof e!="string")throw new Error(ul(7));return e.charAt(0).toUpperCase()+e.slice(1)}const xD=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));function dl(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((c,h)=>c&&c[h]?c[h]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function qm(e,t,n,a=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||a:c=dl(e,n)||a,t&&(c=t(c,a,e)),c}function Zn(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,h=g=>{if(g[t]==null)return null;const l=g[t],b=g.theme,C=dl(b,a)||{};return Ia(g,l,A=>{let D=qm(C,c,A);return A===D&&typeof A=="string"&&(D=qm(C,c,`${t}${A==="default"?"":Ft(A)}`,A)),n===!1?D:{[n]:D}})};return h.propTypes={},h.filterProps=[t],h}function bD(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const wD={m:"margin",p:"padding"},SD={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ow={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},CD=bD(e=>{if(e.length>2)if(Ow[e])e=Ow[e];else return[e];const[t,n]=e.split(""),a=wD[t],c=SD[n]||"";return Array.isArray(c)?c.map(h=>a+h):[a+c]}),ux=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],dx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...ux,...dx];function Pp(e,t,n,a){var c;const h=(c=dl(e,t,!1))!=null?c:n;return typeof h=="number"?g=>typeof g=="string"?g:h*g:Array.isArray(h)?g=>typeof g=="string"?g:h[g]:typeof h=="function"?h:()=>{}}function hx(e){return Pp(e,"spacing",8)}function ec(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),a=e(n);return t>=0?a:typeof a=="number"?-a:`-${a}`}function kD(e,t){return n=>e.reduce((a,c)=>(a[c]=ec(t,n),a),{})}function TD(e,t,n,a){if(t.indexOf(n)===-1)return null;const c=CD(n),h=kD(c,a),g=e[n];return Ia(e,g,h)}function vk(e,t){const n=hx(e.theme);return Object.keys(e).map(a=>TD(e,t,a,n)).reduce(Lh,{})}function An(e){return vk(e,ux)}An.propTypes={};An.filterProps=ux;function Mn(e){return vk(e,dx)}Mn.propTypes={};Mn.filterProps=dx;function _k(e=8){if(e.mui)return e;const t=hx({spacing:e}),n=(...a)=>(a.length===0?[1]:a).map(h=>{const g=t(h);return typeof g=="number"?`${g}px`:g}).join(" ");return n.mui=!0,n}function Gg(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(h=>{a[h]=c}),a),{}),n=a=>Object.keys(a).reduce((c,h)=>t[h]?Lh(c,t[h](a)):c,{});return n.propTypes={},n.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),n}function Zo(e){return typeof e!="number"?e:`${e}px solid`}function oa(e,t){return Zn({prop:e,themeKey:"borders",transform:t})}const ID=oa("border",Zo),PD=oa("borderTop",Zo),ED=oa("borderRight",Zo),zD=oa("borderBottom",Zo),AD=oa("borderLeft",Zo),MD=oa("borderColor"),DD=oa("borderTopColor"),RD=oa("borderRightColor"),LD=oa("borderBottomColor"),$D=oa("borderLeftColor"),BD=oa("outline",Zo),OD=oa("outlineColor"),qg=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Pp(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:ec(t,a)});return Ia(e,e.borderRadius,n)}return null};qg.propTypes={};qg.filterProps=["borderRadius"];Gg(ID,PD,ED,zD,AD,MD,DD,RD,LD,$D,qg,BD,OD);const Zg=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Pp(e.theme,"spacing",8),n=a=>({gap:ec(t,a)});return Ia(e,e.gap,n)}return null};Zg.propTypes={};Zg.filterProps=["gap"];const Kg=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Pp(e.theme,"spacing",8),n=a=>({columnGap:ec(t,a)});return Ia(e,e.columnGap,n)}return null};Kg.propTypes={};Kg.filterProps=["columnGap"];const Xg=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Pp(e.theme,"spacing",8),n=a=>({rowGap:ec(t,a)});return Ia(e,e.rowGap,n)}return null};Xg.propTypes={};Xg.filterProps=["rowGap"];const FD=Zn({prop:"gridColumn"}),ND=Zn({prop:"gridRow"}),jD=Zn({prop:"gridAutoFlow"}),VD=Zn({prop:"gridAutoColumns"}),UD=Zn({prop:"gridAutoRows"}),HD=Zn({prop:"gridTemplateColumns"}),WD=Zn({prop:"gridTemplateRows"}),GD=Zn({prop:"gridTemplateAreas"}),qD=Zn({prop:"gridArea"});Gg(Zg,Kg,Xg,FD,ND,jD,VD,UD,HD,WD,GD,qD);function bu(e,t){return t==="grey"?t:e}const ZD=Zn({prop:"color",themeKey:"palette",transform:bu}),KD=Zn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:bu}),XD=Zn({prop:"backgroundColor",themeKey:"palette",transform:bu});Gg(ZD,KD,XD);function Io(e){return e<=1&&e!==0?`${e*100}%`:e}const JD=Zn({prop:"width",transform:Io}),px=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,c;const h=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[n])||cx[n];return h?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${h}${e.theme.breakpoints.unit}`}:{maxWidth:h}:{maxWidth:Io(n)}};return Ia(e,e.maxWidth,t)}return null};px.filterProps=["maxWidth"];const YD=Zn({prop:"minWidth",transform:Io}),QD=Zn({prop:"height",transform:Io}),eR=Zn({prop:"maxHeight",transform:Io}),tR=Zn({prop:"minHeight",transform:Io});Zn({prop:"size",cssProperty:"width",transform:Io});Zn({prop:"size",cssProperty:"height",transform:Io});const rR=Zn({prop:"boxSizing"});Gg(JD,px,YD,QD,eR,tR,rR);const nR={border:{themeKey:"borders",transform:Zo},borderTop:{themeKey:"borders",transform:Zo},borderRight:{themeKey:"borders",transform:Zo},borderBottom:{themeKey:"borders",transform:Zo},borderLeft:{themeKey:"borders",transform:Zo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Zo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:qg},color:{themeKey:"palette",transform:bu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:bu},backgroundColor:{themeKey:"palette",transform:bu},p:{style:Mn},pt:{style:Mn},pr:{style:Mn},pb:{style:Mn},pl:{style:Mn},px:{style:Mn},py:{style:Mn},padding:{style:Mn},paddingTop:{style:Mn},paddingRight:{style:Mn},paddingBottom:{style:Mn},paddingLeft:{style:Mn},paddingX:{style:Mn},paddingY:{style:Mn},paddingInline:{style:Mn},paddingInlineStart:{style:Mn},paddingInlineEnd:{style:Mn},paddingBlock:{style:Mn},paddingBlockStart:{style:Mn},paddingBlockEnd:{style:Mn},m:{style:An},mt:{style:An},mr:{style:An},mb:{style:An},ml:{style:An},mx:{style:An},my:{style:An},margin:{style:An},marginTop:{style:An},marginRight:{style:An},marginBottom:{style:An},marginLeft:{style:An},marginX:{style:An},marginY:{style:An},marginInline:{style:An},marginInlineStart:{style:An},marginInlineEnd:{style:An},marginBlock:{style:An},marginBlockStart:{style:An},marginBlockEnd:{style:An},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Zg},rowGap:{style:Xg},columnGap:{style:Kg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Io},maxWidth:{style:px},minWidth:{transform:Io},height:{transform:Io},maxHeight:{transform:Io},minHeight:{transform:Io},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Zu=nR;function iR(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function oR(e,t){return typeof e=="function"?e(t):e}function xk(){function e(n,a,c,h){const g={[n]:a,theme:c},l=h[n];if(!l)return{[n]:a};const{cssProperty:b=n,themeKey:C,transform:P,style:A}=l;if(a==null)return null;if(C==="typography"&&a==="inherit")return{[n]:a};const D=dl(c,C)||{};return A?A(g):Ia(g,a,Z=>{let U=qm(D,P,Z);return Z===U&&typeof Z=="string"&&(U=qm(D,P,`${n}${Z==="default"?"":Ft(Z)}`,Z)),b===!1?U:{[b]:U}})}function t(n){var a;const{sx:c,theme:h={}}=n||{};if(!c)return null;const g=(a=h.unstable_sxConfig)!=null?a:Zu;function l(b){let C=b;if(typeof b=="function")C=b(h);else if(typeof b!="object")return b;if(!C)return null;const P=gk(h.breakpoints),A=Object.keys(P);let D=P;return Object.keys(C).forEach(W=>{const Z=oR(C[W],h);if(Z!=null)if(typeof Z=="object")if(g[W])D=Lh(D,e(W,Z,h,g));else{const U=Ia({theme:h},Z,J=>({[W]:J}));iR(U,Z)?D[W]=t({sx:Z,theme:h}):D=Lh(D,U)}else D=Lh(D,e(W,Z,h,g))}),yk(A,D)}return Array.isArray(c)?c.map(l):l(c)}return t}const Ku=xk();Ku.filterProps=["sx"];function fx(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const aR=["breakpoints","palette","spacing","shape"];function Ep(e={},...t){const{breakpoints:n={},palette:a={},spacing:c,shape:h={}}=e,g=nr(e,aR),l=lx(n),b=_k(c);let C=oi({breakpoints:l,direction:"ltr",components:{},palette:Q({mode:"light"},a),spacing:b,shape:Q({},yD,h)},g);return C.applyStyles=fx,C=t.reduce((P,A)=>oi(P,A),C),C.unstable_sxConfig=Q({},Zu,g==null?void 0:g.unstable_sxConfig),C.unstable_sx=function(A){return Ku({sx:A,theme:this})},C}const sR=Object.freeze(Object.defineProperty({__proto__:null,default:Ep,private_createBreakpoints:lx,unstable_applyStyles:fx},Symbol.toStringTag,{value:"Module"}));function lR(e){return Object.keys(e).length===0}function bk(e=null){const t=V.useContext(Ip);return!t||lR(t)?e:t}const cR=Ep();function wk(e=cR){return bk(e)}function uR({styles:e,themeId:t,defaultTheme:n={}}){const a=wk(n),c=typeof e=="function"?e(t&&a[t]||a):e;return de.jsx(Rh,{styles:c})}const dR=["sx"],hR=e=>{var t,n;const a={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Zu;return Object.keys(e).forEach(h=>{c[h]?a.systemProps[h]=e[h]:a.otherProps[h]=e[h]}),a};function mx(e){const{sx:t}=e,n=nr(e,dR),{systemProps:a,otherProps:c}=hR(n);let h;return Array.isArray(t)?h=[a,...t]:typeof t=="function"?h=(...g)=>{const l=t(...g);return gs(l)?Q({},a,l):a}:h=Q({},a,t),Q({},c,{sx:h})}const pR=Object.freeze(Object.defineProperty({__proto__:null,default:Ku,extendSxProp:mx,unstable_createStyleFunctionSx:xk,unstable_defaultSxConfig:Zu},Symbol.toStringTag,{value:"Module"})),Fw=e=>e,fR=()=>{let e=Fw;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Fw}}},mR=fR();function Sk(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=Sk(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Ni(){for(var e,t,n=0,a="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=Sk(e))&&(a&&(a+=" "),a+=t);return a}const Ck={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Jg(e,t,n="Mui"){const a=Ck[t];return a?`${n}-${a}`:`${mR.generate(e)}-${t}`}function kk(e,t,n="Mui"){const a={};return t.forEach(c=>{a[c]=Jg(e,c,n)}),a}var Tk={exports:{}},Zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx=Symbol.for("react.element"),yx=Symbol.for("react.portal"),Yg=Symbol.for("react.fragment"),Qg=Symbol.for("react.strict_mode"),ey=Symbol.for("react.profiler"),ty=Symbol.for("react.provider"),ry=Symbol.for("react.context"),gR=Symbol.for("react.server_context"),ny=Symbol.for("react.forward_ref"),iy=Symbol.for("react.suspense"),oy=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),sy=Symbol.for("react.lazy"),yR=Symbol.for("react.offscreen"),Ik;Ik=Symbol.for("react.module.reference");function aa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gx:switch(e=e.type,e){case Yg:case ey:case Qg:case iy:case oy:return e;default:switch(e=e&&e.$$typeof,e){case gR:case ry:case ny:case sy:case ay:case ty:return e;default:return t}}case yx:return t}}}Zr.ContextConsumer=ry;Zr.ContextProvider=ty;Zr.Element=gx;Zr.ForwardRef=ny;Zr.Fragment=Yg;Zr.Lazy=sy;Zr.Memo=ay;Zr.Portal=yx;Zr.Profiler=ey;Zr.StrictMode=Qg;Zr.Suspense=iy;Zr.SuspenseList=oy;Zr.isAsyncMode=function(){return!1};Zr.isConcurrentMode=function(){return!1};Zr.isContextConsumer=function(e){return aa(e)===ry};Zr.isContextProvider=function(e){return aa(e)===ty};Zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gx};Zr.isForwardRef=function(e){return aa(e)===ny};Zr.isFragment=function(e){return aa(e)===Yg};Zr.isLazy=function(e){return aa(e)===sy};Zr.isMemo=function(e){return aa(e)===ay};Zr.isPortal=function(e){return aa(e)===yx};Zr.isProfiler=function(e){return aa(e)===ey};Zr.isStrictMode=function(e){return aa(e)===Qg};Zr.isSuspense=function(e){return aa(e)===iy};Zr.isSuspenseList=function(e){return aa(e)===oy};Zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Yg||e===ey||e===Qg||e===iy||e===oy||e===yR||typeof e=="object"&&e!==null&&(e.$$typeof===sy||e.$$typeof===ay||e.$$typeof===ty||e.$$typeof===ry||e.$$typeof===ny||e.$$typeof===Ik||e.getModuleId!==void 0)};Zr.typeOf=aa;Tk.exports=Zr;var Nw=Tk.exports;const vR=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Pk(e){const t=`${e}`.match(vR);return t&&t[1]||""}function Ek(e,t=""){return e.displayName||e.name||Pk(e)||t}function jw(e,t,n){const a=Ek(t);return e.displayName||(a!==""?`${n}(${a})`:n)}function _R(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return Ek(e,"Component");if(typeof e=="object")switch(e.$$typeof){case Nw.ForwardRef:return jw(e,e.render,"ForwardRef");case Nw.Memo:return jw(e,e.type,"memo");default:return}}}const xR=Object.freeze(Object.defineProperty({__proto__:null,default:_R,getFunctionName:Pk},Symbol.toStringTag,{value:"Module"})),bR=["ownerState"],wR=["variants"],SR=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function CR(e){return Object.keys(e).length===0}function kR(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Uv(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const TR=Ep(),IR=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function nm({defaultTheme:e,theme:t,themeId:n}){return CR(t)?e:t[n]||t}function PR(e){return e?(t,n)=>n[e]:null}function zm(e,t){let{ownerState:n}=t,a=nr(t,bR);const c=typeof e=="function"?e(Q({ownerState:n},a)):e;if(Array.isArray(c))return c.flatMap(h=>zm(h,Q({ownerState:n},a)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:h=[]}=c;let l=nr(c,wR);return h.forEach(b=>{let C=!0;typeof b.props=="function"?C=b.props(Q({ownerState:n},a,n)):Object.keys(b.props).forEach(P=>{(n==null?void 0:n[P])!==b.props[P]&&a[P]!==b.props[P]&&(C=!1)}),C&&(Array.isArray(l)||(l=[l]),l.push(typeof b.style=="function"?b.style(Q({ownerState:n},a,n)):b.style))}),l}return c}function zk(e={}){const{themeId:t,defaultTheme:n=TR,rootShouldForwardProp:a=Uv,slotShouldForwardProp:c=Uv}=e,h=g=>Ku(Q({},g,{theme:nm(Q({},g,{defaultTheme:n,themeId:t}))}));return h.__mui_systemSx=!0,(g,l={})=>{fk(g,te=>te.filter(ee=>!(ee!=null&&ee.__mui_systemSx)));const{name:b,slot:C,skipVariantsResolver:P,skipSx:A,overridesResolver:D=PR(IR(C))}=l,W=nr(l,SR),Z=P!==void 0?P:C&&C!=="Root"&&C!=="root"||!1,U=A||!1;let J,O=Uv;C==="Root"||C==="root"?O=a:C?O=c:kR(g)&&(O=void 0);const $=pk(g,Q({shouldForwardProp:O,label:J},W)),N=te=>typeof te=="function"&&te.__emotion_real!==te||gs(te)?ee=>zm(te,Q({},ee,{theme:nm({theme:ee.theme,defaultTheme:n,themeId:t})})):te,ie=(te,...ee)=>{let re=N(te);const fe=ee?ee.map(N):[];b&&D&&fe.push(ze=>{const Ee=nm(Q({},ze,{defaultTheme:n,themeId:t}));if(!Ee.components||!Ee.components[b]||!Ee.components[b].styleOverrides)return null;const Fe=Ee.components[b].styleOverrides,Ye={};return Object.entries(Fe).forEach(([Ke,Re])=>{Ye[Ke]=zm(Re,Q({},ze,{theme:Ee}))}),D(ze,Ye)}),b&&!Z&&fe.push(ze=>{var Ee;const Fe=nm(Q({},ze,{defaultTheme:n,themeId:t})),Ye=Fe==null||(Ee=Fe.components)==null||(Ee=Ee[b])==null?void 0:Ee.variants;return zm({variants:Ye},Q({},ze,{theme:Fe}))}),U||fe.push(h);const Te=fe.length-ee.length;if(Array.isArray(te)&&Te>0){const ze=new Array(Te).fill("");re=[...te,...ze],re.raw=[...te.raw,...ze]}const be=$(re,...fe);return g.muiName&&(be.muiName=g.muiName),be};return $.withConfig&&(ie.withConfig=$.withConfig),ie}}const ER=zk();function Ak(e,t){const n=Q({},t);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))n[a]=Q({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const c=e[a]||{},h=t[a];n[a]={},!h||!Object.keys(h)?n[a]=c:!c||!Object.keys(c)?n[a]=h:(n[a]=Q({},h),Object.keys(c).forEach(g=>{n[a][g]=Ak(c[g],h[g])}))}else n[a]===void 0&&(n[a]=e[a])}),n}function zR(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:Ak(t.components[n].defaultProps,a)}function vx({props:e,name:t,defaultTheme:n,themeId:a}){let c=wk(n);return a&&(c=c[a]||c),zR({theme:c,name:t,props:e})}const tc=typeof window<"u"?V.useLayoutEffect:V.useEffect;function AR(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const MR=Object.freeze(Object.defineProperty({__proto__:null,default:AR},Symbol.toStringTag,{value:"Module"}));function DR(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function Mk(e){if(e.type)return e;if(e.charAt(0)==="#")return Mk(DR(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(ul(9,e));let a=e.substring(t+1,e.length-1),c;if(n==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(ul(10,c))}else a=a.split(",");return a=a.map(h=>parseFloat(h)),{type:n,values:a,colorSpace:c}}const Fl=e=>{const t=Mk(e);return t.values.slice(0,3).map((n,a)=>t.type.indexOf("hsl")!==-1&&a!==0?`${n}%`:n).join(" ")};function Vw(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function Dk(e,t){var n,a;return V.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function Ga(e){return e&&e.ownerDocument||document}function _x(e){return Ga(e).defaultView||window}function Zm(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let Uw=0;function RR(e){const[t,n]=V.useState(e),a=e||t;return V.useEffect(()=>{t==null&&(Uw+=1,n(`mui-${Uw}`))},[t]),a}const Hw=Wm.useId;function Pa(e){if(Hw!==void 0){const t=Hw();return e??t}return RR(e)}function wu({controlled:e,default:t,name:n,state:a="value"}){const{current:c}=V.useRef(e!==void 0),[h,g]=V.useState(t),l=c?e:h,b=V.useCallback(C=>{c||g(C)},[]);return[l,b]}function Qs(e){const t=V.useRef(e);return tc(()=>{t.current=e}),V.useRef((...n)=>(0,t.current)(...n)).current}function bn(...e){return V.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Zm(n,t)})},e)}const Ww={};function LR(e,t){const n=V.useRef(Ww);return n.current===Ww&&(n.current=e(t)),n}const $R=[];function BR(e){V.useEffect(e,$R)}class zp{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new zp}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function im(){const e=LR(zp.create).current;return BR(e.disposeEffect),e}let ly=!0,L0=!1;const OR=new zp,FR={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function NR(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&FR[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function jR(e){e.metaKey||e.altKey||e.ctrlKey||(ly=!0)}function Hv(){ly=!1}function VR(){this.visibilityState==="hidden"&&L0&&(ly=!0)}function UR(e){e.addEventListener("keydown",jR,!0),e.addEventListener("mousedown",Hv,!0),e.addEventListener("pointerdown",Hv,!0),e.addEventListener("touchstart",Hv,!0),e.addEventListener("visibilitychange",VR,!0)}function HR(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return ly||NR(t)}function xx(){const e=V.useCallback(c=>{c!=null&&UR(c.ownerDocument)},[]),t=V.useRef(!1);function n(){return t.current?(L0=!0,OR.start(100,()=>{L0=!1}),t.current=!1,!0):!1}function a(c){return HR(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:a,onBlur:n,ref:e}}function WR(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const GR=e=>{const t=V.useRef({});return V.useEffect(()=>{t.current=e}),t.current},qR={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},ZR=qR;function Qr(e,t,n=void 0){const a={};return Object.keys(e).forEach(c=>{a[c]=e[c].reduce((h,g)=>{if(g){const l=t(g);l!==""&&h.push(l),n&&n[g]&&h.push(n[g])}return h},[]).join(" ")}),a}const KR=V.createContext(null),Rk=KR;function bx(){return V.useContext(Rk)}const XR=typeof Symbol=="function"&&Symbol.for,JR=XR?Symbol.for("mui.nested"):"__THEME_NESTED__";function YR(e,t){return typeof t=="function"?t(e):Q({},e,t)}function QR(e){const{children:t,theme:n}=e,a=bx(),c=V.useMemo(()=>{const h=a===null?n:YR(a,n);return h!=null&&(h[JR]=a!==null),h},[n,a]);return de.jsx(Rk.Provider,{value:c,children:t})}const eL=["value"],tL=V.createContext();function rL(e){let{value:t}=e,n=nr(e,eL);return de.jsx(tL.Provider,Q({value:t??!0},n))}const Gw={};function qw(e,t,n,a=!1){return V.useMemo(()=>{const c=e&&t[e]||t;if(typeof n=="function"){const h=n(c),g=e?Q({},t,{[e]:h}):h;return a?()=>g:g}return e?Q({},t,{[e]:n}):Q({},t,n)},[e,t,n,a])}function nL(e){const{children:t,theme:n,themeId:a}=e,c=bk(Gw),h=bx()||Gw,g=qw(a,c,n),l=qw(a,h,n,!0),b=g.direction==="rtl";return de.jsx(QR,{theme:l,children:de.jsx(Ip.Provider,{value:g,children:de.jsx(rL,{value:b,children:t})})})}const wx="mode",Sx="color-scheme",Lk="data-color-scheme";function iL(e){const{defaultMode:t="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:a="dark",modeStorageKey:c=wx,colorSchemeStorageKey:h=Sx,attribute:g=Lk,colorSchemeNode:l="document.documentElement"}=e||{};return de.jsx("script",{dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${c}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${h}-dark') || '${a}';
    } else {
      colorScheme = localStorage.getItem('${h}-light') || '${n}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${h}-light') || '${n}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${h}-dark') || '${a}';
  }
  if (colorScheme) {
    ${l}.setAttribute('${g}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Zw(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function $k(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function oL(e){return $k(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function Wv(e,t){if(typeof window>"u")return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch{}return n||t}function aL(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:a,supportedColorSchemes:c=[],modeStorageKey:h=wx,colorSchemeStorageKey:g=Sx,storageWindow:l=typeof window>"u"?void 0:window}=e,b=c.join(","),[C,P]=V.useState(()=>{const J=Wv(h,t),O=Wv(`${g}-light`,n),$=Wv(`${g}-dark`,a);return{mode:J,systemMode:Zw(J),lightColorScheme:O,darkColorScheme:$}}),A=oL(C),D=V.useCallback(J=>{P(O=>{if(J===O.mode)return O;const $=J||t;try{localStorage.setItem(h,$)}catch{}return Q({},O,{mode:$,systemMode:Zw($)})})},[h,t]),W=V.useCallback(J=>{J?typeof J=="string"?J&&!b.includes(J)?console.error(`\`${J}\` does not exist in \`theme.colorSchemes\`.`):P(O=>{const $=Q({},O);return $k(O,N=>{try{localStorage.setItem(`${g}-${N}`,J)}catch{}N==="light"&&($.lightColorScheme=J),N==="dark"&&($.darkColorScheme=J)}),$}):P(O=>{const $=Q({},O),N=J.light===null?n:J.light,ie=J.dark===null?a:J.dark;if(N)if(!b.includes(N))console.error(`\`${N}\` does not exist in \`theme.colorSchemes\`.`);else{$.lightColorScheme=N;try{localStorage.setItem(`${g}-light`,N)}catch{}}if(ie)if(!b.includes(ie))console.error(`\`${ie}\` does not exist in \`theme.colorSchemes\`.`);else{$.darkColorScheme=ie;try{localStorage.setItem(`${g}-dark`,ie)}catch{}}return $}):P(O=>{try{localStorage.setItem(`${g}-light`,n),localStorage.setItem(`${g}-dark`,a)}catch{}return Q({},O,{lightColorScheme:n,darkColorScheme:a})})},[b,g,n,a]),Z=V.useCallback(J=>{C.mode==="system"&&P(O=>Q({},O,{systemMode:J!=null&&J.matches?"dark":"light"}))},[C.mode]),U=V.useRef(Z);return U.current=Z,V.useEffect(()=>{const J=(...$)=>U.current(...$),O=window.matchMedia("(prefers-color-scheme: dark)");return O.addListener(J),J(O),()=>O.removeListener(J)},[]),V.useEffect(()=>{const J=O=>{const $=O.newValue;typeof O.key=="string"&&O.key.startsWith(g)&&(!$||b.match($))&&(O.key.endsWith("light")&&W({light:$}),O.key.endsWith("dark")&&W({dark:$})),O.key===h&&(!$||["light","dark","system"].includes($))&&D($||t)};if(l)return l.addEventListener("storage",J),()=>l.removeEventListener("storage",J)},[W,D,h,g,b,t,l]),Q({},C,{colorScheme:A,setMode:D,setColorScheme:W})}const sL=["colorSchemes","components","generateCssVars","cssVarPrefix"],lL="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function cL(e){const{themeId:t,theme:n={},attribute:a=Lk,modeStorageKey:c=wx,colorSchemeStorageKey:h=Sx,defaultMode:g="light",defaultColorScheme:l,disableTransitionOnChange:b=!1,resolveTheme:C,excludeVariablesFromRoot:P}=e;(!n.colorSchemes||typeof l=="string"&&!n.colorSchemes[l]||typeof l=="object"&&!n.colorSchemes[l==null?void 0:l.light]||typeof l=="object"&&!n.colorSchemes[l==null?void 0:l.dark])&&console.error(`MUI: \`${l}\` does not exist in \`theme.colorSchemes\`.`);const A=V.createContext(void 0),D=()=>{const O=V.useContext(A);if(!O)throw new Error(ul(19));return O};function W({children:O,theme:$=n,modeStorageKey:N=c,colorSchemeStorageKey:ie=h,attribute:te=a,defaultMode:ee=g,defaultColorScheme:re=l,disableTransitionOnChange:fe=b,storageWindow:Te=typeof window>"u"?void 0:window,documentNode:be=typeof document>"u"?void 0:document,colorSchemeNode:ze=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Ee=":root",disableNestedContext:Fe=!1,disableStyleSheetGeneration:Ye=!1}){const Ke=V.useRef(!1),Re=bx(),Ue=V.useContext(A),Ne=!!Ue&&!Fe,Xe=$[t],ct=Xe||$,{colorSchemes:ft={},components:it={},generateCssVars:Et=()=>({vars:{},css:{}}),cssVarPrefix:mt}=ct,zt=nr(ct,sL),tr=Object.keys(ft),nt=typeof re=="string"?re:re.light,We=typeof re=="string"?re:re.dark,{mode:st,setMode:bt,systemMode:Ht,lightColorScheme:Wt,darkColorScheme:Er,colorScheme:Tr,setColorScheme:$t}=aL({supportedColorSchemes:tr,defaultLightColorScheme:nt,defaultDarkColorScheme:We,modeStorageKey:N,colorSchemeStorageKey:ie,defaultMode:ee,storageWindow:Te});let wt=st,or=Tr;Ne&&(wt=Ue.mode,or=Ue.colorScheme);const Gt=wt||(ee==="system"?g:ee),Cr=or||(Gt==="dark"?We:nt),{css:$e,vars:pr}=Et(),sr=Q({},zt,{components:it,colorSchemes:ft,cssVarPrefix:mt,vars:pr,getColorSchemeSelector:Qt=>`[${te}="${Qt}"] &`}),Yt={},Vt={};Object.entries(ft).forEach(([Qt,Nt])=>{const{css:mr,vars:Hr}=Et(Qt);sr.vars=oi(sr.vars,Hr),Qt===Cr&&(Object.keys(Nt).forEach(ot=>{Nt[ot]&&typeof Nt[ot]=="object"?sr[ot]=Q({},sr[ot],Nt[ot]):sr[ot]=Nt[ot]}),sr.palette&&(sr.palette.colorScheme=Qt));const Pe=typeof re=="string"?re:ee==="dark"?re.dark:re.light;if(Qt===Pe){if(P){const ot={};P(mt).forEach(St=>{ot[St]=mr[St],delete mr[St]}),Yt[`[${te}="${Qt}"]`]=ot}Yt[`${Ee}, [${te}="${Qt}"]`]=mr}else Vt[`${Ee===":root"?"":Ee}[${te}="${Qt}"]`]=mr}),sr.vars=oi(sr.vars,pr),V.useEffect(()=>{or&&ze&&ze.setAttribute(te,or)},[or,te,ze]),V.useEffect(()=>{let Qt;if(fe&&Ke.current&&be){const Nt=be.createElement("style");Nt.appendChild(be.createTextNode(lL)),be.head.appendChild(Nt),window.getComputedStyle(be.body),Qt=setTimeout(()=>{be.head.removeChild(Nt)},1)}return()=>{clearTimeout(Qt)}},[or,fe,be]),V.useEffect(()=>(Ke.current=!0,()=>{Ke.current=!1}),[]);const kr=V.useMemo(()=>({mode:wt,systemMode:Ht,setMode:bt,lightColorScheme:Wt,darkColorScheme:Er,colorScheme:or,setColorScheme:$t,allColorSchemes:tr}),[tr,or,Er,Wt,wt,$t,bt,Ht]);let Lr=!0;(Ye||Ne&&(Re==null?void 0:Re.cssVarPrefix)===mt)&&(Lr=!1);const cr=de.jsxs(V.Fragment,{children:[Lr&&de.jsxs(V.Fragment,{children:[de.jsx(Rh,{styles:{[Ee]:$e}}),de.jsx(Rh,{styles:Yt}),de.jsx(Rh,{styles:Vt})]}),de.jsx(nL,{themeId:Xe?t:void 0,theme:C?C(sr):sr,children:O})]});return Ne?cr:de.jsx(A.Provider,{value:kr,children:cr})}const Z=typeof l=="string"?l:l.light,U=typeof l=="string"?l:l.dark;return{CssVarsProvider:W,useColorScheme:D,getInitColorSchemeScript:O=>iL(Q({attribute:a,colorSchemeStorageKey:h,defaultMode:g,defaultLightColorScheme:Z,defaultDarkColorScheme:U,modeStorageKey:c},O))}}function Cx(e=""){function t(...a){if(!a.length)return"";const c=a[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...a.slice(1))})`:`, ${c}`}return(a,...c)=>`var(--${e?`${e}-`:""}${a}${t(...c)})`}const Kw=(e,t,n,a=[])=>{let c=e;t.forEach((h,g)=>{g===t.length-1?Array.isArray(c)?c[Number(h)]=n:c&&typeof c=="object"&&(c[h]=n):c&&typeof c=="object"&&(c[h]||(c[h]=a.includes(h)?[]:{}),c=c[h])})},uL=(e,t,n)=>{function a(c,h=[],g=[]){Object.entries(c).forEach(([l,b])=>{(!n||n&&!n([...h,l]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?a(b,[...h,l],Array.isArray(b)?[...g,l]:g):t([...h,l],b,g))})}a(e)},dL=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function Gv(e,t){const{prefix:n,shouldSkipGeneratingVar:a}=t||{},c={},h={},g={};return uL(e,(l,b,C)=>{if((typeof b=="string"||typeof b=="number")&&(!a||!a(l,b))){const P=`--${n?`${n}-`:""}${l.join("-")}`;Object.assign(c,{[P]:dL(l,b)}),Kw(h,l,`var(${P})`,C),Kw(g,l,`var(${P}, ${b})`,C)}},l=>l[0]==="vars"),{css:c,vars:h,varsWithDefaults:g}}function Qh(e){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}function hL(e,t){if(Qh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Qh(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pL(e){var t=hL(e,"string");return Qh(t)=="symbol"?t:String(t)}const fL=["colorSchemes","components","defaultColorScheme"];function mL(e,t){const{colorSchemes:n={},defaultColorScheme:a="light"}=e,c=nr(e,fL),{vars:h,css:g,varsWithDefaults:l}=Gv(c,t);let b=l;const C={},{[a]:P}=n,A=nr(n,[a].map(pL));if(Object.entries(A||{}).forEach(([W,Z])=>{const{vars:U,css:J,varsWithDefaults:O}=Gv(Z,t);b=oi(b,O),C[W]={css:J,vars:U}}),P){const{css:W,vars:Z,varsWithDefaults:U}=Gv(P,t);b=oi(b,U),C[a]={css:W,vars:Z}}return{vars:b,generateCssVars:W=>{var Z;if(!W){var U;const O=Q({},g);return{css:O,vars:h,selector:(t==null||(U=t.getSelector)==null?void 0:U.call(t,W,O))||":root"}}const J=Q({},C[W].css);return{css:J,vars:C[W].vars,selector:(t==null||(Z=t.getSelector)==null?void 0:Z.call(t,W,J))||":root"}}}}const gL=["component","direction","spacing","divider","children","className","useFlexGap"],yL=Ep(),vL=ER("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function _L(e){return vx({props:e,name:"MuiStack",defaultTheme:yL})}function xL(e,t){const n=V.Children.toArray(e).filter(Boolean);return n.reduce((a,c,h)=>(a.push(c),h<n.length-1&&a.push(V.cloneElement(t,{key:`separator-${h}`})),a),[])}const bL=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],wL=({ownerState:e,theme:t})=>{let n=Q({display:"flex",flexDirection:"column"},Ia({theme:t},Vv({values:e.direction,breakpoints:t.breakpoints.values}),a=>({flexDirection:a})));if(e.spacing){const a=hx(t),c=Object.keys(t.breakpoints.values).reduce((b,C)=>((typeof e.spacing=="object"&&e.spacing[C]!=null||typeof e.direction=="object"&&e.direction[C]!=null)&&(b[C]=!0),b),{}),h=Vv({values:e.direction,base:c}),g=Vv({values:e.spacing,base:c});typeof h=="object"&&Object.keys(h).forEach((b,C,P)=>{if(!h[b]){const D=C>0?h[P[C-1]]:"column";h[b]=D}}),n=oi(n,Ia({theme:t},g,(b,C)=>e.useFlexGap?{gap:ec(a,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${bL(C?h[C]:e.direction)}`]:ec(a,b)}}))}return n=vD(t.breakpoints,n),n};function SL(e={}){const{createStyledComponent:t=vL,useThemeProps:n=_L,componentName:a="MuiStack"}=e,c=()=>Qr({root:["root"]},b=>Jg(a,b),{}),h=t(wL);return V.forwardRef(function(b,C){const P=n(b),A=mx(P),{component:D="div",direction:W="column",spacing:Z=0,divider:U,children:J,className:O,useFlexGap:$=!1}=A,N=nr(A,gL),ie={direction:W,spacing:Z,useFlexGap:$},te=c();return de.jsx(h,Q({as:D,ownerState:ie,ref:C,className:Ni(te.root,O)},N,{children:U?xL(J,U):J}))})}const CL=Q({},Zu,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}}),kL=CL;function TL(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const ln=(e,t)=>Jg(e,t,"Mui"),Kr=(e,t)=>kk(e,t,"Mui"),IL=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var n;return(n=t.match)==null?void 0:n.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),Xw=(e,t,n)=>{t.includes("Color")&&(e.color=n),t.includes("Bg")&&(e.backgroundColor=n),t.includes("Border")&&(e.borderColor=n)},Jw=(e,t,n)=>{const a={};return Object.entries(t||{}).forEach(([c,h])=>{if(c.match(new RegExp(`${e}(color|bg|border)`,"i"))&&h){const g=n?n(c):h;c.includes("Disabled")&&(a.pointerEvents="none",a.cursor="default",a["--Icon-color"]="currentColor"),c.match(/(Hover|Active|Disabled)/)||(a["--variant-borderWidth"]||(a["--variant-borderWidth"]="0px"),c.includes("Border")&&(a["--variant-borderWidth"]="1px",a.border="var(--variant-borderWidth) solid")),Xw(a,c,g)}}),a},Di=(e,t)=>{let n={};if(t){const{getCssVar:a,palette:c}=t;Object.entries(c).forEach(h=>{const[g,l]=h;IL(l)&&typeof l=="object"&&(n=Q({},n,{[g]:Jw(e,l,b=>`var(--variant-${b}, ${a(`palette-${g}-${b}`,c[g][b])})`)}))})}return n.context=Jw(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),n},PL=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],EL=["colorSchemes"],zL=(e="joy")=>Cx(e);function AL(e){var t,n,a,c,h,g,l,b,C,P;const A=e||{},{cssVarPrefix:D="joy",breakpoints:W,spacing:Z,components:U,variants:J,shouldSkipGeneratingVar:O=TL}=A,$=nr(A,PL),N=zL(D),ie={primary:lh.blue,neutral:lh.grey,danger:lh.red,success:lh.green,warning:lh.yellow,common:{white:"#FFF",black:"#000"}},te=We=>{var st;const bt=We.split("-"),Ht=bt[1],Wt=bt[2];return N(We,(st=ie[Ht])==null?void 0:st[Wt])},ee=We=>({plainColor:te(`palette-${We}-500`),plainHoverBg:te(`palette-${We}-100`),plainActiveBg:te(`palette-${We}-200`),plainDisabledColor:te("palette-neutral-400"),outlinedColor:te(`palette-${We}-500`),outlinedBorder:te(`palette-${We}-300`),outlinedHoverBg:te(`palette-${We}-100`),outlinedActiveBg:te(`palette-${We}-200`),outlinedDisabledColor:te("palette-neutral-400"),outlinedDisabledBorder:te("palette-neutral-200"),softColor:te(`palette-${We}-700`),softBg:te(`palette-${We}-100`),softHoverBg:te(`palette-${We}-200`),softActiveColor:te(`palette-${We}-800`),softActiveBg:te(`palette-${We}-300`),softDisabledColor:te("palette-neutral-400"),softDisabledBg:te("palette-neutral-50"),solidColor:te("palette-common-white"),solidBg:te(`palette-${We}-500`),solidHoverBg:te(`palette-${We}-600`),solidActiveBg:te(`palette-${We}-700`),solidDisabledColor:te("palette-neutral-400"),solidDisabledBg:te("palette-neutral-100")}),re=We=>({plainColor:te(`palette-${We}-300`),plainHoverBg:te(`palette-${We}-800`),plainActiveBg:te(`palette-${We}-700`),plainDisabledColor:te("palette-neutral-500"),outlinedColor:te(`palette-${We}-200`),outlinedBorder:te(`palette-${We}-700`),outlinedHoverBg:te(`palette-${We}-800`),outlinedActiveBg:te(`palette-${We}-700`),outlinedDisabledColor:te("palette-neutral-500"),outlinedDisabledBorder:te("palette-neutral-800"),softColor:te(`palette-${We}-200`),softBg:te(`palette-${We}-800`),softHoverBg:te(`palette-${We}-700`),softActiveColor:te(`palette-${We}-100`),softActiveBg:te(`palette-${We}-600`),softDisabledColor:te("palette-neutral-500"),softDisabledBg:te("palette-neutral-800"),solidColor:te("palette-common-white"),solidBg:te(`palette-${We}-500`),solidHoverBg:te(`palette-${We}-600`),solidActiveBg:te(`palette-${We}-700`),solidDisabledColor:te("palette-neutral-500"),solidDisabledBg:te("palette-neutral-800")}),fe={palette:{mode:"light",primary:Q({},ie.primary,ee("primary")),neutral:Q({},ie.neutral,ee("neutral"),{plainColor:te("palette-neutral-700"),plainHoverColor:te("palette-neutral-900"),outlinedColor:te("palette-neutral-700")}),danger:Q({},ie.danger,ee("danger")),success:Q({},ie.success,ee("success")),warning:Q({},ie.warning,ee("warning")),common:{white:"#FFF",black:"#000"},text:{primary:te("palette-neutral-800"),secondary:te("palette-neutral-700"),tertiary:te("palette-neutral-600"),icon:te("palette-neutral-500")},background:{body:te("palette-common-white"),surface:te("palette-neutral-50"),popup:te("palette-common-white"),level1:te("palette-neutral-100"),level2:te("palette-neutral-200"),level3:te("palette-neutral-300"),tooltip:te("palette-neutral-500"),backdrop:`rgba(${N("palette-neutral-darkChannel",Fl(ie.neutral[900]))} / 0.25)`},divider:`rgba(${N("palette-neutral-mainChannel",Fl(ie.neutral[500]))} / 0.2)`,focusVisible:te("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},Te={palette:{mode:"dark",primary:Q({},ie.primary,re("primary")),neutral:Q({},ie.neutral,re("neutral"),{plainColor:te("palette-neutral-300"),plainHoverColor:te("palette-neutral-300")}),danger:Q({},ie.danger,re("danger")),success:Q({},ie.success,re("success")),warning:Q({},ie.warning,re("warning")),common:{white:"#FFF",black:"#000"},text:{primary:te("palette-neutral-100"),secondary:te("palette-neutral-300"),tertiary:te("palette-neutral-400"),icon:te("palette-neutral-400")},background:{body:te("palette-common-black"),surface:te("palette-neutral-900"),popup:te("palette-common-black"),level1:te("palette-neutral-800"),level2:te("palette-neutral-700"),level3:te("palette-neutral-600"),tooltip:te("palette-neutral-600"),backdrop:`rgba(${N("palette-neutral-darkChannel",Fl(ie.neutral[50]))} / 0.25)`},divider:`rgba(${N("palette-neutral-mainChannel",Fl(ie.neutral[500]))} / 0.16)`,focusVisible:te("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},be='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',ze=Q({body:`"Inter", ${N(`fontFamily-fallback, ${be}`)}`,display:`"Inter", ${N(`fontFamily-fallback, ${be}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:be},$.fontFamily),Ee=Q({sm:300,md:500,lg:600,xl:700},$.fontWeight),Fe=Q({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},$.fontSize),Ye=Q({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},$.lineHeight),Ke=(t=(n=$.colorSchemes)==null||(n=n.light)==null?void 0:n.shadowRing)!=null?t:fe.shadowRing,Re=(a=(c=$.colorSchemes)==null||(c=c.light)==null?void 0:c.shadowChannel)!=null?a:fe.shadowChannel,Ue=(h=(g=$.colorSchemes)==null||(g=g.light)==null?void 0:g.shadowOpacity)!=null?h:fe.shadowOpacity,Ne={colorSchemes:{light:fe,dark:Te},fontSize:Fe,fontFamily:ze,fontWeight:Ee,focus:{thickness:"2px",selector:`&.${ln("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${N("focus-thickness",(l=(b=$.focus)==null?void 0:b.thickness)!=null?l:"2px")})`,outline:`${N("focus-thickness",(C=(P=$.focus)==null?void 0:P.thickness)!=null?C:"2px")} solid ${N("palette-focusVisible",ie.primary[500])}`}},lineHeight:Ye,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${N("shadowRing",Ke)}, 0px 1px 2px 0px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)})`,sm:`${N("shadowRing",Ke)}, 0px 1px 2px 0px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)}), 0px 2px 4px 0px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)})`,md:`${N("shadowRing",Ke)}, 0px 2px 8px -2px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)}), 0px 6px 12px -2px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)})`,lg:`${N("shadowRing",Ke)}, 0px 2px 8px -2px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)}), 0px 12px 16px -4px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)})`,xl:`${N("shadowRing",Ke)}, 0px 2px 8px -2px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)}), 0px 20px 24px -4px rgba(${N("shadowChannel",Re)} / ${N("shadowOpacity",Ue)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:N(`fontFamily-display, ${ze.display}`),fontWeight:N(`fontWeight-xl, ${Ee.xl}`),fontSize:N(`fontSize-xl4, ${Fe.xl4}`),lineHeight:N(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:N(`palette-text-primary, ${fe.palette.text.primary}`)},h2:{fontFamily:N(`fontFamily-display, ${ze.display}`),fontWeight:N(`fontWeight-xl, ${Ee.xl}`),fontSize:N(`fontSize-xl3, ${Fe.xl3}`),lineHeight:N(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:N(`palette-text-primary, ${fe.palette.text.primary}`)},h3:{fontFamily:N(`fontFamily-display, ${ze.display}`),fontWeight:N(`fontWeight-lg, ${Ee.lg}`),fontSize:N(`fontSize-xl2, ${Fe.xl2}`),lineHeight:N(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:N(`palette-text-primary, ${fe.palette.text.primary}`)},h4:{fontFamily:N(`fontFamily-display, ${ze.display}`),fontWeight:N(`fontWeight-lg, ${Ee.lg}`),fontSize:N(`fontSize-xl, ${Fe.xl}`),lineHeight:N(`lineHeight-md, ${Ye.md}`),letterSpacing:"-0.025em",color:N(`palette-text-primary, ${fe.palette.text.primary}`)},"title-lg":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontWeight:N(`fontWeight-lg, ${Ee.lg}`),fontSize:N(`fontSize-lg, ${Fe.lg}`),lineHeight:N(`lineHeight-xs, ${Ye.xs}`),color:N(`palette-text-primary, ${fe.palette.text.primary}`)},"title-md":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontWeight:N(`fontWeight-md, ${Ee.md}`),fontSize:N(`fontSize-md, ${Fe.md}`),lineHeight:N(`lineHeight-md, ${Ye.md}`),color:N(`palette-text-primary, ${fe.palette.text.primary}`)},"title-sm":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontWeight:N(`fontWeight-md, ${Ee.md}`),fontSize:N(`fontSize-sm, ${Fe.sm}`),lineHeight:N(`lineHeight-sm, ${Ye.sm}`),color:N(`palette-text-primary, ${fe.palette.text.primary}`)},"body-lg":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontSize:N(`fontSize-lg, ${Fe.lg}`),lineHeight:N(`lineHeight-md, ${Ye.md}`),color:N(`palette-text-secondary, ${fe.palette.text.secondary}`)},"body-md":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontSize:N(`fontSize-md, ${Fe.md}`),lineHeight:N(`lineHeight-md, ${Ye.md}`),color:N(`palette-text-secondary, ${fe.palette.text.secondary}`)},"body-sm":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontSize:N(`fontSize-sm, ${Fe.sm}`),lineHeight:N(`lineHeight-md, ${Ye.md}`),color:N(`palette-text-tertiary, ${fe.palette.text.tertiary}`)},"body-xs":{fontFamily:N(`fontFamily-body, ${ze.body}`),fontWeight:N(`fontWeight-md, ${Ee.md}`),fontSize:N(`fontSize-xs, ${Fe.xs}`),lineHeight:N(`lineHeight-md, ${Ye.md}`),color:N(`palette-text-tertiary, ${fe.palette.text.tertiary}`)}}},Xe=$?oi(Ne,$):Ne,{colorSchemes:ct}=Xe,ft=nr(Xe,EL),it=Q({colorSchemes:ct},ft,{breakpoints:lx(W??{}),components:oi({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:We,theme:st})=>{var bt;const Ht=We.instanceFontSize;return Q({margin:"var(--Icon-margin)"},We.fontSize&&We.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${st.vars.fontSize[We.fontSize]})`},!We.htmlColor&&Q({color:`var(--Icon-color, ${it.vars.palette.text.icon})`},We.color&&We.color!=="inherit"&&st.vars.palette[We.color]&&{color:`rgba(${(bt=st.vars.palette[We.color])==null?void 0:bt.mainChannel} / 1)`}),Ht&&Ht!=="inherit"&&{"--Icon-fontSize":st.vars.fontSize[Ht]})}}}},U),cssVarPrefix:D,getCssVar:N,spacing:_k(Z)});function Et(We,st){Object.keys(st).forEach(bt=>{const Ht={main:"500",light:"200",dark:"700"};We==="dark"&&(Ht.main=400),!st[bt].mainChannel&&st[bt][Ht.main]&&(st[bt].mainChannel=Fl(st[bt][Ht.main])),!st[bt].lightChannel&&st[bt][Ht.light]&&(st[bt].lightChannel=Fl(st[bt][Ht.light])),!st[bt].darkChannel&&st[bt][Ht.dark]&&(st[bt].darkChannel=Fl(st[bt][Ht.dark]))})}Object.entries(it.colorSchemes).forEach(([We,st])=>{Et(We,st.palette)});const mt={prefix:D,shouldSkipGeneratingVar:O},{vars:zt,generateCssVars:tr}=mL(Q({colorSchemes:ct},ft),mt);it.vars=zt,it.generateCssVars=tr,it.unstable_sxConfig=Q({},kL,e==null?void 0:e.unstable_sxConfig),it.unstable_sx=function(st){return Ku({sx:st,theme:this})},it.getColorSchemeSelector=We=>We==="light"?"&":`&[data-joy-color-scheme="${We}"], [data-joy-color-scheme="${We}"] &`;const nt={getCssVar:N,palette:it.colorSchemes.light.palette};return it.variants=oi({plain:Di("plain",nt),plainHover:Di("plainHover",nt),plainActive:Di("plainActive",nt),plainDisabled:Di("plainDisabled",nt),outlined:Di("outlined",nt),outlinedHover:Di("outlinedHover",nt),outlinedActive:Di("outlinedActive",nt),outlinedDisabled:Di("outlinedDisabled",nt),soft:Di("soft",nt),softHover:Di("softHover",nt),softActive:Di("softActive",nt),softDisabled:Di("softDisabled",nt),solid:Di("solid",nt),solidHover:Di("solidHover",nt),solidActive:Di("solidActive",nt),solidDisabled:Di("solidDisabled",nt)},J),it.palette=Q({},it.colorSchemes.light.palette,{colorScheme:"light"}),it.shouldSkipGeneratingVar=O,it.applyStyles=fx,it}const ML=AL(),Ap=ML,{CssVarsProvider:DL,useColorScheme:$9,getInitColorSchemeScript:B9}=cL({themeId:Mg,theme:Ap,attribute:"data-joy-color-scheme",modeStorageKey:"joy-mode",colorSchemeStorageKey:"joy-color-scheme",defaultColorScheme:{light:"light",dark:"dark"}}),xt=zk({defaultTheme:Ap,themeId:Mg});function cn({props:e,name:t}){return vx({props:e,name:t,defaultTheme:Q({},Ap,{components:{}}),themeId:Mg})}function RL(e){return de.jsx(uR,Q({},e,{defaultTheme:Ap,themeId:Mg}))}function LL(e){return typeof e=="string"}function Bk(e,t,n){return e===void 0||LL(e)?t:Q({},t,{ownerState:Q({},t.ownerState,n)})}function Yw(e,t,n=(a,c)=>a===c){return e.length===t.length&&e.every((a,c)=>n(a,t[c]))}const $L={disableDefaultClasses:!1},BL=V.createContext($L);function OL(e){const{disableDefaultClasses:t}=V.useContext(BL);return n=>t?"":e(n)}function Ca(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function Ok(e,t,n){return typeof e=="function"?e(t,n):e}function FL(e){const{rootElementName:t="",componentName:n}=e,[a,c]=V.useState(t.toUpperCase()),h=V.useCallback(g=>{var l;c((l=g==null?void 0:g.tagName)!=null?l:"")},[]);return[a,h]}function Qw(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Fk(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:c,className:h}=e;if(!t){const W=Ni(n==null?void 0:n.className,h,c==null?void 0:c.className,a==null?void 0:a.className),Z=Q({},n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),U=Q({},n,c,a);return W.length>0&&(U.className=W),Object.keys(Z).length>0&&(U.style=Z),{props:U,internalRef:void 0}}const g=Ca(Q({},c,a)),l=Qw(a),b=Qw(c),C=t(g),P=Ni(C==null?void 0:C.className,n==null?void 0:n.className,h,c==null?void 0:c.className,a==null?void 0:a.className),A=Q({},C==null?void 0:C.style,n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),D=Q({},C,n,b,l);return P.length>0&&(D.className=P),Object.keys(A).length>0&&(D.style=A),{props:D,internalRef:C.ref}}const NL=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function jL(e){var t;const{elementType:n,externalSlotProps:a,ownerState:c,skipResolvingSlotProps:h=!1}=e,g=nr(e,NL),l=h?{}:Ok(a,c),{props:b,internalRef:C}=Fk(Q({},g,{externalSlotProps:l})),P=bn(C,l==null?void 0:l.ref,(t=e.additionalProps)==null?void 0:t.ref);return Bk(n,Q({},b,{ref:P}),c)}const Nk="base";function VL(e){return`${Nk}--${e}`}function UL(e,t){return`${Nk}-${e}-${t}`}function jk(e,t){const n=Ck[t];return n?VL(n):UL(e,t)}function HL(e,t){const n={};return t.forEach(a=>{n[a]=jk(e,a)}),n}function lc(e={}){const{disabled:t=!1,focusableWhenDisabled:n,href:a,rootRef:c,tabIndex:h,to:g,type:l,rootElementName:b}=e,C=V.useRef(),[P,A]=V.useState(!1),{isFocusVisibleRef:D,onFocus:W,onBlur:Z,ref:U}=xx(),[J,O]=V.useState(!1);t&&!n&&J&&O(!1),V.useEffect(()=>{D.current=J},[J,D]);const[$,N]=FL({rootElementName:b??(a||g?"a":void 0),componentName:"Button"}),ie=Ke=>Re=>{var Ue;J&&Re.preventDefault(),(Ue=Ke.onMouseLeave)==null||Ue.call(Ke,Re)},te=Ke=>Re=>{var Ue;Z(Re),D.current===!1&&O(!1),(Ue=Ke.onBlur)==null||Ue.call(Ke,Re)},ee=Ke=>Re=>{var Ue;if(C.current||(C.current=Re.currentTarget),W(Re),D.current===!0){var Ne;O(!0),(Ne=Ke.onFocusVisible)==null||Ne.call(Ke,Re)}(Ue=Ke.onFocus)==null||Ue.call(Ke,Re)},re=()=>{const Ke=C.current;return $==="BUTTON"||$==="INPUT"&&["button","submit","reset"].includes(Ke==null?void 0:Ke.type)||$==="A"&&(Ke==null?void 0:Ke.href)},fe=Ke=>Re=>{if(!t){var Ue;(Ue=Ke.onClick)==null||Ue.call(Ke,Re)}},Te=Ke=>Re=>{var Ue;t||(A(!0),document.addEventListener("mouseup",()=>{A(!1)},{once:!0})),(Ue=Ke.onMouseDown)==null||Ue.call(Ke,Re)},be=Ke=>Re=>{var Ue;if((Ue=Ke.onKeyDown)==null||Ue.call(Ke,Re),!Re.defaultMuiPrevented&&(Re.target===Re.currentTarget&&!re()&&Re.key===" "&&Re.preventDefault(),Re.target===Re.currentTarget&&Re.key===" "&&!t&&A(!0),Re.target===Re.currentTarget&&!re()&&Re.key==="Enter"&&!t)){var Ne;(Ne=Ke.onClick)==null||Ne.call(Ke,Re),Re.preventDefault()}},ze=Ke=>Re=>{var Ue;if(Re.target===Re.currentTarget&&A(!1),(Ue=Ke.onKeyUp)==null||Ue.call(Ke,Re),Re.target===Re.currentTarget&&!re()&&!t&&Re.key===" "&&!Re.defaultMuiPrevented){var Ne;(Ne=Ke.onClick)==null||Ne.call(Ke,Re)}},Ee=bn(N,c,U,C),Fe={};return h!==void 0&&(Fe.tabIndex=h),$==="BUTTON"?(Fe.type=l??"button",n?Fe["aria-disabled"]=t:Fe.disabled=t):$==="INPUT"?l&&["button","submit","reset"].includes(l)&&(n?Fe["aria-disabled"]=t:Fe.disabled=t):$!==""&&(!a&&!g&&(Fe.role="button",Fe.tabIndex=h??0),t&&(Fe["aria-disabled"]=t,Fe.tabIndex=n?h??0:-1)),{getRootProps:(Ke={})=>{const Re=Q({},Ca(e),Ca(Ke)),Ue=Q({type:l},Re,Fe,Ke,{onBlur:te(Re),onClick:fe(Re),onFocus:ee(Re),onKeyDown:be(Re),onKeyUp:ze(Re),onMouseDown:Te(Re),onMouseLeave:ie(Re),ref:Ee});return delete Ue.onFocusVisible,Ue},focusVisible:J,setFocusVisible:O,active:P,rootRef:Ee}}function WL(e,t){return e===t}const qv={},eS=()=>{};function $0(e,t){const n=Q({},e);return Object.keys(t).forEach(a=>{t[a]!==void 0&&(n[a]=t[a])}),n}function GL(e){const{nextState:t,initialState:n,stateComparers:a,onStateChange:c,controlledProps:h,lastActionRef:g}=e,l=V.useRef(n);V.useEffect(()=>{if(g.current===null)return;const b=$0(l.current,h);Object.keys(t).forEach(C=>{var P;const A=(P=a[C])!=null?P:WL,D=t[C],W=b[C];if(W==null&&D!=null||W!=null&&D==null||W!=null&&D!=null&&!A(D,W)){var Z,U;c==null||c((Z=g.current.event)!=null?Z:null,C,D,(U=g.current.type)!=null?U:"",t)}}),l.current=t,g.current=null},[l,t,g,c,a,h])}function qL(e){const t=V.useRef(null),{reducer:n,initialState:a,controlledProps:c=qv,stateComparers:h=qv,onStateChange:g=eS,actionContext:l,componentName:b=""}=e;V.useRef(c);const C=V.useCallback((W,Z)=>{t.current=Z;const U=$0(W,c);return n(U,Z)},[c,n]),[P,A]=V.useReducer(C,a),D=V.useCallback(W=>{A(Q({},W,{context:l}))},[l]);return GL({nextState:P,initialState:a,stateComparers:h??qv,onStateChange:g??eS,controlledProps:c,lastActionRef:t}),[$0(P,c),D]}const ZL=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function KL(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function XL(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function JL(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||XL(e))}function YL(e){const t=[],n=[];return Array.from(e.querySelectorAll(ZL)).forEach((a,c)=>{const h=KL(a);h===-1||!JL(a)||(h===0?t.push(a):n.push({documentOrder:c,tabIndex:h,node:a}))}),n.sort((a,c)=>a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex).map(a=>a.node).concat(t)}function QL(){return!0}function e5(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:c=!1,getTabbable:h=YL,isEnabled:g=QL,open:l}=e,b=V.useRef(!1),C=V.useRef(null),P=V.useRef(null),A=V.useRef(null),D=V.useRef(null),W=V.useRef(!1),Z=V.useRef(null),U=bn(t.ref,Z),J=V.useRef(null);V.useEffect(()=>{!l||!Z.current||(W.current=!n)},[n,l]),V.useEffect(()=>{if(!l||!Z.current)return;const N=Ga(Z.current);return Z.current.contains(N.activeElement)||(Z.current.hasAttribute("tabIndex")||Z.current.setAttribute("tabIndex","-1"),W.current&&Z.current.focus()),()=>{c||(A.current&&A.current.focus&&(b.current=!0,A.current.focus()),A.current=null)}},[l]),V.useEffect(()=>{if(!l||!Z.current)return;const N=Ga(Z.current),ie=re=>{J.current=re,!(a||!g()||re.key!=="Tab")&&N.activeElement===Z.current&&re.shiftKey&&(b.current=!0,P.current&&P.current.focus())},te=()=>{const re=Z.current;if(re===null)return;if(!N.hasFocus()||!g()||b.current){b.current=!1;return}if(re.contains(N.activeElement)||a&&N.activeElement!==C.current&&N.activeElement!==P.current)return;if(N.activeElement!==D.current)D.current=null;else if(D.current!==null)return;if(!W.current)return;let fe=[];if((N.activeElement===C.current||N.activeElement===P.current)&&(fe=h(Z.current)),fe.length>0){var Te,be;const ze=!!((Te=J.current)!=null&&Te.shiftKey&&((be=J.current)==null?void 0:be.key)==="Tab"),Ee=fe[0],Fe=fe[fe.length-1];typeof Ee!="string"&&typeof Fe!="string"&&(ze?Fe.focus():Ee.focus())}else re.focus()};N.addEventListener("focusin",te),N.addEventListener("keydown",ie,!0);const ee=setInterval(()=>{N.activeElement&&N.activeElement.tagName==="BODY"&&te()},50);return()=>{clearInterval(ee),N.removeEventListener("focusin",te),N.removeEventListener("keydown",ie,!0)}},[n,a,c,g,l,h]);const O=N=>{A.current===null&&(A.current=N.relatedTarget),W.current=!0,D.current=N.target;const ie=t.props.onFocus;ie&&ie(N)},$=N=>{A.current===null&&(A.current=N.relatedTarget),W.current=!0};return de.jsxs(V.Fragment,{children:[de.jsx("div",{tabIndex:l?0:-1,onFocus:$,ref:C,"data-testid":"sentinelStart"}),V.cloneElement(t,{ref:U,onFocus:O}),de.jsx("div",{tabIndex:l?0:-1,onFocus:$,ref:P,"data-testid":"sentinelEnd"})]})}const kn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function t5(e,t,n,a,c,h){if(n.length===0||!a&&n.every((l,b)=>c(l,b)))return-1;let g=e;for(;;){if(!h&&t==="next"&&g===n.length||!h&&t==="previous"&&g===-1)return-1;if(a?!1:c(n[g],g))g+=t==="next"?1:-1,h&&(g=(g+n.length)%n.length);else return g}}function ui(e,t,n){var a;const{items:c,isItemDisabled:h,disableListWrap:g,disabledItemsFocusable:l,itemComparer:b,focusManagement:C}=n,P=C==="DOM"?0:-1,A=c.length-1,D=e==null?-1:c.findIndex(O=>b(O,e));let W,Z,U=!g;switch(t){case"reset":if(P===-1)return null;W=0,Z="next",U=!1;break;case"start":W=0,Z="next",U=!1;break;case"end":W=A,Z="previous",U=!1;break;default:{const O=D+t;O<0?!U&&D!==-1||Math.abs(t)>1?(W=0,Z="next"):(W=A,Z="previous"):O>A?!U||Math.abs(t)>1?(W=A,Z="previous"):(W=0,Z="next"):(W=O,Z=t>=0?"next":"previous")}}const J=t5(W,Z,c,l,h,U);return J===-1&&e!==null&&!h(e,D)?e:(a=c[J])!=null?a:null}function r5(e,t,n,a){return n==="none"?[]:n==="single"?a(t[0],e)?t:[e]:t.some(c=>a(c,e))?t.filter(c=>!a(c,e)):[...t,e]}function kx(e,t,n){const{itemComparer:a,isItemDisabled:c,selectionMode:h,items:g}=n,{selectedValues:l}=t,b=g.findIndex(P=>a(e,P));if(c(e,b))return t;const C=r5(e,l,h,a);return Q({},t,{selectedValues:C,highlightedValue:e})}function n5(e,t,n){const a=t.highlightedValue,{orientation:c,pageSize:h}=n;switch(e){case"Home":return Q({},t,{highlightedValue:ui(a,"start",n)});case"End":return Q({},t,{highlightedValue:ui(a,"end",n)});case"PageUp":return Q({},t,{highlightedValue:ui(a,-h,n)});case"PageDown":return Q({},t,{highlightedValue:ui(a,h,n)});case"ArrowUp":if(c!=="vertical")break;return Q({},t,{highlightedValue:ui(a,-1,n)});case"ArrowDown":if(c!=="vertical")break;return Q({},t,{highlightedValue:ui(a,1,n)});case"ArrowLeft":{if(c==="vertical")break;return Q({},t,{highlightedValue:ui(a,c==="horizontal-ltr"?-1:1,n)})}case"ArrowRight":{if(c==="vertical")break;return Q({},t,{highlightedValue:ui(a,c==="horizontal-ltr"?1:-1,n)})}case"Enter":case" ":return t.highlightedValue===null?t:kx(t.highlightedValue,t,n)}return t}function i5(e,t){return t.focusManagement==="DOM"?e:Q({},e,{highlightedValue:null})}function o5(e,t,n){var a;const c=(a=n(e))==null?void 0:a.trim().toLowerCase();return!c||c.length===0?!1:c.indexOf(t)===0}function a5(e,t,n){const{items:a,isItemDisabled:c,disabledItemsFocusable:h,getItemAsString:g}=n,l=t.length>1;let b=l?e.highlightedValue:ui(e.highlightedValue,1,n);for(let C=0;C<a.length;C+=1){if(!b||!l&&e.highlightedValue===b)return e;if(o5(b,t,g)&&(!c(b,a.indexOf(b))||h))return Q({},e,{highlightedValue:b});b=ui(b,1,n)}return e}function s5(e,t,n,a){var c;const{itemComparer:h,focusManagement:g}=a;let l=null;if(n.highlightedValue!=null){var b;l=(b=e.find(A=>h(A,n.highlightedValue)))!=null?b:null}else g==="DOM"&&t.length===0&&(l=ui(null,"reset",a));const P=((c=n.selectedValues)!=null?c:[]).filter(A=>e.some(D=>h(D,A)));return Q({},n,{highlightedValue:l,selectedValues:P})}function l5(e,t){return Q({},e,{highlightedValue:ui(null,"reset",t)})}function c5(e,t){return Q({},e,{highlightedValue:ui(null,"end",t)})}function u5(e,t){return Q({},e,{selectedValues:[],highlightedValue:ui(null,"reset",t)})}function Tx(e,t){const{type:n,context:a}=t;switch(n){case kn.keyDown:return n5(t.key,e,a);case kn.itemClick:return kx(t.item,e,a);case kn.blur:return i5(e,a);case kn.textNavigation:return a5(e,t.searchString,a);case kn.itemsChange:return s5(t.items,t.previousItems,e,a);case kn.resetHighlight:return l5(e,a);case kn.highlightLast:return c5(e,a);case kn.clearSelection:return u5(e,a);default:return e}}const d5=500;function h5(e){const t=V.useRef({searchString:"",lastTime:null});return V.useCallback(n=>{if(n.key.length===1&&n.key!==" "){const a=t.current,c=n.key.toLowerCase(),h=performance.now();a.searchString.length>0&&a.lastTime&&h-a.lastTime>d5?a.searchString=c:(a.searchString.length!==1||c!==a.searchString)&&(a.searchString+=c),a.lastTime=h,e(a.searchString,n)}},[e])}const tS={},p5=()=>{},f5=(e,t)=>e===t,m5=()=>!1,g5=e=>typeof e=="string"?e:String(e),y5=()=>({highlightedValue:null,selectedValues:[]});function Vk(e){const{controlledProps:t=tS,disabledItemsFocusable:n=!1,disableListWrap:a=!1,focusManagement:c="activeDescendant",getInitialState:h=y5,getItemDomElement:g,getItemId:l,isItemDisabled:b=m5,rootRef:C,onStateChange:P=p5,items:A,itemComparer:D=f5,getItemAsString:W=g5,onChange:Z,onHighlightChange:U,onItemsChange:J,orientation:O="vertical",pageSize:$=5,reducerActionContext:N=tS,selectionMode:ie="single",stateReducer:te,componentName:ee="useList"}=e,re=V.useRef(null),fe=bn(C,re),Te=V.useCallback((nt,We,st)=>{if(U==null||U(nt,We,st),c==="DOM"&&We!=null&&(st===kn.itemClick||st===kn.keyDown||st===kn.textNavigation)){var bt;g==null||(bt=g(We))==null||bt.focus()}},[g,U,c]),be=V.useMemo(()=>({highlightedValue:D,selectedValues:(nt,We)=>Yw(nt,We,D)}),[D]),ze=V.useCallback((nt,We,st,bt,Ht)=>{switch(P==null||P(nt,We,st,bt,Ht),We){case"highlightedValue":Te(nt,st,bt);break;case"selectedValues":Z==null||Z(nt,st,bt);break}},[Te,Z,P]),Ee=V.useMemo(()=>({disabledItemsFocusable:n,disableListWrap:a,focusManagement:c,isItemDisabled:b,itemComparer:D,items:A,getItemAsString:W,onHighlightChange:Te,orientation:O,pageSize:$,selectionMode:ie,stateComparers:be}),[n,a,c,b,D,A,W,Te,O,$,ie,be]),Fe=h(),Ye=te??Tx,Ke=V.useMemo(()=>Q({},N,Ee),[N,Ee]),[Re,Ue]=qL({reducer:Ye,actionContext:Ke,initialState:Fe,controlledProps:t,stateComparers:be,onStateChange:ze,componentName:ee}),{highlightedValue:Ne,selectedValues:Xe}=Re,ct=h5((nt,We)=>Ue({type:kn.textNavigation,event:We,searchString:nt})),ft=V.useRef([]);V.useEffect(()=>{Yw(ft.current,A,D)||(Ue({type:kn.itemsChange,event:null,items:A,previousItems:ft.current}),ft.current=A,J==null||J(A))},[A,D,Ue,J]);const it=nt=>We=>{var st;if((st=nt.onKeyDown)==null||st.call(nt,We),We.defaultMuiPrevented)return;const bt=["Home","End","PageUp","PageDown"];O==="vertical"?bt.push("ArrowUp","ArrowDown"):bt.push("ArrowLeft","ArrowRight"),c==="activeDescendant"&&bt.push(" ","Enter"),bt.includes(We.key)&&We.preventDefault(),Ue({type:kn.keyDown,key:We.key,event:We}),ct(We)},Et=nt=>We=>{var st,bt;(st=nt.onBlur)==null||st.call(nt,We),!We.defaultMuiPrevented&&((bt=re.current)!=null&&bt.contains(We.relatedTarget)||Ue({type:kn.blur,event:We}))},mt=(nt={})=>{const We=Ca(nt);return Q({},nt,{"aria-activedescendant":c==="activeDescendant"&&Ne!=null?l(Ne):void 0,tabIndex:c==="DOM"?-1:0,ref:fe},We,{onBlur:Et(We),onKeyDown:it(We)})},zt=V.useCallback(nt=>{const We=(Xe??[]).some(Ht=>Ht!=null&&D(nt,Ht)),st=Ne!=null&&D(nt,Ne);return{focusable:c==="DOM",highlighted:st,selected:We}},[D,Xe,Ne,c]),tr=V.useMemo(()=>({dispatch:Ue,getItemState:zt}),[Ue,zt]);return V.useDebugValue({state:Re}),{contextValue:tr,dispatch:Ue,getRootProps:mt,rootRef:fe,state:Re}}const Mp=V.createContext(null);function Uk(e){const{handlePointerOverEvents:t=!1,item:n}=e,a=V.useContext(Mp);if(!a)throw new Error("useListItem must be used within a ListProvider");const{dispatch:c,getItemState:h}=a,{highlighted:g,selected:l,focusable:b}=h(n),C=V.useCallback(W=>Z=>{var U;(U=W.onClick)==null||U.call(W,Z),!Z.defaultPrevented&&c({type:kn.itemClick,item:n,event:Z})},[c,n]),P=V.useCallback(W=>Z=>{var U;(U=W.onMouseOver)==null||U.call(W,Z),!Z.defaultPrevented&&c({type:kn.itemHover,item:n,event:Z})},[c,n]);let A;return b&&(A=g?0:-1),{getRootProps:(W={})=>{const Z=Ca(W);return Q({},W,{onClick:C(Z),onPointerOver:t?P(Z):void 0,tabIndex:A})},highlighted:g,selected:l}}const cy=V.createContext(null);function v5(e){const t=Array.from(e.keys()).map(n=>{const a=e.get(n);return{key:n,subitem:a}});return t.sort((n,a)=>{const c=n.subitem.ref.current,h=a.subitem.ref.current;return c===null||h===null||c===h?0:c.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(n=>[n.key,n.subitem]))}function Ix(){const[e,t]=V.useState(new Map),n=V.useRef(new Set),a=V.useCallback(function(C){n.current.delete(C),t(P=>{const A=new Map(P);return A.delete(C),A})},[]),c=V.useCallback(function(C,P){let A;return typeof C=="function"?A=C(n.current):A=C,n.current.add(A),t(D=>{const W=new Map(D);return W.set(A,P),W}),{id:A,deregister:()=>a(A)}},[a]),h=V.useMemo(()=>v5(e),[e]),g=V.useCallback(function(C){return Array.from(h.keys()).indexOf(C)},[h]);return{contextValue:V.useMemo(()=>({getItemIndex:g,registerItem:c,totalSubitemCount:e.size}),[g,c,e.size]),subitems:h}}function Px(e,t){const n=V.useContext(cy);if(n===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:a}=n,[c,h]=V.useState(typeof e=="function"?void 0:e);return tc(()=>{const{id:g,deregister:l}=a(e,t);return h(g),l},[a,t,e]),{id:c,index:c!==void 0?n.getItemIndex(c):-1,totalItemCount:n.totalSubitemCount}}function ep(e,t){return function(a={}){const c=Q({},a,e(a));return Q({},c,t(c))}}var Hk={exports:{}},$o={},Wk={exports:{}},Gk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ne,Xe){var ct=Ne.length;Ne.push(Xe);e:for(;0<ct;){var ft=ct-1>>>1,it=Ne[ft];if(0<c(it,Xe))Ne[ft]=Xe,Ne[ct]=it,ct=ft;else break e}}function n(Ne){return Ne.length===0?null:Ne[0]}function a(Ne){if(Ne.length===0)return null;var Xe=Ne[0],ct=Ne.pop();if(ct!==Xe){Ne[0]=ct;e:for(var ft=0,it=Ne.length,Et=it>>>1;ft<Et;){var mt=2*(ft+1)-1,zt=Ne[mt],tr=mt+1,nt=Ne[tr];if(0>c(zt,ct))tr<it&&0>c(nt,zt)?(Ne[ft]=nt,Ne[tr]=ct,ft=tr):(Ne[ft]=zt,Ne[mt]=ct,ft=mt);else if(tr<it&&0>c(nt,ct))Ne[ft]=nt,Ne[tr]=ct,ft=tr;else break e}}return Xe}function c(Ne,Xe){var ct=Ne.sortIndex-Xe.sortIndex;return ct!==0?ct:Ne.id-Xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var g=Date,l=g.now();e.unstable_now=function(){return g.now()-l}}var b=[],C=[],P=1,A=null,D=3,W=!1,Z=!1,U=!1,J=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Ne){for(var Xe=n(C);Xe!==null;){if(Xe.callback===null)a(C);else if(Xe.startTime<=Ne)a(C),Xe.sortIndex=Xe.expirationTime,t(b,Xe);else break;Xe=n(C)}}function ie(Ne){if(U=!1,N(Ne),!Z)if(n(b)!==null)Z=!0,Re(te);else{var Xe=n(C);Xe!==null&&Ue(ie,Xe.startTime-Ne)}}function te(Ne,Xe){Z=!1,U&&(U=!1,O(fe),fe=-1),W=!0;var ct=D;try{for(N(Xe),A=n(b);A!==null&&(!(A.expirationTime>Xe)||Ne&&!ze());){var ft=A.callback;if(typeof ft=="function"){A.callback=null,D=A.priorityLevel;var it=ft(A.expirationTime<=Xe);Xe=e.unstable_now(),typeof it=="function"?A.callback=it:A===n(b)&&a(b),N(Xe)}else a(b);A=n(b)}if(A!==null)var Et=!0;else{var mt=n(C);mt!==null&&Ue(ie,mt.startTime-Xe),Et=!1}return Et}finally{A=null,D=ct,W=!1}}var ee=!1,re=null,fe=-1,Te=5,be=-1;function ze(){return!(e.unstable_now()-be<Te)}function Ee(){if(re!==null){var Ne=e.unstable_now();be=Ne;var Xe=!0;try{Xe=re(!0,Ne)}finally{Xe?Fe():(ee=!1,re=null)}}else ee=!1}var Fe;if(typeof $=="function")Fe=function(){$(Ee)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Ke=Ye.port2;Ye.port1.onmessage=Ee,Fe=function(){Ke.postMessage(null)}}else Fe=function(){J(Ee,0)};function Re(Ne){re=Ne,ee||(ee=!0,Fe())}function Ue(Ne,Xe){fe=J(function(){Ne(e.unstable_now())},Xe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ne){Ne.callback=null},e.unstable_continueExecution=function(){Z||W||(Z=!0,Re(te))},e.unstable_forceFrameRate=function(Ne){0>Ne||125<Ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<Ne?Math.floor(1e3/Ne):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function(Ne){switch(D){case 1:case 2:case 3:var Xe=3;break;default:Xe=D}var ct=D;D=Xe;try{return Ne()}finally{D=ct}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ne,Xe){switch(Ne){case 1:case 2:case 3:case 4:case 5:break;default:Ne=3}var ct=D;D=Ne;try{return Xe()}finally{D=ct}},e.unstable_scheduleCallback=function(Ne,Xe,ct){var ft=e.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?ft+ct:ft):ct=ft,Ne){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=ct+it,Ne={id:P++,callback:Xe,priorityLevel:Ne,startTime:ct,expirationTime:it,sortIndex:-1},ct>ft?(Ne.sortIndex=ct,t(C,Ne),n(b)===null&&Ne===n(C)&&(U?(O(fe),fe=-1):U=!0,Ue(ie,ct-ft))):(Ne.sortIndex=it,t(b,Ne),Z||W||(Z=!0,Re(te))),Ne},e.unstable_shouldYield=ze,e.unstable_wrapCallback=function(Ne){var Xe=D;return function(){var ct=D;D=Xe;try{return Ne.apply(this,arguments)}finally{D=ct}}}})(Gk);Wk.exports=Gk;var _5=Wk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=V,Do=_5;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zk=new Set,tp={};function cc(e,t){Mu(e,t),Mu(e+"Capture",t)}function Mu(e,t){for(tp[e]=t,e=0;e<t.length;e++)Zk.add(t[e])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B0=Object.prototype.hasOwnProperty,x5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rS={},nS={};function b5(e){return B0.call(nS,e)?!0:B0.call(rS,e)?!1:x5.test(e)?nS[e]=!0:(rS[e]=!0,!1)}function w5(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S5(e,t,n,a){if(t===null||typeof t>"u"||w5(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,n,a,c,h,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=g}var Ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ci[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ci[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ci[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ci[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ci[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ci[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ci[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ci[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ci[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ex=/[\-:]([a-z])/g;function zx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ex,zx);Ci[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ex,zx);Ci[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ex,zx);Ci[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ci[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});Ci.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ci[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ax(e,t,n,a){var c=Ci.hasOwnProperty(t)?Ci[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S5(t,n,c,a)&&(n=null),a||c===null?b5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,a=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var Ts=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,om=Symbol.for("react.element"),ou=Symbol.for("react.portal"),au=Symbol.for("react.fragment"),Mx=Symbol.for("react.strict_mode"),O0=Symbol.for("react.profiler"),Kk=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),F0=Symbol.for("react.suspense"),N0=Symbol.for("react.suspense_list"),Rx=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),Jk=Symbol.for("react.offscreen"),iS=Symbol.iterator;function uh(e){return e===null||typeof e!="object"?null:(e=iS&&e[iS]||e["@@iterator"],typeof e=="function"?e:null)}var Pn=Object.assign,Zv;function Ph(e){if(Zv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zv=t&&t[1]||""}return`
`+Zv+e}var Kv=!1;function Xv(e,t){if(!e||Kv)return"";Kv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),h=a.stack.split(`
`),g=c.length-1,l=h.length-1;1<=g&&0<=l&&c[g]!==h[l];)l--;for(;1<=g&&0<=l;g--,l--)if(c[g]!==h[l]){if(g!==1||l!==1)do if(g--,l--,0>l||c[g]!==h[l]){var b=`
`+c[g].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=g&&0<=l);break}}}finally{Kv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ph(e):""}function C5(e){switch(e.tag){case 5:return Ph(e.type);case 16:return Ph("Lazy");case 13:return Ph("Suspense");case 19:return Ph("SuspenseList");case 0:case 2:case 15:return e=Xv(e.type,!1),e;case 11:return e=Xv(e.type.render,!1),e;case 1:return e=Xv(e.type,!0),e;default:return""}}function j0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case au:return"Fragment";case ou:return"Portal";case O0:return"Profiler";case Mx:return"StrictMode";case F0:return"Suspense";case N0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xk:return(e.displayName||"Context")+".Consumer";case Kk:return(e._context.displayName||"Context")+".Provider";case Dx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rx:return t=e.displayName||null,t!==null?t:j0(e.type)||"Memo";case Zs:t=e._payload,e=e._init;try{return j0(e(t))}catch{}}return null}function k5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j0(t);case 8:return t===Mx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function T5(e){var t=Yk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,h.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function am(e){e._valueTracker||(e._valueTracker=T5(e))}function Qk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Yk(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Km(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function V0(e,t){var n=t.checked;return Pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oS(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=hl(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eT(e,t){t=t.checked,t!=null&&Ax(e,"checked",t,!1)}function U0(e,t){eT(e,t);var n=hl(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H0(e,t.type,n):t.hasOwnProperty("defaultValue")&&H0(e,t.type,hl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function aS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function H0(e,t,n){(t!=="number"||Km(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Eh=Array.isArray;function Su(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+hl(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function W0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return Pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(lt(92));if(Eh(n)){if(1<n.length)throw Error(lt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hl(n)}}function tT(e,t){var n=hl(t.value),a=hl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function lS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sm,nT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sm=sm||document.createElement("div"),sm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $h={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I5=["Webkit","ms","Moz","O"];Object.keys($h).forEach(function(e){I5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$h[t]=$h[e]})});function iT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$h.hasOwnProperty(e)&&$h[e]?(""+t).trim():t+"px"}function oT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,c=iT(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,c):e[n]=c}}var P5=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q0(e,t){if(t){if(P5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function Z0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K0=null;function Lx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var X0=null,Cu=null,ku=null;function cS(e){if(e=Lp(e)){if(typeof X0!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=fy(t),X0(e.stateNode,e.type,t))}}function aT(e){Cu?ku?ku.push(e):ku=[e]:Cu=e}function sT(){if(Cu){var e=Cu,t=ku;if(ku=Cu=null,cS(e),t)for(e=0;e<t.length;e++)cS(t[e])}}function lT(e,t){return e(t)}function cT(){}var Jv=!1;function uT(e,t,n){if(Jv)return e(t,n);Jv=!0;try{return lT(e,t,n)}finally{Jv=!1,(Cu!==null||ku!==null)&&(cT(),sT())}}function np(e,t){var n=e.stateNode;if(n===null)return null;var a=fy(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(lt(231,t,typeof n));return n}var J0=!1;if(xs)try{var dh={};Object.defineProperty(dh,"passive",{get:function(){J0=!0}}),window.addEventListener("test",dh,dh),window.removeEventListener("test",dh,dh)}catch{J0=!1}function E5(e,t,n,a,c,h,g,l,b){var C=Array.prototype.slice.call(arguments,3);try{t.apply(n,C)}catch(P){this.onError(P)}}var Bh=!1,Xm=null,Jm=!1,Y0=null,z5={onError:function(e){Bh=!0,Xm=e}};function A5(e,t,n,a,c,h,g,l,b){Bh=!1,Xm=null,E5.apply(z5,arguments)}function M5(e,t,n,a,c,h,g,l,b){if(A5.apply(this,arguments),Bh){if(Bh){var C=Xm;Bh=!1,Xm=null}else throw Error(lt(198));Jm||(Jm=!0,Y0=C)}}function uc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uS(e){if(uc(e)!==e)throw Error(lt(188))}function D5(e){var t=e.alternate;if(!t){if(t=uc(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var h=c.alternate;if(h===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===n)return uS(c),e;if(h===a)return uS(c),t;h=h.sibling}throw Error(lt(188))}if(n.return!==a.return)n=c,a=h;else{for(var g=!1,l=c.child;l;){if(l===n){g=!0,n=c,a=h;break}if(l===a){g=!0,a=c,n=h;break}l=l.sibling}if(!g){for(l=h.child;l;){if(l===n){g=!0,n=h,a=c;break}if(l===a){g=!0,a=h,n=c;break}l=l.sibling}if(!g)throw Error(lt(189))}}if(n.alternate!==a)throw Error(lt(190))}if(n.tag!==3)throw Error(lt(188));return n.stateNode.current===n?e:t}function hT(e){return e=D5(e),e!==null?pT(e):null}function pT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pT(e);if(t!==null)return t;e=e.sibling}return null}var fT=Do.unstable_scheduleCallback,dS=Do.unstable_cancelCallback,R5=Do.unstable_shouldYield,L5=Do.unstable_requestPaint,qn=Do.unstable_now,$5=Do.unstable_getCurrentPriorityLevel,$x=Do.unstable_ImmediatePriority,mT=Do.unstable_UserBlockingPriority,Ym=Do.unstable_NormalPriority,B5=Do.unstable_LowPriority,gT=Do.unstable_IdlePriority,uy=null,qa=null;function O5(e){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot(uy,e,void 0,(e.current.flags&128)===128)}catch{}}var ka=Math.clz32?Math.clz32:j5,F5=Math.log,N5=Math.LN2;function j5(e){return e>>>=0,e===0?32:31-(F5(e)/N5|0)|0}var lm=64,cm=4194304;function zh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qm(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,c=e.suspendedLanes,h=e.pingedLanes,g=n&268435455;if(g!==0){var l=g&~c;l!==0?a=zh(l):(h&=g,h!==0&&(a=zh(h)))}else g=n&~c,g!==0?a=zh(g):h!==0&&(a=zh(h));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-ka(t),c=1<<n,a|=e[n],t&=~c;return a}function V5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U5(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var g=31-ka(h),l=1<<g,b=c[g];b===-1?(!(l&n)||l&a)&&(c[g]=V5(l,t)):b<=t&&(e.expiredLanes|=l),h&=~l}}function Q0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yT(){var e=lm;return lm<<=1,!(lm&4194240)&&(lm=64),e}function Yv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Dp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ka(t),e[t]=n}function H5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-ka(n),h=1<<c;t[c]=0,a[c]=-1,e[c]=-1,n&=~h}}function Bx(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ka(n),c=1<<a;c&t|e[a]&t&&(e[a]|=t),n&=~c}}var Gr=0;function vT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _T,Ox,xT,bT,wT,e_=!1,um=[],rl=null,nl=null,il=null,ip=new Map,op=new Map,Xs=[],W5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hS(e,t){switch(e){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":ip.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":op.delete(t.pointerId)}}function hh(e,t,n,a,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Lp(t),t!==null&&Ox(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function G5(e,t,n,a,c){switch(t){case"focusin":return rl=hh(rl,e,t,n,a,c),!0;case"dragenter":return nl=hh(nl,e,t,n,a,c),!0;case"mouseover":return il=hh(il,e,t,n,a,c),!0;case"pointerover":var h=c.pointerId;return ip.set(h,hh(ip.get(h)||null,e,t,n,a,c)),!0;case"gotpointercapture":return h=c.pointerId,op.set(h,hh(op.get(h)||null,e,t,n,a,c)),!0}return!1}function ST(e){var t=Hl(e.target);if(t!==null){var n=uc(t);if(n!==null){if(t=n.tag,t===13){if(t=dT(n),t!==null){e.blockedOn=t,wT(e.priority,function(){xT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Am(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=t_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);K0=a,n.target.dispatchEvent(a),K0=null}else return t=Lp(n),t!==null&&Ox(t),e.blockedOn=n,!1;t.shift()}return!0}function pS(e,t,n){Am(e)&&n.delete(t)}function q5(){e_=!1,rl!==null&&Am(rl)&&(rl=null),nl!==null&&Am(nl)&&(nl=null),il!==null&&Am(il)&&(il=null),ip.forEach(pS),op.forEach(pS)}function ph(e,t){e.blockedOn===t&&(e.blockedOn=null,e_||(e_=!0,Do.unstable_scheduleCallback(Do.unstable_NormalPriority,q5)))}function ap(e){function t(c){return ph(c,e)}if(0<um.length){ph(um[0],e);for(var n=1;n<um.length;n++){var a=um[n];a.blockedOn===e&&(a.blockedOn=null)}}for(rl!==null&&ph(rl,e),nl!==null&&ph(nl,e),il!==null&&ph(il,e),ip.forEach(t),op.forEach(t),n=0;n<Xs.length;n++)a=Xs[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Xs.length&&(n=Xs[0],n.blockedOn===null);)ST(n),n.blockedOn===null&&Xs.shift()}var Tu=Ts.ReactCurrentBatchConfig,eg=!0;function Z5(e,t,n,a){var c=Gr,h=Tu.transition;Tu.transition=null;try{Gr=1,Fx(e,t,n,a)}finally{Gr=c,Tu.transition=h}}function K5(e,t,n,a){var c=Gr,h=Tu.transition;Tu.transition=null;try{Gr=4,Fx(e,t,n,a)}finally{Gr=c,Tu.transition=h}}function Fx(e,t,n,a){if(eg){var c=t_(e,t,n,a);if(c===null)l0(e,t,a,tg,n),hS(e,a);else if(G5(c,e,t,n,a))a.stopPropagation();else if(hS(e,a),t&4&&-1<W5.indexOf(e)){for(;c!==null;){var h=Lp(c);if(h!==null&&_T(h),h=t_(e,t,n,a),h===null&&l0(e,t,a,tg,n),h===c)break;c=h}c!==null&&a.stopPropagation()}else l0(e,t,a,null,n)}}var tg=null;function t_(e,t,n,a){if(tg=null,e=Lx(a),e=Hl(e),e!==null)if(t=uc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tg=e,null}function CT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($5()){case $x:return 1;case mT:return 4;case Ym:case B5:return 16;case gT:return 536870912;default:return 16}default:return 16}}var el=null,Nx=null,Mm=null;function kT(){if(Mm)return Mm;var e,t=Nx,n=t.length,a,c="value"in el?el.value:el.textContent,h=c.length;for(e=0;e<n&&t[e]===c[e];e++);var g=n-e;for(a=1;a<=g&&t[n-a]===c[h-a];a++);return Mm=c.slice(e,1<a?1-a:void 0)}function Dm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dm(){return!0}function fS(){return!1}function Bo(e){function t(n,a,c,h,g){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(h):h[l]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?dm:fS,this.isPropagationStopped=fS,this}return Pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dm)},persist:function(){},isPersistent:dm}),t}var Xu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jx=Bo(Xu),Rp=Pn({},Xu,{view:0,detail:0}),X5=Bo(Rp),Qv,e0,fh,dy=Pn({},Rp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fh&&(fh&&e.type==="mousemove"?(Qv=e.screenX-fh.screenX,e0=e.screenY-fh.screenY):e0=Qv=0,fh=e),Qv)},movementY:function(e){return"movementY"in e?e.movementY:e0}}),mS=Bo(dy),J5=Pn({},dy,{dataTransfer:0}),Y5=Bo(J5),Q5=Pn({},Rp,{relatedTarget:0}),t0=Bo(Q5),e$=Pn({},Xu,{animationName:0,elapsedTime:0,pseudoElement:0}),t$=Bo(e$),r$=Pn({},Xu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n$=Bo(r$),i$=Pn({},Xu,{data:0}),gS=Bo(i$),o$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=s$[e])?!!t[e]:!1}function Vx(){return l$}var c$=Pn({},Rp,{key:function(e){if(e.key){var t=o$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?a$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vx,charCode:function(e){return e.type==="keypress"?Dm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u$=Bo(c$),d$=Pn({},dy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yS=Bo(d$),h$=Pn({},Rp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vx}),p$=Bo(h$),f$=Pn({},Xu,{propertyName:0,elapsedTime:0,pseudoElement:0}),m$=Bo(f$),g$=Pn({},dy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y$=Bo(g$),v$=[9,13,27,32],Ux=xs&&"CompositionEvent"in window,Oh=null;xs&&"documentMode"in document&&(Oh=document.documentMode);var _$=xs&&"TextEvent"in window&&!Oh,TT=xs&&(!Ux||Oh&&8<Oh&&11>=Oh),vS=" ",_S=!1;function IT(e,t){switch(e){case"keyup":return v$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var su=!1;function x$(e,t){switch(e){case"compositionend":return PT(t);case"keypress":return t.which!==32?null:(_S=!0,vS);case"textInput":return e=t.data,e===vS&&_S?null:e;default:return null}}function b$(e,t){if(su)return e==="compositionend"||!Ux&&IT(e,t)?(e=kT(),Mm=Nx=el=null,su=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TT&&t.locale!=="ko"?null:t.data;default:return null}}var w$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!w$[e.type]:t==="textarea"}function ET(e,t,n,a){aT(a),t=rg(t,"onChange"),0<t.length&&(n=new jx("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Fh=null,sp=null;function S$(e){NT(e,0)}function hy(e){var t=uu(e);if(Qk(t))return e}function C$(e,t){if(e==="change")return t}var zT=!1;if(xs){var r0;if(xs){var n0="oninput"in document;if(!n0){var bS=document.createElement("div");bS.setAttribute("oninput","return;"),n0=typeof bS.oninput=="function"}r0=n0}else r0=!1;zT=r0&&(!document.documentMode||9<document.documentMode)}function wS(){Fh&&(Fh.detachEvent("onpropertychange",AT),sp=Fh=null)}function AT(e){if(e.propertyName==="value"&&hy(sp)){var t=[];ET(t,sp,e,Lx(e)),uT(S$,t)}}function k$(e,t,n){e==="focusin"?(wS(),Fh=t,sp=n,Fh.attachEvent("onpropertychange",AT)):e==="focusout"&&wS()}function T$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hy(sp)}function I$(e,t){if(e==="click")return hy(t)}function P$(e,t){if(e==="input"||e==="change")return hy(t)}function E$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ea=typeof Object.is=="function"?Object.is:E$;function lp(e,t){if(Ea(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var c=n[a];if(!B0.call(t,c)||!Ea(e[c],t[c]))return!1}return!0}function SS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function CS(e,t){var n=SS(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=SS(n)}}function MT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DT(){for(var e=window,t=Km();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Km(e.document)}return t}function Hx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function z$(e){var t=DT(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&MT(n.ownerDocument.documentElement,n)){if(a!==null&&Hx(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,h=Math.min(a.start,c);a=a.end===void 0?h:Math.min(a.end,c),!e.extend&&h>a&&(c=a,a=h,h=c),c=CS(n,h);var g=CS(n,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var A$=xs&&"documentMode"in document&&11>=document.documentMode,lu=null,r_=null,Nh=null,n_=!1;function kS(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;n_||lu==null||lu!==Km(a)||(a=lu,"selectionStart"in a&&Hx(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Nh&&lp(Nh,a)||(Nh=a,a=rg(r_,"onSelect"),0<a.length&&(t=new jx("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=lu)))}function hm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cu={animationend:hm("Animation","AnimationEnd"),animationiteration:hm("Animation","AnimationIteration"),animationstart:hm("Animation","AnimationStart"),transitionend:hm("Transition","TransitionEnd")},i0={},RT={};xs&&(RT=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function py(e){if(i0[e])return i0[e];if(!cu[e])return e;var t=cu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in RT)return i0[e]=t[n];return e}var LT=py("animationend"),$T=py("animationiteration"),BT=py("animationstart"),OT=py("transitionend"),FT=new Map,TS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fl(e,t){FT.set(e,t),cc(t,[e])}for(var o0=0;o0<TS.length;o0++){var a0=TS[o0],M$=a0.toLowerCase(),D$=a0[0].toUpperCase()+a0.slice(1);fl(M$,"on"+D$)}fl(LT,"onAnimationEnd");fl($T,"onAnimationIteration");fl(BT,"onAnimationStart");fl("dblclick","onDoubleClick");fl("focusin","onFocus");fl("focusout","onBlur");fl(OT,"onTransitionEnd");Mu("onMouseEnter",["mouseout","mouseover"]);Mu("onMouseLeave",["mouseout","mouseover"]);Mu("onPointerEnter",["pointerout","pointerover"]);Mu("onPointerLeave",["pointerout","pointerover"]);cc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cc("onBeforeInput",["compositionend","keypress","textInput","paste"]);cc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ah));function IS(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,M5(a,t,void 0,e),e.currentTarget=null}function NT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var g=a.length-1;0<=g;g--){var l=a[g],b=l.instance,C=l.currentTarget;if(l=l.listener,b!==h&&c.isPropagationStopped())break e;IS(c,l,C),h=b}else for(g=0;g<a.length;g++){if(l=a[g],b=l.instance,C=l.currentTarget,l=l.listener,b!==h&&c.isPropagationStopped())break e;IS(c,l,C),h=b}}}if(Jm)throw e=Y0,Jm=!1,Y0=null,e}function fn(e,t){var n=t[l_];n===void 0&&(n=t[l_]=new Set);var a=e+"__bubble";n.has(a)||(jT(t,e,2,!1),n.add(a))}function s0(e,t,n){var a=0;t&&(a|=4),jT(n,e,a,t)}var pm="_reactListening"+Math.random().toString(36).slice(2);function cp(e){if(!e[pm]){e[pm]=!0,Zk.forEach(function(n){n!=="selectionchange"&&(R$.has(n)||s0(n,!1,e),s0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pm]||(t[pm]=!0,s0("selectionchange",!1,t))}}function jT(e,t,n,a){switch(CT(t)){case 1:var c=Z5;break;case 4:c=K5;break;default:c=Fx}n=c.bind(null,t,n,e),c=void 0,!J0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function l0(e,t,n,a,c){var h=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&(b=g.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;g=g.return}for(;l!==null;){if(g=Hl(l),g===null)return;if(b=g.tag,b===5||b===6){a=h=g;continue e}l=l.parentNode}}a=a.return}uT(function(){var C=h,P=Lx(n),A=[];e:{var D=FT.get(e);if(D!==void 0){var W=jx,Z=e;switch(e){case"keypress":if(Dm(n)===0)break e;case"keydown":case"keyup":W=u$;break;case"focusin":Z="focus",W=t0;break;case"focusout":Z="blur",W=t0;break;case"beforeblur":case"afterblur":W=t0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=mS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Y5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=p$;break;case LT:case $T:case BT:W=t$;break;case OT:W=m$;break;case"scroll":W=X5;break;case"wheel":W=y$;break;case"copy":case"cut":case"paste":W=n$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=yS}var U=(t&4)!==0,J=!U&&e==="scroll",O=U?D!==null?D+"Capture":null:D;U=[];for(var $=C,N;$!==null;){N=$;var ie=N.stateNode;if(N.tag===5&&ie!==null&&(N=ie,O!==null&&(ie=np($,O),ie!=null&&U.push(up($,ie,N)))),J)break;$=$.return}0<U.length&&(D=new W(D,Z,null,n,P),A.push({event:D,listeners:U}))}}if(!(t&7)){e:{if(D=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",D&&n!==K0&&(Z=n.relatedTarget||n.fromElement)&&(Hl(Z)||Z[bs]))break e;if((W||D)&&(D=P.window===P?P:(D=P.ownerDocument)?D.defaultView||D.parentWindow:window,W?(Z=n.relatedTarget||n.toElement,W=C,Z=Z?Hl(Z):null,Z!==null&&(J=uc(Z),Z!==J||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(W=null,Z=C),W!==Z)){if(U=mS,ie="onMouseLeave",O="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(U=yS,ie="onPointerLeave",O="onPointerEnter",$="pointer"),J=W==null?D:uu(W),N=Z==null?D:uu(Z),D=new U(ie,$+"leave",W,n,P),D.target=J,D.relatedTarget=N,ie=null,Hl(P)===C&&(U=new U(O,$+"enter",Z,n,P),U.target=N,U.relatedTarget=J,ie=U),J=ie,W&&Z)t:{for(U=W,O=Z,$=0,N=U;N;N=Xc(N))$++;for(N=0,ie=O;ie;ie=Xc(ie))N++;for(;0<$-N;)U=Xc(U),$--;for(;0<N-$;)O=Xc(O),N--;for(;$--;){if(U===O||O!==null&&U===O.alternate)break t;U=Xc(U),O=Xc(O)}U=null}else U=null;W!==null&&PS(A,D,W,U,!1),Z!==null&&J!==null&&PS(A,J,Z,U,!0)}}e:{if(D=C?uu(C):window,W=D.nodeName&&D.nodeName.toLowerCase(),W==="select"||W==="input"&&D.type==="file")var te=C$;else if(xS(D))if(zT)te=P$;else{te=T$;var ee=k$}else(W=D.nodeName)&&W.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(te=I$);if(te&&(te=te(e,C))){ET(A,te,n,P);break e}ee&&ee(e,D,C),e==="focusout"&&(ee=D._wrapperState)&&ee.controlled&&D.type==="number"&&H0(D,"number",D.value)}switch(ee=C?uu(C):window,e){case"focusin":(xS(ee)||ee.contentEditable==="true")&&(lu=ee,r_=C,Nh=null);break;case"focusout":Nh=r_=lu=null;break;case"mousedown":n_=!0;break;case"contextmenu":case"mouseup":case"dragend":n_=!1,kS(A,n,P);break;case"selectionchange":if(A$)break;case"keydown":case"keyup":kS(A,n,P)}var re;if(Ux)e:{switch(e){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else su?IT(e,n)&&(fe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(fe="onCompositionStart");fe&&(TT&&n.locale!=="ko"&&(su||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&su&&(re=kT()):(el=P,Nx="value"in el?el.value:el.textContent,su=!0)),ee=rg(C,fe),0<ee.length&&(fe=new gS(fe,e,null,n,P),A.push({event:fe,listeners:ee}),re?fe.data=re:(re=PT(n),re!==null&&(fe.data=re)))),(re=_$?x$(e,n):b$(e,n))&&(C=rg(C,"onBeforeInput"),0<C.length&&(P=new gS("onBeforeInput","beforeinput",null,n,P),A.push({event:P,listeners:C}),P.data=re))}NT(A,t)})}function up(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rg(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=np(e,n),h!=null&&a.unshift(up(e,h,c)),h=np(e,t),h!=null&&a.push(up(e,h,c))),e=e.return}return a}function Xc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PS(e,t,n,a,c){for(var h=t._reactName,g=[];n!==null&&n!==a;){var l=n,b=l.alternate,C=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&C!==null&&(l=C,c?(b=np(n,h),b!=null&&g.unshift(up(n,b,l))):c||(b=np(n,h),b!=null&&g.push(up(n,b,l)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var L$=/\r\n?/g,$$=/\u0000|\uFFFD/g;function ES(e){return(typeof e=="string"?e:""+e).replace(L$,`
`).replace($$,"")}function fm(e,t,n){if(t=ES(t),ES(e)!==t&&n)throw Error(lt(425))}function ng(){}var i_=null,o_=null;function a_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var s_=typeof setTimeout=="function"?setTimeout:void 0,B$=typeof clearTimeout=="function"?clearTimeout:void 0,zS=typeof Promise=="function"?Promise:void 0,O$=typeof queueMicrotask=="function"?queueMicrotask:typeof zS<"u"?function(e){return zS.resolve(null).then(e).catch(F$)}:s_;function F$(e){setTimeout(function(){throw e})}function c0(e,t){var n=t,a=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(a===0){e.removeChild(c),ap(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=c}while(n);ap(t)}function ol(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function AS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ju=Math.random().toString(36).slice(2),Ha="__reactFiber$"+Ju,dp="__reactProps$"+Ju,bs="__reactContainer$"+Ju,l_="__reactEvents$"+Ju,N$="__reactListeners$"+Ju,j$="__reactHandles$"+Ju;function Hl(e){var t=e[Ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bs]||n[Ha]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=AS(e);e!==null;){if(n=e[Ha])return n;e=AS(e)}return t}e=n,n=e.parentNode}return null}function Lp(e){return e=e[Ha]||e[bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function uu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function fy(e){return e[dp]||null}var c_=[],du=-1;function ml(e){return{current:e}}function mn(e){0>du||(e.current=c_[du],c_[du]=null,du--)}function sn(e,t){du++,c_[du]=e.current,e.current=t}var pl={},ji=ml(pl),fo=ml(!1),rc=pl;function Du(e,t){var n=e.type.contextTypes;if(!n)return pl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in n)c[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function mo(e){return e=e.childContextTypes,e!=null}function ig(){mn(fo),mn(ji)}function MS(e,t,n){if(ji.current!==pl)throw Error(lt(168));sn(ji,t),sn(fo,n)}function VT(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(lt(108,k5(e)||"Unknown",c));return Pn({},n,a)}function og(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pl,rc=ji.current,sn(ji,e),sn(fo,fo.current),!0}function DS(e,t,n){var a=e.stateNode;if(!a)throw Error(lt(169));n?(e=VT(e,t,rc),a.__reactInternalMemoizedMergedChildContext=e,mn(fo),mn(ji),sn(ji,e)):mn(fo),sn(fo,n)}var ms=null,my=!1,u0=!1;function UT(e){ms===null?ms=[e]:ms.push(e)}function V$(e){my=!0,UT(e)}function gl(){if(!u0&&ms!==null){u0=!0;var e=0,t=Gr;try{var n=ms;for(Gr=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}ms=null,my=!1}catch(c){throw ms!==null&&(ms=ms.slice(e+1)),fT($x,gl),c}finally{Gr=t,u0=!1}}return null}var hu=[],pu=0,ag=null,sg=0,Ko=[],Xo=0,nc=null,ys=1,vs="";function Nl(e,t){hu[pu++]=sg,hu[pu++]=ag,ag=e,sg=t}function HT(e,t,n){Ko[Xo++]=ys,Ko[Xo++]=vs,Ko[Xo++]=nc,nc=e;var a=ys;e=vs;var c=32-ka(a)-1;a&=~(1<<c),n+=1;var h=32-ka(t)+c;if(30<h){var g=c-c%5;h=(a&(1<<g)-1).toString(32),a>>=g,c-=g,ys=1<<32-ka(t)+c|n<<c|a,vs=h+e}else ys=1<<h|n<<c|a,vs=e}function Wx(e){e.return!==null&&(Nl(e,1),HT(e,1,0))}function Gx(e){for(;e===ag;)ag=hu[--pu],hu[pu]=null,sg=hu[--pu],hu[pu]=null;for(;e===nc;)nc=Ko[--Xo],Ko[Xo]=null,vs=Ko[--Xo],Ko[Xo]=null,ys=Ko[--Xo],Ko[Xo]=null}var Mo=null,zo=null,xn=!1,Sa=null;function WT(e,t){var n=Jo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function RS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mo=e,zo=ol(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mo=e,zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=nc!==null?{id:ys,overflow:vs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Jo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mo=e,zo=null,!0):!1;default:return!1}}function u_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function d_(e){if(xn){var t=zo;if(t){var n=t;if(!RS(e,t)){if(u_(e))throw Error(lt(418));t=ol(n.nextSibling);var a=Mo;t&&RS(e,t)?WT(a,n):(e.flags=e.flags&-4097|2,xn=!1,Mo=e)}}else{if(u_(e))throw Error(lt(418));e.flags=e.flags&-4097|2,xn=!1,Mo=e}}}function LS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mo=e}function mm(e){if(e!==Mo)return!1;if(!xn)return LS(e),xn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!a_(e.type,e.memoizedProps)),t&&(t=zo)){if(u_(e))throw GT(),Error(lt(418));for(;t;)WT(e,t),t=ol(t.nextSibling)}if(LS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zo=ol(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zo=null}}else zo=Mo?ol(e.stateNode.nextSibling):null;return!0}function GT(){for(var e=zo;e;)e=ol(e.nextSibling)}function Ru(){zo=Mo=null,xn=!1}function qx(e){Sa===null?Sa=[e]:Sa.push(e)}var U$=Ts.ReactCurrentBatchConfig;function xa(e,t){if(e&&e.defaultProps){t=Pn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var lg=ml(null),cg=null,fu=null,Zx=null;function Kx(){Zx=fu=cg=null}function Xx(e){var t=lg.current;mn(lg),e._currentValue=t}function h_(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Iu(e,t){cg=e,Zx=fu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(po=!0),e.firstContext=null)}function ea(e){var t=e._currentValue;if(Zx!==e)if(e={context:e,memoizedValue:t,next:null},fu===null){if(cg===null)throw Error(lt(308));fu=e,cg.dependencies={lanes:0,firstContext:e}}else fu=fu.next=e;return t}var Wl=null;function Jx(e){Wl===null?Wl=[e]:Wl.push(e)}function qT(e,t,n,a){var c=t.interleaved;return c===null?(n.next=n,Jx(t)):(n.next=c.next,c.next=n),t.interleaved=n,ws(e,a)}function ws(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ks=!1;function Yx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function al(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Rr&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,ws(e,n)}return c=a.interleaved,c===null?(t.next=t,Jx(a)):(t.next=c.next,c.next=t),a.interleaved=t,ws(e,n)}function Rm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Bx(e,n)}}function $S(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?c=h=g:h=h.next=g,n=n.next}while(n!==null);h===null?c=h=t:h=h.next=t}else c=h=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ug(e,t,n,a){var c=e.updateQueue;Ks=!1;var h=c.firstBaseUpdate,g=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,C=b.next;b.next=null,g===null?h=C:g.next=C,g=b;var P=e.alternate;P!==null&&(P=P.updateQueue,l=P.lastBaseUpdate,l!==g&&(l===null?P.firstBaseUpdate=C:l.next=C,P.lastBaseUpdate=b))}if(h!==null){var A=c.baseState;g=0,P=C=b=null,l=h;do{var D=l.lane,W=l.eventTime;if((a&D)===D){P!==null&&(P=P.next={eventTime:W,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var Z=e,U=l;switch(D=t,W=n,U.tag){case 1:if(Z=U.payload,typeof Z=="function"){A=Z.call(W,A,D);break e}A=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=U.payload,D=typeof Z=="function"?Z.call(W,A,D):Z,D==null)break e;A=Pn({},A,D);break e;case 2:Ks=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,D=c.effects,D===null?c.effects=[l]:D.push(l))}else W={eventTime:W,lane:D,tag:l.tag,payload:l.payload,callback:l.callback,next:null},P===null?(C=P=W,b=A):P=P.next=W,g|=D;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;D=l,l=D.next,D.next=null,c.lastBaseUpdate=D,c.shared.pending=null}}while(!0);if(P===null&&(b=A),c.baseState=b,c.firstBaseUpdate=C,c.lastBaseUpdate=P,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);oc|=g,e.lanes=g,e.memoizedState=A}}function BS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=n,typeof c!="function")throw Error(lt(191,c));c.call(a)}}}var KT=new qk.Component().refs;function p_(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:Pn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gy={isMounted:function(e){return(e=e._reactInternals)?uc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=to(),c=ll(e),h=_s(a,c);h.payload=t,n!=null&&(h.callback=n),t=al(e,h,c),t!==null&&(Ta(t,e,c,a),Rm(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=to(),c=ll(e),h=_s(a,c);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=al(e,h,c),t!==null&&(Ta(t,e,c,a),Rm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=to(),a=ll(e),c=_s(n,a);c.tag=2,t!=null&&(c.callback=t),t=al(e,c,a),t!==null&&(Ta(t,e,a,n),Rm(t,e,a))}};function OS(e,t,n,a,c,h,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,g):t.prototype&&t.prototype.isPureReactComponent?!lp(n,a)||!lp(c,h):!0}function XT(e,t,n){var a=!1,c=pl,h=t.contextType;return typeof h=="object"&&h!==null?h=ea(h):(c=mo(t)?rc:ji.current,a=t.contextTypes,h=(a=a!=null)?Du(e,c):pl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gy,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function FS(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&gy.enqueueReplaceState(t,t.state,null)}function f_(e,t,n,a){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=KT,Yx(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=ea(h):(h=mo(t)?rc:ji.current,c.context=Du(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(p_(e,t,h,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&gy.enqueueReplaceState(c,c.state,null),ug(e,n,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function mh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(lt(309));var a=n.stateNode}if(!a)throw Error(lt(147,e));var c=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(g){var l=c.refs;l===KT&&(l=c.refs={}),g===null?delete l[h]:l[h]=g},t._stringRef=h,t)}if(typeof e!="string")throw Error(lt(284));if(!n._owner)throw Error(lt(290,e))}return e}function gm(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NS(e){var t=e._init;return t(e._payload)}function JT(e){function t(O,$){if(e){var N=O.deletions;N===null?(O.deletions=[$],O.flags|=16):N.push($)}}function n(O,$){if(!e)return null;for(;$!==null;)t(O,$),$=$.sibling;return null}function a(O,$){for(O=new Map;$!==null;)$.key!==null?O.set($.key,$):O.set($.index,$),$=$.sibling;return O}function c(O,$){return O=cl(O,$),O.index=0,O.sibling=null,O}function h(O,$,N){return O.index=N,e?(N=O.alternate,N!==null?(N=N.index,N<$?(O.flags|=2,$):N):(O.flags|=2,$)):(O.flags|=1048576,$)}function g(O){return e&&O.alternate===null&&(O.flags|=2),O}function l(O,$,N,ie){return $===null||$.tag!==6?($=y0(N,O.mode,ie),$.return=O,$):($=c($,N),$.return=O,$)}function b(O,$,N,ie){var te=N.type;return te===au?P(O,$,N.props.children,ie,N.key):$!==null&&($.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Zs&&NS(te)===$.type)?(ie=c($,N.props),ie.ref=mh(O,$,N),ie.return=O,ie):(ie=Nm(N.type,N.key,N.props,null,O.mode,ie),ie.ref=mh(O,$,N),ie.return=O,ie)}function C(O,$,N,ie){return $===null||$.tag!==4||$.stateNode.containerInfo!==N.containerInfo||$.stateNode.implementation!==N.implementation?($=v0(N,O.mode,ie),$.return=O,$):($=c($,N.children||[]),$.return=O,$)}function P(O,$,N,ie,te){return $===null||$.tag!==7?($=Xl(N,O.mode,ie,te),$.return=O,$):($=c($,N),$.return=O,$)}function A(O,$,N){if(typeof $=="string"&&$!==""||typeof $=="number")return $=y0(""+$,O.mode,N),$.return=O,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case om:return N=Nm($.type,$.key,$.props,null,O.mode,N),N.ref=mh(O,null,$),N.return=O,N;case ou:return $=v0($,O.mode,N),$.return=O,$;case Zs:var ie=$._init;return A(O,ie($._payload),N)}if(Eh($)||uh($))return $=Xl($,O.mode,N,null),$.return=O,$;gm(O,$)}return null}function D(O,$,N,ie){var te=$!==null?$.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return te!==null?null:l(O,$,""+N,ie);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case om:return N.key===te?b(O,$,N,ie):null;case ou:return N.key===te?C(O,$,N,ie):null;case Zs:return te=N._init,D(O,$,te(N._payload),ie)}if(Eh(N)||uh(N))return te!==null?null:P(O,$,N,ie,null);gm(O,N)}return null}function W(O,$,N,ie,te){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return O=O.get(N)||null,l($,O,""+ie,te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case om:return O=O.get(ie.key===null?N:ie.key)||null,b($,O,ie,te);case ou:return O=O.get(ie.key===null?N:ie.key)||null,C($,O,ie,te);case Zs:var ee=ie._init;return W(O,$,N,ee(ie._payload),te)}if(Eh(ie)||uh(ie))return O=O.get(N)||null,P($,O,ie,te,null);gm($,ie)}return null}function Z(O,$,N,ie){for(var te=null,ee=null,re=$,fe=$=0,Te=null;re!==null&&fe<N.length;fe++){re.index>fe?(Te=re,re=null):Te=re.sibling;var be=D(O,re,N[fe],ie);if(be===null){re===null&&(re=Te);break}e&&re&&be.alternate===null&&t(O,re),$=h(be,$,fe),ee===null?te=be:ee.sibling=be,ee=be,re=Te}if(fe===N.length)return n(O,re),xn&&Nl(O,fe),te;if(re===null){for(;fe<N.length;fe++)re=A(O,N[fe],ie),re!==null&&($=h(re,$,fe),ee===null?te=re:ee.sibling=re,ee=re);return xn&&Nl(O,fe),te}for(re=a(O,re);fe<N.length;fe++)Te=W(re,O,fe,N[fe],ie),Te!==null&&(e&&Te.alternate!==null&&re.delete(Te.key===null?fe:Te.key),$=h(Te,$,fe),ee===null?te=Te:ee.sibling=Te,ee=Te);return e&&re.forEach(function(ze){return t(O,ze)}),xn&&Nl(O,fe),te}function U(O,$,N,ie){var te=uh(N);if(typeof te!="function")throw Error(lt(150));if(N=te.call(N),N==null)throw Error(lt(151));for(var ee=te=null,re=$,fe=$=0,Te=null,be=N.next();re!==null&&!be.done;fe++,be=N.next()){re.index>fe?(Te=re,re=null):Te=re.sibling;var ze=D(O,re,be.value,ie);if(ze===null){re===null&&(re=Te);break}e&&re&&ze.alternate===null&&t(O,re),$=h(ze,$,fe),ee===null?te=ze:ee.sibling=ze,ee=ze,re=Te}if(be.done)return n(O,re),xn&&Nl(O,fe),te;if(re===null){for(;!be.done;fe++,be=N.next())be=A(O,be.value,ie),be!==null&&($=h(be,$,fe),ee===null?te=be:ee.sibling=be,ee=be);return xn&&Nl(O,fe),te}for(re=a(O,re);!be.done;fe++,be=N.next())be=W(re,O,fe,be.value,ie),be!==null&&(e&&be.alternate!==null&&re.delete(be.key===null?fe:be.key),$=h(be,$,fe),ee===null?te=be:ee.sibling=be,ee=be);return e&&re.forEach(function(Ee){return t(O,Ee)}),xn&&Nl(O,fe),te}function J(O,$,N,ie){if(typeof N=="object"&&N!==null&&N.type===au&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case om:e:{for(var te=N.key,ee=$;ee!==null;){if(ee.key===te){if(te=N.type,te===au){if(ee.tag===7){n(O,ee.sibling),$=c(ee,N.props.children),$.return=O,O=$;break e}}else if(ee.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Zs&&NS(te)===ee.type){n(O,ee.sibling),$=c(ee,N.props),$.ref=mh(O,ee,N),$.return=O,O=$;break e}n(O,ee);break}else t(O,ee);ee=ee.sibling}N.type===au?($=Xl(N.props.children,O.mode,ie,N.key),$.return=O,O=$):(ie=Nm(N.type,N.key,N.props,null,O.mode,ie),ie.ref=mh(O,$,N),ie.return=O,O=ie)}return g(O);case ou:e:{for(ee=N.key;$!==null;){if($.key===ee)if($.tag===4&&$.stateNode.containerInfo===N.containerInfo&&$.stateNode.implementation===N.implementation){n(O,$.sibling),$=c($,N.children||[]),$.return=O,O=$;break e}else{n(O,$);break}else t(O,$);$=$.sibling}$=v0(N,O.mode,ie),$.return=O,O=$}return g(O);case Zs:return ee=N._init,J(O,$,ee(N._payload),ie)}if(Eh(N))return Z(O,$,N,ie);if(uh(N))return U(O,$,N,ie);gm(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,$!==null&&$.tag===6?(n(O,$.sibling),$=c($,N),$.return=O,O=$):(n(O,$),$=y0(N,O.mode,ie),$.return=O,O=$),g(O)):n(O,$)}return J}var Lu=JT(!0),YT=JT(!1),$p={},Za=ml($p),hp=ml($p),pp=ml($p);function Gl(e){if(e===$p)throw Error(lt(174));return e}function Qx(e,t){switch(sn(pp,t),sn(hp,e),sn(Za,$p),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=G0(t,e)}mn(Za),sn(Za,t)}function $u(){mn(Za),mn(hp),mn(pp)}function QT(e){Gl(pp.current);var t=Gl(Za.current),n=G0(t,e.type);t!==n&&(sn(hp,e),sn(Za,n))}function e1(e){hp.current===e&&(mn(Za),mn(hp))}var Tn=ml(0);function dg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var d0=[];function t1(){for(var e=0;e<d0.length;e++)d0[e]._workInProgressVersionPrimary=null;d0.length=0}var Lm=Ts.ReactCurrentDispatcher,h0=Ts.ReactCurrentBatchConfig,ic=0,In=null,ni=null,di=null,hg=!1,jh=!1,fp=0,H$=0;function Ri(){throw Error(lt(321))}function r1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ea(e[n],t[n]))return!1;return!0}function n1(e,t,n,a,c,h){if(ic=h,In=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lm.current=e===null||e.memoizedState===null?Z$:K$,e=n(a,c),jh){h=0;do{if(jh=!1,fp=0,25<=h)throw Error(lt(301));h+=1,di=ni=null,t.updateQueue=null,Lm.current=X$,e=n(a,c)}while(jh)}if(Lm.current=pg,t=ni!==null&&ni.next!==null,ic=0,di=ni=In=null,hg=!1,t)throw Error(lt(300));return e}function i1(){var e=fp!==0;return fp=0,e}function ja(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?In.memoizedState=di=e:di=di.next=e,di}function ta(){if(ni===null){var e=In.alternate;e=e!==null?e.memoizedState:null}else e=ni.next;var t=di===null?In.memoizedState:di.next;if(t!==null)di=t,ni=e;else{if(e===null)throw Error(lt(310));ni=e,e={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},di===null?In.memoizedState=di=e:di=di.next=e}return di}function mp(e,t){return typeof t=="function"?t(e):t}function p0(e){var t=ta(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var a=ni,c=a.baseQueue,h=n.pending;if(h!==null){if(c!==null){var g=c.next;c.next=h.next,h.next=g}a.baseQueue=c=h,n.pending=null}if(c!==null){h=c.next,a=a.baseState;var l=g=null,b=null,C=h;do{var P=C.lane;if((ic&P)===P)b!==null&&(b=b.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var A={lane:P,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};b===null?(l=b=A,g=a):b=b.next=A,In.lanes|=P,oc|=P}C=C.next}while(C!==null&&C!==h);b===null?g=a:b.next=l,Ea(a,t.memoizedState)||(po=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=b,n.lastRenderedState=a}if(e=n.interleaved,e!==null){c=e;do h=c.lane,In.lanes|=h,oc|=h,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function f0(e){var t=ta(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,h=t.memoizedState;if(c!==null){n.pending=null;var g=c=c.next;do h=e(h,g.action),g=g.next;while(g!==c);Ea(h,t.memoizedState)||(po=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,a]}function eI(){}function tI(e,t){var n=In,a=ta(),c=t(),h=!Ea(a.memoizedState,c);if(h&&(a.memoizedState=c,po=!0),a=a.queue,o1(iI.bind(null,n,a,e),[e]),a.getSnapshot!==t||h||di!==null&&di.memoizedState.tag&1){if(n.flags|=2048,gp(9,nI.bind(null,n,a,c,t),void 0,null),hi===null)throw Error(lt(349));ic&30||rI(n,t,c)}return c}function rI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=In.updateQueue,t===null?(t={lastEffect:null,stores:null},In.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nI(e,t,n,a){t.value=n,t.getSnapshot=a,oI(t)&&aI(e)}function iI(e,t,n){return n(function(){oI(t)&&aI(e)})}function oI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ea(e,n)}catch{return!0}}function aI(e){var t=ws(e,1);t!==null&&Ta(t,e,1,-1)}function jS(e){var t=ja();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:e},t.queue=e,e=e.dispatch=q$.bind(null,In,e),[t.memoizedState,e]}function gp(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=In.updateQueue,t===null?(t={lastEffect:null,stores:null},In.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function sI(){return ta().memoizedState}function $m(e,t,n,a){var c=ja();In.flags|=e,c.memoizedState=gp(1|t,n,void 0,a===void 0?null:a)}function yy(e,t,n,a){var c=ta();a=a===void 0?null:a;var h=void 0;if(ni!==null){var g=ni.memoizedState;if(h=g.destroy,a!==null&&r1(a,g.deps)){c.memoizedState=gp(t,n,h,a);return}}In.flags|=e,c.memoizedState=gp(1|t,n,h,a)}function VS(e,t){return $m(8390656,8,e,t)}function o1(e,t){return yy(2048,8,e,t)}function lI(e,t){return yy(4,2,e,t)}function cI(e,t){return yy(4,4,e,t)}function uI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dI(e,t,n){return n=n!=null?n.concat([e]):null,yy(4,4,uI.bind(null,t,e),n)}function a1(){}function hI(e,t){var n=ta();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&r1(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function pI(e,t){var n=ta();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&r1(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function fI(e,t,n){return ic&21?(Ea(n,t)||(n=yT(),In.lanes|=n,oc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,po=!0),e.memoizedState=n)}function W$(e,t){var n=Gr;Gr=n!==0&&4>n?n:4,e(!0);var a=h0.transition;h0.transition={};try{e(!1),t()}finally{Gr=n,h0.transition=a}}function mI(){return ta().memoizedState}function G$(e,t,n){var a=ll(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},gI(e))yI(t,n);else if(n=qT(e,t,n,a),n!==null){var c=to();Ta(n,e,a,c),vI(n,t,a)}}function q$(e,t,n){var a=ll(e),c={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(gI(e))yI(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var g=t.lastRenderedState,l=h(g,n);if(c.hasEagerState=!0,c.eagerState=l,Ea(l,g)){var b=t.interleaved;b===null?(c.next=c,Jx(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}n=qT(e,t,c,a),n!==null&&(c=to(),Ta(n,e,a,c),vI(n,t,a))}}function gI(e){var t=e.alternate;return e===In||t!==null&&t===In}function yI(e,t){jh=hg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vI(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Bx(e,n)}}var pg={readContext:ea,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},Z$={readContext:ea,useCallback:function(e,t){return ja().memoizedState=[e,t===void 0?null:t],e},useContext:ea,useEffect:VS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$m(4194308,4,uI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $m(4194308,4,e,t)},useInsertionEffect:function(e,t){return $m(4,2,e,t)},useMemo:function(e,t){var n=ja();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=ja();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=G$.bind(null,In,e),[a.memoizedState,e]},useRef:function(e){var t=ja();return e={current:e},t.memoizedState=e},useState:jS,useDebugValue:a1,useDeferredValue:function(e){return ja().memoizedState=e},useTransition:function(){var e=jS(!1),t=e[0];return e=W$.bind(null,e[1]),ja().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=In,c=ja();if(xn){if(n===void 0)throw Error(lt(407));n=n()}else{if(n=t(),hi===null)throw Error(lt(349));ic&30||rI(a,t,n)}c.memoizedState=n;var h={value:n,getSnapshot:t};return c.queue=h,VS(iI.bind(null,a,h,e),[e]),a.flags|=2048,gp(9,nI.bind(null,a,h,n,t),void 0,null),n},useId:function(){var e=ja(),t=hi.identifierPrefix;if(xn){var n=vs,a=ys;n=(a&~(1<<32-ka(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=fp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=H$++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},K$={readContext:ea,useCallback:hI,useContext:ea,useEffect:o1,useImperativeHandle:dI,useInsertionEffect:lI,useLayoutEffect:cI,useMemo:pI,useReducer:p0,useRef:sI,useState:function(){return p0(mp)},useDebugValue:a1,useDeferredValue:function(e){var t=ta();return fI(t,ni.memoizedState,e)},useTransition:function(){var e=p0(mp)[0],t=ta().memoizedState;return[e,t]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1},X$={readContext:ea,useCallback:hI,useContext:ea,useEffect:o1,useImperativeHandle:dI,useInsertionEffect:lI,useLayoutEffect:cI,useMemo:pI,useReducer:f0,useRef:sI,useState:function(){return f0(mp)},useDebugValue:a1,useDeferredValue:function(e){var t=ta();return ni===null?t.memoizedState=e:fI(t,ni.memoizedState,e)},useTransition:function(){var e=f0(mp)[0],t=ta().memoizedState;return[e,t]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1};function Bu(e,t){try{var n="",a=t;do n+=C5(a),a=a.return;while(a);var c=n}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function m0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var J$=typeof WeakMap=="function"?WeakMap:Map;function _I(e,t,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){mg||(mg=!0,k_=a),m_(e,t)},n}function xI(e,t,n){n=_s(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;n.payload=function(){return a(c)},n.callback=function(){m_(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){m_(e,t),typeof a!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),n}function US(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new J$;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(n)||(c.add(n),e=d3.bind(null,e,t,n),t.then(e,e))}function HS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function WS(e,t,n,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_s(-1,1),t.tag=2,al(n,t,1))),n.lanes|=1),e)}var Y$=Ts.ReactCurrentOwner,po=!1;function eo(e,t,n,a){t.child=e===null?YT(t,null,n,a):Lu(t,e.child,n,a)}function GS(e,t,n,a,c){n=n.render;var h=t.ref;return Iu(t,c),a=n1(e,t,n,a,h,c),n=i1(),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ss(e,t,c)):(xn&&n&&Wx(t),t.flags|=1,eo(e,t,a,c),t.child)}function qS(e,t,n,a,c){if(e===null){var h=n.type;return typeof h=="function"&&!f1(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,bI(e,t,h,a,c)):(e=Nm(n.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&c)){var g=h.memoizedProps;if(n=n.compare,n=n!==null?n:lp,n(g,a)&&e.ref===t.ref)return Ss(e,t,c)}return t.flags|=1,e=cl(h,a),e.ref=t.ref,e.return=t,t.child=e}function bI(e,t,n,a,c){if(e!==null){var h=e.memoizedProps;if(lp(h,a)&&e.ref===t.ref)if(po=!1,t.pendingProps=a=h,(e.lanes&c)!==0)e.flags&131072&&(po=!0);else return t.lanes=e.lanes,Ss(e,t,c)}return g_(e,t,n,a,c)}function wI(e,t,n){var a=t.pendingProps,c=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(gu,ko),ko|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sn(gu,ko),ko|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:n,sn(gu,ko),ko|=a}else h!==null?(a=h.baseLanes|n,t.memoizedState=null):a=n,sn(gu,ko),ko|=a;return eo(e,t,c,n),t.child}function SI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function g_(e,t,n,a,c){var h=mo(n)?rc:ji.current;return h=Du(t,h),Iu(t,c),n=n1(e,t,n,a,h,c),a=i1(),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ss(e,t,c)):(xn&&a&&Wx(t),t.flags|=1,eo(e,t,n,c),t.child)}function ZS(e,t,n,a,c){if(mo(n)){var h=!0;og(t)}else h=!1;if(Iu(t,c),t.stateNode===null)Bm(e,t),XT(t,n,a),f_(t,n,a,c),a=!0;else if(e===null){var g=t.stateNode,l=t.memoizedProps;g.props=l;var b=g.context,C=n.contextType;typeof C=="object"&&C!==null?C=ea(C):(C=mo(n)?rc:ji.current,C=Du(t,C));var P=n.getDerivedStateFromProps,A=typeof P=="function"||typeof g.getSnapshotBeforeUpdate=="function";A||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==a||b!==C)&&FS(t,g,a,C),Ks=!1;var D=t.memoizedState;g.state=D,ug(t,a,g,c),b=t.memoizedState,l!==a||D!==b||fo.current||Ks?(typeof P=="function"&&(p_(t,n,P,a),b=t.memoizedState),(l=Ks||OS(t,n,l,a,D,b,C))?(A||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),g.props=a,g.state=b,g.context=C,a=l):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,ZT(e,t),l=t.memoizedProps,C=t.type===t.elementType?l:xa(t.type,l),g.props=C,A=t.pendingProps,D=g.context,b=n.contextType,typeof b=="object"&&b!==null?b=ea(b):(b=mo(n)?rc:ji.current,b=Du(t,b));var W=n.getDerivedStateFromProps;(P=typeof W=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(l!==A||D!==b)&&FS(t,g,a,b),Ks=!1,D=t.memoizedState,g.state=D,ug(t,a,g,c);var Z=t.memoizedState;l!==A||D!==Z||fo.current||Ks?(typeof W=="function"&&(p_(t,n,W,a),Z=t.memoizedState),(C=Ks||OS(t,n,C,a,D,Z,b)||!1)?(P||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,Z,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,Z,b)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Z),g.props=a,g.state=Z,g.context=b,a=C):(typeof g.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),a=!1)}return y_(e,t,n,a,h,c)}function y_(e,t,n,a,c,h){SI(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&DS(t,n,!1),Ss(e,t,h);a=t.stateNode,Y$.current=t;var l=g&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=Lu(t,e.child,null,h),t.child=Lu(t,null,l,h)):eo(e,t,l,h),t.memoizedState=a.state,c&&DS(t,n,!0),t.child}function CI(e){var t=e.stateNode;t.pendingContext?MS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&MS(e,t.context,!1),Qx(e,t.containerInfo)}function KS(e,t,n,a,c){return Ru(),qx(c),t.flags|=256,eo(e,t,n,a),t.child}var v_={dehydrated:null,treeContext:null,retryLane:0};function __(e){return{baseLanes:e,cachePool:null,transitions:null}}function kI(e,t,n){var a=t.pendingProps,c=Tn.current,h=!1,g=(t.flags&128)!==0,l;if((l=g)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),sn(Tn,c&1),e===null)return d_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=a.children,e=a.fallback,h?(a=t.mode,h=t.child,g={mode:"hidden",children:g},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=g):h=xy(g,a,0,null),e=Xl(e,a,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=__(n),t.memoizedState=v_,e):s1(t,g));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return Q$(e,t,g,a,l,c,n);if(h){h=a.fallback,g=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(g&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=cl(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?h=cl(l,h):(h=Xl(h,g,n,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,g=e.child.memoizedState,g=g===null?__(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},h.memoizedState=g,h.childLanes=e.childLanes&~n,t.memoizedState=v_,a}return h=e.child,e=h.sibling,a=cl(h,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function s1(e,t){return t=xy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ym(e,t,n,a){return a!==null&&qx(a),Lu(t,e.child,null,n),e=s1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q$(e,t,n,a,c,h,g){if(n)return t.flags&256?(t.flags&=-257,a=m0(Error(lt(422))),ym(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,c=t.mode,a=xy({mode:"visible",children:a.children},c,0,null),h=Xl(h,c,g,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,t.mode&1&&Lu(t,e.child,null,g),t.child.memoizedState=__(g),t.memoizedState=v_,h);if(!(t.mode&1))return ym(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,h=Error(lt(419)),a=m0(h,a,void 0),ym(e,t,g,a)}if(l=(g&e.childLanes)!==0,po||l){if(a=hi,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|g)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,ws(e,c),Ta(a,e,c,-1))}return p1(),a=m0(Error(lt(421))),ym(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=h3.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,zo=ol(c.nextSibling),Mo=t,xn=!0,Sa=null,e!==null&&(Ko[Xo++]=ys,Ko[Xo++]=vs,Ko[Xo++]=nc,ys=e.id,vs=e.overflow,nc=t),t=s1(t,a.children),t.flags|=4096,t)}function XS(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),h_(e.return,t,n)}function g0(e,t,n,a,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=n,h.tailMode=c)}function TI(e,t,n){var a=t.pendingProps,c=a.revealOrder,h=a.tail;if(eo(e,t,a.children,n),a=Tn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&XS(e,n,t);else if(e.tag===19)XS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(sn(Tn,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&dg(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),g0(t,!1,c,n,h);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&dg(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}g0(t,!0,n,null,h);break;case"together":g0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ss(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,n=cl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function e3(e,t,n){switch(t.tag){case 3:CI(t),Ru();break;case 5:QT(t);break;case 1:mo(t.type)&&og(t);break;case 4:Qx(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;sn(lg,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(sn(Tn,Tn.current&1),t.flags|=128,null):n&t.child.childLanes?kI(e,t,n):(sn(Tn,Tn.current&1),e=Ss(e,t,n),e!==null?e.sibling:null);sn(Tn,Tn.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return TI(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),sn(Tn,Tn.current),a)break;return null;case 22:case 23:return t.lanes=0,wI(e,t,n)}return Ss(e,t,n)}var II,x_,PI,EI;II=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};x_=function(){};PI=function(e,t,n,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Gl(Za.current);var h=null;switch(n){case"input":c=V0(e,c),a=V0(e,a),h=[];break;case"select":c=Pn({},c,{value:void 0}),a=Pn({},a,{value:void 0}),h=[];break;case"textarea":c=W0(e,c),a=W0(e,a),h=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ng)}q0(n,a);var g;n=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var l=c[C];for(g in l)l.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(tp.hasOwnProperty(C)?h||(h=[]):(h=h||[]).push(C,null));for(C in a){var b=a[C];if(l=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&b!==l&&(b!=null||l!=null))if(C==="style")if(l){for(g in l)!l.hasOwnProperty(g)||b&&b.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in b)b.hasOwnProperty(g)&&l[g]!==b[g]&&(n||(n={}),n[g]=b[g])}else n||(h||(h=[]),h.push(C,n)),n=b;else C==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(h=h||[]).push(C,b)):C==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(C,""+b):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(tp.hasOwnProperty(C)?(b!=null&&C==="onScroll"&&fn("scroll",e),h||l===b||(h=[])):(h=h||[]).push(C,b))}n&&(h=h||[]).push("style",n);var C=h;(t.updateQueue=C)&&(t.flags|=4)}};EI=function(e,t,n,a){n!==a&&(t.flags|=4)};function gh(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Li(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function t3(e,t,n){var a=t.pendingProps;switch(Gx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(t),null;case 1:return mo(t.type)&&ig(),Li(t),null;case 3:return a=t.stateNode,$u(),mn(fo),mn(ji),t1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(mm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sa!==null&&(P_(Sa),Sa=null))),x_(e,t),Li(t),null;case 5:e1(t);var c=Gl(pp.current);if(n=t.type,e!==null&&t.stateNode!=null)PI(e,t,n,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(lt(166));return Li(t),null}if(e=Gl(Za.current),mm(t)){a=t.stateNode,n=t.type;var h=t.memoizedProps;switch(a[Ha]=t,a[dp]=h,e=(t.mode&1)!==0,n){case"dialog":fn("cancel",a),fn("close",a);break;case"iframe":case"object":case"embed":fn("load",a);break;case"video":case"audio":for(c=0;c<Ah.length;c++)fn(Ah[c],a);break;case"source":fn("error",a);break;case"img":case"image":case"link":fn("error",a),fn("load",a);break;case"details":fn("toggle",a);break;case"input":oS(a,h),fn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},fn("invalid",a);break;case"textarea":sS(a,h),fn("invalid",a)}q0(n,h),c=null;for(var g in h)if(h.hasOwnProperty(g)){var l=h[g];g==="children"?typeof l=="string"?a.textContent!==l&&(h.suppressHydrationWarning!==!0&&fm(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(h.suppressHydrationWarning!==!0&&fm(a.textContent,l,e),c=["children",""+l]):tp.hasOwnProperty(g)&&l!=null&&g==="onScroll"&&fn("scroll",a)}switch(n){case"input":am(a),aS(a,h,!0);break;case"textarea":am(a),lS(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=ng)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(n,{is:a.is}):(e=g.createElement(n),n==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,n),e[Ha]=t,e[dp]=a,II(e,t,!1,!1),t.stateNode=e;e:{switch(g=Z0(n,a),n){case"dialog":fn("cancel",e),fn("close",e),c=a;break;case"iframe":case"object":case"embed":fn("load",e),c=a;break;case"video":case"audio":for(c=0;c<Ah.length;c++)fn(Ah[c],e);c=a;break;case"source":fn("error",e),c=a;break;case"img":case"image":case"link":fn("error",e),fn("load",e),c=a;break;case"details":fn("toggle",e),c=a;break;case"input":oS(e,a),c=V0(e,a),fn("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Pn({},a,{value:void 0}),fn("invalid",e);break;case"textarea":sS(e,a),c=W0(e,a),fn("invalid",e);break;default:c=a}q0(n,c),l=c;for(h in l)if(l.hasOwnProperty(h)){var b=l[h];h==="style"?oT(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nT(e,b)):h==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&rp(e,b):typeof b=="number"&&rp(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(tp.hasOwnProperty(h)?b!=null&&h==="onScroll"&&fn("scroll",e):b!=null&&Ax(e,h,b,g))}switch(n){case"input":am(e),aS(e,a,!1);break;case"textarea":am(e),lS(e);break;case"option":a.value!=null&&e.setAttribute("value",""+hl(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?Su(e,!!a.multiple,h,!1):a.defaultValue!=null&&Su(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ng)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Li(t),null;case 6:if(e&&t.stateNode!=null)EI(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(lt(166));if(n=Gl(pp.current),Gl(Za.current),mm(t)){if(a=t.stateNode,n=t.memoizedProps,a[Ha]=t,(h=a.nodeValue!==n)&&(e=Mo,e!==null))switch(e.tag){case 3:fm(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fm(a.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[Ha]=t,t.stateNode=a}return Li(t),null;case 13:if(mn(Tn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xn&&zo!==null&&t.mode&1&&!(t.flags&128))GT(),Ru(),t.flags|=98560,h=!1;else if(h=mm(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(lt(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(lt(317));h[Ha]=t}else Ru(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Li(t),h=!1}else Sa!==null&&(P_(Sa),Sa=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Tn.current&1?ii===0&&(ii=3):p1())),t.updateQueue!==null&&(t.flags|=4),Li(t),null);case 4:return $u(),x_(e,t),e===null&&cp(t.stateNode.containerInfo),Li(t),null;case 10:return Xx(t.type._context),Li(t),null;case 17:return mo(t.type)&&ig(),Li(t),null;case 19:if(mn(Tn),h=t.memoizedState,h===null)return Li(t),null;if(a=(t.flags&128)!==0,g=h.rendering,g===null)if(a)gh(h,!1);else{if(ii!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=dg(e),g!==null){for(t.flags|=128,gh(h,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)h=n,e=a,h.flags&=14680066,g=h.alternate,g===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,e=g.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return sn(Tn,Tn.current&1|2),t.child}e=e.sibling}h.tail!==null&&qn()>Ou&&(t.flags|=128,a=!0,gh(h,!1),t.lanes=4194304)}else{if(!a)if(e=dg(g),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!xn)return Li(t),null}else 2*qn()-h.renderingStartTime>Ou&&n!==1073741824&&(t.flags|=128,a=!0,gh(h,!1),t.lanes=4194304);h.isBackwards?(g.sibling=t.child,t.child=g):(n=h.last,n!==null?n.sibling=g:t.child=g,h.last=g)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=qn(),t.sibling=null,n=Tn.current,sn(Tn,a?n&1|2:n&1),t):(Li(t),null);case 22:case 23:return h1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?ko&1073741824&&(Li(t),t.subtreeFlags&6&&(t.flags|=8192)):Li(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function r3(e,t){switch(Gx(t),t.tag){case 1:return mo(t.type)&&ig(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $u(),mn(fo),mn(ji),t1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return e1(t),null;case 13:if(mn(Tn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));Ru()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mn(Tn),null;case 4:return $u(),null;case 10:return Xx(t.type._context),null;case 22:case 23:return h1(),null;case 24:return null;default:return null}}var vm=!1,Oi=!1,n3=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function mu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){Rn(e,t,a)}else n.current=null}function b_(e,t,n){try{n()}catch(a){Rn(e,t,a)}}var JS=!1;function i3(e,t){if(i_=eg,e=DT(),Hx(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var c=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var g=0,l=-1,b=-1,C=0,P=0,A=e,D=null;t:for(;;){for(var W;A!==n||c!==0&&A.nodeType!==3||(l=g+c),A!==h||a!==0&&A.nodeType!==3||(b=g+a),A.nodeType===3&&(g+=A.nodeValue.length),(W=A.firstChild)!==null;)D=A,A=W;for(;;){if(A===e)break t;if(D===n&&++C===c&&(l=g),D===h&&++P===a&&(b=g),(W=A.nextSibling)!==null)break;A=D,D=A.parentNode}A=W}n=l===-1||b===-1?null:{start:l,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(o_={focusedElem:e,selectionRange:n},eg=!1,Ut=t;Ut!==null;)if(t=Ut,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ut=e;else for(;Ut!==null;){t=Ut;try{var Z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var U=Z.memoizedProps,J=Z.memoizedState,O=t.stateNode,$=O.getSnapshotBeforeUpdate(t.elementType===t.type?U:xa(t.type,U),J);O.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(ie){Rn(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,Ut=e;break}Ut=t.return}return Z=JS,JS=!1,Z}function Vh(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&b_(t,n,h)}c=c.next}while(c!==a)}}function vy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function w_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zI(e){var t=e.alternate;t!==null&&(e.alternate=null,zI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ha],delete t[dp],delete t[l_],delete t[N$],delete t[j$])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function AI(e){return e.tag===5||e.tag===3||e.tag===4}function YS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||AI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function S_(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ng));else if(a!==4&&(e=e.child,e!==null))for(S_(e,t,n),e=e.sibling;e!==null;)S_(e,t,n),e=e.sibling}function C_(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(C_(e,t,n),e=e.sibling;e!==null;)C_(e,t,n),e=e.sibling}var bi=null,ba=!1;function Gs(e,t,n){for(n=n.child;n!==null;)MI(e,t,n),n=n.sibling}function MI(e,t,n){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount(uy,n)}catch{}switch(n.tag){case 5:Oi||mu(n,t);case 6:var a=bi,c=ba;bi=null,Gs(e,t,n),bi=a,ba=c,bi!==null&&(ba?(e=bi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):bi.removeChild(n.stateNode));break;case 18:bi!==null&&(ba?(e=bi,n=n.stateNode,e.nodeType===8?c0(e.parentNode,n):e.nodeType===1&&c0(e,n),ap(e)):c0(bi,n.stateNode));break;case 4:a=bi,c=ba,bi=n.stateNode.containerInfo,ba=!0,Gs(e,t,n),bi=a,ba=c;break;case 0:case 11:case 14:case 15:if(!Oi&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var h=c,g=h.destroy;h=h.tag,g!==void 0&&(h&2||h&4)&&b_(n,t,g),c=c.next}while(c!==a)}Gs(e,t,n);break;case 1:if(!Oi&&(mu(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(l){Rn(n,t,l)}Gs(e,t,n);break;case 21:Gs(e,t,n);break;case 22:n.mode&1?(Oi=(a=Oi)||n.memoizedState!==null,Gs(e,t,n),Oi=a):Gs(e,t,n);break;default:Gs(e,t,n)}}function QS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new n3),t.forEach(function(a){var c=p3.bind(null,e,a);n.has(a)||(n.add(a),a.then(c,c))})}}function ya(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];try{var h=e,g=t,l=g;e:for(;l!==null;){switch(l.tag){case 5:bi=l.stateNode,ba=!1;break e;case 3:bi=l.stateNode.containerInfo,ba=!0;break e;case 4:bi=l.stateNode.containerInfo,ba=!0;break e}l=l.return}if(bi===null)throw Error(lt(160));MI(h,g,c),bi=null,ba=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(C){Rn(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)DI(t,e),t=t.sibling}function DI(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ya(t,e),Na(e),a&4){try{Vh(3,e,e.return),vy(3,e)}catch(U){Rn(e,e.return,U)}try{Vh(5,e,e.return)}catch(U){Rn(e,e.return,U)}}break;case 1:ya(t,e),Na(e),a&512&&n!==null&&mu(n,n.return);break;case 5:if(ya(t,e),Na(e),a&512&&n!==null&&mu(n,n.return),e.flags&32){var c=e.stateNode;try{rp(c,"")}catch(U){Rn(e,e.return,U)}}if(a&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,g=n!==null?n.memoizedProps:h,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&h.type==="radio"&&h.name!=null&&eT(c,h),Z0(l,g);var C=Z0(l,h);for(g=0;g<b.length;g+=2){var P=b[g],A=b[g+1];P==="style"?oT(c,A):P==="dangerouslySetInnerHTML"?nT(c,A):P==="children"?rp(c,A):Ax(c,P,A,C)}switch(l){case"input":U0(c,h);break;case"textarea":tT(c,h);break;case"select":var D=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var W=h.value;W!=null?Su(c,!!h.multiple,W,!1):D!==!!h.multiple&&(h.defaultValue!=null?Su(c,!!h.multiple,h.defaultValue,!0):Su(c,!!h.multiple,h.multiple?[]:"",!1))}c[dp]=h}catch(U){Rn(e,e.return,U)}}break;case 6:if(ya(t,e),Na(e),a&4){if(e.stateNode===null)throw Error(lt(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(U){Rn(e,e.return,U)}}break;case 3:if(ya(t,e),Na(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{ap(t.containerInfo)}catch(U){Rn(e,e.return,U)}break;case 4:ya(t,e),Na(e);break;case 13:ya(t,e),Na(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(u1=qn())),a&4&&QS(e);break;case 22:if(P=n!==null&&n.memoizedState!==null,e.mode&1?(Oi=(C=Oi)||P,ya(t,e),Oi=C):ya(t,e),Na(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!P&&e.mode&1)for(Ut=e,P=e.child;P!==null;){for(A=Ut=P;Ut!==null;){switch(D=Ut,W=D.child,D.tag){case 0:case 11:case 14:case 15:Vh(4,D,D.return);break;case 1:mu(D,D.return);var Z=D.stateNode;if(typeof Z.componentWillUnmount=="function"){a=D,n=D.return;try{t=a,Z.props=t.memoizedProps,Z.state=t.memoizedState,Z.componentWillUnmount()}catch(U){Rn(a,n,U)}}break;case 5:mu(D,D.return);break;case 22:if(D.memoizedState!==null){t2(A);continue}}W!==null?(W.return=D,Ut=W):t2(A)}P=P.sibling}e:for(P=null,A=e;;){if(A.tag===5){if(P===null){P=A;try{c=A.stateNode,C?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(l=A.stateNode,b=A.memoizedProps.style,g=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=iT("display",g))}catch(U){Rn(e,e.return,U)}}}else if(A.tag===6){if(P===null)try{A.stateNode.nodeValue=C?"":A.memoizedProps}catch(U){Rn(e,e.return,U)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;P===A&&(P=null),A=A.return}P===A&&(P=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ya(t,e),Na(e),a&4&&QS(e);break;case 21:break;default:ya(t,e),Na(e)}}function Na(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(AI(n)){var a=n;break e}n=n.return}throw Error(lt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(rp(c,""),a.flags&=-33);var h=YS(e);C_(e,h,c);break;case 3:case 4:var g=a.stateNode.containerInfo,l=YS(e);S_(e,l,g);break;default:throw Error(lt(161))}}catch(b){Rn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function o3(e,t,n){Ut=e,RI(e)}function RI(e,t,n){for(var a=(e.mode&1)!==0;Ut!==null;){var c=Ut,h=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||vm;if(!g){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Oi;l=vm;var C=Oi;if(vm=g,(Oi=b)&&!C)for(Ut=c;Ut!==null;)g=Ut,b=g.child,g.tag===22&&g.memoizedState!==null?r2(c):b!==null?(b.return=g,Ut=b):r2(c);for(;h!==null;)Ut=h,RI(h),h=h.sibling;Ut=c,vm=l,Oi=C}e2(e)}else c.subtreeFlags&8772&&h!==null?(h.return=c,Ut=h):e2(e)}}function e2(e){for(;Ut!==null;){var t=Ut;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Oi||vy(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Oi)if(n===null)a.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:xa(t.type,n.memoizedProps);a.componentDidUpdate(c,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&BS(t,h,a);break;case 3:var g=t.updateQueue;if(g!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}BS(t,g,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var P=C.memoizedState;if(P!==null){var A=P.dehydrated;A!==null&&ap(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}Oi||t.flags&512&&w_(t)}catch(D){Rn(t,t.return,D)}}if(t===e){Ut=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ut=n;break}Ut=t.return}}function t2(e){for(;Ut!==null;){var t=Ut;if(t===e){Ut=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ut=n;break}Ut=t.return}}function r2(e){for(;Ut!==null;){var t=Ut;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vy(4,t)}catch(b){Rn(t,n,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Rn(t,c,b)}}var h=t.return;try{w_(t)}catch(b){Rn(t,h,b)}break;case 5:var g=t.return;try{w_(t)}catch(b){Rn(t,g,b)}}}catch(b){Rn(t,t.return,b)}if(t===e){Ut=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ut=l;break}Ut=t.return}}var a3=Math.ceil,fg=Ts.ReactCurrentDispatcher,l1=Ts.ReactCurrentOwner,Yo=Ts.ReactCurrentBatchConfig,Rr=0,hi=null,Yn=null,Si=0,ko=0,gu=ml(0),ii=0,yp=null,oc=0,_y=0,c1=0,Uh=null,ho=null,u1=0,Ou=1/0,fs=null,mg=!1,k_=null,sl=null,_m=!1,tl=null,gg=0,Hh=0,T_=null,Om=-1,Fm=0;function to(){return Rr&6?qn():Om!==-1?Om:Om=qn()}function ll(e){return e.mode&1?Rr&2&&Si!==0?Si&-Si:U$.transition!==null?(Fm===0&&(Fm=yT()),Fm):(e=Gr,e!==0||(e=window.event,e=e===void 0?16:CT(e.type)),e):1}function Ta(e,t,n,a){if(50<Hh)throw Hh=0,T_=null,Error(lt(185));Dp(e,n,a),(!(Rr&2)||e!==hi)&&(e===hi&&(!(Rr&2)&&(_y|=n),ii===4&&Js(e,Si)),go(e,a),n===1&&Rr===0&&!(t.mode&1)&&(Ou=qn()+500,my&&gl()))}function go(e,t){var n=e.callbackNode;U5(e,t);var a=Qm(e,e===hi?Si:0);if(a===0)n!==null&&dS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&dS(n),t===1)e.tag===0?V$(n2.bind(null,e)):UT(n2.bind(null,e)),O$(function(){!(Rr&6)&&gl()}),n=null;else{switch(vT(a)){case 1:n=$x;break;case 4:n=mT;break;case 16:n=Ym;break;case 536870912:n=gT;break;default:n=Ym}n=VI(n,LI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function LI(e,t){if(Om=-1,Fm=0,Rr&6)throw Error(lt(327));var n=e.callbackNode;if(Pu()&&e.callbackNode!==n)return null;var a=Qm(e,e===hi?Si:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=yg(e,a);else{t=a;var c=Rr;Rr|=2;var h=BI();(hi!==e||Si!==t)&&(fs=null,Ou=qn()+500,Kl(e,t));do try{c3();break}catch(l){$I(e,l)}while(!0);Kx(),fg.current=h,Rr=c,Yn!==null?t=0:(hi=null,Si=0,t=ii)}if(t!==0){if(t===2&&(c=Q0(e),c!==0&&(a=c,t=I_(e,c))),t===1)throw n=yp,Kl(e,0),Js(e,a),go(e,qn()),n;if(t===6)Js(e,a);else{if(c=e.current.alternate,!(a&30)&&!s3(c)&&(t=yg(e,a),t===2&&(h=Q0(e),h!==0&&(a=h,t=I_(e,h))),t===1))throw n=yp,Kl(e,0),Js(e,a),go(e,qn()),n;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(lt(345));case 2:jl(e,ho,fs);break;case 3:if(Js(e,a),(a&130023424)===a&&(t=u1+500-qn(),10<t)){if(Qm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){to(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=s_(jl.bind(null,e,ho,fs),t);break}jl(e,ho,fs);break;case 4:if(Js(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-ka(a);h=1<<g,g=t[g],g>c&&(c=g),a&=~h}if(a=c,a=qn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*a3(a/1960))-a,10<a){e.timeoutHandle=s_(jl.bind(null,e,ho,fs),a);break}jl(e,ho,fs);break;case 5:jl(e,ho,fs);break;default:throw Error(lt(329))}}}return go(e,qn()),e.callbackNode===n?LI.bind(null,e):null}function I_(e,t){var n=Uh;return e.current.memoizedState.isDehydrated&&(Kl(e,t).flags|=256),e=yg(e,t),e!==2&&(t=ho,ho=n,t!==null&&P_(t)),e}function P_(e){ho===null?ho=e:ho.push.apply(ho,e)}function s3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var c=n[a],h=c.getSnapshot;c=c.value;try{if(!Ea(h(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Js(e,t){for(t&=~c1,t&=~_y,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ka(t),a=1<<n;e[n]=-1,t&=~a}}function n2(e){if(Rr&6)throw Error(lt(327));Pu();var t=Qm(e,0);if(!(t&1))return go(e,qn()),null;var n=yg(e,t);if(e.tag!==0&&n===2){var a=Q0(e);a!==0&&(t=a,n=I_(e,a))}if(n===1)throw n=yp,Kl(e,0),Js(e,t),go(e,qn()),n;if(n===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jl(e,ho,fs),go(e,qn()),null}function d1(e,t){var n=Rr;Rr|=1;try{return e(t)}finally{Rr=n,Rr===0&&(Ou=qn()+500,my&&gl())}}function ac(e){tl!==null&&tl.tag===0&&!(Rr&6)&&Pu();var t=Rr;Rr|=1;var n=Yo.transition,a=Gr;try{if(Yo.transition=null,Gr=1,e)return e()}finally{Gr=a,Yo.transition=n,Rr=t,!(Rr&6)&&gl()}}function h1(){ko=gu.current,mn(gu)}function Kl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,B$(n)),Yn!==null)for(n=Yn.return;n!==null;){var a=n;switch(Gx(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ig();break;case 3:$u(),mn(fo),mn(ji),t1();break;case 5:e1(a);break;case 4:$u();break;case 13:mn(Tn);break;case 19:mn(Tn);break;case 10:Xx(a.type._context);break;case 22:case 23:h1()}n=n.return}if(hi=e,Yn=e=cl(e.current,null),Si=ko=t,ii=0,yp=null,c1=_y=oc=0,ho=Uh=null,Wl!==null){for(t=0;t<Wl.length;t++)if(n=Wl[t],a=n.interleaved,a!==null){n.interleaved=null;var c=a.next,h=n.pending;if(h!==null){var g=h.next;h.next=c,a.next=g}n.pending=a}Wl=null}return e}function $I(e,t){do{var n=Yn;try{if(Kx(),Lm.current=pg,hg){for(var a=In.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}hg=!1}if(ic=0,di=ni=In=null,jh=!1,fp=0,l1.current=null,n===null||n.return===null){ii=1,yp=t,Yn=null;break}e:{var h=e,g=n.return,l=n,b=t;if(t=Si,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var C=b,P=l,A=P.tag;if(!(P.mode&1)&&(A===0||A===11||A===15)){var D=P.alternate;D?(P.updateQueue=D.updateQueue,P.memoizedState=D.memoizedState,P.lanes=D.lanes):(P.updateQueue=null,P.memoizedState=null)}var W=HS(g);if(W!==null){W.flags&=-257,WS(W,g,l,h,t),W.mode&1&&US(h,C,t),t=W,b=C;var Z=t.updateQueue;if(Z===null){var U=new Set;U.add(b),t.updateQueue=U}else Z.add(b);break e}else{if(!(t&1)){US(h,C,t),p1();break e}b=Error(lt(426))}}else if(xn&&l.mode&1){var J=HS(g);if(J!==null){!(J.flags&65536)&&(J.flags|=256),WS(J,g,l,h,t),qx(Bu(b,l));break e}}h=b=Bu(b,l),ii!==4&&(ii=2),Uh===null?Uh=[h]:Uh.push(h),h=g;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var O=_I(h,b,t);$S(h,O);break e;case 1:l=b;var $=h.type,N=h.stateNode;if(!(h.flags&128)&&(typeof $.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(sl===null||!sl.has(N)))){h.flags|=65536,t&=-t,h.lanes|=t;var ie=xI(h,l,t);$S(h,ie);break e}}h=h.return}while(h!==null)}FI(n)}catch(te){t=te,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(!0)}function BI(){var e=fg.current;return fg.current=pg,e===null?pg:e}function p1(){(ii===0||ii===3||ii===2)&&(ii=4),hi===null||!(oc&268435455)&&!(_y&268435455)||Js(hi,Si)}function yg(e,t){var n=Rr;Rr|=2;var a=BI();(hi!==e||Si!==t)&&(fs=null,Kl(e,t));do try{l3();break}catch(c){$I(e,c)}while(!0);if(Kx(),Rr=n,fg.current=a,Yn!==null)throw Error(lt(261));return hi=null,Si=0,ii}function l3(){for(;Yn!==null;)OI(Yn)}function c3(){for(;Yn!==null&&!R5();)OI(Yn)}function OI(e){var t=jI(e.alternate,e,ko);e.memoizedProps=e.pendingProps,t===null?FI(e):Yn=t,l1.current=null}function FI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=r3(n,t),n!==null){n.flags&=32767,Yn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ii=6,Yn=null;return}}else if(n=t3(n,t,ko),n!==null){Yn=n;return}if(t=t.sibling,t!==null){Yn=t;return}Yn=t=e}while(t!==null);ii===0&&(ii=5)}function jl(e,t,n){var a=Gr,c=Yo.transition;try{Yo.transition=null,Gr=1,u3(e,t,n,a)}finally{Yo.transition=c,Gr=a}return null}function u3(e,t,n,a){do Pu();while(tl!==null);if(Rr&6)throw Error(lt(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(H5(e,h),e===hi&&(Yn=hi=null,Si=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_m||(_m=!0,VI(Ym,function(){return Pu(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=Yo.transition,Yo.transition=null;var g=Gr;Gr=1;var l=Rr;Rr|=4,l1.current=null,i3(e,n),DI(n,e),z$(o_),eg=!!i_,o_=i_=null,e.current=n,o3(n),L5(),Rr=l,Gr=g,Yo.transition=h}else e.current=n;if(_m&&(_m=!1,tl=e,gg=c),h=e.pendingLanes,h===0&&(sl=null),O5(n.stateNode),go(e,qn()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],a(c.value,{componentStack:c.stack,digest:c.digest});if(mg)throw mg=!1,e=k_,k_=null,e;return gg&1&&e.tag!==0&&Pu(),h=e.pendingLanes,h&1?e===T_?Hh++:(Hh=0,T_=e):Hh=0,gl(),null}function Pu(){if(tl!==null){var e=vT(gg),t=Yo.transition,n=Gr;try{if(Yo.transition=null,Gr=16>e?16:e,tl===null)var a=!1;else{if(e=tl,tl=null,gg=0,Rr&6)throw Error(lt(331));var c=Rr;for(Rr|=4,Ut=e.current;Ut!==null;){var h=Ut,g=h.child;if(Ut.flags&16){var l=h.deletions;if(l!==null){for(var b=0;b<l.length;b++){var C=l[b];for(Ut=C;Ut!==null;){var P=Ut;switch(P.tag){case 0:case 11:case 15:Vh(8,P,h)}var A=P.child;if(A!==null)A.return=P,Ut=A;else for(;Ut!==null;){P=Ut;var D=P.sibling,W=P.return;if(zI(P),P===C){Ut=null;break}if(D!==null){D.return=W,Ut=D;break}Ut=W}}}var Z=h.alternate;if(Z!==null){var U=Z.child;if(U!==null){Z.child=null;do{var J=U.sibling;U.sibling=null,U=J}while(U!==null)}}Ut=h}}if(h.subtreeFlags&2064&&g!==null)g.return=h,Ut=g;else e:for(;Ut!==null;){if(h=Ut,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Vh(9,h,h.return)}var O=h.sibling;if(O!==null){O.return=h.return,Ut=O;break e}Ut=h.return}}var $=e.current;for(Ut=$;Ut!==null;){g=Ut;var N=g.child;if(g.subtreeFlags&2064&&N!==null)N.return=g,Ut=N;else e:for(g=$;Ut!==null;){if(l=Ut,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vy(9,l)}}catch(te){Rn(l,l.return,te)}if(l===g){Ut=null;break e}var ie=l.sibling;if(ie!==null){ie.return=l.return,Ut=ie;break e}Ut=l.return}}if(Rr=c,gl(),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot(uy,e)}catch{}a=!0}return a}finally{Gr=n,Yo.transition=t}}return!1}function i2(e,t,n){t=Bu(n,t),t=_I(e,t,1),e=al(e,t,1),t=to(),e!==null&&(Dp(e,1,t),go(e,t))}function Rn(e,t,n){if(e.tag===3)i2(e,e,n);else for(;t!==null;){if(t.tag===3){i2(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(sl===null||!sl.has(a))){e=Bu(n,e),e=xI(t,e,1),t=al(t,e,1),e=to(),t!==null&&(Dp(t,1,e),go(t,e));break}}t=t.return}}function d3(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=to(),e.pingedLanes|=e.suspendedLanes&n,hi===e&&(Si&n)===n&&(ii===4||ii===3&&(Si&130023424)===Si&&500>qn()-u1?Kl(e,0):c1|=n),go(e,t)}function NI(e,t){t===0&&(e.mode&1?(t=cm,cm<<=1,!(cm&130023424)&&(cm=4194304)):t=1);var n=to();e=ws(e,t),e!==null&&(Dp(e,t,n),go(e,n))}function h3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),NI(e,n)}function p3(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(lt(314))}a!==null&&a.delete(t),NI(e,n)}var jI;jI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||fo.current)po=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return po=!1,e3(e,t,n);po=!!(e.flags&131072)}else po=!1,xn&&t.flags&1048576&&HT(t,sg,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Bm(e,t),e=t.pendingProps;var c=Du(t,ji.current);Iu(t,n),c=n1(null,t,a,e,c,n);var h=i1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mo(a)?(h=!0,og(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Yx(t),c.updater=gy,t.stateNode=c,c._reactInternals=t,f_(t,a,e,n),t=y_(null,t,a,!0,h,n)):(t.tag=0,xn&&h&&Wx(t),eo(null,t,c,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Bm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=m3(a),e=xa(a,e),c){case 0:t=g_(null,t,a,e,n);break e;case 1:t=ZS(null,t,a,e,n);break e;case 11:t=GS(null,t,a,e,n);break e;case 14:t=qS(null,t,a,xa(a.type,e),n);break e}throw Error(lt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:xa(a,c),g_(e,t,a,c,n);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:xa(a,c),ZS(e,t,a,c,n);case 3:e:{if(CI(t),e===null)throw Error(lt(387));a=t.pendingProps,h=t.memoizedState,c=h.element,ZT(e,t),ug(t,a,null,n);var g=t.memoizedState;if(a=g.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=Bu(Error(lt(423)),t),t=KS(e,t,a,n,c);break e}else if(a!==c){c=Bu(Error(lt(424)),t),t=KS(e,t,a,n,c);break e}else for(zo=ol(t.stateNode.containerInfo.firstChild),Mo=t,xn=!0,Sa=null,n=YT(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ru(),a===c){t=Ss(e,t,n);break e}eo(e,t,a,n)}t=t.child}return t;case 5:return QT(t),e===null&&d_(t),a=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,g=c.children,a_(a,c)?g=null:h!==null&&a_(a,h)&&(t.flags|=32),SI(e,t),eo(e,t,g,n),t.child;case 6:return e===null&&d_(t),null;case 13:return kI(e,t,n);case 4:return Qx(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Lu(t,null,a,n):eo(e,t,a,n),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:xa(a,c),GS(e,t,a,c,n);case 7:return eo(e,t,t.pendingProps,n),t.child;case 8:return eo(e,t,t.pendingProps.children,n),t.child;case 12:return eo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,h=t.memoizedProps,g=c.value,sn(lg,a._currentValue),a._currentValue=g,h!==null)if(Ea(h.value,g)){if(h.children===c.children&&!fo.current){t=Ss(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var l=h.dependencies;if(l!==null){g=h.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(h.tag===1){b=_s(-1,n&-n),b.tag=2;var C=h.updateQueue;if(C!==null){C=C.shared;var P=C.pending;P===null?b.next=b:(b.next=P.next,P.next=b),C.pending=b}}h.lanes|=n,b=h.alternate,b!==null&&(b.lanes|=n),h_(h.return,n,t),l.lanes|=n;break}b=b.next}}else if(h.tag===10)g=h.type===t.type?null:h.child;else if(h.tag===18){if(g=h.return,g===null)throw Error(lt(341));g.lanes|=n,l=g.alternate,l!==null&&(l.lanes|=n),h_(g,n,t),g=h.sibling}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===t){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}eo(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Iu(t,n),c=ea(c),a=a(c),t.flags|=1,eo(e,t,a,n),t.child;case 14:return a=t.type,c=xa(a,t.pendingProps),c=xa(a.type,c),qS(e,t,a,c,n);case 15:return bI(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:xa(a,c),Bm(e,t),t.tag=1,mo(a)?(e=!0,og(t)):e=!1,Iu(t,n),XT(t,a,c),f_(t,a,c,n),y_(null,t,a,!0,e,n);case 19:return TI(e,t,n);case 22:return wI(e,t,n)}throw Error(lt(156,t.tag))};function VI(e,t){return fT(e,t)}function f3(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jo(e,t,n,a){return new f3(e,t,n,a)}function f1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function m3(e){if(typeof e=="function")return f1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dx)return 11;if(e===Rx)return 14}return 2}function cl(e,t){var n=e.alternate;return n===null?(n=Jo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nm(e,t,n,a,c,h){var g=2;if(a=e,typeof e=="function")f1(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case au:return Xl(n.children,c,h,t);case Mx:g=8,c|=8;break;case O0:return e=Jo(12,n,t,c|2),e.elementType=O0,e.lanes=h,e;case F0:return e=Jo(13,n,t,c),e.elementType=F0,e.lanes=h,e;case N0:return e=Jo(19,n,t,c),e.elementType=N0,e.lanes=h,e;case Jk:return xy(n,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kk:g=10;break e;case Xk:g=9;break e;case Dx:g=11;break e;case Rx:g=14;break e;case Zs:g=16,a=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=Jo(g,n,t,c),t.elementType=e,t.type=a,t.lanes=h,t}function Xl(e,t,n,a){return e=Jo(7,e,a,t),e.lanes=n,e}function xy(e,t,n,a){return e=Jo(22,e,a,t),e.elementType=Jk,e.lanes=n,e.stateNode={isHidden:!1},e}function y0(e,t,n){return e=Jo(6,e,null,t),e.lanes=n,e}function v0(e,t,n){return t=Jo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function g3(e,t,n,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yv(0),this.expirationTimes=Yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yv(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function m1(e,t,n,a,c,h,g,l,b){return e=new g3(e,t,n,l,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Jo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yx(h),e}function y3(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ou,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function UI(e){if(!e)return pl;e=e._reactInternals;e:{if(uc(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var n=e.type;if(mo(n))return VT(e,n,t)}return t}function HI(e,t,n,a,c,h,g,l,b){return e=m1(n,a,!0,e,c,h,g,l,b),e.context=UI(null),n=e.current,a=to(),c=ll(n),h=_s(a,c),h.callback=t??null,al(n,h,c),e.current.lanes=c,Dp(e,c,a),go(e,a),e}function by(e,t,n,a){var c=t.current,h=to(),g=ll(c);return n=UI(n),t.context===null?t.context=n:t.pendingContext=n,t=_s(h,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=al(c,t,g),e!==null&&(Ta(e,c,g,h),Rm(e,c,g)),g}function vg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function o2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function g1(e,t){o2(e,t),(e=e.alternate)&&o2(e,t)}function v3(){return null}var WI=typeof reportError=="function"?reportError:function(e){console.error(e)};function y1(e){this._internalRoot=e}wy.prototype.render=y1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));by(e,t,null,null)};wy.prototype.unmount=y1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ac(function(){by(null,e,null,null)}),t[bs]=null}};function wy(e){this._internalRoot=e}wy.prototype.unstable_scheduleHydration=function(e){if(e){var t=bT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xs.length&&t!==0&&t<Xs[n].priority;n++);Xs.splice(n,0,e),n===0&&ST(e)}};function v1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function a2(){}function _3(e,t,n,a,c){if(c){if(typeof a=="function"){var h=a;a=function(){var C=vg(g);h.call(C)}}var g=HI(t,a,e,0,null,!1,!1,"",a2);return e._reactRootContainer=g,e[bs]=g.current,cp(e.nodeType===8?e.parentNode:e),ac(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var C=vg(b);l.call(C)}}var b=m1(e,0,!1,null,null,!1,!1,"",a2);return e._reactRootContainer=b,e[bs]=b.current,cp(e.nodeType===8?e.parentNode:e),ac(function(){by(t,b,n,a)}),b}function Cy(e,t,n,a,c){var h=n._reactRootContainer;if(h){var g=h;if(typeof c=="function"){var l=c;c=function(){var b=vg(g);l.call(b)}}by(t,g,e,c)}else g=_3(n,t,e,c,a);return vg(g)}_T=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=zh(t.pendingLanes);n!==0&&(Bx(t,n|1),go(t,qn()),!(Rr&6)&&(Ou=qn()+500,gl()))}break;case 13:ac(function(){var a=ws(e,1);if(a!==null){var c=to();Ta(a,e,1,c)}}),g1(e,1)}};Ox=function(e){if(e.tag===13){var t=ws(e,134217728);if(t!==null){var n=to();Ta(t,e,134217728,n)}g1(e,134217728)}};xT=function(e){if(e.tag===13){var t=ll(e),n=ws(e,t);if(n!==null){var a=to();Ta(n,e,t,a)}g1(e,t)}};bT=function(){return Gr};wT=function(e,t){var n=Gr;try{return Gr=e,t()}finally{Gr=n}};X0=function(e,t,n){switch(t){case"input":if(U0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=fy(a);if(!c)throw Error(lt(90));Qk(a),U0(a,c)}}}break;case"textarea":tT(e,n);break;case"select":t=n.value,t!=null&&Su(e,!!n.multiple,t,!1)}};lT=d1;cT=ac;var x3={usingClientEntryPoint:!1,Events:[Lp,uu,fy,aT,sT,d1]},yh={findFiberByHostInstance:Hl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},b3={bundleType:yh.bundleType,version:yh.version,rendererPackageName:yh.rendererPackageName,rendererConfig:yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hT(e),e===null?null:e.stateNode},findFiberByHostInstance:yh.findFiberByHostInstance||v3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{uy=xm.inject(b3),qa=xm}catch{}}$o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x3;$o.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v1(t))throw Error(lt(200));return y3(e,t,null,n)};$o.createRoot=function(e,t){if(!v1(e))throw Error(lt(299));var n=!1,a="",c=WI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=m1(e,1,!1,null,null,n,!1,a,c),e[bs]=t.current,cp(e.nodeType===8?e.parentNode:e),new y1(t)};$o.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=hT(t),e=e===null?null:e.stateNode,e};$o.flushSync=function(e){return ac(e)};$o.hydrate=function(e,t,n){if(!Sy(t))throw Error(lt(200));return Cy(null,e,t,!0,n)};$o.hydrateRoot=function(e,t,n){if(!v1(e))throw Error(lt(405));var a=n!=null&&n.hydratedSources||null,c=!1,h="",g=WI;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),t=HI(t,null,e,1,n??null,c,!1,h,g),e[bs]=t.current,cp(e),a)for(e=0;e<a.length;e++)n=a[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new wy(t)};$o.render=function(e,t,n){if(!Sy(t))throw Error(lt(200));return Cy(null,e,t,!1,n)};$o.unmountComponentAtNode=function(e){if(!Sy(e))throw Error(lt(40));return e._reactRootContainer?(ac(function(){Cy(null,null,e,!1,function(){e._reactRootContainer=null,e[bs]=null})}),!0):!1};$o.unstable_batchedUpdates=d1;$o.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Sy(n))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return Cy(e,t,n,!1,a)};$o.version="18.2.0-next-9e3b772b8-20220608";function GI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GI)}catch(e){console.error(e)}}GI(),Hk.exports=$o;var Yu=Hk.exports;const w3=K_(Yu),S3=Z_({__proto__:null,default:w3},[Yu]);function C3(e){return typeof e=="function"?e():e}const qI=V.forwardRef(function(t,n){const{children:a,container:c,disablePortal:h=!1}=t,[g,l]=V.useState(null),b=bn(V.isValidElement(a)?a.ref:null,n);if(tc(()=>{h||l(C3(c)||document.body)},[c,h]),tc(()=>{if(g&&!h)return Zm(n,g),()=>{Zm(n,null)}},[n,g,h]),h){if(V.isValidElement(a)){const C={ref:b};return V.cloneElement(a,C)}return de.jsx(V.Fragment,{children:a})}return de.jsx(V.Fragment,{children:g&&Yu.createPortal(a,g)})});function k3(e){const t=Ga(e);return t.body===e?_x(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Wh(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function s2(e){return parseInt(_x(e).getComputedStyle(e).paddingRight,10)||0}function T3(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function l2(e,t,n,a,c){const h=[t,n,...a];[].forEach.call(e.children,g=>{const l=h.indexOf(g)===-1,b=!T3(g);l&&b&&Wh(g,c)})}function _0(e,t){let n=-1;return e.some((a,c)=>t(a)?(n=c,!0):!1),n}function I3(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(k3(a)){const g=WR(Ga(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${s2(a)+g}px`;const l=Ga(a).querySelectorAll(".mui-fixed");[].forEach.call(l,b=>{n.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${s2(b)+g}px`})}let h;if(a.parentNode instanceof DocumentFragment)h=Ga(a).body;else{const g=a.parentElement,l=_x(a);h=(g==null?void 0:g.nodeName)==="HTML"&&l.getComputedStyle(g).overflowY==="scroll"?g:a}n.push({value:h.style.overflow,property:"overflow",el:h},{value:h.style.overflowX,property:"overflow-x",el:h},{value:h.style.overflowY,property:"overflow-y",el:h}),h.style.overflow="hidden"}return()=>{n.forEach(({value:h,el:g,property:l})=>{h?g.style.setProperty(l,h):g.style.removeProperty(l)})}}function P3(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class E3{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&Wh(t.modalRef,!1);const c=P3(n);l2(n,t.mount,t.modalRef,c,!0);const h=_0(this.containers,g=>g.container===n);return h!==-1?(this.containers[h].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),a)}mount(t,n){const a=_0(this.containers,h=>h.modals.indexOf(t)!==-1),c=this.containers[a];c.restore||(c.restore=I3(c,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const c=_0(this.containers,g=>g.modals.indexOf(t)!==-1),h=this.containers[c];if(h.modals.splice(h.modals.indexOf(t),1),this.modals.splice(a,1),h.modals.length===0)h.restore&&h.restore(),t.modalRef&&Wh(t.modalRef,n),l2(h.container,t.mount,t.modalRef,h.hiddenSiblings,!1),this.containers.splice(c,1);else{const g=h.modals[h.modals.length-1];g.modalRef&&Wh(g.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function z3(e){return typeof e=="function"?e():e}function A3(e){return e?e.props.hasOwnProperty("in"):!1}const M3=new E3;function D3(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,manager:c=M3,closeAfterTransition:h=!1,onTransitionEnter:g,onTransitionExited:l,children:b,onClose:C,open:P,rootRef:A}=e,D=V.useRef({}),W=V.useRef(null),Z=V.useRef(null),U=bn(Z,A),[J,O]=V.useState(!P),$=A3(b);let N=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(N=!1);const ie=()=>Ga(W.current),te=()=>(D.current.modalRef=Z.current,D.current.mount=W.current,D.current),ee=()=>{c.mount(te(),{disableScrollLock:a}),Z.current&&(Z.current.scrollTop=0)},re=Qs(()=>{const Re=z3(t)||ie().body;c.add(te(),Re),Z.current&&ee()}),fe=V.useCallback(()=>c.isTopModal(te()),[c]),Te=Qs(Re=>{W.current=Re,Re&&(P&&fe()?ee():Z.current&&Wh(Z.current,N))}),be=V.useCallback(()=>{c.remove(te(),N)},[N,c]);V.useEffect(()=>()=>{be()},[be]),V.useEffect(()=>{P?re():(!$||!h)&&be()},[P,be,$,h,re]);const ze=Re=>Ue=>{var Ne;(Ne=Re.onKeyDown)==null||Ne.call(Re,Ue),!(Ue.key!=="Escape"||Ue.which===229||!fe())&&(n||(Ue.stopPropagation(),C&&C(Ue,"escapeKeyDown")))},Ee=Re=>Ue=>{var Ne;(Ne=Re.onClick)==null||Ne.call(Re,Ue),Ue.target===Ue.currentTarget&&C&&C(Ue,"backdropClick")};return{getRootProps:(Re={})=>{const Ue=Ca(e);delete Ue.onTransitionEnter,delete Ue.onTransitionExited;const Ne=Q({},Ue,Re);return Q({role:"presentation"},Ne,{onKeyDown:ze(Ne),ref:U})},getBackdropProps:(Re={})=>{const Ue=Re;return Q({"aria-hidden":!0},Ue,{onClick:Ee(Ue),open:P})},getTransitionProps:()=>{const Re=()=>{O(!1),g&&g()},Ue=()=>{O(!0),l&&l(),h&&be()};return{onEnter:Vw(Re,b==null?void 0:b.props.onEnter),onExited:Vw(Ue,b==null?void 0:b.props.onExited)}},rootRef:U,portalRef:Te,isTopModal:fe,exited:J,hasTransition:$}}function R3(e){const{value:t,label:n,disabled:a,rootRef:c,id:h}=e,{getRootProps:g,highlighted:l,selected:b}=Uk({item:t}),{getRootProps:C,rootRef:P}=lc({disabled:a,focusableWhenDisabled:!0}),A=Pa(h),D=V.useRef(null),W=V.useMemo(()=>({disabled:a,label:n,value:t,ref:D,id:A}),[a,n,t,A]),{index:Z}=Px(t,W),U=bn(c,D,P),J=$=>N=>{var ie;(ie=$.onKeyDown)==null||ie.call($,N),!N.defaultMuiPrevented&&[" ","Enter"].includes(N.key)&&(N.defaultMuiPrevented=!0)},O=($={})=>({onKeyDown:J($)});return{getRootProps:($={})=>{const N=Ca($),ie=ep(g,ep(C,O));return Q({},$,N,ie(N),{id:A,ref:U,role:"option","aria-selected":b})},highlighted:l,index:Z,selected:b,rootRef:U}}function L3(e){const t=V.useContext(Mp);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:n,dispatch:a}=t,{highlighted:c,selected:h,focusable:g}=n(e),l=V.useCallback(C=>{if(C!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:c,selected:h,focusable:g}},[c,h,g,e]);return{contextValue:V.useMemo(()=>({dispatch:a,getItemState:l}),[a,l])}}var yo="top",ra="bottom",na="right",vo="left",_1="auto",Bp=[yo,ra,na,vo],Fu="start",vp="end",$3="clippingParents",ZI="viewport",vh="popper",B3="reference",c2=Bp.reduce(function(e,t){return e.concat([t+"-"+Fu,t+"-"+vp])},[]),KI=[].concat(Bp,[_1]).reduce(function(e,t){return e.concat([t,t+"-"+Fu,t+"-"+vp])},[]),O3="beforeRead",F3="read",N3="afterRead",j3="beforeMain",V3="main",U3="afterMain",H3="beforeWrite",W3="write",G3="afterWrite",q3=[O3,F3,N3,j3,V3,U3,H3,W3,G3];function Xa(e){return e?(e.nodeName||"").toLowerCase():null}function Ro(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function sc(e){var t=Ro(e).Element;return e instanceof t||e instanceof Element}function Qo(e){var t=Ro(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function x1(e){if(typeof ShadowRoot>"u")return!1;var t=Ro(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Z3(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var a=t.styles[n]||{},c=t.attributes[n]||{},h=t.elements[n];!Qo(h)||!Xa(h)||(Object.assign(h.style,a),Object.keys(c).forEach(function(g){var l=c[g];l===!1?h.removeAttribute(g):h.setAttribute(g,l===!0?"":l)}))})}function K3(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(a){var c=t.elements[a],h=t.attributes[a]||{},g=Object.keys(t.styles.hasOwnProperty(a)?t.styles[a]:n[a]),l=g.reduce(function(b,C){return b[C]="",b},{});!Qo(c)||!Xa(c)||(Object.assign(c.style,l),Object.keys(h).forEach(function(b){c.removeAttribute(b)}))})}}const X3={name:"applyStyles",enabled:!0,phase:"write",fn:Z3,effect:K3,requires:["computeStyles"]};function Ka(e){return e.split("-")[0]}var Jl=Math.max,_g=Math.min,Nu=Math.round;function E_(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function XI(){return!/^((?!chrome|android).)*safari/i.test(E_())}function ju(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=e.getBoundingClientRect(),c=1,h=1;t&&Qo(e)&&(c=e.offsetWidth>0&&Nu(a.width)/e.offsetWidth||1,h=e.offsetHeight>0&&Nu(a.height)/e.offsetHeight||1);var g=sc(e)?Ro(e):window,l=g.visualViewport,b=!XI()&&n,C=(a.left+(b&&l?l.offsetLeft:0))/c,P=(a.top+(b&&l?l.offsetTop:0))/h,A=a.width/c,D=a.height/h;return{width:A,height:D,top:P,right:C+A,bottom:P+D,left:C,x:C,y:P}}function b1(e){var t=ju(e),n=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:a}}function JI(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&x1(n)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Cs(e){return Ro(e).getComputedStyle(e)}function J3(e){return["table","td","th"].indexOf(Xa(e))>=0}function yl(e){return((sc(e)?e.ownerDocument:e.document)||window.document).documentElement}function ky(e){return Xa(e)==="html"?e:e.assignedSlot||e.parentNode||(x1(e)?e.host:null)||yl(e)}function u2(e){return!Qo(e)||Cs(e).position==="fixed"?null:e.offsetParent}function Y3(e){var t=/firefox/i.test(E_()),n=/Trident/i.test(E_());if(n&&Qo(e)){var a=Cs(e);if(a.position==="fixed")return null}var c=ky(e);for(x1(c)&&(c=c.host);Qo(c)&&["html","body"].indexOf(Xa(c))<0;){var h=Cs(c);if(h.transform!=="none"||h.perspective!=="none"||h.contain==="paint"||["transform","perspective"].indexOf(h.willChange)!==-1||t&&h.willChange==="filter"||t&&h.filter&&h.filter!=="none")return c;c=c.parentNode}return null}function Op(e){for(var t=Ro(e),n=u2(e);n&&J3(n)&&Cs(n).position==="static";)n=u2(n);return n&&(Xa(n)==="html"||Xa(n)==="body"&&Cs(n).position==="static")?t:n||Y3(e)||t}function w1(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Gh(e,t,n){return Jl(e,_g(t,n))}function Q3(e,t,n){var a=Gh(e,t,n);return a>n?n:a}function YI(){return{top:0,right:0,bottom:0,left:0}}function QI(e){return Object.assign({},YI(),e)}function eP(e,t){return t.reduce(function(n,a){return n[a]=e,n},{})}var e4=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,QI(typeof t!="number"?t:eP(t,Bp))};function t4(e){var t,n=e.state,a=e.name,c=e.options,h=n.elements.arrow,g=n.modifiersData.popperOffsets,l=Ka(n.placement),b=w1(l),C=[vo,na].indexOf(l)>=0,P=C?"height":"width";if(!(!h||!g)){var A=e4(c.padding,n),D=b1(h),W=b==="y"?yo:vo,Z=b==="y"?ra:na,U=n.rects.reference[P]+n.rects.reference[b]-g[b]-n.rects.popper[P],J=g[b]-n.rects.reference[b],O=Op(h),$=O?b==="y"?O.clientHeight||0:O.clientWidth||0:0,N=U/2-J/2,ie=A[W],te=$-D[P]-A[Z],ee=$/2-D[P]/2+N,re=Gh(ie,ee,te),fe=b;n.modifiersData[a]=(t={},t[fe]=re,t.centerOffset=re-ee,t)}}function r4(e){var t=e.state,n=e.options,a=n.element,c=a===void 0?"[data-popper-arrow]":a;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||JI(t.elements.popper,c)&&(t.elements.arrow=c))}const n4={name:"arrow",enabled:!0,phase:"main",fn:t4,effect:r4,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vu(e){return e.split("-")[1]}var i4={top:"auto",right:"auto",bottom:"auto",left:"auto"};function o4(e,t){var n=e.x,a=e.y,c=t.devicePixelRatio||1;return{x:Nu(n*c)/c||0,y:Nu(a*c)/c||0}}function d2(e){var t,n=e.popper,a=e.popperRect,c=e.placement,h=e.variation,g=e.offsets,l=e.position,b=e.gpuAcceleration,C=e.adaptive,P=e.roundOffsets,A=e.isFixed,D=g.x,W=D===void 0?0:D,Z=g.y,U=Z===void 0?0:Z,J=typeof P=="function"?P({x:W,y:U}):{x:W,y:U};W=J.x,U=J.y;var O=g.hasOwnProperty("x"),$=g.hasOwnProperty("y"),N=vo,ie=yo,te=window;if(C){var ee=Op(n),re="clientHeight",fe="clientWidth";if(ee===Ro(n)&&(ee=yl(n),Cs(ee).position!=="static"&&l==="absolute"&&(re="scrollHeight",fe="scrollWidth")),ee=ee,c===yo||(c===vo||c===na)&&h===vp){ie=ra;var Te=A&&ee===te&&te.visualViewport?te.visualViewport.height:ee[re];U-=Te-a.height,U*=b?1:-1}if(c===vo||(c===yo||c===ra)&&h===vp){N=na;var be=A&&ee===te&&te.visualViewport?te.visualViewport.width:ee[fe];W-=be-a.width,W*=b?1:-1}}var ze=Object.assign({position:l},C&&i4),Ee=P===!0?o4({x:W,y:U},Ro(n)):{x:W,y:U};if(W=Ee.x,U=Ee.y,b){var Fe;return Object.assign({},ze,(Fe={},Fe[ie]=$?"0":"",Fe[N]=O?"0":"",Fe.transform=(te.devicePixelRatio||1)<=1?"translate("+W+"px, "+U+"px)":"translate3d("+W+"px, "+U+"px, 0)",Fe))}return Object.assign({},ze,(t={},t[ie]=$?U+"px":"",t[N]=O?W+"px":"",t.transform="",t))}function a4(e){var t=e.state,n=e.options,a=n.gpuAcceleration,c=a===void 0?!0:a,h=n.adaptive,g=h===void 0?!0:h,l=n.roundOffsets,b=l===void 0?!0:l,C={placement:Ka(t.placement),variation:Vu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,d2(Object.assign({},C,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:g,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,d2(Object.assign({},C,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const s4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:a4,data:{}};var bm={passive:!0};function l4(e){var t=e.state,n=e.instance,a=e.options,c=a.scroll,h=c===void 0?!0:c,g=a.resize,l=g===void 0?!0:g,b=Ro(t.elements.popper),C=[].concat(t.scrollParents.reference,t.scrollParents.popper);return h&&C.forEach(function(P){P.addEventListener("scroll",n.update,bm)}),l&&b.addEventListener("resize",n.update,bm),function(){h&&C.forEach(function(P){P.removeEventListener("scroll",n.update,bm)}),l&&b.removeEventListener("resize",n.update,bm)}}const c4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:l4,data:{}};var u4={left:"right",right:"left",bottom:"top",top:"bottom"};function jm(e){return e.replace(/left|right|bottom|top/g,function(t){return u4[t]})}var d4={start:"end",end:"start"};function h2(e){return e.replace(/start|end/g,function(t){return d4[t]})}function S1(e){var t=Ro(e),n=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:n,scrollTop:a}}function C1(e){return ju(yl(e)).left+S1(e).scrollLeft}function h4(e,t){var n=Ro(e),a=yl(e),c=n.visualViewport,h=a.clientWidth,g=a.clientHeight,l=0,b=0;if(c){h=c.width,g=c.height;var C=XI();(C||!C&&t==="fixed")&&(l=c.offsetLeft,b=c.offsetTop)}return{width:h,height:g,x:l+C1(e),y:b}}function p4(e){var t,n=yl(e),a=S1(e),c=(t=e.ownerDocument)==null?void 0:t.body,h=Jl(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),g=Jl(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-a.scrollLeft+C1(e),b=-a.scrollTop;return Cs(c||n).direction==="rtl"&&(l+=Jl(n.clientWidth,c?c.clientWidth:0)-h),{width:h,height:g,x:l,y:b}}function k1(e){var t=Cs(e),n=t.overflow,a=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+a)}function tP(e){return["html","body","#document"].indexOf(Xa(e))>=0?e.ownerDocument.body:Qo(e)&&k1(e)?e:tP(ky(e))}function qh(e,t){var n;t===void 0&&(t=[]);var a=tP(e),c=a===((n=e.ownerDocument)==null?void 0:n.body),h=Ro(a),g=c?[h].concat(h.visualViewport||[],k1(a)?a:[]):a,l=t.concat(g);return c?l:l.concat(qh(ky(g)))}function z_(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function f4(e,t){var n=ju(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function p2(e,t,n){return t===ZI?z_(h4(e,n)):sc(t)?f4(t,n):z_(p4(yl(e)))}function m4(e){var t=qh(ky(e)),n=["absolute","fixed"].indexOf(Cs(e).position)>=0,a=n&&Qo(e)?Op(e):e;return sc(a)?t.filter(function(c){return sc(c)&&JI(c,a)&&Xa(c)!=="body"}):[]}function g4(e,t,n,a){var c=t==="clippingParents"?m4(e):[].concat(t),h=[].concat(c,[n]),g=h[0],l=h.reduce(function(b,C){var P=p2(e,C,a);return b.top=Jl(P.top,b.top),b.right=_g(P.right,b.right),b.bottom=_g(P.bottom,b.bottom),b.left=Jl(P.left,b.left),b},p2(e,g,a));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function rP(e){var t=e.reference,n=e.element,a=e.placement,c=a?Ka(a):null,h=a?Vu(a):null,g=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,b;switch(c){case yo:b={x:g,y:t.y-n.height};break;case ra:b={x:g,y:t.y+t.height};break;case na:b={x:t.x+t.width,y:l};break;case vo:b={x:t.x-n.width,y:l};break;default:b={x:t.x,y:t.y}}var C=c?w1(c):null;if(C!=null){var P=C==="y"?"height":"width";switch(h){case Fu:b[C]=b[C]-(t[P]/2-n[P]/2);break;case vp:b[C]=b[C]+(t[P]/2-n[P]/2);break}}return b}function _p(e,t){t===void 0&&(t={});var n=t,a=n.placement,c=a===void 0?e.placement:a,h=n.strategy,g=h===void 0?e.strategy:h,l=n.boundary,b=l===void 0?$3:l,C=n.rootBoundary,P=C===void 0?ZI:C,A=n.elementContext,D=A===void 0?vh:A,W=n.altBoundary,Z=W===void 0?!1:W,U=n.padding,J=U===void 0?0:U,O=QI(typeof J!="number"?J:eP(J,Bp)),$=D===vh?B3:vh,N=e.rects.popper,ie=e.elements[Z?$:D],te=g4(sc(ie)?ie:ie.contextElement||yl(e.elements.popper),b,P,g),ee=ju(e.elements.reference),re=rP({reference:ee,element:N,strategy:"absolute",placement:c}),fe=z_(Object.assign({},N,re)),Te=D===vh?fe:ee,be={top:te.top-Te.top+O.top,bottom:Te.bottom-te.bottom+O.bottom,left:te.left-Te.left+O.left,right:Te.right-te.right+O.right},ze=e.modifiersData.offset;if(D===vh&&ze){var Ee=ze[c];Object.keys(be).forEach(function(Fe){var Ye=[na,ra].indexOf(Fe)>=0?1:-1,Ke=[yo,ra].indexOf(Fe)>=0?"y":"x";be[Fe]+=Ee[Ke]*Ye})}return be}function y4(e,t){t===void 0&&(t={});var n=t,a=n.placement,c=n.boundary,h=n.rootBoundary,g=n.padding,l=n.flipVariations,b=n.allowedAutoPlacements,C=b===void 0?KI:b,P=Vu(a),A=P?l?c2:c2.filter(function(Z){return Vu(Z)===P}):Bp,D=A.filter(function(Z){return C.indexOf(Z)>=0});D.length===0&&(D=A);var W=D.reduce(function(Z,U){return Z[U]=_p(e,{placement:U,boundary:c,rootBoundary:h,padding:g})[Ka(U)],Z},{});return Object.keys(W).sort(function(Z,U){return W[Z]-W[U]})}function v4(e){if(Ka(e)===_1)return[];var t=jm(e);return[h2(e),t,h2(t)]}function _4(e){var t=e.state,n=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var c=n.mainAxis,h=c===void 0?!0:c,g=n.altAxis,l=g===void 0?!0:g,b=n.fallbackPlacements,C=n.padding,P=n.boundary,A=n.rootBoundary,D=n.altBoundary,W=n.flipVariations,Z=W===void 0?!0:W,U=n.allowedAutoPlacements,J=t.options.placement,O=Ka(J),$=O===J,N=b||($||!Z?[jm(J)]:v4(J)),ie=[J].concat(N).reduce(function(mt,zt){return mt.concat(Ka(zt)===_1?y4(t,{placement:zt,boundary:P,rootBoundary:A,padding:C,flipVariations:Z,allowedAutoPlacements:U}):zt)},[]),te=t.rects.reference,ee=t.rects.popper,re=new Map,fe=!0,Te=ie[0],be=0;be<ie.length;be++){var ze=ie[be],Ee=Ka(ze),Fe=Vu(ze)===Fu,Ye=[yo,ra].indexOf(Ee)>=0,Ke=Ye?"width":"height",Re=_p(t,{placement:ze,boundary:P,rootBoundary:A,altBoundary:D,padding:C}),Ue=Ye?Fe?na:vo:Fe?ra:yo;te[Ke]>ee[Ke]&&(Ue=jm(Ue));var Ne=jm(Ue),Xe=[];if(h&&Xe.push(Re[Ee]<=0),l&&Xe.push(Re[Ue]<=0,Re[Ne]<=0),Xe.every(function(mt){return mt})){Te=ze,fe=!1;break}re.set(ze,Xe)}if(fe)for(var ct=Z?3:1,ft=function(zt){var tr=ie.find(function(nt){var We=re.get(nt);if(We)return We.slice(0,zt).every(function(st){return st})});if(tr)return Te=tr,"break"},it=ct;it>0;it--){var Et=ft(it);if(Et==="break")break}t.placement!==Te&&(t.modifiersData[a]._skip=!0,t.placement=Te,t.reset=!0)}}const x4={name:"flip",enabled:!0,phase:"main",fn:_4,requiresIfExists:["offset"],data:{_skip:!1}};function f2(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function m2(e){return[yo,na,ra,vo].some(function(t){return e[t]>=0})}function b4(e){var t=e.state,n=e.name,a=t.rects.reference,c=t.rects.popper,h=t.modifiersData.preventOverflow,g=_p(t,{elementContext:"reference"}),l=_p(t,{altBoundary:!0}),b=f2(g,a),C=f2(l,c,h),P=m2(b),A=m2(C);t.modifiersData[n]={referenceClippingOffsets:b,popperEscapeOffsets:C,isReferenceHidden:P,hasPopperEscaped:A},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":P,"data-popper-escaped":A})}const w4={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:b4};function S4(e,t,n){var a=Ka(e),c=[vo,yo].indexOf(a)>=0?-1:1,h=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,g=h[0],l=h[1];return g=g||0,l=(l||0)*c,[vo,na].indexOf(a)>=0?{x:l,y:g}:{x:g,y:l}}function C4(e){var t=e.state,n=e.options,a=e.name,c=n.offset,h=c===void 0?[0,0]:c,g=KI.reduce(function(P,A){return P[A]=S4(A,t.rects,h),P},{}),l=g[t.placement],b=l.x,C=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=C),t.modifiersData[a]=g}const k4={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:C4};function T4(e){var t=e.state,n=e.name;t.modifiersData[n]=rP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const I4={name:"popperOffsets",enabled:!0,phase:"read",fn:T4,data:{}};function P4(e){return e==="x"?"y":"x"}function E4(e){var t=e.state,n=e.options,a=e.name,c=n.mainAxis,h=c===void 0?!0:c,g=n.altAxis,l=g===void 0?!1:g,b=n.boundary,C=n.rootBoundary,P=n.altBoundary,A=n.padding,D=n.tether,W=D===void 0?!0:D,Z=n.tetherOffset,U=Z===void 0?0:Z,J=_p(t,{boundary:b,rootBoundary:C,padding:A,altBoundary:P}),O=Ka(t.placement),$=Vu(t.placement),N=!$,ie=w1(O),te=P4(ie),ee=t.modifiersData.popperOffsets,re=t.rects.reference,fe=t.rects.popper,Te=typeof U=="function"?U(Object.assign({},t.rects,{placement:t.placement})):U,be=typeof Te=="number"?{mainAxis:Te,altAxis:Te}:Object.assign({mainAxis:0,altAxis:0},Te),ze=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ee={x:0,y:0};if(ee){if(h){var Fe,Ye=ie==="y"?yo:vo,Ke=ie==="y"?ra:na,Re=ie==="y"?"height":"width",Ue=ee[ie],Ne=Ue+J[Ye],Xe=Ue-J[Ke],ct=W?-fe[Re]/2:0,ft=$===Fu?re[Re]:fe[Re],it=$===Fu?-fe[Re]:-re[Re],Et=t.elements.arrow,mt=W&&Et?b1(Et):{width:0,height:0},zt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:YI(),tr=zt[Ye],nt=zt[Ke],We=Gh(0,re[Re],mt[Re]),st=N?re[Re]/2-ct-We-tr-be.mainAxis:ft-We-tr-be.mainAxis,bt=N?-re[Re]/2+ct+We+nt+be.mainAxis:it+We+nt+be.mainAxis,Ht=t.elements.arrow&&Op(t.elements.arrow),Wt=Ht?ie==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,Er=(Fe=ze==null?void 0:ze[ie])!=null?Fe:0,Tr=Ue+st-Er-Wt,$t=Ue+bt-Er,wt=Gh(W?_g(Ne,Tr):Ne,Ue,W?Jl(Xe,$t):Xe);ee[ie]=wt,Ee[ie]=wt-Ue}if(l){var or,Gt=ie==="x"?yo:vo,Cr=ie==="x"?ra:na,$e=ee[te],pr=te==="y"?"height":"width",sr=$e+J[Gt],Yt=$e-J[Cr],Vt=[yo,vo].indexOf(O)!==-1,kr=(or=ze==null?void 0:ze[te])!=null?or:0,Lr=Vt?sr:$e-re[pr]-fe[pr]-kr+be.altAxis,cr=Vt?$e+re[pr]+fe[pr]-kr-be.altAxis:Yt,Qt=W&&Vt?Q3(Lr,$e,cr):Gh(W?Lr:sr,$e,W?cr:Yt);ee[te]=Qt,Ee[te]=Qt-$e}t.modifiersData[a]=Ee}}const z4={name:"preventOverflow",enabled:!0,phase:"main",fn:E4,requiresIfExists:["offset"]};function A4(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function M4(e){return e===Ro(e)||!Qo(e)?S1(e):A4(e)}function D4(e){var t=e.getBoundingClientRect(),n=Nu(t.width)/e.offsetWidth||1,a=Nu(t.height)/e.offsetHeight||1;return n!==1||a!==1}function R4(e,t,n){n===void 0&&(n=!1);var a=Qo(t),c=Qo(t)&&D4(t),h=yl(t),g=ju(e,c,n),l={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(a||!a&&!n)&&((Xa(t)!=="body"||k1(h))&&(l=M4(t)),Qo(t)?(b=ju(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):h&&(b.x=C1(h))),{x:g.left+l.scrollLeft-b.x,y:g.top+l.scrollTop-b.y,width:g.width,height:g.height}}function L4(e){var t=new Map,n=new Set,a=[];e.forEach(function(h){t.set(h.name,h)});function c(h){n.add(h.name);var g=[].concat(h.requires||[],h.requiresIfExists||[]);g.forEach(function(l){if(!n.has(l)){var b=t.get(l);b&&c(b)}}),a.push(h)}return e.forEach(function(h){n.has(h.name)||c(h)}),a}function $4(e){var t=L4(e);return q3.reduce(function(n,a){return n.concat(t.filter(function(c){return c.phase===a}))},[])}function B4(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function O4(e){var t=e.reduce(function(n,a){var c=n[a.name];return n[a.name]=c?Object.assign({},c,a,{options:Object.assign({},c.options,a.options),data:Object.assign({},c.data,a.data)}):a,n},{});return Object.keys(t).map(function(n){return t[n]})}var g2={placement:"bottom",modifiers:[],strategy:"absolute"};function y2(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function F4(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,a=n===void 0?[]:n,c=t.defaultOptions,h=c===void 0?g2:c;return function(l,b,C){C===void 0&&(C=h);var P={placement:"bottom",orderedModifiers:[],options:Object.assign({},g2,h),modifiersData:{},elements:{reference:l,popper:b},attributes:{},styles:{}},A=[],D=!1,W={state:P,setOptions:function(O){var $=typeof O=="function"?O(P.options):O;U(),P.options=Object.assign({},h,P.options,$),P.scrollParents={reference:sc(l)?qh(l):l.contextElement?qh(l.contextElement):[],popper:qh(b)};var N=$4(O4([].concat(a,P.options.modifiers)));return P.orderedModifiers=N.filter(function(ie){return ie.enabled}),Z(),W.update()},forceUpdate:function(){if(!D){var O=P.elements,$=O.reference,N=O.popper;if(y2($,N)){P.rects={reference:R4($,Op(N),P.options.strategy==="fixed"),popper:b1(N)},P.reset=!1,P.placement=P.options.placement,P.orderedModifiers.forEach(function(be){return P.modifiersData[be.name]=Object.assign({},be.data)});for(var ie=0;ie<P.orderedModifiers.length;ie++){if(P.reset===!0){P.reset=!1,ie=-1;continue}var te=P.orderedModifiers[ie],ee=te.fn,re=te.options,fe=re===void 0?{}:re,Te=te.name;typeof ee=="function"&&(P=ee({state:P,options:fe,name:Te,instance:W})||P)}}}},update:B4(function(){return new Promise(function(J){W.forceUpdate(),J(P)})}),destroy:function(){U(),D=!0}};if(!y2(l,b))return W;W.setOptions(C).then(function(J){!D&&C.onFirstUpdate&&C.onFirstUpdate(J)});function Z(){P.orderedModifiers.forEach(function(J){var O=J.name,$=J.options,N=$===void 0?{}:$,ie=J.effect;if(typeof ie=="function"){var te=ie({state:P,name:O,instance:W,options:N}),ee=function(){};A.push(te||ee)}})}function U(){A.forEach(function(J){return J()}),A=[]}return W}}var N4=[c4,I4,s4,X3,k4,x4,z4,n4,w4],j4=F4({defaultModifiers:N4});const nP="Popper";function V4(e){return jk(nP,e)}HL(nP,["root"]);const U4=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],H4=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function W4(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function A_(e){return typeof e=="function"?e():e}function G4(e){return e.nodeType!==void 0}const q4=()=>Qr({root:["root"]},OL(V4)),Z4={},K4=V.forwardRef(function(t,n){var a;const{anchorEl:c,children:h,direction:g,disablePortal:l,modifiers:b,open:C,placement:P,popperOptions:A,popperRef:D,slotProps:W={},slots:Z={},TransitionProps:U}=t,J=nr(t,U4),O=V.useRef(null),$=bn(O,n),N=V.useRef(null),ie=bn(N,D),te=V.useRef(ie);tc(()=>{te.current=ie},[ie]),V.useImperativeHandle(D,()=>N.current,[]);const ee=W4(P,g),[re,fe]=V.useState(ee),[Te,be]=V.useState(A_(c));V.useEffect(()=>{N.current&&N.current.forceUpdate()}),V.useEffect(()=>{c&&be(A_(c))},[c]),tc(()=>{if(!Te||!C)return;const Ke=Ne=>{fe(Ne.placement)};let Re=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ne})=>{Ke(Ne)}}];b!=null&&(Re=Re.concat(b)),A&&A.modifiers!=null&&(Re=Re.concat(A.modifiers));const Ue=j4(Te,O.current,Q({placement:ee},A,{modifiers:Re}));return te.current(Ue),()=>{Ue.destroy(),te.current(null)}},[Te,l,b,C,A,ee]);const ze={placement:re};U!==null&&(ze.TransitionProps=U);const Ee=q4(),Fe=(a=Z.root)!=null?a:"div",Ye=jL({elementType:Fe,externalSlotProps:W.root,externalForwardedProps:J,additionalProps:{role:"tooltip",ref:$},ownerState:t,className:Ee.root});return de.jsx(Fe,Q({},Ye,{children:typeof h=="function"?h(ze):h}))}),T1=V.forwardRef(function(t,n){const{anchorEl:a,children:c,container:h,direction:g="ltr",disablePortal:l=!1,keepMounted:b=!1,modifiers:C,open:P,placement:A="bottom",popperOptions:D=Z4,popperRef:W,style:Z,transition:U=!1,slotProps:J={},slots:O={}}=t,$=nr(t,H4),[N,ie]=V.useState(!0),te=()=>{ie(!1)},ee=()=>{ie(!0)};if(!b&&!P&&(!U||N))return null;let re;if(h)re=h;else if(a){const be=A_(a);re=be&&G4(be)?Ga(be).body:Ga(null).body}const fe=!P&&b&&(!U||N)?"none":void 0,Te=U?{in:P,onEnter:te,onExited:ee}:void 0;return de.jsx(qI,{disablePortal:l,container:re,children:de.jsx(K4,Q({anchorEl:a,direction:g,disablePortal:l,modifiers:C,ref:n,open:U?!N:P,placement:A,popperOptions:D,popperRef:W,slotProps:J,slots:O},$,{style:Q({position:"fixed",top:0,left:0,display:fe},Z),TransitionProps:Te,children:c}))})}),xg={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},X4=e=>{const{label:t,value:n}=e;return typeof t=="string"?t:typeof n=="string"?n:String(e)};function J4(e,t){const{open:n}=e,{context:{selectionMode:a}}=t;if(t.type===xg.buttonClick){var c;const b=(c=e.selectedValues[0])!=null?c:ui(null,"start",t.context);return Q({},e,{open:!n,highlightedValue:n?null:b})}if(t.type===xg.browserAutoFill)return kx(t.item,e,t.context);const h=Tx(e,t);switch(t.type){case kn.keyDown:if(e.open){if(t.event.key==="Escape")return Q({},h,{open:!1})}else{if(t.event.key==="ArrowDown"){var g;return Q({},e,{open:!0,highlightedValue:(g=e.selectedValues[0])!=null?g:ui(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var l;return Q({},e,{open:!0,highlightedValue:(l=e.selectedValues[0])!=null?l:ui(null,"end",t.context)})}}break;case kn.itemClick:if(a==="single")return Q({},h,{open:!1});break;case kn.blur:return Q({},h,{open:!1});default:return h}return h}function Y4(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function Q4(e){const{areOptionsEqual:t,buttonRef:n,defaultOpen:a=!1,defaultValue:c,disabled:h=!1,listboxId:g,listboxRef:l,multiple:b=!1,name:C,required:P,onChange:A,onHighlightChange:D,onOpenChange:W,open:Z,options:U,getOptionAsString:J=X4,getSerializedValue:O=Y4,value:$,componentName:N="useSelect"}=e,ie=V.useRef(null),te=bn(n,ie),ee=V.useRef(null),re=Pa(g);let fe;$===void 0&&c===void 0?fe=[]:c!==void 0&&(b?fe=c:fe=c==null?[]:[c]);const Te=V.useMemo(()=>{if($!==void 0)return b?$:$==null?[]:[$]},[$,b]),{subitems:be,contextValue:ze}=Ix(),Ee=V.useMemo(()=>U!=null?new Map(U.map((Pe,ot)=>[Pe.value,{value:Pe.value,label:Pe.label,disabled:Pe.disabled,ref:V.createRef(),id:`${re}_${ot}`}])):be,[U,be,re]),Fe=bn(l,ee),{getRootProps:Ye,active:Ke,focusVisible:Re,rootRef:Ue}=lc({disabled:h,rootRef:te}),Ne=V.useMemo(()=>Array.from(Ee.keys()),[Ee]),Xe=V.useCallback(Pe=>{if(t!==void 0){const ot=Ne.find(St=>t(St,Pe));return Ee.get(ot)}return Ee.get(Pe)},[Ee,t,Ne]),ct=V.useCallback(Pe=>{var ot;const St=Xe(Pe);return(ot=St==null?void 0:St.disabled)!=null?ot:!1},[Xe]),ft=V.useCallback(Pe=>{const ot=Xe(Pe);return ot?J(ot):""},[Xe,J]),it=V.useMemo(()=>({selectedValues:Te,open:Z}),[Te,Z]),Et=V.useCallback(Pe=>{var ot;return(ot=Ee.get(Pe))==null?void 0:ot.id},[Ee]),mt=V.useCallback((Pe,ot)=>{if(b)A==null||A(Pe,ot);else{var St;A==null||A(Pe,(St=ot[0])!=null?St:null)}},[b,A]),zt=V.useCallback((Pe,ot)=>{D==null||D(Pe,ot??null)},[D]),tr=V.useCallback((Pe,ot,St)=>{if(ot==="open"&&(W==null||W(St),St===!1&&(Pe==null?void 0:Pe.type)!=="blur")){var ir;(ir=ie.current)==null||ir.focus()}},[W]),nt=V.useCallback(Pe=>{var ot,St;return Pe==null?null:(ot=(St=be.get(Pe))==null?void 0:St.ref.current)!=null?ot:null},[be]),We={getInitialState:()=>{var Pe;return{highlightedValue:null,selectedValues:(Pe=fe)!=null?Pe:[],open:a}},getItemId:Et,controlledProps:it,focusManagement:"DOM",getItemDomElement:nt,itemComparer:t,isItemDisabled:ct,rootRef:Fe,onChange:mt,onHighlightChange:zt,onStateChange:tr,reducerActionContext:V.useMemo(()=>({multiple:b}),[b]),items:Ne,getItemAsString:ft,selectionMode:b?"multiple":"single",stateReducer:J4,componentName:N},{dispatch:st,getRootProps:bt,contextValue:Ht,state:{open:Wt,highlightedValue:Er,selectedValues:Tr},rootRef:$t}=Vk(We),wt=V.useRef(Wt);tc(()=>{if(Wt&&Er!==null){var Pe;const ot=(Pe=Xe(Er))==null?void 0:Pe.ref;if(!ee.current||!(ot!=null&&ot.current))return;wt.current||ot.current.focus({preventScroll:!0});const St=ee.current.getBoundingClientRect(),ir=ot.current.getBoundingClientRect();ir.top<St.top?ee.current.scrollTop-=St.top-ir.top:ir.bottom>St.bottom&&(ee.current.scrollTop+=ir.bottom-St.bottom)}},[Wt,Er,Xe]);const or=V.useCallback(Pe=>Xe(Pe),[Xe]),Gt=Pe=>ot=>{var St;if(Pe==null||(St=Pe.onClick)==null||St.call(Pe,ot),!ot.defaultMuiPrevented){const ir={type:xg.buttonClick,event:ot};st(ir)}},Cr=Pe=>ot=>{var St;(St=Pe.onKeyDown)==null||St.call(Pe,ot),!ot.defaultMuiPrevented&&(ot.key==="ArrowDown"||ot.key==="ArrowUp")&&(ot.preventDefault(),st({type:kn.keyDown,key:ot.key,event:ot}))},$e=(Pe={})=>({onClick:Gt(Pe),onKeyDown:Cr(Pe)}),pr=(Pe={})=>Q({},Pe,$e(Pe),{role:"combobox","aria-expanded":Wt,"aria-controls":re}),sr=(Pe={})=>{const ot=Ca(Pe),St=ep(pr,Ye);return Q({},Pe,St(ot))},Yt=Pe=>ot=>{var St,ir;(St=Pe.onBlur)==null||St.call(Pe,ot),!ot.defaultMuiPrevented&&((ir=ee.current)!=null&&ir.contains(ot.relatedTarget)||ot.relatedTarget===ie.current)&&(ot.defaultMuiPrevented=!0)},Vt=(Pe={})=>({onBlur:Yt(Pe)}),kr=(Pe={})=>{const ot=Ca(Pe),St=ep(Vt,bt);return Q({id:re,role:"listbox","aria-multiselectable":b?"true":void 0},Pe,St(ot))};V.useDebugValue({selectedOptions:Tr,highlightedOption:Er,open:Wt});const Lr=V.useMemo(()=>Q({},Ht,ze),[Ht,ze]);let cr;e.multiple?cr=Tr:cr=Tr.length>0?Tr[0]:null;let Qt;if(b)Qt=cr.map(Pe=>or(Pe)).filter(Pe=>Pe!==void 0);else{var Nt;Qt=(Nt=or(cr))!=null?Nt:null}const mr=Pe=>ot=>{var St;if(Pe==null||(St=Pe.onChange)==null||St.call(Pe,ot),ot.defaultMuiPrevented)return;const ir=Ee.get(ot.target.value);ot.target.value===""?st({type:kn.clearSelection}):ir!==void 0&&st({type:xg.browserAutoFill,item:ir.value,event:ot})};return{buttonActive:Ke,buttonFocusVisible:Re,buttonRef:Ue,contextValue:Lr,disabled:h,dispatch:st,getButtonProps:sr,getHiddenInputProps:(Pe={})=>{const ot=Ca(Pe);return Q({name:C,tabIndex:-1,"aria-hidden":!0,required:P?!0:void 0,value:O(Qt),style:ZR},Pe,{onChange:mr(ot)})},getListboxProps:kr,getOptionMetadata:or,listboxRef:$t,open:Wt,options:Ne,value:cr,highlightedOption:Er}}function eB(e){const{value:t,children:n}=e,{dispatch:a,getItemIndex:c,getItemState:h,registerItem:g,totalSubitemCount:l}=t,b=V.useMemo(()=>({dispatch:a,getItemState:h,getItemIndex:c}),[a,c,h]),C=V.useMemo(()=>({getItemIndex:c,registerItem:g,totalSubitemCount:l}),[g,c,l]);return de.jsx(cy.Provider,{value:C,children:de.jsx(Mp.Provider,{value:b,children:n})})}function tB(e){const{checked:t,defaultChecked:n,disabled:a,onBlur:c,onChange:h,onFocus:g,onFocusVisible:l,readOnly:b,required:C}=e,[P,A]=wu({controlled:t,default:!!n,name:"Switch",state:"checked"}),D=fe=>Te=>{var be;Te.nativeEvent.defaultPrevented||(A(Te.target.checked),h==null||h(Te),(be=fe.onChange)==null||be.call(fe,Te))},{isFocusVisibleRef:W,onBlur:Z,onFocus:U,ref:J}=xx(),[O,$]=V.useState(!1);a&&O&&$(!1),V.useEffect(()=>{W.current=O},[O,W]);const N=V.useRef(null),ie=fe=>Te=>{var be;N.current||(N.current=Te.currentTarget),U(Te),W.current===!0&&($(!0),l==null||l(Te)),g==null||g(Te),(be=fe.onFocus)==null||be.call(fe,Te)},te=fe=>Te=>{var be;Z(Te),W.current===!1&&$(!1),c==null||c(Te),(be=fe.onBlur)==null||be.call(fe,Te)},ee=bn(J,N);return{checked:P,disabled:!!a,focusVisible:O,getInputProps:(fe={})=>Q({checked:t,defaultChecked:n,disabled:a,readOnly:b,ref:ee,required:C,type:"checkbox",role:"switch","aria-checked":t},fe,{onChange:D(fe),onFocus:ie(fe),onBlur:te(fe)}),inputRef:ee,readOnly:!!b}}function rB(e){const{value:t,defaultValue:n,onChange:a,orientation:c="horizontal",direction:h="ltr",selectionFollowsFocus:g=!1}=e,[l,b]=wu({controlled:t,default:n,name:"Tabs",state:"value"}),C=V.useCallback((J,O)=>{b(O),a==null||a(J,O)},[a,b]),{subitems:P,contextValue:A}=Ix(),D=V.useRef(()=>{}),W=V.useCallback(J=>{var O;return(O=P.get(J))==null?void 0:O.id},[P]),Z=V.useCallback(J=>D.current(J),[]),U=V.useCallback(J=>{D.current=J},[]);return{contextValue:Q({direction:h,getTabId:Z,getTabPanelId:W,onSelected:C,orientation:c,registerTabIdLookup:U,selectionFollowsFocus:g,value:l},A)}}const iP=V.createContext(null);function Ty(){const e=V.useContext(iP);if(e==null)throw new Error("No TabsContext provided");return e}function nB(e){const{value:t,children:n}=e,{direction:a,getItemIndex:c,onSelected:h,orientation:g,registerItem:l,registerTabIdLookup:b,selectionFollowsFocus:C,totalSubitemCount:P,value:A,getTabId:D,getTabPanelId:W}=t,Z=V.useMemo(()=>({getItemIndex:c,registerItem:l,totalSubitemCount:P}),[l,c,P]),U=V.useMemo(()=>({direction:a,getTabId:D,getTabPanelId:W,onSelected:h,orientation:g,registerTabIdLookup:b,selectionFollowsFocus:C,value:A}),[a,D,W,h,g,b,C,A]);return de.jsx(cy.Provider,{value:Z,children:de.jsx(iP.Provider,{value:U,children:n})})}function iB(e){return e.size}function oB(e){const{value:t,id:n,rootRef:a}=e,c=Ty();if(c===null)throw new Error("No TabContext provided");const{value:h,getTabId:g}=c,l=Pa(n),b=V.useRef(null),C=bn(b,a),P=V.useMemo(()=>({id:l,ref:b}),[l]),{id:A}=Px(t??iB,P),D=A!==h,W=A!==void 0?g(A):void 0;return{hidden:D,getRootProps:(U={})=>Q({"aria-labelledby":W??void 0,hidden:D,id:l??void 0},U,{ref:C}),rootRef:C}}const oP={valueChange:"valueChange"};function aB(e,t){if(t.type===oP.valueChange)return Q({},e,{highlightedValue:t.value});const n=Tx(e,t),{context:{selectionFollowsFocus:a}}=t;if(t.type===kn.itemsChange){if(n.selectedValues.length>0)return Q({},n,{highlightedValue:n.selectedValues[0]});ui(null,"reset",t.context)}return a&&n.highlightedValue!=null?Q({},n,{selectedValues:[n.highlightedValue]}):n}function sB(e){var t;const{rootRef:n}=e,{direction:a="ltr",onSelected:c,orientation:h="horizontal",value:g,registerTabIdLookup:l,selectionFollowsFocus:b}=Ty(),{subitems:C,contextValue:P}=Ix(),A=V.useCallback(ze=>{var Ee;return(Ee=C.get(ze))==null?void 0:Ee.id},[C]);l(A);const D=V.useMemo(()=>Array.from(C.keys()),[C]),W=V.useCallback(ze=>{var Ee,Fe;return ze==null?null:(Ee=(Fe=C.get(ze))==null?void 0:Fe.ref.current)!=null?Ee:null},[C]),Z=a==="rtl";let U;h==="vertical"?U="vertical":U=Z?"horizontal-rtl":"horizontal-ltr";const J=V.useCallback((ze,Ee)=>{var Fe;c(ze,(Fe=Ee[0])!=null?Fe:null)},[c]),O=V.useMemo(()=>g===void 0?{}:g!=null?{selectedValues:[g]}:{selectedValues:[]},[g]),$=V.useCallback(ze=>{var Ee,Fe;return(Ee=(Fe=C.get(ze))==null?void 0:Fe.disabled)!=null?Ee:!1},[C]),{contextValue:N,dispatch:ie,getRootProps:te,state:{highlightedValue:ee,selectedValues:re},rootRef:fe}=Vk({controlledProps:O,disabledItemsFocusable:!b,focusManagement:"DOM",getItemDomElement:W,isItemDisabled:$,items:D,rootRef:n,onChange:J,orientation:U,reducerActionContext:V.useMemo(()=>({selectionFollowsFocus:b||!1}),[b]),selectionMode:"single",stateReducer:aB});V.useEffect(()=>{g!==void 0&&g!=null&&ie({type:oP.valueChange,value:g})},[ie,g]);const Te=(ze={})=>Q({},ze,te(ze),{"aria-orientation":h==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:V.useMemo(()=>Q({},P,N),[P,N]),dispatch:ie,getRootProps:Te,highlightedValue:ee,isRtl:Z,orientation:h,rootRef:fe,selectedValue:(t=re[0])!=null?t:null}}function lB(e){const{value:t,children:n}=e,{dispatch:a,getItemIndex:c,getItemState:h,registerItem:g,totalSubitemCount:l}=t,b=V.useMemo(()=>({dispatch:a,getItemState:h,getItemIndex:c}),[a,c,h]),C=V.useMemo(()=>({getItemIndex:c,registerItem:g,totalSubitemCount:l}),[g,c,l]);return de.jsx(cy.Provider,{value:C,children:de.jsx(Mp.Provider,{value:b,children:n})})}function cB(e){return e.size}function uB(e){const{value:t,rootRef:n,disabled:a=!1,id:c}=e,h=V.useRef(null),g=Pa(c),{value:l,selectionFollowsFocus:b,getTabPanelId:C}=Ty(),P=V.useMemo(()=>({disabled:a,ref:h,id:g}),[a,h,g]),{id:A,index:D,totalItemCount:W}=Px(t??cB,P),{getRootProps:Z,highlighted:U,selected:J}=Uk({item:A}),{getRootProps:O,rootRef:$,active:N,focusVisible:ie,setFocusVisible:te}=lc({disabled:a,focusableWhenDisabled:!b,type:"button"}),ee=bn(h,n,$),re=A!==void 0?C(A):void 0;return{getRootProps:(Te={})=>{const be=Ca(Te),ze=ep(Z,O);return Q({},Te,ze(be),{role:"tab","aria-controls":re,"aria-selected":J,id:g,ref:ee})},active:N,focusVisible:ie,highlighted:U,index:D,rootRef:ee,selected:J||A===l,setFocusVisible:te,totalTabsCount:W}}function v2(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function aP(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:a,matchFrom:c="any",stringify:h,trim:g=!1}=e;return(l,{inputValue:b,getOptionLabel:C})=>{let P=g?b.trim():b;n&&(P=P.toLowerCase()),t&&(P=v2(P));const A=P?l.filter(D=>{let W=(h||C)(D);return n&&(W=W.toLowerCase()),t&&(W=v2(W)),c==="start"?W.indexOf(P)===0:W.indexOf(P)>-1}):l;return typeof a=="number"?A.slice(0,a):A}}function wm(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const dB=aP(),_2=5,hB=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function pB(e){const{unstable_isActiveElementInListbox:t=hB,unstable_classNamePrefix:n="Mui",autoComplete:a=!1,autoHighlight:c=!1,autoSelect:h=!1,blurOnSelect:g=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:b=!1,componentName:C="useAutocomplete",defaultValue:P=e.multiple?[]:null,disableClearable:A=!1,disableCloseOnSelect:D=!1,disabled:W,disabledItemsFocusable:Z=!1,disableListWrap:U=!1,filterOptions:J=dB,filterSelectedOptions:O=!1,freeSolo:$=!1,getOptionDisabled:N,getOptionKey:ie,getOptionLabel:te=Me=>{var De;return(De=Me.label)!=null?De:Me},groupBy:ee,handleHomeEndKeys:re=!e.freeSolo,id:fe,includeInputInList:Te=!1,inputValue:be,isOptionEqualToValue:ze=(Me,De)=>Me===De,multiple:Ee=!1,onChange:Fe,onClose:Ye,onHighlightChange:Ke,onInputChange:Re,onOpen:Ue,open:Ne,openOnFocus:Xe=!1,options:ct,readOnly:ft=!1,selectOnFocus:it=!e.freeSolo,value:Et}=e,mt=Pa(fe);let zt=te;zt=Me=>{const De=te(Me);return typeof De!="string"?String(De):De};const tr=V.useRef(!1),nt=V.useRef(!0),We=V.useRef(null),st=V.useRef(null),[bt,Ht]=V.useState(null),[Wt,Er]=V.useState(-1),Tr=c?0:-1,$t=V.useRef(Tr),[wt,or]=wu({controlled:Et,default:P,name:C}),[Gt,Cr]=wu({controlled:be,default:"",name:C,state:"inputValue"}),[$e,pr]=V.useState(!1),sr=V.useCallback((Me,De)=>{if(!(Ee?wt.length<De.length:De!==null)&&!l)return;let dt;if(Ee)dt="";else if(De==null)dt="";else{const kt=zt(De);dt=typeof kt=="string"?kt:""}Gt!==dt&&(Cr(dt),Re&&Re(Me,dt,"reset"))},[zt,Gt,Ee,Re,Cr,l,wt]),[Yt,Vt]=wu({controlled:Ne,default:!1,name:C,state:"open"}),[kr,Lr]=V.useState(!0),cr=!Ee&&wt!=null&&Gt===zt(wt),Qt=Yt&&!ft,Nt=Qt?J(ct.filter(Me=>!(O&&(Ee?wt:[wt]).some(De=>De!==null&&ze(Me,De)))),{inputValue:cr&&kr?"":Gt,getOptionLabel:zt}):[],mr=GR({filteredOptions:Nt,value:wt,inputValue:Gt});V.useEffect(()=>{const Me=wt!==mr.value;$e&&!Me||$&&!Me||sr(null,wt)},[wt,sr,$e,mr.value,$]);const Hr=Yt&&Nt.length>0&&!ft,Pe=Qs(Me=>{Me===-1?We.current.focus():bt.querySelector(`[data-tag-index="${Me}"]`).focus()});V.useEffect(()=>{Ee&&Wt>wt.length-1&&(Er(-1),Pe(-1))},[wt,Ee,Wt,Pe]);function ot(Me,De){if(!st.current||Me<0||Me>=Nt.length)return-1;let tt=Me;for(;;){const dt=st.current.querySelector(`[data-option-index="${tt}"]`),kt=Z?!1:!dt||dt.disabled||dt.getAttribute("aria-disabled")==="true";if(dt&&dt.hasAttribute("tabindex")&&!kt)return tt;if(De==="next"?tt=(tt+1)%Nt.length:tt=(tt-1+Nt.length)%Nt.length,tt===Me)return-1}}const St=Qs(({event:Me,index:De,reason:tt="auto"})=>{if($t.current=De,De===-1?We.current.removeAttribute("aria-activedescendant"):We.current.setAttribute("aria-activedescendant",`${mt}-option-${De}`),Ke&&Ke(Me,De===-1?null:Nt[De],tt),!st.current)return;const dt=st.current.querySelector(`[role="option"].${n}-focused`);dt&&(dt.classList.remove(`${n}-focused`),dt.classList.remove(`${n}-focusVisible`));let kt=st.current;if(st.current.getAttribute("role")!=="listbox"&&(kt=st.current.parentElement.querySelector('[role="listbox"]')),!kt)return;if(De===-1){kt.scrollTop=0;return}const dr=st.current.querySelector(`[data-option-index="${De}"]`);if(dr&&(dr.classList.add(`${n}-focused`),tt==="keyboard"&&dr.classList.add(`${n}-focusVisible`),kt.scrollHeight>kt.clientHeight&&tt!=="mouse"&&tt!=="touch")){const er=dr,br=kt.clientHeight+kt.scrollTop,rr=er.offsetTop+er.offsetHeight;rr>br?kt.scrollTop=rr-kt.clientHeight:er.offsetTop-er.offsetHeight*(ee?1.3:0)<kt.scrollTop&&(kt.scrollTop=er.offsetTop-er.offsetHeight*(ee?1.3:0))}}),ir=Qs(({event:Me,diff:De,direction:tt="next",reason:dt="auto"})=>{if(!Qt)return;const dr=ot((()=>{const er=Nt.length-1;if(De==="reset")return Tr;if(De==="start")return 0;if(De==="end")return er;const br=$t.current+De;return br<0?br===-1&&Te?-1:U&&$t.current!==-1||Math.abs(De)>1?0:er:br>er?br===er+1&&Te?-1:U||Math.abs(De)>1?er:0:br})(),tt);if(St({index:dr,reason:dt,event:Me}),a&&De!=="reset")if(dr===-1)We.current.value=Gt;else{const er=zt(Nt[dr]);We.current.value=er,er.toLowerCase().indexOf(Gt.toLowerCase())===0&&Gt.length>0&&We.current.setSelectionRange(Gt.length,er.length)}}),un=()=>{const Me=(De,tt)=>{const dt=De?zt(De):"",kt=tt?zt(tt):"";return dt===kt};if($t.current!==-1&&mr.filteredOptions&&mr.filteredOptions.length!==Nt.length&&mr.inputValue===Gt&&(Ee?wt.length===mr.value.length&&mr.value.every((De,tt)=>zt(wt[tt])===zt(De)):Me(mr.value,wt))){const De=mr.filteredOptions[$t.current];if(De)return wm(Nt,tt=>zt(tt)===zt(De))}return-1},Ze=V.useCallback(()=>{if(!Qt)return;const Me=un();if(Me!==-1){$t.current=Me;return}const De=Ee?wt[0]:wt;if(Nt.length===0||De==null){ir({diff:"reset"});return}if(st.current){if(De!=null){const tt=Nt[$t.current];if(Ee&&tt&&wm(wt,kt=>ze(tt,kt))!==-1)return;const dt=wm(Nt,kt=>ze(kt,De));dt===-1?ir({diff:"reset"}):St({index:dt});return}if($t.current>=Nt.length-1){St({index:Nt.length-1});return}St({index:$t.current})}},[Nt.length,Ee?!1:wt,O,ir,St,Qt,Gt,Ee]),Zt=Qs(Me=>{Zm(st,Me),Me&&Ze()});V.useEffect(()=>{Ze()},[Ze]);const Mt=Me=>{Yt||(Vt(!0),Lr(!0),Ue&&Ue(Me))},ur=(Me,De)=>{Yt&&(Vt(!1),Ye&&Ye(Me,De))},xr=(Me,De,tt,dt)=>{if(Ee){if(wt.length===De.length&&wt.every((kt,dr)=>kt===De[dr]))return}else if(wt===De)return;Fe&&Fe(Me,De,tt,dt),or(De)},At=V.useRef(!1),Se=(Me,De,tt="selectOption",dt="options")=>{let kt=tt,dr=De;if(Ee){dr=Array.isArray(wt)?wt.slice():[];const er=wm(dr,br=>ze(De,br));er===-1?dr.push(De):dt!=="freeSolo"&&(dr.splice(er,1),kt="removeOption")}sr(Me,dr),xr(Me,dr,kt,{option:De}),!D&&(!Me||!Me.ctrlKey&&!Me.metaKey)&&ur(Me,kt),(g===!0||g==="touch"&&At.current||g==="mouse"&&!At.current)&&We.current.blur()};function H(Me,De){if(Me===-1)return-1;let tt=Me;for(;;){if(De==="next"&&tt===wt.length||De==="previous"&&tt===-1)return-1;const dt=bt.querySelector(`[data-tag-index="${tt}"]`);if(!dt||!dt.hasAttribute("tabindex")||dt.disabled||dt.getAttribute("aria-disabled")==="true")tt+=De==="next"?1:-1;else return tt}}const M=(Me,De)=>{if(!Ee)return;Gt===""&&ur(Me,"toggleInput");let tt=Wt;Wt===-1?Gt===""&&De==="previous"&&(tt=wt.length-1):(tt+=De==="next"?1:-1,tt<0&&(tt=0),tt===wt.length&&(tt=-1)),tt=H(tt,De),Er(tt),Pe(tt)},F=Me=>{tr.current=!0,Cr(""),Re&&Re(Me,"","clear"),xr(Me,Ee?[]:null,"clear")},q=Me=>De=>{if(Me.onKeyDown&&Me.onKeyDown(De),!De.defaultMuiPrevented&&(Wt!==-1&&["ArrowLeft","ArrowRight"].indexOf(De.key)===-1&&(Er(-1),Pe(-1)),De.which!==229))switch(De.key){case"Home":Qt&&re&&(De.preventDefault(),ir({diff:"start",direction:"next",reason:"keyboard",event:De}));break;case"End":Qt&&re&&(De.preventDefault(),ir({diff:"end",direction:"previous",reason:"keyboard",event:De}));break;case"PageUp":De.preventDefault(),ir({diff:-_2,direction:"previous",reason:"keyboard",event:De}),Mt(De);break;case"PageDown":De.preventDefault(),ir({diff:_2,direction:"next",reason:"keyboard",event:De}),Mt(De);break;case"ArrowDown":De.preventDefault(),ir({diff:1,direction:"next",reason:"keyboard",event:De}),Mt(De);break;case"ArrowUp":De.preventDefault(),ir({diff:-1,direction:"previous",reason:"keyboard",event:De}),Mt(De);break;case"ArrowLeft":M(De,"previous");break;case"ArrowRight":M(De,"next");break;case"Enter":if($t.current!==-1&&Qt){const tt=Nt[$t.current],dt=N?N(tt):!1;if(De.preventDefault(),dt)return;Se(De,tt,"selectOption"),a&&We.current.setSelectionRange(We.current.value.length,We.current.value.length)}else $&&Gt!==""&&cr===!1&&(Ee&&De.preventDefault(),Se(De,Gt,"createOption","freeSolo"));break;case"Escape":Qt?(De.preventDefault(),De.stopPropagation(),ur(De,"escape")):b&&(Gt!==""||Ee&&wt.length>0)&&(De.preventDefault(),De.stopPropagation(),F(De));break;case"Backspace":if(Ee&&!ft&&Gt===""&&wt.length>0){const tt=Wt===-1?wt.length-1:Wt,dt=wt.slice();dt.splice(tt,1),xr(De,dt,"removeOption",{option:wt[tt]})}break;case"Delete":if(Ee&&!ft&&Gt===""&&wt.length>0&&Wt!==-1){const tt=Wt,dt=wt.slice();dt.splice(tt,1),xr(De,dt,"removeOption",{option:wt[tt]})}break}},ne=Me=>{pr(!0),Xe&&!tr.current&&Mt(Me)},oe=Me=>{if(t(st)){We.current.focus();return}pr(!1),nt.current=!0,tr.current=!1,h&&$t.current!==-1&&Qt?Se(Me,Nt[$t.current],"blur"):h&&$&&Gt!==""?Se(Me,Gt,"blur","freeSolo"):l&&sr(Me,wt),ur(Me,"blur")},ve=Me=>{const De=Me.target.value;Gt!==De&&(Cr(De),Lr(!1),Re&&Re(Me,De,"input")),De===""?!A&&!Ee&&xr(Me,null,"clear"):Mt(Me)},he=Me=>{const De=Number(Me.currentTarget.getAttribute("data-option-index"));$t.current!==De&&St({event:Me,index:De,reason:"mouse"})},ue=Me=>{St({event:Me,index:Number(Me.currentTarget.getAttribute("data-option-index")),reason:"touch"}),At.current=!0},_e=Me=>{const De=Number(Me.currentTarget.getAttribute("data-option-index"));Se(Me,Nt[De],"selectOption"),At.current=!1},Ae=Me=>De=>{const tt=wt.slice();tt.splice(Me,1),xr(De,tt,"removeOption",{option:wt[Me]})},Oe=Me=>{Yt?ur(Me,"toggleInput"):Mt(Me)},He=Me=>{Me.currentTarget.contains(Me.target)&&Me.target.getAttribute("id")!==mt&&Me.preventDefault()},Ct=Me=>{Me.currentTarget.contains(Me.target)&&(We.current.focus(),it&&nt.current&&We.current.selectionEnd-We.current.selectionStart===0&&We.current.select(),nt.current=!1)},Tt=Me=>{!W&&(Gt===""||!Yt)&&Oe(Me)};let yt=$&&Gt.length>0;yt=yt||(Ee?wt.length>0:wt!==null);let Dt=Nt;return ee&&(Dt=Nt.reduce((Me,De,tt)=>{const dt=ee(De);return Me.length>0&&Me[Me.length-1].group===dt?Me[Me.length-1].options.push(De):Me.push({key:tt,index:tt,group:dt,options:[De]}),Me},[])),W&&$e&&oe(),{getRootProps:(Me={})=>Q({"aria-owns":Hr?`${mt}-listbox`:null},Me,{onKeyDown:q(Me),onMouseDown:He,onClick:Ct}),getInputLabelProps:()=>({id:`${mt}-label`,htmlFor:mt}),getInputProps:()=>({id:mt,value:Gt,onBlur:oe,onFocus:ne,onChange:ve,onMouseDown:Tt,"aria-activedescendant":Qt?"":null,"aria-autocomplete":a?"both":"list","aria-controls":Hr?`${mt}-listbox`:void 0,"aria-expanded":Hr,autoComplete:"off",ref:We,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:W}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:F}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Oe}),getTagProps:({index:Me})=>Q({key:Me,"data-tag-index":Me,tabIndex:-1},!ft&&{onDelete:Ae(Me)}),getListboxProps:()=>({role:"listbox",id:`${mt}-listbox`,"aria-labelledby":`${mt}-label`,ref:Zt,onMouseDown:Me=>{Me.preventDefault()}}),getOptionProps:({index:Me,option:De})=>{var tt;const dt=(Ee?wt:[wt]).some(dr=>dr!=null&&ze(De,dr)),kt=N?N(De):!1;return{key:(tt=ie==null?void 0:ie(De))!=null?tt:zt(De),tabIndex:-1,role:"option",id:`${mt}-option-${Me}`,onMouseMove:he,onClick:_e,onTouchStart:ue,"data-option-index":Me,"aria-disabled":kt,"aria-selected":dt}},id:mt,inputValue:Gt,value:wt,dirty:yt,expanded:Qt&&bt,popupOpen:Qt,focused:$e||Wt!==-1,anchorEl:bt,setAnchorEl:Ht,focusedTag:Wt,groupedOptions:Dt}}const fB=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],mB=["component","slots","slotProps"],gB=["component"];function Kt(e,t){const{className:n,elementType:a,ownerState:c,externalForwardedProps:h,getSlotOwnerState:g,internalForwardedProps:l}=t,b=nr(t,fB),{component:C,slots:P={[e]:void 0},slotProps:A={[e]:void 0}}=h,D=nr(h,mB),W=P[e]||a,Z=Ok(A[e],c),U=Fk(Q({className:n},b,{externalForwardedProps:e==="root"?D:void 0,externalSlotProps:Z})),{props:{component:J},internalRef:O}=U,$=nr(U.props,gB),N=bn(O,Z==null?void 0:Z.ref,t.ref),ie=g?g($):{},te=Q({},c,ie),ee=e==="root"?J||C:J,re=Bk(W,Q({},e==="root"&&!C&&!P[e]&&l,e!=="root"&&!P[e]&&l,$,ee&&{as:ee},{ref:N}),te);return Object.keys(ie).forEach(fe=>{delete re[fe]}),[W,re]}function yB(e){return ln("MuiListItem",e)}const bg=Kr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),vB=V.createContext(!1),wg=vB,_B=V.createContext(!1),Fp=_B,xB=V.createContext(!1),sP=xB,bB=V.createContext(void 0),I1=bB,wB=V.createContext(void 0),lP=wB,SB=V.createContext(void 0),P1=SB,CB=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],kB=e=>{const{sticky:t,nested:n,nesting:a,variant:c,color:h}=e,g={root:["root",n&&"nested",a&&"nesting",t&&"sticky",h&&`color${Ft(h)}`,c&&`variant${Ft(c)}`],startAction:["startAction"],endAction:["endAction"]};return Qr(g,yB,{})},TB=xt("li")(({theme:e,ownerState:t})=>{var n;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},Q({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&Q({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${bg.nested} > &`]:{"--_ListItem-display":"flex"}}),(n=e.variants[t.variant])==null?void 0:n[t.color]]}),IB=xt(TB,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),PB=xt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),EB=xt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),cP=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyListItem"}),c=V.useContext(P1),h=V.useContext(I1),g=V.useContext(Fp),l=V.useContext(sP),b=V.useContext(wg),{component:C,className:P,children:A,nested:D=!1,sticky:W=!1,variant:Z="plain",color:U="neutral",startAction:J,endAction:O,role:$,slots:N={},slotProps:ie={}}=a,te=nr(a,CB),[ee,re]=V.useState(""),[fe,Te]=(h==null?void 0:h.split(":"))||["",""],be=C||(fe&&!fe.match(/^(ul|ol|menu)$/)?"div":void 0);let ze=c==="menu"?"none":void 0;h&&(ze={menu:"none",menubar:"none",group:"presentation"}[Te]),$&&(ze=$);const Ee=Q({},a,{sticky:W,startAction:J,endAction:O,row:g,wrap:l,variant:Z,color:U,nesting:b,nested:D,component:be,role:ze}),Fe=kB(Ee),Ye=Q({},te,{component:be,slots:N,slotProps:ie}),[Ke,Re]=Kt("root",{additionalProps:{role:ze},ref:n,className:Ni(Fe.root,P),elementType:IB,externalForwardedProps:Ye,ownerState:Ee}),[Ue,Ne]=Kt("startAction",{className:Fe.startAction,elementType:PB,externalForwardedProps:Ye,ownerState:Ee}),[Xe,ct]=Kt("endAction",{className:Fe.endAction,elementType:EB,externalForwardedProps:Ye,ownerState:Ee});return de.jsx(lP.Provider,{value:re,children:de.jsx(wg.Provider,{value:D?ee||!0:!1,children:de.jsxs(Ke,Q({},Re,{children:[J&&de.jsx(Ue,Q({},Ne,{children:J})),V.Children.map(A,(ft,it)=>V.isValidElement(ft)?V.cloneElement(ft,Q({},it===0&&{"data-first-child":""},Dk(ft,["ListItem"])&&{component:ft.props.component||"div"})):ft),O&&de.jsx(Xe,Q({},ct,{children:O}))]}))})})});cP.muiName="ListItem";const Iy=cP,E1={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function Py(e){const{children:t,nested:n,row:a=!1,wrap:c=!1}=e,h=de.jsx(Fp.Provider,{value:a,children:de.jsx(sP.Provider,{value:c,children:V.Children.map(t,(g,l)=>V.isValidElement(g)?V.cloneElement(g,Q({},l===0&&{"data-first-child":""},l===V.Children.count(t)-1&&{"data-last-child":""})):g)})});return n===void 0?h:de.jsx(wg.Provider,{value:n,children:h})}const Np=({theme:e,ownerState:t},n)=>{let a={};function c(h){if(typeof h=="function"){const g=h(e);c(g)}else Array.isArray(h)?h.forEach(g=>{typeof g!="boolean"&&c(g)}):typeof h=="object"&&(a=Q({},a,h))}return t.sx&&(c(t.sx),n.forEach(h=>{const g=a[h];if(typeof g=="string"||typeof g=="number")if(h==="borderRadius")if(typeof g=="number")a[h]=`${g}px`;else{var l;a[h]=((l=e.vars)==null?void 0:l.radius[g])||g}else["p","padding","m","margin"].indexOf(h)!==-1&&typeof g=="number"?a[h]=e.spacing(g):a[h]=g;else typeof g=="function"?a[h]=g(e):a[h]=void 0})),a};function zB(e){return ln("MuiList",e)}const AB=Kr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),MB=V.createContext(void 0),DB=MB,RB=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],LB=e=>{const{variant:t,color:n,size:a,nesting:c,orientation:h,instanceSize:g}=e,l={root:["root",h,t&&`variant${Ft(t)}`,n&&`color${Ft(n)}`,!g&&!c&&a&&`size${Ft(a)}`,g&&`size${Ft(g)}`,c&&"nesting"]};return Qr(l,zB,{})},Ey=xt("ul")(({theme:e,ownerState:t})=>{var n;const{p:a,padding:c,borderRadius:h}=Np({theme:e,ownerState:t},["p","padding","borderRadius"]);function g(l){return l==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:l==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:l==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&Q({},g(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&Q({},g(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?Q({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),Q({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(n=e.variants[t.variant])==null?void 0:n[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},h!==void 0&&{"--List-radius":h},a!==void 0&&{"--List-padding":a},c!==void 0&&{"--List-padding":c})]}),$B=xt(Ey,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),BB=V.forwardRef(function(t,n){var a;const c=V.useContext(wg),h=V.useContext(P1),g=V.useContext(DB),l=cn({props:t,name:"JoyList"}),{component:b,className:C,children:P,size:A,orientation:D="vertical",wrap:W=!1,variant:Z="plain",color:U="neutral",role:J,slots:O={},slotProps:$={}}=l,N=nr(l,RB),ie=A||((a=t.size)!=null?a:"md");let te;h&&(te="group"),g&&(te="presentation"),J&&(te=J);const ee=Q({},l,{instanceSize:t.size,size:ie,nesting:c,orientation:D,wrap:W,variant:Z,color:U,role:te}),re=LB(ee),fe=Q({},N,{component:b,slots:O,slotProps:$}),[Te,be]=Kt("root",{ref:n,className:Ni(re.root,C),elementType:$B,externalForwardedProps:fe,ownerState:ee,additionalProps:{as:b,role:te,"aria-labelledby":typeof c=="string"?c:void 0}});return de.jsx(Te,Q({},be,{children:de.jsx(I1.Provider,{value:`${typeof b=="string"?b:""}:${te||""}`,children:de.jsx(Py,{row:D==="horizontal",wrap:W,children:P})})}))}),zy=BB,OB=Kr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),Vm=OB,FB=V.createContext("horizontal"),NB=FB,Ay=xt("div")(({theme:e,ownerState:t})=>{var n,a,c,h,g,l;return Q({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:Q({},e.focus.default,{zIndex:1})},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:active":(a=e.variants[`${t.variant}Active`])==null?void 0:a[t.color],[`.${bg.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${Vm.selected}`]:Q({},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${Vm.selected}, [aria-selected="true"])`]:{"&:hover":(h=e.variants[`${t.variant}Hover`])==null?void 0:h[t.color],"&:active":(g=e.variants[`${t.variant}Active`])==null?void 0:g[t.color]},[`&.${Vm.disabled}`]:Q({},(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])})});xt(Ay,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>Q({},!e.row&&{[`&.${Vm.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function jB(e){return ln("MuiSvgIcon",e)}Kr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const VB=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],UB=e=>{const{color:t,size:n,fontSize:a}=e,c={root:["root",t&&t!=="inherit"&&`color${Ft(t)}`,n&&`size${Ft(n)}`,a&&`fontSize${Ft(a)}`]};return Qr(c,jB,{})},x2={sm:"xl",md:"xl2",lg:"xl3"},HB=xt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;return Q({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[x2[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[x2[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&Q({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / 1)`}))}),b2=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoySvgIcon"}),{children:c,className:h,color:g,component:l="svg",fontSize:b,htmlColor:C,inheritViewBox:P=!1,titleAccess:A,viewBox:D="0 0 24 24",size:W="md",slots:Z={},slotProps:U={}}=a,J=nr(a,VB),O=V.isValidElement(c)&&c.type==="svg",$=Q({},a,{color:g,component:l,size:W,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:P,viewBox:D,hasSvgAsChild:O}),N=UB($),ie=Q({},J,{component:l,slots:Z,slotProps:U}),[te,ee]=Kt("root",{ref:n,className:Ni(N.root,h),elementType:HB,externalForwardedProps:ie,ownerState:$,additionalProps:Q({color:C,focusable:!1},A&&{role:"img"},!A&&{"aria-hidden":!0},!P&&{viewBox:D},O&&c.props)});return de.jsxs(te,Q({},ee,{children:[O?c.props.children:c,A?de.jsx("title",{children:A}):null]}))});function Qu(e,t){function n(a,c){return de.jsx(b2,Q({"data-testid":`${t}Icon`,ref:c},a,{children:e}))}return n.muiName=b2.muiName,V.memo(V.forwardRef(n))}const z1=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,Uu="data-skip-inverted-colors",uP=`& :not([${Uu}], [${Uu}] *)`,dP=e=>{var t,n,a,c,h,g,l,b,C,P,A,D,W,Z,U,J,O,$,N,ie,te,ee;const re=z1(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[re("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[re("--palette-background-body")]:`${(n=e.colorSchemes.light)==null?void 0:n.palette.background.body} !important`,[re("--palette-background-surface")]:`${(a=e.colorSchemes.light)==null?void 0:a.palette.background.surface} !important`,[re("--palette-background-popup")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.popup} !important`,[re("--palette-background-level1")]:`${(h=e.colorSchemes.light)==null?void 0:h.palette.background.level1} !important`,[re("--palette-background-level2")]:`${(g=e.colorSchemes.light)==null?void 0:g.palette.background.level2} !important`,[re("--palette-background-level3")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.level3} !important`,[re("--palette-text-primary")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.text.primary} !important`,[re("--palette-text-secondary")]:`${(C=e.colorSchemes.light)==null?void 0:C.palette.text.secondary} !important`,[re("--palette-text-tertiary")]:`${(P=e.colorSchemes.light)==null?void 0:P.palette.text.tertiary} !important`,[re("--palette-divider")]:`${(A=e.colorSchemes.light)==null?void 0:A.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[re("--palette-focusVisible")]:`${(D=e.colorSchemes.dark)==null?void 0:D.palette.focusVisible} !important`,[re("--palette-background-body")]:`${(W=e.colorSchemes.dark)==null?void 0:W.palette.background.body} !important`,[re("--palette-background-surface")]:`${(Z=e.colorSchemes.dark)==null?void 0:Z.palette.background.surface} !important`,[re("--palette-background-popup")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.background.popup} !important`,[re("--palette-background-level1")]:`${(J=e.colorSchemes.dark)==null?void 0:J.palette.background.level1} !important`,[re("--palette-background-level2")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.background.level2} !important`,[re("--palette-background-level3")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.level3} !important`,[re("--palette-text-primary")]:`${(N=e.colorSchemes.dark)==null?void 0:N.palette.text.primary} !important`,[re("--palette-text-secondary")]:`${(ie=e.colorSchemes.dark)==null?void 0:ie.palette.text.secondary} !important`,[re("--palette-text-tertiary")]:`${(te=e.colorSchemes.dark)==null?void 0:te.palette.text.tertiary} !important`,[re("--palette-divider")]:`${(ee=e.colorSchemes.dark)==null?void 0:ee.palette.divider} !important`}}};function WB(e){return e.theme!==void 0}const hP=e=>t=>{const n=WB(t)?t.theme:t,a=Cx(n.cssVarPrefix),c=z1(n.cssVarPrefix),h=g=>{const l=g.split("-");return a(g,n.palette[l[1]][l[2]])};return{[uP]:{"--Badge-ringColor":h(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${n.getColorSchemeSelector("light")}, ${n.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[c("--palette-focusVisible")]:h(`palette-${e}-200`),[c("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[c("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[c("--palette-background-popup")]:h(`palette-${e}-700`),[c("--palette-background-level1")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.36)`,[c("--palette-background-level3")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.6)`,[c("--palette-text-primary")]:h("palette-common-white"),[c("--palette-text-secondary")]:h(`palette-${e}-200`),[c("--palette-text-tertiary")]:h(`palette-${e}-300`),[c("--palette-text-icon")]:h(`palette-${e}-200`),[c("--palette-divider")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":h(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":h(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${h(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":h(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":h("palette-common-white"),"--variant-softHoverColor":h("palette-common-white"),"--variant-softBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":h(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":h("palette-common-white"),"--variant-solidHoverBg":h("palette-common-white"),"--variant-solidActiveBg":h(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${Uu}]`]:dP(n)}},pP=e=>t=>{const{theme:n=t}=t,a=Cx(n.cssVarPrefix),c=z1(n.cssVarPrefix),h=g=>{const l=g.split("-");return a(g,n.palette[l[1]][l[2]])};return{[uP]:{"--Badge-ringColor":h(`palette-${e}-softBg`),"--Icon-color":"currentColor",[n.getColorSchemeSelector("dark")]:{[c("--palette-focusVisible")]:h(`palette-${e}-300`),[c("--palette-background-body")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,[c("--palette-background-level3")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,[c("--palette-text-primary")]:h(`palette-${e}-100`),[c("--palette-text-secondary")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,[c("--palette-text-tertiary")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-text-icon")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-divider")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${h(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":h(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${h(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":h(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":h(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":h(`palette-${e}-200`),"--variant-softBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":h(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":h(`palette-${e}-600`),"--variant-solidActiveBg":h(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`},[n.getColorSchemeSelector("light")]:{[c("--palette-focusVisible")]:h(`palette-${e}-500`),[c("--palette-background-body")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,[c("--palette-background-level3")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.48)`,[c("--palette-text-primary")]:h(`palette-${e}-700`),[c("--palette-text-secondary")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.8)`,[c("--palette-text-tertiary")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.68)`,[c("--palette-text-icon")]:h(`palette-${e}-500`),[c("--palette-divider")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${h(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${h(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${h(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":h(`palette-${e}-600`),"--variant-outlinedHoverBorder":h(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":h(`palette-${e}-600`),"--variant-softBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":h(`palette-${e}-700`),"--variant-softHoverBg":h(`palette-${e}-200`),"--variant-softActiveBg":h(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":h("palette-common-white"),"--variant-solidBg":h(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":h("palette-common-white"),"--variant-solidHoverBg":h(`palette-${e}-600`),"--variant-solidActiveBg":h(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${Uu}]`]:dP(n)}},fP=Qu(de.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),GB=Qu(de.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),mP=V.createContext(void 0);function Vl(e,t){let n=t,a=e;return e==="outlined"&&(n="neutral",a="plain"),e==="plain"&&(n="neutral"),{variant:a,color:n}}function gP(e,t,n=!1){const a=V.useContext(mP),[c,h]=typeof a=="string"?a.split(":"):[],g=Vl(c||void 0,h||void 0);return g.variant=e||g.variant,g.color=t||(n?h:g.color),g}function A1({children:e,color:t,variant:n}){return de.jsx(mP.Provider,{value:`${n||""}:${t||""}`,children:e})}function qB(e){return ln("MuiIconButton",e)}Kr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const ZB=V.createContext({}),KB=ZB,XB=V.createContext(void 0),JB=XB;function YB(e){return ln("MuiCircularProgress",e)}Kr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let QB=e=>e,w2;const eO=["color","backgroundColor"],tO=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],rO=hk({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),nO=e=>{const{determinate:t,color:n,variant:a,size:c}=e,h={root:["root",t&&"determinate",n&&`color${Ft(n)}`,a&&`variant${Ft(a)}`,c&&`size${Ft(c)}`],svg:["svg"],track:["track"],progress:["progress"]};return Qr(h,YB,{})};function Jc(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const iO=xt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,a,c,h;const g=((n=t.variants[e.variant])==null?void 0:n[e.color])||{},{color:l,backgroundColor:b}=g,C=nr(g,eO);return Q({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":b,"--CircularProgress-progressColor":l,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":Jc("track","3px"),"--_progress-thickness":Jc("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":Jc("track","6px"),"--_progress-thickness":Jc("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":Jc("track","8px"),"--_progress-thickness":Jc("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:l},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},C,e.variant==="outlined"&&{"&::before":Q({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},C)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(a=t.variants.solid)==null?void 0:a[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(c=t.variants.softHover)==null?void 0:c[e.color].backgroundColor,"--CircularProgress-progressColor":(h=t.variants.solid)==null?void 0:h[e.color].backgroundColor})}),oO=xt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),aO=xt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),sO=xt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&sx(w2||(w2=QB`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),rO)),lO=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyCircularProgress"}),{children:c,className:h,color:g="primary",size:l="md",variant:b="soft",thickness:C,determinate:P=!1,value:A=P?0:25,component:D,slots:W={},slotProps:Z={}}=a,U=nr(a,tO),J=Q({},a,{color:g,size:l,variant:b,thickness:C,value:A,determinate:P,instanceSize:t.size}),O=nO(J),$=Q({},U,{component:D,slots:W,slotProps:Z}),[N,ie]=Kt("root",{ref:n,className:Ni(O.root,h),elementType:iO,externalForwardedProps:$,ownerState:J,additionalProps:Q({role:"progressbar",style:{"--CircularProgress-percent":A}},A&&P&&{"aria-valuenow":Math.round(typeof A=="number"?A:Number(A||0))})}),[te,ee]=Kt("svg",{className:O.svg,elementType:oO,externalForwardedProps:$,ownerState:J}),[re,fe]=Kt("track",{className:O.track,elementType:aO,externalForwardedProps:$,ownerState:J}),[Te,be]=Kt("progress",{className:O.progress,elementType:sO,externalForwardedProps:$,ownerState:J});return de.jsxs(N,Q({},ie,{children:[de.jsxs(te,Q({},ee,{children:[de.jsx(re,Q({},fe)),de.jsx(Te,Q({},be))]})),c]}))}),cO=lO,uO=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],dO=e=>{const{color:t,disabled:n,focusVisible:a,focusVisibleClassName:c,size:h,variant:g,loading:l}=e,b={root:["root",n&&"disabled",a&&"focusVisible",g&&`variant${Ft(g)}`,t&&`color${Ft(t)}`,h&&`size${Ft(h)}`,l&&"loading"],loadingIndicator:["loadingIndicator"]},C=Qr(b,qB,{});return a&&c&&(C.root+=` ${c}`),C},jp=xt("button")(({theme:e,ownerState:t})=>{var n,a,c,h;return[Q({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:Q({"--Icon-color":"currentColor"},e.focus.default)}),Q({},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":{"@media (hover: hover)":Q({"--Icon-color":"currentColor"},(a=e.variants[`${t.variant}Hover`])==null?void 0:a[t.color])},'&:active, &[aria-pressed="true"]':Q({"--Icon-color":"currentColor"},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]),"&:disabled":(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]})]}),hO=xt(jp,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),pO=xt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var n,a;return Q({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(n=e.variants[t.variant])==null||(n=n[t.color])==null?void 0:n.color},t.disabled&&{color:(a=e.variants[`${t.variant}Disabled`])==null||(a=a[t.color])==null?void 0:a.color})}),yP=V.forwardRef(function(t,n){var a;const c=cn({props:t,name:"JoyIconButton"}),{children:h,action:g,component:l="button",color:b="neutral",disabled:C,variant:P="plain",loading:A=!1,loadingIndicator:D,size:W="md",slots:Z={},slotProps:U={}}=c,J=nr(c,uO),O=V.useContext(KB),$=V.useContext(JB),N=t.variant||O.variant||P,ie=t.size||O.size||W,te=t.color||O.color||b,ee=(a=t.loading||t.disabled)!=null?a:O.disabled||A||C,re=V.useRef(null),fe=bn(re,n),{focusVisible:Te,setFocusVisible:be,getRootProps:ze}=lc(Q({},c,{disabled:ee,rootRef:fe})),Ee=D??de.jsx(cO,{color:te,thickness:{sm:2,md:3,lg:4}[ie]||3});V.useImperativeHandle(g,()=>({focusVisible:()=>{var it;be(!0),(it=re.current)==null||it.focus()}}),[be]);const Fe=Q({},c,{component:l,color:te,disabled:ee,variant:N,loading:A,size:ie,focusVisible:Te,instanceSize:t.size}),Ye=dO(Fe),Ke=it=>{var Et;let mt=c.onClick;if(typeof U.root=="function"?mt=U.root(Fe).onClick:U.root&&(mt=U.root.onClick),(Et=mt)==null||Et(it),$){var zt;(zt=$.onClick)==null||zt.call($,it,c.value)}};let Re=c["aria-pressed"];typeof U.root=="function"?Re=U.root(Fe)["aria-pressed"]:U.root&&(Re=U.root["aria-pressed"]),$!=null&&$.value&&(Array.isArray($.value)?Re=$.value.indexOf(c.value)!==-1:Re=$.value===c.value);const Ue=Q({},J,{component:l,slots:Z,slotProps:U}),[Ne,Xe]=Kt("root",{ref:n,className:Ye.root,elementType:hO,getSlotProps:ze,externalForwardedProps:Ue,ownerState:Fe,additionalProps:{onClick:Ke,"aria-pressed":Re}}),[ct,ft]=Kt("loadingIndicator",{className:Ye.loadingIndicator,elementType:pO,externalForwardedProps:Ue,ownerState:Fe});return de.jsx(Ne,Q({},Xe,{children:A?de.jsx(ct,Q({},ft,{children:Ee})):h}))});yP.muiName="IconButton";const fO=yP;function mO(e){return ln("MuiChip",e)}const gO=Kr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),M_=gO,yO=V.createContext({disabled:void 0,variant:void 0,color:void 0}),vP=yO,vO=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],_O=e=>{const{disabled:t,size:n,color:a,clickable:c,variant:h,focusVisible:g}=e,l={root:["root",t&&"disabled",a&&`color${Ft(a)}`,n&&`size${Ft(n)}`,h&&`variant${Ft(h)}`,c&&"clickable"],action:["action",t&&"disabled",g&&"focusVisible"],label:["label",n&&`label${Ft(n)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Qr(l,mO,{})},xO=xt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,a,c;const h=(n=e.variants[t.variant])==null?void 0:n[t.color],{borderRadius:g}=Np({theme:e,ownerState:t},["borderRadius"]);return[Q({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${M_.disabled}`]:{color:(a=e.variants[`${t.variant}Disabled`])==null||(a=a[t.color])==null?void 0:a.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:h==null?void 0:h.color}]:[Q({backgroundColor:e.vars.palette.background.surface},h,{[`&.${M_.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color]})],g!==void 0&&{"--_Chip-radius":g}]}),bO=xt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>Q({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),wO=xt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var n,a,c,h;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},Q({backgroundColor:e.vars.palette.background.surface},(n=e.variants[t.variant])==null?void 0:n[t.color]),{"&:hover":{"@media (hover: hover)":(a=e.variants[`${t.variant}Hover`])==null?void 0:a[t.color]}},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${M_.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]}]}),SO=xt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),CO=xt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),kO=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyChip"}),{children:c,className:h,color:g="neutral",onClick:l,disabled:b=!1,size:C="md",variant:P="soft",startDecorator:A,endDecorator:D,component:W,slots:Z={},slotProps:U={}}=a,J=nr(a,vO),O=!!l||!!U.action,$=Q({},a,{disabled:b,size:C,color:g,variant:P,clickable:O,focusVisible:!1}),N=typeof U.action=="function"?U.action($):U.action,ie=V.useRef(null),{focusVisible:te,getRootProps:ee}=lc(Q({},N,{disabled:b,rootRef:ie}));$.focusVisible=te;const re=_O($),fe=Q({},J,{component:W,slots:Z,slotProps:U}),[Te,be]=Kt("root",{ref:n,className:Ni(re.root,h),elementType:xO,externalForwardedProps:fe,ownerState:$}),[ze,Ee]=Kt("label",{className:re.label,elementType:bO,externalForwardedProps:fe,ownerState:$}),Fe=Pa(Ee.id),[Ye,Ke]=Kt("action",{className:re.action,elementType:wO,externalForwardedProps:fe,ownerState:$,getSlotProps:ee,additionalProps:{"aria-labelledby":Fe,as:N==null?void 0:N.component,onClick:l}}),[Re,Ue]=Kt("startDecorator",{className:re.startDecorator,elementType:SO,externalForwardedProps:fe,ownerState:$}),[Ne,Xe]=Kt("endDecorator",{className:re.endDecorator,elementType:CO,externalForwardedProps:fe,ownerState:$}),ct=V.useMemo(()=>({disabled:b}),[b]);return de.jsx(vP.Provider,{value:ct,children:de.jsx(A1,{variant:P,color:g,children:de.jsxs(Te,Q({},be,{children:[O&&de.jsx(Ye,Q({},Ke)),de.jsx(ze,Q({},Ee,{id:Fe,children:c})),A&&de.jsx(Re,Q({},Ue,{children:A})),D&&de.jsx(Ne,Q({},Xe,{children:D}))]}))})})}),TO=kO,IO=Qu(de.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function PO(e){return ln("MuiChipDelete",e)}Kr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var S2;const EO=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],zO=["onDelete"],AO=e=>{const{focusVisible:t,variant:n,color:a,disabled:c}=e,h={root:["root",c&&"disabled",t&&"focusVisible",n&&`variant${Ft(n)}`,a&&`color${Ft(a)}`]};return Qr(h,PO,{})},MO=xt(jp,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),DO=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyChipDelete"}),{children:c,variant:h="plain",color:g="neutral",disabled:l,onKeyDown:b,onDelete:C,onClick:P,component:A,slots:D={},slotProps:W={}}=a,Z=nr(a,EO),U=V.useContext(vP),{variant:J=h,color:O=g}=gP(t.variant,t.color,!0),$=t.color||O,N=l??U.disabled,ie=V.useRef(null),te=bn(ie,n),{focusVisible:ee,getRootProps:re}=lc(Q({},a,{disabled:N,rootRef:te})),fe=Q({},a,{disabled:N,variant:J,color:$,focusVisible:ee}),Te=AO(fe),be=Q({},Z,{component:A,slots:D,slotProps:W}),ze=Re=>{!N&&C&&C(Re),P&&P(Re)},Ee=Re=>{["Backspace","Enter","Delete"].includes(Re.key)&&(Re.preventDefault(),!N&&C&&C(Re)),b&&b(Re)},[Fe,Ye]=Kt("root",{ref:n,elementType:MO,getSlotProps:re,externalForwardedProps:be,ownerState:fe,additionalProps:{as:A,onKeyDown:Ee,onClick:ze},className:Te.root}),Ke=nr(Ye,zO);return de.jsx(Fe,Q({},Ke,{children:c??(S2||(S2=de.jsx(IO,{})))}))}),RO=DO,LO=Kr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),$O=LO,BO=V.createContext(void 0),M1=BO,_P=xt("div")(({theme:e,ownerState:t})=>{var n,a,c,h,g,l;const b=(n=e.variants[`${t.variant}`])==null?void 0:n[t.color];return[Q({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(a=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:a[500],[`&:not([${Uu}])`]:Q({},t.instanceColor&&{"--_Input-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],b,{backgroundColor:(h=b==null?void 0:b.backgroundColor)!=null?h:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":Q({},(g=e.variants[`${t.variant}Hover`])==null?void 0:g[t.color],{backgroundColor:null}),[`&.${$O.disabled}`]:(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),xP=xt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":Q({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),bP=xt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),wP=xt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"});xt(_P,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({});xt(xP,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({});xt(bP,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({});xt(wP,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({});function OO(e){return ln("MuiListSubheader",e)}Kr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const FO=["component","className","children","id","sticky","variant","color","slots","slotProps"],NO=e=>{const{variant:t,color:n,sticky:a}=e,c={root:["root",a&&"sticky",n&&`color${Ft(n)}`,t&&`variant${Ft(t)}`]};return Qr(c,OO,{})},jO=xt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,a;return Q({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${Uu}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(a=e.variants[t.variant])==null?void 0:a[t.color])}),VO=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyListSubheader"}),{component:c,className:h,children:g,id:l,sticky:b=!1,variant:C,color:P,slots:A={},slotProps:D={}}=a,W=nr(a,FO),Z=Pa(l),U=V.useContext(lP);V.useEffect(()=>{U&&U(Z||"")},[U,Z]);const J=Q({instanceColor:t.color},a,{id:Z,sticky:b,variant:C,color:C?P??"neutral":P}),O=NO(J),$=Q({},W,{component:c,slots:A,slotProps:D}),[N,ie]=Kt("root",{ref:n,className:Ni(O.root,h),elementType:jO,externalForwardedProps:$,ownerState:J,additionalProps:{as:c,id:Z}});return de.jsx(N,Q({},ie,{children:g}))}),UO=VO;function HO(e){return ln("MuiAutocomplete",e)}const WO=Kr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),Ys=WO,SP=xt(Ey)(({theme:e,ownerState:t})=>{var n;const a=(n=e.variants[t.variant])==null?void 0:n[t.color];return Q({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(a==null?void 0:a.backgroundColor)||(a==null?void 0:a.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},E1,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(a!=null&&a.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${bg.nested}, & .${bg.nested} .${AB.root}`]:{position:"initial"}})});xt(SP,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});const CP=xt(Ay)(({theme:e,ownerState:t})=>{var n,a;return{'&[aria-disabled="true"]':(n=e.variants[`${t.variant}Disabled`])==null?void 0:n[t.color],'&[aria-selected="true"]':Q({},(a=e.variants[`${t.variant}Active`])==null?void 0:a[t.color],{fontWeight:e.vars.fontWeight.md})}});xt(CP,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({});var C2,k2;const GO=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],qO=["onDelete"],ZO=["onBlur","onFocus","onMouseDown"],KO=e=>e.current!==null&&e.current.contains(document.activeElement),XO=e=>{var t;return(t=e.label)!=null?t:e},JO=e=>`+${e}`,YO=e=>de.jsxs(Iy,{nested:!0,children:[de.jsx(UO,{sticky:!0,children:e.group}),de.jsx(zy,{children:e.children})]},e.key),QO=e=>{const{disabled:t,focused:n,hasClearIcon:a,hasPopupIcon:c,popupOpen:h,variant:g,color:l,size:b,multiple:C}=e,P={root:["root",n&&"focused",a&&"hasClearIcon",c&&"hasPopupIcon",g&&`variant${Ft(g)}`,l&&`color${Ft(l)}`,b&&`size${Ft(b)}`],wrapper:["wrapper",C&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",h&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Qr(P,HO,{})},eF=xt(_P,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>Q({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${Ys.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),tF=xt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${Ys.multiple}`]:Q({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),rF=xt(xP,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>Q({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),nF=xt(bP,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),iF=xt(wP,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>Q({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),oF=xt(jp,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>Q({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),aF=xt(jp,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${Ys.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),sF=xt(SP,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),lF=xt(CP,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),cF=xt(Iy,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),uF=xt(Iy,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),dF=xt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),hF=V.forwardRef(function(t,n){var a,c,h,g,l,b,C;const P=cn({props:t,name:"JoyAutocomplete"}),{"aria-describedby":A,"aria-label":D,"aria-labelledby":W,autoFocus:Z,clearIcon:U=C2||(C2=de.jsx(fP,{fontSize:"md"})),clearText:J="Clear",closeText:O="Close",disableClearable:$=!1,disabled:N,endDecorator:ie,error:te=!1,forcePopupIcon:ee="auto",freeSolo:re=!1,getLimitTagsText:fe=JO,getOptionLabel:Te=XO,groupBy:be,id:ze,limitTags:Ee=-1,loading:Fe=!1,loadingText:Ye="Loading",multiple:Ke=!1,name:Re,noOptionsText:Ue="No options",openText:Ne="Open",placeholder:Xe,popupIcon:ct=k2||(k2=de.jsx(GB,{})),readOnly:ft=!1,renderGroup:it=YO,renderOption:Et,renderTags:mt,required:zt,type:tr,startDecorator:nt,size:We="md",color:st="neutral",variant:bt="outlined",component:Ht,slots:Wt={},slotProps:Er={}}=P,Tr=nr(P,GO),$t=V.useContext(M1),wt=(a=(c=t.error)!=null?c:$t==null?void 0:$t.error)!=null?a:te,or=(h=(g=t.size)!=null?g:$t==null?void 0:$t.size)!=null?h:We,Gt=(l=t.color)!=null?l:wt?"danger":(b=$t==null?void 0:$t.color)!=null?b:st,Cr=(C=N??($t==null?void 0:$t.disabled))!=null?C:!1,{getRootProps:$e,getInputProps:pr,getPopupIndicatorProps:sr,getClearProps:Yt,getTagProps:Vt,getListboxProps:kr,getOptionProps:Lr,value:cr,dirty:Qt,popupOpen:Nt,focused:mr,focusedTag:Hr,anchorEl:Pe,setAnchorEl:ot,inputValue:St,groupedOptions:ir}=pB(Q({},P,{id:ze??($t==null?void 0:$t.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:KO})),{onMouseDown:un}=pr(),{onClick:Ze}=$e(),Zt=!$&&!Cr&&Qt&&!ft,Mt=(!re||ee===!0)&&ee!==!1,ur=Q({instanceColor:t.color},P,{value:cr,disabled:Cr,focused:mr,getOptionLabel:Te,hasOptions:!!ir.length,hasClearIcon:Zt,hasPopupIcon:Mt,inputFocused:Hr===-1,popupOpen:Nt,size:or,color:Gt,variant:bt}),xr=QO(ur),At=Q({},Tr,{component:Ht,slots:Wt,slotProps:Er});let Se;if(Ke&&cr.length>0){const ar=Or=>{const $r=Vt(Or),{onDelete:za}=$r,$n=nr($r,qO);return Q({disabled:Cr,size:or,onClick:za},$n)};mt?Se=mt(cr,ar,ur):Se=cr.map((Or,$r)=>de.jsx(TO,{size:or,variant:"soft",color:"neutral",endDecorator:de.jsx(RO,Q({},ar({index:$r}))),sx:{minWidth:0},children:Te(Or)},$r))}const H=bn(n,ot),M={[Ys.disabled]:Cr,[Ys.error]:wt,[Ys.focused]:mr,[Ys.formControl]:!!$t},[F,q]=Kt("root",{ref:H,className:[xr.root,M],elementType:eF,externalForwardedProps:At,ownerState:ur,getSlotProps:$e,additionalProps:{onClick:ar=>{Ze&&Ze(ar),ar.currentTarget===ar.target&&un&&un(ar)}}}),[ne,oe]=Kt("wrapper",{className:xr.wrapper,elementType:tF,externalForwardedProps:At,ownerState:ur}),ve={[Ys.disabled]:Cr},[he,ue]=Kt("input",{className:[xr.input,ve],elementType:rF,getSlotProps:ar=>{const Or=pr(),{onBlur:$r,onFocus:za,onMouseDown:$n}=Or,Bn=nr(Or,ZO);return Q({},Bn,{onBlur:Ui=>{var fi;$r==null||$r(Ui),(fi=ar.onBlur)==null||fi.call(ar,Ui)},onFocus:Ui=>{var fi;za==null||za(Ui),(fi=ar.onFocus)==null||fi.call(ar,Ui)},onMouseDown:Ui=>{var fi;$n==null||$n(Ui),(fi=ar.onMouseDown)==null||fi.call(ar,Ui)}})},externalForwardedProps:At,ownerState:ur,additionalProps:{autoFocus:Z,placeholder:Xe,name:Re,readOnly:ft,disabled:Cr,required:zt??($t==null?void 0:$t.required),type:tr,"aria-invalid":wt||void 0,"aria-label":D,"aria-labelledby":W,"aria-describedby":A??($t==null?void 0:$t["aria-describedby"])}}),[_e,Ae]=Kt("startDecorator",{className:xr.startDecorator,elementType:nF,externalForwardedProps:At,ownerState:ur}),[Oe,He]=Kt("endDecorator",{className:xr.endDecorator,elementType:iF,externalForwardedProps:At,ownerState:ur}),[Ct,Tt]=Kt("clearIndicator",{className:xr.clearIndicator,elementType:oF,getSlotProps:Yt,externalForwardedProps:At,ownerState:ur,getSlotOwnerState:ar=>({size:ar.size||or,variant:ar.variant||Vl(bt,Gt).variant||"plain",color:ar.color||Vl(bt,Gt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":J,title:J}}),[yt,Dt]=Kt("popupIndicator",{className:xr.popupIndicator,elementType:aF,getSlotProps:sr,externalForwardedProps:At,ownerState:ur,getSlotOwnerState:ar=>({size:ar.size||or,variant:ar.variant||Vl(bt,Gt).variant||"plain",color:ar.color||Vl(bt,Gt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Cr,"aria-label":Nt?O:Ne,title:Nt?O:Ne,type:"button"}}),[Me,De]=Kt("listbox",{className:xr.listbox,elementType:sF,getSlotProps:kr,externalForwardedProps:At,ownerState:ur,getSlotOwnerState:ar=>({size:ar.size||or,variant:ar.variant||bt,color:ar.color||Gt,disableColorInversion:!ar.disablePortal}),additionalProps:{anchorEl:Pe,open:Nt,style:Pe?{width:Pe.clientWidth}:{}}}),[tt,dt]=Kt("loading",{className:xr.loading,elementType:cF,externalForwardedProps:At,ownerState:ur}),[kt,dr]=Kt("noOptions",{className:xr.noOptions,elementType:uF,externalForwardedProps:At,ownerState:ur,additionalProps:{role:"presentation",onMouseDown:ar=>{ar.preventDefault()}}}),[er,br]=Kt("limitTag",{className:xr.limitTag,elementType:dF,externalForwardedProps:At,ownerState:ur});if(Ee>-1&&Array.isArray(Se)){const ar=Se.length-Ee;!mr&&ar>0&&(Se=Se.splice(0,Ee),Se.push(de.jsx(er,Q({},br,{children:fe(ar)}),Se.length)))}const[rr,hr]=Kt("option",{className:xr.option,elementType:lF,externalForwardedProps:At,ownerState:ur,getSlotOwnerState:ar=>({variant:ar.variant||Vl(bt,Gt).variant||"plain",color:ar.color||Vl(bt,Gt).color||"neutral",disableColorInversion:!De.disablePortal}),additionalProps:{as:"li"}}),Vi=Et||((ar,Or)=>de.jsx(rr,Q({},ar,{children:Te(Or)}))),xo=(ar,Or)=>{const $r=Lr({option:ar,index:Or});return Vi(Q({},hr,$r),ar,{selected:!!$r["aria-selected"],inputValue:St,ownerState:ur})},rd=V.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...De.modifiers||[]],[De.modifiers]);let zr=null;if(Pe){var Ps;zr=de.jsx(A1,{variant:bt,color:Gt,children:de.jsx(Py,{nested:!0,children:de.jsxs(Me,Q({},De,{className:Ni(De.className),modifiers:rd},!((Ps=P.slots)!=null&&Ps.listbox)&&{as:T1,slots:{root:De.as||"ul"}},{children:[ir.map((ar,Or)=>{if(be){const $r=ar;return it({key:String($r.key),group:$r.group,children:$r.options.map((za,$n)=>xo(za,$r.index+$n))})}return xo(ar,Or)}),Fe&&ir.length===0?de.jsx(tt,Q({},dt,{children:Ye})):null,ir.length===0&&!re&&!Fe?de.jsx(kt,Q({},dr,{children:Ue})):null]}))})})}return de.jsxs(V.Fragment,{children:[de.jsxs(F,Q({},q,{children:[nt&&de.jsx(_e,Q({},Ae,{children:nt})),de.jsxs(ne,Q({},oe,{children:[Se,de.jsx(he,Q({},ue))]})),ie&&de.jsx(Oe,Q({},He,{children:ie})),Zt?de.jsx(Ct,Q({},Tt,{children:U})):null,Mt?de.jsx(yt,Q({},Dt,{children:ct})):null]})),zr]})}),D_=hF;function pF(e){return ln("MuiTypography",e)}Kr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const fF=["color","textColor"],mF=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],R_=V.createContext(!1),gF=V.createContext(!1),yF=e=>{const{gutterBottom:t,noWrap:n,level:a,color:c,variant:h}=e,g={root:["root",a,t&&"gutterBottom",n&&"noWrap",c&&`color${Ft(c)}`,h&&`variant${Ft(h)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Qr(g,pF,{})},vF=xt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),_F=xt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),xF=xt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,a,c,h,g;const l=t.level!=="inherit"?(n=e.typography[t.level])==null?void 0:n.lineHeight:"1";return Q({"--Icon-fontSize":`calc(1em * ${l})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:Q({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&Q({display:"flex",alignItems:"center"},t.nesting&&Q({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(a=(c=e.typography[t.level])==null?void 0:c.fontSize)!=null?a:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(h=e.vars.palette[t.color])==null?void 0:h.mainChannel} / 1))`},t.variant&&Q({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(g=e.variants[t.variant])==null?void 0:g[t.color]))}),T2={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},D1=V.forwardRef(function(t,n){var a;const c=cn({props:t,name:"JoyTypography"}),{color:h,textColor:g}=c,l=nr(c,fF),b=V.useContext(R_),C=V.useContext(gF),P=mx(Q({},l,{color:g})),{component:A,gutterBottom:D=!1,noWrap:W=!1,level:Z="body-md",levelMapping:U=T2,children:J,endDecorator:O,startDecorator:$,variant:N,slots:ie={},slotProps:te={}}=P,ee=nr(P,mF),re=(a=t.color)!=null?a:N?h??"neutral":h,fe=b||C?t.level||"inherit":Z,Te=Dk(J,["Skeleton"]),be=A||(b?"span":U[fe]||T2[fe]||"span"),ze=Q({},P,{level:fe,component:be,color:re,gutterBottom:D,noWrap:W,nesting:b,variant:N,unstable_hasSkeleton:Te}),Ee=yF(ze),Fe=Q({},ee,{component:be,slots:ie,slotProps:te}),[Ye,Ke]=Kt("root",{ref:n,className:Ee.root,elementType:xF,externalForwardedProps:Fe,ownerState:ze}),[Re,Ue]=Kt("startDecorator",{className:Ee.startDecorator,elementType:vF,externalForwardedProps:Fe,ownerState:ze}),[Ne,Xe]=Kt("endDecorator",{className:Ee.endDecorator,elementType:_F,externalForwardedProps:Fe,ownerState:ze});return de.jsx(R_.Provider,{value:!0,children:de.jsxs(Ye,Q({},Ke,{children:[$&&de.jsx(Re,Q({},Ue,{children:$})),Te?V.cloneElement(J,{variant:J.props.variant||"inline"}):J,O&&de.jsx(Ne,Q({},Xe,{children:O}))]}))})});D1.muiName="Typography";const kP=Kr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function bF(e){return ln("MuiDivider",e)}Kr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const TP=xt("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${kP.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));xt(TP,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const wF=Kr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]),SF=wF;function CF(e){return ln("MuiCheckbox",e)}const kF=Kr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),Yl=kF,TF=Qu(de.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),IF=Qu(de.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),PF=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],EF=e=>{const{checked:t,disabled:n,disableIcon:a,focusVisible:c,color:h,variant:g,size:l,indeterminate:b}=e,C={root:["root",t&&"checked",n&&"disabled",c&&"focusVisible",g&&`variant${Ft(g)}`,h&&`color${Ft(h)}`,l&&`size${Ft(l)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",n&&"disabled"],action:["action",t&&"checked",a&&n&&"disabled",c&&"focusVisible"],input:["input"],label:["label"]};return Qr(C,CF,{})},zF=xt("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,a,c;return Q({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${Yl.disabled}`]:{color:(n=t.variants.plainDisabled)==null||(n=n[e.color])==null?void 0:n.color}},e.disableIcon&&{color:(a=t.variants[e.variant])==null||(a=a[e.color])==null?void 0:a.color,[`&.${Yl.disabled}`]:{color:(c=t.variants[`${e.variant}Disabled`])==null||(c=c[e.color])==null?void 0:c.color}})}),AF=xt("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var n,a,c,h,g;const l=(n=e.variants[`${t.variant}`])==null?void 0:n[t.color];return[Q({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${Yl.checked}, &.${Yl.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[Q({},l,{backgroundColor:(a=l==null?void 0:l.backgroundColor)!=null?a:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(c=e.variants[`${t.variant}Hover`])==null?void 0:c[t.color]}},{"&:active":(h=e.variants[`${t.variant}Active`])==null?void 0:h[t.color]},{[`&.${Yl.disabled}`]:(g=e.variants[`${t.variant}Disabled`])==null?void 0:g[t.color]}]]}),MF=xt("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var n,a,c,h;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":(a=e.variants[`${t.variant}Hover`])==null?void 0:a[t.color]},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${Yl.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]}]:[]]}),DF=xt("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),RF=xt("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>Q({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),LF=de.jsx(TF,{}),$F=de.jsx(IF,{}),BF=V.forwardRef(function(t,n){var a,c,h,g,l;const b=cn({props:t,name:"JoyCheckbox"}),{checked:C,uncheckedIcon:P,checkedIcon:A=LF,label:D,defaultChecked:W,disabled:Z,disableIcon:U=!1,overlay:J,id:O,indeterminate:$=!1,indeterminateIcon:N=$F,name:ie,onBlur:te,onChange:ee,onFocus:re,onFocusVisible:fe,readOnly:Te,required:be,value:ze,color:Ee,variant:Fe,size:Ye="md",component:Ke,slots:Re={},slotProps:Ue={}}=b,Ne=nr(b,PF),Xe=V.useContext(M1),ct=(a=(c=t.disabled)!=null?c:Xe==null?void 0:Xe.disabled)!=null?a:Z,ft=(h=(g=t.size)!=null?g:Xe==null?void 0:Xe.size)!=null?h:Ye,it=Pa(O??(Xe==null?void 0:Xe.htmlFor)),Et={checked:C,defaultChecked:W,disabled:ct,onBlur:te,onChange:ee,onFocus:re,onFocusVisible:fe},{getInputProps:mt,checked:zt,disabled:tr,focusVisible:nt}=tB(Et),We=zt||$,Ht=We?Fe||"solid":Fe||"outlined",Wt=t.color||(Xe!=null&&Xe.error?"danger":(l=Xe==null?void 0:Xe.color)!=null?l:Ee),$t=Q({},b,{checked:zt,disabled:tr,disableIcon:U,overlay:J,focusVisible:nt,color:We?Wt||"primary":Wt||"neutral",variant:Ht,size:ft}),wt=EF($t),or=Q({},Ne,{component:Ke,slots:Re,slotProps:Ue}),[Gt,Cr]=Kt("root",{ref:n,className:wt.root,elementType:zF,externalForwardedProps:or,ownerState:$t}),[$e,pr]=Kt("checkbox",{className:wt.checkbox,elementType:AF,externalForwardedProps:or,ownerState:$t}),[sr,Yt]=Kt("action",{className:wt.action,elementType:MF,externalForwardedProps:or,ownerState:$t}),[Vt,kr]=Kt("input",{additionalProps:Q({id:it,name:ie,value:ze,readOnly:Te,role:void 0,required:be??(Xe==null?void 0:Xe.required),"aria-describedby":Xe==null?void 0:Xe["aria-describedby"]},$&&{"aria-checked":"mixed"}),className:wt.input,elementType:DF,externalForwardedProps:or,getSlotProps:mt,ownerState:$t}),[Lr,cr]=Kt("label",{additionalProps:{htmlFor:it},className:wt.label,elementType:RF,externalForwardedProps:or,ownerState:$t});let Qt=P;return U?Qt=null:$?Qt=N:zt&&(Qt=A),de.jsxs(Gt,Q({},Cr,{children:[de.jsxs($e,Q({},pr,{children:[de.jsx(sr,Q({},Yt,{children:de.jsx(Vt,Q({},kr))})),Qt]})),D&&de.jsx(R_.Provider,{value:!0,children:de.jsx(Lr,Q({},cr,{children:D}))})]}))}),Sg=BF;function OF(e){const{children:t,disableColorScheme:n=!1}=e;return de.jsxs(V.Fragment,{children:[de.jsx(RL,{styles:a=>{var c,h;const g={};n||Object.entries(a.colorSchemes).forEach(([b,C])=>{var P;g[a.getColorSchemeSelector(b).replace(/\s*&/,"")]={colorScheme:(P=C.palette)==null?void 0:P.mode}});const l=(c=(h=a.components)==null||(h=h.JoyTypography)==null||(h=h.defaultProps)==null?void 0:h.level)!=null?c:"body-md";return Q({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:a.vars.fontWeight.lg},body:Q({margin:0,color:a.vars.palette.text.primary,fontFamily:a.vars.fontFamily.body},a.typography[l],{backgroundColor:a.vars.palette.background.body,"@media print":{backgroundColor:a.vars.palette.common.white},"&::backdrop":{backgroundColor:a.vars.palette.background.backdrop}})},g)},defaultTheme:Ap}),t]})}function FF(e){return ln("MuiDialogContent",e)}Kr("MuiDialogContent",["root"]);const NF=V.createContext(void 0),My=NF;function jF(e){return ln("MuiDialogTitle",e)}const VF=Kr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),IP=VF,UF=["component","children","orientation","slots","slotProps"],HF=()=>Qr({root:["root"]},FF,{}),WF=xt(TP,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${SF.root} > .${IP.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),GF=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyDialogContent"}),c=V.useContext(My),{component:h="div",children:g,orientation:l="vertical",slots:b={},slotProps:C={}}=a,P=nr(a,UF),A=Q({},P,{component:h,slots:b,slotProps:C}),D=Q({},a,{component:h,orientation:l}),W=HF(),[Z,U]=Kt("root",{ref:n,className:W.root,elementType:WF,externalForwardedProps:A,ownerState:D,additionalProps:{id:c==null?void 0:c.describedBy}});return de.jsx(Z,Q({},U,{children:g}))}),qF=GF,ZF=V.createContext(void 0),R1=ZF,KF=["component","children","variant","color","level","slots","slotProps"],XF=e=>{const{level:t,color:n,variant:a}=e,c={root:["root",t,n&&`color${Ft(n)}`,a&&`variant${Ft(a)}`]};return Qr(c,jF,{})},JF=xt("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,a;const c=t.level!=="inherit"?(n=e.typography[t.level])==null?void 0:n.lineHeight:"1";return Q({"--Icon-fontSize":`calc(1em * ${c})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&Q({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(a=e.variants[t.variant])==null?void 0:a[t.color]),{[`.${kP.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),YF={sm:"title-md",md:"title-lg",lg:"h4"},QF=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyDialogTitle"}),c=V.useContext(R1),h=V.useContext(My),{component:g="h2",children:l,variant:b,color:C,level:P=YF[c||"md"],slots:A={},slotProps:D={}}=a,W=nr(a,KF),Z=t.color||(b?C??"neutral":C),U=Q({},W,{component:g,slots:A,slotProps:D}),J=Q({},a,{component:g,color:Z,variant:b,level:P}),O=XF(J),[$,N]=Kt("root",{ref:n,className:O.root,elementType:JF,externalForwardedProps:U,ownerState:J,additionalProps:{id:h==null?void 0:h.labelledBy}});return de.jsx($,Q({},N,{children:l}))}),e6=QF,t6=["className","children","component","inset","orientation","role","slots","slotProps"],r6=e=>{const{orientation:t,inset:n}=e,a={root:["root",t,n&&`inset${Ft(n)}`]};return Qr(a,bF,{})},PP=xt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>Q({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?Q({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),EP=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyDivider"}),{className:c,children:h,component:g=h!=null?"div":"hr",inset:l,orientation:b="horizontal",role:C=g!=="hr"?"separator":void 0,slots:P={},slotProps:A={}}=a,D=nr(a,t6),W=Q({},a,{inset:l,role:C,orientation:b,component:g}),Z=r6(W),U=Q({},D,{component:g,slots:P,slotProps:A}),[J,O]=Kt("root",{ref:n,className:Ni(Z.root,c),elementType:PP,externalForwardedProps:U,ownerState:W,additionalProps:Q({as:g,role:C},C==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return de.jsx(J,Q({},O,{children:h}))});EP.muiName="Divider";const n6=EP,i6=V.createContext(void 0),zP=i6,AP=xt("div")(({ownerState:e,theme:t})=>Q({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));xt(AP,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const MP=xt("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));xt(MP,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function o6(e){return ln("MuiDrawer",e)}Kr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const a6=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],s6=e=>{const{open:t,variant:n,color:a,size:c}=e,h={root:["root",!t&&"hidden",n&&`variant${Ft(n)}`,a&&`color${Ft(a)}`,c&&`size${Ft(c)}`],backdrop:["backdrop"],content:["content"]};return Qr(h,o6,{})},l6=xt(AP,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>Q({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),c6=xt(MP,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),u6=xt("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var n;return Q({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&hP(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&pP(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color],{[`& > .${IP.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),d6=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyDrawer"}),{children:c,anchor:h="left",container:g,disableAutoFocus:l=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:C=!1,disablePortal:P=!1,disableRestoreFocus:A=!1,disableScrollLock:D=!1,hideBackdrop:W=!1,color:Z="neutral",variant:U="plain",invertedColors:J=!1,size:O="md",onClose:$,open:N,component:ie,slots:te={},slotProps:ee={}}=a,re=nr(a,a6),fe=Q({},a,{anchor:h,disableAutoFocus:l,disableEnforceFocus:b,disableEscapeKeyDown:C,disablePortal:P,disableRestoreFocus:A,disableScrollLock:D,hideBackdrop:W,invertedColors:J,color:Z,variant:U,size:O}),{getRootProps:Te,getBackdropProps:be,rootRef:ze,portalRef:Ee,isTopModal:Fe}=D3(Q({},fe,{rootRef:n,children:null})),Ye=s6(fe),Ke=Q({},re,{component:ie,slots:te,slotProps:ee}),Re=Pa(),Ue=Pa(),Ne=V.useMemo(()=>({variant:U,color:Z,labelledBy:Re,describedBy:Ue}),[Z,U,Re,Ue]),[Xe,ct]=Kt("root",{ref:ze,className:Ye.root,elementType:l6,externalForwardedProps:Ke,getSlotProps:Te,ownerState:fe}),[ft,it]=Kt("backdrop",{className:Ye.backdrop,elementType:c6,externalForwardedProps:Ke,getSlotProps:be,ownerState:fe}),[Et,mt]=Kt("content",{className:Ye.content,elementType:u6,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Re,"aria-describedby":Ue},externalForwardedProps:Ke,ownerState:fe});return de.jsx(zP.Provider,{value:$,children:de.jsx(R1.Provider,{value:O,children:de.jsx(My.Provider,{value:Ne,children:de.jsx(qI,{ref:Ee,container:g,disablePortal:P,children:de.jsxs(Xe,Q({},ct,{children:[W?null:de.jsx(ft,Q({},it)),de.jsx(e5,{disableEnforceFocus:b,disableAutoFocus:l,disableRestoreFocus:A,isEnabled:Fe,open:N,children:de.jsx(Et,Q({},mt,{children:c}))})]}))})})})})}),h6=d6;function p6(e){return ln("MuiListDivider",e)}Kr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const f6=["component","role","className","children","inset","orientation","slots","slotProps"],m6=e=>{const{orientation:t,inset:n}=e,a={root:["root",t,n&&n!=="context"&&`inset${Ft(n)}`]};return Qr(a,p6,{})},g6=xt(PP,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>Q({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&Q({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&Q({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),y6=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyListDivider"}),c=V.useContext(Fp),h=V.useContext(I1),{component:g,role:l,className:b,children:C,inset:P="context",orientation:A,slots:D={},slotProps:W={}}=a,Z=nr(a,f6),[U]=(h==null?void 0:h.split(":"))||["",""],J=g||(U&&!U.match(/^(ul|ol|menu)$/)?"div":"li"),O=l||(J==="li"?"separator":void 0),$=A||(c?"vertical":"horizontal"),N=Q({},a,{inset:P,row:c,orientation:$,component:J,role:O}),ie=m6(N),te=Q({},Z,{component:J,slots:D,slotProps:W}),[ee,re]=Kt("root",{ref:n,className:Ni(ie.root,b),elementType:g6,externalForwardedProps:te,ownerState:N,additionalProps:Q({as:J,role:O},O==="separator"&&$==="vertical"&&{"aria-orientation":"vertical"})});return de.jsx(ee,Q({},re,{children:C}))}),DP=y6;function v6(e){return ln("MuiModalClose",e)}Kr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var I2;const _6=["component","color","variant","size","onClick","slots","slotProps"],x6=e=>{const{variant:t,color:n,disabled:a,focusVisible:c,size:h}=e,g={root:["root",a&&"disabled",c&&"focusVisible",t&&`variant${Ft(t)}`,n&&`color${Ft(n)}`,h&&`size${Ft(h)}`]};return Qr(g,v6,{})},b6=xt(jp,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n;return Q({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((n=t.variants[e.variant])!=null&&(n=n[e.color])!=null&&n.backgroundColor)&&{color:t.vars.palette.text.secondary})}),w6={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},S6=V.forwardRef(function(t,n){var a,c,h,g,l,b;const C=cn({props:t,name:"JoyModalClose"}),{component:P="button",color:A="neutral",variant:D="plain",size:W="md",onClick:Z,slots:U={},slotProps:J={}}=C,O=nr(C,_6),$=V.useContext(zP),N=V.useContext(My),ie=(a=(c=t.variant)!=null?c:w6[N==null?void 0:N.variant])!=null?a:D,te=(h=(g=t.color)!=null?g:N==null?void 0:N.color)!=null?h:A,ee=V.useContext(R1),re=(l=(b=t.size)!=null?b:ee)!=null?l:W,{focusVisible:fe,getRootProps:Te}=lc(Q({},C,{rootRef:n})),be=Q({},C,{color:te,component:P,variant:ie,size:re,focusVisible:fe}),ze=x6(be),[Ee,Fe]=Kt("root",{ref:n,elementType:b6,getSlotProps:Te,externalForwardedProps:Q({onClick:Ye=>{$==null||$(Ye,"closeClick"),Z==null||Z(Ye)}},O,{component:P,slots:U,slotProps:J}),className:ze.root,ownerState:be});return de.jsx(Ee,Q({},Fe,{children:I2||(I2=de.jsx(fP,{}))}))}),C6=S6;function k6(e){return ln("MuiOption",e)}const T6=Kr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),I6=T6,P6=["component","children","disabled","value","label","variant","color","slots","slotProps"],E6=e=>{const{disabled:t,highlighted:n,selected:a}=e;return Qr({root:["root",t&&"disabled",n&&"highlighted",a&&"selected"]},k6,{})},z6=xt(Ay,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;const a=(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color];return{[`&.${I6.highlighted}:not([aria-selected="true"])`]:{backgroundColor:a==null?void 0:a.backgroundColor}}}),A6=V.memo(V.forwardRef(function(t,n){var a;const c=cn({props:t,name:"JoyOption"}),{component:h="li",children:g,disabled:l=!1,value:b,label:C,variant:P="plain",color:A="neutral",slots:D={},slotProps:W={}}=c,Z=nr(c,P6),U=V.useContext(Fp),{variant:J=P,color:O=A}=gP(t.variant,t.color),$=V.useRef(null),N=bn($,n),ie=C??(typeof g=="string"?g:(a=$.current)==null?void 0:a.innerText),{getRootProps:te,selected:ee,highlighted:re,index:fe}=R3({disabled:l,label:ie,value:b,rootRef:N}),Te=Q({},c,{disabled:l,selected:ee,highlighted:re,index:fe,component:h,variant:J,color:O,row:U}),be=E6(Te),ze=Q({},Z,{component:h,slots:D,slotProps:W}),[Ee,Fe]=Kt("root",{ref:n,getSlotProps:te,elementType:z6,externalForwardedProps:ze,className:be.root,ownerState:Te});return de.jsx(Ee,Q({},Fe,{children:g}))})),M6=V.forwardRef(function(t,n){const{contextValue:a}=L3(t.value);return de.jsx(Mp.Provider,{value:a,children:de.jsx(A6,Q({},t,{ref:n}))})}),D6=M6,R6=Qu(de.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function L6(e){return ln("MuiSelect",e)}const Eu=Kr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var P2;const $6=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function B6(e){var t;return Array.isArray(e)?de.jsx(V.Fragment,{children:e.map(n=>n.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const O6=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],F6=e=>{const{color:t,disabled:n,focusVisible:a,size:c,variant:h,open:g,multiple:l}=e,b={root:["root",n&&"disabled",a&&"focusVisible",g&&"expanded",h&&`variant${Ft(h)}`,t&&`color${Ft(t)}`,c&&`size${Ft(c)}`,l&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",g&&"expanded"],listbox:["listbox",g&&"expanded",n&&"disabled"]};return Qr(b,L6,{})},N6=xt("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,a,c,h,g;const l=(n=e.variants[`${t.variant}`])==null?void 0:n[t.color],{borderRadius:b}=Np({theme:e,ownerState:t},["borderRadius"]);return[Q({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(a=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:a[500],'&:not([data-inverted-colors="false"])':Q({},t.instanceColor&&{"--_Select-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":l!=null&&l.backgroundColor?l==null?void 0:l.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(l!=null&&l.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],l,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${Eu.focusVisible}`]:{"--Select-indicatorColor":l==null?void 0:l.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${Eu.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(h=e.variants[`${t.variant}Hover`])==null?void 0:h[t.color],[`&.${Eu.disabled}`]:(g=e.variants[`${t.variant}Disabled`])==null?void 0:g[t.color]},b!==void 0&&{"--Select-radius":b}]}),j6=xt("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>Q({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),V6=xt(Ey,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var n;const a=(n=e.variants[t.variant])==null?void 0:n[t.color];return Q({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(a==null?void 0:a.backgroundColor)||(a==null?void 0:a.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},E1,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(a!=null&&a.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),U6=xt("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),H6=xt("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),W6=xt("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>Q({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${Eu.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${Eu.expanded}, .${Eu.disabled} > &`]:{"--Icon-color":"currentColor"}})),G6=V.forwardRef(function(t,n){var a,c,h,g,l,b,C;const P=cn({props:t,name:"JoySelect"}),A=P,{action:D,autoFocus:W,children:Z,defaultValue:U,defaultListboxOpen:J=!1,disabled:O,getSerializedValue:$,placeholder:N,listboxId:ie,listboxOpen:te,onChange:ee,onListboxOpenChange:re,onClose:fe,renderValue:Te,required:be=!1,value:ze,size:Ee="md",variant:Fe="outlined",color:Ye="neutral",startDecorator:Ke,endDecorator:Re,indicator:Ue=P2||(P2=de.jsx(R6,{})),"aria-describedby":Ne,"aria-label":Xe,"aria-labelledby":ct,id:ft,name:it,multiple:Et=!1,slots:mt={},slotProps:zt={}}=A,tr=nr(A,$6),nt=V.useContext(M1),We=(a=(c=t.disabled)!=null?c:nt==null?void 0:nt.disabled)!=null?a:O,st=(h=(g=t.size)!=null?g:nt==null?void 0:nt.size)!=null?h:Ee,bt=(l=t.color)!=null?l:nt!=null&&nt.error?"danger":(b=nt==null?void 0:nt.color)!=null?b:Ye,Ht=Te??B6,[Wt,Er]=V.useState(null),Tr=V.useRef(null),$t=V.useRef(null),wt=bn(n,Tr);V.useImperativeHandle(D,()=>({focusVisible:()=>{var F;(F=$t.current)==null||F.focus()}}),[]),V.useEffect(()=>{Er(Tr.current)},[]),V.useEffect(()=>{W&&$t.current.focus()},[W]);const or=V.useCallback(F=>{re==null||re(F),F||fe==null||fe()},[fe,re]),{buttonActive:Gt,buttonFocusVisible:Cr,contextValue:$e,disabled:pr,getButtonProps:sr,getListboxProps:Yt,getHiddenInputProps:Vt,getOptionMetadata:kr,open:Lr,value:cr}=Q4({buttonRef:$t,defaultOpen:J,defaultValue:U,disabled:We,getSerializedValue:$,listboxId:ie,multiple:Et,name:it,required:be,onChange:ee,onOpenChange:or,open:te,value:ze}),Qt=Q({},P,{active:Gt,defaultListboxOpen:J,disabled:pr,focusVisible:Cr,open:Lr,renderValue:Ht,value:cr,size:st,variant:Fe,color:bt}),Nt=F6(Qt),mr=Q({},tr,{slots:mt,slotProps:zt}),Hr=V.useMemo(()=>{let F;if(Et)F=cr.map(ne=>kr(ne)).filter(ne=>ne!==void 0);else{var q;F=(q=kr(cr))!=null?q:null}return F},[kr,cr,Et]),[Pe,ot]=Kt("root",{ref:wt,className:Nt.root,elementType:N6,externalForwardedProps:mr,ownerState:Qt}),[St,ir]=Kt("button",{additionalProps:{"aria-describedby":Ne??(nt==null?void 0:nt["aria-describedby"]),"aria-label":Xe,"aria-labelledby":ct??(nt==null?void 0:nt.labelId),"aria-required":be?"true":void 0,id:ft??(nt==null?void 0:nt.htmlFor),name:it},className:Nt.button,elementType:j6,externalForwardedProps:mr,getSlotProps:sr,ownerState:Qt}),[un,Ze]=Kt("listbox",{additionalProps:{anchorEl:Wt,open:Lr,placement:"bottom",keepMounted:!0},className:Nt.listbox,elementType:V6,externalForwardedProps:mr,getSlotProps:Yt,ownerState:Q({},Qt,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:F=>({size:F.size||st,variant:F.variant||Fe,color:F.color||(F.disablePortal?bt:Ye),disableColorInversion:!F.disablePortal})}),[Zt,Mt]=Kt("startDecorator",{className:Nt.startDecorator,elementType:U6,externalForwardedProps:mr,ownerState:Qt}),[ur,xr]=Kt("endDecorator",{className:Nt.endDecorator,elementType:H6,externalForwardedProps:mr,ownerState:Qt}),[At,Se]=Kt("indicator",{className:Nt.indicator,elementType:W6,externalForwardedProps:mr,ownerState:Qt}),H=V.useMemo(()=>[...O6,...Ze.modifiers||[]],[Ze.modifiers]);let M=N;return(Array.isArray(Hr)&&Hr.length>0||!Array.isArray(Hr)&&Hr)&&(M=Ht(Hr)),de.jsxs(V.Fragment,{children:[de.jsxs(Pe,Q({},ot,{children:[Ke&&de.jsx(Zt,Q({},Mt,{children:Ke})),de.jsx(St,Q({},ir,{children:M})),Re&&de.jsx(ur,Q({},xr,{children:Re})),Ue&&de.jsx(At,Q({},Se,{children:Ue})),de.jsx("input",Q({},Vt()))]})),Wt&&de.jsx(un,Q({},Ze,{className:Ni(Ze.className),modifiers:H},!((C=P.slots)!=null&&C.listbox)&&{as:T1,slots:{root:Ze.as||"ul"}},{children:de.jsx(eB,{value:$e,children:de.jsx(A1,{variant:Fe,color:Ye,children:de.jsx(P1.Provider,{value:"select",children:de.jsx(Py,{nested:!0,children:Z})})})})}))]})}),q6=G6;function Z6(e){return ln("MuiSheet",e)}Kr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const K6=["className","color","component","variant","invertedColors","slots","slotProps"],X6=e=>{const{variant:t,color:n}=e,a={root:["root",t&&`variant${Ft(t)}`,n&&`color${Ft(n)}`]};return Qr(a,Z6,{})},J6=xt("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,a;const c=(n=e.variants[t.variant])==null?void 0:n[t.color],{borderRadius:h,bgcolor:g,backgroundColor:l,background:b}=Np({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),C=dl(e,`palette.${g}`)||g||dl(e,`palette.${l}`)||l||b||(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||e.vars.palette.background.surface;return[Q({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":C==="transparent"?"initial":C,"--Sheet-background":C==="transparent"?"initial":C},h!==void 0&&{"--List-radius":`calc(${h} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${h} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),Q({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&hP(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&pP(t.color)(e),(a=e.variants[t.variant])==null?void 0:a[t.color],c)]}),Y6=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoySheet"}),{className:c,color:h="neutral",component:g="div",variant:l="plain",invertedColors:b=!1,slots:C={},slotProps:P={}}=a,A=nr(a,K6),D=Q({},a,{color:h,component:g,invertedColors:b,variant:l}),W=X6(D),Z=Q({},A,{component:g,slots:C,slotProps:P}),[U,J]=Kt("root",{ref:n,className:Ni(W.root,c),elementType:J6,externalForwardedProps:Z,ownerState:D});return de.jsx(U,Q({},J))}),Q6=Y6,eN=SL({createStyledComponent:xt("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>cn({props:e,name:"JoyStack"})}),RP=eN;function tN(e){return ln("MuiTab",e)}const rN=Kr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),nN=rN,iN=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],oN=e=>{const{selected:t,disabled:n,focusVisible:a,variant:c,color:h,orientation:g}=e,l={root:["root",g,n&&"disabled",a&&"focusVisible",t&&"selected",c&&`variant${Ft(c)}`,h&&`color${Ft(h)}`]};return Qr(l,tN,{})},aN=xt(Ay,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),sN=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyTab"}),c=V.useContext(Fp),{action:h,children:g,disabled:l=!1,component:b="button",orientation:C="horizontal",variant:P="plain",color:A="neutral",disableIndicator:D=!1,indicatorPlacement:W=c?"bottom":"right",indicatorInset:Z=!1,slots:U={},slotProps:J={}}=a,O=nr(a,iN),$=V.useRef(),N=bn($,n),{active:ie,focusVisible:te,setFocusVisible:ee,selected:re,getRootProps:fe}=uB(Q({},a,{rootRef:N}));V.useImperativeHandle(h,()=>({focusVisible:()=>{ee(!0),$.current.focus()}}),[ee]);const Te=Q({},a,{disableIndicator:D,indicatorPlacement:W,indicatorInset:Z,orientation:C,row:c,active:ie,focusVisible:te,disabled:l,selected:re,variant:P,color:A}),be=oN(Te),ze=Q({},O,{component:b,slots:U,slotProps:J}),[Ee,Fe]=Kt("root",{ref:n,elementType:aN,getSlotProps:fe,externalForwardedProps:ze,ownerState:Te,className:be.root});return de.jsx(NB.Provider,{value:C,children:de.jsx(Ee,Q({},Fe,{children:g}))})}),E2=sN,lN=V.createContext("md"),L1=lN;function cN(e){return ln("MuiTabList",e)}Kr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const uN=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],dN=e=>{const{orientation:t,size:n,variant:a,color:c}=e,h={root:["root",t,a&&`variant${Ft(a)}`,c&&`color${Ft(c)}`,n&&`size${Ft(n)}`]};return Qr(h,cN,{})},hN=xt(Ey,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;const a=(n=e.variants[t.variant])==null?void 0:n[t.color];return Q({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},E1,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(a==null?void 0:a.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&Q({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${nN.root}`]:{flex:t.tabFlex}})}),pN=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyTabList"}),c=V.useContext(L1),{isRtl:h,orientation:g,getRootProps:l,contextValue:b}=sB({rootRef:n}),{component:C="div",children:P,variant:A="plain",color:D="neutral",size:W,disableUnderline:Z=!1,underlinePlacement:U=g==="horizontal"?"bottom":"right",tabFlex:J,sticky:O,slots:$={},slotProps:N={}}=a,ie=nr(a,uN),ee=Q({},a,{isRtl:h,orientation:g,variant:A,color:D,size:W??c,sticky:O,tabFlex:J,nesting:!1,disableUnderline:Z,underlinePlacement:U}),re=dN(ee),fe=Q({},ie,{component:C,slots:$,slotProps:N}),[Te,be]=Kt("root",{ref:n,elementType:hN,getSlotProps:l,externalForwardedProps:fe,ownerState:ee,className:re.root});return de.jsx(Te,Q({},be,{children:de.jsx(lB,{value:b,children:de.jsx(Py,{row:g==="horizontal",nested:!0,children:P})})}))}),fN=pN;function mN(e){return ln("MuiTabPanel",e)}Kr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const gN=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],yN=e=>{const{hidden:t,size:n,variant:a,color:c,orientation:h}=e,g={root:["root",t&&"hidden",n&&`size${Ft(n)}`,h,a&&`variant${Ft(a)}`,c&&`color${Ft(c)}`,n&&`size${Ft(n)}`]};return Qr(g,mN,{})},vN=xt("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;return Q({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(n=e.variants[t.variant])==null?void 0:n[t.color])}),_N=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyTabPanel"}),{orientation:c}=Ty()||{orientation:"horizontal"},h=V.useContext(L1),{children:g,value:l=0,component:b,color:C="neutral",variant:P="plain",size:A,slots:D={},slotProps:W={},keepMounted:Z=!1}=a,U=nr(a,gN),{hidden:J,getRootProps:O}=oB(Q({},a,{value:l})),N=Q({},a,{orientation:c,hidden:J,size:A??h,color:C,variant:P}),ie=yN(N),te=Q({},U,{component:b,slots:D,slotProps:W}),[ee,re]=Kt("root",{ref:n,elementType:vN,getSlotProps:O,externalForwardedProps:te,additionalProps:{role:"tabpanel",ref:n,as:b},ownerState:N,className:ie.root});return Z?de.jsx(ee,Q({},re,{children:g})):de.jsx(ee,Q({},re,{children:!J&&g}))}),z2=_N;function xN(e){return ln("MuiTabs",e)}Kr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const bN=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],wN=e=>{const{orientation:t,variant:n,color:a,size:c}=e,h={root:["root",t,n&&`variant${Ft(n)}`,a&&`color${Ft(a)}`,c&&`size${Ft(c)}`]};return Qr(h,xN,{})},SN=xt("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,a;const c=(n=t.variants[e.variant])==null?void 0:n[e.color],{bgcolor:h,backgroundColor:g,background:l,p:b,padding:C}=Np({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),P=dl(t,`palette.${h}`)||h||dl(t,`palette.${g}`)||g||l||(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||t.vars.palette.background.surface;return Q({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":P==="transparent"?"initial":P,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(a=t.variants[e.variant])==null?void 0:a[e.color],b!==void 0&&{"--Tabs-padding":b},C!==void 0&&{"--Tabs-padding":C})}),CN=V.forwardRef(function(t,n){const a=cn({props:t,name:"JoyTabs"}),{children:c,value:h,defaultValue:g,orientation:l="horizontal",direction:b="ltr",component:C,variant:P="plain",color:A="neutral",size:D="md",slots:W={},slotProps:Z={}}=a,U=nr(a,bN),J=g||(h===void 0?0:void 0),{contextValue:O}=rB(Q({},a,{orientation:l,defaultValue:J})),$=Q({},a,{orientation:l,direction:b,variant:P,color:A,size:D}),N=wN($),ie=Q({},U,{component:C,slots:W,slotProps:Z}),[te,ee]=Kt("root",{ref:n,elementType:SN,externalForwardedProps:ie,additionalProps:{ref:n,as:C},ownerState:$,className:N.root});return de.jsx(te,Q({},ee,{children:de.jsx(nB,{value:O,children:de.jsx(L1.Provider,{value:D,children:c})})}))}),A2=CN;function kN(e){return ln("MuiTooltip",e)}Kr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const TN=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],IN=e=>{const{arrow:t,variant:n,color:a,size:c,placement:h,touch:g}=e,l={root:["root",t&&"tooltipArrow",g&&"touch",c&&`size${Ft(c)}`,a&&`color${Ft(a)}`,n&&`variant${Ft(n)}`,`tooltipPlacement${Ft(h.split("-")[0])}`],arrow:["arrow"]};return Qr(l,kN,{})},PN=xt("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,a,c;const h=(n=t.variants[e.variant])==null?void 0:n[e.color];return Q({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],h,!h.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(a=e.placement)!=null&&a.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(c=e.placement)!=null&&c.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),EN=xt("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var n,a,c;const h=(n=e.variants[t.variant])==null?void 0:n[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(a=h==null?void 0:h.backgroundColor)!=null?a:e.vars.palette.background.surface,borderRightColor:(c=h==null?void 0:h.backgroundColor)!=null?c:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${h.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let Sm=!1;const M2=new zp;let _h={x:0,y:0};function D2(e,t){return n=>{t&&t(n),e(n)}}function R2(e,t){return(n,...a)=>{t&&t(n,...a),e(n,...a)}}const zN=V.forwardRef(function(t,n){var a;const c=cn({props:t,name:"JoyTooltip"}),{children:h,className:g,component:l,arrow:b=!1,describeChild:C=!1,disableFocusListener:P=!1,disableHoverListener:A=!1,disableInteractive:D=!1,disableTouchListener:W=!1,enterDelay:Z=100,enterNextDelay:U=0,enterTouchDelay:J=700,followCursor:O=!1,id:$,leaveDelay:N=0,leaveTouchDelay:ie=1500,onClose:te,onOpen:ee,open:re,disablePortal:fe,direction:Te,keepMounted:be,modifiers:ze,placement:Ee="bottom",title:Fe,color:Ye="neutral",variant:Ke="solid",size:Re="md",slots:Ue={},slotProps:Ne={}}=c,Xe=nr(c,TN),[ct,ft]=V.useState(),[it,Et]=V.useState(null),mt=V.useRef(!1),zt=D||O,tr=im(),nt=im(),We=im(),st=im(),[bt,Ht]=wu({controlled:re,default:!1,name:"Tooltip",state:"open"});let Wt=bt;const Er=Pa($),Tr=V.useRef(),$t=Qs(()=>{Tr.current!==void 0&&(document.body.style.WebkitUserSelect=Tr.current,Tr.current=void 0),st.clear()});V.useEffect(()=>$t,[$t]);const wt=q=>{M2.clear(),Sm=!0,Ht(!0),ee&&!Wt&&ee(q)},or=Qs(q=>{M2.start(800+N,()=>{Sm=!1}),Ht(!1),te&&Wt&&te(q),tr.start(150,()=>{mt.current=!1})}),Gt=q=>{mt.current&&q.type!=="touchstart"||(ct&&ct.removeAttribute("title"),nt.clear(),We.clear(),Z||Sm&&U?nt.start(Sm?U:Z,()=>{wt(q)}):wt(q))},Cr=q=>{nt.clear(),We.start(N,()=>{or(q)})},{isFocusVisibleRef:$e,onBlur:pr,onFocus:sr,ref:Yt}=xx(),[,Vt]=V.useState(!1),kr=q=>{pr(q),$e.current===!1&&(Vt(!1),Cr(q))},Lr=q=>{ct||ft(q.currentTarget),sr(q),$e.current===!0&&(Vt(!0),Gt(q))},cr=q=>{mt.current=!0;const ne=h.props;ne.onTouchStart&&ne.onTouchStart(q)},Qt=q=>{cr(q),We.clear(),tr.clear(),$t(),Tr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",st.start(J,()=>{document.body.style.WebkitUserSelect=Tr.current,Gt(q)})},Nt=q=>{h.props.onTouchEnd&&h.props.onTouchEnd(q),$t(),We.start(ie,()=>{or(q)})};V.useEffect(()=>{if(!Wt)return;function q(ne){(ne.key==="Escape"||ne.key==="Esc")&&or(ne)}return document.addEventListener("keydown",q),()=>{document.removeEventListener("keydown",q)}},[or,Wt]);const mr=bn(ft,n),Hr=bn(Yt,mr),Pe=bn(h.ref,Hr);typeof Fe!="number"&&!Fe&&(Wt=!1);const ot=V.useRef(null),St=q=>{const ne=h.props;ne.onMouseMove&&ne.onMouseMove(q),_h={x:q.clientX,y:q.clientY},ot.current&&ot.current.update()},ir={},un=typeof Fe=="string";C?(ir.title=!Wt&&un&&!A?Fe:null,ir["aria-describedby"]=Wt?Er:null):(ir["aria-label"]=un?Fe:null,ir["aria-labelledby"]=Wt&&!un?Er:null);const Ze=Q({},ir,Xe,{component:l},h.props,{className:Ni(g,h.props.className),onTouchStart:cr,ref:Pe},O?{onMouseMove:St}:{}),Zt={};W||(Ze.onTouchStart=Qt,Ze.onTouchEnd=Nt),A||(Ze.onMouseOver=D2(Gt,Ze.onMouseOver),Ze.onMouseLeave=D2(Cr,Ze.onMouseLeave),zt||(Zt.onMouseOver=Gt,Zt.onMouseLeave=Cr)),P||(Ze.onFocus=R2(Lr,Ze.onFocus),Ze.onBlur=R2(kr,Ze.onBlur),zt||(Zt.onFocus=Lr,Zt.onBlur=kr));const Mt=Q({},c,{arrow:b,disableInteractive:zt,placement:Ee,touch:mt.current,color:Ye,variant:Ke,size:Re}),ur=IN(Mt),xr=Q({},Xe,{component:l,slots:Ue,slotProps:Ne}),At=V.useMemo(()=>[{name:"arrow",enabled:!!it,options:{element:it,padding:6}},{name:"offset",options:{offset:[0,10]}},...ze||[]],[it,ze]),[Se,H]=Kt("root",{additionalProps:Q({id:Er,popperRef:ot,placement:Ee,anchorEl:O?{getBoundingClientRect:()=>({top:_h.y,left:_h.x,right:_h.x,bottom:_h.y,width:0,height:0})}:ct,open:ct?Wt:!1,disablePortal:fe,keepMounted:be,direction:Te,modifiers:At},Zt),ref:null,className:ur.root,elementType:PN,externalForwardedProps:xr,ownerState:Mt}),[M,F]=Kt("arrow",{ref:Et,className:ur.arrow,elementType:EN,externalForwardedProps:xr,ownerState:Mt});return de.jsxs(V.Fragment,{children:[V.isValidElement(h)&&V.cloneElement(h,Ze),de.jsxs(Se,Q({},H,!((a=c.slots)!=null&&a.root)&&{as:T1,slots:{root:l||"div"}},{children:[Fe,b?de.jsx(M,Q({},F)):null]}))]})}),LP=zN;var $P,L2=Yu;$P=L2.createRoot,L2.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ln.apply(this,arguments)}var Gn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Gn||(Gn={}));const $2="popstate";function AN(e){e===void 0&&(e={});function t(a,c){let{pathname:h,search:g,hash:l}=a.location;return xp("",{pathname:h,search:g,hash:l},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(a,c){return typeof c=="string"?c:Vp(c)}return DN(t,n,null,e)}function Ir(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function MN(){return Math.random().toString(36).substr(2,8)}function B2(e,t){return{usr:e.state,key:e.key,idx:t}}function xp(e,t,n,a){return n===void 0&&(n=null),Ln({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Is(t):t,{state:n,key:t&&t.key||a||MN()})}function Vp(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Is(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function DN(e,t,n,a){a===void 0&&(a={});let{window:c=document.defaultView,v5Compat:h=!1}=a,g=c.history,l=Gn.Pop,b=null,C=P();C==null&&(C=0,g.replaceState(Ln({},g.state,{idx:C}),""));function P(){return(g.state||{idx:null}).idx}function A(){l=Gn.Pop;let J=P(),O=J==null?null:J-C;C=J,b&&b({action:l,location:U.location,delta:O})}function D(J,O){l=Gn.Push;let $=xp(U.location,J,O);n&&n($,J),C=P()+1;let N=B2($,C),ie=U.createHref($);try{g.pushState(N,"",ie)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;c.location.assign(ie)}h&&b&&b({action:l,location:U.location,delta:1})}function W(J,O){l=Gn.Replace;let $=xp(U.location,J,O);n&&n($,J),C=P();let N=B2($,C),ie=U.createHref($);g.replaceState(N,"",ie),h&&b&&b({action:l,location:U.location,delta:0})}function Z(J){let O=c.location.origin!=="null"?c.location.origin:c.location.href,$=typeof J=="string"?J:Vp(J);return $=$.replace(/ $/,"%20"),Ir(O,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,O)}let U={get action(){return l},get location(){return e(c,g)},listen(J){if(b)throw new Error("A history only accepts one active listener");return c.addEventListener($2,A),b=J,()=>{c.removeEventListener($2,A),b=null}},createHref(J){return t(c,J)},createURL:Z,encodeLocation(J){let O=Z(J);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:D,replace:W,go(J){return g.go(J)}};return U}var Dn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dn||(Dn={}));const RN=new Set(["lazy","caseSensitive","path","id","index","children"]);function LN(e){return e.index===!0}function L_(e,t,n,a){return n===void 0&&(n=[]),a===void 0&&(a={}),e.map((c,h)=>{let g=[...n,h],l=typeof c.id=="string"?c.id:g.join("-");if(Ir(c.index!==!0||!c.children,"Cannot specify children on an index route"),Ir(!a[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),LN(c)){let b=Ln({},c,t(c),{id:l});return a[l]=b,b}else{let b=Ln({},c,t(c),{id:l,children:void 0});return a[l]=b,c.children&&(b.children=L_(c.children,t,g,a)),b}})}function yu(e,t,n){n===void 0&&(n="/");let a=typeof t=="string"?Is(t):t,c=Up(a.pathname||"/",n);if(c==null)return null;let h=BP(e);BN(h);let g=null;for(let l=0;g==null&&l<h.length;++l){let b=KN(c);g=GN(h[l],b)}return g}function $N(e,t){let{route:n,pathname:a,params:c}=e;return{id:n.id,pathname:a,params:c,data:t[n.id],handle:n.handle}}function BP(e,t,n,a){t===void 0&&(t=[]),n===void 0&&(n=[]),a===void 0&&(a="");let c=(h,g,l)=>{let b={relativePath:l===void 0?h.path||"":l,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};b.relativePath.startsWith("/")&&(Ir(b.relativePath.startsWith(a),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(a.length));let C=Ql([a,b.relativePath]),P=n.concat(b);h.children&&h.children.length>0&&(Ir(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+C+'".')),BP(h.children,t,P,C)),!(h.path==null&&!h.index)&&t.push({path:C,score:HN(C,h.index),routesMeta:P})};return e.forEach((h,g)=>{var l;if(h.path===""||!((l=h.path)!=null&&l.includes("?")))c(h,g);else for(let b of OP(h.path))c(h,g,b)}),t}function OP(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,c=n.endsWith("?"),h=n.replace(/\?$/,"");if(a.length===0)return c?[h,""]:[h];let g=OP(a.join("/")),l=[];return l.push(...g.map(b=>b===""?h:[h,b].join("/"))),c&&l.push(...g),l.map(b=>e.startsWith("/")&&b===""?"/":b)}function BN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WN(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const ON=/^:[\w-]+$/,FN=3,NN=2,jN=1,VN=10,UN=-2,O2=e=>e==="*";function HN(e,t){let n=e.split("/"),a=n.length;return n.some(O2)&&(a+=UN),t&&(a+=NN),n.filter(c=>!O2(c)).reduce((c,h)=>c+(ON.test(h)?FN:h===""?jN:VN),a)}function WN(e,t){return e.length===t.length&&e.slice(0,-1).every((a,c)=>a===t[c])?e[e.length-1]-t[t.length-1]:0}function GN(e,t){let{routesMeta:n}=e,a={},c="/",h=[];for(let g=0;g<n.length;++g){let l=n[g],b=g===n.length-1,C=c==="/"?t:t.slice(c.length)||"/",P=qN({path:l.relativePath,caseSensitive:l.caseSensitive,end:b},C);if(!P)return null;Object.assign(a,P.params);let A=l.route;h.push({params:a,pathname:Ql([c,P.pathname]),pathnameBase:ej(Ql([c,P.pathnameBase])),route:A}),P.pathnameBase!=="/"&&(c=Ql([c,P.pathnameBase]))}return h}function qN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=ZN(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let h=c[0],g=h.replace(/(.)\/+$/,"$1"),l=c.slice(1);return{params:a.reduce((C,P,A)=>{let{paramName:D,isOptional:W}=P;if(D==="*"){let U=l[A]||"";g=h.slice(0,h.length-U.length).replace(/(.)\/+$/,"$1")}const Z=l[A];return W&&!Z?C[D]=void 0:C[D]=(Z||"").replace(/%2F/g,"/"),C},{}),pathname:h,pathnameBase:g,pattern:e}}function ZN(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Hu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,l,b)=>(a.push({paramName:l,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),a]}function KN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Up(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function XN(e,t){t===void 0&&(t="/");let{pathname:n,search:a="",hash:c=""}=typeof e=="string"?Is(e):e;return{pathname:n?n.startsWith("/")?n:JN(n,t):t,search:tj(a),hash:rj(c)}}function JN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function x0(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function YN(e,t){let n=FP(e);return t?n.map((a,c)=>c===e.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function QN(e,t,n,a){a===void 0&&(a=!1);let c;typeof e=="string"?c=Is(e):(c=Ln({},e),Ir(!c.pathname||!c.pathname.includes("?"),x0("?","pathname","search",c)),Ir(!c.pathname||!c.pathname.includes("#"),x0("#","pathname","hash",c)),Ir(!c.search||!c.search.includes("#"),x0("#","search","hash",c)));let h=e===""||c.pathname==="",g=h?"/":c.pathname,l;if(g==null)l=n;else{let A=t.length-1;if(!a&&g.startsWith("..")){let D=g.split("/");for(;D[0]==="..";)D.shift(),A-=1;c.pathname=D.join("/")}l=A>=0?t[A]:"/"}let b=XN(c,l),C=g&&g!=="/"&&g.endsWith("/"),P=(h||g===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(C||P)&&(b.pathname+="/"),b}const Ql=e=>e.join("/").replace(/\/\/+/g,"/"),ej=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class $1{constructor(t,n,a,c){c===void 0&&(c=!1),this.status=t,this.statusText=n||"",this.internal=c,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}}function NP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jP=["post","put","patch","delete"],nj=new Set(jP),ij=["get",...jP],oj=new Set(ij),aj=new Set([301,302,303,307,308]),sj=new Set([307,308]),b0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lj={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},VP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cj=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),UP="remix-router-transitions";function uj(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",a=!n;Ir(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let c;if(e.mapRouteProperties)c=e.mapRouteProperties;else if(e.detectErrorBoundary){let Se=e.detectErrorBoundary;c=H=>({hasErrorBoundary:Se(H)})}else c=cj;let h={},g=L_(e.routes,c,void 0,h),l,b=e.basename||"/",C=Ln({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),P=null,A=new Set,D=null,W=null,Z=null,U=e.hydrationData!=null,J=yu(g,e.history.location,b),O=null;if(J==null){let Se=Go(404,{pathname:e.history.location.pathname}),{matches:H,route:M}=G2(g);J=H,O={[M.id]:Se}}let $,N=J.some(Se=>Se.route.lazy),ie=J.some(Se=>Se.route.loader);if(N)$=!1;else if(!ie)$=!0;else if(C.v7_partialHydration){let Se=e.hydrationData?e.hydrationData.loaderData:null,H=e.hydrationData?e.hydrationData.errors:null,M=F=>F.route.loader?F.route.loader.hydrate===!0?!1:Se&&Se[F.route.id]!==void 0||H&&H[F.route.id]!==void 0:!0;if(H){let F=J.findIndex(q=>H[q.route.id]!==void 0);$=J.slice(0,F+1).every(M)}else $=J.every(M)}else $=e.hydrationData!=null;let te,ee={historyAction:e.history.action,location:e.history.location,matches:J,initialized:$,navigation:b0,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||O,fetchers:new Map,blockers:new Map},re=Gn.Pop,fe=!1,Te,be=!1,ze=new Map,Ee=null,Fe=!1,Ye=!1,Ke=[],Re=[],Ue=new Map,Ne=0,Xe=-1,ct=new Map,ft=new Set,it=new Map,Et=new Map,mt=new Set,zt=new Map,tr=new Map,nt=!1;function We(){if(P=e.history.listen(Se=>{let{action:H,location:M,delta:F}=Se;if(nt){nt=!1;return}Hu(tr.size===0||F!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let q=un({currentLocation:ee.location,nextLocation:M,historyAction:H});if(q&&F!=null){nt=!0,e.history.go(F*-1),ir(q,{state:"blocked",location:M,proceed(){ir(q,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),e.history.go(F)},reset(){let ne=new Map(ee.blockers);ne.set(q,xh),Ht({blockers:ne})}});return}return $t(H,M)}),n){bj(t,ze);let Se=()=>wj(t,ze);t.addEventListener("pagehide",Se),Ee=()=>t.removeEventListener("pagehide",Se)}return ee.initialized||$t(Gn.Pop,ee.location,{initialHydration:!0}),te}function st(){P&&P(),Ee&&Ee(),A.clear(),Te&&Te.abort(),ee.fetchers.forEach((Se,H)=>cr(H)),ee.blockers.forEach((Se,H)=>St(H))}function bt(Se){return A.add(Se),()=>A.delete(Se)}function Ht(Se,H){H===void 0&&(H={}),ee=Ln({},ee,Se);let M=[],F=[];C.v7_fetcherPersist&&ee.fetchers.forEach((q,ne)=>{q.state==="idle"&&(mt.has(ne)?F.push(ne):M.push(ne))}),[...A].forEach(q=>q(ee,{deletedFetchers:F,unstable_viewTransitionOpts:H.viewTransitionOpts,unstable_flushSync:H.flushSync===!0})),C.v7_fetcherPersist&&(M.forEach(q=>ee.fetchers.delete(q)),F.forEach(q=>cr(q)))}function Wt(Se,H,M){var F,q;let{flushSync:ne}=M===void 0?{}:M,oe=ee.actionData!=null&&ee.navigation.formMethod!=null&&wa(ee.navigation.formMethod)&&ee.navigation.state==="loading"&&((F=Se.state)==null?void 0:F._isRedirect)!==!0,ve;H.actionData?Object.keys(H.actionData).length>0?ve=H.actionData:ve=null:oe?ve=ee.actionData:ve=null;let he=H.loaderData?W2(ee.loaderData,H.loaderData,H.matches||[],H.errors):ee.loaderData,ue=ee.blockers;ue.size>0&&(ue=new Map(ue),ue.forEach((Oe,He)=>ue.set(He,xh)));let _e=fe===!0||ee.navigation.formMethod!=null&&wa(ee.navigation.formMethod)&&((q=Se.state)==null?void 0:q._isRedirect)!==!0;l&&(g=l,l=void 0),Fe||re===Gn.Pop||(re===Gn.Push?e.history.push(Se,Se.state):re===Gn.Replace&&e.history.replace(Se,Se.state));let Ae;if(re===Gn.Pop){let Oe=ze.get(ee.location.pathname);Oe&&Oe.has(Se.pathname)?Ae={currentLocation:ee.location,nextLocation:Se}:ze.has(Se.pathname)&&(Ae={currentLocation:Se,nextLocation:ee.location})}else if(be){let Oe=ze.get(ee.location.pathname);Oe?Oe.add(Se.pathname):(Oe=new Set([Se.pathname]),ze.set(ee.location.pathname,Oe)),Ae={currentLocation:ee.location,nextLocation:Se}}Ht(Ln({},H,{actionData:ve,loaderData:he,historyAction:re,location:Se,initialized:!0,navigation:b0,revalidation:"idle",restoreScrollPosition:xr(Se,H.matches||ee.matches),preventScrollReset:_e,blockers:ue}),{viewTransitionOpts:Ae,flushSync:ne===!0}),re=Gn.Pop,fe=!1,be=!1,Fe=!1,Ye=!1,Ke=[],Re=[]}async function Er(Se,H){if(typeof Se=="number"){e.history.go(Se);return}let M=$_(ee.location,ee.matches,b,C.v7_prependBasename,Se,C.v7_relativeSplatPath,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:F,submission:q,error:ne}=F2(C.v7_normalizeFormMethod,!1,M,H),oe=ee.location,ve=xp(ee.location,F,H&&H.state);ve=Ln({},ve,e.history.encodeLocation(ve));let he=H&&H.replace!=null?H.replace:void 0,ue=Gn.Push;he===!0?ue=Gn.Replace:he===!1||q!=null&&wa(q.formMethod)&&q.formAction===ee.location.pathname+ee.location.search&&(ue=Gn.Replace);let _e=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Ae=(H&&H.unstable_flushSync)===!0,Oe=un({currentLocation:oe,nextLocation:ve,historyAction:ue});if(Oe){ir(Oe,{state:"blocked",location:ve,proceed(){ir(Oe,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),Er(Se,H)},reset(){let He=new Map(ee.blockers);He.set(Oe,xh),Ht({blockers:He})}});return}return await $t(ue,ve,{submission:q,pendingError:ne,preventScrollReset:_e,replace:H&&H.replace,enableViewTransition:H&&H.unstable_viewTransition,flushSync:Ae})}function Tr(){if(Yt(),Ht({revalidation:"loading"}),ee.navigation.state!=="submitting"){if(ee.navigation.state==="idle"){$t(ee.historyAction,ee.location,{startUninterruptedRevalidation:!0});return}$t(re||ee.historyAction,ee.navigation.location,{overrideNavigation:ee.navigation})}}async function $t(Se,H,M){Te&&Te.abort(),Te=null,re=Se,Fe=(M&&M.startUninterruptedRevalidation)===!0,ur(ee.location,ee.matches),fe=(M&&M.preventScrollReset)===!0,be=(M&&M.enableViewTransition)===!0;let F=l||g,q=M&&M.overrideNavigation,ne=yu(F,H,b),oe=(M&&M.flushSync)===!0;if(!ne){let He=Go(404,{pathname:H.pathname}),{matches:Ct,route:Tt}=G2(F);Ze(),Wt(H,{matches:Ct,loaderData:{},errors:{[Tt.id]:He}},{flushSync:oe});return}if(ee.initialized&&!Ye&&mj(ee.location,H)&&!(M&&M.submission&&wa(M.submission.formMethod))){Wt(H,{matches:ne},{flushSync:oe});return}Te=new AbortController;let ve=wh(e.history,H,Te.signal,M&&M.submission),he,ue;if(M&&M.pendingError)ue={[Zh(ne).route.id]:M.pendingError};else if(M&&M.submission&&wa(M.submission.formMethod)){let He=await wt(ve,H,M.submission,ne,{replace:M.replace,flushSync:oe});if(He.shortCircuited)return;he=He.pendingActionData,ue=He.pendingActionError,q=w0(H,M.submission),oe=!1,ve=new Request(ve.url,{signal:ve.signal})}let{shortCircuited:_e,loaderData:Ae,errors:Oe}=await or(ve,H,ne,q,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,oe,he,ue);_e||(Te=null,Wt(H,Ln({matches:ne},he?{actionData:he}:{},{loaderData:Ae,errors:Oe})))}async function wt(Se,H,M,F,q){q===void 0&&(q={}),Yt();let ne=_j(H,M);Ht({navigation:ne},{flushSync:q.flushSync===!0});let oe,ve=O_(F,H);if(!ve.route.action&&!ve.route.lazy)oe={type:Dn.error,error:Go(405,{method:Se.method,pathname:H.pathname,routeId:ve.route.id})};else if(oe=await bh("action",Se,ve,F,h,c,b,C.v7_relativeSplatPath),Se.signal.aborted)return{shortCircuited:!0};if(Zl(oe)){let he;return q&&q.replace!=null?he=q.replace:he=oe.location===ee.location.pathname+ee.location.search,await pr(ee,oe,{submission:M,replace:he}),{shortCircuited:!0}}if(vu(oe)){let he=Zh(F,ve.route.id);return(q&&q.replace)!==!0&&(re=Gn.Push),{pendingActionData:{},pendingActionError:{[he.route.id]:oe.error}}}if(ql(oe))throw Go(400,{type:"defer-action"});return{pendingActionData:{[ve.route.id]:oe.data}}}async function or(Se,H,M,F,q,ne,oe,ve,he,ue,_e){let Ae=F||w0(H,q),Oe=q||ne||K2(Ae),He=l||g,[Ct,Tt]=N2(e.history,ee,M,Oe,H,C.v7_partialHydration&&ve===!0,Ye,Ke,Re,mt,it,ft,He,b,ue,_e);if(Ze(rr=>!(M&&M.some(hr=>hr.route.id===rr))||Ct&&Ct.some(hr=>hr.route.id===rr)),Xe=++Ne,Ct.length===0&&Tt.length===0){let rr=Hr();return Wt(H,Ln({matches:M,loaderData:{},errors:_e||null},ue?{actionData:ue}:{},rr?{fetchers:new Map(ee.fetchers)}:{}),{flushSync:he}),{shortCircuited:!0}}if(!Fe&&(!C.v7_partialHydration||!ve)){Tt.forEach(hr=>{let Xn=ee.fetchers.get(hr.key),Vi=Sh(void 0,Xn?Xn.data:void 0);ee.fetchers.set(hr.key,Vi)});let rr=ue||ee.actionData;Ht(Ln({navigation:Ae},rr?Object.keys(rr).length===0?{actionData:null}:{actionData:rr}:{},Tt.length>0?{fetchers:new Map(ee.fetchers)}:{}),{flushSync:he})}Tt.forEach(rr=>{Ue.has(rr.key)&&Nt(rr.key),rr.controller&&Ue.set(rr.key,rr.controller)});let yt=()=>Tt.forEach(rr=>Nt(rr.key));Te&&Te.signal.addEventListener("abort",yt);let{results:Dt,loaderResults:Me,fetcherResults:De}=await sr(ee.matches,M,Ct,Tt,Se);if(Se.signal.aborted)return{shortCircuited:!0};Te&&Te.signal.removeEventListener("abort",yt),Tt.forEach(rr=>Ue.delete(rr.key));let tt=q2(Dt);if(tt){if(tt.idx>=Ct.length){let rr=Tt[tt.idx-Ct.length].key;ft.add(rr)}return await pr(ee,tt.result,{replace:oe}),{shortCircuited:!0}}let{loaderData:dt,errors:kt}=H2(ee,M,Ct,Me,_e,Tt,De,zt);zt.forEach((rr,hr)=>{rr.subscribe(Xn=>{(Xn||rr.done)&&zt.delete(hr)})}),C.v7_partialHydration&&ve&&ee.errors&&Object.entries(ee.errors).filter(rr=>{let[hr]=rr;return!Ct.some(Xn=>Xn.route.id===hr)}).forEach(rr=>{let[hr,Xn]=rr;kt=Object.assign(kt||{},{[hr]:Xn})});let dr=Hr(),er=Pe(Xe),br=dr||er||Tt.length>0;return Ln({loaderData:dt,errors:kt},br?{fetchers:new Map(ee.fetchers)}:{})}function Gt(Se,H,M,F){if(a)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ue.has(Se)&&Nt(Se);let q=(F&&F.unstable_flushSync)===!0,ne=l||g,oe=$_(ee.location,ee.matches,b,C.v7_prependBasename,M,C.v7_relativeSplatPath,H,F==null?void 0:F.relative),ve=yu(ne,oe,b);if(!ve){kr(Se,H,Go(404,{pathname:oe}),{flushSync:q});return}let{path:he,submission:ue,error:_e}=F2(C.v7_normalizeFormMethod,!0,oe,F);if(_e){kr(Se,H,_e,{flushSync:q});return}let Ae=O_(ve,he);if(fe=(F&&F.preventScrollReset)===!0,ue&&wa(ue.formMethod)){Cr(Se,H,he,Ae,ve,q,ue);return}it.set(Se,{routeId:H,path:he}),$e(Se,H,he,Ae,ve,q,ue)}async function Cr(Se,H,M,F,q,ne,oe){if(Yt(),it.delete(Se),!F.route.action&&!F.route.lazy){let hr=Go(405,{method:oe.formMethod,pathname:M,routeId:H});kr(Se,H,hr,{flushSync:ne});return}let ve=ee.fetchers.get(Se);Vt(Se,xj(oe,ve),{flushSync:ne});let he=new AbortController,ue=wh(e.history,M,he.signal,oe);Ue.set(Se,he);let _e=Ne,Ae=await bh("action",ue,F,q,h,c,b,C.v7_relativeSplatPath);if(ue.signal.aborted){Ue.get(Se)===he&&Ue.delete(Se);return}if(C.v7_fetcherPersist&&mt.has(Se)){if(Zl(Ae)||vu(Ae)){Vt(Se,qs(void 0));return}}else{if(Zl(Ae))if(Ue.delete(Se),Xe>_e){Vt(Se,qs(void 0));return}else return ft.add(Se),Vt(Se,Sh(oe)),pr(ee,Ae,{fetcherSubmission:oe});if(vu(Ae)){kr(Se,H,Ae.error);return}}if(ql(Ae))throw Go(400,{type:"defer-action"});let Oe=ee.navigation.location||ee.location,He=wh(e.history,Oe,he.signal),Ct=l||g,Tt=ee.navigation.state!=="idle"?yu(Ct,ee.navigation.location,b):ee.matches;Ir(Tt,"Didn't find any matches after fetcher action");let yt=++Ne;ct.set(Se,yt);let Dt=Sh(oe,Ae.data);ee.fetchers.set(Se,Dt);let[Me,De]=N2(e.history,ee,Tt,oe,Oe,!1,Ye,Ke,Re,mt,it,ft,Ct,b,{[F.route.id]:Ae.data},void 0);De.filter(hr=>hr.key!==Se).forEach(hr=>{let Xn=hr.key,Vi=ee.fetchers.get(Xn),xo=Sh(void 0,Vi?Vi.data:void 0);ee.fetchers.set(Xn,xo),Ue.has(Xn)&&Nt(Xn),hr.controller&&Ue.set(Xn,hr.controller)}),Ht({fetchers:new Map(ee.fetchers)});let tt=()=>De.forEach(hr=>Nt(hr.key));he.signal.addEventListener("abort",tt);let{results:dt,loaderResults:kt,fetcherResults:dr}=await sr(ee.matches,Tt,Me,De,He);if(he.signal.aborted)return;he.signal.removeEventListener("abort",tt),ct.delete(Se),Ue.delete(Se),De.forEach(hr=>Ue.delete(hr.key));let er=q2(dt);if(er){if(er.idx>=Me.length){let hr=De[er.idx-Me.length].key;ft.add(hr)}return pr(ee,er.result)}let{loaderData:br,errors:rr}=H2(ee,ee.matches,Me,kt,void 0,De,dr,zt);if(ee.fetchers.has(Se)){let hr=qs(Ae.data);ee.fetchers.set(Se,hr)}Pe(yt),ee.navigation.state==="loading"&&yt>Xe?(Ir(re,"Expected pending action"),Te&&Te.abort(),Wt(ee.navigation.location,{matches:Tt,loaderData:br,errors:rr,fetchers:new Map(ee.fetchers)})):(Ht({errors:rr,loaderData:W2(ee.loaderData,br,Tt,rr),fetchers:new Map(ee.fetchers)}),Ye=!1)}async function $e(Se,H,M,F,q,ne,oe){let ve=ee.fetchers.get(Se);Vt(Se,Sh(oe,ve?ve.data:void 0),{flushSync:ne});let he=new AbortController,ue=wh(e.history,M,he.signal);Ue.set(Se,he);let _e=Ne,Ae=await bh("loader",ue,F,q,h,c,b,C.v7_relativeSplatPath);if(ql(Ae)&&(Ae=await GP(Ae,ue.signal,!0)||Ae),Ue.get(Se)===he&&Ue.delete(Se),!ue.signal.aborted){if(mt.has(Se)){Vt(Se,qs(void 0));return}if(Zl(Ae))if(Xe>_e){Vt(Se,qs(void 0));return}else{ft.add(Se),await pr(ee,Ae);return}if(vu(Ae)){kr(Se,H,Ae.error);return}Ir(!ql(Ae),"Unhandled fetcher deferred data"),Vt(Se,qs(Ae.data))}}async function pr(Se,H,M){let{submission:F,fetcherSubmission:q,replace:ne}=M===void 0?{}:M;H.revalidate&&(Ye=!0);let oe=xp(Se.location,H.location,{_isRedirect:!0});if(Ir(oe,"Expected a location on the redirect navigation"),n){let Oe=!1;if(H.reloadDocument)Oe=!0;else if(VP.test(H.location)){const He=e.history.createURL(H.location);Oe=He.origin!==t.location.origin||Up(He.pathname,b)==null}if(Oe){ne?t.location.replace(H.location):t.location.assign(H.location);return}}Te=null;let ve=ne===!0?Gn.Replace:Gn.Push,{formMethod:he,formAction:ue,formEncType:_e}=Se.navigation;!F&&!q&&he&&ue&&_e&&(F=K2(Se.navigation));let Ae=F||q;if(sj.has(H.status)&&Ae&&wa(Ae.formMethod))await $t(ve,oe,{submission:Ln({},Ae,{formAction:H.location}),preventScrollReset:fe});else{let Oe=w0(oe,F);await $t(ve,oe,{overrideNavigation:Oe,fetcherSubmission:q,preventScrollReset:fe})}}async function sr(Se,H,M,F,q){let ne=await Promise.all([...M.map(he=>bh("loader",q,he,H,h,c,b,C.v7_relativeSplatPath)),...F.map(he=>he.matches&&he.match&&he.controller?bh("loader",wh(e.history,he.path,he.controller.signal),he.match,he.matches,h,c,b,C.v7_relativeSplatPath):{type:Dn.error,error:Go(404,{pathname:he.path})})]),oe=ne.slice(0,M.length),ve=ne.slice(M.length);return await Promise.all([Z2(Se,M,oe,oe.map(()=>q.signal),!1,ee.loaderData),Z2(Se,F.map(he=>he.match),ve,F.map(he=>he.controller?he.controller.signal:null),!0)]),{results:ne,loaderResults:oe,fetcherResults:ve}}function Yt(){Ye=!0,Ke.push(...Ze()),it.forEach((Se,H)=>{Ue.has(H)&&(Re.push(H),Nt(H))})}function Vt(Se,H,M){M===void 0&&(M={}),ee.fetchers.set(Se,H),Ht({fetchers:new Map(ee.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function kr(Se,H,M,F){F===void 0&&(F={});let q=Zh(ee.matches,H);cr(Se),Ht({errors:{[q.route.id]:M},fetchers:new Map(ee.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function Lr(Se){return C.v7_fetcherPersist&&(Et.set(Se,(Et.get(Se)||0)+1),mt.has(Se)&&mt.delete(Se)),ee.fetchers.get(Se)||lj}function cr(Se){let H=ee.fetchers.get(Se);Ue.has(Se)&&!(H&&H.state==="loading"&&ct.has(Se))&&Nt(Se),it.delete(Se),ct.delete(Se),ft.delete(Se),mt.delete(Se),ee.fetchers.delete(Se)}function Qt(Se){if(C.v7_fetcherPersist){let H=(Et.get(Se)||0)-1;H<=0?(Et.delete(Se),mt.add(Se)):Et.set(Se,H)}else cr(Se);Ht({fetchers:new Map(ee.fetchers)})}function Nt(Se){let H=Ue.get(Se);Ir(H,"Expected fetch controller: "+Se),H.abort(),Ue.delete(Se)}function mr(Se){for(let H of Se){let M=Lr(H),F=qs(M.data);ee.fetchers.set(H,F)}}function Hr(){let Se=[],H=!1;for(let M of ft){let F=ee.fetchers.get(M);Ir(F,"Expected fetcher: "+M),F.state==="loading"&&(ft.delete(M),Se.push(M),H=!0)}return mr(Se),H}function Pe(Se){let H=[];for(let[M,F]of ct)if(F<Se){let q=ee.fetchers.get(M);Ir(q,"Expected fetcher: "+M),q.state==="loading"&&(Nt(M),ct.delete(M),H.push(M))}return mr(H),H.length>0}function ot(Se,H){let M=ee.blockers.get(Se)||xh;return tr.get(Se)!==H&&tr.set(Se,H),M}function St(Se){ee.blockers.delete(Se),tr.delete(Se)}function ir(Se,H){let M=ee.blockers.get(Se)||xh;Ir(M.state==="unblocked"&&H.state==="blocked"||M.state==="blocked"&&H.state==="blocked"||M.state==="blocked"&&H.state==="proceeding"||M.state==="blocked"&&H.state==="unblocked"||M.state==="proceeding"&&H.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+H.state);let F=new Map(ee.blockers);F.set(Se,H),Ht({blockers:F})}function un(Se){let{currentLocation:H,nextLocation:M,historyAction:F}=Se;if(tr.size===0)return;tr.size>1&&Hu(!1,"A router only supports one blocker at a time");let q=Array.from(tr.entries()),[ne,oe]=q[q.length-1],ve=ee.blockers.get(ne);if(!(ve&&ve.state==="proceeding")&&oe({currentLocation:H,nextLocation:M,historyAction:F}))return ne}function Ze(Se){let H=[];return zt.forEach((M,F)=>{(!Se||Se(F))&&(M.cancel(),H.push(F),zt.delete(F))}),H}function Zt(Se,H,M){if(D=Se,Z=H,W=M||null,!U&&ee.navigation===b0){U=!0;let F=xr(ee.location,ee.matches);F!=null&&Ht({restoreScrollPosition:F})}return()=>{D=null,Z=null,W=null}}function Mt(Se,H){return W&&W(Se,H.map(F=>$N(F,ee.loaderData)))||Se.key}function ur(Se,H){if(D&&Z){let M=Mt(Se,H);D[M]=Z()}}function xr(Se,H){if(D){let M=Mt(Se,H),F=D[M];if(typeof F=="number")return F}return null}function At(Se){h={},l=L_(Se,c,void 0,h)}return te={get basename(){return b},get future(){return C},get state(){return ee},get routes(){return g},get window(){return t},initialize:We,subscribe:bt,enableScrollRestoration:Zt,navigate:Er,fetch:Gt,revalidate:Tr,createHref:Se=>e.history.createHref(Se),encodeLocation:Se=>e.history.encodeLocation(Se),getFetcher:Lr,deleteFetcher:Qt,dispose:st,getBlocker:ot,deleteBlocker:St,_internalFetchControllers:Ue,_internalActiveDeferreds:zt,_internalSetRoutes:At},te}function dj(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function $_(e,t,n,a,c,h,g,l){let b,C;if(g){b=[];for(let A of t)if(b.push(A),A.route.id===g){C=A;break}}else b=t,C=t[t.length-1];let P=QN(c||".",YN(b,h),Up(e.pathname,n)||e.pathname,l==="path");return c==null&&(P.search=e.search,P.hash=e.hash),(c==null||c===""||c===".")&&C&&C.route.index&&!B1(P.search)&&(P.search=P.search?P.search.replace(/^\?/,"?index&"):"?index"),a&&n!=="/"&&(P.pathname=P.pathname==="/"?n:Ql([n,P.pathname])),Vp(P)}function F2(e,t,n,a){if(!a||!dj(a))return{path:n};if(a.formMethod&&!vj(a.formMethod))return{path:n,error:Go(405,{method:a.formMethod})};let c=()=>({path:n,error:Go(400,{type:"invalid-body"})}),h=a.formMethod||"get",g=e?h.toUpperCase():h.toLowerCase(),l=WP(n);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!wa(g))return c();let D=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((W,Z)=>{let[U,J]=Z;return""+W+U+"="+J+`
`},""):String(a.body);return{path:n,submission:{formMethod:g,formAction:l,formEncType:a.formEncType,formData:void 0,json:void 0,text:D}}}else if(a.formEncType==="application/json"){if(!wa(g))return c();try{let D=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:n,submission:{formMethod:g,formAction:l,formEncType:a.formEncType,formData:void 0,json:D,text:void 0}}}catch{return c()}}}Ir(typeof FormData=="function","FormData is not available in this environment");let b,C;if(a.formData)b=B_(a.formData),C=a.formData;else if(a.body instanceof FormData)b=B_(a.body),C=a.body;else if(a.body instanceof URLSearchParams)b=a.body,C=U2(b);else if(a.body==null)b=new URLSearchParams,C=new FormData;else try{b=new URLSearchParams(a.body),C=U2(b)}catch{return c()}let P={formMethod:g,formAction:l,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:C,json:void 0,text:void 0};if(wa(P.formMethod))return{path:n,submission:P};let A=Is(n);return t&&A.search&&B1(A.search)&&b.append("index",""),A.search="?"+b,{path:Vp(A),submission:P}}function hj(e,t){let n=e;if(t){let a=e.findIndex(c=>c.route.id===t);a>=0&&(n=e.slice(0,a))}return n}function N2(e,t,n,a,c,h,g,l,b,C,P,A,D,W,Z,U){let J=U?Object.values(U)[0]:Z?Object.values(Z)[0]:void 0,O=e.createURL(t.location),$=e.createURL(c),N=U?Object.keys(U)[0]:void 0,te=hj(n,N).filter((re,fe)=>{let{route:Te}=re;if(Te.lazy)return!0;if(Te.loader==null)return!1;if(h)return Te.loader.hydrate?!0:t.loaderData[Te.id]===void 0&&(!t.errors||t.errors[Te.id]===void 0);if(pj(t.loaderData,t.matches[fe],re)||l.some(Ee=>Ee===re.route.id))return!0;let be=t.matches[fe],ze=re;return j2(re,Ln({currentUrl:O,currentParams:be.params,nextUrl:$,nextParams:ze.params},a,{actionResult:J,defaultShouldRevalidate:g||O.pathname+O.search===$.pathname+$.search||O.search!==$.search||HP(be,ze)}))}),ee=[];return P.forEach((re,fe)=>{if(h||!n.some(Fe=>Fe.route.id===re.routeId)||C.has(fe))return;let Te=yu(D,re.path,W);if(!Te){ee.push({key:fe,routeId:re.routeId,path:re.path,matches:null,match:null,controller:null});return}let be=t.fetchers.get(fe),ze=O_(Te,re.path),Ee=!1;A.has(fe)?Ee=!1:b.includes(fe)?Ee=!0:be&&be.state!=="idle"&&be.data===void 0?Ee=g:Ee=j2(ze,Ln({currentUrl:O,currentParams:t.matches[t.matches.length-1].params,nextUrl:$,nextParams:n[n.length-1].params},a,{actionResult:J,defaultShouldRevalidate:g})),Ee&&ee.push({key:fe,routeId:re.routeId,path:re.path,matches:Te,match:ze,controller:new AbortController})}),[te,ee]}function pj(e,t,n){let a=!t||n.route.id!==t.route.id,c=e[n.route.id]===void 0;return a||c}function HP(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function j2(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function V2(e,t,n){if(!e.lazy)return;let a=await e.lazy();if(!e.lazy)return;let c=n[e.id];Ir(c,"No route found in manifest");let h={};for(let g in a){let b=c[g]!==void 0&&g!=="hasErrorBoundary";Hu(!b,'Route "'+c.id+'" has a static property "'+g+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+g+'" will be ignored.')),!b&&!RN.has(g)&&(h[g]=a[g])}Object.assign(c,h),Object.assign(c,Ln({},t(c),{lazy:void 0}))}async function bh(e,t,n,a,c,h,g,l,b){b===void 0&&(b={});let C,P,A,D=U=>{let J,O=new Promise(($,N)=>J=N);return A=()=>J(),t.signal.addEventListener("abort",A),Promise.race([U({request:t,params:n.params,context:b.requestContext}),O])};try{let U=n.route[e];if(n.route.lazy)if(U){let J,O=await Promise.all([D(U).catch($=>{J=$}),V2(n.route,h,c)]);if(J)throw J;P=O[0]}else if(await V2(n.route,h,c),U=n.route[e],U)P=await D(U);else if(e==="action"){let J=new URL(t.url),O=J.pathname+J.search;throw Go(405,{method:t.method,pathname:O,routeId:n.route.id})}else return{type:Dn.data,data:void 0};else if(U)P=await D(U);else{let J=new URL(t.url),O=J.pathname+J.search;throw Go(404,{pathname:O})}Ir(P!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(U){C=Dn.error,P=U}finally{A&&t.signal.removeEventListener("abort",A)}if(yj(P)){let U=P.status;if(aj.has(U)){let O=P.headers.get("Location");if(Ir(O,"Redirects returned/thrown from loaders/actions must have a Location header"),!VP.test(O))O=$_(new URL(t.url),a.slice(0,a.indexOf(n)+1),g,!0,O,l);else if(!b.isStaticRequest){let $=new URL(t.url),N=O.startsWith("//")?new URL($.protocol+O):new URL(O),ie=Up(N.pathname,g)!=null;N.origin===$.origin&&ie&&(O=N.pathname+N.search+N.hash)}if(b.isStaticRequest)throw P.headers.set("Location",O),P;return{type:Dn.redirect,status:U,location:O,revalidate:P.headers.get("X-Remix-Revalidate")!==null,reloadDocument:P.headers.get("X-Remix-Reload-Document")!==null}}if(b.isRouteRequest)throw{type:C===Dn.error?Dn.error:Dn.data,response:P};let J;try{let O=P.headers.get("Content-Type");O&&/\bapplication\/json\b/.test(O)?P.body==null?J=null:J=await P.json():J=await P.text()}catch(O){return{type:Dn.error,error:O}}return C===Dn.error?{type:C,error:new $1(U,P.statusText,J),headers:P.headers}:{type:Dn.data,data:J,statusCode:P.status,headers:P.headers}}if(C===Dn.error)return{type:C,error:P};if(gj(P)){var W,Z;return{type:Dn.deferred,deferredData:P,statusCode:(W=P.init)==null?void 0:W.status,headers:((Z=P.init)==null?void 0:Z.headers)&&new Headers(P.init.headers)}}return{type:Dn.data,data:P}}function wh(e,t,n,a){let c=e.createURL(WP(t)).toString(),h={signal:n};if(a&&wa(a.formMethod)){let{formMethod:g,formEncType:l}=a;h.method=g.toUpperCase(),l==="application/json"?(h.headers=new Headers({"Content-Type":l}),h.body=JSON.stringify(a.json)):l==="text/plain"?h.body=a.text:l==="application/x-www-form-urlencoded"&&a.formData?h.body=B_(a.formData):h.body=a.formData}return new Request(c,h)}function B_(e){let t=new URLSearchParams;for(let[n,a]of e.entries())t.append(n,typeof a=="string"?a:a.name);return t}function U2(e){let t=new FormData;for(let[n,a]of e.entries())t.append(n,a);return t}function fj(e,t,n,a,c){let h={},g=null,l,b=!1,C={};return n.forEach((P,A)=>{let D=t[A].route.id;if(Ir(!Zl(P),"Cannot handle redirect results in processLoaderData"),vu(P)){let W=Zh(e,D),Z=P.error;a&&(Z=Object.values(a)[0],a=void 0),g=g||{},g[W.route.id]==null&&(g[W.route.id]=Z),h[D]=void 0,b||(b=!0,l=NP(P.error)?P.error.status:500),P.headers&&(C[D]=P.headers)}else ql(P)?(c.set(D,P.deferredData),h[D]=P.deferredData.data):h[D]=P.data,P.statusCode!=null&&P.statusCode!==200&&!b&&(l=P.statusCode),P.headers&&(C[D]=P.headers)}),a&&(g=a,h[Object.keys(a)[0]]=void 0),{loaderData:h,errors:g,statusCode:l||200,loaderHeaders:C}}function H2(e,t,n,a,c,h,g,l){let{loaderData:b,errors:C}=fj(t,n,a,c,l);for(let P=0;P<h.length;P++){let{key:A,match:D,controller:W}=h[P];Ir(g!==void 0&&g[P]!==void 0,"Did not find corresponding fetcher result");let Z=g[P];if(!(W&&W.signal.aborted))if(vu(Z)){let U=Zh(e.matches,D==null?void 0:D.route.id);C&&C[U.route.id]||(C=Ln({},C,{[U.route.id]:Z.error})),e.fetchers.delete(A)}else if(Zl(Z))Ir(!1,"Unhandled fetcher revalidation redirect");else if(ql(Z))Ir(!1,"Unhandled fetcher deferred data");else{let U=qs(Z.data);e.fetchers.set(A,U)}}return{loaderData:b,errors:C}}function W2(e,t,n,a){let c=Ln({},t);for(let h of n){let g=h.route.id;if(t.hasOwnProperty(g)?t[g]!==void 0&&(c[g]=t[g]):e[g]!==void 0&&h.route.loader&&(c[g]=e[g]),a&&a.hasOwnProperty(g))break}return c}function Zh(e,t){return(t?e.slice(0,e.findIndex(a=>a.route.id===t)+1):[...e]).reverse().find(a=>a.route.hasErrorBoundary===!0)||e[0]}function G2(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Go(e,t){let{pathname:n,routeId:a,method:c,type:h}=t===void 0?{}:t,g="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(g="Bad Request",c&&n&&a?l="You made a "+c+' request to "'+n+'" but '+('did not provide a `loader` for route "'+a+'", ')+"so there is no way to handle the request.":h==="defer-action"?l="defer() is not supported in actions":h==="invalid-body"&&(l="Unable to encode submission body")):e===403?(g="Forbidden",l='Route "'+a+'" does not match URL "'+n+'"'):e===404?(g="Not Found",l='No route matches URL "'+n+'"'):e===405&&(g="Method Not Allowed",c&&n&&a?l="You made a "+c.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+a+'", ')+"so there is no way to handle the request.":c&&(l='Invalid request method "'+c.toUpperCase()+'"')),new $1(e||500,g,new Error(l),!0)}function q2(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Zl(n))return{result:n,idx:t}}}function WP(e){let t=typeof e=="string"?Is(e):e;return Vp(Ln({},t,{hash:""}))}function mj(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function ql(e){return e.type===Dn.deferred}function vu(e){return e.type===Dn.error}function Zl(e){return(e&&e.type)===Dn.redirect}function gj(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function yj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function vj(e){return oj.has(e.toLowerCase())}function wa(e){return nj.has(e.toLowerCase())}async function Z2(e,t,n,a,c,h){for(let g=0;g<n.length;g++){let l=n[g],b=t[g];if(!b)continue;let C=e.find(A=>A.route.id===b.route.id),P=C!=null&&!HP(C,b)&&(h&&h[b.route.id])!==void 0;if(ql(l)&&(c||P)){let A=a[g];Ir(A,"Expected an AbortSignal for revalidating fetcher deferred result"),await GP(l,A,c).then(D=>{D&&(n[g]=D||n[g])})}}}async function GP(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Dn.data,data:e.deferredData.unwrappedData}}catch(c){return{type:Dn.error,error:c}}return{type:Dn.data,data:e.deferredData.data}}}function B1(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function O_(e,t){let n=typeof t=="string"?Is(t).search:t.search;if(e[e.length-1].route.index&&B1(n||""))return e[e.length-1];let a=FP(e);return a[a.length-1]}function K2(e){let{formMethod:t,formAction:n,formEncType:a,text:c,formData:h,json:g}=e;if(!(!t||!n||!a)){if(c!=null)return{formMethod:t,formAction:n,formEncType:a,formData:void 0,json:void 0,text:c};if(h!=null)return{formMethod:t,formAction:n,formEncType:a,formData:h,json:void 0,text:void 0};if(g!==void 0)return{formMethod:t,formAction:n,formEncType:a,formData:void 0,json:g,text:void 0}}}function w0(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _j(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Sh(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function xj(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function qs(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function bj(e,t){try{let n=e.sessionStorage.getItem(UP);if(n){let a=JSON.parse(n);for(let[c,h]of Object.entries(a||{}))h&&Array.isArray(h)&&t.set(c,new Set(h||[]))}}catch{}}function wj(e,t){if(t.size>0){let n={};for(let[a,c]of t)n[a]=[...c];try{e.sessionStorage.setItem(UP,JSON.stringify(n))}catch(a){Hu(!1,"Failed to save applied view transitions in sessionStorage ("+a+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cg.apply(this,arguments)}const qP=V.createContext(null),ZP=V.createContext(null),KP=V.createContext(null),Dy=V.createContext(null),Ry=V.createContext({outlet:null,matches:[],isDataRoute:!1}),XP=V.createContext(null);function O1(){return V.useContext(Dy)!=null}function Sj(){return O1()||Ir(!1),V.useContext(Dy).location}function Cj(e,t,n,a){O1()||Ir(!1);let{navigator:c}=V.useContext(KP),{matches:h}=V.useContext(Ry),g=h[h.length-1],l=g?g.params:{};g&&g.pathname;let b=g?g.pathnameBase:"/";g&&g.route;let C=Sj(),P;if(t){var A;let J=typeof t=="string"?Is(t):t;b==="/"||(A=J.pathname)!=null&&A.startsWith(b)||Ir(!1),P=J}else P=C;let D=P.pathname||"/",W=D;if(b!=="/"){let J=b.replace(/^\//,"").split("/");W="/"+D.replace(/^\//,"").split("/").slice(J.length).join("/")}let Z=yu(e,{pathname:W}),U=Ej(Z&&Z.map(J=>Object.assign({},J,{params:Object.assign({},l,J.params),pathname:Ql([b,c.encodeLocation?c.encodeLocation(J.pathname).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?b:Ql([b,c.encodeLocation?c.encodeLocation(J.pathnameBase).pathname:J.pathnameBase])})),h,n,a);return t&&U?V.createElement(Dy.Provider,{value:{location:Cg({pathname:"/",search:"",hash:"",state:null,key:"default"},P),navigationType:Gn.Pop}},U):U}function kj(){let e=Dj(),t=NP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},t),n?V.createElement("pre",{style:c},n):null,null)}const Tj=V.createElement(kj,null);class Ij extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?V.createElement(Ry.Provider,{value:this.props.routeContext},V.createElement(XP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pj(e){let{routeContext:t,match:n,children:a}=e,c=V.useContext(qP);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Ry.Provider,{value:t},a)}function Ej(e,t,n,a){var c;if(t===void 0&&(t=[]),n===void 0&&(n=null),a===void 0&&(a=null),e==null){var h;if((h=n)!=null&&h.errors)e=n.matches;else return null}let g=e,l=(c=n)==null?void 0:c.errors;if(l!=null){let P=g.findIndex(A=>A.route.id&&(l==null?void 0:l[A.route.id]));P>=0||Ir(!1),g=g.slice(0,Math.min(g.length,P+1))}let b=!1,C=-1;if(n&&a&&a.v7_partialHydration)for(let P=0;P<g.length;P++){let A=g[P];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(C=P),A.route.id){let{loaderData:D,errors:W}=n,Z=A.route.loader&&D[A.route.id]===void 0&&(!W||W[A.route.id]===void 0);if(A.route.lazy||Z){b=!0,C>=0?g=g.slice(0,C+1):g=[g[0]];break}}}return g.reduceRight((P,A,D)=>{let W,Z=!1,U=null,J=null;n&&(W=l&&A.route.id?l[A.route.id]:void 0,U=A.route.errorElement||Tj,b&&(C<0&&D===0?(Rj("route-fallback",!1),Z=!0,J=null):C===D&&(Z=!0,J=A.route.hydrateFallbackElement||null)));let O=t.concat(g.slice(0,D+1)),$=()=>{let N;return W?N=U:Z?N=J:A.route.Component?N=V.createElement(A.route.Component,null):A.route.element?N=A.route.element:N=P,V.createElement(Pj,{match:A,routeContext:{outlet:P,matches:O,isDataRoute:n!=null},children:N})};return n&&(A.route.ErrorBoundary||A.route.errorElement||D===0)?V.createElement(Ij,{location:n.location,revalidation:n.revalidation,component:U,error:W,children:$(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):$()},null)}var F_=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(F_||{});function zj(e){let t=V.useContext(ZP);return t||Ir(!1),t}function Aj(e){let t=V.useContext(Ry);return t||Ir(!1),t}function Mj(e){let t=Aj(),n=t.matches[t.matches.length-1];return n.route.id||Ir(!1),n.route.id}function Dj(){var e;let t=V.useContext(XP),n=zj(F_.UseRouteError),a=Mj(F_.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[a]}const X2={};function Rj(e,t,n){!t&&!X2[e]&&(X2[e]=!0)}function N_(e){Ir(!1)}function Lj(e){let{basename:t="/",children:n=null,location:a,navigationType:c=Gn.Pop,navigator:h,static:g=!1,future:l}=e;O1()&&Ir(!1);let b=t.replace(/^\/*/,"/"),C=V.useMemo(()=>({basename:b,navigator:h,static:g,future:Cg({v7_relativeSplatPath:!1},l)}),[b,l,h,g]);typeof a=="string"&&(a=Is(a));let{pathname:P="/",search:A="",hash:D="",state:W=null,key:Z="default"}=a,U=V.useMemo(()=>{let J=Up(P,b);return J==null?null:{location:{pathname:J,search:A,hash:D,state:W,key:Z},navigationType:c}},[b,P,A,D,W,Z,c]);return U==null?null:V.createElement(KP.Provider,{value:C},V.createElement(Dy.Provider,{children:n,value:U}))}new Promise(()=>{});function j_(e,t){t===void 0&&(t=[]);let n=[];return V.Children.forEach(e,(a,c)=>{if(!V.isValidElement(a))return;let h=[...t,c];if(a.type===V.Fragment){n.push.apply(n,j_(a.props.children,h));return}a.type!==N_&&Ir(!1),!a.props.index||!a.props.children||Ir(!1);let g={id:a.props.id||h.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(g.children=j_(a.props.children,h)),n.push(g)}),n}function $j(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:V.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:V.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:V.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kg.apply(this,arguments)}const Bj="6";try{window.__reactRouterVersion=Bj}catch{}function Oj(e,t){return uj({basename:t==null?void 0:t.basename,future:kg({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:AN({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Fj(),routes:e,mapRouteProperties:$j,window:t==null?void 0:t.window}).initialize()}function Fj(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=kg({},t,{errors:Nj(t.errors)})),t}function Nj(e){if(!e)return null;let t=Object.entries(e),n={};for(let[a,c]of t)if(c&&c.__type==="RouteErrorResponse")n[a]=new $1(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){if(c.__subType){let h=window[c.__subType];if(typeof h=="function")try{let g=new h(c.message);g.stack="",n[a]=g}catch{}}if(n[a]==null){let h=new Error(c.message);h.stack="",n[a]=h}}else n[a]=c;return n}const jj=V.createContext({isTransitioning:!1}),Vj=V.createContext(new Map),Uj="startTransition",J2=Wm[Uj],Hj="flushSync",Y2=S3[Hj];function Wj(e){J2?J2(e):e()}function Ch(e){Y2?Y2(e):e()}class Gj{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",t(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",n(a))}})}}function qj(e){let{fallbackElement:t,router:n,future:a}=e,[c,h]=V.useState(n.state),[g,l]=V.useState(),[b,C]=V.useState({isTransitioning:!1}),[P,A]=V.useState(),[D,W]=V.useState(),[Z,U]=V.useState(),J=V.useRef(new Map),{v7_startTransition:O}=a||{},$=V.useCallback(re=>{O?Wj(re):re()},[O]),N=V.useCallback((re,fe)=>{let{deletedFetchers:Te,unstable_flushSync:be,unstable_viewTransitionOpts:ze}=fe;Te.forEach(Fe=>J.current.delete(Fe)),re.fetchers.forEach((Fe,Ye)=>{Fe.data!==void 0&&J.current.set(Ye,Fe.data)});let Ee=n.window==null||typeof n.window.document.startViewTransition!="function";if(!ze||Ee){be?Ch(()=>h(re)):$(()=>h(re));return}if(be){Ch(()=>{D&&(P&&P.resolve(),D.skipTransition()),C({isTransitioning:!0,flushSync:!0,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation})});let Fe=n.window.document.startViewTransition(()=>{Ch(()=>h(re))});Fe.finished.finally(()=>{Ch(()=>{A(void 0),W(void 0),l(void 0),C({isTransitioning:!1})})}),Ch(()=>W(Fe));return}D?(P&&P.resolve(),D.skipTransition(),U({state:re,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation})):(l(re),C({isTransitioning:!0,flushSync:!1,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation}))},[n.window,D,P,J,$]);V.useLayoutEffect(()=>n.subscribe(N),[n,N]),V.useEffect(()=>{b.isTransitioning&&!b.flushSync&&A(new Gj)},[b]),V.useEffect(()=>{if(P&&g&&n.window){let re=g,fe=P.promise,Te=n.window.document.startViewTransition(async()=>{$(()=>h(re)),await fe});Te.finished.finally(()=>{A(void 0),W(void 0),l(void 0),C({isTransitioning:!1})}),W(Te)}},[$,g,P,n.window]),V.useEffect(()=>{P&&g&&c.location.key===g.location.key&&P.resolve()},[P,D,c.location,g]),V.useEffect(()=>{!b.isTransitioning&&Z&&(l(Z.state),C({isTransitioning:!0,flushSync:!1,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation}),U(void 0))},[b.isTransitioning,Z]),V.useEffect(()=>{},[]);let ie=V.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:re=>n.navigate(re),push:(re,fe,Te)=>n.navigate(re,{state:fe,preventScrollReset:Te==null?void 0:Te.preventScrollReset}),replace:(re,fe,Te)=>n.navigate(re,{replace:!0,state:fe,preventScrollReset:Te==null?void 0:Te.preventScrollReset})}),[n]),te=n.basename||"/",ee=V.useMemo(()=>({router:n,navigator:ie,static:!1,basename:te}),[n,ie,te]);return V.createElement(V.Fragment,null,V.createElement(qP.Provider,{value:ee},V.createElement(ZP.Provider,{value:c},V.createElement(Vj.Provider,{value:J.current},V.createElement(jj.Provider,{value:b},V.createElement(Lj,{basename:te,location:c.location,navigationType:c.historyAction,navigator:ie,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},c.initialized||n.future.v7_partialHydration?V.createElement(Zj,{routes:n.routes,future:n.future,state:c}):t))))),null)}function Zj(e){let{routes:t,future:n,state:a}=e;return Cj(t,void 0,a,n)}var Q2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Q2||(Q2={}));var eC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eC||(eC={}));var uo=(e=>(e[e.Arizona=0]="Arizona",e[e.Colorado=1]="Colorado",e[e.Idaho=2]="Idaho",e[e.Kansas=3]="Kansas",e[e.Montana=4]="Montana",e[e.Nebraska=5]="Nebraska",e[e.Nevada=6]="Nevada",e[e.NewMexico=7]="NewMexico",e[e.Oklahoma=8]="Oklahoma",e[e.Oregon=9]="Oregon",e[e.Texas=10]="Texas",e[e.Utah=11]="Utah",e[e.Washington=12]="Washington",e[e.Wyoming=13]="Wyoming",e))(uo||{});const bp=new Set([6,0,7,9,12,11,2,1,13,4,10,8,3]),Kj={6:"Nevada",0:"Arizona",7:"New Mexico",9:"Oregon",12:"Washington",11:"Utah",2:"Idaho",1:"Colorado",13:"Wyoming",4:"Montana",10:"Texas",8:"Oklahoma",3:"Kansas"},Xj={0:new Set,1:new Set([6]),2:new Set([0]),3:new Set([7]),4:new Set([9]),5:new Set([12]),6:new Set([9,12]),7:new Set([11]),8:new Set([7,11]),9:new Set([2]),10:new Set([2,9]),11:new Set([2,11]),12:new Set([2,12]),13:new Set([1]),14:new Set([1,7]),15:new Set([1,11]),16:new Set([13]),17:new Set([1,13]),18:new Set([2,13]),19:new Set([11,13]),20:new Set([10]),21:new Set([7,10]),22:new Set([4]),23:new Set([2,4]),24:new Set([4,13]),25:new Set([8]),26:new Set([8,1]),27:new Set([8,7]),28:new Set([8,10]),29:new Set([3]),30:new Set([3,1]),31:new Set([3,8]),32:new Set([5]),33:new Set([5,1]),34:new Set([5,3]),35:new Set([5,13])};function JP(e){const t=new Set;for(const[n,a]of Object.entries(Xj))[...a].every(c=>e.has(c))&&t.add(Number(n));return t}const Jj=new Set([]);var YP=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e))(YP||{});const Yj="modulepreload",Qj=function(e){return"/"+e},tC={},eV=function(t,n,a){let c=Promise.resolve();if(n&&n.length>0){const h=document.getElementsByTagName("link");c=Promise.all(n.map(g=>{if(g=Qj(g),g in tC)return;tC[g]=!0;const l=g.endsWith(".css"),b=l?'[rel="stylesheet"]':"";if(!!a)for(let A=h.length-1;A>=0;A--){const D=h[A];if(D.href===g&&(!l||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${b}`))return;const P=document.createElement("link");if(P.rel=l?"stylesheet":Yj,l||(P.as="script",P.crossOrigin=""),P.href=g,document.head.appendChild(P),l)return new Promise((A,D)=>{P.addEventListener("load",A),P.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}return c.then(()=>t()).catch(h=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h})},QP=V.createContext(null);function tV(){var e;const t=(e=V.useContext(QP))===null||e===void 0?void 0:e.maps,n=V.useContext(dc);return V.useMemo(()=>({...t,current:n==null?void 0:n.map}),[t,n])}function rV(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,h=Array.isArray(t)?t[1]:t?t.y:0;return n===c&&a===h}function Po(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Po(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(const c of n)if(!t.hasOwnProperty(c)||!Po(e[c],t[c]))return!1;return!0}return!1}function nV(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function rC(e,t){if(!e.getProjection)return;const n=e.getProjection(),a=t.getProjection();Po(n,a)||t.setProjection(n)}function nC(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function iC(e,t){const n=t.viewState||t;let a=!1;if("longitude"in n&&"latitude"in n){const c=e.center;e.center=new c.constructor(n.longitude,n.latitude),a=a||c!==e.center}if("zoom"in n){const c=e.zoom;e.zoom=n.zoom,a=a||c!==e.zoom}if("bearing"in n){const c=e.bearing;e.bearing=n.bearing,a=a||c!==e.bearing}if("pitch"in n){const c=e.pitch;e.pitch=n.pitch,a=a||c!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(a=!0,e.padding=n.padding),a}const iV=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function oC(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const n=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const h=t[a.ref];if(h){c=c||Object.assign({},a),delete c.ref;for(const g of iV)g in h&&(c[g]=h[g])}return c||a});return{...e,layers:n}}var aC={};const sC={version:8,sources:{},layers:[]},lC={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},S0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},cC={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},oV=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],aV=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Wu{constructor(t,n,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const h=this.props[cC[c.type]];h?h(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const h=this.props[lC[c.type]];h&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),h(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const h=this.props[S0[c.type]];h&&h(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=n,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const a=this._updateSettings(t,n);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),h=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(a||c||h&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const a=Wu.savedMaps.pop();if(!a)return null;const c=a.map,h=c.getContainer();for(n.className=h.className;h.childNodes.length>0;)n.appendChild(h.childNodes[0]);c._container=n;const g=c._resizeObserver;g&&(g.disconnect(),g.observe(n)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):a._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:n}=this,{mapStyle:a=sC}=n,c={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||sV()||null,container:t,style:oC(a)},h=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[h.longitude||0,h.latitude||0],zoom:h.zoom||0,pitch:h.pitch||0,bearing:h.bearing||0}),n.gl){const P=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=P,n.gl)}const g=new this._MapClass(c);h.padding&&g.setPadding(h.padding),n.cursor&&(g.getCanvas().style.cursor=n.cursor),this._createShadowTransform(g);const l=g._render;g._render=P=>{this._inRender=!0,l.call(g,P),this._inRender=!1};const b=g._renderTaskQueue.run;g._renderTaskQueue.run=P=>{b.call(g._renderTaskQueue,P),this._onBeforeRepaint()},g.on("render",()=>this._onAfterRepaint());const C=g.fire;g.fire=this._fireEvent.bind(this,C),g.on("resize",()=>{this._renderTransform.resize(g.transform.width,g.transform.height)}),g.on("styledata",()=>{this._updateStyleComponents(this.props,{}),rC(g.transform,this._renderTransform)}),g.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const P in lC)g.on(P,this._onPointerEvent);for(const P in S0)g.on(P,this._onCameraEvent);for(const P in cC)g.on(P,this._onEvent);this._map=g}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Wu.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=nV(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const a=this._map;if(n.width!==a.transform.width||n.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:h,pitch:g,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const C=iC(c,{...nC(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),C&&n){const P=this._deferredEvents;P.move=!0,P.zoom||(P.zoom=h!==c.zoom),P.rotate||(P.rotate=l!==c.bearing),P.pitch||(P.pitch=g!==c.pitch)}return b||iC(a.transform,t),C}_updateSettings(t,n){const a=this._map;let c=!1;for(const h of oV)if(h in t&&!Po(t[h],n[h])){c=!0;const g=a[`set${h[0].toUpperCase()}${h.slice(1)}`];g==null||g.call(a,t[h])}return c}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:a=sC,styleDiffing:c=!0}=t,h={diff:c};return"localIdeographFontFamily"in t&&(h.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(oC(a),h),!0}return!1}_updateStyleComponents(t,n){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Po(t.light,n.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Po(t.fog,n.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Po(t.terrain,n.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,n){var a,c;const h=this._map;let g=!1;for(const l of aV){const b=(a=t[l])!==null&&a!==void 0?a:!0,C=(c=n[l])!==null&&c!==void 0?c:!0;Po(b,C)||(g=!0,b?h[l].enable(b):h[l].disable())}return g}_queryRenderedFeatures(t){const n=this._map,a=n.transform,{interactiveLayerIds:c=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(t,{layers:c.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=a}}_updateHover(t){var n;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const h=t.type,g=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=h}else this._hoveredFeatures=null}_fireEvent(t,n,a){const c=this._map,h=c.transform,g=typeof n=="string"?n:n.type;return g==="move"&&this._updateViewState(this.props,!1),g in S0&&(typeof n=="object"&&(n.viewState=nC(h)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,n,a),c.transform=h,c):(t.call(c,n,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const n=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{rC(this._renderTransform,n),t.transform=n}}}Wu.savedMaps=[];function sV(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||aC.MapboxAccessToken}catch{}try{e=e||aC.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const lV=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function cV(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const h=t.project(a);return t.transform=c,h},unproject:a=>{const c=t.transform;t.transform=e.transform;const h=t.unproject(a);return t.transform=c,h},queryTerrainElevation:(a,c)=>{const h=t.transform;t.transform=e.transform;const g=t.queryTerrainElevation(a,c);return t.transform=h,g},queryRenderedFeatures:(a,c)=>{const h=t.transform;t.transform=e.transform;const g=t.queryRenderedFeatures(a,c);return t.transform=h,g}};for(const a of uV(t))!(a in n)&&!lV.includes(a)&&(n[a]=t[a].bind(t));return n}function uV(e){const t=new Set;let n=e;for(;n;){for(const a of Object.getOwnPropertyNames(n))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);n=Object.getPrototypeOf(n)}return Array.from(t)}const dV=typeof document<"u"?V.useLayoutEffect:V.useEffect,hV=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function pV(e,t){for(const a of hV)a in t&&(e[a]=t[a]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(n,a=>{a&&console.error(a)},!0)}const dc=V.createContext(null);function fV(e,t,n){const a=V.useContext(QP),[c,h]=V.useState(null),g=V.useRef(),{current:l}=V.useRef({mapLib:null,map:null});V.useEffect(()=>{const P=e.mapLib;let A=!0,D;return Promise.resolve(P||n).then(W=>{if(!A)return;if(!W)throw new Error("Invalid mapLib");const Z="Map"in W?W:W.default;if(!Z.Map)throw new Error("Invalid mapLib");if(pV(Z,e),!Z.supported||Z.supported(e))e.reuseMaps&&(D=Wu.reuse(e,g.current)),D||(D=new Wu(Z.Map,e,g.current)),l.map=cV(D),l.mapLib=Z,h(D),a==null||a.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(W=>{const{onError:Z}=e;Z?Z({type:"error",target:null,originalEvent:null,error:W}):console.error(W)}),()=>{A=!1,D&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?D.recycle():D.destroy())}},[]),dV(()=>{c&&c.setProps(e)}),V.useImperativeHandle(t,()=>l.map,[c]);const b=V.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return V.createElement("div",{id:e.id,ref:g,style:b},c&&V.createElement(dc.Provider,{value:l},V.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const mV=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function hc(e,t){if(!e||!t)return;const n=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!mV.test(a)?n[a]=`${c}px`:n[a]=c}}function gV(e,t){const{map:n,mapLib:a}=V.useContext(dc),c=V.useRef({props:e});c.current.props=e;const h=V.useMemo(()=>{let U=!1;V.Children.forEach(e.children,$=>{$&&(U=!0)});const J={...e,element:U?document.createElement("div"):null},O=new a.Marker(J);return O.setLngLat([e.longitude,e.latitude]),O.getElement().addEventListener("click",$=>{var N,ie;(ie=(N=c.current.props).onClick)===null||ie===void 0||ie.call(N,{type:"click",target:O,originalEvent:$})}),O.on("dragstart",$=>{var N,ie;const te=$;te.lngLat=h.getLngLat(),(ie=(N=c.current.props).onDragStart)===null||ie===void 0||ie.call(N,te)}),O.on("drag",$=>{var N,ie;const te=$;te.lngLat=h.getLngLat(),(ie=(N=c.current.props).onDrag)===null||ie===void 0||ie.call(N,te)}),O.on("dragend",$=>{var N,ie;const te=$;te.lngLat=h.getLngLat(),(ie=(N=c.current.props).onDragEnd)===null||ie===void 0||ie.call(N,te)}),O},[]);V.useEffect(()=>(h.addTo(n.getMap()),()=>{h.remove()}),[]);const{longitude:g,latitude:l,offset:b,style:C,draggable:P=!1,popup:A=null,rotation:D=0,rotationAlignment:W="auto",pitchAlignment:Z="auto"}=e;return V.useEffect(()=>{hc(h.getElement(),C)},[C]),V.useImperativeHandle(t,()=>h,[]),(h.getLngLat().lng!==g||h.getLngLat().lat!==l)&&h.setLngLat([g,l]),b&&!rV(h.getOffset(),b)&&h.setOffset(b),h.isDraggable()!==P&&h.setDraggable(P),h.getRotation()!==D&&h.setRotation(D),h.getRotationAlignment()!==W&&h.setRotationAlignment(W),h.getPitchAlignment()!==Z&&h.setPitchAlignment(Z),h.getPopup()!==A&&h.setPopup(A),Yu.createPortal(e.children,h.getElement())}V.memo(V.forwardRef(gV));function uC(e){return new Set(e?e.trim().split(/\s+/):[])}function yV(e,t){const{map:n,mapLib:a}=V.useContext(dc),c=V.useMemo(()=>document.createElement("div"),[]),h=V.useRef({props:e});h.current.props=e;const g=V.useMemo(()=>{const l={...e},b=new a.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",C=>{var P,A;(A=(P=h.current.props).onOpen)===null||A===void 0||A.call(P,C)}),b},[]);if(V.useEffect(()=>{const l=b=>{var C,P;(P=(C=h.current.props).onClose)===null||P===void 0||P.call(C,b)};return g.on("close",l),g.setDOMContent(c).addTo(n.getMap()),()=>{g.off("close",l),g.isOpen()&&g.remove()}},[]),V.useEffect(()=>{hc(g.getElement(),e.style)},[e.style]),V.useImperativeHandle(t,()=>g,[]),g.isOpen()&&((g.getLngLat().lng!==e.longitude||g.getLngLat().lat!==e.latitude)&&g.setLngLat([e.longitude,e.latitude]),e.offset&&!Po(g.options.offset,e.offset)&&g.setOffset(e.offset),(g.options.anchor!==e.anchor||g.options.maxWidth!==e.maxWidth)&&(g.options.anchor=e.anchor,g.setMaxWidth(e.maxWidth)),g.options.className!==e.className)){const l=uC(g.options.className),b=uC(e.className);for(const C of l)b.has(C)||g.removeClassName(C);for(const C of b)l.has(C)||g.addClassName(C);g.options.className=e.className}return Yu.createPortal(e.children,c)}V.memo(V.forwardRef(yV));function Hp(e,t,n,a){const c=V.useContext(dc),h=V.useMemo(()=>e(c),[]);return V.useEffect(()=>{const g=a||n||t,l=typeof t=="function"&&typeof n=="function"?t:null,b=typeof n=="function"?n:typeof t=="function"?t:null,{map:C}=c;return C.hasControl(h)||(C.addControl(h,g==null?void 0:g.position),l&&l(c)),()=>{b&&b(c),C.hasControl(h)&&C.removeControl(h)}},[]),h}function vV(e){const t=Hp(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return V.useEffect(()=>{hc(t._container,e.style)},[e.style]),null}const _V=V.memo(vV);function xV(e){const t=Hp(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return V.useEffect(()=>{hc(t._controlContainer,e.style)},[e.style]),null}const bV=V.memo(xV);function wV(e,t){const n=V.useRef({props:e}),a=Hp(({mapLib:c})=>{const h=new c.GeolocateControl(e),g=h._setupUI;return h._setupUI=l=>{h._container.hasChildNodes()||g(l)},h.on("geolocate",l=>{var b,C;(C=(b=n.current.props).onGeolocate)===null||C===void 0||C.call(b,l)}),h.on("error",l=>{var b,C;(C=(b=n.current.props).onError)===null||C===void 0||C.call(b,l)}),h.on("outofmaxbounds",l=>{var b,C;(C=(b=n.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(b,l)}),h.on("trackuserlocationstart",l=>{var b,C;(C=(b=n.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(b,l)}),h.on("trackuserlocationend",l=>{var b,C;(C=(b=n.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(b,l)}),h},{position:e.position});return n.current.props=e,V.useImperativeHandle(t,()=>a,[]),V.useEffect(()=>{hc(a._container,e.style)},[e.style]),null}V.memo(V.forwardRef(wV));function SV(e){const t=Hp(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return V.useEffect(()=>{hc(t._container,e.style)},[e.style]),null}const CV=V.memo(SV);function kV(e){const t=Hp(({mapLib:h})=>new h.ScaleControl(e),{position:e.position}),n=V.useRef(e),a=n.current;n.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),V.useEffect(()=>{hc(t._container,c)},[c]),null}V.memo(kV);function Tg(e,t){if(!e)throw new Error(t)}function TV(e,t,n,a){if(Tg(n.id===a.id,"layer id changed"),Tg(n.type===a.type,"layer type changed"),n.type==="custom"||a.type==="custom")return;const{layout:c={},paint:h={},filter:g,minzoom:l,maxzoom:b,beforeId:C}=n;if(C!==a.beforeId&&e.moveLayer(t,C),c!==a.layout){const P=a.layout||{};for(const A in c)Po(c[A],P[A])||e.setLayoutProperty(t,A,c[A]);for(const A in P)c.hasOwnProperty(A)||e.setLayoutProperty(t,A,void 0)}if(h!==a.paint){const P=a.paint||{};for(const A in h)Po(h[A],P[A])||e.setPaintProperty(t,A,h[A]);for(const A in P)h.hasOwnProperty(A)||e.setPaintProperty(t,A,void 0)}Po(g,a.filter)||e.setFilter(t,g),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function IV(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const a={...n,id:t};delete a.beforeId,e.addLayer(a,n.beforeId)}}let PV=0;function EV(e){const t=V.useContext(dc).map.getMap(),n=V.useRef(e),[,a]=V.useState(0),c=V.useMemo(()=>e.id||`jsx-layer-${PV++}`,[]);if(V.useEffect(()=>{if(t){const g=()=>a(l=>l+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{TV(t,c,e,n.current)}catch(g){console.warn(g)}else IV(t,c,e);return n.current=e,null}let zV=0;function AV(e,t,n){if(e.style&&e.style._loaded){const a={...n};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function MV(e,t,n){Tg(t.id===n.id,"source id changed"),Tg(t.type===n.type,"source type changed");let a="",c=0;for(const g in t)g!=="children"&&g!=="id"&&!Po(n[g],t[g])&&(a=g,c++);if(!c)return;const h=t.type;if(h==="geojson")e.setData(t.data);else if(h==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function DV(e){const t=V.useContext(dc).map.getMap(),n=V.useRef(e),[,a]=V.useState(0),c=V.useMemo(()=>e.id||`jsx-source-${zV++}`,[]);V.useEffect(()=>{if(t){const g=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",g),g(),()=>{var l;if(t.off("styledata",g),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const C of b)C.source===c&&t.removeLayer(C.id);t.removeSource(c)}}}},[t]);let h=t&&t.style&&t.getSource(c);return h?MV(h,e,n.current):h=AV(t,c,e),n.current=e,h&&V.Children.map(e.children,g=>g&&V.cloneElement(g,{source:c}))||null}function eE(){return tV()}const RV=eV(()=>Promise.resolve().then(()=>LV),void 0),tE=V.forwardRef(function(t,n){return fV(t,n,RV)}),rE=_V,nE=bV,iE=CV,Ur=EV,Wp=DV;var oE={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(NA,function(){var n,a,c;function h(l,b){if(!n)n=b;else if(!a)a=b;else{var C="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",P={};n(P),c=b(P),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}h(["exports"],function(l){function b(o,r,s,d){return new(s||(s=Promise))(function(f,v){function x(E){try{T(d.next(E))}catch(R){v(R)}}function w(E){try{T(d.throw(E))}catch(R){v(R)}}function T(E){var R;E.done?f(E.value):(R=E.value,R instanceof s?R:new s(function(j){j(R)})).then(x,w)}T((d=d.apply(o,r||[])).next())})}function C(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var P=A;function A(o,r){this.x=o,this.y=r}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,s=o.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),s=Math.sin(o),d=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=d,this},_rotateAround:function(o,r){var s=Math.cos(o),d=Math.sin(o),f=r.y+d*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-d*(this.y-r.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(o){return o instanceof A?o:Array.isArray(o)?new A(o[0],o[1]):o};var D=C(P),W=Z;function Z(o,r,s,d){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=s,this.p2y=d}Z.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,d=0;d<8;d++){var f=this.sampleCurveX(s)-o;if(Math.abs(f)<r)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,w=1;for(s=o,d=0;d<20&&(f=this.sampleCurveX(s),!(Math.abs(f-o)<r));d++)o>f?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var U=C(W);let J,O;function $(){return J==null&&(J=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),J}function N(){if(O==null&&(O=!1,$())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let d=0;d<5*5;d++){const f=4*d;r.fillStyle=`rgb(${f},${f+1},${f+2})`,r.fillRect(d%5,Math.floor(d/5),1,1)}const s=r.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&s[d]!==d){O=!0;break}}}return O||!1}function ie(o,r,s,d){const f=new U(o,r,s,d);return function(v){return f.solve(v)}}const te=ie(.25,.1,.25,1);function ee(o,r,s){return Math.min(s,Math.max(r,o))}function re(o,r,s){const d=s-r,f=((o-r)%d+d)%d+r;return f===r?s:f}function fe(o,...r){for(const s of r)for(const d in s)o[d]=s[d];return o}let Te=1;function be(o,r,s){const d={};for(const f in o)d[f]=r.call(s||this,o[f],f,o);return d}function ze(o,r,s){const d={};for(const f in o)r.call(s||this,o[f],f,o)&&(d[f]=o[f]);return d}function Ee(o){return Array.isArray(o)?o.map(Ee):typeof o=="object"&&o?be(o,Ee):o}const Fe={};function Ye(o){Fe[o]||(typeof console<"u"&&console.warn(o),Fe[o]=!0)}function Ke(o,r,s){return(s.y-o.y)*(r.x-o.x)>(r.y-o.y)*(s.x-o.x)}function Re(o){let r=0;for(let s,d,f=0,v=o.length,x=v-1;f<v;x=f++)s=o[f],d=o[x],r+=(d.x-s.x)*(s.y+d.y);return r}function Ue(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ne=null;function Xe(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ft(o,r,s,d,f){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),T=new Uint8ClampedArray(d*f*4);if(yield v.copyTo(T,function(E,R,j,G,X){const Y=4*Math.max(-R,0),se=(Math.max(0,j)-j)*G*4+Y,me=4*G,ye=Math.max(0,R),ke=Math.max(0,j);return{rect:{x:ye,y:ke,width:Math.min(E.width,R+G)-ye,height:Math.min(E.height,j+X)-ke},layout:[{offset:se,stride:me}]}}(o,r,s,d,f)),w)for(let E=0;E<T.length;E+=4){const R=T[E];T[E]=T[E+2],T[E+2]=R}return T}finally{v.close()}})}let it,Et,mt,zt;const tr={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const r=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(o,r=0){return this.getImageCanvasContext(o).getImageData(-r,-r,o.width+2*r,o.height+2*r)},getImageCanvasContext(o){const r=window.document.createElement("canvas"),s=r.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return r.width=o.width,r.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(mt||(mt=document.createElement("a")),mt.href=o,mt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(zt==null&&(zt=matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},nt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class We extends Error{constructor(r,s,d,f){super(`AJAXError: ${s} (${r}): ${d}`),this.status=r,this.statusText=s,this.url=d,this.body=f}}const st=Ue()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,bt=o=>nt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Ht(o,r){const s=new AbortController,d=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:st(),signal:s.signal});let f=!1,v=!1;return o.type==="json"&&d.headers.set("Accept","application/json"),v||fetch(d).then(x=>x.ok?(w=>{(o.type==="arrayBuffer"||o.type==="image"?w.arrayBuffer():o.type==="json"?w.json():w.text()).then(T=>{v||(f=!0,r(null,T,w.headers.get("Cache-Control"),w.headers.get("Expires")))}).catch(T=>{v||r(new Error(T.message))})})(x):x.blob().then(w=>r(new We(x.status,x.statusText,o.url,w)))).catch(x=>{x.code!==20&&r(new Error(x.message))}),{cancel:()=>{v=!0,f||s.abort()}}}const Wt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Ue()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r);if(!Ue())return(bt(o.url)||Ht)(o,r)}if(!(/^file:/.test(s=o.url)||/^file:/.test(st())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ht(o,r);if(Ue()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var s;return function(d,f){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(v.responseType="arraybuffer");for(const x in d.headers)v.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(d.type==="json")try{x=JSON.parse(v.response)}catch(w){return f(w)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});f(new We(v.status,v.statusText,d.url,x))}},v.send(d.body),{cancel:()=>v.abort()}}(o,r)},Er=function(o,r){return Wt(fe(o,{type:"arrayBuffer"}),r)};function Tr(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),s=window.location;return r.protocol===s.protocol&&r.host===s.host}function $t(o,r,s){s[o]&&s[o].indexOf(r)!==-1||(s[o]=s[o]||[],s[o].push(r))}function wt(o,r,s){if(s&&s[o]){const d=s[o].indexOf(r);d!==-1&&s[o].splice(d,1)}}class or{constructor(r,s={}){fe(this,s),this.type=r}}class Gt extends or{constructor(r,s={}){super("error",fe({error:r},s))}}class Cr{on(r,s){return this._listeners=this._listeners||{},$t(r,s,this._listeners),this}off(r,s){return wt(r,s,this._listeners),wt(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},$t(r,s,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,s){typeof r=="string"&&(r=new or(r,s||{}));const d=r.type;if(this.listens(d)){r.target=this;const f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const w of f)w.call(this,r);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const w of v)wt(d,w,this._oneTimeListeners),w.call(this,r);const x=this._eventedParent;x&&(fe(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof Gt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var $e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sr(o,r){const s={};for(const d in o)d!=="ref"&&(s[d]=o[d]);return pr.forEach(d=>{d in r&&(s[d]=r[d])}),s}function Yt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let s=0;s<o.length;s++)if(!Yt(o[s],r[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const s in o)if(!Yt(o[s],r[s]))return!1;return!0}return o===r}const Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kr(o,r,s){s.push({command:Vt.addSource,args:[o,r[o]]})}function Lr(o,r,s){r.push({command:Vt.removeSource,args:[o]}),s[o]=!0}function cr(o,r,s,d){Lr(o,s,d),kr(o,r,s)}function Qt(o,r,s){let d;for(d in o[s])if(Object.prototype.hasOwnProperty.call(o[s],d)&&d!=="data"&&!Yt(o[s][d],r[s][d]))return!1;for(d in r[s])if(Object.prototype.hasOwnProperty.call(r[s],d)&&d!=="data"&&!Yt(o[s][d],r[s][d]))return!1;return!0}function Nt(o,r,s,d,f,v){let x;for(x in r=r||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(Yt(o[x],r[x])||s.push({command:v,args:[d,x,r[x],f]}));for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Yt(o[x],r[x])||s.push({command:v,args:[d,x,r[x],f]}))}function mr(o){return o.id}function Hr(o,r){return o[r.id]=r,o}class Pe{constructor(r,s,d,f){this.message=(r?`${r}: `:"")+d,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function ot(o,...r){for(const s of r)for(const d in s)o[d]=s[d];return o}class St extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class ir{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[d,f]of s)this.bindings[d]=f}concat(r){return new ir(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const un={kind:"null"},Ze={kind:"number"},Zt={kind:"string"},Mt={kind:"boolean"},ur={kind:"color"},xr={kind:"object"},At={kind:"value"},Se={kind:"collator"},H={kind:"formatted"},M={kind:"padding"},F={kind:"resolvedImage"},q={kind:"variableAnchorOffsetCollection"};function ne(o,r){return{kind:"array",itemType:o,N:r}}function oe(o){if(o.kind==="array"){const r=oe(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const ve=[un,Ze,Zt,Mt,ur,H,xr,ne(At),M,F,q];function he(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!he(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const s of ve)if(!he(s,r))return null}}return`Expected ${oe(o)} but found ${oe(r)} instead.`}function ue(o,r){return r.some(s=>s.kind===o.kind)}function _e(o,r){return r.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ae(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Oe=.96422,He=.82521,Ct=4/29,Tt=6/29,yt=3*Tt*Tt,Dt=Tt*Tt*Tt,Me=Math.PI/180,De=180/Math.PI;function tt(o){return(o%=360)<0&&(o+=360),o}function dt([o,r,s,d]){let f,v;const x=dr((.2225045*(o=kt(o))+.7168786*(r=kt(r))+.0606169*(s=kt(s)))/1);o===r&&r===s?f=v=x:(f=dr((.4360747*o+.3850649*r+.1430804*s)/Oe),v=dr((.0139322*o+.0971045*r+.7141733*s)/He));const w=116*x-16;return[w<0?0:w,500*(f-x),200*(x-v),d]}function kt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function dr(o){return o>Dt?Math.pow(o,1/3):o/yt+Ct}function er([o,r,s,d]){let f=(o+16)/116,v=isNaN(r)?f:f+r/500,x=isNaN(s)?f:f-s/200;return f=1*rr(f),v=Oe*rr(v),x=He*rr(x),[br(3.1338561*v-1.6168667*f-.4906146*x),br(-.9787684*v+1.9161415*f+.033454*x),br(.0719453*v-.2289914*f+1.4052427*x),d]}function br(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function rr(o){return o>Tt?o*o*o:yt*(o-Ct)}function hr(o){return parseInt(o.padEnd(2,o),16)/255}function Xn(o,r){return Vi(r?o/100:o,0,1)}function Vi(o,r,s){return Math.min(Math.max(r,o),s)}function xo(o){return!o.some(Number.isNaN)}const rd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class zr{constructor(r,s,d,f=1,v=!0){this.r=r,this.g=s,this.b=d,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[r,s,d,f]))}static parse(r){if(r instanceof zr)return r;if(typeof r!="string")return;const s=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=rd[d];if(f){const[x,w,T]=f;return[x/255,w/255,T/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let w=1;return[hr(d.slice(w,w+=x)),hr(d.slice(w,w+=x)),hr(d.slice(w,w+=x)),hr(d.slice(w,w+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,E,R,j,G,X,Y,se,me,ye,ke]=x,xe=[R||" ",X||" ",me].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Ie=[E,G,se].join(""),Be=Ie==="%%%"?100:Ie===""?255:0;if(Be){const qe=[Vi(+T/Be,0,1),Vi(+j/Be,0,1),Vi(+Y/Be,0,1),ye?Xn(+ye,ke):1];if(xo(qe))return qe}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,T,E,R,j,G,X,Y]=v,se=[T||" ",R||" ",G].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const me=[+w,Vi(+E,0,100),Vi(+j,0,100),X?Xn(+X,Y):1];if(xo(me))return function([ye,ke,xe,Ie]){function Be(qe){const _t=(qe+ye/30)%12,Lt=ke*Math.min(xe,1-xe);return xe-Lt*Math.max(-1,Math.min(_t-3,9-_t,1))}return ye=tt(ye),ke/=100,xe/=100,[Be(0),Be(8),Be(4),Ie]}(me)}}}(r);return s?new zr(...s,!1):void 0}get rgb(){const{r,g:s,b:d,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[r/v,s/v,d/v,f])}get hcl(){return this.overwriteGetter("hcl",function(r){const[s,d,f,v]=dt(r),x=Math.sqrt(d*d+f*f);return[Math.round(1e4*x)?tt(Math.atan2(f,d)*De):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",dt(this.rgb))}overwriteGetter(r,s){return Object.defineProperty(this,r,{value:s}),s}toString(){const[r,s,d,f]=this.rgb;return`rgba(${[r,s,d].map(v=>Math.round(255*v)).join(",")},${f})`}}zr.black=new zr(0,0,0,1),zr.white=new zr(1,1,1,1),zr.transparent=new zr(0,0,0,0),zr.red=new zr(1,0,0,1);class Ps{constructor(r,s,d){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ar{constructor(r,s,d,f,v){this.text=r,this.image=s,this.scale=d,this.fontStack=f,this.textColor=v}}class Or{constructor(r){this.sections=r}static fromString(r){return new Or([new ar(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Or?r:Or.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class $r{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof $r)return r;if(typeof r=="number")return new $r([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const s of r)if(typeof s!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new $r(r)}}toString(){return JSON.stringify(this.values)}}const za=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $n{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof $n)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let s=0;s<r.length;s+=2){const d=r[s],f=r[s+1];if(typeof d!="string"||!za.has(d)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new $n(r)}}toString(){return JSON.stringify(this.values)}}class Bn{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Bn({name:r,available:!1}):null}}function Ui(o,r,s,d){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[o,r,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[o,r,s,d]:[o,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fi(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof zr||o instanceof Ps||o instanceof Or||o instanceof $r||o instanceof $n||o instanceof Bn)return!0;if(Array.isArray(o)){for(const r of o)if(!fi(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!fi(o[r]))return!1;return!0}return!1}function rn(o){if(o===null)return un;if(typeof o=="string")return Zt;if(typeof o=="boolean")return Mt;if(typeof o=="number")return Ze;if(o instanceof zr)return ur;if(o instanceof Ps)return Se;if(o instanceof Or)return H;if(o instanceof $r)return M;if(o instanceof $n)return q;if(o instanceof Bn)return F;if(Array.isArray(o)){const r=o.length;let s;for(const d of o){const f=rn(d);if(s){if(s===f)continue;s=At;break}s=f}return ne(s||At,r)}return xr}function Ar(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof zr||o instanceof Or||o instanceof $r||o instanceof $n||o instanceof Bn?o.toString():JSON.stringify(o)}class Ja{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!fi(r[1]))return s.error("invalid value");const d=r[1];let f=rn(d);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new Ja(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class dn{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const pc={string:Zt,number:Ze,boolean:Mt,object:xr};class io{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let d,f=1;const v=r[0];if(v==="array"){let w,T;if(r.length>2){const E=r[1];if(typeof E!="string"||!(E in pc)||E==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=pc[E],f++}else w=At;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=r[2],f++}d=ne(w,T)}else{if(!pc[v])throw new Error(`Types doesn't contain name = ${v}`);d=pc[v]}const x=[];for(;f<r.length;f++){const w=s.parse(r[f],f,At);if(!w)return null;x.push(w)}return new io(d,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(r);if(!he(this.type,rn(d)))return d;if(s===this.args.length-1)throw new dn(`Expected value to be of type ${oe(this.type)}, but found ${oe(rn(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const nd={"to-boolean":Mt,"to-color":ur,"to-number":Ze,"to-string":Zt};class Aa{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[0];if(!nd[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return s.error("Expected one argument.");const f=nd[d],v=[];for(let x=1;x<r.length;x++){const w=s.parse(r[x],x,At);if(!w)return null;v.push(w)}return new Aa(f,v)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let s,d;for(const f of this.args){if(s=f.evaluate(r),d=null,s instanceof zr)return s;if(typeof s=="string"){const v=r.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ui(s[0],s[1],s[2],s[3]),!d))return new zr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new dn(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const d of this.args){s=d.evaluate(r);const f=$r.parse(s);if(f)return f}throw new dn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const d of this.args){s=d.evaluate(r);const f=$n.parse(s);if(f)return f}throw new dn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const d of this.args){if(s=d.evaluate(r),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new dn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Or.fromString(Ar(this.args[0].evaluate(r)));case"resolvedImage":return Bn.fromString(Ar(this.args[0].evaluate(r)));default:return Ar(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Zp=["Unknown","Point","LineString","Polygon"];class id{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=zr.parse(r)),s}}class fc{constructor(r,s,d=[],f,v=new ir,x=[]){this.registry=r,this.path=d,this.key=d.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(r,s,d,f,v={}){return s?this.concat(s,d,f)._parse(r,v):this._parse(r,v)}_parse(r,s){function d(f,v,x){return x==="assert"?new io(v,[f]):x==="coerce"?new Aa(v,[f]):f}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=r[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(r,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,T=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||T.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(w.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(w,T))return null}else x=d(x,w,s.typeAnnotation||"coerce");else x=d(x,w,s.typeAnnotation||"coerce");else x=d(x,w,s.typeAnnotation||"coerce");else x=d(x,w,s.typeAnnotation||"assert")}if(!(x instanceof Ja)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new id;try{x=new Ja(x.type,x.evaluate(w))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,d){const f=typeof r=="number"?this.path.concat(r):this.path,v=d?this.scope.concat(d):this.scope;return new fc(this.registry,this._isConstant,f,s||null,v,this.errors)}error(r,...s){const d=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new St(d,r))}checkSubtype(r,s){const d=he(r,s);return d&&this.error(d),d}}class mc{constructor(r,s,d){this.type=Se,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const f=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Mt);if(!f)return null;const v=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Mt);if(!v)return null;let x=null;return d.locale&&(x=s.parse(d.locale,1,Zt),!x)?null:new mc(f,v,x)}evaluate(r){return new Ps(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}const Ma=8192;function od(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function vl(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function Kp(o,r){const s=(180+o[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,f=Math.pow(2,r.z);return[Math.round(s*f*Ma),Math.round(d*f*Ma)]}function Ly(o,r,s){const d=o[0]-r[0],f=o[1]-r[1],v=o[0]-s[0],x=o[1]-s[1];return d*x-v*f==0&&d*v<=0&&f*x<=0}function ad(o,r){let s=!1;for(let x=0,w=r.length;x<w;x++){const T=r[x];for(let E=0,R=T.length;E<R-1;E++){if(Ly(o,T[E],T[E+1]))return!1;(f=T[E])[1]>(d=o)[1]!=(v=T[E+1])[1]>d[1]&&d[0]<(v[0]-f[0])*(d[1]-f[1])/(v[1]-f[1])+f[0]&&(s=!s)}}var d,f,v;return s}function sd(o,r){for(let s=0;s<r.length;s++)if(ad(o,r[s]))return!0;return!1}function Xp(o,r,s,d){const f=d[0]-s[0],v=d[1]-s[1],x=(o[0]-s[0])*v-f*(o[1]-s[1]),w=(r[0]-s[0])*v-f*(r[1]-s[1]);return x>0&&w<0||x<0&&w>0}function $y(o,r,s){for(const E of s)for(let R=0;R<E.length-1;++R)if((w=[(x=E[R+1])[0]-(v=E[R])[0],x[1]-v[1]])[0]*(T=[(f=r)[0]-(d=o)[0],f[1]-d[1]])[1]-w[1]*T[0]!=0&&Xp(d,f,v,x)&&Xp(v,x,d,f))return!0;var d,f,v,x,w,T;return!1}function Jp(o,r){for(let s=0;s<o.length;++s)if(!ad(o[s],r))return!1;for(let s=0;s<o.length-1;++s)if($y(o[s],o[s+1],r))return!1;return!0}function Yp(o,r){for(let s=0;s<r.length;s++)if(Jp(o,r[s]))return!0;return!1}function gc(o,r,s){const d=[];for(let f=0;f<o.length;f++){const v=[];for(let x=0;x<o[f].length;x++){const w=Kp(o[f][x],s);od(r,w),v.push(w)}d.push(v)}return d}function Qp(o,r,s){const d=[];for(let f=0;f<o.length;f++){const v=gc(o[f],r,s);d.push(v)}return d}function ef(o,r,s,d){if(o[0]<s[0]||o[0]>s[2]){const f=.5*d;let v=o[0]-s[0]>f?-d:s[0]-o[0]>f?d:0;v===0&&(v=o[0]-s[2]>f?-d:s[2]-o[0]>f?d:0),o[0]+=v}od(r,o)}function ld(o,r,s,d){const f=Math.pow(2,d.z)*Ma,v=[d.x*Ma,d.y*Ma],x=[];for(const w of o)for(const T of w){const E=[T.x+v[0],T.y+v[1]];ef(E,r,s,f),x.push(E)}return x}function cd(o,r,s,d){const f=Math.pow(2,d.z)*Ma,v=[d.x*Ma,d.y*Ma],x=[];for(const T of o){const E=[];for(const R of T){const j=[R.x+v[0],R.y+v[1]];od(r,j),E.push(j)}x.push(E)}if(r[2]-r[0]<=f/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const T of x)for(const E of T)ef(E,r,s,f)}var w;return x}class Ya{constructor(r,s){this.type=Mt,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(fi(r[1])){const d=r[1];if(d.type==="FeatureCollection")for(let f=0;f<d.features.length;++f){const v=d.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ya(d,d.features[f].geometry)}else if(d.type==="Feature"){const f=d.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Ya(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Ya(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,d){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const w=gc(d.coordinates,v,x),T=ld(s.geometry(),f,v,x);if(!vl(f,v))return!1;for(const E of T)if(!ad(E,w))return!1}if(d.type==="MultiPolygon"){const w=Qp(d.coordinates,v,x),T=ld(s.geometry(),f,v,x);if(!vl(f,v))return!1;for(const E of T)if(!sd(E,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,d){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const w=gc(d.coordinates,v,x),T=cd(s.geometry(),f,v,x);if(!vl(f,v))return!1;for(const E of T)if(!Jp(E,w))return!1}if(d.type==="MultiPolygon"){const w=Qp(d.coordinates,v,x),T=cd(s.geometry(),f,v,x);if(!vl(f,v))return!1;for(const E of T)if(!Yp(E,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class yc{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=r[1];return s.scope.has(d)?new yc(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class oo{constructor(r,s,d,f){this.name=r,this.type=s,this._evaluate=d,this.args=f}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,s){const d=r[0],f=oo.definitions[d];if(!f)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=x.filter(([E])=>!Array.isArray(E)||E.length===r.length-1);let T=null;for(const[E,R]of w){T=new fc(s.registry,vc,s.path,null,s.scope);const j=[];let G=!1;for(let X=1;X<r.length;X++){const Y=r[X],se=Array.isArray(E)?E[X-1]:E.type,me=T.parse(Y,1+j.length,se);if(!me){G=!0;break}j.push(me)}if(!G)if(Array.isArray(E)&&E.length!==j.length)T.error(`Expected ${E.length} arguments, but found ${j.length} instead.`);else{for(let X=0;X<j.length;X++){const Y=Array.isArray(E)?E[X]:E.type,se=j[X];T.concat(X+1).checkSubtype(Y,se.type)}if(T.errors.length===0)return new oo(d,v,R,j)}}if(w.length===1)s.errors.push(...T.errors);else{const E=(w.length?w:x).map(([j])=>{return G=j,Array.isArray(G)?`(${G.map(oe).join(", ")})`:`(${oe(G.type)}...)`;var G}).join(" | "),R=[];for(let j=1;j<r.length;j++){const G=s.parse(r[j],1+R.length);if(!G)return null;R.push(oe(G.type))}s.error(`Expected arguments of type ${E}, but found (${R.join(", ")}) instead.`)}return null}static register(r,s){oo.definitions=s;for(const d in s)r[d]=oo}}function vc(o){if(o instanceof yc)return vc(o.boundExpression);if(o instanceof oo&&o.name==="error"||o instanceof mc||o instanceof Ya)return!1;const r=o instanceof Aa||o instanceof io;let s=!0;return o.eachChild(d=>{s=r?s&&vc(d):s&&d instanceof Ja}),!!s&&_c(o)&&xc(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _c(o){if(o instanceof oo&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Ya)return!1;let r=!0;return o.eachChild(s=>{r&&!_c(s)&&(r=!1)}),r}function _l(o){if(o instanceof oo&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(s=>{r&&!_l(s)&&(r=!1)}),r}function xc(o,r){if(o instanceof oo&&r.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(d=>{s&&!xc(d,r)&&(s=!1)}),s}function Es(o,r){const s=o.length-1;let d,f,v=0,x=s,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),d=o[w],f=o[w+1],d<=r){if(w===s||r<f)return w;v=w+1}else{if(!(d>r))throw new dn("Input is not a number.");x=w-1}return 0}class Da{constructor(r,s,d){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of d)this.labels.push(f),this.outputs.push(v)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(r[1],1,Ze);if(!d)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<r.length;x+=2){const w=x===1?-1/0:r[x],T=r[x+1],E=x,R=x+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(f.length&&f[f.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const j=s.parse(T,R,v);if(!j)return null;v=v||j.type,f.push([w,j])}return new Da(v,d,f)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const f=this.input.evaluate(r);if(f<=s[0])return d[0].evaluate(r);const v=s.length;return f>=s[v-1]?d[v-1].evaluate(r):d[Es(s,f)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function wr(o,r,s){return o+s*(r-o)}function bc(o,r,s){return o.map((d,f)=>wr(d,r[f],s))}const Hi={number:wr,color:function(o,r,s,d="rgb"){switch(d){case"rgb":{const[f,v,x,w]=bc(o.rgb,r.rgb,s);return new zr(f,v,x,w,!1)}case"hcl":{const[f,v,x,w]=o.hcl,[T,E,R,j]=r.hcl;let G,X;if(isNaN(f)||isNaN(T))isNaN(f)?isNaN(T)?G=NaN:(G=T,x!==1&&x!==0||(X=E)):(G=f,R!==1&&R!==0||(X=v));else{let ke=T-f;T>f&&ke>180?ke-=360:T<f&&f-T>180&&(ke+=360),G=f+s*ke}const[Y,se,me,ye]=function([ke,xe,Ie,Be]){return ke=isNaN(ke)?0:ke*Me,er([Ie,Math.cos(ke)*xe,Math.sin(ke)*xe,Be])}([G,X??wr(v,E,s),wr(x,R,s),wr(w,j,s)]);return new zr(Y,se,me,ye,!1)}case"lab":{const[f,v,x,w]=er(bc(o.lab,r.lab,s));return new zr(f,v,x,w,!1)}}},array:bc,padding:function(o,r,s){return new $r(bc(o.values,r.values,s))},variableAnchorOffsetCollection:function(o,r,s){const d=o.values,f=r.values;if(d.length!==f.length)throw new dn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${r.toString()}`);const v=[];for(let x=0;x<d.length;x+=2){if(d[x]!==f[x])throw new dn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${f[x]}`);v.push(d[x]);const[w,T]=d[x+1],[E,R]=f[x+1];v.push([wr(w,E,s),wr(T,R,s)])}return new $n(v)}};class Wi{constructor(r,s,d,f,v){this.type=r,this.operator=s,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(r,s,d,f){let v=0;if(r.name==="exponential")v=ud(s,r.base,d,f);else if(r.name==="linear")v=ud(s,1,d,f);else if(r.name==="cubic-bezier"){const x=r.controlPoints;v=new U(x[0],x[1],x[2],x[3]).solve(ud(s,1,d,f))}return v}static parse(r,s){let[d,f,v,...x]=r;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const E=f[1];if(typeof E!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:E}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const E=f.slice(1);if(E.length!==4||E.some(R=>typeof R!="number"||R<0||R>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:E}}}if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Ze),!v)return null;const w=[];let T=null;d==="interpolate-hcl"||d==="interpolate-lab"?T=ur:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let E=0;E<x.length;E+=2){const R=x[E],j=x[E+1],G=E+3,X=E+4;if(typeof R!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(w.length&&w[w.length-1][0]>=R)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const Y=s.parse(j,X,T);if(!Y)return null;T=T||Y.type,w.push([R,Y])}return Ae(T,Ze)||Ae(T,ur)||Ae(T,M)||Ae(T,q)||Ae(T,ne(Ze))?new Wi(T,d,f,v,w):s.error(`Type ${oe(T)} is not interpolatable.`)}evaluate(r){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(r);const f=this.input.evaluate(r);if(f<=s[0])return d[0].evaluate(r);const v=s.length;if(f>=s[v-1])return d[v-1].evaluate(r);const x=Es(s,f),w=Wi.interpolationFactor(this.interpolation,f,s[x],s[x+1]),T=d[x].evaluate(r),E=d[x+1].evaluate(r);switch(this.operator){case"interpolate":return Hi[this.type.kind](T,E,w);case"interpolate-hcl":return Hi.color(T,E,w,"hcl");case"interpolate-lab":return Hi.color(T,E,w,"lab")}}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function ud(o,r,s,d){const f=d-s,v=o-s;return f===0?0:r===1?v/f:(Math.pow(r,v)-1)/(Math.pow(r,f)-1)}class wc{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let d=null;const f=s.expectedType;f&&f.kind!=="value"&&(d=f);const v=[];for(const w of r.slice(1)){const T=s.parse(w,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,v.push(T)}if(!d)throw new Error("No output type");const x=f&&v.some(w=>he(f,w.type));return new wc(x?At:d,v)}evaluate(r){let s,d=null,f=0;for(const v of this.args)if(f++,d=v.evaluate(r),d&&d instanceof Bn&&!d.available&&(s||(s=d.name),d=null,f===this.args.length&&(d=s)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}class Sc{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let v=1;v<r.length-1;v+=2){const x=r[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=s.parse(r[v+1],v+1);if(!w)return null;d.push([x,w])}const f=s.parse(r[r.length-1],r.length-1,s.expectedType,d);return f?new Sc(d,f):null}outputDefined(){return this.result.outputDefined()}}class dd{constructor(r,s,d){this.type=r,this.index=s,this.input=d}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,Ze),f=s.parse(r[2],2,ne(s.expectedType||At));return d&&f?new dd(f.type.itemType,d,f):null}evaluate(r){const s=this.index.evaluate(r),d=this.input.evaluate(r);if(s<0)throw new dn(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new dn(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new dn(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class hd{constructor(r,s){this.type=Mt,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,At),f=s.parse(r[2],2,At);return d&&f?ue(d.type,[Mt,Zt,Ze,un,At])?new hd(d,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(d.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!_e(s,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${oe(rn(s))} instead.`);if(!_e(d,["string","array"]))throw new dn(`Expected second argument to be of type array or string, but found ${oe(rn(d))} instead.`);return d.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Cc{constructor(r,s,d){this.type=Ze,this.needle=r,this.haystack=s,this.fromIndex=d}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,At),f=s.parse(r[2],2,At);if(!d||!f)return null;if(!ue(d.type,[Mt,Zt,Ze,un,At]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(d.type)} instead`);if(r.length===4){const v=s.parse(r[3],3,Ze);return v?new Cc(d,f,v):null}return new Cc(d,f)}evaluate(r){const s=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!_e(s,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${oe(rn(s))} instead.`);if(!_e(d,["string","array"]))throw new dn(`Expected second argument to be of type array or string, but found ${oe(rn(d))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(r);return d.indexOf(s,f)}return d.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class pd{constructor(r,s,d,f,v,x){this.inputType=r,this.type=s,this.input=d,this.cases=f,this.outputs=v,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let d,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let E=2;E<r.length-1;E+=2){let R=r[E];const j=r[E+1];Array.isArray(R)||(R=[R]);const G=s.concat(E);if(R.length===0)return G.error("Expected at least one branch label.");for(const Y of R){if(typeof Y!="number"&&typeof Y!="string")return G.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return G.error("Numeric branch labels must be integer values.");if(d){if(G.checkSubtype(d,rn(Y)))return null}else d=rn(Y);if(v[String(Y)]!==void 0)return G.error("Branch labels must be unique.");v[String(Y)]=x.length}const X=s.parse(j,E,f);if(!X)return null;f=f||X.type,x.push(X)}const w=s.parse(r[1],1,At);if(!w)return null;const T=s.parse(r[r.length-1],r.length-1,f);return T?w.type.kind!=="value"&&s.concat(1).checkSubtype(d,w.type)?null:new pd(d,f,w,v,x,T):null}evaluate(r){const s=this.input.evaluate(r);return(rn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class fd{constructor(r,s,d){this.type=r,this.branches=s,this.otherwise=d}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const f=[];for(let x=1;x<r.length-1;x+=2){const w=s.parse(r[x],x,Mt);if(!w)return null;const T=s.parse(r[x+1],x+1,d);if(!T)return null;f.push([w,T]),d=d||T.type}const v=s.parse(r[r.length-1],r.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new fd(d,f,v)}evaluate(r){for(const[s,d]of this.branches)if(s.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,d]of this.branches)r(s),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class kc{constructor(r,s,d,f){this.type=r,this.input=s,this.beginIndex=d,this.endIndex=f}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=s.parse(r[1],1,At),f=s.parse(r[2],2,Ze);if(!d||!f)return null;if(!ue(d.type,[ne(At),Zt,At]))return s.error(`Expected first argument to be of type array or string, but found ${oe(d.type)} instead`);if(r.length===4){const v=s.parse(r[3],3,Ze);return v?new kc(d.type,d,f,v):null}return new kc(d.type,d,f)}evaluate(r){const s=this.input.evaluate(r),d=this.beginIndex.evaluate(r);if(!_e(s,["string","array"]))throw new dn(`Expected first argument to be of type array or string, but found ${oe(rn(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(r);return s.slice(d,f)}return s.slice(d)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function tf(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function rf(o,r,s,d){return d.compare(r,s)===0}function zs(o,r,s){const d=o!=="=="&&o!=="!=";return class aE{constructor(v,x,w){this.type=Mt,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let T=x.parse(v[1],1,At);if(!T)return null;if(!tf(w,T.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${oe(T.type)}'.`);let E=x.parse(v[2],2,At);if(!E)return null;if(!tf(w,E.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${oe(E.type)}'.`);if(T.type.kind!==E.type.kind&&T.type.kind!=="value"&&E.type.kind!=="value")return x.error(`Cannot compare types '${oe(T.type)}' and '${oe(E.type)}'.`);d&&(T.type.kind==="value"&&E.type.kind!=="value"?T=new io(E.type,[T]):T.type.kind!=="value"&&E.type.kind==="value"&&(E=new io(T.type,[E])));let R=null;if(v.length===4){if(T.type.kind!=="string"&&E.type.kind!=="string"&&T.type.kind!=="value"&&E.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(v[3],3,Se),!R)return null}return new aE(T,E,R)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const T=rn(x),E=rn(w);if(T.kind!==E.kind||T.kind!=="string"&&T.kind!=="number")throw new dn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${T.kind}, ${E.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=rn(x),E=rn(w);if(T.kind!=="string"||E.kind!=="string")return r(v,x,w)}return this.collator?s(v,x,w,this.collator.evaluate(v)):r(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const By=zs("==",function(o,r,s){return r===s},rf),Oy=zs("!=",function(o,r,s){return r!==s},function(o,r,s,d){return!rf(0,r,s,d)}),Fy=zs("<",function(o,r,s){return r<s},function(o,r,s,d){return d.compare(r,s)<0}),Ny=zs(">",function(o,r,s){return r>s},function(o,r,s,d){return d.compare(r,s)>0}),jy=zs("<=",function(o,r,s){return r<=s},function(o,r,s,d){return d.compare(r,s)<=0}),Vy=zs(">=",function(o,r,s){return r>=s},function(o,r,s,d){return d.compare(r,s)>=0});class md{constructor(r,s,d,f,v){this.type=Zt,this.number=r,this.locale=s,this.currency=d,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const d=s.parse(r[1],1,Ze);if(!d)return null;const f=r[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,Zt),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,Zt),!x))return null;let w=null;if(f["min-fraction-digits"]&&(w=s.parse(f["min-fraction-digits"],1,Ze),!w))return null;let T=null;return f["max-fraction-digits"]&&(T=s.parse(f["max-fraction-digits"],1,Ze),!T)?null:new md(d,v,x,w,T)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Tc{constructor(r){this.type=H,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=r.length-1;++x){const w=r[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let T=null;if(w["font-scale"]&&(T=s.parse(w["font-scale"],1,Ze),!T))return null;let E=null;if(w["text-font"]&&(E=s.parse(w["text-font"],1,ne(Zt)),!E))return null;let R=null;if(w["text-color"]&&(R=s.parse(w["text-color"],1,ur),!R))return null;const j=f[f.length-1];j.scale=T,j.font=E,j.textColor=R}else{const T=s.parse(r[x],1,At);if(!T)return null;const E=T.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:T,scale:null,font:null,textColor:null})}}return new Tc(f)}evaluate(r){return new Or(this.sections.map(s=>{const d=s.content.evaluate(r);return rn(d)===F?new ar("",d,null,null,null):new ar(Ar(d),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}}class gd{constructor(r){this.type=F,this.input=r}static parse(r,s){if(r.length!==2)return s.error("Expected two arguments.");const d=s.parse(r[1],1,Zt);return d?new gd(d):s.error("No image name provided.")}evaluate(r){const s=this.input.evaluate(r),d=Bn.fromString(s);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(s)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class yd{constructor(r){this.type=Ze,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=s.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${oe(d.type)} instead.`):new yd(d):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new dn(`Expected value to be of type string or array, but found ${oe(rn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const As={"==":By,"!=":Oy,">":Ny,"<":Fy,">=":Vy,"<=":jy,array:io,at:dd,boolean:io,case:fd,coalesce:wc,collator:mc,format:Tc,image:gd,in:hd,"index-of":Cc,interpolate:Wi,"interpolate-hcl":Wi,"interpolate-lab":Wi,length:yd,let:Sc,literal:Ja,match:pd,number:io,"number-format":md,object:io,slice:kc,step:Da,string:io,"to-boolean":Aa,"to-color":Aa,"to-number":Aa,"to-string":Aa,var:yc,within:Ya};function nf(o,[r,s,d,f]){r=r.evaluate(o),s=s.evaluate(o),d=d.evaluate(o);const v=f?f.evaluate(o):1,x=Ui(r,s,d,v);if(x)throw new dn(x);return new zr(r/255,s/255,d/255,v,!1)}function of(o,r){return o in r}function vd(o,r){const s=r[o];return s===void 0?null:s}function Qa(o){return{type:o}}function af(o){return{result:"success",value:o}}function Ra(o){return{result:"error",value:o}}function Ms(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function sf(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function _d(o){return!!o.expression&&o.expression.interpolated}function Mr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function nn(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Uy(o){return o}function Sr(o,r){const s=r.type==="color",d=o.stops&&typeof o.stops[0][0]=="object",f=d||!(d||o.property!==void 0),v=o.type||(_d(r)?"exponential":"interval");if(s||r.type==="padding"){const R=s?zr.parse:$r.parse;(o=ot({},o)).stops&&(o.stops=o.stops.map(j=>[j[0],R(j[1])])),o.default=R(o.default?o.default:r.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let w,T,E;if(v==="exponential")w=xl;else if(v==="interval")w=en;else if(v==="categorical"){w=on,T=Object.create(null);for(const R of o.stops)T[R[0]]=R[1];E=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=lf}if(d){const R={},j=[];for(let Y=0;Y<o.stops.length;Y++){const se=o.stops[Y],me=se[0].zoom;R[me]===void 0&&(R[me]={zoom:me,type:o.type,property:o.property,default:o.default,stops:[]},j.push(me)),R[me].stops.push([se[0].value,se[1]])}const G=[];for(const Y of j)G.push([R[Y].zoom,Sr(R[Y],r)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Wi.interpolationFactor.bind(void 0,X),zoomStops:G.map(Y=>Y[0]),evaluate:({zoom:Y},se)=>xl({stops:G,base:o.base},r,Y).evaluate(Y,se)}}if(f){const R=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Wi.interpolationFactor.bind(void 0,R),zoomStops:o.stops.map(j=>j[0]),evaluate:({zoom:j})=>w(o,r,j,T,E)}}return{kind:"source",evaluate(R,j){const G=j&&j.properties?j.properties[o.property]:void 0;return G===void 0?es(o.default,r.default):w(o,r,G,T,E)}}}function es(o,r,s){return o!==void 0?o:r!==void 0?r:s!==void 0?s:void 0}function on(o,r,s,d,f){return es(typeof s===f?d[s]:void 0,o.default,r.default)}function en(o,r,s){if(Mr(s)!=="number")return es(o.default,r.default);const d=o.stops.length;if(d===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[d-1][0])return o.stops[d-1][1];const f=Es(o.stops.map(v=>v[0]),s);return o.stops[f][1]}function xl(o,r,s){const d=o.base!==void 0?o.base:1;if(Mr(s)!=="number")return es(o.default,r.default);const f=o.stops.length;if(f===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[f-1][0])return o.stops[f-1][1];const v=Es(o.stops.map(R=>R[0]),s),x=function(R,j,G,X){const Y=X-G,se=R-G;return Y===0?0:j===1?se/Y:(Math.pow(j,se)-1)/(Math.pow(j,Y)-1)}(s,d,o.stops[v][0],o.stops[v+1][0]),w=o.stops[v][1],T=o.stops[v+1][1],E=Hi[r.type]||Uy;return typeof w.evaluate=="function"?{evaluate(...R){const j=w.evaluate.apply(void 0,R),G=T.evaluate.apply(void 0,R);if(j!==void 0&&G!==void 0)return E(j,G,x,o.colorSpace)}}:E(w,T,x,o.colorSpace)}function lf(o,r,s){switch(r.type){case"color":s=zr.parse(s);break;case"formatted":s=Or.fromString(s.toString());break;case"resolvedImage":s=Bn.fromString(s.toString());break;case"padding":s=$r.parse(s);break;default:Mr(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0)}return es(s,o.default,r.default)}oo.register(As,{error:[{kind:"error"},[Zt],(o,[r])=>{throw new dn(r.evaluate(o))}],typeof:[Zt,[At],(o,[r])=>oe(rn(r.evaluate(o)))],"to-rgba":[ne(Ze,4),[ur],(o,[r])=>{const[s,d,f,v]=r.evaluate(o).rgb;return[255*s,255*d,255*f,v]}],rgb:[ur,[Ze,Ze,Ze],nf],rgba:[ur,[Ze,Ze,Ze,Ze],nf],has:{type:Mt,overloads:[[[Zt],(o,[r])=>of(r.evaluate(o),o.properties())],[[Zt,xr],(o,[r,s])=>of(r.evaluate(o),s.evaluate(o))]]},get:{type:At,overloads:[[[Zt],(o,[r])=>vd(r.evaluate(o),o.properties())],[[Zt,xr],(o,[r,s])=>vd(r.evaluate(o),s.evaluate(o))]]},"feature-state":[At,[Zt],(o,[r])=>vd(r.evaluate(o),o.featureState||{})],properties:[xr,[],o=>o.properties()],"geometry-type":[Zt,[],o=>o.geometryType()],id:[At,[],o=>o.id()],zoom:[Ze,[],o=>o.globals.zoom],"heatmap-density":[Ze,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ze,[],o=>o.globals.lineProgress||0],accumulated:[At,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ze,Qa(Ze),(o,r)=>{let s=0;for(const d of r)s+=d.evaluate(o);return s}],"*":[Ze,Qa(Ze),(o,r)=>{let s=1;for(const d of r)s*=d.evaluate(o);return s}],"-":{type:Ze,overloads:[[[Ze,Ze],(o,[r,s])=>r.evaluate(o)-s.evaluate(o)],[[Ze],(o,[r])=>-r.evaluate(o)]]},"/":[Ze,[Ze,Ze],(o,[r,s])=>r.evaluate(o)/s.evaluate(o)],"%":[Ze,[Ze,Ze],(o,[r,s])=>r.evaluate(o)%s.evaluate(o)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(o,[r,s])=>Math.pow(r.evaluate(o),s.evaluate(o))],sqrt:[Ze,[Ze],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Ze,[Ze],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Ze,[Ze],(o,[r])=>Math.log(r.evaluate(o))],log2:[Ze,[Ze],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Ze,[Ze],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Ze,[Ze],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Ze,[Ze],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Ze,[Ze],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Ze,[Ze],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Ze,[Ze],(o,[r])=>Math.atan(r.evaluate(o))],min:[Ze,Qa(Ze),(o,r)=>Math.min(...r.map(s=>s.evaluate(o)))],max:[Ze,Qa(Ze),(o,r)=>Math.max(...r.map(s=>s.evaluate(o)))],abs:[Ze,[Ze],(o,[r])=>Math.abs(r.evaluate(o))],round:[Ze,[Ze],(o,[r])=>{const s=r.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ze,[Ze],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Ze,[Ze],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[Mt,[Zt,At],(o,[r,s])=>o.properties()[r.value]===s.value],"filter-id-==":[Mt,[At],(o,[r])=>o.id()===r.value],"filter-type-==":[Mt,[Zt],(o,[r])=>o.geometryType()===r.value],"filter-<":[Mt,[Zt,At],(o,[r,s])=>{const d=o.properties()[r.value],f=s.value;return typeof d==typeof f&&d<f}],"filter-id-<":[Mt,[At],(o,[r])=>{const s=o.id(),d=r.value;return typeof s==typeof d&&s<d}],"filter->":[Mt,[Zt,At],(o,[r,s])=>{const d=o.properties()[r.value],f=s.value;return typeof d==typeof f&&d>f}],"filter-id->":[Mt,[At],(o,[r])=>{const s=o.id(),d=r.value;return typeof s==typeof d&&s>d}],"filter-<=":[Mt,[Zt,At],(o,[r,s])=>{const d=o.properties()[r.value],f=s.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[Mt,[At],(o,[r])=>{const s=o.id(),d=r.value;return typeof s==typeof d&&s<=d}],"filter->=":[Mt,[Zt,At],(o,[r,s])=>{const d=o.properties()[r.value],f=s.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[Mt,[At],(o,[r])=>{const s=o.id(),d=r.value;return typeof s==typeof d&&s>=d}],"filter-has":[Mt,[At],(o,[r])=>r.value in o.properties()],"filter-has-id":[Mt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Mt,[ne(Zt)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[Mt,[ne(At)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[Mt,[Zt,ne(At)],(o,[r,s])=>s.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[Mt,[Zt,ne(At)],(o,[r,s])=>function(d,f,v,x){for(;v<=x;){const w=v+x>>1;if(f[w]===d)return!0;f[w]>d?x=w-1:v=w+1}return!1}(o.properties()[r.value],s.value,0,s.value.length-1)],all:{type:Mt,overloads:[[[Mt,Mt],(o,[r,s])=>r.evaluate(o)&&s.evaluate(o)],[Qa(Mt),(o,r)=>{for(const s of r)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Mt,overloads:[[[Mt,Mt],(o,[r,s])=>r.evaluate(o)||s.evaluate(o)],[Qa(Mt),(o,r)=>{for(const s of r)if(s.evaluate(o))return!0;return!1}]]},"!":[Mt,[Mt],(o,[r])=>!r.evaluate(o)],"is-supported-script":[Mt,[Zt],(o,[r])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(r.evaluate(o))}],upcase:[Zt,[Zt],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Zt,[Zt],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Zt,Qa(At),(o,r)=>r.map(s=>Ar(s.evaluate(o))).join("")],"resolved-locale":[Zt,[Se],(o,[r])=>r.evaluate(o).resolvedLocale()]});class xd{constructor(r,s){var d;this.expression=r,this._warningHistory={},this._evaluator=new id,this._defaultValue=s?(d=s).type==="color"&&nn(d.default)?new zr(0,0,0,0):d.type==="color"?zr.parse(d.default)||null:d.type==="padding"?$r.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?$n.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(r,s,d,f,v,x){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,s,d,f,v,x){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new dn(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Ic(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in As}function Pc(o,r){const s=new fc(As,vc,[],r?function(f){const v={color:ur,string:Zt,number:Ze,enum:Zt,boolean:Mt,formatted:H,padding:M,resolvedImage:F,variableAnchorOffsetCollection:q};return f.type==="array"?ne(v[f.value]||At,f.length):v[f.type]}(r):void 0),d=s.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?af(new xd(d,r)):Ra(s.errors)}class bd{constructor(r,s){this.kind=r,this._styleExpression=s,this.isStateDependent=r!=="constant"&&!_l(s.expression)}evaluateWithoutErrorHandling(r,s,d,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,f,v,x)}evaluate(r,s,d,f,v,x){return this._styleExpression.evaluate(r,s,d,f,v,x)}}class Ec{constructor(r,s,d,f){this.kind=r,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!_l(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(r,s,d,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,d,f,v,x)}evaluate(r,s,d,f,v,x){return this._styleExpression.evaluate(r,s,d,f,v,x)}interpolationFactor(r,s,d){return this.interpolationType?Wi.interpolationFactor(this.interpolationType,r,s,d):0}}function wd(o,r){const s=Pc(o,r);if(s.result==="error")return s;const d=s.value.expression,f=_c(d);if(!f&&!Ms(r))return Ra([new St("","data expressions not supported")]);const v=xc(d,["zoom"]);if(!v&&!sf(r))return Ra([new St("","zoom expressions not supported")]);const x=wl(d);return x||v?x instanceof St?Ra([x]):x instanceof Wi&&!_d(r)?Ra([new St("",'"interpolate" expressions cannot be used with this property')]):af(x?new Ec(f?"camera":"composite",s.value,x.labels,x instanceof Wi?x.interpolation:void 0):new bd(f?"constant":"source",s.value)):Ra([new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bl{constructor(r,s){this._parameters=r,this._specification=s,ot(this,Sr(this._parameters,this._specification))}static deserialize(r){return new bl(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function wl(o){let r=null;if(o instanceof Sc)r=wl(o.result);else if(o instanceof wc){for(const s of o.args)if(r=wl(s),r)break}else(o instanceof Da||o instanceof Wi)&&o.input instanceof oo&&o.input.name==="zoom"&&(r=o);return r instanceof St||o.eachChild(s=>{const d=wl(s);d instanceof St?r=d:!r&&d?r=new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new St("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Sl(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Sl(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Hy={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sd(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Sl(o)||(o=zc(o));const r=Pc(o,Hy);if(r.result==="error")throw new Error(r.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,d,f)=>r.value.evaluate(s,d,{},f),needGeometry:cf(o)}}function Wy(o,r){return o<r?-1:o>r?1:0}function cf(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(cf(o[r]))return!0;return!1}function zc(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?Cd(o[1],o[2],"=="):r==="!="?Cl(Cd(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Cd(o[1],o[2],r):r==="any"?(s=o.slice(1),["any"].concat(s.map(zc))):r==="all"?["all"].concat(o.slice(1).map(zc)):r==="none"?["all"].concat(o.slice(1).map(zc).map(Cl)):r==="in"?uf(o[1],o.slice(2)):r==="!in"?Cl(uf(o[1],o.slice(2))):r==="has"?df(o[1]):r==="!has"?Cl(df(o[1])):r!=="within"||o;var s}function Cd(o,r,s){switch(o){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,o,r]}}function uf(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Wy)]]:["filter-in-small",o,["literal",r]]}}function df(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Cl(o){return["!",o]}function Ac(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let f="[";for(const v of o)f+=`${Ac(v)},`;return`${f}]`}const s=Object.keys(o).sort();let d="{";for(let f=0;f<s.length;f++)d+=`${JSON.stringify(s[f])}:${Ac(o[s[f]])},`;return`${d}}`}function Mc(o){let r="";for(const s of pr)r+=`/${Ac(o[s])}`;return r}function hf(o){const r=o.value;return r?[new Pe(o.key,r,"constants have been deprecated as of v8")]:[]}function hn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ts(o){if(Array.isArray(o))return o.map(ts);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const s in o)r[s]=ts(o[s]);return r}return hn(o)}function ki(o){const r=o.key,s=o.value,d=o.valueSpec||{},f=o.objectElementValidators||{},v=o.style,x=o.styleSpec,w=o.validateSpec;let T=[];const E=Mr(s);if(E!=="object")return[new Pe(r,s,`object expected, ${E} found`)];for(const R in s){const j=R.split(".")[0],G=d[j]||d["*"];let X;if(f[j])X=f[j];else if(d[j])X=w;else if(f["*"])X=f["*"];else{if(!d["*"]){T.push(new Pe(r,s[R],`unknown property "${R}"`));continue}X=w}T=T.concat(X({key:(r&&`${r}.`)+R,value:s[R],valueSpec:G,style:v,styleSpec:x,object:s,objectKey:R,validateSpec:w},s))}for(const R in d)f[R]||d[R].required&&d[R].default===void 0&&s[R]===void 0&&T.push(new Pe(r,s,`missing required property "${R}"`));return T}function Ds(o){const r=o.value,s=o.valueSpec,d=o.style,f=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Mr(r)!=="array")return[new Pe(v,r,`array expected, ${Mr(r)} found`)];if(s.length&&r.length!==s.length)return[new Pe(v,r,`array length ${s.length} expected, length ${r.length} found`)];if(s["min-length"]&&r.length<s["min-length"])return[new Pe(v,r,`array length at least ${s["min-length"]} expected, length ${r.length} found`)];let w={type:s.value,values:s.values};f.$version<7&&(w.function=s.function),Mr(s.value)==="object"&&(w=s.value);let T=[];for(let E=0;E<r.length;E++)T=T.concat(x({array:r,arrayIndex:E,value:r[E],valueSpec:w,validateSpec:o.validateSpec,style:d,styleSpec:f,key:`${v}[${E}]`}));return T}function kl(o){const r=o.key,s=o.value,d=o.valueSpec;let f=Mr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new Pe(r,s,`number expected, ${f} found`)]:"minimum"in d&&s<d.minimum?[new Pe(r,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new Pe(r,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function Dc(o){const r=o.valueSpec,s=hn(o.value.type);let d,f,v,x={};const w=s!=="categorical"&&o.value.property===void 0,T=!w,E=Mr(o.value.stops)==="array"&&Mr(o.value.stops[0])==="array"&&Mr(o.value.stops[0][0])==="object",R=ki({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(X){if(s==="identity")return[new Pe(X.key,X.value,'identity function may not have a "stops" property')];let Y=[];const se=X.value;return Y=Y.concat(Ds({key:X.key,value:se,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:j})),Mr(se)==="array"&&se.length===0&&Y.push(new Pe(X.key,se,"array must have at least one stop")),Y},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:r,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return s==="identity"&&w&&R.push(new Pe(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||R.push(new Pe(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!_d(o.valueSpec)&&R.push(new Pe(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(T&&!Ms(o.valueSpec)?R.push(new Pe(o.key,o.value,"property functions not supported")):w&&!sf(o.valueSpec)&&R.push(new Pe(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!E||o.value.property!==void 0||R.push(new Pe(o.key,o.value,'"property" property is required')),R;function j(X){let Y=[];const se=X.value,me=X.key;if(Mr(se)!=="array")return[new Pe(me,se,`array expected, ${Mr(se)} found`)];if(se.length!==2)return[new Pe(me,se,`array length 2 expected, length ${se.length} found`)];if(E){if(Mr(se[0])!=="object")return[new Pe(me,se,`object expected, ${Mr(se[0])} found`)];if(se[0].zoom===void 0)return[new Pe(me,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Pe(me,se,"object stop key must have value")];if(v&&v>hn(se[0].zoom))return[new Pe(me,se[0].zoom,"stop zoom values must appear in ascending order")];hn(se[0].zoom)!==v&&(v=hn(se[0].zoom),f=void 0,x={}),Y=Y.concat(ki({key:`${me}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:kl,value:G}}))}else Y=Y.concat(G({key:`${me}[0]`,value:se[0],valueSpec:{},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},se));return Ic(ts(se[1]))?Y.concat([new Pe(`${me}[1]`,se[1],"expressions are not allowed in function stops.")]):Y.concat(X.validateSpec({key:`${me}[1]`,value:se[1],valueSpec:r,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function G(X,Y){const se=Mr(X.value),me=hn(X.value),ye=X.value!==null?X.value:Y;if(d){if(se!==d)return[new Pe(X.key,ye,`${se} stop domain type must match previous stop domain type ${d}`)]}else d=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new Pe(X.key,ye,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&s!=="categorical"){let ke=`number expected, ${se} found`;return Ms(r)&&s===void 0&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Pe(X.key,ye,ke)]}return s!=="categorical"||se!=="number"||isFinite(me)&&Math.floor(me)===me?s!=="categorical"&&se==="number"&&f!==void 0&&me<f?[new Pe(X.key,ye,"stop domain values must appear in ascending order")]:(f=me,s==="categorical"&&me in x?[new Pe(X.key,ye,"stop domain values must be unique")]:(x[me]=!0,[])):[new Pe(X.key,ye,`integer expected, found ${me}`)]}}function rs(o){const r=(o.expressionContext==="property"?wd:Pc)(ts(o.value),o.valueSpec);if(r.result==="error")return r.value.map(d=>new Pe(`${o.key}${d.key}`,o.value,d.message));const s=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Pe(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!_l(s))return[new Pe(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!_l(s))return[new Pe(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!xc(s,["zoom","feature-state"]))return[new Pe(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!_c(s))return[new Pe(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tl(o){const r=o.key,s=o.value,d=o.valueSpec,f=[];return Array.isArray(d.values)?d.values.indexOf(hn(s))===-1&&f.push(new Pe(r,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(hn(s))===-1&&f.push(new Pe(r,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function Rs(o){return Sl(ts(o.value))?rs(ot({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pf(o)}function pf(o){const r=o.value,s=o.key;if(Mr(r)!=="array")return[new Pe(s,r,`array expected, ${Mr(r)} found`)];const d=o.styleSpec;let f,v=[];if(r.length<1)return[new Pe(s,r,"filter array must have at least 1 element")];switch(v=v.concat(Tl({key:`${s}[0]`,value:r[0],valueSpec:d.filter_operator,style:o.style,styleSpec:o.styleSpec})),hn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&hn(r[1])==="$type"&&v.push(new Pe(s,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&v.push(new Pe(s,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(f=Mr(r[1]),f!=="string"&&v.push(new Pe(`${s}[1]`,r[1],`string expected, ${f} found`)));for(let x=2;x<r.length;x++)f=Mr(r[x]),hn(r[1])==="$type"?v=v.concat(Tl({key:`${s}[${x}]`,value:r[x],valueSpec:d.geometry_type,style:o.style,styleSpec:o.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Pe(`${s}[${x}]`,r[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)v=v.concat(pf({key:`${s}[${x}]`,value:r[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":f=Mr(r[1]),r.length!==2?v.push(new Pe(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Pe(`${s}[1]`,r[1],`string expected, ${f} found`));break;case"within":f=Mr(r[1]),r.length!==2?v.push(new Pe(s,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new Pe(`${s}[1]`,r[1],`object expected, ${f} found`))}return v}function ff(o,r){const s=o.key,d=o.validateSpec,f=o.style,v=o.styleSpec,x=o.value,w=o.objectKey,T=v[`${r}_${o.layerType}`];if(!T)return[];const E=w.match(/^(.*)-transition$/);if(r==="paint"&&E&&T[E[1]]&&T[E[1]].transition)return d({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const R=o.valueSpec||T[w];if(!R)return[new Pe(s,x,`unknown property "${w}"`)];let j;if(Mr(x)==="string"&&Ms(R)&&!R.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new Pe(s,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const G=[];return o.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&G.push(new Pe(s,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&nn(ts(x))&&hn(x.type)==="identity"&&G.push(new Pe(s,x,'"text-font" does not support identity functions'))),G.concat(d({key:o.key,value:x,valueSpec:R,style:f,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:w}))}function mf(o){return ff(o,"paint")}function gf(o){return ff(o,"layout")}function yf(o){let r=[];const s=o.value,d=o.key,f=o.style,v=o.styleSpec;s.type||s.ref||r.push(new Pe(d,s,'either "type" or "ref" is required'));let x=hn(s.type);const w=hn(s.ref);if(s.id){const T=hn(s.id);for(let E=0;E<o.arrayIndex;E++){const R=f.layers[E];hn(R.id)===T&&r.push(new Pe(d,s.id,`duplicate layer id "${s.id}", previously used at line ${R.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach(E=>{E in s&&r.push(new Pe(d,s[E],`"${E}" is prohibited for ref layers`))}),f.layers.forEach(E=>{hn(E.id)===w&&(T=E)}),T?T.ref?r.push(new Pe(d,s.ref,"ref cannot reference another ref layer")):x=hn(T.type):r.push(new Pe(d,s.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(s.source){const T=f.sources&&f.sources[s.source],E=T&&hn(T.type);T?E==="vector"&&x==="raster"?r.push(new Pe(d,s.source,`layer "${s.id}" requires a raster source`)):E!=="raster-dem"&&x==="hillshade"?r.push(new Pe(d,s.source,`layer "${s.id}" requires a raster-dem source`)):E==="raster"&&x!=="raster"?r.push(new Pe(d,s.source,`layer "${s.id}" requires a vector source`)):E!=="vector"||s["source-layer"]?E==="raster-dem"&&x!=="hillshade"?r.push(new Pe(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||E==="geojson"&&T.lineMetrics||r.push(new Pe(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Pe(d,s,`layer "${s.id}" must specify a "source-layer"`)):r.push(new Pe(d,s.source,`source "${s.source}" not found`))}else r.push(new Pe(d,s,'missing required property "source"'));return r=r.concat(ki({key:d,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${d}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Rs,layout:T=>ki({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":E=>gf(ot({layerType:x},E))}}),paint:T=>ki({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":E=>mf(ot({layerType:x},E))}})}})),r}function Oo(o){const r=o.value,s=o.key,d=Mr(r);return d!=="string"?[new Pe(s,r,`string expected, ${d} found`)]:[]}const Il={promoteId:function({key:o,value:r}){if(Mr(r)==="string")return Oo({key:o,value:r});{const s=[];for(const d in r)s.push(...Oo({key:`${o}.${d}`,value:r[d]}));return s}}};function Gi(o){const r=o.value,s=o.key,d=o.styleSpec,f=o.style,v=o.validateSpec;if(!r.type)return[new Pe(s,r,'"type" is required')];const x=hn(r.type);let w;switch(x){case"vector":case"raster":return w=ki({key:s,value:r,valueSpec:d[`source_${x.replace("-","_")}`],style:o.style,styleSpec:d,objectElementValidators:Il,validateSpec:v}),w;case"raster-dem":return w=function(T){var E;const R=(E=T.sourceName)!==null&&E!==void 0?E:"",j=T.value,G=T.styleSpec,X=G.source_raster_dem,Y=T.style;let se=[];const me=Mr(j);if(j===void 0)return se;if(me!=="object")return se.push(new Pe("source_raster_dem",j,`object expected, ${me} found`)),se;const ye=hn(j.encoding)==="custom",ke=["redFactor","greenFactor","blueFactor","baseShift"],xe=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const Ie in j)!ye&&ke.includes(Ie)?se.push(new Pe(Ie,j[Ie],`In "${R}": "${Ie}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):X[Ie]?se=se.concat(T.validateSpec({key:Ie,value:j[Ie],valueSpec:X[Ie],validateSpec:T.validateSpec,style:Y,styleSpec:G})):se.push(new Pe(Ie,j[Ie],`unknown property "${Ie}"`));return se}({sourceName:s,value:r,style:o.style,styleSpec:d,validateSpec:v}),w;case"geojson":if(w=ki({key:s,value:r,valueSpec:d.source_geojson,style:f,styleSpec:d,validateSpec:v,objectElementValidators:Il}),r.cluster)for(const T in r.clusterProperties){const[E,R]=r.clusterProperties[T],j=typeof E=="string"?[E,["accumulated"],["get",T]]:E;w.push(...rs({key:`${s}.${T}.map`,value:R,validateSpec:v,expressionContext:"cluster-map"})),w.push(...rs({key:`${s}.${T}.reduce`,value:j,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return ki({key:s,value:r,valueSpec:d.source_video,style:f,validateSpec:v,styleSpec:d});case"image":return ki({key:s,value:r,valueSpec:d.source_image,style:f,validateSpec:v,styleSpec:d});case"canvas":return[new Pe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tl({key:`${s}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:d})}}function Pl(o){const r=o.value,s=o.styleSpec,d=s.light,f=o.style;let v=[];const x=Mr(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Pe("light",r,`object expected, ${x} found`)]),v;for(const w in r){const T=w.match(/^(.*)-transition$/);v=v.concat(T&&d[T[1]]&&d[T[1]].transition?o.validateSpec({key:w,value:r[w],valueSpec:s.transition,validateSpec:o.validateSpec,style:f,styleSpec:s}):d[w]?o.validateSpec({key:w,value:r[w],valueSpec:d[w],validateSpec:o.validateSpec,style:f,styleSpec:s}):[new Pe(w,r[w],`unknown property "${w}"`)])}return v}function vf(o){const r=o.value,s=o.styleSpec,d=s.terrain,f=o.style;let v=[];const x=Mr(r);if(r===void 0)return v;if(x!=="object")return v=v.concat([new Pe("terrain",r,`object expected, ${x} found`)]),v;for(const w in r)v=v.concat(d[w]?o.validateSpec({key:w,value:r[w],valueSpec:d[w],validateSpec:o.validateSpec,style:f,styleSpec:s}):[new Pe(w,r[w],`unknown property "${w}"`)]);return v}function _f(o){let r=[];const s=o.value,d=o.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&r.push(new Pe(d,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&r.push(new Pe(d,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),r=r.concat(ki({key:`${d}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Oo({key:d,value:s})}const xf={"*":()=>[],array:Ds,boolean:function(o){const r=o.value,s=o.key,d=Mr(r);return d!=="boolean"?[new Pe(s,r,`boolean expected, ${d} found`)]:[]},number:kl,color:function(o){const r=o.key,s=o.value,d=Mr(s);return d!=="string"?[new Pe(r,s,`color expected, ${d} found`)]:zr.parse(String(s))?[]:[new Pe(r,s,`color expected, "${s}" found`)]},constants:hf,enum:Tl,filter:Rs,function:Dc,layer:yf,object:ki,source:Gi,light:Pl,terrain:vf,string:Oo,formatted:function(o){return Oo(o).length===0?[]:rs(o)},resolvedImage:function(o){return Oo(o).length===0?[]:rs(o)},padding:function(o){const r=o.key,s=o.value;if(Mr(s)==="array"){if(s.length<1||s.length>4)return[new Pe(r,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(o.validateSpec({key:`${r}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:d}));return f}return kl({key:r,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const r=o.key,s=o.value,d=Mr(s),f=o.styleSpec;if(d!=="array"||s.length<1||s.length%2!=0)return[new Pe(r,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Tl({key:`${r}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(Ds({key:`${r}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:f}));return v},sprite:_f};function sa(o){const r=o.value,s=o.valueSpec,d=o.styleSpec;return o.validateSpec=sa,s.expression&&nn(hn(r))?Dc(o):s.expression&&Ic(ts(r))?rs(o):s.type&&xf[s.type]?xf[s.type](o):ki(ot({},o,{valueSpec:s.type?d[s.type]:s}))}function bf(o){const r=o.value,s=o.key,d=Oo(o);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new Pe(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new Pe(s,r,'"glyphs" url must include a "{range}" token'))),d}function ao(o,r=$e){let s=[];return s=s.concat(sa({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:sa,objectElementValidators:{glyphs:bf,"*":()=>[]}})),o.constants&&(s=s.concat(hf({key:"constants",value:o.constants,style:o,styleSpec:r,validateSpec:sa}))),Rc(s)}function la(o){return function(r){return o({...r,validateSpec:sa})}}function Rc(o){return[].concat(o).sort((r,s)=>r.line-s.line)}function ca(o){return function(...r){return Rc(o.apply(this,r))}}ao.source=ca(la(Gi)),ao.sprite=ca(la(_f)),ao.glyphs=ca(la(bf)),ao.light=ca(la(Pl)),ao.terrain=ca(la(vf)),ao.layer=ca(la(yf)),ao.filter=ca(la(Rs)),ao.paintProperty=ca(la(mf)),ao.layoutProperty=ca(la(gf));const ua=ao,Gy=ua.light,kd=ua.paintProperty,wf=ua.layoutProperty;function Lc(o,r){let s=!1;if(r&&r.length)for(const d of r)o.fire(new Gt(new Error(d.message))),s=!0;return s}class Ls{constructor(r,s,d){const f=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(s=x[1])+2*(d=x[2]);for(let T=0;T<this.d*this.d;T++){const E=x[3+T],R=x[3+T+1];f.push(E===R?null:x.subarray(E,R))}const w=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=r,this.padding=d,this.scale=s/r,this.uid=0;const v=d/s*r;this.min=-v,this.max=r+v}insert(r,s,d,f,v){this._forEachCell(s,d,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,s,d,f,v,x){this.cells[v].push(x)}query(r,s,d,f,v){const x=this.min,w=this.max;if(r<=x&&s<=x&&w<=d&&w<=f&&!v)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(r,s,d,f,this._queryCell,T,{},v),T}}_queryCell(r,s,d,f,v,x,w,T){const E=this.cells[v];if(E!==null){const R=this.keys,j=this.bboxes;for(let G=0;G<E.length;G++){const X=E[G];if(w[X]===void 0){const Y=4*X;(T?T(j[Y+0],j[Y+1],j[Y+2],j[Y+3]):r<=j[Y+2]&&s<=j[Y+3]&&d>=j[Y+0]&&f>=j[Y+1])?(w[X]=!0,x.push(R[X])):w[X]=!1}}}}_forEachCell(r,s,d,f,v,x,w,T){const E=this._convertToCellCoord(r),R=this._convertToCellCoord(s),j=this._convertToCellCoord(d),G=this._convertToCellCoord(f);for(let X=E;X<=j;X++)for(let Y=R;Y<=G;Y++){const se=this.d*Y+X;if((!T||T(this._convertFromCellCoord(X),this._convertFromCellCoord(Y),this._convertFromCellCoord(X+1),this._convertFromCellCoord(Y+1)))&&v.call(this,r,s,d,f,se,x,w,T))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,s=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const f=new Int32Array(s+d+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<r.length;x++){const w=r[x];f[3+x]=v,f.set(w,v),v+=w.length}return f[3+r.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+r.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(r,s){const d=r.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(r){return new Ls(r.buffer)}}const da={};function It(o,r,s={}){if(da[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),da[o]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}It("Object",Object),It("TransferableGridIndex",Ls),It("Color",zr),It("Error",Error),It("AJAXError",We),It("ResolvedImage",Bn),It("StylePropertyFunction",bl),It("StyleExpression",xd,{omit:["_evaluator"]}),It("ZoomDependentExpression",Ec),It("ZoomConstantExpression",bd),It("CompoundExpression",oo,{omit:["_evaluate"]});for(const o in As)As[o]._classRegistryKey||It(`Expression_${o}`,As[o]);function $c(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function La(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if($c(o)||Xe(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return r&&r.push(s.buffer),s}if(o instanceof ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const d of o)s.push(La(d,r));return s}if(typeof o=="object"){const s=o.constructor,d=s._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!da[d])throw new Error(`${d} is not registered.`);const f=s.serialize?s.serialize(o,r):{};if(s.serialize){if(r&&f===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||da[d].omit.indexOf(v)>=0)continue;const x=o[v];f[v]=da[d].shallow.indexOf(v)>=0?x:La(x,r)}o instanceof Error&&(f.message=o.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(f.$name=d),f}throw new Error("can't serialize object of type "+typeof o)}function $s(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||$c(o)||Xe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map($s);if(typeof o=="object"){const r=o.$name||"Object";if(!da[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:s}=da[r];if(!s)throw new Error(`can't deserialize unregistered class ${r}`);if(s.deserialize)return s.deserialize(o);const d=Object.create(s.prototype);for(const f of Object.keys(o)){if(f==="$name")continue;const v=o[f];d[f]=da[r].shallow.indexOf(f)>=0?v:$s(v)}return d}throw new Error("can't deserialize object of type "+typeof o)}class Sf{constructor(){this.first=!0}update(r,s){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const vt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Td(o){for(const r of o)if(Pd(r.charCodeAt(0)))return!0;return!1}function Id(o){for(const r of o)if(!qy(r.charCodeAt(0)))return!1;return!0}function qy(o){return!(vt.Arabic(o)||vt["Arabic Supplement"](o)||vt["Arabic Extended-A"](o)||vt["Arabic Presentation Forms-A"](o)||vt["Arabic Presentation Forms-B"](o))}function Pd(o){return!(o!==746&&o!==747&&(o<4352||!(vt["Bopomofo Extended"](o)||vt.Bopomofo(o)||vt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||vt["CJK Compatibility Ideographs"](o)||vt["CJK Compatibility"](o)||vt["CJK Radicals Supplement"](o)||vt["CJK Strokes"](o)||!(!vt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||vt["CJK Unified Ideographs Extension A"](o)||vt["CJK Unified Ideographs"](o)||vt["Enclosed CJK Letters and Months"](o)||vt["Hangul Compatibility Jamo"](o)||vt["Hangul Jamo Extended-A"](o)||vt["Hangul Jamo Extended-B"](o)||vt["Hangul Jamo"](o)||vt["Hangul Syllables"](o)||vt.Hiragana(o)||vt["Ideographic Description Characters"](o)||vt.Kanbun(o)||vt["Kangxi Radicals"](o)||vt["Katakana Phonetic Extensions"](o)||vt.Katakana(o)&&o!==12540||!(!vt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!vt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||vt["Unified Canadian Aboriginal Syllabics"](o)||vt["Unified Canadian Aboriginal Syllabics Extended"](o)||vt["Vertical Forms"](o)||vt["Yijing Hexagram Symbols"](o)||vt["Yi Syllables"](o)||vt["Yi Radicals"](o))))}function Cf(o){return!(Pd(o)||function(r){return!!(vt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||vt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||vt["Letterlike Symbols"](r)||vt["Number Forms"](r)||vt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||vt["Control Pictures"](r)&&r!==9251||vt["Optical Character Recognition"](r)||vt["Enclosed Alphanumerics"](r)||vt["Geometric Shapes"](r)||vt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||vt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||vt["CJK Symbols and Punctuation"](r)||vt.Katakana(r)||vt["Private Use Area"](r)||vt["CJK Compatibility Forms"](r)||vt["Small Form Variants"](r)||vt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function kf(o){return o>=1424&&o<=2303||vt["Arabic Presentation Forms-A"](o)||vt["Arabic Presentation Forms-B"](o)}function Tf(o,r){return!(!r&&kf(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||vt.Khmer(o))}function Zy(o){for(const r of o)if(kf(r.charCodeAt(0)))return!0;return!1}const Ed="deferred",zd="loading",Ad="loaded";let Md=null,Ti="unavailable",$a=null;const El=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Ti="error"),Md&&Md(o)};function Dd(){zl.fire(new or("pluginStateChange",{pluginStatus:Ti,pluginURL:$a}))}const zl=new Cr,Rd=function(){return Ti},If=function(){if(Ti!==Ed||!$a)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ti=zd,Dd(),$a&&Er({url:$a},o=>{o?El(o):(Ti=Ad,Dd())})},qi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ti===Ad||qi.applyArabicShaping!=null,isLoading:()=>Ti===zd,setState(o){if(!Ue())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ti=o.pluginStatus,$a=o.pluginURL},isParsed(){if(!Ue())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return qi.applyArabicShaping!=null&&qi.processBidirectionalText!=null&&qi.processStyledBidirectionalText!=null},getPluginURL(){if(!Ue())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return $a}};class Xr{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sf,this.transition={})}isSupportedScript(r){return function(s,d){for(const f of s)if(!Tf(f.charCodeAt(0),d))return!1;return!0}(r,qi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,s=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class Bc{constructor(r,s){this.property=r,this.value=s,this.expression=function(d,f){if(nn(d))return new bl(d,f);if(Ic(d)){const v=wd(d,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return f.type==="color"&&typeof d=="string"?v=zr.parse(d):f.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=$n.parse(d)):v=$r.parse(d),{kind:"constant",evaluate:()=>v}}}(s===void 0?r.specification.default:s,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,d){return this.property.possiblyEvaluate(this,r,s,d)}}class Ld{constructor(r){this.property=r,this.value=new Bc(r,void 0)}transitioned(r,s){return new Ef(this.property,this.value,s,fe({},r.transition,this.transition),r.now)}untransitioned(){return new Ef(this.property,this.value,null,{},0)}}class Pf{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Ee(this._values[r].value.value)}setValue(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ld(this._values[r].property)),this._values[r].value=new Bc(this._values[r].property,s===null?void 0:Ee(s))}getTransition(r){return Ee(this._values[r].transition)}setTransition(r,s){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Ld(this._values[r].property)),this._values[r].transition=Ee(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d);const f=this.getTransition(s);f!==void 0&&(r[`${s}-transition`]=f)}return r}transitioned(r,s){const d=new zf(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(r,s._values[f]);return d}untransitioned(){const r=new zf(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class Ef{constructor(r,s,d,f,v){this.property=r,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,r.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(r,s,d){const f=r.now||0,v=this.value.possiblyEvaluate(r,s,d),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(r,s,d);{const w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,d),v,function(T){if(T<=0)return 0;if(T>=1)return 1;const E=T*T,R=E*T;return 4*(T<.5?R:3*(T-E)+R-.75)}(w))}}return v}}class zf{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,d){const f=new Oc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(r,s,d);return f}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Ky{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Ee(this._values[r].value)}setValue(r,s){this._values[r]=new Bc(this._values[r].property,s===null?void 0:Ee(s))}serialize(){const r={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(r[s]=d)}return r}possiblyEvaluate(r,s,d){const f=new Oc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(r,s,d);return f}}class mi{constructor(r,s,d){this.property=r,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,d,f){return this.property.evaluate(this.value,this.parameters,r,s,d,f)}}class Oc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class jt{constructor(r){this.specification=r}possiblyEvaluate(r,s){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(s)}interpolate(r,s,d){const f=Hi[this.specification.type];return f?f(r,s,d):r}}class Xt{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,d,f){return new mi(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},d,f)}:r.expression,s)}interpolate(r,s,d){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new mi(this,{kind:"constant",value:void 0},r.parameters);const f=Hi[this.specification.type];if(f){const v=f(r.value.value,s.value.value,d);return new mi(this,{kind:"constant",value:v},r.parameters)}return r}evaluate(r,s,d,f,v,x){return r.kind==="constant"?r.value:r.evaluate(s,d,f,v,x)}}class Al extends Xt{possiblyEvaluate(r,s,d,f){if(r.value===void 0)return new mi(this,{kind:"constant",value:void 0},s);if(r.expression.kind==="constant"){const v=r.expression.evaluate(s,null,{},d,f),x=r.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,s);return new mi(this,{kind:"constant",value:w},s)}if(r.expression.kind==="camera"){const v=this._calculate(r.expression.evaluate({zoom:s.zoom-1}),r.expression.evaluate({zoom:s.zoom}),r.expression.evaluate({zoom:s.zoom+1}),s);return new mi(this,{kind:"constant",value:v},s)}return new mi(this,r.expression,s)}evaluate(r,s,d,f,v,x){if(r.kind==="source"){const w=r.evaluate(s,d,f,v,x);return this._calculate(w,w,w,s)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(s.zoom)-1},d,f),r.evaluate({zoom:Math.floor(s.zoom)},d,f),r.evaluate({zoom:Math.floor(s.zoom)+1},d,f),s):r.value}_calculate(r,s,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class $d{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,f){if(r.value!==void 0){if(r.expression.kind==="constant"){const v=r.expression.evaluate(s,null,{},d,f);return this._calculate(v,v,v,s)}return this._calculate(r.expression.evaluate(new Xr(Math.floor(s.zoom-1),s)),r.expression.evaluate(new Xr(Math.floor(s.zoom),s)),r.expression.evaluate(new Xr(Math.floor(s.zoom+1),s)),s)}}_calculate(r,s,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:r,to:s}:{from:d,to:s}}interpolate(r){return r}}class Bd{constructor(r){this.specification=r}possiblyEvaluate(r,s,d,f){return!!r.expression.evaluate(s,null,{},d,f)}interpolate(){return!1}}class wn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in r){const d=r[s];d.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new Bc(d,void 0),v=this.defaultTransitionablePropertyValues[s]=new Ld(d);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}It("DataDrivenProperty",Xt),It("DataConstantProperty",jt),It("CrossFadedDataDrivenProperty",Al),It("CrossFadedProperty",$d),It("ColorRampProperty",Bd);const Od="-transition";class so extends Cr{constructor(r,s){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),s.layout&&(this._unevaluatedLayout=new Ky(s.layout)),s.paint)){this._transitionablePaint=new Pf(s.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s,d={}){s!=null&&this._validate(wf,`layers.${this.id}.layout.${r}`,r,s,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,s):this.visibility=s)}getPaintProperty(r){return r.endsWith(Od)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s,d={}){if(s!=null&&this._validate(kd,`layers.${this.id}.paint.${r}`,r,s,d))return!1;if(r.endsWith(Od))return this._transitionablePaint.setTransition(r.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[r],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(r,s),this._handleSpecialPaintPropertyUpdate(r);const T=this._transitionablePaint._values[r].value;return T.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(r,w,T)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,s,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),ze(r,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(r,s,d,f,v={}){return(!v||v.validate!==!1)&&Lc(this,r.call(ua,{key:s,layerType:this.type,objectKey:d,value:f,styleSpec:$e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof mi&&Ms(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Af={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ns{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function an(o,r=1){let s=0,d=0;return{members:o.map(f=>{const v=Af[f.type].BYTES_PER_ELEMENT,x=s=Bs(s,Math.max(r,v)),w=f.components||1;return d=Math.max(d,v),s+=v*w,{name:f.name,type:f.type,components:w,offset:x}}),size:Bs(s,Math.max(d,r)),alignment:r}}function Bs(o,r){return Math.ceil(o/r)*r}class Ml extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const f=2*r;return this.int16[f+0]=s,this.int16[f+1]=d,r}}Ml.prototype.bytesPerElement=4,It("StructArrayLayout2i4",Ml);class Dl extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const v=3*r;return this.int16[v+0]=s,this.int16[v+1]=d,this.int16[v+2]=f,r}}Dl.prototype.bytesPerElement=6,It("StructArrayLayout3i6",Dl);class is extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,f)}emplace(r,s,d,f,v){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=d,this.int16[x+2]=f,this.int16[x+3]=v,r}}is.prototype.bytesPerElement=8,It("StructArrayLayout4i8",is);class Fd extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,d,f,v,x)}emplace(r,s,d,f,v,x,w){const T=6*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=f,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=w,r}}Fd.prototype.bytesPerElement=12,It("StructArrayLayout2i4i12",Fd);class Nd extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,d,f,v,x)}emplace(r,s,d,f,v,x,w){const T=4*r,E=8*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.uint8[E+4]=f,this.uint8[E+5]=v,this.uint8[E+6]=x,this.uint8[E+7]=w,r}}Nd.prototype.bytesPerElement=8,It("StructArrayLayout2i4ub8",Nd);class Os extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const f=2*r;return this.float32[f+0]=s,this.float32[f+1]=d,r}}Os.prototype.bytesPerElement=8,It("StructArrayLayout2f8",Os);class jd extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x,w,T,E,R){const j=this.length;return this.resize(j+1),this.emplace(j,r,s,d,f,v,x,w,T,E,R)}emplace(r,s,d,f,v,x,w,T,E,R,j){const G=10*r;return this.uint16[G+0]=s,this.uint16[G+1]=d,this.uint16[G+2]=f,this.uint16[G+3]=v,this.uint16[G+4]=x,this.uint16[G+5]=w,this.uint16[G+6]=T,this.uint16[G+7]=E,this.uint16[G+8]=R,this.uint16[G+9]=j,r}}jd.prototype.bytesPerElement=20,It("StructArrayLayout10ui20",jd);class Vd extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x,w,T,E,R,j,G){const X=this.length;return this.resize(X+1),this.emplace(X,r,s,d,f,v,x,w,T,E,R,j,G)}emplace(r,s,d,f,v,x,w,T,E,R,j,G,X){const Y=12*r;return this.int16[Y+0]=s,this.int16[Y+1]=d,this.int16[Y+2]=f,this.int16[Y+3]=v,this.uint16[Y+4]=x,this.uint16[Y+5]=w,this.uint16[Y+6]=T,this.uint16[Y+7]=E,this.int16[Y+8]=R,this.int16[Y+9]=j,this.int16[Y+10]=G,this.int16[Y+11]=X,r}}Vd.prototype.bytesPerElement=24,It("StructArrayLayout4i4ui4i24",Vd);class Dr extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const v=3*r;return this.float32[v+0]=s,this.float32[v+1]=d,this.float32[v+2]=f,r}}Dr.prototype.bytesPerElement=12,It("StructArrayLayout3f12",Dr);class y extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}y.prototype.bytesPerElement=4,It("StructArrayLayout1ul4",y);class i extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x,w,T,E){const R=this.length;return this.resize(R+1),this.emplace(R,r,s,d,f,v,x,w,T,E)}emplace(r,s,d,f,v,x,w,T,E,R){const j=10*r,G=5*r;return this.int16[j+0]=s,this.int16[j+1]=d,this.int16[j+2]=f,this.int16[j+3]=v,this.int16[j+4]=x,this.int16[j+5]=w,this.uint32[G+3]=T,this.uint16[j+8]=E,this.uint16[j+9]=R,r}}i.prototype.bytesPerElement=20,It("StructArrayLayout6i1ul2ui20",i);class u extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,r,s,d,f,v,x)}emplace(r,s,d,f,v,x,w){const T=6*r;return this.int16[T+0]=s,this.int16[T+1]=d,this.int16[T+2]=f,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=w,r}}u.prototype.bytesPerElement=12,It("StructArrayLayout2i2i2i12",u);class p extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,d,f,v)}emplace(r,s,d,f,v,x){const w=4*r,T=8*r;return this.float32[w+0]=s,this.float32[w+1]=d,this.float32[w+2]=f,this.int16[T+6]=v,this.int16[T+7]=x,r}}p.prototype.bytesPerElement=16,It("StructArrayLayout2f1f2i16",p);class m extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,f)}emplace(r,s,d,f,v){const x=12*r,w=3*r;return this.uint8[x+0]=s,this.uint8[x+1]=d,this.float32[w+1]=f,this.float32[w+2]=v,r}}m.prototype.bytesPerElement=12,It("StructArrayLayout2ub2f12",m);class _ extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const v=3*r;return this.uint16[v+0]=s,this.uint16[v+1]=d,this.uint16[v+2]=f,r}}_.prototype.bytesPerElement=6,It("StructArrayLayout3ui6",_);class S extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se,me,ye){const ke=this.length;return this.resize(ke+1),this.emplace(ke,r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se,me,ye)}emplace(r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se,me,ye,ke){const xe=24*r,Ie=12*r,Be=48*r;return this.int16[xe+0]=s,this.int16[xe+1]=d,this.uint16[xe+2]=f,this.uint16[xe+3]=v,this.uint32[Ie+2]=x,this.uint32[Ie+3]=w,this.uint32[Ie+4]=T,this.uint16[xe+10]=E,this.uint16[xe+11]=R,this.uint16[xe+12]=j,this.float32[Ie+7]=G,this.float32[Ie+8]=X,this.uint8[Be+36]=Y,this.uint8[Be+37]=se,this.uint8[Be+38]=me,this.uint32[Ie+10]=ye,this.int16[xe+22]=ke,r}}S.prototype.bytesPerElement=48,It("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",S);class k extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se,me,ye,ke,xe,Ie,Be,qe,_t,Lt,gt,pt,at,Pt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se,me,ye,ke,xe,Ie,Be,qe,_t,Lt,gt,pt,at,Pt)}emplace(r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se,me,ye,ke,xe,Ie,Be,qe,_t,Lt,gt,pt,at,Pt,ut){const et=32*r,qt=16*r;return this.int16[et+0]=s,this.int16[et+1]=d,this.int16[et+2]=f,this.int16[et+3]=v,this.int16[et+4]=x,this.int16[et+5]=w,this.int16[et+6]=T,this.int16[et+7]=E,this.uint16[et+8]=R,this.uint16[et+9]=j,this.uint16[et+10]=G,this.uint16[et+11]=X,this.uint16[et+12]=Y,this.uint16[et+13]=se,this.uint16[et+14]=me,this.uint16[et+15]=ye,this.uint16[et+16]=ke,this.uint16[et+17]=xe,this.uint16[et+18]=Ie,this.uint16[et+19]=Be,this.uint16[et+20]=qe,this.uint16[et+21]=_t,this.uint16[et+22]=Lt,this.uint32[qt+12]=gt,this.float32[qt+13]=pt,this.float32[qt+14]=at,this.uint16[et+30]=Pt,this.uint16[et+31]=ut,r}}k.prototype.bytesPerElement=64,It("StructArrayLayout8i15ui1ul2f2ui64",k);class I extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}I.prototype.bytesPerElement=4,It("StructArrayLayout1f4",I);class z extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const v=3*r;return this.uint16[6*r+0]=s,this.float32[v+1]=d,this.float32[v+2]=f,r}}z.prototype.bytesPerElement=12,It("StructArrayLayout1ui2f12",z);class L extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,d){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,d)}emplace(r,s,d,f){const v=4*r;return this.uint32[2*r+0]=s,this.uint16[v+2]=d,this.uint16[v+3]=f,r}}L.prototype.bytesPerElement=8,It("StructArrayLayout1ul2ui8",L);class B extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const d=this.length;return this.resize(d+1),this.emplace(d,r,s)}emplace(r,s,d){const f=2*r;return this.uint16[f+0]=s,this.uint16[f+1]=d,r}}B.prototype.bytesPerElement=4,It("StructArrayLayout2ui4",B);class K extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}K.prototype.bytesPerElement=2,It("StructArrayLayout1ui2",K);class ce extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,r,s,d,f)}emplace(r,s,d,f,v){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=d,this.float32[x+2]=f,this.float32[x+3]=v,r}}ce.prototype.bytesPerElement=16,It("StructArrayLayout4f16",ce);class le extends ns{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}le.prototype.size=20;class pe extends i{get(r){return new le(this,r)}}It("CollisionBoxArray",pe);class ae extends ns{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class we extends S{get(r){return new ae(this,r)}}It("PlacedSymbolArray",we);class Le extends ns{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Le.prototype.size=64;class ge extends k{get(r){return new Le(this,r)}}It("SymbolInstanceArray",ge);class Ce extends I{getoffsetX(r){return this.float32[1*r+0]}}It("GlyphOffsetArray",Ce);class je extends Dl{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}It("SymbolLineVertexArray",je);class Ve extends ns{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ve.prototype.size=12;class Ge extends z{get(r){return new Ve(this,r)}}It("TextAnchorOffsetArray",Ge);class Qe extends ns{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qe.prototype.size=8;class Je extends L{get(r){return new Qe(this,r)}}It("FeatureIndexArray",Je);class rt extends Ml{}class Rt extends Ml{}class yr extends Ml{}class ht extends Fd{}class Jt extends Nd{}class Bt extends Os{}class Br extends jd{}class gr extends Vd{}class lr extends Dr{}class vr extends y{}class gn extends u{}class Wr extends m{}class Qn extends _{}class On extends B{}const Sn=an([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zi}=Sn;class Jr{constructor(r=[]){this.segments=r}prepareSegment(r,s,d,f){let v=this.segments[this.segments.length-1];return r>Jr.MAX_VERTEX_ARRAY_LENGTH&&Ye(`Max vertices per segment is ${Jr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!v||v.vertexLength+r>Jr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,d,f){return new Jr([{vertexOffset:r,primitiveOffset:s,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}function Fo(o,r){return 256*(o=ee(Math.floor(o),0,255))+ee(Math.floor(r),0,255)}Jr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,It("SegmentVector",Jr);const No=an([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ba={exports:{}},os={exports:{}};os.exports=function(o,r){var s,d,f,v,x,w,T,E;for(d=o.length-(s=3&o.length),f=r,x=3432918353,w=461845907,E=0;E<d;)T=255&o.charCodeAt(E)|(255&o.charCodeAt(++E))<<8|(255&o.charCodeAt(++E))<<16|(255&o.charCodeAt(++E))<<24,++E,f=27492+(65535&(v=5*(65535&(f=(f^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,s){case 3:T^=(255&o.charCodeAt(E+2))<<16;case 2:T^=(255&o.charCodeAt(E+1))<<8;case 1:f^=T=(65535&(T=(T=(65535&(T^=255&o.charCodeAt(E)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return f^=o.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Fs=os.exports,ai={exports:{}};ai.exports=function(o,r){for(var s,d=o.length,f=r^d,v=0;d>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:f^=(255&o.charCodeAt(v+2))<<16;case 2:f^=(255&o.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&o.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var ei=Fs,gi=ai.exports;Ba.exports=ei,Ba.exports.murmur3=ei,Ba.exports.murmur2=gi;var as=C(Ba.exports);class yn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,s,d,f){this.ids.push(Fn(r)),this.positions.push(s,d,f)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Fn(r);let d=0,f=this.ids.length-1;for(;d<f;){const x=d+f>>1;this.ids[x]>=s?f=x:d=x+1}const v=[];for(;this.ids[d]===s;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(r,s){const d=new Float64Array(r.ids),f=new Uint32Array(r.positions);return Ii(d,f,0,d.length-1),s&&s.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(r){const s=new yn;return s.ids=r.ids,s.positions=r.positions,s.indexed=!0,s}}function Fn(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:as(String(o))}function Ii(o,r,s,d){for(;s<d;){const f=o[s+d>>1];let v=s-1,x=d+1;for(;;){do v++;while(o[v]<f);do x--;while(o[x]>f);if(v>=x)break;vn(o,v,x),vn(r,3*v,3*x),vn(r,3*v+1,3*x+1),vn(r,3*v+2,3*x+2)}x-s<d-x?(Ii(o,r,s,x),s=x+1):(Ii(o,r,x+1,d),d=x)}}function vn(o,r,s){const d=o[r];o[r]=o[s],o[s]=d}It("FeaturePositionMap",yn);class ss{constructor(r,s){this.gl=r.gl,this.location=s}}class Fc extends ss{constructor(r,s){super(r,s),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Mf extends ss{constructor(r,s){super(r,s),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Df extends ss{constructor(r,s){super(r,s),this.current=zr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const Xy=new Float32Array(16);function Ud(o){return[Fo(255*o.r,255*o.g),Fo(255*o.b,255*o.a)]}class jo{constructor(r,s,d){this.value=r,this.uniformNames=s.map(f=>`u_${f}`),this.type=d}setUniform(r,s,d){r.set(d.constantOr(this.value))}getBinding(r,s,d){return this.type==="color"?new Df(r,s):new Fc(r,s)}}class ls{constructor(r,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=r.tlbr}setUniform(r,s,d,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&r.set(v)}getBinding(r,s,d){return d.substr(0,9)==="u_pattern"?new Mf(r,s):new Fc(r,s)}}class Vo{constructor(r,s,d,f){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(r,s,d,f,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Xr(0),s,{},f,[],v);this.paintVertexArray.resize(r),this._setPaintValue(x,r,w)}updatePaintArray(r,s,d,f){const v=this.expression.evaluate({zoom:0},d,f);this._setPaintValue(r,s,v)}_setPaintValue(r,s,d){if(this.type==="color"){const f=Ud(d);for(let v=r;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=r;f<s;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lo{constructor(r,s,d,f,v,x){this.expression=r,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,d,f,v){const x=this.expression.evaluate(new Xr(this.zoom),s,{},f,[],v),w=this.expression.evaluate(new Xr(this.zoom+1),s,{},f,[],v),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,x,w)}updatePaintArray(r,s,d,f){const v=this.expression.evaluate({zoom:this.zoom},d,f),x=this.expression.evaluate({zoom:this.zoom+1},d,f);this._setPaintValue(r,s,v,x)}_setPaintValue(r,s,d,f){if(this.type==="color"){const v=Ud(d),x=Ud(f);for(let w=r;w<s;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=r;v<s;v++)this.paintVertexArray.emplace(v,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=ee(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(f)}getBinding(r,s,d){return new Fc(r,s)}}class Uo{constructor(r,s,d,f,v,x){this.expression=r,this.type=s,this.useIntegerZoom=d,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(r,s,d){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(f,r,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(r,s,d,f,v){this._setPaintValues(r,s,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(r,s,d,f){if(!f||!d)return;const{min:v,mid:x,max:w}=d,T=f[v],E=f[x],R=f[w];if(T&&E&&R)for(let j=r;j<s;j++)this.zoomInPaintVertexArray.emplace(j,E.tl[0],E.tl[1],E.br[0],E.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],E.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,E.tl[0],E.tl[1],E.br[0],E.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],E.pixelRatio,R.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,No.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,No.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Hd{constructor(r,s,d){this.binders={},this._buffers=[];const f=[];for(const v in r.paint._values){if(!d(v))continue;const x=r.paint.get(v);if(!(x instanceof mi&&Ms(x.property.specification)))continue;const w=HE(v,r.type),T=x.value,E=x.property.specification.type,R=x.property.useIntegerZoom,j=x.property.specification["property-type"],G=j==="cross-faded"||j==="cross-faded-data-driven";if(T.kind==="constant")this.binders[v]=G?new ls(T.value,w):new jo(T.value,w,E),f.push(`/u_${v}`);else if(T.kind==="source"||G){const X=H1(v,E,"source");this.binders[v]=G?new Uo(T,E,R,s,X,r.id):new Vo(T,w,E,X),f.push(`/a_${v}`)}else{const X=H1(v,E,"composite");this.binders[v]=new lo(T,w,E,R,s,X),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Vo||s instanceof lo?s.maxValue:0}populatePaintArrays(r,s,d,f,v){for(const x in this.binders){const w=this.binders[x];(w instanceof Vo||w instanceof lo||w instanceof Uo)&&w.populatePaintArray(r,s,d,f,v)}}setConstantPatternPositions(r,s){for(const d in this.binders){const f=this.binders[d];f instanceof ls&&f.setConstantPatternPositions(r,s)}}updatePaintArrays(r,s,d,f,v){let x=!1;for(const w in r){const T=s.getPositions(w);for(const E of T){const R=d.feature(E.index);for(const j in this.binders){const G=this.binders[j];if((G instanceof Vo||G instanceof lo||G instanceof Uo)&&G.expression.isStateDependent===!0){const X=f.paint.get(j);G.expression=X.value,G.updatePaintArray(E.start,E.end,R,r[w],v),x=!0}}}}return x}defines(){const r=[];for(const s in this.binders){const d=this.binders[s];(d instanceof jo||d instanceof ls)&&r.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Vo||d instanceof lo)for(let f=0;f<d.paintVertexAttributes.length;f++)r.push(d.paintVertexAttributes[f].name);else if(d instanceof Uo)for(let f=0;f<No.members.length;f++)r.push(No.members[f].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof jo||d instanceof ls||d instanceof lo)for(const f of d.uniformNames)r.push(f)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,s){const d=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof jo||v instanceof ls||v instanceof lo){for(const x of v.uniformNames)if(s[x]){const w=v.getBinding(r,s[x],x);d.push({name:x,property:f,binding:w})}}}return d}setUniforms(r,s,d,f){for(const{name:v,property:x,binding:w}of s)this.binders[x].setUniform(w,f,d.get(x),v)}updatePaintBuffers(r){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(r&&d instanceof Uo){const f=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(d instanceof Vo||d instanceof lo)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const s in this.binders){const d=this.binders[s];(d instanceof Vo||d instanceof lo||d instanceof Uo)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Vo||s instanceof lo||s instanceof Uo)&&s.destroy()}}}class ha{constructor(r,s,d=()=>!0){this.programConfigurations={};for(const f of r)this.programConfigurations[f.id]=new Hd(f,s,d);this.needsUpload=!1,this._featureMap=new yn,this._bufferOffset=0}populatePaintArrays(r,s,d,f,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(r,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,d,f){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,s,v,f)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function HE(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function H1(o,r,s){const d={color:{source:Os,composite:ce},number:{source:I,composite:Os}},f=function(v){return{"line-pattern":{source:Br,composite:Br},"fill-pattern":{source:Br,composite:Br},"fill-extrusion-pattern":{source:Br,composite:Br}}[v]}(o);return f&&f[s]||d[r][s]}It("ConstantBinder",jo),It("CrossFadedConstantBinder",ls),It("SourceExpressionBinder",Vo),It("CrossFadedCompositeBinder",Uo),It("CompositeExpressionBinder",lo),It("ProgramConfiguration",Hd,{omit:["_buffers"]}),It("ProgramConfigurationSet",ha);const En=8192,Jy=Math.pow(2,14)-1,W1=-Jy-1;function Rl(o){const r=En/o.extent,s=o.loadGeometry();for(let d=0;d<s.length;d++){const f=s[d];for(let v=0;v<f.length;v++){const x=f[v],w=Math.round(x.x*r),T=Math.round(x.y*r);x.x=ee(w,W1,Jy),x.y=ee(T,W1,Jy),(w<x.x||w>x.x+1||T<x.y||T>x.y+1)&&Ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ll(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Rl(o):[]}}function Rf(o,r,s,d,f){o.emplaceBack(2*r+(d+1)/2,2*s+(f+1)/2)}class Yy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Rt,this.indexArray=new Qn,this.segments=new Jr,this.programConfigurations=new ha(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){const f=this.layers[0],v=[];let x=null,w=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:T,id:E,index:R,sourceLayerIndex:j}of r){const G=this.layers[0]._featureFilter.needGeometry,X=Ll(T,G);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),X,d))continue;const Y=w?x.evaluate(X,{},d):void 0,se={id:E,properties:T.properties,type:T.type,sourceLayerIndex:j,index:R,geometry:G?X.geometry:Rl(T),patterns:{},sortKey:Y};v.push(se)}w&&v.sort((T,E)=>T.sortKey-E.sortKey);for(const T of v){const{geometry:E,index:R,sourceLayerIndex:j}=T,G=r[R].feature;this.addFeature(T,E,R,d),s.featureIndex.insert(G,E,R,j,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Zi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,d,f){for(const v of s)for(const x of v){const w=x.x,T=x.y;if(w<0||w>=En||T<0||T>=En)continue;const E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),R=E.vertexLength;Rf(this.layoutVertexArray,w,T,-1,-1),Rf(this.layoutVertexArray,w,T,1,-1),Rf(this.layoutVertexArray,w,T,1,1),Rf(this.layoutVertexArray,w,T,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),E.vertexLength+=4,E.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},f)}}function G1(o,r){for(let s=0;s<o.length;s++)if(Nc(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(Nc(o,r[s]))return!0;return!!Qy(o,r)}function WE(o,r,s){return!!Nc(o,r)||!!ev(r,o,s)}function q1(o,r){if(o.length===1)return K1(r,o[0]);for(let s=0;s<r.length;s++){const d=r[s];for(let f=0;f<d.length;f++)if(Nc(o,d[f]))return!0}for(let s=0;s<o.length;s++)if(K1(r,o[s]))return!0;for(let s=0;s<r.length;s++)if(Qy(o,r[s]))return!0;return!1}function GE(o,r,s){if(o.length>1){if(Qy(o,r))return!0;for(let d=0;d<r.length;d++)if(ev(r[d],o,s))return!0}for(let d=0;d<o.length;d++)if(ev(o[d],r,s))return!0;return!1}function Qy(o,r){if(o.length===0||r.length===0)return!1;for(let s=0;s<o.length-1;s++){const d=o[s],f=o[s+1];for(let v=0;v<r.length-1;v++)if(qE(d,f,r[v],r[v+1]))return!0}return!1}function qE(o,r,s,d){return Ke(o,s,d)!==Ke(r,s,d)&&Ke(o,r,s)!==Ke(o,r,d)}function ev(o,r,s){const d=s*s;if(r.length===1)return o.distSqr(r[0])<d;for(let f=1;f<r.length;f++)if(Z1(o,r[f-1],r[f])<d)return!0;return!1}function Z1(o,r,s){const d=r.distSqr(s);if(d===0)return o.distSqr(r);const f=((o.x-r.x)*(s.x-r.x)+(o.y-r.y)*(s.y-r.y))/d;return o.distSqr(f<0?r:f>1?s:s.sub(r)._mult(f)._add(r))}function K1(o,r){let s,d,f,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let w=0,T=s.length-1;w<s.length;T=w++)d=s[w],f=s[T],d.y>r.y!=f.y>r.y&&r.x<(f.x-d.x)*(r.y-d.y)/(f.y-d.y)+d.x&&(v=!v)}return v}function Nc(o,r){let s=!1;for(let d=0,f=o.length-1;d<o.length;f=d++){const v=o[d],x=o[f];v.y>r.y!=x.y>r.y&&r.x<(x.x-v.x)*(r.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function ZE(o,r,s){const d=s[0],f=s[2];if(o.x<d.x&&r.x<d.x||o.x>f.x&&r.x>f.x||o.y<d.y&&r.y<d.y||o.y>f.y&&r.y>f.y)return!1;const v=Ke(o,r,s[0]);return v!==Ke(o,r,s[1])||v!==Ke(o,r,s[2])||v!==Ke(o,r,s[3])}function Wd(o,r,s){const d=r.paint.get(o).value;return d.kind==="constant"?d.value:s.programConfigurations.get(r.id).getMaxValue(o)}function Lf(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function $f(o,r,s,d,f){if(!r[0]&&!r[1])return o;const v=D.convert(r)._mult(f);s==="viewport"&&v._rotate(-d);const x=[];for(let w=0;w<o.length;w++)x.push(o[w].sub(v));return x}let X1,J1;It("CircleBucket",Yy,{omit:["layers"]});var KE={get paint(){return J1=J1||new wn({"circle-radius":new Xt($e.paint_circle["circle-radius"]),"circle-color":new Xt($e.paint_circle["circle-color"]),"circle-blur":new Xt($e.paint_circle["circle-blur"]),"circle-opacity":new Xt($e.paint_circle["circle-opacity"]),"circle-translate":new jt($e.paint_circle["circle-translate"]),"circle-translate-anchor":new jt($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xt($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xt($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xt($e.paint_circle["circle-stroke-opacity"])})},get layout(){return X1=X1||new wn({"circle-sort-key":new Xt($e.layout_circle["circle-sort-key"])})}},Pi=1e-6,jc=typeof Float32Array<"u"?Float32Array:Array;function tv(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Y1(o,r,s){var d=r[0],f=r[1],v=r[2],x=r[3],w=r[4],T=r[5],E=r[6],R=r[7],j=r[8],G=r[9],X=r[10],Y=r[11],se=r[12],me=r[13],ye=r[14],ke=r[15],xe=s[0],Ie=s[1],Be=s[2],qe=s[3];return o[0]=xe*d+Ie*w+Be*j+qe*se,o[1]=xe*f+Ie*T+Be*G+qe*me,o[2]=xe*v+Ie*E+Be*X+qe*ye,o[3]=xe*x+Ie*R+Be*Y+qe*ke,o[4]=(xe=s[4])*d+(Ie=s[5])*w+(Be=s[6])*j+(qe=s[7])*se,o[5]=xe*f+Ie*T+Be*G+qe*me,o[6]=xe*v+Ie*E+Be*X+qe*ye,o[7]=xe*x+Ie*R+Be*Y+qe*ke,o[8]=(xe=s[8])*d+(Ie=s[9])*w+(Be=s[10])*j+(qe=s[11])*se,o[9]=xe*f+Ie*T+Be*G+qe*me,o[10]=xe*v+Ie*E+Be*X+qe*ye,o[11]=xe*x+Ie*R+Be*Y+qe*ke,o[12]=(xe=s[12])*d+(Ie=s[13])*w+(Be=s[14])*j+(qe=s[15])*se,o[13]=xe*f+Ie*T+Be*G+qe*me,o[14]=xe*v+Ie*E+Be*X+qe*ye,o[15]=xe*x+Ie*R+Be*Y+qe*ke,o}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var Gd,XE=Y1;function Bf(o,r,s){var d=r[0],f=r[1],v=r[2],x=r[3];return o[0]=s[0]*d+s[4]*f+s[8]*v+s[12]*x,o[1]=s[1]*d+s[5]*f+s[9]*v+s[13]*x,o[2]=s[2]*d+s[6]*f+s[10]*v+s[14]*x,o[3]=s[3]*d+s[7]*f+s[11]*v+s[15]*x,o}Gd=new jc(4),jc!=Float32Array&&(Gd[0]=0,Gd[1]=0,Gd[2]=0,Gd[3]=0);class JE extends so{constructor(r){super(r,KE)}createBucket(r){return new Yy(r)}queryRadius(r){const s=r;return Wd("circle-radius",this,s)+Wd("circle-stroke-width",this,s)+Lf(this.paint.get("circle-translate"))}queryIntersectsFeature(r,s,d,f,v,x,w,T){const E=$f(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),R=this.paint.get("circle-radius").evaluate(s,d)+this.paint.get("circle-stroke-width").evaluate(s,d),j=this.paint.get("circle-pitch-alignment")==="map",G=j?E:function(Y,se){return Y.map(me=>Q1(me,se))}(E,T),X=j?R*w:R;for(const Y of f)for(const se of Y){const me=j?se:Q1(se,T);let ye=X;const ke=Bf([],[se.x,se.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ye*=ke[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ye*=x.cameraToCenterDistance/ke[3]),WE(G,me,ye))return!0}return!1}}function Q1(o,r){const s=Bf([],[o.x,o.y,0,1],r);return new D(s[0]/s[3],s[1]/s[3])}class eb extends Yy{}let tb;It("HeatmapBucket",eb,{omit:["layers"]});var YE={get paint(){return tb=tb||new wn({"heatmap-radius":new Xt($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xt($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Bd($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt($e.paint_heatmap["heatmap-opacity"])})}};function rv(o,{width:r,height:s},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==r*s*d)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${r*s*d}`)}else f=new Uint8Array(r*s*d);return o.width=r,o.height=s,o.data=f,o}function rb(o,{width:r,height:s},d){if(r===o.width&&s===o.height)return;const f=rv({},{width:r,height:s},d);nv(o,f,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,s)},d),o.width=r,o.height=s,o.data=f.data}function nv(o,r,s,d,f,v){if(f.width===0||f.height===0)return r;if(f.width>o.width||f.height>o.height||s.x>o.width-f.width||s.y>o.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>r.width||f.height>r.height||d.x>r.width-f.width||d.y>r.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,w=r.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<f.height;T++){const E=((s.y+T)*o.width+s.x)*v,R=((d.y+T)*r.width+d.x)*v;for(let j=0;j<f.width*v;j++)w[R+j]=x[E+j]}return r}class qd{constructor(r,s){rv(this,r,1,s)}resize(r){rb(this,r,1)}clone(){return new qd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,f,v){nv(r,s,d,f,v,1)}}class bo{constructor(r,s){rv(this,r,4,s)}resize(r){rb(this,r,4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new bo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,d,f,v){nv(r,s,d,f,v,4)}}function nb(o){const r={},s=o.resolution||256,d=o.clips?o.clips.length:1,f=o.image||new bo({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,w,T)=>{r[o.evaluationKey]=T;const E=o.expression.evaluate(r);f.data[x+w+0]=Math.floor(255*E.r/E.a),f.data[x+w+1]=Math.floor(255*E.g/E.a),f.data[x+w+2]=Math.floor(255*E.b/E.a),f.data[x+w+3]=Math.floor(255*E.a)};if(o.clips)for(let x=0,w=0;x<d;++x,w+=4*s)for(let T=0,E=0;T<s;T++,E+=4){const R=T/(s-1),{start:j,end:G}=o.clips[x];v(w,E,j*(1-R)+G*R)}else for(let x=0,w=0;x<s;x++,w+=4)v(0,w,x/(s-1));return f}It("AlphaImage",qd),It("RGBAImage",bo);class QE extends so{createBucket(r){return new eb(r)}constructor(r){super(r,YE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ib;var ez={get paint(){return ib=ib||new wn({"hillshade-illumination-direction":new jt($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new jt($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt($e.paint_hillshade["hillshade-accent-color"])})}};class tz extends so{constructor(r){super(r,ez)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const rz=an([{name:"a_pos",components:2,type:"Int16"}],4),{members:nz}=rz;var iv={exports:{}};function Of(o,r,s){s=s||2;var d,f,v,x,w,T,E,R=r&&r.length,j=R?r[0]*s:o.length,G=ob(o,0,j,s,!0),X=[];if(!G||G.next===G.prev)return X;if(R&&(G=function(se,me,ye,ke){var xe,Ie,Be,qe=[];for(xe=0,Ie=me.length;xe<Ie;xe++)(Be=ob(se,me[xe]*ke,xe<Ie-1?me[xe+1]*ke:se.length,ke,!1))===Be.next&&(Be.steiner=!0),qe.push(dz(Be));for(qe.sort(lz),xe=0;xe<qe.length;xe++)ye=cz(qe[xe],ye);return ye}(o,r,G,s)),o.length>80*s){d=v=o[0],f=x=o[1];for(var Y=s;Y<j;Y+=s)(w=o[Y])<d&&(d=w),(T=o[Y+1])<f&&(f=T),w>v&&(v=w),T>x&&(x=T);E=(E=Math.max(v-d,x-f))!==0?32767/E:0}return Zd(G,X,s,d,f,E,0),X}function ob(o,r,s,d,f){var v,x;if(f===sv(o,r,s,d)>0)for(v=r;v<s;v+=d)x=lb(v,o[v],o[v+1],x);else for(v=s-d;v>=r;v-=d)x=lb(v,o[v],o[v+1],x);return x&&Ff(x,x.next)&&(Xd(x),x=x.next),x}function $l(o,r){if(!o)return o;r||(r=o);var s,d=o;do if(s=!1,d.steiner||!Ff(d,d.next)&&Cn(d.prev,d,d.next)!==0)d=d.next;else{if(Xd(d),(d=r=d.prev)===d.next)break;s=!0}while(s||d!==r);return r}function Zd(o,r,s,d,f,v,x){if(o){!x&&v&&function(R,j,G,X){var Y=R;do Y.z===0&&(Y.z=ov(Y.x,Y.y,j,G,X)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==R);Y.prevZ.nextZ=null,Y.prevZ=null,function(se){var me,ye,ke,xe,Ie,Be,qe,_t,Lt=1;do{for(ye=se,se=null,Ie=null,Be=0;ye;){for(Be++,ke=ye,qe=0,me=0;me<Lt&&(qe++,ke=ke.nextZ);me++);for(_t=Lt;qe>0||_t>0&&ke;)qe!==0&&(_t===0||!ke||ye.z<=ke.z)?(xe=ye,ye=ye.nextZ,qe--):(xe=ke,ke=ke.nextZ,_t--),Ie?Ie.nextZ=xe:se=xe,xe.prevZ=Ie,Ie=xe;ye=ke}Ie.nextZ=null,Lt*=2}while(Be>1)}(Y)}(o,d,f,v);for(var w,T,E=o;o.prev!==o.next;)if(w=o.prev,T=o.next,v?oz(o,d,f,v):iz(o))r.push(w.i/s|0),r.push(o.i/s|0),r.push(T.i/s|0),Xd(o),o=T.next,E=T.next;else if((o=T)===E){x?x===1?Zd(o=az($l(o),r,s),r,s,d,f,v,2):x===2&&sz(o,r,s,d,f,v):Zd($l(o),r,s,d,f,v,1);break}}}function iz(o){var r=o.prev,s=o,d=o.next;if(Cn(r,s,d)>=0)return!1;for(var f=r.x,v=s.x,x=d.x,w=r.y,T=s.y,E=d.y,R=f<v?f<x?f:x:v<x?v:x,j=w<T?w<E?w:E:T<E?T:E,G=f>v?f>x?f:x:v>x?v:x,X=w>T?w>E?w:E:T>E?T:E,Y=d.next;Y!==r;){if(Y.x>=R&&Y.x<=G&&Y.y>=j&&Y.y<=X&&Vc(f,w,v,T,x,E,Y.x,Y.y)&&Cn(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function oz(o,r,s,d){var f=o.prev,v=o,x=o.next;if(Cn(f,v,x)>=0)return!1;for(var w=f.x,T=v.x,E=x.x,R=f.y,j=v.y,G=x.y,X=w<T?w<E?w:E:T<E?T:E,Y=R<j?R<G?R:G:j<G?j:G,se=w>T?w>E?w:E:T>E?T:E,me=R>j?R>G?R:G:j>G?j:G,ye=ov(X,Y,r,s,d),ke=ov(se,me,r,s,d),xe=o.prevZ,Ie=o.nextZ;xe&&xe.z>=ye&&Ie&&Ie.z<=ke;){if(xe.x>=X&&xe.x<=se&&xe.y>=Y&&xe.y<=me&&xe!==f&&xe!==x&&Vc(w,R,T,j,E,G,xe.x,xe.y)&&Cn(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Ie.x>=X&&Ie.x<=se&&Ie.y>=Y&&Ie.y<=me&&Ie!==f&&Ie!==x&&Vc(w,R,T,j,E,G,Ie.x,Ie.y)&&Cn(Ie.prev,Ie,Ie.next)>=0))return!1;Ie=Ie.nextZ}for(;xe&&xe.z>=ye;){if(xe.x>=X&&xe.x<=se&&xe.y>=Y&&xe.y<=me&&xe!==f&&xe!==x&&Vc(w,R,T,j,E,G,xe.x,xe.y)&&Cn(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Ie&&Ie.z<=ke;){if(Ie.x>=X&&Ie.x<=se&&Ie.y>=Y&&Ie.y<=me&&Ie!==f&&Ie!==x&&Vc(w,R,T,j,E,G,Ie.x,Ie.y)&&Cn(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.nextZ}return!0}function az(o,r,s){var d=o;do{var f=d.prev,v=d.next.next;!Ff(f,v)&&ab(f,d,d.next,v)&&Kd(f,v)&&Kd(v,f)&&(r.push(f.i/s|0),r.push(d.i/s|0),r.push(v.i/s|0),Xd(d),Xd(d.next),d=o=v),d=d.next}while(d!==o);return $l(d)}function sz(o,r,s,d,f,v){var x=o;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&hz(x,w)){var T=sb(x,w);return x=$l(x,x.next),T=$l(T,T.next),Zd(x,r,s,d,f,v,0),void Zd(T,r,s,d,f,v,0)}w=w.next}x=x.next}while(x!==o)}function lz(o,r){return o.x-r.x}function cz(o,r){var s=function(f,v){var x,w=v,T=f.x,E=f.y,R=-1/0;do{if(E<=w.y&&E>=w.next.y&&w.next.y!==w.y){var j=w.x+(E-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(j<=T&&j>R&&(R=j,x=w.x<w.next.x?w:w.next,j===T))return x}w=w.next}while(w!==v);if(!x)return null;var G,X=x,Y=x.x,se=x.y,me=1/0;w=x;do T>=w.x&&w.x>=Y&&T!==w.x&&Vc(E<se?T:R,E,Y,se,E<se?R:T,E,w.x,w.y)&&(G=Math.abs(E-w.y)/(T-w.x),Kd(w,f)&&(G<me||G===me&&(w.x>x.x||w.x===x.x&&uz(x,w)))&&(x=w,me=G)),w=w.next;while(w!==X);return x}(o,r);if(!s)return r;var d=sb(s,o);return $l(d,d.next),$l(s,s.next)}function uz(o,r){return Cn(o.prev,o,r.prev)<0&&Cn(r.next,o,o.next)<0}function ov(o,r,s,d,f){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*f|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function dz(o){var r=o,s=o;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==o);return s}function Vc(o,r,s,d,f,v,x,w){return(f-x)*(r-w)>=(o-x)*(v-w)&&(o-x)*(d-w)>=(s-x)*(r-w)&&(s-x)*(v-w)>=(f-x)*(d-w)}function hz(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(s,d){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==d.i&&f.next.i!==d.i&&ab(f,f.next,s,d))return!0;f=f.next}while(f!==s);return!1}(o,r)&&(Kd(o,r)&&Kd(r,o)&&function(s,d){var f=s,v=!1,x=(s.x+d.x)/2,w=(s.y+d.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&x<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(o,r)&&(Cn(o.prev,o,r.prev)||Cn(o,r.prev,r))||Ff(o,r)&&Cn(o.prev,o,o.next)>0&&Cn(r.prev,r,r.next)>0)}function Cn(o,r,s){return(r.y-o.y)*(s.x-r.x)-(r.x-o.x)*(s.y-r.y)}function Ff(o,r){return o.x===r.x&&o.y===r.y}function ab(o,r,s,d){var f=jf(Cn(o,r,s)),v=jf(Cn(o,r,d)),x=jf(Cn(s,d,o)),w=jf(Cn(s,d,r));return f!==v&&x!==w||!(f!==0||!Nf(o,s,r))||!(v!==0||!Nf(o,d,r))||!(x!==0||!Nf(s,o,d))||!(w!==0||!Nf(s,r,d))}function Nf(o,r,s){return r.x<=Math.max(o.x,s.x)&&r.x>=Math.min(o.x,s.x)&&r.y<=Math.max(o.y,s.y)&&r.y>=Math.min(o.y,s.y)}function jf(o){return o>0?1:o<0?-1:0}function Kd(o,r){return Cn(o.prev,o,o.next)<0?Cn(o,r,o.next)>=0&&Cn(o,o.prev,r)>=0:Cn(o,r,o.prev)<0||Cn(o,o.next,r)<0}function sb(o,r){var s=new av(o.i,o.x,o.y),d=new av(r.i,r.x,r.y),f=o.next,v=r.prev;return o.next=r,r.prev=o,s.next=f,f.prev=s,d.next=s,s.prev=d,v.next=d,d.prev=v,d}function lb(o,r,s,d){var f=new av(o,r,s);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function Xd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function av(o,r,s){this.i=o,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sv(o,r,s,d){for(var f=0,v=r,x=s-d;v<s;v+=d)f+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return f}iv.exports=Of,iv.exports.default=Of,Of.deviation=function(o,r,s,d){var f=r&&r.length,v=Math.abs(sv(o,0,f?r[0]*s:o.length,s));if(f)for(var x=0,w=r.length;x<w;x++)v-=Math.abs(sv(o,r[x]*s,x<w-1?r[x+1]*s:o.length,s));var T=0;for(x=0;x<d.length;x+=3){var E=d[x]*s,R=d[x+1]*s,j=d[x+2]*s;T+=Math.abs((o[E]-o[j])*(o[R+1]-o[E+1])-(o[E]-o[R])*(o[j+1]-o[E+1]))}return v===0&&T===0?0:Math.abs((T-v)/v)},Of.flatten=function(o){for(var r=o[0][0].length,s={vertices:[],holes:[],dimensions:r},d=0,f=0;f<o.length;f++){for(var v=0;v<o[f].length;v++)for(var x=0;x<r;x++)s.vertices.push(o[f][v][x]);f>0&&s.holes.push(d+=o[f-1].length)}return s};var cb=C(iv.exports);function pz(o,r,s,d,f){ub(o,r,s||0,d||o.length-1,f||fz)}function ub(o,r,s,d,f){for(;d>s;){if(d-s>600){var v=d-s+1,x=r-s+1,w=Math.log(v),T=.5*Math.exp(2*w/3),E=.5*Math.sqrt(w*T*(v-T)/v)*(x-v/2<0?-1:1);ub(o,r,Math.max(s,Math.floor(r-x*T/v+E)),Math.min(d,Math.floor(r+(v-x)*T/v+E)),f)}var R=o[r],j=s,G=d;for(Jd(o,s,r),f(o[d],R)>0&&Jd(o,s,d);j<G;){for(Jd(o,j,G),j++,G--;f(o[j],R)<0;)j++;for(;f(o[G],R)>0;)G--}f(o[s],R)===0?Jd(o,s,G):Jd(o,++G,d),G<=r&&(s=G+1),r<=G&&(d=G-1)}}function Jd(o,r,s){var d=o[r];o[r]=o[s],o[s]=d}function fz(o,r){return o<r?-1:o>r?1:0}function lv(o,r){const s=o.length;if(s<=1)return[o];const d=[];let f,v;for(let x=0;x<s;x++){const w=Re(o[x]);w!==0&&(o[x].area=Math.abs(w),v===void 0&&(v=w<0),v===w<0?(f&&d.push(f),f=[o[x]]):f.push(o[x]))}if(f&&d.push(f),r>1)for(let x=0;x<d.length;x++)d[x].length<=r||(pz(d[x],r,1,d[x].length-1,mz),d[x]=d[x].slice(0,r));return d}function mz(o,r){return r.area-o.area}function cv(o,r,s){const d=s.patternDependencies;let f=!1;for(const v of r){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(f=!0);const w=x.constantOr(null);w&&(f=!0,d[w.to]=!0,d[w.from]=!0)}return f}function uv(o,r,s,d,f){const v=f.patternDependencies;for(const x of r){const w=x.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let T=w.evaluate({zoom:d-1},s,{},f.availableImages),E=w.evaluate({zoom:d},s,{},f.availableImages),R=w.evaluate({zoom:d+1},s,{},f.availableImages);T=T&&T.name?T.name:T,E=E&&E.name?E.name:E,R=R&&R.name?R.name:R,v[T]=!0,v[E]=!0,v[R]=!0,s.patterns[x.id]={min:T,mid:E,max:R}}}return s}class dv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new yr,this.indexArray=new Qn,this.indexArray2=new On,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new Jr,this.segments2=new Jr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasPattern=cv("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:w,id:T,index:E,sourceLayerIndex:R}of r){const j=this.layers[0]._featureFilter.needGeometry,G=Ll(w,j);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),G,d))continue;const X=v?f.evaluate(G,{},d,s.availableImages):void 0,Y={id:T,properties:w.properties,type:w.type,sourceLayerIndex:R,index:E,geometry:j?G.geometry:Rl(w),patterns:{},sortKey:X};x.push(Y)}v&&x.sort((w,T)=>w.sortKey-T.sortKey);for(const w of x){const{geometry:T,index:E,sourceLayerIndex:R}=w;if(this.hasPattern){const j=uv("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(w,T,E,d,{});s.featureIndex.insert(r[E].feature,T,E,R,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}addFeatures(r,s,d){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nz),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,d,f,v){for(const x of lv(s,500)){let w=0;for(const X of x)w+=X.length;const T=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),E=T.vertexLength,R=[],j=[];for(const X of x){if(X.length===0)continue;X!==x[0]&&j.push(R.length/2);const Y=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),se=Y.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(se+X.length-1,se),R.push(X[0].x),R.push(X[0].y);for(let me=1;me<X.length;me++)this.layoutVertexArray.emplaceBack(X[me].x,X[me].y),this.indexArray2.emplaceBack(se+me-1,se+me),R.push(X[me].x),R.push(X[me].y);Y.vertexLength+=X.length,Y.primitiveLength+=X.length}const G=cb(R,j);for(let X=0;X<G.length;X+=3)this.indexArray.emplaceBack(E+G[X],E+G[X+1],E+G[X+2]);T.vertexLength+=w,T.primitiveLength+=G.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,f)}}let db,hb;It("FillBucket",dv,{omit:["layers","patternFeatures"]});var gz={get paint(){return hb=hb||new wn({"fill-antialias":new jt($e.paint_fill["fill-antialias"]),"fill-opacity":new Xt($e.paint_fill["fill-opacity"]),"fill-color":new Xt($e.paint_fill["fill-color"]),"fill-outline-color":new Xt($e.paint_fill["fill-outline-color"]),"fill-translate":new jt($e.paint_fill["fill-translate"]),"fill-translate-anchor":new jt($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new Al($e.paint_fill["fill-pattern"])})},get layout(){return db=db||new wn({"fill-sort-key":new Xt($e.layout_fill["fill-sort-key"])})}};class yz extends so{constructor(r){super(r,gz)}recalculate(r,s){super.recalculate(r,s);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new dv(r)}queryRadius(){return Lf(this.paint.get("fill-translate"))}queryIntersectsFeature(r,s,d,f,v,x,w){return q1($f(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),f)}isTileClipped(){return!0}}const vz=an([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),_z=an([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xz}=vz;var Ns={},bz=P,pb=Uc;function Uc(o,r,s,d,f){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=d,this._values=f,o.readFields(wz,this,r)}function wz(o,r,s){o==1?r.id=s.readVarint():o==2?function(d,f){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=f._keys[d.readVarint()],w=f._values[d.readVarint()];f.properties[x]=w}}(s,r):o==3?r.type=s.readVarint():o==4&&(r._geometry=s.pos)}function Sz(o){for(var r,s,d=0,f=0,v=o.length,x=v-1;f<v;x=f++)d+=((s=o[x]).x-(r=o[f]).x)*(r.y+s.y);return d}Uc.types=["Unknown","Point","LineString","Polygon"],Uc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,s=o.readVarint()+o.pos,d=1,f=0,v=0,x=0,w=[];o.pos<s;){if(f<=0){var T=o.readVarint();d=7&T,f=T>>3}if(f--,d===1||d===2)v+=o.readSVarint(),x+=o.readSVarint(),d===1&&(r&&w.push(r),r=[]),r.push(new bz(v,x));else{if(d!==7)throw new Error("unknown command "+d);r&&r.push(r[0].clone())}}return r&&w.push(r),w},Uc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,s=1,d=0,f=0,v=0,x=1/0,w=-1/0,T=1/0,E=-1/0;o.pos<r;){if(d<=0){var R=o.readVarint();s=7&R,d=R>>3}if(d--,s===1||s===2)(f+=o.readSVarint())<x&&(x=f),f>w&&(w=f),(v+=o.readSVarint())<T&&(T=v),v>E&&(E=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,T,w,E]},Uc.prototype.toGeoJSON=function(o,r,s){var d,f,v=this.extent*Math.pow(2,s),x=this.extent*o,w=this.extent*r,T=this.loadGeometry(),E=Uc.types[this.type];function R(X){for(var Y=0;Y<X.length;Y++){var se=X[Y];X[Y]=[360*(se.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(d=0;d<T.length;d++)j[d]=T[d][0];R(T=j);break;case 2:for(d=0;d<T.length;d++)R(T[d]);break;case 3:for(T=function(X){var Y=X.length;if(Y<=1)return[X];for(var se,me,ye=[],ke=0;ke<Y;ke++){var xe=Sz(X[ke]);xe!==0&&(me===void 0&&(me=xe<0),me===xe<0?(se&&ye.push(se),se=[X[ke]]):se.push(X[ke]))}return se&&ye.push(se),ye}(T),d=0;d<T.length;d++)for(f=0;f<T[d].length;f++)R(T[d][f])}T.length===1?T=T[0]:E="Multi"+E;var G={type:"Feature",geometry:{type:E,coordinates:T},properties:this.properties};return"id"in this&&(G.id=this.id),G};var Cz=pb,fb=mb;function mb(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(kz,this,r),this.length=this._features.length}function kz(o,r,s){o===15?r.version=s.readVarint():o===1?r.name=s.readString():o===5?r.extent=s.readVarint():o===2?r._features.push(s.pos):o===3?r._keys.push(s.readString()):o===4&&r._values.push(function(d){for(var f=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;f=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return f}(s))}mb.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new Cz(this._pbf,r,this.extent,this._keys,this._values)};var Tz=fb;function Iz(o,r,s){if(o===3){var d=new Tz(s,s.readVarint()+s.pos);d.length&&(r[d.name]=d)}}Ns.VectorTile=function(o,r){this.layers=o.readFields(Iz,{},r)},Ns.VectorTileFeature=pb,Ns.VectorTileLayer=fb;const Pz=Ns.VectorTileFeature.types,hv=Math.pow(2,13);function Yd(o,r,s,d,f,v,x,w){o.emplaceBack(r,s,2*Math.floor(d*hv)+x,f*hv*2,v*hv*2,Math.round(w))}class pv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ht,this.centroidVertexArray=new rt,this.indexArray=new Qn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new Jr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.features=[],this.hasPattern=cv("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:w}of r){const T=this.layers[0]._featureFilter.needGeometry,E=Ll(f,T);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),E,d))continue;const R={id:v,sourceLayerIndex:w,index:x,geometry:T?E.geometry:Rl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(uv("fill-extrusion",this.layers,R,this.zoom,s)):this.addFeature(R,R.geometry,x,d,{}),s.featureIndex.insert(f,R.geometry,x,w,this.index,!0)}}addFeatures(r,s,d){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,d)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xz),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,_z.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,s,d,f,v){const x={x:0,y:0,vertexCount:0};for(const w of lv(s,500)){let T=0;for(const Y of w)T+=Y.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of w){if(Y.length===0||zz(Y))continue;let se=0;for(let me=0;me<Y.length;me++){const ye=Y[me];if(me>=1){const ke=Y[me-1];if(!Ez(ye,ke)){E.vertexLength+4>Jr.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xe=ye.sub(ke)._perp()._unit(),Ie=ke.dist(ye);se+Ie>32768&&(se=0),Yd(this.layoutVertexArray,ye.x,ye.y,xe.x,xe.y,0,0,se),Yd(this.layoutVertexArray,ye.x,ye.y,xe.x,xe.y,0,1,se),x.x+=2*ye.x,x.y+=2*ye.y,x.vertexCount+=2,se+=Ie,Yd(this.layoutVertexArray,ke.x,ke.y,xe.x,xe.y,0,0,se),Yd(this.layoutVertexArray,ke.x,ke.y,xe.x,xe.y,0,1,se),x.x+=2*ke.x,x.y+=2*ke.y,x.vertexCount+=2;const Be=E.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+T>Jr.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),Pz[r.type]!=="Polygon")continue;const R=[],j=[],G=E.vertexLength;for(const Y of w)if(Y.length!==0){Y!==w[0]&&j.push(R.length/2);for(let se=0;se<Y.length;se++){const me=Y[se];Yd(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),x.x+=me.x,x.y+=me.y,x.vertexCount+=1,R.push(me.x),R.push(me.y)}}const X=cb(R,j);for(let Y=0;Y<X.length;Y+=3)this.indexArray.emplaceBack(G+X[Y],G+X[Y+2],G+X[Y+1]);E.primitiveLength+=X.length/3,E.vertexLength+=T}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,f)}}function Ez(o,r){return o.x===r.x&&(o.x<0||o.x>En)||o.y===r.y&&(o.y<0||o.y>En)}function zz(o){return o.every(r=>r.x<0)||o.every(r=>r.x>En)||o.every(r=>r.y<0)||o.every(r=>r.y>En)}let gb;It("FillExtrusionBucket",pv,{omit:["layers","features"]});var Az={get paint(){return gb=gb||new wn({"fill-extrusion-opacity":new jt($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xt($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Al($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xt($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xt($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Mz extends so{constructor(r){super(r,Az)}createBucket(r){return new pv(r)}queryRadius(){return Lf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,s,d,f,v,x,w,T){const E=$f(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),R=this.paint.get("fill-extrusion-height").evaluate(s,d),j=this.paint.get("fill-extrusion-base").evaluate(s,d),G=function(Y,se,me,ye){const ke=[];for(const xe of Y){const Ie=[xe.x,xe.y,0,1];Bf(Ie,Ie,se),ke.push(new D(Ie[0]/Ie[3],Ie[1]/Ie[3]))}return ke}(E,T),X=function(Y,se,me,ye){const ke=[],xe=[],Ie=ye[8]*se,Be=ye[9]*se,qe=ye[10]*se,_t=ye[11]*se,Lt=ye[8]*me,gt=ye[9]*me,pt=ye[10]*me,at=ye[11]*me;for(const Pt of Y){const ut=[],et=[];for(const qt of Pt){const Ot=qt.x,fr=qt.y,Yr=ye[0]*Ot+ye[4]*fr+ye[12],tn=ye[1]*Ot+ye[5]*fr+ye[13],jn=ye[2]*Ot+ye[6]*fr+ye[14],co=ye[3]*Ot+ye[7]*fr+ye[15],Ei=jn+qe,zn=co+_t,ti=Yr+Lt,li=tn+gt,zi=jn+pt,Ai=co+at,Vn=new D((Yr+Ie)/zn,(tn+Be)/zn);Vn.z=Ei/zn,ut.push(Vn);const Un=new D(ti/Ai,li/Ai);Un.z=zi/Ai,et.push(Un)}ke.push(ut),xe.push(et)}return[ke,xe]}(f,j,R,T);return function(Y,se,me){let ye=1/0;q1(me,se)&&(ye=yb(me,se[0]));for(let ke=0;ke<se.length;ke++){const xe=se[ke],Ie=Y[ke];for(let Be=0;Be<xe.length-1;Be++){const qe=xe[Be],_t=[qe,xe[Be+1],Ie[Be+1],Ie[Be],qe];G1(me,_t)&&(ye=Math.min(ye,yb(me,_t)))}}return ye!==1/0&&ye}(X[0],X[1],G)}}function Qd(o,r){return o.x*r.x+o.y*r.y}function yb(o,r){if(o.length===1){let s=0;const d=r[s++];let f;for(;!f||d.equals(f);)if(f=r[s++],!f)return 1/0;for(;s<r.length;s++){const v=r[s],x=o[0],w=f.sub(d),T=v.sub(d),E=x.sub(d),R=Qd(w,w),j=Qd(w,T),G=Qd(T,T),X=Qd(E,w),Y=Qd(E,T),se=R*G-j*j,me=(G*X-j*Y)/se,ye=(R*Y-j*X)/se,ke=d.z*(1-me-ye)+f.z*me+v.z*ye;if(isFinite(ke))return ke}return 1/0}{let s=1/0;for(const d of r)s=Math.min(s,d.z);return s}}const Dz=an([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Rz}=Dz,Lz=an([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$z}=Lz,Bz=Ns.VectorTileFeature.types,Oz=Math.cos(Math.PI/180*37.5),vb=Math.pow(2,14)/.5;class fv{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Jt,this.layoutVertexArray2=new Bt,this.indexArray=new Qn,this.programConfigurations=new ha(r.layers,r.zoom),this.segments=new Jr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(r,s,d){this.hasPattern=cv("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:w,id:T,index:E,sourceLayerIndex:R}of r){const j=this.layers[0]._featureFilter.needGeometry,G=Ll(w,j);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),G,d))continue;const X=v?f.evaluate(G,{},d):void 0,Y={id:T,properties:w.properties,type:w.type,sourceLayerIndex:R,index:E,geometry:j?G.geometry:Rl(w),patterns:{},sortKey:X};x.push(Y)}v&&x.sort((w,T)=>w.sortKey-T.sortKey);for(const w of x){const{geometry:T,index:E,sourceLayerIndex:R}=w;if(this.hasPattern){const j=uv("line",this.layers,w,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(w,T,E,d,{});s.featureIndex.insert(r[E].feature,T,E,R,this.index)}}update(r,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,s,this.stateDependentLayers,d)}addFeatures(r,s,d){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,$z)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Rz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,d,f,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(r,{}),T=x.get("line-cap"),E=x.get("line-miter-limit"),R=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const j of s)this.addLine(j,r,w,T,E,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,v,f)}addLine(r,s,d,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<r.length-1;ye++)this.totalDistance+=r[ye].dist(r[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=Bz[s.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let E=0;for(;E<T-1&&r[E].equals(r[E+1]);)E++;if(T<(w?3:2))return;d==="bevel"&&(v=1.05);const R=this.overscaling<=16?15*En/(512*this.overscaling):0,j=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let G,X,Y,se,me;this.e1=this.e2=-1,w&&(G=r[T-2],me=r[E].sub(G)._unit()._perp());for(let ye=E;ye<T;ye++){if(Y=ye===T-1?w?r[E+1]:void 0:r[ye+1],Y&&r[ye].equals(Y))continue;me&&(se=me),G&&(X=G),G=r[ye],me=Y?Y.sub(G)._unit()._perp():se,se=se||me;let ke=se.add(me);ke.x===0&&ke.y===0||ke._unit();const xe=se.x*me.x+se.y*me.y,Ie=ke.x*me.x+ke.y*me.y,Be=Ie!==0?1/Ie:1/0,qe=2*Math.sqrt(2-2*Ie),_t=Ie<Oz&&X&&Y,Lt=se.x*me.y-se.y*me.x>0;if(_t&&ye>E){const at=G.dist(X);if(at>2*R){const Pt=G.sub(G.sub(X)._mult(R/at)._round());this.updateDistance(X,Pt),this.addCurrentVertex(Pt,se,0,0,j),X=Pt}}const gt=X&&Y;let pt=gt?d:w?"butt":f;if(gt&&pt==="round"&&(Be<x?pt="miter":Be<=2&&(pt="fakeround")),pt==="miter"&&Be>v&&(pt="bevel"),pt==="bevel"&&(Be>2&&(pt="flipbevel"),Be<v&&(pt="miter")),X&&this.updateDistance(X,G),pt==="miter")ke._mult(Be),this.addCurrentVertex(G,ke,0,0,j);else if(pt==="flipbevel"){if(Be>100)ke=me.mult(-1);else{const at=Be*se.add(me).mag()/se.sub(me).mag();ke._perp()._mult(at*(Lt?-1:1))}this.addCurrentVertex(G,ke,0,0,j),this.addCurrentVertex(G,ke.mult(-1),0,0,j)}else if(pt==="bevel"||pt==="fakeround"){const at=-Math.sqrt(Be*Be-1),Pt=Lt?at:0,ut=Lt?0:at;if(X&&this.addCurrentVertex(G,se,Pt,ut,j),pt==="fakeround"){const et=Math.round(180*qe/Math.PI/20);for(let qt=1;qt<et;qt++){let Ot=qt/et;if(Ot!==.5){const Yr=Ot-.5;Ot+=Ot*Yr*(Ot-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Yr*Yr+(.848013+xe*(.215638*xe-1.06021)))}const fr=me.sub(se)._mult(Ot)._add(se)._unit()._mult(Lt?-1:1);this.addHalfVertex(G,fr.x,fr.y,!1,Lt,0,j)}}Y&&this.addCurrentVertex(G,me,-Pt,-ut,j)}else if(pt==="butt")this.addCurrentVertex(G,ke,0,0,j);else if(pt==="square"){const at=X?1:-1;this.addCurrentVertex(G,ke,at,at,j)}else pt==="round"&&(X&&(this.addCurrentVertex(G,se,0,0,j),this.addCurrentVertex(G,se,1,1,j,!0)),Y&&(this.addCurrentVertex(G,me,-1,-1,j,!0),this.addCurrentVertex(G,me,0,0,j)));if(_t&&ye<T-1){const at=G.dist(Y);if(at>2*R){const Pt=G.add(Y.sub(G)._mult(R/at)._round());this.updateDistance(G,Pt),this.addCurrentVertex(Pt,me,0,0,j),G=Pt}}}}addCurrentVertex(r,s,d,f,v,x=!1){const w=s.y*f-s.x,T=-s.y-s.x*f;this.addHalfVertex(r,s.x+s.y*d,s.y-s.x*d,x,!1,d,v),this.addHalfVertex(r,w,T,x,!0,-f,v),this.distance>vb/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,s,d,f,v,x))}addHalfVertex({x:r,y:s},d,f,v,x,w,T){const E=.5*(this.lineClips?this.scaledDistance*(vb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),T.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,s){this.distance+=r.dist(s),this.updateScaledDistance()}}let _b,xb;It("LineBucket",fv,{omit:["layers","patternFeatures"]});var bb={get paint(){return xb=xb||new wn({"line-opacity":new Xt($e.paint_line["line-opacity"]),"line-color":new Xt($e.paint_line["line-color"]),"line-translate":new jt($e.paint_line["line-translate"]),"line-translate-anchor":new jt($e.paint_line["line-translate-anchor"]),"line-width":new Xt($e.paint_line["line-width"]),"line-gap-width":new Xt($e.paint_line["line-gap-width"]),"line-offset":new Xt($e.paint_line["line-offset"]),"line-blur":new Xt($e.paint_line["line-blur"]),"line-dasharray":new $d($e.paint_line["line-dasharray"]),"line-pattern":new Al($e.paint_line["line-pattern"]),"line-gradient":new Bd($e.paint_line["line-gradient"])})},get layout(){return _b=_b||new wn({"line-cap":new jt($e.layout_line["line-cap"]),"line-join":new Xt($e.layout_line["line-join"]),"line-miter-limit":new jt($e.layout_line["line-miter-limit"]),"line-round-limit":new jt($e.layout_line["line-round-limit"]),"line-sort-key":new Xt($e.layout_line["line-sort-key"])})}};class Fz extends Xt{possiblyEvaluate(r,s){return s=new Xr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,d,f){return s=fe({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,d,f)}}let Vf;class Nz extends so{constructor(r){super(r,bb),this.gradientVersion=0,Vf||(Vf=new Fz(bb.paint.properties["line-width"].specification),Vf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Da,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,s){super.recalculate(r,s),this.paint._values["line-floorwidth"]=Vf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new fv(r)}queryRadius(r){const s=r,d=wb(Wd("line-width",this,s),Wd("line-gap-width",this,s)),f=Wd("line-offset",this,s);return d/2+Math.abs(f)+Lf(this.paint.get("line-translate"))}queryIntersectsFeature(r,s,d,f,v,x,w){const T=$f(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),E=w/2*wb(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),R=this.paint.get("line-offset").evaluate(s,d);return R&&(f=function(j,G){const X=[];for(let Y=0;Y<j.length;Y++){const se=j[Y],me=[];for(let ye=0;ye<se.length;ye++){const ke=se[ye-1],xe=se[ye],Ie=se[ye+1],Be=ye===0?new D(0,0):xe.sub(ke)._unit()._perp(),qe=ye===se.length-1?new D(0,0):Ie.sub(xe)._unit()._perp(),_t=Be._add(qe)._unit(),Lt=_t.x*qe.x+_t.y*qe.y;Lt!==0&&_t._mult(1/Lt),me.push(_t._mult(G)._add(xe))}X.push(me)}return X}(f,R*w)),function(j,G,X){for(let Y=0;Y<G.length;Y++){const se=G[Y];if(j.length>=3){for(let me=0;me<se.length;me++)if(Nc(j,se[me]))return!0}if(GE(j,se,X))return!0}return!1}(T,f,E)}isTileClipped(){return!0}}function wb(o,r){return r>0?r+2*o:o}const jz=an([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vz=an([{name:"a_projected_pos",components:3,type:"Float32"}],4);an([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Uz=an([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);an([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Sb=an([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Hz=an([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wz(o,r,s){return o.sections.forEach(d=>{d.text=function(f,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),qi.applyArabicShaping&&(f=qi.applyArabicShaping(f)),f}(d.text,r,s)}),o}an([{name:"triangle",components:3,type:"Uint16"}]),an([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),an([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),an([{type:"Float32",name:"offsetX"}]),an([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),an([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const eh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Nn=24,Cb=Fr,kb=function(o,r,s,d,f){var v,x,w=8*f-d-1,T=(1<<w)-1,E=T>>1,R=-7,j=s?f-1:0,G=s?-1:1,X=o[r+j];for(j+=G,v=X&(1<<-R)-1,X>>=-R,R+=w;R>0;v=256*v+o[r+j],j+=G,R-=8);for(x=v&(1<<-R)-1,v>>=-R,R+=d;R>0;x=256*x+o[r+j],j+=G,R-=8);if(v===0)v=1-E;else{if(v===T)return x?NaN:1/0*(X?-1:1);x+=Math.pow(2,d),v-=E}return(X?-1:1)*x*Math.pow(2,v-d)},Tb=function(o,r,s,d,f,v){var x,w,T,E=8*v-f-1,R=(1<<E)-1,j=R>>1,G=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=d?0:v-1,Y=d?1:-1,se=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,x=R):(x=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-x))<1&&(x--,T*=2),(r+=x+j>=1?G/T:G*Math.pow(2,1-j))*T>=2&&(x++,T/=2),x+j>=R?(w=0,x=R):x+j>=1?(w=(r*T-1)*Math.pow(2,f),x+=j):(w=r*Math.pow(2,j-1)*Math.pow(2,f),x=0));f>=8;o[s+X]=255&w,X+=Y,w/=256,f-=8);for(x=x<<f|w,E+=f;E>0;o[s+X]=255&x,X+=Y,x/=256,E-=8);o[s+X-Y]|=128*se};function Fr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Fr.Varint=0,Fr.Fixed64=1,Fr.Bytes=2,Fr.Fixed32=5;var mv=4294967296,Ib=1/mv,Pb=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function cs(o){return o.type===Fr.Bytes?o.readVarint()+o.pos:o.pos+1}function Hc(o,r,s){return s?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function Eb(o,r,s){var d=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(d);for(var f=s.pos-1;f>=o;f--)s.buf[f+d]=s.buf[f]}function Gz(o,r){for(var s=0;s<o.length;s++)r.writeVarint(o[s])}function qz(o,r){for(var s=0;s<o.length;s++)r.writeSVarint(o[s])}function Zz(o,r){for(var s=0;s<o.length;s++)r.writeFloat(o[s])}function Kz(o,r){for(var s=0;s<o.length;s++)r.writeDouble(o[s])}function Xz(o,r){for(var s=0;s<o.length;s++)r.writeBoolean(o[s])}function Jz(o,r){for(var s=0;s<o.length;s++)r.writeFixed32(o[s])}function Yz(o,r){for(var s=0;s<o.length;s++)r.writeSFixed32(o[s])}function Qz(o,r){for(var s=0;s<o.length;s++)r.writeFixed64(o[s])}function eA(o,r){for(var s=0;s<o.length;s++)r.writeSFixed64(o[s])}function Uf(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function Wc(o,r,s){o[s]=r,o[s+1]=r>>>8,o[s+2]=r>>>16,o[s+3]=r>>>24}function zb(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}Fr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),f=d>>3,v=this.pos;this.type=7&d,o(f,r,this),this.pos===v&&this.skip(d)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=Uf(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=zb(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Uf(this.buf,this.pos)+Uf(this.buf,this.pos+4)*mv;return this.pos+=8,o},readSFixed64:function(){var o=Uf(this.buf,this.pos)+zb(this.buf,this.pos+4)*mv;return this.pos+=8,o},readFloat:function(){var o=kb(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=kb(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,s,d=this.buf;return r=127&(s=d[this.pos++]),s<128?r:(r|=(127&(s=d[this.pos++]))<<7,s<128?r:(r|=(127&(s=d[this.pos++]))<<14,s<128?r:(r|=(127&(s=d[this.pos++]))<<21,s<128?r:function(f,v,x){var w,T,E=x.buf;if(w=(112&(T=E[x.pos++]))>>4,T<128||(w|=(127&(T=E[x.pos++]))<<3,T<128)||(w|=(127&(T=E[x.pos++]))<<10,T<128)||(w|=(127&(T=E[x.pos++]))<<17,T<128)||(w|=(127&(T=E[x.pos++]))<<24,T<128)||(w|=(1&(T=E[x.pos++]))<<31,T<128))return Hc(f,w,v);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=d[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&Pb?function(s,d,f){return Pb.decode(s.subarray(d,f))}(this.buf,r,o):function(s,d,f){for(var v="",x=d;x<f;){var w,T,E,R=s[x],j=null,G=R>239?4:R>223?3:R>191?2:1;if(x+G>f)break;G===1?R<128&&(j=R):G===2?(192&(w=s[x+1]))==128&&(j=(31&R)<<6|63&w)<=127&&(j=null):G===3?(T=s[x+2],(192&(w=s[x+1]))==128&&(192&T)==128&&((j=(15&R)<<12|(63&w)<<6|63&T)<=2047||j>=55296&&j<=57343)&&(j=null)):G===4&&(T=s[x+2],E=s[x+3],(192&(w=s[x+1]))==128&&(192&T)==128&&(192&E)==128&&((j=(15&R)<<18|(63&w)<<12|(63&T)<<6|63&E)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,G=1):j>65535&&(j-=65536,v+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),v+=String.fromCharCode(j),x+=G}return v}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==Fr.Bytes)return o.push(this.readVarint(r));var s=cs(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==Fr.Bytes)return o.push(this.readSVarint());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Fr.Bytes)return o.push(this.readBoolean());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Fr.Bytes)return o.push(this.readFloat());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Fr.Bytes)return o.push(this.readDouble());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Fr.Bytes)return o.push(this.readFixed32());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Fr.Bytes)return o.push(this.readSFixed32());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Fr.Bytes)return o.push(this.readFixed64());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Fr.Bytes)return o.push(this.readSFixed64());var r=cs(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===Fr.Varint)for(;this.buf[this.pos++]>127;);else if(r===Fr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Fr.Fixed32)this.pos+=4;else{if(r!==Fr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Wc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Wc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Wc(this.buf,-1&o,this.pos),Wc(this.buf,Math.floor(o*Ib),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Wc(this.buf,-1&o,this.pos),Wc(this.buf,Math.floor(o*Ib),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,s){var d,f;if(r>=0?(d=r%4294967296|0,f=r/4294967296|0):(f=~(-r/4294967296),4294967295^(d=~(-r%4294967296))?d=d+1|0:(d=0,f=f+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(d,0,s),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(d,f,v){for(var x,w,T=0;T<f.length;T++){if((x=f.charCodeAt(T))>55295&&x<57344){if(!w){x>56319||T+1===f.length?(d[v++]=239,d[v++]=191,d[v++]=189):w=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(d[v++]=239,d[v++]=191,d[v++]=189,w=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-r;s>=128&&Eb(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Tb(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Tb(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,r){this.pos++;var s=this.pos;o(r,this);var d=this.pos-s;d>=128&&Eb(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(o,r,s){this.writeTag(o,Fr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,Gz,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,qz,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,Xz,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,Zz,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,Kz,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,Jz,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,Yz,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,Qz,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,eA,r)},writeBytesField:function(o,r){this.writeTag(o,Fr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,Fr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,Fr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,Fr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,Fr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,Fr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,Fr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,Fr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,Fr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,Fr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var gv=C(Cb);const yv=3;function tA(o,r,s){o===1&&s.readMessage(rA,r)}function rA(o,r,s){if(o===3){const{id:d,bitmap:f,width:v,height:x,left:w,top:T,advance:E}=s.readMessage(nA,{});r.push({id:d,bitmap:new qd({width:v+2*yv,height:x+2*yv},f),metrics:{width:v,height:x,left:w,top:T,advance:E}})}}function nA(o,r,s){o===1?r.id=s.readVarint():o===2?r.bitmap=s.readBytes():o===3?r.width=s.readVarint():o===4?r.height=s.readVarint():o===5?r.left=s.readSVarint():o===6?r.top=s.readSVarint():o===7&&(r.advance=s.readVarint())}const Ab=yv;function Mb(o){let r=0,s=0;for(const x of o)r+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,w)=>w.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let f=0,v=0;for(const x of o)for(let w=d.length-1;w>=0;w--){const T=d[w];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===T.w&&x.h===T.h){const E=d.pop();w<d.length&&(d[w]=E)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(d.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:f,h:v,fill:r/(f*v)||0}}const Ki=1;class vv{constructor(r,{pixelRatio:s,version:d,stretchX:f,stretchY:v,content:x}){this.paddedRect=r,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+Ki,this.paddedRect.y+Ki]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ki,this.paddedRect.y+this.paddedRect.h-Ki]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ki)/this.pixelRatio,(this.paddedRect.h-2*Ki)/this.pixelRatio]}}class Db{constructor(r,s){const d={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(r,d,v),this.addImages(s,f,v);const{w:x,h:w}=Mb(v),T=new bo({width:x||1,height:w||1});for(const E in r){const R=r[E],j=d[E].paddedRect;bo.copy(R.data,T,{x:0,y:0},{x:j.x+Ki,y:j.y+Ki},R.data)}for(const E in s){const R=s[E],j=f[E].paddedRect,G=j.x+Ki,X=j.y+Ki,Y=R.data.width,se=R.data.height;bo.copy(R.data,T,{x:0,y:0},{x:G,y:X},R.data),bo.copy(R.data,T,{x:0,y:se-1},{x:G,y:X-1},{width:Y,height:1}),bo.copy(R.data,T,{x:0,y:0},{x:G,y:X+se},{width:Y,height:1}),bo.copy(R.data,T,{x:Y-1,y:0},{x:G-1,y:X},{width:1,height:se}),bo.copy(R.data,T,{x:0,y:0},{x:G+Y,y:X},{width:1,height:se})}this.image=T,this.iconPositions=d,this.patternPositions=f}addImages(r,s,d){for(const f in r){const v=r[f],x={x:0,y:0,w:v.data.width+2*Ki,h:v.data.height+2*Ki};d.push(x),s[f]=new vv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(r,s){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),s)}patchUpdatedImage(r,s,d){if(!r||!s||r.version===s.version)return;r.version=s.version;const[f,v]=r.tl;d.update(s.data,void 0,{x:f,y:v})}}var js;It("ImagePosition",vv),It("ImageAtlas",Db),l.ai=void 0,(js=l.ai||(l.ai={}))[js.none=0]="none",js[js.horizontal=1]="horizontal",js[js.vertical=2]="vertical",js[js.horizontalOnly=3]="horizontalOnly";const th=-17;class rh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,s){const d=new rh;return d.scale=r||1,d.fontStack=s,d}static forImage(r){const s=new rh;return s.imageName=r,s}}class Gc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const d=new Gc;for(let f=0;f<r.sections.length;f++){const v=r.sections[f];v.image?d.addImageSection(v):d.addTextSection(v,s)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let s="";for(let d=0;d<r.length;d++){const f=r.charCodeAt(d+1)||null,v=r.charCodeAt(d-1)||null;s+=f&&Cf(f)&&!eh[r[d+1]]||v&&Cf(v)&&!eh[r[d-1]]||!eh[r[d]]?r[d]:eh[r[d]]}return s}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&Wf[this.text.charCodeAt(d)];d++)r++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&Wf[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const d=new Gc;return d.text=this.text.substring(r,s),d.sectionIndex=this.sectionIndex.slice(r,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(rh.forText(r.scale,r.fontStack||s));const d=this.sections.length-1;for(let f=0;f<r.text.length;++f)this.sectionIndex.push(d)}addImageSection(r){const s=r.image?r.image.name:"";if(s.length===0)return void Ye("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(rh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Hf(o,r,s,d,f,v,x,w,T,E,R,j,G,X,Y,se){const me=Gc.fromFeature(o,f);let ye;j===l.ai.vertical&&me.verticalizePunctuation();const{processBidirectionalText:ke,processStyledBidirectionalText:xe}=qi;if(ke&&me.sections.length===1){ye=[];const qe=ke(me.toString(),_v(me,E,v,r,d,X,Y));for(const _t of qe){const Lt=new Gc;Lt.text=_t,Lt.sections=me.sections;for(let gt=0;gt<_t.length;gt++)Lt.sectionIndex.push(0);ye.push(Lt)}}else if(xe){ye=[];const qe=xe(me.text,me.sectionIndex,_v(me,E,v,r,d,X,Y));for(const _t of qe){const Lt=new Gc;Lt.text=_t[0],Lt.sectionIndex=_t[1],Lt.sections=me.sections,ye.push(Lt)}}else ye=function(qe,_t){const Lt=[],gt=qe.text;let pt=0;for(const at of _t)Lt.push(qe.substring(pt,at)),pt=at;return pt<gt.length&&Lt.push(qe.substring(pt,gt.length)),Lt}(me,_v(me,E,v,r,d,X,Y));const Ie=[],Be={positionedLines:Ie,text:me.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(qe,_t,Lt,gt,pt,at,Pt,ut,et,qt,Ot,fr){let Yr=0,tn=th,jn=0,co=0;const Ei=ut==="right"?1:ut==="left"?0:.5;let zn=0;for(const Vn of pt){Vn.trim();const Un=Vn.getMaxScale(),yi=(Un-1)*Nn,Mi={positionedGlyphs:[],lineOffset:0};qe.positionedLines[zn]=Mi;const vi=Mi.positionedGlyphs;let Xi=0;if(!Vn.length()){tn+=at,++zn;continue}for(let Hn=0;Hn<Vn.length();Hn++){const _r=Vn.getSection(Hn),_i=Vn.getSectionIndex(Hn),ci=Vn.getCharCode(Hn);let Wn=0,Ho=null,pa=null,fa=null,us=Nn;const Wo=!(et===l.ai.horizontal||!Ot&&!Pd(ci)||Ot&&(Wf[ci]||(ti=ci,vt.Arabic(ti)||vt["Arabic Supplement"](ti)||vt["Arabic Extended-A"](ti)||vt["Arabic Presentation Forms-A"](ti)||vt["Arabic Presentation Forms-B"](ti))));if(_r.imageName){const So=gt[_r.imageName];if(!So)continue;fa=_r.imageName,qe.iconsInText=qe.iconsInText||!0,pa=So.paddedRect;const Yi=So.displaySize;_r.scale=_r.scale*Nn/fr,Ho={width:Yi[0],height:Yi[1],left:Ki,top:-Ab,advance:Wo?Yi[1]:Yi[0]},Wn=yi+(Nn-Yi[1]*_r.scale),us=Ho.advance;const ds=Wo?Yi[0]*_r.scale-Nn*Un:Yi[1]*_r.scale-Nn*Un;ds>0&&ds>Xi&&(Xi=ds)}else{const So=Lt[_r.fontStack],Yi=So&&So[ci];if(Yi&&Yi.rect)pa=Yi.rect,Ho=Yi.metrics;else{const ds=_t[_r.fontStack],sh=ds&&ds[ci];if(!sh)continue;Ho=sh.metrics}Wn=(Un-_r.scale)*Nn}Wo?(qe.verticalizable=!0,vi.push({glyph:ci,imageName:fa,x:Yr,y:tn+Wn,vertical:Wo,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:_i,metrics:Ho,rect:pa}),Yr+=us*_r.scale+qt):(vi.push({glyph:ci,imageName:fa,x:Yr,y:tn+Wn,vertical:Wo,scale:_r.scale,fontStack:_r.fontStack,sectionIndex:_i,metrics:Ho,rect:pa}),Yr+=Ho.advance*_r.scale+qt)}vi.length!==0&&(jn=Math.max(Yr-qt,jn),aA(vi,0,vi.length-1,Ei,Xi)),Yr=0;const Ji=at*Un+Xi;Mi.lineOffset=Math.max(Xi,yi),tn+=Ji,co=Math.max(Ji,co),++zn}var ti;const li=tn-th,{horizontalAlign:zi,verticalAlign:Ai}=xv(Pt);(function(Vn,Un,yi,Mi,vi,Xi,Ji,Hn,_r){const _i=(Un-yi)*vi;let ci=0;ci=Xi!==Ji?-Hn*Mi-th:(-Mi*_r+.5)*Ji;for(const Wn of Vn)for(const Ho of Wn.positionedGlyphs)Ho.x+=_i,Ho.y+=ci})(qe.positionedLines,Ei,zi,Ai,jn,co,at,li,pt.length),qe.top+=-Ai*li,qe.bottom=qe.top+li,qe.left+=-zi*jn,qe.right=qe.left+jn}(Be,r,s,d,ye,x,w,T,j,E,G,se),!function(qe){for(const _t of qe)if(_t.positionedGlyphs.length!==0)return!1;return!0}(Ie)&&Be}const Wf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Rb(o,r,s,d,f,v){if(r.imageName){const x=d[r.imageName];return x?x.displaySize[0]*r.scale*Nn/v+f:0}{const x=s[r.fontStack],w=x&&x[o];return w?w.metrics.advance*r.scale+f:0}}function Lb(o,r,s,d){const f=Math.pow(o-r,2);return d?o<r?f/2:2*f:f+Math.abs(s)*s}function oA(o,r,s){let d=0;return o===10&&(d-=1e4),s&&(d+=150),o!==40&&o!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function $b(o,r,s,d,f,v){let x=null,w=Lb(r,s,f,v);for(const T of d){const E=Lb(r-T.x,s,f,v)+T.badness;E<=w&&(x=T,w=E)}return{index:o,x:r,priorBreak:x,badness:w}}function Bb(o){return o?Bb(o.priorBreak).concat(o.index):[]}function _v(o,r,s,d,f,v,x){if(v!=="point")return[];if(!o)return[];const w=[],T=function(G,X,Y,se,me,ye){let ke=0;for(let xe=0;xe<G.length();xe++){const Ie=G.getSection(xe);ke+=Rb(G.getCharCode(xe),Ie,se,me,X,ye)}return ke/Math.max(1,Math.ceil(ke/Y))}(o,r,s,d,f,x),E=o.text.indexOf("")>=0;let R=0;for(let G=0;G<o.length();G++){const X=o.getSection(G),Y=o.getCharCode(G);if(Wf[Y]||(R+=Rb(Y,X,d,f,r,x)),G<o.length()-1){const se=!((j=Y)<11904||!(vt["Bopomofo Extended"](j)||vt.Bopomofo(j)||vt["CJK Compatibility Forms"](j)||vt["CJK Compatibility Ideographs"](j)||vt["CJK Compatibility"](j)||vt["CJK Radicals Supplement"](j)||vt["CJK Strokes"](j)||vt["CJK Symbols and Punctuation"](j)||vt["CJK Unified Ideographs Extension A"](j)||vt["CJK Unified Ideographs"](j)||vt["Enclosed CJK Letters and Months"](j)||vt["Halfwidth and Fullwidth Forms"](j)||vt.Hiragana(j)||vt["Ideographic Description Characters"](j)||vt["Kangxi Radicals"](j)||vt["Katakana Phonetic Extensions"](j)||vt.Katakana(j)||vt["Vertical Forms"](j)||vt["Yi Radicals"](j)||vt["Yi Syllables"](j)));(iA[Y]||se||X.imageName)&&w.push($b(G+1,R,T,w,oA(Y,o.getCharCode(G+1),se&&E),!1))}}var j;return Bb($b(o.length(),R,T,w,0,!0))}function xv(o){let r=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function aA(o,r,s,d,f){if(!d&&!f)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*d;for(let w=r;w<=s;w++)o[w].x-=x,o[w].y+=f}function sA(o,r,s){const{horizontalAlign:d,verticalAlign:f}=xv(s),v=r[0]-o.displaySize[0]*d,x=r[1]-o.displaySize[1]*f;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Ob(o,r,s,d,f,v){const x=o.image;let w;if(x.content){const me=x.content,ye=x.pixelRatio||1;w=[me[0]/ye,me[1]/ye,x.displaySize[0]-me[2]/ye,x.displaySize[1]-me[3]/ye]}const T=r.left*v,E=r.right*v;let R,j,G,X;s==="width"||s==="both"?(X=f[0]+T-d[3],j=f[0]+E+d[1]):(X=f[0]+(T+E-x.displaySize[0])/2,j=X+x.displaySize[0]);const Y=r.top*v,se=r.bottom*v;return s==="height"||s==="both"?(R=f[1]+Y-d[0],G=f[1]+se+d[2]):(R=f[1]+(Y+se-x.displaySize[1])/2,G=R+x.displaySize[1]),{image:x,top:R,right:j,bottom:G,left:X,collisionPadding:w}}const nh=255,Oa=128,Vs=nh*Oa;function Fb(o,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Xr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:f}=s;let v=0;for(;v<d.length&&d[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<o+1;)x++;x=Math.min(d.length-1,x);const w=d[v],T=d[x];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:T,minSize:s.evaluate(new Xr(w)),maxSize:s.evaluate(new Xr(T)),interpolationType:f}}}function bv(o,r,s){let d="never";const f=o.get(r);return f?d=f:o.get(s)&&(d="always"),d}const lA=Ns.VectorTileFeature.types,cA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gf(o,r,s,d,f,v,x,w,T,E,R,j,G){const X=w?Math.min(Vs,Math.round(w[0])):0,Y=w?Math.min(Vs,Math.round(w[1])):0;o.emplaceBack(r,s,Math.round(32*d),Math.round(32*f),v,x,(X<<1)+(T?1:0),Y,16*E,16*R,256*j,256*G)}function wv(o,r,s){o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s),o.emplaceBack(r.x,r.y,s)}function uA(o){for(const r of o.sections)if(Zy(r.text))return!0;return!1}class Sv{constructor(r){this.layoutVertexArray=new gr,this.indexArray=new Qn,this.programConfigurations=r,this.segments=new Jr,this.dynamicLayoutVertexArray=new lr,this.opacityVertexArray=new vr,this.hasVisibleVertices=!1,this.placedSymbolArray=new we}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,s,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,jz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Vz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,cA,!0),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}It("SymbolBuffers",Sv);class Cv{constructor(r,s,d){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new d,this.segments=new Jr,this.collisionVertexArray=new Wr}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Uz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}It("CollisionBuffers",Cv);class qc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=tv([]),this.placementViewportMatrix=tv([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fb(this.zoom,s["text-size"]),this.iconSizeData=Fb(this.zoom,s["icon-size"]);const d=this.layers[0].layout,f=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=bv(d,"text-overlap","text-allow-overlap")!=="never"||bv(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID}createArrays(){this.text=new Sv(new ha(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Sv(new ha(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Ce,this.lineVertexArray=new je,this.symbolInstances=new ge,this.textAnchorOffsets=new Ge}calculateGlyphDependencies(r,s,d,f,v){for(let x=0;x<r.length;x++)if(s[r.charCodeAt(x)]=!0,(d||f)&&v){const w=eh[r.charAt(x)];w&&(s[w.charCodeAt(0)]=!0)}}populate(r,s,d){const f=this.layers[0],v=f.layout,x=v.get("text-font"),w=v.get("text-field"),T=v.get("icon-image"),E=(w.value.kind!=="constant"||w.value.value instanceof Or&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!E&&!R)return;const G=s.iconDependencies,X=s.glyphDependencies,Y=s.availableImages,se=new Xr(this.zoom);for(const{feature:me,id:ye,index:ke,sourceLayerIndex:xe}of r){const Ie=f._featureFilter.needGeometry,Be=Ll(me,Ie);if(!f._featureFilter.filter(se,Be,d))continue;let qe,_t;if(Ie||(Be.geometry=Rl(me)),E){const gt=f.getValueAndResolveTokens("text-field",Be,d,Y),pt=Or.factory(gt);uA(pt)&&(this.hasRTLText=!0),(!this.hasRTLText||Rd()==="unavailable"||this.hasRTLText&&qi.isParsed())&&(qe=Wz(pt,f,Be))}if(R){const gt=f.getValueAndResolveTokens("icon-image",Be,d,Y);_t=gt instanceof Bn?gt:Bn.fromString(gt)}if(!qe&&!_t)continue;const Lt=this.sortFeaturesByKey?j.evaluate(Be,{},d):void 0;if(this.features.push({id:ye,text:qe,icon:_t,index:ke,sourceLayerIndex:xe,geometry:Be.geometry,properties:me.properties,type:lA[me.type],sortKey:Lt}),_t&&(G[_t.name]=!0),qe){const gt=x.evaluate(Be,{},d).join(","),pt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const at of qe.sections)if(at.image)G[at.image.name]=!0;else{const Pt=Td(qe.toString()),ut=at.fontStack||gt,et=X[ut]=X[ut]||{};this.calculateGlyphDependencies(at.text,et,pt,this.allowVerticalPlacement,Pt)}}}v.get("symbol-placement")==="line"&&(this.features=function(me){const ye={},ke={},xe=[];let Ie=0;function Be(gt){xe.push(me[gt]),Ie++}function qe(gt,pt,at){const Pt=ke[gt];return delete ke[gt],ke[pt]=Pt,xe[Pt].geometry[0].pop(),xe[Pt].geometry[0]=xe[Pt].geometry[0].concat(at[0]),Pt}function _t(gt,pt,at){const Pt=ye[pt];return delete ye[pt],ye[gt]=Pt,xe[Pt].geometry[0].shift(),xe[Pt].geometry[0]=at[0].concat(xe[Pt].geometry[0]),Pt}function Lt(gt,pt,at){const Pt=at?pt[0][pt[0].length-1]:pt[0][0];return`${gt}:${Pt.x}:${Pt.y}`}for(let gt=0;gt<me.length;gt++){const pt=me[gt],at=pt.geometry,Pt=pt.text?pt.text.toString():null;if(!Pt){Be(gt);continue}const ut=Lt(Pt,at),et=Lt(Pt,at,!0);if(ut in ke&&et in ye&&ke[ut]!==ye[et]){const qt=_t(ut,et,at),Ot=qe(ut,et,xe[qt].geometry);delete ye[ut],delete ke[et],ke[Lt(Pt,xe[Ot].geometry,!0)]=Ot,xe[qt].geometry=null}else ut in ke?qe(ut,et,at):et in ye?_t(ut,et,at):(Be(gt),ye[ut]=Ie-1,ke[et]=Ie-1)}return xe.filter(gt=>gt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,ye)=>me.sortKey-ye.sortKey)}update(r,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const d=this.lineVertexArray.length;if(r.segment!==void 0){let f=r.dist(s[r.segment+1]),v=r.dist(s[r.segment]);const x={};for(let w=r.segment+1;w<s.length;w++)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:f},w<s.length-1&&(f+=s[w+1].dist(s[w]));for(let w=r.segment||0;w>=0;w--)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const T=x[w];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,s,d,f,v,x,w,T,E,R,j,G){const X=r.indexArray,Y=r.layoutVertexArray,se=r.segments.prepareSegment(4*s.length,Y,X,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,ye=se.vertexLength,ke=this.allowVerticalPlacement&&w===l.ai.vertical?Math.PI/2:0,xe=x.text&&x.text.sections;for(let Ie=0;Ie<s.length;Ie++){const{tl:Be,tr:qe,bl:_t,br:Lt,tex:gt,pixelOffsetTL:pt,pixelOffsetBR:at,minFontScaleX:Pt,minFontScaleY:ut,glyphOffset:et,isSDF:qt,sectionIndex:Ot}=s[Ie],fr=se.vertexLength,Yr=et[1];Gf(Y,T.x,T.y,Be.x,Yr+Be.y,gt.x,gt.y,d,qt,pt.x,pt.y,Pt,ut),Gf(Y,T.x,T.y,qe.x,Yr+qe.y,gt.x+gt.w,gt.y,d,qt,at.x,pt.y,Pt,ut),Gf(Y,T.x,T.y,_t.x,Yr+_t.y,gt.x,gt.y+gt.h,d,qt,pt.x,at.y,Pt,ut),Gf(Y,T.x,T.y,Lt.x,Yr+Lt.y,gt.x+gt.w,gt.y+gt.h,d,qt,at.x,at.y,Pt,ut),wv(r.dynamicLayoutVertexArray,T,ke),X.emplaceBack(fr,fr+1,fr+2),X.emplaceBack(fr+1,fr+2,fr+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(et[0]),Ie!==s.length-1&&Ot===s[Ie+1].sectionIndex||r.programConfigurations.populatePaintArrays(Y.length,x,x.index,{},G,xe&&xe[Ot])}r.placedSymbolArray.emplaceBack(T.x,T.y,me,this.glyphOffsetArray.length-me,ye,E,R,T.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],w,0,!1,0,j)}_addCollisionDebugVertex(r,s,d,f,v,x){return s.emplaceBack(0,0),r.emplaceBack(d.x,d.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,s,d,f,v,x,w){const T=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),E=T.vertexLength,R=v.layoutVertexArray,j=v.collisionVertexArray,G=w.anchorX,X=w.anchorY;this._addCollisionDebugVertex(R,j,x,G,X,new D(r,s)),this._addCollisionDebugVertex(R,j,x,G,X,new D(d,s)),this._addCollisionDebugVertex(R,j,x,G,X,new D(d,f)),this._addCollisionDebugVertex(R,j,x,G,X,new D(r,f)),T.vertexLength+=4;const Y=v.indexArray;Y.emplaceBack(E,E+1),Y.emplaceBack(E+1,E+2),Y.emplaceBack(E+2,E+3),Y.emplaceBack(E+3,E),T.primitiveLength+=4}addDebugCollisionBoxes(r,s,d,f){for(let v=r;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cv(gn,Sb.members,On),this.iconCollisionBox=new Cv(gn,Sb.members,On);for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(r,s,d,f,v,x,w,T,E){const R={};for(let j=s;j<d;j++){const G=r.get(j);R.textBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},R.textFeatureIndex=G.featureIndex;break}for(let j=f;j<v;j++){const G=r.get(j);R.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},R.verticalTextFeatureIndex=G.featureIndex;break}for(let j=x;j<w;j++){const G=r.get(j);R.iconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},R.iconFeatureIndex=G.featureIndex;break}for(let j=T;j<E;j++){const G=r.get(j);R.verticalIconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},R.verticalIconFeatureIndex=G.featureIndex;break}return R}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,s){const d=r.placedSymbolArray.get(s),f=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<f;v+=4)r.indexArray.emplaceBack(v,v+1,v+2),r.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),d=Math.cos(r),f=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const T=this.symbolInstances.get(w);f.push(0|Math.round(s*T.anchorX+d*T.anchorY)),v.push(T.featureIndex)}return x.sort((w,T)=>f[w]-f[T]||v[T]-v[w]),x}addToSortKeyRanges(r,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Nb,jb;It("SymbolBucket",qc,{omit:["layers","collisionBoxArray","features","compareText"]}),qc.MAX_GLYPHS=65535,qc.addDynamicAttributes=wv;var kv={get paint(){return jb=jb||new wn({"icon-opacity":new Xt($e.paint_symbol["icon-opacity"]),"icon-color":new Xt($e.paint_symbol["icon-color"]),"icon-halo-color":new Xt($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xt($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xt($e.paint_symbol["icon-halo-blur"]),"icon-translate":new jt($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt($e.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xt($e.paint_symbol["text-opacity"]),"text-color":new Xt($e.paint_symbol["text-color"],{runtimeType:ur,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Xt($e.paint_symbol["text-halo-color"]),"text-halo-width":new Xt($e.paint_symbol["text-halo-width"]),"text-halo-blur":new Xt($e.paint_symbol["text-halo-blur"]),"text-translate":new jt($e.paint_symbol["text-translate"]),"text-translate-anchor":new jt($e.paint_symbol["text-translate-anchor"])})},get layout(){return Nb=Nb||new wn({"symbol-placement":new jt($e.layout_symbol["symbol-placement"]),"symbol-spacing":new jt($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xt($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt($e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt($e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt($e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xt($e.layout_symbol["icon-size"]),"icon-text-fit":new jt($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xt($e.layout_symbol["icon-image"]),"icon-rotate":new Xt($e.layout_symbol["icon-rotate"]),"icon-padding":new Xt($e.layout_symbol["icon-padding"]),"icon-keep-upright":new jt($e.layout_symbol["icon-keep-upright"]),"icon-offset":new Xt($e.layout_symbol["icon-offset"]),"icon-anchor":new Xt($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt($e.layout_symbol["text-rotation-alignment"]),"text-field":new Xt($e.layout_symbol["text-field"]),"text-font":new Xt($e.layout_symbol["text-font"]),"text-size":new Xt($e.layout_symbol["text-size"]),"text-max-width":new Xt($e.layout_symbol["text-max-width"]),"text-line-height":new jt($e.layout_symbol["text-line-height"]),"text-letter-spacing":new Xt($e.layout_symbol["text-letter-spacing"]),"text-justify":new Xt($e.layout_symbol["text-justify"]),"text-radial-offset":new Xt($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt($e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Xt($e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Xt($e.layout_symbol["text-anchor"]),"text-max-angle":new jt($e.layout_symbol["text-max-angle"]),"text-writing-mode":new jt($e.layout_symbol["text-writing-mode"]),"text-rotate":new Xt($e.layout_symbol["text-rotate"]),"text-padding":new jt($e.layout_symbol["text-padding"]),"text-keep-upright":new jt($e.layout_symbol["text-keep-upright"]),"text-transform":new Xt($e.layout_symbol["text-transform"]),"text-offset":new Xt($e.layout_symbol["text-offset"]),"text-allow-overlap":new jt($e.layout_symbol["text-allow-overlap"]),"text-overlap":new jt($e.layout_symbol["text-overlap"]),"text-ignore-placement":new jt($e.layout_symbol["text-ignore-placement"]),"text-optional":new jt($e.layout_symbol["text-optional"])})}};class Vb{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:un,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}It("FormatSectionOverride",Vb,{omit:["defaultValue"]});class qf extends so{constructor(r){super(r,kv)}recalculate(r,s){if(super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const f=[];for(const v of d)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,s,d,f){const v=this.layout.get(r).evaluate(s,{},d,f),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||Ic(x.value)||!v?v:function(w,T){return T.replace(/{([^{}]+)}/g,(E,R)=>w&&R in w?String(w[R]):"")}(s.properties,v)}createBucket(r){return new qc(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of kv.paint.overridableProperties){if(!qf.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),d=new Vb(s),f=new xd(d,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new bd("source",f):new Ec("composite",f,s.value.zoomStops),this.paint._values[r]=new mi(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&qf.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const d=r.get("text-field"),f=kv.paint.properties[s];let v=!1;const x=w=>{for(const T of w)if(f.overrides&&f.overrides.hasOverride(T))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Or)x(d.value.value.sections);else if(d.value.kind==="source"){const w=E=>{v||(E instanceof Ja&&rn(E.value)===H?x(E.value.sections):E instanceof Tc?x(E.sections):E.eachChild(w))},T=d.value;T._styleExpression&&w(T._styleExpression.expression)}return v}}let Ub;var dA={get paint(){return Ub=Ub||new wn({"background-color":new jt($e.paint_background["background-color"]),"background-pattern":new $d($e.paint_background["background-pattern"]),"background-opacity":new jt($e.paint_background["background-opacity"])})}};class hA extends so{constructor(r){super(r,dA)}}let Hb;var pA={get paint(){return Hb=Hb||new wn({"raster-opacity":new jt($e.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt($e.paint_raster["raster-brightness-max"]),"raster-saturation":new jt($e.paint_raster["raster-saturation"]),"raster-contrast":new jt($e.paint_raster["raster-contrast"]),"raster-resampling":new jt($e.paint_raster["raster-resampling"]),"raster-fade-duration":new jt($e.paint_raster["raster-fade-duration"])})}};class fA extends so{constructor(r){super(r,pA)}}class mA extends so{constructor(r){super(r,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class gA{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Tv=63710088e-1;class Us{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Us(re(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,d=this.lat*s,f=r.lat*s,v=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((r.lng-this.lng)*s);return Tv*Math.acos(Math.min(v,1))}static convert(r){if(r instanceof Us)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Us(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Us(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Wb=2*Math.PI*Tv;function Gb(o){return Wb*Math.cos(o*Math.PI/180)}function qb(o){return(180+o)/360}function Zb(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Kb(o,r){return o/Gb(r)}function Xb(o){return 360*o-180}function Iv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Zf{constructor(r,s,d=0){this.x=+r,this.y=+s,this.z=+d}static fromLngLat(r,s=0){const d=Us.convert(r);return new Zf(qb(d.lng),Zb(d.lat),Kb(s,d.lat))}toLngLat(){return new Us(Xb(this.x),Iv(this.y))}toAltitude(){return this.z*Gb(Iv(this.y))}meterInMercatorCoordinateUnits(){return 1/Wb*(r=Iv(this.y),1/Math.cos(r*Math.PI/180));var r}}function Jb(o,r,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[o*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class Pv{constructor(r,s,d){if(r<0||r>25||d<0||d>=Math.pow(2,r)||s<0||s>=Math.pow(2,r))throw new Error(`x=${s}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=s,this.y=d,this.key=ih(0,r,r,s,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s,d){const f=(x=this.y,w=this.z,T=Jb(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),E=Jb(256*(v+1),256*(x+1),w),T[0]+","+T[1]+","+E[0]+","+E[1]);var v,x,w,T,E;const R=function(j,G,X){let Y,se="";for(let me=j;me>0;me--)Y=1<<me-1,se+=(G&Y?1:0)+(X&Y?2:0);return se}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,f)}isChildOf(r){const s=this.z-r.z;return s>0&&r.x===this.x>>s&&r.y===this.y>>s}getTilePoint(r){const s=Math.pow(2,this.z);return new D((r.x*s-this.x)*En,(r.y*s-this.y)*En)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Yb{constructor(r,s){this.wrap=r,this.canonical=s,this.key=ih(r,s.z,s.z,s.x,s.y)}}class wo{constructor(r,s,d,f,v){if(r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=s,this.canonical=new Pv(d,+f,+v),this.key=ih(s,r,d,f,v)}clone(){return new wo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-r;return r>this.canonical.z?new wo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wo(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?ih(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y):ih(this.wrap*+s,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new wo(s,this.wrap,s,d,f),new wo(s,this.wrap,s,d+1,f),new wo(s,this.wrap,s,d,f+1),new wo(s,this.wrap,s,d+1,f+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new wo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Yb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Zf(r.x-this.wrap,r.y))}}function ih(o,r,s,d,f){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*f+d).toString(36)+s.toString(36)+r.toString(36)}It("CanonicalTileID",Pv),It("OverscaledTileID",wo,{omit:["posMatrix"]});class Qb{constructor(r,s,d,f=1,v=1,x=1,w=0){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Ye(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const T=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let E=0;E<T;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(T,E)]=this.data[this._idx(T-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,T)]=this.data[this._idx(E,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let E=0;E<T;E++)for(let R=0;R<T;R++){const j=this.get(E,R);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(r,s){const d=new Uint8Array(this.data.buffer),f=4*this._idx(r,s);return this.unpack(d[f],d[f+1],d[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}unpack(r,s,d){return r*this.redFactor+s*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new bo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,s,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=d*this.dim,w=d*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(d){case-1:x=w-1;break;case 1:w=x+1}const T=-s*this.dim,E=-d*this.dim;for(let R=x;R<w;R++)for(let j=f;j<v;j++)this.data[this._idx(j,R)]=r.data[this._idx(j+T,R+E)]}}It("DEMData",Qb);class ew{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const d=r[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class tw{constructor(r,s,d,f,v){this.type="Feature",this._vectorTileFeature=r,r._z=s,r._x=d,r._y=f,this.properties=r.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(r[s]=this[s]);return r}}class rw{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Ls(En,16,0),this.grid3D=new Ls(En,16,0),this.featureIndexArray=new Je,this.promoteId=s}insert(r,s,d,f,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,v);const T=x?this.grid3D:this.grid;for(let E=0;E<s.length;E++){const R=s[E],j=[1/0,1/0,-1/0,-1/0];for(let G=0;G<R.length;G++){const X=R[G];j[0]=Math.min(j[0],X.x),j[1]=Math.min(j[1],X.y),j[2]=Math.max(j[2],X.x),j[3]=Math.max(j[3],X.y)}j[0]<En&&j[1]<En&&j[2]>=0&&j[3]>=0&&T.insert(w,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ns.VectorTile(new gv(this.rawTileData)).layers,this.sourceLayerCoder=new ew(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,s,d,f){this.loadVTLayers();const v=r.params||{},x=En/r.tileSize/r.scale,w=Sd(v.filter),T=r.queryGeometry,E=r.queryPadding*x,R=iw(T),j=this.grid.query(R.minX-E,R.minY-E,R.maxX+E,R.maxY+E),G=iw(r.cameraQueryGeometry),X=this.grid3D.query(G.minX-E,G.minY-E,G.maxX+E,G.maxY+E,(me,ye,ke,xe)=>function(Ie,Be,qe,_t,Lt){for(const pt of Ie)if(Be<=pt.x&&qe<=pt.y&&_t>=pt.x&&Lt>=pt.y)return!0;const gt=[new D(Be,qe),new D(Be,Lt),new D(_t,Lt),new D(_t,qe)];if(Ie.length>2){for(const pt of gt)if(Nc(Ie,pt))return!0}for(let pt=0;pt<Ie.length-1;pt++)if(ZE(Ie[pt],Ie[pt+1],gt))return!0;return!1}(r.cameraQueryGeometry,me-E,ye-E,ke+E,xe+E));for(const me of X)j.push(me);j.sort(yA);const Y={};let se;for(let me=0;me<j.length;me++){const ye=j[me];if(ye===se)continue;se=ye;const ke=this.featureIndexArray.get(ye);let xe=null;this.loadMatchingFeature(Y,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,w,v.layers,v.availableImages,s,d,f,(Ie,Be,qe)=>(xe||(xe=Rl(Ie)),Be.queryIntersectsFeature(T,Ie,qe,xe,this.z,r.transform,x,r.pixelPosMatrix)))}return Y}loadMatchingFeature(r,s,d,f,v,x,w,T,E,R,j){const G=this.bucketLayerIDs[s];if(x&&!function(me,ye){for(let ke=0;ke<me.length;ke++)if(ye.indexOf(me[ke])>=0)return!0;return!1}(x,G))return;const X=this.sourceLayerCoder.decode(d),Y=this.vtLayers[X].feature(f);if(v.needGeometry){const me=Ll(Y,!0);if(!v.filter(new Xr(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!v.filter(new Xr(this.tileID.overscaledZ),Y))return;const se=this.getId(Y,X);for(let me=0;me<G.length;me++){const ye=G[me];if(x&&x.indexOf(ye)<0)continue;const ke=T[ye];if(!ke)continue;let xe={};se&&R&&(xe=R.getState(ke.sourceLayer||"_geojsonTileLayer",se));const Ie=fe({},E[ye]);Ie.paint=nw(Ie.paint,ke.paint,Y,xe,w),Ie.layout=nw(Ie.layout,ke.layout,Y,xe,w);const Be=!j||j(Y,ke,xe);if(!Be)continue;const qe=new tw(Y,this.z,this.x,this.y,se);qe.layer=Ie;let _t=r[ye];_t===void 0&&(_t=r[ye]=[]),_t.push({featureIndex:f,feature:qe,intersectionZ:Be})}}lookupSymbolFeatures(r,s,d,f,v,x,w,T){const E={};this.loadVTLayers();const R=Sd(v);for(const j of r)this.loadMatchingFeature(E,d,f,j,R,x,w,T,s);return E}hasLayer(r){for(const s of this.bucketLayerIDs)for(const d of s)if(r===d)return!0;return!1}getId(r,s){let d=r.id;return this.promoteId&&(d=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function nw(o,r,s,d,f){return be(o,(v,x)=>{const w=r instanceof Oc?r.get(x):null;return w&&w.evaluate?w.evaluate(s,d,f):w})}function iw(o){let r=1/0,s=1/0,d=-1/0,f=-1/0;for(const v of o)r=Math.min(r,v.x),s=Math.min(s,v.y),d=Math.max(d,v.x),f=Math.max(f,v.y);return{minX:r,minY:s,maxX:d,maxY:f}}function yA(o,r){return r-o}function ow(o,r,s,d,f){const v=[];for(let x=0;x<o.length;x++){const w=o[x];let T;for(let E=0;E<w.length-1;E++){let R=w[E],j=w[E+1];R.x<r&&j.x<r||(R.x<r?R=new D(r,R.y+(r-R.x)/(j.x-R.x)*(j.y-R.y))._round():j.x<r&&(j=new D(r,R.y+(r-R.x)/(j.x-R.x)*(j.y-R.y))._round()),R.y<s&&j.y<s||(R.y<s?R=new D(R.x+(s-R.y)/(j.y-R.y)*(j.x-R.x),s)._round():j.y<s&&(j=new D(R.x+(s-R.y)/(j.y-R.y)*(j.x-R.x),s)._round()),R.x>=d&&j.x>=d||(R.x>=d?R=new D(d,R.y+(d-R.x)/(j.x-R.x)*(j.y-R.y))._round():j.x>=d&&(j=new D(d,R.y+(d-R.x)/(j.x-R.x)*(j.y-R.y))._round()),R.y>=f&&j.y>=f||(R.y>=f?R=new D(R.x+(f-R.y)/(j.y-R.y)*(j.x-R.x),f)._round():j.y>=f&&(j=new D(R.x+(f-R.y)/(j.y-R.y)*(j.x-R.x),f)._round()),T&&R.equals(T[T.length-1])||(T=[R],v.push(T)),T.push(j)))))}}return v}It("FeatureIndex",rw,{omit:["rawTileData","sourceLayerCoder"]});class Hs extends D{constructor(r,s,d,f){super(r,s),this.angle=d,f!==void 0&&(this.segment=f)}clone(){return new Hs(this.x,this.y,this.angle,this.segment)}}function aw(o,r,s,d,f){if(r.segment===void 0||s===0)return!0;let v=r,x=r.segment+1,w=0;for(;w>-s/2;){if(x--,x<0)return!1;w-=o[x].dist(v),v=o[x]}w+=o[x].dist(o[x+1]),x++;const T=[];let E=0;for(;w<s/2;){const R=o[x],j=o[x+1];if(!j)return!1;let G=o[x-1].angleTo(R)-R.angleTo(j);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:G}),E+=G;w-T[0].distance>d;)E-=T.shift().angleDelta;if(E>f)return!1;x++,w+=R.dist(j)}return!0}function sw(o){let r=0;for(let s=0;s<o.length-1;s++)r+=o[s].dist(o[s+1]);return r}function lw(o,r,s){return o?.6*r*s:0}function cw(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function vA(o,r,s,d,f,v){const x=lw(s,f,v),w=cw(s,d)*v;let T=0;const E=sw(o)/2;for(let R=0;R<o.length-1;R++){const j=o[R],G=o[R+1],X=j.dist(G);if(T+X>E){const Y=(E-T)/X,se=Hi.number(j.x,G.x,Y),me=Hi.number(j.y,G.y,Y),ye=new Hs(se,me,G.angleTo(j),R);return ye._round(),!x||aw(o,ye,w,x,r)?ye:void 0}T+=X}}function _A(o,r,s,d,f,v,x,w,T){const E=lw(d,v,x),R=cw(d,f),j=R*x,G=o[0].x===0||o[0].x===T||o[0].y===0||o[0].y===T;return r-j<r/4&&(r=j+r/4),uw(o,G?r/2*w%r:(R/2+2*v)*x*w%r,r,E,s,j,G,!1,T)}function uw(o,r,s,d,f,v,x,w,T){const E=v/2,R=sw(o);let j=0,G=r-s,X=[];for(let Y=0;Y<o.length-1;Y++){const se=o[Y],me=o[Y+1],ye=se.dist(me),ke=me.angleTo(se);for(;G+s<j+ye;){G+=s;const xe=(G-j)/ye,Ie=Hi.number(se.x,me.x,xe),Be=Hi.number(se.y,me.y,xe);if(Ie>=0&&Ie<T&&Be>=0&&Be<T&&G-E>=0&&G+E<=R){const qe=new Hs(Ie,Be,ke,Y);qe._round(),d&&!aw(o,qe,v,d,f)||X.push(qe)}}j+=ye}return w||X.length||x||(X=uw(o,j/2,s,d,f,v,x,!0,T)),X}It("Anchor",Hs);const Zc=Ki;function dw(o,r,s,d){const f=[],v=o.image,x=v.pixelRatio,w=v.paddedRect.w-2*Zc,T=v.paddedRect.h-2*Zc,E=o.right-o.left,R=o.bottom-o.top,j=v.stretchX||[[0,w]],G=v.stretchY||[[0,T]],X=(at,Pt)=>at+Pt[1]-Pt[0],Y=j.reduce(X,0),se=G.reduce(X,0),me=w-Y,ye=T-se;let ke=0,xe=Y,Ie=0,Be=se,qe=0,_t=me,Lt=0,gt=ye;if(v.content&&d){const at=v.content;ke=Kf(j,0,at[0]),Ie=Kf(G,0,at[1]),xe=Kf(j,at[0],at[2]),Be=Kf(G,at[1],at[3]),qe=at[0]-ke,Lt=at[1]-Ie,_t=at[2]-at[0]-xe,gt=at[3]-at[1]-Be}const pt=(at,Pt,ut,et)=>{const qt=Xf(at.stretch-ke,xe,E,o.left),Ot=Jf(at.fixed-qe,_t,at.stretch,Y),fr=Xf(Pt.stretch-Ie,Be,R,o.top),Yr=Jf(Pt.fixed-Lt,gt,Pt.stretch,se),tn=Xf(ut.stretch-ke,xe,E,o.left),jn=Jf(ut.fixed-qe,_t,ut.stretch,Y),co=Xf(et.stretch-Ie,Be,R,o.top),Ei=Jf(et.fixed-Lt,gt,et.stretch,se),zn=new D(qt,fr),ti=new D(tn,fr),li=new D(tn,co),zi=new D(qt,co),Ai=new D(Ot/x,Yr/x),Vn=new D(jn/x,Ei/x),Un=r*Math.PI/180;if(Un){const vi=Math.sin(Un),Xi=Math.cos(Un),Ji=[Xi,-vi,vi,Xi];zn._matMult(Ji),ti._matMult(Ji),zi._matMult(Ji),li._matMult(Ji)}const yi=at.stretch+at.fixed,Mi=Pt.stretch+Pt.fixed;return{tl:zn,tr:ti,bl:zi,br:li,tex:{x:v.paddedRect.x+Zc+yi,y:v.paddedRect.y+Zc+Mi,w:ut.stretch+ut.fixed-yi,h:et.stretch+et.fixed-Mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ai,pixelOffsetBR:Vn,minFontScaleX:_t/x/E,minFontScaleY:gt/x/R,isSDF:s}};if(d&&(v.stretchX||v.stretchY)){const at=hw(j,me,Y),Pt=hw(G,ye,se);for(let ut=0;ut<at.length-1;ut++){const et=at[ut],qt=at[ut+1];for(let Ot=0;Ot<Pt.length-1;Ot++)f.push(pt(et,Pt[Ot],qt,Pt[Ot+1]))}}else f.push(pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return f}function Kf(o,r,s){let d=0;for(const f of o)d+=Math.max(r,Math.min(s,f[1]))-Math.max(r,Math.min(s,f[0]));return d}function hw(o,r,s){const d=[{fixed:-Zc,stretch:0}];for(const[f,v]of o){const x=d[d.length-1];d.push({fixed:f-x.stretch,stretch:x.stretch}),d.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return d.push({fixed:r+Zc,stretch:s}),d}function Xf(o,r,s,d){return o/r*s+d}function Jf(o,r,s,d){return o-r*s/d}class Yf{constructor(r,s,d,f,v,x,w,T,E,R){if(this.boxStartIndex=r.length,E){let j=x.top,G=x.bottom;const X=x.collisionPadding;X&&(j-=X[1],G+=X[3]);let Y=G-j;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{let j=x.top*w-T[0],G=x.bottom*w+T[2],X=x.left*w-T[3],Y=x.right*w+T[1];const se=x.collisionPadding;if(se&&(X-=se[0]*w,j-=se[1]*w,Y+=se[2]*w,G+=se[3]*w),R){const me=new D(X,j),ye=new D(Y,j),ke=new D(X,G),xe=new D(Y,G),Ie=R*Math.PI/180;me._rotate(Ie),ye._rotate(Ie),ke._rotate(Ie),xe._rotate(Ie),X=Math.min(me.x,ye.x,ke.x,xe.x),Y=Math.max(me.x,ye.x,ke.x,xe.x),j=Math.min(me.y,ye.y,ke.y,xe.y),G=Math.max(me.y,ye.y,ke.y,xe.y)}r.emplaceBack(s.x,s.y,X,j,Y,G,d,f,v)}this.boxEndIndex=r.length}}class xA{constructor(r=[],s=bA){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:d}=this,f=s[r];for(;r>0;){const v=r-1>>1,x=s[v];if(d(f,x)>=0)break;s[r]=x,r=v}s[r]=f}_down(r){const{data:s,compare:d}=this,f=this.length>>1,v=s[r];for(;r<f;){let x=1+(r<<1),w=s[x];const T=x+1;if(T<this.length&&d(s[T],w)<0&&(x=T,w=s[T]),d(w,v)>=0)break;s[r]=w,r=x}s[r]=v}}function bA(o,r){return o<r?-1:o>r?1:0}function wA(o,r=1,s=!1){let d=1/0,f=1/0,v=-1/0,x=-1/0;const w=o[0];for(let X=0;X<w.length;X++){const Y=w[X];(!X||Y.x<d)&&(d=Y.x),(!X||Y.y<f)&&(f=Y.y),(!X||Y.x>v)&&(v=Y.x),(!X||Y.y>x)&&(x=Y.y)}const T=Math.min(v-d,x-f);let E=T/2;const R=new xA([],SA);if(T===0)return new D(d,f);for(let X=d;X<v;X+=T)for(let Y=f;Y<x;Y+=T)R.push(new Kc(X+E,Y+E,E,o));let j=function(X){let Y=0,se=0,me=0;const ye=X[0];for(let ke=0,xe=ye.length,Ie=xe-1;ke<xe;Ie=ke++){const Be=ye[ke],qe=ye[Ie],_t=Be.x*qe.y-qe.x*Be.y;se+=(Be.x+qe.x)*_t,me+=(Be.y+qe.y)*_t,Y+=3*_t}return new Kc(se/Y,me/Y,0,X)}(o),G=R.length;for(;R.length;){const X=R.pop();(X.d>j.d||!j.d)&&(j=X,s&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,G)),X.max-j.d<=r||(E=X.h/2,R.push(new Kc(X.p.x-E,X.p.y-E,E,o)),R.push(new Kc(X.p.x+E,X.p.y-E,E,o)),R.push(new Kc(X.p.x-E,X.p.y+E,E,o)),R.push(new Kc(X.p.x+E,X.p.y+E,E,o)),G+=4)}return s&&(console.log(`num probes: ${G}`),console.log(`best distance: ${j.d}`)),j.p}function SA(o,r){return r.max-o.max}function Kc(o,r,s,d){this.p=new D(o,r),this.h=s,this.d=function(f,v){let x=!1,w=1/0;for(let T=0;T<v.length;T++){const E=v[T];for(let R=0,j=E.length,G=j-1;R<j;G=R++){const X=E[R],Y=E[G];X.y>f.y!=Y.y>f.y&&f.x<(Y.x-X.x)*(f.y-X.y)/(Y.y-X.y)+X.x&&(x=!x),w=Math.min(w,Z1(f,X,Y))}}return(x?1:-1)*Math.sqrt(w)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var si;l.aq=void 0,(si=l.aq||(l.aq={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Ws=7,Ev=Number.POSITIVE_INFINITY;function pw(o,r){return r[1]!==Ev?function(s,d,f){let v=0,x=0;switch(d=Math.abs(d),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Ws;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Ws}switch(s){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(o,r[0],r[1]):function(s,d){let f=0,v=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ws;break;case"bottom-right":case"bottom-left":v=-x+Ws;break;case"bottom":v=-d+Ws;break;case"top":v=d-Ws}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=d;break;case"right":f=-d}return[f,v]}(o,r[0])}function fw(o,r,s){var d;const f=o.layout,v=(d=f.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},s);if(v){const w=v.values,T=[];for(let E=0;E<w.length;E+=2){const R=T[E]=w[E],j=w[E+1].map(G=>G*Nn);R.startsWith("top")?j[1]-=Ws:R.startsWith("bottom")&&(j[1]+=Ws),T[E+1]=j}return new $n(T)}const x=f.get("text-variable-anchor");if(x){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(r,{},s)*Nn,Ev]:f.get("text-offset").evaluate(r,{},s).map(E=>E*Nn);const T=[];for(const E of x)T.push(E,pw(E,w));return new $n(T)}return null}function zv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function CA(o,r,s,d,f,v,x,w,T,E,R){let j=v.textMaxSize.evaluate(r,{});j===void 0&&(j=x);const G=o.layers[0].layout,X=G.get("icon-offset").evaluate(r,{},R),Y=gw(s.horizontal),se=x/24,me=o.tilePixelRatio*se,ye=o.tilePixelRatio*j/24,ke=o.tilePixelRatio*w,xe=o.tilePixelRatio*G.get("symbol-spacing"),Ie=G.get("text-padding")*o.tilePixelRatio,Be=function(et,qt,Ot,fr=1){const Yr=et.get("icon-padding").evaluate(qt,{},Ot),tn=Yr&&Yr.values;return[tn[0]*fr,tn[1]*fr,tn[2]*fr,tn[3]*fr]}(G,r,R,o.tilePixelRatio),qe=G.get("text-max-angle")/180*Math.PI,_t=G.get("text-rotation-alignment")!=="viewport"&&G.get("symbol-placement")!=="point",Lt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",gt=G.get("symbol-placement"),pt=xe/2,at=G.get("icon-text-fit");let Pt;d&&at!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Pt=Ob(d,s.vertical,at,G.get("icon-text-fit-padding"),X,se)),Y&&(d=Ob(d,Y,at,G.get("icon-text-fit-padding"),X,se)));const ut=(et,qt)=>{qt.x<0||qt.x>=En||qt.y<0||qt.y>=En||function(Ot,fr,Yr,tn,jn,co,Ei,zn,ti,li,zi,Ai,Vn,Un,yi,Mi,vi,Xi,Ji,Hn,_r,_i,ci,Wn,Ho){const pa=Ot.addToLineVertexArray(fr,Yr);let fa,us,Wo,So,Yi=0,ds=0,sh=0,xw=0,Ov=-1,Fv=-1;const hs={};let bw=as("");if(Ot.allowVerticalPlacement&&tn.vertical){const xi=zn.layout.get("text-rotate").evaluate(_r,{},Wn)+90;Wo=new Yf(ti,fr,li,zi,Ai,tn.vertical,Vn,Un,yi,xi),Ei&&(So=new Yf(ti,fr,li,zi,Ai,Ei,vi,Xi,yi,xi))}if(jn){const xi=zn.layout.get("icon-rotate").evaluate(_r,{}),Co=zn.layout.get("icon-text-fit")!=="none",Bl=dw(jn,xi,ci,Co),ga=Ei?dw(Ei,xi,ci,Co):void 0;us=new Yf(ti,fr,li,zi,Ai,jn,vi,Xi,!1,xi),Yi=4*Bl.length;const Ol=Ot.iconSizeData;let Fa=null;Ol.kind==="source"?(Fa=[Oa*zn.layout.get("icon-size").evaluate(_r,{})],Fa[0]>Vs&&Ye(`${Ot.layerIds[0]}: Value for "icon-size" is >= ${nh}. Reduce your "icon-size".`)):Ol.kind==="composite"&&(Fa=[Oa*_i.compositeIconSizes[0].evaluate(_r,{},Wn),Oa*_i.compositeIconSizes[1].evaluate(_r,{},Wn)],(Fa[0]>Vs||Fa[1]>Vs)&&Ye(`${Ot.layerIds[0]}: Value for "icon-size" is >= ${nh}. Reduce your "icon-size".`)),Ot.addSymbols(Ot.icon,Bl,Fa,Hn,Ji,_r,l.ai.none,fr,pa.lineStartIndex,pa.lineLength,-1,Wn),Ov=Ot.icon.placedSymbolArray.length-1,ga&&(ds=4*ga.length,Ot.addSymbols(Ot.icon,ga,Fa,Hn,Ji,_r,l.ai.vertical,fr,pa.lineStartIndex,pa.lineLength,-1,Wn),Fv=Ot.icon.placedSymbolArray.length-1)}const ww=Object.keys(tn.horizontal);for(const xi of ww){const Co=tn.horizontal[xi];if(!fa){bw=as(Co.text);const ga=zn.layout.get("text-rotate").evaluate(_r,{},Wn);fa=new Yf(ti,fr,li,zi,Ai,Co,Vn,Un,yi,ga)}const Bl=Co.positionedLines.length===1;if(sh+=mw(Ot,fr,Co,co,zn,yi,_r,Mi,pa,tn.vertical?l.ai.horizontal:l.ai.horizontalOnly,Bl?ww:[xi],hs,Ov,_i,Wn),Bl)break}tn.vertical&&(xw+=mw(Ot,fr,tn.vertical,co,zn,yi,_r,Mi,pa,l.ai.vertical,["vertical"],hs,Fv,_i,Wn));const IA=fa?fa.boxStartIndex:Ot.collisionBoxArray.length,PA=fa?fa.boxEndIndex:Ot.collisionBoxArray.length,EA=Wo?Wo.boxStartIndex:Ot.collisionBoxArray.length,zA=Wo?Wo.boxEndIndex:Ot.collisionBoxArray.length,AA=us?us.boxStartIndex:Ot.collisionBoxArray.length,MA=us?us.boxEndIndex:Ot.collisionBoxArray.length,DA=So?So.boxStartIndex:Ot.collisionBoxArray.length,RA=So?So.boxEndIndex:Ot.collisionBoxArray.length;let ma=-1;const em=(xi,Co)=>xi&&xi.circleDiameter?Math.max(xi.circleDiameter,Co):Co;ma=em(fa,ma),ma=em(Wo,ma),ma=em(us,ma),ma=em(So,ma);const Sw=ma>-1?1:0;Sw&&(ma*=Ho/Nn),Ot.glyphOffsetArray.length>=qc.MAX_GLYPHS&&Ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_r.sortKey!==void 0&&Ot.addToSortKeyRanges(Ot.symbolInstances.length,_r.sortKey);const LA=fw(zn,_r,Wn),[$A,BA]=function(xi,Co){const Bl=xi.length,ga=Co==null?void 0:Co.values;if((ga==null?void 0:ga.length)>0)for(let Ol=0;Ol<ga.length;Ol+=2){const Fa=ga[Ol+1];xi.emplaceBack(l.aq[ga[Ol]],Fa[0],Fa[1])}return[Bl,xi.length]}(Ot.textAnchorOffsets,LA);Ot.symbolInstances.emplaceBack(fr.x,fr.y,hs.right>=0?hs.right:-1,hs.center>=0?hs.center:-1,hs.left>=0?hs.left:-1,hs.vertical||-1,Ov,Fv,bw,IA,PA,EA,zA,AA,MA,DA,RA,li,sh,xw,Yi,ds,Sw,0,Vn,ma,$A,BA)}(o,qt,et,s,d,f,Pt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,me,[Ie,Ie,Ie,Ie],_t,T,ke,Be,Lt,X,r,v,E,R,x)};if(gt==="line")for(const et of ow(r.geometry,0,0,En,En)){const qt=_A(et,xe,qe,s.vertical||Y,d,24,ye,o.overscaling,En);for(const Ot of qt)Y&&kA(o,Y.text,pt,Ot)||ut(et,Ot)}else if(gt==="line-center"){for(const et of r.geometry)if(et.length>1){const qt=vA(et,qe,s.vertical||Y,d,24,ye);qt&&ut(et,qt)}}else if(r.type==="Polygon")for(const et of lv(r.geometry,0)){const qt=wA(et,16);ut(et[0],new Hs(qt.x,qt.y,0))}else if(r.type==="LineString")for(const et of r.geometry)ut(et,new Hs(et[0].x,et[0].y,0));else if(r.type==="Point")for(const et of r.geometry)for(const qt of et)ut([qt],new Hs(qt.x,qt.y,0))}function mw(o,r,s,d,f,v,x,w,T,E,R,j,G,X,Y){const se=function(ke,xe,Ie,Be,qe,_t,Lt,gt){const pt=Be.layout.get("text-rotate").evaluate(_t,{})*Math.PI/180,at=[];for(const Pt of xe.positionedLines)for(const ut of Pt.positionedGlyphs){if(!ut.rect)continue;const et=ut.rect||{};let qt=Ab+1,Ot=!0,fr=1,Yr=0;const tn=(qe||gt)&&ut.vertical,jn=ut.metrics.advance*ut.scale/2;if(gt&&xe.verticalizable&&(Yr=Pt.lineOffset/2-(ut.imageName?-(Nn-ut.metrics.width*ut.scale)/2:(ut.scale-1)*Nn)),ut.imageName){const Hn=Lt[ut.imageName];Ot=Hn.sdf,fr=Hn.pixelRatio,qt=Ki/fr}const co=qe?[ut.x+jn,ut.y]:[0,0];let Ei=qe?[0,0]:[ut.x+jn+Ie[0],ut.y+Ie[1]-Yr],zn=[0,0];tn&&(zn=Ei,Ei=[0,0]);const ti=ut.metrics.isDoubleResolution?2:1,li=(ut.metrics.left-qt)*ut.scale-jn+Ei[0],zi=(-ut.metrics.top-qt)*ut.scale+Ei[1],Ai=li+et.w/ti*ut.scale/fr,Vn=zi+et.h/ti*ut.scale/fr,Un=new D(li,zi),yi=new D(Ai,zi),Mi=new D(li,Vn),vi=new D(Ai,Vn);if(tn){const Hn=new D(-jn,jn-th),_r=-Math.PI/2,_i=Nn/2-jn,ci=new D(5-th-_i,-(ut.imageName?_i:0)),Wn=new D(...zn);Un._rotateAround(_r,Hn)._add(ci)._add(Wn),yi._rotateAround(_r,Hn)._add(ci)._add(Wn),Mi._rotateAround(_r,Hn)._add(ci)._add(Wn),vi._rotateAround(_r,Hn)._add(ci)._add(Wn)}if(pt){const Hn=Math.sin(pt),_r=Math.cos(pt),_i=[_r,-Hn,Hn,_r];Un._matMult(_i),yi._matMult(_i),Mi._matMult(_i),vi._matMult(_i)}const Xi=new D(0,0),Ji=new D(0,0);at.push({tl:Un,tr:yi,bl:Mi,br:vi,tex:et,writingMode:xe.writingMode,glyphOffset:co,sectionIndex:ut.sectionIndex,isSDF:Ot,pixelOffsetTL:Xi,pixelOffsetBR:Ji,minFontScaleX:0,minFontScaleY:0})}return at}(0,s,w,f,v,x,d,o.allowVerticalPlacement),me=o.textSizeData;let ye=null;me.kind==="source"?(ye=[Oa*f.layout.get("text-size").evaluate(x,{})],ye[0]>Vs&&Ye(`${o.layerIds[0]}: Value for "text-size" is >= ${nh}. Reduce your "text-size".`)):me.kind==="composite"&&(ye=[Oa*X.compositeTextSizes[0].evaluate(x,{},Y),Oa*X.compositeTextSizes[1].evaluate(x,{},Y)],(ye[0]>Vs||ye[1]>Vs)&&Ye(`${o.layerIds[0]}: Value for "text-size" is >= ${nh}. Reduce your "text-size".`)),o.addSymbols(o.text,se,ye,w,v,x,E,r,T.lineStartIndex,T.lineLength,G,Y);for(const ke of R)j[ke]=o.text.placedSymbolArray.length-1;return 4*se.length}function gw(o){for(const r in o)return o[r];return null}function kA(o,r,s,d){const f=o.compareText;if(r in f){const v=f[r];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<s)return!0}else f[r]=[];return f[r].push(d),!1}const yw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Av{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=d>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=yw[15&d];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[w]=new Uint32Array(r,4,1);return new Av(w,x,v,r)}constructor(r,s=64,d=Float64Array,f){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const v=yw.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,w=r*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+T,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+T),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+w+T,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=s,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Mv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,d,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,T=[0,v.length-1,0],E=[];for(;T.length;){const R=T.pop()||0,j=T.pop()||0,G=T.pop()||0;if(j-G<=w){for(let me=G;me<=j;me++){const ye=x[2*me],ke=x[2*me+1];ye>=r&&ye<=d&&ke>=s&&ke<=f&&E.push(v[me])}continue}const X=G+j>>1,Y=x[2*X],se=x[2*X+1];Y>=r&&Y<=d&&se>=s&&se<=f&&E.push(v[X]),(R===0?r<=Y:s<=se)&&(T.push(G),T.push(X-1),T.push(1-R)),(R===0?d>=Y:f>=se)&&(T.push(X+1),T.push(j),T.push(1-R))}return E}within(r,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,w=[0,f.length-1,0],T=[],E=d*d;for(;w.length;){const R=w.pop()||0,j=w.pop()||0,G=w.pop()||0;if(j-G<=x){for(let me=G;me<=j;me++)_w(v[2*me],v[2*me+1],r,s)<=E&&T.push(f[me]);continue}const X=G+j>>1,Y=v[2*X],se=v[2*X+1];_w(Y,se,r,s)<=E&&T.push(f[X]),(R===0?r-d<=Y:s-d<=se)&&(w.push(G),w.push(X-1),w.push(1-R)),(R===0?r+d>=Y:s+d>=se)&&(w.push(X+1),w.push(j),w.push(1-R))}return T}}function Mv(o,r,s,d,f,v){if(f-d<=s)return;const x=d+f>>1;vw(o,r,x,d,f,v),Mv(o,r,s,d,x-1,1-v),Mv(o,r,s,x+1,f,1-v)}function vw(o,r,s,d,f,v){for(;f>d;){if(f-d>600){const E=f-d+1,R=s-d+1,j=Math.log(E),G=.5*Math.exp(2*j/3),X=.5*Math.sqrt(j*G*(E-G)/E)*(R-E/2<0?-1:1);vw(o,r,s,Math.max(d,Math.floor(s-R*G/E+X)),Math.min(f,Math.floor(s+(E-R)*G/E+X)),v)}const x=r[2*s+v];let w=d,T=f;for(oh(o,r,d,s),r[2*f+v]>x&&oh(o,r,d,f);w<T;){for(oh(o,r,w,T),w++,T--;r[2*w+v]<x;)w++;for(;r[2*T+v]>x;)T--}r[2*d+v]===x?oh(o,r,d,T):(T++,oh(o,r,T,f)),T<=s&&(d=T+1),s<=T&&(f=T-1)}}function oh(o,r,s,d){Dv(o,s,d),Dv(r,2*s,2*d),Dv(r,2*s+1,2*d+1)}function Dv(o,r,s){const d=o[r];o[r]=o[s],o[s]=d}function _w(o,r,s,d){const f=o-s,v=r-d;return f*f+v*v}var Rv;l.bh=void 0,(Rv=l.bh||(l.bh={})).create="create",Rv.load="load",Rv.fullLoad="fullLoad";let Qf=null,ah=[];const Lv=1e3/60,$v="loadTime",Bv="fullLoadTime",TA={mark(o){performance.mark(o)},frame(o){const r=o;Qf!=null&&ah.push(r-Qf),Qf=r},clearMetrics(){Qf=null,ah=[],performance.clearMeasures($v),performance.clearMeasures(Bv);for(const o in l.bh)performance.clearMarks(l.bh[o])},getPerformanceMetrics(){performance.measure($v,l.bh.create,l.bh.load),performance.measure(Bv,l.bh.create,l.bh.fullLoad);const o=performance.getEntriesByName($v)[0].duration,r=performance.getEntriesByName(Bv)[0].duration,s=ah.length,d=1/(ah.reduce((v,x)=>v+x,0)/s/1e3),f=ah.filter(v=>v>Lv).reduce((v,x)=>v+(x-Lv)/Lv,0);return{loadTime:o,fullLoadTime:r,fps:d,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};l.$=function(o,r,s){var d,f,v,x,w,T,E,R,j,G,X,Y,se=s[0],me=s[1],ye=s[2];return r===o?(o[12]=r[0]*se+r[4]*me+r[8]*ye+r[12],o[13]=r[1]*se+r[5]*me+r[9]*ye+r[13],o[14]=r[2]*se+r[6]*me+r[10]*ye+r[14],o[15]=r[3]*se+r[7]*me+r[11]*ye+r[15]):(f=r[1],v=r[2],x=r[3],w=r[4],T=r[5],E=r[6],R=r[7],j=r[8],G=r[9],X=r[10],Y=r[11],o[0]=d=r[0],o[1]=f,o[2]=v,o[3]=x,o[4]=w,o[5]=T,o[6]=E,o[7]=R,o[8]=j,o[9]=G,o[10]=X,o[11]=Y,o[12]=d*se+w*me+j*ye+r[12],o[13]=f*se+T*me+G*ye+r[13],o[14]=v*se+E*me+X*ye+r[14],o[15]=x*se+R*me+Y*ye+r[15]),o},l.A=jc,l.B=Hi,l.C=class{constructor(o,r,s){this.receive=d=>{const f=d.data,v=f.id;if(v&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Ue()||f.mustQueue?(this.tasks[v]=f,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,f)},this.process=()=>{if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),f=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(d,f)},this.target=o,this.parent=r,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new gA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ue()?o:window}send(o,r,s,d,f=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],w={id:v,type:o,hasCallback:!!s,targetMapId:d,mustQueue:f,sourceMapId:this.mapId,data:La(r,x)};return this.target.postMessage(w,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}processTask(o,r){if(r.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(r.error?s($s(r.error)):s(null,$s(r.data)))}else{let s=!1;const d=[],f=r.hasCallback?(w,T)=>{s=!0,delete this.cancelCallbacks[o];const E={id:o,type:"<response>",sourceMapId:this.mapId,error:w?La(w):null,data:La(T,d)};this.target.postMessage(E,{transfer:d})}:w=>{s=!0};let v=null;const x=$s(r.data);if(this.parent[r.type])v=this.parent[r.type](r.sourceMapId,x,f);else if("getWorkerSource"in this.parent){const w=r.type.split(".");v=this.parent.getWorkerSource(r.sourceMapId,w[0],x.source)[w[1]](x,f)}else f(new Error(`Could not find function ${r.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=jt,l.E=Cr,l.F=function(o,r){const s={};for(let d=0;d<r.length;d++){const f=r[d];f in o&&(s[f]=o[f])}return s},l.G=qb,l.H=Zb,l.I=vv,l.J=$,l.K=N,l.L=Us,l.M=ft,l.N=En,l.O=wo,l.P=D,l.Q=an,l.R=bo,l.S=Jr,l.T=Pf,l.U=Zf,l.V=class extends is{},l.W=Pv,l.X=function(o,r){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let d=0;d<o.length;d++){const f=window.document.createElement("source");Tr(o[d])||(s.crossOrigin="Anonymous"),f.src=o[d],s.appendChild(f)}return{cancel:()=>{}}},l.Y=Pe,l.Z=function(){var o=new jc(16);return jc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l._=b,l.a=Xe,l.a$=class extends K{},l.a0=function(o,r,s){var d=s[0],f=s[1],v=s[2];return o[0]=r[0]*d,o[1]=r[1]*d,o[2]=r[2]*d,o[3]=r[3]*d,o[4]=r[4]*f,o[5]=r[5]*f,o[6]=r[6]*f,o[7]=r[7]*f,o[8]=r[8]*v,o[9]=r[9]*v,o[10]=r[10]*v,o[11]=r[11]*v,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},l.a1=Y1,l.a2=function(){return Te++},l.a3=pe,l.a4=qc,l.a5=function(){qi.isLoading()||qi.isLoaded()||Rd()!=="deferred"||If()},l.a6=Sd,l.a7=Ll,l.a8=Xr,l.a9=tw,l.aA=El,l.aB=function(o){o=o.slice();const r=Object.create(null);for(let s=0;s<o.length;s++)r[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=sr(o[s],r[o[s].ref]));return o},l.aC=function(o){if(o.type==="custom")return new mA(o);switch(o.type){case"background":return new hA(o);case"circle":return new JE(o);case"fill":return new yz(o);case"fill-extrusion":return new Mz(o);case"heatmap":return new QE(o);case"hillshade":return new tz(o);case"line":return new Nz(o);case"raster":return new fA(o);case"symbol":return new qf(o)}},l.aD=Ee,l.aE=function(o,r){if(!o)return[{command:Vt.setStyle,args:[r]}];let s=[];try{if(!Yt(o.version,r.version))return[{command:Vt.setStyle,args:[r]}];Yt(o.center,r.center)||s.push({command:Vt.setCenter,args:[r.center]}),Yt(o.zoom,r.zoom)||s.push({command:Vt.setZoom,args:[r.zoom]}),Yt(o.bearing,r.bearing)||s.push({command:Vt.setBearing,args:[r.bearing]}),Yt(o.pitch,r.pitch)||s.push({command:Vt.setPitch,args:[r.pitch]}),Yt(o.sprite,r.sprite)||s.push({command:Vt.setSprite,args:[r.sprite]}),Yt(o.glyphs,r.glyphs)||s.push({command:Vt.setGlyphs,args:[r.glyphs]}),Yt(o.transition,r.transition)||s.push({command:Vt.setTransition,args:[r.transition]}),Yt(o.light,r.light)||s.push({command:Vt.setLight,args:[r.light]});const d={},f=[];(function(x,w,T,E){let R;for(R in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,R)&&(Object.prototype.hasOwnProperty.call(w,R)||Lr(R,T,E));for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&(Object.prototype.hasOwnProperty.call(x,R)?Yt(x[R],w[R])||(x[R].type==="geojson"&&w[R].type==="geojson"&&Qt(x,w,R)?T.push({command:Vt.setGeoJSONSourceData,args:[R,w[R].data]}):cr(R,w,T,E)):kr(R,w,T))})(o.sources,r.sources,f,d);const v=[];o.layers&&o.layers.forEach(x=>{d[x.source]?s.push({command:Vt.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,w,T){w=w||[];const E=(x=x||[]).map(mr),R=w.map(mr),j=x.reduce(Hr,{}),G=w.reduce(Hr,{}),X=E.slice(),Y=Object.create(null);let se,me,ye,ke,xe,Ie,Be;for(se=0,me=0;se<E.length;se++)ye=E[se],Object.prototype.hasOwnProperty.call(G,ye)?me++:(T.push({command:Vt.removeLayer,args:[ye]}),X.splice(X.indexOf(ye,me),1));for(se=0,me=0;se<R.length;se++)ye=R[R.length-1-se],X[X.length-1-se]!==ye&&(Object.prototype.hasOwnProperty.call(j,ye)?(T.push({command:Vt.removeLayer,args:[ye]}),X.splice(X.lastIndexOf(ye,X.length-me),1)):me++,Ie=X[X.length-se],T.push({command:Vt.addLayer,args:[G[ye],Ie]}),X.splice(X.length-se,0,ye),Y[ye]=!0);for(se=0;se<R.length;se++)if(ye=R[se],ke=j[ye],xe=G[ye],!Y[ye]&&!Yt(ke,xe))if(Yt(ke.source,xe.source)&&Yt(ke["source-layer"],xe["source-layer"])&&Yt(ke.type,xe.type)){for(Be in Nt(ke.layout,xe.layout,T,ye,null,Vt.setLayoutProperty),Nt(ke.paint,xe.paint,T,ye,null,Vt.setPaintProperty),Yt(ke.filter,xe.filter)||T.push({command:Vt.setFilter,args:[ye,xe.filter]}),Yt(ke.minzoom,xe.minzoom)&&Yt(ke.maxzoom,xe.maxzoom)||T.push({command:Vt.setLayerZoomRange,args:[ye,xe.minzoom,xe.maxzoom]}),ke)Object.prototype.hasOwnProperty.call(ke,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Nt(ke[Be],xe[Be],T,ye,Be.slice(6),Vt.setPaintProperty):Yt(ke[Be],xe[Be])||T.push({command:Vt.setLayerProperty,args:[ye,Be,xe[Be]]}));for(Be in xe)Object.prototype.hasOwnProperty.call(xe,Be)&&!Object.prototype.hasOwnProperty.call(ke,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Nt(ke[Be],xe[Be],T,ye,Be.slice(6),Vt.setPaintProperty):Yt(ke[Be],xe[Be])||T.push({command:Vt.setLayerProperty,args:[ye,Be,xe[Be]]}))}else T.push({command:Vt.removeLayer,args:[ye]}),Ie=X[X.lastIndexOf(ye)+1],T.push({command:Vt.addLayer,args:[xe,Ie]})}(v,r.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:Vt.setStyle,args:[r]}]}return s},l.aF=function(o){const r=[],s=o.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},l.aG=function o(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(let d=0;d<r.length;d++)if(!o(r[d],s[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(const d in r)if(!o(r[d],s[d]))return!1;return!0}return r===s},l.aH=be,l.aI=ze,l.aJ=zl,l.aK=function(o){return o({pluginStatus:Ti,pluginURL:$a}),zl.on("pluginStateChange",o),o},l.aL=class extends ss{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.aM=Fc,l.aN=class extends ss{constructor(o,r){super(o,r),this.current=Xy}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.aO=Mf,l.aP=class extends ss{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.aQ=class extends ss{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.aR=Df,l.aS=function(o,r,s,d,f,v,x){var w=1/(r-s),T=1/(d-f),E=1/(v-x);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*T,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*E,o[11]=0,o[12]=(r+s)*w,o[13]=(f+d)*T,o[14]=(x+v)*E,o[15]=1,o},l.aT=zr,l.aU=XE,l.aV=class extends p{},l.aW=Hz,l.aX=class extends _{},l.aY=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.aZ=nb,l.a_=rt,l.aa=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,f,v)=>{const x=f||v;return r[d]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r},l.ab=function(o,r){const s=[];for(const d in o)d in r||s.push(d);return s},l.ac=function(o){if(Ne==null){const r=o.navigator?o.navigator.userAgent:null;Ne=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ne},l.ad=ee,l.ae=function(o,r,s){var d=Math.sin(s),f=Math.cos(s),v=r[0],x=r[1],w=r[2],T=r[3],E=r[4],R=r[5],j=r[6],G=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=v*f+E*d,o[1]=x*f+R*d,o[2]=w*f+j*d,o[3]=T*f+G*d,o[4]=E*f-v*d,o[5]=R*f-x*d,o[6]=j*f-w*d,o[7]=G*f-T*d,o},l.af=function(o){var r=new jc(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},l.ag=Bf,l.ah=function(o,r){let s=0,d=0;if(o.kind==="constant")d=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=o,w=f?ee(Wi.interpolationFactor(f,r,v,x),0,1):0;o.kind==="camera"?d=Hi.number(o.minSize,o.maxSize,w):s=w}return{uSizeT:s,uSize:d}},l.aj=function(o,{uSize:r,uSizeT:s},{lowerSize:d,upperSize:f}){return o.kind==="source"?d/Oa:o.kind==="composite"?Hi.number(d/Oa,f/Oa,s):r},l.ak=wv,l.al=function(o,r,s,d){const f=r.y-o.y,v=r.x-o.x,x=d.y-s.y,w=d.x-s.x,T=x*v-w*f;if(T===0)return null;const E=(w*(o.y-s.y)-x*(o.x-s.x))/T;return new D(o.x+E*v,o.y+E*f)},l.am=ow,l.an=G1,l.ao=tv,l.ap=Nn,l.ar=bv,l.as=function(o,r){var s=r[0],d=r[1],f=r[2],v=r[3],x=r[4],w=r[5],T=r[6],E=r[7],R=r[8],j=r[9],G=r[10],X=r[11],Y=r[12],se=r[13],me=r[14],ye=r[15],ke=s*w-d*x,xe=s*T-f*x,Ie=s*E-v*x,Be=d*T-f*w,qe=d*E-v*w,_t=f*E-v*T,Lt=R*se-j*Y,gt=R*me-G*Y,pt=R*ye-X*Y,at=j*me-G*se,Pt=j*ye-X*se,ut=G*ye-X*me,et=ke*ut-xe*Pt+Ie*at+Be*pt-qe*gt+_t*Lt;return et?(o[0]=(w*ut-T*Pt+E*at)*(et=1/et),o[1]=(f*Pt-d*ut-v*at)*et,o[2]=(se*_t-me*qe+ye*Be)*et,o[3]=(G*qe-j*_t-X*Be)*et,o[4]=(T*pt-x*ut-E*gt)*et,o[5]=(s*ut-f*pt+v*gt)*et,o[6]=(me*Ie-Y*_t-ye*xe)*et,o[7]=(R*_t-G*Ie+X*xe)*et,o[8]=(x*Pt-w*pt+E*Lt)*et,o[9]=(d*pt-s*Pt-v*Lt)*et,o[10]=(Y*qe-se*Ie+ye*ke)*et,o[11]=(j*Ie-R*qe-X*ke)*et,o[12]=(w*gt-x*at-T*Lt)*et,o[13]=(s*at-d*gt+f*Lt)*et,o[14]=(se*xe-Y*Be-me*ke)*et,o[15]=(R*Be-j*xe+G*ke)*et,o):null},l.at=zv,l.au=xv,l.av=Av,l.aw=function(){const o={},r=$e.$version;for(const s in $e.$root){const d=$e.$root[s];if(d.required){let f=null;f=s==="version"?r:d.type==="array"?[]:{},f!=null&&(o[s]=f)}}return o},l.ax=Vt,l.ay=Sf,l.az=st,l.b=function(o,r){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(d=>{r(null,d)}).catch(d=>{r(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=Qn,l.b1=function(o,r){var s=o[0],d=o[1],f=o[2],v=o[3],x=o[4],w=o[5],T=o[6],E=o[7],R=o[8],j=o[9],G=o[10],X=o[11],Y=o[12],se=o[13],me=o[14],ye=o[15],ke=r[0],xe=r[1],Ie=r[2],Be=r[3],qe=r[4],_t=r[5],Lt=r[6],gt=r[7],pt=r[8],at=r[9],Pt=r[10],ut=r[11],et=r[12],qt=r[13],Ot=r[14],fr=r[15];return Math.abs(s-ke)<=Pi*Math.max(1,Math.abs(s),Math.abs(ke))&&Math.abs(d-xe)<=Pi*Math.max(1,Math.abs(d),Math.abs(xe))&&Math.abs(f-Ie)<=Pi*Math.max(1,Math.abs(f),Math.abs(Ie))&&Math.abs(v-Be)<=Pi*Math.max(1,Math.abs(v),Math.abs(Be))&&Math.abs(x-qe)<=Pi*Math.max(1,Math.abs(x),Math.abs(qe))&&Math.abs(w-_t)<=Pi*Math.max(1,Math.abs(w),Math.abs(_t))&&Math.abs(T-Lt)<=Pi*Math.max(1,Math.abs(T),Math.abs(Lt))&&Math.abs(E-gt)<=Pi*Math.max(1,Math.abs(E),Math.abs(gt))&&Math.abs(R-pt)<=Pi*Math.max(1,Math.abs(R),Math.abs(pt))&&Math.abs(j-at)<=Pi*Math.max(1,Math.abs(j),Math.abs(at))&&Math.abs(G-Pt)<=Pi*Math.max(1,Math.abs(G),Math.abs(Pt))&&Math.abs(X-ut)<=Pi*Math.max(1,Math.abs(X),Math.abs(ut))&&Math.abs(Y-et)<=Pi*Math.max(1,Math.abs(Y),Math.abs(et))&&Math.abs(se-qt)<=Pi*Math.max(1,Math.abs(se),Math.abs(qt))&&Math.abs(me-Ot)<=Pi*Math.max(1,Math.abs(me),Math.abs(Ot))&&Math.abs(ye-fr)<=Pi*Math.max(1,Math.abs(ye),Math.abs(fr))},l.b2=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},l.b3=function(o,r,s){return o[0]=r[0]*s[0],o[1]=r[1]*s[1],o[2]=r[2]*s[2],o[3]=r[3]*s[3],o},l.b4=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]*r[3]},l.b5=re,l.b6=Yb,l.b7=Kb,l.b8=function(o,r,s,d,f){var v,x=1/Math.tan(r/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,f!=null&&f!==1/0?(o[10]=(f+d)*(v=1/(d-f)),o[14]=2*f*d*v):(o[10]=-1,o[14]=-2*d),o},l.b9=function(o,r,s){var d=Math.sin(s),f=Math.cos(s),v=r[4],x=r[5],w=r[6],T=r[7],E=r[8],R=r[9],j=r[10],G=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=v*f+E*d,o[5]=x*f+R*d,o[6]=w*f+j*d,o[7]=T*f+G*d,o[8]=E*f-v*d,o[9]=R*f-x*d,o[10]=j*f-w*d,o[11]=G*f-T*d,o},l.bA=P,l.bB=Cb,l.bC=Pc,l.bD=qi,l.ba=ie,l.bb=te,l.bc=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.bd=class extends Dl{},l.be=Tv,l.bf=Xb,l.bg=TA,l.bi=We,l.bj=function(o,r,s=!1){if(Ti===Ed||Ti===zd||Ti===Ad)throw new Error("setRTLTextPlugin cannot be called multiple times.");$a=tr.resolveURL(o),Ti=Ed,Md=r,Dd(),s||If()},l.bk=Rd,l.bl=function(o,r){const s={};for(let f=0;f<o.length;f++){const v=r&&r[o[f].id]||Mc(o[f]);r&&(r[o[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[f])}const d=[];for(const f in s)d.push(s[f]);return d},l.bm=It,l.bn=ew,l.bo=rw,l.bp=Db,l.bq=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=En/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],s=r.layout,d=r._unevaluatedLayout._values,f={layoutIconSize:d["icon-size"].possiblyEvaluate(new Xr(o.bucket.zoom+1),o.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Xr(o.bucket.zoom+1),o.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Xr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:R}=o.bucket.textSizeData;f.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Xr(E),o.canonical),d["text-size"].possiblyEvaluate(new Xr(R),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:R}=o.bucket.iconSizeData;f.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Xr(E),o.canonical),d["icon-size"].possiblyEvaluate(new Xr(R),o.canonical)]}const v=s.get("text-line-height")*Nn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),T=s.get("text-size");for(const E of o.bucket.features){const R=s.get("text-font").evaluate(E,{},o.canonical).join(","),j=T.evaluate(E,{},o.canonical),G=f.layoutTextSize.evaluate(E,{},o.canonical),X=f.layoutIconSize.evaluate(E,{},o.canonical),Y={horizontal:{},vertical:void 0},se=E.text;let me,ye=[0,0];if(se){const Ie=se.toString(),Be=s.get("text-letter-spacing").evaluate(E,{},o.canonical)*Nn,qe=Id(Ie)?Be:0,_t=s.get("text-anchor").evaluate(E,{},o.canonical),Lt=fw(r,E,o.canonical);if(!Lt){const ut=s.get("text-radial-offset").evaluate(E,{},o.canonical);ye=ut?pw(_t,[ut*Nn,Ev]):s.get("text-offset").evaluate(E,{},o.canonical).map(et=>et*Nn)}let gt=x?"center":s.get("text-justify").evaluate(E,{},o.canonical);const pt=s.get("symbol-placement"),at=pt==="point"?s.get("text-max-width").evaluate(E,{},o.canonical)*Nn:0,Pt=()=>{o.bucket.allowVerticalPlacement&&Td(Ie)&&(Y.vertical=Hf(se,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,v,_t,"left",qe,ye,l.ai.vertical,!0,pt,G,j))};if(!x&&Lt){const ut=new Set;if(gt==="auto")for(let qt=0;qt<Lt.values.length;qt+=2)ut.add(zv(Lt.values[qt]));else ut.add(gt);let et=!1;for(const qt of ut)if(!Y.horizontal[qt])if(et)Y.horizontal[qt]=Y.horizontal[0];else{const Ot=Hf(se,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,v,"center",qt,qe,ye,l.ai.horizontal,!1,pt,G,j);Ot&&(Y.horizontal[qt]=Ot,et=Ot.positionedLines.length===1)}Pt()}else{gt==="auto"&&(gt=zv(_t));const ut=Hf(se,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,v,_t,gt,qe,ye,l.ai.horizontal,!1,pt,G,j);ut&&(Y.horizontal[gt]=ut),Pt(),Td(Ie)&&x&&w&&(Y.vertical=Hf(se,o.glyphMap,o.glyphPositions,o.imagePositions,R,at,v,_t,gt,qe,ye,l.ai.vertical,!1,pt,G,j))}}let ke=!1;if(E.icon&&E.icon.name){const Ie=o.imageMap[E.icon.name];Ie&&(me=sA(o.imagePositions[E.icon.name],s.get("icon-offset").evaluate(E,{},o.canonical),s.get("icon-anchor").evaluate(E,{},o.canonical)),ke=!!Ie.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=ke:o.bucket.sdfIcons!==ke&&Ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ie.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const xe=gw(Y.horizontal)||Y.vertical;o.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||me)&&CA(o.bucket,E,Y,me,o.imageMap,f,G,X,ye,ke,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.br=fv,l.bs=dv,l.bt=pv,l.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.bv=gv,l.bw=Ns,l.bx=function(o,r,s,d,f){return b(this,void 0,void 0,function*(){if(N())try{return yield ft(o,r,s,d,f)}catch{}return function(v,x,w,T,E){const R=v.width,j=v.height;it&&Et||(it=new OffscreenCanvas(R,j),Et=it.getContext("2d",{willReadFrequently:!0})),it.width=R,it.height=j,Et.drawImage(v,0,0,R,j);const G=Et.getImageData(x,w,T,E);return Et.clearRect(0,0,R,j),G.data}(o,r,s,d,f)})},l.by=Qb,l.bz=C,l.c=nt,l.d=function(o,r){const s=new Image;s.onload=()=>{r(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=ct})},s.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(d):ct},l.e=fe,l.f=function(o,r){return Wt(fe(o,{type:"json"}),r)},l.g=bt,l.h=tr,l.i=Ue,l.j=Gt,l.k=or,l.l=Er,l.m=Wt,l.n=function(o){return new gv(o).readFields(tA,[])},l.o=function(o,r,s){if(!o.length)return s(null,[]);let d=o.length;const f=new Array(o.length);let v=null;o.forEach((x,w)=>{r(x,(T,E)=>{T&&(v=T),f[w]=E,--d==0&&s(v,f)})})},l.p=Mb,l.q=qd,l.r=wn,l.s=Tr,l.t=Gy,l.u=vt,l.v=$e,l.w=Ye,l.x=Lc,l.y=ua,l.z=function([o,r,s]){return r+=90,r*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(s),y:o*Math.sin(r)*Math.sin(s),z:o*Math.cos(s)}}}),h(["./shared"],function(l){class b{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,F){for(const ne of M){this._layerConfigs[ne.id]=ne;const oe=this._layers[ne.id]=l.aC(ne);oe._featureFilter=l.a6(oe.filter),this.keyCache[ne.id]&&delete this.keyCache[ne.id]}for(const ne of F)delete this.keyCache[ne],delete this._layerConfigs[ne],delete this._layers[ne];this.familiesBySource={};const q=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const ne of q){const oe=ne.map(Oe=>this._layers[Oe.id]),ve=oe[0];if(ve.visibility==="none")continue;const he=ve.source||"";let ue=this.familiesBySource[he];ue||(ue=this.familiesBySource[he]={});const _e=ve.sourceLayer||"_geojsonTileLayer";let Ae=ue[_e];Ae||(Ae=ue[_e]=[]),Ae.push(oe)}}}class C{constructor(M){const F={},q=[];for(const he in M){const ue=M[he],_e=F[he]={};for(const Ae in ue){const Oe=ue[+Ae];if(!Oe||Oe.bitmap.width===0||Oe.bitmap.height===0)continue;const He={x:0,y:0,w:Oe.bitmap.width+2,h:Oe.bitmap.height+2};q.push(He),_e[Ae]={rect:He,metrics:Oe.metrics}}}const{w:ne,h:oe}=l.p(q),ve=new l.q({width:ne||1,height:oe||1});for(const he in M){const ue=M[he];for(const _e in ue){const Ae=ue[+_e];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Oe=F[he][_e].rect;l.q.copy(Ae.bitmap,ve,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},Ae.bitmap)}}this.image=ve,this.positions=F}}l.bm("GlyphAtlas",C);class P{constructor(M){this.tileID=new l.O(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(M,F,q,ne,oe){this.status="parsing",this.data=M,this.collisionBoxArray=new l.a3;const ve=new l.bn(Object.keys(M.layers).sort()),he=new l.bo(this.tileID,this.promoteId);he.bucketLayerIDs=[];const ue={},_e={featureIndex:he,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},Ae=F.familiesBySource[this.source];for(const dt in Ae){const kt=M.layers[dt];if(!kt)continue;kt.version===1&&l.w(`Vector tile source "${this.source}" layer "${dt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const dr=ve.encode(dt),er=[];for(let br=0;br<kt.length;br++){const rr=kt.feature(br),hr=he.getId(rr,dt);er.push({feature:rr,id:hr,index:br,sourceLayerIndex:dr})}for(const br of Ae[dt]){const rr=br[0];rr.source!==this.source&&l.w(`layer.source = ${rr.source} does not equal this.source = ${this.source}`),rr.minzoom&&this.zoom<Math.floor(rr.minzoom)||rr.maxzoom&&this.zoom>=rr.maxzoom||rr.visibility!=="none"&&(A(br,this.zoom,q),(ue[rr.id]=rr.createBucket({index:he.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:dr,sourceID:this.source})).populate(er,_e,this.tileID.canonical),he.bucketLayerIDs.push(br.map(hr=>hr.id)))}}let Oe,He,Ct,Tt;const yt=l.aH(_e.glyphDependencies,dt=>Object.keys(dt).map(Number));this.inFlightDependencies.forEach(dt=>dt==null?void 0:dt.cancel()),this.inFlightDependencies=[];const Dt=++this.dependencySentinel;Object.keys(yt).length?this.inFlightDependencies.push(ne.send("getGlyphs",{uid:this.uid,stacks:yt,source:this.source,tileID:this.tileID,type:"glyphs"},(dt,kt)=>{Dt===this.dependencySentinel&&(Oe||(Oe=dt,He=kt,tt.call(this)))})):He={};const Me=Object.keys(_e.iconDependencies);Me.length?this.inFlightDependencies.push(ne.send("getImages",{icons:Me,source:this.source,tileID:this.tileID,type:"icons"},(dt,kt)=>{Dt===this.dependencySentinel&&(Oe||(Oe=dt,Ct=kt,tt.call(this)))})):Ct={};const De=Object.keys(_e.patternDependencies);function tt(){if(Oe)return oe(Oe);if(He&&Ct&&Tt){const dt=new C(He),kt=new l.bp(Ct,Tt);for(const dr in ue){const er=ue[dr];er instanceof l.a4?(A(er.layers,this.zoom,q),l.bq({bucket:er,glyphMap:He,glyphPositions:dt.positions,imageMap:Ct,imagePositions:kt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):er.hasPattern&&(er instanceof l.br||er instanceof l.bs||er instanceof l.bt)&&(A(er.layers,this.zoom,q),er.addFeatures(_e,this.tileID.canonical,kt.patternPositions))}this.status="done",oe(null,{buckets:Object.values(ue).filter(dr=>!dr.isEmpty()),featureIndex:he,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dt.image,imageAtlas:kt,glyphMap:this.returnDependencies?He:null,iconMap:this.returnDependencies?Ct:null,glyphPositions:this.returnDependencies?dt.positions:null})}}De.length?this.inFlightDependencies.push(ne.send("getImages",{icons:De,source:this.source,tileID:this.tileID,type:"patterns"},(dt,kt)=>{Dt===this.dependencySentinel&&(Oe||(Oe=dt,Tt=kt,tt.call(this)))})):Tt={},tt.call(this)}}function A(H,M,F){const q=new l.a8(M);for(const ne of H)ne.recalculate(q,F)}function D(H,M){const F=l.l(H.request,(q,ne,oe,ve)=>{if(q)M(q);else if(ne)try{const he=new l.bw.VectorTile(new l.bv(ne));M(null,{vectorTile:he,rawData:ne,cacheControl:oe,expires:ve})}catch(he){const ue=new Uint8Array(ne);let _e=`Unable to parse the tile at ${H.request.url}, `;_e+=ue[0]===31&&ue[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${he.messge}`,M(new Error(_e))}});return()=>{F.cancel(),M()}}class W{constructor(M,F,q,ne){this.actor=M,this.layerIndex=F,this.availableImages=q,this.loadVectorData=ne||D,this.fetching={},this.loading={},this.loaded={}}loadTile(M,F){const q=M.uid;this.loading||(this.loading={});const ne=!!(M&&M.request&&M.request.collectResourceTiming)&&new l.bu(M.request),oe=this.loading[q]=new P(M);oe.abort=this.loadVectorData(M,(ve,he)=>{if(delete this.loading[q],ve||!he)return oe.status="done",this.loaded[q]=oe,F(ve);const ue=he.rawData,_e={};he.expires&&(_e.expires=he.expires),he.cacheControl&&(_e.cacheControl=he.cacheControl);const Ae={};if(ne){const Oe=ne.finish();Oe&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Oe)))}oe.vectorTile=he.vectorTile,oe.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor,(Oe,He)=>{if(delete this.fetching[q],Oe||!He)return F(Oe);F(null,l.e({rawTileData:ue.slice(0)},He,_e,Ae))}),this.loaded=this.loaded||{},this.loaded[q]=oe,this.fetching[q]={rawTileData:ue,cacheControl:_e,resourceTiming:Ae}})}reloadTile(M,F){const q=this.loaded,ne=M.uid;if(q&&q[ne]){const oe=q[ne];oe.showCollisionBoxes=M.showCollisionBoxes,oe.status==="parsing"?oe.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ve,he)=>{if(ve||!he)return F(ve,he);let ue;if(this.fetching[ne]){const{rawTileData:_e,cacheControl:Ae,resourceTiming:Oe}=this.fetching[ne];delete this.fetching[ne],ue=l.e({rawTileData:_e.slice(0)},he,Ae,Oe)}else ue=he;F(null,ue)}):oe.status==="done"&&(oe.vectorTile?oe.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor,F):F())}}abortTile(M,F){const q=this.loading,ne=M.uid;q&&q[ne]&&q[ne].abort&&(q[ne].abort(),delete q[ne]),F()}removeTile(M,F){const q=this.loaded,ne=M.uid;q&&q[ne]&&delete q[ne],F()}}class Z{constructor(){this.loaded={}}loadTile(M,F){return l._(this,void 0,void 0,function*(){const{uid:q,encoding:ne,rawImageData:oe,redFactor:ve,greenFactor:he,blueFactor:ue,baseShift:_e}=M,Ae=oe.width+2,Oe=oe.height+2,He=l.a(oe)?new l.R({width:Ae,height:Oe},yield l.bx(oe,-1,-1,Ae,Oe)):oe,Ct=new l.by(q,He,ne,ve,he,ue,_e);this.loaded=this.loaded||{},this.loaded[q]=Ct,F(null,Ct)})}removeTile(M){const F=this.loaded,q=M.uid;F&&F[q]&&delete F[q]}}function U(H,M){if(H.length!==0){J(H[0],M);for(var F=1;F<H.length;F++)J(H[F],!M)}}function J(H,M){for(var F=0,q=0,ne=0,oe=H.length,ve=oe-1;ne<oe;ve=ne++){var he=(H[ne][0]-H[ve][0])*(H[ve][1]+H[ne][1]),ue=F+he;q+=Math.abs(F)>=Math.abs(he)?F-ue+he:he-ue+F,F=ue}F+q>=0!=!!M&&H.reverse()}var O=l.bz(function H(M,F){var q,ne=M&&M.type;if(ne==="FeatureCollection")for(q=0;q<M.features.length;q++)H(M.features[q],F);else if(ne==="GeometryCollection")for(q=0;q<M.geometries.length;q++)H(M.geometries[q],F);else if(ne==="Feature")H(M.geometry,F);else if(ne==="Polygon")U(M.coordinates,F);else if(ne==="MultiPolygon")for(q=0;q<M.coordinates.length;q++)U(M.coordinates[q],F);return M});const $=l.bw.VectorTileFeature.prototype.toGeoJSON;var N={exports:{}},ie=l.bA,te=l.bw.VectorTileFeature,ee=re;function re(H,M){this.options=M||{},this.features=H,this.length=H.length}function fe(H,M){this.id=typeof H.id=="number"?H.id:void 0,this.type=H.type,this.rawGeometry=H.type===1?[H.geometry]:H.geometry,this.properties=H.tags,this.extent=M||4096}re.prototype.feature=function(H){return new fe(this.features[H],this.options.extent)},fe.prototype.loadGeometry=function(){var H=this.rawGeometry;this.geometry=[];for(var M=0;M<H.length;M++){for(var F=H[M],q=[],ne=0;ne<F.length;ne++)q.push(new ie(F[ne][0],F[ne][1]));this.geometry.push(q)}return this.geometry},fe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var H=this.geometry,M=1/0,F=-1/0,q=1/0,ne=-1/0,oe=0;oe<H.length;oe++)for(var ve=H[oe],he=0;he<ve.length;he++){var ue=ve[he];M=Math.min(M,ue.x),F=Math.max(F,ue.x),q=Math.min(q,ue.y),ne=Math.max(ne,ue.y)}return[M,q,F,ne]},fe.prototype.toGeoJSON=te.prototype.toGeoJSON;var Te=l.bB,be=ee;function ze(H){var M=new Te;return function(F,q){for(var ne in F.layers)q.writeMessage(3,Ee,F.layers[ne])}(H,M),M.finish()}function Ee(H,M){var F;M.writeVarintField(15,H.version||1),M.writeStringField(1,H.name||""),M.writeVarintField(5,H.extent||4096);var q={keys:[],values:[],keycache:{},valuecache:{}};for(F=0;F<H.length;F++)q.feature=H.feature(F),M.writeMessage(2,Fe,q);var ne=q.keys;for(F=0;F<ne.length;F++)M.writeStringField(3,ne[F]);var oe=q.values;for(F=0;F<oe.length;F++)M.writeMessage(4,Ne,oe[F])}function Fe(H,M){var F=H.feature;F.id!==void 0&&M.writeVarintField(1,F.id),M.writeMessage(2,Ye,H),M.writeVarintField(3,F.type),M.writeMessage(4,Ue,F)}function Ye(H,M){var F=H.feature,q=H.keys,ne=H.values,oe=H.keycache,ve=H.valuecache;for(var he in F.properties){var ue=F.properties[he],_e=oe[he];if(ue!==null){_e===void 0&&(q.push(he),oe[he]=_e=q.length-1),M.writeVarint(_e);var Ae=typeof ue;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(ue=JSON.stringify(ue));var Oe=Ae+":"+ue,He=ve[Oe];He===void 0&&(ne.push(ue),ve[Oe]=He=ne.length-1),M.writeVarint(He)}}}function Ke(H,M){return(M<<3)+(7&H)}function Re(H){return H<<1^H>>31}function Ue(H,M){for(var F=H.loadGeometry(),q=H.type,ne=0,oe=0,ve=F.length,he=0;he<ve;he++){var ue=F[he],_e=1;q===1&&(_e=ue.length),M.writeVarint(Ke(1,_e));for(var Ae=q===3?ue.length-1:ue.length,Oe=0;Oe<Ae;Oe++){Oe===1&&q!==1&&M.writeVarint(Ke(2,Ae-1));var He=ue[Oe].x-ne,Ct=ue[Oe].y-oe;M.writeVarint(Re(He)),M.writeVarint(Re(Ct)),ne+=He,oe+=Ct}q===3&&M.writeVarint(Ke(7,1))}}function Ne(H,M){var F=typeof H;F==="string"?M.writeStringField(1,H):F==="boolean"?M.writeBooleanField(7,H):F==="number"&&(H%1!=0?M.writeDoubleField(3,H):H<0?M.writeSVarintField(6,H):M.writeVarintField(5,H))}N.exports=ze,N.exports.fromVectorTileJs=ze,N.exports.fromGeojsonVt=function(H,M){M=M||{};var F={};for(var q in H)F[q]=new be(H[q].features,M),F[q].name=q,F[q].version=M.version,F[q].extent=M.extent;return ze({layers:F})},N.exports.GeoJSONWrapper=be;var Xe=l.bz(N.exports);const ct={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:H=>H},ft=Math.fround||(it=new Float32Array(1),H=>(it[0]=+H,it[0]));var it;const Et=3,mt=5,zt=6;class tr{constructor(M){this.options=Object.assign(Object.create(ct),M),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(M){const{log:F,minZoom:q,maxZoom:ne}=this.options;F&&console.time("total time");const oe=`prepare ${M.length} points`;F&&console.time(oe),this.points=M;const ve=[];for(let ue=0;ue<M.length;ue++){const _e=M[ue];if(!_e.geometry)continue;const[Ae,Oe]=_e.geometry.coordinates,He=ft(st(Ae)),Ct=ft(bt(Oe));ve.push(He,Ct,1/0,ue,-1,1),this.options.reduce&&ve.push(0)}let he=this.trees[ne+1]=this._createTree(ve);F&&console.timeEnd(oe);for(let ue=ne;ue>=q;ue--){const _e=+Date.now();he=this.trees[ue]=this._createTree(this._cluster(he,ue)),F&&console.log("z%d: %d clusters in %dms",ue,he.numItems,+Date.now()-_e)}return F&&console.timeEnd("total time"),this}getClusters(M,F){let q=((M[0]+180)%360+360)%360-180;const ne=Math.max(-90,Math.min(90,M[1]));let oe=M[2]===180?180:((M[2]+180)%360+360)%360-180;const ve=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)q=-180,oe=180;else if(q>oe){const Oe=this.getClusters([q,ne,180,ve],F),He=this.getClusters([-180,ne,oe,ve],F);return Oe.concat(He)}const he=this.trees[this._limitZoom(F)],ue=he.range(st(q),bt(ve),st(oe),bt(ne)),_e=he.data,Ae=[];for(const Oe of ue){const He=this.stride*Oe;Ae.push(_e[He+mt]>1?nt(_e,He,this.clusterProps):this.points[_e[He+Et]])}return Ae}getChildren(M){const F=this._getOriginId(M),q=this._getOriginZoom(M),ne="No cluster with the specified id.",oe=this.trees[q];if(!oe)throw new Error(ne);const ve=oe.data;if(F*this.stride>=ve.length)throw new Error(ne);const he=this.options.radius/(this.options.extent*Math.pow(2,q-1)),ue=oe.within(ve[F*this.stride],ve[F*this.stride+1],he),_e=[];for(const Ae of ue){const Oe=Ae*this.stride;ve[Oe+4]===M&&_e.push(ve[Oe+mt]>1?nt(ve,Oe,this.clusterProps):this.points[ve[Oe+Et]])}if(_e.length===0)throw new Error(ne);return _e}getLeaves(M,F,q){const ne=[];return this._appendLeaves(ne,M,F=F||10,q=q||0,0),ne}getTile(M,F,q){const ne=this.trees[this._limitZoom(M)],oe=Math.pow(2,M),{extent:ve,radius:he}=this.options,ue=he/ve,_e=(q-ue)/oe,Ae=(q+1+ue)/oe,Oe={features:[]};return this._addTileFeatures(ne.range((F-ue)/oe,_e,(F+1+ue)/oe,Ae),ne.data,F,q,oe,Oe),F===0&&this._addTileFeatures(ne.range(1-ue/oe,_e,1,Ae),ne.data,oe,q,oe,Oe),F===oe-1&&this._addTileFeatures(ne.range(0,_e,ue/oe,Ae),ne.data,-1,q,oe,Oe),Oe.features.length?Oe:null}getClusterExpansionZoom(M){let F=this._getOriginZoom(M)-1;for(;F<=this.options.maxZoom;){const q=this.getChildren(M);if(F++,q.length!==1)break;M=q[0].properties.cluster_id}return F}_appendLeaves(M,F,q,ne,oe){const ve=this.getChildren(F);for(const he of ve){const ue=he.properties;if(ue&&ue.cluster?oe+ue.point_count<=ne?oe+=ue.point_count:oe=this._appendLeaves(M,ue.cluster_id,q,ne,oe):oe<ne?oe++:M.push(he),M.length===q)break}return oe}_createTree(M){const F=new l.av(M.length/this.stride|0,this.options.nodeSize,Float32Array);for(let q=0;q<M.length;q+=this.stride)F.add(M[q],M[q+1]);return F.finish(),F.data=M,F}_addTileFeatures(M,F,q,ne,oe,ve){for(const he of M){const ue=he*this.stride,_e=F[ue+mt]>1;let Ae,Oe,He;if(_e)Ae=We(F,ue,this.clusterProps),Oe=F[ue],He=F[ue+1];else{const yt=this.points[F[ue+Et]];Ae=yt.properties;const[Dt,Me]=yt.geometry.coordinates;Oe=st(Dt),He=bt(Me)}const Ct={type:1,geometry:[[Math.round(this.options.extent*(Oe*oe-q)),Math.round(this.options.extent*(He*oe-ne))]],tags:Ae};let Tt;Tt=_e||this.options.generateId?F[ue+Et]:this.points[F[ue+Et]].id,Tt!==void 0&&(Ct.id=Tt),ve.features.push(Ct)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(Math.floor(+M),this.options.maxZoom+1))}_cluster(M,F){const{radius:q,extent:ne,reduce:oe,minPoints:ve}=this.options,he=q/(ne*Math.pow(2,F)),ue=M.data,_e=[],Ae=this.stride;for(let Oe=0;Oe<ue.length;Oe+=Ae){if(ue[Oe+2]<=F)continue;ue[Oe+2]=F;const He=ue[Oe],Ct=ue[Oe+1],Tt=M.within(ue[Oe],ue[Oe+1],he),yt=ue[Oe+mt];let Dt=yt;for(const Me of Tt){const De=Me*Ae;ue[De+2]>F&&(Dt+=ue[De+mt])}if(Dt>yt&&Dt>=ve){let Me,De=He*yt,tt=Ct*yt,dt=-1;const kt=((Oe/Ae|0)<<5)+(F+1)+this.points.length;for(const dr of Tt){const er=dr*Ae;if(ue[er+2]<=F)continue;ue[er+2]=F;const br=ue[er+mt];De+=ue[er]*br,tt+=ue[er+1]*br,ue[er+4]=kt,oe&&(Me||(Me=this._map(ue,Oe,!0),dt=this.clusterProps.length,this.clusterProps.push(Me)),oe(Me,this._map(ue,er)))}ue[Oe+4]=kt,_e.push(De/Dt,tt/Dt,1/0,kt,-1,Dt),oe&&_e.push(dt)}else{for(let Me=0;Me<Ae;Me++)_e.push(ue[Oe+Me]);if(Dt>1)for(const Me of Tt){const De=Me*Ae;if(!(ue[De+2]<=F)){ue[De+2]=F;for(let tt=0;tt<Ae;tt++)_e.push(ue[De+tt])}}}}return _e}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,F,q){if(M[F+mt]>1){const ve=this.clusterProps[M[F+zt]];return q?Object.assign({},ve):ve}const ne=this.points[M[F+Et]].properties,oe=this.options.map(ne);return q&&oe===ne?Object.assign({},oe):oe}}function nt(H,M,F){return{type:"Feature",id:H[M+Et],properties:We(H,M,F),geometry:{type:"Point",coordinates:[(q=H[M],360*(q-.5)),Ht(H[M+1])]}};var q}function We(H,M,F){const q=H[M+mt],ne=q>=1e4?`${Math.round(q/1e3)}k`:q>=1e3?Math.round(q/100)/10+"k":q,oe=H[M+zt],ve=oe===-1?{}:Object.assign({},F[oe]);return Object.assign(ve,{cluster:!0,cluster_id:H[M+Et],point_count:q,point_count_abbreviated:ne})}function st(H){return H/360+.5}function bt(H){const M=Math.sin(H*Math.PI/180),F=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return F<0?0:F>1?1:F}function Ht(H){const M=(180-360*H)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function Wt(H,M,F,q){for(var ne,oe=q,ve=F-M>>1,he=F-M,ue=H[M],_e=H[M+1],Ae=H[F],Oe=H[F+1],He=M+3;He<F;He+=3){var Ct=Er(H[He],H[He+1],ue,_e,Ae,Oe);if(Ct>oe)ne=He,oe=Ct;else if(Ct===oe){var Tt=Math.abs(He-ve);Tt<he&&(ne=He,he=Tt)}}oe>q&&(ne-M>3&&Wt(H,M,ne,q),H[ne+2]=oe,F-ne>3&&Wt(H,ne,F,q))}function Er(H,M,F,q,ne,oe){var ve=ne-F,he=oe-q;if(ve!==0||he!==0){var ue=((H-F)*ve+(M-q)*he)/(ve*ve+he*he);ue>1?(F=ne,q=oe):ue>0&&(F+=ve*ue,q+=he*ue)}return(ve=H-F)*ve+(he=M-q)*he}function Tr(H,M,F,q){var ne={id:H===void 0?null:H,type:M,geometry:F,tags:q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(oe){var ve=oe.geometry,he=oe.type;if(he==="Point"||he==="MultiPoint"||he==="LineString")$t(oe,ve);else if(he==="Polygon"||he==="MultiLineString")for(var ue=0;ue<ve.length;ue++)$t(oe,ve[ue]);else if(he==="MultiPolygon")for(ue=0;ue<ve.length;ue++)for(var _e=0;_e<ve[ue].length;_e++)$t(oe,ve[ue][_e])}(ne),ne}function $t(H,M){for(var F=0;F<M.length;F+=3)H.minX=Math.min(H.minX,M[F]),H.minY=Math.min(H.minY,M[F+1]),H.maxX=Math.max(H.maxX,M[F]),H.maxY=Math.max(H.maxY,M[F+1])}function wt(H,M,F,q){if(M.geometry){var ne=M.geometry.coordinates,oe=M.geometry.type,ve=Math.pow(F.tolerance/((1<<F.maxZoom)*F.extent),2),he=[],ue=M.id;if(F.promoteId?ue=M.properties[F.promoteId]:F.generateId&&(ue=q||0),oe==="Point")or(ne,he);else if(oe==="MultiPoint")for(var _e=0;_e<ne.length;_e++)or(ne[_e],he);else if(oe==="LineString")Gt(ne,he,ve,!1);else if(oe==="MultiLineString"){if(F.lineMetrics){for(_e=0;_e<ne.length;_e++)Gt(ne[_e],he=[],ve,!1),H.push(Tr(ue,"LineString",he,M.properties));return}Cr(ne,he,ve,!1)}else if(oe==="Polygon")Cr(ne,he,ve,!0);else{if(oe!=="MultiPolygon"){if(oe==="GeometryCollection"){for(_e=0;_e<M.geometry.geometries.length;_e++)wt(H,{id:ue,geometry:M.geometry.geometries[_e],properties:M.properties},F,q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<ne.length;_e++){var Ae=[];Cr(ne[_e],Ae,ve,!0),he.push(Ae)}}H.push(Tr(ue,oe,he,M.properties))}}function or(H,M){M.push($e(H[0])),M.push(pr(H[1])),M.push(0)}function Gt(H,M,F,q){for(var ne,oe,ve=0,he=0;he<H.length;he++){var ue=$e(H[he][0]),_e=pr(H[he][1]);M.push(ue),M.push(_e),M.push(0),he>0&&(ve+=q?(ne*_e-ue*oe)/2:Math.sqrt(Math.pow(ue-ne,2)+Math.pow(_e-oe,2))),ne=ue,oe=_e}var Ae=M.length-3;M[2]=1,Wt(M,0,Ae,F),M[Ae+2]=1,M.size=Math.abs(ve),M.start=0,M.end=M.size}function Cr(H,M,F,q){for(var ne=0;ne<H.length;ne++){var oe=[];Gt(H[ne],oe,F,q),M.push(oe)}}function $e(H){return H/360+.5}function pr(H){var M=Math.sin(H*Math.PI/180),F=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return F<0?0:F>1?1:F}function sr(H,M,F,q,ne,oe,ve,he){if(q/=M,oe>=(F/=M)&&ve<q)return H;if(ve<F||oe>=q)return null;for(var ue=[],_e=0;_e<H.length;_e++){var Ae=H[_e],Oe=Ae.geometry,He=Ae.type,Ct=ne===0?Ae.minX:Ae.minY,Tt=ne===0?Ae.maxX:Ae.maxY;if(Ct>=F&&Tt<q)ue.push(Ae);else if(!(Tt<F||Ct>=q)){var yt=[];if(He==="Point"||He==="MultiPoint")Yt(Oe,yt,F,q,ne);else if(He==="LineString")Vt(Oe,yt,F,q,ne,!1,he.lineMetrics);else if(He==="MultiLineString")Lr(Oe,yt,F,q,ne,!1);else if(He==="Polygon")Lr(Oe,yt,F,q,ne,!0);else if(He==="MultiPolygon")for(var Dt=0;Dt<Oe.length;Dt++){var Me=[];Lr(Oe[Dt],Me,F,q,ne,!0),Me.length&&yt.push(Me)}if(yt.length){if(he.lineMetrics&&He==="LineString"){for(Dt=0;Dt<yt.length;Dt++)ue.push(Tr(Ae.id,He,yt[Dt],Ae.tags));continue}He!=="LineString"&&He!=="MultiLineString"||(yt.length===1?(He="LineString",yt=yt[0]):He="MultiLineString"),He!=="Point"&&He!=="MultiPoint"||(He=yt.length===3?"Point":"MultiPoint"),ue.push(Tr(Ae.id,He,yt,Ae.tags))}}}return ue.length?ue:null}function Yt(H,M,F,q,ne){for(var oe=0;oe<H.length;oe+=3){var ve=H[oe+ne];ve>=F&&ve<=q&&(M.push(H[oe]),M.push(H[oe+1]),M.push(H[oe+2]))}}function Vt(H,M,F,q,ne,oe,ve){for(var he,ue,_e=kr(H),Ae=ne===0?Qt:Nt,Oe=H.start,He=0;He<H.length-3;He+=3){var Ct=H[He],Tt=H[He+1],yt=H[He+2],Dt=H[He+3],Me=H[He+4],De=ne===0?Ct:Tt,tt=ne===0?Dt:Me,dt=!1;ve&&(he=Math.sqrt(Math.pow(Ct-Dt,2)+Math.pow(Tt-Me,2))),De<F?tt>F&&(ue=Ae(_e,Ct,Tt,Dt,Me,F),ve&&(_e.start=Oe+he*ue)):De>q?tt<q&&(ue=Ae(_e,Ct,Tt,Dt,Me,q),ve&&(_e.start=Oe+he*ue)):cr(_e,Ct,Tt,yt),tt<F&&De>=F&&(ue=Ae(_e,Ct,Tt,Dt,Me,F),dt=!0),tt>q&&De<=q&&(ue=Ae(_e,Ct,Tt,Dt,Me,q),dt=!0),!oe&&dt&&(ve&&(_e.end=Oe+he*ue),M.push(_e),_e=kr(H)),ve&&(Oe+=he)}var kt=H.length-3;Ct=H[kt],Tt=H[kt+1],yt=H[kt+2],(De=ne===0?Ct:Tt)>=F&&De<=q&&cr(_e,Ct,Tt,yt),kt=_e.length-3,oe&&kt>=3&&(_e[kt]!==_e[0]||_e[kt+1]!==_e[1])&&cr(_e,_e[0],_e[1],_e[2]),_e.length&&M.push(_e)}function kr(H){var M=[];return M.size=H.size,M.start=H.start,M.end=H.end,M}function Lr(H,M,F,q,ne,oe){for(var ve=0;ve<H.length;ve++)Vt(H[ve],M,F,q,ne,oe,!1)}function cr(H,M,F,q){H.push(M),H.push(F),H.push(q)}function Qt(H,M,F,q,ne,oe){var ve=(oe-M)/(q-M);return H.push(oe),H.push(F+(ne-F)*ve),H.push(1),ve}function Nt(H,M,F,q,ne,oe){var ve=(oe-F)/(ne-F);return H.push(M+(q-M)*ve),H.push(oe),H.push(1),ve}function mr(H,M){for(var F=[],q=0;q<H.length;q++){var ne,oe=H[q],ve=oe.type;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")ne=Hr(oe.geometry,M);else if(ve==="MultiLineString"||ve==="Polygon"){ne=[];for(var he=0;he<oe.geometry.length;he++)ne.push(Hr(oe.geometry[he],M))}else if(ve==="MultiPolygon")for(ne=[],he=0;he<oe.geometry.length;he++){for(var ue=[],_e=0;_e<oe.geometry[he].length;_e++)ue.push(Hr(oe.geometry[he][_e],M));ne.push(ue)}F.push(Tr(oe.id,ve,ne,oe.tags))}return F}function Hr(H,M){var F=[];F.size=H.size,H.start!==void 0&&(F.start=H.start,F.end=H.end);for(var q=0;q<H.length;q+=3)F.push(H[q]+M,H[q+1],H[q+2]);return F}function Pe(H,M){if(H.transformed)return H;var F,q,ne,oe=1<<H.z,ve=H.x,he=H.y;for(F=0;F<H.features.length;F++){var ue=H.features[F],_e=ue.geometry,Ae=ue.type;if(ue.geometry=[],Ae===1)for(q=0;q<_e.length;q+=2)ue.geometry.push(ot(_e[q],_e[q+1],M,oe,ve,he));else for(q=0;q<_e.length;q++){var Oe=[];for(ne=0;ne<_e[q].length;ne+=2)Oe.push(ot(_e[q][ne],_e[q][ne+1],M,oe,ve,he));ue.geometry.push(Oe)}}return H.transformed=!0,H}function ot(H,M,F,q,ne,oe){return[Math.round(F*(H*q-ne)),Math.round(F*(M*q-oe))]}function St(H,M,F,q,ne){for(var oe=M===ne.maxZoom?0:ne.tolerance/((1<<M)*ne.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:F,y:q,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},he=0;he<H.length;he++){ve.numFeatures++,ir(ve,H[he],oe,ne);var ue=H[he].minX,_e=H[he].minY,Ae=H[he].maxX,Oe=H[he].maxY;ue<ve.minX&&(ve.minX=ue),_e<ve.minY&&(ve.minY=_e),Ae>ve.maxX&&(ve.maxX=Ae),Oe>ve.maxY&&(ve.maxY=Oe)}return ve}function ir(H,M,F,q){var ne=M.geometry,oe=M.type,ve=[];if(oe==="Point"||oe==="MultiPoint")for(var he=0;he<ne.length;he+=3)ve.push(ne[he]),ve.push(ne[he+1]),H.numPoints++,H.numSimplified++;else if(oe==="LineString")un(ve,ne,H,F,!1,!1);else if(oe==="MultiLineString"||oe==="Polygon")for(he=0;he<ne.length;he++)un(ve,ne[he],H,F,oe==="Polygon",he===0);else if(oe==="MultiPolygon")for(var ue=0;ue<ne.length;ue++){var _e=ne[ue];for(he=0;he<_e.length;he++)un(ve,_e[he],H,F,!0,he===0)}if(ve.length){var Ae=M.tags||null;if(oe==="LineString"&&q.lineMetrics){for(var Oe in Ae={},M.tags)Ae[Oe]=M.tags[Oe];Ae.mapbox_clip_start=ne.start/ne.size,Ae.mapbox_clip_end=ne.end/ne.size}var He={geometry:ve,type:oe==="Polygon"||oe==="MultiPolygon"?3:oe==="LineString"||oe==="MultiLineString"?2:1,tags:Ae};M.id!==null&&(He.id=M.id),H.features.push(He)}}function un(H,M,F,q,ne,oe){var ve=q*q;if(q>0&&M.size<(ne?ve:q))F.numPoints+=M.length/3;else{for(var he=[],ue=0;ue<M.length;ue+=3)(q===0||M[ue+2]>ve)&&(F.numSimplified++,he.push(M[ue]),he.push(M[ue+1])),F.numPoints++;ne&&function(_e,Ae){for(var Oe=0,He=0,Ct=_e.length,Tt=Ct-2;He<Ct;Tt=He,He+=2)Oe+=(_e[He]-_e[Tt])*(_e[He+1]+_e[Tt+1]);if(Oe>0===Ae)for(He=0,Ct=_e.length;He<Ct/2;He+=2){var yt=_e[He],Dt=_e[He+1];_e[He]=_e[Ct-2-He],_e[He+1]=_e[Ct-1-He],_e[Ct-2-He]=yt,_e[Ct-1-He]=Dt}}(he,oe),H.push(he)}}function Ze(H,M){var F=(M=this.options=function(ne,oe){for(var ve in oe)ne[ve]=oe[ve];return ne}(Object.create(this.options),M)).debug;if(F&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var q=function(ne,oe){var ve=[];if(ne.type==="FeatureCollection")for(var he=0;he<ne.features.length;he++)wt(ve,ne.features[he],oe,he);else wt(ve,ne.type==="Feature"?ne:{geometry:ne},oe);return ve}(H,M);this.tiles={},this.tileCoords=[],F&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),q=function(ne,oe){var ve=oe.buffer/oe.extent,he=ne,ue=sr(ne,1,-1-ve,ve,0,-1,2,oe),_e=sr(ne,1,1-ve,2+ve,0,-1,2,oe);return(ue||_e)&&(he=sr(ne,1,-ve,1+ve,0,-1,2,oe)||[],ue&&(he=mr(ue,1).concat(he)),_e&&(he=he.concat(mr(_e,-1)))),he}(q,M),q.length&&this.splitTile(q,0,0,0),F&&(q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Zt(H,M,F){return 32*((1<<H)*F+M)+H}function Mt(H,M){return M?H.properties[M]:H.id}function ur(H,M){if(H==null)return!0;if(H.type==="Feature")return Mt(H,M)!=null;if(H.type==="FeatureCollection"){const F=new Set;for(const q of H.features){const ne=Mt(q,M);if(ne==null||F.has(ne))return!1;F.add(ne)}return!0}return!1}function xr(H,M){const F=new Map;if(H!=null)if(H.type==="Feature")F.set(Mt(H,M),H);else for(const q of H.features)F.set(Mt(q,M),q);return F}Ze.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ze.prototype.splitTile=function(H,M,F,q,ne,oe,ve){for(var he=[H,M,F,q],ue=this.options,_e=ue.debug;he.length;){q=he.pop(),F=he.pop(),M=he.pop(),H=he.pop();var Ae=1<<M,Oe=Zt(M,F,q),He=this.tiles[Oe];if(!He&&(_e>1&&console.time("creation"),He=this.tiles[Oe]=St(H,M,F,q,ue),this.tileCoords.push({z:M,x:F,y:q}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,F,q,He.numFeatures,He.numPoints,He.numSimplified),console.timeEnd("creation"));var Ct="z"+M;this.stats[Ct]=(this.stats[Ct]||0)+1,this.total++}if(He.source=H,ne){if(M===ue.maxZoom||M===ne)continue;var Tt=1<<ne-M;if(F!==Math.floor(oe/Tt)||q!==Math.floor(ve/Tt))continue}else if(M===ue.indexMaxZoom||He.numPoints<=ue.indexMaxPoints)continue;if(He.source=null,H.length!==0){_e>1&&console.time("clipping");var yt,Dt,Me,De,tt,dt,kt=.5*ue.buffer/ue.extent,dr=.5-kt,er=.5+kt,br=1+kt;yt=Dt=Me=De=null,tt=sr(H,Ae,F-kt,F+er,0,He.minX,He.maxX,ue),dt=sr(H,Ae,F+dr,F+br,0,He.minX,He.maxX,ue),H=null,tt&&(yt=sr(tt,Ae,q-kt,q+er,1,He.minY,He.maxY,ue),Dt=sr(tt,Ae,q+dr,q+br,1,He.minY,He.maxY,ue),tt=null),dt&&(Me=sr(dt,Ae,q-kt,q+er,1,He.minY,He.maxY,ue),De=sr(dt,Ae,q+dr,q+br,1,He.minY,He.maxY,ue),dt=null),_e>1&&console.timeEnd("clipping"),he.push(yt||[],M+1,2*F,2*q),he.push(Dt||[],M+1,2*F,2*q+1),he.push(Me||[],M+1,2*F+1,2*q),he.push(De||[],M+1,2*F+1,2*q+1)}}},Ze.prototype.getTile=function(H,M,F){var q=this.options,ne=q.extent,oe=q.debug;if(H<0||H>24)return null;var ve=1<<H,he=Zt(H,M=(M%ve+ve)%ve,F);if(this.tiles[he])return Pe(this.tiles[he],ne);oe>1&&console.log("drilling down to z%d-%d-%d",H,M,F);for(var ue,_e=H,Ae=M,Oe=F;!ue&&_e>0;)_e--,Ae=Math.floor(Ae/2),Oe=Math.floor(Oe/2),ue=this.tiles[Zt(_e,Ae,Oe)];return ue&&ue.source?(oe>1&&console.log("found parent tile z%d-%d-%d",_e,Ae,Oe),oe>1&&console.time("drilling down"),this.splitTile(ue.source,_e,Ae,Oe,H,M,F),oe>1&&console.timeEnd("drilling down"),this.tiles[he]?Pe(this.tiles[he],ne):null):null};class At extends W{constructor(M,F,q,ne){super(M,F,q),this._dataUpdateable=new Map,this.loadGeoJSON=(oe,ve)=>{const{promoteId:he}=oe;if(oe.request)return l.f(oe.request,(ue,_e,Ae,Oe)=>{this._dataUpdateable=ur(_e,he)?xr(_e,he):void 0,ve(ue,_e,Ae,Oe)});if(typeof oe.data=="string")try{const ue=JSON.parse(oe.data);this._dataUpdateable=ur(ue,he)?xr(ue,he):void 0,ve(null,ue)}catch{ve(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`))}else oe.dataDiff?this._dataUpdateable?(function(ue,_e,Ae){var Oe,He,Ct,Tt;if(_e.removeAll&&ue.clear(),_e.remove)for(const yt of _e.remove)ue.delete(yt);if(_e.add)for(const yt of _e.add){const Dt=Mt(yt,Ae);Dt!=null&&ue.set(Dt,yt)}if(_e.update)for(const yt of _e.update){let Dt=ue.get(yt.id);if(Dt==null)continue;const Me=!yt.removeAllProperties&&(((Oe=yt.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0||((He=yt.addOrUpdateProperties)===null||He===void 0?void 0:He.length)>0);if((yt.newGeometry||yt.removeAllProperties||Me)&&(Dt=Object.assign({},Dt),ue.set(yt.id,Dt),Me&&(Dt.properties=Object.assign({},Dt.properties))),yt.newGeometry&&(Dt.geometry=yt.newGeometry),yt.removeAllProperties)Dt.properties={};else if(((Ct=yt.removeProperties)===null||Ct===void 0?void 0:Ct.length)>0)for(const De of yt.removeProperties)Object.prototype.hasOwnProperty.call(Dt.properties,De)&&delete Dt.properties[De];if(((Tt=yt.addOrUpdateProperties)===null||Tt===void 0?void 0:Tt.length)>0)for(const{key:De,value:tt}of yt.addOrUpdateProperties)Dt.properties[De]=tt}}(this._dataUpdateable,oe.dataDiff,he),ve(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):ve(new Error(`Cannot update existing geojson data in ${oe.source}`)):ve(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,ne&&(this.loadGeoJSON=ne)}loadGeoJSONTile(M,F){const q=M.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);const ne=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!ne)return F(null,null);const oe=new class{constructor(he){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=he.length,this._features=he}feature(he){return new class{constructor(ue){this._feature=ue,this.extent=l.N,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const _e of this._feature.geometry)ue.push([new l.P(_e[0],_e[1])]);return ue}{const ue=[];for(const _e of this._feature.geometry){const Ae=[];for(const Oe of _e)Ae.push(new l.P(Oe[0],Oe[1]));ue.push(Ae)}return ue}}toGeoJSON(ue,_e,Ae){return $.call(this,ue,_e,Ae)}}(this._features[he])}}(ne.features);let ve=Xe(oe);ve.byteOffset===0&&ve.byteLength===ve.buffer.byteLength||(ve=new Uint8Array(ve)),F(null,{vectorTile:oe,rawData:ve.buffer})}loadData(M,F){var q;(q=this._pendingRequest)===null||q===void 0||q.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ne=!!(M&&M.request&&M.request.collectResourceTiming)&&new l.bu(M.request);this._pendingCallback=F,this._pendingRequest=this.loadGeoJSON(M,(oe,ve)=>{if(delete this._pendingCallback,delete this._pendingRequest,oe||!ve)return F(oe);if(typeof ve!="object")return F(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));{O(ve,!0);try{if(M.filter){const ue=l.bC(M.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));ve={type:"FeatureCollection",features:ve.features.filter(Ae=>ue.value.evaluate({zoom:0},Ae))}}this._geoJSONIndex=M.cluster?new tr(function({superclusterOptions:ue,clusterProperties:_e}){if(!_e||!ue)return ue;const Ae={},Oe={},He={accumulated:null,zoom:0},Ct={properties:null},Tt=Object.keys(_e);for(const yt of Tt){const[Dt,Me]=_e[yt],De=l.bC(Me),tt=l.bC(typeof Dt=="string"?[Dt,["accumulated"],["get",yt]]:Dt);Ae[yt]=De.value,Oe[yt]=tt.value}return ue.map=yt=>{Ct.properties=yt;const Dt={};for(const Me of Tt)Dt[Me]=Ae[Me].evaluate(He,Ct);return Dt},ue.reduce=(yt,Dt)=>{Ct.properties=Dt;for(const Me of Tt)He.accumulated=yt[Me],yt[Me]=Oe[Me].evaluate(He,Ct)},ue}(M)).load(ve.features):function(ue,_e){return new Ze(ue,_e)}(ve,M.geojsonVtOptions)}catch(ue){return F(ue)}this.loaded={};const he={};if(ne){const ue=ne.finish();ue&&(he.resourceTiming={},he.resourceTiming[M.source]=JSON.parse(JSON.stringify(ue)))}F(null,he)}})}reloadTile(M,F){const q=this.loaded;return q&&q[M.uid]?super.reloadTile(M,F):this.loadTile(M,F)}removeSource(M,F){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),F()}getClusterExpansionZoom(M,F){try{F(null,this._geoJSONIndex.getClusterExpansionZoom(M.clusterId))}catch(q){F(q)}}getClusterChildren(M,F){try{F(null,this._geoJSONIndex.getChildren(M.clusterId))}catch(q){F(q)}}getClusterLeaves(M,F){try{F(null,this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset))}catch(q){F(q)}}}class Se{constructor(M){this.self=M,this.actor=new l.C(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:W,geojson:At},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(F,q)=>{if(this.workerSourceTypes[F])throw new Error(`Worker source with name "${F}" already registered.`);this.workerSourceTypes[F]=q},this.self.registerRTLTextPlugin=F=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=F.applyArabicShaping,l.bD.processBidirectionalText=F.processBidirectionalText,l.bD.processStyledBidirectionalText=F.processStyledBidirectionalText}}setReferrer(M,F){this.referrer=F}setImages(M,F,q){this.availableImages[M]=F;for(const ne in this.workerSources[M]){const oe=this.workerSources[M][ne];for(const ve in oe)oe[ve].availableImages=F}q()}setLayers(M,F,q){this.getLayerIndex(M).replace(F),q()}updateLayers(M,F,q){this.getLayerIndex(M).update(F.layers,F.removedIds),q()}loadTile(M,F,q){this.getWorkerSource(M,F.type,F.source).loadTile(F,q)}loadDEMTile(M,F,q){this.getDEMWorkerSource(M,F.source).loadTile(F,q)}reloadTile(M,F,q){this.getWorkerSource(M,F.type,F.source).reloadTile(F,q)}abortTile(M,F,q){this.getWorkerSource(M,F.type,F.source).abortTile(F,q)}removeTile(M,F,q){this.getWorkerSource(M,F.type,F.source).removeTile(F,q)}removeDEMTile(M,F){this.getDEMWorkerSource(M,F.source).removeTile(F)}removeSource(M,F,q){if(!this.workerSources[M]||!this.workerSources[M][F.type]||!this.workerSources[M][F.type][F.source])return;const ne=this.workerSources[M][F.type][F.source];delete this.workerSources[M][F.type][F.source],ne.removeSource!==void 0?ne.removeSource(F,q):q()}loadWorkerSource(M,F,q){try{this.self.importScripts(F.url),q()}catch(ne){q(ne.toString())}}syncRTLPluginState(M,F,q){try{l.bD.setState(F);const ne=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&ne!=null){this.self.importScripts(ne);const oe=l.bD.isParsed();q(oe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ne}`),oe)}}catch(ne){q(ne.toString())}}getAvailableImages(M){let F=this.availableImages[M];return F||(F=[]),F}getLayerIndex(M){let F=this.layerIndexes[M];return F||(F=this.layerIndexes[M]=new b),F}getWorkerSource(M,F,q){return this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][F]||(this.workerSources[M][F]={}),this.workerSources[M][F][q]||(this.workerSources[M][F][q]=new this.workerSourceTypes[F]({send:(ne,oe,ve)=>{this.actor.send(ne,oe,ve,M)}},this.getLayerIndex(M),this.getAvailableImages(M))),this.workerSources[M][F][q]}getDEMWorkerSource(M,F){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][F]||(this.demWorkerSources[M][F]=new Z),this.demWorkerSources[M][F]}}return l.i()&&(self.worker=new Se(self)),Se}),h(["./shared"],function(l){var b="3.6.2";class C{static testProp(i){if(!C.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in C.docStyle)return i[u];return i[0]}static create(i,u,p){const m=window.document.createElement(i);return u!==void 0&&(m.className=u),p&&p.appendChild(m),m}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(i,u){i.style[C.transformProp]=u}static addEventListener(i,u,p,m={}){i.addEventListener(u,p,"passive"in m?m:m.capture)}static removeEventListener(i,u,p,m={}){i.removeEventListener(u,p,"passive"in m?m:m.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new l.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),m=[];for(let _=0;_<u.length;_++)m.push(new l.P(u[_].clientX-p.left-i.clientLeft,u[_].clientY-p.top-i.clientTop));return m}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(y){!W&&D&&(Z?U(y):A=y)}};let A,D,W=!1,Z=!1;function U(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,D),y.isContextLost())return;P.supported=!0}catch{}y.deleteTexture(i),W=!0}var J,O;typeof document<"u"&&(D=document.createElement("img"),D.onload=function(){A&&U(A),A=null,Z=!0},D.onerror=function(){W=!0,A=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,m;y.resetRequestQueue=()=>{i=[],u=0,p=0,m={}},y.addThrottleControl=z=>{const L=p++;return m[L]=z,L},y.removeThrottleControl=z=>{delete m[z],k()},y.getImage=(z,L,B=!0)=>{P.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*");const K={requestParameters:z,supportImageRefresh:B,callback:L,cancelled:!1,completed:!1,cancel:()=>{K.completed||K.cancelled||(K.cancelled=!0,K.innerRequest&&(K.innerRequest.cancel(),u--),k())}};return i.push(K),k(),K};const _=z=>{const{requestParameters:L,supportImageRefresh:B,callback:K}=z;return l.e(L,{type:"image"}),(B!==!1||l.i()||l.g(L.url)||L.headers&&!Object.keys(L.headers).reduce((ce,le)=>ce&&le==="accept",!0)?l.m:I)(L,(ce,le,pe,ae)=>{S(z,K,ce,le,pe,ae)})},S=(z,L,B,K,ce,le)=>{B?L(B):K instanceof HTMLImageElement||l.a(K)?L(null,K):K&&((pe,ae)=>{typeof createImageBitmap=="function"?l.b(pe,ae):l.d(pe,ae)})(K,(pe,ae)=>{pe!=null?L(pe):ae!=null&&L(null,ae,{cacheControl:ce,expires:le})}),z.cancelled||(z.completed=!0,u--,k())},k=()=>{const z=(()=>{const L=Object.keys(m);let B=!1;if(L.length>0){for(const K of L)if(B=m[K](),B)break}return B})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=u;L<z&&i.length>0;L++){const B=i.shift();if(B.cancelled){L--;continue}const K=_(B);u++,B.innerRequest=K}},I=(z,L)=>{const B=new Image,K=z.url;let ce=!1;const le=z.credentials;return le&&le==="include"?B.crossOrigin="use-credentials":(le&&le==="same-origin"||!l.s(K))&&(B.crossOrigin="anonymous"),B.fetchPriority="high",B.onload=()=>{L(null,B),B.onerror=B.onload=null},B.onerror=()=>{ce||L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),B.onerror=B.onload=null},B.src=K,{cancel:()=>{ce=!0,B.src=""}}}}(J||(J={})),J.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(O||(O={}));class ${constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const m=function(_){const S=_.match(N);if(!S)throw new Error(`Unable to parse URL "${_}"`);return{protocol:S[1],authority:S[2],path:S[3]||"/",params:S[4]?S[4].split("&"):[]}}(i);return m.path+=`${u}${p}`,function(_){const S=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${S}`}(m)}setTransformRequest(i){this._transformRequestFn=i}}const N=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ie(y){var i=new l.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var te,ee=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};te=new l.A(3),l.A!=Float32Array&&(te[0]=0,te[1]=0,te[2]=0);var re=function(y){var i=y[0],u=y[1];return i*i+u*u};function fe(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:m}of y){const _=`${p}${m}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:p,url:m}))}}return i}function Te(y,i,u,p,m){if(p)return void y(p);if(m!==Object.values(i).length||m!==Object.values(u).length)return;const _={};for(const S in i){_[S]={};const k=l.h.getImageCanvasContext(u[S]),I=i[S];for(const z in I){const{width:L,height:B,x:K,y:ce,sdf:le,pixelRatio:pe,stretchX:ae,stretchY:we,content:Le}=I[z];_[S][z]={data:null,pixelRatio:pe,sdf:le,stretchX:ae,stretchY:we,content:Le,spriteData:{width:L,height:B,x:K,y:ce,context:k}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class be{constructor(i,u,p,m){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,m)}update(i,u,p){const{width:m,height:_}=i,S=!(this.size&&this.size[0]===m&&this.size[1]===_||p),{context:k}=this,{gl:I}=k;if(this.useMipmap=!!(u&&u.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[m,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,i):I.texImage2D(I.TEXTURE_2D,0,this.format,m,_,0,this.format,I.UNSIGNED_BYTE,i.data);else{const{x:z,y:L}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?I.texSubImage2D(I.TEXTURE_2D,0,z,L,I.RGBA,I.UNSIGNED_BYTE,i):I.texSubImage2D(I.TEXTURE_2D,0,z,L,m,_,I.RGBA,I.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(i,u,p){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function ze(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ee extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const m of i){if(m[0]<p||m[1]<m[0]||u<m[1])return!1;p=m[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,m=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(i[0]<0||m<i[0]||i[1]<0||_<i[1]||i[2]<0||m<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const m=this.getImage(i);if(p&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const m of i)this.images[m]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const m of i){let _=this.getImage(m);_||(this.fire(new l.k("styleimagemissing",{id:m})),_=this.getImage(m)),_?p[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new l.I(m,p);this.patterns[i]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new be(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:p}=l.p(i),m=this.atlasImage;m.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:S}=this.patterns[_],k=S.x+1,I=S.y+1,z=this.getImage(_).data,L=z.width,B=z.height;l.R.copy(z,m,{x:0,y:0},{x:k,y:I},{width:L,height:B}),l.R.copy(z,m,{x:0,y:B-1},{x:k,y:I-1},{width:L,height:1}),l.R.copy(z,m,{x:0,y:0},{x:k,y:I+B},{width:L,height:1}),l.R.copy(z,m,{x:L-1,y:0},{x:k-1,y:I},{width:1,height:B}),l.R.copy(z,m,{x:0,y:0},{x:k+L,y:I},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),ze(p)&&this.updateImage(u,p)}}}const Fe=1e20;function Ye(y,i,u,p,m,_,S,k,I){for(let z=i;z<i+p;z++)Ke(y,u*_+z,_,m,S,k,I);for(let z=u;z<u+m;z++)Ke(y,z*_+i,1,p,S,k,I)}function Ke(y,i,u,p,m,_,S){_[0]=0,S[0]=-Fe,S[1]=Fe,m[0]=y[i];for(let k=1,I=0,z=0;k<p;k++){m[k]=y[i+k*u];const L=k*k;do{const B=_[I];z=(m[k]-m[B]+L-B*B)/(k-B)/2}while(z<=S[I]&&--I>-1);I++,_[I]=k,S[I]=z,S[I+1]=Fe}for(let k=0,I=0;k<p;k++){for(;S[I+1]<k;)I++;const z=_[I],L=k-z;y[i+k*u]=m[z]+L*L}}class Re{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const m in i)for(const _ of i[m])p.push({stack:m,id:_});l.o(p,({stack:m,id:_},S)=>{let k=this.entries[m];k||(k=this.entries[m]={glyphs:{},requests:{},ranges:{}});let I=k.glyphs[_];if(I!==void 0)return void S(null,{stack:m,id:_,glyph:I});if(I=this._tinySDF(k,m,_),I)return k.glyphs[_]=I,void S(null,{stack:m,id:_,glyph:I});const z=Math.floor(_/256);if(256*z>65535)return void S(new Error("glyphs > 65535 not supported"));if(k.ranges[z])return void S(null,{stack:m,id:_,glyph:I});if(!this.url)return void S(new Error("glyphsUrl is not set"));let L=k.requests[z];L||(L=k.requests[z]=[],Re.loadGlyphRange(m,z,this.url,this.requestManager,(B,K)=>{if(K){for(const ce in K)this._doesCharSupportLocalGlyph(+ce)||(k.glyphs[+ce]=K[+ce]);k.ranges[z]=!0}for(const ce of L)ce(B,K);delete k.requests[z]})),L.push((B,K)=>{B?S(B):K&&S(null,{stack:m,id:_,glyph:K[_]||null})})},(m,_)=>{if(m)u(m);else if(_){const S={};for(const{stack:k,id:I,glyph:z}of _)(S[k]||(S[k]={}))[I]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};u(null,S)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](i)||l.u["Hangul Syllables"](i)||l.u.Hiragana(i)||l.u.Katakana(i))}_tinySDF(i,u,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),_=i.tinySDF=new Re.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:k})}const S=_.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Re.loadGlyphRange=function(y,i,u,p,m){const _=256*i,S=_+255,k=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${S}`),O.Glyphs);l.l(k,(I,z)=>{if(I)m(I);else if(z){const L={};for(const B of l.n(z))L[B.id]=B;m(null,L)}})},Re.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const k=this.size=y+4*i,I=this._createCanvas(k),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${S} ${_} ${y}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(y),S=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),I=Math.min(this.size-this.buffer,S+Math.ceil(p)),z=k+2*this.buffer,L=I+2*this.buffer,B=Math.max(z*L,0),K=new Uint8ClampedArray(B),ce={data:K,width:z,height:L,glyphWidth:k,glyphHeight:I,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(k===0||I===0)return ce;const{ctx:le,buffer:pe,gridInner:ae,gridOuter:we}=this;le.clearRect(pe,pe,k,I),le.fillText(y,pe,pe+S);const Le=le.getImageData(pe,pe,k,I);we.fill(Fe,0,B),ae.fill(0,0,B);for(let ge=0;ge<I;ge++)for(let Ce=0;Ce<k;Ce++){const je=Le.data[4*(ge*k+Ce)+3]/255;if(je===0)continue;const Ve=(ge+pe)*z+Ce+pe;if(je===1)we[Ve]=0,ae[Ve]=Fe;else{const Ge=.5-je;we[Ve]=Ge>0?Ge*Ge:0,ae[Ve]=Ge<0?Ge*Ge:0}}Ye(we,0,0,z,L,z,this.f,this.v,this.z),Ye(ae,pe,pe,k,I,z,this.f,this.v,this.z);for(let ge=0;ge<B;ge++){const Ce=Math.sqrt(we[ge])-Math.sqrt(ae[ge]);K[ge]=Math.round(255-255*(Ce/this.radius+this.cutoff))}return ce}};class Ue{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,u){return l.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:l.B.number(i.x,u.x,p),y:l.B.number(i.y,u.y,p),z:l.B.number(i.z,u.z,p)}}}let Ne;class Xe extends l.E{constructor(i){super(),Ne=Ne||new l.r({anchor:new l.D(l.v.light.anchor),position:new Ue,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ne),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.t,i,u))for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&l.x(this,i.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class ct{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const m=[];let _=i.length%2==1?-i[i.length-1]*p:0,S=i[0]*p,k=!0;m.push({left:_,right:S,isDash:k,zeroLength:i[0]===0});let I=i[0];for(let z=1;z<i.length;z++){k=!k;const L=i[z];_=I*p,I+=L,S=I*p,m.push({left:_,right:S,isDash:k,zeroLength:L===0})}return m}addRoundDash(i,u,p){const m=u/2;for(let _=-p;_<=p;_++){const S=this.width*(this.nextRow+p+_);let k=0,I=i[k];for(let z=0;z<this.width;z++){z/I.right>1&&(I=i[++k]);const L=Math.abs(z-I.left),B=Math.abs(z-I.right),K=Math.min(L,B);let ce;const le=_/p*(m+1);if(I.isDash){const pe=m-Math.abs(le);ce=Math.sqrt(K*K+pe*pe)}else ce=m-Math.sqrt(K*K+le*le);this.data[S+z]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(i){for(let k=i.length-1;k>=0;--k){const I=i[k],z=i[k+1];I.zeroLength?i.splice(k,1):z&&z.isDash===I.isDash&&(z.left=I.left,i.splice(k,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,S=i[_];for(let k=0;k<this.width;k++){k/S.right>1&&(S=i[++_]);const I=Math.abs(k-S.left),z=Math.abs(k-S.right),L=Math.min(I,z);this.data[m+k]=Math.max(0,Math.min(255,(S.isDash?L:-L)+128))}}addDash(i,u){const p=u?7:0,m=2*p+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let k=0;k<i.length;k++)_+=i[k];if(_!==0){const k=this.width/_,I=this.getDashRanges(i,this.width,k);u?this.addRoundDash(I,k,p):this.addRegularDash(I)}const S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=m,this.dirty=!0,S}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class ft{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const m=this.workerPool.acquire(p);for(let _=0;_<m.length;_++){const S=new l.C(m[_],u,p);S.name=`Worker ${_}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){l.o(this.actors,(m,_)=>{m.send(i,u,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function it(y,i,u){const p=function(m,_){if(m)return u(m);if(_){const S=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(S.vectorLayers=_.vector_layers,S.vectorLayerIds=S.vectorLayers.map(k=>k.id)),u(null,S)}};return y.url?l.f(i.transformRequest(y.url,O.Source),p):l.h.frame(()=>p(null,y))}class Et{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let m,_;if(i instanceof l.L)m=i,_=i;else{if(!(i instanceof Et))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Et.convert(i)):this.extend(l.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.L.convert(i)):this;if(m=i._sw,_=i._ne,!m||!_)return this}return u||p?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new l.L(m.lng,m.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=l.L.convert(i);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(i){return i instanceof Et?i:i&&new Et(i)}static fromLngLat(i,u=0){const p=360*u/40075017,m=p/Math.cos(Math.PI/180*i.lat);return new Et(new l.L(i.lng-m,i.lat-p),new l.L(i.lng+m,i.lat+p))}}class mt{constructor(i,u,p){this.bounds=Et.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(l.G(this.bounds.getWest())*u),m=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),S=Math.ceil(l.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<_&&i.y>=m&&i.y<S}}class zt extends l.E{constructor(i,u,p,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=it(this._options,this.map._requestManager,(_,S)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):S&&(l.e(this,S),S.bounds&&(this.tileBounds=new mt(S.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(p,O.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(S,k){return delete i.request,i.aborted?u(null):S&&S.status!==404?u(S):(k&&k.resourceTiming&&(i.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&i.setExpiryData(k),i.loadVectorData(k,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",m,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",m,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class tr extends l.E{constructor(i,u,p,m){super(),this.id=i,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=it(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.j(i)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new mt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=J.getImage(this.map._requestManager.transformRequest(p,O.Tile),(m,_,S)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(m)i.state="errored",u(m);else if(_){this.map._refreshExpiredTiles&&S&&i.setExpiryData(S);const k=this.map.painter.context,I=k.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new be(k,_,I.RGBA,{useMipmap:!0}),i.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class nt extends tr{constructor(i,u,p,m){super(i,u,p,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(p,O.Tile);function _(S,k){S&&(i.state="errored",u(S)),k&&(i.dem=k,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=J.getImage(m,(S,k,I)=>l._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(S)i.state="errored",u(S);else if(k){this.map._refreshExpiredTiles&&i.setExpiryData(I);const z=l.a(k)&&l.J()?k:yield function(B){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const K=B.width+2,ce=B.height+2;try{return new l.R({width:K,height:ce},yield l.M(B,-1,-1,K,ce))}catch{}}return l.h.getImageData(B,1)})}(k),L={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",L,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),m=(u.x-1+p)%p,_=u.x===0?i.wrap-1:i.wrap,S=(u.x+1+p)%p,k=u.x+1===p?i.wrap+1:i.wrap,I={};return I[new l.O(i.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},I[new l.O(i.overscaledZ,k,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(I[new l.O(i.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},I[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},I[new l.O(i.overscaledZ,k,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<p&&(I[new l.O(i.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},I[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},I[new l.O(i.overscaledZ,k,u.z,S,u.y+1).key]={backfilled:!1}),I}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class We extends l.E{constructor(i,u,p,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},m),this}_updateWorkerData(i){const u=l.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),O.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),p)return void this.fire(new l.j(p));const S={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(S,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},S),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const m={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,m,(_,S)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(S,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var st=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bt extends l.E{constructor(i,u,p,m){super(),this.load=(_,S)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=J.getImage(this.map._requestManager.transformRequest(this.url,O.Image),(k,I)=>{this._request=null,this._loaded=!0,k?this.fire(new l.j(k)):I&&(this.image=I,_&&(this.coordinates=_),S&&S(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,S=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,st.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new be(_,this.image,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE));let k=!1;for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,k=!0)}k&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(l.U.fromLngLat);this.tileID=function(m){let _=1/0,S=1/0,k=-1/0,I=-1/0;for(const K of m)_=Math.min(_,K.x),S=Math.min(S,K.y),k=Math.max(k,K.x),I=Math.max(I,K.y);const z=Math.max(k-_,I-S),L=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,L);return new l.W(L,Math.floor((_+k)/2*B),Math.floor((S+I)/2*B))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class Ht extends bt{constructor(i,u,p,m){super(i,u,p,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const S of _.urls)this.urls.push(this.map._requestManager.transformRequest(S,O.Source).url);l.X(this.urls,(S,k)=>{this._loaded=!0,S?this.fire(new l.j(S)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,S=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,st.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE),S.texSubImage2D(S.TEXTURE_2D,0,0,0,S.RGBA,S.UNSIGNED_BYTE,this.video)):(this.texture=new be(_,this.video,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE));let k=!1;for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,k=!0)}k&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Wt extends bt{constructor(i,u,p,m){super(i,u,p,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const S=this.map.painter.context,k=S.gl;this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,st.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new be(S,this.canvas,k.RGBA,{premultiply:!0});let I=!1;for(const z in this.tiles){const L=this.tiles[z];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,I=!0)}I&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(S=>typeof S!="number"))||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Er={},Tr=y=>{switch(y){case"geojson":return We;case"image":return bt;case"raster":return tr;case"raster-dem":return nt;case"vector":return zt;case"video":return Ht;case"canvas":return Wt}return Er[y]};function $t(y,i){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function wt(y,i,u,p,m,_){const S=function(B,K,ce){if(B)for(const le of B){const pe=K[le];if(pe&&pe.source===ce&&pe.type==="fill-extrusion")return!0}else for(const le in K){const pe=K[le];if(pe.source===ce&&pe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,i,y.id),k=_.maxPitchScaleFactor(),I=y.tilesIn(p,k,S);I.sort(or);const z=[];for(const B of I)z.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(i,u,y._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,m,_,k,$t(y.transform,B.tileID))});const L=function(B){const K={},ce={};for(const le of B){const pe=le.queryResults,ae=le.wrappedTileID,we=ce[ae]=ce[ae]||{};for(const Le in pe){const ge=pe[Le],Ce=we[Le]=we[Le]||{},je=K[Le]=K[Le]||[];for(const Ve of ge)Ce[Ve.featureIndex]||(Ce[Ve.featureIndex]=!0,je.push(Ve))}}return K}(z);for(const B in L)L[B].forEach(K=>{const ce=K.feature,le=y.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=le});return L}function or(y,i){const u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class Gt{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,_){const S={};if(!_)return S;for(const k of m){const I=k.layerIds.map(z=>_.getLayer(z)).filter(Boolean);if(I.length!==0){k.layers=I,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(z=>I.filter(L=>L.id===z)[0]));for(const z of I)S[z.id]=k}}return S}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new be(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new be(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,m,_,S,k,I,z,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:S,tileSize:this.tileSize,pixelPosMatrix:L,transform:I,params:k,queryPadding:this.queryPadding*z},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",S=m._geojsonTileLayer||m[_];if(!S)return;const k=l.a6(u&&u.filter),{z:I,x:z,y:L}=this.tileID.canonical,B={z:I,x:z,y:L};for(let K=0;K<S.length;K++){const ce=S.feature(K);if(k.needGeometry){const ae=l.a7(ce,!0);if(!k.filter(new l.a8(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!k.filter(new l.a8(this.tileID.overscaledZ),ce))continue;const le=p.getId(ce,_),pe=new l.a9(ce,I,z,L,le);pe.tile=B,i.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=l.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],S=_.layers[0].sourceLayer||"_geojsonTileLayer",k=p[S],I=i[S];if(!k||!I||Object.keys(I).length===0)continue;_.update(I,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=u&&u.style&&u.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.h.now()+i}setDependencies(i,u){const p={};for(const m of u)p[m]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const m=this.dependencies[p];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class Cr{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,m=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][m];return this.data[p].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const m of this.data[p])i(m.value)||u.push(m);for(const p of u)this.remove(p.value.tileID,p)}}class $e{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const m=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},l.e(this.stateChanges[i][m],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==m&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const _ in this.state[i][m])p[_]||(this.deletedStates[i][m][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][_]===null&&delete this.deletedStates[i][m][_]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const m=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(p in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][p]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),m=l.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const S in _)delete m[S]}return m}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const S in this.stateChanges[m])this.state[m][S]||(this.state[m][S]={}),l.e(this.state[m][S],this.stateChanges[m][S]),_[S]=this.state[m][S];p[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const S in this.state[m])_[S]={},this.state[m][S]={};else for(const S in this.deletedStates[m]){if(this.deletedStates[m][S]===null)this.state[m][S]={};else for(const k of Object.keys(this.deletedStates[m][S]))delete this.state[m][S][k];_[S]=this.state[m][S]}p[m]=p[m]||{},l.e(p[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in i)i[m].setFeatureState(p,u)}}class pr extends l.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,S,k)=>{const I=new(Tr(_.type))(m,_,S,k);if(I.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${I.id}`);return I})(i,u,p,this),this._tiles={},this._cache=new Cr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new $e,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(sr).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,m)=>{const _=p.tileID,S=m.tileID,k=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),I=new l.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-S.overscaledZ||I.y-k.y||I.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(sr).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,m){if(m)return i.state="errored",void(m.status!==404?this._source.fire(new l.j(m,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(i.neighboringTiles&&i.neighboringTiles[_]){const S=this.getTileByID(_);p(i,S),p(S,i)}}function p(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let S=_.tileID.canonical.x-m.tileID.canonical.x;const k=_.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),z=_.tileID.key;S===0&&k===0||Math.abs(k)>1||(Math.abs(S)>1&&(Math.abs(S+I)===1?S+=I:Math.abs(S-I)===1&&(S-=I)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,S,k),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,m){for(const _ in this._tiles){let S=this._tiles[_];if(m[_]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>p)continue;let k=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const z=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[z.key],S&&S.hasData()&&(k=z)}let I=k;for(;I.overscaledZ>u;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){m[k.key]=k;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const m=i.scaledTo(p),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,m=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(L=>new l.O(L.canonical.z,L.wrap,L.canonical.z,L.canonical.x,L.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(L=>this._source.hasTile(L)))):p=[];const m=i.coveringZoomLevel(this._source),_=Math.max(m-pr.maxOverzooming,this._source.minzoom),S=Math.max(m+pr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const L={};for(const B of p)if(B.canonical.z>this._source.minzoom){const K=B.scaledTo(B.canonical.z-1);L[K.key]=K;const ce=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));L[ce.key]=ce}p=p.concat(Object.values(L))}const k=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(p,m);if(Yt(this._source.type)){const L={},B={},K=Object.keys(I),ce=l.h.now();for(const le of K){const pe=I[le],ae=this._tiles[le];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=ce)continue;const we=this.findLoadedParent(pe,_);we&&(this._addTile(we.tileID),L[we.tileID.key]=we.tileID),B[le]=pe}this._retainLoadedChildren(B,m,S,I);for(const le in L)I[le]||(this._coveredTiles[le]=!0,I[le]=L[le]);if(u){const le={},pe={};for(const ae of p)this._tiles[ae.key].hasData()?le[ae.key]=ae:pe[ae.key]=ae;for(const ae in pe){const we=pe[ae].children(this._source.maxzoom);this._tiles[we[0].key]&&this._tiles[we[1].key]&&this._tiles[we[2].key]&&this._tiles[we[3].key]&&(le[we[0].key]=I[we[0].key]=we[0],le[we[1].key]=I[we[1].key]=we[1],le[we[2].key]=I[we[2].key]=we[2],le[we[3].key]=I[we[3].key]=we[3],delete pe[ae])}for(const ae in pe){const we=this.findLoadedParent(pe[ae],this._source.minzoom);if(we){le[we.tileID.key]=I[we.tileID.key]=we.tileID;for(const Le in le)le[Le].isChildOf(we.tileID)&&delete le[Le]}}for(const ae in this._tiles)le[ae]||(this._coveredTiles[ae]=!0)}}for(const L in I)this._tiles[L].clearFadeHold();const z=l.ab(this._tiles,I);for(const L of z){const B=this._tiles[L];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(L)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},m={},_=Math.max(u-pr.maxOverzooming,this._source.minzoom),S=Math.max(u+pr.maxUnderzooming,this._source.minzoom),k={};for(const I of i){const z=this._addTile(I);p[I.key]=I,z.hasData()||u<this._source.maxzoom&&(k[I.key]=I)}this._retainLoadedChildren(k,u,S,p);for(const I of i){let z=this._tiles[I.key];if(z.hasData())continue;if(u+1>this._source.maxzoom){const B=I.children(this._source.maxzoom)[0],K=this.getTile(B);if(K&&K.hasData()){p[B.key]=B;continue}}else{const B=I.children(this._source.maxzoom);if(p[B[0].key]&&p[B[1].key]&&p[B[2].key]&&p[B[3].key])continue}let L=z.wasRequested();for(let B=I.overscaledZ-1;B>=_;--B){const K=I.scaledTo(B);if(m[K.key])break;if(m[K.key]=!0,z=this.getTile(K),!z&&L&&(z=this._addTile(K)),z){const ce=z.hasData();if((L||ce)&&(p[K.key]=K),L=z.wasRequested(),ce)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;m=_}for(const _ of u)this._loadedParentTiles[_]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new Gt(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const m=[],_=this.transform;if(!_)return m;const S=p?_.getCameraQueryGeometry(i):i,k=i.map(le=>_.pointCoordinate(le,this.terrain)),I=S.map(le=>_.pointCoordinate(le,this.terrain)),z=this.getIds();let L=1/0,B=1/0,K=-1/0,ce=-1/0;for(const le of I)L=Math.min(L,le.x),B=Math.min(B,le.y),K=Math.max(K,le.x),ce=Math.max(ce,le.y);for(let le=0;le<z.length;le++){const pe=this._tiles[z[le]];if(pe.holdingForFade())continue;const ae=pe.tileID,we=Math.pow(2,_.zoom-pe.tileID.overscaledZ),Le=u*pe.queryPadding*l.N/pe.tileSize/we,ge=[ae.getTilePoint(new l.U(L,B)),ae.getTilePoint(new l.U(K,ce))];if(ge[0].x-Le<l.N&&ge[0].y-Le<l.N&&ge[1].x+Le>=0&&ge[1].y+Le>=0){const Ce=k.map(Ve=>ae.getTilePoint(Ve)),je=I.map(Ve=>ae.getTilePoint(Ve));m.push({tile:pe,tileID:ae,queryGeometry:Ce,cameraQueryGeometry:je,scale:we})}}return m}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Yt(this._source.type)){const i=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const m=this._tiles[i];m&&m.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function sr(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Yt(y){return y==="raster"||y==="image"||y==="video"}pr.maxOverzooming=10,pr.maxUnderzooming=3;const Vt="mapboxgl_preloaded_worker_pool";class kr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<kr.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Vt]}numActive(){return Object.keys(this.active).length}}const Lr=Math.floor(l.h.hardwareConcurrency/2);let cr;function Qt(){return cr||(cr=new kr),cr}kr.workerCount=l.ac(globalThis)?Math.max(Math.min(Lr,3),1):1;class Nt{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ad(i,0,1);let u=1,p=this._distances[u];const m=i*this.paddedLength+this.padding;for(;p<m&&u<this._distances.length;)p=this._distances[++u];const _=u-1,S=this._distances[_],k=p-S,I=k>0?(m-S)/k:0;return this.points[_].mult(1-I).add(this.points[u].mult(I))}}function mr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Hr{constructor(i,u,p){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,m,_){this._forEachCell(u,p,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(i,u,p,m){this._forEachCell(u-m,p-m,u+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(m)}_insertBoxCell(i,u,p,m,_,S){this.boxCells[_].push(S)}_insertCircleCell(i,u,p,m,_,S){this.circleCells[_].push(S)}_query(i,u,p,m,_,S,k){if(p<0||i>this.width||m<0||u>this.height)return[];const I=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=m){if(_)return[{key:null,x1:i,y1:u,x2:p,y2:m}];for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const L=this.circles[3*z],B=this.circles[3*z+1],K=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:L-K,y1:B-K,x2:L+K,y2:B+K})}}else this._forEachCell(i,u,p,m,this._queryCell,I,{hitTest:_,overlapMode:S,seenUids:{box:{},circle:{}}},k);return I}query(i,u,p,m){return this._query(i,u,p,m,!1,null)}hitTest(i,u,p,m,_,S){return this._query(i,u,p,m,!0,_,S).length>0}hitTestCircle(i,u,p,m,_){const S=i-p,k=i+p,I=u-p,z=u+p;if(k<0||S>this.width||z<0||I>this.height)return!1;const L=[];return this._forEachCell(S,I,k,z,this._queryCellCircle,L,{hitTest:!0,overlapMode:m,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},_),L.length>0}_queryCell(i,u,p,m,_,S,k,I){const{seenUids:z,hitTest:L,overlapMode:B}=k,K=this.boxCells[_];if(K!==null){const le=this.bboxes;for(const pe of K)if(!z.box[pe]){z.box[pe]=!0;const ae=4*pe,we=this.boxKeys[pe];if(i<=le[ae+2]&&u<=le[ae+3]&&p>=le[ae+0]&&m>=le[ae+1]&&(!I||I(we))&&(!L||!mr(B,we.overlapMode))&&(S.push({key:we,x1:le[ae],y1:le[ae+1],x2:le[ae+2],y2:le[ae+3]}),L))return!0}}const ce=this.circleCells[_];if(ce!==null){const le=this.circles;for(const pe of ce)if(!z.circle[pe]){z.circle[pe]=!0;const ae=3*pe,we=this.circleKeys[pe];if(this._circleAndRectCollide(le[ae],le[ae+1],le[ae+2],i,u,p,m)&&(!I||I(we))&&(!L||!mr(B,we.overlapMode))){const Le=le[ae],ge=le[ae+1],Ce=le[ae+2];if(S.push({key:we,x1:Le-Ce,y1:ge-Ce,x2:Le+Ce,y2:ge+Ce}),L)return!0}}}return!1}_queryCellCircle(i,u,p,m,_,S,k,I){const{circle:z,seenUids:L,overlapMode:B}=k,K=this.boxCells[_];if(K!==null){const le=this.bboxes;for(const pe of K)if(!L.box[pe]){L.box[pe]=!0;const ae=4*pe,we=this.boxKeys[pe];if(this._circleAndRectCollide(z.x,z.y,z.radius,le[ae+0],le[ae+1],le[ae+2],le[ae+3])&&(!I||I(we))&&!mr(B,we.overlapMode))return S.push(!0),!0}}const ce=this.circleCells[_];if(ce!==null){const le=this.circles;for(const pe of ce)if(!L.circle[pe]){L.circle[pe]=!0;const ae=3*pe,we=this.circleKeys[pe];if(this._circlesCollide(le[ae],le[ae+1],le[ae+2],z.x,z.y,z.radius)&&(!I||I(we))&&!mr(B,we.overlapMode))return S.push(!0),!0}}}_forEachCell(i,u,p,m,_,S,k,I){const z=this._convertToXCellCoord(i),L=this._convertToYCellCoord(u),B=this._convertToXCellCoord(p),K=this._convertToYCellCoord(m);for(let ce=z;ce<=B;ce++)for(let le=L;le<=K;le++)if(_.call(this,i,u,p,m,this.xCellCount*le+ce,S,k,I))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,m,_,S){const k=m-i,I=_-u,z=p+S;return z*z>k*k+I*I}_circleAndRectCollide(i,u,p,m,_,S,k){const I=(S-m)/2,z=Math.abs(i-(m+I));if(z>I+p)return!1;const L=(k-_)/2,B=Math.abs(u-(_+L));if(B>L+p)return!1;if(z<=I||B<=L)return!0;const K=z-I,ce=B-L;return K*K+ce*ce<=p*p}}function Pe(y,i,u,p,m){const _=l.Z();return i?(l.a0(_,_,[1/m,1/m,1]),u||l.ae(_,_,p.angle)):l.a1(_,p.labelPlaneMatrix,y),_}function ot(y,i,u,p,m){if(i){const _=l.af(y);return l.a0(_,_,[m,m,1]),u||l.ae(_,_,-p.angle),_}return p.glCoordMatrix}function St(y,i,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],l.ag(p,p,i)):(p=[y.x,y.y,0,1],ne(p,p,i));const m=p[3];return{point:new l.P(p[0]/m,p[1]/m),signedDistanceFromCamera:m}}function ir(y,i){return .5+y/i*.5}function un(y,i){const u=y[0]/y[3],p=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function Ze(y,i,u,p,m,_,S,k,I,z){const L=p?y.textSizeData:y.iconSizeData,B=l.ah(L,u.transform.zoom),K=[256/u.width*2+1,256/u.height*2+1],ce=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ce.clear();const le=y.lineVertexArray,pe=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ae=u.transform.width/u.transform.height;let we=!1;for(let Le=0;Le<pe.length;Le++){const ge=pe.get(Le);if(ge.hidden||ge.writingMode===l.ai.vertical&&!we){q(ge.numGlyphs,ce);continue}let Ce;if(we=!1,z?(Ce=[ge.anchorX,ge.anchorY,z(ge.anchorX,ge.anchorY),1],l.ag(Ce,Ce,i)):(Ce=[ge.anchorX,ge.anchorY,0,1],ne(Ce,Ce,i)),!un(Ce,K)){q(ge.numGlyphs,ce);continue}const je=ir(u.transform.cameraToCenterDistance,Ce[3]),Ve=l.aj(L,B,ge),Ge=S?Ve/je:Ve*je,Qe=new l.P(ge.anchorX,ge.anchorY),Je=St(Qe,m,z).point,rt={projections:{},offsets:{}},Rt=ur(ge,Ge,!1,k,i,m,_,y.glyphOffsetArray,le,ce,Je,Qe,rt,ae,I,z);we=Rt.useVertical,(Rt.notEnoughRoom||we||Rt.needsFlipping&&ur(ge,Ge,!0,k,i,m,_,y.glyphOffsetArray,le,ce,Je,Qe,rt,ae,I,z).notEnoughRoom)&&q(ge.numGlyphs,ce)}p?y.text.dynamicLayoutVertexBuffer.updateData(ce):y.icon.dynamicLayoutVertexBuffer.updateData(ce)}function Zt(y,i,u,p,m,_,S,k,I,z,L,B,K){const ce=k.glyphStartIndex+k.numGlyphs,le=k.lineStartIndex,pe=k.lineStartIndex+k.lineLength,ae=i.getoffsetX(k.glyphStartIndex),we=i.getoffsetX(ce-1),Le=M(y*ae,u,p,m,_,S,k.segment,le,pe,I,z,L,B,K);if(!Le)return null;const ge=M(y*we,u,p,m,_,S,k.segment,le,pe,I,z,L,B,K);return ge?{first:Le,last:ge}:null}function Mt(y,i,u,p){return y===l.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===l.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function ur(y,i,u,p,m,_,S,k,I,z,L,B,K,ce,le,pe){const ae=i/24,we=y.lineOffsetX*ae,Le=y.lineOffsetY*ae;let ge;if(y.numGlyphs>1){const Ce=y.glyphStartIndex+y.numGlyphs,je=y.lineStartIndex,Ve=y.lineStartIndex+y.lineLength,Ge=Zt(ae,k,we,Le,u,L,B,y,I,_,K,le,pe);if(!Ge)return{notEnoughRoom:!0};const Qe=St(Ge.first.point,S,pe).point,Je=St(Ge.last.point,S,pe).point;if(p&&!u){const rt=Mt(y.writingMode,Qe,Je,ce);if(rt)return rt}ge=[Ge.first];for(let rt=y.glyphStartIndex+1;rt<Ce-1;rt++)ge.push(M(ae*k.getoffsetX(rt),we,Le,u,L,B,y.segment,je,Ve,I,_,K,le,pe));ge.push(Ge.last)}else{if(p&&!u){const je=St(B,m,pe).point,Ve=y.lineStartIndex+y.segment+1,Ge=new l.P(I.getx(Ve),I.gety(Ve)),Qe=St(Ge,m,pe),Je=Qe.signedDistanceFromCamera>0?Qe.point:xr(B,Ge,je,1,m,pe),rt=Mt(y.writingMode,je,Je,ce);if(rt)return rt}const Ce=M(ae*k.getoffsetX(y.glyphStartIndex),we,Le,u,L,B,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,I,_,K,le,pe);if(!Ce)return{notEnoughRoom:!0};ge=[Ce]}for(const Ce of ge)l.ak(z,Ce.point,Ce.angle);return{}}function xr(y,i,u,p,m,_){const S=St(y.add(y.sub(i)._unit()),m,_).point,k=u.sub(S);return u.add(k._mult(p/k.mag()))}function At(y,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:S,getElevation:k,previousVertex:I,direction:z,absOffsetX:L}=i;if(u.projections[y])return u.projections[y];const B=new l.P(p.getx(y),p.gety(y)),K=St(B,m,k);if(K.signedDistanceFromCamera>0)return u.projections[y]=K.point,K.point;const ce=y-z;return xr(S===0?_:new l.P(p.getx(ce),p.gety(ce)),B,I,L-S+1,m,k)}function Se(y,i,u){return y._unit()._perp()._mult(i*u)}function H(y,i,u,p,m,_,S,k){const{projectionCache:I,direction:z}=k;if(I.offsets[y])return I.offsets[y];const L=u.add(i);if(y+z<p||y+z>=m)return I.offsets[y]=L,L;const B=At(y+z,k),K=Se(B.sub(u),S,z),ce=u.add(K),le=B.add(K);return I.offsets[y]=l.al(_,L,ce,le)||L,I.offsets[y]}function M(y,i,u,p,m,_,S,k,I,z,L,B,K,ce){const le=p?y-i:y+i;let pe=le>0?1:-1,ae=0;p&&(pe*=-1,ae=Math.PI),pe<0&&(ae+=Math.PI);let we,Le,ge=pe>0?k+S:k+S+1,Ce=m,je=m,Ve=0,Ge=0;const Qe=Math.abs(le),Je=[];let rt;for(;Ve+Ge<=Qe;){if(ge+=pe,ge<k||ge>=I)return null;Ve+=Ge,je=Ce,Le=we;const ht={projectionCache:B,lineVertexArray:z,labelPlaneMatrix:L,tileAnchorPoint:_,distanceFromAnchor:Ve,getElevation:ce,previousVertex:je,direction:pe,absOffsetX:Qe};if(Ce=At(ge,ht),u===0)Je.push(je),rt=Ce.sub(je);else{let Jt;const Bt=Ce.sub(je);Jt=Bt.mag()===0?Se(At(ge+pe,ht).sub(Ce),u,pe):Se(Bt,u,pe),Le||(Le=je.add(Jt)),we=H(ge,Jt,Ce,k,I,Le,u,ht),Je.push(Le),rt=we.sub(Le)}Ge=rt.mag()}const Rt=rt._mult((Qe-Ve)/Ge)._add(Le||je),yr=ae+Math.atan2(Ce.y-je.y,Ce.x-je.x);return Je.push(Rt),{point:Rt,angle:K?yr:0,path:Je}}const F=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function q(y,i){for(let u=0;u<y;u++){const p=i.length;i.resize(p+4),i.float32.set(F,3*p)}}function ne(y,i,u){const p=i[0],m=i[1];return y[0]=u[0]*p+u[4]*m+u[12],y[1]=u[1]*p+u[5]*m+u[13],y[3]=u[3]*p+u[7]*m+u[15],y}const oe=100;class ve{constructor(i,u=new Hr(i.width+200,i.height+200,25),p=new Hr(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+oe,this.screenBottomBoundary=i.height+oe,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,m,_,S){const k=this.projectAndGetPerspectiveRatio(m,i.anchorPointX,i.anchorPointY,S),I=p*k.perspectiveRatio,z=i.x1*I+k.point.x,L=i.y1*I+k.point.y,B=i.x2*I+k.point.x,K=i.y2*I+k.point.y;return!this.isInsideGrid(z,L,B,K)||u!=="always"&&this.grid.hitTest(z,L,B,K,u,_)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,L,B,K],offscreen:this.isOffscreen(z,L,B,K)}}placeCollisionCircles(i,u,p,m,_,S,k,I,z,L,B,K,ce,le){const pe=[],ae=new l.P(u.anchorX,u.anchorY),we=St(ae,S,le),Le=ir(this.transform.cameraToCenterDistance,we.signedDistanceFromCamera),ge=(L?_/Le:_*Le)/l.ap,Ce=St(ae,k,le).point,je=Zt(ge,m,u.lineOffsetX*ge,u.lineOffsetY*ge,!1,Ce,ae,u,p,k,{projections:{},offsets:{}},!1,le);let Ve=!1,Ge=!1,Qe=!0;if(je){const Je=.5*K*Le+ce,rt=new l.P(-100,-100),Rt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),yr=new Nt,ht=je.first,Jt=je.last;let Bt=[];for(let lr=ht.path.length-1;lr>=1;lr--)Bt.push(ht.path[lr]);for(let lr=1;lr<Jt.path.length;lr++)Bt.push(Jt.path[lr]);const Br=2.5*Je;if(I){const lr=Bt.map(vr=>St(vr,I,le));Bt=lr.some(vr=>vr.signedDistanceFromCamera<=0)?[]:lr.map(vr=>vr.point)}let gr=[];if(Bt.length>0){const lr=Bt[0].clone(),vr=Bt[0].clone();for(let gn=1;gn<Bt.length;gn++)lr.x=Math.min(lr.x,Bt[gn].x),lr.y=Math.min(lr.y,Bt[gn].y),vr.x=Math.max(vr.x,Bt[gn].x),vr.y=Math.max(vr.y,Bt[gn].y);gr=lr.x>=rt.x&&vr.x<=Rt.x&&lr.y>=rt.y&&vr.y<=Rt.y?[Bt]:vr.x<rt.x||lr.x>Rt.x||vr.y<rt.y||lr.y>Rt.y?[]:l.am([Bt],rt.x,rt.y,Rt.x,Rt.y)}for(const lr of gr){yr.reset(lr,.25*Je);let vr=0;vr=yr.length<=.5*Je?1:Math.ceil(yr.paddedLength/Br)+1;for(let gn=0;gn<vr;gn++){const Wr=gn/Math.max(vr-1,1),Qn=yr.lerp(Wr),On=Qn.x+oe,Sn=Qn.y+oe;pe.push(On,Sn,Je,0);const Zi=On-Je,Jr=Sn-Je,Fo=On+Je,No=Sn+Je;if(Qe=Qe&&this.isOffscreen(Zi,Jr,Fo,No),Ge=Ge||this.isInsideGrid(Zi,Jr,Fo,No),i!=="always"&&this.grid.hitTestCircle(On,Sn,Je,i,B)&&(Ve=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!z&&Ve||!Ge||Le<this.perspectiveRatioCutoff?[]:pe,offscreen:Qe,collisionDetected:Ve}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,m=1/0,_=-1/0,S=-1/0;for(const L of i){const B=new l.P(L.x+oe,L.y+oe);p=Math.min(p,B.x),m=Math.min(m,B.y),_=Math.max(_,B.x),S=Math.max(S,B.y),u.push(B)}const k=this.grid.query(p,m,_,S).concat(this.ignoredGrid.query(p,m,_,S)),I={},z={};for(const L of k){const B=L.key;if(I[B.bucketInstanceId]===void 0&&(I[B.bucketInstanceId]={}),I[B.bucketInstanceId][B.featureIndex])continue;const K=[new l.P(L.x1,L.y1),new l.P(L.x2,L.y1),new l.P(L.x2,L.y2),new l.P(L.x1,L.y2)];l.an(u,K)&&(I[B.bucketInstanceId][B.featureIndex]=!0,z[B.bucketInstanceId]===void 0&&(z[B.bucketInstanceId]=[]),z[B.bucketInstanceId].push(B.featureIndex))}return z}insertCollisionBox(i,u,p,m,_,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:S,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,m,_,S){const k=p?this.ignoredGrid:this.grid,I={bucketInstanceId:m,featureIndex:_,collisionGroupID:S,overlapMode:u};for(let z=0;z<i.length;z+=4)k.insertCircle(I,i[z],i[z+1],i[z+2])}projectAndGetPerspectiveRatio(i,u,p,m){let _;return m?(_=[u,p,m(u,p),1],l.ag(_,_,i)):(_=[u,p,0,1],ne(_,_,i)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+oe,(-_[1]/_[3]+1)/2*this.transform.height+oe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,p,m){return p<oe||i>=this.screenRightBoundary||m<oe||u>this.screenBottomBoundary}isInsideGrid(i,u,p,m){return p>=0&&i<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.ao([]);return l.$(i,i,[-100,-100,0]),i}}function he(y,i,u){return i*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class ue{constructor(i,u,p,m){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,u,p,m,_){this.text=new ue(i?i.text:null,u,p,_),this.icon=new ue(i?i.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ae{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class Oe{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class He{constructor(i,u,p,m,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=_}}class Ct{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function Tt(y,i,u,p,m){const{horizontalAlign:_,verticalAlign:S}=l.au(y);return new l.P(-(_-.5)*i+p[0]*m,-(S-.5)*u+p[1]*m)}function yt(y,i,u,p,m,_){const{x1:S,x2:k,y1:I,y2:z,anchorPointX:L,anchorPointY:B}=y,K=new l.P(i,u);return p&&K._rotate(m?_:-_),{x1:S+K.x,y1:I+K.y,x2:k+K.x,y2:z+K.y,anchorPointX:L,anchorPointY:B}}class Dt{constructor(i,u,p,m,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new ve(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ct(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,m){const _=p.getBucket(u),S=p.latestFeatureIndex;if(!_||!S||u.id!==_.layerIds[0])return;const k=p.collisionBoxArray,I=_.layers[0].layout,z=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),L=p.tileSize/l.N,B=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),K=I.get("text-pitch-alignment")==="map",ce=I.get("text-rotation-alignment")==="map",le=he(p,1,this.transform.zoom),pe=Pe(B,K,ce,this.transform,le);let ae=null;if(K){const Le=ot(B,K,ce,this.transform,le);ae=l.a1([],this.transform.labelPlaneMatrix,Le)}this.retainedQueryData[_.bucketInstanceId]=new He(_.bucketInstanceId,S,_.sourceLayerIndex,_.index,p.tileID);const we={bucket:_,layout:I,posMatrix:B,textLabelPlaneMatrix:pe,labelToScreenMatrix:ae,scale:z,textPixelRatio:L,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const Le of _.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:Ce,symbolInstanceEnd:je}=Le;i.push({sortKey:ge,symbolInstanceStart:Ce,symbolInstanceEnd:je,parameters:we})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:we})}attemptAnchorPlacement(i,u,p,m,_,S,k,I,z,L,B,K,ce,le,pe,ae){const we=l.aq[i.textAnchor],Le=[i.textOffset0,i.textOffset1],ge=Tt(we,p,m,Le,_),Ce=this.collisionIndex.placeCollisionBox(yt(u,ge.x,ge.y,S,k,this.transform.angle),B,I,z,L.predicate,ae);if((!pe||this.collisionIndex.placeCollisionBox(yt(pe,ge.x,ge.y,S,k,this.transform.angle),B,I,z,L.predicate,ae).box.length!==0)&&Ce.box.length>0){let je;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(je=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Le,width:p,height:m,anchor:we,textBoxScale:_,prevAnchor:je},this.markUsedJustification(ce,we,K,le),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,le,K),this.placedOrientations[K.crossTileID]=le),{shift:ge,placedGlyphBoxes:Ce}}}placeLayerBucketPart(i,u,p){const{bucket:m,layout:_,posMatrix:S,textLabelPlaneMatrix:k,labelToScreenMatrix:I,textPixelRatio:z,holdingForFade:L,collisionBoxArray:B,partiallyEvaluatedTextSize:K,collisionGroup:ce}=i.parameters,le=_.get("text-optional"),pe=_.get("icon-optional"),ae=l.ar(_,"text-overlap","text-allow-overlap"),we=ae==="always",Le=l.ar(_,"icon-overlap","icon-allow-overlap"),ge=Le==="always",Ce=_.get("text-rotation-alignment")==="map",je=_.get("text-pitch-alignment")==="map",Ve=_.get("icon-text-fit")!=="none",Ge=_.get("symbol-z-order")==="viewport-y",Qe=we&&(ge||!m.hasIconData()||pe),Je=ge&&(we||!m.hasTextData()||le);!m.collisionArrays&&B&&m.deserializeCollisionBoxes(B);const rt=this.retainedQueryData[m.bucketInstanceId].tileID,Rt=this.terrain?(ht,Jt)=>this.terrain.getElevation(rt,ht,Jt):null,yr=(ht,Jt)=>{var Bt,Br;if(u[ht.crossTileID])return;if(L)return void(this.placements[ht.crossTileID]=new Ae(!1,!1,!1));let gr=!1,lr=!1,vr=!0,gn=null,Wr={box:null,offscreen:null},Qn={box:null,offscreen:null},On=null,Sn=null,Zi=null,Jr=0,Fo=0,No=0;Jt.textFeatureIndex?Jr=Jt.textFeatureIndex:ht.useRuntimeCollisionCircles&&(Jr=ht.featureIndex),Jt.verticalTextFeatureIndex&&(Fo=Jt.verticalTextFeatureIndex);const Ba=Jt.textBox;if(Ba){const ai=yn=>{let Fn=l.ai.horizontal;if(m.allowVerticalPlacement&&!yn&&this.prevPlacement){const Ii=this.prevPlacement.placedOrientations[ht.crossTileID];Ii&&(this.placedOrientations[ht.crossTileID]=Ii,Fn=Ii,this.markUsedOrientation(m,Fn,ht))}return Fn},ei=(yn,Fn)=>{if(m.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Jt.verticalTextBox){for(const Ii of m.writingModes)if(Ii===l.ai.vertical?(Wr=Fn(),Qn=Wr):Wr=yn(),Wr&&Wr.box&&Wr.box.length)break}else Wr=yn()},gi=ht.textAnchorOffsetStartIndex,as=ht.textAnchorOffsetEndIndex;if(as===gi){const yn=(Fn,Ii)=>{const vn=this.collisionIndex.placeCollisionBox(Fn,ae,z,S,ce.predicate,Rt);return vn&&vn.box&&vn.box.length&&(this.markUsedOrientation(m,Ii,ht),this.placedOrientations[ht.crossTileID]=Ii),vn};ei(()=>yn(Ba,l.ai.horizontal),()=>{const Fn=Jt.verticalTextBox;return m.allowVerticalPlacement&&ht.numVerticalGlyphVertices>0&&Fn?yn(Fn,l.ai.vertical):{box:null,offscreen:null}}),ai(Wr&&Wr.box&&Wr.box.length)}else{let yn=l.aq[(Br=(Bt=this.prevPlacement)===null||Bt===void 0?void 0:Bt.variableOffsets[ht.crossTileID])===null||Br===void 0?void 0:Br.anchor];const Fn=(vn,ss,Fc)=>{const Mf=vn.x2-vn.x1,Df=vn.y2-vn.y1,Xy=ht.textBoxScale,Ud=Ve&&Le==="never"?ss:null;let jo={box:[],offscreen:!1},ls=ae==="never"?1:2,Vo="never";yn&&ls++;for(let lo=0;lo<ls;lo++){for(let Uo=gi;Uo<as;Uo++){const Hd=m.textAnchorOffsets.get(Uo);if(yn&&Hd.textAnchor!==yn)continue;const ha=this.attemptAnchorPlacement(Hd,vn,Mf,Df,Xy,Ce,je,z,S,ce,Vo,ht,m,Fc,Ud,Rt);if(ha&&(jo=ha.placedGlyphBoxes,jo&&jo.box&&jo.box.length))return gr=!0,gn=ha.shift,jo}yn?yn=null:Vo=ae}return jo};ei(()=>Fn(Ba,Jt.iconBox,l.ai.horizontal),()=>{const vn=Jt.verticalTextBox;return m.allowVerticalPlacement&&!(Wr&&Wr.box&&Wr.box.length)&&ht.numVerticalGlyphVertices>0&&vn?Fn(vn,Jt.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),Wr&&(gr=Wr.box,vr=Wr.offscreen);const Ii=ai(Wr&&Wr.box);if(!gr&&this.prevPlacement){const vn=this.prevPlacement.variableOffsets[ht.crossTileID];vn&&(this.variableOffsets[ht.crossTileID]=vn,this.markUsedJustification(m,vn.anchor,ht,Ii))}}}if(On=Wr,gr=On&&On.box&&On.box.length>0,vr=On&&On.offscreen,ht.useRuntimeCollisionCircles){const ai=m.text.placedSymbolArray.get(ht.centerJustifiedTextSymbolIndex),ei=l.aj(m.textSizeData,K,ai),gi=_.get("text-padding");Sn=this.collisionIndex.placeCollisionCircles(ae,ai,m.lineVertexArray,m.glyphOffsetArray,ei,S,k,I,p,je,ce.predicate,ht.collisionCircleDiameter,gi,Rt),Sn.circles.length&&Sn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),gr=we||Sn.circles.length>0&&!Sn.collisionDetected,vr=vr&&Sn.offscreen}if(Jt.iconFeatureIndex&&(No=Jt.iconFeatureIndex),Jt.iconBox){const ai=ei=>{const gi=Ve&&gn?yt(ei,gn.x,gn.y,Ce,je,this.transform.angle):ei;return this.collisionIndex.placeCollisionBox(gi,Le,z,S,ce.predicate,Rt)};Qn&&Qn.box&&Qn.box.length&&Jt.verticalIconBox?(Zi=ai(Jt.verticalIconBox),lr=Zi.box.length>0):(Zi=ai(Jt.iconBox),lr=Zi.box.length>0),vr=vr&&Zi.offscreen}const os=le||ht.numHorizontalGlyphVertices===0&&ht.numVerticalGlyphVertices===0,Fs=pe||ht.numIconVertices===0;if(os||Fs?Fs?os||(lr=lr&&gr):gr=lr&&gr:lr=gr=lr&&gr,gr&&On&&On.box&&this.collisionIndex.insertCollisionBox(On.box,ae,_.get("text-ignore-placement"),m.bucketInstanceId,Qn&&Qn.box&&Fo?Fo:Jr,ce.ID),lr&&Zi&&this.collisionIndex.insertCollisionBox(Zi.box,Le,_.get("icon-ignore-placement"),m.bucketInstanceId,No,ce.ID),Sn&&(gr&&this.collisionIndex.insertCollisionCircles(Sn.circles,ae,_.get("text-ignore-placement"),m.bucketInstanceId,Jr,ce.ID),p)){const ai=m.bucketInstanceId;let ei=this.collisionCircleArrays[ai];ei===void 0&&(ei=this.collisionCircleArrays[ai]=new Oe);for(let gi=0;gi<Sn.circles.length;gi+=4)ei.circles.push(Sn.circles[gi+0]),ei.circles.push(Sn.circles[gi+1]),ei.circles.push(Sn.circles[gi+2]),ei.circles.push(Sn.collisionDetected?1:0)}if(ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ht.crossTileID]=new Ae(gr||Qe,lr||Je,vr||m.justReloaded),u[ht.crossTileID]=!0};if(Ge){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ht=m.getSortedSymbolIndexes(this.transform.angle);for(let Jt=ht.length-1;Jt>=0;--Jt){const Bt=ht[Jt];yr(m.symbolInstances.get(Bt),m.collisionArrays[Bt])}}else for(let ht=i.symbolInstanceStart;ht<i.symbolInstanceEnd;ht++)yr(m.symbolInstances.get(ht),m.collisionArrays[ht]);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const ht=this.collisionCircleArrays[m.bucketInstanceId];l.as(ht.invProjMatrix,S),ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(i,u,p,m){let _;_=m===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.at(u)];const S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of S)k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=_>=0&&k!==_?0:p.crossTileID)}markUsedOrientation(i,u,p){const m=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of S)i.text.placedSymbolArray.get(k).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},S=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const I in this.placements){const z=this.placements[I],L=_[I];L?(this.opacities[I]=new _e(L,m,z.text,z.icon),p=p||z.text!==L.text.placed||z.icon!==L.icon.placed):(this.opacities[I]=new _e(null,m,z.text,z.icon,z.skipFade),p=p||z.text||z.icon)}for(const I in _){const z=_[I];if(!this.opacities[I]){const L=new _e(z,m,!1,!1);L.isHidden()||(this.opacities[I]=L,p=p||z.text.placed||z.icon.placed)}}for(const I in S)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=S[I]);for(const I in k)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=k[I]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const m of u){const _=m.getBucket(i);_&&m.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,m.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const m=i.layers[0],_=m.layout,S=new _e(null,0,!1,!1,!0),k=_.get("text-allow-overlap"),I=_.get("icon-allow-overlap"),z=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),L=_.get("text-rotation-alignment")==="map",B=_.get("text-pitch-alignment")==="map",K=_.get("icon-text-fit")!=="none",ce=new _e(null,0,k&&(I||!i.hasIconData()||_.get("icon-optional")),I&&(k||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const le=(pe,ae,we)=>{for(let Le=0;Le<ae/4;Le++)pe.opacityVertexArray.emplaceBack(we);pe.hasVisibleVertices=pe.hasVisibleVertices||we!==hr};for(let pe=0;pe<i.symbolInstances.length;pe++){const ae=i.symbolInstances.get(pe),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:Le,crossTileID:ge}=ae;let Ce=this.opacities[ge];u[ge]?Ce=S:Ce||(Ce=ce,this.opacities[ge]=Ce),u[ge]=!0;const je=ae.numIconVertices>0,Ve=this.placedOrientations[ae.crossTileID],Ge=Ve===l.ai.vertical,Qe=Ve===l.ai.horizontal||Ve===l.ai.horizontalOnly;if(we>0||Le>0){const Je=rr(Ce.text);le(i.text,we,Ge?hr:Je),le(i.text,Le,Qe?hr:Je);const rt=Ce.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(ht=>{ht>=0&&(i.text.placedSymbolArray.get(ht).hidden=rt||Ge?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=rt||Qe?1:0);const Rt=this.variableOffsets[ae.crossTileID];Rt&&this.markUsedJustification(i,Rt.anchor,ae,Ve);const yr=this.placedOrientations[ae.crossTileID];yr&&(this.markUsedJustification(i,"left",ae,yr),this.markUsedOrientation(i,yr,ae))}if(je){const Je=rr(Ce.icon),rt=!(K&&ae.verticalPlacedIconSymbolIndex&&Ge);ae.placedIconSymbolIndex>=0&&(le(i.icon,ae.numIconVertices,rt?Je:hr),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=Ce.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(le(i.icon,ae.numVerticalIconVertices,rt?hr:Je),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=Ce.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Je=i.collisionArrays[pe];if(Je){let rt=new l.P(0,0);if(Je.textBox||Je.verticalTextBox){let yr=!0;if(z){const ht=this.variableOffsets[ge];ht?(rt=Tt(ht.anchor,ht.width,ht.height,ht.textOffset,ht.textBoxScale),L&&rt._rotate(B?this.transform.angle:-this.transform.angle)):yr=!1}Je.textBox&&Me(i.textCollisionBox.collisionVertexArray,Ce.text.placed,!yr||Ge,rt.x,rt.y),Je.verticalTextBox&&Me(i.textCollisionBox.collisionVertexArray,Ce.text.placed,!yr||Qe,rt.x,rt.y)}const Rt=!!(!Qe&&Je.verticalIconBox);Je.iconBox&&Me(i.iconCollisionBox.collisionVertexArray,Ce.icon.placed,Rt,K?rt.x:0,K?rt.y:0),Je.verticalIconBox&&Me(i.iconCollisionBox.collisionVertexArray,Ce.icon.placed,!Rt,K?rt.x:0,K?rt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=pe.invProjMatrix,i.placementViewportMatrix=pe.viewportMatrix,i.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Me(y,i,u,p,m){y.emplaceBack(i?1:0,u?1:0,p||0,m||0),y.emplaceBack(i?1:0,u?1:0,p||0,m||0),y.emplaceBack(i?1:0,u?1:0,p||0,m||0),y.emplaceBack(i?1:0,u?1:0,p||0,m||0)}const De=Math.pow(2,25),tt=Math.pow(2,24),dt=Math.pow(2,17),kt=Math.pow(2,16),dr=Math.pow(2,9),er=Math.pow(2,8),br=Math.pow(2,1);function rr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*De+i*tt+u*dt+i*kt+u*dr+i*er+u*br+i}const hr=0;class Xn{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,m,_){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(S,m,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((k,I)=>k.sortKey-I.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Vi{constructor(i,u,p,m,_,S,k,I){this.placement=new Dt(i,u,S,k,I),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const m=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-m>2;for(;this._currentPlacementIndex>=0;){const S=u[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=k)&&(!S.maxzoom||S.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Xn(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const xo=512/l.N/2;class rd{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const S=u.get(_),k=S.key,I=m.get(k);I?I.push(S):m.set(k,[S])}for(const[_,S]of m){const k={positions:S.map(I=>({x:Math.floor(I.anchorX*xo),y:Math.floor(I.anchorY*xo)})),crossTileIDs:S.map(I=>I.crossTileID)};if(k.positions.length>128){const I=new l.av(k.positions.length,16,Uint16Array);for(const{x:z,y:L}of k.positions)I.add(z,L);I.finish(),delete k.positions,k.index=I}this._symbolsByKey[_]=k}}getScaledCoordinates(i,u){const{x:p,y:m,z:_}=this.tileID.canonical,{x:S,y:k,z:I}=u.canonical,z=xo/Math.pow(2,I-_),L=(k*l.N+i.anchorY)*z,B=m*l.N*xo;return{x:Math.floor((S*l.N+i.anchorX)*z-p*l.N*xo),y:Math.floor(L-B)}}findMatches(i,u,p){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const S=i.get(_);if(S.crossTileID)continue;const k=this._symbolsByKey[S.key];if(!k)continue;const I=this.getScaledCoordinates(S,u);if(k.index){const z=k.index.range(I.x-m,I.y-m,I.x+m,I.y+m).sort();for(const L of z){const B=k.crossTileIDs[L];if(!p[B]){p[B]=!0,S.crossTileID=B;break}}}else if(k.positions)for(let z=0;z<k.positions.length;z++){const L=k.positions[z],B=k.crossTileIDs[z];if(Math.abs(L.x-I.x)<=m&&Math.abs(L.y-I.y)<=m&&!p[B]){p[B]=!0,S.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class zr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ps{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const m=this.indexes[p],_={};for(const S in m){const k=m[S];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),_[k.tileID.key]=k}this.indexes[p]=_}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const m=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const S=this.indexes[_];if(Number(_)>i.overscaledZ)for(const k in S){const I=S[k];I.tileID.isChildOf(i)&&I.findMatches(u.symbolInstances,i,m)}else{const k=S[i.scaledTo(Number(_)).key];k&&k.findMatches(u.symbolInstances,i,m)}}for(let _=0;_<u.symbolInstances.length;_++){const S=u.symbolInstances.get(_);S.crossTileID||(S.crossTileID=p.generate(),m[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new rd(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[i][m]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const m=this.indexes[p];for(const _ in m)i[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[_]),delete m[_],u=!0)}return u}}class ar{constructor(){this.layerIndexes={},this.crossTileIDs=new zr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let m=this.layerIndexes[i.id];m===void 0&&(m=this.layerIndexes[i.id]=new Ps);let _=!1;const S={};m.handleWrapJump(p);for(const k of u){const I=k.getBucket(i);I&&i.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(k.tileID,I,this.crossTileIDs)&&(_=!0),S[I.bucketInstanceId]=!0)}return m.removeStaleBuckets(S)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const Or=(y,i)=>l.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),$r=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),za=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),$n=l.aw();class Bn extends l.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new ft(Qt(),this,i._getMapId()),this.imageManager=new Ee,this.imageManager.setEventedParent(this),this.glyphManager=new Re(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new ct(256,512),this.crossTileSymbolIndex=new ar,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const p=this;this._rtlTextPluginCallback=Bn.registerForPluginStateChange(m=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,S)=>{if(l.aA(_),S&&S.every(k=>k))for(const k in p.sourceCaches){const I=p.sourceCaches[k].getSource().type;I!=="vector"&&I!=="geojson"||p.sourceCaches[k].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const S=_.getSource();if(S&&S.vectorLayerIds)for(const k in this._layers){const I=this._layers[k];I.source===S.id&&this._validateLayer(I)}})}loadURL(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(i,O.Style);this._request=l.f(m,(_,S)=>{this._request=null,_?this.fire(new l.j(_)):S&&this._load(S,u,p)})}loadJSON(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load($n,{validate:!1})}_load(i,u,p){var m;const _=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!Or(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const S in _.sources)this.addSource(S,_.sources[S],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Xe(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=l.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,S,k){const I=fe(m),z=I.length,L=S>1?"@2x":"",B={},K={},ce={};for(const{id:le,url:pe}of I){const ae=_.transformRequest(_.normalizeSpriteURL(pe,L,".json"),O.SpriteJSON),we=`${le}_${ae.url}`;B[we]=l.f(ae,(Ce,je)=>{delete B[we],K[le]=je,Te(k,K,ce,Ce,z)});const Le=_.transformRequest(_.normalizeSpriteURL(pe,L,".png"),O.SpriteImage),ge=`${le}_${Le.url}`;B[ge]=J.getImage(Le,(Ce,je)=>{delete B[ge],ce[le]=je,Te(k,K,ce,Ce,z)})}return{cancel(){for(const le of Object.values(B))le.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new l.j(m));else if(_)for(const S in _){this._spritesImagesIds[S]=[];const k=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(I=>!(I in _)):[];for(const I of k)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(const I in _[S]){const z=S==="default"?I:`${S}:${I}`;this._spritesImagesIds[S].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,_[S][I],!1):this.imageManager.addImage(z,_[S][I]),u&&(this._changedImages[z]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const m of i)u[m]&&p.push(u[m]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const m=this._layers[p];m.type!=="custom"&&(i[p]=m.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const S in this._updatedSources){const k=this._updatedSources[S];if(k==="reload")this._reloadSource(S);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];p[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in p){const _=this.sourceCaches[m];p[m]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,Or(this,l.y(i)))return!1;(i=l.aD(i)).layers=l.aB(i.layers);const m=l.aE(p,i).filter(S=>!(S.command in za));if(m.length===0)return!1;const _=m.filter(S=>!(S.command in $r));if(_.length>0)throw new Error(`Unimplemented: ${_.map(S=>S.command).join(", ")}.`);for(const S of m)S.command!=="setTransition"&&this[S.command].apply(this,S.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[i]=new pr(i,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:i})),m.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const m=i.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let _;if(i.type==="custom"){if(Or(this,l.aF(i)))return;_=l.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(m,i.source),i=l.aD(i),i=l.e(i,{source:m})),this._validate(l.y.layer,`layers.${m}`,i,{arrayIndex:-1},p))return;_=l.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const k=this._removedLayers[m];delete this._removedLayers[m],k.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(m,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const m=this.getLayer(i);m?m.minzoom===u&&m.maxzoom===p||(u!=null&&(m.minzoom=u),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const m=this.getLayer(i);if(m){if(!l.aG(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.y.filter,`layers.${m.id}.filter`,u,null,p)||(m.filter=l.aD(u),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,m={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,m),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,m={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,m=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const S=_.getSource().type;S==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||m?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,i.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=m.getSource().type,S=_==="vector"?i.sourceLayer:void 0;_!=="vector"||S?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(S,i.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aI({version:m.version,name:m.name,metadata:m.metadata,light:m.light,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:i,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=S=>this._layers[S].type==="fill-extrusion",p={},m=[];for(let S=this._order.length-1;S>=0;S--){const k=this._order[S];if(u(k)){p[k]=S;for(const I of i){const z=I[k];if(z)for(const L of z)m.push(L)}}}m.sort((S,k)=>k.intersectionZ-S.intersectionZ);const _=[];for(let S=this._order.length-1;S>=0;S--){const k=this._order[S];if(u(k))for(let I=m.length-1;I>=0;I--){const z=m[I].feature;if(p[z.layer.id]<S)break;_.push(z),m.pop()}else for(const I of i){const z=I[k];if(z)for(const L of z)_.push(L.feature)}}return _}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const k of u.layers){const I=this._layers[k];if(!I)return this.fire(new l.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];m[I.source]=!0}}const _=[];u.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const k in this.sourceCaches)u.layers&&!m[k]||_.push(wt(this.sourceCaches[k],this._layers,S,i,u,p));return this.placement&&_.push(function(k,I,z,L,B,K,ce){const le={},pe=K.queryRenderedSymbols(L),ae=[];for(const we of Object.keys(pe).map(Number))ae.push(ce[we]);ae.sort(or);for(const we of ae){const Le=we.featureIndex.lookupSymbolFeatures(pe[we.bucketInstanceId],I,we.bucketIndex,we.sourceLayerIndex,B.filter,B.layers,B.availableImages,k);for(const ge in Le){const Ce=le[ge]=le[ge]||[],je=Le[ge];je.sort((Ve,Ge)=>{const Qe=we.featureSortOrder;if(Qe){const Je=Qe.indexOf(Ve.featureIndex);return Qe.indexOf(Ge.featureIndex)-Je}return Ge.featureIndex-Ve.featureIndex});for(const Ve of je)Ce.push(Ve)}}for(const we in le)le[we].forEach(Le=>{const ge=Le.feature,Ce=z[k[we].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=Ce});return le}(this._layers,S,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(m,_){const S=m.getRenderableIds().map(z=>m.getTileByID(z)),k=[],I={};for(let z=0;z<S.length;z++){const L=S[z],B=L.tileID.canonical.key;I[B]||(I[B]=!0,L.querySourceFeatures(k,_))}return k}(p,u):[]}addSourceType(i,u,p){return Tr(i)?p(new Error(`A source type called "${i}" already exists.`)):(((m,_)=>{Er[m]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const S in i)if(!l.aG(i[S],p[S])){m=!0;break}if(!m)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,p,m,_={}){return(!_||_.validate!==!1)&&Or(this,i.call(l.y,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},m)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,m,_=!1){let S=!1,k=!1;const I={};for(const z of this._order){const L=this._layers[z];if(L.type!=="symbol")continue;if(!I[L.source]){const K=this.sourceCaches[L.source];I[L.source]=K.getRenderableIds(!0).map(ce=>K.getTileByID(ce)).sort((ce,le)=>le.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(le.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(L,I[L.source],i.center.lng);S=S||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),i.zoom))&&(this.pauseablePlacement=new Vi(i,this.map.terrain,this._order,_,u,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),k=!0),S&&this.pauseablePlacement.placement.setStale()),k||S)for(const z of this._order){const L=this._layers[z];L.type==="symbol"&&this.placement.updateLayerOpacities(L,I[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return l.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(l.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},m){this._checkLoaded();const _=[{id:i,url:u}],S=[...fe(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(_,!0,m))}removeSprite(i){this._checkLoaded();const u=fe(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return fe(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(l.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}Bn.registerForPluginStateChange=l.aK;var Ui=l.Q([{name:"a_pos",type:"Int16",components:2}]),fi="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const rn={prelude:Ar(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ar(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ar(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ar(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ar("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ar(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ar(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ar("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ar("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ar("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ar(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ar(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ar(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ar(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ar(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ar(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ar(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ar(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ar(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ar(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ar(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ar(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ar(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ar("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",fi),terrainDepth:Ar("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",fi),terrainCoords:Ar("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",fi)};function Ar(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),m=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=_?_.concat(m):m,k={};return{fragmentSource:y=y.replace(u,(I,z,L,B,K)=>(k[K]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${L} ${B} ${K};
#else
uniform ${L} ${B} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${L} ${B} ${K} = u_${K};
#endif
`)),vertexSource:i=i.replace(u,(I,z,L,B,K)=>{const ce=B==="float"?"vec2":"vec4",le=K.match(/color/)?"color":ce;return k[K]?z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${L} ${ce} a_${K};
varying ${L} ${B} ${K};
#else
uniform ${L} ${B} u_${K};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${L} ${B} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${le}(a_${K}, u_${K}_t);
#else
    ${L} ${B} ${K} = u_${K};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${L} ${ce} a_${K};
#else
uniform ${L} ${B} u_${K};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${L} ${B} ${K} = a_${K};
#else
    ${L} ${B} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${L} ${B} ${K} = unpack_mix_${le}(a_${K}, u_${K}_t);
#else
    ${L} ${B} ${K} = u_${K};
#endif
`}),staticAttributes:p,staticUniforms:S}}class Ja{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,m,_,S,k,I,z){this.context=i;let L=this.boundPaintVertexBuffers.length!==m.length;for(let B=0;!L&&B<m.length;B++)this.boundPaintVertexBuffers[B]!==m[B]&&(L=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||L||this.boundIndexBuffer!==_||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==z?this.freshBind(u,p,m,_,S,k,I,z):(i.bindVertexArray.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),I&&I.bind(),z&&z.bind())}freshBind(i,u,p,m,_,S,k,I){const z=i.numAttributes,L=this.context,B=L.gl;this.vao&&this.destroy(),this.vao=L.createVertexArray(),L.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=I,u.enableAttributes(B,i);for(const K of p)K.enableAttributes(B,i);S&&S.enableAttributes(B,i),k&&k.enableAttributes(B,i),I&&I.enableAttributes(B,i),u.bind(),u.setVertexAttribPointers(B,i,_);for(const K of p)K.bind(),K.setVertexAttribPointers(B,i,_);S&&(S.bind(),S.setVertexAttribPointers(B,i,_)),m&&m.bind(),k&&(k.bind(),k.setVertexAttribPointers(B,i,_)),I&&(I.bind(),I.setVertexAttribPointers(B,i,_)),L.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function dn(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");i.push(p.pop())}return i}class pc{constructor(i,u,p,m,_,S){const k=i.gl;this.program=k.createProgram();const I=dn(u.staticAttributes),z=p?p.getBinderAttributes():[],L=I.concat(z),B=rn.prelude.staticUniforms?dn(rn.prelude.staticUniforms):[],K=u.staticUniforms?dn(u.staticUniforms):[],ce=p?p.getBinderUniforms():[],le=B.concat(K).concat(ce),pe=[];for(const Ve of le)pe.indexOf(Ve)<0&&pe.push(Ve);const ae=p?p.defines():[];_&&ae.push("#define OVERDRAW_INSPECTOR;"),S&&ae.push("#define TERRAIN3D;");const we=ae.concat(rn.prelude.fragmentSource,u.fragmentSource).join(`
`),Le=ae.concat(rn.prelude.vertexSource,u.vertexSource).join(`
`),ge=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(ge,we),k.compileShader(ge),!k.getShaderParameter(ge,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(ge)}`);k.attachShader(this.program,ge);const Ce=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(Ce,Le),k.compileShader(Ce),!k.getShaderParameter(Ce,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(Ce)}`);k.attachShader(this.program,Ce),this.attributes={};const je={};this.numAttributes=L.length;for(let Ve=0;Ve<this.numAttributes;Ve++)L[Ve]&&(k.bindAttribLocation(this.program,Ve,L[Ve]),this.attributes[L[Ve]]=Ve);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(Ce),k.deleteShader(ge);for(let Ve=0;Ve<pe.length;Ve++){const Ge=pe[Ve];if(Ge&&!je[Ge]){const Qe=k.getUniformLocation(this.program,Ge);Qe&&(je[Ge]=Qe)}}this.fixedUniforms=m(i,je),this.terrainUniforms=((Ve,Ge)=>({u_depth:new l.aL(Ve,Ge.u_depth),u_terrain:new l.aL(Ve,Ge.u_terrain),u_terrain_dim:new l.aM(Ve,Ge.u_terrain_dim),u_terrain_matrix:new l.aN(Ve,Ge.u_terrain_matrix),u_terrain_unpack:new l.aO(Ve,Ge.u_terrain_unpack),u_terrain_exaggeration:new l.aM(Ve,Ge.u_terrain_exaggeration)}))(i,je),this.binderUniforms=p?p.getUniforms(i,je):[]}draw(i,u,p,m,_,S,k,I,z,L,B,K,ce,le,pe,ae,we,Le){const ge=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(m),i.setColorMode(_),i.setCullFace(S),I){i.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,I.depthTexture),i.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,I.texture);for(const je in this.terrainUniforms)this.terrainUniforms[je].set(I[je])}for(const je in this.fixedUniforms)this.fixedUniforms[je].set(k[je]);pe&&pe.setUniforms(i,this.binderUniforms,ce,{zoom:le});let Ce=0;switch(u){case ge.LINES:Ce=2;break;case ge.TRIANGLES:Ce=3;break;case ge.LINE_STRIP:Ce=1}for(const je of K.get()){const Ve=je.vaos||(je.vaos={});(Ve[z]||(Ve[z]=new Ja)).bind(i,this,L,pe?pe.getPaintVertexBuffers():[],B,je.vertexOffset,ae,we,Le),ge.drawElements(u,je.primitiveLength*Ce,ge.UNSIGNED_SHORT,je.primitiveOffset*Ce*2)}}}function io(y,i,u){const p=1/he(u,1,i.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/m,S=_*(u.tileID.canonical.x+u.tileID.wrap*m),k=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[S>>16,k>>16],u_pixel_coord_lower:[65535&S,65535&k]}}const nd=(y,i,u,p)=>{const m=i.style.light,_=m.properties.get("position"),S=[_.x,_.y,_.z],k=function(){var z=new l.A(9);return l.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,L){var B=Math.sin(L),K=Math.cos(L);z[0]=K,z[1]=B,z[2]=0,z[3]=-B,z[4]=K,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(k,-i.transform.angle),function(z,L,B){var K=L[0],ce=L[1],le=L[2];z[0]=K*B[0]+ce*B[3]+le*B[6],z[1]=K*B[1]+ce*B[4]+le*B[7],z[2]=K*B[2]+ce*B[5]+le*B[8]}(S,S,k);const I=m.properties.get("color");return{u_matrix:y,u_lightpos:S,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+u,u_opacity:p}},Aa=(y,i,u,p,m,_,S)=>l.e(nd(y,i,u,p),io(_,i,S),{u_height_factor:-Math.pow(2,m.overscaledZ)/S.tileSize/8}),Zp=y=>({u_matrix:y}),id=(y,i,u,p)=>l.e(Zp(y),io(u,i,p)),fc=(y,i)=>({u_matrix:y,u_world:i}),mc=(y,i,u,p,m)=>l.e(id(y,i,u,p),{u_world:m}),Ma=(y,i,u,p)=>{const m=y.transform;let _,S;if(p.paint.get("circle-pitch-alignment")==="map"){const k=he(u,1,m.zoom);_=!0,S=[k,k]}else _=!1,S=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:S}},od=(y,i,u)=>{const p=he(u,1,i.zoom),m=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*m),i.pixelsToGLUnits[1]/(p*m)],u_overscale_factor:_}},vl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),Kp=y=>({u_matrix:y}),Ly=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:he(i,1,u),u_intensity:p});function ad(y,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new l.U(0,p/u).toLngLat().lat,new l.U(0,(p+1)/u).toLngLat().lat]}const sd=(y,i,u,p)=>{const m=y.transform;return{u_matrix:gc(y,i,u,p),u_ratio:1/he(i,1,m.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Xp=(y,i,u,p,m)=>l.e(sd(y,i,u,m),{u_image:0,u_image_height:p}),$y=(y,i,u,p,m)=>{const _=y.transform,S=Yp(i,_);return{u_matrix:gc(y,i,u,m),u_texsize:i.imageAtlasTexture.size,u_ratio:1/he(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Jp=(y,i,u,p,m,_)=>{const S=y.lineAtlas,k=Yp(i,y.transform),I=u.layout.get("line-cap")==="round",z=S.getDash(p.from,I),L=S.getDash(p.to,I),B=z.width*m.fromScale,K=L.width*m.toScale;return l.e(sd(y,i,u,_),{u_patternscale_a:[k/B,-z.height/2],u_patternscale_b:[k/K,-L.height/2],u_sdfgamma:S.width/(256*Math.min(B,K)*y.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:L.y,u_mix:m.t})};function Yp(y,i){return 1/he(y,1,i.tileZoom)}function gc(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Qp=(y,i,u,p,m)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(S=m.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:ef(m.paint.get("raster-hue-rotate"))};var _,S};function ef(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const ld=(y,i,u,p,m,_,S,k,I,z)=>{const L=m.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:L.width/L.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:S,u_coord_matrix:k,u_is_text:+I,u_pitch_with_map:+p,u_texsize:z,u_texture:0}},cd=(y,i,u,p,m,_,S,k,I,z,L)=>{const B=m.transform;return l.e(ld(y,i,u,p,m,_,S,k,I,z),{u_gamma_scale:p?Math.cos(B._pitch)*B.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+L})},Ya=(y,i,u,p,m,_,S,k,I,z)=>l.e(cd(y,i,u,p,m,_,S,k,!0,I,!0),{u_texsize_icon:z,u_texture_icon:1}),yc=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),oo=(y,i,u,p,m,_)=>l.e(function(S,k,I,z){const L=I.imageManager.getPattern(S.from.toString()),B=I.imageManager.getPattern(S.to.toString()),{width:K,height:ce}=I.imageManager.getPixelSize(),le=Math.pow(2,z.tileID.overscaledZ),pe=z.tileSize*Math.pow(2,I.transform.tileZoom)/le,ae=pe*(z.tileID.canonical.x+z.tileID.wrap*le),we=pe*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[K,ce],u_mix:k.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/he(z,1,I.transform.tileZoom),u_pixel_coord_upper:[ae>>16,we>>16],u_pixel_coord_lower:[65535&ae,65535&we]}}(p,_,u,m),{u_matrix:y,u_opacity:i}),vc={fillExtrusion:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_opacity:new l.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_height_factor:new l.aM(y,i.u_height_factor),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade),u_opacity:new l.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,i.u_scale_with_map),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_matrix:new l.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_overscale_factor:new l.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_inv_matrix:new l.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new l.aR(y,i.u_color),u_matrix:new l.aN(y,i.u_matrix),u_overlay:new l.aL(y,i.u_overlay),u_overlay_scale:new l.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new l.aM(y,i.u_extrude_scale),u_intensity:new l.aM(y,i.u_intensity),u_matrix:new l.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_color_ramp:new l.aL(y,i.u_color_ramp),u_opacity:new l.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_latrange:new l.aQ(y,i.u_latrange),u_light:new l.aQ(y,i.u_light),u_shadow:new l.aR(y,i.u_shadow),u_highlight:new l.aR(y,i.u_highlight),u_accent:new l.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_dimension:new l.aQ(y,i.u_dimension),u_zoom:new l.aM(y,i.u_zoom),u_unpack:new l.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_image:new l.aL(y,i.u_image),u_image_height:new l.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texsize:new l.aQ(y,i.u_texsize),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_image:new l.aL(y,i.u_image),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_patternscale_a:new l.aQ(y,i.u_patternscale_a),u_patternscale_b:new l.aQ(y,i.u_patternscale_b),u_sdfgamma:new l.aM(y,i.u_sdfgamma),u_image:new l.aL(y,i.u_image),u_tex_y_a:new l.aM(y,i.u_tex_y_a),u_tex_y_b:new l.aM(y,i.u_tex_y_b),u_mix:new l.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_tl_parent:new l.aQ(y,i.u_tl_parent),u_scale_parent:new l.aM(y,i.u_scale_parent),u_buffer_scale:new l.aM(y,i.u_buffer_scale),u_fade_t:new l.aM(y,i.u_fade_t),u_opacity:new l.aM(y,i.u_opacity),u_image0:new l.aL(y,i.u_image0),u_image1:new l.aL(y,i.u_image1),u_brightness_low:new l.aM(y,i.u_brightness_low),u_brightness_high:new l.aM(y,i.u_brightness_high),u_saturation_factor:new l.aM(y,i.u_saturation_factor),u_contrast_factor:new l.aM(y,i.u_contrast_factor),u_spin_weights:new l.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texsize_icon:new l.aQ(y,i.u_texsize_icon),u_texture:new l.aL(y,i.u_texture),u_texture_icon:new l.aL(y,i.u_texture_icon),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_color:new l.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_image:new l.aL(y,i.u_image),u_pattern_tl_a:new l.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,i.u_pattern_br_b),u_texsize:new l.aQ(y,i.u_texsize),u_mix:new l.aM(y,i.u_mix),u_pattern_size_a:new l.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,i.u_pattern_size_b),u_scale_a:new l.aM(y,i.u_scale_a),u_scale_b:new l.aM(y,i.u_scale_b),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_terrain_coords_id:new l.aM(y,i.u_terrain_coords_id),u_ele_delta:new l.aM(y,i.u_ele_delta)})};class _c{constructor(i,u,p){this.context=i;const m=i.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _l={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xc{constructor(i,u,p,m){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const m=u.attributes[this.attributes[p].name];m!==void 0&&i.enableVertexAttribArray(m)}}setVertexAttribPointers(i,u,p){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],S=u.attributes[_.name];S!==void 0&&i.vertexAttribPointer(S,_.components,i[_l[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Es=new WeakMap;function Da(y){var i;if(Es.has(y))return Es.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Es.set(y,u),u}}class wr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bc extends wr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Hi extends wr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Wi extends wr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class ud extends wr{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class wc extends wr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Sc extends wr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class dd extends wr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class hd extends wr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Cc extends wr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class pd extends wr{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class fd extends wr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class kc extends wr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class tf extends wr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class rf extends wr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class zs extends wr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class By extends wr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Oy extends wr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Fy extends wr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Ny extends wr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class jy extends wr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Vy extends wr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class md extends wr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Tc extends wr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class gd extends wr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class yd extends wr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class As extends wr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class nf extends wr{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class of extends wr{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Da(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class vd extends wr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Qa extends wr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class af extends wr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ra extends wr{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Ms extends Ra{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class sf extends Ra{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class _d extends Ra{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Mr{constructor(i,u,p,m,_){this.context=i,this.width=u,this.height=p;const S=i.gl,k=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Ms(i,k),m)this.depthAttachment=_?new _d(i,k):new sf(i,k);else if(_)throw new Error("Stencil cannot be setted without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class nn{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}nn.Replace=[1,0],nn.disabled=new nn(nn.Replace,l.aT.transparent,[!1,!1,!1,!1]),nn.unblended=new nn(nn.Replace,l.aT.transparent,[!0,!0,!0,!0]),nn.alphaBlended=new nn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class Uy{constructor(i){var u,p;if(this.gl=i,this.clearColor=new bc(this),this.clearDepth=new Hi(this),this.clearStencil=new Wi(this),this.colorMask=new ud(this),this.depthMask=new wc(this),this.stencilMask=new Sc(this),this.stencilFunc=new dd(this),this.stencilOp=new hd(this),this.stencilTest=new Cc(this),this.depthRange=new pd(this),this.depthTest=new fd(this),this.depthFunc=new kc(this),this.blend=new tf(this),this.blendFunc=new rf(this),this.blendColor=new zs(this),this.blendEquation=new By(this),this.cullFace=new Oy(this),this.cullFaceSide=new Fy(this),this.frontFace=new Ny(this),this.program=new jy(this),this.activeTexture=new Vy(this),this.viewport=new md(this),this.bindFramebuffer=new Tc(this),this.bindRenderbuffer=new gd(this),this.bindTexture=new yd(this),this.bindVertexBuffer=new As(this),this.bindElementBuffer=new nf(this),this.bindVertexArray=new of(this),this.pixelStoreUnpack=new vd(this),this.pixelStoreUnpackPremultiplyAlpha=new Qa(this),this.pixelStoreUnpackFlipY=new af(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Da(i)){this.HALF_FLOAT=i.HALF_FLOAT;const m=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const m=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new _c(this,i,u)}createVertexBuffer(i,u,p){return new xc(this,i,u,p)}createRenderbuffer(i,u,p){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,p,m){return new Mr(this,i,u,p,m)}clear({color:i,depth:u,stencil:p}){const m=this.gl;let _=0;i&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aG(i.blendFunction,nn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Da(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Da(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Sr{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(519,Sr.ReadOnly,[0,1]);const es=7680;class on{constructor(i,u,p,m,_,S){this.test=i,this.ref=u,this.mask=p,this.fail=m,this.depthFail=_,this.pass=S}}on.disabled=new on({func:519,mask:0},0,0,es,es,es);class en{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let xl;function lf(y,i,u,p,m,_,S){const k=y.context,I=k.gl,z=y.useProgram("collisionBox"),L=[];let B=0,K=0;for(let ge=0;ge<p.length;ge++){const Ce=p[ge],je=i.getTile(Ce),Ve=je.getBucket(u);if(!Ve)continue;let Ge=Ce.posMatrix;m[0]===0&&m[1]===0||(Ge=y.translatePosMatrix(Ce.posMatrix,je,m,_));const Qe=S?Ve.textCollisionBox:Ve.iconCollisionBox,Je=Ve.collisionCircleArray;if(Je.length>0){const rt=l.Z(),Rt=Ge;l.aU(rt,Ve.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(rt,rt,Ve.placementViewportMatrix),L.push({circleArray:Je,circleOffset:K,transform:Rt,invTransform:rt,coord:Ce}),B+=Je.length/4,K=B}Qe&&z.draw(k,I.LINES,Sr.disabled,on.disabled,y.colorModeForRenderPass(),en.disabled,od(Ge,y.transform,je),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ce),u.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,null,y.transform.zoom,null,null,Qe.collisionVertexBuffer)}if(!S||!L.length)return;const ce=y.useProgram("collisionCircle"),le=new l.aV;le.resize(4*B),le._trim();let pe=0;for(const ge of L)for(let Ce=0;Ce<ge.circleArray.length/4;Ce++){const je=4*Ce,Ve=ge.circleArray[je+0],Ge=ge.circleArray[je+1],Qe=ge.circleArray[je+2],Je=ge.circleArray[je+3];le.emplace(pe++,Ve,Ge,Qe,Je,0),le.emplace(pe++,Ve,Ge,Qe,Je,1),le.emplace(pe++,Ve,Ge,Qe,Je,2),le.emplace(pe++,Ve,Ge,Qe,Je,3)}(!xl||xl.length<2*B)&&(xl=function(ge){const Ce=2*ge,je=new l.aX;je.resize(Ce),je._trim();for(let Ve=0;Ve<Ce;Ve++){const Ge=6*Ve;je.uint16[Ge+0]=4*Ve+0,je.uint16[Ge+1]=4*Ve+1,je.uint16[Ge+2]=4*Ve+2,je.uint16[Ge+3]=4*Ve+2,je.uint16[Ge+4]=4*Ve+3,je.uint16[Ge+5]=4*Ve+0}return je}(B));const ae=k.createIndexBuffer(xl,!0),we=k.createVertexBuffer(le,l.aW.members,!0);for(const ge of L){const Ce={u_matrix:ge.transform,u_inv_matrix:ge.invTransform,u_camera_to_center_distance:(Le=y.transform).cameraToCenterDistance,u_viewport_size:[Le.width,Le.height]};ce.draw(k,I.TRIANGLES,Sr.disabled,on.disabled,y.colorModeForRenderPass(),en.disabled,Ce,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge.coord),u.id,we,ae,l.S.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Le;we.destroy(),ae.destroy()}en.disabled=new en(!1,1029,2305),en.backCCW=new en(!0,1029,2305);const xd=l.ao(new Float32Array(16));function Ic(y,i,u,p,m,_){const{horizontalAlign:S,verticalAlign:k}=l.au(y);return new l.P((-(S-.5)*i/m+p[0])*_,(-(k-.5)*u/m+p[1])*_)}function Pc(y,i,u,p,m,_,S,k,I,z,L){const B=y.text.placedSymbolArray,K=y.text.dynamicLayoutVertexArray,ce=y.icon.dynamicLayoutVertexArray,le={};K.clear();for(let pe=0;pe<B.length;pe++){const ae=B.get(pe),we=ae.hidden||!ae.crossTileID||y.allowVerticalPlacement&&!ae.placedOrientation?null:p[ae.crossTileID];if(we){const Le=new l.P(ae.anchorX,ae.anchorY),ge=St(Le,u?S:_,L),Ce=ir(m.cameraToCenterDistance,ge.signedDistanceFromCamera);let je=l.aj(y.textSizeData,I,ae)*Ce/l.ap;u&&(je*=y.tilePixelRatio/k);const{width:Ve,height:Ge,anchor:Qe,textOffset:Je,textBoxScale:rt}=we,Rt=Ic(Qe,Ve,Ge,Je,rt,je),yr=u?St(Le.add(Rt),_,L).point:ge.point.add(i?Rt.rotate(-m.angle):Rt),ht=y.allowVerticalPlacement&&ae.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let Jt=0;Jt<ae.numGlyphs;Jt++)l.ak(K,yr,ht);z&&ae.associatedIconIndex>=0&&(le[ae.associatedIconIndex]={shiftedAnchor:yr,angle:ht})}else q(ae.numGlyphs,K)}if(z){ce.clear();const pe=y.icon.placedSymbolArray;for(let ae=0;ae<pe.length;ae++){const we=pe.get(ae);if(we.hidden)q(we.numGlyphs,ce);else{const Le=le[ae];if(Le)for(let ge=0;ge<we.numGlyphs;ge++)l.ak(ce,Le.shiftedAnchor,Le.angle);else q(we.numGlyphs,ce)}}y.icon.dynamicLayoutVertexBuffer.updateData(ce)}y.text.dynamicLayoutVertexBuffer.updateData(K)}function bd(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Ec(y,i,u,p,m,_,S,k,I,z,L,B){const K=y.context,ce=K.gl,le=y.transform,pe=k==="map",ae=I==="map",we=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Le=pe&&!ae&&!we,ge=!u.layout.get("symbol-sort-key").isConstant();let Ce=!1;const je=y.depthModeForSublayer(0,Sr.ReadOnly),Ve=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[];for(const Qe of p){const Je=i.getTile(Qe),rt=Je.getBucket(u);if(!rt)continue;const Rt=m?rt.text:rt.icon;if(!Rt||!Rt.segments.get().length||!Rt.hasVisibleVertices)continue;const yr=Rt.programConfigurations.get(u.id),ht=m||rt.sdfIcons,Jt=m?rt.textSizeData:rt.iconSizeData,Bt=ae||le.pitch!==0,Br=y.useProgram(bd(ht,m,rt),yr),gr=l.ah(Jt,le.zoom),lr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Qe);let vr,gn,Wr,Qn,On=[0,0],Sn=null;if(m)gn=Je.glyphAtlasTexture,Wr=ce.LINEAR,vr=Je.glyphAtlasTexture.size,rt.iconsInText&&(On=Je.imageAtlasTexture.size,Sn=Je.imageAtlasTexture,Qn=Bt||y.options.rotating||y.options.zooming||Jt.kind==="composite"||Jt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const yn=u.layout.get("icon-size").constantOr(0)!==1||rt.iconsNeedLinear;gn=Je.imageAtlasTexture,Wr=ht||y.options.rotating||y.options.zooming||yn||Bt?ce.LINEAR:ce.NEAREST,vr=Je.imageAtlasTexture.size}const Zi=he(Je,1,y.transform.zoom),Jr=Pe(Qe.posMatrix,ae,pe,y.transform,Zi),Fo=ot(Qe.posMatrix,ae,pe,y.transform,Zi),No=Ve&&rt.hasTextData(),Ba=u.layout.get("icon-text-fit")!=="none"&&No&&rt.hasIconData();if(we){const yn=y.style.map.terrain?(Ii,vn)=>y.style.map.terrain.getElevation(Qe,Ii,vn):null,Fn=u.layout.get("text-rotation-alignment")==="map";Ze(rt,Qe.posMatrix,y,m,Jr,Fo,ae,z,Fn,yn)}const os=y.translatePosMatrix(Qe.posMatrix,Je,_,S),Fs=we||m&&Ve||Ba?xd:Jr,ai=y.translatePosMatrix(Fo,Je,_,S,!0),ei=ht&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let gi;gi=ht?rt.iconsInText?Ya(Jt.kind,gr,Le,ae,y,os,Fs,ai,vr,On):cd(Jt.kind,gr,Le,ae,y,os,Fs,ai,m,vr,!0):ld(Jt.kind,gr,Le,ae,y,os,Fs,ai,m,vr);const as={program:Br,buffers:Rt,uniformValues:gi,atlasTexture:gn,atlasTextureIcon:Sn,atlasInterpolation:Wr,atlasInterpolationIcon:Qn,isSDF:ht,hasHalo:ei};if(ge&&rt.canOverlap){Ce=!0;const yn=Rt.segments.get();for(const Fn of yn)Ge.push({segments:new l.S([Fn]),sortKey:Fn.sortKey,state:as,terrainData:lr})}else Ge.push({segments:Rt.segments,sortKey:0,state:as,terrainData:lr})}Ce&&Ge.sort((Qe,Je)=>Qe.sortKey-Je.sortKey);for(const Qe of Ge){const Je=Qe.state;if(K.activeTexture.set(ce.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,ce.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(K.activeTexture.set(ce.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Je.isSDF){const rt=Je.uniformValues;Je.hasHalo&&(rt.u_is_halo=1,wd(Je.buffers,Qe.segments,u,y,Je.program,je,L,B,rt,Qe.terrainData)),rt.u_is_halo=0}wd(Je.buffers,Qe.segments,u,y,Je.program,je,L,B,Je.uniformValues,Qe.terrainData)}}function wd(y,i,u,p,m,_,S,k,I,z){const L=p.context;m.draw(L,L.gl.TRIANGLES,_,S,k,en.disabled,I,z,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function bl(y,i,u,p,m){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let S=_[u.to.toString()],k=_[u.from.toString()];if(!S&&k&&(S=k),!k&&S&&(k=S),!S||!k){const I=m.getPaintProperty(i);S=_[I],k=_[I]}S&&k&&y.setConstantPatternPositions(S,k)}function wl(y,i,u,p,m,_,S){const k=y.context.gl,I="fill-pattern",z=u.paint.get(I),L=z&&z.constantOr(1),B=u.getCrossfadeParameters();let K,ce,le,pe,ae;S?(ce=L&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=k.LINES):(ce=L?"fillPattern":"fill",K=k.TRIANGLES);const we=z.constantOr(null);for(const Le of p){const ge=i.getTile(Le);if(L&&!ge.patternsLoaded())continue;const Ce=ge.getBucket(u);if(!Ce)continue;const je=Ce.programConfigurations.get(u.id),Ve=y.useProgram(ce,je),Ge=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Le);L&&(y.context.activeTexture.set(k.TEXTURE0),ge.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),je.updatePaintBuffers(B)),bl(je,I,we,ge,u);const Qe=Ge?Le:null,Je=y.translatePosMatrix(Qe?Qe.posMatrix:Le.posMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){pe=Ce.indexBuffer2,ae=Ce.segments2;const rt=[k.drawingBufferWidth,k.drawingBufferHeight];le=ce==="fillOutlinePattern"&&L?mc(Je,y,B,ge,rt):fc(Je,rt)}else pe=Ce.indexBuffer,ae=Ce.segments,le=L?id(Je,y,B,ge):Zp(Je);Ve.draw(y.context,K,m,y.stencilModeForClipping(Le),_,en.disabled,le,Ge,u.id,Ce.layoutVertexBuffer,pe,ae,u.paint,y.transform.zoom,je)}}function Sl(y,i,u,p,m,_,S){const k=y.context,I=k.gl,z="fill-extrusion-pattern",L=u.paint.get(z),B=L.constantOr(1),K=u.getCrossfadeParameters(),ce=u.paint.get("fill-extrusion-opacity"),le=L.constantOr(null);for(const pe of p){const ae=i.getTile(pe),we=ae.getBucket(u);if(!we)continue;const Le=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),ge=we.programConfigurations.get(u.id),Ce=y.useProgram(B?"fillExtrusionPattern":"fillExtrusion",ge);B&&(y.context.activeTexture.set(I.TEXTURE0),ae.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ge.updatePaintBuffers(K)),bl(ge,z,le,ae,u);const je=y.translatePosMatrix(pe.posMatrix,ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ve=u.paint.get("fill-extrusion-vertical-gradient"),Ge=B?Aa(je,y,Ve,ce,pe,K,ae):nd(je,y,Ve,ce);Ce.draw(k,k.gl.TRIANGLES,m,_,S,en.backCCW,Ge,Le,u.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,u.paint,y.transform.zoom,ge,y.style.map.terrain&&we.centroidVertexBuffer)}}function Hy(y,i,u,p,m,_,S){const k=y.context,I=k.gl,z=u.fbo;if(!z)return;const L=y.useProgram("hillshade"),B=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);k.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),L.draw(k,I.TRIANGLES,m,_,S,en.disabled,((K,ce,le,pe)=>{const ae=le.paint.get("hillshade-shadow-color"),we=le.paint.get("hillshade-highlight-color"),Le=le.paint.get("hillshade-accent-color");let ge=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=K.transform.angle);const Ce=!K.options.moving;return{u_matrix:pe?pe.posMatrix:K.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:ad(0,ce.tileID),u_light:[le.paint.get("hillshade-exaggeration"),ge],u_shadow:ae,u_highlight:we,u_accent:Le}})(y,u,p,B?i:null),B,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Sd(y,i,u,p,m,_){const S=y.context,k=S.gl,I=i.dem;if(I&&I.data){const z=I.dim,L=I.stride,B=I.getPixels();if(S.activeTexture.set(k.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(L),i.demTexture){const ce=i.demTexture;ce.update(B,{premultiply:!1}),ce.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else i.demTexture=new be(S,B,k.RGBA,{premultiply:!1}),i.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);S.activeTexture.set(k.TEXTURE0);let K=i.fbo;if(!K){const ce=new be(S,{width:z,height:z,data:null},k.RGBA);ce.bind(k.LINEAR,k.CLAMP_TO_EDGE),K=i.fbo=S.createFramebuffer(z,z,!0,!1),K.colorAttachment.set(ce.texture)}S.bindFramebuffer.set(K.framebuffer),S.viewport.set([0,0,z,z]),y.useProgram("hillshadePrepare").draw(S,k.TRIANGLES,p,m,_,en.disabled,((ce,le)=>{const pe=le.stride,ae=l.Z();return l.aS(ae,0,l.N,-l.N,0,0,1),l.$(ae,ae,[0,-l.N,0]),{u_matrix:ae,u_image:1,u_dimension:[pe,pe],u_zoom:ce.overscaledZ,u_unpack:le.getUnpackVector()}})(i.tileID,I),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Wy(y,i,u,p,m,_){const S=p.paint.get("raster-fade-duration");if(!_&&S>0){const k=l.h.now(),I=(k-y.timeAdded)/S,z=i?(k-i.timeAdded)/S:-1,L=u.getSource(),B=m.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),K=!i||Math.abs(i.tileID.overscaledZ-B)>Math.abs(y.tileID.overscaledZ-B),ce=K&&y.refreshedUponExpiration?1:l.ad(K?I:1-z,0,1);return y.refreshedUponExpiration&&I>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}const cf=new l.aT(1,0,0,1),zc=new l.aT(0,1,0,1),Cd=new l.aT(0,0,1,1),uf=new l.aT(1,0,1,1),df=new l.aT(0,1,1,1);function Cl(y,i,u,p){Mc(y,0,i+u/2,y.transform.width,u,p)}function Ac(y,i,u,p){Mc(y,i-u/2,0,u,y.transform.height,p)}function Mc(y,i,u,p,m,_){const S=y.context,k=S.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,m*y.pixelRatio),S.clear({color:_}),k.disable(k.SCISSOR_TEST)}function hf(y,i,u){const p=y.context,m=p.gl,_=u.posMatrix,S=y.useProgram("debug"),k=Sr.disabled,I=on.disabled,z=y.colorModeForRenderPass(),L="$debug",B=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(m.TEXTURE0);const K=i.getTileByID(u.key).latestRawTileData,ce=Math.floor((K&&K.byteLength||0)/1024),le=i.getTile(u).tileSize,pe=512/Math.min(le,512)*(u.overscaledZ/y.transform.zoom)*.5;let ae=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ae+=` => ${u.overscaledZ}`),function(we,Le){we.initDebugOverlayCanvas();const ge=we.debugOverlayCanvas,Ce=we.context.gl,je=we.debugOverlayCanvas.getContext("2d");je.clearRect(0,0,ge.width,ge.height),je.shadowColor="white",je.shadowBlur=2,je.lineWidth=1.5,je.strokeStyle="white",je.textBaseline="top",je.font="bold 36px Open Sans, sans-serif",je.fillText(Le,5,5),je.strokeText(Le,5,5),we.debugOverlayTexture.update(ge),we.debugOverlayTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE)}(y,`${ae} ${ce}kB`),S.draw(p,m.TRIANGLES,k,I,nn.alphaBlended,en.disabled,vl(_,l.aT.transparent,pe),null,L,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),S.draw(p,m.LINE_STRIP,k,I,z,en.disabled,vl(_,l.aT.red),B,L,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function hn(y,i,u){const p=y.context,m=p.gl,_=y.colorModeForRenderPass(),S=new Sr(m.LEQUAL,Sr.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),I=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const z of u){const L=y.renderToTexture.getTexture(z),B=i.getTerrainData(z.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,L.texture);const K={u_matrix:y.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};k.draw(p,m.TRIANGLES,S,on.disabled,_,en.backCCW,K,B,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class ts{constructor(i,u){this.context=new Uy(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=pr.maxUnderzooming+pr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ar}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=i.createVertexBuffer(u,Ui.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const p=new l.a_;p.emplaceBack(0,0),p.emplaceBack(l.N,0),p.emplaceBack(0,l.N),p.emplaceBack(l.N,l.N),this.debugBuffer=i.createVertexBuffer(p,Ui.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const m=new l.V;m.emplaceBack(0,0,0,0),m.emplaceBack(l.N,0,l.N,0),m.emplaceBack(0,l.N,0,l.N),m.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=i.createVertexBuffer(m,st.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,Ui.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const S=new l.a$;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);const k=new l.b0;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k);const I=this.context.gl;this.stencilClearMode=new on({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.Z();l.aS(p,0,this.width,this.height,0,0,1),l.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,Sr.disabled,this.stencilClearMode,nn.disabled,en.disabled,Kp(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,m=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(nn.disabled),p.setDepthMode(Sr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const k=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);_.draw(p,m.TRIANGLES,Sr.disabled,new on({func:m.ALWAYS,mask:0},k,255,m.KEEP,m.KEEP,m.REPLACE),nn.disabled,en.disabled,Kp(S.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new on({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new on({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((S,k)=>k.overscaledZ-S.overscaledZ),m=p[p.length-1].overscaledZ,_=p[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const S={};for(let k=0;k<_;k++)S[k+m]=new on({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[S,p]}return[{[m]:on.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new nn([i.CONSTANT_COLOR,i.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?nn.unblended:nn.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return Sr.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Sr(p||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const p=this.style._order,m=this.style.sourceCaches,_={},S={},k={};for(const I in m){const z=m[I];z.used&&z.prepare(this.context),_[I]=z.getVisibleCoordinates(),S[I]=_[I].slice().reverse(),k[I]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<p.length;I++)if(this.style._layers[p[I]].is3D()){this.opaquePassCutoff=I;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const I=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||I.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,L){const B=z.context,K=B.gl,ce=nn.unblended,le=new Sr(K.LEQUAL,Sr.ReadWrite,[0,1]),pe=L.getTerrainMesh(),ae=L.sourceCache.getRenderableTiles(),we=z.useProgram("terrainDepth");B.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),B.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),B.clear({color:l.aT.transparent,depth:1});for(const Le of ae){const ge=L.getTerrainData(Le.tileID),Ce={u_matrix:z.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_ele_delta:L.getMeshFrameDelta(z.transform.zoom)};we.draw(B,K.TRIANGLES,le,on.disabled,ce,en.backCCW,Ce,ge,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}B.bindFramebuffer.set(null),B.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain),function(z,L){const B=z.context,K=B.gl,ce=nn.unblended,le=new Sr(K.LEQUAL,Sr.ReadWrite,[0,1]),pe=L.getTerrainMesh(),ae=L.getCoordsTexture(),we=L.sourceCache.getRenderableTiles(),Le=z.useProgram("terrainCoords");B.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),B.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),B.clear({color:l.aT.transparent,depth:1}),L.coordsIndex=[];for(const ge of we){const Ce=L.getTerrainData(ge.tileID);B.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ae.texture);const je={u_matrix:z.transform.calculatePosMatrix(ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(z.transform.zoom)};Le.draw(B,K.TRIANGLES,le,on.disabled,ce,en.backCCW,je,Ce,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),L.coordsIndex.push(ge.tileID.key)}B.bindFramebuffer.set(null),B.viewport.set([0,0,z.width,z.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const I of p){const z=this.style._layers[I];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const L=S[z.source];(z.type==="custom"||L.length)&&this.renderLayer(this,m[z.source],z,L)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[p[this.currentLayer]],z=m[I.source],L=_[I.source];this._renderTileClippingMasks(I,L),this.renderLayer(this,z,I,L)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const I=this.style._layers[p[this.currentLayer]],z=m[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;const L=(I.type==="symbol"?k:S)[I.source];this._renderTileClippingMasks(I,_[I.source]),this.renderLayer(this,z,I,L)}if(this.options.showTileBoundaries){const I=function(z,L){let B=null;const K=Object.values(z._layers).flatMap(ae=>ae.source&&!ae.isHidden(L)?[z.sourceCaches[ae.source]]:[]),ce=K.filter(ae=>ae.getSource().type==="vector"),le=K.filter(ae=>ae.getSource().type!=="vector"),pe=ae=>{(!B||B.getSource().maxzoom<ae.getSource().maxzoom)&&(B=ae)};return ce.forEach(ae=>pe(ae)),B||le.forEach(ae=>pe(ae)),B}(this.style,this.transform.zoom);I&&function(z,L,B){for(let K=0;K<B.length;K++)hf(z,L,B[K])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const z=I.transform.padding;Cl(I,I.transform.height-(z.top||0),3,cf),Cl(I,z.bottom||0,3,zc),Ac(I,z.left||0,3,Cd),Ac(I,I.transform.width-(z.right||0),3,uf);const L=I.transform.centerPoint;(function(B,K,ce,le){Mc(B,K-1,ce-10,2,20,le),Mc(B,K-10,ce-1,20,2,le)})(I,L.x,I.transform.height-L.y,df)}(this),this.context.setDefault()}renderLayer(i,u,p,m){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(m||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,S,k,I,z){if(_.renderPass!=="translucent")return;const L=on.disabled,B=_.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(K,ce,le,pe,ae,we,Le){const ge=ce.transform,Ce=ae==="map",je=we==="map";for(const Ve of K){const Ge=pe.getTile(Ve),Qe=Ge.getBucket(le);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const Je=l.ah(Qe.textSizeData,ge.zoom),rt=he(Ge,1,ce.transform.zoom),Rt=Pe(Ve.posMatrix,je,Ce,ce.transform,rt),yr=le.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(Je){const ht=Math.pow(2,ge.zoom-Ge.tileID.overscaledZ);Pc(Qe,Ce,je,Le,ge,Rt,Ve.posMatrix,ht,Je,yr,ce.style.map.terrain?(Jt,Bt)=>ce.style.map.terrain.getElevation(Ve,Jt,Bt):null)}}}(I,_,k,S,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),z),k.paint.get("icon-opacity").constantOr(1)!==0&&Ec(_,S,k,I,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),L,B),k.paint.get("text-opacity").constantOr(1)!==0&&Ec(_,S,k,I,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),L,B),S.map.showCollisionBoxes&&(lf(_,S,k,I,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),lf(_,S,k,I,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(i,u,p,m,this.style.placement.variableOffsets);break;case"circle":(function(_,S,k,I){if(_.renderPass!=="translucent")return;const z=k.paint.get("circle-opacity"),L=k.paint.get("circle-stroke-width"),B=k.paint.get("circle-stroke-opacity"),K=!k.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(L.constantOr(1)===0||B.constantOr(1)===0))return;const ce=_.context,le=ce.gl,pe=_.depthModeForSublayer(0,Sr.ReadOnly),ae=on.disabled,we=_.colorModeForRenderPass(),Le=[];for(let ge=0;ge<I.length;ge++){const Ce=I[ge],je=S.getTile(Ce),Ve=je.getBucket(k);if(!Ve)continue;const Ge=Ve.programConfigurations.get(k.id),Qe=_.useProgram("circle",Ge),Je=Ve.layoutVertexBuffer,rt=Ve.indexBuffer,Rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ce),yr={programConfiguration:Ge,program:Qe,layoutVertexBuffer:Je,indexBuffer:rt,uniformValues:Ma(_,Ce,je,k),terrainData:Rt};if(K){const ht=Ve.segments.get();for(const Jt of ht)Le.push({segments:new l.S([Jt]),sortKey:Jt.sortKey,state:yr})}else Le.push({segments:Ve.segments,sortKey:0,state:yr})}K&&Le.sort((ge,Ce)=>ge.sortKey-Ce.sortKey);for(const ge of Le){const{programConfiguration:Ce,program:je,layoutVertexBuffer:Ve,indexBuffer:Ge,uniformValues:Qe,terrainData:Je}=ge.state;je.draw(ce,le.TRIANGLES,pe,ae,we,en.disabled,Qe,Je,k.id,Ve,Ge,ge.segments,k.paint,_.transform.zoom,Ce)}})(i,u,p,m);break;case"heatmap":(function(_,S,k,I){if(k.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const z=_.context,L=z.gl,B=on.disabled,K=new nn([L.ONE,L.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(ce,le,pe){const ae=ce.gl;ce.activeTexture.set(ae.TEXTURE1),ce.viewport.set([0,0,le.width/4,le.height/4]);let we=pe.heatmapFbo;if(we)ae.bindTexture(ae.TEXTURE_2D,we.colorAttachment.get()),ce.bindFramebuffer.set(we.framebuffer);else{const Le=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Le),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),we=pe.heatmapFbo=ce.createFramebuffer(le.width/4,le.height/4,!1,!1),function(ge,Ce,je,Ve){var Ge,Qe;const Je=ge.gl,rt=(Ge=ge.HALF_FLOAT)!==null&&Ge!==void 0?Ge:Je.UNSIGNED_BYTE,Rt=(Qe=ge.RGBA16F)!==null&&Qe!==void 0?Qe:Je.RGBA;Je.texImage2D(Je.TEXTURE_2D,0,Rt,Ce.width/4,Ce.height/4,0,Je.RGBA,rt,null),Ve.colorAttachment.set(je)}(ce,le,Le,we)}})(z,_,k),z.clear({color:l.aT.transparent});for(let ce=0;ce<I.length;ce++){const le=I[ce];if(S.hasRenderableParent(le))continue;const pe=S.getTile(le),ae=pe.getBucket(k);if(!ae)continue;const we=ae.programConfigurations.get(k.id),Le=_.useProgram("heatmap",we),{zoom:ge}=_.transform;Le.draw(z,L.TRIANGLES,Sr.disabled,B,K,en.disabled,Ly(le.posMatrix,pe,ge,k.paint.get("heatmap-intensity")),null,k.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,k.paint,_.transform.zoom,we)}z.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(z,L){const B=z.context,K=B.gl,ce=L.heatmapFbo;if(!ce)return;B.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ce.colorAttachment.get()),B.activeTexture.set(K.TEXTURE1);let le=L.colorRampTexture;le||(le=L.colorRampTexture=new be(B,L.colorRamp,K.RGBA)),le.bind(K.LINEAR,K.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(B,K.TRIANGLES,Sr.disabled,on.disabled,z.colorModeForRenderPass(),en.disabled,((pe,ae,we,Le)=>{const ge=l.Z();l.aS(ge,0,pe.width,pe.height,0,0,1);const Ce=pe.context.gl;return{u_matrix:ge,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(z,L),null,L.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,L.paint,z.transform.zoom)}(_,k))})(i,u,p,m);break;case"line":(function(_,S,k,I){if(_.renderPass!=="translucent")return;const z=k.paint.get("line-opacity"),L=k.paint.get("line-width");if(z.constantOr(1)===0||L.constantOr(1)===0)return;const B=_.depthModeForSublayer(0,Sr.ReadOnly),K=_.colorModeForRenderPass(),ce=k.paint.get("line-dasharray"),le=k.paint.get("line-pattern"),pe=le.constantOr(1),ae=k.paint.get("line-gradient"),we=k.getCrossfadeParameters(),Le=pe?"linePattern":ce?"lineSDF":ae?"lineGradient":"line",ge=_.context,Ce=ge.gl;let je=!0;for(const Ve of I){const Ge=S.getTile(Ve);if(pe&&!Ge.patternsLoaded())continue;const Qe=Ge.getBucket(k);if(!Qe)continue;const Je=Qe.programConfigurations.get(k.id),rt=_.context.program.get(),Rt=_.useProgram(Le,Je),yr=je||Rt.program!==rt,ht=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ve),Jt=le.constantOr(null);if(Jt&&Ge.imageAtlas){const gr=Ge.imageAtlas,lr=gr.patternPositions[Jt.to.toString()],vr=gr.patternPositions[Jt.from.toString()];lr&&vr&&Je.setConstantPatternPositions(lr,vr)}const Bt=ht?Ve:null,Br=pe?$y(_,Ge,k,we,Bt):ce?Jp(_,Ge,k,ce,we,Bt):ae?Xp(_,Ge,k,Qe.lineClipsArray.length,Bt):sd(_,Ge,k,Bt);if(pe)ge.activeTexture.set(Ce.TEXTURE0),Ge.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Je.updatePaintBuffers(we);else if(ce&&(yr||_.lineAtlas.dirty))ge.activeTexture.set(Ce.TEXTURE0),_.lineAtlas.bind(ge);else if(ae){const gr=Qe.gradients[k.id];let lr=gr.texture;if(k.gradientVersion!==gr.version){let vr=256;if(k.stepInterpolant){const gn=S.getSource().maxzoom,Wr=Ve.canonical.z===gn?Math.ceil(1<<_.transform.maxZoom-Ve.canonical.z):1;vr=l.ad(l.aY(Qe.maxLineLength/l.N*1024*Wr),256,ge.maxTextureSize)}gr.gradient=l.aZ({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:vr,image:gr.gradient||void 0,clips:Qe.lineClipsArray}),gr.texture?gr.texture.update(gr.gradient):gr.texture=new be(ge,gr.gradient,Ce.RGBA),gr.version=k.gradientVersion,lr=gr.texture}ge.activeTexture.set(Ce.TEXTURE0),lr.bind(k.stepInterpolant?Ce.NEAREST:Ce.LINEAR,Ce.CLAMP_TO_EDGE)}Rt.draw(ge,Ce.TRIANGLES,B,_.stencilModeForClipping(Ve),K,en.disabled,Br,ht,k.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,k.paint,_.transform.zoom,Je,Qe.layoutVertexBuffer2),je=!1}})(i,u,p,m);break;case"fill":(function(_,S,k,I){const z=k.paint.get("fill-color"),L=k.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const B=_.colorModeForRenderPass(),K=k.paint.get("fill-pattern"),ce=_.opaquePassEnabledForLayer()&&!K.constantOr(1)&&z.constantOr(l.aT.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ce){const le=_.depthModeForSublayer(1,_.renderPass==="opaque"?Sr.ReadWrite:Sr.ReadOnly);wl(_,S,k,I,le,B,!1)}if(_.renderPass==="translucent"&&k.paint.get("fill-antialias")){const le=_.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);wl(_,S,k,I,le,B,!0)}})(i,u,p,m);break;case"fill-extrusion":(function(_,S,k,I){const z=k.paint.get("fill-extrusion-opacity");if(z!==0&&_.renderPass==="translucent"){const L=new Sr(_.context.gl.LEQUAL,Sr.ReadWrite,_.depthRangeFor3D);if(z!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Sl(_,S,k,I,L,on.disabled,nn.disabled),Sl(_,S,k,I,L,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const B=_.colorModeForRenderPass();Sl(_,S,k,I,L,on.disabled,B)}}})(i,u,p,m);break;case"hillshade":(function(_,S,k,I){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const z=_.context,L=_.depthModeForSublayer(0,Sr.ReadOnly),B=_.colorModeForRenderPass(),[K,ce]=_.renderPass==="translucent"?_.stencilConfigForOverlap(I):[{},I];for(const le of ce){const pe=S.getTile(le);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&_.renderPass==="offscreen"?Sd(_,pe,k,L,on.disabled,B):_.renderPass==="translucent"&&Hy(_,le,pe,k,L,K[le.overscaledZ],B)}z.viewport.set([0,0,_.width,_.height])})(i,u,p,m);break;case"raster":(function(_,S,k,I){if(_.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!I.length)return;const z=_.context,L=z.gl,B=S.getSource(),K=_.useProgram("raster"),ce=_.colorModeForRenderPass(),[le,pe]=B instanceof bt?[{},I]:_.stencilConfigForOverlap(I),ae=pe[pe.length-1].overscaledZ,we=!_.options.moving;for(const Le of pe){const ge=_.depthModeForSublayer(Le.overscaledZ-ae,k.paint.get("raster-opacity")===1?Sr.ReadWrite:Sr.ReadOnly,L.LESS),Ce=S.getTile(Le);Ce.registerFadeDuration(k.paint.get("raster-fade-duration"));const je=S.findLoadedParent(Le,0),Ve=Wy(Ce,je,S,k,_.transform,_.style.map.terrain);let Ge,Qe;const Je=k.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;z.activeTexture.set(L.TEXTURE0),Ce.texture.bind(Je,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(L.TEXTURE1),je?(je.texture.bind(Je,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,je.tileID.overscaledZ-Ce.tileID.overscaledZ),Qe=[Ce.tileID.canonical.x*Ge%1,Ce.tileID.canonical.y*Ge%1]):Ce.texture.bind(Je,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Le),Rt=rt?Le:null,yr=Rt?Rt.posMatrix:_.transform.calculatePosMatrix(Le.toUnwrapped(),we),ht=Qp(yr,Qe||[0,0],Ge||1,Ve,k);B instanceof bt?K.draw(z,L.TRIANGLES,ge,on.disabled,ce,en.disabled,ht,rt,k.id,B.boundsBuffer,_.quadTriangleIndexBuffer,B.boundsSegments):K.draw(z,L.TRIANGLES,ge,le[Le.overscaledZ],ce,en.disabled,ht,rt,k.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,p,m);break;case"background":(function(_,S,k,I){const z=k.paint.get("background-color"),L=k.paint.get("background-opacity");if(L===0)return;const B=_.context,K=B.gl,ce=_.transform,le=ce.tileSize,pe=k.paint.get("background-pattern");if(_.isPatternMissing(pe))return;const ae=!pe&&z.a===1&&L===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const we=on.disabled,Le=_.depthModeForSublayer(0,ae==="opaque"?Sr.ReadWrite:Sr.ReadOnly),ge=_.colorModeForRenderPass(),Ce=_.useProgram(pe?"backgroundPattern":"background"),je=I||ce.coveringTiles({tileSize:le,terrain:_.style.map.terrain});pe&&(B.activeTexture.set(K.TEXTURE0),_.imageManager.bind(_.context));const Ve=k.getCrossfadeParameters();for(const Ge of je){const Qe=I?Ge.posMatrix:_.transform.calculatePosMatrix(Ge.toUnwrapped()),Je=pe?oo(Qe,L,_,pe,{tileID:Ge,tileSize:le},Ve):yc(Qe,L,z),rt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ge);Ce.draw(B,K.TRIANGLES,Le,we,ge,en.disabled,Je,rt,k.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,m);break;case"custom":(function(_,S,k){const I=_.context,z=k.implementation;if(_.renderPass==="offscreen"){const L=z.prerender;L&&(_.setCustomLayerDefaults(),I.setColorMode(_.colorModeForRenderPass()),L.call(z,I.gl,_.transform.customLayerMatrix()),I.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),I.setColorMode(_.colorModeForRenderPass()),I.setStencilMode(on.disabled);const L=z.renderingMode==="3d"?new Sr(_.context.gl.LEQUAL,Sr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Sr.ReadOnly);I.setDepthMode(L),z.render(I.gl,_.transform.customLayerMatrix()),I.setDirty(),_.setBaseState(),I.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,m,_){if(!p[0]&&!p[1])return i;const S=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(S){const z=Math.sin(S),L=Math.cos(S);p=[p[0]*L-p[1]*z,p[0]*z+p[1]*L]}const k=[_?p[0]:he(u,p[0],this.transform.zoom),_?p[1]:he(u,p[1],this.transform.zoom),0],I=new Float32Array(16);return l.$(I,i,k),I}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new pc(this.context,rn[i],u,vc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new be(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class ki{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const m=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const I=1/(k=l.ag([],k,i))[3]/u*m;return l.b3(k,k,[I,I,1/k[3],I])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const I=function(K,ce){var le=ce[0],pe=ce[1],ae=ce[2],we=le*le+pe*pe+ae*ae;return we>0&&(we=1/Math.sqrt(we)),K[0]=ce[0]*we,K[1]=ce[1]*we,K[2]=ce[2]*we,K}([],function(K,ce,le){var pe=ce[0],ae=ce[1],we=ce[2],Le=le[0],ge=le[1],Ce=le[2];return K[0]=ae*Ce-we*ge,K[1]=we*Le-pe*Ce,K[2]=pe*ge-ae*Le,K}([],ee([],_[k[0]],_[k[1]]),ee([],_[k[2]],_[k[1]]))),z=-((L=I)[0]*(B=_[k[1]])[0]+L[1]*B[1]+L[2]*B[2]);var L,B;return I.concat(z)});return new ki(_,S)}}class Ds{constructor(i,u){this.min=i,this.max=u,this.center=function(p,m,_){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p}([],function(p,m,_){return p[0]=m[0]+_[0],p[1]=m[1]+_[1],p[2]=m[2]+_[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=ie(this.min),m=ie(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Ds(p,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<i.planes.length;m++){const _=i.planes[m];let S=0;for(let k=0;k<u.length;k++)l.b4(_,u[k])>=0&&S++;if(S===0)return 0;S!==u.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const I=i.points[k][m]-this.min[m];_=Math.min(_,I),S=Math.max(S,I)}if(S<0||_>this.max[m]-this.min[m])return 0}return 1}}class kl{constructor(i=0,u=0,p=0,m=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=m}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=l.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=l.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=l.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=l.ad((this.left+i-this.right)/2,0,i),m=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(p,m)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new kl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Dc{constructor(i,u,p,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new kl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Dc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,m,_){var S=m[0],k=m[1],I=m[2],z=m[3],L=Math.sin(_),B=Math.cos(_);p[0]=S*B+I*L,p[1]=k*B+z*L,p[2]=S*-L+I*B,p[3]=k*-L+z*B}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),S=this.pointCoordinate(new l.P(0,this.height)),k=Math.floor(Math.min(p.x,m.x,_.x,S.x)),I=Math.floor(Math.max(p.x,m.x,_.x,S.x)),z=1;for(let L=k-z;L<=I+z;L++)L!==0&&u.push(new l.b6(L,i))}return u}coveringTiles(i){var u,p;let m=this.coveringZoomLevel(i);const _=m;if(i.minzoom!==void 0&&m<i.minzoom)return[];i.maxzoom!==void 0&&m>i.maxzoom&&(m=i.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),k=l.U.fromLngLat(this.center),I=Math.pow(2,m),z=[I*S.x,I*S.y,0],L=[I*k.x,I*k.y,0],B=ki.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let K=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(K=m);const ce=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,le=ge=>({aabb:new Ds([ge*I,0,0],[(ge+1)*I,I,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),pe=[],ae=[],we=m,Le=i.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)pe.push(le(-ge)),pe.push(le(ge));for(pe.push(le(0));pe.length>0;){const ge=pe.pop(),Ce=ge.x,je=ge.y;let Ve=ge.fullyVisible;if(!Ve){const Rt=ge.aabb.intersects(B);if(Rt===0)continue;Ve=Rt===2}const Ge=i.terrain?z:L,Qe=ge.aabb.distanceX(Ge),Je=ge.aabb.distanceY(Ge),rt=Math.max(Math.abs(Qe),Math.abs(Je));if(ge.zoom===we||rt>ce+(1<<we-ge.zoom)-2&&ge.zoom>=K){const Rt=we-ge.zoom,yr=z[0]-.5-(Ce<<Rt),ht=z[1]-.5-(je<<Rt);ae.push({tileID:new l.O(ge.zoom===we?Le:ge.zoom,ge.wrap,ge.zoom,Ce,je),distanceSq:re([L[0]-.5-Ce,L[1]-.5-je]),tileDistanceToCamera:Math.sqrt(yr*yr+ht*ht)})}else for(let Rt=0;Rt<4;Rt++){const yr=(Ce<<1)+Rt%2,ht=(je<<1)+(Rt>>1),Jt=ge.zoom+1;let Bt=ge.aabb.quadrant(Rt);if(i.terrain){const Br=new l.O(Jt,ge.wrap,Jt,yr,ht),gr=i.terrain.getMinMaxElevation(Br),lr=(u=gr.minElevation)!==null&&u!==void 0?u:this.elevation,vr=(p=gr.maxElevation)!==null&&p!==void 0?p:this.elevation;Bt=new Ds([Bt.min[0],Bt.min[1],lr],[Bt.max[0],Bt.max[1],vr])}pe.push({aabb:Bt,zoom:Jt,x:yr,y:ht,wrap:ge.wrap,fullyVisible:Ve})}}return ae.sort((ge,Ce)=>ge.distanceSq-Ce.distanceSq).map(ge=>ge.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(i.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(i){return new l.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const m=this.getCameraPosition(),_=l.U.fromLngLat(m.lngLat,m.altitude),S=l.U.fromLngLat(u,p),k=_.x-S.x,I=_.y-S.y,z=_.z-S.z,L=Math.sqrt(k*k+I*I+z*z),B=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=p,this._center=u,this.zoom=B}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),S=new l.U(_.x-(p.x-m.x),_.y-(p.y-m.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const K=u.pointCoordinate(i);if(K!=null)return K}const p=[i.x,i.y,0,1],m=[i.x,i.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(m,m,this.pixelMatrixInverse);const _=p[3],S=m[3],k=p[1]/_,I=m[1]/S,z=p[2]/_,L=m[2]/S,B=z===L?0:(0-z)/(L-z);return new l.U(l.B.number(p[0]/_,m[0]/S,B)/this.worldSize,l.B.number(k,I,B)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const m=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.ag(m,m,p),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Et().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const _=i.canonical,S=this.worldSize/this.zoomScale(_.z),k=_.x+Math.pow(2,_.z)*i.wrap,I=l.ao(new Float64Array(16));return l.$(I,I,[k*S,_.y*S,0]),l.a0(I,I,[S/l.N,S/l.N,1]),l.a1(I,u?this.alignedProjMatrix:this.projMatrix,I),m[p]=new Float32Array(I),m[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,m,_=-90,S=90,k=-180,I=180;const z=this.size,L=this._unmodified;if(this.latRange){const ce=this.latRange;_=l.H(ce[1])*this.worldSize,S=l.H(ce[0])*this.worldSize,i=S-_<z.y?z.y/(S-_):0}if(this.lngRange){const ce=this.lngRange;k=l.b5(l.G(ce[0])*this.worldSize,0,this.worldSize),I=l.b5(l.G(ce[1])*this.worldSize,0,this.worldSize),I<k&&(I+=this.worldSize),u=I-k<z.x?z.x/(I-k):0}const B=this.point,K=Math.max(u||0,i||0);if(K)return this.center=this.unproject(new l.P(u?(I+k)/2:B.x,i?(S+_)/2:B.y)),this.zoom+=this.scaleZoom(K),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const ce=B.y,le=z.y/2;ce-le<_&&(m=_+le),ce+le>S&&(m=S-le)}if(this.lngRange){const ce=(k+I)/2,le=l.b5(B.x,ce-this.worldSize/2,ce+this.worldSize/2),pe=z.x/2;le-pe<k&&(p=k+pe),le+pe>I&&(p=I-pe)}p===void 0&&m===void 0||(this.center=this.unproject(new l.P(p!==void 0?p:B.x,m!==void 0?m:B.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let m=l.ao(new Float64Array(16));l.a0(m,m,[this.width/2,-this.height/2,1]),l.$(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.ao(new Float64Array(16)),l.a0(m,m,[1,-1,1]),l.$(m,m,[-1,-1,0]),l.a0(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this._minEleveationForCurrentTile),k=_-S*this._pixelPerMeter/Math.cos(this._pitch),I=S<0?k:_,z=Math.PI/2+this._pitch,L=this._fov*(.5+i.y/this.height),B=Math.sin(L)*I/Math.sin(l.ad(Math.PI-z-L,.01,Math.PI-.01)),K=this.getHorizon(),ce=2*Math.atan(K/this.cameraToCenterDistance)*(.5+i.y/(2*K)),le=Math.sin(ce)*I/Math.sin(l.ad(Math.PI-z-ce,.01,Math.PI-.01)),pe=Math.min(B,le),ae=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+I),we=this.height/50;m=new Float64Array(16),l.b8(m,this._fov,this.width/this.height,we,ae),m[8]=2*-i.x/this.width,m[9]=2*i.y/this.height,l.a0(m,m,[1,-1,1]),l.$(m,m,[0,0,-this.cameraToCenterDistance]),l.b9(m,m,this._pitch),l.ae(m,m,this.angle),l.$(m,m,[-u,-p,0]),this.mercatorMatrix=l.a0([],m,[this.worldSize,this.worldSize,this.worldSize]),l.a0(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,m),l.$(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=l.as([],m),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,m);const Le=this.width%2/2,ge=this.height%2/2,Ce=Math.cos(this.angle),je=Math.sin(this.angle),Ve=u-Math.round(u)+Ce*Le+je*ge,Ge=p-Math.round(p)+Ce*ge+je*Le,Qe=new Float64Array(m);if(l.$(Qe,Qe,[Ve>.5?Ve-1:Ve,Ge>.5?Ge-1:Ge,0]),this.alignedProjMatrix=Qe,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,m=u.y,_=u.x,S=u.y;for(const k of i)p=Math.min(p,k.x),m=Math.min(m,k.y),_=Math.max(_,k.x),S=Math.max(S,k.y);return[new l.P(p,m),new l.P(_,m),new l.P(_,S),new l.P(p,S),new l.P(p,m)]}}}function rs(y,i){let u,p=!1,m=null,_=null;const S=()=>{m=null,p&&(y.apply(_,u),m=setTimeout(S,i),p=!1)};return(...k)=>(p=!0,_=this,u=k,m||S(),m)}class Tl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=rs(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),S=Math.round(u.lng*_)/_,k=Math.round(u.lat*_)/_,I=this._map.getBearing(),z=this._map.getPitch();let L="";if(L+=i?`/${S}/${k}/${p}`:`${p}/${k}/${S}`,(I||z)&&(L+="/"+Math.round(10*I)/10),z&&(L+=`/${Math.round(z)}`),this._hashName){const B=this._hashName;let K=!1;const ce=window.location.hash.slice(1).split("&").map(le=>{const pe=le.split("=")[0];return pe===B?(K=!0,`${pe}=${L}`):le}).filter(le=>le);return K||ce.push(`${B}=${L}`),`#${ce.join("&")}`}return`#${L}`}}const Rs={linearity:.3,easing:l.ba(0,0,.3,1)},pf=l.e({deceleration:2500,maxSpeed:1400},Rs),ff=l.e({deceleration:20,maxSpeed:1400},Rs),mf=l.e({deceleration:1e3,maxSpeed:360},Rs),gf=l.e({deceleration:1e3,maxSpeed:90},Rs);class yf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=Il(u.pan.mag(),p,l.e({},pf,i||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,Oo(m,_)}if(u.zoom){const _=Il(u.zoom,p,ff);m.zoom=this._map.transform.zoom+_.amount,Oo(m,_)}if(u.bearing){const _=Il(u.bearing,p,mf);m.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),Oo(m,_)}if(u.pitch){const _=Il(u.pitch,p,gf);m.pitch=this._map.transform.pitch+_.amount,Oo(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function Oo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Il(y,i,u){const{maxSpeed:p,linearity:m,deceleration:_}=u,S=l.ad(y*m/(i/1e3),-p,p),k=Math.abs(S)/(_*m);return{easing:u.easing,duration:1e3*k,amount:S*(k/2)}}class Gi extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,m={}){const _=C.mousePos(u.getCanvasContainer(),p),S=u.unproject(_);super(i,l.e({point:_,lngLat:S,originalEvent:p},m)),this._defaultPrevented=!1,this.target=u}}class Pl extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const m=i==="touchend"?p.changedTouches:p.touches,_=C.touchPos(u.getCanvasContainer(),m),S=_.map(I=>u.unproject(I)),k=_.reduce((I,z,L,B)=>I.add(z.div(B.length)),new l.P(0,0));super(i,{points:_,point:k,lngLats:S,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class vf extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class _f{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new vf(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Gi(i.type,this._map,i))}mouseup(i){this._map.fire(new Gi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Gi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Gi(i.type,this._map,i))}mouseover(i){this._map.fire(new Gi(i.type,this._map,i))}mouseout(i){this._map.fire(new Gi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Pl(i.type,this._map,i))}touchmove(i){this._map.fire(new Pl(i.type,this._map,i))}touchend(i){this._map.fire(new Pl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Pl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xf{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Gi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Gi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class sa{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class bf{constructor(i,u){this._map=i,this._tr=new sa(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(C.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(m.x,p.x),S=Math.max(m.x,p.x),k=Math.min(m.y,p.y),I=Math.max(m.y,p.y);C.setTransform(this._box,`translate(${_}px,${k}px)`),this._box.style.width=S-_+"px",this._box.style.height=I-k+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,m=u;if(this.reset(),C.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.k(i,{originalEvent:u}))}}function ao(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class la{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const _=new l.P(0,0);for(const S of m)_._add(S);return _.div(m.length)}(u),this.touches=ao(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const m=ao(p,u);for(const _ in this.touches){const S=m[_];(!S||S.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Rc{constructor(i){this.singleTap=new la(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const m=this.singleTap.touchend(i,u,p);if(m){const _=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(m)<30;if(_&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ca{constructor(i){this._tr=new sa(i),this._zoomIn=new Rc({numTouches:1,numTaps:2}),this._zoomOut=new Rc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const m=this._zoomIn.touchend(i,u,p),_=this._zoomOut.touchend(i,u,p),S=this._tr;return m?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(m)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ua{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const m=u.length?u[0]:u;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&C.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Gy={0:1,2:2};class kd{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=C.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const m=Gy[p];return u.buttons===void 0||(u.buttons&m)!==m}(i,this._eventButton)}isValidEndEvent(i){return C.mouseButton(i)===this._eventButton}}class wf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Lc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Ls=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new kd({checkCorrectEvent:m=>C.mouseButton(m)===0&&m.ctrlKey||C.mouseButton(m)===2});return new ua({clickTolerance:i,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:p,enable:y,assignEvents:Lc})},da=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new kd({checkCorrectEvent:m=>C.mouseButton(m)===0&&m.ctrlKey||C.mouseButton(m)===2});return new ua({clickTolerance:i,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:p,enable:y,assignEvents:Lc})};class It{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const m=ao(p,u),_=new l.P(0,0),S=new l.P(0,0);let k=0;for(const z in m){const L=m[z],B=this._touches[z];B&&(_._add(L),S._add(L.sub(B)),k++,m[z]=L)}if(this._touches=m,k<this._minTouches||!S.mag())return;const I=S.div(k);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(k),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $c{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[m,_]=this._firstTwoTouches,S=La(p,u,m),k=La(p,u,_);if(!S||!k)return;const I=this._aroundCenter?null:S.add(k).div(2);return this._move([S,k],I,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,S=La(p,u,m),k=La(p,u,_);S&&k||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function La(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function $s(y,i){return Math.log(y/i)/Math.LN2}class Sf extends $c{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs($s(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:$s(this._distance,p),pinchAround:u}}}function vt(y,i){return 180*y.angleWith(i)/Math.PI}class Td extends $c{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vt(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=vt(i,this._startVector);return Math.abs(p)<u}}function Id(y){return Math.abs(y.y)>Math.abs(y.x)}class qy extends $c{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Id(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const m=i.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const S=i.y>0==u.y>0;return Id(i)&&Id(u)&&S}}const Pd={panStep:100,bearingStep:15,pitchStep:10};class Cf{constructor(i){this._tr=new sa(i);const u=Pd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,m=0,_=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?m=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?m=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:k=>{const I=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:kf,zoom:u?Math.round(I.zoom)+u*(i.shiftKey?2:1):I.zoom,bearing:I.bearing+p*this._bearingStep,pitch:I.pitch+m*this._pitchStep,offset:[-_*this._panStep,-S*this._panStep],center:I.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kf(y){return y*(2-y)}const Tf=4.000244140625;class Zy{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new sa(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=l.h.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Tf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=C.mousePos(this._el,i),p=this._tr;this._around=l.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Tf?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&I!==0&&(I=1/I);const z=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(z*I))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,m=this._easing;let _,S=!1;if(this._type==="wheel"&&p&&m){const k=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),I=m(k);_=l.B.number(p,u,I),k<1?this._frameId||(this._frameId=!0):S=!0}else _=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.bb;if(this._prevEase){const p=this._prevEase,m=(l.h.now()-p.start)/p.duration,_=p.easing(m+.01)-p.easing(m),S=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-S*S);u=l.ba(S,k,.25,1)}return this._prevEase={start:l.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ed{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zd{constructor(i){this._tr=new sa(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ad{constructor(){this._tap=new Rc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(m)<30;_&&S?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(i,u,p);m&&(this._tapTime=i.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Md{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ti{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $a{constructor(i,u,p,m){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const El=y=>y.zoom||y.drag||y.pitch||y.rotate;class Dd extends l.k{}function zl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Rd{constructor(i,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=m.type==="renderFrame"?void 0:m,k={needsRenderFrame:!1},I={},z={},L=m.touches,B=L?this._getMapTouches(L):void 0,K=B?C.touchPos(this._el,B):C.mousePos(this._el,m);for(const{handlerName:pe,handler:ae,allowed:we}of this._handlers){if(!ae.isEnabled())continue;let Le;this._blockedByActive(z,we,pe)?ae.reset():ae[_||m.type]&&(Le=ae[_||m.type](m,K,B),this.mergeHandlerResult(k,I,Le,pe,S),Le&&Le.needsRenderFrame&&this._triggerRenderFrame()),(Le||ae.isActive())&&(z[pe]=ae)}const ce={};for(const pe in this._previousActiveHandlers)z[pe]||(ce[pe]=S);this._previousActiveHandlers=z,(Object.keys(ce).length||zl(k))&&(this._changes.push([k,I,ce]),this._triggerRenderFrame()),(Object.keys(z).length||zl(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=k;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yf(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,S]of this._listeners)C.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,u,p]of this._listeners)C.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new _f(u,i));const m=u.boxZoom=new bf(u,i);this._add("boxZoom",m),i.interactive&&i.boxZoom&&m.enable();const _=new ca(u),S=new zd(u);u.doubleClickZoom=new Ed(S,_),this._add("tapZoom",_),this._add("clickZoom",S),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const k=new Ad;this._add("tapDragZoom",k);const I=u.touchPitch=new qy(u);this._add("touchPitch",I),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const z=Ls(i),L=da(i);u.dragRotate=new Ti(i,z,L),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const B=(({enable:we,clickTolerance:Le})=>{const ge=new kd({checkCorrectEvent:Ce=>C.mouseButton(Ce)===0&&!Ce.ctrlKey});return new ua({clickTolerance:Le,move:(Ce,je)=>({around:je,panDelta:je.sub(Ce)}),activateOnStart:!0,moveStateManager:ge,enable:we,assignEvents:Lc})})(i),K=new It(i,u);u.dragPan=new Md(p,B,K),this._add("mousePan",B),this._add("touchPan",K,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ce=new Td,le=new Sf;u.touchZoomRotate=new $a(p,le,ce,k),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const pe=u.scrollZoom=new Zy(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const ae=u.keyboard=new Cf(u);this._add("keyboard",ae),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new xf(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!El(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const m in i)if(m!==p&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,m,_){if(!p)return;l.e(i,p);const S={handlerName:m,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=S),p.panDelta!==void 0&&(u.drag=S),p.pitchDelta!==void 0&&(u.pitch=S),p.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const i={},u={},p={};for(const[m,_,S]of this._changes)m.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(i.around=m.around),m.pinchAround!==void 0&&(i.pinchAround=m.pinchAround),m.noInertia&&(i.noInertia=m.noInertia),l.e(u,_),l.e(p,S);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const m=this._map,_=m._getTransformForUpdate(),S=m.terrain;if(!(zl(i)||S&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:k,zoomDelta:I,bearingDelta:z,pitchDelta:L,around:B,pinchAround:K}=i;K!==void 0&&(B=K),m._stop(!0),B=B||m.transform.centerPoint;const ce=_.pointLocation(k?B.sub(k):B);z&&(_.bearing+=z),L&&(_.pitch+=L),I&&(_.zoom+=I),S?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(k)):_.setLocationAtPoint(ce,B):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ce,B),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(ce,B),m._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const m=El(this._eventsInProgress),_=El(i),S={};for(const L in i){const{originalEvent:B}=i[L];this._eventsInProgress[L]||(S[`${L}start`]=B),this._eventsInProgress[L]=i[L]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const L in S)this._fireEvent(L,S[L]);_&&this._fireEvent("move",_.originalEvent);for(const L in i){const{originalEvent:B}=i[L];this._fireEvent(L,B)}const k={};let I;for(const L in this._eventsInProgress){const{handlerName:B,originalEvent:K}=this._eventsInProgress[L];this._handlersById[B].isActive()||(delete this._eventsInProgress[L],I=u[B]||K,k[`${L}end`]=I)}for(const L in k)this._fireEvent(L,k[L]);const z=El(this._eventsInProgress);if(p&&(m||_)&&!z){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;!L||!L.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:I})),B(this._map.getBearing())&&this._map.resetNorth()):(B(L.bearing||this._map.getBearing())&&(L.bearing=0),L.freezeElevation=!0,this._map.easeTo(L,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Dd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class If extends l.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(l.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(l.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(l.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,l.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Et.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const je=m.padding;m.padding={top:je,bottom:je,right:je,left:je}}m.padding=l.e(_,m.padding);const S=this.transform,k=S.padding,I=S.project(l.L.convert(i)),z=S.project(l.L.convert(u)),L=I.rotate(-p*Math.PI/180),B=z.rotate(-p*Math.PI/180),K=new l.P(Math.max(L.x,B.x),Math.max(L.y,B.y)),ce=new l.P(Math.min(L.x,B.x),Math.min(L.y,B.y)),le=K.sub(ce),pe=(S.width-(k.left+k.right+m.padding.left+m.padding.right))/le.x,ae=(S.height-(k.top+k.bottom+m.padding.top+m.padding.bottom))/le.y;if(ae<0||pe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const we=Math.min(S.scaleZoom(S.scale*Math.min(pe,ae)),m.maxZoom),Le=l.P.convert(m.offset),ge=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(p*Math.PI/180),Ce=Le.add(ge).mult(S.scale/S.zoomScale(we));return{center:S.unproject(I.add(z).div(2).sub(Ce)),zoom:we,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(u)),p,m),m,_)}_fitInternal(i,u,p){return i?(delete(u=l.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let m=!1,_=!1,S=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(m=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=l.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(S=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),m&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),S&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,m=0){const _=l.U.fromLngLat(i,u),S=l.U.fromLngLat(p,m),k=S.x-_.x,I=S.y-_.y,z=S.z-_.z,L=Math.hypot(k,I,z);if(L===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(k,I),K=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),ce=180*Math.atan2(k,-I)/Math.PI;let le=180*Math.acos(B/L)/Math.PI;return le=z<0?90-le:90+le,{center:S.toLngLat(),zoom:K,pitch:le,bearing:ce}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.bb},i)).animate===!1||!i.essential&&l.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),S=this.getPitch(),k=this.getPadding(),I="zoom"in i?+i.zoom:m,z="bearing"in i?this._normalizeBearing(i.bearing,_):_,L="pitch"in i?+i.pitch:S,B="padding"in i?i.padding:p.padding,K=l.P.convert(i.offset);let ce=p.centerPoint.add(K);const le=p.pointLocation(ce),pe=l.L.convert(i.center||le);this._normalizeCenter(pe);const ae=p.project(le),we=p.project(pe).sub(ae),Le=p.zoomScale(I-m);let ge,Ce;i.around&&(ge=l.L.convert(i.around),Ce=p.locationPoint(ge));const je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==m,this._rotating=this._rotating||_!==z,this._pitching=this._pitching||L!==S,this._padding=!p.isPaddingEqual(B),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,je),this.terrain&&this._prepareElevation(pe),this._ease(Ve=>{if(this._zooming&&(p.zoom=l.B.number(m,I,Ve)),this._rotating&&(p.bearing=l.B.number(_,z,Ve)),this._pitching&&(p.pitch=l.B.number(S,L,Ve)),this._padding&&(p.interpolatePadding(k,B,Ve),ce=p.centerPoint.add(K)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ve),ge)p.setLocationAtPoint(ge,Ce);else{const Ge=p.zoomScale(p.zoom-m),Qe=I>m?Math.min(2,Le):Math.max(.5,Le),Je=Math.pow(Qe,1-Ve),rt=p.unproject(ae.add(we.mult(Ve*Je)).mult(Ge));p.setLocationAtPoint(p.renderWorldCopies?rt.wrap():rt,ce)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},Ve=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ve)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:m,pitch:_,bearing:S,elevation:k}=this.transformCameraUpdate(u);p&&(u.center=p),m!==void 0&&(u.zoom=m),_!==void 0&&(u.pitch=_),S!==void 0&&(u.bearing=S),k!==void 0&&(u.elevation=k),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",i)),m&&this.fire(new l.k("rotateend",i)),_&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,u){if(!i.essential&&l.h.prefersReducedMotion){const Bt=l.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bt,u)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},i);const p=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),S=this.getPitch(),k=this.getPadding(),I="zoom"in i?l.ad(+i.zoom,p.minZoom,p.maxZoom):m,z="bearing"in i?this._normalizeBearing(i.bearing,_):_,L="pitch"in i?+i.pitch:S,B="padding"in i?i.padding:p.padding,K=p.zoomScale(I-m),ce=l.P.convert(i.offset);let le=p.centerPoint.add(ce);const pe=p.pointLocation(le),ae=l.L.convert(i.center||pe);this._normalizeCenter(ae);const we=p.project(pe),Le=p.project(ae).sub(we);let ge=i.curve;const Ce=Math.max(p.width,p.height),je=Ce/K,Ve=Le.mag();if("minZoom"in i){const Bt=l.ad(Math.min(i.minZoom,m,I),p.minZoom,p.maxZoom),Br=Ce/p.zoomScale(Bt-m);ge=Math.sqrt(Br/Ve*2)}const Ge=ge*ge;function Qe(Bt){const Br=(je*je-Ce*Ce+(Bt?-1:1)*Ge*Ge*Ve*Ve)/(2*(Bt?je:Ce)*Ge*Ve);return Math.log(Math.sqrt(Br*Br+1)-Br)}function Je(Bt){return(Math.exp(Bt)-Math.exp(-Bt))/2}function rt(Bt){return(Math.exp(Bt)+Math.exp(-Bt))/2}const Rt=Qe(!1);let yr=function(Bt){return rt(Rt)/rt(Rt+ge*Bt)},ht=function(Bt){return Ce*((rt(Rt)*(Je(Br=Rt+ge*Bt)/rt(Br))-Je(Rt))/Ge)/Ve;var Br},Jt=(Qe(!0)-Rt)/ge;if(Math.abs(Ve)<1e-6||!isFinite(Jt)){if(Math.abs(Ce-je)<1e-6)return this.easeTo(i,u);const Bt=je<Ce?-1:1;Jt=Math.abs(Math.log(je/Ce))/ge,ht=function(){return 0},yr=function(Br){return Math.exp(Bt*ge*Br)}}return i.duration="duration"in i?+i.duration:1e3*Jt/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==z,this._pitching=L!==S,this._padding=!p.isPaddingEqual(B),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ae),this._ease(Bt=>{const Br=Bt*Jt,gr=1/yr(Br);p.zoom=Bt===1?I:m+p.scaleZoom(gr),this._rotating&&(p.bearing=l.B.number(_,z,Bt)),this._pitching&&(p.pitch=l.B.number(S,L,Bt)),this._padding&&(p.interpolatePadding(k,B,Bt),le=p.centerPoint.add(ce)),this.terrain&&!i.freezeElevation&&this._updateElevation(Bt);const lr=Bt===1?ae:p.unproject(we.add(Le.mult(ht(Br))).mult(gr));p.setLocationAtPoint(p.renderWorldCopies?lr.wrap():lr,le),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=l.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=l.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class qi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const S=_.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(m=>String(m).trim()),i.sort((m,_)=>m.length-_.length),i=i.filter((m,_)=>{for(let S=_+1;S<i.length;S++)if(i[S].indexOf(m)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xr{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");const u=C.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Bc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const m of p)if(m.id===i)return void(m.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ld={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Pf=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Ef extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aS(m.posMatrix,0,l.N,0,l.N,0,1),this._tiles[m.key]=new Gt(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[p]=_}else if(m.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const S=m.canonical.z-i.canonical.z,k=m.canonical.x-(m.canonical.x>>S<<S),I=m.canonical.y-(m.canonical.y>>S<<S),z=l.N>>S;l.aS(_.posMatrix,0,z,0,z,0,1),l.$(_.posMatrix,_.posMatrix,[-k*z,-I*z,0]),u[p]=_}else if(i.canonical.isChildOf(m.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const S=i.canonical.z-m.canonical.z,k=i.canonical.x-(i.canonical.x>>S<<S),I=i.canonical.y-(i.canonical.y>>S<<S),z=l.N>>S;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[k*z,I*z,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**S,1/2**S,0]),u[p]=_}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let m=i.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;m>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(m--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class zf{constructor(i,u,p){this.painter=i,this.sourceCache=new Ef(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,m=l.N){var _;if(!(u>=0&&u<m&&p>=0&&p<m))return 0;const S=this.getTerrainData(i),k=(_=S.tile)===null||_===void 0?void 0:_.dem;if(!k)return 0;const I=function(le,pe,ae){var we=pe[0],Le=pe[1];return le[0]=ae[0]*we+ae[4]*Le+ae[12],le[1]=ae[1]*we+ae[5]*Le+ae[13],le}([],[u/m*l.N,p/m*l.N],S.u_terrain_matrix),z=[I[0]*k.dim,I[1]*k.dim],L=Math.floor(z[0]),B=Math.floor(z[1]),K=z[0]-L,ce=z[1]-B;return k.get(L,B)*(1-K)*(1-ce)+k.get(L+1,B)*K*(1-ce)+k.get(L,B+1)*(1-K)*ce+k.get(L+1,B+1)*K*ce}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,m%l.N,_%l.N,l.N)}getElevation(i,u,p,m=l.N){return this.getDEMElevation(i,u,p,m)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const m=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new be(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new be(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new be(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=m?_=i.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=i.canonical.x-(i.canonical.x>>_<<_),k=i.canonical.y-(i.canonical.y>>_<<_),I=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(I,I,[S*l.N,k*l.N,0]),this._demMatrixCache[i.key]={matrix:I,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new be(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new be(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,S=0;_<this._coordsTextureSize;_++)for(let k=0;k<this._coordsTextureSize;k++,S+=4)u[S+0]=255&k,u[S+1]=255&_,u[S+2]=k>>8<<4|_>>8,u[S+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new be(i,p,i.gl.RGBA,{premultiply:!1});return m.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,m=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),S=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],I=k&&this.sourceCache.getTileByID(k);if(!I)return null;const z=this._coordsTextureSize,L=(1<<I.tileID.canonical.z)*z;return new l.U(this._allowMercatorOverflow(i,(I.tileID.canonical.x*z+_)/L),(I.tileID.canonical.y*z+S)/L,this.getElevation(I.tileID,_,S,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new l.bd,p=new l.b0,m=this.meshSize,_=l.N/m,S=m*m;for(let B=0;B<=m;B++)for(let K=0;K<=m;K++)u.emplaceBack(K*_,B*_,0);for(let B=0;B<S;B+=m+1)for(let K=0;K<m;K++)p.emplaceBack(K+B,m+K+B+1,m+K+B+2),p.emplaceBack(K+B,m+K+B+2,K+B+1);const k=u.length,I=k+2*(m+1);for(const B of[0,1])for(let K=0;K<=m;K++)for(const ce of[0,1])u.emplaceBack(K*_,B*l.N,ce);for(let B=0;B<2*m;B+=2)p.emplaceBack(I+B,I+B+1,I+B+3),p.emplaceBack(I+B,I+B+3,I+B+2),p.emplaceBack(k+B,k+B+3,k+B+1),p.emplaceBack(k+B,k+B+2,k+B+3);const z=u.length,L=z+2*(m+1);for(const B of[0,1])for(let K=0;K<=m;K++)for(const ce of[0,1])u.emplaceBack(B*l.N,K*_,ce);for(let B=0;B<2*m;B+=2)p.emplaceBack(z+B,z+B+1,z+B+3),p.emplaceBack(z+B,z+B+3,z+B+2),p.emplaceBack(L+B,L+B+3,L+B+1),p.emplaceBack(L+B,L+B+2,L+B+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,Pf.members),segments:l.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=l.U.fromLngLat(i.wrap()),m=(1<<u)*l.N,_=p.x*m,S=p.y*m,k=Math.floor(_/l.N),I=Math.floor(S/l.N);return{tileID:new l.O(u,0,u,k,I),mercatorX:_,mercatorY:S}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let m=l.bf(u);const _=this.painter.transform.center.lng;return p&&Math.sign(m)>0&&Math.sign(_)<0||!p&&Math.sign(m)<0&&Math.sign(_)>0?(m=360*Math.sign(_)+m,l.G(m)):u}}class Ky{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new be(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const mi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Oc{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Ky(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const m=i.sourceCaches[p].getVisibleCoordinates();for(const _ of m){const S=this.terrain.sourceCache.getTerrainCoords(_);for(const k in S)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(S[k])}}this._coordsDescendingInvStr={};for(const p of i._order){const m=i._layers[p],_=m.source;if(mi[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const S in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][S]=this._coordsDescendingInv[_][S].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][p.tileID.key];_&&_!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(mi[u]&&(this._prevType&&mi[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!m))return!0;if(mi[this._prevType]||mi[u]&&m){this._prevType=u;const _=this._stacks.length-1,S=this._stacks[_]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(hn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[_]){const z=this.pool.getObjectForId(k.rtt[_].id);if(z.stamp===k.rtt[_].stamp){this.pool.useObject(z);continue}}const I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),k.rtt[_]={id:I.id,stamp:I.stamp},p.context.bindFramebuffer.set(I.fbo.framebuffer),p.context.clear({color:l.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let z=0;z<S.length;z++){const L=p.style._layers[S[z]],B=L.source?this._coordsDescendingInv[L.source][k.tileID.key]:[k.tileID];p.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),p._renderTileClippingMasks(L,B),p.renderLayer(p,p.style.sourceCaches[L.source],L,B),L.source&&(k.rttCoords[L.source]=this._coordsDescendingInvStr[L.source][k.tileID.key])}}return hn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),mi[u]}return!1}}const jt=b,Xt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Al=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},$d={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bd{constructor(i,u,p=!1){this.mousedown=S=>{this.startMouse(l.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),C.mousePos(this.element,S)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,C.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Ls({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:k,bearingDegreesPerPixelMoved:I=.8})=>{const z=new wf;return new ua({clickTolerance:k,move:(L,B)=>({bearingDelta:(B.x-L.x)*I}),moveStateManager:z,enable:S,assignEvents:Al})})({clickTolerance:m,enable:!0}),this.map=i,p&&(this.mousePitch=da({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:k,pitchDegreesPerPixelMoved:I=-.5})=>{const z=new wf;return new ua({clickTolerance:k,move:(L,B)=>({pitchDelta:(B.y-L.y)*I}),moveStateManager:z,enable:S,assignEvents:Al})})({clickTolerance:_,enable:!0})),C.addEventListener(u,"mousedown",this.mousedown),C.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),C.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),C.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(i,u)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,u){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(i,u)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;C.removeEventListener(i,"mousedown",this.mousedown),C.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let wn;function Od(y,i,u){if(y=new l.L(y.lng,y.lat),i){const p=new l.L(y.lng-360,y.lat),m=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(p).distSqr(i)<_?y=p:u.locationPoint(m).distSqr(i)<_&&(y=m)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const so={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Af(y,i,u){const p=y.classList;for(const m in so)p.remove(`maplibregl-${u}-anchor-${m}`);p.add(`maplibregl-${u}-anchor-${i}`)}class ns extends l.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,m=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Od(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${so[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const S=this._map.unproject(this._pos),k=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=S.distanceTo(this._lngLat)>20*k?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div"),this._element.setAttribute("aria-label","Map marker");const u=C.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const _=C.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const S=C.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const k=C.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of I){const Le=C.createNS("http://www.w3.org/2000/svg","ellipse");Le.setAttributeNS(null,"opacity","0.04"),Le.setAttributeNS(null,"cx","10.5"),Le.setAttributeNS(null,"cy","5.80029008"),Le.setAttributeNS(null,"rx",we.rx),Le.setAttributeNS(null,"ry",we.ry),k.appendChild(Le)}const z=C.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const L=C.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(L);const B=C.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const K=C.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(K);const ce=C.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");const le=C.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=C.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ae=C.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),le.appendChild(pe),le.appendChild(ae),S.appendChild(k),S.appendChild(z),S.appendChild(B),S.appendChild(ce),S.appendChild(le),u.appendChild(S),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Af(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const m=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const pn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let an=0,Bs=!1;const Ml={maxWidth:100,unit:"metric"};function Dl(y,i,u){const p=u&&u.maxWidth||100,m=y._container.clientHeight/2,_=y.unproject([0,m]),S=y.unproject([p,m]),k=_.distanceTo(S);if(u&&u.unit==="imperial"){const I=3.2808*k;I>5280?is(i,p,I/5280,y._getUIString("ScaleControl.Miles")):is(i,p,I,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?is(i,p,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?is(i,p,k/1e3,y._getUIString("ScaleControl.Kilometers")):is(i,p,k,y._getUIString("ScaleControl.Meters"))}function is(y,i,u,p){const m=function(_){const S=Math.pow(10,`${Math.floor(_)}`.length-1);let k=_/S;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(I){const z=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*z)/z}(k),S*k}(u);y.style.width=i*(m/u)+"px",y.innerHTML=`${m}&nbsp;${p}`}const Fd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Os(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-y),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const i=l.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return Os(new l.P(0,0))}const jd={extend:(y,...i)=>l.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},Vd=b;class Dr{static get version(){return Vd}static get workerCount(){return kr.workerCount}static set workerCount(i){kr.workerCount=i}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){l.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(i){l.c.WORKER_URL=i}static addProtocol(i,u){l.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete l.c.REGISTERED_PROTOCOLS[i]}}return Dr.Map=class extends If{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},Xt,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Dc(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Bc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Ld,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=J.addThrottleControl(()=>this.isMoving()),this._requestManager=new $(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=rs(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Rd(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Tl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new qi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new Xr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new l.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new l.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new l.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;const u=this._containerDimensions(),p=u[0],m=u[1],_=this._getClampedPixelRatio(p,m);if(this._resizeCanvas(p,m,_),this.painter.resize(p,m,_),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const I=this._getClampedPixelRatio(p,m);this._resizeCanvas(p,m,I),this.painter.resize(p,m,I)}this.transform.resize(p,m),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,m);const S=!this._moving;return S&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),S&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),_=y*m,S=i*m;return Math.min(_>u?u/_:1,S>p?p/S:1)*m}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Et.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const S=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];S.length?p||(p=!0,u.call(this,new Gi(y,this,_.originalEvent,{features:S}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{(this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Gi(y,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,u.call(this,new Gi(y,this,S.originalEvent)))}}}}{const p=m=>{const _=this.getLayer(i)?this.queryRenderedFeatures(m.point,{layers:[i]}):[];_.length&&(m.features=_,u.call(this,m),delete m.features)};return{layer:i,listener:u,delegates:{[y]:p}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,u);for(const m in p.delegates)this.once(m,p.delegates[m]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const m=this._delegatedListeners[y];for(let _=0;_<m.length;_++){const S=m[_];if(S.layer===i&&S.listener===u){for(const k in S.delegates)this.off(k,S.delegates[k]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const p=y instanceof l.P||Array.isArray(y),m=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},m instanceof l.P||typeof m[0]=="number")u=[l.P.convert(m)];else{const _=l.P.convert(m[0]),S=l.P.convert(m[1]);u=[_,new l.P(S.x,_.y),S,new l.P(_.x,S.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Bn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,O.Style);l.f(u,(p,m)=>{p?this.fire(new l.j(p)):m&&this._updateDiff(m,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new zf(this.painter,i,y),this.painter.renderToTexture=new Oc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const p in u){const m=u[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:_,stretchY:S,content:k}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:I,height:z,data:L}=i,B=i;return this.style.addImage(y,{data:new l.R({width:I,height:z},new Uint8Array(L)),pixelRatio:p,stretchX:_,stretchY:S,content:k,sdf:m,version:0,userImage:B}),B.onAdd&&B.onAdd(this,y),this}}{const{width:I,height:z,data:L}=l.h.getImageData(i);this.style.addImage(y,{data:new l.R({width:I,height:z},L),pixelRatio:p,stretchX:_,stretchY:S,content:k,sdf:m,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||l.a(i)?l.h.getImageData(i):i,{width:m,height:_,data:S}=p;if(m===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(i instanceof HTMLImageElement||l.a(i));return u.data.replace(S,k),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){J.getImage(this._requestManager.transformRequest(y,O.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=C.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const m=this._controlContainer=C.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{_[S]=C.create("div",`maplibregl-ctrl-${S} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=C.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){C.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new ts(u,this.transform),P.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(m,_);const S=new l.a8(m,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=S.crossFadingFactor();k===1&&k===this._crossFadingFactor||(u=!0,this._crossFadingFactor=k),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),J.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return jt}getCameraTargetElevation(){return this.transform.elevation}},Dr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=l.e({},$d,y),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=C.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},Dr.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new l.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,m=this._map.getBearing(),_=l.e({bearing:m},this.options.fitBoundsOptions),S=Et.fromLngLat(u,p);this._map.fitBounds(S,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new l.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Bs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ns({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ns({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},pn,y)}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){wn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{wn=p.state!=="denied",i(wn)}).catch(()=>{wn=!!window.navigator.geolocation,i(wn)}):(wn=!!window.navigator.geolocation,i(wn)):i(wn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,an=0,Bs=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":an--,Bs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),an++,an>1?(y={maximumAge:6e5,timeout:0},Bs=!0):(y=this.options.positionOptions,Bs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Dr.AttributionControl=qi,Dr.LogoControl=Xr,Dr.ScaleControl=class{constructor(y){this._onMove=()=>{Dl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Dl(this._map,this._container,this.options)},this.options=l.e({},Ml,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Dr.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Dr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Dr.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Od(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const m=Os(this.options.offset);if(!p){const S=this._container.offsetWidth,k=this._container.offsetHeight;let I;I=u.y+m.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<S/2?I.push("left"):u.x>this._map.transform.width-S/2&&I.push("right"),p=I.length===0?"bottom":I.join("-")}const _=u.add(m[p]).round();C.setTransform(this._container,`${so[p]} translate(${_.x}px,${_.y}px)`),Af(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Fd),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Nd);y&&y.focus()}},Dr.Marker=ns,Dr.Style=Bn,Dr.LngLat=l.L,Dr.LngLatBounds=Et,Dr.Point=l.P,Dr.MercatorCoordinate=l.U,Dr.Evented=l.E,Dr.AJAXError=l.bi,Dr.config=l.c,Dr.CanvasSource=Wt,Dr.GeoJSONSource=We,Dr.ImageSource=bt,Dr.RasterDEMTileSource=nt,Dr.RasterTileSource=tr,Dr.VectorTileSource=zt,Dr.VideoSource=Ht,Dr.setRTLTextPlugin=l.bj,Dr.getRTLTextPluginStatus=l.bk,Dr.prewarm=function(){Qt().acquire(Vt)},Dr.clearPrewarmedResources=function(){const y=cr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Vt),cr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},jd.extend(Dr,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),Dr});var g=c;return g})})(oE);var sE=oE.exports;const lE=K_(sE),LV=Z_({__proto__:null,default:lE},[sE]);var zu=Math.pow,Fi=(e,t,n)=>new Promise((a,c)=>{var h=b=>{try{l(n.next(b))}catch(C){c(C)}},g=b=>{try{l(n.throw(b))}catch(C){c(C)}},l=b=>b.done?a(b.value):Promise.resolve(b.value).then(h,g);l((n=n.apply(e,t)).next())}),Eo=Uint8Array,_u=Uint16Array,$V=Int32Array,cE=new Eo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uE=new Eo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),BV=new Eo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dE=function(e,t){for(var n=new _u(31),a=0;a<31;++a)n[a]=t+=1<<e[a-1];for(var c=new $V(n[30]),a=1;a<30;++a)for(var h=n[a];h<n[a+1];++h)c[h]=h-n[a]<<5|a;return{b:n,r:c}},hE=dE(cE,2),pE=hE.b,OV=hE.r;pE[28]=258,OV[258]=28;var FV=dE(uE,0),NV=FV.b,V_=new _u(32768);for(Vr=0;Vr<32768;++Vr)ps=(Vr&43690)>>1|(Vr&21845)<<1,ps=(ps&52428)>>2|(ps&13107)<<2,ps=(ps&61680)>>4|(ps&3855)<<4,V_[Vr]=((ps&65280)>>8|(ps&255)<<8)>>1;var ps,Vr,Kh=function(e,t,n){for(var a=e.length,c=0,h=new _u(t);c<a;++c)e[c]&&++h[e[c]-1];var g=new _u(t);for(c=1;c<t;++c)g[c]=g[c-1]+h[c-1]<<1;var l;if(n){l=new _u(1<<t);var b=15-t;for(c=0;c<a;++c)if(e[c])for(var C=c<<4|e[c],P=t-e[c],A=g[e[c]-1]++<<P,D=A|(1<<P)-1;A<=D;++A)l[V_[A]>>b]=C}else for(l=new _u(a),c=0;c<a;++c)e[c]&&(l[c]=V_[g[e[c]-1]++]>>15-e[c]);return l},Gp=new Eo(288);for(Vr=0;Vr<144;++Vr)Gp[Vr]=8;var Vr;for(Vr=144;Vr<256;++Vr)Gp[Vr]=9;var Vr;for(Vr=256;Vr<280;++Vr)Gp[Vr]=7;var Vr;for(Vr=280;Vr<288;++Vr)Gp[Vr]=8;var Vr,fE=new Eo(32);for(Vr=0;Vr<32;++Vr)fE[Vr]=5;var Vr,jV=Kh(Gp,9,1),VV=Kh(fE,5,1),C0=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},va=function(e,t,n){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&n},k0=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},UV=function(e){return(e+7)/8|0},HV=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var a=new Eo(n-t);return a.set(e.subarray(t,n)),a},WV=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],To=function(e,t,n){var a=new Error(t||WV[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,To),!n)throw a;return a},F1=function(e,t,n,a){var c=e.length,h=a?a.length:0;if(!c||t.f&&!t.l)return n||new Eo(0);var g=!n||t.i!=2,l=t.i;n||(n=new Eo(c*3));var b=function(bt){var Ht=n.length;if(bt>Ht){var Wt=new Eo(Math.max(Ht*2,bt));Wt.set(n),n=Wt}},C=t.f||0,P=t.p||0,A=t.b||0,D=t.l,W=t.d,Z=t.m,U=t.n,J=c*8;do{if(!D){C=va(e,P,1);var O=va(e,P+1,3);if(P+=3,O)if(O==1)D=jV,W=VV,Z=9,U=5;else if(O==2){var te=va(e,P,31)+257,ee=va(e,P+10,15)+4,re=te+va(e,P+5,31)+1;P+=14;for(var fe=new Eo(re),Te=new Eo(19),be=0;be<ee;++be)Te[BV[be]]=va(e,P+be*3,7);P+=ee*3;for(var ze=C0(Te),Ee=(1<<ze)-1,Fe=Kh(Te,ze,1),be=0;be<re;){var Ye=Fe[va(e,P,Ee)];P+=Ye&15;var $=Ye>>4;if($<16)fe[be++]=$;else{var Ke=0,Re=0;for($==16?(Re=3+va(e,P,3),P+=2,Ke=fe[be-1]):$==17?(Re=3+va(e,P,7),P+=3):$==18&&(Re=11+va(e,P,127),P+=7);Re--;)fe[be++]=Ke}}var Ue=fe.subarray(0,te),Ne=fe.subarray(te);Z=C0(Ue),U=C0(Ne),D=Kh(Ue,Z,1),W=Kh(Ne,U,1)}else To(1);else{var $=UV(P)+4,N=e[$-4]|e[$-3]<<8,ie=$+N;if(ie>c){l&&To(0);break}g&&b(A+N),n.set(e.subarray($,ie),A),t.b=A+=N,t.p=P=ie*8,t.f=C;continue}if(P>J){l&&To(0);break}}g&&b(A+131072);for(var Xe=(1<<Z)-1,ct=(1<<U)-1,ft=P;;ft=P){var Ke=D[k0(e,P)&Xe],it=Ke>>4;if(P+=Ke&15,P>J){l&&To(0);break}if(Ke||To(2),it<256)n[A++]=it;else if(it==256){ft=P,D=null;break}else{var Et=it-254;if(it>264){var be=it-257,mt=cE[be];Et=va(e,P,(1<<mt)-1)+pE[be],P+=mt}var zt=W[k0(e,P)&ct],tr=zt>>4;zt||To(3),P+=zt&15;var Ne=NV[tr];if(tr>3){var mt=uE[tr];Ne+=k0(e,P)&(1<<mt)-1,P+=mt}if(P>J){l&&To(0);break}g&&b(A+131072);var nt=A+Et;if(A<Ne){var We=h-Ne,st=Math.min(Ne,nt);for(We+A<0&&To(3);A<st;++A)n[A]=a[We+A]}for(;A<nt;A+=4)n[A]=n[A-Ne],n[A+1]=n[A+1-Ne],n[A+2]=n[A+2-Ne],n[A+3]=n[A+3-Ne];A=nt}}t.l=D,t.p=ft,t.b=A,t.f=C,D&&(C=1,t.m=Z,t.d=W,t.n=U)}while(!C);return A==n.length?n:HV(n,0,A)},GV=new Eo(0),qV=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&To(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var a=(t>>3&1)+(t>>4&1);a>0;a-=!e[n++]);return n+(t&2)},ZV=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},KV=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&To(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&To(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function XV(e,t){return F1(e,{i:2},t&&t.out,t&&t.dictionary)}function JV(e,t){var n=qV(e);return n+8>e.length&&To(6,"invalid gzip data"),F1(e.subarray(n,-8),{i:2},t&&t.out||new Eo(ZV(e)),t&&t.dictionary)}function YV(e,t){return F1(e.subarray(KV(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function U_(e,t){return e[0]==31&&e[1]==139&&e[2]==8?JV(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?XV(e,t):YV(e,t)}var QV=typeof TextDecoder<"u"&&new TextDecoder,e8=0;try{QV.decode(GV,{stream:!0}),e8=1}catch{}var mE=(e,t)=>e*zu(2,t),kh=(e,t)=>Math.floor(e/zu(2,t)),Ig=(e,t)=>mE(e.getUint16(t+1,!0),8)+e.getUint8(t),gE=(e,t)=>mE(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),t8=(e,t,n,a,c)=>{if(e!==a.getUint8(c))return e-a.getUint8(c);const h=Ig(a,c+1);if(t!==h)return t-h;const g=Ig(a,c+4);return n!==g?n-g:0},r8=(e,t,n,a)=>{const c=yE(e,t|128,n,a);return c?{z:t,x:n,y:a,offset:c[0],length:c[1],isDir:!0}:null},dC=(e,t,n,a)=>{const c=yE(e,t,n,a);return c?{z:t,x:n,y:a,offset:c[0],length:c[1],isDir:!1}:null},yE=(e,t,n,a)=>{let c=0,h=e.byteLength/17-1;for(;c<=h;){const g=h+c>>1,l=t8(t,n,a,e,g*17);if(l>0)c=g+1;else if(l<0)h=g-1;else return[gE(e,g*17+7),e.getUint32(g*17+13,!0)]}return null},n8=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,vE=(e,t)=>{const n=e.getUint8(t*17);return{z:n&127,x:Ig(e,t*17+1),y:Ig(e,t*17+4),offset:gE(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:n>>7===1}},hC=e=>{const t=[],n=new DataView(e);for(let a=0;a<n.byteLength/17;a++)t.push(vE(n,a));return i8(t)},i8=e=>{e.sort(n8);const t=new ArrayBuffer(17*e.length),n=new Uint8Array(t);for(let a=0;a<e.length;a++){const c=e[a];let h=c.z;c.isDir&&(h=h|128),n[a*17]=h,n[a*17+1]=c.x&255,n[a*17+2]=c.x>>8&255,n[a*17+3]=c.x>>16&255,n[a*17+4]=c.y&255,n[a*17+5]=c.y>>8&255,n[a*17+6]=c.y>>16&255,n[a*17+7]=c.offset&255,n[a*17+8]=kh(c.offset,8)&255,n[a*17+9]=kh(c.offset,16)&255,n[a*17+10]=kh(c.offset,24)&255,n[a*17+11]=kh(c.offset,32)&255,n[a*17+12]=kh(c.offset,48)&255,n[a*17+13]=c.length&255,n[a*17+14]=c.length>>8&255,n[a*17+15]=c.length>>16&255,n[a*17+16]=c.length>>24&255}return t},o8=(e,t)=>{if(e.byteLength<17)return null;const n=e.byteLength/17,a=vE(e,n-1);if(a.isDir){const c=a.z,h=t.z-c,g=Math.trunc(t.x/(1<<h)),l=Math.trunc(t.y/(1<<h));return{z:c,x:g,y:l}}return null};function a8(e){return Fi(this,null,function*(){const t=yield e.getBytes(0,512e3),n=new DataView(t.data),a=n.getUint32(4,!0),c=n.getUint16(8,!0),h=new TextDecoder("utf-8"),g=JSON.parse(h.decode(new DataView(t.data,10,a)));let l=0;g.compression==="gzip"&&(l=2);let b=0;"minzoom"in g&&(b=+g.minzoom);let C=0;"maxzoom"in g&&(C=+g.maxzoom);let P=0,A=0,D=0,W=-180,Z=-85,U=180,J=85;if(g.bounds){const $=g.bounds.split(",");W=+$[0],Z=+$[1],U=+$[2],J=+$[3]}if(g.center){const $=g.center.split(",");P=+$[0],A=+$[1],D=+$[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+a,rootDirectoryLength:c*17,jsonMetadataOffset:10,jsonMetadataLength:a,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:l,tileType:1,minZoom:b,maxZoom:C,minLon:W,minLat:Z,maxLon:U,maxLat:J,centerZoom:D,centerLon:P,centerLat:A,etag:t.etag}})}function s8(e,t,n,a,c,h,g){return Fi(this,null,function*(){let l=yield n.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(l=hC(l));const b=dC(new DataView(l),a,c,h);if(b){let A=(yield t.getBytes(b.offset,b.length,g)).data;const D=new DataView(A);return D.getUint8(0)===31&&D.getUint8(1)===139&&(A=U_(new Uint8Array(A))),{data:A}}const C=o8(new DataView(l),{z:a,x:c,y:h});if(C){const P=r8(new DataView(l),C.z,C.x,C.y);if(P){let A=yield n.getArrayBuffer(t,P.offset,P.length,e);e.specVersion===1&&(A=hC(A));const D=dC(new DataView(A),a,c,h);if(D){let Z=(yield t.getBytes(D.offset,D.length,g)).data;const U=new DataView(Z);return U.getUint8(0)===31&&U.getUint8(1)===139&&(Z=U_(new Uint8Array(Z))),{data:Z}}}}})}var _E={getHeader:a8,getZxy:s8},l8=e=>(t,n)=>{if(n instanceof AbortController)return e(t,n);const a=new AbortController;return e(t,a).then(c=>n(void 0,c.data,c.cacheControl||"",c.expires||""),c=>n(c)).catch(c=>n(c)),{cancel:()=>a.abort()}},c8=class{constructor(){this.tilev4=(e,t)=>Fi(this,null,function*(){if(e.type==="json"){const A=e.url.substr(10);let D=this.tiles.get(A);D||(D=new pC(A),this.tiles.set(A,D));const W=yield D.getHeader();return{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:W.minZoom,maxzoom:W.maxZoom,bounds:[W.minLon,W.minLat,W.maxLon,W.maxLat]}}}const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),a=e.url.match(n);if(!a)throw new Error("Invalid PMTiles protocol URL");const c=a[1];let h=this.tiles.get(c);h||(h=new pC(c),this.tiles.set(c,h));const g=a[2],l=a[3],b=a[4],C=yield h.getHeader(),P=yield h==null?void 0:h.getZxy(+g,+l,+b,t.signal);return P?{data:new Uint8Array(P.data),cacheControl:P.cacheControl,expires:P.expires}:C.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=l8(this.tilev4),this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function Yc(e,t){return(t>>>0)*4294967296+(e>>>0)}function u8(e,t){const n=t.buf;let a=n[t.pos++],c=(a&112)>>4;if(a<128||(a=n[t.pos++],c|=(a&127)<<3,a<128)||(a=n[t.pos++],c|=(a&127)<<10,a<128)||(a=n[t.pos++],c|=(a&127)<<17,a<128)||(a=n[t.pos++],c|=(a&127)<<24,a<128)||(a=n[t.pos++],c|=(a&1)<<31,a<128))return Yc(e,c);throw new Error("Expected varint not more than 10 bytes")}function Th(e){const t=e.buf;let n=t[e.pos++],a=n&127;return n<128||(n=t[e.pos++],a|=(n&127)<<7,n<128)||(n=t[e.pos++],a|=(n&127)<<14,n<128)||(n=t[e.pos++],a|=(n&127)<<21,n<128)?a:(n=t[e.pos],a|=(n&15)<<28,u8(a,e))}function d8(e,t,n,a){if(a===0){n===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const c=t[0];t[0]=t[1],t[1]=c}}var h8=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function p8(e,t,n){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>zu(2,e)-1||n>zu(2,e)-1)throw Error("tile x/y outside zoom level bounds");const a=h8[e],c=zu(2,e);let h=0,g=0,l=0;const b=[t,n];let C=c/2;for(;C>0;)h=(b[0]&C)>0?1:0,g=(b[1]&C)>0?1:0,l+=C*C*(3*h^g),d8(C,b,h,g),C=C/2;return a+l}function xE(e,t){return Fi(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return U_(new Uint8Array(e));const n=new Response(e).body;if(!n)throw Error("Failed to read response stream");const a=n.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw Error("Compression method not supported")})}var f8=127;function m8(e,t){let n=0,a=e.length-1;for(;n<=a;){const c=a+n>>1,h=t-e[c].tileId;if(h>0)n=c+1;else if(h<0)a=c-1;else return e[c]}return a>=0&&(e[a].runLength===0||t-e[a].tileId<e[a].runLength)?e[a]:null}var g8=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n,a){return Fi(this,null,function*(){let c,h;n?h=n:(c=new AbortController,h=c.signal);const g=new Headers(this.customHeaders);g.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload&&(l="reload");let b=yield fetch(this.url,{signal:h,cache:l,headers:g});if(e===0&&b.status===416){const D=b.headers.get("Content-Range");if(!D||!D.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const W=+D.substr(8);b=yield fetch(this.url,{signal:h,cache:"reload",headers:{range:`bytes=0-${W-1}`}})}let C=b.headers.get("Etag");if(C!=null&&C.startsWith("W/")&&(C=null),b.status===416||a&&C&&C!==a)throw this.mustReload=!0,new H_(a);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const P=b.headers.get("Content-Length");if(b.status===200&&(!P||+P>t))throw c&&c.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:C||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function _a(e,t){const n=e.getUint32(t+4,!0),a=e.getUint32(t+0,!0);return n*zu(2,32)+a}function y8(e,t){const n=new DataView(e),a=n.getUint8(7);if(a>3)throw Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:_a(n,8),rootDirectoryLength:_a(n,16),jsonMetadataOffset:_a(n,24),jsonMetadataLength:_a(n,32),leafDirectoryOffset:_a(n,40),leafDirectoryLength:_a(n,48),tileDataOffset:_a(n,56),tileDataLength:_a(n,64),numAddressedTiles:_a(n,72),numTileEntries:_a(n,80),numTileContents:_a(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:t}}function bE(e){const t={buf:new Uint8Array(e),pos:0},n=Th(t),a=[];let c=0;for(let h=0;h<n;h++){const g=Th(t);a.push({tileId:c+g,offset:0,length:0,runLength:1}),c+=g}for(let h=0;h<n;h++)a[h].runLength=Th(t);for(let h=0;h<n;h++)a[h].length=Th(t);for(let h=0;h<n;h++){const g=Th(t);g===0&&h>0?a[h].offset=a[h-1].offset+a[h-1].length:a[h].offset=g-1}return a}function v8(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var H_=class extends Error{};function _8(e,t){return Fi(this,null,function*(){const n=yield e.getBytes(0,16384);if(new DataView(n.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(v8(n.data)<3)return[yield _E.getHeader(e)];const c=n.data.slice(0,f8),h=y8(c,n.etag),g=n.data.slice(h.rootDirectoryOffset,h.rootDirectoryOffset+h.rootDirectoryLength),l=`${e.getKey()}|${h.etag||""}|${h.rootDirectoryOffset}|${h.rootDirectoryLength}`,b=bE(yield t(g,h.internalCompression));return[h,[l,b.length,b]]})}function x8(e,t,n,a,c){return Fi(this,null,function*(){const h=yield e.getBytes(n,a,void 0,c.etag),g=yield t(h.data,c.internalCompression),l=bE(g);if(l.length===0)throw new Error("Empty directory is invalid");return l})}var b8=class{constructor(e=100,t=!0,n=xE){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=n}getHeader(e){return Fi(this,null,function*(){const t=e.getKey(),n=this.cache.get(t);if(n)return n.lastUsed=this.counter++,yield n.data;const a=new Promise((c,h)=>{_8(e,this.decompress).then(g=>{g[1]&&this.cache.set(g[1][0],{lastUsed:this.counter++,data:Promise.resolve(g[1][2])}),c(g[0]),this.prune()}).catch(g=>{h(g)})});return this.cache.set(t,{lastUsed:this.counter++,data:a}),a})}getDirectory(e,t,n,a){return Fi(this,null,function*(){const c=`${e.getKey()}|${a.etag||""}|${t}|${n}`,h=this.cache.get(c);if(h)return h.lastUsed=this.counter++,yield h.data;const g=new Promise((l,b)=>{x8(e,this.decompress,t,n,a).then(C=>{l(C),this.prune()}).catch(C=>{b(C)})});return this.cache.set(c,{lastUsed:this.counter++,data:g}),g})}getArrayBuffer(e,t,n,a){return Fi(this,null,function*(){const c=`${e.getKey()}|${a.etag||""}|${t}|${n}`,h=this.cache.get(c);if(h)return h.lastUsed=this.counter++,yield h.data;const g=new Promise((l,b)=>{e.getBytes(t,n,void 0,a.etag).then(C=>{l(C.data),this.cache.has(c),this.prune()}).catch(C=>{b(C)})});return this.cache.set(c,{lastUsed:this.counter++,data:g}),g})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,a)=>{n.lastUsed<e&&(e=n.lastUsed,t=a)}),t&&this.cache.delete(t)}}invalidate(e){return Fi(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const n=new Promise((a,c)=>{this.getHeader(e).then(h=>{a(),this.invalidations.delete(t)}).catch(h=>{c(h)})});this.invalidations.set(t,n)})}},pC=class{constructor(e,t,n){typeof e=="string"?this.source=new g8(e):this.source=e,n?this.decompress=n:this.decompress=xE,t?this.cache=t:this.cache=new b8}getHeader(){return Fi(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,a){return Fi(this,null,function*(){const c=p8(e,t,n),h=yield this.cache.getHeader(this.source);if(h.specVersion<3)return _E.getZxy(h,this.source,this.cache,e,t,n,a);if(e<h.minZoom||e>h.maxZoom)return;let g=h.rootDirectoryOffset,l=h.rootDirectoryLength;for(let b=0;b<=3;b++){const C=yield this.cache.getDirectory(this.source,g,l,h),P=m8(C,c);if(P){if(P.runLength>0){const A=yield this.source.getBytes(h.tileDataOffset+P.offset,P.length,a,h.etag);return{data:yield this.decompress(A.data,h.tileCompression),cacheControl:A.cacheControl,expires:A.expires}}g=h.leafDirectoryOffset+P.offset,l=P.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,n,a){return Fi(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,a)}catch(c){if(c instanceof H_)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,n,a);throw c}})}getMetadataAttempt(){return Fi(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),n=yield this.decompress(t.data,e.internalCompression),a=new TextDecoder("utf-8");return JSON.parse(a.decode(n))})}getMetadata(){return Fi(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof H_)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}};let fC=!1;function wE(){if(fC)return;const e=new c8;lE.addProtocol("pmtiles",e.tile),fC=!0}const SE=()=>(wE(),de.jsxs(de.Fragment,{children:[de.jsx(Ur,{id:"background",type:"background",paint:{"background-color":"#9cc0facc"}}),de.jsxs(Wp,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[de.jsx(Ur,{"source-layer":"land",type:"fill",paint:{"fill-color":"#f8f8f8"}}),de.jsx(Ur,{"source-layer":"states",type:"line",paint:{"line-color":"#aaa","line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),de.jsx(Ur,{"source-layer":"countries",type:"line",paint:{"line-color":"#ccc","line-width":1,"line-opacity":1}}),de.jsx(Ur,{"source-layer":"lakes",type:"fill",paint:{"fill-color":"#9cc0facc"}})]})]}));function Bi(e,t){if(e==null)throw new Error(t);return e}class CE extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class wp{static checkArgument(t,n){if(!t)throw new Error(n)}static checkState(t,n){if(!t)throw new Error(n)}static checkExists(t,n){return Bi(t,n)}}var ri=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(ri||{});const Sp=new Set(Array.from({length:17},(e,t)=>t)),W_=e=>{const{game:t,visibleIcons:n=Sp,enableIconAutoHide:a=!0}=e,c=t==="ats"?gC(t,e.dlcs??bp):gC(t,e.dlcs??Jj);return wE(),de.jsxs(Wp,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[de.jsx(Ur,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],c],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":I0,"fill-outline-color":["case",["==",["get","color"],YP.Road],"#999a",I0]}}),de.jsx(Ur,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],c],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":I0}}),de.jsx(w8,{game:t}),de.jsx(Ur,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],c],paint:{"line-color":"#e9e9e8","line-width":1,"line-opacity":.7}}),de.jsx(Ur,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],c],layout:yC,paint:{"line-color":I8,"line-gap-width":vC,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),de.jsx(Ur,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],c],layout:yC,paint:{"line-color":T8,"line-width":vC}}),de.jsx(Ur,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":"#6c90ff88","line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),de.jsx(Ur,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":"#aaa","line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),de.jsx(Ur,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":"#aaa","line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),de.jsx(Ur,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":"#aaa","line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),de.jsx(Ur,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Ul,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":"#eefc","text-color":"#6c80ff"}}),de.jsx(Ur,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Ul,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":"#eefc","text-color":"#555c"}}),n.has(15)&&de.jsx(Ur,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:a?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],c],layout:Qc(a,1,1.25,3.5)}),t==="ets2"&&n.has(16)&&de.jsx(Ur,{id:"euro-road-overlays","source-layer":t,minzoom:a?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",mC]]]],layout:Qc(a,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&n.has(16)&&de.jsx(Ur,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],c],layout:Qc(a,.4,.75,1.25)}),t==="ats"&&n.has(16)&&de.jsx(Ur,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:a?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],c],layout:Qc(a,.4,.75,1.25)}),t==="ats"&&n.has(16)&&de.jsx(Ur,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:a?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],c,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",mC]]]]],layout:Qc(a,.4,.75,1.25)}),n.has(14)&&de.jsx(Ur,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:a?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],c],layout:{...Ul,"text-field":"{name}","text-allow-overlap":!a,"text-variable-anchor":Mh,"text-size":12,"icon-image":T0,"icon-allow-overlap":!a,"icon-size":.6},paint:Dh}),n.has(14)&&de.jsx(Ur,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:a?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],c],layout:{...Ul,"text-field":"{name}","text-allow-overlap":!a,"text-variable-anchor":Mh,"text-size":13,"icon-image":T0,"icon-allow-overlap":!a,"icon-size":.6},paint:Dh}),n.has(14)&&de.jsx(Ur,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:a?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],c],layout:{...Ul,"text-field":"{name}","text-allow-overlap":!a,"text-variable-anchor":Mh,"text-size":14,"icon-image":T0,"icon-allow-overlap":!a,"icon-size":.8},paint:Dh}),t==="ets2"&&n.has(14)&&de.jsx(Ur,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Ul,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Mh,"text-size":14},paint:Dh}),kE(n)&&de.jsx(Ur,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:a?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],C8(n),c],layout:Qc(a,.6,1.25,2.5,{vertical:2,horizontal:2})})]})},w8=({game:e})=>de.jsxs(Wp,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[de.jsx(Ur,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":"#e9e9e8","fill-opacity":["step",["zoom"],1,9,.8]}}),de.jsx(Ur,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":"#e9e9e8","fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":.33}})]});function Qc(e,t,n,a,c={vertical:10,horizontal:30}){const h=["literal",[c.vertical,c.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":h,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,n,13,a]}}const T0=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],S8=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],mC=["weigh_ico","toll_ico","agri_check","border_ico"];function kE(e){return S8.some(t=>e.has(t))}function C8(e){wp.checkArgument(kE(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const n=[];e.has(0)&&n.push("gas_ico"),e.has(4)&&n.push("service_ico"),e.has(13)&&n.push("weigh_station_ico"),e.has(5)&&n.push("dealer_ico"),e.has(12)&&n.push("garage_large_ico"),e.has(3)&&n.push("recruitment_ico"),e.has(2)&&n.push("parking_ico");const a=[];e.has(13)&&a.push("weigh_ico"),e.has(1)&&a.push("toll_ico"),e.has(10)&&a.push("agri_check"),e.has(11)&&a.push("border_ico");const c=t.length>0?["in",["get","poiType"],["literal",t]]:!1,h=n.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",n]]]:!1,g=a.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",a]]]:!1;return["any",c,h,g]}function gC(e,t){if(e!=="ats")return["boolean",!0];const n=JP(t);return["in",["get","dlcGuard"],["literal",[...n]]]}const Mh=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Ul={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},Dh={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},yC={"line-cap":"round","line-join":"bevel"},vC=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],TE={freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},k8={0:"#eaeced",1:"#e6cc9f",2:"#d8a54e",3:"#b1ca9b"},T8=["match",["get","roadType"],...Object.entries(TE).flatMap(([e,[t]])=>[e,t]),"#f0f"],I8=["match",["get","roadType"],...Object.entries(TE).flatMap(([e,[t,n]])=>[e,n]),"#b0b"],I0=["match",["get","color"],...Object.entries(k8).flatMap(([e,t])=>[Number(e),t]),"#b0b"],IE="https://raw.githubusercontent.com/nautofon/ats-towns/kansas/all-towns.geojson";var Qi=(e=>(e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Qi||{});const P8={AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},E8=new Set(Object.keys(P8)),PE=e=>{const{enableAutoHide:t=!0,enabledStates:n=E8}=e;return de.jsx(Wp,{id:"scenery-towns",type:"geojson",data:IE,children:de.jsx(Ur,{id:"scenery-towns",type:"symbol",minzoom:t?7:0,filter:["in",["get","state"],["literal",[...n]]],layout:{...Ul,"text-field":"{name}","text-allow-overlap":!t,"text-variable-anchor":Mh,"text-size":10.5},paint:Dh})})},EE={version:8,sprite:"https://truckermudgeon.github.io/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]};function z8(e,t){return Q({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Kn={},zE={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(zE);var AE=zE.exports;const A8=ks(lM),M8=ks(MR);var ME=AE;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.alpha=$E;Kn.blend=W8;Kn.colorChannel=void 0;var D8=Kn.darken=j1;Kn.decomposeColor=ia;Kn.emphasize=H8;var R8=Kn.getContrastRatio=N8;Kn.getLuminance=Pg;Kn.hexToRgb=DE;Kn.hslToRgb=LE;var L8=Kn.lighten=V1;Kn.private_safeAlpha=j8;Kn.private_safeColorChannel=void 0;Kn.private_safeDarken=V8;Kn.private_safeEmphasize=BE;Kn.private_safeLighten=U8;Kn.recomposeColor=ed;Kn.rgbToHex=F8;var _C=ME(A8),$8=ME(M8);function N1(e,t=0,n=1){return(0,$8.default)(e,t,n)}function DE(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function B8(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ia(e){if(e.type)return e;if(e.charAt(0)==="#")return ia(DE(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,_C.default)(9,e));let a=e.substring(t+1,e.length-1),c;if(n==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error((0,_C.default)(10,c))}else a=a.split(",");return a=a.map(h=>parseFloat(h)),{type:n,values:a,colorSpace:c}}const RE=e=>{const t=ia(e);return t.values.slice(0,3).map((n,a)=>t.type.indexOf("hsl")!==-1&&a!==0?`${n}%`:n).join(" ")};Kn.colorChannel=RE;const O8=(e,t)=>{try{return RE(e)}catch{return e}};Kn.private_safeColorChannel=O8;function ed(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.indexOf("rgb")!==-1?a=a.map((c,h)=>h<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.indexOf("color")!==-1?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function F8(e){if(e.indexOf("#")===0)return e;const{values:t}=ia(e);return`#${t.map((n,a)=>B8(a===3?Math.round(255*n):n)).join("")}`}function LE(e){e=ia(e);const{values:t}=e,n=t[0],a=t[1]/100,c=t[2]/100,h=a*Math.min(c,1-c),g=(C,P=(C+n/30)%12)=>c-h*Math.max(Math.min(P-3,9-P,1),-1);let l="rgb";const b=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(l+="a",b.push(t[3])),ed({type:l,values:b})}function Pg(e){e=ia(e);let t=e.type==="hsl"||e.type==="hsla"?ia(LE(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function N8(e,t){const n=Pg(e),a=Pg(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function $E(e,t){return e=ia(e),t=N1(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,ed(e)}function j8(e,t,n){try{return $E(e,t)}catch{return e}}function j1(e,t){if(e=ia(e),t=N1(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return ed(e)}function V8(e,t,n){try{return j1(e,t)}catch{return e}}function V1(e,t){if(e=ia(e),t=N1(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return ed(e)}function U8(e,t,n){try{return V1(e,t)}catch{return e}}function H8(e,t=.15){return Pg(e)>.5?j1(e,t):V1(e,t)}function BE(e,t,n){try{return BE(e,t)}catch{return e}}function W8(e,t,n,a=1){const c=(b,C)=>Math.round((b**(1/a)*(1-n)+C**(1/a)*n)**a),h=ia(e),g=ia(t),l=[c(h.values[0],g.values[0]),c(h.values[1],g.values[1]),c(h.values[2],g.values[2])];return ed({type:"rgb",values:l})}const G8={black:"#000",white:"#fff"},Cp=G8,q8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Z8=q8,K8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},eu=K8,X8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},tu=X8,J8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ih=J8,Y8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ru=Y8,Q8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},nu=Q8,eU={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},iu=eU,tU=["mode","contrastThreshold","tonalOffset"],xC={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Cp.white,default:Cp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},P0={text:{primary:Cp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Cp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function bC(e,t,n,a){const c=a.light||a,h=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=L8(e.main,c):t==="dark"&&(e.dark=D8(e.main,h)))}function rU(e="light"){return e==="dark"?{main:ru[200],light:ru[50],dark:ru[400]}:{main:ru[700],light:ru[400],dark:ru[800]}}function nU(e="light"){return e==="dark"?{main:eu[200],light:eu[50],dark:eu[400]}:{main:eu[500],light:eu[300],dark:eu[700]}}function iU(e="light"){return e==="dark"?{main:tu[500],light:tu[300],dark:tu[700]}:{main:tu[700],light:tu[400],dark:tu[800]}}function oU(e="light"){return e==="dark"?{main:nu[400],light:nu[300],dark:nu[700]}:{main:nu[700],light:nu[500],dark:nu[900]}}function aU(e="light"){return e==="dark"?{main:iu[400],light:iu[300],dark:iu[700]}:{main:iu[800],light:iu[500],dark:iu[900]}}function sU(e="light"){return e==="dark"?{main:Ih[400],light:Ih[300],dark:Ih[700]}:{main:"#ed6c02",light:Ih[500],dark:Ih[900]}}function lU(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,c=nr(e,tU),h=e.primary||rU(t),g=e.secondary||nU(t),l=e.error||iU(t),b=e.info||oU(t),C=e.success||aU(t),P=e.warning||sU(t);function A(U){return R8(U,P0.text.primary)>=n?P0.text.primary:xC.text.primary}const D=({color:U,name:J,mainShade:O=500,lightShade:$=300,darkShade:N=700})=>{if(U=Q({},U),!U.main&&U[O]&&(U.main=U[O]),!U.hasOwnProperty("main"))throw new Error(ul(11,J?` (${J})`:"",O));if(typeof U.main!="string")throw new Error(ul(12,J?` (${J})`:"",JSON.stringify(U.main)));return bC(U,"light",$,a),bC(U,"dark",N,a),U.contrastText||(U.contrastText=A(U.main)),U},W={dark:P0,light:xC};return oi(Q({common:Q({},Cp),mode:t,primary:D({color:h,name:"primary"}),secondary:D({color:g,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:l,name:"error"}),warning:D({color:P,name:"warning"}),info:D({color:b,name:"info"}),success:D({color:C,name:"success"}),grey:Z8,contrastThreshold:n,getContrastText:A,augmentColor:D,tonalOffset:a},W[t]),c)}const cU=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function uU(e){return Math.round(e*1e5)/1e5}const wC={textTransform:"uppercase"},SC='"Roboto", "Helvetica", "Arial", sans-serif';function dU(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:a=SC,fontSize:c=14,fontWeightLight:h=300,fontWeightRegular:g=400,fontWeightMedium:l=500,fontWeightBold:b=700,htmlFontSize:C=16,allVariants:P,pxToRem:A}=n,D=nr(n,cU),W=c/14,Z=A||(O=>`${O/C*W}rem`),U=(O,$,N,ie,te)=>Q({fontFamily:a,fontWeight:O,fontSize:Z($),lineHeight:N},a===SC?{letterSpacing:`${uU(ie/$)}em`}:{},te,P),J={h1:U(h,96,1.167,-1.5),h2:U(h,60,1.2,-.5),h3:U(g,48,1.167,0),h4:U(g,34,1.235,.25),h5:U(g,24,1.334,0),h6:U(l,20,1.6,.15),subtitle1:U(g,16,1.75,.15),subtitle2:U(l,14,1.57,.1),body1:U(g,16,1.5,.15),body2:U(g,14,1.43,.15),button:U(l,14,1.75,.4,wC),caption:U(g,12,1.66,.4),overline:U(g,12,2.66,1,wC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return oi(Q({htmlFontSize:C,pxToRem:Z,fontFamily:a,fontSize:c,fontWeightLight:h,fontWeightRegular:g,fontWeightMedium:l,fontWeightBold:b},J),D,{clone:!1})}const hU=.2,pU=.14,fU=.12;function _n(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${hU})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${pU})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${fU})`].join(",")}const mU=["none",_n(0,2,1,-1,0,1,1,0,0,1,3,0),_n(0,3,1,-2,0,2,2,0,0,1,5,0),_n(0,3,3,-2,0,3,4,0,0,1,8,0),_n(0,2,4,-1,0,4,5,0,0,1,10,0),_n(0,3,5,-1,0,5,8,0,0,1,14,0),_n(0,3,5,-1,0,6,10,0,0,1,18,0),_n(0,4,5,-2,0,7,10,1,0,2,16,1),_n(0,5,5,-3,0,8,10,1,0,3,14,2),_n(0,5,6,-3,0,9,12,1,0,3,16,2),_n(0,6,6,-3,0,10,14,1,0,4,18,3),_n(0,6,7,-4,0,11,15,1,0,4,20,3),_n(0,7,8,-4,0,12,17,2,0,5,22,4),_n(0,7,8,-4,0,13,19,2,0,5,24,4),_n(0,7,9,-4,0,14,21,2,0,5,26,4),_n(0,8,9,-5,0,15,22,2,0,6,28,5),_n(0,8,10,-5,0,16,24,2,0,6,30,5),_n(0,8,11,-5,0,17,26,2,0,6,32,5),_n(0,9,11,-5,0,18,28,2,0,7,34,6),_n(0,9,12,-6,0,19,29,2,0,7,36,6),_n(0,10,13,-6,0,20,31,3,0,8,38,7),_n(0,10,13,-6,0,21,33,3,0,8,40,7),_n(0,10,14,-6,0,22,35,3,0,8,42,7),_n(0,11,14,-7,0,23,36,3,0,9,44,8),_n(0,11,15,-7,0,24,38,3,0,9,46,8)],gU=["duration","easing","delay"],yU={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},vU={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function CC(e){return`${Math.round(e)}ms`}function _U(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function xU(e){const t=Q({},yU,e.easing),n=Q({},vU,e.duration);return Q({getAutoHeightDuration:_U,create:(c=["all"],h={})=>{const{duration:g=n.standard,easing:l=t.easeInOut,delay:b=0}=h;return nr(h,gU),(Array.isArray(c)?c:[c]).map(C=>`${C} ${typeof g=="string"?g:CC(g)} ${l} ${typeof b=="string"?b:CC(b)}`).join(",")}},e,{easing:t,duration:n})}const bU={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},wU=bU,SU=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function CU(e={},...t){const{mixins:n={},palette:a={},transitions:c={},typography:h={}}=e,g=nr(e,SU);if(e.vars)throw new Error(ul(18));const l=lU(a),b=Ep(e);let C=oi(b,{mixins:z8(b.breakpoints,n),palette:l,shadows:mU.slice(),typography:dU(l,h),transitions:xU(c),zIndex:Q({},wU)});return C=oi(C,g),C=t.reduce((P,A)=>oi(P,A),C),C.unstable_sxConfig=Q({},Zu,g==null?void 0:g.unstable_sxConfig),C.unstable_sx=function(A){return Ku({sx:A,theme:this})},C}const kU=CU(),OE=kU,FE="$$material";function TU({props:e,name:t}){return vx({props:e,name:t,defaultTheme:OE,themeId:FE})}var qp={};const IU=ks(cM);var E0={exports:{}},kC;function PU(){return kC||(kC=1,function(e){function t(n,a){if(n==null)return{};var c={},h=Object.keys(n),g,l;for(l=0;l<h.length;l++)g=h[l],!(a.indexOf(g)>=0)&&(c[g]=n[g]);return c}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(E0)),E0.exports}const EU=ks(hD),zU=ks(pD),AU=ks(xD),MU=ks(xR),DU=ks(sR),RU=ks(pR);var td=AE;Object.defineProperty(qp,"__esModule",{value:!0});var LU=qp.default=KU,$U=qp.shouldForwardProp=Um;qp.systemDefaultTheme=void 0;var qo=td(IU),G_=td(PU()),TC=UU(EU),BU=zU;td(AU);td(MU);var OU=td(DU),FU=td(RU);const NU=["ownerState"],jU=["variants"],VU=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function NE(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(NE=function(a){return a?n:t})(e)}function UU(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=NE(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in e)if(h!=="default"&&Object.prototype.hasOwnProperty.call(e,h)){var g=c?Object.getOwnPropertyDescriptor(e,h):null;g&&(g.get||g.set)?Object.defineProperty(a,h,g):a[h]=e[h]}return a.default=e,n&&n.set(e,a),a}function HU(e){return Object.keys(e).length===0}function WU(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Um(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const GU=qp.systemDefaultTheme=(0,OU.default)(),qU=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Cm({defaultTheme:e,theme:t,themeId:n}){return HU(t)?e:t[n]||t}function ZU(e){return e?(t,n)=>n[e]:null}function Hm(e,t){let{ownerState:n}=t,a=(0,G_.default)(t,NU);const c=typeof e=="function"?e((0,qo.default)({ownerState:n},a)):e;if(Array.isArray(c))return c.flatMap(h=>Hm(h,(0,qo.default)({ownerState:n},a)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:h=[]}=c;let l=(0,G_.default)(c,jU);return h.forEach(b=>{let C=!0;typeof b.props=="function"?C=b.props((0,qo.default)({ownerState:n},a,n)):Object.keys(b.props).forEach(P=>{(n==null?void 0:n[P])!==b.props[P]&&a[P]!==b.props[P]&&(C=!1)}),C&&(Array.isArray(l)||(l=[l]),l.push(typeof b.style=="function"?b.style((0,qo.default)({ownerState:n},a,n)):b.style))}),l}return c}function KU(e={}){const{themeId:t,defaultTheme:n=GU,rootShouldForwardProp:a=Um,slotShouldForwardProp:c=Um}=e,h=g=>(0,FU.default)((0,qo.default)({},g,{theme:Cm((0,qo.default)({},g,{defaultTheme:n,themeId:t}))}));return h.__mui_systemSx=!0,(g,l={})=>{(0,TC.internal_processStyles)(g,te=>te.filter(ee=>!(ee!=null&&ee.__mui_systemSx)));const{name:b,slot:C,skipVariantsResolver:P,skipSx:A,overridesResolver:D=ZU(qU(C))}=l,W=(0,G_.default)(l,VU),Z=P!==void 0?P:C&&C!=="Root"&&C!=="root"||!1,U=A||!1;let J,O=Um;C==="Root"||C==="root"?O=a:C?O=c:WU(g)&&(O=void 0);const $=(0,TC.default)(g,(0,qo.default)({shouldForwardProp:O,label:J},W)),N=te=>typeof te=="function"&&te.__emotion_real!==te||(0,BU.isPlainObject)(te)?ee=>Hm(te,(0,qo.default)({},ee,{theme:Cm({theme:ee.theme,defaultTheme:n,themeId:t})})):te,ie=(te,...ee)=>{let re=N(te);const fe=ee?ee.map(N):[];b&&D&&fe.push(ze=>{const Ee=Cm((0,qo.default)({},ze,{defaultTheme:n,themeId:t}));if(!Ee.components||!Ee.components[b]||!Ee.components[b].styleOverrides)return null;const Fe=Ee.components[b].styleOverrides,Ye={};return Object.entries(Fe).forEach(([Ke,Re])=>{Ye[Ke]=Hm(Re,(0,qo.default)({},ze,{theme:Ee}))}),D(ze,Ye)}),b&&!Z&&fe.push(ze=>{var Ee;const Fe=Cm((0,qo.default)({},ze,{defaultTheme:n,themeId:t})),Ye=Fe==null||(Ee=Fe.components)==null||(Ee=Ee[b])==null?void 0:Ee.variants;return Hm({variants:Ye},(0,qo.default)({},ze,{theme:Fe}))}),U||fe.push(h);const Te=fe.length-ee.length;if(Array.isArray(te)&&Te>0){const ze=new Array(Te).fill("");re=[...te,...ze],re.raw=[...te.raw,...ze]}const be=$(re,...fe);return g.muiName&&(be.muiName=g.muiName),be};return $.withConfig&&(ie.withConfig=$.withConfig),ie}}const XU=e=>$U(e)&&e!=="classes",JU=LU({themeId:FE,defaultTheme:OE,rootShouldForwardProp:XU});function YU(e){return Jg("MuiSvgIcon",e)}kk("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const QU=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],e9=e=>{const{color:t,fontSize:n,classes:a}=e,c={root:["root",t!=="inherit"&&`color${Ft(t)}`,`fontSize${Ft(n)}`]};return Qr(c,YU,a)},t9=JU("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Ft(n.color)}`],t[`fontSize${Ft(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,a,c,h,g,l,b,C,P,A,D,W,Z;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(a=n.create)==null?void 0:a.call(n,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((h=e.typography)==null||(g=h.pxToRem)==null?void 0:g.call(h,20))||"1.25rem",medium:((l=e.typography)==null||(b=l.pxToRem)==null?void 0:b.call(l,24))||"1.5rem",large:((C=e.typography)==null||(P=C.pxToRem)==null?void 0:P.call(C,35))||"2.1875rem"}[t.fontSize],color:(A=(D=(e.vars||e).palette)==null||(D=D[t.color])==null?void 0:D.main)!=null?A:{action:(W=(e.vars||e).palette)==null||(W=W.action)==null?void 0:W.active,disabled:(Z=(e.vars||e).palette)==null||(Z=Z.action)==null?void 0:Z.disabled,inherit:void 0}[t.color]}}),q_=V.forwardRef(function(t,n){const a=TU({props:t,name:"MuiSvgIcon"}),{children:c,className:h,color:g="inherit",component:l="svg",fontSize:b="medium",htmlColor:C,inheritViewBox:P=!1,titleAccess:A,viewBox:D="0 0 24 24"}=a,W=nr(a,QU),Z=V.isValidElement(c)&&c.type==="svg",U=Q({},a,{color:g,component:l,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:P,viewBox:D,hasSvgAsChild:Z}),J={};P||(J.viewBox=D);const O=e9(U);return de.jsxs(t9,Q({as:l,className:Ni(O.root,h),focusable:"false",color:C,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n},J,W,Z&&c.props,{ownerState:U,children:[Z?c.props.children:c,A?de.jsx("title",{children:A}):null]}))});q_.muiName="SvgIcon";function r9(e,t){function n(a,c){return de.jsx(q_,Q({"data-testid":`${t}Icon`,ref:c},a,{children:e}))}return n.muiName=q_.muiName,V.memo(V.forwardRef(n))}const n9=r9(de.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),jE={[ri.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[ri.Toll]:{iconName:"toll_ico",label:"Toll gate"},[ri.Parking]:{iconName:"parking_ico",label:"Rest stop"},[ri.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[ri.Service]:{iconName:"service_ico",label:"Service"},[ri.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[ri.Port]:{iconName:"port_overlay",label:"Port"},[ri.Train]:{iconName:"train_ico",label:"Train"},[ri.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[ri.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[ri.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[ri.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[ri.Garage]:{iconName:"garage_large_ico",label:"Garage"},[ri.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[ri.CityNames]:{iconName:"city_names_ico",label:"City names"},[ri.Company]:{iconName:"companies_ico",label:"Companies"},[ri.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},IC=new Map(Object.entries(jE).map(([e,t])=>[Number(e),t.label])),PC=new Map(Object.entries(Kj).map(([e,t])=>[Number(e),t]));function Eg(e,t,n){return{selectedItems:e,onSelectAllToggle:a=>t(new Set(a?n:[])),onItemToggle:(a,c)=>{t(h=>{const g=new Set(h);return c?g.add(a):g.delete(a),g})}}}const VE=e=>{const[t,n]=V.useState(!1),[a,c]=V.useState(0);return de.jsxs(de.Fragment,{children:[de.jsx(LP,{title:"Map Options",children:de.jsx(fO,{variant:"outlined",sx:{backgroundColor:"background.body",position:"absolute",left:0,bottom:0,m:2},onClick:()=>n(!0),children:de.jsx(n9,{})})}),de.jsx(h6,{open:t,onClose:()=>n(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{pointerEvents:"auto",bgcolor:"transparent",p:2,boxShadow:"none",justifyContent:"end"}}},children:de.jsxs(Q6,{variant:"outlined",sx:{borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[de.jsx(e6,{children:"Map Options"}),de.jsx(C6,{}),de.jsx(A2,{onChange:(h,g)=>c(Number(g)),children:de.jsxs(fN,{tabFlex:1,sx:{borderRadius:0},children:[de.jsx(E2,{children:"Icons"}),de.jsx(E2,{children:"ATS DLC"})]})}),de.jsx(qF,{sx:{overflowX:"hidden"},children:de.jsxs(A2,{value:a,children:[de.jsx(z2,{sx:{p:0},value:0,children:de.jsx(EC,{items:IC,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:h=>de.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${jE[h].iconName}.png`})})}),de.jsx(z2,{sx:{p:0},value:1,children:de.jsx(EC,{items:PC,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})})]})}),de.jsx(n6,{}),a===0&&de.jsx(i9,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===IC.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),a===1&&de.jsx(a9,{enableSelectAll:e.atsDlcs.selectedItems.size===PC.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},i9=V.memo(e=>de.jsxs(RP,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[de.jsx(LP,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:de.jsx(Sg,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var n;return(n=e.onAutoHidingToggle)==null?void 0:n.call(e,t.target.checked)}})}),de.jsx(Sg,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var n;return(n=e.onSelectAllToggle)==null?void 0:n.call(e,t.target.checked)}})]})),o9=e=>de.jsx(zy,{size:"lg",sx:{p:0,[`& .${Yl.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,n])=>{var a;return de.jsxs(Iy,{children:[(a=e.icon)==null?void 0:a.call(e,t),de.jsx(Sg,{overlay:!0,label:n,checked:e.selectedItems.has(t),onChange:c=>e.onItemToggle(t,c.target.checked)})]},String(t))})}),EC=V.memo(o9),a9=V.memo(e=>de.jsx(RP,{direction:"row",justifyContent:"end",gap:1,mx:2,children:de.jsx(Sg,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var n;return(n=e.onSelectAllToggle)==null?void 0:n.call(e,t.target.checked)}})})),zC=[{label:"ATS",value:"usa"},{label:"ETS2",value:"europe"}],s9=({map:e,onSelect:t})=>de.jsx("div",{style:{width:90,margin:10,display:"inline-block"},children:de.jsx(q6,{value:e,onChange:(n,a)=>t(Bi(zC.find(c=>c.value===a))),children:zC.map(n=>de.jsx(D6,{value:n.value,children:n.label},n.value))})}),l9=e=>{const{map:t,onSelect:n}=e,[a,c]=V.useState([]);V.useEffect(()=>{Promise.all([fetch("cities.geojson").then(l=>l.json()),fetch(IE).then(l=>l.json())]).then(([l,b])=>{c(u9(l,b))},()=>console.error("could not load cities/towns geojson."))},[]);const h=a.filter(l=>{const b=l.map===t;return t==="europe"?b:b&&e.visibleStates.has(l.stateCode)}),g=aP({stringify:l=>[l.state,l.label].join(" ")});return de.jsx("div",{style:{width:250,margin:10,marginLeft:0,display:"inline-block"},children:de.jsx(D_,{onChange:(l,b)=>b&&n(b),placeholder:"Fly to...",options:h,filterOptions:g,groupBy:l=>l.state,blurOnSelect:!0,autoComplete:!0,renderGroup:c9},t)})};function c9(e){return de.jsxs(de.Fragment,{children:[de.jsx(D1,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),de.jsx(zy,{children:e.children}),de.jsx(DP,{})]})}function u9(e,t){const n=[],a=new Map;for(const c of e.features)if(c.properties.type==="city")n.push(c);else if(c.properties.type==="country")a.set(c.properties.code,c.properties.name);else throw new Error;for(const c of t.features)n.push({type:"Feature",geometry:c.geometry,properties:{type:"city",map:"usa",countryCode:c.properties.state,name:c.properties.name}});return n.map(({properties:c,geometry:h})=>({map:c.map,state:Bi(a.get(c.countryCode)),stateCode:c.countryCode,label:c.name,value:h.coordinates})).sort((c,h)=>c.state!==h.state?c.state.localeCompare(h.state):c.label.localeCompare(h.label))}const d9=e=>{const{current:t}=eE(),n=localStorage.getItem("tm-map")==="europe"?{label:"ETS2",value:"europe"}:{label:"ATS",value:"usa"},[a,c]=V.useState(n),h=z0.useCallback(l=>{l!=null&&(c(l),localStorage.setItem("tm-map",l.value),t&&(l.value==="europe"?t.flyTo({curve:1,zoom:9,center:[8,50]}):t.flyTo({curve:1,zoom:9,center:[-108,40]})))},[t]),g=z0.useCallback(l=>{t==null||l==null||(t.flyTo({curve:1,zoom:9,center:l.value.map(b=>Number(b.toFixed(3)))}),t.once("moveend",b=>{const{lat:C,lng:P}=b.target.getCenter(),A=b.target.getZoom(),D=Number(b.target.getBearing().toFixed(1)),W=Math.round(b.target.getPitch());W?window.location.hash=`${A}/${C.toFixed(3)}/${P.toFixed(3)}/${D}/${W}`:D?window.location.hash=`${A}/${C.toFixed(3)}/${P.toFixed(3)}/${D}`:window.location.hash=`${A}/${C.toFixed(3)}/${P.toFixed(3)}`}))},[t]);return de.jsxs(de.Fragment,{children:[de.jsx(s9,{map:a.value,onSelect:h}),de.jsx(l9,{map:a.value,onSelect:g,visibleStates:e.visibleStates})]})};function UE(e){return new Set([...e].map(h9).concat(Qi.CA))}function h9(e){switch(e){case uo.Arizona:return Qi.AZ;case uo.Colorado:return Qi.CO;case uo.Idaho:return Qi.ID;case uo.Kansas:return Qi.KS;case uo.Montana:return Qi.MT;case uo.Nevada:return Qi.NV;case uo.NewMexico:return Qi.NM;case uo.Oklahoma:return Qi.OK;case uo.Oregon:return Qi.OR;case uo.Texas:return Qi.TX;case uo.Utah:return Qi.UT;case uo.Washington:return Qi.WA;case uo.Wyoming:return Qi.WY;default:throw new CE(e)}}const p9=()=>{const[e,t]=V.useState(!0),[n,a]=V.useState(new Set(Sp)),[c,h]=V.useState(new Set(bp)),g=UE(c),l=Eg(n,a,Sp),b=Eg(c,h,bp);return de.jsxs(tE,{style:{width:"100vw",height:"100vh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:EE,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[de.jsx(SE,{}),de.jsx(W_,{game:"ats",enableIconAutoHide:e,visibleIcons:n,dlcs:c}),de.jsx(W_,{game:"ets2",enableIconAutoHide:e,visibleIcons:n}),n.has(ri.CityNames)&&de.jsx(PE,{enableAutoHide:e,enabledStates:g}),de.jsx(iE,{visualizePitch:!0}),de.jsx(nE,{}),de.jsx(rE,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),de.jsx(d9,{visibleStates:g}),de.jsx(VE,{icons:{...l,enableAutoHiding:e,onAutoHidingToggle:t},atsDlcs:b})]})};function f9(e,t){return g9(e,t,(n,a,c,h)=>Math.sqrt(Math.pow(c-n,2)+Math.pow(h-a,2)))}function m9(e){let t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(const h of e)Array.isArray(h)?(t=Math.min(t,h[0]),a=Math.max(a,h[0]),n=Math.min(n,h[1]),c=Math.max(c,h[1])):(t=Math.min(t,h.x),a=Math.max(a,h.x),n=Math.min(n,h.y),c=Math.max(c,h.y));return[t,n,a,c]}function g9(e,t,n){let a,c;Array.isArray(e)?(wp.checkArgument(e.length>=2),a=e[0],c=e[1]):(a=e.x,c=e.y);let h,g;return Array.isArray(t)?(wp.checkArgument(t.length>=2),h=t[0],g=t[1]):(h=t.x,g=t.y),n(a,c,h,g)}var y9=Object.defineProperty,v9=(e,t,n)=>t in e?y9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_9=(e,t,n)=>(v9(e,typeof t!="symbol"?t+"":t,n),n);class x9{constructor(t){_9(this,"_kind"),this._kind=t}}function b9(e,t){const n=e.toString(),a=t.toString();return n>a?1:n<a?-1:0}const w9=b9;var S9=Object.defineProperty,C9=(e,t,n)=>t in e?S9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AC=(e,t,n)=>(C9(e,typeof t!="symbol"?t+"":t,n),n);function k9(e,t,n){const a=t*2,c=t*2+1;let h=t;return a<e.length&&n(e[h],e[a])<0&&(h=a),c<e.length&&n(e[h],e[c])<0&&(h=c),h}function U1(e,t,n){const a=k9(e,t,n);if(a!==t){const c=e[t];e[t]=e[a],e[a]=c,U1(e,a,n)}}function MC(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)U1(e.collection,t,e.comparator)}class zg extends x9{constructor({comparator:t=w9}={}){super("BinaryHeap"),AC(this,"comparator"),AC(this,"collection",[]),this.comparator=t}static from(t,n={}){const a=new zg(n);return a.collection=Array.from(t),MC(a),a}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),U1(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const n=this.collection;for(let a=n.length-1,c=Math.floor(a/2);a>0&&this.comparator(n[c],n[a])<0;a=c,c=Math.floor(c/2)){const h=n[a];n[a]=n[c],n[c]=h}}merge(t){t instanceof zg?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),MC(this),t.clear()}isEmpty(){return!this.collection.length}}function T9(e,t,n,a,c){const{nodeLUT:h,graph:g}=c,l=Bi(h.get(e)),b=Bi(h.get(t)),C=new P9({comparator:(O,$)=>{const N=U.get(O)??1/0;return(U.get($)??1/0)-N}}),P={nodeId:e,distance:0,direction:n,dlcGuard:-1};C.push(P);const A=new Map,D=new Map;D.set(P,0);const W=O=>f9(O,b),Z=(O,$)=>{switch(a){case"shortest":return $.distance;case"smallRoads":return $.isOneLaneRoad?$.distance:$.distance*10;default:throw new CE(a)}},U=new Map;U.set(P,W(l));let J=0;for(;!C.isEmpty();){J++;const O=C.pop();if(O.nodeId===t)return I9(A,O);const $=g.get(O.nodeId);if(!$)continue;const N=O.direction==="forward"?$.forward:$.backward;for(const ie of N){if(!c.enabledDlcGuards.has(ie.dlcGuard))continue;const te=(D.get(O)??1/0)+Z(O,ie);te<(D.get(ie)??1/0)&&(A.set(ie,O),D.set(ie,te),U.set(ie,te+W(Bi(h.get(ie.nodeId)))),C.has(ie)||C.push(ie))}}console.warn(`no ${n} route found from`,l,"and",b,`(${J} iterations)`)}function I9(e,t){let n=0;const a=[t];for(;e.has(t);)t=e.get(t),a.unshift(t),n+=t.distance;return a.length===1&&a.push(a[0]),{route:a,distance:n}}class P9 extends zg{constructor(n){super(n);Cw(this,"items",new Set)}has(n){return this.items.has(n)}push(n){wp.checkState(!this.items.has(n)),super.push(n),this.items.add(n)}pop(){const n=super.pop();return wp.checkState(this.items.has(n)),this.items.delete(n),n}clear(){super.clear(),this.items.clear()}merge(n){super.merge(n);for(const a of this.collection)this.items.add(a)}}const E9=()=>{const[e,t]=V.useState(!0),[n,a]=V.useState(new Set(Sp)),[c,h]=V.useState(new Set(bp)),g=UE(c),l=Eg(n,a,Sp),b=Eg(c,h,bp);return de.jsxs(tE,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:EE,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[de.jsx(SE,{}),de.jsx(W_,{game:"ats",enableIconAutoHide:e,visibleIcons:n,dlcs:c}),de.jsx(PE,{enableAutoHide:e,enabledStates:g}),de.jsx(Wp,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:de.jsx(Ur,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),de.jsx(iE,{visualizePitch:!0}),de.jsx(nE,{}),de.jsx(rE,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),de.jsx(z9,{dlcs:c}),de.jsx(VE,{icons:{...l,enableAutoHiding:e,onAutoHidingToggle:t},atsDlcs:b})]})},z9=e=>{const{current:t}=eE(),n=JP(e.dlcs),[a,c]=V.useState(void 0),[h,g]=V.useState(void 0),[l,b]=V.useState([]),[C,P]=V.useState([]);V.useEffect(()=>{fetch("usa-graph-demo.json").then(re=>re.json()).then(re=>{b(re.demoCompanies.map(LC)),g(A9(re)),c(re)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[A,D]=V.useState(void 0),[W,Z]=V.useState(void 0),U=V.useCallback(re=>{re=Bi(re),D(re.value);let fe;if(a!=null){fe=Bi(a.demoCompanies.find(ze=>ze.n===re.value));const Te=Bi(a.demoCompanyDefs.find(ze=>ze.t===fe.t)),be=new Set(Te.d);P(a.demoCompanies.filter(ze=>be.has(ze.t)).map(LC))}if(!(t==null||h==null)&&(W!=null&&(Bi(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),Z(void 0)),fe)){const Te=Bi(h.nodeLUT.get(fe.n));t.flyTo({curve:1,zoom:9,center:[Te.x,Te.y]})}},[t,W,h,a]),J=V.useCallback(re=>{re=Bi(re),Z(re.value),!(t==null||h==null)&&O(Bi(A),re.value,t,{...h,enabledDlcGuards:n})},[t,A,h,e.dlcs]),O=(re,fe,Te,be)=>{Promise.all([$C(re,fe,"shortest",be),$C(re,fe,"smallRoads",be)]).then(ze=>{const Ee=Bi(Te.getSource("route1"));if(ze.some(Ye=>Ye==null)){alert("Cannot calculate a route "),Ee.setData({type:"FeatureCollection",features:[]});return}const Fe=ze;Ee.setData({type:"FeatureCollection",features:Fe}),Te.fitBounds(m9(Fe.flatMap(Ye=>Ye.geometry.coordinates)),{padding:150,curve:1,duration:2500})},ze=>{console.error("error finding route",ze)})},$=new Map;if(a)for(const[,re]of a.demoGraph)for(const fe of[...re.b??[],...re.f??[]]){const Te=$.get(fe.n)??0;$.set(fe.n,Te||fe.g)}const N=re=>{if(h==null)return!0;const fe=Bi($.get(re.value));return n.has(fe)},ie=(re,fe)=>re.city!==fe.city?re.city.localeCompare(fe.city):re.label.localeCompare(fe.label),te=l.filter(N).sort(ie),ee=C.filter(N).sort(ie);return de.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[de.jsx("h2",{children:"Start"}),de.jsx(D_,{options:te,onChange:(re,fe)=>fe&&U(fe),groupBy:re=>re.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:DC}),de.jsx("h2",{children:"End"}),de.jsx(D_,{options:ee,onChange:(re,fe)=>fe&&J(fe),groupBy:re=>re.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:A==null,renderGroup:DC},A)]})};function DC(e){return de.jsxs(de.Fragment,{children:[de.jsx(D1,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),de.jsx(zy,{children:e.children}),de.jsx(DP,{})]})}function A9(e){const t=new Map,n=new Map;for(const[a,c]of e.demoGraph)t.set(a,{forward:(c.f??[]).map(RC),backward:(c.b??[]).map(RC)});for(const[a,c]of e.demoNodes)n.set(a,{x:c[0],y:c[1]});return{graph:t,nodeLUT:n}}function RC(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function LC(e){return{label:e.t,city:e.c,value:e.n}}function $C(e,t,n,a){return new Promise(c=>{const h=T9(e,t,"forward",n,a);if(!h){c(void 0);return}c({type:"Feature",geometry:{type:"LineString",coordinates:h.route.map(g=>{const l=Bi(a.nodeLUT.get(g.nodeId));return[l.x,l.y]})},properties:{distance:h.distance,mode:n}})})}const M9=Oj(j_([de.jsx(N_,{path:"/",element:de.jsx(p9,{})}),de.jsx(N_,{path:"routes",element:de.jsx(E9,{})})])),D9=document.getElementById("root"),R9=$P(D9);R9.render(de.jsx(V.StrictMode,{children:de.jsxs(DL,{children:[de.jsx(OF,{}),de.jsx(qj,{router:M9})]})}));
