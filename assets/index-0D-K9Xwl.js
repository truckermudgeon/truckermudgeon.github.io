var PD=Object.defineProperty;var ED=(e,t,r)=>t in e?PD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var uS=(e,t,r)=>ED(e,typeof t!="symbol"?t+"":t,r);function Ex(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();var zD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rs(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),r}var Ik={exports:{}},Yg={},Tk={exports:{}},Ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=Symbol.for("react.element"),MD=Symbol.for("react.portal"),DD=Symbol.for("react.fragment"),AD=Symbol.for("react.strict_mode"),RD=Symbol.for("react.profiler"),LD=Symbol.for("react.provider"),$D=Symbol.for("react.context"),BD=Symbol.for("react.forward_ref"),OD=Symbol.for("react.suspense"),FD=Symbol.for("react.memo"),ND=Symbol.for("react.lazy"),dS=Symbol.iterator;function jD(e){return e===null||typeof e!="object"?null:(e=dS&&e[dS]||e["@@iterator"],typeof e=="function"?e:null)}var Pk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ek=Object.assign,zk={};function nd(e,t,r){this.props=e,this.context=t,this.refs=zk,this.updater=r||Pk}nd.prototype.isReactComponent={};nd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mk(){}Mk.prototype=nd.prototype;function Mx(e,t,r){this.props=e,this.context=t,this.refs=zk,this.updater=r||Pk}var Dx=Mx.prototype=new Mk;Dx.constructor=Mx;Ek(Dx,nd.prototype);Dx.isPureReactComponent=!0;var hS=Array.isArray,Dk=Object.prototype.hasOwnProperty,Ax={current:null},Ak={key:!0,ref:!0,__self:!0,__source:!0};function Rk(e,t,r){var o,c={},d=null,m=null;if(t!=null)for(o in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(d=""+t.key),t)Dk.call(t,o)&&!Ak.hasOwnProperty(o)&&(c[o]=t[o]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)c[o]===void 0&&(c[o]=l[o]);return{$$typeof:Bp,type:e,key:d,ref:m,props:c,_owner:Ax.current}}function VD(e,t){return{$$typeof:Bp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bp}function UD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var pS=/\/+/g;function v0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?UD(""+e.key):t.toString(36)}function Fm(e,t,r,o,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(d){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Bp:case MD:m=!0}}if(m)return m=e,c=c(m),e=o===""?"."+v0(m,0):o,hS(c)?(r="",e!=null&&(r=e.replace(pS,"$&/")+"/"),Fm(c,t,r,"",function(w){return w})):c!=null&&(Rx(c)&&(c=VD(c,r+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(pS,"$&/")+"/")+e)),t.push(c)),1;if(m=0,o=o===""?".":o+":",hS(e))for(var l=0;l<e.length;l++){d=e[l];var b=o+v0(d,l);m+=Fm(d,t,r,b,c)}else if(b=jD(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=o+v0(d,l++),m+=Fm(d,t,r,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function fm(e,t,r){if(e==null)return e;var o=[],c=0;return Fm(e,o,"","",function(d){return t.call(r,d,c++)}),o}function HD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var so={current:null},Nm={transition:null},WD={ReactCurrentDispatcher:so,ReactCurrentBatchConfig:Nm,ReactCurrentOwner:Ax};function Lk(){throw Error("act(...) is not supported in production builds of React.")}Ar.Children={map:fm,forEach:function(e,t,r){fm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fm(e,function(){t++}),t},toArray:function(e){return fm(e,function(t){return t})||[]},only:function(e){if(!Rx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ar.Component=nd;Ar.Fragment=DD;Ar.Profiler=RD;Ar.PureComponent=Mx;Ar.StrictMode=AD;Ar.Suspense=OD;Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WD;Ar.act=Lk;Ar.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Ek({},e.props),c=e.key,d=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,m=Ax.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)Dk.call(t,b)&&!Ak.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];o.children=l}return{$$typeof:Bp,type:e.type,key:c,ref:d,props:o,_owner:m}};Ar.createContext=function(e){return e={$$typeof:$D,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LD,_context:e},e.Consumer=e};Ar.createElement=Rk;Ar.createFactory=function(e){var t=Rk.bind(null,e);return t.type=e,t};Ar.createRef=function(){return{current:null}};Ar.forwardRef=function(e){return{$$typeof:BD,render:e}};Ar.isValidElement=Rx;Ar.lazy=function(e){return{$$typeof:ND,_payload:{_status:-1,_result:e},_init:HD}};Ar.memo=function(e,t){return{$$typeof:FD,type:e,compare:t===void 0?null:t}};Ar.startTransition=function(e){var t=Nm.transition;Nm.transition={};try{e()}finally{Nm.transition=t}};Ar.unstable_act=Lk;Ar.useCallback=function(e,t){return so.current.useCallback(e,t)};Ar.useContext=function(e){return so.current.useContext(e)};Ar.useDebugValue=function(){};Ar.useDeferredValue=function(e){return so.current.useDeferredValue(e)};Ar.useEffect=function(e,t){return so.current.useEffect(e,t)};Ar.useId=function(){return so.current.useId()};Ar.useImperativeHandle=function(e,t,r){return so.current.useImperativeHandle(e,t,r)};Ar.useInsertionEffect=function(e,t){return so.current.useInsertionEffect(e,t)};Ar.useLayoutEffect=function(e,t){return so.current.useLayoutEffect(e,t)};Ar.useMemo=function(e,t){return so.current.useMemo(e,t)};Ar.useReducer=function(e,t,r){return so.current.useReducer(e,t,r)};Ar.useRef=function(e){return so.current.useRef(e)};Ar.useState=function(e){return so.current.useState(e)};Ar.useSyncExternalStore=function(e,t,r){return so.current.useSyncExternalStore(e,t,r)};Ar.useTransition=function(){return so.current.useTransition()};Ar.version="18.3.1";Tk.exports=Ar;var A=Tk.exports;const jm=zx(A),cg=Ex({__proto__:null,default:jm},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GD=A,qD=Symbol.for("react.element"),ZD=Symbol.for("react.fragment"),KD=Object.prototype.hasOwnProperty,XD=GD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JD={key:!0,ref:!0,__self:!0,__source:!0};function $k(e,t,r){var o,c={},d=null,m=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(m=t.ref);for(o in t)KD.call(t,o)&&!JD.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)c[o]===void 0&&(c[o]=t[o]);return{$$typeof:qD,type:e,key:d,ref:m,props:c,_owner:XD.current}}Yg.Fragment=ZD;Yg.jsx=$k;Yg.jsxs=$k;Ik.exports=Yg;var Q=Ik.exports;const wh={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Qg="$$joy";function Is(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const YD=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"}));function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},W.apply(null,arguments)}const QD=Object.freeze(Object.defineProperty({__proto__:null,get default(){return W}},Symbol.toStringTag,{value:"Module"}));function Bk(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var eA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,tA=Bk(function(e){return eA.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),rA=!1;function nA(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function iA(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var oA=function(){function e(r){var o=this;this._insertTag=function(c){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(c,d),o.tags.push(c)},this.isSpeedy=r.speedy===void 0?!rA:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(iA(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=nA(c);try{d.insertRule(o,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var c;return(c=o.parentNode)==null?void 0:c.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Wi="-ms-",ug="-moz-",Kr="-webkit-",Ok="comm",Lx="rule",$x="decl",aA="@import",Fk="@keyframes",sA="@layer",lA=Math.abs,ey=String.fromCharCode,cA=Object.assign;function uA(e,t){return Pi(e,0)^45?(((t<<2^Pi(e,0))<<2^Pi(e,1))<<2^Pi(e,2))<<2^Pi(e,3):0}function Nk(e){return e.trim()}function dA(e,t){return(e=t.exec(e))?e[0]:e}function Xr(e,t,r){return e.replace(t,r)}function p_(e,t){return e.indexOf(t)}function Pi(e,t){return e.charCodeAt(t)|0}function cp(e,t,r){return e.slice(t,r)}function Za(e){return e.length}function Bx(e){return e.length}function mm(e,t){return t.push(e),e}function hA(e,t){return e.map(t).join("")}var ty=1,Nu=1,jk=0,So=0,ni=0,id="";function ry(e,t,r,o,c,d,m){return{value:e,root:t,parent:r,type:o,props:c,children:d,line:ty,column:Nu,length:m,return:""}}function Sh(e,t){return cA(ry("",null,null,"",null,null,0),e,{length:-e.length},t)}function pA(){return ni}function fA(){return ni=So>0?Pi(id,--So):0,Nu--,ni===10&&(Nu=1,ty--),ni}function Bo(){return ni=So<jk?Pi(id,So++):0,Nu++,ni===10&&(Nu=1,ty++),ni}function Ja(){return Pi(id,So)}function Vm(){return So}function Op(e,t){return cp(id,e,t)}function up(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Vk(e){return ty=Nu=1,jk=Za(id=e),So=0,[]}function Uk(e){return id="",e}function Um(e){return Nk(Op(So-1,f_(e===91?e+2:e===40?e+1:e)))}function mA(e){for(;(ni=Ja())&&ni<33;)Bo();return up(e)>2||up(ni)>3?"":" "}function gA(e,t){for(;--t&&Bo()&&!(ni<48||ni>102||ni>57&&ni<65||ni>70&&ni<97););return Op(e,Vm()+(t<6&&Ja()==32&&Bo()==32))}function f_(e){for(;Bo();)switch(ni){case e:return So;case 34:case 39:e!==34&&e!==39&&f_(ni);break;case 40:e===41&&f_(e);break;case 92:Bo();break}return So}function yA(e,t){for(;Bo()&&e+ni!==57;)if(e+ni===84&&Ja()===47)break;return"/*"+Op(t,So-1)+"*"+ey(e===47?e:Bo())}function vA(e){for(;!up(Ja());)Bo();return Op(e,So)}function _A(e){return Uk(Hm("",null,null,null,[""],e=Vk(e),0,[0],e))}function Hm(e,t,r,o,c,d,m,l,b){for(var w=0,T=0,E=m,M=0,O=0,U=0,V=1,K=1,F=1,R=0,L="",re=c,J=d,se=o,ie=L;K;)switch(U=R,R=Bo()){case 40:if(U!=108&&Pi(ie,E-1)==58){p_(ie+=Xr(Um(R),"&","&\f"),"&\f")!=-1&&(F=-1);break}case 34:case 39:case 91:ie+=Um(R);break;case 9:case 10:case 13:case 32:ie+=mA(U);break;case 92:ie+=gA(Vm()-1,7);continue;case 47:switch(Ja()){case 42:case 47:mm(xA(yA(Bo(),Vm()),t,r),b);break;default:ie+="/"}break;case 123*V:l[w++]=Za(ie)*F;case 125*V:case 59:case 0:switch(R){case 0:case 125:K=0;case 59+T:F==-1&&(ie=Xr(ie,/\f/g,"")),O>0&&Za(ie)-E&&mm(O>32?mS(ie+";",o,r,E-1):mS(Xr(ie," ","")+";",o,r,E-2),b);break;case 59:ie+=";";default:if(mm(se=fS(ie,t,r,w,T,c,l,L,re=[],J=[],E),d),R===123)if(T===0)Hm(ie,t,se,se,re,d,E,l,J);else switch(M===99&&Pi(ie,3)===110?100:M){case 100:case 108:case 109:case 115:Hm(e,se,se,o&&mm(fS(e,se,se,0,0,c,l,L,c,re=[],E),J),c,J,E,l,o?re:J);break;default:Hm(ie,se,se,se,[""],J,0,l,J)}}w=T=O=0,V=F=1,L=ie="",E=m;break;case 58:E=1+Za(ie),O=U;default:if(V<1){if(R==123)--V;else if(R==125&&V++==0&&fA()==125)continue}switch(ie+=ey(R),R*V){case 38:F=T>0?1:(ie+="\f",-1);break;case 44:l[w++]=(Za(ie)-1)*F,F=1;break;case 64:Ja()===45&&(ie+=Um(Bo())),M=Ja(),T=E=Za(L=ie+=vA(Vm())),R++;break;case 45:U===45&&Za(ie)==2&&(V=0)}}return d}function fS(e,t,r,o,c,d,m,l,b,w,T){for(var E=c-1,M=c===0?d:[""],O=Bx(M),U=0,V=0,K=0;U<o;++U)for(var F=0,R=cp(e,E+1,E=lA(V=m[U])),L=e;F<O;++F)(L=Nk(V>0?M[F]+" "+R:Xr(R,/&\f/g,M[F])))&&(b[K++]=L);return ry(e,t,r,c===0?Lx:l,b,w,T)}function xA(e,t,r){return ry(e,t,r,Ok,ey(pA()),cp(e,2,-2),0)}function mS(e,t,r,o){return ry(e,t,r,$x,cp(e,0,o),cp(e,o+1,-1),o)}function Eu(e,t){for(var r="",o=Bx(e),c=0;c<o;c++)r+=t(e[c],c,e,t)||"";return r}function bA(e,t,r,o){switch(e.type){case sA:if(e.children.length)break;case aA:case $x:return e.return=e.return||e.value;case Ok:return"";case Fk:return e.return=e.value+"{"+Eu(e.children,o)+"}";case Lx:e.value=e.props.join(",")}return Za(r=Eu(e.children,o))?e.return=e.value+"{"+r+"}":""}function wA(e){var t=Bx(e);return function(r,o,c,d){for(var m="",l=0;l<t;l++)m+=e[l](r,o,c,d)||"";return m}}function SA(e){return function(t){t.root||(t=t.return)&&e(t)}}var CA=function(t,r,o){for(var c=0,d=0;c=d,d=Ja(),c===38&&d===12&&(r[o]=1),!up(d);)Bo();return Op(t,So)},kA=function(t,r){var o=-1,c=44;do switch(up(c)){case 0:c===38&&Ja()===12&&(r[o]=1),t[o]+=CA(So-1,r,o);break;case 2:t[o]+=Um(c);break;case 4:if(c===44){t[++o]=Ja()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=ey(c)}while(c=Bo());return t},IA=function(t,r){return Uk(kA(Vk(t),r))},gS=new WeakMap,TA=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,c=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!gS.get(o))&&!c){gS.set(t,!0);for(var d=[],m=IA(r,d),l=o.props,b=0,w=0;b<m.length;b++)for(var T=0;T<l.length;T++,w++)t.props[w]=d[b]?m[b].replace(/&\f/g,l[T]):l[T]+" "+m[b]}}},PA=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Hk(e,t){switch(uA(e,t)){case 5103:return Kr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Kr+e+ug+e+Wi+e+e;case 6828:case 4268:return Kr+e+Wi+e+e;case 6165:return Kr+e+Wi+"flex-"+e+e;case 5187:return Kr+e+Xr(e,/(\w+).+(:[^]+)/,Kr+"box-$1$2"+Wi+"flex-$1$2")+e;case 5443:return Kr+e+Wi+"flex-item-"+Xr(e,/flex-|-self/,"")+e;case 4675:return Kr+e+Wi+"flex-line-pack"+Xr(e,/align-content|flex-|-self/,"")+e;case 5548:return Kr+e+Wi+Xr(e,"shrink","negative")+e;case 5292:return Kr+e+Wi+Xr(e,"basis","preferred-size")+e;case 6060:return Kr+"box-"+Xr(e,"-grow","")+Kr+e+Wi+Xr(e,"grow","positive")+e;case 4554:return Kr+Xr(e,/([^-])(transform)/g,"$1"+Kr+"$2")+e;case 6187:return Xr(Xr(Xr(e,/(zoom-|grab)/,Kr+"$1"),/(image-set)/,Kr+"$1"),e,"")+e;case 5495:case 3959:return Xr(e,/(image-set\([^]*)/,Kr+"$1$`$1");case 4968:return Xr(Xr(e,/(.+:)(flex-)?(.*)/,Kr+"box-pack:$3"+Wi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kr+e+e;case 4095:case 3583:case 4068:case 2532:return Xr(e,/(.+)-inline(.+)/,Kr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Za(e)-1-t>6)switch(Pi(e,t+1)){case 109:if(Pi(e,t+4)!==45)break;case 102:return Xr(e,/(.+:)(.+)-([^]+)/,"$1"+Kr+"$2-$3$1"+ug+(Pi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~p_(e,"stretch")?Hk(Xr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Pi(e,t+1)!==115)break;case 6444:switch(Pi(e,Za(e)-3-(~p_(e,"!important")&&10))){case 107:return Xr(e,":",":"+Kr)+e;case 101:return Xr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Kr+(Pi(e,14)===45?"inline-":"")+"box$3$1"+Kr+"$2$3$1"+Wi+"$2box$3")+e}break;case 5936:switch(Pi(e,t+11)){case 114:return Kr+e+Wi+Xr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Kr+e+Wi+Xr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Kr+e+Wi+Xr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Kr+e+Wi+e+e}return e}var EA=function(t,r,o,c){if(t.length>-1&&!t.return)switch(t.type){case $x:t.return=Hk(t.value,t.length);break;case Fk:return Eu([Sh(t,{value:Xr(t.value,"@","@"+Kr)})],c);case Lx:if(t.length)return hA(t.props,function(d){switch(dA(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Eu([Sh(t,{props:[Xr(d,/:(read-\w+)/,":"+ug+"$1")]})],c);case"::placeholder":return Eu([Sh(t,{props:[Xr(d,/:(plac\w+)/,":"+Kr+"input-$1")]}),Sh(t,{props:[Xr(d,/:(plac\w+)/,":"+ug+"$1")]}),Sh(t,{props:[Xr(d,/:(plac\w+)/,Wi+"input-$1")]})],c)}return""})}},zA=[EA],Wk=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(V){var K=V.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var c=t.stylisPlugins||zA,d={},m,l=[];m=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(V){for(var K=V.getAttribute("data-emotion").split(" "),F=1;F<K.length;F++)d[K[F]]=!0;l.push(V)});var b,w=[TA,PA];{var T,E=[bA,SA(function(V){T.insert(V)})],M=wA(w.concat(c,E)),O=function(K){return Eu(_A(K),M)};b=function(K,F,R,L){T=R,O(K?K+"{"+F.styles+"}":F.styles),L&&(U.inserted[F.name]=!0)}}var U={key:r,sheet:new oA({key:r,container:m,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return U.sheet.hydrate(l),U},Gk={exports:{}},nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=typeof Symbol=="function"&&Symbol.for,Ox=_i?Symbol.for("react.element"):60103,Fx=_i?Symbol.for("react.portal"):60106,ny=_i?Symbol.for("react.fragment"):60107,iy=_i?Symbol.for("react.strict_mode"):60108,oy=_i?Symbol.for("react.profiler"):60114,ay=_i?Symbol.for("react.provider"):60109,sy=_i?Symbol.for("react.context"):60110,Nx=_i?Symbol.for("react.async_mode"):60111,ly=_i?Symbol.for("react.concurrent_mode"):60111,cy=_i?Symbol.for("react.forward_ref"):60112,uy=_i?Symbol.for("react.suspense"):60113,MA=_i?Symbol.for("react.suspense_list"):60120,dy=_i?Symbol.for("react.memo"):60115,hy=_i?Symbol.for("react.lazy"):60116,DA=_i?Symbol.for("react.block"):60121,AA=_i?Symbol.for("react.fundamental"):60117,RA=_i?Symbol.for("react.responder"):60118,LA=_i?Symbol.for("react.scope"):60119;function jo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ox:switch(e=e.type,e){case Nx:case ly:case ny:case oy:case iy:case uy:return e;default:switch(e=e&&e.$$typeof,e){case sy:case cy:case hy:case dy:case ay:return e;default:return t}}case Fx:return t}}}function qk(e){return jo(e)===ly}nn.AsyncMode=Nx;nn.ConcurrentMode=ly;nn.ContextConsumer=sy;nn.ContextProvider=ay;nn.Element=Ox;nn.ForwardRef=cy;nn.Fragment=ny;nn.Lazy=hy;nn.Memo=dy;nn.Portal=Fx;nn.Profiler=oy;nn.StrictMode=iy;nn.Suspense=uy;nn.isAsyncMode=function(e){return qk(e)||jo(e)===Nx};nn.isConcurrentMode=qk;nn.isContextConsumer=function(e){return jo(e)===sy};nn.isContextProvider=function(e){return jo(e)===ay};nn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ox};nn.isForwardRef=function(e){return jo(e)===cy};nn.isFragment=function(e){return jo(e)===ny};nn.isLazy=function(e){return jo(e)===hy};nn.isMemo=function(e){return jo(e)===dy};nn.isPortal=function(e){return jo(e)===Fx};nn.isProfiler=function(e){return jo(e)===oy};nn.isStrictMode=function(e){return jo(e)===iy};nn.isSuspense=function(e){return jo(e)===uy};nn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ny||e===ly||e===oy||e===iy||e===uy||e===MA||typeof e=="object"&&e!==null&&(e.$$typeof===hy||e.$$typeof===dy||e.$$typeof===ay||e.$$typeof===sy||e.$$typeof===cy||e.$$typeof===AA||e.$$typeof===RA||e.$$typeof===LA||e.$$typeof===DA)};nn.typeOf=jo;Gk.exports=nn;var $A=Gk.exports,Zk=$A,BA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},OA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Kk={};Kk[Zk.ForwardRef]=BA;Kk[Zk.Memo]=OA;var FA=!0;function NA(e,t,r){var o="";return r.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):c&&(o+=c+" ")}),o}var Xk=function(t,r,o){var c=t.key+"-"+r.name;(o===!1||FA===!1)&&t.registered[c]===void 0&&(t.registered[c]=r.styles)},Jk=function(t,r,o){Xk(t,r,o);var c=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function jA(e){for(var t=0,r,o=0,c=e.length;c>=4;++o,c-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var VA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},UA=!1,HA=/[A-Z]|^ms/g,WA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Yk=function(t){return t.charCodeAt(1)===45},yS=function(t){return t!=null&&typeof t!="boolean"},_0=Bk(function(e){return Yk(e)?e:e.replace(HA,"-$&").toLowerCase()}),vS=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(WA,function(o,c,d){return Ka={name:c,styles:d,next:Ka},c})}return VA[t]!==1&&!Yk(t)&&typeof r=="number"&&r!==0?r+"px":r},GA="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function dp(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var c=r;if(c.anim===1)return Ka={name:c.name,styles:c.styles,next:Ka},c.name;var d=r;if(d.styles!==void 0){var m=d.next;if(m!==void 0)for(;m!==void 0;)Ka={name:m.name,styles:m.styles,next:Ka},m=m.next;var l=d.styles+";";return l}return qA(e,t,r)}case"function":{if(e!==void 0){var b=Ka,w=r(e);return Ka=b,dp(e,t,w)}break}}var T=r;if(t==null)return T;var E=t[T];return E!==void 0?E:T}function qA(e,t,r){var o="";if(Array.isArray(r))for(var c=0;c<r.length;c++)o+=dp(e,t,r[c])+";";else for(var d in r){var m=r[d];if(typeof m!="object"){var l=m;t!=null&&t[l]!==void 0?o+=d+"{"+t[l]+"}":yS(l)&&(o+=_0(d)+":"+vS(d,l)+";")}else{if(d==="NO_COMPONENT_SELECTOR"&&UA)throw new Error(GA);if(Array.isArray(m)&&typeof m[0]=="string"&&(t==null||t[m[0]]===void 0))for(var b=0;b<m.length;b++)yS(m[b])&&(o+=_0(d)+":"+vS(d,m[b])+";");else{var w=dp(e,t,m);switch(d){case"animation":case"animationName":{o+=_0(d)+":"+w+";";break}default:o+=d+"{"+w+"}"}}}}return o}var _S=/label:\s*([^\s;{]+)\s*(;|$)/g,Ka;function jx(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,c="";Ka=void 0;var d=e[0];if(d==null||d.raw===void 0)o=!1,c+=dp(r,t,d);else{var m=d;c+=m[0]}for(var l=1;l<e.length;l++)if(c+=dp(r,t,e[l]),o){var b=d;c+=b[l]}_S.lastIndex=0;for(var w="",T;(T=_S.exec(c))!==null;)w+="-"+T[1];var E=jA(c)+w;return{name:E,styles:c,next:Ka}}var ZA=function(t){return t()},Qk=cg.useInsertionEffect?cg.useInsertionEffect:!1,KA=Qk||ZA,xS=Qk||A.useLayoutEffect,eI=A.createContext(typeof HTMLElement<"u"?Wk({key:"css"}):null),XA=eI.Provider,tI=function(t){return A.forwardRef(function(r,o){var c=A.useContext(eI);return t(r,c,o)})},Fp=A.createContext({}),JA=tI(function(e,t){var r=e.styles,o=jx([r],void 0,A.useContext(Fp)),c=A.useRef();return xS(function(){var d=t.key+"-global",m=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+d+" "+o.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",d),m.hydrate([b])),c.current=[m,l],function(){m.flush()}},[t]),xS(function(){var d=c.current,m=d[0],l=d[1];if(l){d[1]=!1;return}if(o.next!==void 0&&Jk(t,o.next,!0),m.tags.length){var b=m.tags[m.tags.length-1].nextElementSibling;m.before=b,m.flush()}t.insert("",o,m,!1)},[t,o.name]),null});function Vx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jx(t)}var rI=function(){var t=Vx.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},YA=tA,QA=function(t){return t!=="theme"},bS=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?YA:QA},wS=function(t,r,o){var c;if(r){var d=r.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(m){return t.__emotion_forwardProp(m)&&d(m)}:d}return typeof c!="function"&&o&&(c=t.__emotion_forwardProp),c},eR=!1,tR=function(t){var r=t.cache,o=t.serialized,c=t.isStringTag;return Xk(r,o,c),KA(function(){return Jk(r,o,c)}),null},rR=function e(t,r){var o=t.__emotion_real===t,c=o&&t.__emotion_base||t,d,m;r!==void 0&&(d=r.label,m=r.target);var l=wS(t,r,o),b=l||bS(c),w=!b("as");return function(){var T=arguments,E=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&E.push("label:"+d+";"),T[0]==null||T[0].raw===void 0)E.push.apply(E,T);else{E.push(T[0][0]);for(var M=T.length,O=1;O<M;O++)E.push(T[O],T[0][O])}var U=tI(function(V,K,F){var R=w&&V.as||c,L="",re=[],J=V;if(V.theme==null){J={};for(var se in V)J[se]=V[se];J.theme=A.useContext(Fp)}typeof V.className=="string"?L=NA(K.registered,re,V.className):V.className!=null&&(L=V.className+" ");var ie=jx(E.concat(re),K.registered,J);L+=K.key+"-"+ie.name,m!==void 0&&(L+=" "+m);var Z=w&&l===void 0?bS(R):b,Ce={};for(var _e in V)w&&_e==="as"||Z(_e)&&(Ce[_e]=V[_e]);return Ce.className=L,F&&(Ce.ref=F),A.createElement(A.Fragment,null,A.createElement(tR,{cache:K,serialized:ie,isStringTag:typeof R=="string"}),A.createElement(R,Ce))});return U.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",U.defaultProps=t.defaultProps,U.__emotion_real=U,U.__emotion_base=c,U.__emotion_styles=E,U.__emotion_forwardProp=l,Object.defineProperty(U,"toString",{value:function(){return m===void 0&&eR?"NO_COMPONENT_SELECTOR":"."+m}}),U.withComponent=function(V,K){return e(V,W({},r,K,{shouldForwardProp:wS(U,K,!0)})).apply(void 0,E)},U}},nR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],m_=rR.bind();nR.forEach(function(e){m_[e]=m_(e)});let g_;typeof document=="object"&&(g_=Wk({key:"css",prepend:!0}));function iR(e){const{injectFirst:t,children:r}=e;return t&&g_?Q.jsx(XA,{value:g_,children:r}):r}function oR(e){return e==null||Object.keys(e).length===0}function qh(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?c=>t(oR(c)?r:c):t;return Q.jsx(JA,{styles:o})}function nI(e,t){return m_(e,t)}const iI=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},aR=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:qh,StyledEngineProvider:iR,ThemeContext:Fp,css:Vx,default:nI,internal_processStyles:iI,keyframes:rI},Symbol.toStringTag,{value:"Module"}));function Wt(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}function ws(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function oI(e){if(!ws(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=oI(e[r])}),t}function di(e,t,r={clone:!0}){const o=r.clone?W({},e):e;return ws(e)&&ws(t)&&Object.keys(t).forEach(c=>{ws(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&ws(e[c])?o[c]=di(e[c],t[c],r):r.clone?o[c]=ws(t[c])?oI(t[c]):t[c]:o[c]=t[c]}),o}const sR=Object.freeze(Object.defineProperty({__proto__:null,default:di,isPlainObject:ws},Symbol.toStringTag,{value:"Module"})),lR=["values","unit","step"],cR=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>W({},r,{[o.key]:o.val}),{})};function Ux(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,c=Wt(e,lR),d=cR(t),m=Object.keys(d);function l(M){return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${r})`}function b(M){return`@media (max-width:${(typeof t[M]=="number"?t[M]:M)-o/100}${r})`}function w(M,O){const U=m.indexOf(O);return`@media (min-width:${typeof t[M]=="number"?t[M]:M}${r}) and (max-width:${(U!==-1&&typeof t[m[U]]=="number"?t[m[U]]:O)-o/100}${r})`}function T(M){return m.indexOf(M)+1<m.length?w(M,m[m.indexOf(M)+1]):l(M)}function E(M){const O=m.indexOf(M);return O===0?l(m[1]):O===m.length-1?b(m[O]):w(M,m[m.indexOf(M)+1]).replace("@media","@media not all and")}return W({keys:m,values:d,up:l,down:b,between:w,only:T,not:E,unit:r},c)}const uR={borderRadius:4};function Zh(e,t){return t?di(e,t,{clone:!1}):e}const Hx={xs:0,sm:600,md:900,lg:1200,xl:1536},SS={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Hx[e]}px)`};function Ra(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||SS;return t.reduce((m,l,b)=>(m[d.up(d.keys[b])]=r(t[b]),m),{})}if(typeof t=="object"){const d=o.breakpoints||SS;return Object.keys(t).reduce((m,l)=>{if(Object.keys(d.values||Hx).indexOf(l)!==-1){const b=d.up(l);m[b]=r(t[l],l)}else{const b=l;m[b]=t[b]}return m},{})}return r(t)}function aI(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,c)=>{const d=e.up(c);return o[d]={},o},{}))||{}}function sI(e,t){return e.reduce((r,o)=>{const c=r[o];return(!c||Object.keys(c).length===0)&&delete r[o],r},t)}function dR(e,...t){const r=aI(e),o=[r,...t].reduce((c,d)=>di(c,d),{});return sI(Object.keys(r),o)}function hR(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((c,d)=>{d<e.length&&(r[c]=!0)}):o.forEach(c=>{e[c]!=null&&(r[c]=!0)}),r}function x0({values:e,breakpoints:t,base:r}){const o=r||hR(e,t),c=Object.keys(o);if(c.length===0)return e;let d;return c.reduce((m,l,b)=>(Array.isArray(e)?(m[l]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(m[l]=e[l]!=null?e[l]:e[d],d=l):m[l]=e,m),{})}function bt(e){if(typeof e!="string")throw new Error(Is(7));return e.charAt(0).toUpperCase()+e.slice(1)}const pR=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"}));function xl(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,c)=>o&&o[c]!=null?o[c]:null,e)}function dg(e,t,r,o=r){let c;return typeof e=="function"?c=e(r):Array.isArray(e)?c=e[r]||o:c=xl(e,r)||o,t&&(c=t(c,o,e)),c}function Yn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:c}=e,d=m=>{if(m[t]==null)return null;const l=m[t],b=m.theme,w=xl(b,o)||{};return Ra(m,l,E=>{let M=dg(w,c,E);return E===M&&typeof E=="string"&&(M=dg(w,c,`${t}${E==="default"?"":bt(E)}`,E)),r===!1?M:{[r]:M}})};return d.propTypes={},d.filterProps=[t],d}function fR(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const mR={m:"margin",p:"padding"},gR={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},CS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},yR=fR(e=>{if(e.length>2)if(CS[e])e=CS[e];else return[e];const[t,r]=e.split(""),o=mR[t],c=gR[r]||"";return Array.isArray(c)?c.map(d=>o+d):[o+c]}),Wx=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Gx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Wx,...Gx];function Np(e,t,r,o){var c;const d=(c=xl(e,t,!1))!=null?c:r;return typeof d=="number"?m=>typeof m=="string"?m:d*m:Array.isArray(d)?m=>typeof m=="string"?m:d[m]:typeof d=="function"?d:()=>{}}function qx(e){return Np(e,"spacing",8)}function dc(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function vR(e,t){return r=>e.reduce((o,c)=>(o[c]=dc(t,r),o),{})}function _R(e,t,r,o){if(t.indexOf(r)===-1)return null;const c=yR(r),d=vR(c,o),m=e[r];return Ra(e,m,d)}function lI(e,t){const r=qx(e.theme);return Object.keys(e).map(o=>_R(e,t,o,r)).reduce(Zh,{})}function Fn(e){return lI(e,Wx)}Fn.propTypes={};Fn.filterProps=Wx;function Nn(e){return lI(e,Gx)}Nn.propTypes={};Nn.filterProps=Gx;function cI(e=8){if(e.mui)return e;const t=qx({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(d=>{const m=t(d);return typeof m=="number"?`${m}px`:m}).join(" ");return r.mui=!0,r}function py(...e){const t=e.reduce((o,c)=>(c.filterProps.forEach(d=>{o[d]=c}),o),{}),r=o=>Object.keys(o).reduce((c,d)=>t[d]?Zh(c,t[d](o)):c,{});return r.propTypes={},r.filterProps=e.reduce((o,c)=>o.concat(c.filterProps),[]),r}function ea(e){return typeof e!="number"?e:`${e}px solid`}function da(e,t){return Yn({prop:e,themeKey:"borders",transform:t})}const xR=da("border",ea),bR=da("borderTop",ea),wR=da("borderRight",ea),SR=da("borderBottom",ea),CR=da("borderLeft",ea),kR=da("borderColor"),IR=da("borderTopColor"),TR=da("borderRightColor"),PR=da("borderBottomColor"),ER=da("borderLeftColor"),zR=da("outline",ea),MR=da("outlineColor"),fy=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Np(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:dc(t,o)});return Ra(e,e.borderRadius,r)}return null};fy.propTypes={};fy.filterProps=["borderRadius"];py(xR,bR,wR,SR,CR,kR,IR,TR,PR,ER,fy,zR,MR);const my=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Np(e.theme,"spacing",8),r=o=>({gap:dc(t,o)});return Ra(e,e.gap,r)}return null};my.propTypes={};my.filterProps=["gap"];const gy=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Np(e.theme,"spacing",8),r=o=>({columnGap:dc(t,o)});return Ra(e,e.columnGap,r)}return null};gy.propTypes={};gy.filterProps=["columnGap"];const yy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Np(e.theme,"spacing",8),r=o=>({rowGap:dc(t,o)});return Ra(e,e.rowGap,r)}return null};yy.propTypes={};yy.filterProps=["rowGap"];const DR=Yn({prop:"gridColumn"}),AR=Yn({prop:"gridRow"}),RR=Yn({prop:"gridAutoFlow"}),LR=Yn({prop:"gridAutoColumns"}),$R=Yn({prop:"gridAutoRows"}),BR=Yn({prop:"gridTemplateColumns"}),OR=Yn({prop:"gridTemplateRows"}),FR=Yn({prop:"gridTemplateAreas"}),NR=Yn({prop:"gridArea"});py(my,gy,yy,DR,AR,RR,LR,$R,BR,OR,FR,NR);function zu(e,t){return t==="grey"?t:e}const jR=Yn({prop:"color",themeKey:"palette",transform:zu}),VR=Yn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zu}),UR=Yn({prop:"backgroundColor",themeKey:"palette",transform:zu});py(jR,VR,UR);function Ao(e){return e<=1&&e!==0?`${e*100}%`:e}const HR=Yn({prop:"width",transform:Ao}),Zx=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,c;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||Hx[r];return d?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Ao(r)}};return Ra(e,e.maxWidth,t)}return null};Zx.filterProps=["maxWidth"];const WR=Yn({prop:"minWidth",transform:Ao}),GR=Yn({prop:"height",transform:Ao}),qR=Yn({prop:"maxHeight",transform:Ao}),ZR=Yn({prop:"minHeight",transform:Ao});Yn({prop:"size",cssProperty:"width",transform:Ao});Yn({prop:"size",cssProperty:"height",transform:Ao});const KR=Yn({prop:"boxSizing"});py(HR,Zx,WR,GR,qR,ZR,KR);const od={border:{themeKey:"borders",transform:ea},borderTop:{themeKey:"borders",transform:ea},borderRight:{themeKey:"borders",transform:ea},borderBottom:{themeKey:"borders",transform:ea},borderLeft:{themeKey:"borders",transform:ea},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ea},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:fy},color:{themeKey:"palette",transform:zu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zu},backgroundColor:{themeKey:"palette",transform:zu},p:{style:Nn},pt:{style:Nn},pr:{style:Nn},pb:{style:Nn},pl:{style:Nn},px:{style:Nn},py:{style:Nn},padding:{style:Nn},paddingTop:{style:Nn},paddingRight:{style:Nn},paddingBottom:{style:Nn},paddingLeft:{style:Nn},paddingX:{style:Nn},paddingY:{style:Nn},paddingInline:{style:Nn},paddingInlineStart:{style:Nn},paddingInlineEnd:{style:Nn},paddingBlock:{style:Nn},paddingBlockStart:{style:Nn},paddingBlockEnd:{style:Nn},m:{style:Fn},mt:{style:Fn},mr:{style:Fn},mb:{style:Fn},ml:{style:Fn},mx:{style:Fn},my:{style:Fn},margin:{style:Fn},marginTop:{style:Fn},marginRight:{style:Fn},marginBottom:{style:Fn},marginLeft:{style:Fn},marginX:{style:Fn},marginY:{style:Fn},marginInline:{style:Fn},marginInlineStart:{style:Fn},marginInlineEnd:{style:Fn},marginBlock:{style:Fn},marginBlockStart:{style:Fn},marginBlockEnd:{style:Fn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:my},rowGap:{style:yy},columnGap:{style:gy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ao},maxWidth:{style:Zx},minWidth:{transform:Ao},height:{transform:Ao},maxHeight:{transform:Ao},minHeight:{transform:Ao},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function XR(...e){const t=e.reduce((o,c)=>o.concat(Object.keys(c)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function JR(e,t){return typeof e=="function"?e(t):e}function uI(){function e(r,o,c,d){const m={[r]:o,theme:c},l=d[r];if(!l)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:T,style:E}=l;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const M=xl(c,w)||{};return E?E(m):Ra(m,o,U=>{let V=dg(M,T,U);return U===V&&typeof U=="string"&&(V=dg(M,T,`${r}${U==="default"?"":bt(U)}`,U)),b===!1?V:{[b]:V}})}function t(r){var o;const{sx:c,theme:d={}}=r||{};if(!c)return null;const m=(o=d.unstable_sxConfig)!=null?o:od;function l(b){let w=b;if(typeof b=="function")w=b(d);else if(typeof b!="object")return b;if(!w)return null;const T=aI(d.breakpoints),E=Object.keys(T);let M=T;return Object.keys(w).forEach(O=>{const U=JR(w[O],d);if(U!=null)if(typeof U=="object")if(m[O])M=Zh(M,e(O,U,d,m));else{const V=Ra({theme:d},U,K=>({[O]:K}));XR(V,U)?M[O]=t({sx:U,theme:d}):M=Zh(M,V)}else M=Zh(M,e(O,U,d,m))}),sI(E,M)}return Array.isArray(c)?c.map(l):l(c)}return t}const ad=uI();ad.filterProps=["sx"];function Kx(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const YR=["breakpoints","palette","spacing","shape"];function jp(e={},...t){const{breakpoints:r={},palette:o={},spacing:c,shape:d={}}=e,m=Wt(e,YR),l=Ux(r),b=cI(c);let w=di({breakpoints:l,direction:"ltr",components:{},palette:W({mode:"light"},o),spacing:b,shape:W({},uR,d)},m);return w.applyStyles=Kx,w=t.reduce((T,E)=>di(T,E),w),w.unstable_sxConfig=W({},od,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(E){return ad({sx:E,theme:this})},w}const QR=Object.freeze(Object.defineProperty({__proto__:null,default:jp,private_createBreakpoints:Ux,unstable_applyStyles:Kx},Symbol.toStringTag,{value:"Module"}));function eL(e){return Object.keys(e).length===0}function dI(e=null){const t=A.useContext(Fp);return!t||eL(t)?e:t}const tL=jp();function hI(e=tL){return dI(e)}function rL({styles:e,themeId:t,defaultTheme:r={}}){const o=hI(r),c=typeof e=="function"?e(t&&o[t]||o):e;return Q.jsx(qh,{styles:c})}const nL=["sx"],iL=e=>{var t,r;const o={systemProps:{},otherProps:{}},c=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:od;return Object.keys(e).forEach(d=>{c[d]?o.systemProps[d]=e[d]:o.otherProps[d]=e[d]}),o};function Xx(e){const{sx:t}=e,r=Wt(e,nL),{systemProps:o,otherProps:c}=iL(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...m)=>{const l=t(...m);return ws(l)?W({},o,l):o}:d=W({},o,t),W({},c,{sx:d})}const oL=Object.freeze(Object.defineProperty({__proto__:null,default:ad,extendSxProp:Xx,unstable_createStyleFunctionSx:uI,unstable_defaultSxConfig:od},Symbol.toStringTag,{value:"Module"})),kS=e=>e,aL=()=>{let e=kS;return{configure(t){e=t},generate(t){return e(t)},reset(){e=kS}}},sL=aL();function pI(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(r=pI(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function oi(){for(var e,t,r=0,o="",c=arguments.length;r<c;r++)(e=arguments[r])&&(t=pI(e))&&(o&&(o+=" "),o+=t);return o}const fI={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vy(e,t,r="Mui"){const o=fI[t];return o?`${r}-${o}`:`${sL.generate(e)}-${t}`}function mI(e,t,r="Mui"){const o={};return t.forEach(c=>{o[c]=vy(e,c,r)}),o}var gI={exports:{}},on={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx=Symbol.for("react.element"),Yx=Symbol.for("react.portal"),_y=Symbol.for("react.fragment"),xy=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),wy=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),lL=Symbol.for("react.server_context"),Cy=Symbol.for("react.forward_ref"),ky=Symbol.for("react.suspense"),Iy=Symbol.for("react.suspense_list"),Ty=Symbol.for("react.memo"),Py=Symbol.for("react.lazy"),cL=Symbol.for("react.offscreen"),yI;yI=Symbol.for("react.module.reference");function ha(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Jx:switch(e=e.type,e){case _y:case by:case xy:case ky:case Iy:return e;default:switch(e=e&&e.$$typeof,e){case lL:case Sy:case Cy:case Py:case Ty:case wy:return e;default:return t}}case Yx:return t}}}on.ContextConsumer=Sy;on.ContextProvider=wy;on.Element=Jx;on.ForwardRef=Cy;on.Fragment=_y;on.Lazy=Py;on.Memo=Ty;on.Portal=Yx;on.Profiler=by;on.StrictMode=xy;on.Suspense=ky;on.SuspenseList=Iy;on.isAsyncMode=function(){return!1};on.isConcurrentMode=function(){return!1};on.isContextConsumer=function(e){return ha(e)===Sy};on.isContextProvider=function(e){return ha(e)===wy};on.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jx};on.isForwardRef=function(e){return ha(e)===Cy};on.isFragment=function(e){return ha(e)===_y};on.isLazy=function(e){return ha(e)===Py};on.isMemo=function(e){return ha(e)===Ty};on.isPortal=function(e){return ha(e)===Yx};on.isProfiler=function(e){return ha(e)===by};on.isStrictMode=function(e){return ha(e)===xy};on.isSuspense=function(e){return ha(e)===ky};on.isSuspenseList=function(e){return ha(e)===Iy};on.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_y||e===by||e===xy||e===ky||e===Iy||e===cL||typeof e=="object"&&e!==null&&(e.$$typeof===Py||e.$$typeof===Ty||e.$$typeof===wy||e.$$typeof===Sy||e.$$typeof===Cy||e.$$typeof===yI||e.getModuleId!==void 0)};on.typeOf=ha;gI.exports=on;var IS=gI.exports;const uL=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function vI(e){const t=`${e}`.match(uL);return t&&t[1]||""}function _I(e,t=""){return e.displayName||e.name||vI(e)||t}function TS(e,t,r){const o=_I(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function dL(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return _I(e,"Component");if(typeof e=="object")switch(e.$$typeof){case IS.ForwardRef:return TS(e,e.render,"ForwardRef");case IS.Memo:return TS(e,e.type,"memo");default:return}}}const hL=Object.freeze(Object.defineProperty({__proto__:null,default:dL,getFunctionName:vI},Symbol.toStringTag,{value:"Module"})),pL=["ownerState"],fL=["variants"],mL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function gL(e){return Object.keys(e).length===0}function yL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function b0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const vL=jp(),_L=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function gm({defaultTheme:e,theme:t,themeId:r}){return gL(t)?e:t[r]||t}function xL(e){return e?(t,r)=>r[e]:null}function Wm(e,t){let{ownerState:r}=t,o=Wt(t,pL);const c=typeof e=="function"?e(W({ownerState:r},o)):e;if(Array.isArray(c))return c.flatMap(d=>Wm(d,W({ownerState:r},o)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:d=[]}=c;let l=Wt(c,fL);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props(W({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(l)||(l=[l]),l.push(typeof b.style=="function"?b.style(W({ownerState:r},o,r)):b.style))}),l}return c}function xI(e={}){const{themeId:t,defaultTheme:r=vL,rootShouldForwardProp:o=b0,slotShouldForwardProp:c=b0}=e,d=m=>ad(W({},m,{theme:gm(W({},m,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(m,l={})=>{iI(m,J=>J.filter(se=>!(se!=null&&se.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:E,overridesResolver:M=xL(_L(w))}=l,O=Wt(l,mL),U=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,V=E||!1;let K,F=b0;w==="Root"||w==="root"?F=o:w?F=c:yL(m)&&(F=void 0);const R=nI(m,W({shouldForwardProp:F,label:K},O)),L=J=>typeof J=="function"&&J.__emotion_real!==J||ws(J)?se=>Wm(J,W({},se,{theme:gm({theme:se.theme,defaultTheme:r,themeId:t})})):J,re=(J,...se)=>{let ie=L(J);const Z=se?se.map(L):[];b&&M&&Z.push(ke=>{const ze=gm(W({},ke,{defaultTheme:r,themeId:t}));if(!ze.components||!ze.components[b]||!ze.components[b].styleOverrides)return null;const Le=ze.components[b].styleOverrides,Ye={};return Object.entries(Le).forEach(([Ge,Te])=>{Ye[Ge]=Wm(Te,W({},ke,{theme:ze}))}),M(ke,Ye)}),b&&!U&&Z.push(ke=>{var ze;const Le=gm(W({},ke,{defaultTheme:r,themeId:t})),Ye=Le==null||(ze=Le.components)==null||(ze=ze[b])==null?void 0:ze.variants;return Wm({variants:Ye},W({},ke,{theme:Le}))}),V||Z.push(d);const Ce=Z.length-se.length;if(Array.isArray(J)&&Ce>0){const ke=new Array(Ce).fill("");ie=[...J,...ke],ie.raw=[...J.raw,...ke]}const _e=R(ie,...Z);return m.muiName&&(_e.muiName=m.muiName),_e};return R.withConfig&&(re.withConfig=R.withConfig),re}}const bL=xI();function hg(e,t){const r=W({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=W({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const c=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=c:!c||!Object.keys(c)?r[o]=d:(r[o]=W({},d),Object.keys(c).forEach(m=>{r[o][m]=hg(c[m],d[m])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function wL(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:hg(t.components[r].defaultProps,o)}function bI({props:e,name:t,defaultTheme:r,themeId:o}){let c=hI(r);return o&&(c=c[o]||c),wL({theme:c,name:t,props:e})}const Ts=typeof window<"u"?A.useLayoutEffect:A.useEffect;function SL(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const CL=Object.freeze(Object.defineProperty({__proto__:null,default:SL},Symbol.toStringTag,{value:"Module"}));function kL(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,c)=>c<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function wI(e){if(e.type)return e;if(e.charAt(0)==="#")return wI(kL(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Is(9,e));let o=e.substring(t+1,e.length-1),c;if(r==="color"){if(o=o.split(" "),c=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Is(10,c))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:c}}const Jl=e=>{const t=wI(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function PS(...e){return e.reduce((t,r)=>r==null?t:function(...c){t.apply(this,c),r.apply(this,c)},()=>{})}function Qx(e,t){var r,o;return A.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function Ya(e){return e&&e.ownerDocument||document}function e1(e){return Ya(e).defaultView||window}function pg(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let ES=0;function IL(e){const[t,r]=A.useState(e),o=e||t;return A.useEffect(()=>{t==null&&(ES+=1,r(`mui-${ES}`))},[t]),o}const zS=cg.useId;function Co(e){if(zS!==void 0){const t=zS();return e??t}return IL(e)}function Mu({controlled:e,default:t,name:r,state:o="value"}){const{current:c}=A.useRef(e!==void 0),[d,m]=A.useState(t),l=c?e:d,b=A.useCallback(w=>{c||m(w)},[]);return[l,b]}function sl(e){const t=A.useRef(e);return Ts(()=>{t.current=e}),A.useRef((...r)=>(0,t.current)(...r)).current}function tn(...e){return A.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{pg(r,t)})},e)}const MS={};function TL(e,t){const r=A.useRef(MS);return r.current===MS&&(r.current=e(t)),r}const PL=[];function EL(e){A.useEffect(e,PL)}class Vp{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Vp}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function ym(){const e=TL(Vp.create).current;return EL(e.disposeEffect),e}let Ey=!0,y_=!1;const zL=new Vp,ML={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function DL(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&ML[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function AL(e){e.metaKey||e.altKey||e.ctrlKey||(Ey=!0)}function w0(){Ey=!1}function RL(){this.visibilityState==="hidden"&&y_&&(Ey=!0)}function LL(e){e.addEventListener("keydown",AL,!0),e.addEventListener("mousedown",w0,!0),e.addEventListener("pointerdown",w0,!0),e.addEventListener("touchstart",w0,!0),e.addEventListener("visibilitychange",RL,!0)}function $L(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Ey||DL(t)}function t1(){const e=A.useCallback(c=>{c!=null&&LL(c.ownerDocument)},[]),t=A.useRef(!1);function r(){return t.current?(y_=!0,zL.start(100,()=>{y_=!1}),t.current=!1,!0):!1}function o(c){return $L(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function BL(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const OL=e=>{const t=A.useRef({});return A.useEffect(()=>{t.current=e}),t.current},FL={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Rr(e,t,r=void 0){const o={};return Object.keys(e).forEach(c=>{o[c]=e[c].reduce((d,m)=>{if(m){const l=t(m);l!==""&&d.push(l),r&&r[m]&&d.push(r[m])}return d},[]).join(" ")}),o}const SI=A.createContext(null);function r1(){return A.useContext(SI)}const NL=typeof Symbol=="function"&&Symbol.for,jL=NL?Symbol.for("mui.nested"):"__THEME_NESTED__";function VL(e,t){return typeof t=="function"?t(e):W({},e,t)}function UL(e){const{children:t,theme:r}=e,o=r1(),c=A.useMemo(()=>{const d=o===null?r:VL(o,r);return d!=null&&(d[jL]=o!==null),d},[r,o]);return Q.jsx(SI.Provider,{value:c,children:t})}const HL=["value"],WL=A.createContext();function GL(e){let{value:t}=e,r=Wt(e,HL);return Q.jsx(WL.Provider,W({value:t??!0},r))}const CI=A.createContext(void 0);function qL({value:e,children:t}){return Q.jsx(CI.Provider,{value:e,children:t})}function ZL(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const c=t.components[r];return c.defaultProps?hg(c.defaultProps,o):!c.styleOverrides&&!c.variants?hg(c,o):o}function KL({props:e,name:t}){const r=A.useContext(CI);return ZL({props:e,name:t,theme:{components:r}})}const DS={};function AS(e,t,r,o=!1){return A.useMemo(()=>{const c=e&&t[e]||t;if(typeof r=="function"){const d=r(c),m=e?W({},t,{[e]:d}):d;return o?()=>m:m}return e?W({},t,{[e]:r}):W({},t,r)},[e,t,r,o])}function XL(e){const{children:t,theme:r,themeId:o}=e,c=dI(DS),d=r1()||DS,m=AS(o,c,r),l=AS(o,d,r,!0),b=m.direction==="rtl";return Q.jsx(UL,{theme:l,children:Q.jsx(Fp.Provider,{value:m,children:Q.jsx(GL,{value:b,children:Q.jsx(qL,{value:m==null?void 0:m.components,children:t})})})})}const n1="mode",i1="color-scheme",kI="data-color-scheme";function JL(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:c=n1,colorSchemeStorageKey:d=i1,attribute:m=kI,colorSchemeNode:l="document.documentElement",nonce:b}=e||{};return Q.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?b:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${c}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${o}';
  }
  if (colorScheme) {
    ${l}.setAttribute('${m}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function RS(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function II(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function YL(e){return II(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function S0(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function QL(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:c=[],modeStorageKey:d=n1,colorSchemeStorageKey:m=i1,storageWindow:l=typeof window>"u"?void 0:window}=e,b=c.join(","),[w,T]=A.useState(()=>{const K=S0(d,t),F=S0(`${m}-light`,r),R=S0(`${m}-dark`,o);return{mode:K,systemMode:RS(K),lightColorScheme:F,darkColorScheme:R}}),E=YL(w),M=A.useCallback(K=>{T(F=>{if(K===F.mode)return F;const R=K??t;try{localStorage.setItem(d,R)}catch{}return W({},F,{mode:R,systemMode:RS(R)})})},[d,t]),O=A.useCallback(K=>{K?typeof K=="string"?K&&!b.includes(K)?console.error(`\`${K}\` does not exist in \`theme.colorSchemes\`.`):T(F=>{const R=W({},F);return II(F,L=>{try{localStorage.setItem(`${m}-${L}`,K)}catch{}L==="light"&&(R.lightColorScheme=K),L==="dark"&&(R.darkColorScheme=K)}),R}):T(F=>{const R=W({},F),L=K.light===null?r:K.light,re=K.dark===null?o:K.dark;if(L)if(!b.includes(L))console.error(`\`${L}\` does not exist in \`theme.colorSchemes\`.`);else{R.lightColorScheme=L;try{localStorage.setItem(`${m}-light`,L)}catch{}}if(re)if(!b.includes(re))console.error(`\`${re}\` does not exist in \`theme.colorSchemes\`.`);else{R.darkColorScheme=re;try{localStorage.setItem(`${m}-dark`,re)}catch{}}return R}):T(F=>{try{localStorage.setItem(`${m}-light`,r),localStorage.setItem(`${m}-dark`,o)}catch{}return W({},F,{lightColorScheme:r,darkColorScheme:o})})},[b,m,r,o]),U=A.useCallback(K=>{w.mode==="system"&&T(F=>{const R=K!=null&&K.matches?"dark":"light";return F.systemMode===R?F:W({},F,{systemMode:R})})},[w.mode]),V=A.useRef(U);return V.current=U,A.useEffect(()=>{const K=(...R)=>V.current(...R),F=window.matchMedia("(prefers-color-scheme: dark)");return F.addListener(K),K(F),()=>{F.removeListener(K)}},[]),A.useEffect(()=>{if(l){const K=F=>{const R=F.newValue;typeof F.key=="string"&&F.key.startsWith(m)&&(!R||b.match(R))&&(F.key.endsWith("light")&&O({light:R}),F.key.endsWith("dark")&&O({dark:R})),F.key===d&&(!R||["light","dark","system"].includes(R))&&M(R||t)};return l.addEventListener("storage",K),()=>{l.removeEventListener("storage",K)}}},[O,M,d,m,b,t,l]),W({},w,{colorScheme:E,setMode:M,setColorScheme:O})}const e5=["colorSchemes","components","generateCssVars","cssVarPrefix"],t5="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function r5(e){const{themeId:t,theme:r={},attribute:o=kI,modeStorageKey:c=n1,colorSchemeStorageKey:d=i1,defaultMode:m="light",defaultColorScheme:l,disableTransitionOnChange:b=!1,resolveTheme:w,excludeVariablesFromRoot:T}=e;(!r.colorSchemes||typeof l=="string"&&!r.colorSchemes[l]||typeof l=="object"&&!r.colorSchemes[l==null?void 0:l.light]||typeof l=="object"&&!r.colorSchemes[l==null?void 0:l.dark])&&console.error(`MUI: \`${l}\` does not exist in \`theme.colorSchemes\`.`);const E=A.createContext(void 0),M=()=>{const F=A.useContext(E);if(!F)throw new Error(Is(19));return F};function O(F){const{children:R,theme:L=r,modeStorageKey:re=c,colorSchemeStorageKey:J=d,attribute:se=o,defaultMode:ie=m,defaultColorScheme:Z=l,disableTransitionOnChange:Ce=b,storageWindow:_e=typeof window>"u"?void 0:window,documentNode:ke=typeof document>"u"?void 0:document,colorSchemeNode:ze=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Le=":root",disableNestedContext:Ye=!1,disableStyleSheetGeneration:Ge=!1}=F,Te=A.useRef(!1),Fe=r1(),$e=A.useContext(E),Oe=!!$e&&!Ye,et=L[t],at=et||L,{colorSchemes:ut={},components:Pt={},generateCssVars:wt=()=>({vars:{},css:{}}),cssVarPrefix:zt}=at,Yt=Wt(at,e5),lt=Object.keys(ut),Ze=typeof Z=="string"?Z:Z.light,pt=typeof Z=="string"?Z:Z.dark,{mode:yt,setMode:ar,systemMode:Kt,lightColorScheme:Mr,darkColorScheme:lr,colorScheme:Vt,setColorScheme:Et}=QL({supportedColorSchemes:lt,defaultLightColorScheme:Ze,defaultDarkColorScheme:pt,modeStorageKey:re,colorSchemeStorageKey:J,defaultMode:ie,storageWindow:_e});let ur=yt,Mt=Vt;Oe&&(ur=$e.mode,Mt=$e.colorScheme);const Er=ur||(ie==="system"?m:ie),je=Mt||(Er==="dark"?pt:Ze),{css:wr,vars:Dr}=wt(),qt=W({},Yt,{components:Pt,colorSchemes:ut,cssVarPrefix:zt,vars:Dr,getColorSchemeSelector:Gt=>`[${se}="${Gt}"] &`}),rr={},Fr={};Object.entries(ut).forEach(([Gt,sr])=>{const{css:Ir,vars:Be}=wt(Gt);qt.vars=di(qt.vars,Be),Gt===je&&(Object.keys(sr).forEach(St=>{sr[St]&&typeof sr[St]=="object"?qt[St]=W({},qt[St],sr[St]):qt[St]=sr[St]}),qt.palette&&(qt.palette.colorScheme=Gt));const xt=typeof Z=="string"?Z:ie==="dark"?Z.dark:Z.light;if(Gt===xt){if(T){const St={};T(zt).forEach(Qt=>{St[Qt]=Ir[Qt],delete Ir[Qt]}),rr[`[${se}="${Gt}"]`]=St}rr[`${Le}, [${se}="${Gt}"]`]=Ir}else Fr[`${Le===":root"?"":Le}[${se}="${Gt}"]`]=Ir}),qt.vars=di(qt.vars,Dr),A.useEffect(()=>{Mt&&ze&&ze.setAttribute(se,Mt)},[Mt,se,ze]),A.useEffect(()=>{let Gt;if(Ce&&Te.current&&ke){const sr=ke.createElement("style");sr.appendChild(ke.createTextNode(t5)),ke.head.appendChild(sr),window.getComputedStyle(ke.body),Gt=setTimeout(()=>{ke.head.removeChild(sr)},1)}return()=>{clearTimeout(Gt)}},[Mt,Ce,ke]),A.useEffect(()=>(Te.current=!0,()=>{Te.current=!1}),[]);const $r=A.useMemo(()=>({allColorSchemes:lt,colorScheme:Mt,darkColorScheme:lr,lightColorScheme:Mr,mode:ur,setColorScheme:Et,setMode:ar,systemMode:Kt}),[lt,Mt,lr,Mr,ur,Et,ar,Kt]);let dr=!0;(Ge||Oe&&(Fe==null?void 0:Fe.cssVarPrefix)===zt)&&(dr=!1);const cr=Q.jsxs(A.Fragment,{children:[dr&&Q.jsxs(A.Fragment,{children:[Q.jsx(qh,{styles:{[Le]:wr}}),Q.jsx(qh,{styles:rr}),Q.jsx(qh,{styles:Fr})]}),Q.jsx(XL,{themeId:et?t:void 0,theme:w?w(qt):qt,children:R})]});return Oe?cr:Q.jsx(E.Provider,{value:$r,children:cr})}const U=typeof l=="string"?l:l.light,V=typeof l=="string"?l:l.dark;return{CssVarsProvider:O,useColorScheme:M,getInitColorSchemeScript:F=>JL(W({attribute:o,colorSchemeStorageKey:d,defaultMode:m,defaultLightColorScheme:U,defaultDarkColorScheme:V,modeStorageKey:c},F))}}function o1(e=""){function t(...o){if(!o.length)return"";const c=o[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...o.slice(1))})`:`, ${c}`}return(o,...c)=>`var(--${e?`${e}-`:""}${o}${t(...c)})`}const LS=(e,t,r,o=[])=>{let c=e;t.forEach((d,m)=>{m===t.length-1?Array.isArray(c)?c[Number(d)]=r:c&&typeof c=="object"&&(c[d]=r):c&&typeof c=="object"&&(c[d]||(c[d]=o.includes(d)?[]:{}),c=c[d])})},n5=(e,t,r)=>{function o(c,d=[],m=[]){Object.entries(c).forEach(([l,b])=>{(!r||r&&!r([...d,l]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...d,l],Array.isArray(b)?[...m,l]:m):t([...d,l],b,m))})}o(e)},i5=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function C0(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t||{},c={},d={},m={};return n5(e,(l,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(l,b))){const T=`--${r?`${r}-`:""}${l.join("-")}`;Object.assign(c,{[T]:i5(l,b)}),LS(d,l,`var(${T})`,w),LS(m,l,`var(${T}, ${b})`,w)}},l=>l[0]==="vars"),{css:c,vars:d,varsWithDefaults:m}}function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function o5(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t);if(hp(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function a5(e){var t=o5(e,"string");return hp(t)=="symbol"?t:t+""}const s5=["colorSchemes","components","defaultColorScheme"];function l5(e,t){const{colorSchemes:r={},defaultColorScheme:o="light"}=e,c=Wt(e,s5),{vars:d,css:m,varsWithDefaults:l}=C0(c,t);let b=l;const w={},{[o]:T}=r,E=Wt(r,[o].map(a5));if(Object.entries(E||{}).forEach(([O,U])=>{const{vars:V,css:K,varsWithDefaults:F}=C0(U,t);b=di(b,F),w[O]={css:K,vars:V}}),T){const{css:O,vars:U,varsWithDefaults:V}=C0(T,t);b=di(b,V),w[o]={css:O,vars:U}}return{vars:b,generateCssVars:O=>{var U;if(!O){var V;const F=W({},m);return{css:F,vars:d,selector:(t==null||(V=t.getSelector)==null?void 0:V.call(t,O,F))||":root"}}const K=W({},w[O].css);return{css:K,vars:w[O].vars,selector:(t==null||(U=t.getSelector)==null?void 0:U.call(t,O,K))||":root"}}}}const c5=["component","direction","spacing","divider","children","className","useFlexGap"],u5=jp(),d5=bL("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function h5(e){return bI({props:e,name:"MuiStack",defaultTheme:u5})}function p5(e,t){const r=A.Children.toArray(e).filter(Boolean);return r.reduce((o,c,d)=>(o.push(c),d<r.length-1&&o.push(A.cloneElement(t,{key:`separator-${d}`})),o),[])}const f5=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],m5=({ownerState:e,theme:t})=>{let r=W({display:"flex",flexDirection:"column"},Ra({theme:t},x0({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=qx(t),c=Object.keys(t.breakpoints.values).reduce((b,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(b[w]=!0),b),{}),d=x0({values:e.direction,base:c}),m=x0({values:e.spacing,base:c});typeof d=="object"&&Object.keys(d).forEach((b,w,T)=>{if(!d[b]){const M=w>0?d[T[w-1]]:"column";d[b]=M}}),r=di(r,Ra({theme:t},m,(b,w)=>e.useFlexGap?{gap:dc(o,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${f5(w?d[w]:e.direction)}`]:dc(o,b)}}))}return r=dR(t.breakpoints,r),r};function g5(e={}){const{createStyledComponent:t=d5,useThemeProps:r=h5,componentName:o="MuiStack"}=e,c=()=>Rr({root:["root"]},b=>vy(o,b),{}),d=t(m5);return A.forwardRef(function(b,w){const T=r(b),E=Xx(T),{component:M="div",direction:O="column",spacing:U=0,divider:V,children:K,className:F,useFlexGap:R=!1}=E,L=Wt(E,c5),re={direction:O,spacing:U,useFlexGap:R},J=c();return Q.jsx(d,W({as:M,ownerState:re,ref:w,className:oi(J.root,F)},L,{children:V?p5(K,V):K}))})}const y5=W({},od,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function v5(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Hr=(e,t)=>vy(e,t,"Mui"),Lr=(e,t)=>mI(e,t,"Mui"),_5=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),$S=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},BS=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([c,d])=>{if(c.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const m=r?r(c):d;c.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),c.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),c.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),$S(o,c,m)}}),o},Vi=(e,t)=>{let r={};if(t){const{getCssVar:o,palette:c}=t;Object.entries(c).forEach(d=>{const[m,l]=d;_5(l)&&typeof l=="object"&&(r=W({},r,{[m]:BS(e,l,b=>`var(--variant-${b}, ${o(`palette-${m}-${b}`,c[m][b])})`)}))})}return r.context=BS(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},x5=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],b5=["colorSchemes"],w5=(e="joy")=>o1(e);function TI(e){var t,r,o,c,d,m,l,b,w,T;const E=e||{},{cssVarPrefix:M="joy",breakpoints:O,spacing:U,components:V,variants:K,shouldSkipGeneratingVar:F=v5}=E,R=Wt(E,x5),L=w5(M),re={primary:wh.blue,neutral:wh.grey,danger:wh.red,success:wh.green,warning:wh.yellow,common:{white:"#FFF",black:"#000"}},J=Ze=>{var pt;const yt=Ze.split("-"),ar=yt[1],Kt=yt[2];return L(Ze,(pt=re[ar])==null?void 0:pt[Kt])},se=Ze=>({plainColor:J(`palette-${Ze}-500`),plainHoverBg:J(`palette-${Ze}-100`),plainActiveBg:J(`palette-${Ze}-200`),plainDisabledColor:J("palette-neutral-400"),outlinedColor:J(`palette-${Ze}-500`),outlinedBorder:J(`palette-${Ze}-300`),outlinedHoverBg:J(`palette-${Ze}-100`),outlinedActiveBg:J(`palette-${Ze}-200`),outlinedDisabledColor:J("palette-neutral-400"),outlinedDisabledBorder:J("palette-neutral-200"),softColor:J(`palette-${Ze}-700`),softBg:J(`palette-${Ze}-100`),softHoverBg:J(`palette-${Ze}-200`),softActiveColor:J(`palette-${Ze}-800`),softActiveBg:J(`palette-${Ze}-300`),softDisabledColor:J("palette-neutral-400"),softDisabledBg:J("palette-neutral-50"),solidColor:J("palette-common-white"),solidBg:J(`palette-${Ze}-500`),solidHoverBg:J(`palette-${Ze}-600`),solidActiveBg:J(`palette-${Ze}-700`),solidDisabledColor:J("palette-neutral-400"),solidDisabledBg:J("palette-neutral-100")}),ie=Ze=>({plainColor:J(`palette-${Ze}-300`),plainHoverBg:J(`palette-${Ze}-800`),plainActiveBg:J(`palette-${Ze}-700`),plainDisabledColor:J("palette-neutral-500"),outlinedColor:J(`palette-${Ze}-200`),outlinedBorder:J(`palette-${Ze}-700`),outlinedHoverBg:J(`palette-${Ze}-800`),outlinedActiveBg:J(`palette-${Ze}-700`),outlinedDisabledColor:J("palette-neutral-500"),outlinedDisabledBorder:J("palette-neutral-800"),softColor:J(`palette-${Ze}-200`),softBg:J(`palette-${Ze}-800`),softHoverBg:J(`palette-${Ze}-700`),softActiveColor:J(`palette-${Ze}-100`),softActiveBg:J(`palette-${Ze}-600`),softDisabledColor:J("palette-neutral-500"),softDisabledBg:J("palette-neutral-800"),solidColor:J("palette-common-white"),solidBg:J(`palette-${Ze}-500`),solidHoverBg:J(`palette-${Ze}-600`),solidActiveBg:J(`palette-${Ze}-700`),solidDisabledColor:J("palette-neutral-500"),solidDisabledBg:J("palette-neutral-800")}),Z={palette:{mode:"light",primary:W({},re.primary,se("primary")),neutral:W({},re.neutral,se("neutral"),{plainColor:J("palette-neutral-700"),plainHoverColor:J("palette-neutral-900"),outlinedColor:J("palette-neutral-700")}),danger:W({},re.danger,se("danger")),success:W({},re.success,se("success")),warning:W({},re.warning,se("warning")),common:{white:"#FFF",black:"#000"},text:{primary:J("palette-neutral-800"),secondary:J("palette-neutral-700"),tertiary:J("palette-neutral-600"),icon:J("palette-neutral-500")},background:{body:J("palette-common-white"),surface:J("palette-neutral-50"),popup:J("palette-common-white"),level1:J("palette-neutral-100"),level2:J("palette-neutral-200"),level3:J("palette-neutral-300"),tooltip:J("palette-neutral-500"),backdrop:`rgba(${L("palette-neutral-darkChannel",Jl(re.neutral[900]))} / 0.25)`},divider:`rgba(${L("palette-neutral-mainChannel",Jl(re.neutral[500]))} / 0.2)`,focusVisible:J("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},Ce={palette:{mode:"dark",primary:W({},re.primary,ie("primary")),neutral:W({},re.neutral,ie("neutral"),{plainColor:J("palette-neutral-300"),plainHoverColor:J("palette-neutral-300")}),danger:W({},re.danger,ie("danger")),success:W({},re.success,ie("success")),warning:W({},re.warning,ie("warning")),common:{white:"#FFF",black:"#000"},text:{primary:J("palette-neutral-100"),secondary:J("palette-neutral-300"),tertiary:J("palette-neutral-400"),icon:J("palette-neutral-400")},background:{body:J("palette-common-black"),surface:J("palette-neutral-900"),popup:J("palette-common-black"),level1:J("palette-neutral-800"),level2:J("palette-neutral-700"),level3:J("palette-neutral-600"),tooltip:J("palette-neutral-600"),backdrop:`rgba(${L("palette-neutral-darkChannel",Jl(re.neutral[50]))} / 0.25)`},divider:`rgba(${L("palette-neutral-mainChannel",Jl(re.neutral[500]))} / 0.16)`,focusVisible:J("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},_e='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',ke=W({body:`"Inter", ${L(`fontFamily-fallback, ${_e}`)}`,display:`"Inter", ${L(`fontFamily-fallback, ${_e}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:_e},R.fontFamily),ze=W({sm:300,md:500,lg:600,xl:700},R.fontWeight),Le=W({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},R.fontSize),Ye=W({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},R.lineHeight),Ge=(t=(r=R.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:Z.shadowRing,Te=(o=(c=R.colorSchemes)==null||(c=c.light)==null?void 0:c.shadowChannel)!=null?o:Z.shadowChannel,Fe=(d=(m=R.colorSchemes)==null||(m=m.light)==null?void 0:m.shadowOpacity)!=null?d:Z.shadowOpacity,$e={colorSchemes:{light:Z,dark:Ce},fontSize:Le,fontFamily:ke,fontWeight:ze,focus:{thickness:"2px",selector:`&.${Hr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${L("focus-thickness",(l=(b=R.focus)==null?void 0:b.thickness)!=null?l:"2px")})`,outline:`${L("focus-thickness",(w=(T=R.focus)==null?void 0:T.thickness)!=null?w:"2px")} solid ${L("palette-focusVisible",re.primary[500])}`}},lineHeight:Ye,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${L("shadowRing",Ge)}, 0px 1px 2px 0px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)})`,sm:`${L("shadowRing",Ge)}, 0px 1px 2px 0px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)}), 0px 2px 4px 0px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)})`,md:`${L("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)}), 0px 6px 12px -2px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)})`,lg:`${L("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)}), 0px 12px 16px -4px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)})`,xl:`${L("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)}), 0px 20px 24px -4px rgba(${L("shadowChannel",Te)} / ${L("shadowOpacity",Fe)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:L(`fontFamily-display, ${ke.display}`),fontWeight:L(`fontWeight-xl, ${ze.xl}`),fontSize:L(`fontSize-xl4, ${Le.xl4}`),lineHeight:L(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${Z.palette.text.primary}`)},h2:{fontFamily:L(`fontFamily-display, ${ke.display}`),fontWeight:L(`fontWeight-xl, ${ze.xl}`),fontSize:L(`fontSize-xl3, ${Le.xl3}`),lineHeight:L(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${Z.palette.text.primary}`)},h3:{fontFamily:L(`fontFamily-display, ${ke.display}`),fontWeight:L(`fontWeight-lg, ${ze.lg}`),fontSize:L(`fontSize-xl2, ${Le.xl2}`),lineHeight:L(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${Z.palette.text.primary}`)},h4:{fontFamily:L(`fontFamily-display, ${ke.display}`),fontWeight:L(`fontWeight-lg, ${ze.lg}`),fontSize:L(`fontSize-xl, ${Le.xl}`),lineHeight:L(`lineHeight-md, ${Ye.md}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${Z.palette.text.primary}`)},"title-lg":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontWeight:L(`fontWeight-lg, ${ze.lg}`),fontSize:L(`fontSize-lg, ${Le.lg}`),lineHeight:L(`lineHeight-xs, ${Ye.xs}`),color:L(`palette-text-primary, ${Z.palette.text.primary}`)},"title-md":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontWeight:L(`fontWeight-md, ${ze.md}`),fontSize:L(`fontSize-md, ${Le.md}`),lineHeight:L(`lineHeight-md, ${Ye.md}`),color:L(`palette-text-primary, ${Z.palette.text.primary}`)},"title-sm":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontWeight:L(`fontWeight-md, ${ze.md}`),fontSize:L(`fontSize-sm, ${Le.sm}`),lineHeight:L(`lineHeight-sm, ${Ye.sm}`),color:L(`palette-text-primary, ${Z.palette.text.primary}`)},"body-lg":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontSize:L(`fontSize-lg, ${Le.lg}`),lineHeight:L(`lineHeight-md, ${Ye.md}`),color:L(`palette-text-secondary, ${Z.palette.text.secondary}`)},"body-md":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontSize:L(`fontSize-md, ${Le.md}`),lineHeight:L(`lineHeight-md, ${Ye.md}`),color:L(`palette-text-secondary, ${Z.palette.text.secondary}`)},"body-sm":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontSize:L(`fontSize-sm, ${Le.sm}`),lineHeight:L(`lineHeight-md, ${Ye.md}`),color:L(`palette-text-tertiary, ${Z.palette.text.tertiary}`)},"body-xs":{fontFamily:L(`fontFamily-body, ${ke.body}`),fontWeight:L(`fontWeight-md, ${ze.md}`),fontSize:L(`fontSize-xs, ${Le.xs}`),lineHeight:L(`lineHeight-md, ${Ye.md}`),color:L(`palette-text-tertiary, ${Z.palette.text.tertiary}`)}}},Oe=R?di($e,R):$e,{colorSchemes:et}=Oe,at=Wt(Oe,b5),ut=W({colorSchemes:et},at,{breakpoints:Ux(O??{}),components:di({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:Ze,theme:pt})=>{var yt;const ar=Ze.instanceFontSize;return W({margin:"var(--Icon-margin)"},Ze.fontSize&&Ze.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${pt.vars.fontSize[Ze.fontSize]})`},!Ze.htmlColor&&W({color:`var(--Icon-color, ${ut.vars.palette.text.icon})`},Ze.color&&Ze.color!=="inherit"&&pt.vars.palette[Ze.color]&&{color:`rgba(${(yt=pt.vars.palette[Ze.color])==null?void 0:yt.mainChannel} / 1)`}),ar&&ar!=="inherit"&&{"--Icon-fontSize":pt.vars.fontSize[ar]})}}}},V),cssVarPrefix:M,getCssVar:L,spacing:cI(U)});function Pt(Ze,pt){Object.keys(pt).forEach(yt=>{const ar={main:"500",light:"200",dark:"700"};Ze==="dark"&&(ar.main=400),!pt[yt].mainChannel&&pt[yt][ar.main]&&(pt[yt].mainChannel=Jl(pt[yt][ar.main])),!pt[yt].lightChannel&&pt[yt][ar.light]&&(pt[yt].lightChannel=Jl(pt[yt][ar.light])),!pt[yt].darkChannel&&pt[yt][ar.dark]&&(pt[yt].darkChannel=Jl(pt[yt][ar.dark]))})}Object.entries(ut.colorSchemes).forEach(([Ze,pt])=>{Pt(Ze,pt.palette)});const wt={prefix:M,shouldSkipGeneratingVar:F},{vars:zt,generateCssVars:Yt}=l5(W({colorSchemes:et},at),wt);ut.vars=zt,ut.generateCssVars=Yt,ut.unstable_sxConfig=W({},y5,e==null?void 0:e.unstable_sxConfig),ut.unstable_sx=function(pt){return ad({sx:pt,theme:this})},ut.getColorSchemeSelector=Ze=>Ze==="light"?"&":`&[data-joy-color-scheme="${Ze}"], [data-joy-color-scheme="${Ze}"] &`;const lt={getCssVar:L,palette:ut.colorSchemes.light.palette};return ut.variants=di({plain:Vi("plain",lt),plainHover:Vi("plainHover",lt),plainActive:Vi("plainActive",lt),plainDisabled:Vi("plainDisabled",lt),outlined:Vi("outlined",lt),outlinedHover:Vi("outlinedHover",lt),outlinedActive:Vi("outlinedActive",lt),outlinedDisabled:Vi("outlinedDisabled",lt),soft:Vi("soft",lt),softHover:Vi("softHover",lt),softActive:Vi("softActive",lt),softDisabled:Vi("softDisabled",lt),solid:Vi("solid",lt),solidHover:Vi("solidHover",lt),solidActive:Vi("solidActive",lt),solidDisabled:Vi("solidDisabled",lt)},K),ut.palette=W({},ut.colorSchemes.light.palette,{colorScheme:"light"}),ut.shouldSkipGeneratingVar=F,ut.applyStyles=Kx,ut}const Up=TI(),Ch={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:S5,useColorScheme:a1,getInitColorSchemeScript:iH}=r5({themeId:Qg,theme:Up,attribute:Ch.attribute,modeStorageKey:Ch.modeStorageKey,colorSchemeStorageKey:Ch.colorSchemeStorageKey,defaultColorScheme:{light:Ch.defaultLightColorScheme,dark:Ch.defaultDarkColorScheme}}),ht=xI({defaultTheme:Up,themeId:Qg});function Wr({props:e,name:t}){return bI({props:e,name:t,defaultTheme:W({},Up,{components:{}}),themeId:Qg})}function C5(e){return Q.jsx(rL,W({},e,{defaultTheme:Up,themeId:Qg}))}function k5(e){return typeof e=="string"}function PI(e,t,r){return e===void 0||k5(e)?t:W({},t,{ownerState:W({},t.ownerState,r)})}function OS(e,t,r=(o,c)=>o===c){return e.length===t.length&&e.every((o,c)=>r(o,t[c]))}const I5={disableDefaultClasses:!1},T5=A.createContext(I5);function P5(e){const{disableDefaultClasses:t}=A.useContext(T5);return r=>t?"":e(r)}function zi(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function EI(e,t,r){return typeof e=="function"?e(t,r):e}function E5(e){const{rootElementName:t="",componentName:r}=e,[o,c]=A.useState(t.toUpperCase()),d=A.useCallback(m=>{var l;c((l=m==null?void 0:m.tagName)!=null?l:"")},[]);return[o,d]}function FS(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function zI(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:c,className:d}=e;if(!t){const O=oi(r==null?void 0:r.className,d,c==null?void 0:c.className,o==null?void 0:o.className),U=W({},r==null?void 0:r.style,c==null?void 0:c.style,o==null?void 0:o.style),V=W({},r,c,o);return O.length>0&&(V.className=O),Object.keys(U).length>0&&(V.style=U),{props:V,internalRef:void 0}}const m=zi(W({},c,o)),l=FS(o),b=FS(c),w=t(m),T=oi(w==null?void 0:w.className,r==null?void 0:r.className,d,c==null?void 0:c.className,o==null?void 0:o.className),E=W({},w==null?void 0:w.style,r==null?void 0:r.style,c==null?void 0:c.style,o==null?void 0:o.style),M=W({},w,r,b,l);return T.length>0&&(M.className=T),Object.keys(E).length>0&&(M.style=E),{props:M,internalRef:w.ref}}const z5=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function MI(e){var t;const{elementType:r,externalSlotProps:o,ownerState:c,skipResolvingSlotProps:d=!1}=e,m=Wt(e,z5),l=d?{}:EI(o,c),{props:b,internalRef:w}=zI(W({},m,{externalSlotProps:l})),T=tn(w,l==null?void 0:l.ref,(t=e.additionalProps)==null?void 0:t.ref);return PI(r,W({},b,{ref:T}),c)}const DI="base";function M5(e){return`${DI}--${e}`}function D5(e,t){return`${DI}-${e}-${t}`}function AI(e,t){const r=fI[t];return r?M5(r):D5(e,t)}function A5(e,t){const r={};return t.forEach(o=>{r[o]=AI(e,o)}),r}function ns(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:c,tabIndex:d,to:m,type:l,rootElementName:b}=e,w=A.useRef(),[T,E]=A.useState(!1),{isFocusVisibleRef:M,onFocus:O,onBlur:U,ref:V}=t1(),[K,F]=A.useState(!1);t&&!r&&K&&F(!1),A.useEffect(()=>{M.current=K},[K,M]);const[R,L]=E5({rootElementName:b??(o||m?"a":void 0),componentName:"Button"}),re=Ge=>Te=>{var Fe;K&&Te.preventDefault(),(Fe=Ge.onMouseLeave)==null||Fe.call(Ge,Te)},J=Ge=>Te=>{var Fe;U(Te),M.current===!1&&F(!1),(Fe=Ge.onBlur)==null||Fe.call(Ge,Te)},se=Ge=>Te=>{var Fe;if(w.current||(w.current=Te.currentTarget),O(Te),M.current===!0){var $e;F(!0),($e=Ge.onFocusVisible)==null||$e.call(Ge,Te)}(Fe=Ge.onFocus)==null||Fe.call(Ge,Te)},ie=()=>{const Ge=w.current;return R==="BUTTON"||R==="INPUT"&&["button","submit","reset"].includes(Ge==null?void 0:Ge.type)||R==="A"&&(Ge==null?void 0:Ge.href)},Z=Ge=>Te=>{if(!t){var Fe;(Fe=Ge.onClick)==null||Fe.call(Ge,Te)}},Ce=Ge=>Te=>{var Fe;t||(E(!0),document.addEventListener("mouseup",()=>{E(!1)},{once:!0})),(Fe=Ge.onMouseDown)==null||Fe.call(Ge,Te)},_e=Ge=>Te=>{var Fe;if((Fe=Ge.onKeyDown)==null||Fe.call(Ge,Te),!Te.defaultMuiPrevented&&(Te.target===Te.currentTarget&&!ie()&&Te.key===" "&&Te.preventDefault(),Te.target===Te.currentTarget&&Te.key===" "&&!t&&E(!0),Te.target===Te.currentTarget&&!ie()&&Te.key==="Enter"&&!t)){var $e;($e=Ge.onClick)==null||$e.call(Ge,Te),Te.preventDefault()}},ke=Ge=>Te=>{var Fe;if(Te.target===Te.currentTarget&&E(!1),(Fe=Ge.onKeyUp)==null||Fe.call(Ge,Te),Te.target===Te.currentTarget&&!ie()&&!t&&Te.key===" "&&!Te.defaultMuiPrevented){var $e;($e=Ge.onClick)==null||$e.call(Ge,Te)}},ze=tn(L,c,V,w),Le={};return d!==void 0&&(Le.tabIndex=d),R==="BUTTON"?(Le.type=l??"button",r?Le["aria-disabled"]=t:Le.disabled=t):R==="INPUT"?l&&["button","submit","reset"].includes(l)&&(r?Le["aria-disabled"]=t:Le.disabled=t):R!==""&&(!o&&!m&&(Le.role="button",Le.tabIndex=d??0),t&&(Le["aria-disabled"]=t,Le.tabIndex=r?d??0:-1)),{getRootProps:(Ge={})=>{const Te=W({},zi(e),zi(Ge)),Fe=W({type:l},Te,Le,Ge,{onBlur:J(Te),onClick:Z(Te),onFocus:se(Te),onKeyDown:_e(Te),onKeyUp:ke(Te),onMouseDown:Ce(Te),onMouseLeave:re(Te),ref:ze});return delete Fe.onFocusVisible,Fe},focusVisible:K,setFocusVisible:F,active:T,rootRef:ze}}const zy=A.createContext(null);function R5(e,t){return e===t}const k0={},NS=()=>{};function v_(e,t){const r=W({},e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(r[o]=t[o])}),r}function L5(e){const{nextState:t,initialState:r,stateComparers:o,onStateChange:c,controlledProps:d,lastActionRef:m}=e,l=A.useRef(r);A.useEffect(()=>{if(m.current===null)return;const b=v_(l.current,d);Object.keys(t).forEach(w=>{var T;const E=(T=o[w])!=null?T:R5,M=t[w],O=b[w];if(O==null&&M!=null||O!=null&&M==null||O!=null&&M!=null&&!E(M,O)){var U,V;c==null||c((U=m.current.event)!=null?U:null,w,M,(V=m.current.type)!=null?V:"",t)}}),l.current=t,m.current=null},[l,t,m,c,o,d])}function RI(e){const t=A.useRef(null),{reducer:r,initialState:o,controlledProps:c=k0,stateComparers:d=k0,onStateChange:m=NS,actionContext:l,componentName:b=""}=e;A.useRef(c);const w=A.useCallback((O,U)=>{t.current=U;const V=v_(O,c);return r(V,U)},[c,r]),[T,E]=A.useReducer(w,o),M=A.useCallback(O=>{E(W({},O,{context:l}))},[l]);return L5({nextState:T,initialState:o,stateComparers:d??k0,onStateChange:m??NS,controlledProps:c,lastActionRef:t}),[v_(T,c),M]}const Ma={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function $5(e,t){switch(t.type){case Ma.blur:return{open:!1,changeReason:t.event};case Ma.escapeKeyDown:return{open:!1,changeReason:t.event};case Ma.toggle:return{open:!e.open,changeReason:t.event};case Ma.open:return{open:!0,changeReason:t.event};case Ma.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function B5(e={}){const{defaultOpen:t,onOpenChange:r,open:o,componentName:c="useDropdown"}=e,[d,m]=A.useState(""),[l,b]=A.useState(null),w=A.useRef(null),T=A.useCallback((V,K,F,R)=>{K==="open"&&(r==null||r(V,F)),w.current=R},[r]),E=A.useMemo(()=>o!==void 0?{open:o}:{},[o]),[M,O]=RI({controlledProps:E,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:T,reducer:$5,componentName:c});return A.useEffect(()=>{!M.open&&w.current!==null&&w.current!==Ma.blur&&(l==null||l.focus())},[M.open,l]),{contextValue:{state:M,dispatch:O,popupId:d,registerPopup:m,registerTrigger:b,triggerElement:l},open:M.open}}function O5(e){const{children:t,open:r,defaultOpen:o,onOpenChange:c}=e,{contextValue:d}=B5({defaultOpen:o,onOpenChange:c,open:r});return Q.jsx(zy.Provider,{value:d,children:t})}const F5=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function N5(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function j5(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function V5(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||j5(e))}function U5(e){const t=[],r=[];return Array.from(e.querySelectorAll(F5)).forEach((o,c)=>{const d=N5(o);d===-1||!V5(o)||(d===0?t.push(o):r.push({documentOrder:c,tabIndex:d,node:o}))}),r.sort((o,c)=>o.tabIndex===c.tabIndex?o.documentOrder-c.documentOrder:o.tabIndex-c.tabIndex).map(o=>o.node).concat(t)}function H5(){return!0}function W5(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:o=!1,disableRestoreFocus:c=!1,getTabbable:d=U5,isEnabled:m=H5,open:l}=e,b=A.useRef(!1),w=A.useRef(null),T=A.useRef(null),E=A.useRef(null),M=A.useRef(null),O=A.useRef(!1),U=A.useRef(null),V=tn(t.ref,U),K=A.useRef(null);A.useEffect(()=>{!l||!U.current||(O.current=!r)},[r,l]),A.useEffect(()=>{if(!l||!U.current)return;const L=Ya(U.current);return U.current.contains(L.activeElement)||(U.current.hasAttribute("tabIndex")||U.current.setAttribute("tabIndex","-1"),O.current&&U.current.focus()),()=>{c||(E.current&&E.current.focus&&(b.current=!0,E.current.focus()),E.current=null)}},[l]),A.useEffect(()=>{if(!l||!U.current)return;const L=Ya(U.current),re=ie=>{K.current=ie,!(o||!m()||ie.key!=="Tab")&&L.activeElement===U.current&&ie.shiftKey&&(b.current=!0,T.current&&T.current.focus())},J=()=>{const ie=U.current;if(ie===null)return;if(!L.hasFocus()||!m()||b.current){b.current=!1;return}if(ie.contains(L.activeElement)||o&&L.activeElement!==w.current&&L.activeElement!==T.current)return;if(L.activeElement!==M.current)M.current=null;else if(M.current!==null)return;if(!O.current)return;let Z=[];if((L.activeElement===w.current||L.activeElement===T.current)&&(Z=d(U.current)),Z.length>0){var Ce,_e;const ke=!!((Ce=K.current)!=null&&Ce.shiftKey&&((_e=K.current)==null?void 0:_e.key)==="Tab"),ze=Z[0],Le=Z[Z.length-1];typeof ze!="string"&&typeof Le!="string"&&(ke?Le.focus():ze.focus())}else ie.focus()};L.addEventListener("focusin",J),L.addEventListener("keydown",re,!0);const se=setInterval(()=>{L.activeElement&&L.activeElement.tagName==="BODY"&&J()},50);return()=>{clearInterval(se),L.removeEventListener("focusin",J),L.removeEventListener("keydown",re,!0)}},[r,o,c,m,l,d]);const F=L=>{E.current===null&&(E.current=L.relatedTarget),O.current=!0,M.current=L.target;const re=t.props.onFocus;re&&re(L)},R=L=>{E.current===null&&(E.current=L.relatedTarget),O.current=!0};return Q.jsxs(A.Fragment,{children:[Q.jsx("div",{tabIndex:l?0:-1,onFocus:R,ref:w,"data-testid":"sentinelStart"}),A.cloneElement(t,{ref:V,onFocus:F}),Q.jsx("div",{tabIndex:l?0:-1,onFocus:R,ref:T,"data-testid":"sentinelEnd"})]})}const G5=A.createContext(void 0);function q5(){return A.useContext(G5)}function Z5(e={}){const{defaultValue:t,disabled:r=!1,error:o=!1,onBlur:c,onChange:d,onFocus:m,required:l=!1,value:b,inputRef:w}=e,T=q5();let E,M,O,U,V;if(T){var K,F,R;E=void 0,M=(K=T.disabled)!=null?K:!1,O=(F=T.error)!=null?F:!1,U=(R=T.required)!=null?R:!1,V=T.value}else E=t,M=r,O=o,U=l,V=b;const{current:L}=A.useRef(V!=null),re=A.useCallback(Ge=>{},[]),J=A.useRef(null),se=tn(J,w,re),[ie,Z]=A.useState(!1);A.useEffect(()=>{!T&&M&&ie&&(Z(!1),c==null||c())},[T,M,ie,c]);const Ce=Ge=>Te=>{var Fe;if(T!=null&&T.disabled){Te.stopPropagation();return}if((Fe=Ge.onFocus)==null||Fe.call(Ge,Te),T&&T.onFocus){var $e;T==null||($e=T.onFocus)==null||$e.call(T)}else Z(!0)},_e=Ge=>Te=>{var Fe;(Fe=Ge.onBlur)==null||Fe.call(Ge,Te),T&&T.onBlur?T.onBlur():Z(!1)},ke=Ge=>(Te,...Fe)=>{var $e,Oe;if(!L&&(Te.target||J.current)==null)throw new Error(Is(17));T==null||($e=T.onChange)==null||$e.call(T,Te),(Oe=Ge.onChange)==null||Oe.call(Ge,Te,...Fe)},ze=Ge=>Te=>{var Fe;J.current&&Te.currentTarget===Te.target&&J.current.focus(),(Fe=Ge.onClick)==null||Fe.call(Ge,Te)};return{disabled:M,error:O,focused:ie,formControlContext:T,getInputProps:(Ge={})=>{const Fe=W({},{onBlur:c,onChange:d,onFocus:m},zi(Ge)),$e=W({},Fe,{onBlur:_e(Fe),onChange:ke(Fe),onFocus:Ce(Fe)});return W({},$e,{"aria-invalid":O||void 0,defaultValue:E,value:V,required:U,disabled:M},Ge,{ref:se},$e)},getRootProps:(Ge={})=>{const Te=zi(e,["onBlur","onChange","onFocus"]),Fe=W({},Te,zi(Ge));return W({},Ge,Fe,{onClick:ze(Fe)})},inputRef:se,required:U,value:V}}const un={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function K5(e,t,r,o,c,d){if(r.length===0||!o&&r.every((l,b)=>c(l,b)))return-1;let m=e;for(;;){if(!d&&t==="next"&&m===r.length||!d&&t==="previous"&&m===-1)return-1;if(o?!1:c(r[m],m))m+=t==="next"?1:-1,d&&(m=(m+r.length)%r.length);else return m}}function gi(e,t,r){var o;const{items:c,isItemDisabled:d,disableListWrap:m,disabledItemsFocusable:l,itemComparer:b,focusManagement:w}=r,T=w==="DOM"?0:-1,E=c.length-1,M=e==null?-1:c.findIndex(F=>b(F,e));let O,U,V=!m;switch(t){case"reset":if(T===-1)return null;O=0,U="next",V=!1;break;case"start":O=0,U="next",V=!1;break;case"end":O=E,U="previous",V=!1;break;default:{const F=M+t;F<0?!V&&M!==-1||Math.abs(t)>1?(O=0,U="next"):(O=E,U="previous"):F>E?!V||Math.abs(t)>1?(O=E,U="previous"):(O=0,U="next"):(O=F,U=t>=0?"next":"previous")}}const K=K5(O,U,c,l,d,V);return K===-1&&e!==null&&!d(e,M)?e:(o=c[K])!=null?o:null}function X5(e,t,r,o){return r==="none"?[]:r==="single"?o(t[0],e)?t:[e]:t.some(c=>o(c,e))?t.filter(c=>!o(c,e)):[...t,e]}function s1(e,t,r){const{itemComparer:o,isItemDisabled:c,selectionMode:d,items:m}=r,{selectedValues:l}=t,b=m.findIndex(T=>o(e,T));if(c(e,b))return t;const w=X5(e,l,d,o);return W({},t,{selectedValues:w,highlightedValue:e})}function J5(e,t,r){const o=t.highlightedValue,{orientation:c,pageSize:d}=r;switch(e){case"Home":return W({},t,{highlightedValue:gi(o,"start",r)});case"End":return W({},t,{highlightedValue:gi(o,"end",r)});case"PageUp":return W({},t,{highlightedValue:gi(o,-d,r)});case"PageDown":return W({},t,{highlightedValue:gi(o,d,r)});case"ArrowUp":if(c!=="vertical")break;return W({},t,{highlightedValue:gi(o,-1,r)});case"ArrowDown":if(c!=="vertical")break;return W({},t,{highlightedValue:gi(o,1,r)});case"ArrowLeft":{if(c==="vertical")break;return W({},t,{highlightedValue:gi(o,c==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(c==="vertical")break;return W({},t,{highlightedValue:gi(o,c==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:s1(t.highlightedValue,t,r)}return t}function Y5(e,t){return t.focusManagement==="DOM"?e:W({},e,{highlightedValue:null})}function Q5(e,t,r){var o;const c=(o=r(e))==null?void 0:o.trim().toLowerCase();return!c||c.length===0?!1:c.indexOf(t)===0}function e3(e,t,r){const{items:o,isItemDisabled:c,disabledItemsFocusable:d,getItemAsString:m}=r,l=t.length>1;let b=l?e.highlightedValue:gi(e.highlightedValue,1,r);for(let w=0;w<o.length;w+=1){if(!b||!l&&e.highlightedValue===b)return e;if(Q5(b,t,m)&&(!c(b,o.indexOf(b))||d))return W({},e,{highlightedValue:b});b=gi(b,1,r)}return e}function t3(e,t,r,o){var c;const{itemComparer:d,focusManagement:m}=o;let l=null;if(r.highlightedValue!=null){var b;l=(b=e.find(E=>d(E,r.highlightedValue)))!=null?b:null}else m==="DOM"&&t.length===0&&(l=gi(null,"reset",o));const T=((c=r.selectedValues)!=null?c:[]).filter(E=>e.some(M=>d(M,E)));return W({},r,{highlightedValue:l,selectedValues:T})}function r3(e,t){return W({},e,{highlightedValue:gi(null,"reset",t)})}function n3(e,t){return W({},e,{highlightedValue:gi(null,"end",t)})}function i3(e,t){return W({},e,{selectedValues:[],highlightedValue:gi(null,"reset",t)})}function My(e,t){const{type:r,context:o}=t;switch(r){case un.keyDown:return J5(t.key,e,o);case un.itemClick:return s1(t.item,e,o);case un.blur:return Y5(e,o);case un.textNavigation:return e3(e,t.searchString,o);case un.itemsChange:return t3(t.items,t.previousItems,e,o);case un.resetHighlight:return r3(e,o);case un.highlightLast:return n3(e,o);case un.clearSelection:return i3(e,o);default:return e}}const o3=500;function a3(e){const t=A.useRef({searchString:"",lastTime:null});return A.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const o=t.current,c=r.key.toLowerCase(),d=performance.now();o.searchString.length>0&&o.lastTime&&d-o.lastTime>o3?o.searchString=c:(o.searchString.length!==1||c!==o.searchString)&&(o.searchString+=c),o.lastTime=d,e(o.searchString,r)}},[e])}const jS={},s3=()=>{},l3=(e,t)=>e===t,c3=()=>!1,u3=e=>typeof e=="string"?e:String(e),d3=()=>({highlightedValue:null,selectedValues:[]});function l1(e){const{controlledProps:t=jS,disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:c="activeDescendant",getInitialState:d=d3,getItemDomElement:m,getItemId:l,isItemDisabled:b=c3,rootRef:w,onStateChange:T=s3,items:E,itemComparer:M=l3,getItemAsString:O=u3,onChange:U,onHighlightChange:V,onItemsChange:K,orientation:F="vertical",pageSize:R=5,reducerActionContext:L=jS,selectionMode:re="single",stateReducer:J,componentName:se="useList"}=e,ie=A.useRef(null),Z=tn(w,ie),Ce=A.useCallback((lt,Ze,pt)=>{if(V==null||V(lt,Ze,pt),c==="DOM"&&Ze!=null&&(pt===un.itemClick||pt===un.keyDown||pt===un.textNavigation)){var yt;m==null||(yt=m(Ze))==null||yt.focus()}},[m,V,c]),_e=A.useMemo(()=>({highlightedValue:M,selectedValues:(lt,Ze)=>OS(lt,Ze,M)}),[M]),ke=A.useCallback((lt,Ze,pt,yt,ar)=>{switch(T==null||T(lt,Ze,pt,yt,ar),Ze){case"highlightedValue":Ce(lt,pt,yt);break;case"selectedValues":U==null||U(lt,pt,yt);break}},[Ce,U,T]),ze=A.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:o,focusManagement:c,isItemDisabled:b,itemComparer:M,items:E,getItemAsString:O,onHighlightChange:Ce,orientation:F,pageSize:R,selectionMode:re,stateComparers:_e}),[r,o,c,b,M,E,O,Ce,F,R,re,_e]),Le=d(),Ye=J??My,Ge=A.useMemo(()=>W({},L,ze),[L,ze]),[Te,Fe]=RI({reducer:Ye,actionContext:Ge,initialState:Le,controlledProps:t,stateComparers:_e,onStateChange:ke,componentName:se}),{highlightedValue:$e,selectedValues:Oe}=Te,et=a3((lt,Ze)=>Fe({type:un.textNavigation,event:Ze,searchString:lt})),at=A.useRef([]);A.useEffect(()=>{OS(at.current,E,M)||(Fe({type:un.itemsChange,event:null,items:E,previousItems:at.current}),at.current=E,K==null||K(E))},[E,M,Fe,K]);const ut=lt=>Ze=>{var pt;if((pt=lt.onKeyDown)==null||pt.call(lt,Ze),Ze.defaultMuiPrevented)return;const yt=["Home","End","PageUp","PageDown"];F==="vertical"?yt.push("ArrowUp","ArrowDown"):yt.push("ArrowLeft","ArrowRight"),c==="activeDescendant"&&yt.push(" ","Enter"),yt.includes(Ze.key)&&Ze.preventDefault(),Fe({type:un.keyDown,key:Ze.key,event:Ze}),et(Ze)},Pt=lt=>Ze=>{var pt,yt;(pt=lt.onBlur)==null||pt.call(lt,Ze),!Ze.defaultMuiPrevented&&((yt=ie.current)!=null&&yt.contains(Ze.relatedTarget)||Fe({type:un.blur,event:Ze}))},wt=(lt={})=>{const Ze=zi(lt);return W({},lt,{"aria-activedescendant":c==="activeDescendant"&&$e!=null?l($e):void 0,tabIndex:c==="DOM"?-1:0,ref:Z},Ze,{onBlur:Pt(Ze),onKeyDown:ut(Ze)})},zt=A.useCallback(lt=>{const Ze=(Oe??[]).some(ar=>ar!=null&&M(lt,ar)),pt=$e!=null&&M(lt,$e);return{focusable:c==="DOM",highlighted:pt,selected:Ze}},[M,Oe,$e,c]),Yt=A.useMemo(()=>({dispatch:Fe,getItemState:zt}),[Fe,zt]);return A.useDebugValue({state:Te}),{contextValue:Yt,dispatch:Fe,getRootProps:wt,rootRef:Z,state:Te}}const Sl=A.createContext(null);function c1(e){const{handlePointerOverEvents:t=!1,item:r}=e,o=A.useContext(Sl);if(!o)throw new Error("useListItem must be used within a ListProvider");const{dispatch:c,getItemState:d}=o,{highlighted:m,selected:l,focusable:b}=d(r),w=A.useCallback(O=>U=>{var V;(V=O.onClick)==null||V.call(O,U),!U.defaultPrevented&&c({type:un.itemClick,item:r,event:U})},[c,r]),T=A.useCallback(O=>U=>{var V;(V=O.onMouseOver)==null||V.call(O,U),!U.defaultPrevented&&c({type:un.itemHover,item:r,event:U})},[c,r]);let E;return b&&(E=m?0:-1),{getRootProps:(O={})=>{const U=zi(O);return W({},O,{onClick:w(U),onPointerOver:t?T(U):void 0,tabIndex:E})},highlighted:m,selected:l}}function h3(e,t){if(t.type===un.itemHover)return W({},e,{highlightedValue:t.item});const r=My(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return W({},r,{highlightedValue:t.context.items[0]});if(t.type===un.keyDown&&t.event.key==="Escape")return W({},r,{open:!1});if(t.type===un.blur){var o;if(!((o=t.context.listboxRef.current)!=null&&o.contains(t.event.relatedTarget))){var c,d;const m=(c=t.context.listboxRef.current)==null?void 0:c.getAttribute("id"),l=(d=t.event.relatedTarget)==null?void 0:d.getAttribute("aria-controls");return m&&l&&m===l?r:W({},r,{open:!1,highlightedValue:t.context.items[0]})}}return r}const Hp=A.createContext(null);function p3(e){const t=Array.from(e.keys()).map(r=>{const o=e.get(r);return{key:r,subitem:o}});return t.sort((r,o)=>{const c=r.subitem.ref.current,d=o.subitem.ref.current;return c===null||d===null||c===d?0:c.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function Dy(){const[e,t]=A.useState(new Map),r=A.useRef(new Set),o=A.useCallback(function(w){r.current.delete(w),t(T=>{const E=new Map(T);return E.delete(w),E})},[]),c=A.useCallback(function(w,T){let E;return typeof w=="function"?E=w(r.current):E=w,r.current.add(E),t(M=>{const O=new Map(M);return O.set(E,T),O}),{id:E,deregister:()=>o(E)}},[o]),d=A.useMemo(()=>p3(e),[e]),m=A.useCallback(function(w){return Array.from(d.keys()).indexOf(w)},[d]);return{contextValue:A.useMemo(()=>({getItemIndex:m,registerItem:c,totalSubitemCount:e.size}),[m,c,e.size]),subitems:d}}function Ay(e,t){const r=A.useContext(Hp);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=r,[c,d]=A.useState(typeof e=="function"?void 0:e);return Ts(()=>{const{id:m,deregister:l}=o(e,t);return d(m),l},[o,t,e]),{id:c,index:c!==void 0?r.getItemIndex(c):-1,totalItemCount:r.totalSubitemCount}}function Ps(e,t){return function(o={}){const c=W({},o,e(o));return W({},c,t(c))}}const f3={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function m3(e={}){var t,r;const{listboxRef:o,onItemsChange:c,id:d,disabledItemsFocusable:m=!0,disableListWrap:l=!1,autoFocus:b=!0,componentName:w="useMenu"}=e,T=A.useRef(null),E=tn(T,o),M=(t=Co(d))!=null?t:"",{state:{open:O,changeReason:U},dispatch:V,triggerElement:K,registerPopup:F}=(r=A.useContext(zy))!=null?r:f3,R=A.useRef(O),{subitems:L,contextValue:re}=Dy(),J=A.useMemo(()=>Array.from(L.keys()),[L]),se=A.useCallback(Oe=>{var et,at;return Oe==null?null:(et=(at=L.get(Oe))==null?void 0:at.ref.current)!=null?et:null},[L]),ie=A.useCallback(Oe=>{var et;return(L==null||(et=L.get(Oe))==null?void 0:et.disabled)||!1},[L]),Z=A.useCallback(Oe=>{var et,at;return((et=L.get(Oe))==null?void 0:et.label)||((at=L.get(Oe))==null||(at=at.ref.current)==null?void 0:at.innerText)},[L]),Ce=A.useMemo(()=>({listboxRef:T}),[T]),{dispatch:_e,getRootProps:ke,contextValue:ze,state:{highlightedValue:Le},rootRef:Ye}=l1({disabledItemsFocusable:m,disableListWrap:l,focusManagement:"DOM",getItemDomElement:se,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:ie,items:J,getItemAsString:Z,rootRef:E,onItemsChange:c,reducerActionContext:Ce,selectionMode:"none",stateReducer:h3,componentName:w});Ts(()=>{F(M)},[M,F]),Ts(()=>{O&&(U==null?void 0:U.type)==="keydown"&&U.key==="ArrowUp"&&_e({type:un.highlightLast,event:U})},[O,U,_e]),A.useEffect(()=>{if(O&&b&&Le&&!R.current){var Oe;(Oe=L.get(Le))==null||(Oe=Oe.ref)==null||(Oe=Oe.current)==null||Oe.focus()}},[O,b,Le,L,J]),A.useEffect(()=>{var Oe;if((Oe=T.current)!=null&&Oe.contains(document.activeElement)&&Le!==null){var et;L==null||(et=L.get(Le))==null||(et=et.ref.current)==null||et.focus()}},[Le,L]);const Ge=Oe=>et=>{var at,ut;(at=Oe.onBlur)==null||at.call(Oe,et),!et.defaultMuiPrevented&&((ut=T.current)!=null&&ut.contains(et.relatedTarget)||et.relatedTarget===K||V({type:Ma.blur,event:et}))},Te=Oe=>et=>{var at;(at=Oe.onKeyDown)==null||at.call(Oe,et),!et.defaultMuiPrevented&&et.key==="Escape"&&V({type:Ma.escapeKeyDown,event:et})},Fe=(Oe={})=>({onBlur:Ge(Oe),onKeyDown:Te(Oe)}),$e=(Oe={})=>{const et=Ps(Fe,ke),at=zi(Oe);return W({},Oe,at,et(at),{id:M,role:"menu"})};return A.useDebugValue({subitems:L,highlightedValue:Le}),{contextValue:W({},re,ze),dispatch:_e,getListboxProps:$e,highlightedValue:Le,listboxRef:Ye,menuItems:L,open:O,triggerElement:K}}function g3(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:c,getItemState:d,registerItem:m,totalSubitemCount:l}=t,b=A.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:c}),[o,c,d]),w=A.useMemo(()=>({getItemIndex:c,registerItem:m,totalSubitemCount:l}),[m,c,l]);return Q.jsx(Hp.Provider,{value:w,children:Q.jsx(Sl.Provider,{value:b,children:r})})}var LI={exports:{}},Vo={},$I={exports:{}},BI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($e,Oe){var et=$e.length;$e.push(Oe);e:for(;0<et;){var at=et-1>>>1,ut=$e[at];if(0<c(ut,Oe))$e[at]=Oe,$e[et]=ut,et=at;else break e}}function r($e){return $e.length===0?null:$e[0]}function o($e){if($e.length===0)return null;var Oe=$e[0],et=$e.pop();if(et!==Oe){$e[0]=et;e:for(var at=0,ut=$e.length,Pt=ut>>>1;at<Pt;){var wt=2*(at+1)-1,zt=$e[wt],Yt=wt+1,lt=$e[Yt];if(0>c(zt,et))Yt<ut&&0>c(lt,zt)?($e[at]=lt,$e[Yt]=et,at=Yt):($e[at]=zt,$e[wt]=et,at=wt);else if(Yt<ut&&0>c(lt,et))$e[at]=lt,$e[Yt]=et,at=Yt;else break e}}return Oe}function c($e,Oe){var et=$e.sortIndex-Oe.sortIndex;return et!==0?et:$e.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var b=[],w=[],T=1,E=null,M=3,O=!1,U=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L($e){for(var Oe=r(w);Oe!==null;){if(Oe.callback===null)o(w);else if(Oe.startTime<=$e)o(w),Oe.sortIndex=Oe.expirationTime,t(b,Oe);else break;Oe=r(w)}}function re($e){if(V=!1,L($e),!U)if(r(b)!==null)U=!0,Te(J);else{var Oe=r(w);Oe!==null&&Fe(re,Oe.startTime-$e)}}function J($e,Oe){U=!1,V&&(V=!1,F(Z),Z=-1),O=!0;var et=M;try{for(L(Oe),E=r(b);E!==null&&(!(E.expirationTime>Oe)||$e&&!ke());){var at=E.callback;if(typeof at=="function"){E.callback=null,M=E.priorityLevel;var ut=at(E.expirationTime<=Oe);Oe=e.unstable_now(),typeof ut=="function"?E.callback=ut:E===r(b)&&o(b),L(Oe)}else o(b);E=r(b)}if(E!==null)var Pt=!0;else{var wt=r(w);wt!==null&&Fe(re,wt.startTime-Oe),Pt=!1}return Pt}finally{E=null,M=et,O=!1}}var se=!1,ie=null,Z=-1,Ce=5,_e=-1;function ke(){return!(e.unstable_now()-_e<Ce)}function ze(){if(ie!==null){var $e=e.unstable_now();_e=$e;var Oe=!0;try{Oe=ie(!0,$e)}finally{Oe?Le():(se=!1,ie=null)}}else se=!1}var Le;if(typeof R=="function")Le=function(){R(ze)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Ge=Ye.port2;Ye.port1.onmessage=ze,Le=function(){Ge.postMessage(null)}}else Le=function(){K(ze,0)};function Te($e){ie=$e,se||(se=!0,Le())}function Fe($e,Oe){Z=K(function(){$e(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_continueExecution=function(){U||O||(U=!0,Te(J))},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function($e){switch(M){case 1:case 2:case 3:var Oe=3;break;default:Oe=M}var et=M;M=Oe;try{return $e()}finally{M=et}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($e,Oe){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var et=M;M=$e;try{return Oe()}finally{M=et}},e.unstable_scheduleCallback=function($e,Oe,et){var at=e.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?at+et:at):et=at,$e){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=et+ut,$e={id:T++,callback:Oe,priorityLevel:$e,startTime:et,expirationTime:ut,sortIndex:-1},et>at?($e.sortIndex=et,t(w,$e),r(b)===null&&$e===r(w)&&(V?(F(Z),Z=-1):V=!0,Fe(re,et-at))):($e.sortIndex=ut,t(b,$e),U||O||(U=!0,Te(J))),$e},e.unstable_shouldYield=ke,e.unstable_wrapCallback=function($e){var Oe=M;return function(){var et=M;M=Oe;try{return $e.apply(this,arguments)}finally{M=et}}}})(BI);$I.exports=BI;var y3=$I.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3=A,Fo=y3;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OI=new Set,pp={};function vc(e,t){ju(e,t),ju(e+"Capture",t)}function ju(e,t){for(pp[e]=t,e=0;e<t.length;e++)OI.add(t[e])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),__=Object.prototype.hasOwnProperty,_3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VS={},US={};function x3(e){return __.call(US,e)?!0:__.call(VS,e)?!1:_3.test(e)?US[e]=!0:(VS[e]=!0,!1)}function b3(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w3(e,t,r,o){if(t===null||typeof t>"u"||b3(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lo(e,t,r,o,c,d,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=m}var Di={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Di[e]=new lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Di[t]=new lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Di[e]=new lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Di[e]=new lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Di[e]=new lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Di[e]=new lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Di[e]=new lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Di[e]=new lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Di[e]=new lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var u1=/[\-:]([a-z])/g;function d1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(u1,d1);Di[t]=new lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(u1,d1);Di[t]=new lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(u1,d1);Di[t]=new lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Di[e]=new lo(e,1,!1,e.toLowerCase(),null,!1,!1)});Di.xlinkHref=new lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Di[e]=new lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function h1(e,t,r,o){var c=Di.hasOwnProperty(t)?Di[t]:null;(c!==null?c.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(w3(t,r,c,o)&&(r=null),o||c===null?x3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,o=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Ls=v3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vm=Symbol.for("react.element"),gu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),x_=Symbol.for("react.profiler"),FI=Symbol.for("react.provider"),NI=Symbol.for("react.context"),f1=Symbol.for("react.forward_ref"),b_=Symbol.for("react.suspense"),w_=Symbol.for("react.suspense_list"),m1=Symbol.for("react.memo"),rl=Symbol.for("react.lazy"),jI=Symbol.for("react.offscreen"),HS=Symbol.iterator;function kh(e){return e===null||typeof e!="object"?null:(e=HS&&e[HS]||e["@@iterator"],typeof e=="function"?e:null)}var $n=Object.assign,I0;function jh(e){if(I0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);I0=t&&t[1]||""}return`
`+I0+e}var T0=!1;function P0(e,t){if(!e||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=o.stack.split(`
`),m=c.length-1,l=d.length-1;1<=m&&0<=l&&c[m]!==d[l];)l--;for(;1<=m&&0<=l;m--,l--)if(c[m]!==d[l]){if(m!==1||l!==1)do if(m--,l--,0>l||c[m]!==d[l]){var b=`
`+c[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=l);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jh(e):""}function S3(e){switch(e.tag){case 5:return jh(e.type);case 16:return jh("Lazy");case 13:return jh("Suspense");case 19:return jh("SuspenseList");case 0:case 2:case 15:return e=P0(e.type,!1),e;case 11:return e=P0(e.type.render,!1),e;case 1:return e=P0(e.type,!0),e;default:return""}}function S_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yu:return"Fragment";case gu:return"Portal";case x_:return"Profiler";case p1:return"StrictMode";case b_:return"Suspense";case w_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NI:return(e.displayName||"Context")+".Consumer";case FI:return(e._context.displayName||"Context")+".Provider";case f1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case m1:return t=e.displayName||null,t!==null?t:S_(e.type)||"Memo";case rl:t=e._payload,e=e._init;try{return S_(e(t))}catch{}}return null}function C3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S_(t);case 8:return t===p1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function VI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function k3(e){var t=VI(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){o=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _m(e){e._valueTracker||(e._valueTracker=k3(e))}function UI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=VI(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function fg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function C_(e,t){var r=t.checked;return $n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function WS(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=bl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function HI(e,t){t=t.checked,t!=null&&h1(e,"checked",t,!1)}function k_(e,t){HI(e,t);var r=bl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?I_(e,t.type,r):t.hasOwnProperty("defaultValue")&&I_(e,t.type,bl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function GS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function I_(e,t,r){(t!=="number"||fg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Vh=Array.isArray;function Du(e,t,r,o){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&o&&(e[r].defaultSelected=!0)}else{for(r=""+bl(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function T_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return $n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(mt(92));if(Vh(r)){if(1<r.length)throw Error(mt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bl(r)}}function WI(e,t){var r=bl(t.value),o=bl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function ZS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xm,qI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xm=xm||document.createElement("div"),xm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Kh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I3=["Webkit","ms","Moz","O"];Object.keys(Kh).forEach(function(e){I3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kh[t]=Kh[e]})});function ZI(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Kh.hasOwnProperty(e)&&Kh[e]?(""+t).trim():t+"px"}function KI(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,c=ZI(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,c):e[r]=c}}var T3=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E_(e,t){if(t){if(T3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function z_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M_=null;function g1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var D_=null,Au=null,Ru=null;function KS(e){if(e=qp(e)){if(typeof D_!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=Oy(t),D_(e.stateNode,e.type,t))}}function XI(e){Au?Ru?Ru.push(e):Ru=[e]:Au=e}function JI(){if(Au){var e=Au,t=Ru;if(Ru=Au=null,KS(e),t)for(e=0;e<t.length;e++)KS(t[e])}}function YI(e,t){return e(t)}function QI(){}var E0=!1;function eT(e,t,r){if(E0)return e(t,r);E0=!0;try{return YI(e,t,r)}finally{E0=!1,(Au!==null||Ru!==null)&&(QI(),JI())}}function mp(e,t){var r=e.stateNode;if(r===null)return null;var o=Oy(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(mt(231,t,typeof r));return r}var A_=!1;if(Es)try{var Ih={};Object.defineProperty(Ih,"passive",{get:function(){A_=!0}}),window.addEventListener("test",Ih,Ih),window.removeEventListener("test",Ih,Ih)}catch{A_=!1}function P3(e,t,r,o,c,d,m,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var Xh=!1,mg=null,gg=!1,R_=null,E3={onError:function(e){Xh=!0,mg=e}};function z3(e,t,r,o,c,d,m,l,b){Xh=!1,mg=null,P3.apply(E3,arguments)}function M3(e,t,r,o,c,d,m,l,b){if(z3.apply(this,arguments),Xh){if(Xh){var w=mg;Xh=!1,mg=null}else throw Error(mt(198));gg||(gg=!0,R_=w)}}function _c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function XS(e){if(_c(e)!==e)throw Error(mt(188))}function D3(e){var t=e.alternate;if(!t){if(t=_c(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var r=e,o=t;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return XS(c),e;if(d===o)return XS(c),t;d=d.sibling}throw Error(mt(188))}if(r.return!==o.return)r=c,o=d;else{for(var m=!1,l=c.child;l;){if(l===r){m=!0,r=c,o=d;break}if(l===o){m=!0,o=c,r=d;break}l=l.sibling}if(!m){for(l=d.child;l;){if(l===r){m=!0,r=d,o=c;break}if(l===o){m=!0,o=d,r=c;break}l=l.sibling}if(!m)throw Error(mt(189))}}if(r.alternate!==o)throw Error(mt(190))}if(r.tag!==3)throw Error(mt(188));return r.stateNode.current===r?e:t}function rT(e){return e=D3(e),e!==null?nT(e):null}function nT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nT(e);if(t!==null)return t;e=e.sibling}return null}var iT=Fo.unstable_scheduleCallback,JS=Fo.unstable_cancelCallback,A3=Fo.unstable_shouldYield,R3=Fo.unstable_requestPaint,Jn=Fo.unstable_now,L3=Fo.unstable_getCurrentPriorityLevel,y1=Fo.unstable_ImmediatePriority,oT=Fo.unstable_UserBlockingPriority,yg=Fo.unstable_NormalPriority,$3=Fo.unstable_LowPriority,aT=Fo.unstable_IdlePriority,Ry=null,Qa=null;function B3(e){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Ry,e,void 0,(e.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:N3,O3=Math.log,F3=Math.LN2;function N3(e){return e>>>=0,e===0?32:31-(O3(e)/F3|0)|0}var bm=64,wm=4194304;function Uh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vg(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,c=e.suspendedLanes,d=e.pingedLanes,m=r&268435455;if(m!==0){var l=m&~c;l!==0?o=Uh(l):(d&=m,d!==0&&(o=Uh(d)))}else m=r&~c,m!==0?o=Uh(m):d!==0&&(o=Uh(d));if(o===0)return 0;if(t!==0&&t!==o&&!(t&c)&&(c=o&-o,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Da(t),c=1<<r,o|=e[r],t&=~c;return o}function j3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V3(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var m=31-Da(d),l=1<<m,b=c[m];b===-1?(!(l&r)||l&o)&&(c[m]=j3(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function L_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sT(){var e=bm;return bm<<=1,!(bm&4194240)&&(bm=64),e}function z0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Wp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Da(t),e[t]=r}function U3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-Da(r),d=1<<c;t[c]=0,o[c]=-1,e[c]=-1,r&=~d}}function v1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Da(r),c=1<<o;c&t|e[o]&t&&(e[o]|=t),r&=~c}}var rn=0;function lT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cT,_1,uT,dT,hT,$_=!1,Sm=[],dl=null,hl=null,pl=null,gp=new Map,yp=new Map,il=[],H3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YS(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":gp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(t.pointerId)}}function Th(e,t,r,o,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},t!==null&&(t=qp(t),t!==null&&_1(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function W3(e,t,r,o,c){switch(t){case"focusin":return dl=Th(dl,e,t,r,o,c),!0;case"dragenter":return hl=Th(hl,e,t,r,o,c),!0;case"mouseover":return pl=Th(pl,e,t,r,o,c),!0;case"pointerover":var d=c.pointerId;return gp.set(d,Th(gp.get(d)||null,e,t,r,o,c)),!0;case"gotpointercapture":return d=c.pointerId,yp.set(d,Th(yp.get(d)||null,e,t,r,o,c)),!0}return!1}function pT(e){var t=nc(e.target);if(t!==null){var r=_c(t);if(r!==null){if(t=r.tag,t===13){if(t=tT(r),t!==null){e.blockedOn=t,hT(e.priority,function(){uT(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=B_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);M_=o,r.target.dispatchEvent(o),M_=null}else return t=qp(r),t!==null&&_1(t),e.blockedOn=r,!1;t.shift()}return!0}function QS(e,t,r){Gm(e)&&r.delete(t)}function G3(){$_=!1,dl!==null&&Gm(dl)&&(dl=null),hl!==null&&Gm(hl)&&(hl=null),pl!==null&&Gm(pl)&&(pl=null),gp.forEach(QS),yp.forEach(QS)}function Ph(e,t){e.blockedOn===t&&(e.blockedOn=null,$_||($_=!0,Fo.unstable_scheduleCallback(Fo.unstable_NormalPriority,G3)))}function vp(e){function t(c){return Ph(c,e)}if(0<Sm.length){Ph(Sm[0],e);for(var r=1;r<Sm.length;r++){var o=Sm[r];o.blockedOn===e&&(o.blockedOn=null)}}for(dl!==null&&Ph(dl,e),hl!==null&&Ph(hl,e),pl!==null&&Ph(pl,e),gp.forEach(t),yp.forEach(t),r=0;r<il.length;r++)o=il[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<il.length&&(r=il[0],r.blockedOn===null);)pT(r),r.blockedOn===null&&il.shift()}var Lu=Ls.ReactCurrentBatchConfig,_g=!0;function q3(e,t,r,o){var c=rn,d=Lu.transition;Lu.transition=null;try{rn=1,x1(e,t,r,o)}finally{rn=c,Lu.transition=d}}function Z3(e,t,r,o){var c=rn,d=Lu.transition;Lu.transition=null;try{rn=4,x1(e,t,r,o)}finally{rn=c,Lu.transition=d}}function x1(e,t,r,o){if(_g){var c=B_(e,t,r,o);if(c===null)N0(e,t,o,xg,r),YS(e,o);else if(W3(c,e,t,r,o))o.stopPropagation();else if(YS(e,o),t&4&&-1<H3.indexOf(e)){for(;c!==null;){var d=qp(c);if(d!==null&&cT(d),d=B_(e,t,r,o),d===null&&N0(e,t,o,xg,r),d===c)break;c=d}c!==null&&o.stopPropagation()}else N0(e,t,o,null,r)}}var xg=null;function B_(e,t,r,o){if(xg=null,e=g1(o),e=nc(e),e!==null)if(t=_c(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tT(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xg=e,null}function fT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L3()){case y1:return 1;case oT:return 4;case yg:case $3:return 16;case aT:return 536870912;default:return 16}default:return 16}}var ll=null,b1=null,qm=null;function mT(){if(qm)return qm;var e,t=b1,r=t.length,o,c="value"in ll?ll.value:ll.textContent,d=c.length;for(e=0;e<r&&t[e]===c[e];e++);var m=r-e;for(o=1;o<=m&&t[r-o]===c[d-o];o++);return qm=c.slice(e,1<o?1-o:void 0)}function Zm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cm(){return!0}function e2(){return!1}function Uo(e){function t(r,o,c,d,m){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Cm:e2,this.isPropagationStopped=e2,this}return $n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cm)},persist:function(){},isPersistent:Cm}),t}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w1=Uo(sd),Gp=$n({},sd,{view:0,detail:0}),K3=Uo(Gp),M0,D0,Eh,Ly=$n({},Gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Eh&&(Eh&&e.type==="mousemove"?(M0=e.screenX-Eh.screenX,D0=e.screenY-Eh.screenY):D0=M0=0,Eh=e),M0)},movementY:function(e){return"movementY"in e?e.movementY:D0}}),t2=Uo(Ly),X3=$n({},Ly,{dataTransfer:0}),J3=Uo(X3),Y3=$n({},Gp,{relatedTarget:0}),A0=Uo(Y3),Q3=$n({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),e$=Uo(Q3),t$=$n({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r$=Uo(t$),n$=$n({},sd,{data:0}),r2=Uo(n$),i$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=a$[e])?!!t[e]:!1}function S1(){return s$}var l$=$n({},Gp,{key:function(e){if(e.key){var t=i$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S1,charCode:function(e){return e.type==="keypress"?Zm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),c$=Uo(l$),u$=$n({},Ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n2=Uo(u$),d$=$n({},Gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S1}),h$=Uo(d$),p$=$n({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),f$=Uo(p$),m$=$n({},Ly,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g$=Uo(m$),y$=[9,13,27,32],C1=Es&&"CompositionEvent"in window,Jh=null;Es&&"documentMode"in document&&(Jh=document.documentMode);var v$=Es&&"TextEvent"in window&&!Jh,gT=Es&&(!C1||Jh&&8<Jh&&11>=Jh),i2=" ",o2=!1;function yT(e,t){switch(e){case"keyup":return y$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vu=!1;function _$(e,t){switch(e){case"compositionend":return vT(t);case"keypress":return t.which!==32?null:(o2=!0,i2);case"textInput":return e=t.data,e===i2&&o2?null:e;default:return null}}function x$(e,t){if(vu)return e==="compositionend"||!C1&&yT(e,t)?(e=mT(),qm=b1=ll=null,vu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gT&&t.locale!=="ko"?null:t.data;default:return null}}var b$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b$[e.type]:t==="textarea"}function _T(e,t,r,o){XI(o),t=bg(t,"onChange"),0<t.length&&(r=new w1("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Yh=null,_p=null;function w$(e){zT(e,0)}function $y(e){var t=bu(e);if(UI(t))return e}function S$(e,t){if(e==="change")return t}var xT=!1;if(Es){var R0;if(Es){var L0="oninput"in document;if(!L0){var s2=document.createElement("div");s2.setAttribute("oninput","return;"),L0=typeof s2.oninput=="function"}R0=L0}else R0=!1;xT=R0&&(!document.documentMode||9<document.documentMode)}function l2(){Yh&&(Yh.detachEvent("onpropertychange",bT),_p=Yh=null)}function bT(e){if(e.propertyName==="value"&&$y(_p)){var t=[];_T(t,_p,e,g1(e)),eT(w$,t)}}function C$(e,t,r){e==="focusin"?(l2(),Yh=t,_p=r,Yh.attachEvent("onpropertychange",bT)):e==="focusout"&&l2()}function k$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $y(_p)}function I$(e,t){if(e==="click")return $y(t)}function T$(e,t){if(e==="input"||e==="change")return $y(t)}function P$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var La=typeof Object.is=="function"?Object.is:P$;function xp(e,t){if(La(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!__.call(t,c)||!La(e[c],t[c]))return!1}return!0}function c2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u2(e,t){var r=c2(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=c2(r)}}function wT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ST(){for(var e=window,t=fg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=fg(e.document)}return t}function k1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function E$(e){var t=ST(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&wT(r.ownerDocument.documentElement,r)){if(o!==null&&k1(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!e.extend&&d>o&&(c=o,o=d,d=c),c=u2(r,d);var m=u2(r,o);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z$=Es&&"documentMode"in document&&11>=document.documentMode,_u=null,O_=null,Qh=null,F_=!1;function d2(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;F_||_u==null||_u!==fg(o)||(o=_u,"selectionStart"in o&&k1(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Qh&&xp(Qh,o)||(Qh=o,o=bg(O_,"onSelect"),0<o.length&&(t=new w1("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=_u)))}function km(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xu={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionend:km("Transition","TransitionEnd")},$0={},CT={};Es&&(CT=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function By(e){if($0[e])return $0[e];if(!xu[e])return e;var t=xu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in CT)return $0[e]=t[r];return e}var kT=By("animationend"),IT=By("animationiteration"),TT=By("animationstart"),PT=By("transitionend"),ET=new Map,h2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(e,t){ET.set(e,t),vc(t,[e])}for(var B0=0;B0<h2.length;B0++){var O0=h2[B0],M$=O0.toLowerCase(),D$=O0[0].toUpperCase()+O0.slice(1);Cl(M$,"on"+D$)}Cl(kT,"onAnimationEnd");Cl(IT,"onAnimationIteration");Cl(TT,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(PT,"onTransitionEnd");ju("onMouseEnter",["mouseout","mouseover"]);ju("onMouseLeave",["mouseout","mouseover"]);ju("onPointerEnter",["pointerout","pointerover"]);ju("onPointerLeave",["pointerout","pointerover"]);vc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vc("onBeforeInput",["compositionend","keypress","textInput","paste"]);vc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hh));function p2(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,M3(o,t,void 0,e),e.currentTarget=null}function zT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],c=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var m=o.length-1;0<=m;m--){var l=o[m],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;p2(c,l,w),d=b}else for(m=0;m<o.length;m++){if(l=o[m],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;p2(c,l,w),d=b}}}if(gg)throw e=R_,gg=!1,R_=null,e}function wn(e,t){var r=t[H_];r===void 0&&(r=t[H_]=new Set);var o=e+"__bubble";r.has(o)||(MT(t,e,2,!1),r.add(o))}function F0(e,t,r){var o=0;t&&(o|=4),MT(r,e,o,t)}var Im="_reactListening"+Math.random().toString(36).slice(2);function bp(e){if(!e[Im]){e[Im]=!0,OI.forEach(function(r){r!=="selectionchange"&&(A$.has(r)||F0(r,!1,e),F0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Im]||(t[Im]=!0,F0("selectionchange",!1,t))}}function MT(e,t,r,o){switch(fT(t)){case 1:var c=q3;break;case 4:c=Z3;break;default:c=x1}r=c.bind(null,t,r,e),c=void 0,!A_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function N0(e,t,r,o,c){var d=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var l=o.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(m===4)for(m=o.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;m=m.return}for(;l!==null;){if(m=nc(l),m===null)return;if(b=m.tag,b===5||b===6){o=d=m;continue e}l=l.parentNode}}o=o.return}eT(function(){var w=d,T=g1(r),E=[];e:{var M=ET.get(e);if(M!==void 0){var O=w1,U=e;switch(e){case"keypress":if(Zm(r)===0)break e;case"keydown":case"keyup":O=c$;break;case"focusin":U="focus",O=A0;break;case"focusout":U="blur",O=A0;break;case"beforeblur":case"afterblur":O=A0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=t2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=J3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=h$;break;case kT:case IT:case TT:O=e$;break;case PT:O=f$;break;case"scroll":O=K3;break;case"wheel":O=g$;break;case"copy":case"cut":case"paste":O=r$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=n2}var V=(t&4)!==0,K=!V&&e==="scroll",F=V?M!==null?M+"Capture":null:M;V=[];for(var R=w,L;R!==null;){L=R;var re=L.stateNode;if(L.tag===5&&re!==null&&(L=re,F!==null&&(re=mp(R,F),re!=null&&V.push(wp(R,re,L)))),K)break;R=R.return}0<V.length&&(M=new O(M,U,null,r,T),E.push({event:M,listeners:V}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",M&&r!==M_&&(U=r.relatedTarget||r.fromElement)&&(nc(U)||U[zs]))break e;if((O||M)&&(M=T.window===T?T:(M=T.ownerDocument)?M.defaultView||M.parentWindow:window,O?(U=r.relatedTarget||r.toElement,O=w,U=U?nc(U):null,U!==null&&(K=_c(U),U!==K||U.tag!==5&&U.tag!==6)&&(U=null)):(O=null,U=w),O!==U)){if(V=t2,re="onMouseLeave",F="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(V=n2,re="onPointerLeave",F="onPointerEnter",R="pointer"),K=O==null?M:bu(O),L=U==null?M:bu(U),M=new V(re,R+"leave",O,r,T),M.target=K,M.relatedTarget=L,re=null,nc(T)===w&&(V=new V(F,R+"enter",U,r,T),V.target=L,V.relatedTarget=K,re=V),K=re,O&&U)t:{for(V=O,F=U,R=0,L=V;L;L=au(L))R++;for(L=0,re=F;re;re=au(re))L++;for(;0<R-L;)V=au(V),R--;for(;0<L-R;)F=au(F),L--;for(;R--;){if(V===F||F!==null&&V===F.alternate)break t;V=au(V),F=au(F)}V=null}else V=null;O!==null&&f2(E,M,O,V,!1),U!==null&&K!==null&&f2(E,K,U,V,!0)}}e:{if(M=w?bu(w):window,O=M.nodeName&&M.nodeName.toLowerCase(),O==="select"||O==="input"&&M.type==="file")var J=S$;else if(a2(M))if(xT)J=T$;else{J=k$;var se=C$}else(O=M.nodeName)&&O.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(J=I$);if(J&&(J=J(e,w))){_T(E,J,r,T);break e}se&&se(e,M,w),e==="focusout"&&(se=M._wrapperState)&&se.controlled&&M.type==="number"&&I_(M,"number",M.value)}switch(se=w?bu(w):window,e){case"focusin":(a2(se)||se.contentEditable==="true")&&(_u=se,O_=w,Qh=null);break;case"focusout":Qh=O_=_u=null;break;case"mousedown":F_=!0;break;case"contextmenu":case"mouseup":case"dragend":F_=!1,d2(E,r,T);break;case"selectionchange":if(z$)break;case"keydown":case"keyup":d2(E,r,T)}var ie;if(C1)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else vu?yT(e,r)&&(Z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Z="onCompositionStart");Z&&(gT&&r.locale!=="ko"&&(vu||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&vu&&(ie=mT()):(ll=T,b1="value"in ll?ll.value:ll.textContent,vu=!0)),se=bg(w,Z),0<se.length&&(Z=new r2(Z,e,null,r,T),E.push({event:Z,listeners:se}),ie?Z.data=ie:(ie=vT(r),ie!==null&&(Z.data=ie)))),(ie=v$?_$(e,r):x$(e,r))&&(w=bg(w,"onBeforeInput"),0<w.length&&(T=new r2("onBeforeInput","beforeinput",null,r,T),E.push({event:T,listeners:w}),T.data=ie))}zT(E,t)})}function wp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function bg(e,t){for(var r=t+"Capture",o=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=mp(e,r),d!=null&&o.unshift(wp(e,d,c)),d=mp(e,t),d!=null&&o.push(wp(e,d,c))),e=e.return}return o}function au(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f2(e,t,r,o,c){for(var d=t._reactName,m=[];r!==null&&r!==o;){var l=r,b=l.alternate,w=l.stateNode;if(b!==null&&b===o)break;l.tag===5&&w!==null&&(l=w,c?(b=mp(r,d),b!=null&&m.unshift(wp(r,b,l))):c||(b=mp(r,d),b!=null&&m.push(wp(r,b,l)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var R$=/\r\n?/g,L$=/\u0000|\uFFFD/g;function m2(e){return(typeof e=="string"?e:""+e).replace(R$,`
`).replace(L$,"")}function Tm(e,t,r){if(t=m2(t),m2(e)!==t&&r)throw Error(mt(425))}function wg(){}var N_=null,j_=null;function V_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U_=typeof setTimeout=="function"?setTimeout:void 0,$$=typeof clearTimeout=="function"?clearTimeout:void 0,g2=typeof Promise=="function"?Promise:void 0,B$=typeof queueMicrotask=="function"?queueMicrotask:typeof g2<"u"?function(e){return g2.resolve(null).then(e).catch(O$)}:U_;function O$(e){setTimeout(function(){throw e})}function j0(e,t){var r=t,o=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(o===0){e.removeChild(c),vp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=c}while(r);vp(t)}function fl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function y2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ld=Math.random().toString(36).slice(2),Xa="__reactFiber$"+ld,Sp="__reactProps$"+ld,zs="__reactContainer$"+ld,H_="__reactEvents$"+ld,F$="__reactListeners$"+ld,N$="__reactHandles$"+ld;function nc(e){var t=e[Xa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zs]||r[Xa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=y2(e);e!==null;){if(r=e[Xa])return r;e=y2(e)}return t}e=r,r=e.parentNode}return null}function qp(e){return e=e[Xa]||e[zs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function Oy(e){return e[Sp]||null}var W_=[],wu=-1;function kl(e){return{current:e}}function Cn(e){0>wu||(e.current=W_[wu],W_[wu]=null,wu--)}function yn(e,t){wu++,W_[wu]=e.current,e.current=t}var wl={},Zi=kl(wl),vo=kl(!1),hc=wl;function Vu(e,t){var r=e.type.contextTypes;if(!r)return wl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function _o(e){return e=e.childContextTypes,e!=null}function Sg(){Cn(vo),Cn(Zi)}function v2(e,t,r){if(Zi.current!==wl)throw Error(mt(168));yn(Zi,t),yn(vo,r)}function DT(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var c in o)if(!(c in t))throw Error(mt(108,C3(e)||"Unknown",c));return $n({},r,o)}function Cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wl,hc=Zi.current,yn(Zi,e),yn(vo,vo.current),!0}function _2(e,t,r){var o=e.stateNode;if(!o)throw Error(mt(169));r?(e=DT(e,t,hc),o.__reactInternalMemoizedMergedChildContext=e,Cn(vo),Cn(Zi),yn(Zi,e)):Cn(vo),yn(vo,r)}var bs=null,Fy=!1,V0=!1;function AT(e){bs===null?bs=[e]:bs.push(e)}function j$(e){Fy=!0,AT(e)}function Il(){if(!V0&&bs!==null){V0=!0;var e=0,t=rn;try{var r=bs;for(rn=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}bs=null,Fy=!1}catch(c){throw bs!==null&&(bs=bs.slice(e+1)),iT(y1,Il),c}finally{rn=t,V0=!1}}return null}var Su=[],Cu=0,kg=null,Ig=0,ta=[],ra=0,pc=null,Ss=1,Cs="";function Yl(e,t){Su[Cu++]=Ig,Su[Cu++]=kg,kg=e,Ig=t}function RT(e,t,r){ta[ra++]=Ss,ta[ra++]=Cs,ta[ra++]=pc,pc=e;var o=Ss;e=Cs;var c=32-Da(o)-1;o&=~(1<<c),r+=1;var d=32-Da(t)+c;if(30<d){var m=c-c%5;d=(o&(1<<m)-1).toString(32),o>>=m,c-=m,Ss=1<<32-Da(t)+c|r<<c|o,Cs=d+e}else Ss=1<<d|r<<c|o,Cs=e}function I1(e){e.return!==null&&(Yl(e,1),RT(e,1,0))}function T1(e){for(;e===kg;)kg=Su[--Cu],Su[Cu]=null,Ig=Su[--Cu],Su[Cu]=null;for(;e===pc;)pc=ta[--ra],ta[ra]=null,Cs=ta[--ra],ta[ra]=null,Ss=ta[--ra],ta[ra]=null}var Oo=null,$o=null,En=!1,za=null;function LT(e,t){var r=na(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function x2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Oo=e,$o=fl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Oo=e,$o=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pc!==null?{id:Ss,overflow:Cs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=na(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Oo=e,$o=null,!0):!1;default:return!1}}function G_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function q_(e){if(En){var t=$o;if(t){var r=t;if(!x2(e,t)){if(G_(e))throw Error(mt(418));t=fl(r.nextSibling);var o=Oo;t&&x2(e,t)?LT(o,r):(e.flags=e.flags&-4097|2,En=!1,Oo=e)}}else{if(G_(e))throw Error(mt(418));e.flags=e.flags&-4097|2,En=!1,Oo=e}}}function b2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Oo=e}function Pm(e){if(e!==Oo)return!1;if(!En)return b2(e),En=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!V_(e.type,e.memoizedProps)),t&&(t=$o)){if(G_(e))throw $T(),Error(mt(418));for(;t;)LT(e,t),t=fl(t.nextSibling)}if(b2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){$o=fl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}$o=null}}else $o=Oo?fl(e.stateNode.nextSibling):null;return!0}function $T(){for(var e=$o;e;)e=fl(e.nextSibling)}function Uu(){$o=Oo=null,En=!1}function P1(e){za===null?za=[e]:za.push(e)}var V$=Ls.ReactCurrentBatchConfig;function zh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(mt(309));var o=r.stateNode}if(!o)throw Error(mt(147,e));var c=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(m){var l=c.refs;m===null?delete l[d]:l[d]=m},t._stringRef=d,t)}if(typeof e!="string")throw Error(mt(284));if(!r._owner)throw Error(mt(290,e))}return e}function Em(e,t){throw e=Object.prototype.toString.call(t),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function w2(e){var t=e._init;return t(e._payload)}function BT(e){function t(F,R){if(e){var L=F.deletions;L===null?(F.deletions=[R],F.flags|=16):L.push(R)}}function r(F,R){if(!e)return null;for(;R!==null;)t(F,R),R=R.sibling;return null}function o(F,R){for(F=new Map;R!==null;)R.key!==null?F.set(R.key,R):F.set(R.index,R),R=R.sibling;return F}function c(F,R){return F=vl(F,R),F.index=0,F.sibling=null,F}function d(F,R,L){return F.index=L,e?(L=F.alternate,L!==null?(L=L.index,L<R?(F.flags|=2,R):L):(F.flags|=2,R)):(F.flags|=1048576,R)}function m(F){return e&&F.alternate===null&&(F.flags|=2),F}function l(F,R,L,re){return R===null||R.tag!==6?(R=K0(L,F.mode,re),R.return=F,R):(R=c(R,L),R.return=F,R)}function b(F,R,L,re){var J=L.type;return J===yu?T(F,R,L.props.children,re,L.key):R!==null&&(R.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===rl&&w2(J)===R.type)?(re=c(R,L.props),re.ref=zh(F,R,L),re.return=F,re):(re=tg(L.type,L.key,L.props,null,F.mode,re),re.ref=zh(F,R,L),re.return=F,re)}function w(F,R,L,re){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?(R=X0(L,F.mode,re),R.return=F,R):(R=c(R,L.children||[]),R.return=F,R)}function T(F,R,L,re,J){return R===null||R.tag!==7?(R=lc(L,F.mode,re,J),R.return=F,R):(R=c(R,L),R.return=F,R)}function E(F,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return R=K0(""+R,F.mode,L),R.return=F,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case vm:return L=tg(R.type,R.key,R.props,null,F.mode,L),L.ref=zh(F,null,R),L.return=F,L;case gu:return R=X0(R,F.mode,L),R.return=F,R;case rl:var re=R._init;return E(F,re(R._payload),L)}if(Vh(R)||kh(R))return R=lc(R,F.mode,L,null),R.return=F,R;Em(F,R)}return null}function M(F,R,L,re){var J=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return J!==null?null:l(F,R,""+L,re);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case vm:return L.key===J?b(F,R,L,re):null;case gu:return L.key===J?w(F,R,L,re):null;case rl:return J=L._init,M(F,R,J(L._payload),re)}if(Vh(L)||kh(L))return J!==null?null:T(F,R,L,re,null);Em(F,L)}return null}function O(F,R,L,re,J){if(typeof re=="string"&&re!==""||typeof re=="number")return F=F.get(L)||null,l(R,F,""+re,J);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case vm:return F=F.get(re.key===null?L:re.key)||null,b(R,F,re,J);case gu:return F=F.get(re.key===null?L:re.key)||null,w(R,F,re,J);case rl:var se=re._init;return O(F,R,L,se(re._payload),J)}if(Vh(re)||kh(re))return F=F.get(L)||null,T(R,F,re,J,null);Em(R,re)}return null}function U(F,R,L,re){for(var J=null,se=null,ie=R,Z=R=0,Ce=null;ie!==null&&Z<L.length;Z++){ie.index>Z?(Ce=ie,ie=null):Ce=ie.sibling;var _e=M(F,ie,L[Z],re);if(_e===null){ie===null&&(ie=Ce);break}e&&ie&&_e.alternate===null&&t(F,ie),R=d(_e,R,Z),se===null?J=_e:se.sibling=_e,se=_e,ie=Ce}if(Z===L.length)return r(F,ie),En&&Yl(F,Z),J;if(ie===null){for(;Z<L.length;Z++)ie=E(F,L[Z],re),ie!==null&&(R=d(ie,R,Z),se===null?J=ie:se.sibling=ie,se=ie);return En&&Yl(F,Z),J}for(ie=o(F,ie);Z<L.length;Z++)Ce=O(ie,F,Z,L[Z],re),Ce!==null&&(e&&Ce.alternate!==null&&ie.delete(Ce.key===null?Z:Ce.key),R=d(Ce,R,Z),se===null?J=Ce:se.sibling=Ce,se=Ce);return e&&ie.forEach(function(ke){return t(F,ke)}),En&&Yl(F,Z),J}function V(F,R,L,re){var J=kh(L);if(typeof J!="function")throw Error(mt(150));if(L=J.call(L),L==null)throw Error(mt(151));for(var se=J=null,ie=R,Z=R=0,Ce=null,_e=L.next();ie!==null&&!_e.done;Z++,_e=L.next()){ie.index>Z?(Ce=ie,ie=null):Ce=ie.sibling;var ke=M(F,ie,_e.value,re);if(ke===null){ie===null&&(ie=Ce);break}e&&ie&&ke.alternate===null&&t(F,ie),R=d(ke,R,Z),se===null?J=ke:se.sibling=ke,se=ke,ie=Ce}if(_e.done)return r(F,ie),En&&Yl(F,Z),J;if(ie===null){for(;!_e.done;Z++,_e=L.next())_e=E(F,_e.value,re),_e!==null&&(R=d(_e,R,Z),se===null?J=_e:se.sibling=_e,se=_e);return En&&Yl(F,Z),J}for(ie=o(F,ie);!_e.done;Z++,_e=L.next())_e=O(ie,F,Z,_e.value,re),_e!==null&&(e&&_e.alternate!==null&&ie.delete(_e.key===null?Z:_e.key),R=d(_e,R,Z),se===null?J=_e:se.sibling=_e,se=_e);return e&&ie.forEach(function(ze){return t(F,ze)}),En&&Yl(F,Z),J}function K(F,R,L,re){if(typeof L=="object"&&L!==null&&L.type===yu&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case vm:e:{for(var J=L.key,se=R;se!==null;){if(se.key===J){if(J=L.type,J===yu){if(se.tag===7){r(F,se.sibling),R=c(se,L.props.children),R.return=F,F=R;break e}}else if(se.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===rl&&w2(J)===se.type){r(F,se.sibling),R=c(se,L.props),R.ref=zh(F,se,L),R.return=F,F=R;break e}r(F,se);break}else t(F,se);se=se.sibling}L.type===yu?(R=lc(L.props.children,F.mode,re,L.key),R.return=F,F=R):(re=tg(L.type,L.key,L.props,null,F.mode,re),re.ref=zh(F,R,L),re.return=F,F=re)}return m(F);case gu:e:{for(se=L.key;R!==null;){if(R.key===se)if(R.tag===4&&R.stateNode.containerInfo===L.containerInfo&&R.stateNode.implementation===L.implementation){r(F,R.sibling),R=c(R,L.children||[]),R.return=F,F=R;break e}else{r(F,R);break}else t(F,R);R=R.sibling}R=X0(L,F.mode,re),R.return=F,F=R}return m(F);case rl:return se=L._init,K(F,R,se(L._payload),re)}if(Vh(L))return U(F,R,L,re);if(kh(L))return V(F,R,L,re);Em(F,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,R!==null&&R.tag===6?(r(F,R.sibling),R=c(R,L),R.return=F,F=R):(r(F,R),R=K0(L,F.mode,re),R.return=F,F=R),m(F)):r(F,R)}return K}var Hu=BT(!0),OT=BT(!1),Tg=kl(null),Pg=null,ku=null,E1=null;function z1(){E1=ku=Pg=null}function M1(e){var t=Tg.current;Cn(Tg),e._currentValue=t}function Z_(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function $u(e,t){Pg=e,E1=ku=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yo=!0),e.firstContext=null)}function aa(e){var t=e._currentValue;if(E1!==e)if(e={context:e,memoizedValue:t,next:null},ku===null){if(Pg===null)throw Error(mt(308));ku=e,Pg.dependencies={lanes:0,firstContext:e}}else ku=ku.next=e;return t}var ic=null;function D1(e){ic===null?ic=[e]:ic.push(e)}function FT(e,t,r,o){var c=t.interleaved;return c===null?(r.next=r,D1(t)):(r.next=c.next,c.next=r),t.interleaved=r,Ms(e,o)}function Ms(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nl=!1;function A1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ml(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Gr&2){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,Ms(e,r)}return c=o.interleaved,c===null?(t.next=t,D1(o)):(t.next=c.next,c.next=t),o.interleaved=t,Ms(e,r)}function Km(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,v1(e,r)}}function S2(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=m:d=d.next=m,r=r.next}while(r!==null);d===null?c=d=t:d=d.next=t}else c=d=t;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Eg(e,t,r,o){var c=e.updateQueue;nl=!1;var d=c.firstBaseUpdate,m=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,m===null?d=w:m.next=w,m=b;var T=e.alternate;T!==null&&(T=T.updateQueue,l=T.lastBaseUpdate,l!==m&&(l===null?T.firstBaseUpdate=w:l.next=w,T.lastBaseUpdate=b))}if(d!==null){var E=c.baseState;m=0,T=w=b=null,l=d;do{var M=l.lane,O=l.eventTime;if((o&M)===M){T!==null&&(T=T.next={eventTime:O,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var U=e,V=l;switch(M=t,O=r,V.tag){case 1:if(U=V.payload,typeof U=="function"){E=U.call(O,E,M);break e}E=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=V.payload,M=typeof U=="function"?U.call(O,E,M):U,M==null)break e;E=$n({},E,M);break e;case 2:nl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[l]:M.push(l))}else O={eventTime:O,lane:M,tag:l.tag,payload:l.payload,callback:l.callback,next:null},T===null?(w=T=O,b=E):T=T.next=O,m|=M;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;M=l,l=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(T===null&&(b=E),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=T,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);mc|=m,e.lanes=m,e.memoizedState=E}}function C2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=r,typeof c!="function")throw Error(mt(191,c));c.call(o)}}}var Zp={},es=kl(Zp),Cp=kl(Zp),kp=kl(Zp);function oc(e){if(e===Zp)throw Error(mt(174));return e}function R1(e,t){switch(yn(kp,t),yn(Cp,e),yn(es,Zp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:P_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=P_(t,e)}Cn(es),yn(es,t)}function Wu(){Cn(es),Cn(Cp),Cn(kp)}function jT(e){oc(kp.current);var t=oc(es.current),r=P_(t,e.type);t!==r&&(yn(Cp,e),yn(es,r))}function L1(e){Cp.current===e&&(Cn(es),Cn(Cp))}var Rn=kl(0);function zg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var U0=[];function $1(){for(var e=0;e<U0.length;e++)U0[e]._workInProgressVersionPrimary=null;U0.length=0}var Xm=Ls.ReactCurrentDispatcher,H0=Ls.ReactCurrentBatchConfig,fc=0,Ln=null,ci=null,yi=null,Mg=!1,ep=!1,Ip=0,U$=0;function Ui(){throw Error(mt(321))}function B1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!La(e[r],t[r]))return!1;return!0}function O1(e,t,r,o,c,d){if(fc=d,Ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xm.current=e===null||e.memoizedState===null?q$:Z$,e=r(o,c),ep){d=0;do{if(ep=!1,Ip=0,25<=d)throw Error(mt(301));d+=1,yi=ci=null,t.updateQueue=null,Xm.current=K$,e=r(o,c)}while(ep)}if(Xm.current=Dg,t=ci!==null&&ci.next!==null,fc=0,yi=ci=Ln=null,Mg=!1,t)throw Error(mt(300));return e}function F1(){var e=Ip!==0;return Ip=0,e}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Ln.memoizedState=yi=e:yi=yi.next=e,yi}function sa(){if(ci===null){var e=Ln.alternate;e=e!==null?e.memoizedState:null}else e=ci.next;var t=yi===null?Ln.memoizedState:yi.next;if(t!==null)yi=t,ci=e;else{if(e===null)throw Error(mt(310));ci=e,e={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},yi===null?Ln.memoizedState=yi=e:yi=yi.next=e}return yi}function Tp(e,t){return typeof t=="function"?t(e):t}function W0(e){var t=sa(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var o=ci,c=o.baseQueue,d=r.pending;if(d!==null){if(c!==null){var m=c.next;c.next=d.next,d.next=m}o.baseQueue=c=d,r.pending=null}if(c!==null){d=c.next,o=o.baseState;var l=m=null,b=null,w=d;do{var T=w.lane;if((fc&T)===T)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var E={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=E,m=o):b=b.next=E,Ln.lanes|=T,mc|=T}w=w.next}while(w!==null&&w!==d);b===null?m=o:b.next=l,La(o,t.memoizedState)||(yo=!0),t.memoizedState=o,t.baseState=m,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){c=e;do d=c.lane,Ln.lanes|=d,mc|=d,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function G0(e){var t=sa(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var o=r.dispatch,c=r.pending,d=t.memoizedState;if(c!==null){r.pending=null;var m=c=c.next;do d=e(d,m.action),m=m.next;while(m!==c);La(d,t.memoizedState)||(yo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function VT(){}function UT(e,t){var r=Ln,o=sa(),c=t(),d=!La(o.memoizedState,c);if(d&&(o.memoizedState=c,yo=!0),o=o.queue,N1(GT.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||yi!==null&&yi.memoizedState.tag&1){if(r.flags|=2048,Pp(9,WT.bind(null,r,o,c,t),void 0,null),vi===null)throw Error(mt(349));fc&30||HT(r,t,c)}return c}function HT(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function WT(e,t,r,o){t.value=r,t.getSnapshot=o,qT(t)&&ZT(e)}function GT(e,t,r){return r(function(){qT(t)&&ZT(e)})}function qT(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!La(e,r)}catch{return!0}}function ZT(e){var t=Ms(e,1);t!==null&&Aa(t,e,1,-1)}function k2(e){var t=qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:e},t.queue=e,e=e.dispatch=G$.bind(null,Ln,e),[t.memoizedState,e]}function Pp(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function KT(){return sa().memoizedState}function Jm(e,t,r,o){var c=qa();Ln.flags|=e,c.memoizedState=Pp(1|t,r,void 0,o===void 0?null:o)}function Ny(e,t,r,o){var c=sa();o=o===void 0?null:o;var d=void 0;if(ci!==null){var m=ci.memoizedState;if(d=m.destroy,o!==null&&B1(o,m.deps)){c.memoizedState=Pp(t,r,d,o);return}}Ln.flags|=e,c.memoizedState=Pp(1|t,r,d,o)}function I2(e,t){return Jm(8390656,8,e,t)}function N1(e,t){return Ny(2048,8,e,t)}function XT(e,t){return Ny(4,2,e,t)}function JT(e,t){return Ny(4,4,e,t)}function YT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function QT(e,t,r){return r=r!=null?r.concat([e]):null,Ny(4,4,YT.bind(null,t,e),r)}function j1(){}function eP(e,t){var r=sa();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&B1(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function tP(e,t){var r=sa();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&B1(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function rP(e,t,r){return fc&21?(La(r,t)||(r=sT(),Ln.lanes|=r,mc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=r)}function H$(e,t){var r=rn;rn=r!==0&&4>r?r:4,e(!0);var o=H0.transition;H0.transition={};try{e(!1),t()}finally{rn=r,H0.transition=o}}function nP(){return sa().memoizedState}function W$(e,t,r){var o=yl(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},iP(e))oP(t,r);else if(r=FT(e,t,r,o),r!==null){var c=ao();Aa(r,e,o,c),aP(r,t,o)}}function G$(e,t,r){var o=yl(e),c={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(iP(e))oP(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,l=d(m,r);if(c.hasEagerState=!0,c.eagerState=l,La(l,m)){var b=t.interleaved;b===null?(c.next=c,D1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}r=FT(e,t,c,o),r!==null&&(c=ao(),Aa(r,e,o,c),aP(r,t,o))}}function iP(e){var t=e.alternate;return e===Ln||t!==null&&t===Ln}function oP(e,t){ep=Mg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function aP(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,v1(e,r)}}var Dg={readContext:aa,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},q$={readContext:aa,useCallback:function(e,t){return qa().memoizedState=[e,t===void 0?null:t],e},useContext:aa,useEffect:I2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Jm(4194308,4,YT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Jm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jm(4,2,e,t)},useMemo:function(e,t){var r=qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=qa();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=W$.bind(null,Ln,e),[o.memoizedState,e]},useRef:function(e){var t=qa();return e={current:e},t.memoizedState=e},useState:k2,useDebugValue:j1,useDeferredValue:function(e){return qa().memoizedState=e},useTransition:function(){var e=k2(!1),t=e[0];return e=H$.bind(null,e[1]),qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=Ln,c=qa();if(En){if(r===void 0)throw Error(mt(407));r=r()}else{if(r=t(),vi===null)throw Error(mt(349));fc&30||HT(o,t,r)}c.memoizedState=r;var d={value:r,getSnapshot:t};return c.queue=d,I2(GT.bind(null,o,d,e),[e]),o.flags|=2048,Pp(9,WT.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=qa(),t=vi.identifierPrefix;if(En){var r=Cs,o=Ss;r=(o&~(1<<32-Da(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ip++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=U$++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Z$={readContext:aa,useCallback:eP,useContext:aa,useEffect:N1,useImperativeHandle:QT,useInsertionEffect:XT,useLayoutEffect:JT,useMemo:tP,useReducer:W0,useRef:KT,useState:function(){return W0(Tp)},useDebugValue:j1,useDeferredValue:function(e){var t=sa();return rP(t,ci.memoizedState,e)},useTransition:function(){var e=W0(Tp)[0],t=sa().memoizedState;return[e,t]},useMutableSource:VT,useSyncExternalStore:UT,useId:nP,unstable_isNewReconciler:!1},K$={readContext:aa,useCallback:eP,useContext:aa,useEffect:N1,useImperativeHandle:QT,useInsertionEffect:XT,useLayoutEffect:JT,useMemo:tP,useReducer:G0,useRef:KT,useState:function(){return G0(Tp)},useDebugValue:j1,useDeferredValue:function(e){var t=sa();return ci===null?t.memoizedState=e:rP(t,ci.memoizedState,e)},useTransition:function(){var e=G0(Tp)[0],t=sa().memoizedState;return[e,t]},useMutableSource:VT,useSyncExternalStore:UT,useId:nP,unstable_isNewReconciler:!1};function Ta(e,t){if(e&&e.defaultProps){t=$n({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function K_(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:$n({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var jy={isMounted:function(e){return(e=e._reactInternals)?_c(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=ao(),c=yl(e),d=ks(o,c);d.payload=t,r!=null&&(d.callback=r),t=ml(e,d,c),t!==null&&(Aa(t,e,c,o),Km(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=ao(),c=yl(e),d=ks(o,c);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=ml(e,d,c),t!==null&&(Aa(t,e,c,o),Km(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ao(),o=yl(e),c=ks(r,o);c.tag=2,t!=null&&(c.callback=t),t=ml(e,c,o),t!==null&&(Aa(t,e,o,r),Km(t,e,o))}};function T2(e,t,r,o,c,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,m):t.prototype&&t.prototype.isPureReactComponent?!xp(r,o)||!xp(c,d):!0}function sP(e,t,r){var o=!1,c=wl,d=t.contextType;return typeof d=="object"&&d!==null?d=aa(d):(c=_o(t)?hc:Zi.current,o=t.contextTypes,d=(o=o!=null)?Vu(e,c):wl),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jy,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function P2(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&jy.enqueueReplaceState(t,t.state,null)}function X_(e,t,r,o){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs={},A1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=aa(d):(d=_o(t)?hc:Zi.current,c.context=Vu(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(K_(e,t,d,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&jy.enqueueReplaceState(c,c.state,null),Eg(e,r,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Gu(e,t){try{var r="",o=t;do r+=S3(o),o=o.return;while(o);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function q0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function J_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var X$=typeof WeakMap=="function"?WeakMap:Map;function lP(e,t,r){r=ks(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Rg||(Rg=!0,sx=o),J_(e,t)},r}function cP(e,t,r){r=ks(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;r.payload=function(){return o(c)},r.callback=function(){J_(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){J_(e,t),typeof o!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function E2(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new X$;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(r)||(c.add(r),e=u4.bind(null,e,t,r),t.then(e,e))}function z2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function M2(e,t,r,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ks(-1,1),t.tag=2,ml(r,t,1))),r.lanes|=1),e)}var J$=Ls.ReactCurrentOwner,yo=!1;function oo(e,t,r,o){t.child=e===null?OT(t,null,r,o):Hu(t,e.child,r,o)}function D2(e,t,r,o,c){r=r.render;var d=t.ref;return $u(t,c),o=O1(e,t,r,o,d,c),r=F1(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ds(e,t,c)):(En&&r&&I1(t),t.flags|=1,oo(e,t,o,c),t.child)}function A2(e,t,r,o,c){if(e===null){var d=r.type;return typeof d=="function"&&!K1(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,uP(e,t,d,o,c)):(e=tg(r.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var m=d.memoizedProps;if(r=r.compare,r=r!==null?r:xp,r(m,o)&&e.ref===t.ref)return Ds(e,t,c)}return t.flags|=1,e=vl(d,o),e.ref=t.ref,e.return=t,t.child=e}function uP(e,t,r,o,c){if(e!==null){var d=e.memoizedProps;if(xp(d,o)&&e.ref===t.ref)if(yo=!1,t.pendingProps=o=d,(e.lanes&c)!==0)e.flags&131072&&(yo=!0);else return t.lanes=e.lanes,Ds(e,t,c)}return Y_(e,t,r,o,c)}function dP(e,t,r){var o=t.pendingProps,c=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Tu,zo),zo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yn(Tu,zo),zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,yn(Tu,zo),zo|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,yn(Tu,zo),zo|=o;return oo(e,t,c,r),t.child}function hP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Y_(e,t,r,o,c){var d=_o(r)?hc:Zi.current;return d=Vu(t,d),$u(t,c),r=O1(e,t,r,o,d,c),o=F1(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ds(e,t,c)):(En&&o&&I1(t),t.flags|=1,oo(e,t,r,c),t.child)}function R2(e,t,r,o,c){if(_o(r)){var d=!0;Cg(t)}else d=!1;if($u(t,c),t.stateNode===null)Ym(e,t),sP(t,r,o),X_(t,r,o,c),o=!0;else if(e===null){var m=t.stateNode,l=t.memoizedProps;m.props=l;var b=m.context,w=r.contextType;typeof w=="object"&&w!==null?w=aa(w):(w=_o(r)?hc:Zi.current,w=Vu(t,w));var T=r.getDerivedStateFromProps,E=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function";E||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==o||b!==w)&&P2(t,m,o,w),nl=!1;var M=t.memoizedState;m.state=M,Eg(t,o,m,c),b=t.memoizedState,l!==o||M!==b||vo.current||nl?(typeof T=="function"&&(K_(t,r,T,o),b=t.memoizedState),(l=nl||T2(t,r,l,o,M,b,w))?(E||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),m.props=o,m.state=b,m.context=w,o=l):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,NT(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Ta(t.type,l),m.props=w,E=t.pendingProps,M=m.context,b=r.contextType,typeof b=="object"&&b!==null?b=aa(b):(b=_o(r)?hc:Zi.current,b=Vu(t,b));var O=r.getDerivedStateFromProps;(T=typeof O=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==E||M!==b)&&P2(t,m,o,b),nl=!1,M=t.memoizedState,m.state=M,Eg(t,o,m,c);var U=t.memoizedState;l!==E||M!==U||vo.current||nl?(typeof O=="function"&&(K_(t,r,O,o),U=t.memoizedState),(w=nl||T2(t,r,w,o,M,U,b)||!1)?(T||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,U,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,U,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=U),m.props=o,m.state=U,m.context=b,o=w):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),o=!1)}return Q_(e,t,r,o,d,c)}function Q_(e,t,r,o,c,d){hP(e,t);var m=(t.flags&128)!==0;if(!o&&!m)return c&&_2(t,r,!1),Ds(e,t,d);o=t.stateNode,J$.current=t;var l=m&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=Hu(t,e.child,null,d),t.child=Hu(t,null,l,d)):oo(e,t,l,d),t.memoizedState=o.state,c&&_2(t,r,!0),t.child}function pP(e){var t=e.stateNode;t.pendingContext?v2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&v2(e,t.context,!1),R1(e,t.containerInfo)}function L2(e,t,r,o,c){return Uu(),P1(c),t.flags|=256,oo(e,t,r,o),t.child}var ex={dehydrated:null,treeContext:null,retryLane:0};function tx(e){return{baseLanes:e,cachePool:null,transitions:null}}function fP(e,t,r){var o=t.pendingProps,c=Rn.current,d=!1,m=(t.flags&128)!==0,l;if((l=m)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),yn(Rn,c&1),e===null)return q_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=o.children,e=o.fallback,d?(o=t.mode,d=t.child,m={mode:"hidden",children:m},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=m):d=Hy(m,o,0,null),e=lc(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=tx(r),t.memoizedState=ex,e):V1(t,m));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return Y$(e,t,m,o,l,c,r);if(d){d=o.fallback,m=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:o.children};return!(m&1)&&t.child!==c?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=vl(c,b),o.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=vl(l,d):(d=lc(d,m,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,m=e.child.memoizedState,m=m===null?tx(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},d.memoizedState=m,d.childLanes=e.childLanes&~r,t.memoizedState=ex,o}return d=e.child,e=d.sibling,o=vl(d,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function V1(e,t){return t=Hy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zm(e,t,r,o){return o!==null&&P1(o),Hu(t,e.child,null,r),e=V1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Y$(e,t,r,o,c,d,m){if(r)return t.flags&256?(t.flags&=-257,o=q0(Error(mt(422))),zm(e,t,m,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,c=t.mode,o=Hy({mode:"visible",children:o.children},c,0,null),d=lc(d,c,m,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,t.mode&1&&Hu(t,e.child,null,m),t.child.memoizedState=tx(m),t.memoizedState=ex,d);if(!(t.mode&1))return zm(e,t,m,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var l=o.dgst;return o=l,d=Error(mt(419)),o=q0(d,o,void 0),zm(e,t,m,o)}if(l=(m&e.childLanes)!==0,yo||l){if(o=vi,o!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|m)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ms(e,c),Aa(o,e,c,-1))}return Z1(),o=q0(Error(mt(421))),zm(e,t,m,o)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=d4.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,$o=fl(c.nextSibling),Oo=t,En=!0,za=null,e!==null&&(ta[ra++]=Ss,ta[ra++]=Cs,ta[ra++]=pc,Ss=e.id,Cs=e.overflow,pc=t),t=V1(t,o.children),t.flags|=4096,t)}function $2(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Z_(e.return,t,r)}function Z0(e,t,r,o,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=c)}function mP(e,t,r){var o=t.pendingProps,c=o.revealOrder,d=o.tail;if(oo(e,t,o.children,r),o=Rn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$2(e,r,t);else if(e.tag===19)$2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(yn(Rn,o),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&zg(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Z0(t,!1,c,r,d);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&zg(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Z0(t,!0,r,null,d);break;case"together":Z0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ym(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ds(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,r=vl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Q$(e,t,r){switch(t.tag){case 3:pP(t),Uu();break;case 5:jT(t);break;case 1:_o(t.type)&&Cg(t);break;case 4:R1(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,c=t.memoizedProps.value;yn(Tg,o._currentValue),o._currentValue=c;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(yn(Rn,Rn.current&1),t.flags|=128,null):r&t.child.childLanes?fP(e,t,r):(yn(Rn,Rn.current&1),e=Ds(e,t,r),e!==null?e.sibling:null);yn(Rn,Rn.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return mP(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),yn(Rn,Rn.current),o)break;return null;case 22:case 23:return t.lanes=0,dP(e,t,r)}return Ds(e,t,r)}var gP,rx,yP,vP;gP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};rx=function(){};yP=function(e,t,r,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,oc(es.current);var d=null;switch(r){case"input":c=C_(e,c),o=C_(e,o),d=[];break;case"select":c=$n({},c,{value:void 0}),o=$n({},o,{value:void 0}),d=[];break;case"textarea":c=T_(e,c),o=T_(e,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=wg)}E_(r,o);var m;r=null;for(w in c)if(!o.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(m in l)l.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(pp.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in o){var b=o[w];if(l=c!=null?c[w]:void 0,o.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(m in l)!l.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in b)b.hasOwnProperty(m)&&l[m]!==b[m]&&(r||(r={}),r[m]=b[m])}else r||(d||(d=[]),d.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(pp.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&wn("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}r&&(d=d||[]).push("style",r);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};vP=function(e,t,r,o){r!==o&&(t.flags|=4)};function Mh(e,t){if(!En)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Hi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function e4(e,t,r){var o=t.pendingProps;switch(T1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(t),null;case 1:return _o(t.type)&&Sg(),Hi(t),null;case 3:return o=t.stateNode,Wu(),Cn(vo),Cn(Zi),$1(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Pm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,za!==null&&(ux(za),za=null))),rx(e,t),Hi(t),null;case 5:L1(t);var c=oc(kp.current);if(r=t.type,e!==null&&t.stateNode!=null)yP(e,t,r,o,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(mt(166));return Hi(t),null}if(e=oc(es.current),Pm(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[Xa]=t,o[Sp]=d,e=(t.mode&1)!==0,r){case"dialog":wn("cancel",o),wn("close",o);break;case"iframe":case"object":case"embed":wn("load",o);break;case"video":case"audio":for(c=0;c<Hh.length;c++)wn(Hh[c],o);break;case"source":wn("error",o);break;case"img":case"image":case"link":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"input":WS(o,d),wn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},wn("invalid",o);break;case"textarea":qS(o,d),wn("invalid",o)}E_(r,d),c=null;for(var m in d)if(d.hasOwnProperty(m)){var l=d[m];m==="children"?typeof l=="string"?o.textContent!==l&&(d.suppressHydrationWarning!==!0&&Tm(o.textContent,l,e),c=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&Tm(o.textContent,l,e),c=["children",""+l]):pp.hasOwnProperty(m)&&l!=null&&m==="onScroll"&&wn("scroll",o)}switch(r){case"input":_m(o),GS(o,d,!0);break;case"textarea":_m(o),ZS(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=wg)}o=c,t.updateQueue=o,o!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GI(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(r,{is:o.is}):(e=m.createElement(r),r==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,r),e[Xa]=t,e[Sp]=o,gP(e,t,!1,!1),t.stateNode=e;e:{switch(m=z_(r,o),r){case"dialog":wn("cancel",e),wn("close",e),c=o;break;case"iframe":case"object":case"embed":wn("load",e),c=o;break;case"video":case"audio":for(c=0;c<Hh.length;c++)wn(Hh[c],e);c=o;break;case"source":wn("error",e),c=o;break;case"img":case"image":case"link":wn("error",e),wn("load",e),c=o;break;case"details":wn("toggle",e),c=o;break;case"input":WS(e,o),c=C_(e,o),wn("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=$n({},o,{value:void 0}),wn("invalid",e);break;case"textarea":qS(e,o),c=T_(e,o),wn("invalid",e);break;default:c=o}E_(r,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?KI(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&qI(e,b)):d==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&fp(e,b):typeof b=="number"&&fp(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(pp.hasOwnProperty(d)?b!=null&&d==="onScroll"&&wn("scroll",e):b!=null&&h1(e,d,b,m))}switch(r){case"input":_m(e),GS(e,o,!1);break;case"textarea":_m(e),ZS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+bl(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?Du(e,!!o.multiple,d,!1):o.defaultValue!=null&&Du(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=wg)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hi(t),null;case 6:if(e&&t.stateNode!=null)vP(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(mt(166));if(r=oc(kp.current),oc(es.current),Pm(t)){if(o=t.stateNode,r=t.memoizedProps,o[Xa]=t,(d=o.nodeValue!==r)&&(e=Oo,e!==null))switch(e.tag){case 3:Tm(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tm(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Xa]=t,t.stateNode=o}return Hi(t),null;case 13:if(Cn(Rn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(En&&$o!==null&&t.mode&1&&!(t.flags&128))$T(),Uu(),t.flags|=98560,d=!1;else if(d=Pm(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(mt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(mt(317));d[Xa]=t}else Uu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hi(t),d=!1}else za!==null&&(ux(za),za=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Rn.current&1?ui===0&&(ui=3):Z1())),t.updateQueue!==null&&(t.flags|=4),Hi(t),null);case 4:return Wu(),rx(e,t),e===null&&bp(t.stateNode.containerInfo),Hi(t),null;case 10:return M1(t.type._context),Hi(t),null;case 17:return _o(t.type)&&Sg(),Hi(t),null;case 19:if(Cn(Rn),d=t.memoizedState,d===null)return Hi(t),null;if(o=(t.flags&128)!==0,m=d.rendering,m===null)if(o)Mh(d,!1);else{if(ui!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=zg(e),m!==null){for(t.flags|=128,Mh(d,!1),o=m.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,m=d.alternate,m===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,e=m.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return yn(Rn,Rn.current&1|2),t.child}e=e.sibling}d.tail!==null&&Jn()>qu&&(t.flags|=128,o=!0,Mh(d,!1),t.lanes=4194304)}else{if(!o)if(e=zg(m),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Mh(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!En)return Hi(t),null}else 2*Jn()-d.renderingStartTime>qu&&r!==1073741824&&(t.flags|=128,o=!0,Mh(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(r=d.last,r!==null?r.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Jn(),t.sibling=null,r=Rn.current,yn(Rn,o?r&1|2:r&1),t):(Hi(t),null);case 22:case 23:return q1(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?zo&1073741824&&(Hi(t),t.subtreeFlags&6&&(t.flags|=8192)):Hi(t),null;case 24:return null;case 25:return null}throw Error(mt(156,t.tag))}function t4(e,t){switch(T1(t),t.tag){case 1:return _o(t.type)&&Sg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wu(),Cn(vo),Cn(Zi),$1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L1(t),null;case 13:if(Cn(Rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(mt(340));Uu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cn(Rn),null;case 4:return Wu(),null;case 10:return M1(t.type._context),null;case 22:case 23:return q1(),null;case 24:return null;default:return null}}var Mm=!1,qi=!1,r4=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Iu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){jn(e,t,o)}else r.current=null}function nx(e,t,r){try{r()}catch(o){jn(e,t,o)}}var B2=!1;function n4(e,t){if(N_=_g,e=ST(),k1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var m=0,l=-1,b=-1,w=0,T=0,E=e,M=null;t:for(;;){for(var O;E!==r||c!==0&&E.nodeType!==3||(l=m+c),E!==d||o!==0&&E.nodeType!==3||(b=m+o),E.nodeType===3&&(m+=E.nodeValue.length),(O=E.firstChild)!==null;)M=E,E=O;for(;;){if(E===e)break t;if(M===r&&++w===c&&(l=m),M===d&&++T===o&&(b=m),(O=E.nextSibling)!==null)break;E=M,M=E.parentNode}E=O}r=l===-1||b===-1?null:{start:l,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(j_={focusedElem:e,selectionRange:r},_g=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){t=Ht;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var V=U.memoizedProps,K=U.memoizedState,F=t.stateNode,R=F.getSnapshotBeforeUpdate(t.elementType===t.type?V:Ta(t.type,V),K);F.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(re){jn(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}return U=B2,B2=!1,U}function tp(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&nx(t,r,d)}c=c.next}while(c!==o)}}function Vy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function ix(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _P(e){var t=e.alternate;t!==null&&(e.alternate=null,_P(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xa],delete t[Sp],delete t[H_],delete t[F$],delete t[N$])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xP(e){return e.tag===5||e.tag===3||e.tag===4}function O2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ox(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wg));else if(o!==4&&(e=e.child,e!==null))for(ox(e,t,r),e=e.sibling;e!==null;)ox(e,t,r),e=e.sibling}function ax(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(ax(e,t,r),e=e.sibling;e!==null;)ax(e,t,r),e=e.sibling}var Ti=null,Pa=!1;function el(e,t,r){for(r=r.child;r!==null;)bP(e,t,r),r=r.sibling}function bP(e,t,r){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Ry,r)}catch{}switch(r.tag){case 5:qi||Iu(r,t);case 6:var o=Ti,c=Pa;Ti=null,el(e,t,r),Ti=o,Pa=c,Ti!==null&&(Pa?(e=Ti,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ti.removeChild(r.stateNode));break;case 18:Ti!==null&&(Pa?(e=Ti,r=r.stateNode,e.nodeType===8?j0(e.parentNode,r):e.nodeType===1&&j0(e,r),vp(e)):j0(Ti,r.stateNode));break;case 4:o=Ti,c=Pa,Ti=r.stateNode.containerInfo,Pa=!0,el(e,t,r),Ti=o,Pa=c;break;case 0:case 11:case 14:case 15:if(!qi&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,m=d.destroy;d=d.tag,m!==void 0&&(d&2||d&4)&&nx(r,t,m),c=c.next}while(c!==o)}el(e,t,r);break;case 1:if(!qi&&(Iu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(l){jn(r,t,l)}el(e,t,r);break;case 21:el(e,t,r);break;case 22:r.mode&1?(qi=(o=qi)||r.memoizedState!==null,el(e,t,r),qi=o):el(e,t,r);break;default:el(e,t,r)}}function F2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new r4),t.forEach(function(o){var c=h4.bind(null,e,o);r.has(o)||(r.add(o),o.then(c,c))})}}function Ca(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];try{var d=e,m=t,l=m;e:for(;l!==null;){switch(l.tag){case 5:Ti=l.stateNode,Pa=!1;break e;case 3:Ti=l.stateNode.containerInfo,Pa=!0;break e;case 4:Ti=l.stateNode.containerInfo,Pa=!0;break e}l=l.return}if(Ti===null)throw Error(mt(160));bP(d,m,c),Ti=null,Pa=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){jn(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wP(t,e),t=t.sibling}function wP(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ca(t,e),Ga(e),o&4){try{tp(3,e,e.return),Vy(3,e)}catch(V){jn(e,e.return,V)}try{tp(5,e,e.return)}catch(V){jn(e,e.return,V)}}break;case 1:Ca(t,e),Ga(e),o&512&&r!==null&&Iu(r,r.return);break;case 5:if(Ca(t,e),Ga(e),o&512&&r!==null&&Iu(r,r.return),e.flags&32){var c=e.stateNode;try{fp(c,"")}catch(V){jn(e,e.return,V)}}if(o&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,m=r!==null?r.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&HI(c,d),z_(l,m);var w=z_(l,d);for(m=0;m<b.length;m+=2){var T=b[m],E=b[m+1];T==="style"?KI(c,E):T==="dangerouslySetInnerHTML"?qI(c,E):T==="children"?fp(c,E):h1(c,T,E,w)}switch(l){case"input":k_(c,d);break;case"textarea":WI(c,d);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var O=d.value;O!=null?Du(c,!!d.multiple,O,!1):M!==!!d.multiple&&(d.defaultValue!=null?Du(c,!!d.multiple,d.defaultValue,!0):Du(c,!!d.multiple,d.multiple?[]:"",!1))}c[Sp]=d}catch(V){jn(e,e.return,V)}}break;case 6:if(Ca(t,e),Ga(e),o&4){if(e.stateNode===null)throw Error(mt(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(V){jn(e,e.return,V)}}break;case 3:if(Ca(t,e),Ga(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{vp(t.containerInfo)}catch(V){jn(e,e.return,V)}break;case 4:Ca(t,e),Ga(e);break;case 13:Ca(t,e),Ga(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(W1=Jn())),o&4&&F2(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(qi=(w=qi)||T,Ca(t,e),qi=w):Ca(t,e),Ga(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!T&&e.mode&1)for(Ht=e,T=e.child;T!==null;){for(E=Ht=T;Ht!==null;){switch(M=Ht,O=M.child,M.tag){case 0:case 11:case 14:case 15:tp(4,M,M.return);break;case 1:Iu(M,M.return);var U=M.stateNode;if(typeof U.componentWillUnmount=="function"){o=M,r=M.return;try{t=o,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(V){jn(o,r,V)}}break;case 5:Iu(M,M.return);break;case 22:if(M.memoizedState!==null){j2(E);continue}}O!==null?(O.return=M,Ht=O):j2(E)}T=T.sibling}e:for(T=null,E=e;;){if(E.tag===5){if(T===null){T=E;try{c=E.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=E.stateNode,b=E.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=ZI("display",m))}catch(V){jn(e,e.return,V)}}}else if(E.tag===6){if(T===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(V){jn(e,e.return,V)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;T===E&&(T=null),E=E.return}T===E&&(T=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Ca(t,e),Ga(e),o&4&&F2(e);break;case 21:break;default:Ca(t,e),Ga(e)}}function Ga(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(xP(r)){var o=r;break e}r=r.return}throw Error(mt(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(fp(c,""),o.flags&=-33);var d=O2(e);ax(e,d,c);break;case 3:case 4:var m=o.stateNode.containerInfo,l=O2(e);ox(e,l,m);break;default:throw Error(mt(161))}}catch(b){jn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function i4(e,t,r){Ht=e,SP(e)}function SP(e,t,r){for(var o=(e.mode&1)!==0;Ht!==null;){var c=Ht,d=c.child;if(c.tag===22&&o){var m=c.memoizedState!==null||Mm;if(!m){var l=c.alternate,b=l!==null&&l.memoizedState!==null||qi;l=Mm;var w=qi;if(Mm=m,(qi=b)&&!w)for(Ht=c;Ht!==null;)m=Ht,b=m.child,m.tag===22&&m.memoizedState!==null?V2(c):b!==null?(b.return=m,Ht=b):V2(c);for(;d!==null;)Ht=d,SP(d),d=d.sibling;Ht=c,Mm=l,qi=w}N2(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,Ht=d):N2(e)}}function N2(e){for(;Ht!==null;){var t=Ht;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qi||Vy(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!qi)if(r===null)o.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Ta(t.type,r.memoizedProps);o.componentDidUpdate(c,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&C2(t,d,o);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}C2(t,m,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var E=T.dehydrated;E!==null&&vp(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}qi||t.flags&512&&ix(t)}catch(M){jn(t,t.return,M)}}if(t===e){Ht=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function j2(e){for(;Ht!==null;){var t=Ht;if(t===e){Ht=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function V2(e){for(;Ht!==null;){var t=Ht;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vy(4,t)}catch(b){jn(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var c=t.return;try{o.componentDidMount()}catch(b){jn(t,c,b)}}var d=t.return;try{ix(t)}catch(b){jn(t,d,b)}break;case 5:var m=t.return;try{ix(t)}catch(b){jn(t,m,b)}}}catch(b){jn(t,t.return,b)}if(t===e){Ht=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ht=l;break}Ht=t.return}}var o4=Math.ceil,Ag=Ls.ReactCurrentDispatcher,U1=Ls.ReactCurrentOwner,ia=Ls.ReactCurrentBatchConfig,Gr=0,vi=null,ii=null,Mi=0,zo=0,Tu=kl(0),ui=0,Ep=null,mc=0,Uy=0,H1=0,rp=null,go=null,W1=0,qu=1/0,xs=null,Rg=!1,sx=null,gl=null,Dm=!1,cl=null,Lg=0,np=0,lx=null,Qm=-1,eg=0;function ao(){return Gr&6?Jn():Qm!==-1?Qm:Qm=Jn()}function yl(e){return e.mode&1?Gr&2&&Mi!==0?Mi&-Mi:V$.transition!==null?(eg===0&&(eg=sT()),eg):(e=rn,e!==0||(e=window.event,e=e===void 0?16:fT(e.type)),e):1}function Aa(e,t,r,o){if(50<np)throw np=0,lx=null,Error(mt(185));Wp(e,r,o),(!(Gr&2)||e!==vi)&&(e===vi&&(!(Gr&2)&&(Uy|=r),ui===4&&ol(e,Mi)),xo(e,o),r===1&&Gr===0&&!(t.mode&1)&&(qu=Jn()+500,Fy&&Il()))}function xo(e,t){var r=e.callbackNode;V3(e,t);var o=vg(e,e===vi?Mi:0);if(o===0)r!==null&&JS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&JS(r),t===1)e.tag===0?j$(U2.bind(null,e)):AT(U2.bind(null,e)),B$(function(){!(Gr&6)&&Il()}),r=null;else{switch(lT(o)){case 1:r=y1;break;case 4:r=oT;break;case 16:r=yg;break;case 536870912:r=aT;break;default:r=yg}r=MP(r,CP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function CP(e,t){if(Qm=-1,eg=0,Gr&6)throw Error(mt(327));var r=e.callbackNode;if(Bu()&&e.callbackNode!==r)return null;var o=vg(e,e===vi?Mi:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=$g(e,o);else{t=o;var c=Gr;Gr|=2;var d=IP();(vi!==e||Mi!==t)&&(xs=null,qu=Jn()+500,sc(e,t));do try{l4();break}catch(l){kP(e,l)}while(!0);z1(),Ag.current=d,Gr=c,ii!==null?t=0:(vi=null,Mi=0,t=ui)}if(t!==0){if(t===2&&(c=L_(e),c!==0&&(o=c,t=cx(e,c))),t===1)throw r=Ep,sc(e,0),ol(e,o),xo(e,Jn()),r;if(t===6)ol(e,o);else{if(c=e.current.alternate,!(o&30)&&!a4(c)&&(t=$g(e,o),t===2&&(d=L_(e),d!==0&&(o=d,t=cx(e,d))),t===1))throw r=Ep,sc(e,0),ol(e,o),xo(e,Jn()),r;switch(e.finishedWork=c,e.finishedLanes=o,t){case 0:case 1:throw Error(mt(345));case 2:Ql(e,go,xs);break;case 3:if(ol(e,o),(o&130023424)===o&&(t=W1+500-Jn(),10<t)){if(vg(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){ao(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=U_(Ql.bind(null,e,go,xs),t);break}Ql(e,go,xs);break;case 4:if(ol(e,o),(o&4194240)===o)break;for(t=e.eventTimes,c=-1;0<o;){var m=31-Da(o);d=1<<m,m=t[m],m>c&&(c=m),o&=~d}if(o=c,o=Jn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*o4(o/1960))-o,10<o){e.timeoutHandle=U_(Ql.bind(null,e,go,xs),o);break}Ql(e,go,xs);break;case 5:Ql(e,go,xs);break;default:throw Error(mt(329))}}}return xo(e,Jn()),e.callbackNode===r?CP.bind(null,e):null}function cx(e,t){var r=rp;return e.current.memoizedState.isDehydrated&&(sc(e,t).flags|=256),e=$g(e,t),e!==2&&(t=go,go=r,t!==null&&ux(t)),e}function ux(e){go===null?go=e:go.push.apply(go,e)}function a4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var c=r[o],d=c.getSnapshot;c=c.value;try{if(!La(d(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ol(e,t){for(t&=~H1,t&=~Uy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Da(t),o=1<<r;e[r]=-1,t&=~o}}function U2(e){if(Gr&6)throw Error(mt(327));Bu();var t=vg(e,0);if(!(t&1))return xo(e,Jn()),null;var r=$g(e,t);if(e.tag!==0&&r===2){var o=L_(e);o!==0&&(t=o,r=cx(e,o))}if(r===1)throw r=Ep,sc(e,0),ol(e,t),xo(e,Jn()),r;if(r===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ql(e,go,xs),xo(e,Jn()),null}function G1(e,t){var r=Gr;Gr|=1;try{return e(t)}finally{Gr=r,Gr===0&&(qu=Jn()+500,Fy&&Il())}}function gc(e){cl!==null&&cl.tag===0&&!(Gr&6)&&Bu();var t=Gr;Gr|=1;var r=ia.transition,o=rn;try{if(ia.transition=null,rn=1,e)return e()}finally{rn=o,ia.transition=r,Gr=t,!(Gr&6)&&Il()}}function q1(){zo=Tu.current,Cn(Tu)}function sc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$$(r)),ii!==null)for(r=ii.return;r!==null;){var o=r;switch(T1(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Sg();break;case 3:Wu(),Cn(vo),Cn(Zi),$1();break;case 5:L1(o);break;case 4:Wu();break;case 13:Cn(Rn);break;case 19:Cn(Rn);break;case 10:M1(o.type._context);break;case 22:case 23:q1()}r=r.return}if(vi=e,ii=e=vl(e.current,null),Mi=zo=t,ui=0,Ep=null,H1=Uy=mc=0,go=rp=null,ic!==null){for(t=0;t<ic.length;t++)if(r=ic[t],o=r.interleaved,o!==null){r.interleaved=null;var c=o.next,d=r.pending;if(d!==null){var m=d.next;d.next=c,o.next=m}r.pending=o}ic=null}return e}function kP(e,t){do{var r=ii;try{if(z1(),Xm.current=Dg,Mg){for(var o=Ln.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Mg=!1}if(fc=0,yi=ci=Ln=null,ep=!1,Ip=0,U1.current=null,r===null||r.return===null){ui=1,Ep=t,ii=null;break}e:{var d=e,m=r.return,l=r,b=t;if(t=Mi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,T=l,E=T.tag;if(!(T.mode&1)&&(E===0||E===11||E===15)){var M=T.alternate;M?(T.updateQueue=M.updateQueue,T.memoizedState=M.memoizedState,T.lanes=M.lanes):(T.updateQueue=null,T.memoizedState=null)}var O=z2(m);if(O!==null){O.flags&=-257,M2(O,m,l,d,t),O.mode&1&&E2(d,w,t),t=O,b=w;var U=t.updateQueue;if(U===null){var V=new Set;V.add(b),t.updateQueue=V}else U.add(b);break e}else{if(!(t&1)){E2(d,w,t),Z1();break e}b=Error(mt(426))}}else if(En&&l.mode&1){var K=z2(m);if(K!==null){!(K.flags&65536)&&(K.flags|=256),M2(K,m,l,d,t),P1(Gu(b,l));break e}}d=b=Gu(b,l),ui!==4&&(ui=2),rp===null?rp=[d]:rp.push(d),d=m;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var F=lP(d,b,t);S2(d,F);break e;case 1:l=b;var R=d.type,L=d.stateNode;if(!(d.flags&128)&&(typeof R.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(gl===null||!gl.has(L)))){d.flags|=65536,t&=-t,d.lanes|=t;var re=cP(d,l,t);S2(d,re);break e}}d=d.return}while(d!==null)}PP(r)}catch(J){t=J,ii===r&&r!==null&&(ii=r=r.return);continue}break}while(!0)}function IP(){var e=Ag.current;return Ag.current=Dg,e===null?Dg:e}function Z1(){(ui===0||ui===3||ui===2)&&(ui=4),vi===null||!(mc&268435455)&&!(Uy&268435455)||ol(vi,Mi)}function $g(e,t){var r=Gr;Gr|=2;var o=IP();(vi!==e||Mi!==t)&&(xs=null,sc(e,t));do try{s4();break}catch(c){kP(e,c)}while(!0);if(z1(),Gr=r,Ag.current=o,ii!==null)throw Error(mt(261));return vi=null,Mi=0,ui}function s4(){for(;ii!==null;)TP(ii)}function l4(){for(;ii!==null&&!A3();)TP(ii)}function TP(e){var t=zP(e.alternate,e,zo);e.memoizedProps=e.pendingProps,t===null?PP(e):ii=t,U1.current=null}function PP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=t4(r,t),r!==null){r.flags&=32767,ii=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ui=6,ii=null;return}}else if(r=e4(r,t,zo),r!==null){ii=r;return}if(t=t.sibling,t!==null){ii=t;return}ii=t=e}while(t!==null);ui===0&&(ui=5)}function Ql(e,t,r){var o=rn,c=ia.transition;try{ia.transition=null,rn=1,c4(e,t,r,o)}finally{ia.transition=c,rn=o}return null}function c4(e,t,r,o){do Bu();while(cl!==null);if(Gr&6)throw Error(mt(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(U3(e,d),e===vi&&(ii=vi=null,Mi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dm||(Dm=!0,MP(yg,function(){return Bu(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=ia.transition,ia.transition=null;var m=rn;rn=1;var l=Gr;Gr|=4,U1.current=null,n4(e,r),wP(r,e),E$(j_),_g=!!N_,j_=N_=null,e.current=r,i4(r),R3(),Gr=l,rn=m,ia.transition=d}else e.current=r;if(Dm&&(Dm=!1,cl=e,Lg=c),d=e.pendingLanes,d===0&&(gl=null),B3(r.stateNode),xo(e,Jn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],o(c.value,{componentStack:c.stack,digest:c.digest});if(Rg)throw Rg=!1,e=sx,sx=null,e;return Lg&1&&e.tag!==0&&Bu(),d=e.pendingLanes,d&1?e===lx?np++:(np=0,lx=e):np=0,Il(),null}function Bu(){if(cl!==null){var e=lT(Lg),t=ia.transition,r=rn;try{if(ia.transition=null,rn=16>e?16:e,cl===null)var o=!1;else{if(e=cl,cl=null,Lg=0,Gr&6)throw Error(mt(331));var c=Gr;for(Gr|=4,Ht=e.current;Ht!==null;){var d=Ht,m=d.child;if(Ht.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Ht=w;Ht!==null;){var T=Ht;switch(T.tag){case 0:case 11:case 15:tp(8,T,d)}var E=T.child;if(E!==null)E.return=T,Ht=E;else for(;Ht!==null;){T=Ht;var M=T.sibling,O=T.return;if(_P(T),T===w){Ht=null;break}if(M!==null){M.return=O,Ht=M;break}Ht=O}}}var U=d.alternate;if(U!==null){var V=U.child;if(V!==null){U.child=null;do{var K=V.sibling;V.sibling=null,V=K}while(V!==null)}}Ht=d}}if(d.subtreeFlags&2064&&m!==null)m.return=d,Ht=m;else e:for(;Ht!==null;){if(d=Ht,d.flags&2048)switch(d.tag){case 0:case 11:case 15:tp(9,d,d.return)}var F=d.sibling;if(F!==null){F.return=d.return,Ht=F;break e}Ht=d.return}}var R=e.current;for(Ht=R;Ht!==null;){m=Ht;var L=m.child;if(m.subtreeFlags&2064&&L!==null)L.return=m,Ht=L;else e:for(m=R;Ht!==null;){if(l=Ht,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vy(9,l)}}catch(J){jn(l,l.return,J)}if(l===m){Ht=null;break e}var re=l.sibling;if(re!==null){re.return=l.return,Ht=re;break e}Ht=l.return}}if(Gr=c,Il(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Ry,e)}catch{}o=!0}return o}finally{rn=r,ia.transition=t}}return!1}function H2(e,t,r){t=Gu(r,t),t=lP(e,t,1),e=ml(e,t,1),t=ao(),e!==null&&(Wp(e,1,t),xo(e,t))}function jn(e,t,r){if(e.tag===3)H2(e,e,r);else for(;t!==null;){if(t.tag===3){H2(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(gl===null||!gl.has(o))){e=Gu(r,e),e=cP(t,e,1),t=ml(t,e,1),e=ao(),t!==null&&(Wp(t,1,e),xo(t,e));break}}t=t.return}}function u4(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=ao(),e.pingedLanes|=e.suspendedLanes&r,vi===e&&(Mi&r)===r&&(ui===4||ui===3&&(Mi&130023424)===Mi&&500>Jn()-W1?sc(e,0):H1|=r),xo(e,t)}function EP(e,t){t===0&&(e.mode&1?(t=wm,wm<<=1,!(wm&130023424)&&(wm=4194304)):t=1);var r=ao();e=Ms(e,t),e!==null&&(Wp(e,t,r),xo(e,r))}function d4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),EP(e,r)}function h4(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(mt(314))}o!==null&&o.delete(t),EP(e,r)}var zP;zP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vo.current)yo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yo=!1,Q$(e,t,r);yo=!!(e.flags&131072)}else yo=!1,En&&t.flags&1048576&&RT(t,Ig,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Ym(e,t),e=t.pendingProps;var c=Vu(t,Zi.current);$u(t,r),c=O1(null,t,o,e,c,r);var d=F1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_o(o)?(d=!0,Cg(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,A1(t),c.updater=jy,t.stateNode=c,c._reactInternals=t,X_(t,o,e,r),t=Q_(null,t,o,!0,d,r)):(t.tag=0,En&&d&&I1(t),oo(null,t,c,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Ym(e,t),e=t.pendingProps,c=o._init,o=c(o._payload),t.type=o,c=t.tag=f4(o),e=Ta(o,e),c){case 0:t=Y_(null,t,o,e,r);break e;case 1:t=R2(null,t,o,e,r);break e;case 11:t=D2(null,t,o,e,r);break e;case 14:t=A2(null,t,o,Ta(o.type,e),r);break e}throw Error(mt(306,o,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ta(o,c),Y_(e,t,o,c,r);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ta(o,c),R2(e,t,o,c,r);case 3:e:{if(pP(t),e===null)throw Error(mt(387));o=t.pendingProps,d=t.memoizedState,c=d.element,NT(e,t),Eg(t,o,null,r);var m=t.memoizedState;if(o=m.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=Gu(Error(mt(423)),t),t=L2(e,t,o,r,c);break e}else if(o!==c){c=Gu(Error(mt(424)),t),t=L2(e,t,o,r,c);break e}else for($o=fl(t.stateNode.containerInfo.firstChild),Oo=t,En=!0,za=null,r=OT(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Uu(),o===c){t=Ds(e,t,r);break e}oo(e,t,o,r)}t=t.child}return t;case 5:return jT(t),e===null&&q_(t),o=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,m=c.children,V_(o,c)?m=null:d!==null&&V_(o,d)&&(t.flags|=32),hP(e,t),oo(e,t,m,r),t.child;case 6:return e===null&&q_(t),null;case 13:return fP(e,t,r);case 4:return R1(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Hu(t,null,o,r):oo(e,t,o,r),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ta(o,c),D2(e,t,o,c,r);case 7:return oo(e,t,t.pendingProps,r),t.child;case 8:return oo(e,t,t.pendingProps.children,r),t.child;case 12:return oo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,c=t.pendingProps,d=t.memoizedProps,m=c.value,yn(Tg,o._currentValue),o._currentValue=m,d!==null)if(La(d.value,m)){if(d.children===c.children&&!vo.current){t=Ds(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){m=d.child;for(var b=l.firstContext;b!==null;){if(b.context===o){if(d.tag===1){b=ks(-1,r&-r),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?b.next=b:(b.next=T.next,T.next=b),w.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),Z_(d.return,r,t),l.lanes|=r;break}b=b.next}}else if(d.tag===10)m=d.type===t.type?null:d.child;else if(d.tag===18){if(m=d.return,m===null)throw Error(mt(341));m.lanes|=r,l=m.alternate,l!==null&&(l.lanes|=r),Z_(m,r,t),m=d.sibling}else m=d.child;if(m!==null)m.return=d;else for(m=d;m!==null;){if(m===t){m=null;break}if(d=m.sibling,d!==null){d.return=m.return,m=d;break}m=m.return}d=m}oo(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,o=t.pendingProps.children,$u(t,r),c=aa(c),o=o(c),t.flags|=1,oo(e,t,o,r),t.child;case 14:return o=t.type,c=Ta(o,t.pendingProps),c=Ta(o.type,c),A2(e,t,o,c,r);case 15:return uP(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ta(o,c),Ym(e,t),t.tag=1,_o(o)?(e=!0,Cg(t)):e=!1,$u(t,r),sP(t,o,c),X_(t,o,c,r),Q_(null,t,o,!0,e,r);case 19:return mP(e,t,r);case 22:return dP(e,t,r)}throw Error(mt(156,t.tag))};function MP(e,t){return iT(e,t)}function p4(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,r,o){return new p4(e,t,r,o)}function K1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function f4(e){if(typeof e=="function")return K1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===f1)return 11;if(e===m1)return 14}return 2}function vl(e,t){var r=e.alternate;return r===null?(r=na(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function tg(e,t,r,o,c,d){var m=2;if(o=e,typeof e=="function")K1(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case yu:return lc(r.children,c,d,t);case p1:m=8,c|=8;break;case x_:return e=na(12,r,t,c|2),e.elementType=x_,e.lanes=d,e;case b_:return e=na(13,r,t,c),e.elementType=b_,e.lanes=d,e;case w_:return e=na(19,r,t,c),e.elementType=w_,e.lanes=d,e;case jI:return Hy(r,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case FI:m=10;break e;case NI:m=9;break e;case f1:m=11;break e;case m1:m=14;break e;case rl:m=16,o=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=na(m,r,t,c),t.elementType=e,t.type=o,t.lanes=d,t}function lc(e,t,r,o){return e=na(7,e,o,t),e.lanes=r,e}function Hy(e,t,r,o){return e=na(22,e,o,t),e.elementType=jI,e.lanes=r,e.stateNode={isHidden:!1},e}function K0(e,t,r){return e=na(6,e,null,t),e.lanes=r,e}function X0(e,t,r){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function m4(e,t,r,o,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z0(0),this.expirationTimes=z0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z0(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function X1(e,t,r,o,c,d,m,l,b){return e=new m4(e,t,r,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=na(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},A1(d),e}function g4(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function DP(e){if(!e)return wl;e=e._reactInternals;e:{if(_c(e)!==e||e.tag!==1)throw Error(mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(mt(171))}if(e.tag===1){var r=e.type;if(_o(r))return DT(e,r,t)}return t}function AP(e,t,r,o,c,d,m,l,b){return e=X1(r,o,!0,e,c,d,m,l,b),e.context=DP(null),r=e.current,o=ao(),c=yl(r),d=ks(o,c),d.callback=t??null,ml(r,d,c),e.current.lanes=c,Wp(e,c,o),xo(e,o),e}function Wy(e,t,r,o){var c=t.current,d=ao(),m=yl(c);return r=DP(r),t.context===null?t.context=r:t.pendingContext=r,t=ks(d,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=ml(c,t,m),e!==null&&(Aa(e,c,m,d),Km(e,c,m)),m}function Bg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function W2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function J1(e,t){W2(e,t),(e=e.alternate)&&W2(e,t)}function y4(){return null}var RP=typeof reportError=="function"?reportError:function(e){console.error(e)};function Y1(e){this._internalRoot=e}Gy.prototype.render=Y1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(mt(409));Wy(e,t,null,null)};Gy.prototype.unmount=Y1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gc(function(){Wy(null,e,null,null)}),t[zs]=null}};function Gy(e){this._internalRoot=e}Gy.prototype.unstable_scheduleHydration=function(e){if(e){var t=dT();e={blockedOn:null,target:e,priority:t};for(var r=0;r<il.length&&t!==0&&t<il[r].priority;r++);il.splice(r,0,e),r===0&&pT(e)}};function Q1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function G2(){}function v4(e,t,r,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var w=Bg(m);d.call(w)}}var m=AP(t,o,e,0,null,!1,!1,"",G2);return e._reactRootContainer=m,e[zs]=m.current,bp(e.nodeType===8?e.parentNode:e),gc(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var l=o;o=function(){var w=Bg(b);l.call(w)}}var b=X1(e,0,!1,null,null,!1,!1,"",G2);return e._reactRootContainer=b,e[zs]=b.current,bp(e.nodeType===8?e.parentNode:e),gc(function(){Wy(t,b,r,o)}),b}function Zy(e,t,r,o,c){var d=r._reactRootContainer;if(d){var m=d;if(typeof c=="function"){var l=c;c=function(){var b=Bg(m);l.call(b)}}Wy(t,m,e,c)}else m=v4(r,t,e,c,o);return Bg(m)}cT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Uh(t.pendingLanes);r!==0&&(v1(t,r|1),xo(t,Jn()),!(Gr&6)&&(qu=Jn()+500,Il()))}break;case 13:gc(function(){var o=Ms(e,1);if(o!==null){var c=ao();Aa(o,e,1,c)}}),J1(e,1)}};_1=function(e){if(e.tag===13){var t=Ms(e,134217728);if(t!==null){var r=ao();Aa(t,e,134217728,r)}J1(e,134217728)}};uT=function(e){if(e.tag===13){var t=yl(e),r=Ms(e,t);if(r!==null){var o=ao();Aa(r,e,t,o)}J1(e,t)}};dT=function(){return rn};hT=function(e,t){var r=rn;try{return rn=e,t()}finally{rn=r}};D_=function(e,t,r){switch(t){case"input":if(k_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var c=Oy(o);if(!c)throw Error(mt(90));UI(o),k_(o,c)}}}break;case"textarea":WI(e,r);break;case"select":t=r.value,t!=null&&Du(e,!!r.multiple,t,!1)}};YI=G1;QI=gc;var _4={usingClientEntryPoint:!1,Events:[qp,bu,Oy,XI,JI,G1]},Dh={findFiberByHostInstance:nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x4={bundleType:Dh.bundleType,version:Dh.version,rendererPackageName:Dh.rendererPackageName,rendererConfig:Dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rT(e),e===null?null:e.stateNode},findFiberByHostInstance:Dh.findFiberByHostInstance||y4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Am.isDisabled&&Am.supportsFiber)try{Ry=Am.inject(x4),Qa=Am}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_4;Vo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q1(t))throw Error(mt(200));return g4(e,t,null,r)};Vo.createRoot=function(e,t){if(!Q1(e))throw Error(mt(299));var r=!1,o="",c=RP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=X1(e,1,!1,null,null,r,!1,o,c),e[zs]=t.current,bp(e.nodeType===8?e.parentNode:e),new Y1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=rT(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return gc(e)};Vo.hydrate=function(e,t,r){if(!qy(t))throw Error(mt(200));return Zy(null,e,t,!0,r)};Vo.hydrateRoot=function(e,t,r){if(!Q1(e))throw Error(mt(405));var o=r!=null&&r.hydratedSources||null,c=!1,d="",m=RP;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=AP(t,null,e,1,r??null,c,!1,d,m),e[zs]=t.current,bp(e),o)for(e=0;e<o.length;e++)r=o[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Gy(t)};Vo.render=function(e,t,r){if(!qy(t))throw Error(mt(200));return Zy(null,e,t,!1,r)};Vo.unmountComponentAtNode=function(e){if(!qy(e))throw Error(mt(40));return e._reactRootContainer?(gc(function(){Zy(null,null,e,!1,function(){e._reactRootContainer=null,e[zs]=null})}),!0):!1};Vo.unstable_batchedUpdates=G1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!qy(r))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return Zy(e,t,r,!1,o)};Vo.version="18.3.1-next-f1338f8080-20240426";function LP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LP)}catch(e){console.error(e)}}LP(),LI.exports=Vo;var cd=LI.exports;const b4=zx(cd),w4=Ex({__proto__:null,default:b4},[cd]);function S4(e){return typeof e=="function"?e():e}const $P=A.forwardRef(function(t,r){const{children:o,container:c,disablePortal:d=!1}=t,[m,l]=A.useState(null),b=tn(A.isValidElement(o)?o.ref:null,r);if(Ts(()=>{d||l(S4(c)||document.body)},[c,d]),Ts(()=>{if(m&&!d)return pg(r,m),()=>{pg(r,null)}},[r,m,d]),d){if(A.isValidElement(o)){const w={ref:b};return A.cloneElement(o,w)}return Q.jsx(A.Fragment,{children:o})}return Q.jsx(A.Fragment,{children:m&&cd.createPortal(o,m)})});function C4(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:o}=e,c=A.useContext(zy);if(c===null)throw new Error("useMenuButton: no menu context available.");const{state:d,dispatch:m,registerTrigger:l,popupId:b}=c,{getRootProps:w,rootRef:T,active:E}=ns({disabled:t,focusableWhenDisabled:r,rootRef:o}),M=tn(T,l),O=F=>R=>{var L;(L=F.onClick)==null||L.call(F,R),!R.defaultMuiPrevented&&m({type:Ma.toggle,event:R})},U=F=>R=>{var L;(L=F.onKeyDown)==null||L.call(F,R),!R.defaultMuiPrevented&&(R.key==="ArrowDown"||R.key==="ArrowUp")&&(R.preventDefault(),m({type:Ma.open,event:R}))},V=(F={})=>({onClick:O(F),onKeyDown:U(F)});return{active:E,getRootProps:(F={})=>{const R=zi(F),L=Ps(V,w);return W({"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":b},F,R,L(R),{tabIndex:0,ref:M})},open:d.open,rootRef:M}}function k4(e){return`menu-item-${e.size}`}const I4={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function T4(e){var t;const{disabled:r=!1,id:o,rootRef:c,label:d,disableFocusOnHover:m=!1}=e,l=Co(o),b=A.useRef(null),w=A.useMemo(()=>({disabled:r,id:l??"",label:d,ref:b}),[r,l,d]),{dispatch:T}=(t=A.useContext(zy))!=null?t:I4,{getRootProps:E,highlighted:M}=c1({item:l,handlePointerOverEvents:!m}),{index:O,totalItemCount:U}=Ay(l??k4,w),{getRootProps:V,focusVisible:K,rootRef:F}=ns({disabled:r,focusableWhenDisabled:!0}),R=tn(F,c,b);A.useDebugValue({id:l,highlighted:M,disabled:r,label:d});const L=se=>ie=>{var Z;(Z=se.onClick)==null||Z.call(se,ie),!ie.defaultMuiPrevented&&T({type:Ma.close,event:ie})},re=(se={})=>W({},se,{onClick:L(se)});function J(se={}){const ie=zi(se),Z=Ps(re,Ps(V,E));return W({},se,ie,Z(ie),{id:l,ref:R,role:"menuitem"})}return l===void 0?{getRootProps:J,disabled:!1,focusVisible:K,highlighted:!1,index:-1,totalItemCount:0,rootRef:R}:{getRootProps:J,disabled:r,focusVisible:K,highlighted:M,index:O,totalItemCount:U,rootRef:R}}function P4(e){const t=A.useContext(Sl);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=Co(e),{getItemState:o,dispatch:c}=t;let d;r!=null?d=o(r):d={focusable:!0,highlighted:!1,selected:!1};const{highlighted:m,selected:l,focusable:b}=d,w=A.useCallback(E=>{if(E!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${E} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:m,selected:l,focusable:b}},[m,l,b,r]);return{contextValue:A.useMemo(()=>({dispatch:c,getItemState:w}),[c,w]),id:r}}function E4(e){const t=Ya(e);return t.body===e?e1(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ip(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function q2(e){return parseInt(e1(e).getComputedStyle(e).paddingRight,10)||0}function z4(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||o}function Z2(e,t,r,o,c){const d=[t,r,...o];[].forEach.call(e.children,m=>{const l=d.indexOf(m)===-1,b=!z4(m);l&&b&&ip(m,c)})}function J0(e,t){let r=-1;return e.some((o,c)=>t(o)?(r=c,!0):!1),r}function M4(e,t){const r=[],o=e.container;if(!t.disableScrollLock){if(E4(o)){const m=BL(Ya(o));r.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${q2(o)+m}px`;const l=Ya(o).querySelectorAll(".mui-fixed");[].forEach.call(l,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${q2(b)+m}px`})}let d;if(o.parentNode instanceof DocumentFragment)d=Ya(o).body;else{const m=o.parentElement,l=e1(o);d=(m==null?void 0:m.nodeName)==="HTML"&&l.getComputedStyle(m).overflowY==="scroll"?m:o}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:m,property:l})=>{d?m.style.setProperty(l,d):m.style.removeProperty(l)})}}function D4(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class A4{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&ip(t.modalRef,!1);const c=D4(r);Z2(r,t.mount,t.modalRef,c,!0);const d=J0(this.containers,m=>m.container===r);return d!==-1?(this.containers[d].modals.push(t),o):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:c}),o)}mount(t,r){const o=J0(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[o];c.restore||(c.restore=M4(c,r))}remove(t,r=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const c=J0(this.containers,m=>m.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(o,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&ip(t.modalRef,r),Z2(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const m=d.modals[d.modals.length-1];m.modalRef&&ip(m.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function R4(e){return typeof e=="function"?e():e}function L4(e){return e?e.props.hasOwnProperty("in"):!1}const $4=new A4;function B4(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,manager:c=$4,closeAfterTransition:d=!1,onTransitionEnter:m,onTransitionExited:l,children:b,onClose:w,open:T,rootRef:E}=e,M=A.useRef({}),O=A.useRef(null),U=A.useRef(null),V=tn(U,E),[K,F]=A.useState(!T),R=L4(b);let L=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(L=!1);const re=()=>Ya(O.current),J=()=>(M.current.modalRef=U.current,M.current.mount=O.current,M.current),se=()=>{c.mount(J(),{disableScrollLock:o}),U.current&&(U.current.scrollTop=0)},ie=sl(()=>{const Te=R4(t)||re().body;c.add(J(),Te),U.current&&se()}),Z=A.useCallback(()=>c.isTopModal(J()),[c]),Ce=sl(Te=>{O.current=Te,Te&&(T&&Z()?se():U.current&&ip(U.current,L))}),_e=A.useCallback(()=>{c.remove(J(),L)},[L,c]);A.useEffect(()=>()=>{_e()},[_e]),A.useEffect(()=>{T?ie():(!R||!d)&&_e()},[T,_e,R,d,ie]);const ke=Te=>Fe=>{var $e;($e=Te.onKeyDown)==null||$e.call(Te,Fe),!(Fe.key!=="Escape"||Fe.which===229||!Z())&&(r||(Fe.stopPropagation(),w&&w(Fe,"escapeKeyDown")))},ze=Te=>Fe=>{var $e;($e=Te.onClick)==null||$e.call(Te,Fe),Fe.target===Fe.currentTarget&&w&&w(Fe,"backdropClick")};return{getRootProps:(Te={})=>{const Fe=zi(e);delete Fe.onTransitionEnter,delete Fe.onTransitionExited;const $e=W({},Fe,Te);return W({role:"presentation"},$e,{onKeyDown:ke($e),ref:V})},getBackdropProps:(Te={})=>{const Fe=Te;return W({"aria-hidden":!0},Fe,{onClick:ze(Fe),open:T})},getTransitionProps:()=>{const Te=()=>{F(!1),m&&m()},Fe=()=>{F(!0),l&&l(),d&&_e()};return{onEnter:PS(Te,b==null?void 0:b.props.onEnter),onExited:PS(Fe,b==null?void 0:b.props.onExited)}},rootRef:V,portalRef:Ce,isTopModal:Z,exited:K,hasTransition:R}}function O4(e){const{value:t,label:r,disabled:o,rootRef:c,id:d}=e,{getRootProps:m,highlighted:l,selected:b}=c1({item:t}),{getRootProps:w,rootRef:T}=ns({disabled:o,focusableWhenDisabled:!0}),E=Co(d),M=A.useRef(null),O=A.useMemo(()=>({disabled:o,label:r,value:t,ref:M,id:E}),[o,r,t,E]),{index:U}=Ay(t,O),V=tn(c,M,T),K=R=>L=>{var re;(re=R.onKeyDown)==null||re.call(R,L),!L.defaultMuiPrevented&&[" ","Enter"].includes(L.key)&&(L.defaultMuiPrevented=!0)},F=(R={})=>({onKeyDown:K(R)});return{getRootProps:(R={})=>{const L=zi(R),re=Ps(m,Ps(w,F));return W({},R,L,re(L),{id:E,ref:V,role:"option","aria-selected":b})},highlighted:l,index:U,selected:b,rootRef:V}}function F4(e){const t=A.useContext(Sl);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:o}=t,{highlighted:c,selected:d,focusable:m}=r(e),l=A.useCallback(w=>{if(w!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:c,selected:d,focusable:m}},[c,d,m,e]);return{contextValue:A.useMemo(()=>({dispatch:o,getItemState:l}),[o,l])}}var bo="top",la="bottom",ca="right",wo="left",eb="auto",Kp=[bo,la,ca,wo],Zu="start",zp="end",N4="clippingParents",BP="viewport",Ah="popper",j4="reference",K2=Kp.reduce(function(e,t){return e.concat([t+"-"+Zu,t+"-"+zp])},[]),OP=[].concat(Kp,[eb]).reduce(function(e,t){return e.concat([t,t+"-"+Zu,t+"-"+zp])},[]),V4="beforeRead",U4="read",H4="afterRead",W4="beforeMain",G4="main",q4="afterMain",Z4="beforeWrite",K4="write",X4="afterWrite",J4=[V4,U4,H4,W4,G4,q4,Z4,K4,X4];function rs(e){return e?(e.nodeName||"").toLowerCase():null}function No(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function yc(e){var t=No(e).Element;return e instanceof t||e instanceof Element}function oa(e){var t=No(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function tb(e){if(typeof ShadowRoot>"u")return!1;var t=No(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Y4(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},c=t.attributes[r]||{},d=t.elements[r];!oa(d)||!rs(d)||(Object.assign(d.style,o),Object.keys(c).forEach(function(m){var l=c[m];l===!1?d.removeAttribute(m):d.setAttribute(m,l===!0?"":l)}))})}function Q4(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var c=t.elements[o],d=t.attributes[o]||{},m=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),l=m.reduce(function(b,w){return b[w]="",b},{});!oa(c)||!rs(c)||(Object.assign(c.style,l),Object.keys(d).forEach(function(b){c.removeAttribute(b)}))})}}const eB={name:"applyStyles",enabled:!0,phase:"write",fn:Y4,effect:Q4,requires:["computeStyles"]};function ts(e){return e.split("-")[0]}var cc=Math.max,Og=Math.min,Ku=Math.round;function dx(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function FP(){return!/^((?!chrome|android).)*safari/i.test(dx())}function Xu(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),c=1,d=1;t&&oa(e)&&(c=e.offsetWidth>0&&Ku(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&Ku(o.height)/e.offsetHeight||1);var m=yc(e)?No(e):window,l=m.visualViewport,b=!FP()&&r,w=(o.left+(b&&l?l.offsetLeft:0))/c,T=(o.top+(b&&l?l.offsetTop:0))/d,E=o.width/c,M=o.height/d;return{width:E,height:M,top:T,right:w+E,bottom:T+M,left:w,x:w,y:T}}function rb(e){var t=Xu(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function NP(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&tb(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function As(e){return No(e).getComputedStyle(e)}function tB(e){return["table","td","th"].indexOf(rs(e))>=0}function Tl(e){return((yc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ky(e){return rs(e)==="html"?e:e.assignedSlot||e.parentNode||(tb(e)?e.host:null)||Tl(e)}function X2(e){return!oa(e)||As(e).position==="fixed"?null:e.offsetParent}function rB(e){var t=/firefox/i.test(dx()),r=/Trident/i.test(dx());if(r&&oa(e)){var o=As(e);if(o.position==="fixed")return null}var c=Ky(e);for(tb(c)&&(c=c.host);oa(c)&&["html","body"].indexOf(rs(c))<0;){var d=As(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function Xp(e){for(var t=No(e),r=X2(e);r&&tB(r)&&As(r).position==="static";)r=X2(r);return r&&(rs(r)==="html"||rs(r)==="body"&&As(r).position==="static")?t:r||rB(e)||t}function nb(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function op(e,t,r){return cc(e,Og(t,r))}function nB(e,t,r){var o=op(e,t,r);return o>r?r:o}function jP(){return{top:0,right:0,bottom:0,left:0}}function VP(e){return Object.assign({},jP(),e)}function UP(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var iB=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,VP(typeof t!="number"?t:UP(t,Kp))};function oB(e){var t,r=e.state,o=e.name,c=e.options,d=r.elements.arrow,m=r.modifiersData.popperOffsets,l=ts(r.placement),b=nb(l),w=[wo,ca].indexOf(l)>=0,T=w?"height":"width";if(!(!d||!m)){var E=iB(c.padding,r),M=rb(d),O=b==="y"?bo:wo,U=b==="y"?la:ca,V=r.rects.reference[T]+r.rects.reference[b]-m[b]-r.rects.popper[T],K=m[b]-r.rects.reference[b],F=Xp(d),R=F?b==="y"?F.clientHeight||0:F.clientWidth||0:0,L=V/2-K/2,re=E[O],J=R-M[T]-E[U],se=R/2-M[T]/2+L,ie=op(re,se,J),Z=b;r.modifiersData[o]=(t={},t[Z]=ie,t.centerOffset=ie-se,t)}}function aB(e){var t=e.state,r=e.options,o=r.element,c=o===void 0?"[data-popper-arrow]":o;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||NP(t.elements.popper,c)&&(t.elements.arrow=c))}const sB={name:"arrow",enabled:!0,phase:"main",fn:oB,effect:aB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ju(e){return e.split("-")[1]}var lB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cB(e,t){var r=e.x,o=e.y,c=t.devicePixelRatio||1;return{x:Ku(r*c)/c||0,y:Ku(o*c)/c||0}}function J2(e){var t,r=e.popper,o=e.popperRect,c=e.placement,d=e.variation,m=e.offsets,l=e.position,b=e.gpuAcceleration,w=e.adaptive,T=e.roundOffsets,E=e.isFixed,M=m.x,O=M===void 0?0:M,U=m.y,V=U===void 0?0:U,K=typeof T=="function"?T({x:O,y:V}):{x:O,y:V};O=K.x,V=K.y;var F=m.hasOwnProperty("x"),R=m.hasOwnProperty("y"),L=wo,re=bo,J=window;if(w){var se=Xp(r),ie="clientHeight",Z="clientWidth";if(se===No(r)&&(se=Tl(r),As(se).position!=="static"&&l==="absolute"&&(ie="scrollHeight",Z="scrollWidth")),se=se,c===bo||(c===wo||c===ca)&&d===zp){re=la;var Ce=E&&se===J&&J.visualViewport?J.visualViewport.height:se[ie];V-=Ce-o.height,V*=b?1:-1}if(c===wo||(c===bo||c===la)&&d===zp){L=ca;var _e=E&&se===J&&J.visualViewport?J.visualViewport.width:se[Z];O-=_e-o.width,O*=b?1:-1}}var ke=Object.assign({position:l},w&&lB),ze=T===!0?cB({x:O,y:V},No(r)):{x:O,y:V};if(O=ze.x,V=ze.y,b){var Le;return Object.assign({},ke,(Le={},Le[re]=R?"0":"",Le[L]=F?"0":"",Le.transform=(J.devicePixelRatio||1)<=1?"translate("+O+"px, "+V+"px)":"translate3d("+O+"px, "+V+"px, 0)",Le))}return Object.assign({},ke,(t={},t[re]=R?V+"px":"",t[L]=F?O+"px":"",t.transform="",t))}function uB(e){var t=e.state,r=e.options,o=r.gpuAcceleration,c=o===void 0?!0:o,d=r.adaptive,m=d===void 0?!0:d,l=r.roundOffsets,b=l===void 0?!0:l,w={placement:ts(t.placement),variation:Ju(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,J2(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:m,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,J2(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const dB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uB,data:{}};var Rm={passive:!0};function hB(e){var t=e.state,r=e.instance,o=e.options,c=o.scroll,d=c===void 0?!0:c,m=o.resize,l=m===void 0?!0:m,b=No(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&w.forEach(function(T){T.addEventListener("scroll",r.update,Rm)}),l&&b.addEventListener("resize",r.update,Rm),function(){d&&w.forEach(function(T){T.removeEventListener("scroll",r.update,Rm)}),l&&b.removeEventListener("resize",r.update,Rm)}}const pB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hB,data:{}};var fB={left:"right",right:"left",bottom:"top",top:"bottom"};function rg(e){return e.replace(/left|right|bottom|top/g,function(t){return fB[t]})}var mB={start:"end",end:"start"};function Y2(e){return e.replace(/start|end/g,function(t){return mB[t]})}function ib(e){var t=No(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function ob(e){return Xu(Tl(e)).left+ib(e).scrollLeft}function gB(e,t){var r=No(e),o=Tl(e),c=r.visualViewport,d=o.clientWidth,m=o.clientHeight,l=0,b=0;if(c){d=c.width,m=c.height;var w=FP();(w||!w&&t==="fixed")&&(l=c.offsetLeft,b=c.offsetTop)}return{width:d,height:m,x:l+ob(e),y:b}}function yB(e){var t,r=Tl(e),o=ib(e),c=(t=e.ownerDocument)==null?void 0:t.body,d=cc(r.scrollWidth,r.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),m=cc(r.scrollHeight,r.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-o.scrollLeft+ob(e),b=-o.scrollTop;return As(c||r).direction==="rtl"&&(l+=cc(r.clientWidth,c?c.clientWidth:0)-d),{width:d,height:m,x:l,y:b}}function ab(e){var t=As(e),r=t.overflow,o=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+c+o)}function HP(e){return["html","body","#document"].indexOf(rs(e))>=0?e.ownerDocument.body:oa(e)&&ab(e)?e:HP(Ky(e))}function ap(e,t){var r;t===void 0&&(t=[]);var o=HP(e),c=o===((r=e.ownerDocument)==null?void 0:r.body),d=No(o),m=c?[d].concat(d.visualViewport||[],ab(o)?o:[]):o,l=t.concat(m);return c?l:l.concat(ap(Ky(m)))}function hx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function vB(e,t){var r=Xu(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Q2(e,t,r){return t===BP?hx(gB(e,r)):yc(t)?vB(t,r):hx(yB(Tl(e)))}function _B(e){var t=ap(Ky(e)),r=["absolute","fixed"].indexOf(As(e).position)>=0,o=r&&oa(e)?Xp(e):e;return yc(o)?t.filter(function(c){return yc(c)&&NP(c,o)&&rs(c)!=="body"}):[]}function xB(e,t,r,o){var c=t==="clippingParents"?_B(e):[].concat(t),d=[].concat(c,[r]),m=d[0],l=d.reduce(function(b,w){var T=Q2(e,w,o);return b.top=cc(T.top,b.top),b.right=Og(T.right,b.right),b.bottom=Og(T.bottom,b.bottom),b.left=cc(T.left,b.left),b},Q2(e,m,o));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function WP(e){var t=e.reference,r=e.element,o=e.placement,c=o?ts(o):null,d=o?Ju(o):null,m=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,b;switch(c){case bo:b={x:m,y:t.y-r.height};break;case la:b={x:m,y:t.y+t.height};break;case ca:b={x:t.x+t.width,y:l};break;case wo:b={x:t.x-r.width,y:l};break;default:b={x:t.x,y:t.y}}var w=c?nb(c):null;if(w!=null){var T=w==="y"?"height":"width";switch(d){case Zu:b[w]=b[w]-(t[T]/2-r[T]/2);break;case zp:b[w]=b[w]+(t[T]/2-r[T]/2);break}}return b}function Mp(e,t){t===void 0&&(t={});var r=t,o=r.placement,c=o===void 0?e.placement:o,d=r.strategy,m=d===void 0?e.strategy:d,l=r.boundary,b=l===void 0?N4:l,w=r.rootBoundary,T=w===void 0?BP:w,E=r.elementContext,M=E===void 0?Ah:E,O=r.altBoundary,U=O===void 0?!1:O,V=r.padding,K=V===void 0?0:V,F=VP(typeof K!="number"?K:UP(K,Kp)),R=M===Ah?j4:Ah,L=e.rects.popper,re=e.elements[U?R:M],J=xB(yc(re)?re:re.contextElement||Tl(e.elements.popper),b,T,m),se=Xu(e.elements.reference),ie=WP({reference:se,element:L,strategy:"absolute",placement:c}),Z=hx(Object.assign({},L,ie)),Ce=M===Ah?Z:se,_e={top:J.top-Ce.top+F.top,bottom:Ce.bottom-J.bottom+F.bottom,left:J.left-Ce.left+F.left,right:Ce.right-J.right+F.right},ke=e.modifiersData.offset;if(M===Ah&&ke){var ze=ke[c];Object.keys(_e).forEach(function(Le){var Ye=[ca,la].indexOf(Le)>=0?1:-1,Ge=[bo,la].indexOf(Le)>=0?"y":"x";_e[Le]+=ze[Ge]*Ye})}return _e}function bB(e,t){t===void 0&&(t={});var r=t,o=r.placement,c=r.boundary,d=r.rootBoundary,m=r.padding,l=r.flipVariations,b=r.allowedAutoPlacements,w=b===void 0?OP:b,T=Ju(o),E=T?l?K2:K2.filter(function(U){return Ju(U)===T}):Kp,M=E.filter(function(U){return w.indexOf(U)>=0});M.length===0&&(M=E);var O=M.reduce(function(U,V){return U[V]=Mp(e,{placement:V,boundary:c,rootBoundary:d,padding:m})[ts(V)],U},{});return Object.keys(O).sort(function(U,V){return O[U]-O[V]})}function wB(e){if(ts(e)===eb)return[];var t=rg(e);return[Y2(e),t,Y2(t)]}function SB(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var c=r.mainAxis,d=c===void 0?!0:c,m=r.altAxis,l=m===void 0?!0:m,b=r.fallbackPlacements,w=r.padding,T=r.boundary,E=r.rootBoundary,M=r.altBoundary,O=r.flipVariations,U=O===void 0?!0:O,V=r.allowedAutoPlacements,K=t.options.placement,F=ts(K),R=F===K,L=b||(R||!U?[rg(K)]:wB(K)),re=[K].concat(L).reduce(function(wt,zt){return wt.concat(ts(zt)===eb?bB(t,{placement:zt,boundary:T,rootBoundary:E,padding:w,flipVariations:U,allowedAutoPlacements:V}):zt)},[]),J=t.rects.reference,se=t.rects.popper,ie=new Map,Z=!0,Ce=re[0],_e=0;_e<re.length;_e++){var ke=re[_e],ze=ts(ke),Le=Ju(ke)===Zu,Ye=[bo,la].indexOf(ze)>=0,Ge=Ye?"width":"height",Te=Mp(t,{placement:ke,boundary:T,rootBoundary:E,altBoundary:M,padding:w}),Fe=Ye?Le?ca:wo:Le?la:bo;J[Ge]>se[Ge]&&(Fe=rg(Fe));var $e=rg(Fe),Oe=[];if(d&&Oe.push(Te[ze]<=0),l&&Oe.push(Te[Fe]<=0,Te[$e]<=0),Oe.every(function(wt){return wt})){Ce=ke,Z=!1;break}ie.set(ke,Oe)}if(Z)for(var et=U?3:1,at=function(zt){var Yt=re.find(function(lt){var Ze=ie.get(lt);if(Ze)return Ze.slice(0,zt).every(function(pt){return pt})});if(Yt)return Ce=Yt,"break"},ut=et;ut>0;ut--){var Pt=at(ut);if(Pt==="break")break}t.placement!==Ce&&(t.modifiersData[o]._skip=!0,t.placement=Ce,t.reset=!0)}}const CB={name:"flip",enabled:!0,phase:"main",fn:SB,requiresIfExists:["offset"],data:{_skip:!1}};function eC(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function tC(e){return[bo,ca,la,wo].some(function(t){return e[t]>=0})}function kB(e){var t=e.state,r=e.name,o=t.rects.reference,c=t.rects.popper,d=t.modifiersData.preventOverflow,m=Mp(t,{elementContext:"reference"}),l=Mp(t,{altBoundary:!0}),b=eC(m,o),w=eC(l,c,d),T=tC(b),E=tC(w);t.modifiersData[r]={referenceClippingOffsets:b,popperEscapeOffsets:w,isReferenceHidden:T,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":E})}const IB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:kB};function TB(e,t,r){var o=ts(e),c=[wo,bo].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,m=d[0],l=d[1];return m=m||0,l=(l||0)*c,[wo,ca].indexOf(o)>=0?{x:l,y:m}:{x:m,y:l}}function PB(e){var t=e.state,r=e.options,o=e.name,c=r.offset,d=c===void 0?[0,0]:c,m=OP.reduce(function(T,E){return T[E]=TB(E,t.rects,d),T},{}),l=m[t.placement],b=l.x,w=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=w),t.modifiersData[o]=m}const EB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:PB};function zB(e){var t=e.state,r=e.name;t.modifiersData[r]=WP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const MB={name:"popperOffsets",enabled:!0,phase:"read",fn:zB,data:{}};function DB(e){return e==="x"?"y":"x"}function AB(e){var t=e.state,r=e.options,o=e.name,c=r.mainAxis,d=c===void 0?!0:c,m=r.altAxis,l=m===void 0?!1:m,b=r.boundary,w=r.rootBoundary,T=r.altBoundary,E=r.padding,M=r.tether,O=M===void 0?!0:M,U=r.tetherOffset,V=U===void 0?0:U,K=Mp(t,{boundary:b,rootBoundary:w,padding:E,altBoundary:T}),F=ts(t.placement),R=Ju(t.placement),L=!R,re=nb(F),J=DB(re),se=t.modifiersData.popperOffsets,ie=t.rects.reference,Z=t.rects.popper,Ce=typeof V=="function"?V(Object.assign({},t.rects,{placement:t.placement})):V,_e=typeof Ce=="number"?{mainAxis:Ce,altAxis:Ce}:Object.assign({mainAxis:0,altAxis:0},Ce),ke=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ze={x:0,y:0};if(se){if(d){var Le,Ye=re==="y"?bo:wo,Ge=re==="y"?la:ca,Te=re==="y"?"height":"width",Fe=se[re],$e=Fe+K[Ye],Oe=Fe-K[Ge],et=O?-Z[Te]/2:0,at=R===Zu?ie[Te]:Z[Te],ut=R===Zu?-Z[Te]:-ie[Te],Pt=t.elements.arrow,wt=O&&Pt?rb(Pt):{width:0,height:0},zt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:jP(),Yt=zt[Ye],lt=zt[Ge],Ze=op(0,ie[Te],wt[Te]),pt=L?ie[Te]/2-et-Ze-Yt-_e.mainAxis:at-Ze-Yt-_e.mainAxis,yt=L?-ie[Te]/2+et+Ze+lt+_e.mainAxis:ut+Ze+lt+_e.mainAxis,ar=t.elements.arrow&&Xp(t.elements.arrow),Kt=ar?re==="y"?ar.clientTop||0:ar.clientLeft||0:0,Mr=(Le=ke==null?void 0:ke[re])!=null?Le:0,lr=Fe+pt-Mr-Kt,Vt=Fe+yt-Mr,Et=op(O?Og($e,lr):$e,Fe,O?cc(Oe,Vt):Oe);se[re]=Et,ze[re]=Et-Fe}if(l){var ur,Mt=re==="x"?bo:wo,Er=re==="x"?la:ca,je=se[J],wr=J==="y"?"height":"width",Dr=je+K[Mt],qt=je-K[Er],rr=[bo,wo].indexOf(F)!==-1,Fr=(ur=ke==null?void 0:ke[J])!=null?ur:0,$r=rr?Dr:je-ie[wr]-Z[wr]-Fr+_e.altAxis,dr=rr?je+ie[wr]+Z[wr]-Fr-_e.altAxis:qt,cr=O&&rr?nB($r,je,dr):op(O?$r:Dr,je,O?dr:qt);se[J]=cr,ze[J]=cr-je}t.modifiersData[o]=ze}}const RB={name:"preventOverflow",enabled:!0,phase:"main",fn:AB,requiresIfExists:["offset"]};function LB(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function $B(e){return e===No(e)||!oa(e)?ib(e):LB(e)}function BB(e){var t=e.getBoundingClientRect(),r=Ku(t.width)/e.offsetWidth||1,o=Ku(t.height)/e.offsetHeight||1;return r!==1||o!==1}function OB(e,t,r){r===void 0&&(r=!1);var o=oa(t),c=oa(t)&&BB(t),d=Tl(t),m=Xu(e,c,r),l={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(o||!o&&!r)&&((rs(t)!=="body"||ab(d))&&(l=$B(t)),oa(t)?(b=Xu(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=ob(d))),{x:m.left+l.scrollLeft-b.x,y:m.top+l.scrollTop-b.y,width:m.width,height:m.height}}function FB(e){var t=new Map,r=new Set,o=[];e.forEach(function(d){t.set(d.name,d)});function c(d){r.add(d.name);var m=[].concat(d.requires||[],d.requiresIfExists||[]);m.forEach(function(l){if(!r.has(l)){var b=t.get(l);b&&c(b)}}),o.push(d)}return e.forEach(function(d){r.has(d.name)||c(d)}),o}function NB(e){var t=FB(e);return J4.reduce(function(r,o){return r.concat(t.filter(function(c){return c.phase===o}))},[])}function jB(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function VB(e){var t=e.reduce(function(r,o){var c=r[o.name];return r[o.name]=c?Object.assign({},c,o,{options:Object.assign({},c.options,o.options),data:Object.assign({},c.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var rC={placement:"bottom",modifiers:[],strategy:"absolute"};function nC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function UB(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,c=t.defaultOptions,d=c===void 0?rC:c;return function(l,b,w){w===void 0&&(w=d);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},rC,d),modifiersData:{},elements:{reference:l,popper:b},attributes:{},styles:{}},E=[],M=!1,O={state:T,setOptions:function(F){var R=typeof F=="function"?F(T.options):F;V(),T.options=Object.assign({},d,T.options,R),T.scrollParents={reference:yc(l)?ap(l):l.contextElement?ap(l.contextElement):[],popper:ap(b)};var L=NB(VB([].concat(o,T.options.modifiers)));return T.orderedModifiers=L.filter(function(re){return re.enabled}),U(),O.update()},forceUpdate:function(){if(!M){var F=T.elements,R=F.reference,L=F.popper;if(nC(R,L)){T.rects={reference:OB(R,Xp(L),T.options.strategy==="fixed"),popper:rb(L)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(_e){return T.modifiersData[_e.name]=Object.assign({},_e.data)});for(var re=0;re<T.orderedModifiers.length;re++){if(T.reset===!0){T.reset=!1,re=-1;continue}var J=T.orderedModifiers[re],se=J.fn,ie=J.options,Z=ie===void 0?{}:ie,Ce=J.name;typeof se=="function"&&(T=se({state:T,options:Z,name:Ce,instance:O})||T)}}}},update:jB(function(){return new Promise(function(K){O.forceUpdate(),K(T)})}),destroy:function(){V(),M=!0}};if(!nC(l,b))return O;O.setOptions(w).then(function(K){!M&&w.onFirstUpdate&&w.onFirstUpdate(K)});function U(){T.orderedModifiers.forEach(function(K){var F=K.name,R=K.options,L=R===void 0?{}:R,re=K.effect;if(typeof re=="function"){var J=re({state:T,name:F,instance:O,options:L}),se=function(){};E.push(J||se)}})}function V(){E.forEach(function(K){return K()}),E=[]}return O}}var HB=[pB,MB,dB,eB,EB,CB,RB,sB,IB],WB=UB({defaultModifiers:HB});const GP="Popper";function GB(e){return AI(GP,e)}A5(GP,["root"]);const qB=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],ZB=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function KB(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function px(e){return typeof e=="function"?e():e}function XB(e){return e.nodeType!==void 0}const JB=()=>Rr({root:["root"]},P5(GB)),YB={},QB=A.forwardRef(function(t,r){var o;const{anchorEl:c,children:d,direction:m,disablePortal:l,modifiers:b,open:w,placement:T,popperOptions:E,popperRef:M,slotProps:O={},slots:U={},TransitionProps:V}=t,K=Wt(t,qB),F=A.useRef(null),R=tn(F,r),L=A.useRef(null),re=tn(L,M),J=A.useRef(re);Ts(()=>{J.current=re},[re]),A.useImperativeHandle(M,()=>L.current,[]);const se=KB(T,m),[ie,Z]=A.useState(se),[Ce,_e]=A.useState(px(c));A.useEffect(()=>{L.current&&L.current.forceUpdate()}),A.useEffect(()=>{c&&_e(px(c))},[c]),Ts(()=>{if(!Ce||!w)return;const Ge=$e=>{Z($e.placement)};let Te=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:$e})=>{Ge($e)}}];b!=null&&(Te=Te.concat(b)),E&&E.modifiers!=null&&(Te=Te.concat(E.modifiers));const Fe=WB(Ce,F.current,W({placement:se},E,{modifiers:Te}));return J.current(Fe),()=>{Fe.destroy(),J.current(null)}},[Ce,l,b,w,E,se]);const ke={placement:ie};V!==null&&(ke.TransitionProps=V);const ze=JB(),Le=(o=U.root)!=null?o:"div",Ye=MI({elementType:Le,externalSlotProps:O.root,externalForwardedProps:K,additionalProps:{role:"tooltip",ref:R},ownerState:t,className:ze.root});return Q.jsx(Le,W({},Ye,{children:typeof d=="function"?d(ke):d}))}),Xy=A.forwardRef(function(t,r){const{anchorEl:o,children:c,container:d,direction:m="ltr",disablePortal:l=!1,keepMounted:b=!1,modifiers:w,open:T,placement:E="bottom",popperOptions:M=YB,popperRef:O,style:U,transition:V=!1,slotProps:K={},slots:F={}}=t,R=Wt(t,ZB),[L,re]=A.useState(!0),J=()=>{re(!1)},se=()=>{re(!0)};if(!b&&!T&&(!V||L))return null;let ie;if(d)ie=d;else if(o){const _e=px(o);ie=_e&&XB(_e)?Ya(_e).body:Ya(null).body}const Z=!T&&b&&(!V||L)?"none":void 0,Ce=V?{in:T,onEnter:J,onExited:se}:void 0;return Q.jsx($P,{disablePortal:l,container:ie,children:Q.jsx(QB,W({anchorEl:o,direction:m,disablePortal:l,modifiers:w,ref:r,open:V?!L:T,placement:E,popperOptions:M,popperRef:O,slotProps:K,slots:F},R,{style:W({position:"fixed",top:0,left:0,display:Z},U),TransitionProps:Ce,children:c}))})}),Fg={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},eO=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function tO(e,t){const{open:r}=e,{context:{selectionMode:o}}=t;if(t.type===Fg.buttonClick){var c;const b=(c=e.selectedValues[0])!=null?c:gi(null,"start",t.context);return W({},e,{open:!r,highlightedValue:r?null:b})}if(t.type===Fg.browserAutoFill)return s1(t.item,e,t.context);const d=My(e,t);switch(t.type){case un.keyDown:if(e.open){if(t.event.key==="Escape")return W({},d,{open:!1})}else{if(t.event.key==="ArrowDown"){var m;return W({},e,{open:!0,highlightedValue:(m=e.selectedValues[0])!=null?m:gi(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var l;return W({},e,{open:!0,highlightedValue:(l=e.selectedValues[0])!=null?l:gi(null,"end",t.context)})}}break;case un.itemClick:if(o==="single")return W({},d,{open:!1});break;case un.blur:return W({},d,{open:!1});default:return d}return d}function rO(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function nO(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:o=!1,defaultValue:c,disabled:d=!1,listboxId:m,listboxRef:l,multiple:b=!1,name:w,required:T,onChange:E,onHighlightChange:M,onOpenChange:O,open:U,options:V,getOptionAsString:K=eO,getSerializedValue:F=rO,value:R,componentName:L="useSelect"}=e,re=A.useRef(null),J=tn(r,re),se=A.useRef(null),ie=Co(m);let Z;R===void 0&&c===void 0?Z=[]:c!==void 0&&(b?Z=c:Z=c==null?[]:[c]);const Ce=A.useMemo(()=>{if(R!==void 0)return b?R:R==null?[]:[R]},[R,b]),{subitems:_e,contextValue:ke}=Dy(),ze=A.useMemo(()=>V!=null?new Map(V.map((Be,xt)=>[Be.value,{value:Be.value,label:Be.label,disabled:Be.disabled,ref:A.createRef(),id:`${ie}_${xt}`}])):_e,[V,_e,ie]),Le=tn(l,se),{getRootProps:Ye,active:Ge,focusVisible:Te,rootRef:Fe}=ns({disabled:d,rootRef:J}),$e=A.useMemo(()=>Array.from(ze.keys()),[ze]),Oe=A.useCallback(Be=>{if(t!==void 0){const xt=$e.find(St=>t(St,Be));return ze.get(xt)}return ze.get(Be)},[ze,t,$e]),et=A.useCallback(Be=>{var xt;const St=Oe(Be);return(xt=St==null?void 0:St.disabled)!=null?xt:!1},[Oe]),at=A.useCallback(Be=>{const xt=Oe(Be);return xt?K(xt):""},[Oe,K]),ut=A.useMemo(()=>({selectedValues:Ce,open:U}),[Ce,U]),Pt=A.useCallback(Be=>{var xt;return(xt=ze.get(Be))==null?void 0:xt.id},[ze]),wt=A.useCallback((Be,xt)=>{if(b)E==null||E(Be,xt);else{var St;E==null||E(Be,(St=xt[0])!=null?St:null)}},[b,E]),zt=A.useCallback((Be,xt)=>{M==null||M(Be,xt??null)},[M]),Yt=A.useCallback((Be,xt,St)=>{if(xt==="open"&&(O==null||O(St),St===!1&&(Be==null?void 0:Be.type)!=="blur")){var Qt;(Qt=re.current)==null||Qt.focus()}},[O]),lt=A.useCallback(Be=>{var xt,St;return Be==null?null:(xt=(St=_e.get(Be))==null?void 0:St.ref.current)!=null?xt:null},[_e]),Ze={getInitialState:()=>{var Be;return{highlightedValue:null,selectedValues:(Be=Z)!=null?Be:[],open:o}},getItemId:Pt,controlledProps:ut,focusManagement:"DOM",getItemDomElement:lt,itemComparer:t,isItemDisabled:et,rootRef:Le,onChange:wt,onHighlightChange:zt,onStateChange:Yt,reducerActionContext:A.useMemo(()=>({multiple:b}),[b]),items:$e,getItemAsString:at,selectionMode:b?"multiple":"single",stateReducer:tO,componentName:L},{dispatch:pt,getRootProps:yt,contextValue:ar,state:{open:Kt,highlightedValue:Mr,selectedValues:lr},rootRef:Vt}=l1(Ze),Et=A.useRef(Kt);Ts(()=>{if(Kt&&Mr!==null){var Be;const xt=(Be=Oe(Mr))==null?void 0:Be.ref;if(!se.current||!(xt!=null&&xt.current))return;Et.current||xt.current.focus({preventScroll:!0});const St=se.current.getBoundingClientRect(),Qt=xt.current.getBoundingClientRect();Qt.top<St.top?se.current.scrollTop-=St.top-Qt.top:Qt.bottom>St.bottom&&(se.current.scrollTop+=Qt.bottom-St.bottom)}},[Kt,Mr,Oe]);const ur=A.useCallback(Be=>Oe(Be),[Oe]),Mt=Be=>xt=>{var St;if(Be==null||(St=Be.onClick)==null||St.call(Be,xt),!xt.defaultMuiPrevented){const Qt={type:Fg.buttonClick,event:xt};pt(Qt)}},Er=Be=>xt=>{var St;(St=Be.onKeyDown)==null||St.call(Be,xt),!xt.defaultMuiPrevented&&(xt.key==="ArrowDown"||xt.key==="ArrowUp")&&(xt.preventDefault(),pt({type:un.keyDown,key:xt.key,event:xt}))},je=(Be={})=>({onClick:Mt(Be),onKeyDown:Er(Be)}),wr=(Be={})=>W({},Be,je(Be),{role:"combobox","aria-expanded":Kt,"aria-controls":ie}),Dr=(Be={})=>{const xt=zi(Be),St=Ps(wr,Ye);return W({},Be,St(xt))},qt=Be=>xt=>{var St,Qt;(St=Be.onBlur)==null||St.call(Be,xt),!xt.defaultMuiPrevented&&((Qt=se.current)!=null&&Qt.contains(xt.relatedTarget)||xt.relatedTarget===re.current)&&(xt.defaultMuiPrevented=!0)},rr=(Be={})=>({onBlur:qt(Be)}),Fr=(Be={})=>{const xt=zi(Be),St=Ps(rr,yt);return W({id:ie,role:"listbox","aria-multiselectable":b?"true":void 0},Be,St(xt))};A.useDebugValue({selectedOptions:lr,highlightedOption:Mr,open:Kt});const $r=A.useMemo(()=>W({},ar,ke),[ar,ke]);let dr;e.multiple?dr=lr:dr=lr.length>0?lr[0]:null;let cr;if(b)cr=dr.map(Be=>ur(Be)).filter(Be=>Be!==void 0);else{var Gt;cr=(Gt=ur(dr))!=null?Gt:null}const sr=Be=>xt=>{var St;if(Be==null||(St=Be.onChange)==null||St.call(Be,xt),xt.defaultMuiPrevented)return;const Qt=ze.get(xt.target.value);xt.target.value===""?pt({type:un.clearSelection}):Qt!==void 0&&pt({type:Fg.browserAutoFill,item:Qt.value,event:xt})};return{buttonActive:Ge,buttonFocusVisible:Te,buttonRef:Fe,contextValue:$r,disabled:d,dispatch:pt,getButtonProps:Dr,getHiddenInputProps:(Be={})=>{const xt=zi(Be);return W({name:w,tabIndex:-1,"aria-hidden":!0,required:T?!0:void 0,value:F(cr),style:FL},Be,{onChange:sr(xt)})},getListboxProps:Fr,getOptionMetadata:ur,listboxRef:Vt,open:Kt,options:$e,value:dr,highlightedOption:Mr}}function iO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:c,getItemState:d,registerItem:m,totalSubitemCount:l}=t,b=A.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:c}),[o,c,d]),w=A.useMemo(()=>({getItemIndex:c,registerItem:m,totalSubitemCount:l}),[m,c,l]);return Q.jsx(Hp.Provider,{value:w,children:Q.jsx(Sl.Provider,{value:b,children:r})})}function oO(e){const{checked:t,defaultChecked:r,disabled:o,onBlur:c,onChange:d,onFocus:m,onFocusVisible:l,readOnly:b,required:w}=e,[T,E]=Mu({controlled:t,default:!!r,name:"Switch",state:"checked"}),M=Z=>Ce=>{var _e;Ce.nativeEvent.defaultPrevented||(E(Ce.target.checked),d==null||d(Ce),(_e=Z.onChange)==null||_e.call(Z,Ce))},{isFocusVisibleRef:O,onBlur:U,onFocus:V,ref:K}=t1(),[F,R]=A.useState(!1);o&&F&&R(!1),A.useEffect(()=>{O.current=F},[F,O]);const L=A.useRef(null),re=Z=>Ce=>{var _e;L.current||(L.current=Ce.currentTarget),V(Ce),O.current===!0&&(R(!0),l==null||l(Ce)),m==null||m(Ce),(_e=Z.onFocus)==null||_e.call(Z,Ce)},J=Z=>Ce=>{var _e;U(Ce),O.current===!1&&R(!1),c==null||c(Ce),(_e=Z.onBlur)==null||_e.call(Z,Ce)},se=tn(K,L);return{checked:T,disabled:!!o,focusVisible:F,getInputProps:(Z={})=>W({checked:t,defaultChecked:r,disabled:o,readOnly:b,ref:se,required:w,type:"checkbox",role:"switch","aria-checked":t},Z,{onChange:M(Z),onFocus:re(Z),onBlur:J(Z)}),inputRef:se,readOnly:!!b}}function aO(e){const{value:t,defaultValue:r,onChange:o,orientation:c="horizontal",direction:d="ltr",selectionFollowsFocus:m=!1}=e,[l,b]=Mu({controlled:t,default:r,name:"Tabs",state:"value"}),w=A.useCallback((K,F)=>{b(F),o==null||o(K,F)},[o,b]),{subitems:T,contextValue:E}=Dy(),M=A.useRef(()=>{}),O=A.useCallback(K=>{var F;return(F=T.get(K))==null?void 0:F.id},[T]),U=A.useCallback(K=>M.current(K),[]),V=A.useCallback(K=>{M.current=K},[]);return{contextValue:W({direction:d,getTabId:U,getTabPanelId:O,onSelected:w,orientation:c,registerTabIdLookup:V,selectionFollowsFocus:m,value:l},E)}}const qP=A.createContext(null);function Jy(){const e=A.useContext(qP);if(e==null)throw new Error("No TabsContext provided");return e}function sO(e){const{value:t,children:r}=e,{direction:o,getItemIndex:c,onSelected:d,orientation:m,registerItem:l,registerTabIdLookup:b,selectionFollowsFocus:w,totalSubitemCount:T,value:E,getTabId:M,getTabPanelId:O}=t,U=A.useMemo(()=>({getItemIndex:c,registerItem:l,totalSubitemCount:T}),[l,c,T]),V=A.useMemo(()=>({direction:o,getTabId:M,getTabPanelId:O,onSelected:d,orientation:m,registerTabIdLookup:b,selectionFollowsFocus:w,value:E}),[o,M,O,d,m,b,w,E]);return Q.jsx(Hp.Provider,{value:U,children:Q.jsx(qP.Provider,{value:V,children:r})})}function lO(e){return e.size}function cO(e){const{value:t,id:r,rootRef:o}=e,c=Jy();if(c===null)throw new Error("No TabContext provided");const{value:d,getTabId:m}=c,l=Co(r),b=A.useRef(null),w=tn(b,o),T=A.useMemo(()=>({id:l,ref:b}),[l]),{id:E}=Ay(t??lO,T),M=E!==d,O=E!==void 0?m(E):void 0;return{hidden:M,getRootProps:(V={})=>W({"aria-labelledby":O??void 0,hidden:M,id:l??void 0},V,{ref:w}),rootRef:w}}const ZP={valueChange:"valueChange"};function uO(e,t){if(t.type===ZP.valueChange)return W({},e,{highlightedValue:t.value});const r=My(e,t),{context:{selectionFollowsFocus:o}}=t;if(t.type===un.itemsChange){if(r.selectedValues.length>0)return W({},r,{highlightedValue:r.selectedValues[0]});gi(null,"reset",t.context)}return o&&r.highlightedValue!=null?W({},r,{selectedValues:[r.highlightedValue]}):r}function dO(e){var t;const{rootRef:r}=e,{direction:o="ltr",onSelected:c,orientation:d="horizontal",value:m,registerTabIdLookup:l,selectionFollowsFocus:b}=Jy(),{subitems:w,contextValue:T}=Dy(),E=A.useCallback(ke=>{var ze;return(ze=w.get(ke))==null?void 0:ze.id},[w]);l(E);const M=A.useMemo(()=>Array.from(w.keys()),[w]),O=A.useCallback(ke=>{var ze,Le;return ke==null?null:(ze=(Le=w.get(ke))==null?void 0:Le.ref.current)!=null?ze:null},[w]),U=o==="rtl";let V;d==="vertical"?V="vertical":V=U?"horizontal-rtl":"horizontal-ltr";const K=A.useCallback((ke,ze)=>{var Le;c(ke,(Le=ze[0])!=null?Le:null)},[c]),F=A.useMemo(()=>m===void 0?{}:m!=null?{selectedValues:[m]}:{selectedValues:[]},[m]),R=A.useCallback(ke=>{var ze,Le;return(ze=(Le=w.get(ke))==null?void 0:Le.disabled)!=null?ze:!1},[w]),{contextValue:L,dispatch:re,getRootProps:J,state:{highlightedValue:se,selectedValues:ie},rootRef:Z}=l1({controlledProps:F,disabledItemsFocusable:!b,focusManagement:"DOM",getItemDomElement:O,isItemDisabled:R,items:M,rootRef:r,onChange:K,orientation:V,reducerActionContext:A.useMemo(()=>({selectionFollowsFocus:b||!1}),[b]),selectionMode:"single",stateReducer:uO});A.useEffect(()=>{m!==void 0&&m!=null&&re({type:ZP.valueChange,value:m})},[re,m]);const Ce=(ke={})=>W({},ke,J(ke),{"aria-orientation":d==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:A.useMemo(()=>W({},T,L),[T,L]),dispatch:re,getRootProps:Ce,highlightedValue:se,isRtl:U,orientation:d,rootRef:Z,selectedValue:(t=ie[0])!=null?t:null}}function hO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:c,getItemState:d,registerItem:m,totalSubitemCount:l}=t,b=A.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:c}),[o,c,d]),w=A.useMemo(()=>({getItemIndex:c,registerItem:m,totalSubitemCount:l}),[m,c,l]);return Q.jsx(Hp.Provider,{value:w,children:Q.jsx(Sl.Provider,{value:b,children:r})})}function pO(e){return e.size}function fO(e){const{value:t,rootRef:r,disabled:o=!1,id:c}=e,d=A.useRef(null),m=Co(c),{value:l,selectionFollowsFocus:b,getTabPanelId:w}=Jy(),T=A.useMemo(()=>({disabled:o,ref:d,id:m}),[o,d,m]),{id:E,index:M,totalItemCount:O}=Ay(t??pO,T),{getRootProps:U,highlighted:V,selected:K}=c1({item:E}),{getRootProps:F,rootRef:R,active:L,focusVisible:re,setFocusVisible:J}=ns({disabled:o,focusableWhenDisabled:!b,type:"button"}),se=tn(d,r,R),ie=E!==void 0?w(E):void 0;return{getRootProps:(Ce={})=>{const _e=zi(Ce),ke=Ps(U,F);return W({},Ce,ke(_e),{role:"tab","aria-controls":ie,"aria-selected":K,id:m,ref:se})},active:L,focusVisible:re,highlighted:V,index:M,rootRef:se,selected:K||E===l,setFocusVisible:J,totalTabsCount:O}}function iC(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function sb(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:o,matchFrom:c="any",stringify:d,trim:m=!1}=e;return(l,{inputValue:b,getOptionLabel:w})=>{let T=m?b.trim():b;r&&(T=T.toLowerCase()),t&&(T=iC(T));const E=T?l.filter(M=>{let O=(d||w)(M);return r&&(O=O.toLowerCase()),t&&(O=iC(O)),c==="start"?O.indexOf(T)===0:O.indexOf(T)>-1}):l;return typeof o=="number"?E.slice(0,o):E}}function Lm(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const mO=sb(),oC=5,gO=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function yO(e){const{unstable_isActiveElementInListbox:t=gO,unstable_classNamePrefix:r="Mui",autoComplete:o=!1,autoHighlight:c=!1,autoSelect:d=!1,blurOnSelect:m=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:b=!1,componentName:w="useAutocomplete",defaultValue:T=e.multiple?[]:null,disableClearable:E=!1,disableCloseOnSelect:M=!1,disabled:O,disabledItemsFocusable:U=!1,disableListWrap:V=!1,filterOptions:K=mO,filterSelectedOptions:F=!1,freeSolo:R=!1,getOptionDisabled:L,getOptionKey:re,getOptionLabel:J=Se=>{var xe;return(xe=Se.label)!=null?xe:Se},groupBy:se,handleHomeEndKeys:ie=!e.freeSolo,id:Z,includeInputInList:Ce=!1,inputValue:_e,isOptionEqualToValue:ke=(Se,xe)=>Se===xe,multiple:ze=!1,onChange:Le,onClose:Ye,onHighlightChange:Ge,onInputChange:Te,onOpen:Fe,open:$e,openOnFocus:Oe=!1,options:et,readOnly:at=!1,selectOnFocus:ut=!e.freeSolo,value:Pt}=e,wt=Co(Z);let zt=J;zt=Se=>{const xe=J(Se);return typeof xe!="string"?String(xe):xe};const Yt=A.useRef(!1),lt=A.useRef(!0),Ze=A.useRef(null),pt=A.useRef(null),[yt,ar]=A.useState(null),[Kt,Mr]=A.useState(-1),lr=c?0:-1,Vt=A.useRef(lr),[Et,ur]=Mu({controlled:Pt,default:T,name:w}),[Mt,Er]=Mu({controlled:_e,default:"",name:w,state:"inputValue"}),[je,wr]=A.useState(!1),Dr=A.useCallback((Se,xe)=>{if(!(ze?Et.length<xe.length:xe!==null)&&!l)return;let Ke;if(ze)Ke="";else if(xe==null)Ke="";else{const Qe=zt(xe);Ke=typeof Qe=="string"?Qe:""}Mt!==Ke&&(Er(Ke),Te&&Te(Se,Ke,"reset"))},[zt,Mt,ze,Te,Er,l,Et]),[qt,rr]=Mu({controlled:$e,default:!1,name:w,state:"open"}),[Fr,$r]=A.useState(!0),dr=!ze&&Et!=null&&Mt===zt(Et),cr=qt&&!at,Gt=cr?K(et.filter(Se=>!(F&&(ze?Et:[Et]).some(xe=>xe!==null&&ke(Se,xe)))),{inputValue:dr&&Fr?"":Mt,getOptionLabel:zt}):[],sr=OL({filteredOptions:Gt,value:Et,inputValue:Mt});A.useEffect(()=>{const Se=Et!==sr.value;je&&!Se||R&&!Se||Dr(null,Et)},[Et,Dr,je,sr.value,R]);const Ir=qt&&Gt.length>0&&!at,Be=sl(Se=>{Se===-1?Ze.current.focus():yt.querySelector(`[data-tag-index="${Se}"]`).focus()});A.useEffect(()=>{ze&&Kt>Et.length-1&&(Mr(-1),Be(-1))},[Et,ze,Kt,Be]);function xt(Se,xe){if(!pt.current||Se<0||Se>=Gt.length)return-1;let qe=Se;for(;;){const Ke=pt.current.querySelector(`[data-option-index="${qe}"]`),Qe=U?!1:!Ke||Ke.disabled||Ke.getAttribute("aria-disabled")==="true";if(Ke&&Ke.hasAttribute("tabindex")&&!Qe)return qe;if(xe==="next"?qe=(qe+1)%Gt.length:qe=(qe-1+Gt.length)%Gt.length,qe===Se)return-1}}const St=sl(({event:Se,index:xe,reason:qe="auto"})=>{if(Vt.current=xe,xe===-1?Ze.current.removeAttribute("aria-activedescendant"):Ze.current.setAttribute("aria-activedescendant",`${wt}-option-${xe}`),Ge&&Ge(Se,xe===-1?null:Gt[xe],qe),!pt.current)return;const Ke=pt.current.querySelector(`[role="option"].${r}-focused`);Ke&&(Ke.classList.remove(`${r}-focused`),Ke.classList.remove(`${r}-focusVisible`));let Qe=pt.current;if(pt.current.getAttribute("role")!=="listbox"&&(Qe=pt.current.parentElement.querySelector('[role="listbox"]')),!Qe)return;if(xe===-1){Qe.scrollTop=0;return}const $t=pt.current.querySelector(`[data-option-index="${xe}"]`);if($t&&($t.classList.add(`${r}-focused`),qe==="keyboard"&&$t.classList.add(`${r}-focusVisible`),Qe.scrollHeight>Qe.clientHeight&&qe!=="mouse"&&qe!=="touch")){const Tt=$t,er=Qe.clientHeight+Qe.scrollTop,or=Tt.offsetTop+Tt.offsetHeight;or>er?Qe.scrollTop=or-Qe.clientHeight:Tt.offsetTop-Tt.offsetHeight*(se?1.3:0)<Qe.scrollTop&&(Qe.scrollTop=Tt.offsetTop-Tt.offsetHeight*(se?1.3:0))}}),Qt=sl(({event:Se,diff:xe,direction:qe="next",reason:Ke="auto"})=>{if(!cr)return;const $t=xt((()=>{const Tt=Gt.length-1;if(xe==="reset")return lr;if(xe==="start")return 0;if(xe==="end")return Tt;const er=Vt.current+xe;return er<0?er===-1&&Ce?-1:V&&Vt.current!==-1||Math.abs(xe)>1?0:Tt:er>Tt?er===Tt+1&&Ce?-1:V||Math.abs(xe)>1?Tt:0:er})(),qe);if(St({index:$t,reason:Ke,event:Se}),o&&xe!=="reset")if($t===-1)Ze.current.value=Mt;else{const Tt=zt(Gt[$t]);Ze.current.value=Tt,Tt.toLowerCase().indexOf(Mt.toLowerCase())===0&&Mt.length>0&&Ze.current.setSelectionRange(Mt.length,Tt.length)}}),vn=()=>{const Se=(xe,qe)=>{const Ke=xe?zt(xe):"",Qe=qe?zt(qe):"";return Ke===Qe};if(Vt.current!==-1&&sr.filteredOptions&&sr.filteredOptions.length!==Gt.length&&sr.inputValue===Mt&&(ze?Et.length===sr.value.length&&sr.value.every((xe,qe)=>zt(Et[qe])===zt(xe)):Se(sr.value,Et))){const xe=sr.filteredOptions[Vt.current];if(xe)return Lm(Gt,qe=>zt(qe)===zt(xe))}return-1},it=A.useCallback(()=>{if(!cr)return;const Se=vn();if(Se!==-1){Vt.current=Se;return}const xe=ze?Et[0]:Et;if(Gt.length===0||xe==null){Qt({diff:"reset"});return}if(pt.current){if(xe!=null){const qe=Gt[Vt.current];if(ze&&qe&&Lm(Et,Qe=>ke(qe,Qe))!==-1)return;const Ke=Lm(Gt,Qe=>ke(Qe,xe));Ke===-1?Qt({diff:"reset"}):St({index:Ke});return}if(Vt.current>=Gt.length-1){St({index:Gt.length-1});return}St({index:Vt.current})}},[Gt.length,ze?!1:Et,F,Qt,St,cr,Mt,ze]),Jt=sl(Se=>{pg(pt,Se),Se&&it()});A.useEffect(()=>{it()},[it]);const Ft=Se=>{qt||(rr(!0),$r(!0),Fe&&Fe(Se))},hr=(Se,xe)=>{qt&&(rr(!1),Ye&&Ye(Se,xe))},vr=(Se,xe,qe,Ke)=>{if(ze){if(Et.length===xe.length&&Et.every((Qe,$t)=>Qe===xe[$t]))return}else if(Et===xe)return;Le&&Le(Se,xe,qe,Ke),ur(xe)},Lt=A.useRef(!1),Nr=(Se,xe,qe="selectOption",Ke="options")=>{let Qe=qe,$t=xe;if(ze){$t=Array.isArray(Et)?Et.slice():[];const Tt=Lm($t,er=>ke(xe,er));Tt===-1?$t.push(xe):Ke!=="freeSolo"&&($t.splice(Tt,1),Qe="removeOption")}Dr(Se,$t),vr(Se,$t,Qe,{option:xe}),!M&&(!Se||!Se.ctrlKey&&!Se.metaKey)&&hr(Se,Qe),(m===!0||m==="touch"&&Lt.current||m==="mouse"&&!Lt.current)&&Ze.current.blur()};function he(Se,xe){if(Se===-1)return-1;let qe=Se;for(;;){if(xe==="next"&&qe===Et.length||xe==="previous"&&qe===-1)return-1;const Ke=yt.querySelector(`[data-tag-index="${qe}"]`);if(!Ke||!Ke.hasAttribute("tabindex")||Ke.disabled||Ke.getAttribute("aria-disabled")==="true")qe+=xe==="next"?1:-1;else return qe}}const H=(Se,xe)=>{if(!ze)return;Mt===""&&hr(Se,"toggleInput");let qe=Kt;Kt===-1?Mt===""&&xe==="previous"&&(qe=Et.length-1):(qe+=xe==="next"?1:-1,qe<0&&(qe=0),qe===Et.length&&(qe=-1)),qe=he(qe,xe),Mr(qe),Be(qe)},G=Se=>{Yt.current=!0,Er(""),Te&&Te(Se,"","clear"),vr(Se,ze?[]:null,"clear")},te=Se=>xe=>{if(Se.onKeyDown&&Se.onKeyDown(xe),!xe.defaultMuiPrevented&&(Kt!==-1&&["ArrowLeft","ArrowRight"].indexOf(xe.key)===-1&&(Mr(-1),Be(-1)),xe.which!==229))switch(xe.key){case"Home":cr&&ie&&(xe.preventDefault(),Qt({diff:"start",direction:"next",reason:"keyboard",event:xe}));break;case"End":cr&&ie&&(xe.preventDefault(),Qt({diff:"end",direction:"previous",reason:"keyboard",event:xe}));break;case"PageUp":xe.preventDefault(),Qt({diff:-oC,direction:"previous",reason:"keyboard",event:xe}),Ft(xe);break;case"PageDown":xe.preventDefault(),Qt({diff:oC,direction:"next",reason:"keyboard",event:xe}),Ft(xe);break;case"ArrowDown":xe.preventDefault(),Qt({diff:1,direction:"next",reason:"keyboard",event:xe}),Ft(xe);break;case"ArrowUp":xe.preventDefault(),Qt({diff:-1,direction:"previous",reason:"keyboard",event:xe}),Ft(xe);break;case"ArrowLeft":H(xe,"previous");break;case"ArrowRight":H(xe,"next");break;case"Enter":if(Vt.current!==-1&&cr){const qe=Gt[Vt.current],Ke=L?L(qe):!1;if(xe.preventDefault(),Ke)return;Nr(xe,qe,"selectOption"),o&&Ze.current.setSelectionRange(Ze.current.value.length,Ze.current.value.length)}else R&&Mt!==""&&dr===!1&&(ze&&xe.preventDefault(),Nr(xe,Mt,"createOption","freeSolo"));break;case"Escape":cr?(xe.preventDefault(),xe.stopPropagation(),hr(xe,"escape")):b&&(Mt!==""||ze&&Et.length>0)&&(xe.preventDefault(),xe.stopPropagation(),G(xe));break;case"Backspace":if(ze&&!at&&Mt===""&&Et.length>0){const qe=Kt===-1?Et.length-1:Kt,Ke=Et.slice();Ke.splice(qe,1),vr(xe,Ke,"removeOption",{option:Et[qe]})}break;case"Delete":if(ze&&!at&&Mt===""&&Et.length>0&&Kt!==-1){const qe=Kt,Ke=Et.slice();Ke.splice(qe,1),vr(xe,Ke,"removeOption",{option:Et[qe]})}break}},de=Se=>{wr(!0),Oe&&!Yt.current&&Ft(Se)},fe=Se=>{if(t(pt)){Ze.current.focus();return}wr(!1),lt.current=!0,Yt.current=!1,d&&Vt.current!==-1&&cr?Nr(Se,Gt[Vt.current],"blur"):d&&R&&Mt!==""?Nr(Se,Mt,"blur","freeSolo"):l&&Dr(Se,Et),hr(Se,"blur")},Me=Se=>{const xe=Se.target.value;Mt!==xe&&(Er(xe),$r(!1),Te&&Te(Se,xe,"input")),xe===""?!E&&!ze&&vr(Se,null,"clear"):Ft(Se)},be=Se=>{const xe=Number(Se.currentTarget.getAttribute("data-option-index"));Vt.current!==xe&&St({event:Se,index:xe,reason:"mouse"})},ye=Se=>{St({event:Se,index:Number(Se.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Lt.current=!0},Ee=Se=>{const xe=Number(Se.currentTarget.getAttribute("data-option-index"));Nr(Se,Gt[xe],"selectOption"),Lt.current=!1},Je=Se=>xe=>{const qe=Et.slice();qe.splice(Se,1),vr(xe,qe,"removeOption",{option:Et[Se]})},ne=Se=>{qt?hr(Se,"toggleInput"):Ft(Se)},oe=Se=>{Se.currentTarget.contains(Se.target)&&Se.target.getAttribute("id")!==wt&&Se.preventDefault()},Ie=Se=>{Se.currentTarget.contains(Se.target)&&(Ze.current.focus(),ut&&lt.current&&Ze.current.selectionEnd-Ze.current.selectionStart===0&&Ze.current.select(),lt.current=!1)},Ve=Se=>{!O&&(Mt===""||!qt)&&ne(Se)};let Xe=R&&Mt.length>0;Xe=Xe||(ze?Et.length>0:Et!==null);let nt=Gt;return se&&(nt=Gt.reduce((Se,xe,qe)=>{const Ke=se(xe);return Se.length>0&&Se[Se.length-1].group===Ke?Se[Se.length-1].options.push(xe):Se.push({key:qe,index:qe,group:Ke,options:[xe]}),Se},[])),O&&je&&fe(),{getRootProps:(Se={})=>W({"aria-owns":Ir?`${wt}-listbox`:null},Se,{onKeyDown:te(Se),onMouseDown:oe,onClick:Ie}),getInputLabelProps:()=>({id:`${wt}-label`,htmlFor:wt}),getInputProps:()=>({id:wt,value:Mt,onBlur:fe,onFocus:de,onChange:Me,onMouseDown:Ve,"aria-activedescendant":cr?"":null,"aria-autocomplete":o?"both":"list","aria-controls":Ir?`${wt}-listbox`:void 0,"aria-expanded":Ir,autoComplete:"off",ref:Ze,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:O}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:G}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:ne}),getTagProps:({index:Se})=>W({key:Se,"data-tag-index":Se,tabIndex:-1},!at&&{onDelete:Je(Se)}),getListboxProps:()=>({role:"listbox",id:`${wt}-listbox`,"aria-labelledby":`${wt}-label`,ref:Jt,onMouseDown:Se=>{Se.preventDefault()}}),getOptionProps:({index:Se,option:xe})=>{var qe;const Ke=(ze?Et:[Et]).some($t=>$t!=null&&ke(xe,$t)),Qe=L?L(xe):!1;return{key:(qe=re==null?void 0:re(xe))!=null?qe:zt(xe),tabIndex:-1,role:"option",id:`${wt}-option-${Se}`,onMouseMove:be,onClick:Ee,onTouchStart:ye,"data-option-index":Se,"aria-disabled":Qe,"aria-selected":Ke}},id:wt,inputValue:Mt,value:Et,dirty:Xe,expanded:cr&&yt,popupOpen:cr,focused:je||Kt!==-1,anchorEl:yt,setAnchorEl:ar,focusedTag:Kt,groupedOptions:nt}}const vO=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],_O=["component","slots","slotProps"],xO=["component"];function At(e,t){const{className:r,elementType:o,ownerState:c,externalForwardedProps:d,getSlotOwnerState:m,internalForwardedProps:l}=t,b=Wt(t,vO),{component:w,slots:T={[e]:void 0},slotProps:E={[e]:void 0}}=d,M=Wt(d,_O),O=T[e]||o,U=EI(E[e],c),V=zI(W({className:r},b,{externalForwardedProps:e==="root"?M:void 0,externalSlotProps:U})),{props:{component:K},internalRef:F}=V,R=Wt(V.props,xO),L=tn(F,U==null?void 0:U.ref,t.ref),re=m?m(R):{},J=W({},c,re),se=e==="root"?K||w:K,ie=PI(O,W({},e==="root"&&!w&&!T[e]&&l,e!=="root"&&!T[e]&&l,R,se&&{as:se},{ref:L}),J);return Object.keys(re).forEach(Z=>{delete ie[Z]}),[O,ie]}function bO(e){return Hr("MuiListItem",e)}const Ng=Lr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),jg=A.createContext(!1),ud=A.createContext(!1),KP=A.createContext(!1),lb=A.createContext(void 0),XP=A.createContext(void 0),Yy=A.createContext(void 0),wO=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],SO=e=>{const{sticky:t,nested:r,nesting:o,variant:c,color:d}=e,m={root:["root",r&&"nested",o&&"nesting",t&&"sticky",d&&`color${bt(d)}`,c&&`variant${bt(c)}`],startAction:["startAction"],endAction:["endAction"]};return Rr(m,bO,{})},CO=ht("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},W({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&W({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${Ng.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),kO=ht(CO,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),IO=ht("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),TO=ht("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),xc=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyListItem"}),c=A.useContext(Yy),d=A.useContext(lb),m=A.useContext(ud),l=A.useContext(KP),b=A.useContext(jg),{component:w,className:T,children:E,nested:M=!1,sticky:O=!1,variant:U="plain",color:V="neutral",startAction:K,endAction:F,role:R,slots:L={},slotProps:re={}}=o,J=Wt(o,wO),[se,ie]=A.useState(""),[Z,Ce]=(d==null?void 0:d.split(":"))||["",""],_e=w||(Z&&!Z.match(/^(ul|ol|menu)$/)?"div":void 0);let ke=c==="menu"?"none":void 0;d&&(ke={menu:"none",menubar:"none",group:"presentation"}[Ce]),R&&(ke=R);const ze=W({},o,{sticky:O,startAction:K,endAction:F,row:m,wrap:l,variant:U,color:V,nesting:b,nested:M,component:_e,role:ke}),Le=SO(ze),Ye=W({},J,{component:_e,slots:L,slotProps:re}),[Ge,Te]=At("root",{additionalProps:{role:ke},ref:r,className:oi(Le.root,T),elementType:kO,externalForwardedProps:Ye,ownerState:ze}),[Fe,$e]=At("startAction",{className:Le.startAction,elementType:IO,externalForwardedProps:Ye,ownerState:ze}),[Oe,et]=At("endAction",{className:Le.endAction,elementType:TO,externalForwardedProps:Ye,ownerState:ze});return Q.jsx(XP.Provider,{value:ie,children:Q.jsx(jg.Provider,{value:M?se||!0:!1,children:Q.jsxs(Ge,W({},Te,{children:[K&&Q.jsx(Fe,W({},$e,{children:K})),A.Children.map(E,(at,ut)=>A.isValidElement(at)?A.cloneElement(at,W({},ut===0&&{"data-first-child":""},Qx(at,["ListItem"])&&{component:at.props.component||"div"})):at),F&&Q.jsx(Oe,W({},et,{children:F}))]}))})})});xc.muiName="ListItem";const Qy={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function Jp(e){const{children:t,nested:r,row:o=!1,wrap:c=!1}=e,d=Q.jsx(ud.Provider,{value:o,children:Q.jsx(KP.Provider,{value:c,children:A.Children.map(t,(m,l)=>A.isValidElement(m)?A.cloneElement(m,W({},l===0&&{"data-first-child":""},l===A.Children.count(t)-1&&{"data-last-child":""})):m)})});return r===void 0?d:Q.jsx(jg.Provider,{value:r,children:d})}const dd=({theme:e,ownerState:t},r)=>{let o={};function c(d){if(typeof d=="function"){const m=d(e);c(m)}else Array.isArray(d)?d.forEach(m=>{typeof m!="boolean"&&c(m)}):typeof d=="object"&&(o=W({},o,d))}return t.sx&&(c(t.sx),r.forEach(d=>{const m=o[d];if(typeof m=="string"||typeof m=="number")if(d==="borderRadius")if(typeof m=="number")o[d]=`${m}px`;else{var l;o[d]=((l=e.vars)==null?void 0:l.radius[m])||m}else["p","padding","m","margin"].indexOf(d)!==-1&&typeof m=="number"?o[d]=e.spacing(m):o[d]=m;else typeof m=="function"?o[d]=m(e):o[d]=void 0})),o};function PO(e){return Hr("MuiList",e)}const EO=Lr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),zO=A.createContext(void 0),MO=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],DO=e=>{const{variant:t,color:r,size:o,nesting:c,orientation:d,instanceSize:m}=e,l={root:["root",d,t&&`variant${bt(t)}`,r&&`color${bt(r)}`,!m&&!c&&o&&`size${bt(o)}`,m&&`size${bt(m)}`,c&&"nesting"]};return Rr(l,PO,{})},Yp=ht("ul")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:c,borderRadius:d}=dd({theme:e,ownerState:t},["p","padding","borderRadius"]);function m(l){return l==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:l==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:l==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&W({},m(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&W({},m(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?W({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),W({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},d!==void 0&&{"--List-radius":d},o!==void 0&&{"--List-padding":o},c!==void 0&&{"--List-padding":c})]}),AO=ht(Yp,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Qp=A.forwardRef(function(t,r){var o;const c=A.useContext(jg),d=A.useContext(Yy),m=A.useContext(zO),l=Wr({props:t,name:"JoyList"}),{component:b,className:w,children:T,size:E,orientation:M="vertical",wrap:O=!1,variant:U="plain",color:V="neutral",role:K,slots:F={},slotProps:R={}}=l,L=Wt(l,MO),re=E||((o=t.size)!=null?o:"md");let J;d&&(J="group"),m&&(J="presentation"),K&&(J=K);const se=W({},l,{instanceSize:t.size,size:re,nesting:c,orientation:M,wrap:O,variant:U,color:V,role:J}),ie=DO(se),Z=W({},L,{component:b,slots:F,slotProps:R}),[Ce,_e]=At("root",{ref:r,className:oi(ie.root,w),elementType:AO,externalForwardedProps:Z,ownerState:se,additionalProps:{as:b,role:J,"aria-labelledby":typeof c=="string"?c:void 0}});return Q.jsx(Ce,W({},_e,{children:Q.jsx(lb.Provider,{value:`${typeof b=="string"?b:""}:${J||""}`,children:Q.jsx(Jp,{row:M==="horizontal",wrap:O,children:T})})}))}),ng=Lr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),cb=A.createContext("horizontal"),ef=ht("div")(({theme:e,ownerState:t})=>{var r,o,c,d,m,l;return W({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:W({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${Ng.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${ng.selected}`]:W({},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${ng.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(m=e.variants[`${t.variant}Active`])==null?void 0:m[t.color]},[`&.${ng.disabled}`]:W({},(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])})});ht(ef,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>W({},!e.row&&{[`&.${ng.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function RO(e){return Hr("MuiSvgIcon",e)}Lr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const LO=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],$O=e=>{const{color:t,size:r,fontSize:o}=e,c={root:["root",t&&t!=="inherit"&&`color${bt(t)}`,r&&`size${bt(r)}`,o&&`fontSize${bt(o)}`]};return Rr(c,RO,{})},aC={sm:"xl",md:"xl2",lg:"xl3"},BO=ht("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return W({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[aC[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[aC[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&W({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),sC=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoySvgIcon"}),{children:c,className:d,color:m,component:l="svg",fontSize:b,htmlColor:w,inheritViewBox:T=!1,titleAccess:E,viewBox:M="0 0 24 24",size:O="md",slots:U={},slotProps:V={}}=o,K=Wt(o,LO),F=A.isValidElement(c)&&c.type==="svg",R=W({},o,{color:m,component:l,size:O,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:M,hasSvgAsChild:F}),L=$O(R),re=W({},K,{component:l,slots:U,slotProps:V}),[J,se]=At("root",{ref:r,className:oi(L.root,d),elementType:BO,externalForwardedProps:re,ownerState:R,additionalProps:W({color:w,focusable:!1},E&&{role:"img"},!E&&{"aria-hidden":!0},!T&&{viewBox:M},F&&c.props)});return Q.jsxs(J,W({},se,{children:[F?c.props.children:c,E?Q.jsx("title",{children:E}):null]}))});function hd(e,t){function r(o,c){return Q.jsx(sC,W({"data-testid":`${t}Icon`,ref:c},o,{children:e}))}return r.muiName=sC.muiName,A.memo(A.forwardRef(r))}const ub=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,Yu="data-skip-inverted-colors",JP=`& :not([${Yu}], [${Yu}] *)`,YP=e=>{var t,r,o,c,d,m,l,b,w,T,E,M,O,U,V,K,F,R,L,re,J,se;const ie=ub(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[ie("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[ie("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[ie("--palette-background-surface")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.surface} !important`,[ie("--palette-background-popup")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.popup} !important`,[ie("--palette-background-level1")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.level1} !important`,[ie("--palette-background-level2")]:`${(m=e.colorSchemes.light)==null?void 0:m.palette.background.level2} !important`,[ie("--palette-background-level3")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.level3} !important`,[ie("--palette-text-primary")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.text.primary} !important`,[ie("--palette-text-secondary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.secondary} !important`,[ie("--palette-text-tertiary")]:`${(T=e.colorSchemes.light)==null?void 0:T.palette.text.tertiary} !important`,[ie("--palette-divider")]:`${(E=e.colorSchemes.light)==null?void 0:E.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[ie("--palette-focusVisible")]:`${(M=e.colorSchemes.dark)==null?void 0:M.palette.focusVisible} !important`,[ie("--palette-background-body")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.background.body} !important`,[ie("--palette-background-surface")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.background.surface} !important`,[ie("--palette-background-popup")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.background.popup} !important`,[ie("--palette-background-level1")]:`${(K=e.colorSchemes.dark)==null?void 0:K.palette.background.level1} !important`,[ie("--palette-background-level2")]:`${(F=e.colorSchemes.dark)==null?void 0:F.palette.background.level2} !important`,[ie("--palette-background-level3")]:`${(R=e.colorSchemes.dark)==null?void 0:R.palette.background.level3} !important`,[ie("--palette-text-primary")]:`${(L=e.colorSchemes.dark)==null?void 0:L.palette.text.primary} !important`,[ie("--palette-text-secondary")]:`${(re=e.colorSchemes.dark)==null?void 0:re.palette.text.secondary} !important`,[ie("--palette-text-tertiary")]:`${(J=e.colorSchemes.dark)==null?void 0:J.palette.text.tertiary} !important`,[ie("--palette-divider")]:`${(se=e.colorSchemes.dark)==null?void 0:se.palette.divider} !important`}}};function OO(e){return e.theme!==void 0}const ev=e=>t=>{const r=OO(t)?t.theme:t,o=o1(r.cssVarPrefix),c=ub(r.cssVarPrefix),d=m=>{const l=m.split("-");return o(m,r.palette[l[1]][l[2]])};return{[JP]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[c("--palette-focusVisible")]:d(`palette-${e}-200`),[c("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[c("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[c("--palette-background-popup")]:d(`palette-${e}-700`),[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[c("--palette-text-primary")]:d("palette-common-white"),[c("--palette-text-secondary")]:d(`palette-${e}-200`),[c("--palette-text-tertiary")]:d(`palette-${e}-300`),[c("--palette-text-icon")]:d(`palette-${e}-200`),[c("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${Yu}]`]:YP(r)}},tv=e=>t=>{const{theme:r=t}=t,o=o1(r.cssVarPrefix),c=ub(r.cssVarPrefix),d=m=>{const l=m.split("-");return o(m,r.palette[l[1]][l[2]])};return{[JP]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[c("--palette-focusVisible")]:d(`palette-${e}-300`),[c("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[c("--palette-text-primary")]:d(`palette-${e}-100`),[c("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[c("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[c("--palette-focusVisible")]:d(`palette-${e}-500`),[c("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[c("--palette-text-primary")]:d(`palette-${e}-700`),[c("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[c("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[c("--palette-text-icon")]:d(`palette-${e}-500`),[c("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${Yu}]`]:YP(r)}},QP=hd(Q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),FO=hd(Q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),eE=A.createContext(void 0);function ec(e,t){let r=t,o=e;return e==="outlined"&&(r="neutral",o="plain"),e==="plain"&&(r="neutral"),{variant:o,color:r}}function rv(e,t,r=!1){const o=A.useContext(eE),[c,d]=typeof o=="string"?o.split(":"):[],m=ec(c||void 0,d||void 0);return m.variant=e||m.variant,m.color=t||(r?d:m.color),m}function nv({children:e,color:t,variant:r}){return Q.jsx(eE.Provider,{value:`${r||""}:${t||""}`,children:e})}function NO(e){return Hr("MuiIconButton",e)}Lr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const db=A.createContext({}),tE=A.createContext(void 0);function jO(e){return Hr("MuiCircularProgress",e)}Lr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let VO=e=>e,lC;const UO=["color","backgroundColor"],HO=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],WO=rI({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),GO=e=>{const{determinate:t,color:r,variant:o,size:c}=e,d={root:["root",t&&"determinate",r&&`color${bt(r)}`,o&&`variant${bt(o)}`,c&&`size${bt(c)}`],svg:["svg"],track:["track"],progress:["progress"]};return Rr(d,jO,{})};function su(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const qO=ht("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,c,d;const m=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:l,backgroundColor:b}=m,w=Wt(m,UO);return W({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":b,"--CircularProgress-progressColor":l,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":su("track","3px"),"--_progress-thickness":su("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":su("track","6px"),"--_progress-thickness":su("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":su("track","8px"),"--_progress-thickness":su("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:l},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},w,e.variant==="outlined"&&{"&::before":W({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},w)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(o=t.variants.solid)==null?void 0:o[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(c=t.variants.softHover)==null?void 0:c[e.color].backgroundColor,"--CircularProgress-progressColor":(d=t.variants.solid)==null?void 0:d[e.color].backgroundColor})}),ZO=ht("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),KO=ht("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),XO=ht("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&Vx(lC||(lC=VO`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),WO)),hb=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyCircularProgress"}),{children:c,className:d,color:m="primary",size:l="md",variant:b="soft",thickness:w,determinate:T=!1,value:E=T?0:25,component:M,slots:O={},slotProps:U={}}=o,V=Wt(o,HO),K=W({},o,{color:m,size:l,variant:b,thickness:w,value:E,determinate:T,instanceSize:t.size}),F=GO(K),R=W({},V,{component:M,slots:O,slotProps:U}),[L,re]=At("root",{ref:r,className:oi(F.root,d),elementType:qO,externalForwardedProps:R,ownerState:K,additionalProps:W({role:"progressbar",style:{"--CircularProgress-percent":E}},E&&T&&{"aria-valuenow":Math.round(typeof E=="number"?E:Number(E||0))})}),[J,se]=At("svg",{className:F.svg,elementType:ZO,externalForwardedProps:R,ownerState:K}),[ie,Z]=At("track",{className:F.track,elementType:KO,externalForwardedProps:R,ownerState:K}),[Ce,_e]=At("progress",{className:F.progress,elementType:XO,externalForwardedProps:R,ownerState:K});return Q.jsxs(L,W({},re,{children:[Q.jsxs(J,W({},se,{children:[Q.jsx(ie,W({},Z)),Q.jsx(Ce,W({},_e))]})),c]}))}),JO=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],YO=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:c,size:d,variant:m,loading:l}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&`variant${bt(m)}`,t&&`color${bt(t)}`,d&&`size${bt(d)}`,l&&"loading"],loadingIndicator:["loadingIndicator"]},w=Rr(b,NO,{});return o&&c&&(w.root+=` ${c}`),w},tf=ht("button")(({theme:e,ownerState:t})=>{var r,o,c,d;return[W({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:W({"--Icon-color":"currentColor"},e.focus.default)}),W({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":W({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':W({"--Icon-color":"currentColor"},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),QO=ht(tf,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),eF=ht("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o;return W({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),iv=A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyIconButton"}),{children:d,action:m,component:l="button",color:b="neutral",disabled:w,variant:T="plain",loading:E=!1,loadingIndicator:M,size:O="md",slots:U={},slotProps:V={}}=c,K=Wt(c,JO),F=A.useContext(db),R=A.useContext(tE),L=t.variant||F.variant||T,re=t.size||F.size||O,J=t.color||F.color||b,se=(o=t.loading||t.disabled)!=null?o:F.disabled||E||w,ie=A.useRef(null),Z=tn(ie,r),{focusVisible:Ce,setFocusVisible:_e,getRootProps:ke}=ns(W({},c,{disabled:se,rootRef:Z})),ze=M??Q.jsx(hb,{color:J,thickness:{sm:2,md:3,lg:4}[re]||3});A.useImperativeHandle(m,()=>({focusVisible:()=>{var ut;_e(!0),(ut=ie.current)==null||ut.focus()}}),[_e]);const Le=W({},c,{component:l,color:J,disabled:se,variant:L,loading:E,size:re,focusVisible:Ce,instanceSize:t.size}),Ye=YO(Le),Ge=ut=>{var Pt;let wt=c.onClick;if(typeof V.root=="function"?wt=V.root(Le).onClick:V.root&&(wt=V.root.onClick),(Pt=wt)==null||Pt(ut),R){var zt;(zt=R.onClick)==null||zt.call(R,ut,c.value)}};let Te=c["aria-pressed"];typeof V.root=="function"?Te=V.root(Le)["aria-pressed"]:V.root&&(Te=V.root["aria-pressed"]),R!=null&&R.value&&(Array.isArray(R.value)?Te=R.value.indexOf(c.value)!==-1:Te=R.value===c.value);const Fe=W({},K,{component:l,slots:U,slotProps:V}),[$e,Oe]=At("root",{ref:r,className:Ye.root,elementType:QO,getSlotProps:ke,externalForwardedProps:Fe,ownerState:Le,additionalProps:{onClick:Ge,"aria-pressed":Te}}),[et,at]=At("loadingIndicator",{className:Ye.loadingIndicator,elementType:eF,externalForwardedProps:Fe,ownerState:Le});return Q.jsx($e,W({},Oe,{children:E?Q.jsx(et,W({},at,{children:ze})):d}))});iv.muiName="IconButton";function tF(e){return Hr("MuiChip",e)}const fx=Lr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),rE=A.createContext({disabled:void 0,variant:void 0,color:void 0}),rF=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],nF=e=>{const{disabled:t,size:r,color:o,clickable:c,variant:d,focusVisible:m}=e,l={root:["root",t&&"disabled",o&&`color${bt(o)}`,r&&`size${bt(r)}`,d&&`variant${bt(d)}`,c&&"clickable"],action:["action",t&&"disabled",m&&"focusVisible"],label:["label",r&&`label${bt(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Rr(l,tF,{})},iF=ht("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,c;const d=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:m}=dd({theme:e,ownerState:t},["borderRadius"]);return[W({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${fx.disabled}`]:{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:d==null?void 0:d.color}]:[W({backgroundColor:e.vars.palette.background.surface},d,{[`&.${fx.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color]})],m!==void 0&&{"--_Chip-radius":m}]}),oF=ht("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>W({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),aF=ht("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,c,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},W({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]}},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${fx.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),sF=ht("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),lF=ht("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),cF=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyChip"}),{children:c,className:d,color:m="neutral",onClick:l,disabled:b=!1,size:w="md",variant:T="soft",startDecorator:E,endDecorator:M,component:O,slots:U={},slotProps:V={}}=o,K=Wt(o,rF),F=!!l||!!V.action,R=W({},o,{disabled:b,size:w,color:m,variant:T,clickable:F,focusVisible:!1}),L=typeof V.action=="function"?V.action(R):V.action,re=A.useRef(null),{focusVisible:J,getRootProps:se}=ns(W({},L,{disabled:b,rootRef:re}));R.focusVisible=J;const ie=nF(R),Z=W({},K,{component:O,slots:U,slotProps:V}),[Ce,_e]=At("root",{ref:r,className:oi(ie.root,d),elementType:iF,externalForwardedProps:Z,ownerState:R}),[ke,ze]=At("label",{className:ie.label,elementType:oF,externalForwardedProps:Z,ownerState:R}),Le=Co(ze.id),[Ye,Ge]=At("action",{className:ie.action,elementType:aF,externalForwardedProps:Z,ownerState:R,getSlotProps:se,additionalProps:{"aria-labelledby":Le,as:L==null?void 0:L.component,onClick:l}}),[Te,Fe]=At("startDecorator",{className:ie.startDecorator,elementType:sF,externalForwardedProps:Z,ownerState:R}),[$e,Oe]=At("endDecorator",{className:ie.endDecorator,elementType:lF,externalForwardedProps:Z,ownerState:R}),et=A.useMemo(()=>({disabled:b}),[b]);return Q.jsx(rE.Provider,{value:et,children:Q.jsx(nv,{variant:T,color:m,children:Q.jsxs(Ce,W({},_e,{children:[F&&Q.jsx(Ye,W({},Ge)),Q.jsx(ke,W({},ze,{id:Le,children:c})),E&&Q.jsx(Te,W({},Fe,{children:E})),M&&Q.jsx($e,W({},Oe,{children:M}))]}))})})}),uF=hd(Q.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function dF(e){return Hr("MuiChipDelete",e)}Lr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var cC;const hF=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],pF=["onDelete"],fF=e=>{const{focusVisible:t,variant:r,color:o,disabled:c}=e,d={root:["root",c&&"disabled",t&&"focusVisible",r&&`variant${bt(r)}`,o&&`color${bt(o)}`]};return Rr(d,dF,{})},mF=ht(tf,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),gF=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyChipDelete"}),{children:c,variant:d="plain",color:m="neutral",disabled:l,onKeyDown:b,onDelete:w,onClick:T,component:E,slots:M={},slotProps:O={}}=o,U=Wt(o,hF),V=A.useContext(rE),{variant:K=d,color:F=m}=rv(t.variant,t.color,!0),R=t.color||F,L=l??V.disabled,re=A.useRef(null),J=tn(re,r),{focusVisible:se,getRootProps:ie}=ns(W({},o,{disabled:L,rootRef:J})),Z=W({},o,{disabled:L,variant:K,color:R,focusVisible:se}),Ce=fF(Z),_e=W({},U,{component:E,slots:M,slotProps:O}),ke=Te=>{!L&&w&&w(Te),T&&T(Te)},ze=Te=>{["Backspace","Enter","Delete"].includes(Te.key)&&(Te.preventDefault(),!L&&w&&w(Te)),b&&b(Te)},[Le,Ye]=At("root",{ref:r,elementType:mF,getSlotProps:ie,externalForwardedProps:_e,ownerState:Z,additionalProps:{as:E,onKeyDown:ze,onClick:ke},className:Ce.root}),Ge=Wt(Ye,pF);return Q.jsx(Le,W({},Ge,{children:c??(cC||(cC=Q.jsx(uF,{})))}))});function yF(e){return Hr("MuiInput",e)}const nE=Lr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),ov=A.createContext(void 0),vF=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function _F(e,t){var r;const o=A.useContext(ov),{"aria-describedby":c,"aria-label":d,"aria-labelledby":m,autoComplete:l,autoFocus:b,className:w,defaultValue:T,disabled:E,disabledInProp:M,error:O,id:U,name:V,onClick:K,onChange:F,onKeyDown:R,onKeyUp:L,onFocus:re,onBlur:J,placeholder:se,readOnly:ie,required:Z,type:Ce,value:_e}=e,ke=Wt(e,vF),{getRootProps:ze,getInputProps:Le,focused:Ye,error:Ge,disabled:Te}=Z5({disabled:(r=M??(o==null?void 0:o.disabled))!=null?r:E,defaultValue:T,error:O,onBlur:J,onClick:K,onChange:F,onFocus:re,required:Z??(o==null?void 0:o.required),value:_e}),Fe={[t.disabled]:Te,[t.error]:Ge,[t.focused]:Ye,[t.formControl]:!!o,[w]:w},$e={[t.disabled]:Te};return W({formControl:o,propsToForward:{"aria-describedby":c,"aria-label":d,"aria-labelledby":m,autoComplete:l,autoFocus:b,disabled:Te,id:U,onKeyDown:R,onKeyUp:L,name:V,placeholder:se,readOnly:ie,type:Ce},rootStateClasses:Fe,inputStateClasses:$e,getRootProps:ze,getInputProps:Le,focused:Ye,error:Ge,disabled:Te},ke)}const xF=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],bF=e=>{const{disabled:t,fullWidth:r,variant:o,color:c,size:d}=e,m={root:["root",t&&"disabled",r&&"fullWidth",o&&`variant${bt(o)}`,c&&`color${bt(c)}`,d&&`size${bt(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Rr(m,yF,{})},iE=ht("div")(({theme:e,ownerState:t})=>{var r,o,c,d,m,l;const b=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[W({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],[`&:not([${Yu}])`]:W({},t.instanceColor&&{"--_Input-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],b,{backgroundColor:(d=b==null?void 0:b.backgroundColor)!=null?d:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":W({},(m=e.variants[`${t.variant}Hover`])==null?void 0:m[t.color],{backgroundColor:null}),[`&.${nE.disabled}`]:(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),oE=ht("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":W({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),aE=ht("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),sE=ht("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),wF=ht(iE,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),SF=ht(oE,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),CF=ht(aE,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),kF=ht(sE,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),IF=A.forwardRef(function(t,r){var o,c,d,m,l,b;const w=Wr({props:t,name:"JoyInput"}),T=_F(W({},w,{disabledInProp:t.disabled}),nE),{propsToForward:E,rootStateClasses:M,inputStateClasses:O,getRootProps:U,getInputProps:V,formControl:K,focused:F,error:R=!1,disabled:L,fullWidth:re=!1,size:J="md",color:se="neutral",variant:ie="outlined",startDecorator:Z,endDecorator:Ce,component:_e,slots:ke={},slotProps:ze={}}=T,Le=Wt(T,xF),Ye=(o=(c=t.error)!=null?c:K==null?void 0:K.error)!=null?o:R,Ge=(d=(m=t.size)!=null?m:K==null?void 0:K.size)!=null?d:J,Te=(l=t.color)!=null?l:Ye?"danger":(b=K==null?void 0:K.color)!=null?b:se,Fe=W({instanceColor:Ye?"danger":t.color},w,{fullWidth:re,color:Te,disabled:L,error:Ye,focused:F,size:Ge,variant:ie}),$e=bF(Fe),Oe=W({},Le,{component:_e,slots:ke,slotProps:ze}),[et,at]=At("root",{ref:r,className:[$e.root,M],elementType:wF,getSlotProps:U,externalForwardedProps:Oe,ownerState:Fe}),[ut,Pt]=At("input",W({},K&&{additionalProps:{id:K.htmlFor,"aria-describedby":K["aria-describedby"]}},{className:[$e.input,O],elementType:SF,getSlotProps:V,internalForwardedProps:E,externalForwardedProps:Oe,ownerState:Fe})),[wt,zt]=At("startDecorator",{className:$e.startDecorator,elementType:CF,externalForwardedProps:Oe,ownerState:Fe}),[Yt,lt]=At("endDecorator",{className:$e.endDecorator,elementType:kF,externalForwardedProps:Oe,ownerState:Fe});return Q.jsxs(et,W({},at,{children:[Z&&Q.jsx(wt,W({},zt,{children:Z})),Q.jsx(ut,W({},Pt)),Ce&&Q.jsx(Yt,W({},lt,{children:Ce}))]}))});function TF(e){return Hr("MuiListSubheader",e)}Lr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const PF=["component","className","children","id","sticky","variant","color","slots","slotProps"],EF=e=>{const{variant:t,color:r,sticky:o}=e,c={root:["root",o&&"sticky",r&&`color${bt(r)}`,t&&`variant${bt(t)}`]};return Rr(c,TF,{})},zF=ht("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;return W({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${Yu}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(o=e.variants[t.variant])==null?void 0:o[t.color])}),MF=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyListSubheader"}),{component:c,className:d,children:m,id:l,sticky:b=!1,variant:w,color:T,slots:E={},slotProps:M={}}=o,O=Wt(o,PF),U=Co(l),V=A.useContext(XP);A.useEffect(()=>{V&&V(U||"")},[V,U]);const K=W({instanceColor:t.color},o,{id:U,sticky:b,variant:w,color:w?T??"neutral":T}),F=EF(K),R=W({},O,{component:c,slots:E,slotProps:M}),[L,re]=At("root",{ref:r,className:oi(F.root,d),elementType:zF,externalForwardedProps:R,ownerState:K,additionalProps:{as:c,id:U}});return Q.jsx(L,W({},re,{children:m}))});function DF(e){return Hr("MuiAutocomplete",e)}const al=Lr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),lE=ht(Yp)(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return W({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Qy,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${Ng.nested}, & .${Ng.nested} .${EO.root}`]:{position:"initial"}})});ht(lE,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function AF(e){return Hr("MuiAutocompleteOption",e)}Lr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const RF=["children","component","color","variant","className","slots","slotProps"],LF=e=>{const{color:t,variant:r}=e,o={root:["root",t&&`color${bt(t)}`,r&&`variant${bt(r)}`]};return Rr(o,AF,{})},cE=ht(ef)(({theme:e,ownerState:t})=>{var r,o;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':W({},(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],{fontWeight:e.vars.fontWeight.md})}}),$F=ht(cE,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),BF=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyAutocompleteOption"}),{children:c,component:d="li",color:m="neutral",variant:l="plain",className:b,slots:w={},slotProps:T={}}=o,E=Wt(o,RF),{variant:M=l,color:O=m}=rv(t.variant,t.color),U=W({},o,{component:d,color:O,variant:M}),V=LF(U),K=W({},E,{component:d,slots:w,slotProps:T}),[F,R]=At("root",{ref:r,className:oi(V.root,b),elementType:$F,externalForwardedProps:K,ownerState:U,additionalProps:{as:d,role:"option"}});return Q.jsx(F,W({},R,{children:c}))});var uC,dC;const OF=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],FF=["onDelete"],NF=["key"],jF=["onBlur","onFocus","onMouseDown"],VF=["key"],UF=e=>e.current!==null&&e.current.contains(document.activeElement),HF=e=>{var t;return(t=e.label)!=null?t:e},WF=e=>`+${e}`,GF=e=>Q.jsxs(xc,{nested:!0,children:[Q.jsx(MF,{sticky:!0,children:e.group}),Q.jsx(Qp,{children:e.children})]},e.key),qF=e=>{const{disabled:t,focused:r,hasClearIcon:o,hasPopupIcon:c,popupOpen:d,variant:m,color:l,size:b,multiple:w}=e,T={root:["root",r&&"focused",o&&"hasClearIcon",c&&"hasPopupIcon",m&&`variant${bt(m)}`,l&&`color${bt(l)}`,b&&`size${bt(b)}`],wrapper:["wrapper",w&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Rr(T,DF,{})},ZF=ht(iE,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${al.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),KF=ht("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${al.multiple}`]:W({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),XF=ht(oE,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>W({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),JF=ht(aE,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),YF=ht(sE,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>W({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),QF=ht(tf,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>W({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),e6=ht(tf,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${al.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),t6=ht(lE,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),r6=ht(cE,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),n6=ht(xc,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),i6=ht(xc,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),o6=ht("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),Vg=A.forwardRef(function(t,r){var o,c,d,m,l,b,w;const T=Wr({props:t,name:"JoyAutocomplete"}),{"aria-describedby":E,"aria-label":M,"aria-labelledby":O,autoFocus:U,clearIcon:V=uC||(uC=Q.jsx(QP,{fontSize:"md"})),clearText:K="Clear",closeText:F="Close",disableClearable:R=!1,disabled:L,endDecorator:re,error:J=!1,forcePopupIcon:se="auto",freeSolo:ie=!1,getLimitTagsText:Z=WF,getOptionLabel:Ce=HF,groupBy:_e,id:ke,limitTags:ze=-1,loading:Le=!1,loadingText:Ye="Loading",multiple:Ge=!1,name:Te,noOptionsText:Fe="No options",openText:$e="Open",placeholder:Oe,popupIcon:et=dC||(dC=Q.jsx(FO,{})),readOnly:at=!1,renderGroup:ut=GF,renderOption:Pt,renderTags:wt,required:zt,type:Yt,startDecorator:lt,size:Ze="md",color:pt="neutral",variant:yt="outlined",component:ar,slots:Kt={},slotProps:Mr={}}=T,lr=Wt(T,OF),Vt=A.useContext(ov),Et=(o=(c=t.error)!=null?c:Vt==null?void 0:Vt.error)!=null?o:J,ur=(d=(m=t.size)!=null?m:Vt==null?void 0:Vt.size)!=null?d:Ze,Mt=(l=t.color)!=null?l:Et?"danger":(b=Vt==null?void 0:Vt.color)!=null?b:pt,Er=(w=L??(Vt==null?void 0:Vt.disabled))!=null?w:!1,{getRootProps:je,getInputProps:wr,getPopupIndicatorProps:Dr,getClearProps:qt,getTagProps:rr,getListboxProps:Fr,getOptionProps:$r,value:dr,dirty:cr,popupOpen:Gt,focused:sr,focusedTag:Ir,anchorEl:Be,setAnchorEl:xt,inputValue:St,groupedOptions:Qt}=yO(W({},T,{id:ke??(Vt==null?void 0:Vt.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:UF})),{onMouseDown:vn}=wr(),{onClick:it}=je(),Jt=!R&&!Er&&cr&&!at,Ft=(!ie||se===!0)&&se!==!1,hr=W({instanceColor:t.color},T,{value:dr,disabled:Er,focused:sr,getOptionLabel:Ce,hasOptions:!!Qt.length,hasClearIcon:Jt,hasPopupIcon:Ft,inputFocused:Ir===-1,popupOpen:Gt,size:ur,color:Mt,variant:yt}),vr=qF(hr),Lt=W({},lr,{component:ar,slots:Kt,slotProps:Mr});let Nr;if(Ge&&dr.length>0){const tr=Br=>{const Tr=rr(Br),{onDelete:ei}=Tr,Zt=Wt(Tr,FF);return W({disabled:Er,size:ur,onClick:ei},Zt)};wt?Nr=wt(dr,tr,hr):Nr=dr.map((Br,Tr)=>{const ei=tr({index:Tr}),{key:Zt}=ei,fr=Wt(ei,NF);return Q.jsx(cF,{size:ur,variant:"soft",color:"neutral",endDecorator:Q.jsx(gF,W({},fr),Zt),sx:{minWidth:0},children:Ce(Br)},Tr)})}const he=tn(r,xt),H={[al.disabled]:Er,[al.error]:Et,[al.focused]:sr,[al.formControl]:!!Vt},[G,te]=At("root",{ref:he,className:[vr.root,H],elementType:ZF,externalForwardedProps:Lt,ownerState:hr,getSlotProps:je,additionalProps:{onClick:tr=>{it&&it(tr),tr.currentTarget===tr.target&&vn&&vn(tr)}}}),[de,fe]=At("wrapper",{className:vr.wrapper,elementType:KF,externalForwardedProps:Lt,ownerState:hr}),Me={[al.disabled]:Er},[be,ye]=At("input",{className:[vr.input,Me],elementType:XF,getSlotProps:tr=>{const Br=wr(),{onBlur:Tr,onFocus:ei,onMouseDown:Zt}=Br,fr=Wt(Br,jF);return W({},fr,{onBlur:Qr=>{var Sr;Tr==null||Tr(Qr),(Sr=tr.onBlur)==null||Sr.call(tr,Qr)},onFocus:Qr=>{var Sr;ei==null||ei(Qr),(Sr=tr.onFocus)==null||Sr.call(tr,Qr)},onMouseDown:Qr=>{var Sr;Zt==null||Zt(Qr),(Sr=tr.onMouseDown)==null||Sr.call(tr,Qr)}})},externalForwardedProps:Lt,ownerState:hr,additionalProps:{autoFocus:U,placeholder:Oe,name:Te,readOnly:at,disabled:Er,required:zt??(Vt==null?void 0:Vt.required),type:Yt,"aria-invalid":Et||void 0,"aria-label":M,"aria-labelledby":O,"aria-describedby":E??(Vt==null?void 0:Vt["aria-describedby"])}}),[Ee,Je]=At("startDecorator",{className:vr.startDecorator,elementType:JF,externalForwardedProps:Lt,ownerState:hr}),[ne,oe]=At("endDecorator",{className:vr.endDecorator,elementType:YF,externalForwardedProps:Lt,ownerState:hr}),[Ie,Ve]=At("clearIndicator",{className:vr.clearIndicator,elementType:QF,getSlotProps:qt,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:tr=>({size:tr.size||ur,variant:tr.variant||ec(yt,Mt).variant||"plain",color:tr.color||ec(yt,Mt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":K,title:K}}),[Xe,nt]=At("popupIndicator",{className:vr.popupIndicator,elementType:e6,getSlotProps:Dr,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:tr=>({size:tr.size||ur,variant:tr.variant||ec(yt,Mt).variant||"plain",color:tr.color||ec(yt,Mt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Er,"aria-label":Gt?F:$e,title:Gt?F:$e,type:"button"}}),[Se,xe]=At("listbox",{className:vr.listbox,elementType:t6,getSlotProps:Fr,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:tr=>({size:tr.size||ur,variant:tr.variant||yt,color:tr.color||Mt,disableColorInversion:!tr.disablePortal}),additionalProps:{anchorEl:Be,open:Gt,style:Be?{width:Be.clientWidth}:{}}}),[qe,Ke]=At("loading",{className:vr.loading,elementType:n6,externalForwardedProps:Lt,ownerState:hr}),[Qe,$t]=At("noOptions",{className:vr.noOptions,elementType:i6,externalForwardedProps:Lt,ownerState:hr,additionalProps:{role:"presentation",onMouseDown:tr=>{tr.preventDefault()}}}),[Tt,er]=At("limitTag",{className:vr.limitTag,elementType:o6,externalForwardedProps:Lt,ownerState:hr});if(ze>-1&&Array.isArray(Nr)){const tr=Nr.length-ze;!sr&&tr>0&&(Nr=Nr.splice(0,ze),Nr.push(Q.jsx(Tt,W({},er,{children:Z(tr)}),Nr.length)))}const[or,jr]=At("option",{className:vr.option,elementType:r6,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:tr=>({variant:tr.variant||ec(yt,Mt).variant||"plain",color:tr.color||ec(yt,Mt).color||"neutral",disableColorInversion:!xe.disablePortal}),additionalProps:{as:"li"}}),Ai=Pt||((tr,Br)=>{const{key:Tr}=tr,ei=Wt(tr,VF);return Q.jsx(or,W({},ei,{children:Ce(Br)}),Tr)}),Vn=(tr,Br)=>{const Tr=$r({option:tr,index:Br});return Ai(W({},jr,Tr),tr,{selected:!!Tr["aria-selected"],inputValue:St,ownerState:hr})},Ho=A.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...xe.modifiers||[]],[xe.modifiers]);let mr=null;if(Be){var ko;mr=Q.jsx(nv,{variant:yt,color:Mt,children:Q.jsx(Jp,{nested:!0,children:Q.jsxs(Se,W({},xe,{className:oi(xe.className),modifiers:Ho},!((ko=T.slots)!=null&&ko.listbox)&&{as:Xy,slots:{root:xe.as||"ul"}},{children:[Qt.map((tr,Br)=>{if(_e){const Tr=tr;return ut({key:String(Tr.key),group:Tr.group,children:Tr.options.map((ei,Zt)=>Vn(ei,Tr.index+Zt))})}return Vn(tr,Br)}),Le&&Qt.length===0?Q.jsx(qe,W({},Ke,{children:Ye})):null,Qt.length===0&&!ie&&!Le?Q.jsx(Qe,W({},$t,{children:Fe})):null]}))})})}return Q.jsxs(A.Fragment,{children:[Q.jsxs(G,W({},te,{children:[lt&&Q.jsx(Ee,W({},Je,{children:lt})),Q.jsxs(de,W({},fe,{children:[Nr,Q.jsx(be,W({},ye))]})),re&&Q.jsx(ne,W({},oe,{children:re})),Jt?Q.jsx(Ie,W({},Ve,{children:V})):null,Ft?Q.jsx(Xe,W({},nt,{children:et})):null]})),mr]})});function a6(e){return Hr("MuiTypography",e)}Lr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const s6=["color","textColor"],l6=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],mx=A.createContext(!1),c6=A.createContext(!1),u6=e=>{const{gutterBottom:t,noWrap:r,level:o,color:c,variant:d}=e,m={root:["root",o,t&&"gutterBottom",r&&"noWrap",c&&`color${bt(c)}`,d&&`variant${bt(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Rr(m,a6,{})},d6=ht("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),h6=ht("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),p6=ht("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,c,d,m;const l=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return W({"--Icon-fontSize":`calc(1em * ${l})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:W({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&W({display:"flex",alignItems:"center"},t.nesting&&W({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(o=(c=e.typography[t.level])==null?void 0:c.fontSize)!=null?o:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&W({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(m=e.variants[t.variant])==null?void 0:m[t.color]))}),hC={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},$a=A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyTypography"}),{color:d,textColor:m}=c,l=Wt(c,s6),b=A.useContext(mx),w=A.useContext(c6),T=Xx(W({},l,{color:m})),{component:E,gutterBottom:M=!1,noWrap:O=!1,level:U="body-md",levelMapping:V=hC,children:K,endDecorator:F,startDecorator:R,variant:L,slots:re={},slotProps:J={}}=T,se=Wt(T,l6),ie=(o=t.color)!=null?o:L?d??"neutral":d,Z=b||w?t.level||"inherit":U,Ce=Qx(K,["Skeleton"]),_e=E||(b?"span":V[Z]||hC[Z]||"span"),ke=W({},T,{level:Z,component:_e,color:ie,gutterBottom:M,noWrap:O,nesting:b,variant:L,unstable_hasSkeleton:Ce}),ze=u6(ke),Le=W({},se,{component:_e,slots:re,slotProps:J}),[Ye,Ge]=At("root",{ref:r,className:ze.root,elementType:p6,externalForwardedProps:Le,ownerState:ke}),[Te,Fe]=At("startDecorator",{className:ze.startDecorator,elementType:d6,externalForwardedProps:Le,ownerState:ke}),[$e,Oe]=At("endDecorator",{className:ze.endDecorator,elementType:h6,externalForwardedProps:Le,ownerState:ke});return Q.jsx(mx.Provider,{value:!0,children:Q.jsxs(Ye,W({},Ge,{children:[R&&Q.jsx(Te,W({},Fe,{children:R})),Ce?A.cloneElement(K,{variant:K.props.variant||"inline"}):K,F&&Q.jsx($e,W({},Oe,{children:F}))]}))})});$a.muiName="Typography";function f6(e){return Hr("MuiButton",e)}const pC=Lr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),m6=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],g6=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:c,fullWidth:d,size:m,variant:l,loading:b}=e,w={root:["root",r&&"disabled",o&&"focusVisible",d&&"fullWidth",l&&`variant${bt(l)}`,t&&`color${bt(t)}`,m&&`size${bt(m)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},T=Rr(w,f6,{});return o&&c&&(T.root+=` ${c}`),T},y6=ht("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),v6=ht("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),_6=ht("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return W({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),uE=({theme:e,ownerState:t})=>{var r,o,c,d;return[W({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),W({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],[`&.${pC.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${pC.loading}`]:{color:"transparent"}})]},x6=ht("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(uE),dE=A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyButton"}),{children:d,action:m,color:l="primary",variant:b="solid",size:w="md",fullWidth:T=!1,startDecorator:E,endDecorator:M,loading:O=!1,loadingPosition:U="center",loadingIndicator:V,disabled:K,component:F,slots:R={},slotProps:L={}}=c,re=Wt(c,m6),J=A.useContext(db),se=A.useContext(tE),ie=t.variant||J.variant||b,Z=t.size||J.size||w,Ce=t.color||J.color||l,_e=(o=t.loading||t.disabled)!=null?o:J.disabled||O||K,ke=A.useRef(null),ze=tn(ke,r),{focusVisible:Le,setFocusVisible:Ye,getRootProps:Ge}=ns(W({},c,{disabled:_e,rootRef:ze})),Te=V??Q.jsx(hb,{color:Ce,thickness:{sm:2,md:3,lg:4}[Z]||3});A.useImperativeHandle(m,()=>({focusVisible:()=>{var yt;Ye(!0),(yt=ke.current)==null||yt.focus()}}),[Ye]);const Fe=W({},c,{color:Ce,fullWidth:T,variant:ie,size:Z,focusVisible:Le,loading:O,loadingPosition:U,disabled:_e}),$e=g6(Fe),Oe=yt=>{var ar;let Kt=c.onClick;if(typeof L.root=="function"?Kt=L.root(Fe).onClick:L.root&&(Kt=L.root.onClick),(ar=Kt)==null||ar(yt),se){var Mr;(Mr=se.onClick)==null||Mr.call(se,yt,c.value)}};let et=c["aria-pressed"];typeof L.root=="function"?et=L.root(Fe)["aria-pressed"]:L.root&&(et=L.root["aria-pressed"]),se!=null&&se.value&&(Array.isArray(se.value)?et=se.value.indexOf(c.value)!==-1:et=se.value===c.value);const at=W({},re,{component:F,slots:R,slotProps:L}),[ut,Pt]=At("root",{ref:r,className:$e.root,elementType:x6,externalForwardedProps:at,getSlotProps:Ge,ownerState:Fe,additionalProps:{onClick:Oe,"aria-pressed":et}}),[wt,zt]=At("startDecorator",{className:$e.startDecorator,elementType:y6,externalForwardedProps:at,ownerState:Fe}),[Yt,lt]=At("endDecorator",{className:$e.endDecorator,elementType:v6,externalForwardedProps:at,ownerState:Fe}),[Ze,pt]=At("loadingIndicatorCenter",{className:$e.loadingIndicatorCenter,elementType:_6,externalForwardedProps:at,ownerState:Fe});return Q.jsxs(ut,W({},Pt,{children:[(E||O&&U==="start")&&Q.jsx(wt,W({},zt,{children:O&&U==="start"?Te:E})),d,O&&U==="center"&&Q.jsx(Ze,W({},pt,{children:Te})),(M||O&&U==="end")&&Q.jsx(Yt,W({},lt,{children:O&&U==="end"?Te:M}))]}))});dE.muiName="Button";function b6(e){return Hr("MuiCard",e)}Lr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const w6=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],S6=e=>{const{size:t,variant:r,color:o,orientation:c}=e,d={root:["root",c,r&&`variant${bt(r)}`,o&&`color${bt(o)}`,t&&`size${bt(t)}`]};return Rr(d,b6,{})},C6=ht("div")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:c,borderRadius:d}=dd({theme:e,ownerState:t},["p","padding","borderRadius"]);return[W({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color]),o!==void 0&&{"--Card-padding":o},c!==void 0&&{"--Card-padding":c},d!==void 0&&{"--Card-radius":d}]}),k6=ht(C6,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),I6=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyCard"}),{className:c,color:d="neutral",component:m="div",invertedColors:l=!1,size:b="md",variant:w="outlined",children:T,orientation:E="vertical",slots:M={},slotProps:O={}}=o,U=Wt(o,w6),V=W({},o,{color:d,component:m,orientation:E,size:b,variant:w,invertedColors:l}),K=S6(V),F=W({},U,{component:m,slots:M,slotProps:O}),[R,L]=At("root",{ref:r,className:oi(K.root,c),elementType:k6,externalForwardedProps:F,ownerState:V});return Q.jsx(R,W({},L,{children:A.Children.map(T,(re,J)=>{if(!A.isValidElement(re))return re;const se={};if(Qx(re,["Divider"])){se.inset="inset"in re.props?re.props.inset:"context";const ie=E==="vertical"?"horizontal":"vertical";se.orientation="orientation"in re.props?re.props.orientation:ie}return J===0&&(se["data-first-child"]=""),J===A.Children.count(T)-1&&(se["data-last-child"]=""),A.cloneElement(re,se)})}))}),hE=Lr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function T6(e){return Hr("MuiDivider",e)}Lr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const pE=ht("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${hE.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));ht(pE,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const P6=Lr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function E6(e){return Hr("MuiCheckbox",e)}const uc=Lr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),z6=hd(Q.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),M6=hd(Q.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),D6=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],A6=e=>{const{checked:t,disabled:r,disableIcon:o,focusVisible:c,color:d,variant:m,size:l,indeterminate:b}=e,w={root:["root",t&&"checked",r&&"disabled",c&&"focusVisible",m&&`variant${bt(m)}`,d&&`color${bt(d)}`,l&&`size${bt(l)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",o&&r&&"disabled",c&&"focusVisible"],input:["input"],label:["label"]};return Rr(w,E6,{})},R6=ht("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,c;return W({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${uc.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[e.color])==null?void 0:r.color}},e.disableIcon&&{color:(o=t.variants[e.variant])==null||(o=o[e.color])==null?void 0:o.color,[`&.${uc.disabled}`]:{color:(c=t.variants[`${e.variant}Disabled`])==null||(c=c[e.color])==null?void 0:c.color}})}),L6=ht("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var r,o,c,d,m;const l=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[W({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${uc.checked}, &.${uc.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[W({},l,{backgroundColor:(o=l==null?void 0:l.backgroundColor)!=null?o:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(c=e.variants[`${t.variant}Hover`])==null?void 0:c[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${uc.disabled}`]:(m=e.variants[`${t.variant}Disabled`])==null?void 0:m[t.color]}]]}),$6=ht("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,c,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${uc.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),B6=ht("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),O6=ht("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>W({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),F6=Q.jsx(z6,{}),N6=Q.jsx(M6,{}),Qu=A.forwardRef(function(t,r){var o,c,d,m,l;const b=Wr({props:t,name:"JoyCheckbox"}),{checked:w,uncheckedIcon:T,checkedIcon:E=F6,label:M,defaultChecked:O,disabled:U,disableIcon:V=!1,overlay:K,id:F,indeterminate:R=!1,indeterminateIcon:L=N6,name:re,onBlur:J,onChange:se,onFocus:ie,onFocusVisible:Z,readOnly:Ce,required:_e,value:ke,color:ze,variant:Le,size:Ye="md",component:Ge,slots:Te={},slotProps:Fe={}}=b,$e=Wt(b,D6),Oe=A.useContext(ov),et=(o=(c=t.disabled)!=null?c:Oe==null?void 0:Oe.disabled)!=null?o:U,at=(d=(m=t.size)!=null?m:Oe==null?void 0:Oe.size)!=null?d:Ye,ut=Co(F??(Oe==null?void 0:Oe.htmlFor)),Pt={checked:w,defaultChecked:O,disabled:et,onBlur:J,onChange:se,onFocus:ie,onFocusVisible:Z},{getInputProps:wt,checked:zt,disabled:Yt,focusVisible:lt}=oO(Pt),Ze=zt||R,ar=Ze?Le||"solid":Le||"outlined",Kt=t.color||(Oe!=null&&Oe.error?"danger":(l=Oe==null?void 0:Oe.color)!=null?l:ze),Vt=W({},b,{checked:zt,disabled:Yt,disableIcon:V,overlay:K,focusVisible:lt,color:Ze?Kt||"primary":Kt||"neutral",variant:ar,size:at}),Et=A6(Vt),ur=W({},$e,{component:Ge,slots:Te,slotProps:Fe}),[Mt,Er]=At("root",{ref:r,className:Et.root,elementType:R6,externalForwardedProps:ur,ownerState:Vt}),[je,wr]=At("checkbox",{className:Et.checkbox,elementType:L6,externalForwardedProps:ur,ownerState:Vt}),[Dr,qt]=At("action",{className:Et.action,elementType:$6,externalForwardedProps:ur,ownerState:Vt}),[rr,Fr]=At("input",{additionalProps:W({id:ut,name:re,value:ke,readOnly:Ce,role:void 0,required:_e??(Oe==null?void 0:Oe.required),"aria-describedby":Oe==null?void 0:Oe["aria-describedby"]},R&&{"aria-checked":"mixed"}),className:Et.input,elementType:B6,externalForwardedProps:ur,getSlotProps:wt,ownerState:Vt}),[$r,dr]=At("label",{additionalProps:{htmlFor:ut},className:Et.label,elementType:O6,externalForwardedProps:ur,ownerState:Vt});let cr=T;return V?cr=null:R?cr=L:zt&&(cr=E),Q.jsxs(Mt,W({},Er,{children:[Q.jsxs(je,W({},wr,{children:[Q.jsx(Dr,W({},qt,{children:Q.jsx(rr,W({},Fr))})),cr]})),M&&Q.jsx(mx.Provider,{value:!0,children:Q.jsx($r,W({},dr,{children:M}))})]}))});function j6(e){const{children:t,disableColorScheme:r=!1}=e;return Q.jsxs(A.Fragment,{children:[Q.jsx(C5,{styles:o=>{var c,d;const m={};r||Object.entries(o.colorSchemes).forEach(([b,w])=>{var T;m[o.getColorSchemeSelector(b).replace(/\s*&/,"")]={colorScheme:(T=w.palette)==null?void 0:T.mode}});const l=(c=(d=o.components)==null||(d=d.JoyTypography)==null||(d=d.defaultProps)==null?void 0:d.level)!=null?c:"body-md";return W({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:W({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[l],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},m)},defaultTheme:Up}),t]})}function V6(e){return Hr("MuiDialogContent",e)}Lr("MuiDialogContent",["root"]);const av=A.createContext(void 0);function U6(e){return Hr("MuiDialogTitle",e)}const fE=Lr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),H6=["component","children","orientation","slots","slotProps"],W6=()=>Rr({root:["root"]},V6,{}),G6=ht(pE,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${P6.root} > .${fE.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),mE=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyDialogContent"}),c=A.useContext(av),{component:d="div",children:m,orientation:l="vertical",slots:b={},slotProps:w={}}=o,T=Wt(o,H6),E=W({},T,{component:d,slots:b,slotProps:w}),M=W({},o,{component:d,orientation:l}),O=W6(),[U,V]=At("root",{ref:r,className:O.root,elementType:G6,externalForwardedProps:E,ownerState:M,additionalProps:{id:c==null?void 0:c.describedBy}});return Q.jsx(U,W({},V,{children:m}))}),pb=A.createContext(void 0),q6=["component","children","variant","color","level","slots","slotProps"],Z6=e=>{const{level:t,color:r,variant:o}=e,c={root:["root",t,r&&`color${bt(r)}`,o&&`variant${bt(o)}`]};return Rr(c,U6,{})},K6=ht("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const c=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return W({"--Icon-fontSize":`calc(1em * ${c})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&W({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(o=e.variants[t.variant])==null?void 0:o[t.color]),{[`.${hE.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),X6={sm:"title-md",md:"title-lg",lg:"h4"},gE=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyDialogTitle"}),c=A.useContext(pb),d=A.useContext(av),{component:m="h2",children:l,variant:b,color:w,level:T=X6[c||"md"],slots:E={},slotProps:M={}}=o,O=Wt(o,q6),U=t.color||(b?w??"neutral":w),V=W({},O,{component:m,slots:E,slotProps:M}),K=W({},o,{component:m,color:U,variant:b,level:T}),F=Z6(K),[R,L]=At("root",{ref:r,className:F.root,elementType:K6,externalForwardedProps:V,ownerState:K,additionalProps:{id:d==null?void 0:d.labelledBy}});return Q.jsx(R,W({},L,{children:l}))}),J6=["className","children","component","inset","orientation","role","slots","slotProps"],Y6=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${bt(r)}`]};return Rr(o,T6,{})},yE=ht("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>W({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?W({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),fb=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyDivider"}),{className:c,children:d,component:m=d!=null?"div":"hr",inset:l,orientation:b="horizontal",role:w=m!=="hr"?"separator":void 0,slots:T={},slotProps:E={}}=o,M=Wt(o,J6),O=W({},o,{inset:l,role:w,orientation:b,component:m}),U=Y6(O),V=W({},M,{component:m,slots:T,slotProps:E}),[K,F]=At("root",{ref:r,className:oi(U.root,c),elementType:yE,externalForwardedProps:V,ownerState:O,additionalProps:W({as:m,role:w},w==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return Q.jsx(K,W({},F,{children:d}))});fb.muiName="Divider";const vE=A.createContext(void 0),_E=ht("div")(({ownerState:e,theme:t})=>W({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));ht(_E,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const xE=ht("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));ht(xE,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function Q6(e){return Hr("MuiDrawer",e)}Lr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const eN=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],tN=e=>{const{open:t,variant:r,color:o,size:c}=e,d={root:["root",!t&&"hidden",r&&`variant${bt(r)}`,o&&`color${bt(o)}`,c&&`size${bt(c)}`],backdrop:["backdrop"],content:["content"]};return Rr(d,Q6,{})},rN=ht(_E,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),nN=ht(xE,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),iN=ht("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return W({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${fE.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),bE=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyDrawer"}),{children:c,anchor:d="left",container:m,disableAutoFocus:l=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:T=!1,disableRestoreFocus:E=!1,disableScrollLock:M=!1,hideBackdrop:O=!1,color:U="neutral",variant:V="plain",invertedColors:K=!1,size:F="md",onClose:R,open:L,component:re,slots:J={},slotProps:se={}}=o,ie=Wt(o,eN),Z=W({},o,{anchor:d,disableAutoFocus:l,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:T,disableRestoreFocus:E,disableScrollLock:M,hideBackdrop:O,invertedColors:K,color:U,variant:V,size:F}),{getRootProps:Ce,getBackdropProps:_e,rootRef:ke,portalRef:ze,isTopModal:Le}=B4(W({},Z,{rootRef:r,children:null})),Ye=tN(Z),Ge=W({},ie,{component:re,slots:J,slotProps:se}),Te=Co(),Fe=Co(),$e=A.useMemo(()=>({variant:V,color:U,labelledBy:Te,describedBy:Fe}),[U,V,Te,Fe]),[Oe,et]=At("root",{ref:ke,className:Ye.root,elementType:rN,externalForwardedProps:Ge,getSlotProps:Ce,ownerState:Z}),[at,ut]=At("backdrop",{className:Ye.backdrop,elementType:nN,externalForwardedProps:Ge,getSlotProps:_e,ownerState:Z}),[Pt,wt]=At("content",{className:Ye.content,elementType:iN,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Te,"aria-describedby":Fe},externalForwardedProps:Ge,ownerState:Z});return Q.jsx(vE.Provider,{value:R,children:Q.jsx(pb.Provider,{value:F,children:Q.jsx(av.Provider,{value:$e,children:Q.jsx($P,{ref:ze,container:m,disablePortal:T,children:Q.jsxs(Oe,W({},et,{children:[O?null:Q.jsx(at,W({},ut)),Q.jsx(W5,{disableEnforceFocus:b,disableAutoFocus:l,disableRestoreFocus:E,isEnabled:Le,open:L,children:Q.jsx(Pt,W({},wt,{children:c}))})]}))})})})})});function oN(e){return Hr("MuiListDivider",e)}Lr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const aN=["component","role","className","children","inset","orientation","slots","slotProps"],sN=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${bt(r)}`]};return Rr(o,oN,{})},lN=ht(yE,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&W({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&W({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),wE=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyListDivider"}),c=A.useContext(ud),d=A.useContext(lb),{component:m,role:l,className:b,children:w,inset:T="context",orientation:E,slots:M={},slotProps:O={}}=o,U=Wt(o,aN),[V]=(d==null?void 0:d.split(":"))||["",""],K=m||(V&&!V.match(/^(ul|ol|menu)$/)?"div":"li"),F=l||(K==="li"?"separator":void 0),R=E||(c?"vertical":"horizontal"),L=W({},o,{inset:T,row:c,orientation:R,component:K,role:F}),re=sN(L),J=W({},U,{component:K,slots:M,slotProps:O}),[se,ie]=At("root",{ref:r,className:oi(re.root,b),elementType:lN,externalForwardedProps:J,ownerState:L,additionalProps:W({as:K,role:F},F==="separator"&&R==="vertical"&&{"aria-orientation":"vertical"})});return Q.jsx(se,W({},ie,{children:w}))});function cN(e){return Hr("MuiListItemContent",e)}Lr("MuiListItemContent",["root"]);const uN=["component","className","children","slots","slotProps"],dN=()=>Rr({root:["root"]},cN,{}),hN=ht("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),pN=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyListItemContent"}),{component:c,className:d,children:m,slots:l={},slotProps:b={}}=o,w=Wt(o,uN),T=W({},o),E=dN(),M=W({},w,{component:c,slots:l,slotProps:b}),[O,U]=At("root",{ref:r,className:oi(E.root,d),elementType:hN,externalForwardedProps:M,ownerState:T});return Q.jsx(O,W({},U,{children:m}))});function fN(e){return Hr("MuiListItemDecorator",e)}Lr("MuiListItemDecorator",["root"]);const mN=["component","className","children","slots","slotProps"],gN=()=>Rr({root:["root"]},fN,{}),yN=ht("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),ig=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyListItemDecorator"}),{component:c,className:d,children:m,slots:l={},slotProps:b={}}=o,w=Wt(o,mN),T=A.useContext(cb),E=W({parentOrientation:T},o),M=gN(),O=W({},w,{component:c,slots:l,slotProps:b}),[U,V]=At("root",{ref:r,className:oi(M.root,d),elementType:yN,externalForwardedProps:O,ownerState:E});return Q.jsx(U,W({},V,{children:m}))});function vN(e){return Hr("MuiMenu",e)}Lr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const _N=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],xN=e=>{const{open:t,variant:r,color:o,size:c}=e,d={root:["root",t&&"expanded",r&&`variant${bt(r)}`,o&&`color${bt(o)}`,c&&`size${bt(c)}`],listbox:["listbox"]};return Rr(d,vN,{})},fC=ht(Yp,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const c=(r=e.variants[t.variant])==null?void 0:r[t.color];return[W({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Qy,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(c!=null&&c.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color])]}),bN=A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyMenu"}),{actions:d,children:m,color:l="neutral",component:b,disablePortal:w=!1,keepMounted:T=!1,id:E,invertedColors:M=!1,onItemsChange:O,modifiers:U,variant:V="outlined",size:K="md",slots:F={},slotProps:R={}}=c,L=Wt(c,_N),{contextValue:re,getListboxProps:J,dispatch:se,open:ie,triggerElement:Z}=m3({onItemsChange:O,id:E,listboxRef:r});A.useImperativeHandle(d,()=>({dispatch:se,resetHighlight:()=>se({type:un.resetHighlight,event:null})}),[se]);const Ce=W({},c,{disablePortal:w,invertedColors:M,color:l,variant:V,size:K,open:ie,nesting:!1,row:!1}),_e=xN(Ce),ke=W({},L,{component:b,slots:F,slotProps:R}),ze=A.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...U||[]],[U]),Le=MI({elementType:fC,getSlotProps:J,externalForwardedProps:ke,externalSlotProps:{},ownerState:Ce,additionalProps:{anchorEl:Z,open:ie&&Z!==null,disablePortal:w,keepMounted:T,modifiers:ze},className:_e.root});return Q.jsx(fC,W({},Le,!((o=c.slots)!=null&&o.root)&&{as:Xy,slots:{root:b||"ul"}},{children:Q.jsx(g3,{value:re,children:Q.jsx(nv,{variant:M?void 0:V,color:l,children:Q.jsx(Yy.Provider,{value:"menu",children:Q.jsx(Jp,{nested:!0,children:m})})})})}))});function wN(e){return Hr("MuiMenuButton",e)}Lr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const SN=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],CN=e=>{const{color:t,disabled:r,fullWidth:o,size:c,variant:d,loading:m}=e,l={root:["root",r&&"disabled",o&&"fullWidth",d&&`variant${bt(d)}`,t&&`color${bt(t)}`,c&&`size${bt(c)}`,m&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Rr(l,wN,{})},kN=ht("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(uE),IN=ht("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),TN=ht("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),PN=ht("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return W({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),EN=A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyMenuButton"}),{children:d,color:m="neutral",component:l,disabled:b=!1,endDecorator:w,loading:T=!1,loadingPosition:E="center",loadingIndicator:M,size:O="md",slotProps:U={},slots:V={},startDecorator:K,variant:F="outlined"}=c,R=Wt(c,SN),L=A.useContext(db),re=t.variant||L.variant||F,J=t.size||L.size||O,se=(o=t.disabled)!=null?o:L.disabled||b||T,{getRootProps:ie,open:Z,active:Ce}=C4({rootRef:r,disabled:se}),_e=M??Q.jsx(hb,{color:m,thickness:{sm:2,md:3,lg:4}[J]||3}),ke=W({},c,{active:Ce,color:m,disabled:se,open:Z,size:J,variant:re}),ze=CN(ke),Le=W({},R,{component:l,slots:V,slotProps:U}),[Ye,Ge]=At("root",{elementType:kN,getSlotProps:ie,externalForwardedProps:Le,ref:r,ownerState:ke,className:ze.root}),[Te,Fe]=At("startDecorator",{className:ze.startDecorator,elementType:IN,externalForwardedProps:Le,ownerState:ke}),[$e,Oe]=At("endDecorator",{className:ze.endDecorator,elementType:TN,externalForwardedProps:Le,ownerState:ke}),[et,at]=At("loadingIndicatorCenter",{className:ze.loadingIndicatorCenter,elementType:PN,externalForwardedProps:Le,ownerState:ke});return Q.jsxs(Ye,W({},Ge,{children:[(K||T&&E==="start")&&Q.jsx(Te,W({},Fe,{children:T&&E==="start"?_e:K})),d,T&&E==="center"&&Q.jsx(et,W({},at,{children:_e})),(w||T&&E==="end")&&Q.jsx($e,W({},Oe,{children:T&&E==="end"?_e:w}))]}))});function zN(e){return Hr("MuiMenuItem",e)}Lr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const MN=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],DN=e=>{const{focusVisible:t,disabled:r,selected:o,color:c,variant:d}=e,m={root:["root",t&&"focusVisible",r&&"disabled",o&&"selected",c&&`color${bt(c)}`,d&&`variant${bt(d)}`]};return Rr(m,zN,{})},AN=ht(ef,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),RN=A.memo(A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyMenuItem"}),c=A.useContext(ud),{children:d,disabled:m=!1,component:l="li",selected:b=!1,color:w="neutral",orientation:T="horizontal",variant:E="plain",slots:M={},slotProps:O={},id:U}=o,V=Wt(o,MN),{variant:K=E,color:F=w}=rv(t.variant,t.color),{getRootProps:R,disabled:L,focusVisible:re}=T4({id:U,disabled:m,rootRef:r}),J=W({},o,{component:l,color:F,disabled:L,focusVisible:re,orientation:T,selected:b,row:c,variant:K}),se=DN(J),ie=W({},V,{component:l,slots:M,slotProps:O}),[Z,Ce]=At("root",{ref:r,elementType:AN,getSlotProps:R,externalForwardedProps:ie,className:se.root,ownerState:J});return Q.jsx(cb.Provider,{value:T,children:Q.jsx(Z,W({},Ce,{children:d}))})})),Y0=A.forwardRef(function(t,r){const{contextValue:o,id:c}=P4(t.id);return Q.jsx(Sl.Provider,{value:o,children:Q.jsx(RN,W({},t,{id:c,ref:r}))})});function LN(e){return Hr("MuiModalClose",e)}Lr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var mC;const $N=["component","color","variant","size","onClick","slots","slotProps"],BN=e=>{const{variant:t,color:r,disabled:o,focusVisible:c,size:d}=e,m={root:["root",o&&"disabled",c&&"focusVisible",t&&`variant${bt(t)}`,r&&`color${bt(r)}`,d&&`size${bt(d)}`]};return Rr(m,LN,{})},ON=ht(tf,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r;return W({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((r=t.variants[e.variant])!=null&&(r=r[e.color])!=null&&r.backgroundColor)&&{color:t.vars.palette.text.secondary})}),FN={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},SE=A.forwardRef(function(t,r){var o,c,d,m,l,b;const w=Wr({props:t,name:"JoyModalClose"}),{component:T="button",color:E="neutral",variant:M="plain",size:O="md",onClick:U,slots:V={},slotProps:K={}}=w,F=Wt(w,$N),R=A.useContext(vE),L=A.useContext(av),re=(o=(c=t.variant)!=null?c:FN[L==null?void 0:L.variant])!=null?o:M,J=(d=(m=t.color)!=null?m:L==null?void 0:L.color)!=null?d:E,se=A.useContext(pb),ie=(l=(b=t.size)!=null?b:se)!=null?l:O,{focusVisible:Z,getRootProps:Ce}=ns(W({},w,{rootRef:r})),_e=W({},w,{color:J,component:T,variant:re,size:ie,focusVisible:Z}),ke=BN(_e),[ze,Le]=At("root",{ref:r,elementType:ON,getSlotProps:Ce,externalForwardedProps:W({onClick:Ye=>{R==null||R(Ye,"closeClick"),U==null||U(Ye)}},F,{component:T,slots:V,slotProps:K}),className:ke.root,ownerState:_e});return Q.jsx(ze,W({},Le,{children:mC||(mC=Q.jsx(QP,{}))}))});function NN(e){return Hr("MuiOption",e)}const jN=Lr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),VN=["component","children","disabled","value","label","variant","color","slots","slotProps"],UN=e=>{const{disabled:t,highlighted:r,selected:o}=e;return Rr({root:["root",t&&"disabled",r&&"highlighted",o&&"selected"]},NN,{})},HN=ht(ef,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[`${t.variant}Hover`])==null?void 0:r[t.color];return{[`&.${jN.highlighted}:not([aria-selected="true"])`]:{backgroundColor:o==null?void 0:o.backgroundColor}}}),WN=A.memo(A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyOption"}),{component:d="li",children:m,disabled:l=!1,value:b,label:w,variant:T="plain",color:E="neutral",slots:M={},slotProps:O={}}=c,U=Wt(c,VN),V=A.useContext(ud),{variant:K=T,color:F=E}=rv(t.variant,t.color),R=A.useRef(null),L=tn(R,r),re=w??(typeof m=="string"?m:(o=R.current)==null?void 0:o.innerText),{getRootProps:J,selected:se,highlighted:ie,index:Z}=O4({disabled:l,label:re,value:b,rootRef:L}),Ce=W({},c,{disabled:l,selected:se,highlighted:ie,index:Z,component:d,variant:K,color:F,row:V}),_e=UN(Ce),ke=W({},U,{component:d,slots:M,slotProps:O}),[ze,Le]=At("root",{ref:r,getSlotProps:J,elementType:HN,externalForwardedProps:ke,className:_e.root,ownerState:Ce});return Q.jsx(ze,W({},Le,{children:m}))})),GN=A.forwardRef(function(t,r){const{contextValue:o}=F4(t.value);return Q.jsx(Sl.Provider,{value:o,children:Q.jsx(WN,W({},t,{ref:r}))})}),qN=hd(Q.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function ZN(e){return Hr("MuiSelect",e)}const Ou=Lr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var gC;const KN=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function XN(e){var t;return Array.isArray(e)?Q.jsx(A.Fragment,{children:e.map(r=>r.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const JN=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],YN=e=>{const{color:t,disabled:r,focusVisible:o,size:c,variant:d,open:m,multiple:l}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&"expanded",d&&`variant${bt(d)}`,t&&`color${bt(t)}`,c&&`size${bt(c)}`,l&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",m&&"expanded"],listbox:["listbox",m&&"expanded",r&&"disabled"]};return Rr(b,ZN,{})},QN=ht("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,c,d,m;const l=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color],{borderRadius:b}=dd({theme:e,ownerState:t},["borderRadius"]);return[W({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],'&:not([data-inverted-colors="false"])':W({},t.instanceColor&&{"--_Select-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":l!=null&&l.backgroundColor?l==null?void 0:l.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(l!=null&&l.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],l,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${Ou.focusVisible}`]:{"--Select-indicatorColor":l==null?void 0:l.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${Ou.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],[`&.${Ou.disabled}`]:(m=e.variants[`${t.variant}Disabled`])==null?void 0:m[t.color]},b!==void 0&&{"--Select-radius":b}]}),ej=ht("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>W({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),tj=ht(Yp,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return W({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Qy,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),rj=ht("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),nj=ht("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),ij=ht("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>W({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${Ou.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${Ou.expanded}, .${Ou.disabled} > &`]:{"--Icon-color":"currentColor"}})),oj=A.forwardRef(function(t,r){var o,c,d,m,l,b,w;const T=Wr({props:t,name:"JoySelect"}),E=T,{action:M,autoFocus:O,children:U,defaultValue:V,defaultListboxOpen:K=!1,disabled:F,getSerializedValue:R,placeholder:L,listboxId:re,listboxOpen:J,onChange:se,onListboxOpenChange:ie,onClose:Z,renderValue:Ce,required:_e=!1,value:ke,size:ze="md",variant:Le="outlined",color:Ye="neutral",startDecorator:Ge,endDecorator:Te,indicator:Fe=gC||(gC=Q.jsx(qN,{})),"aria-describedby":$e,"aria-label":Oe,"aria-labelledby":et,id:at,name:ut,multiple:Pt=!1,slots:wt={},slotProps:zt={}}=E,Yt=Wt(E,KN),lt=A.useContext(ov),Ze=(o=(c=t.disabled)!=null?c:lt==null?void 0:lt.disabled)!=null?o:F,pt=(d=(m=t.size)!=null?m:lt==null?void 0:lt.size)!=null?d:ze,yt=(l=t.color)!=null?l:lt!=null&&lt.error?"danger":(b=lt==null?void 0:lt.color)!=null?b:Ye,ar=Ce??XN,[Kt,Mr]=A.useState(null),lr=A.useRef(null),Vt=A.useRef(null),Et=tn(r,lr);A.useImperativeHandle(M,()=>({focusVisible:()=>{var G;(G=Vt.current)==null||G.focus()}}),[]),A.useEffect(()=>{Mr(lr.current)},[]),A.useEffect(()=>{O&&Vt.current.focus()},[O]);const ur=A.useCallback(G=>{ie==null||ie(G),G||Z==null||Z()},[Z,ie]),{buttonActive:Mt,buttonFocusVisible:Er,contextValue:je,disabled:wr,getButtonProps:Dr,getListboxProps:qt,getHiddenInputProps:rr,getOptionMetadata:Fr,open:$r,value:dr}=nO({buttonRef:Vt,defaultOpen:K,defaultValue:V,disabled:Ze,getSerializedValue:R,listboxId:re,multiple:Pt,name:ut,required:_e,onChange:se,onOpenChange:ur,open:J,value:ke}),cr=W({},T,{active:Mt,defaultListboxOpen:K,disabled:wr,focusVisible:Er,open:$r,renderValue:ar,value:dr,size:pt,variant:Le,color:yt}),Gt=YN(cr),sr=W({},Yt,{slots:wt,slotProps:zt}),Ir=A.useMemo(()=>{let G;if(Pt)G=dr.map(de=>Fr(de)).filter(de=>de!==void 0);else{var te;G=(te=Fr(dr))!=null?te:null}return G},[Fr,dr,Pt]),[Be,xt]=At("root",{ref:Et,className:Gt.root,elementType:QN,externalForwardedProps:sr,ownerState:cr}),[St,Qt]=At("button",{additionalProps:{"aria-describedby":$e??(lt==null?void 0:lt["aria-describedby"]),"aria-label":Oe,"aria-labelledby":et??(lt==null?void 0:lt.labelId),"aria-required":_e?"true":void 0,id:at??(lt==null?void 0:lt.htmlFor),name:ut},className:Gt.button,elementType:ej,externalForwardedProps:sr,getSlotProps:Dr,ownerState:cr}),[vn,it]=At("listbox",{additionalProps:{anchorEl:Kt,open:$r,placement:"bottom",keepMounted:!0},className:Gt.listbox,elementType:tj,externalForwardedProps:sr,getSlotProps:qt,ownerState:W({},cr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:G=>({size:G.size||pt,variant:G.variant||Le,color:G.color||(G.disablePortal?yt:Ye),disableColorInversion:!G.disablePortal})}),[Jt,Ft]=At("startDecorator",{className:Gt.startDecorator,elementType:rj,externalForwardedProps:sr,ownerState:cr}),[hr,vr]=At("endDecorator",{className:Gt.endDecorator,elementType:nj,externalForwardedProps:sr,ownerState:cr}),[Lt,Nr]=At("indicator",{className:Gt.indicator,elementType:ij,externalForwardedProps:sr,ownerState:cr}),he=A.useMemo(()=>[...JN,...it.modifiers||[]],[it.modifiers]);let H=L;return(Array.isArray(Ir)&&Ir.length>0||!Array.isArray(Ir)&&Ir)&&(H=ar(Ir)),Q.jsxs(A.Fragment,{children:[Q.jsxs(Be,W({},xt,{children:[Ge&&Q.jsx(Jt,W({},Ft,{children:Ge})),Q.jsx(St,W({},Qt,{children:H})),Te&&Q.jsx(hr,W({},vr,{children:Te})),Fe&&Q.jsx(Lt,W({},Nr,{children:Fe})),Q.jsx("input",W({},rr()))]})),Kt&&Q.jsx(vn,W({},it,{className:oi(it.className),modifiers:he},!((w=T.slots)!=null&&w.listbox)&&{as:Xy,slots:{root:it.as||"ul"}},{children:Q.jsx(iO,{value:je,children:Q.jsx(nv,{variant:Le,color:Ye,children:Q.jsx(Yy.Provider,{value:"select",children:Q.jsx(Jp,{nested:!0,children:U})})})})}))]})});function aj(e){return Hr("MuiSheet",e)}Lr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const sj=["className","color","component","variant","invertedColors","slots","slotProps"],lj=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${bt(t)}`,r&&`color${bt(r)}`]};return Rr(o,aj,{})},cj=ht("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const c=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:d,bgcolor:m,backgroundColor:l,background:b}=dd({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),w=xl(e,`palette.${m}`)||m||xl(e,`palette.${l}`)||l||b||(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||e.vars.palette.background.surface;return[W({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":w==="transparent"?"initial":w,"--Sheet-background":w==="transparent"?"initial":w},d!==void 0&&{"--List-radius":`calc(${d} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${d} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),W({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color],c)]}),CE=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoySheet"}),{className:c,color:d="neutral",component:m="div",variant:l="plain",invertedColors:b=!1,slots:w={},slotProps:T={}}=o,E=Wt(o,sj),M=W({},o,{color:d,component:m,invertedColors:b,variant:l}),O=lj(M),U=W({},E,{component:m,slots:w,slotProps:T}),[V,K]=At("root",{ref:r,className:oi(O.root,c),elementType:cj,externalForwardedProps:U,ownerState:M});return Q.jsx(V,W({},K))}),rf=g5({createStyledComponent:ht("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Wr({props:e,name:"JoyStack"})});function uj(e){return Hr("MuiTab",e)}const dj=Lr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),hj=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],pj=e=>{const{selected:t,disabled:r,focusVisible:o,variant:c,color:d,orientation:m}=e,l={root:["root",m,r&&"disabled",o&&"focusVisible",t&&"selected",c&&`variant${bt(c)}`,d&&`color${bt(d)}`]};return Rr(l,uj,{})},fj=ht(ef,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),Q0=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyTab"}),c=A.useContext(ud),{action:d,children:m,disabled:l=!1,component:b="button",orientation:w="horizontal",variant:T="plain",color:E="neutral",disableIndicator:M=!1,indicatorPlacement:O=c?"bottom":"right",indicatorInset:U=!1,slots:V={},slotProps:K={}}=o,F=Wt(o,hj),R=A.useRef(),L=tn(R,r),{active:re,focusVisible:J,setFocusVisible:se,selected:ie,getRootProps:Z}=fO(W({},o,{rootRef:L}));A.useImperativeHandle(d,()=>({focusVisible:()=>{se(!0),R.current.focus()}}),[se]);const Ce=W({},o,{disableIndicator:M,indicatorPlacement:O,indicatorInset:U,orientation:w,row:c,active:re,focusVisible:J,disabled:l,selected:ie,variant:T,color:E}),_e=pj(Ce),ke=W({},F,{component:b,slots:V,slotProps:K}),[ze,Le]=At("root",{ref:r,elementType:fj,getSlotProps:Z,externalForwardedProps:ke,ownerState:Ce,className:_e.root});return Q.jsx(cb.Provider,{value:w,children:Q.jsx(ze,W({},Le,{children:m}))})}),mb=A.createContext("md");function mj(e){return Hr("MuiTabList",e)}Lr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const gj=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],yj=e=>{const{orientation:t,size:r,variant:o,color:c}=e,d={root:["root",t,o&&`variant${bt(o)}`,c&&`color${bt(c)}`,r&&`size${bt(r)}`]};return Rr(d,mj,{})},vj=ht(Yp,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return W({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},Qy,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(o==null?void 0:o.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&W({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${dj.root}`]:{flex:t.tabFlex}})}),_j=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyTabList"}),c=A.useContext(mb),{isRtl:d,orientation:m,getRootProps:l,contextValue:b}=dO({rootRef:r}),{component:w="div",children:T,variant:E="plain",color:M="neutral",size:O,disableUnderline:U=!1,underlinePlacement:V=m==="horizontal"?"bottom":"right",tabFlex:K,sticky:F,slots:R={},slotProps:L={}}=o,re=Wt(o,gj),se=W({},o,{isRtl:d,orientation:m,variant:E,color:M,size:O??c,sticky:F,tabFlex:K,nesting:!1,disableUnderline:U,underlinePlacement:V}),ie=yj(se),Z=W({},re,{component:w,slots:R,slotProps:L}),[Ce,_e]=At("root",{ref:r,elementType:vj,getSlotProps:l,externalForwardedProps:Z,ownerState:se,className:ie.root});return Q.jsx(Ce,W({},_e,{children:Q.jsx(hO,{value:b,children:Q.jsx(Jp,{row:m==="horizontal",nested:!0,children:T})})}))});function xj(e){return Hr("MuiTabPanel",e)}Lr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const bj=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],wj=e=>{const{hidden:t,size:r,variant:o,color:c,orientation:d}=e,m={root:["root",t&&"hidden",r&&`size${bt(r)}`,d,o&&`variant${bt(o)}`,c&&`color${bt(c)}`,r&&`size${bt(r)}`]};return Rr(m,xj,{})},Sj=ht("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return W({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),e_=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyTabPanel"}),{orientation:c}=Jy()||{orientation:"horizontal"},d=A.useContext(mb),{children:m,value:l=0,component:b,color:w="neutral",variant:T="plain",size:E,slots:M={},slotProps:O={},keepMounted:U=!1}=o,V=Wt(o,bj),{hidden:K,getRootProps:F}=cO(W({},o,{value:l})),L=W({},o,{orientation:c,hidden:K,size:E??d,color:w,variant:T}),re=wj(L),J=W({},V,{component:b,slots:M,slotProps:O}),[se,ie]=At("root",{ref:r,elementType:Sj,getSlotProps:F,externalForwardedProps:J,additionalProps:{role:"tabpanel",ref:r,as:b},ownerState:L,className:re.root});return U?Q.jsx(se,W({},ie,{children:m})):Q.jsx(se,W({},ie,{children:!K&&m}))});function Cj(e){return Hr("MuiTabs",e)}Lr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const kj=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],Ij=e=>{const{orientation:t,variant:r,color:o,size:c}=e,d={root:["root",t,r&&`variant${bt(r)}`,o&&`color${bt(o)}`,c&&`size${bt(c)}`]};return Rr(d,Cj,{})},Tj=ht("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o;const c=(r=t.variants[e.variant])==null?void 0:r[e.color],{bgcolor:d,backgroundColor:m,background:l,p:b,padding:w}=dd({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),T=xl(t,`palette.${d}`)||d||xl(t,`palette.${m}`)||m||l||(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||t.vars.palette.background.surface;return W({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":T==="transparent"?"initial":T,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(o=t.variants[e.variant])==null?void 0:o[e.color],b!==void 0&&{"--Tabs-padding":b},w!==void 0&&{"--Tabs-padding":w})}),yC=A.forwardRef(function(t,r){const o=Wr({props:t,name:"JoyTabs"}),{children:c,value:d,defaultValue:m,orientation:l="horizontal",direction:b="ltr",component:w,variant:T="plain",color:E="neutral",size:M="md",slots:O={},slotProps:U={}}=o,V=Wt(o,kj),K=m||(d===void 0?0:void 0),{contextValue:F}=aO(W({},o,{orientation:l,defaultValue:K})),R=W({},o,{orientation:l,direction:b,variant:T,color:E,size:M}),L=Ij(R),re=W({},V,{component:w,slots:O,slotProps:U}),[J,se]=At("root",{ref:r,elementType:Tj,externalForwardedProps:re,additionalProps:{ref:r,as:w},ownerState:R,className:L.root});return Q.jsx(J,W({},se,{children:Q.jsx(sO,{value:F,children:Q.jsx(mb.Provider,{value:M,children:c})})}))});function Pj(e){return Hr("MuiTooltip",e)}Lr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Ej=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],zj=e=>{const{arrow:t,variant:r,color:o,size:c,placement:d,touch:m}=e,l={root:["root",t&&"tooltipArrow",m&&"touch",c&&`size${bt(c)}`,o&&`color${bt(o)}`,r&&`variant${bt(r)}`,`tooltipPlacement${bt(d.split("-")[0])}`],arrow:["arrow"]};return Rr(l,Pj,{})},Mj=ht("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,c;const d=(r=t.variants[e.variant])==null?void 0:r[e.color];return W({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],d,!d.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(o=e.placement)!=null&&o.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(c=e.placement)!=null&&c.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),Dj=ht("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var r,o,c;const d=(r=e.variants[t.variant])==null?void 0:r[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(o=d==null?void 0:d.backgroundColor)!=null?o:e.vars.palette.background.surface,borderRightColor:(c=d==null?void 0:d.backgroundColor)!=null?c:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${d.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let $m=!1;const vC=new Vp;let Rh={x:0,y:0};function _C(e,t){return r=>{t&&t(r),e(r)}}function xC(e,t){return(r,...o)=>{t&&t(r,...o),e(r,...o)}}const Aj=A.forwardRef(function(t,r){var o;const c=Wr({props:t,name:"JoyTooltip"}),{children:d,className:m,component:l,arrow:b=!1,describeChild:w=!1,disableFocusListener:T=!1,disableHoverListener:E=!1,disableInteractive:M=!1,disableTouchListener:O=!1,enterDelay:U=100,enterNextDelay:V=0,enterTouchDelay:K=700,followCursor:F=!1,id:R,leaveDelay:L=0,leaveTouchDelay:re=1500,onClose:J,onOpen:se,open:ie,disablePortal:Z,direction:Ce,keepMounted:_e,modifiers:ke,placement:ze="bottom",title:Le,color:Ye="neutral",variant:Ge="solid",size:Te="md",slots:Fe={},slotProps:$e={}}=c,Oe=Wt(c,Ej),[et,at]=A.useState(),[ut,Pt]=A.useState(null),wt=A.useRef(!1),zt=M||F,Yt=ym(),lt=ym(),Ze=ym(),pt=ym(),[yt,ar]=Mu({controlled:ie,default:!1,name:"Tooltip",state:"open"});let Kt=yt;const Mr=Co(R),lr=A.useRef(),Vt=sl(()=>{lr.current!==void 0&&(document.body.style.WebkitUserSelect=lr.current,lr.current=void 0),pt.clear()});A.useEffect(()=>Vt,[Vt]);const Et=te=>{vC.clear(),$m=!0,ar(!0),se&&!Kt&&se(te)},ur=sl(te=>{vC.start(800+L,()=>{$m=!1}),ar(!1),J&&Kt&&J(te),Yt.start(150,()=>{wt.current=!1})}),Mt=te=>{wt.current&&te.type!=="touchstart"||(et&&et.removeAttribute("title"),lt.clear(),Ze.clear(),U||$m&&V?lt.start($m?V:U,()=>{Et(te)}):Et(te))},Er=te=>{lt.clear(),Ze.start(L,()=>{ur(te)})},{isFocusVisibleRef:je,onBlur:wr,onFocus:Dr,ref:qt}=t1(),[,rr]=A.useState(!1),Fr=te=>{wr(te),je.current===!1&&(rr(!1),Er(te))},$r=te=>{et||at(te.currentTarget),Dr(te),je.current===!0&&(rr(!0),Mt(te))},dr=te=>{wt.current=!0;const de=d.props;de.onTouchStart&&de.onTouchStart(te)},cr=te=>{dr(te),Ze.clear(),Yt.clear(),Vt(),lr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.start(K,()=>{document.body.style.WebkitUserSelect=lr.current,Mt(te)})},Gt=te=>{d.props.onTouchEnd&&d.props.onTouchEnd(te),Vt(),Ze.start(re,()=>{ur(te)})};A.useEffect(()=>{if(!Kt)return;function te(de){(de.key==="Escape"||de.key==="Esc")&&ur(de)}return document.addEventListener("keydown",te),()=>{document.removeEventListener("keydown",te)}},[ur,Kt]);const sr=tn(at,r),Ir=tn(qt,sr),Be=tn(d.ref,Ir);typeof Le!="number"&&!Le&&(Kt=!1);const xt=A.useRef(null),St=te=>{const de=d.props;de.onMouseMove&&de.onMouseMove(te),Rh={x:te.clientX,y:te.clientY},xt.current&&xt.current.update()},Qt={},vn=typeof Le=="string";w?(Qt.title=!Kt&&vn&&!E?Le:null,Qt["aria-describedby"]=Kt?Mr:null):(Qt["aria-label"]=vn?Le:null,Qt["aria-labelledby"]=Kt&&!vn?Mr:null);const it=W({},Qt,Oe,{component:l},d.props,{className:oi(m,d.props.className),onTouchStart:dr,ref:Be},F?{onMouseMove:St}:{}),Jt={};O||(it.onTouchStart=cr,it.onTouchEnd=Gt),E||(it.onMouseOver=_C(Mt,it.onMouseOver),it.onMouseLeave=_C(Er,it.onMouseLeave),zt||(Jt.onMouseOver=Mt,Jt.onMouseLeave=Er)),T||(it.onFocus=xC($r,it.onFocus),it.onBlur=xC(Fr,it.onBlur),zt||(Jt.onFocus=$r,Jt.onBlur=Fr));const Ft=W({},c,{arrow:b,disableInteractive:zt,placement:ze,touch:wt.current,color:Ye,variant:Ge,size:Te}),hr=zj(Ft),vr=W({},Oe,{component:l,slots:Fe,slotProps:$e}),Lt=A.useMemo(()=>[{name:"arrow",enabled:!!ut,options:{element:ut,padding:6}},{name:"offset",options:{offset:[0,10]}},...ke||[]],[ut,ke]),[Nr,he]=At("root",{additionalProps:W({id:Mr,popperRef:xt,placement:ze,anchorEl:F?{getBoundingClientRect:()=>({top:Rh.y,left:Rh.x,right:Rh.x,bottom:Rh.y,width:0,height:0})}:et,open:et?Kt:!1,disablePortal:Z,keepMounted:_e,direction:Ce,modifiers:Lt},Jt),ref:null,className:hr.root,elementType:Mj,externalForwardedProps:vr,ownerState:Ft}),[H,G]=At("arrow",{ref:Pt,className:hr.arrow,elementType:Dj,externalForwardedProps:vr,ownerState:Ft});return Q.jsxs(A.Fragment,{children:[A.isValidElement(d)&&A.cloneElement(d,it),Q.jsxs(Nr,W({},he,!((o=c.slots)!=null&&o.root)&&{as:Xy,slots:{root:l||"div"}},{children:[Le,b?Q.jsx(H,W({},G)):null]}))]})});var kE,bC=cd;kE=bC.createRoot,bC.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},An.apply(this,arguments)}var ri;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ri||(ri={}));const wC="popstate";function Rj(e){e===void 0&&(e={});function t(o,c){let{pathname:d,search:m,hash:l}=o.location;return Dp("",{pathname:d,search:m,hash:l},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(o,c){return typeof c=="string"?c:nf(c)}return $j(t,r,null,e)}function Pr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ed(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Lj(){return Math.random().toString(36).substr(2,8)}function SC(e,t){return{usr:e.state,key:e.key,idx:t}}function Dp(e,t,r,o){return r===void 0&&(r=null),An({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pl(t):t,{state:r,key:t&&t.key||o||Lj()})}function nf(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Pl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function $j(e,t,r,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:d=!1}=o,m=c.history,l=ri.Pop,b=null,w=T();w==null&&(w=0,m.replaceState(An({},m.state,{idx:w}),""));function T(){return(m.state||{idx:null}).idx}function E(){l=ri.Pop;let K=T(),F=K==null?null:K-w;w=K,b&&b({action:l,location:V.location,delta:F})}function M(K,F){l=ri.Push;let R=Dp(V.location,K,F);w=T()+1;let L=SC(R,w),re=V.createHref(R);try{m.pushState(L,"",re)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;c.location.assign(re)}d&&b&&b({action:l,location:V.location,delta:1})}function O(K,F){l=ri.Replace;let R=Dp(V.location,K,F);w=T();let L=SC(R,w),re=V.createHref(R);m.replaceState(L,"",re),d&&b&&b({action:l,location:V.location,delta:0})}function U(K){let F=c.location.origin!=="null"?c.location.origin:c.location.href,R=typeof K=="string"?K:nf(K);return R=R.replace(/ $/,"%20"),Pr(F,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,F)}let V={get action(){return l},get location(){return e(c,m)},listen(K){if(b)throw new Error("A history only accepts one active listener");return c.addEventListener(wC,E),b=K,()=>{c.removeEventListener(wC,E),b=null}},createHref(K){return t(c,K)},createURL:U,encodeLocation(K){let F=U(K);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:M,replace:O,go(K){return m.go(K)}};return V}var cn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cn||(cn={}));const Bj=new Set(["lazy","caseSensitive","path","id","index","children"]);function Oj(e){return e.index===!0}function Ap(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((c,d)=>{let m=[...r,String(d)],l=typeof c.id=="string"?c.id:m.join("-");if(Pr(c.index!==!0||!c.children,"Cannot specify children on an index route"),Pr(!o[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),Oj(c)){let b=An({},c,t(c),{id:l});return o[l]=b,b}else{let b=An({},c,t(c),{id:l,children:void 0});return o[l]=b,c.children&&(b.children=Ap(c.children,t,m,o)),b}})}function rc(e,t,r){return r===void 0&&(r="/"),og(e,t,r,!1)}function og(e,t,r,o){let c=typeof t=="string"?Pl(t):t,d=of(c.pathname||"/",r);if(d==null)return null;let m=IE(e);Nj(m);let l=null;for(let b=0;l==null&&b<m.length;++b){let w=Jj(d);l=Kj(m[b],w,o)}return l}function Fj(e,t){let{route:r,pathname:o,params:c}=e;return{id:r.id,pathname:o,params:c,data:t[r.id],handle:r.handle}}function IE(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let c=(d,m,l)=>{let b={relativePath:l===void 0?d.path||"":l,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};b.relativePath.startsWith("/")&&(Pr(b.relativePath.startsWith(o),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(o.length));let w=_l([o,b.relativePath]),T=r.concat(b);d.children&&d.children.length>0&&(Pr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),IE(d.children,t,T,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:qj(w,d.index),routesMeta:T})};return e.forEach((d,m)=>{var l;if(d.path===""||!((l=d.path)!=null&&l.includes("?")))c(d,m);else for(let b of TE(d.path))c(d,m,b)}),t}function TE(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,c=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let m=TE(o.join("/")),l=[];return l.push(...m.map(b=>b===""?d:[d,b].join("/"))),c&&l.push(...m),l.map(b=>e.startsWith("/")&&b===""?"/":b)}function Nj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Zj(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const jj=/^:[\w-]+$/,Vj=3,Uj=2,Hj=1,Wj=10,Gj=-2,CC=e=>e==="*";function qj(e,t){let r=e.split("/"),o=r.length;return r.some(CC)&&(o+=Gj),t&&(o+=Uj),r.filter(c=>!CC(c)).reduce((c,d)=>c+(jj.test(d)?Vj:d===""?Hj:Wj),o)}function Zj(e,t){return e.length===t.length&&e.slice(0,-1).every((o,c)=>o===t[c])?e[e.length-1]-t[t.length-1]:0}function Kj(e,t,r){r===void 0&&(r=!1);let{routesMeta:o}=e,c={},d="/",m=[];for(let l=0;l<o.length;++l){let b=o[l],w=l===o.length-1,T=d==="/"?t:t.slice(d.length)||"/",E=kC({path:b.relativePath,caseSensitive:b.caseSensitive,end:w},T),M=b.route;if(!E&&w&&r&&!o[o.length-1].route.index&&(E=kC({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},T)),!E)return null;Object.assign(c,E.params),m.push({params:c,pathname:_l([d,E.pathname]),pathnameBase:eV(_l([d,E.pathnameBase])),route:M}),E.pathnameBase!=="/"&&(d=_l([d,E.pathnameBase]))}return m}function kC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=Xj(e.path,e.caseSensitive,e.end),c=t.match(r);if(!c)return null;let d=c[0],m=d.replace(/(.)\/+$/,"$1"),l=c.slice(1);return{params:o.reduce((w,T,E)=>{let{paramName:M,isOptional:O}=T;if(M==="*"){let V=l[E]||"";m=d.slice(0,d.length-V.length).replace(/(.)\/+$/,"$1")}const U=l[E];return O&&!U?w[M]=void 0:w[M]=(U||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:m,pattern:e}}function Xj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ed(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,l,b)=>(o.push({paramName:l,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),o]}function Jj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ed(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function of(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function Yj(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:c=""}=typeof e=="string"?Pl(e):e;return{pathname:r?r.startsWith("/")?r:Qj(r,t):t,search:tV(o),hash:rV(c)}}function Qj(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function t_(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PE(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function EE(e,t){let r=PE(e);return t?r.map((o,c)=>c===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function zE(e,t,r,o){o===void 0&&(o=!1);let c;typeof e=="string"?c=Pl(e):(c=An({},e),Pr(!c.pathname||!c.pathname.includes("?"),t_("?","pathname","search",c)),Pr(!c.pathname||!c.pathname.includes("#"),t_("#","pathname","hash",c)),Pr(!c.search||!c.search.includes("#"),t_("#","search","hash",c)));let d=e===""||c.pathname==="",m=d?"/":c.pathname,l;if(m==null)l=r;else{let E=t.length-1;if(!o&&m.startsWith("..")){let M=m.split("/");for(;M[0]==="..";)M.shift(),E-=1;c.pathname=M.join("/")}l=E>=0?t[E]:"/"}let b=Yj(c,l),w=m&&m!=="/"&&m.endsWith("/"),T=(d||m===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(w||T)&&(b.pathname+="/"),b}const _l=e=>e.join("/").replace(/\/\/+/g,"/"),eV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Ug{constructor(t,r,o,c){c===void 0&&(c=!1),this.status=t,this.statusText=r||"",this.internal=c,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function sv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ME=["post","put","patch","delete"],nV=new Set(ME),iV=["get",...ME],oV=new Set(iV),aV=new Set([301,302,303,307,308]),sV=new Set([307,308]),r_={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Lh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cV=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),DE="remix-router-transitions";function uV(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!r;Pr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let c;if(e.mapRouteProperties)c=e.mapRouteProperties;else if(e.detectErrorBoundary){let ne=e.detectErrorBoundary;c=oe=>({hasErrorBoundary:ne(oe)})}else c=cV;let d={},m=Ap(e.routes,c,void 0,d),l,b=e.basename||"/",w=e.unstable_dataStrategy||gV,T=e.unstable_patchRoutesOnNavigation,E=An({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),M=null,O=new Set,U=1e3,V=new Set,K=null,F=null,R=null,L=e.hydrationData!=null,re=rc(m,e.history.location,b),J=null;if(re==null&&!T){let ne=io(404,{pathname:e.history.location.pathname}),{matches:oe,route:Ie}=RC(m);re=oe,J={[Ie.id]:ne}}re&&!e.hydrationData&&Me(re,m,e.history.location.pathname).active&&(re=null);let se;if(re)if(re.some(ne=>ne.route.lazy))se=!1;else if(!re.some(ne=>ne.route.loader))se=!0;else if(E.v7_partialHydration){let ne=e.hydrationData?e.hydrationData.loaderData:null,oe=e.hydrationData?e.hydrationData.errors:null,Ie=Ve=>Ve.route.loader?typeof Ve.route.loader=="function"&&Ve.route.loader.hydrate===!0?!1:ne&&ne[Ve.route.id]!==void 0||oe&&oe[Ve.route.id]!==void 0:!0;if(oe){let Ve=re.findIndex(Xe=>oe[Xe.route.id]!==void 0);se=re.slice(0,Ve+1).every(Ie)}else se=re.every(Ie)}else se=e.hydrationData!=null;else if(se=!1,re=[],E.v7_partialHydration){let ne=Me(null,m,e.history.location.pathname);ne.active&&ne.matches&&(re=ne.matches)}let ie,Z={historyAction:e.history.action,location:e.history.location,matches:re,initialized:se,navigation:r_,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||J,fetchers:new Map,blockers:new Map},Ce=ri.Pop,_e=!1,ke,ze=!1,Le=new Map,Ye=null,Ge=!1,Te=!1,Fe=[],$e=new Set,Oe=new Map,et=0,at=-1,ut=new Map,Pt=new Set,wt=new Map,zt=new Map,Yt=new Set,lt=new Map,Ze=new Map,pt=new Map,yt;function ar(){if(M=e.history.listen(ne=>{let{action:oe,location:Ie,delta:Ve}=ne;if(yt){yt(),yt=void 0;return}ed(Ze.size===0||Ve!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Xe=Lt({currentLocation:Z.location,nextLocation:Ie,historyAction:oe});if(Xe&&Ve!=null){let nt=new Promise(Se=>{yt=Se});e.history.go(Ve*-1),vr(Xe,{state:"blocked",location:Ie,proceed(){vr(Xe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),nt.then(()=>e.history.go(Ve))},reset(){let Se=new Map(Z.blockers);Se.set(Xe,Lh),lr({blockers:Se})}});return}return Mt(oe,Ie)}),r){MV(t,Le);let ne=()=>DV(t,Le);t.addEventListener("pagehide",ne),Ye=()=>t.removeEventListener("pagehide",ne)}return Z.initialized||Mt(ri.Pop,Z.location,{initialHydration:!0}),ie}function Kt(){M&&M(),Ye&&Ye(),O.clear(),ke&&ke.abort(),Z.fetchers.forEach((ne,oe)=>xt(oe)),Z.blockers.forEach((ne,oe)=>hr(oe))}function Mr(ne){return O.add(ne),()=>O.delete(ne)}function lr(ne,oe){oe===void 0&&(oe={}),Z=An({},Z,ne);let Ie=[],Ve=[];E.v7_fetcherPersist&&Z.fetchers.forEach((Xe,nt)=>{Xe.state==="idle"&&(Yt.has(nt)?Ve.push(nt):Ie.push(nt))}),[...O].forEach(Xe=>Xe(Z,{deletedFetchers:Ve,unstable_viewTransitionOpts:oe.viewTransitionOpts,unstable_flushSync:oe.flushSync===!0})),E.v7_fetcherPersist&&(Ie.forEach(Xe=>Z.fetchers.delete(Xe)),Ve.forEach(Xe=>xt(Xe)))}function Vt(ne,oe,Ie){var Ve,Xe;let{flushSync:nt}=Ie===void 0?{}:Ie,Se=Z.actionData!=null&&Z.navigation.formMethod!=null&&Ea(Z.navigation.formMethod)&&Z.navigation.state==="loading"&&((Ve=ne.state)==null?void 0:Ve._isRedirect)!==!0,xe;oe.actionData?Object.keys(oe.actionData).length>0?xe=oe.actionData:xe=null:Se?xe=Z.actionData:xe=null;let qe=oe.loaderData?DC(Z.loaderData,oe.loaderData,oe.matches||[],oe.errors):Z.loaderData,Ke=Z.blockers;Ke.size>0&&(Ke=new Map(Ke),Ke.forEach((Tt,er)=>Ke.set(er,Lh)));let Qe=_e===!0||Z.navigation.formMethod!=null&&Ea(Z.navigation.formMethod)&&((Xe=ne.state)==null?void 0:Xe._isRedirect)!==!0;l&&(m=l,l=void 0),Ge||Ce===ri.Pop||(Ce===ri.Push?e.history.push(ne,ne.state):Ce===ri.Replace&&e.history.replace(ne,ne.state));let $t;if(Ce===ri.Pop){let Tt=Le.get(Z.location.pathname);Tt&&Tt.has(ne.pathname)?$t={currentLocation:Z.location,nextLocation:ne}:Le.has(ne.pathname)&&($t={currentLocation:ne,nextLocation:Z.location})}else if(ze){let Tt=Le.get(Z.location.pathname);Tt?Tt.add(ne.pathname):(Tt=new Set([ne.pathname]),Le.set(Z.location.pathname,Tt)),$t={currentLocation:Z.location,nextLocation:ne}}lr(An({},oe,{actionData:xe,loaderData:qe,historyAction:Ce,location:ne,initialized:!0,navigation:r_,revalidation:"idle",restoreScrollPosition:fe(ne,oe.matches||Z.matches),preventScrollReset:Qe,blockers:Ke}),{viewTransitionOpts:$t,flushSync:nt===!0}),Ce=ri.Pop,_e=!1,ze=!1,Ge=!1,Te=!1,Fe=[]}async function Et(ne,oe){if(typeof ne=="number"){e.history.go(ne);return}let Ie=gx(Z.location,Z.matches,b,E.v7_prependBasename,ne,E.v7_relativeSplatPath,oe==null?void 0:oe.fromRouteId,oe==null?void 0:oe.relative),{path:Ve,submission:Xe,error:nt}=IC(E.v7_normalizeFormMethod,!1,Ie,oe),Se=Z.location,xe=Dp(Z.location,Ve,oe&&oe.state);xe=An({},xe,e.history.encodeLocation(xe));let qe=oe&&oe.replace!=null?oe.replace:void 0,Ke=ri.Push;qe===!0?Ke=ri.Replace:qe===!1||Xe!=null&&Ea(Xe.formMethod)&&Xe.formAction===Z.location.pathname+Z.location.search&&(Ke=ri.Replace);let Qe=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,$t=(oe&&oe.unstable_flushSync)===!0,Tt=Lt({currentLocation:Se,nextLocation:xe,historyAction:Ke});if(Tt){vr(Tt,{state:"blocked",location:xe,proceed(){vr(Tt,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),Et(ne,oe)},reset(){let er=new Map(Z.blockers);er.set(Tt,Lh),lr({blockers:er})}});return}return await Mt(Ke,xe,{submission:Xe,pendingError:nt,preventScrollReset:Qe,replace:oe&&oe.replace,enableViewTransition:oe&&oe.unstable_viewTransition,flushSync:$t})}function ur(){if(Gt(),lr({revalidation:"loading"}),Z.navigation.state!=="submitting"){if(Z.navigation.state==="idle"){Mt(Z.historyAction,Z.location,{startUninterruptedRevalidation:!0});return}Mt(Ce||Z.historyAction,Z.navigation.location,{overrideNavigation:Z.navigation,enableViewTransition:ze===!0})}}async function Mt(ne,oe,Ie){ke&&ke.abort(),ke=null,Ce=ne,Ge=(Ie&&Ie.startUninterruptedRevalidation)===!0,de(Z.location,Z.matches),_e=(Ie&&Ie.preventScrollReset)===!0,ze=(Ie&&Ie.enableViewTransition)===!0;let Ve=l||m,Xe=Ie&&Ie.overrideNavigation,nt=rc(Ve,oe,b),Se=(Ie&&Ie.flushSync)===!0,xe=Me(nt,Ve,oe.pathname);if(xe.active&&xe.matches&&(nt=xe.matches),!nt){let{error:or,notFoundMatches:jr,route:pn}=Nr(oe.pathname);Vt(oe,{matches:jr,loaderData:{},errors:{[pn.id]:or}},{flushSync:Se});return}if(Z.initialized&&!Te&&wV(Z.location,oe)&&!(Ie&&Ie.submission&&Ea(Ie.submission.formMethod))){Vt(oe,{matches:nt},{flushSync:Se});return}ke=new AbortController;let qe=lu(e.history,oe,ke.signal,Ie&&Ie.submission),Ke;if(Ie&&Ie.pendingError)Ke=[Pu(nt).route.id,{type:cn.error,error:Ie.pendingError}];else if(Ie&&Ie.submission&&Ea(Ie.submission.formMethod)){let or=await Er(qe,oe,Ie.submission,nt,xe.active,{replace:Ie.replace,flushSync:Se});if(or.shortCircuited)return;if(or.pendingActionResult){let[jr,pn]=or.pendingActionResult;if(Do(pn)&&sv(pn.error)&&pn.error.status===404){ke=null,Vt(oe,{matches:or.matches,loaderData:{},errors:{[jr]:pn.error}});return}}nt=or.matches||nt,Ke=or.pendingActionResult,Xe=n_(oe,Ie.submission),Se=!1,xe.active=!1,qe=lu(e.history,qe.url,qe.signal)}let{shortCircuited:Qe,matches:$t,loaderData:Tt,errors:er}=await je(qe,oe,nt,xe.active,Xe,Ie&&Ie.submission,Ie&&Ie.fetcherSubmission,Ie&&Ie.replace,Ie&&Ie.initialHydration===!0,Se,Ke);Qe||(ke=null,Vt(oe,An({matches:$t||nt},AC(Ke),{loaderData:Tt,errors:er})))}async function Er(ne,oe,Ie,Ve,Xe,nt){nt===void 0&&(nt={}),Gt();let Se=EV(oe,Ie);if(lr({navigation:Se},{flushSync:nt.flushSync===!0}),Xe){let Ke=await be(Ve,oe.pathname,ne.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let{boundaryId:Qe,error:$t}=he(oe.pathname,Ke);return{matches:Ke.partialMatches,pendingActionResult:[Qe,{type:cn.error,error:$t}]}}else if(Ke.matches)Ve=Ke.matches;else{let{notFoundMatches:Qe,error:$t,route:Tt}=Nr(oe.pathname);return{matches:Qe,pendingActionResult:[Tt.id,{type:cn.error,error:$t}]}}}let xe,qe=Wh(Ve,oe);if(!qe.route.action&&!qe.route.lazy)xe={type:cn.error,error:io(405,{method:ne.method,pathname:oe.pathname,routeId:qe.route.id})};else if(xe=(await dr("action",Z,ne,[qe],Ve,null))[qe.route.id],ne.signal.aborted)return{shortCircuited:!0};if(ac(xe)){let Ke;return nt&&nt.replace!=null?Ke=nt.replace:Ke=EC(xe.response.headers.get("Location"),new URL(ne.url),b)===Z.location.pathname+Z.location.search,await $r(ne,xe,!0,{submission:Ie,replace:Ke}),{shortCircuited:!0}}if(ul(xe))throw io(400,{type:"defer-action"});if(Do(xe)){let Ke=Pu(Ve,qe.route.id);return(nt&&nt.replace)!==!0&&(Ce=ri.Push),{matches:Ve,pendingActionResult:[Ke.route.id,xe]}}return{matches:Ve,pendingActionResult:[qe.route.id,xe]}}async function je(ne,oe,Ie,Ve,Xe,nt,Se,xe,qe,Ke,Qe){let $t=Xe||n_(oe,nt),Tt=nt||Se||$C($t),er=!Ge&&(!E.v7_partialHydration||!qe);if(Ve){if(er){let fr=wr(Qe);lr(An({navigation:$t},fr!==void 0?{actionData:fr}:{}),{flushSync:Ke})}let Zt=await be(Ie,oe.pathname,ne.signal);if(Zt.type==="aborted")return{shortCircuited:!0};if(Zt.type==="error"){let{boundaryId:fr,error:Qr}=he(oe.pathname,Zt);return{matches:Zt.partialMatches,loaderData:{},errors:{[fr]:Qr}}}else if(Zt.matches)Ie=Zt.matches;else{let{error:fr,notFoundMatches:Qr,route:Sr}=Nr(oe.pathname);return{matches:Qr,loaderData:{},errors:{[Sr.id]:fr}}}}let or=l||m,[jr,pn]=TC(e.history,Z,Ie,Tt,oe,E.v7_partialHydration&&qe===!0,E.v7_skipActionErrorRevalidation,Te,Fe,$e,Yt,wt,Pt,or,b,Qe);if(H(Zt=>!(Ie&&Ie.some(fr=>fr.route.id===Zt))||jr&&jr.some(fr=>fr.route.id===Zt)),at=++et,jr.length===0&&pn.length===0){let Zt=it();return Vt(oe,An({matches:Ie,loaderData:{},errors:Qe&&Do(Qe[1])?{[Qe[0]]:Qe[1].error}:null},AC(Qe),Zt?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:Ke}),{shortCircuited:!0}}if(er){let Zt={};if(!Ve){Zt.navigation=$t;let fr=wr(Qe);fr!==void 0&&(Zt.actionData=fr)}pn.length>0&&(Zt.fetchers=Dr(pn)),lr(Zt,{flushSync:Ke})}pn.forEach(Zt=>{Oe.has(Zt.key)&&Qt(Zt.key),Zt.controller&&Oe.set(Zt.key,Zt.controller)});let Ai=()=>pn.forEach(Zt=>Qt(Zt.key));ke&&ke.signal.addEventListener("abort",Ai);let{loaderResults:Vn,fetcherResults:Ho}=await cr(Z,Ie,jr,pn,ne);if(ne.signal.aborted)return{shortCircuited:!0};ke&&ke.signal.removeEventListener("abort",Ai),pn.forEach(Zt=>Oe.delete(Zt.key));let mr=Bm(Vn);if(mr)return await $r(ne,mr.result,!0,{replace:xe}),{shortCircuited:!0};if(mr=Bm(Ho),mr)return Pt.add(mr.key),await $r(ne,mr.result,!0,{replace:xe}),{shortCircuited:!0};let{loaderData:ko,errors:tr}=MC(Z,Ie,jr,Vn,Qe,pn,Ho,lt);lt.forEach((Zt,fr)=>{Zt.subscribe(Qr=>{(Qr||Zt.done)&&lt.delete(fr)})}),E.v7_partialHydration&&qe&&Z.errors&&Object.entries(Z.errors).filter(Zt=>{let[fr]=Zt;return!jr.some(Qr=>Qr.route.id===fr)}).forEach(Zt=>{let[fr,Qr]=Zt;tr=Object.assign(tr||{},{[fr]:Qr})});let Br=it(),Tr=Jt(at),ei=Br||Tr||pn.length>0;return An({matches:Ie,loaderData:ko,errors:tr},ei?{fetchers:new Map(Z.fetchers)}:{})}function wr(ne){if(ne&&!Do(ne[1]))return{[ne[0]]:ne[1].data};if(Z.actionData)return Object.keys(Z.actionData).length===0?null:Z.actionData}function Dr(ne){return ne.forEach(oe=>{let Ie=Z.fetchers.get(oe.key),Ve=$h(void 0,Ie?Ie.data:void 0);Z.fetchers.set(oe.key,Ve)}),new Map(Z.fetchers)}function qt(ne,oe,Ie,Ve){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Oe.has(ne)&&Qt(ne);let Xe=(Ve&&Ve.unstable_flushSync)===!0,nt=l||m,Se=gx(Z.location,Z.matches,b,E.v7_prependBasename,Ie,E.v7_relativeSplatPath,oe,Ve==null?void 0:Ve.relative),xe=rc(nt,Se,b),qe=Me(xe,nt,Se);if(qe.active&&qe.matches&&(xe=qe.matches),!xe){Ir(ne,oe,io(404,{pathname:Se}),{flushSync:Xe});return}let{path:Ke,submission:Qe,error:$t}=IC(E.v7_normalizeFormMethod,!0,Se,Ve);if($t){Ir(ne,oe,$t,{flushSync:Xe});return}let Tt=Wh(xe,Ke);if(_e=(Ve&&Ve.preventScrollReset)===!0,Qe&&Ea(Qe.formMethod)){rr(ne,oe,Ke,Tt,xe,qe.active,Xe,Qe);return}wt.set(ne,{routeId:oe,path:Ke}),Fr(ne,oe,Ke,Tt,xe,qe.active,Xe,Qe)}async function rr(ne,oe,Ie,Ve,Xe,nt,Se,xe){Gt(),wt.delete(ne);function qe(Sr){if(!Sr.route.action&&!Sr.route.lazy){let Or=io(405,{method:xe.formMethod,pathname:Ie,routeId:oe});return Ir(ne,oe,Or,{flushSync:Se}),!0}return!1}if(!nt&&qe(Ve))return;let Ke=Z.fetchers.get(ne);sr(ne,zV(xe,Ke),{flushSync:Se});let Qe=new AbortController,$t=lu(e.history,Ie,Qe.signal,xe);if(nt){let Sr=await be(Xe,Ie,$t.signal);if(Sr.type==="aborted")return;if(Sr.type==="error"){let{error:Or}=he(Ie,Sr);Ir(ne,oe,Or,{flushSync:Se});return}else if(Sr.matches){if(Xe=Sr.matches,Ve=Wh(Xe,Ie),qe(Ve))return}else{Ir(ne,oe,io(404,{pathname:Ie}),{flushSync:Se});return}}Oe.set(ne,Qe);let Tt=et,or=(await dr("action",Z,$t,[Ve],Xe,ne))[Ve.route.id];if($t.signal.aborted){Oe.get(ne)===Qe&&Oe.delete(ne);return}if(E.v7_fetcherPersist&&Yt.has(ne)){if(ac(or)||Do(or)){sr(ne,tl(void 0));return}}else{if(ac(or))if(Oe.delete(ne),at>Tt){sr(ne,tl(void 0));return}else return Pt.add(ne),sr(ne,$h(xe)),$r($t,or,!1,{fetcherSubmission:xe});if(Do(or)){Ir(ne,oe,or.error);return}}if(ul(or))throw io(400,{type:"defer-action"});let jr=Z.navigation.location||Z.location,pn=lu(e.history,jr,Qe.signal),Ai=l||m,Vn=Z.navigation.state!=="idle"?rc(Ai,Z.navigation.location,b):Z.matches;Pr(Vn,"Didn't find any matches after fetcher action");let Ho=++et;ut.set(ne,Ho);let mr=$h(xe,or.data);Z.fetchers.set(ne,mr);let[ko,tr]=TC(e.history,Z,Vn,xe,jr,!1,E.v7_skipActionErrorRevalidation,Te,Fe,$e,Yt,wt,Pt,Ai,b,[Ve.route.id,or]);tr.filter(Sr=>Sr.key!==ne).forEach(Sr=>{let Or=Sr.key,zr=Z.fetchers.get(Or),pa=$h(void 0,zr?zr.data:void 0);Z.fetchers.set(Or,pa),Oe.has(Or)&&Qt(Or),Sr.controller&&Oe.set(Or,Sr.controller)}),lr({fetchers:new Map(Z.fetchers)});let Br=()=>tr.forEach(Sr=>Qt(Sr.key));Qe.signal.addEventListener("abort",Br);let{loaderResults:Tr,fetcherResults:ei}=await cr(Z,Vn,ko,tr,pn);if(Qe.signal.aborted)return;Qe.signal.removeEventListener("abort",Br),ut.delete(ne),Oe.delete(ne),tr.forEach(Sr=>Oe.delete(Sr.key));let Zt=Bm(Tr);if(Zt)return $r(pn,Zt.result,!1);if(Zt=Bm(ei),Zt)return Pt.add(Zt.key),$r(pn,Zt.result,!1);let{loaderData:fr,errors:Qr}=MC(Z,Vn,ko,Tr,void 0,tr,ei,lt);if(Z.fetchers.has(ne)){let Sr=tl(or.data);Z.fetchers.set(ne,Sr)}Jt(Ho),Z.navigation.state==="loading"&&Ho>at?(Pr(Ce,"Expected pending action"),ke&&ke.abort(),Vt(Z.navigation.location,{matches:Vn,loaderData:fr,errors:Qr,fetchers:new Map(Z.fetchers)})):(lr({errors:Qr,loaderData:DC(Z.loaderData,fr,Vn,Qr),fetchers:new Map(Z.fetchers)}),Te=!1)}async function Fr(ne,oe,Ie,Ve,Xe,nt,Se,xe){let qe=Z.fetchers.get(ne);sr(ne,$h(xe,qe?qe.data:void 0),{flushSync:Se});let Ke=new AbortController,Qe=lu(e.history,Ie,Ke.signal);if(nt){let or=await be(Xe,Ie,Qe.signal);if(or.type==="aborted")return;if(or.type==="error"){let{error:jr}=he(Ie,or);Ir(ne,oe,jr,{flushSync:Se});return}else if(or.matches)Xe=or.matches,Ve=Wh(Xe,Ie);else{Ir(ne,oe,io(404,{pathname:Ie}),{flushSync:Se});return}}Oe.set(ne,Ke);let $t=et,er=(await dr("loader",Z,Qe,[Ve],Xe,ne))[Ve.route.id];if(ul(er)&&(er=await yb(er,Qe.signal,!0)||er),Oe.get(ne)===Ke&&Oe.delete(ne),!Qe.signal.aborted){if(Yt.has(ne)){sr(ne,tl(void 0));return}if(ac(er))if(at>$t){sr(ne,tl(void 0));return}else{Pt.add(ne),await $r(Qe,er,!1);return}if(Do(er)){Ir(ne,oe,er.error);return}Pr(!ul(er),"Unhandled fetcher deferred data"),sr(ne,tl(er.data))}}async function $r(ne,oe,Ie,Ve){let{submission:Xe,fetcherSubmission:nt,replace:Se}=Ve===void 0?{}:Ve;oe.response.headers.has("X-Remix-Revalidate")&&(Te=!0);let xe=oe.response.headers.get("Location");Pr(xe,"Expected a Location header on the redirect Response"),xe=EC(xe,new URL(ne.url),b);let qe=Dp(Z.location,xe,{_isRedirect:!0});if(r){let or=!1;if(oe.response.headers.has("X-Remix-Reload-Document"))or=!0;else if(gb.test(xe)){const jr=e.history.createURL(xe);or=jr.origin!==t.location.origin||of(jr.pathname,b)==null}if(or){Se?t.location.replace(xe):t.location.assign(xe);return}}ke=null;let Ke=Se===!0||oe.response.headers.has("X-Remix-Replace")?ri.Replace:ri.Push,{formMethod:Qe,formAction:$t,formEncType:Tt}=Z.navigation;!Xe&&!nt&&Qe&&$t&&Tt&&(Xe=$C(Z.navigation));let er=Xe||nt;if(sV.has(oe.response.status)&&er&&Ea(er.formMethod))await Mt(Ke,qe,{submission:An({},er,{formAction:xe}),preventScrollReset:_e,enableViewTransition:Ie?ze:void 0});else{let or=n_(qe,Xe);await Mt(Ke,qe,{overrideNavigation:or,fetcherSubmission:nt,preventScrollReset:_e,enableViewTransition:Ie?ze:void 0})}}async function dr(ne,oe,Ie,Ve,Xe,nt){let Se,xe={};try{Se=await yV(w,ne,oe,Ie,Ve,Xe,nt,d,c)}catch(qe){return Ve.forEach(Ke=>{xe[Ke.route.id]={type:cn.error,error:qe}}),xe}for(let[qe,Ke]of Object.entries(Se))if(CV(Ke)){let Qe=Ke.result;xe[qe]={type:cn.redirect,response:xV(Qe,Ie,qe,Xe,b,E.v7_relativeSplatPath)}}else xe[qe]=await _V(Ke);return xe}async function cr(ne,oe,Ie,Ve,Xe){let nt=ne.matches,Se=dr("loader",ne,Xe,Ie,oe,null),xe=Promise.all(Ve.map(async Qe=>{if(Qe.matches&&Qe.match&&Qe.controller){let Tt=(await dr("loader",ne,lu(e.history,Qe.path,Qe.controller.signal),[Qe.match],Qe.matches,Qe.key))[Qe.match.route.id];return{[Qe.key]:Tt}}else return Promise.resolve({[Qe.key]:{type:cn.error,error:io(404,{pathname:Qe.path})}})})),qe=await Se,Ke=(await xe).reduce((Qe,$t)=>Object.assign(Qe,$t),{});return await Promise.all([TV(oe,qe,Xe.signal,nt,ne.loaderData),PV(oe,Ke,Ve)]),{loaderResults:qe,fetcherResults:Ke}}function Gt(){Te=!0,Fe.push(...H()),wt.forEach((ne,oe)=>{Oe.has(oe)&&($e.add(oe),Qt(oe))})}function sr(ne,oe,Ie){Ie===void 0&&(Ie={}),Z.fetchers.set(ne,oe),lr({fetchers:new Map(Z.fetchers)},{flushSync:(Ie&&Ie.flushSync)===!0})}function Ir(ne,oe,Ie,Ve){Ve===void 0&&(Ve={});let Xe=Pu(Z.matches,oe);xt(ne),lr({errors:{[Xe.route.id]:Ie},fetchers:new Map(Z.fetchers)},{flushSync:(Ve&&Ve.flushSync)===!0})}function Be(ne){return E.v7_fetcherPersist&&(zt.set(ne,(zt.get(ne)||0)+1),Yt.has(ne)&&Yt.delete(ne)),Z.fetchers.get(ne)||lV}function xt(ne){let oe=Z.fetchers.get(ne);Oe.has(ne)&&!(oe&&oe.state==="loading"&&ut.has(ne))&&Qt(ne),wt.delete(ne),ut.delete(ne),Pt.delete(ne),Yt.delete(ne),$e.delete(ne),Z.fetchers.delete(ne)}function St(ne){if(E.v7_fetcherPersist){let oe=(zt.get(ne)||0)-1;oe<=0?(zt.delete(ne),Yt.add(ne)):zt.set(ne,oe)}else xt(ne);lr({fetchers:new Map(Z.fetchers)})}function Qt(ne){let oe=Oe.get(ne);Pr(oe,"Expected fetch controller: "+ne),oe.abort(),Oe.delete(ne)}function vn(ne){for(let oe of ne){let Ie=Be(oe),Ve=tl(Ie.data);Z.fetchers.set(oe,Ve)}}function it(){let ne=[],oe=!1;for(let Ie of Pt){let Ve=Z.fetchers.get(Ie);Pr(Ve,"Expected fetcher: "+Ie),Ve.state==="loading"&&(Pt.delete(Ie),ne.push(Ie),oe=!0)}return vn(ne),oe}function Jt(ne){let oe=[];for(let[Ie,Ve]of ut)if(Ve<ne){let Xe=Z.fetchers.get(Ie);Pr(Xe,"Expected fetcher: "+Ie),Xe.state==="loading"&&(Qt(Ie),ut.delete(Ie),oe.push(Ie))}return vn(oe),oe.length>0}function Ft(ne,oe){let Ie=Z.blockers.get(ne)||Lh;return Ze.get(ne)!==oe&&Ze.set(ne,oe),Ie}function hr(ne){Z.blockers.delete(ne),Ze.delete(ne)}function vr(ne,oe){let Ie=Z.blockers.get(ne)||Lh;Pr(Ie.state==="unblocked"&&oe.state==="blocked"||Ie.state==="blocked"&&oe.state==="blocked"||Ie.state==="blocked"&&oe.state==="proceeding"||Ie.state==="blocked"&&oe.state==="unblocked"||Ie.state==="proceeding"&&oe.state==="unblocked","Invalid blocker state transition: "+Ie.state+" -> "+oe.state);let Ve=new Map(Z.blockers);Ve.set(ne,oe),lr({blockers:Ve})}function Lt(ne){let{currentLocation:oe,nextLocation:Ie,historyAction:Ve}=ne;if(Ze.size===0)return;Ze.size>1&&ed(!1,"A router only supports one blocker at a time");let Xe=Array.from(Ze.entries()),[nt,Se]=Xe[Xe.length-1],xe=Z.blockers.get(nt);if(!(xe&&xe.state==="proceeding")&&Se({currentLocation:oe,nextLocation:Ie,historyAction:Ve}))return nt}function Nr(ne){let oe=io(404,{pathname:ne}),Ie=l||m,{matches:Ve,route:Xe}=RC(Ie);return H(),{notFoundMatches:Ve,route:Xe,error:oe}}function he(ne,oe){return{boundaryId:Pu(oe.partialMatches).route.id,error:io(400,{type:"route-discovery",pathname:ne,message:oe.error!=null&&"message"in oe.error?oe.error:String(oe.error)})}}function H(ne){let oe=[];return lt.forEach((Ie,Ve)=>{(!ne||ne(Ve))&&(Ie.cancel(),oe.push(Ve),lt.delete(Ve))}),oe}function G(ne,oe,Ie){if(K=ne,R=oe,F=Ie||null,!L&&Z.navigation===r_){L=!0;let Ve=fe(Z.location,Z.matches);Ve!=null&&lr({restoreScrollPosition:Ve})}return()=>{K=null,R=null,F=null}}function te(ne,oe){return F&&F(ne,oe.map(Ve=>Fj(Ve,Z.loaderData)))||ne.key}function de(ne,oe){if(K&&R){let Ie=te(ne,oe);K[Ie]=R()}}function fe(ne,oe){if(K){let Ie=te(ne,oe),Ve=K[Ie];if(typeof Ve=="number")return Ve}return null}function Me(ne,oe,Ie){if(T){if(V.has(Ie))return{active:!1,matches:ne};if(ne){if(Object.keys(ne[0].params).length>0)return{active:!0,matches:og(oe,Ie,b,!0)}}else return{active:!0,matches:og(oe,Ie,b,!0)||[]}}return{active:!1,matches:null}}async function be(ne,oe,Ie){let Ve=ne;for(;;){let Xe=l==null,nt=l||m;try{await fV(T,oe,Ve,nt,d,c,pt,Ie)}catch(qe){return{type:"error",error:qe,partialMatches:Ve}}finally{Xe&&(m=[...m])}if(Ie.aborted)return{type:"aborted"};let Se=rc(nt,oe,b);if(Se)return ye(oe,V),{type:"success",matches:Se};let xe=og(nt,oe,b,!0);if(!xe||Ve.length===xe.length&&Ve.every((qe,Ke)=>qe.route.id===xe[Ke].route.id))return ye(oe,V),{type:"success",matches:null};Ve=xe}}function ye(ne,oe){if(oe.size>=U){let Ie=oe.values().next().value;oe.delete(Ie)}oe.add(ne)}function Ee(ne){d={},l=Ap(ne,c,void 0,d)}function Je(ne,oe){let Ie=l==null;RE(ne,oe,l||m,d,c),Ie&&(m=[...m],lr({}))}return ie={get basename(){return b},get future(){return E},get state(){return Z},get routes(){return m},get window(){return t},initialize:ar,subscribe:Mr,enableScrollRestoration:G,navigate:Et,fetch:qt,revalidate:ur,createHref:ne=>e.history.createHref(ne),encodeLocation:ne=>e.history.encodeLocation(ne),getFetcher:Be,deleteFetcher:St,dispose:Kt,getBlocker:Ft,deleteBlocker:hr,patchRoutes:Je,_internalFetchControllers:Oe,_internalActiveDeferreds:lt,_internalSetRoutes:Ee},ie}function dV(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function gx(e,t,r,o,c,d,m,l){let b,w;if(m){b=[];for(let E of t)if(b.push(E),E.route.id===m){w=E;break}}else b=t,w=t[t.length-1];let T=zE(c||".",EE(b,d),of(e.pathname,r)||e.pathname,l==="path");return c==null&&(T.search=e.search,T.hash=e.hash),(c==null||c===""||c===".")&&w&&w.route.index&&!vb(T.search)&&(T.search=T.search?T.search.replace(/^\?/,"?index&"):"?index"),o&&r!=="/"&&(T.pathname=T.pathname==="/"?r:_l([r,T.pathname])),nf(T)}function IC(e,t,r,o){if(!o||!dV(o))return{path:r};if(o.formMethod&&!IV(o.formMethod))return{path:r,error:io(405,{method:o.formMethod})};let c=()=>({path:r,error:io(400,{type:"invalid-body"})}),d=o.formMethod||"get",m=e?d.toUpperCase():d.toLowerCase(),l=LE(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Ea(m))return c();let M=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((O,U)=>{let[V,K]=U;return""+O+V+"="+K+`
`},""):String(o.body);return{path:r,submission:{formMethod:m,formAction:l,formEncType:o.formEncType,formData:void 0,json:void 0,text:M}}}else if(o.formEncType==="application/json"){if(!Ea(m))return c();try{let M=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:m,formAction:l,formEncType:o.formEncType,formData:void 0,json:M,text:void 0}}}catch{return c()}}}Pr(typeof FormData=="function","FormData is not available in this environment");let b,w;if(o.formData)b=yx(o.formData),w=o.formData;else if(o.body instanceof FormData)b=yx(o.body),w=o.body;else if(o.body instanceof URLSearchParams)b=o.body,w=zC(b);else if(o.body==null)b=new URLSearchParams,w=new FormData;else try{b=new URLSearchParams(o.body),w=zC(b)}catch{return c()}let T={formMethod:m,formAction:l,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(Ea(T.formMethod))return{path:r,submission:T};let E=Pl(r);return t&&E.search&&vb(E.search)&&b.append("index",""),E.search="?"+b,{path:nf(E),submission:T}}function hV(e,t){let r=e;if(t){let o=e.findIndex(c=>c.route.id===t);o>=0&&(r=e.slice(0,o))}return r}function TC(e,t,r,o,c,d,m,l,b,w,T,E,M,O,U,V){let K=V?Do(V[1])?V[1].error:V[1].data:void 0,F=e.createURL(t.location),R=e.createURL(c),L=V&&Do(V[1])?V[0]:void 0,re=L?hV(r,L):r,J=V?V[1].statusCode:void 0,se=m&&J&&J>=400,ie=re.filter((Ce,_e)=>{let{route:ke}=Ce;if(ke.lazy)return!0;if(ke.loader==null)return!1;if(d)return typeof ke.loader!="function"||ke.loader.hydrate?!0:t.loaderData[ke.id]===void 0&&(!t.errors||t.errors[ke.id]===void 0);if(pV(t.loaderData,t.matches[_e],Ce)||b.some(Ye=>Ye===Ce.route.id))return!0;let ze=t.matches[_e],Le=Ce;return PC(Ce,An({currentUrl:F,currentParams:ze.params,nextUrl:R,nextParams:Le.params},o,{actionResult:K,actionStatus:J,defaultShouldRevalidate:se?!1:l||F.pathname+F.search===R.pathname+R.search||F.search!==R.search||AE(ze,Le)}))}),Z=[];return E.forEach((Ce,_e)=>{if(d||!r.some(Ge=>Ge.route.id===Ce.routeId)||T.has(_e))return;let ke=rc(O,Ce.path,U);if(!ke){Z.push({key:_e,routeId:Ce.routeId,path:Ce.path,matches:null,match:null,controller:null});return}let ze=t.fetchers.get(_e),Le=Wh(ke,Ce.path),Ye=!1;M.has(_e)?Ye=!1:w.has(_e)?(w.delete(_e),Ye=!0):ze&&ze.state!=="idle"&&ze.data===void 0?Ye=l:Ye=PC(Le,An({currentUrl:F,currentParams:t.matches[t.matches.length-1].params,nextUrl:R,nextParams:r[r.length-1].params},o,{actionResult:K,actionStatus:J,defaultShouldRevalidate:se?!1:l})),Ye&&Z.push({key:_e,routeId:Ce.routeId,path:Ce.path,matches:ke,match:Le,controller:new AbortController})}),[ie,Z]}function pV(e,t,r){let o=!t||r.route.id!==t.route.id,c=e[r.route.id]===void 0;return o||c}function AE(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function PC(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function fV(e,t,r,o,c,d,m,l){let b=[t,...r.map(w=>w.route.id)].join("-");try{let w=m.get(b);w||(w=e({path:t,matches:r,patch:(T,E)=>{l.aborted||RE(T,E,o,c,d)}}),m.set(b,w)),w&&SV(w)&&await w}finally{m.delete(b)}}function RE(e,t,r,o,c){if(e){var d;let m=o[e];Pr(m,"No route found to patch children into: routeId = "+e);let l=Ap(t,c,[e,"patch",String(((d=m.children)==null?void 0:d.length)||"0")],o);m.children?m.children.push(...l):m.children=l}else{let m=Ap(t,c,["patch",String(r.length||"0")],o);r.push(...m)}}async function mV(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let c=r[e.id];Pr(c,"No route found in manifest");let d={};for(let m in o){let b=c[m]!==void 0&&m!=="hasErrorBoundary";ed(!b,'Route "'+c.id+'" has a static property "'+m+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+m+'" will be ignored.')),!b&&!Bj.has(m)&&(d[m]=o[m])}Object.assign(c,d),Object.assign(c,An({},t(c),{lazy:void 0}))}async function gV(e){let{matches:t}=e,r=t.filter(c=>c.shouldLoad);return(await Promise.all(r.map(c=>c.resolve()))).reduce((c,d,m)=>Object.assign(c,{[r[m].route.id]:d}),{})}async function yV(e,t,r,o,c,d,m,l,b,w){let T=d.map(O=>O.route.lazy?mV(O.route,b,l):void 0),E=d.map((O,U)=>{let V=T[U],K=c.some(R=>R.route.id===O.route.id);return An({},O,{shouldLoad:K,resolve:async R=>(R&&o.method==="GET"&&(O.route.lazy||O.route.loader)&&(K=!0),K?vV(t,o,O,V,R,w):Promise.resolve({type:cn.data,result:void 0}))})}),M=await e({matches:E,request:o,params:d[0].params,fetcherKey:m,context:w});try{await Promise.all(T)}catch{}return M}async function vV(e,t,r,o,c,d){let m,l,b=w=>{let T,E=new Promise((U,V)=>T=V);l=()=>T(),t.signal.addEventListener("abort",l);let M=U=>typeof w!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):w({request:t,params:r.params,context:d},...U!==void 0?[U]:[]),O=(async()=>{try{return{type:"data",result:await(c?c(V=>M(V)):M())}}catch(U){return{type:"error",result:U}}})();return Promise.race([O,E])};try{let w=r.route[e];if(o)if(w){let T,[E]=await Promise.all([b(w).catch(M=>{T=M}),o]);if(T!==void 0)throw T;m=E}else if(await o,w=r.route[e],w)m=await b(w);else if(e==="action"){let T=new URL(t.url),E=T.pathname+T.search;throw io(405,{method:t.method,pathname:E,routeId:r.route.id})}else return{type:cn.data,result:void 0};else if(w)m=await b(w);else{let T=new URL(t.url),E=T.pathname+T.search;throw io(404,{pathname:E})}Pr(m.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(w){return{type:cn.error,result:w}}finally{l&&t.signal.removeEventListener("abort",l)}return m}async function _V(e){let{result:t,type:r}=e;if($E(t)){let w;try{let T=t.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?t.body==null?w=null:w=await t.json():w=await t.text()}catch(T){return{type:cn.error,error:T}}return r===cn.error?{type:cn.error,error:new Ug(t.status,t.statusText,w),statusCode:t.status,headers:t.headers}:{type:cn.data,data:w,statusCode:t.status,headers:t.headers}}if(r===cn.error){if(LC(t)){var o;if(t.data instanceof Error){var c;return{type:cn.error,error:t.data,statusCode:(c=t.init)==null?void 0:c.status}}t=new Ug(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:cn.error,error:t,statusCode:sv(t)?t.status:void 0}}if(kV(t)){var d,m;return{type:cn.deferred,deferredData:t,statusCode:(d=t.init)==null?void 0:d.status,headers:((m=t.init)==null?void 0:m.headers)&&new Headers(t.init.headers)}}if(LC(t)){var l,b;return{type:cn.data,data:t.data,statusCode:(l=t.init)==null?void 0:l.status,headers:(b=t.init)!=null&&b.headers?new Headers(t.init.headers):void 0}}return{type:cn.data,data:t}}function xV(e,t,r,o,c,d){let m=e.headers.get("Location");if(Pr(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!gb.test(m)){let l=o.slice(0,o.findIndex(b=>b.route.id===r)+1);m=gx(new URL(t.url),l,c,!0,m,d),e.headers.set("Location",m)}return e}function EC(e,t,r){if(gb.test(e)){let o=e,c=o.startsWith("//")?new URL(t.protocol+o):new URL(o),d=of(c.pathname,r)!=null;if(c.origin===t.origin&&d)return c.pathname+c.search+c.hash}return e}function lu(e,t,r,o){let c=e.createURL(LE(t)).toString(),d={signal:r};if(o&&Ea(o.formMethod)){let{formMethod:m,formEncType:l}=o;d.method=m.toUpperCase(),l==="application/json"?(d.headers=new Headers({"Content-Type":l}),d.body=JSON.stringify(o.json)):l==="text/plain"?d.body=o.text:l==="application/x-www-form-urlencoded"&&o.formData?d.body=yx(o.formData):d.body=o.formData}return new Request(c,d)}function yx(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,typeof o=="string"?o:o.name);return t}function zC(e){let t=new FormData;for(let[r,o]of e.entries())t.append(r,o);return t}function bV(e,t,r,o,c){let d={},m=null,l,b=!1,w={},T=r&&Do(r[1])?r[1].error:void 0;return e.forEach(E=>{if(!(E.route.id in t))return;let M=E.route.id,O=t[M];if(Pr(!ac(O),"Cannot handle redirect results in processLoaderData"),Do(O)){let U=O.error;T!==void 0&&(U=T,T=void 0),m=m||{};{let V=Pu(e,M);m[V.route.id]==null&&(m[V.route.id]=U)}d[M]=void 0,b||(b=!0,l=sv(O.error)?O.error.status:500),O.headers&&(w[M]=O.headers)}else ul(O)?(o.set(M,O.deferredData),d[M]=O.deferredData.data,O.statusCode!=null&&O.statusCode!==200&&!b&&(l=O.statusCode),O.headers&&(w[M]=O.headers)):(d[M]=O.data,O.statusCode&&O.statusCode!==200&&!b&&(l=O.statusCode),O.headers&&(w[M]=O.headers))}),T!==void 0&&r&&(m={[r[0]]:T},d[r[0]]=void 0),{loaderData:d,errors:m,statusCode:l||200,loaderHeaders:w}}function MC(e,t,r,o,c,d,m,l){let{loaderData:b,errors:w}=bV(t,o,c,l);return d.forEach(T=>{let{key:E,match:M,controller:O}=T,U=m[E];if(Pr(U,"Did not find corresponding fetcher result"),!(O&&O.signal.aborted))if(Do(U)){let V=Pu(e.matches,M==null?void 0:M.route.id);w&&w[V.route.id]||(w=An({},w,{[V.route.id]:U.error})),e.fetchers.delete(E)}else if(ac(U))Pr(!1,"Unhandled fetcher revalidation redirect");else if(ul(U))Pr(!1,"Unhandled fetcher deferred data");else{let V=tl(U.data);e.fetchers.set(E,V)}}),{loaderData:b,errors:w}}function DC(e,t,r,o){let c=An({},t);for(let d of r){let m=d.route.id;if(t.hasOwnProperty(m)?t[m]!==void 0&&(c[m]=t[m]):e[m]!==void 0&&d.route.loader&&(c[m]=e[m]),o&&o.hasOwnProperty(m))break}return c}function AC(e){return e?Do(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Pu(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function RC(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function io(e,t){let{pathname:r,routeId:o,method:c,type:d,message:m}=t===void 0?{}:t,l="Unknown Server Error",b="Unknown @remix-run/router error";return e===400?(l="Bad Request",d==="route-discovery"?b='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+m):c&&r&&o?b="You made a "+c+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":d==="defer-action"?b="defer() is not supported in actions":d==="invalid-body"&&(b="Unable to encode submission body")):e===403?(l="Forbidden",b='Route "'+o+'" does not match URL "'+r+'"'):e===404?(l="Not Found",b='No route matches URL "'+r+'"'):e===405&&(l="Method Not Allowed",c&&r&&o?b="You made a "+c.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":c&&(b='Invalid request method "'+c.toUpperCase()+'"')),new Ug(e||500,l,new Error(b),!0)}function Bm(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[o,c]=t[r];if(ac(c))return{key:o,result:c}}}function LE(e){let t=typeof e=="string"?Pl(e):e;return nf(An({},t,{hash:""}))}function wV(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function SV(e){return typeof e=="object"&&e!=null&&"then"in e}function CV(e){return $E(e.result)&&aV.has(e.result.status)}function ul(e){return e.type===cn.deferred}function Do(e){return e.type===cn.error}function ac(e){return(e&&e.type)===cn.redirect}function LC(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function kV(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function $E(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function IV(e){return oV.has(e.toLowerCase())}function Ea(e){return nV.has(e.toLowerCase())}async function TV(e,t,r,o,c){let d=Object.entries(t);for(let m=0;m<d.length;m++){let[l,b]=d[m],w=e.find(M=>(M==null?void 0:M.route.id)===l);if(!w)continue;let T=o.find(M=>M.route.id===w.route.id),E=T!=null&&!AE(T,w)&&(c&&c[w.route.id])!==void 0;ul(b)&&E&&await yb(b,r,!1).then(M=>{M&&(t[l]=M)})}}async function PV(e,t,r){for(let o=0;o<r.length;o++){let{key:c,routeId:d,controller:m}=r[o],l=t[c];e.find(w=>(w==null?void 0:w.route.id)===d)&&ul(l)&&(Pr(m,"Expected an AbortController for revalidating fetcher deferred result"),await yb(l,m.signal,!0).then(w=>{w&&(t[c]=w)}))}}async function yb(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:cn.data,data:e.deferredData.unwrappedData}}catch(c){return{type:cn.error,error:c}}return{type:cn.data,data:e.deferredData.data}}}function vb(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Wh(e,t){let r=typeof t=="string"?Pl(t).search:t.search;if(e[e.length-1].route.index&&vb(r||""))return e[e.length-1];let o=PE(e);return o[o.length-1]}function $C(e){let{formMethod:t,formAction:r,formEncType:o,text:c,formData:d,json:m}=e;if(!(!t||!r||!o)){if(c!=null)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:void 0,text:c};if(d!=null)return{formMethod:t,formAction:r,formEncType:o,formData:d,json:void 0,text:void 0};if(m!==void 0)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:m,text:void 0}}}function n_(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function EV(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function $h(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function zV(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function tl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function MV(e,t){try{let r=e.sessionStorage.getItem(DE);if(r){let o=JSON.parse(r);for(let[c,d]of Object.entries(o||{}))d&&Array.isArray(d)&&t.set(c,new Set(d||[]))}}catch{}}function DV(e,t){if(t.size>0){let r={};for(let[o,c]of t)r[o]=[...c];try{e.sessionStorage.setItem(DE,JSON.stringify(r))}catch(o){ed(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hg.apply(this,arguments)}const lv=A.createContext(null),BE=A.createContext(null),cv=A.createContext(null),_b=A.createContext(null),pd=A.createContext({outlet:null,matches:[],isDataRoute:!1}),OE=A.createContext(null);function uv(){return A.useContext(_b)!=null}function xb(){return uv()||Pr(!1),A.useContext(_b).location}function FE(e){A.useContext(cv).static||A.useLayoutEffect(e)}function AV(){let{isDataRoute:e}=A.useContext(pd);return e?WV():RV()}function RV(){uv()||Pr(!1);let e=A.useContext(lv),{basename:t,future:r,navigator:o}=A.useContext(cv),{matches:c}=A.useContext(pd),{pathname:d}=xb(),m=JSON.stringify(EE(c,r.v7_relativeSplatPath)),l=A.useRef(!1);return FE(()=>{l.current=!0}),A.useCallback(function(w,T){if(T===void 0&&(T={}),!l.current)return;if(typeof w=="number"){o.go(w);return}let E=zE(w,JSON.parse(m),d,T.relative==="path");e==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:_l([t,E.pathname])),(T.replace?o.replace:o.push)(E,T.state,T)},[t,o,m,d,e])}function LV(e,t,r,o){uv()||Pr(!1);let{navigator:c}=A.useContext(cv),{matches:d}=A.useContext(pd),m=d[d.length-1],l=m?m.params:{};m&&m.pathname;let b=m?m.pathnameBase:"/";m&&m.route;let w=xb(),T;T=w;let E=T.pathname||"/",M=E;if(b!=="/"){let V=b.replace(/^\//,"").split("/");M="/"+E.replace(/^\//,"").split("/").slice(V.length).join("/")}let O=rc(e,{pathname:M});return NV(O&&O.map(V=>Object.assign({},V,{params:Object.assign({},l,V.params),pathname:_l([b,c.encodeLocation?c.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?b:_l([b,c.encodeLocation?c.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),d,r,o)}function $V(){let e=HV(),t=sv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:c},r):null,null)}const BV=A.createElement($V,null);class OV extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?A.createElement(pd.Provider,{value:this.props.routeContext},A.createElement(OE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FV(e){let{routeContext:t,match:r,children:o}=e,c=A.useContext(lv);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(pd.Provider,{value:t},o)}function NV(e,t,r,o){var c;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var d;if(!r)return null;if(r.errors)e=r.matches;else if((d=o)!=null&&d.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let m=e,l=(c=r)==null?void 0:c.errors;if(l!=null){let T=m.findIndex(E=>E.route.id&&(l==null?void 0:l[E.route.id])!==void 0);T>=0||Pr(!1),m=m.slice(0,Math.min(m.length,T+1))}let b=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let T=0;T<m.length;T++){let E=m[T];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(w=T),E.route.id){let{loaderData:M,errors:O}=r,U=E.route.loader&&M[E.route.id]===void 0&&(!O||O[E.route.id]===void 0);if(E.route.lazy||U){b=!0,w>=0?m=m.slice(0,w+1):m=[m[0]];break}}}return m.reduceRight((T,E,M)=>{let O,U=!1,V=null,K=null;r&&(O=l&&E.route.id?l[E.route.id]:void 0,V=E.route.errorElement||BV,b&&(w<0&&M===0?(U=!0,K=null):w===M&&(U=!0,K=E.route.hydrateFallbackElement||null)));let F=t.concat(m.slice(0,M+1)),R=()=>{let L;return O?L=V:U?L=K:E.route.Component?L=A.createElement(E.route.Component,null):E.route.element?L=E.route.element:L=T,A.createElement(FV,{match:E,routeContext:{outlet:T,matches:F,isDataRoute:r!=null},children:L})};return r&&(E.route.ErrorBoundary||E.route.errorElement||M===0)?A.createElement(OV,{location:r.location,revalidation:r.revalidation,component:V,error:O,children:R(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):R()},null)}var NE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(NE||{}),Wg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wg||{});function jV(e){let t=A.useContext(lv);return t||Pr(!1),t}function VV(e){let t=A.useContext(BE);return t||Pr(!1),t}function UV(e){let t=A.useContext(pd);return t||Pr(!1),t}function jE(e){let t=UV(),r=t.matches[t.matches.length-1];return r.route.id||Pr(!1),r.route.id}function HV(){var e;let t=A.useContext(OE),r=VV(Wg.UseRouteError),o=jE(Wg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function WV(){let{router:e}=jV(NE.UseNavigateStable),t=jE(Wg.UseNavigateStable),r=A.useRef(!1);return FE(()=>{r.current=!0}),A.useCallback(function(c,d){d===void 0&&(d={}),r.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Hg({fromRouteId:t},d)))},[e,t])}function vx(e){Pr(!1)}function GV(e){let{basename:t="/",children:r=null,location:o,navigationType:c=ri.Pop,navigator:d,static:m=!1,future:l}=e;uv()&&Pr(!1);let b=t.replace(/^\/*/,"/"),w=A.useMemo(()=>({basename:b,navigator:d,static:m,future:Hg({v7_relativeSplatPath:!1},l)}),[b,l,d,m]);typeof o=="string"&&(o=Pl(o));let{pathname:T="/",search:E="",hash:M="",state:O=null,key:U="default"}=o,V=A.useMemo(()=>{let K=of(T,b);return K==null?null:{location:{pathname:K,search:E,hash:M,state:O,key:U},navigationType:c}},[b,T,E,M,O,U,c]);return V==null?null:A.createElement(cv.Provider,{value:w},A.createElement(_b.Provider,{children:r,value:V}))}new Promise(()=>{});function _x(e,t){t===void 0&&(t=[]);let r=[];return A.Children.forEach(e,(o,c)=>{if(!A.isValidElement(o))return;let d=[...t,c];if(o.type===A.Fragment){r.push.apply(r,_x(o.props.children,d));return}o.type!==vx&&Pr(!1),!o.props.index||!o.props.children||Pr(!1);let m={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=_x(o.props.children,d)),r.push(m)}),r}function qV(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:A.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:A.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:A.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gg.apply(this,arguments)}function xx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(c=>[r,c]):[[r,o]])},[]))}function ZV(e,t){let r=xx(e);return t&&t.forEach((o,c)=>{r.has(c)||t.getAll(c).forEach(d=>{r.append(c,d)})}),r}const KV="6";try{window.__reactRouterVersion=KV}catch{}function XV(e,t){return uV({basename:void 0,future:Gg({},void 0,{v7_prependBasename:!0}),history:Rj({window:void 0}),hydrationData:JV(),routes:e,mapRouteProperties:qV,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function JV(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Gg({},t,{errors:YV(t.errors)})),t}function YV(e){if(!e)return null;let t=Object.entries(e),r={};for(let[o,c]of t)if(c&&c.__type==="RouteErrorResponse")r[o]=new Ug(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){if(c.__subType){let d=window[c.__subType];if(typeof d=="function")try{let m=new d(c.message);m.stack="",r[o]=m}catch{}}if(r[o]==null){let d=new Error(c.message);d.stack="",r[o]=d}}else r[o]=c;return r}const QV=A.createContext({isTransitioning:!1}),e8=A.createContext(new Map),t8="startTransition",BC=cg[t8],r8="flushSync",OC=w4[r8];function n8(e){BC?BC(e):e()}function Bh(e){OC?OC(e):e()}class i8{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}}function o8(e){let{fallbackElement:t,router:r,future:o}=e,[c,d]=A.useState(r.state),[m,l]=A.useState(),[b,w]=A.useState({isTransitioning:!1}),[T,E]=A.useState(),[M,O]=A.useState(),[U,V]=A.useState(),K=A.useRef(new Map),{v7_startTransition:F}=o||{},R=A.useCallback(Z=>{F?n8(Z):Z()},[F]),L=A.useCallback((Z,Ce)=>{let{deletedFetchers:_e,unstable_flushSync:ke,unstable_viewTransitionOpts:ze}=Ce;_e.forEach(Ye=>K.current.delete(Ye)),Z.fetchers.forEach((Ye,Ge)=>{Ye.data!==void 0&&K.current.set(Ge,Ye.data)});let Le=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!ze||Le){ke?Bh(()=>d(Z)):R(()=>d(Z));return}if(ke){Bh(()=>{M&&(T&&T.resolve(),M.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation})});let Ye=r.window.document.startViewTransition(()=>{Bh(()=>d(Z))});Ye.finished.finally(()=>{Bh(()=>{E(void 0),O(void 0),l(void 0),w({isTransitioning:!1})})}),Bh(()=>O(Ye));return}M?(T&&T.resolve(),M.skipTransition(),V({state:Z,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation})):(l(Z),w({isTransitioning:!0,flushSync:!1,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation}))},[r.window,M,T,K,R]);A.useLayoutEffect(()=>r.subscribe(L),[r,L]),A.useEffect(()=>{b.isTransitioning&&!b.flushSync&&E(new i8)},[b]),A.useEffect(()=>{if(T&&m&&r.window){let Z=m,Ce=T.promise,_e=r.window.document.startViewTransition(async()=>{R(()=>d(Z)),await Ce});_e.finished.finally(()=>{E(void 0),O(void 0),l(void 0),w({isTransitioning:!1})}),O(_e)}},[R,m,T,r.window]),A.useEffect(()=>{T&&m&&c.location.key===m.location.key&&T.resolve()},[T,M,c.location,m]),A.useEffect(()=>{!b.isTransitioning&&U&&(l(U.state),w({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}),V(void 0))},[b.isTransitioning,U]),A.useEffect(()=>{},[]);let re=A.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:Z=>r.navigate(Z),push:(Z,Ce,_e)=>r.navigate(Z,{state:Ce,preventScrollReset:_e==null?void 0:_e.preventScrollReset}),replace:(Z,Ce,_e)=>r.navigate(Z,{replace:!0,state:Ce,preventScrollReset:_e==null?void 0:_e.preventScrollReset})}),[r]),J=r.basename||"/",se=A.useMemo(()=>({router:r,navigator:re,static:!1,basename:J}),[r,re,J]),ie=A.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return A.createElement(A.Fragment,null,A.createElement(lv.Provider,{value:se},A.createElement(BE.Provider,{value:c},A.createElement(e8.Provider,{value:K.current},A.createElement(QV.Provider,{value:b},A.createElement(GV,{basename:J,location:c.location,navigationType:c.historyAction,navigator:re,future:ie},c.initialized||r.future.v7_partialHydration?A.createElement(a8,{routes:r.routes,future:r.future,state:c}):t))))),null)}const a8=A.memo(s8);function s8(e){let{routes:t,future:r,state:o}=e;return LV(t,void 0,o,r)}var FC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(FC||(FC={}));var NC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(NC||(NC={}));function l8(e){let t=A.useRef(xx(e)),r=A.useRef(!1),o=xb(),c=A.useMemo(()=>ZV(o.search,r.current?null:t.current),[o.search]),d=AV(),m=A.useCallback((l,b)=>{const w=xx(typeof l=="function"?l(c):l);r.current=!0,d("?"+w,b)},[d,c]);return[c,m]}function Sn(e,t){if(e==null)throw new Error(t);return e}function c8(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}var Gi=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Kansas=4]="Kansas",e[e.Montana=5]="Montana",e[e.Nebraska=6]="Nebraska",e[e.Nevada=7]="Nevada",e[e.NewMexico=8]="NewMexico",e[e.Oklahoma=9]="Oklahoma",e[e.Oregon=10]="Oregon",e[e.Texas=11]="Texas",e[e.Utah=12]="Utah",e[e.Washington=13]="Washington",e[e.Wyoming=14]="Wyoming",e))(Gi||{});const Rp=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),u8={7:"Nevada",0:"Arizona",8:"New Mexico",10:"Oregon",13:"Washington",12:"Utah",3:"Idaho",2:"Colorado",14:"Wyoming",5:"Montana",11:"Texas",9:"Oklahoma",4:"Kansas",6:"Nebraska",1:"Arkansas"},VE={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},d8={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values(d8))e!==0&&c8(VE[e].size===1);function dv(e){const t=new Set;for(const[r,o]of Object.entries(VE))[...o].every(c=>e.has(c))&&t.add(Number(r));return t}const h8=new Set([]);var UE=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e))(UE||{});const p8="modulepreload",f8=function(e){return"/"+e},jC={},m8=function(t,r,o){let c=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),l=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=Promise.allSettled(r.map(b=>{if(b=f8(b),b in jC)return;jC[b]=!0;const w=b.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":p8,w||(E.as="script"),E.crossOrigin="",E.href=b,l&&E.setAttribute("nonce",l),document.head.appendChild(E),w)return new Promise((M,O)=>{E.addEventListener("load",M),E.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(m){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=m,window.dispatchEvent(l),!l.defaultPrevented)throw m}return c.then(m=>{for(const l of m||[])l.status==="rejected"&&d(l.reason);return t().catch(d)})},HE=A.createContext(null);function g8(){var e;const t=(e=A.useContext(HE))===null||e===void 0?void 0:e.maps,r=A.useContext(bc);return A.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function y8(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===c&&o===d}function Ro(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ro(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const c of r)if(!t.hasOwnProperty(c)||!Ro(e[c],t[c]))return!1;return!0}return!1}function v8(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function VC(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();Ro(r,o)||t.setProjection(r)}function UC(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function HC(e,t){const r=t.viewState||t;let o=!1;if("longitude"in r&&"latitude"in r){const c=e.center;e.center=new c.constructor(r.longitude,r.latitude),o=o||c!==e.center}if("zoom"in r){const c=e.zoom;e.zoom=r.zoom,o=o||c!==e.zoom}if("bearing"in r){const c=e.bearing;e.bearing=r.bearing,o=o||c!==e.bearing}if("pitch"in r){const c=e.pitch;e.pitch=r.pitch,o=o||c!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),o}const _8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function WC(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let c=null;"interactive"in o&&(c=Object.assign({},o),delete c.interactive);const d=t[o.ref];if(d){c=c||Object.assign({},o),delete c.ref;for(const m of _8)m in d&&(c[m]=d[m])}return c||o});return{...e,layers:r}}var GC={};const qC={version:8,sources:{},layers:[]},ZC={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},i_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},KC={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},x8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],b8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class td{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[KC[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[ZC[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[i_[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=td.savedMaps.pop();if(!o)return null;const c=o.map,d=c.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);c._container=r;const m=c._resizeObserver;m&&(m.disconnect(),m.observe(r)),o.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):o._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=qC}=r,c={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||w8()||null,container:t,style:WC(o)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),r.gl){const T=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=T,r.gl)}const m=new this._MapClass(c);d.padding&&m.setPadding(d.padding),r.cursor&&(m.getCanvas().style.cursor=r.cursor),this._createShadowTransform(m);const l=m._render;m._render=T=>{this._inRender=!0,l.call(m,T),this._inRender=!1};const b=m._renderTaskQueue.run;m._renderTaskQueue.run=T=>{b.call(m._renderTaskQueue,T),this._onBeforeRepaint()},m.on("render",()=>this._onAfterRepaint());const w=m.fire;m.fire=this._fireEvent.bind(this,w),m.on("resize",()=>{this._renderTransform.resize(m.transform.width,m.transform.height)}),m.on("styledata",()=>{this._updateStyleComponents(this.props,{}),VC(m.transform,this._renderTransform)}),m.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const T in ZC)m.on(T,this._onPointerEvent);for(const T in i_)m.on(T,this._onCameraEvent);for(const T in KC)m.on(T,this._onEvent);this._map=m}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),td.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=v8(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,c=this._renderTransform,{zoom:d,pitch:m,bearing:l}=c,b=o.isMoving();b&&(c.cameraElevationReference="sea");const w=HC(c,{...UC(o.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&r){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=d!==c.zoom),T.rotate||(T.rotate=l!==c.bearing),T.pitch||(T.pitch=m!==c.pitch)}return b||HC(o.transform,t),w}_updateSettings(t,r){const o=this._map;let c=!1;for(const d of x8)if(d in t&&!Ro(t[d],r[d])){c=!0;const m=o[`set${d[0].toUpperCase()}${d.slice(1)}`];m==null||m.call(o,t[d])}return c}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=qC,styleDiffing:c=!0}=t,d={diff:c};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(WC(o),d),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let c=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!Ro(t.light,r.light)&&(c=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!Ro(t.fog,r.fog)&&(c=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!Ro(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(c=!0,o.setTerrain(t.terrain))),c}_updateHandlers(t,r){var o,c;const d=this._map;let m=!1;for(const l of b8){const b=(o=t[l])!==null&&o!==void 0?o:!0,w=(c=r[l])!==null&&c!==void 0?c:!0;Ro(b,w)||(m=!0,b?d[l].enable(b):d[l].disable())}return m}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:c=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:c.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const d=t.type,m=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&m&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!m&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,o){const c=this._map,d=c.transform,m=typeof r=="string"?r:r.type;return m==="move"&&this._updateViewState(this.props,!1),m in i_&&(typeof r=="object"&&(r.viewState=UC(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,r,o),c.transform=d,c):(t.call(c,r,o),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{VC(this._renderTransform,r),t.transform=r}}}td.savedMaps=[];function w8(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||GC.MapboxAccessToken}catch{}try{e=e||GC.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const S8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function C8(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const c=t.transform;t.transform=e.transform;const d=t.project(o);return t.transform=c,d},unproject:o=>{const c=t.transform;t.transform=e.transform;const d=t.unproject(o);return t.transform=c,d},queryTerrainElevation:(o,c)=>{const d=t.transform;t.transform=e.transform;const m=t.queryTerrainElevation(o,c);return t.transform=d,m},queryRenderedFeatures:(o,c)=>{const d=t.transform;t.transform=e.transform;const m=t.queryRenderedFeatures(o,c);return t.transform=d,m}};for(const o of k8(t))!(o in r)&&!S8.includes(o)&&(r[o]=t[o].bind(t));return r}function k8(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const I8=typeof document<"u"?A.useLayoutEffect:A.useEffect,T8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function P8(e,t){for(const o of T8)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const bc=A.createContext(null);function E8(e,t,r){const o=A.useContext(HE),[c,d]=A.useState(null),m=A.useRef(),{current:l}=A.useRef({mapLib:null,map:null});A.useEffect(()=>{const T=e.mapLib;let E=!0,M;return Promise.resolve(T||r).then(O=>{if(!E)return;if(!O)throw new Error("Invalid mapLib");const U="Map"in O?O:O.default;if(!U.Map)throw new Error("Invalid mapLib");if(P8(U,e),!U.supported||U.supported(e))e.reuseMaps&&(M=td.reuse(e,m.current)),M||(M=new td(U.Map,e,m.current)),l.map=C8(M),l.mapLib=U,d(M),o==null||o.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(O=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:O}):console.error(O)}),()=>{E=!1,M&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?M.recycle():M.destroy())}},[]),I8(()=>{c&&c.setProps(e)}),A.useImperativeHandle(t,()=>l.map,[c]);const b=A.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return A.createElement("div",{id:e.id,ref:m,style:b},c&&A.createElement(bc.Provider,{value:l},A.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const z8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function wc(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const c=t[o];Number.isFinite(c)&&!z8.test(o)?r[o]=`${c}px`:r[o]=c}}function M8(e,t){const{map:r,mapLib:o}=A.useContext(bc),c=A.useRef({props:e});c.current.props=e;const d=A.useMemo(()=>{let V=!1;A.Children.forEach(e.children,R=>{R&&(V=!0)});const K={...e,element:V?document.createElement("div"):null},F=new o.Marker(K);return F.setLngLat([e.longitude,e.latitude]),F.getElement().addEventListener("click",R=>{var L,re;(re=(L=c.current.props).onClick)===null||re===void 0||re.call(L,{type:"click",target:F,originalEvent:R})}),F.on("dragstart",R=>{var L,re;const J=R;J.lngLat=d.getLngLat(),(re=(L=c.current.props).onDragStart)===null||re===void 0||re.call(L,J)}),F.on("drag",R=>{var L,re;const J=R;J.lngLat=d.getLngLat(),(re=(L=c.current.props).onDrag)===null||re===void 0||re.call(L,J)}),F.on("dragend",R=>{var L,re;const J=R;J.lngLat=d.getLngLat(),(re=(L=c.current.props).onDragEnd)===null||re===void 0||re.call(L,J)}),F},[]);A.useEffect(()=>(d.addTo(r.getMap()),()=>{d.remove()}),[]);const{longitude:m,latitude:l,offset:b,style:w,draggable:T=!1,popup:E=null,rotation:M=0,rotationAlignment:O="auto",pitchAlignment:U="auto"}=e;return A.useEffect(()=>{wc(d.getElement(),w)},[w]),A.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==m||d.getLngLat().lat!==l)&&d.setLngLat([m,l]),b&&!y8(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==T&&d.setDraggable(T),d.getRotation()!==M&&d.setRotation(M),d.getRotationAlignment()!==O&&d.setRotationAlignment(O),d.getPitchAlignment()!==U&&d.setPitchAlignment(U),d.getPopup()!==E&&d.setPopup(E),cd.createPortal(e.children,d.getElement())}const D8=A.memo(A.forwardRef(M8));function XC(e){return new Set(e?e.trim().split(/\s+/):[])}function A8(e,t){const{map:r,mapLib:o}=A.useContext(bc),c=A.useMemo(()=>document.createElement("div"),[]),d=A.useRef({props:e});d.current.props=e;const m=A.useMemo(()=>{const l={...e},b=new o.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var T,E;(E=(T=d.current.props).onOpen)===null||E===void 0||E.call(T,w)}),b},[]);if(A.useEffect(()=>{const l=b=>{var w,T;(T=(w=d.current.props).onClose)===null||T===void 0||T.call(w,b)};return m.on("close",l),m.setDOMContent(c).addTo(r.getMap()),()=>{m.off("close",l),m.isOpen()&&m.remove()}},[]),A.useEffect(()=>{wc(m.getElement(),e.style)},[e.style]),A.useImperativeHandle(t,()=>m,[]),m.isOpen()&&((m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!Ro(m.options.offset,e.offset)&&m.setOffset(e.offset),(m.options.anchor!==e.anchor||m.options.maxWidth!==e.maxWidth)&&(m.options.anchor=e.anchor,m.setMaxWidth(e.maxWidth)),m.options.className!==e.className)){const l=XC(m.options.className),b=XC(e.className);for(const w of l)b.has(w)||m.removeClassName(w);for(const w of b)l.has(w)||m.addClassName(w);m.options.className=e.className}return cd.createPortal(e.children,c)}A.memo(A.forwardRef(A8));function $s(e,t,r,o){const c=A.useContext(bc),d=A.useMemo(()=>e(c),[]);return A.useEffect(()=>{const m=t,l=typeof t=="function"&&typeof r=="function"?t:null,b=typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,m==null?void 0:m.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function R8(e){const t=$s(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return A.useEffect(()=>{wc(t._container,e.style)},[e.style]),null}const L8=A.memo(R8);function $8(e){const t=$s(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return A.useEffect(()=>{wc(t._controlContainer,e.style)},[e.style]),null}const B8=A.memo($8);function O8(e,t){const r=A.useRef({props:e}),o=$s(({mapLib:c})=>{const d=new c.GeolocateControl(e),m=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||m(l)},d.on("geolocate",l=>{var b,w;(w=(b=r.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=r.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return r.current.props=e,A.useImperativeHandle(t,()=>o,[]),A.useEffect(()=>{wc(o._container,e.style)},[e.style]),null}A.memo(A.forwardRef(O8));function F8(e){const t=$s(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return A.useEffect(()=>{wc(t._container,e.style)},[e.style]),null}const N8=A.memo(F8);function j8(e){const t=$s(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),r=A.useRef(e),o=r.current;r.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),A.useEffect(()=>{wc(t._container,c)},[c]),null}A.memo(j8);function qg(e,t){if(!e)throw new Error(t)}function V8(e,t,r,o){if(qg(r.id===o.id,"layer id changed"),qg(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:c={},paint:d={},filter:m,minzoom:l,maxzoom:b,beforeId:w}=r;if(w!==o.beforeId&&e.moveLayer(t,w),c!==o.layout){const T=o.layout||{};for(const E in c)Ro(c[E],T[E])||e.setLayoutProperty(t,E,c[E]);for(const E in T)c.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(d!==o.paint){const T=o.paint||{};for(const E in d)Ro(d[E],T[E])||e.setPaintProperty(t,E,d[E]);for(const E in T)d.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}Ro(m,o.filter)||e.setFilter(t,m),(l!==o.minzoom||b!==o.maxzoom)&&e.setLayerZoomRange(t,l,b)}function U8(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let H8=0;function W8(e){const t=A.useContext(bc).map.getMap(),r=A.useRef(e),[,o]=A.useState(0),c=A.useMemo(()=>e.id||`jsx-layer-${H8++}`,[]);if(A.useEffect(()=>{if(t){const m=()=>o(l=>l+1);return t.on("styledata",m),m(),()=>{t.off("styledata",m),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{V8(t,c,e,r.current)}catch(m){console.warn(m)}else U8(t,c,e);return r.current=e,null}let G8=0;function q8(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function Z8(e,t,r){qg(t.id===r.id,"source id changed"),qg(t.type===r.type,"source type changed");let o="",c=0;for(const m in t)m!=="children"&&m!=="id"&&!Ro(r[m],t[m])&&(o=m,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&o==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(o){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${o}`)}function K8(e){const t=A.useContext(bc).map.getMap(),r=A.useRef(e),[,o]=A.useState(0),c=A.useMemo(()=>e.id||`jsx-source-${G8++}`,[]);A.useEffect(()=>{if(t){const m=()=>setTimeout(()=>o(l=>l+1),0);return t.on("styledata",m),m(),()=>{var l;if(t.off("styledata",m),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?Z8(d,e,r.current):d=q8(t,c,e),r.current=e,d&&A.Children.map(e.children,m=>m&&A.cloneElement(m,{source:c}))||null}function bb(){return g8()}const X8=m8(()=>Promise.resolve().then(()=>eU),void 0),WE=A.forwardRef(function(t,r){return E8(t,r,X8)}),J8=D8,GE=L8,qE=B8,ZE=N8,Jr=W8,fd=K8,Y8={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},Q8={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},wb={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",baseTextPaint:Y8,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",baseTextPaint:Q8,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var KE={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(zD,function(){var r,o,c;function d(l,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),c=b(T),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(a,n,s,h){return new(s||(s=Promise))(function(f,v){function x(z){try{I(h.next(z))}catch($){v($)}}function S(z){try{I(h.throw(z))}catch($){v($)}}function I(z){var $;z.done?f(z.value):($=z.value,$ instanceof s?$:new s(function(j){j($)})).then(x,S)}I((h=h.apply(a,n||[])).next())})}function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var T=E;function E(a,n){this.x=a,this.y=n}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(a,n){var s=Math.cos(a),h=Math.sin(a),f=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(a){return a instanceof E?a:Array.isArray(a)?new E(a[0],a[1]):a};var M=w(T),O=U;function U(a,n,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=h}U.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var f=this.sampleCurveX(s)-a;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,S=1;for(s=a,h=0;h<20&&(f=this.sampleCurveX(s),!(Math.abs(f-a)<n));h++)a>f?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var V=w(O);let K,F;function R(){return K==null&&(K=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),K}function L(){if(F==null&&(F=!1,R())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const f=4*h;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){F=!0;break}}}return F||!1}function re(a,n,s,h){const f=new V(a,n,s,h);return function(v){return f.solve(v)}}const J=re(.25,.1,.25,1);function se(a,n,s){return Math.min(s,Math.max(n,a))}function ie(a,n,s){const h=s-n,f=((a-n)%h+h)%h+n;return f===n?s:f}function Z(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}let Ce=1;function _e(a,n,s){const h={};for(const f in a)h[f]=n.call(s||this,a[f],f,a);return h}function ke(a,n,s){const h={};for(const f in a)n.call(s||this,a[f],f,a)&&(h[f]=a[f]);return h}function ze(a){return Array.isArray(a)?a.map(ze):typeof a=="object"&&a?_e(a,ze):a}const Le={};function Ye(a){Le[a]||(typeof console<"u"&&console.warn(a),Le[a]=!0)}function Ge(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function Te(a){let n=0;for(let s,h,f=0,v=a.length,x=v-1;f<v;x=f++)s=a[f],h=a[x],n+=(h.x-s.x)*(s.y+h.y);return n}function Fe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let $e=null;function Oe(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function at(a,n,s,h,f){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),I=new Uint8ClampedArray(h*f*4);if(yield v.copyTo(I,function(z,$,j,q,Y){const ee=4*Math.max(-$,0),le=(Math.max(0,j)-j)*q*4+ee,me=4*q,ve=Math.max(0,$),Ae=Math.max(0,j);return{rect:{x:ve,y:Ae,width:Math.min(z.width,$+q)-ve,height:Math.min(z.height,j+Y)-Ae},layout:[{offset:le,stride:me}]}}(a,n,s,h,f)),S)for(let z=0;z<I.length;z+=4){const $=I[z];I[z]=I[z+2],I[z+2]=$}return I}finally{v.close()}})}let ut,Pt,wt,zt;const Yt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(wt||(wt=document.createElement("a")),wt.href=a,wt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(zt==null&&(zt=matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},lt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ze extends Error{constructor(n,s,h,f){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=f}}const pt=Fe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,yt=a=>lt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function ar(a,n){const s=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:pt(),signal:s.signal});let f=!1,v=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(I=>{v||(f=!0,n(null,I,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(I=>{v||n(new Error(I.message))})})(x):x.blob().then(S=>n(new Ze(x.status,x.statusText,a.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,f||s.abort()}}}const Kt=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Fe())return(yt(a.url)||ar)(a,n)}if(!(/^file:/.test(s=a.url)||/^file:/.test(pt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ar(a,n);if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(h,f){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return f(S)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});f(new Ze(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(a,n)},Mr=function(a,n){return Kt(Z(a,{type:"arrayBuffer"}),n)};function lr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Vt(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function Et(a,n,s){if(s&&s[a]){const h=s[a].indexOf(n);h!==-1&&s[a].splice(h,1)}}class ur{constructor(n,s={}){Z(this,s),this.type=n}}class Mt extends ur{constructor(n,s={}){super("error",Z({error:n},s))}}class Er{on(n,s){return this._listeners=this._listeners||{},Vt(n,s,this._listeners),this}off(n,s){return Et(n,s,this._listeners),Et(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Vt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new ur(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of f)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)Et(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(Z(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Mt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const wr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Dr(a,n){const s={};for(const h in a)h!=="ref"&&(s[h]=a[h]);return wr.forEach(h=>{h in n&&(s[h]=n[h])}),s}function qt(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let s=0;s<a.length;s++)if(!qt(a[s],n[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const s in a)if(!qt(a[s],n[s]))return!1;return!0}return a===n}const rr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Fr(a,n,s){s.push({command:rr.addSource,args:[a,n[a]]})}function $r(a,n,s){n.push({command:rr.removeSource,args:[a]}),s[a]=!0}function dr(a,n,s,h){$r(a,s,h),Fr(a,n,s)}function cr(a,n,s){let h;for(h in a[s])if(Object.prototype.hasOwnProperty.call(a[s],h)&&h!=="data"&&!qt(a[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!qt(a[s][h],n[s][h]))return!1;return!0}function Gt(a,n,s,h,f,v){let x;for(x in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,x)&&(qt(a[x],n[x])||s.push({command:v,args:[h,x,n[x],f]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(qt(a[x],n[x])||s.push({command:v,args:[h,x,n[x],f]}))}function sr(a){return a.id}function Ir(a,n){return a[n.id]=n,a}class Be{constructor(n,s,h,f){this.message=(n?`${n}: `:"")+h,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function xt(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}class St extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Qt{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,f]of s)this.bindings[h]=f}concat(n){return new Qt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const vn={kind:"null"},it={kind:"number"},Jt={kind:"string"},Ft={kind:"boolean"},hr={kind:"color"},vr={kind:"object"},Lt={kind:"value"},Nr={kind:"collator"},he={kind:"formatted"},H={kind:"padding"},G={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function de(a,n){return{kind:"array",itemType:a,N:n}}function fe(a){if(a.kind==="array"){const n=fe(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const Me=[vn,it,Jt,Ft,hr,he,vr,de(Lt),H,G,te];function be(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!be(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of Me)if(!be(s,n))return null}}return`Expected ${fe(a)} but found ${fe(n)} instead.`}function ye(a,n){return n.some(s=>s.kind===a.kind)}function Ee(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function Je(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const ne=.96422,oe=.82521,Ie=4/29,Ve=6/29,Xe=3*Ve*Ve,nt=Ve*Ve*Ve,Se=Math.PI/180,xe=180/Math.PI;function qe(a){return(a%=360)<0&&(a+=360),a}function Ke([a,n,s,h]){let f,v;const x=$t((.2225045*(a=Qe(a))+.7168786*(n=Qe(n))+.0606169*(s=Qe(s)))/1);a===n&&n===s?f=v=x:(f=$t((.4360747*a+.3850649*n+.1430804*s)/ne),v=$t((.0139322*a+.0971045*n+.7141733*s)/oe));const S=116*x-16;return[S<0?0:S,500*(f-x),200*(x-v),h]}function Qe(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function $t(a){return a>nt?Math.pow(a,1/3):a/Xe+Ie}function Tt([a,n,s,h]){let f=(a+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*or(f),v=ne*or(v),x=oe*or(x),[er(3.1338561*v-1.6168667*f-.4906146*x),er(-.9787684*v+1.9161415*f+.033454*x),er(.0719453*v-.2289914*f+1.4052427*x),h]}function er(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function or(a){return a>Ve?a*a*a:Xe*(a-Ie)}function jr(a){return parseInt(a.padEnd(2,a),16)/255}function pn(a,n){return Ai(n?a/100:a,0,1)}function Ai(a,n,s){return Math.min(Math.max(n,a),s)}function Vn(a){return!a.some(Number.isNaN)}const Ho={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class mr{constructor(n,s,h,f=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,h,f]))}static parse(n){if(n instanceof mr)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Ho[h];if(f){const[x,S,I]=f;return[x/255,S/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[jr(h.slice(S,S+=x)),jr(h.slice(S,S+=x)),jr(h.slice(S,S+=x)),jr(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,I,z,$,j,q,Y,ee,le,me,ve,Ae]=x,we=[$||" ",Y||" ",me].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Re=[z,q,le].join(""),Ue=Re==="%%%"?100:Re===""?255:0;if(Ue){const rt=[Ai(+I/Ue,0,1),Ai(+j/Ue,0,1),Ai(+ee/Ue,0,1),ve?pn(+ve,Ae):1];if(Vn(rt))return rt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,I,z,$,j,q,Y,ee]=v,le=[I||" ",$||" ",q].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const me=[+S,Ai(+z,0,100),Ai(+j,0,100),Y?pn(+Y,ee):1];if(Vn(me))return function([ve,Ae,we,Re]){function Ue(rt){const It=(rt+ve/30)%12,Ot=Ae*Math.min(we,1-we);return we-Ot*Math.max(-1,Math.min(It-3,9-It,1))}return ve=qe(ve),Ae/=100,we/=100,[Ue(0),Ue(8),Ue(4),Re]}(me)}}}(n);return s?new mr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,f,v]=Ke(n),x=Math.sqrt(h*h+f*f);return[Math.round(1e4*x)?qe(Math.atan2(f,h)*xe):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ke(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,f]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${f})`}}mr.black=new mr(0,0,0,1),mr.white=new mr(1,1,1,1),mr.transparent=new mr(0,0,0,0),mr.red=new mr(1,0,0,1);class ko{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tr{constructor(n,s,h,f,v){this.text=n,this.image=s,this.scale=h,this.fontStack=f,this.textColor=v}}class Br{constructor(n){this.sections=n}static fromString(n){return new Br([new tr(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Br?n:Br.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Tr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Tr)return n;if(typeof n=="number")return new Tr([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Tr(n)}}toString(){return JSON.stringify(this.values)}}const ei=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zt{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zt)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],f=n[s+1];if(typeof h!="string"||!ei.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Zt(n)}}toString(){return JSON.stringify(this.values)}}class fr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new fr({name:n,available:!1}):null}}function Qr(a,n,s,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,s,h]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Sr(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof mr||a instanceof ko||a instanceof Br||a instanceof Tr||a instanceof Zt||a instanceof fr)return!0;if(Array.isArray(a)){for(const n of a)if(!Sr(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Sr(a[n]))return!1;return!0}return!1}function Or(a){if(a===null)return vn;if(typeof a=="string")return Jt;if(typeof a=="boolean")return Ft;if(typeof a=="number")return it;if(a instanceof mr)return hr;if(a instanceof ko)return Nr;if(a instanceof Br)return he;if(a instanceof Tr)return H;if(a instanceof Zt)return te;if(a instanceof fr)return G;if(Array.isArray(a)){const n=a.length;let s;for(const h of a){const f=Or(h);if(s){if(s===f)continue;s=Lt;break}s=f}return de(s||Lt,n)}return vr}function zr(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof mr||a instanceof Br||a instanceof Tr||a instanceof Zt||a instanceof fr?a.toString():JSON.stringify(a)}class pa{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Sr(n[1]))return s.error("invalid value");const h=n[1];let f=Or(h);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new pa(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class _n{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Sc={string:Jt,number:it,boolean:Ft,object:vr};class co{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,f=1;const v=n[0];if(v==="array"){let S,I;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in Sc)||z==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Sc[z],f++}else S=Lt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],f++}h=de(S,I)}else{if(!Sc[v])throw new Error(`Types doesn't contain name = ${v}`);h=Sc[v]}const x=[];for(;f<n.length;f++){const S=s.parse(n[f],f,Lt);if(!S)return null;x.push(S)}return new co(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!be(this.type,Or(h)))return h;if(s===this.args.length-1)throw new _n(`Expected value to be of type ${fe(this.type)}, but found ${fe(Or(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const yd={"to-boolean":Ft,"to-color":hr,"to-number":it,"to-string":Jt};class Ba{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!yd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=yd[h],v=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,Lt);if(!S)return null;v.push(S)}return new Ba(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const f of this.args){if(s=f.evaluate(n),h=null,s instanceof mr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Qr(s[0],s[1],s[2],s[3]),!h))return new mr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new _n(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const f=Tr.parse(s);if(f)return f}throw new _n(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const f=Zt.parse(s);if(f)return f}throw new _n(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new _n(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Br.fromString(zr(this.args[0].evaluate(n)));case"resolvedImage":return fr.fromString(zr(this.args[0].evaluate(n)));default:return zr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const lf=["Unknown","Point","LineString","Polygon"];class vd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?lf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=mr.parse(n)),s}}class Cc{constructor(n,s,h=[],f,v=new Qt,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,h,f,v={}){return s?this.concat(s,h,f)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(f,v,x){return x==="assert"?new co(v,[f]):x==="coerce"?new Ba(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,I=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||I.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(S.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(S,I))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof pa)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new vd;try{x=new pa(x.type,x.evaluate(S))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const f=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Cc(this.registry,this._isConstant,f,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new St(h,n))}checkSubtype(n,s){const h=be(n,s);return h&&this.error(h),h}}class kc{constructor(n,s,h){this.type=Nr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const f=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ft);if(!f)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ft);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Jt),!x)?null:new kc(f,v,x)}evaluate(n){return new ko(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Oa=8192;function _d(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function zl(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function cf(a,n){const s=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*Oa),Math.round(h*f*Oa)]}function pv(a,n,s){const h=a[0]-n[0],f=a[1]-n[1],v=a[0]-s[0],x=a[1]-s[1];return h*x-v*f==0&&h*v<=0&&f*x<=0}function xd(a,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const I=n[x];for(let z=0,$=I.length;z<$-1;z++){if(pv(a,I[z],I[z+1]))return!1;(f=I[z])[1]>(h=a)[1]!=(v=I[z+1])[1]>h[1]&&h[0]<(v[0]-f[0])*(h[1]-f[1])/(v[1]-f[1])+f[0]&&(s=!s)}}var h,f,v;return s}function bd(a,n){for(let s=0;s<n.length;s++)if(xd(a,n[s]))return!0;return!1}function uf(a,n,s,h){const f=h[0]-s[0],v=h[1]-s[1],x=(a[0]-s[0])*v-f*(a[1]-s[1]),S=(n[0]-s[0])*v-f*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function fv(a,n,s){for(const z of s)for(let $=0;$<z.length-1;++$)if((S=[(x=z[$+1])[0]-(v=z[$])[0],x[1]-v[1]])[0]*(I=[(f=n)[0]-(h=a)[0],f[1]-h[1]])[1]-S[1]*I[0]!=0&&uf(h,f,v,x)&&uf(v,x,h,f))return!0;var h,f,v,x,S,I;return!1}function df(a,n){for(let s=0;s<a.length;++s)if(!xd(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(fv(a[s],a[s+1],n))return!1;return!0}function hf(a,n){for(let s=0;s<n.length;s++)if(df(a,n[s]))return!0;return!1}function Ic(a,n,s){const h=[];for(let f=0;f<a.length;f++){const v=[];for(let x=0;x<a[f].length;x++){const S=cf(a[f][x],s);_d(n,S),v.push(S)}h.push(v)}return h}function pf(a,n,s){const h=[];for(let f=0;f<a.length;f++){const v=Ic(a[f],n,s);h.push(v)}return h}function ff(a,n,s,h){if(a[0]<s[0]||a[0]>s[2]){const f=.5*h;let v=a[0]-s[0]>f?-h:s[0]-a[0]>f?h:0;v===0&&(v=a[0]-s[2]>f?-h:s[2]-a[0]>f?h:0),a[0]+=v}_d(n,a)}function wd(a,n,s,h){const f=Math.pow(2,h.z)*Oa,v=[h.x*Oa,h.y*Oa],x=[];for(const S of a)for(const I of S){const z=[I.x+v[0],I.y+v[1]];ff(z,n,s,f),x.push(z)}return x}function Sd(a,n,s,h){const f=Math.pow(2,h.z)*Oa,v=[h.x*Oa,h.y*Oa],x=[];for(const I of a){const z=[];for(const $ of I){const j=[$.x+v[0],$.y+v[1]];_d(n,j),z.push(j)}x.push(z)}if(n[2]-n[0]<=f/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const I of x)for(const z of I)ff(z,n,s,f)}var S;return x}class is{constructor(n,s){this.type=Ft,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Sr(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let f=0;f<h.features.length;++f){const v=h.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new is(h,h.features[f].geometry)}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new is(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new is(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Ic(h.coordinates,v,x),I=wd(s.geometry(),f,v,x);if(!zl(f,v))return!1;for(const z of I)if(!xd(z,S))return!1}if(h.type==="MultiPolygon"){const S=pf(h.coordinates,v,x),I=wd(s.geometry(),f,v,x);if(!zl(f,v))return!1;for(const z of I)if(!bd(z,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Ic(h.coordinates,v,x),I=Sd(s.geometry(),f,v,x);if(!zl(f,v))return!1;for(const z of I)if(!df(z,S))return!1}if(h.type==="MultiPolygon"){const S=pf(h.coordinates,v,x),I=Sd(s.geometry(),f,v,x);if(!zl(f,v))return!1;for(const z of I)if(!hf(z,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Tc{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Tc(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class uo{constructor(n,s,h,f){this.name=n,this.type=s,this._evaluate=h,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],f=uo.definitions[h];if(!f)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,S=x.filter(([z])=>!Array.isArray(z)||z.length===n.length-1);let I=null;for(const[z,$]of S){I=new Cc(s.registry,Pc,s.path,null,s.scope);const j=[];let q=!1;for(let Y=1;Y<n.length;Y++){const ee=n[Y],le=Array.isArray(z)?z[Y-1]:z.type,me=I.parse(ee,1+j.length,le);if(!me){q=!0;break}j.push(me)}if(!q)if(Array.isArray(z)&&z.length!==j.length)I.error(`Expected ${z.length} arguments, but found ${j.length} instead.`);else{for(let Y=0;Y<j.length;Y++){const ee=Array.isArray(z)?z[Y]:z.type,le=j[Y];I.concat(Y+1).checkSubtype(ee,le.type)}if(I.errors.length===0)return new uo(h,v,$,j)}}if(S.length===1)s.errors.push(...I.errors);else{const z=(S.length?S:x).map(([j])=>{return q=j,Array.isArray(q)?`(${q.map(fe).join(", ")})`:`(${fe(q.type)}...)`;var q}).join(" | "),$=[];for(let j=1;j<n.length;j++){const q=s.parse(n[j],1+$.length);if(!q)return null;$.push(fe(q.type))}s.error(`Expected arguments of type ${z}, but found (${$.join(", ")}) instead.`)}return null}static register(n,s){uo.definitions=s;for(const h in s)n[h]=uo}}function Pc(a){if(a instanceof Tc)return Pc(a.boundExpression);if(a instanceof uo&&a.name==="error"||a instanceof kc||a instanceof is)return!1;const n=a instanceof Ba||a instanceof co;let s=!0;return a.eachChild(h=>{s=n?s&&Pc(h):s&&h instanceof pa}),!!s&&Ec(a)&&zc(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ec(a){if(a instanceof uo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof is)return!1;let n=!0;return a.eachChild(s=>{n&&!Ec(s)&&(n=!1)}),n}function Ml(a){if(a instanceof uo&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!Ml(s)&&(n=!1)}),n}function zc(a,n){if(a instanceof uo&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(h=>{s&&!zc(h,n)&&(s=!1)}),s}function Bs(a,n){const s=a.length-1;let h,f,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=a[S],f=a[S+1],h<=n){if(S===s||n<f)return S;v=S+1}else{if(!(h>n))throw new _n("Input is not a number.");x=S-1}return 0}class Fa{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of h)this.labels.push(f),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,it);if(!h)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],I=n[x+1],z=x,$=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(f.length&&f[f.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const j=s.parse(I,$,v);if(!j)return null;v=v||j.type,f.push([S,j])}return new Fa(v,h,f)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const v=s.length;return f>=s[v-1]?h[v-1].evaluate(n):h[Bs(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Cr(a,n,s){return a+s*(n-a)}function Mc(a,n,s){return a.map((h,f)=>Cr(h,n[f],s))}const Ki={number:Cr,color:function(a,n,s,h="rgb"){switch(h){case"rgb":{const[f,v,x,S]=Mc(a.rgb,n.rgb,s);return new mr(f,v,x,S,!1)}case"hcl":{const[f,v,x,S]=a.hcl,[I,z,$,j]=n.hcl;let q,Y;if(isNaN(f)||isNaN(I))isNaN(f)?isNaN(I)?q=NaN:(q=I,x!==1&&x!==0||(Y=z)):(q=f,$!==1&&$!==0||(Y=v));else{let Ae=I-f;I>f&&Ae>180?Ae-=360:I<f&&f-I>180&&(Ae+=360),q=f+s*Ae}const[ee,le,me,ve]=function([Ae,we,Re,Ue]){return Ae=isNaN(Ae)?0:Ae*Se,Tt([Re,Math.cos(Ae)*we,Math.sin(Ae)*we,Ue])}([q,Y??Cr(v,z,s),Cr(x,$,s),Cr(S,j,s)]);return new mr(ee,le,me,ve,!1)}case"lab":{const[f,v,x,S]=Tt(Mc(a.lab,n.lab,s));return new mr(f,v,x,S,!1)}}},array:Mc,padding:function(a,n,s){return new Tr(Mc(a.values,n.values,s))},variableAnchorOffsetCollection:function(a,n,s){const h=a.values,f=n.values;if(h.length!==f.length)throw new _n(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==f[x])throw new _n(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${f[x]}`);v.push(h[x]);const[S,I]=h[x+1],[z,$]=f[x+1];v.push([Cr(S,z,s),Cr(I,$,s)])}return new Zt(v)}};class Xi{constructor(n,s,h,f,v){this.type=n,this.operator=s,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,f){let v=0;if(n.name==="exponential")v=Cd(s,n.base,h,f);else if(n.name==="linear")v=Cd(s,1,h,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new V(x[0],x[1],x[2],x[3]).solve(Cd(s,1,h,f))}return v}static parse(n,s){let[h,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const z=f[1];if(typeof z!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:z}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const z=f.slice(1);if(z.length!==4||z.some($=>typeof $!="number"||$<0||$>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,it),!v)return null;const S=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=hr:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let z=0;z<x.length;z+=2){const $=x[z],j=x[z+1],q=z+3,Y=z+4;if(typeof $!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(S.length&&S[S.length-1][0]>=$)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const ee=s.parse(j,Y,I);if(!ee)return null;I=I||ee.type,S.push([$,ee])}return Je(I,it)||Je(I,hr)||Je(I,H)||Je(I,te)||Je(I,de(it))?new Xi(I,h,f,v,S):s.error(`Type ${fe(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const v=s.length;if(f>=s[v-1])return h[v-1].evaluate(n);const x=Bs(s,f),S=Xi.interpolationFactor(this.interpolation,f,s[x],s[x+1]),I=h[x].evaluate(n),z=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Ki[this.type.kind](I,z,S);case"interpolate-hcl":return Ki.color(I,z,S,"hcl");case"interpolate-lab":return Ki.color(I,z,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Cd(a,n,s,h){const f=h-s,v=a-s;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class Dc{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const f=s.expectedType;f&&f.kind!=="value"&&(h=f);const v=[];for(const S of n.slice(1)){const I=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,v.push(I)}if(!h)throw new Error("No output type");const x=f&&v.some(S=>be(f,S.type));return new Dc(x?Lt:h,v)}evaluate(n){let s,h=null,f=0;for(const v of this.args)if(f++,h=v.evaluate(n),h&&h instanceof fr&&!h.available&&(s||(s=h.name),h=null,f===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Ac{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return f?new Ac(h,f):null}outputDefined(){return this.result.outputDefined()}}class kd{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,it),f=s.parse(n[2],2,de(s.expectedType||Lt));return h&&f?new kd(f.type.itemType,h,f):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new _n(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new _n(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new _n(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Id{constructor(n,s){this.type=Ft,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),f=s.parse(n[2],2,Lt);return h&&f?ye(h.type,[Ft,Jt,it,vn,Lt])?new Id(h,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ee(s,["boolean","string","number","null"]))throw new _n(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Or(s))} instead.`);if(!Ee(h,["string","array"]))throw new _n(`Expected second argument to be of type array or string, but found ${fe(Or(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Rc{constructor(n,s,h){this.type=it,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),f=s.parse(n[2],2,Lt);if(!h||!f)return null;if(!ye(h.type,[Ft,Jt,it,vn,Lt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,it);return v?new Rc(h,f,v):null}return new Rc(h,f)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ee(s,["boolean","string","number","null"]))throw new _n(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Or(s))} instead.`);if(!Ee(h,["string","array"]))throw new _n(`Expected second argument to be of type array or string, but found ${fe(Or(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return h.indexOf(s,f)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Td{constructor(n,s,h,f,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let z=2;z<n.length-1;z+=2){let $=n[z];const j=n[z+1];Array.isArray($)||($=[$]);const q=s.concat(z);if($.length===0)return q.error("Expected at least one branch label.");for(const ee of $){if(typeof ee!="number"&&typeof ee!="string")return q.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return q.error("Numeric branch labels must be integer values.");if(h){if(q.checkSubtype(h,Or(ee)))return null}else h=Or(ee);if(v[String(ee)]!==void 0)return q.error("Branch labels must be unique.");v[String(ee)]=x.length}const Y=s.parse(j,z,f);if(!Y)return null;f=f||Y.type,x.push(Y)}const S=s.parse(n[1],1,Lt);if(!S)return null;const I=s.parse(n[n.length-1],n.length-1,f);return I?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Td(h,f,S,v,x,I):null}evaluate(n){const s=this.input.evaluate(n);return(Or(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Pd{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,Ft);if(!S)return null;const I=s.parse(n[x+1],x+1,h);if(!I)return null;f.push([S,I]),h=h||I.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new Pd(h,f,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Lc{constructor(n,s,h,f){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),f=s.parse(n[2],2,it);if(!h||!f)return null;if(!ye(h.type,[de(Lt),Jt,Lt]))return s.error(`Expected first argument to be of type array or string, but found ${fe(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,it);return v?new Lc(h.type,h,f,v):null}return new Lc(h.type,h,f)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ee(s,["string","array"]))throw new _n(`Expected first argument to be of type array or string, but found ${fe(Or(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return s.slice(h,f)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function mf(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function gf(a,n,s,h){return h.compare(n,s)===0}function Os(a,n,s){const h=a!=="=="&&a!=="!=";return class XE{constructor(v,x,S){this.type=Ft,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let I=x.parse(v[1],1,Lt);if(!I)return null;if(!mf(S,I.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${fe(I.type)}'.`);let z=x.parse(v[2],2,Lt);if(!z)return null;if(!mf(S,z.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${fe(z.type)}'.`);if(I.type.kind!==z.type.kind&&I.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${fe(I.type)}' and '${fe(z.type)}'.`);h&&(I.type.kind==="value"&&z.type.kind!=="value"?I=new co(z.type,[I]):I.type.kind!=="value"&&z.type.kind==="value"&&(z=new co(I.type,[z])));let $=null;if(v.length===4){if(I.type.kind!=="string"&&z.type.kind!=="string"&&I.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if($=x.parse(v[3],3,Nr),!$)return null}return new XE(I,z,$)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const I=Or(x),z=Or(S);if(I.kind!==z.kind||I.kind!=="string"&&I.kind!=="number")throw new _n(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${I.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=Or(x),z=Or(S);if(I.kind!=="string"||z.kind!=="string")return n(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const mv=Os("==",function(a,n,s){return n===s},gf),gv=Os("!=",function(a,n,s){return n!==s},function(a,n,s,h){return!gf(0,n,s,h)}),yv=Os("<",function(a,n,s){return n<s},function(a,n,s,h){return h.compare(n,s)<0}),vv=Os(">",function(a,n,s){return n>s},function(a,n,s,h){return h.compare(n,s)>0}),_v=Os("<=",function(a,n,s){return n<=s},function(a,n,s,h){return h.compare(n,s)<=0}),xv=Os(">=",function(a,n,s){return n>=s},function(a,n,s,h){return h.compare(n,s)>=0});class Ed{constructor(n,s,h,f,v){this.type=Jt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,it);if(!h)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,Jt),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,Jt),!x))return null;let S=null;if(f["min-fraction-digits"]&&(S=s.parse(f["min-fraction-digits"],1,it),!S))return null;let I=null;return f["max-fraction-digits"]&&(I=s.parse(f["max-fraction-digits"],1,it),!I)?null:new Ed(h,v,x,S,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class $c{constructor(n){this.type=he,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let I=null;if(S["font-scale"]&&(I=s.parse(S["font-scale"],1,it),!I))return null;let z=null;if(S["text-font"]&&(z=s.parse(S["text-font"],1,de(Jt)),!z))return null;let $=null;if(S["text-color"]&&($=s.parse(S["text-color"],1,hr),!$))return null;const j=f[f.length-1];j.scale=I,j.font=z,j.textColor=$}else{const I=s.parse(n[x],1,Lt);if(!I)return null;const z=I.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:I,scale:null,font:null,textColor:null})}}return new $c(f)}evaluate(n){return new Br(this.sections.map(s=>{const h=s.content.evaluate(n);return Or(h)===G?new tr("",h,null,null,null):new tr(zr(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class zd{constructor(n){this.type=G,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Jt);return h?new zd(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=fr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Md{constructor(n){this.type=it,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${fe(h.type)} instead.`):new Md(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new _n(`Expected value to be of type string or array, but found ${fe(Or(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Fs={"==":mv,"!=":gv,">":vv,"<":yv,">=":xv,"<=":_v,array:co,at:kd,boolean:co,case:Pd,coalesce:Dc,collator:kc,format:$c,image:zd,in:Id,"index-of":Rc,interpolate:Xi,"interpolate-hcl":Xi,"interpolate-lab":Xi,length:Md,let:Ac,literal:pa,match:Td,number:co,"number-format":Ed,object:co,slice:Lc,step:Fa,string:co,"to-boolean":Ba,"to-color":Ba,"to-number":Ba,"to-string":Ba,var:Tc,within:is};function yf(a,[n,s,h,f]){n=n.evaluate(a),s=s.evaluate(a),h=h.evaluate(a);const v=f?f.evaluate(a):1,x=Qr(n,s,h,v);if(x)throw new _n(x);return new mr(n/255,s/255,h/255,v,!1)}function vf(a,n){return a in n}function Dd(a,n){const s=n[a];return s===void 0?null:s}function os(a){return{type:a}}function _f(a){return{result:"success",value:a}}function Na(a){return{result:"error",value:a}}function Ns(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function xf(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ad(a){return!!a.expression&&a.expression.interpolated}function Vr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function fn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function bv(a){return a}function kr(a,n){const s=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",f=h||!(h||a.property!==void 0),v=a.type||(Ad(n)?"exponential":"interval");if(s||n.type==="padding"){const $=s?mr.parse:Tr.parse;(a=xt({},a)).stops&&(a.stops=a.stops.map(j=>[j[0],$(j[1])])),a.default=$(a.default?a.default:n.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let S,I,z;if(v==="exponential")S=Dl;else if(v==="interval")S=dn;else if(v==="categorical"){S=mn,I=Object.create(null);for(const $ of a.stops)I[$[0]]=$[1];z=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=bf}if(h){const $={},j=[];for(let ee=0;ee<a.stops.length;ee++){const le=a.stops[ee],me=le[0].zoom;$[me]===void 0&&($[me]={zoom:me,type:a.type,property:a.property,default:a.default,stops:[]},j.push(me)),$[me].stops.push([le[0].value,le[1]])}const q=[];for(const ee of j)q.push([$[ee].zoom,kr($[ee],n)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Xi.interpolationFactor.bind(void 0,Y),zoomStops:q.map(ee=>ee[0]),evaluate:({zoom:ee},le)=>Dl({stops:q,base:a.base},n,ee).evaluate(ee,le)}}if(f){const $=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:Xi.interpolationFactor.bind(void 0,$),zoomStops:a.stops.map(j=>j[0]),evaluate:({zoom:j})=>S(a,n,j,I,z)}}return{kind:"source",evaluate($,j){const q=j&&j.properties?j.properties[a.property]:void 0;return q===void 0?as(a.default,n.default):S(a,n,q,I,z)}}}function as(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function mn(a,n,s,h,f){return as(typeof s===f?h[s]:void 0,a.default,n.default)}function dn(a,n,s){if(Vr(s)!=="number")return as(a.default,n.default);const h=a.stops.length;if(h===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[h-1][0])return a.stops[h-1][1];const f=Bs(a.stops.map(v=>v[0]),s);return a.stops[f][1]}function Dl(a,n,s){const h=a.base!==void 0?a.base:1;if(Vr(s)!=="number")return as(a.default,n.default);const f=a.stops.length;if(f===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[f-1][0])return a.stops[f-1][1];const v=Bs(a.stops.map($=>$[0]),s),x=function($,j,q,Y){const ee=Y-q,le=$-q;return ee===0?0:j===1?le/ee:(Math.pow(j,le)-1)/(Math.pow(j,ee)-1)}(s,h,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],I=a.stops[v+1][1],z=Ki[n.type]||bv;return typeof S.evaluate=="function"?{evaluate(...$){const j=S.evaluate.apply(void 0,$),q=I.evaluate.apply(void 0,$);if(j!==void 0&&q!==void 0)return z(j,q,x,a.colorSpace)}}:z(S,I,x,a.colorSpace)}function bf(a,n,s){switch(n.type){case"color":s=mr.parse(s);break;case"formatted":s=Br.fromString(s.toString());break;case"resolvedImage":s=fr.fromString(s.toString());break;case"padding":s=Tr.parse(s);break;default:Vr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return as(s,a.default,n.default)}uo.register(Fs,{error:[{kind:"error"},[Jt],(a,[n])=>{throw new _n(n.evaluate(a))}],typeof:[Jt,[Lt],(a,[n])=>fe(Or(n.evaluate(a)))],"to-rgba":[de(it,4),[hr],(a,[n])=>{const[s,h,f,v]=n.evaluate(a).rgb;return[255*s,255*h,255*f,v]}],rgb:[hr,[it,it,it],yf],rgba:[hr,[it,it,it,it],yf],has:{type:Ft,overloads:[[[Jt],(a,[n])=>vf(n.evaluate(a),a.properties())],[[Jt,vr],(a,[n,s])=>vf(n.evaluate(a),s.evaluate(a))]]},get:{type:Lt,overloads:[[[Jt],(a,[n])=>Dd(n.evaluate(a),a.properties())],[[Jt,vr],(a,[n,s])=>Dd(n.evaluate(a),s.evaluate(a))]]},"feature-state":[Lt,[Jt],(a,[n])=>Dd(n.evaluate(a),a.featureState||{})],properties:[vr,[],a=>a.properties()],"geometry-type":[Jt,[],a=>a.geometryType()],id:[Lt,[],a=>a.id()],zoom:[it,[],a=>a.globals.zoom],"heatmap-density":[it,[],a=>a.globals.heatmapDensity||0],"line-progress":[it,[],a=>a.globals.lineProgress||0],accumulated:[Lt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[it,os(it),(a,n)=>{let s=0;for(const h of n)s+=h.evaluate(a);return s}],"*":[it,os(it),(a,n)=>{let s=1;for(const h of n)s*=h.evaluate(a);return s}],"-":{type:it,overloads:[[[it,it],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[it],(a,[n])=>-n.evaluate(a)]]},"/":[it,[it,it],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[it,[it,it],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[it,[],()=>Math.LN2],pi:[it,[],()=>Math.PI],e:[it,[],()=>Math.E],"^":[it,[it,it],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[it,[it],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[it,[it],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[it,[it],(a,[n])=>Math.log(n.evaluate(a))],log2:[it,[it],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[it,[it],(a,[n])=>Math.sin(n.evaluate(a))],cos:[it,[it],(a,[n])=>Math.cos(n.evaluate(a))],tan:[it,[it],(a,[n])=>Math.tan(n.evaluate(a))],asin:[it,[it],(a,[n])=>Math.asin(n.evaluate(a))],acos:[it,[it],(a,[n])=>Math.acos(n.evaluate(a))],atan:[it,[it],(a,[n])=>Math.atan(n.evaluate(a))],min:[it,os(it),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[it,os(it),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[it,[it],(a,[n])=>Math.abs(n.evaluate(a))],round:[it,[it],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[it,[it],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[it,[it],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[Ft,[Jt,Lt],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[Ft,[Lt],(a,[n])=>a.id()===n.value],"filter-type-==":[Ft,[Jt],(a,[n])=>a.geometryType()===n.value],"filter-<":[Ft,[Jt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Ft,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Ft,[Jt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h>f}],"filter-id->":[Ft,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Ft,[Jt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Ft,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Ft,[Jt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Ft,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Ft,[Lt],(a,[n])=>n.value in a.properties()],"filter-has-id":[Ft,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Ft,[de(Jt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[Ft,[de(Lt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[Ft,[Jt,de(Lt)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[Ft,[Jt,de(Lt)],(a,[n,s])=>function(h,f,v,x){for(;v<=x;){const S=v+x>>1;if(f[S]===h)return!0;f[S]>h?x=S-1:v=S+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Ft,overloads:[[[Ft,Ft],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[os(Ft),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[os(Ft),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[Ft,[Ft],(a,[n])=>!n.evaluate(a)],"is-supported-script":[Ft,[Jt],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Jt,[Jt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Jt,[Jt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Jt,os(Lt),(a,n)=>n.map(s=>zr(s.evaluate(a))).join("")],"resolved-locale":[Jt,[Nr],(a,[n])=>n.evaluate(a).resolvedLocale()]});class Rd{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new vd,this._defaultValue=s?(h=s).type==="color"&&fn(h.default)?new mr(0,0,0,0):h.type==="color"?mr.parse(h.default)||null:h.type==="padding"?Tr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Zt.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,f,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new _n(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Bc(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Fs}function Oc(a,n){const s=new Cc(Fs,Pc,[],n?function(f){const v={color:hr,string:Jt,number:it,enum:Jt,boolean:Ft,formatted:he,padding:H,resolvedImage:G,variableAnchorOffsetCollection:te};return f.type==="array"?de(v[f.value]||Lt,f.length):v[f.type]}(n):void 0),h=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?_f(new Rd(h,n)):Na(s.errors)}class Ld{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Ml(s.expression)}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,v,x)}evaluate(n,s,h,f,v,x){return this._styleExpression.evaluate(n,s,h,f,v,x)}}class Fc{constructor(n,s,h,f){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Ml(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,v,x)}evaluate(n,s,h,f,v,x){return this._styleExpression.evaluate(n,s,h,f,v,x)}interpolationFactor(n,s,h){return this.interpolationType?Xi.interpolationFactor(this.interpolationType,n,s,h):0}}function $d(a,n){const s=Oc(a,n);if(s.result==="error")return s;const h=s.value.expression,f=Ec(h);if(!f&&!Ns(n))return Na([new St("","data expressions not supported")]);const v=zc(h,["zoom"]);if(!v&&!xf(n))return Na([new St("","zoom expressions not supported")]);const x=Rl(h);return x||v?x instanceof St?Na([x]):x instanceof Xi&&!Ad(n)?Na([new St("",'"interpolate" expressions cannot be used with this property')]):_f(x?new Fc(f?"camera":"composite",s.value,x.labels,x instanceof Xi?x.interpolation:void 0):new Ld(f?"constant":"source",s.value)):Na([new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Al{constructor(n,s){this._parameters=n,this._specification=s,xt(this,kr(this._parameters,this._specification))}static deserialize(n){return new Al(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Rl(a){let n=null;if(a instanceof Ac)n=Rl(a.result);else if(a instanceof Dc){for(const s of a.args)if(n=Rl(s),n)break}else(a instanceof Fa||a instanceof Xi)&&a.input instanceof uo&&a.input.name==="zoom"&&(n=a);return n instanceof St||a.eachChild(s=>{const h=Rl(s);h instanceof St?n=h:!n&&h?n=new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new St("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ll(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Ll(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const wv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bd(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Ll(a)||(a=Nc(a));const n=Oc(a,wv);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,f)=>n.value.evaluate(s,h,{},f),needGeometry:wf(a)}}function Sv(a,n){return a<n?-1:a>n?1:0}function wf(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(wf(a[n]))return!0;return!1}function Nc(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Od(a[1],a[2],"=="):n==="!="?$l(Od(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Od(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(Nc))):n==="all"?["all"].concat(a.slice(1).map(Nc)):n==="none"?["all"].concat(a.slice(1).map(Nc).map($l)):n==="in"?Sf(a[1],a.slice(2)):n==="!in"?$l(Sf(a[1],a.slice(2))):n==="has"?Cf(a[1]):n==="!has"?$l(Cf(a[1])):n!=="within"||a;var s}function Od(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function Sf(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Sv)]]:["filter-in-small",a,["literal",n]]}}function Cf(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function $l(a){return["!",a]}function jc(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let f="[";for(const v of a)f+=`${jc(v)},`;return`${f}]`}const s=Object.keys(a).sort();let h="{";for(let f=0;f<s.length;f++)h+=`${JSON.stringify(s[f])}:${jc(a[s[f]])},`;return`${h}}`}function Vc(a){let n="";for(const s of wr)n+=`/${jc(a[s])}`;return n}function kf(a){const n=a.value;return n?[new Be(a.key,n,"constants have been deprecated as of v8")]:[]}function xn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ss(a){if(Array.isArray(a))return a.map(ss);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=ss(a[s]);return n}return xn(a)}function Ri(a){const n=a.key,s=a.value,h=a.valueSpec||{},f=a.objectElementValidators||{},v=a.style,x=a.styleSpec,S=a.validateSpec;let I=[];const z=Vr(s);if(z!=="object")return[new Be(n,s,`object expected, ${z} found`)];for(const $ in s){const j=$.split(".")[0],q=h[j]||h["*"];let Y;if(f[j])Y=f[j];else if(h[j])Y=S;else if(f["*"])Y=f["*"];else{if(!h["*"]){I.push(new Be(n,s[$],`unknown property "${$}"`));continue}Y=S}I=I.concat(Y({key:(n&&`${n}.`)+$,value:s[$],valueSpec:q,style:v,styleSpec:x,object:s,objectKey:$,validateSpec:S},s))}for(const $ in h)f[$]||h[$].required&&h[$].default===void 0&&s[$]===void 0&&I.push(new Be(n,s,`missing required property "${$}"`));return I}function js(a){const n=a.value,s=a.valueSpec,h=a.style,f=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(Vr(n)!=="array")return[new Be(v,n,`array expected, ${Vr(n)} found`)];if(s.length&&n.length!==s.length)return[new Be(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Be(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};f.$version<7&&(S.function=s.function),Vr(s.value)==="object"&&(S=s.value);let I=[];for(let z=0;z<n.length;z++)I=I.concat(x({array:n,arrayIndex:z,value:n[z],valueSpec:S,validateSpec:a.validateSpec,style:h,styleSpec:f,key:`${v}[${z}]`}));return I}function Bl(a){const n=a.key,s=a.value,h=a.valueSpec;let f=Vr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new Be(n,s,`number expected, ${f} found`)]:"minimum"in h&&s<h.minimum?[new Be(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Be(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Uc(a){const n=a.valueSpec,s=xn(a.value.type);let h,f,v,x={};const S=s!=="categorical"&&a.value.property===void 0,I=!S,z=Vr(a.value.stops)==="array"&&Vr(a.value.stops[0])==="array"&&Vr(a.value.stops[0][0])==="object",$=Ri({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Y){if(s==="identity")return[new Be(Y.key,Y.value,'identity function may not have a "stops" property')];let ee=[];const le=Y.value;return ee=ee.concat(js({key:Y.key,value:le,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:j})),Vr(le)==="array"&&le.length===0&&ee.push(new Be(Y.key,le,"array must have at least one stop")),ee},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:n,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return s==="identity"&&S&&$.push(new Be(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||$.push(new Be(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Ad(a.valueSpec)&&$.push(new Be(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(I&&!Ns(a.valueSpec)?$.push(new Be(a.key,a.value,"property functions not supported")):S&&!xf(a.valueSpec)&&$.push(new Be(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!z||a.value.property!==void 0||$.push(new Be(a.key,a.value,'"property" property is required')),$;function j(Y){let ee=[];const le=Y.value,me=Y.key;if(Vr(le)!=="array")return[new Be(me,le,`array expected, ${Vr(le)} found`)];if(le.length!==2)return[new Be(me,le,`array length 2 expected, length ${le.length} found`)];if(z){if(Vr(le[0])!=="object")return[new Be(me,le,`object expected, ${Vr(le[0])} found`)];if(le[0].zoom===void 0)return[new Be(me,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new Be(me,le,"object stop key must have value")];if(v&&v>xn(le[0].zoom))return[new Be(me,le[0].zoom,"stop zoom values must appear in ascending order")];xn(le[0].zoom)!==v&&(v=xn(le[0].zoom),f=void 0,x={}),ee=ee.concat(Ri({key:`${me}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Bl,value:q}}))}else ee=ee.concat(q({key:`${me}[0]`,value:le[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},le));return Bc(ss(le[1]))?ee.concat([new Be(`${me}[1]`,le[1],"expressions are not allowed in function stops.")]):ee.concat(Y.validateSpec({key:`${me}[1]`,value:le[1],valueSpec:n,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function q(Y,ee){const le=Vr(Y.value),me=xn(Y.value),ve=Y.value!==null?Y.value:ee;if(h){if(le!==h)return[new Be(Y.key,ve,`${le} stop domain type must match previous stop domain type ${h}`)]}else h=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new Be(Y.key,ve,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&s!=="categorical"){let Ae=`number expected, ${le} found`;return Ns(n)&&s===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(Y.key,ve,Ae)]}return s!=="categorical"||le!=="number"||isFinite(me)&&Math.floor(me)===me?s!=="categorical"&&le==="number"&&f!==void 0&&me<f?[new Be(Y.key,ve,"stop domain values must appear in ascending order")]:(f=me,s==="categorical"&&me in x?[new Be(Y.key,ve,"stop domain values must be unique")]:(x[me]=!0,[])):[new Be(Y.key,ve,`integer expected, found ${me}`)]}}function ls(a){const n=(a.expressionContext==="property"?$d:Oc)(ss(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Be(`${a.key}${h.key}`,a.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Be(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ml(s))return[new Be(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ml(s))return[new Be(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!zc(s,["zoom","feature-state"]))return[new Be(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Ec(s))return[new Be(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ol(a){const n=a.key,s=a.value,h=a.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(xn(s))===-1&&f.push(new Be(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(xn(s))===-1&&f.push(new Be(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function Vs(a){return Ll(ss(a.value))?ls(xt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):If(a)}function If(a){const n=a.value,s=a.key;if(Vr(n)!=="array")return[new Be(s,n,`array expected, ${Vr(n)} found`)];const h=a.styleSpec;let f,v=[];if(n.length<1)return[new Be(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Ol({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),xn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&xn(n[1])==="$type"&&v.push(new Be(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Be(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Vr(n[1]),f!=="string"&&v.push(new Be(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=Vr(n[x]),xn(n[1])==="$type"?v=v.concat(Ol({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Be(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(If({key:`${s}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":f=Vr(n[1]),n.length!==2?v.push(new Be(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Be(`${s}[1]`,n[1],`string expected, ${f} found`));break;case"within":f=Vr(n[1]),n.length!==2?v.push(new Be(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new Be(`${s}[1]`,n[1],`object expected, ${f} found`))}return v}function Tf(a,n){const s=a.key,h=a.validateSpec,f=a.style,v=a.styleSpec,x=a.value,S=a.objectKey,I=v[`${n}_${a.layerType}`];if(!I)return[];const z=S.match(/^(.*)-transition$/);if(n==="paint"&&z&&I[z[1]]&&I[z[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const $=a.valueSpec||I[S];if(!$)return[new Be(s,x,`unknown property "${S}"`)];let j;if(Vr(x)==="string"&&Ns($)&&!$.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new Be(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const q=[];return a.layerType==="symbol"&&(S==="text-field"&&f&&!f.glyphs&&q.push(new Be(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&fn(ss(x))&&xn(x.type)==="identity"&&q.push(new Be(s,x,'"text-font" does not support identity functions'))),q.concat(h({key:a.key,value:x,valueSpec:$,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function Pf(a){return Tf(a,"paint")}function Ef(a){return Tf(a,"layout")}function zf(a){let n=[];const s=a.value,h=a.key,f=a.style,v=a.styleSpec;s.type||s.ref||n.push(new Be(h,s,'either "type" or "ref" is required'));let x=xn(s.type);const S=xn(s.ref);if(s.id){const I=xn(s.id);for(let z=0;z<a.arrayIndex;z++){const $=f.layers[z];xn($.id)===I&&n.push(new Be(h,s.id,`duplicate layer id "${s.id}", previously used at line ${$.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(z=>{z in s&&n.push(new Be(h,s[z],`"${z}" is prohibited for ref layers`))}),f.layers.forEach(z=>{xn(z.id)===S&&(I=z)}),I?I.ref?n.push(new Be(h,s.ref,"ref cannot reference another ref layer")):x=xn(I.type):n.push(new Be(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const I=f.sources&&f.sources[s.source],z=I&&xn(I.type);I?z==="vector"&&x==="raster"?n.push(new Be(h,s.source,`layer "${s.id}" requires a raster source`)):z!=="raster-dem"&&x==="hillshade"?n.push(new Be(h,s.source,`layer "${s.id}" requires a raster-dem source`)):z==="raster"&&x!=="raster"?n.push(new Be(h,s.source,`layer "${s.id}" requires a vector source`)):z!=="vector"||s["source-layer"]?z==="raster-dem"&&x!=="hillshade"?n.push(new Be(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||z==="geojson"&&I.lineMetrics||n.push(new Be(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Be(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Be(h,s.source,`source "${s.source}" not found`))}else n.push(new Be(h,s,'missing required property "source"'));return n=n.concat(Ri({key:h,value:s,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:Vs,layout:I=>Ri({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>Ef(xt({layerType:x},z))}}),paint:I=>Ri({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>Pf(xt({layerType:x},z))}})}})),n}function Wo(a){const n=a.value,s=a.key,h=Vr(n);return h!=="string"?[new Be(s,n,`string expected, ${h} found`)]:[]}const Fl={promoteId:function({key:a,value:n}){if(Vr(n)==="string")return Wo({key:a,value:n});{const s=[];for(const h in n)s.push(...Wo({key:`${a}.${h}`,value:n[h]}));return s}}};function Ji(a){const n=a.value,s=a.key,h=a.styleSpec,f=a.style,v=a.validateSpec;if(!n.type)return[new Be(s,n,'"type" is required')];const x=xn(n.type);let S;switch(x){case"vector":case"raster":return S=Ri({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Fl,validateSpec:v}),S;case"raster-dem":return S=function(I){var z;const $=(z=I.sourceName)!==null&&z!==void 0?z:"",j=I.value,q=I.styleSpec,Y=q.source_raster_dem,ee=I.style;let le=[];const me=Vr(j);if(j===void 0)return le;if(me!=="object")return le.push(new Be("source_raster_dem",j,`object expected, ${me} found`)),le;const ve=xn(j.encoding)==="custom",Ae=["redFactor","greenFactor","blueFactor","baseShift"],we=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Re in j)!ve&&Ae.includes(Re)?le.push(new Be(Re,j[Re],`In "${$}": "${Re}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):Y[Re]?le=le.concat(I.validateSpec({key:Re,value:j[Re],valueSpec:Y[Re],validateSpec:I.validateSpec,style:ee,styleSpec:q})):le.push(new Be(Re,j[Re],`unknown property "${Re}"`));return le}({sourceName:s,value:n,style:a.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Ri({key:s,value:n,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:v,objectElementValidators:Fl}),n.cluster)for(const I in n.clusterProperties){const[z,$]=n.clusterProperties[I],j=typeof z=="string"?[z,["accumulated"],["get",I]]:z;S.push(...ls({key:`${s}.${I}.map`,value:$,validateSpec:v,expressionContext:"cluster-map"})),S.push(...ls({key:`${s}.${I}.reduce`,value:j,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Ri({key:s,value:n,valueSpec:h.source_video,style:f,validateSpec:v,styleSpec:h});case"image":return Ri({key:s,value:n,valueSpec:h.source_image,style:f,validateSpec:v,styleSpec:h});case"canvas":return[new Be(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ol({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:h})}}function Nl(a){const n=a.value,s=a.styleSpec,h=s.light,f=a.style;let v=[];const x=Vr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Be("light",n,`object expected, ${x} found`)]),v;for(const S in n){const I=S.match(/^(.*)-transition$/);v=v.concat(I&&h[I[1]]&&h[I[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:a.validateSpec,style:f,styleSpec:s}):h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:f,styleSpec:s}):[new Be(S,n[S],`unknown property "${S}"`)])}return v}function Mf(a){const n=a.value,s=a.styleSpec,h=s.terrain,f=a.style;let v=[];const x=Vr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Be("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:f,styleSpec:s}):[new Be(S,n[S],`unknown property "${S}"`)]);return v}function Df(a){let n=[];const s=a.value,h=a.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new Be(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Be(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Ri({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Wo({key:h,value:s})}const Af={"*":()=>[],array:js,boolean:function(a){const n=a.value,s=a.key,h=Vr(n);return h!=="boolean"?[new Be(s,n,`boolean expected, ${h} found`)]:[]},number:Bl,color:function(a){const n=a.key,s=a.value,h=Vr(s);return h!=="string"?[new Be(n,s,`color expected, ${h} found`)]:mr.parse(String(s))?[]:[new Be(n,s,`color expected, "${s}" found`)]},constants:kf,enum:Ol,filter:Vs,function:Uc,layer:zf,object:Ri,source:Ji,light:Nl,terrain:Mf,string:Wo,formatted:function(a){return Wo(a).length===0?[]:ls(a)},resolvedImage:function(a){return Wo(a).length===0?[]:ls(a)},padding:function(a){const n=a.key,s=a.value;if(Vr(s)==="array"){if(s.length<1||s.length>4)return[new Be(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(a.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:a.validateSpec,valueSpec:h}));return f}return Bl({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,s=a.value,h=Vr(s),f=a.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Be(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Ol({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(js({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:f}));return v},sprite:Df};function fa(a){const n=a.value,s=a.valueSpec,h=a.styleSpec;return a.validateSpec=fa,s.expression&&fn(xn(n))?Uc(a):s.expression&&Bc(ss(n))?ls(a):s.type&&Af[s.type]?Af[s.type](a):Ri(xt({},a,{valueSpec:s.type?h[s.type]:s}))}function Rf(a){const n=a.value,s=a.key,h=Wo(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Be(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Be(s,n,'"glyphs" url must include a "{range}" token'))),h}function ho(a,n=je){let s=[];return s=s.concat(fa({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:fa,objectElementValidators:{glyphs:Rf,"*":()=>[]}})),a.constants&&(s=s.concat(kf({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:fa}))),Hc(s)}function ma(a){return function(n){return a({...n,validateSpec:fa})}}function Hc(a){return[].concat(a).sort((n,s)=>n.line-s.line)}function ga(a){return function(...n){return Hc(a.apply(this,n))}}ho.source=ga(ma(Ji)),ho.sprite=ga(ma(Df)),ho.glyphs=ga(ma(Rf)),ho.light=ga(ma(Nl)),ho.terrain=ga(ma(Mf)),ho.layer=ga(ma(zf)),ho.filter=ga(ma(Vs)),ho.paintProperty=ga(ma(Pf)),ho.layoutProperty=ga(ma(Ef));const ya=ho,Cv=ya.light,Fd=ya.paintProperty,Lf=ya.layoutProperty;function Wc(a,n){let s=!1;if(n&&n.length)for(const h of n)a.fire(new Mt(new Error(h.message))),s=!0;return s}class Us{constructor(n,s,h){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let I=0;I<this.d*this.d;I++){const z=x[3+I],$=x[3+I+1];f.push(z===$?null:x.subarray(z,$))}const S=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,f,v){this._forEachCell(s,h,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,f,v,x){this.cells[v].push(x)}query(n,s,h,f,v){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=f&&!v)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,h,f,this._queryCell,I,{},v),I}}_queryCell(n,s,h,f,v,x,S,I){const z=this.cells[v];if(z!==null){const $=this.keys,j=this.bboxes;for(let q=0;q<z.length;q++){const Y=z[q];if(S[Y]===void 0){const ee=4*Y;(I?I(j[ee+0],j[ee+1],j[ee+2],j[ee+3]):n<=j[ee+2]&&s<=j[ee+3]&&h>=j[ee+0]&&f>=j[ee+1])?(S[Y]=!0,x.push($[Y])):S[Y]=!1}}}}_forEachCell(n,s,h,f,v,x,S,I){const z=this._convertToCellCoord(n),$=this._convertToCellCoord(s),j=this._convertToCellCoord(h),q=this._convertToCellCoord(f);for(let Y=z;Y<=j;Y++)for(let ee=$;ee<=q;ee++){const le=this.d*ee+Y;if((!I||I(this._convertFromCellCoord(Y),this._convertFromCellCoord(ee),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(ee+1)))&&v.call(this,n,s,h,f,le,x,S,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const f=new Int32Array(s+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const S=n[x];f[3+x]=v,f.set(S,v),v+=S.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Us(n.buffer)}}const va={};function Dt(a,n,s={}){if(va[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),va[a]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Dt("Object",Object),Dt("TransferableGridIndex",Us),Dt("Color",mr),Dt("Error",Error),Dt("AJAXError",Ze),Dt("ResolvedImage",fr),Dt("StylePropertyFunction",Al),Dt("StyleExpression",Rd,{omit:["_evaluator"]}),Dt("ZoomDependentExpression",Fc),Dt("ZoomConstantExpression",Ld),Dt("CompoundExpression",uo,{omit:["_evaluate"]});for(const a in Fs)Fs[a]._classRegistryKey||Dt(`Expression_${a}`,Fs[a]);function Gc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ja(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Gc(a)||Oe(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const h of a)s.push(ja(h,n));return s}if(typeof a=="object"){const s=a.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!va[h])throw new Error(`${h} is not registered.`);const f=s.serialize?s.serialize(a,n):{};if(s.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||va[h].omit.indexOf(v)>=0)continue;const x=a[v];f[v]=va[h].shallow.indexOf(v)>=0?x:ja(x,n)}a instanceof Error&&(f.message=a.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(f.$name=h),f}throw new Error("can't serialize object of type "+typeof a)}function Hs(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Gc(a)||Oe(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Hs);if(typeof a=="object"){const n=a.$name||"Object";if(!va[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=va[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const h=Object.create(s.prototype);for(const f of Object.keys(a)){if(f==="$name")continue;const v=a[f];h[f]=va[n].shallow.indexOf(f)>=0?v:Hs(v)}return h}throw new Error("can't deserialize object of type "+typeof a)}class $f{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const kt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Nd(a){for(const n of a)if(Vd(n.charCodeAt(0)))return!0;return!1}function jd(a){for(const n of a)if(!kv(n.charCodeAt(0)))return!1;return!0}function kv(a){return!(kt.Arabic(a)||kt["Arabic Supplement"](a)||kt["Arabic Extended-A"](a)||kt["Arabic Presentation Forms-A"](a)||kt["Arabic Presentation Forms-B"](a))}function Vd(a){return!(a!==746&&a!==747&&(a<4352||!(kt["Bopomofo Extended"](a)||kt.Bopomofo(a)||kt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||kt["CJK Compatibility Ideographs"](a)||kt["CJK Compatibility"](a)||kt["CJK Radicals Supplement"](a)||kt["CJK Strokes"](a)||!(!kt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||kt["CJK Unified Ideographs Extension A"](a)||kt["CJK Unified Ideographs"](a)||kt["Enclosed CJK Letters and Months"](a)||kt["Hangul Compatibility Jamo"](a)||kt["Hangul Jamo Extended-A"](a)||kt["Hangul Jamo Extended-B"](a)||kt["Hangul Jamo"](a)||kt["Hangul Syllables"](a)||kt.Hiragana(a)||kt["Ideographic Description Characters"](a)||kt.Kanbun(a)||kt["Kangxi Radicals"](a)||kt["Katakana Phonetic Extensions"](a)||kt.Katakana(a)&&a!==12540||!(!kt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!kt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||kt["Unified Canadian Aboriginal Syllabics"](a)||kt["Unified Canadian Aboriginal Syllabics Extended"](a)||kt["Vertical Forms"](a)||kt["Yijing Hexagram Symbols"](a)||kt["Yi Syllables"](a)||kt["Yi Radicals"](a))))}function Bf(a){return!(Vd(a)||function(n){return!!(kt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||kt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||kt["Letterlike Symbols"](n)||kt["Number Forms"](n)||kt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||kt["Control Pictures"](n)&&n!==9251||kt["Optical Character Recognition"](n)||kt["Enclosed Alphanumerics"](n)||kt["Geometric Shapes"](n)||kt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||kt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||kt["CJK Symbols and Punctuation"](n)||kt.Katakana(n)||kt["Private Use Area"](n)||kt["CJK Compatibility Forms"](n)||kt["Small Form Variants"](n)||kt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function Of(a){return a>=1424&&a<=2303||kt["Arabic Presentation Forms-A"](a)||kt["Arabic Presentation Forms-B"](a)}function Ff(a,n){return!(!n&&Of(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||kt.Khmer(a))}function Iv(a){for(const n of a)if(Of(n.charCodeAt(0)))return!0;return!1}const Ud="deferred",Hd="loading",Wd="loaded";let Gd=null,Li="unavailable",Va=null;const jl=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Li="error"),Gd&&Gd(a)};function qd(){Vl.fire(new ur("pluginStateChange",{pluginStatus:Li,pluginURL:Va}))}const Vl=new Er,Zd=function(){return Li},Nf=function(){if(Li!==Ud||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Li=Hd,qd(),Va&&Mr({url:Va},a=>{a?jl(a):(Li=Wd,qd())})},Yi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Li===Wd||Yi.applyArabicShaping!=null,isLoading:()=>Li===Hd,setState(a){if(!Fe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Li=a.pluginStatus,Va=a.pluginURL},isParsed(){if(!Fe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Yi.applyArabicShaping!=null&&Yi.processBidirectionalText!=null&&Yi.processStyledBidirectionalText!=null},getPluginURL(){if(!Fe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Va}};class an{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $f,this.transition={})}isSupportedScript(n){return function(s,h){for(const f of s)if(!Ff(f.charCodeAt(0),h))return!1;return!0}(n,Yi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class qc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,f){if(fn(h))return new Al(h,f);if(Bc(h)){const v=$d(h,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return f.type==="color"&&typeof h=="string"?v=mr.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Zt.parse(h)):v=Tr.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Kd{constructor(n){this.property=n,this.value=new qc(n,void 0)}transitioned(n,s){return new Vf(this.property,this.value,s,Z({},n.transition,this.transition),n.now)}untransitioned(){return new Vf(this.property,this.value,null,{},0)}}class jf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ze(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Kd(this._values[n].property)),this._values[n].value=new qc(this._values[n].property,s===null?void 0:ze(s))}getTransition(n){return ze(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Kd(this._values[n].property)),this._values[n].transition=ze(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const h=new Uf(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(n,s._values[f]);return h}untransitioned(){const n=new Uf(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Vf{constructor(n,s,h,f,v){this.property=n,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const f=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(I){if(I<=0)return 0;if(I>=1)return 1;const z=I*I,$=z*I;return 4*(I<.5?$:3*(I-z)+$-.75)}(S))}}return v}}class Uf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const f=new Zc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,h);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Tv{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ze(this._values[n].value)}setValue(n,s){this._values[n]=new qc(this._values[n].property,s===null?void 0:ze(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const f=new Zc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,h);return f}}class xi{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,f){return this.property.evaluate(this.value,this.parameters,n,s,h,f)}}class Zc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Ut{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const f=Ki[this.specification.type];return f?f(n,s,h):n}}class nr{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,f){return new xi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,f)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},n.parameters);const f=Ki[this.specification.type];if(f){const v=f(n.value.value,s.value.value,h);return new xi(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,f,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,f,v,x)}}class Ul extends nr{possiblyEvaluate(n,s,h,f){if(n.value===void 0)return new xi(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new xi(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new xi(this,{kind:"constant",value:v},s)}return new xi(this,n.expression,s)}evaluate(n,s,h,f,v,x){if(n.kind==="source"){const S=n.evaluate(s,h,f,v,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,f),n.evaluate({zoom:Math.floor(s.zoom)},h,f),n.evaluate({zoom:Math.floor(s.zoom)+1},h,f),s):n.value}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Xd{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,f);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new an(Math.floor(s.zoom-1),s)),n.expression.evaluate(new an(Math.floor(s.zoom),s)),n.expression.evaluate(new an(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Jd{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){return!!n.expression.evaluate(s,null,{},h,f)}interpolate(){return!1}}class zn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new qc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Kd(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}Dt("DataDrivenProperty",nr),Dt("DataConstantProperty",Ut),Dt("CrossFadedDataDrivenProperty",Ul),Dt("CrossFadedProperty",Xd),Dt("ColorRampProperty",Jd);const Yd="-transition";class po extends Er{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Tv(s.layout)),s.paint)){this._transitionablePaint=new jf(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Zc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Lf,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Yd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Fd,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Yd))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ke(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,f,v={}){return(!v||v.validate!==!1)&&Wc(this,n.call(ya,{key:s,layerType:this.type,objectKey:h,value:f,styleSpec:je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof xi&&Ns(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Hf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class cs{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class bn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gn(a,n=1){let s=0,h=0;return{members:a.map(f=>{const v=Hf[f.type].BYTES_PER_ELEMENT,x=s=Ws(s,Math.max(n,v)),S=f.components||1;return h=Math.max(h,v),s+=v*S,{name:f.name,type:f.type,components:S,offset:x}}),size:Ws(s,Math.max(h,n)),alignment:n}}function Ws(a,n){return Math.ceil(a/n)*n}class Hl extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=h,n}}Hl.prototype.bytesPerElement=4,Dt("StructArrayLayout2i4",Hl);class Wl extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=f,n}}Wl.prototype.bytesPerElement=6,Dt("StructArrayLayout3i6",Wl);class us extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=v,n}}us.prototype.bytesPerElement=8,Dt("StructArrayLayout4i8",us);class Qd extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=S,n}}Qd.prototype.bytesPerElement=12,Dt("StructArrayLayout2i4i12",Qd);class eh extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=4*n,z=8*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[z+4]=f,this.uint8[z+5]=v,this.uint8[z+6]=x,this.uint8[z+7]=S,n}}eh.prototype.bytesPerElement=8,Dt("StructArrayLayout2i4ub8",eh);class Gs extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=h,n}}Gs.prototype.bytesPerElement=8,Dt("StructArrayLayout2f8",Gs);class th extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,z,$){const j=this.length;return this.resize(j+1),this.emplace(j,n,s,h,f,v,x,S,I,z,$)}emplace(n,s,h,f,v,x,S,I,z,$,j){const q=10*n;return this.uint16[q+0]=s,this.uint16[q+1]=h,this.uint16[q+2]=f,this.uint16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=S,this.uint16[q+6]=I,this.uint16[q+7]=z,this.uint16[q+8]=$,this.uint16[q+9]=j,n}}th.prototype.bytesPerElement=20,Dt("StructArrayLayout10ui20",th);class rh extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,z,$,j,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,s,h,f,v,x,S,I,z,$,j,q)}emplace(n,s,h,f,v,x,S,I,z,$,j,q,Y){const ee=12*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=f,this.int16[ee+3]=v,this.uint16[ee+4]=x,this.uint16[ee+5]=S,this.uint16[ee+6]=I,this.uint16[ee+7]=z,this.int16[ee+8]=$,this.int16[ee+9]=j,this.int16[ee+10]=q,this.int16[ee+11]=Y,n}}rh.prototype.bytesPerElement=24,Dt("StructArrayLayout4i4ui4i24",rh);class Ur extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=f,n}}Ur.prototype.bytesPerElement=12,Dt("StructArrayLayout3f12",Ur);class y extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,Dt("StructArrayLayout1ul4",y);class i extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,z){const $=this.length;return this.resize($+1),this.emplace($,n,s,h,f,v,x,S,I,z)}emplace(n,s,h,f,v,x,S,I,z,$){const j=10*n,q=5*n;return this.int16[j+0]=s,this.int16[j+1]=h,this.int16[j+2]=f,this.int16[j+3]=v,this.int16[j+4]=x,this.int16[j+5]=S,this.uint32[q+3]=I,this.uint16[j+8]=z,this.uint16[j+9]=$,n}}i.prototype.bytesPerElement=20,Dt("StructArrayLayout6i1ul2ui20",i);class u extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=S,n}}u.prototype.bytesPerElement=12,Dt("StructArrayLayout2i2i2i12",u);class p extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,f,v)}emplace(n,s,h,f,v,x){const S=4*n,I=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=f,this.int16[I+6]=v,this.int16[I+7]=x,n}}p.prototype.bytesPerElement=16,Dt("StructArrayLayout2f1f2i16",p);class g extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=f,this.float32[S+2]=v,n}}g.prototype.bytesPerElement=12,Dt("StructArrayLayout2ub2f12",g);class _ extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=f,n}}_.prototype.bytesPerElement=6,Dt("StructArrayLayout3ui6",_);class C extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le,me,ve){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le,me,ve)}emplace(n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le,me,ve,Ae){const we=24*n,Re=12*n,Ue=48*n;return this.int16[we+0]=s,this.int16[we+1]=h,this.uint16[we+2]=f,this.uint16[we+3]=v,this.uint32[Re+2]=x,this.uint32[Re+3]=S,this.uint32[Re+4]=I,this.uint16[we+10]=z,this.uint16[we+11]=$,this.uint16[we+12]=j,this.float32[Re+7]=q,this.float32[Re+8]=Y,this.uint8[Ue+36]=ee,this.uint8[Ue+37]=le,this.uint8[Ue+38]=me,this.uint32[Re+10]=ve,this.int16[we+22]=Ae,n}}C.prototype.bytesPerElement=48,Dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class k extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le,me,ve,Ae,we,Re,Ue,rt,It,Ot,Ct,_t,ft,Rt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le,me,ve,Ae,we,Re,Ue,rt,It,Ot,Ct,_t,ft,Rt)}emplace(n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le,me,ve,Ae,we,Re,Ue,rt,It,Ot,Ct,_t,ft,Rt,gt){const ct=32*n,Xt=16*n;return this.int16[ct+0]=s,this.int16[ct+1]=h,this.int16[ct+2]=f,this.int16[ct+3]=v,this.int16[ct+4]=x,this.int16[ct+5]=S,this.int16[ct+6]=I,this.int16[ct+7]=z,this.uint16[ct+8]=$,this.uint16[ct+9]=j,this.uint16[ct+10]=q,this.uint16[ct+11]=Y,this.uint16[ct+12]=ee,this.uint16[ct+13]=le,this.uint16[ct+14]=me,this.uint16[ct+15]=ve,this.uint16[ct+16]=Ae,this.uint16[ct+17]=we,this.uint16[ct+18]=Re,this.uint16[ct+19]=Ue,this.uint16[ct+20]=rt,this.uint16[ct+21]=It,this.uint16[ct+22]=Ot,this.uint32[Xt+12]=Ct,this.float32[Xt+13]=_t,this.float32[Xt+14]=ft,this.uint16[ct+30]=Rt,this.uint16[ct+31]=gt,n}}k.prototype.bytesPerElement=64,Dt("StructArrayLayout8i15ui1ul2f2ui64",k);class P extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}P.prototype.bytesPerElement=4,Dt("StructArrayLayout1f4",P);class D extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=f,n}}D.prototype.bytesPerElement=12,Dt("StructArrayLayout1ui2f12",D);class B extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=f,n}}B.prototype.bytesPerElement=8,Dt("StructArrayLayout1ul2ui8",B);class N extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=h,n}}N.prototype.bytesPerElement=4,Dt("StructArrayLayout2ui4",N);class X extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}X.prototype.bytesPerElement=2,Dt("StructArrayLayout1ui2",X);class ue extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=v,n}}ue.prototype.bytesPerElement=16,Dt("StructArrayLayout4f16",ue);class ce extends cs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class pe extends i{get(n){return new ce(this,n)}}Dt("CollisionBoxArray",pe);class ae extends cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class Pe extends C{get(n){return new ae(this,n)}}Dt("PlacedSymbolArray",Pe);class Ne extends cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ne.prototype.size=64;class ge extends k{get(n){return new Ne(this,n)}}Dt("SymbolInstanceArray",ge);class De extends P{getoffsetX(n){return this.float32[1*n+0]}}Dt("GlyphOffsetArray",De);class He extends Wl{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Dt("SymbolLineVertexArray",He);class We extends cs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}We.prototype.size=12;class tt extends D{get(n){return new We(this,n)}}Dt("TextAnchorOffsetArray",tt);class st extends cs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}st.prototype.size=8;class ot extends B{get(n){return new st(this,n)}}Dt("FeatureIndexArray",ot);class dt extends Hl{}class Bt extends Hl{}class _r extends Hl{}class vt extends Qd{}class ir extends eh{}class Nt extends Gs{}class qr extends th{}class yr extends rh{}class pr extends Ur{}class xr extends y{}class kn extends u{}class en extends g{}class ai extends _{}class Un extends N{}const Mn=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qi}=Mn;class sn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,f){let v=this.segments[this.segments.length-1];return n>sn.MAX_VERTEX_ARRAY_LENGTH&&Ye(`Max vertices per segment is ${sn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>sn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,f){return new sn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function Go(a,n){return 256*(a=se(Math.floor(a),0,255))+se(Math.floor(n),0,255)}sn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dt("SegmentVector",sn);const qo=gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ua={exports:{}},ds={exports:{}};ds.exports=function(a,n){var s,h,f,v,x,S,I,z;for(h=a.length-(s=3&a.length),f=n,x=3432918353,S=461845907,z=0;z<h;)I=255&a.charCodeAt(z)|(255&a.charCodeAt(++z))<<8|(255&a.charCodeAt(++z))<<16|(255&a.charCodeAt(++z))<<24,++z,f=27492+(65535&(v=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&a.charCodeAt(z+2))<<16;case 2:I^=(255&a.charCodeAt(z+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&a.charCodeAt(z)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295}return f^=a.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var qs=ds.exports,hi={exports:{}};hi.exports=function(a,n){for(var s,h=a.length,f=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:f^=(255&a.charCodeAt(v+2))<<16;case 2:f^=(255&a.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&a.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var si=qs,bi=hi.exports;Ua.exports=si,Ua.exports.murmur3=si,Ua.exports.murmur2=bi;var hs=w(Ua.exports);class In{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,f){this.ids.push(Hn(n)),this.positions.push(s,h,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Hn(n);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=s?f=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),f=new Uint32Array(n.positions);return $i(h,f,0,h.length-1),s&&s.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(n){const s=new In;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Hn(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:hs(String(a))}function $i(a,n,s,h){for(;s<h;){const f=a[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(a[v]<f);do x--;while(a[x]>f);if(v>=x)break;Tn(a,v,x),Tn(n,3*v,3*x),Tn(n,3*v+1,3*x+1),Tn(n,3*v+2,3*x+2)}x-s<h-x?($i(a,n,s,x),s=x+1):($i(a,n,x+1,h),h=x)}}function Tn(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}Dt("FeaturePositionMap",In);class ps{constructor(n,s){this.gl=n.gl,this.location=s}}class Kc extends ps{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Wf extends ps{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Gf extends ps{constructor(n,s){super(n,s),this.current=mr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Pv=new Float32Array(16);function nh(a){return[Go(255*a.r,255*a.g),Go(255*a.b,255*a.a)]}class Zo{constructor(n,s,h){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Gf(n,s):new Kc(n,s)}}class fs{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Wf(n,s):new Kc(n,s)}}class Ko{constructor(n,s,h,f){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,h,f,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new an(0),s,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,f){const v=this.expression.evaluate({zoom:0},h,f);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const f=nh(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fo{constructor(n,s,h,f,v,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,f,v){const x=this.expression.evaluate(new an(this.zoom),s,{},f,[],v),S=this.expression.evaluate(new an(this.zoom+1),s,{},f,[],v),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,x,S)}updatePaintArray(n,s,h,f){const v=this.expression.evaluate({zoom:this.zoom},h,f),x=this.expression.evaluate({zoom:this.zoom+1},h,f);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,f){if(this.type==="color"){const v=nh(h),x=nh(f);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=se(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,h){return new Kc(n,s)}}class Xo{constructor(n,s,h,f,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,f,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,f){if(!f||!h)return;const{min:v,mid:x,max:S}=h,I=f[v],z=f[x],$=f[S];if(I&&z&&$)for(let j=n;j<s;j++)this.zoomInPaintVertexArray.emplace(j,z.tl[0],z.tl[1],z.br[0],z.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],z.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,z.tl[0],z.tl[1],z.br[0],z.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],z.pixelRatio,$.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,qo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,qo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ih{constructor(n,s,h){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof xi&&Ns(x.property.specification)))continue;const S=Rz(v,n.type),I=x.value,z=x.property.specification.type,$=x.property.useIntegerZoom,j=x.property.specification["property-type"],q=j==="cross-faded"||j==="cross-faded-data-driven";if(I.kind==="constant")this.binders[v]=q?new fs(I.value,S):new Zo(I.value,S,z),f.push(`/u_${v}`);else if(I.kind==="source"||q){const Y=zb(v,z,"source");this.binders[v]=q?new Xo(I,z,$,s,Y,n.id):new Ko(I,S,z,Y),f.push(`/a_${v}`)}else{const Y=zb(v,z,"composite");this.binders[v]=new fo(I,S,z,$,s,Y),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ko||s instanceof fo?s.maxValue:0}populatePaintArrays(n,s,h,f,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Ko||S instanceof fo||S instanceof Xo)&&S.populatePaintArray(n,s,h,f,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const f=this.binders[h];f instanceof fs&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,f,v){let x=!1;for(const S in n){const I=s.getPositions(S);for(const z of I){const $=h.feature(z.index);for(const j in this.binders){const q=this.binders[j];if((q instanceof Ko||q instanceof fo||q instanceof Xo)&&q.expression.isStateDependent===!0){const Y=f.paint.get(j);q.expression=Y.value,q.updatePaintArray(z.start,z.end,$,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Zo||h instanceof fs)&&n.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ko||h instanceof fo)for(let f=0;f<h.paintVertexAttributes.length;f++)n.push(h.paintVertexAttributes[f].name);else if(h instanceof Xo)for(let f=0;f<qo.members.length;f++)n.push(qo.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Zo||h instanceof fs||h instanceof fo)for(const f of h.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Zo||v instanceof fs||v instanceof fo){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(n,s[x],x);h.push({name:x,property:f,binding:S})}}}return h}setUniforms(n,s,h,f){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,f,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Xo){const f=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof Ko||h instanceof fo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Ko||h instanceof fo||h instanceof Xo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ko||s instanceof fo||s instanceof Xo)&&s.destroy()}}}class _a{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new ih(f,s,h);this.needsUpload=!1,this._featureMap=new In,this._bufferOffset=0}populatePaintArrays(n,s,h,f,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,f){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Rz(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function zb(a,n,s){const h={color:{source:Gs,composite:ue},number:{source:P,composite:Gs}},f=function(v){return{"line-pattern":{source:qr,composite:qr},"fill-pattern":{source:qr,composite:qr},"fill-extrusion-pattern":{source:qr,composite:qr}}[v]}(a);return f&&f[s]||h[n][s]}Dt("ConstantBinder",Zo),Dt("CrossFadedConstantBinder",fs),Dt("SourceExpressionBinder",Ko),Dt("CrossFadedCompositeBinder",Xo),Dt("CompositeExpressionBinder",fo),Dt("ProgramConfiguration",ih,{omit:["_buffers"]}),Dt("ProgramConfigurationSet",_a);const Bn=8192,Ev=Math.pow(2,14)-1,Mb=-Ev-1;function Gl(a){const n=Bn/a.extent,s=a.loadGeometry();for(let h=0;h<s.length;h++){const f=s[h];for(let v=0;v<f.length;v++){const x=f[v],S=Math.round(x.x*n),I=Math.round(x.y*n);x.x=se(S,Mb,Ev),x.y=se(I,Mb,Ev),(S<x.x||S>x.x+1||I<x.y||I>x.y+1)&&Ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function ql(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Gl(a):[]}}function qf(a,n,s,h,f){a.emplaceBack(2*n+(h+1)/2,2*s+(f+1)/2)}class zv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Bt,this.indexArray=new ai,this.segments=new sn,this.programConfigurations=new _a(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const f=this.layers[0],v=[];let x=null,S=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:I,id:z,index:$,sourceLayerIndex:j}of n){const q=this.layers[0]._featureFilter.needGeometry,Y=ql(I,q);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),Y,h))continue;const ee=S?x.evaluate(Y,{},h):void 0,le={id:z,properties:I.properties,type:I.type,sourceLayerIndex:j,index:$,geometry:q?Y.geometry:Gl(I),patterns:{},sortKey:ee};v.push(le)}S&&v.sort((I,z)=>I.sortKey-z.sortKey);for(const I of v){const{geometry:z,index:$,sourceLayerIndex:j}=I,q=n[$].feature;this.addFeature(I,z,$,h),s.featureIndex.insert(q,z,$,j,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qi),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,f){for(const v of s)for(const x of v){const S=x.x,I=x.y;if(S<0||S>=Bn||I<0||I>=Bn)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),$=z.vertexLength;qf(this.layoutVertexArray,S,I,-1,-1),qf(this.layoutVertexArray,S,I,1,-1),qf(this.layoutVertexArray,S,I,1,1),qf(this.layoutVertexArray,S,I,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},f)}}function Db(a,n){for(let s=0;s<a.length;s++)if(Xc(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Xc(a,n[s]))return!0;return!!Mv(a,n)}function Lz(a,n,s){return!!Xc(a,n)||!!Dv(n,a,s)}function Ab(a,n){if(a.length===1)return Lb(n,a[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let f=0;f<h.length;f++)if(Xc(a,h[f]))return!0}for(let s=0;s<a.length;s++)if(Lb(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Mv(a,n[s]))return!0;return!1}function $z(a,n,s){if(a.length>1){if(Mv(a,n))return!0;for(let h=0;h<n.length;h++)if(Dv(n[h],a,s))return!0}for(let h=0;h<a.length;h++)if(Dv(a[h],n,s))return!0;return!1}function Mv(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const h=a[s],f=a[s+1];for(let v=0;v<n.length-1;v++)if(Bz(h,f,n[v],n[v+1]))return!0}return!1}function Bz(a,n,s,h){return Ge(a,s,h)!==Ge(n,s,h)&&Ge(a,n,s)!==Ge(a,n,h)}function Dv(a,n,s){const h=s*s;if(n.length===1)return a.distSqr(n[0])<h;for(let f=1;f<n.length;f++)if(Rb(a,n[f-1],n[f])<h)return!0;return!1}function Rb(a,n,s){const h=n.distSqr(s);if(h===0)return a.distSqr(n);const f=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/h;return a.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function Lb(a,n){let s,h,f,v=!1;for(let x=0;x<a.length;x++){s=a[x];for(let S=0,I=s.length-1;S<s.length;I=S++)h=s[S],f=s[I],h.y>n.y!=f.y>n.y&&n.x<(f.x-h.x)*(n.y-h.y)/(f.y-h.y)+h.x&&(v=!v)}return v}function Xc(a,n){let s=!1;for(let h=0,f=a.length-1;h<a.length;f=h++){const v=a[h],x=a[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function Oz(a,n,s){const h=s[0],f=s[2];if(a.x<h.x&&n.x<h.x||a.x>f.x&&n.x>f.x||a.y<h.y&&n.y<h.y||a.y>f.y&&n.y>f.y)return!1;const v=Ge(a,n,s[0]);return v!==Ge(a,n,s[1])||v!==Ge(a,n,s[2])||v!==Ge(a,n,s[3])}function oh(a,n,s){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(a)}function Zf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Kf(a,n,s,h,f){if(!n[0]&&!n[1])return a;const v=M.convert(n)._mult(f);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<a.length;S++)x.push(a[S].sub(v));return x}let $b,Bb;Dt("CircleBucket",zv,{omit:["layers"]});var Fz={get paint(){return Bb=Bb||new zn({"circle-radius":new nr(je.paint_circle["circle-radius"]),"circle-color":new nr(je.paint_circle["circle-color"]),"circle-blur":new nr(je.paint_circle["circle-blur"]),"circle-opacity":new nr(je.paint_circle["circle-opacity"]),"circle-translate":new Ut(je.paint_circle["circle-translate"]),"circle-translate-anchor":new Ut(je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ut(je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ut(je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nr(je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nr(je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nr(je.paint_circle["circle-stroke-opacity"])})},get layout(){return $b=$b||new zn({"circle-sort-key":new nr(je.layout_circle["circle-sort-key"])})}},Bi=1e-6,Jc=typeof Float32Array<"u"?Float32Array:Array;function Av(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Ob(a,n,s){var h=n[0],f=n[1],v=n[2],x=n[3],S=n[4],I=n[5],z=n[6],$=n[7],j=n[8],q=n[9],Y=n[10],ee=n[11],le=n[12],me=n[13],ve=n[14],Ae=n[15],we=s[0],Re=s[1],Ue=s[2],rt=s[3];return a[0]=we*h+Re*S+Ue*j+rt*le,a[1]=we*f+Re*I+Ue*q+rt*me,a[2]=we*v+Re*z+Ue*Y+rt*ve,a[3]=we*x+Re*$+Ue*ee+rt*Ae,a[4]=(we=s[4])*h+(Re=s[5])*S+(Ue=s[6])*j+(rt=s[7])*le,a[5]=we*f+Re*I+Ue*q+rt*me,a[6]=we*v+Re*z+Ue*Y+rt*ve,a[7]=we*x+Re*$+Ue*ee+rt*Ae,a[8]=(we=s[8])*h+(Re=s[9])*S+(Ue=s[10])*j+(rt=s[11])*le,a[9]=we*f+Re*I+Ue*q+rt*me,a[10]=we*v+Re*z+Ue*Y+rt*ve,a[11]=we*x+Re*$+Ue*ee+rt*Ae,a[12]=(we=s[12])*h+(Re=s[13])*S+(Ue=s[14])*j+(rt=s[15])*le,a[13]=we*f+Re*I+Ue*q+rt*me,a[14]=we*v+Re*z+Ue*Y+rt*ve,a[15]=we*x+Re*$+Ue*ee+rt*Ae,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var ah,Nz=Ob;function Xf(a,n,s){var h=n[0],f=n[1],v=n[2],x=n[3];return a[0]=s[0]*h+s[4]*f+s[8]*v+s[12]*x,a[1]=s[1]*h+s[5]*f+s[9]*v+s[13]*x,a[2]=s[2]*h+s[6]*f+s[10]*v+s[14]*x,a[3]=s[3]*h+s[7]*f+s[11]*v+s[15]*x,a}ah=new Jc(4),Jc!=Float32Array&&(ah[0]=0,ah[1]=0,ah[2]=0,ah[3]=0);class jz extends po{constructor(n){super(n,Fz)}createBucket(n){return new zv(n)}queryRadius(n){const s=n;return oh("circle-radius",this,s)+oh("circle-stroke-width",this,s)+Zf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S,I){const z=Kf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),$=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),j=this.paint.get("circle-pitch-alignment")==="map",q=j?z:function(ee,le){return ee.map(me=>Fb(me,le))}(z,I),Y=j?$*S:$;for(const ee of f)for(const le of ee){const me=j?le:Fb(le,I);let ve=Y;const Ae=Xf([],[le.x,le.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=Ae[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=x.cameraToCenterDistance/Ae[3]),Lz(q,me,ve))return!0}return!1}}function Fb(a,n){const s=Xf([],[a.x,a.y,0,1],n);return new M(s[0]/s[3],s[1]/s[3])}class Nb extends zv{}let jb;Dt("HeatmapBucket",Nb,{omit:["layers"]});var Vz={get paint(){return jb=jb||new zn({"heatmap-radius":new nr(je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nr(je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ut(je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jd(je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ut(je.paint_heatmap["heatmap-opacity"])})}};function Rv(a,{width:n,height:s},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*h}`)}else f=new Uint8Array(n*s*h);return a.width=n,a.height=s,a.data=f,a}function Vb(a,{width:n,height:s},h){if(n===a.width&&s===a.height)return;const f=Rv({},{width:n,height:s},h);Lv(a,f,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,s)},h),a.width=n,a.height=s,a.data=f.data}function Lv(a,n,s,h,f,v){if(f.width===0||f.height===0)return n;if(f.width>a.width||f.height>a.height||s.x>a.width-f.width||s.y>a.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||h.x>n.width-f.width||h.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<f.height;I++){const z=((s.y+I)*a.width+s.x)*v,$=((h.y+I)*n.width+h.x)*v;for(let j=0;j<f.width*v;j++)S[$+j]=x[z+j]}return n}class sh{constructor(n,s){Rv(this,n,1,s)}resize(n){Vb(this,n,1)}clone(){return new sh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,v){Lv(n,s,h,f,v,1)}}class Io{constructor(n,s){Rv(this,n,4,s)}resize(n){Vb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,v){Lv(n,s,h,f,v,4)}}function Ub(a){const n={},s=a.resolution||256,h=a.clips?a.clips.length:1,f=a.image||new Io({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,I)=>{n[a.evaluationKey]=I;const z=a.expression.evaluate(n);f.data[x+S+0]=Math.floor(255*z.r/z.a),f.data[x+S+1]=Math.floor(255*z.g/z.a),f.data[x+S+2]=Math.floor(255*z.b/z.a),f.data[x+S+3]=Math.floor(255*z.a)};if(a.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let I=0,z=0;I<s;I++,z+=4){const $=I/(s-1),{start:j,end:q}=a.clips[x];v(S,z,j*(1-$)+q*$)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return f}Dt("AlphaImage",sh),Dt("RGBAImage",Io);class Uz extends po{createBucket(n){return new Nb(n)}constructor(n){super(n,Vz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ub({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Hb;var Hz={get paint(){return Hb=Hb||new zn({"hillshade-illumination-direction":new Ut(je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ut(je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ut(je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ut(je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ut(je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ut(je.paint_hillshade["hillshade-accent-color"])})}};class Wz extends po{constructor(n){super(n,Hz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Gz=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:qz}=Gz;var $v={exports:{}};function Jf(a,n,s){s=s||2;var h,f,v,x,S,I,z,$=n&&n.length,j=$?n[0]*s:a.length,q=Wb(a,0,j,s,!0),Y=[];if(!q||q.next===q.prev)return Y;if($&&(q=function(le,me,ve,Ae){var we,Re,Ue,rt=[];for(we=0,Re=me.length;we<Re;we++)(Ue=Wb(le,me[we]*Ae,we<Re-1?me[we+1]*Ae:le.length,Ae,!1))===Ue.next&&(Ue.steiner=!0),rt.push(tM(Ue));for(rt.sort(Yz),we=0;we<rt.length;we++)ve=Qz(rt[we],ve);return ve}(a,n,q,s)),a.length>80*s){h=v=a[0],f=x=a[1];for(var ee=s;ee<j;ee+=s)(S=a[ee])<h&&(h=S),(I=a[ee+1])<f&&(f=I),S>v&&(v=S),I>x&&(x=I);z=(z=Math.max(v-h,x-f))!==0?32767/z:0}return lh(q,Y,s,h,f,z,0),Y}function Wb(a,n,s,h,f){var v,x;if(f===Fv(a,n,s,h)>0)for(v=n;v<s;v+=h)x=Zb(v,a[v],a[v+1],x);else for(v=s-h;v>=n;v-=h)x=Zb(v,a[v],a[v+1],x);return x&&Yf(x,x.next)&&(uh(x),x=x.next),x}function Zl(a,n){if(!a)return a;n||(n=a);var s,h=a;do if(s=!1,h.steiner||!Yf(h,h.next)&&Dn(h.prev,h,h.next)!==0)h=h.next;else{if(uh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function lh(a,n,s,h,f,v,x){if(a){!x&&v&&function($,j,q,Y){var ee=$;do ee.z===0&&(ee.z=Bv(ee.x,ee.y,j,q,Y)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==$);ee.prevZ.nextZ=null,ee.prevZ=null,function(le){var me,ve,Ae,we,Re,Ue,rt,It,Ot=1;do{for(ve=le,le=null,Re=null,Ue=0;ve;){for(Ue++,Ae=ve,rt=0,me=0;me<Ot&&(rt++,Ae=Ae.nextZ);me++);for(It=Ot;rt>0||It>0&&Ae;)rt!==0&&(It===0||!Ae||ve.z<=Ae.z)?(we=ve,ve=ve.nextZ,rt--):(we=Ae,Ae=Ae.nextZ,It--),Re?Re.nextZ=we:le=we,we.prevZ=Re,Re=we;ve=Ae}Re.nextZ=null,Ot*=2}while(Ue>1)}(ee)}(a,h,f,v);for(var S,I,z=a;a.prev!==a.next;)if(S=a.prev,I=a.next,v?Kz(a,h,f,v):Zz(a))n.push(S.i/s|0),n.push(a.i/s|0),n.push(I.i/s|0),uh(a),a=I.next,z=I.next;else if((a=I)===z){x?x===1?lh(a=Xz(Zl(a),n,s),n,s,h,f,v,2):x===2&&Jz(a,n,s,h,f,v):lh(Zl(a),n,s,h,f,v,1);break}}}function Zz(a){var n=a.prev,s=a,h=a.next;if(Dn(n,s,h)>=0)return!1;for(var f=n.x,v=s.x,x=h.x,S=n.y,I=s.y,z=h.y,$=f<v?f<x?f:x:v<x?v:x,j=S<I?S<z?S:z:I<z?I:z,q=f>v?f>x?f:x:v>x?v:x,Y=S>I?S>z?S:z:I>z?I:z,ee=h.next;ee!==n;){if(ee.x>=$&&ee.x<=q&&ee.y>=j&&ee.y<=Y&&Yc(f,S,v,I,x,z,ee.x,ee.y)&&Dn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Kz(a,n,s,h){var f=a.prev,v=a,x=a.next;if(Dn(f,v,x)>=0)return!1;for(var S=f.x,I=v.x,z=x.x,$=f.y,j=v.y,q=x.y,Y=S<I?S<z?S:z:I<z?I:z,ee=$<j?$<q?$:q:j<q?j:q,le=S>I?S>z?S:z:I>z?I:z,me=$>j?$>q?$:q:j>q?j:q,ve=Bv(Y,ee,n,s,h),Ae=Bv(le,me,n,s,h),we=a.prevZ,Re=a.nextZ;we&&we.z>=ve&&Re&&Re.z<=Ae;){if(we.x>=Y&&we.x<=le&&we.y>=ee&&we.y<=me&&we!==f&&we!==x&&Yc(S,$,I,j,z,q,we.x,we.y)&&Dn(we.prev,we,we.next)>=0||(we=we.prevZ,Re.x>=Y&&Re.x<=le&&Re.y>=ee&&Re.y<=me&&Re!==f&&Re!==x&&Yc(S,$,I,j,z,q,Re.x,Re.y)&&Dn(Re.prev,Re,Re.next)>=0))return!1;Re=Re.nextZ}for(;we&&we.z>=ve;){if(we.x>=Y&&we.x<=le&&we.y>=ee&&we.y<=me&&we!==f&&we!==x&&Yc(S,$,I,j,z,q,we.x,we.y)&&Dn(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Re&&Re.z<=Ae;){if(Re.x>=Y&&Re.x<=le&&Re.y>=ee&&Re.y<=me&&Re!==f&&Re!==x&&Yc(S,$,I,j,z,q,Re.x,Re.y)&&Dn(Re.prev,Re,Re.next)>=0)return!1;Re=Re.nextZ}return!0}function Xz(a,n,s){var h=a;do{var f=h.prev,v=h.next.next;!Yf(f,v)&&Gb(f,h,h.next,v)&&ch(f,v)&&ch(v,f)&&(n.push(f.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),uh(h),uh(h.next),h=a=v),h=h.next}while(h!==a);return Zl(h)}function Jz(a,n,s,h,f,v){var x=a;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&rM(x,S)){var I=qb(x,S);return x=Zl(x,x.next),I=Zl(I,I.next),lh(x,n,s,h,f,v,0),void lh(I,n,s,h,f,v,0)}S=S.next}x=x.next}while(x!==a)}function Yz(a,n){return a.x-n.x}function Qz(a,n){var s=function(f,v){var x,S=v,I=f.x,z=f.y,$=-1/0;do{if(z<=S.y&&z>=S.next.y&&S.next.y!==S.y){var j=S.x+(z-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(j<=I&&j>$&&($=j,x=S.x<S.next.x?S:S.next,j===I))return x}S=S.next}while(S!==v);if(!x)return null;var q,Y=x,ee=x.x,le=x.y,me=1/0;S=x;do I>=S.x&&S.x>=ee&&I!==S.x&&Yc(z<le?I:$,z,ee,le,z<le?$:I,z,S.x,S.y)&&(q=Math.abs(z-S.y)/(I-S.x),ch(S,f)&&(q<me||q===me&&(S.x>x.x||S.x===x.x&&eM(x,S)))&&(x=S,me=q)),S=S.next;while(S!==Y);return x}(a,n);if(!s)return n;var h=qb(s,a);return Zl(h,h.next),Zl(s,s.next)}function eM(a,n){return Dn(a.prev,a,n.prev)<0&&Dn(n.next,a,a.next)<0}function Bv(a,n,s,h,f){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*f|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function tM(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function Yc(a,n,s,h,f,v,x,S){return(f-x)*(n-S)>=(a-x)*(v-S)&&(a-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(v-S)>=(f-x)*(h-S)}function rM(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,h){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==h.i&&f.next.i!==h.i&&Gb(f,f.next,s,h))return!0;f=f.next}while(f!==s);return!1}(a,n)&&(ch(a,n)&&ch(n,a)&&function(s,h){var f=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do f.y>S!=f.next.y>S&&f.next.y!==f.y&&x<(f.next.x-f.x)*(S-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(a,n)&&(Dn(a.prev,a,n.prev)||Dn(a,n.prev,n))||Yf(a,n)&&Dn(a.prev,a,a.next)>0&&Dn(n.prev,n,n.next)>0)}function Dn(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function Yf(a,n){return a.x===n.x&&a.y===n.y}function Gb(a,n,s,h){var f=em(Dn(a,n,s)),v=em(Dn(a,n,h)),x=em(Dn(s,h,a)),S=em(Dn(s,h,n));return f!==v&&x!==S||!(f!==0||!Qf(a,s,n))||!(v!==0||!Qf(a,h,n))||!(x!==0||!Qf(s,a,h))||!(S!==0||!Qf(s,n,h))}function Qf(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function em(a){return a>0?1:a<0?-1:0}function ch(a,n){return Dn(a.prev,a,a.next)<0?Dn(a,n,a.next)>=0&&Dn(a,a.prev,n)>=0:Dn(a,n,a.prev)<0||Dn(a,a.next,n)<0}function qb(a,n){var s=new Ov(a.i,a.x,a.y),h=new Ov(n.i,n.x,n.y),f=a.next,v=n.prev;return a.next=n,n.prev=a,s.next=f,f.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function Zb(a,n,s,h){var f=new Ov(a,n,s);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function uh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Ov(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fv(a,n,s,h){for(var f=0,v=n,x=s-h;v<s;v+=h)f+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return f}$v.exports=Jf,$v.exports.default=Jf,Jf.deviation=function(a,n,s,h){var f=n&&n.length,v=Math.abs(Fv(a,0,f?n[0]*s:a.length,s));if(f)for(var x=0,S=n.length;x<S;x++)v-=Math.abs(Fv(a,n[x]*s,x<S-1?n[x+1]*s:a.length,s));var I=0;for(x=0;x<h.length;x+=3){var z=h[x]*s,$=h[x+1]*s,j=h[x+2]*s;I+=Math.abs((a[z]-a[j])*(a[$+1]-a[z+1])-(a[z]-a[$])*(a[j+1]-a[z+1]))}return v===0&&I===0?0:Math.abs((I-v)/v)},Jf.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,f=0;f<a.length;f++){for(var v=0;v<a[f].length;v++)for(var x=0;x<n;x++)s.vertices.push(a[f][v][x]);f>0&&s.holes.push(h+=a[f-1].length)}return s};var Kb=w($v.exports);function nM(a,n,s,h,f){Xb(a,n,s,h||a.length-1,f||iM)}function Xb(a,n,s,h,f){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,S=Math.log(v),I=.5*Math.exp(2*S/3),z=.5*Math.sqrt(S*I*(v-I)/v)*(x-v/2<0?-1:1);Xb(a,n,Math.max(s,Math.floor(n-x*I/v+z)),Math.min(h,Math.floor(n+(v-x)*I/v+z)),f)}var $=a[n],j=s,q=h;for(dh(a,s,n),f(a[h],$)>0&&dh(a,s,h);j<q;){for(dh(a,j,q),j++,q--;f(a[j],$)<0;)j++;for(;f(a[q],$)>0;)q--}f(a[s],$)===0?dh(a,s,q):dh(a,++q,h),q<=n&&(s=q+1),n<=q&&(h=q-1)}}function dh(a,n,s){var h=a[n];a[n]=a[s],a[s]=h}function iM(a,n){return a<n?-1:a>n?1:0}function Nv(a,n){const s=a.length;if(s<=1)return[a];const h=[];let f,v;for(let x=0;x<s;x++){const S=Te(a[x]);S!==0&&(a[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(f&&h.push(f),f=[a[x]]):f.push(a[x]))}if(f&&h.push(f),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(nM(h[x],n,1,h[x].length-1,oM),h[x]=h[x].slice(0,n));return h}function oM(a,n){return n.area-a.area}function jv(a,n,s){const h=s.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(f=!0);const S=x.constantOr(null);S&&(f=!0,h[S.to]=!0,h[S.from]=!0)}return f}function Vv(a,n,s,h,f){const v=f.patternDependencies;for(const x of n){const S=x.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let I=S.evaluate({zoom:h-1},s,{},f.availableImages),z=S.evaluate({zoom:h},s,{},f.availableImages),$=S.evaluate({zoom:h+1},s,{},f.availableImages);I=I&&I.name?I.name:I,z=z&&z.name?z.name:z,$=$&&$.name?$.name:$,v[I]=!0,v[z]=!0,v[$]=!0,s.patterns[x.id]={min:I,mid:z,max:$}}}return s}class Uv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new _r,this.indexArray=new ai,this.indexArray2=new Un,this.programConfigurations=new _a(n.layers,n.zoom),this.segments=new sn,this.segments2=new sn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=jv("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:S,id:I,index:z,sourceLayerIndex:$}of n){const j=this.layers[0]._featureFilter.needGeometry,q=ql(S,j);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),q,h))continue;const Y=v?f.evaluate(q,{},h,s.availableImages):void 0,ee={id:I,properties:S.properties,type:S.type,sourceLayerIndex:$,index:z,geometry:j?q.geometry:Gl(S),patterns:{},sortKey:Y};x.push(ee)}v&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:z,sourceLayerIndex:$}=S;if(this.hasPattern){const j=Vv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(S,I,z,h,{});s.featureIndex.insert(n[z].feature,I,z,$,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,qz),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,f,v){for(const x of Nv(s,500)){let S=0;for(const Y of x)S+=Y.length;const I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),z=I.vertexLength,$=[],j=[];for(const Y of x){if(Y.length===0)continue;Y!==x[0]&&j.push($.length/2);const ee=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),le=ee.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(le+Y.length-1,le),$.push(Y[0].x),$.push(Y[0].y);for(let me=1;me<Y.length;me++)this.layoutVertexArray.emplaceBack(Y[me].x,Y[me].y),this.indexArray2.emplaceBack(le+me-1,le+me),$.push(Y[me].x),$.push(Y[me].y);ee.vertexLength+=Y.length,ee.primitiveLength+=Y.length}const q=Kb($,j);for(let Y=0;Y<q.length;Y+=3)this.indexArray.emplaceBack(z+q[Y],z+q[Y+1],z+q[Y+2]);I.vertexLength+=S,I.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}let Jb,Yb;Dt("FillBucket",Uv,{omit:["layers","patternFeatures"]});var aM={get paint(){return Yb=Yb||new zn({"fill-antialias":new Ut(je.paint_fill["fill-antialias"]),"fill-opacity":new nr(je.paint_fill["fill-opacity"]),"fill-color":new nr(je.paint_fill["fill-color"]),"fill-outline-color":new nr(je.paint_fill["fill-outline-color"]),"fill-translate":new Ut(je.paint_fill["fill-translate"]),"fill-translate-anchor":new Ut(je.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ul(je.paint_fill["fill-pattern"])})},get layout(){return Jb=Jb||new zn({"fill-sort-key":new nr(je.layout_fill["fill-sort-key"])})}};class sM extends po{constructor(n){super(n,aM)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Uv(n)}queryRadius(){return Zf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S){return Ab(Kf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),f)}isTileClipped(){return!0}}const lM=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cM=gn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:uM}=lM;var Zs={},dM=T,Qb=Qc;function Qc(a,n,s,h,f){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=f,a.readFields(hM,this,n)}function hM(a,n,s){a==1?n.id=s.readVarint():a==2?function(h,f){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=f._keys[h.readVarint()],S=f._values[h.readVarint()];f.properties[x]=S}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function pM(a){for(var n,s,h=0,f=0,v=a.length,x=v-1;f<v;x=f++)h+=((s=a[x]).x-(n=a[f]).x)*(n.y+s.y);return h}Qc.types=["Unknown","Point","LineString","Polygon"],Qc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,h=1,f=0,v=0,x=0,S=[];a.pos<s;){if(f<=0){var I=a.readVarint();h=7&I,f=I>>3}if(f--,h===1||h===2)v+=a.readSVarint(),x+=a.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new dM(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Qc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,h=0,f=0,v=0,x=1/0,S=-1/0,I=1/0,z=-1/0;a.pos<n;){if(h<=0){var $=a.readVarint();s=7&$,h=$>>3}if(h--,s===1||s===2)(f+=a.readSVarint())<x&&(x=f),f>S&&(S=f),(v+=a.readSVarint())<I&&(I=v),v>z&&(z=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,S,z]},Qc.prototype.toGeoJSON=function(a,n,s){var h,f,v=this.extent*Math.pow(2,s),x=this.extent*a,S=this.extent*n,I=this.loadGeometry(),z=Qc.types[this.type];function $(Y){for(var ee=0;ee<Y.length;ee++){var le=Y[ee];Y[ee]=[360*(le.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(h=0;h<I.length;h++)j[h]=I[h][0];$(I=j);break;case 2:for(h=0;h<I.length;h++)$(I[h]);break;case 3:for(I=function(Y){var ee=Y.length;if(ee<=1)return[Y];for(var le,me,ve=[],Ae=0;Ae<ee;Ae++){var we=pM(Y[Ae]);we!==0&&(me===void 0&&(me=we<0),me===we<0?(le&&ve.push(le),le=[Y[Ae]]):le.push(Y[Ae]))}return le&&ve.push(le),ve}(I),h=0;h<I.length;h++)for(f=0;f<I[h].length;f++)$(I[h][f])}I.length===1?I=I[0]:z="Multi"+z;var q={type:"Feature",geometry:{type:z,coordinates:I},properties:this.properties};return"id"in this&&(q.id=this.id),q};var fM=Qb,ew=tw;function tw(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(mM,this,n),this.length=this._features.length}function mM(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(h){for(var f=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(s))}tw.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new fM(this._pbf,n,this.extent,this._keys,this._values)};var gM=ew;function yM(a,n,s){if(a===3){var h=new gM(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Zs.VectorTile=function(a,n){this.layers=a.readFields(yM,{},n)},Zs.VectorTileFeature=Qb,Zs.VectorTileLayer=ew;const vM=Zs.VectorTileFeature.types,Hv=Math.pow(2,13);function hh(a,n,s,h,f,v,x,S){a.emplaceBack(n,s,2*Math.floor(h*Hv)+x,f*Hv*2,v*Hv*2,Math.round(S))}class Wv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new vt,this.centroidVertexArray=new dt,this.indexArray=new ai,this.programConfigurations=new _a(n.layers,n.zoom),this.segments=new sn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=jv("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:S}of n){const I=this.layers[0]._featureFilter.needGeometry,z=ql(f,I);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),z,h))continue;const $={id:v,sourceLayerIndex:S,index:x,geometry:I?z.geometry:Gl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Vv("fill-extrusion",this.layers,$,this.zoom,s)):this.addFeature($,$.geometry,x,h,{}),s.featureIndex.insert(f,$.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uM),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,cM.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,f,v){const x={x:0,y:0,vertexCount:0};for(const S of Nv(s,500)){let I=0;for(const ee of S)I+=ee.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of S){if(ee.length===0||xM(ee))continue;let le=0;for(let me=0;me<ee.length;me++){const ve=ee[me];if(me>=1){const Ae=ee[me-1];if(!_M(ve,Ae)){z.vertexLength+4>sn.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const we=ve.sub(Ae)._perp()._unit(),Re=Ae.dist(ve);le+Re>32768&&(le=0),hh(this.layoutVertexArray,ve.x,ve.y,we.x,we.y,0,0,le),hh(this.layoutVertexArray,ve.x,ve.y,we.x,we.y,0,1,le),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2,le+=Re,hh(this.layoutVertexArray,Ae.x,Ae.y,we.x,we.y,0,0,le),hh(this.layoutVertexArray,Ae.x,Ae.y,we.x,we.y,0,1,le),x.x+=2*Ae.x,x.y+=2*Ae.y,x.vertexCount+=2;const Ue=z.vertexLength;this.indexArray.emplaceBack(Ue,Ue+2,Ue+1),this.indexArray.emplaceBack(Ue+1,Ue+2,Ue+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+I>sn.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),vM[n.type]!=="Polygon")continue;const $=[],j=[],q=z.vertexLength;for(const ee of S)if(ee.length!==0){ee!==S[0]&&j.push($.length/2);for(let le=0;le<ee.length;le++){const me=ee[le];hh(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),x.x+=me.x,x.y+=me.y,x.vertexCount+=1,$.push(me.x),$.push(me.y)}}const Y=Kb($,j);for(let ee=0;ee<Y.length;ee+=3)this.indexArray.emplaceBack(q+Y[ee],q+Y[ee+2],q+Y[ee+1]);z.primitiveLength+=Y.length/3,z.vertexLength+=I}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}function _M(a,n){return a.x===n.x&&(a.x<0||a.x>Bn)||a.y===n.y&&(a.y<0||a.y>Bn)}function xM(a){return a.every(n=>n.x<0)||a.every(n=>n.x>Bn)||a.every(n=>n.y<0)||a.every(n=>n.y>Bn)}let rw;Dt("FillExtrusionBucket",Wv,{omit:["layers","features"]});var bM={get paint(){return rw=rw||new zn({"fill-extrusion-opacity":new Ut(je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nr(je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ut(je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ut(je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ul(je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nr(je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nr(je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ut(je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class wM extends po{constructor(n){super(n,bM)}createBucket(n){return new Wv(n)}queryRadius(){return Zf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,f,v,x,S,I){const z=Kf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),$=this.paint.get("fill-extrusion-height").evaluate(s,h),j=this.paint.get("fill-extrusion-base").evaluate(s,h),q=function(ee,le,me,ve){const Ae=[];for(const we of ee){const Re=[we.x,we.y,0,1];Xf(Re,Re,le),Ae.push(new M(Re[0]/Re[3],Re[1]/Re[3]))}return Ae}(z,I),Y=function(ee,le,me,ve){const Ae=[],we=[],Re=ve[8]*le,Ue=ve[9]*le,rt=ve[10]*le,It=ve[11]*le,Ot=ve[8]*me,Ct=ve[9]*me,_t=ve[10]*me,ft=ve[11]*me;for(const Rt of ee){const gt=[],ct=[];for(const Xt of Rt){const jt=Xt.x,gr=Xt.y,ln=ve[0]*jt+ve[4]*gr+ve[12],hn=ve[1]*jt+ve[5]*gr+ve[13],Gn=ve[2]*jt+ve[6]*gr+ve[14],mo=ve[3]*jt+ve[7]*gr+ve[15],Oi=Gn+rt,On=mo+It,li=ln+Ot,fi=hn+Ct,Fi=Gn+_t,Ni=mo+ft,qn=new M((ln+Re)/On,(hn+Ue)/On);qn.z=Oi/On,gt.push(qn);const Zn=new M(li/Ni,fi/Ni);Zn.z=Fi/Ni,ct.push(Zn)}Ae.push(gt),we.push(ct)}return[Ae,we]}(f,j,$,I);return function(ee,le,me){let ve=1/0;Ab(me,le)&&(ve=nw(me,le[0]));for(let Ae=0;Ae<le.length;Ae++){const we=le[Ae],Re=ee[Ae];for(let Ue=0;Ue<we.length-1;Ue++){const rt=we[Ue],It=[rt,we[Ue+1],Re[Ue+1],Re[Ue],rt];Db(me,It)&&(ve=Math.min(ve,nw(me,It)))}}return ve!==1/0&&ve}(Y[0],Y[1],q)}}function ph(a,n){return a.x*n.x+a.y*n.y}function nw(a,n){if(a.length===1){let s=0;const h=n[s++];let f;for(;!f||h.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const v=n[s],x=a[0],S=f.sub(h),I=v.sub(h),z=x.sub(h),$=ph(S,S),j=ph(S,I),q=ph(I,I),Y=ph(z,S),ee=ph(z,I),le=$*q-j*j,me=(q*Y-j*ee)/le,ve=($*ee-j*Y)/le,Ae=h.z*(1-me-ve)+f.z*me+v.z*ve;if(isFinite(Ae))return Ae}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const SM=gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:CM}=SM,kM=gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:IM}=kM,TM=Zs.VectorTileFeature.types,PM=Math.cos(Math.PI/180*37.5),iw=Math.pow(2,14)/.5;class Gv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ir,this.layoutVertexArray2=new Nt,this.indexArray=new ai,this.programConfigurations=new _a(n.layers,n.zoom),this.segments=new sn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=jv("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:S,id:I,index:z,sourceLayerIndex:$}of n){const j=this.layers[0]._featureFilter.needGeometry,q=ql(S,j);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),q,h))continue;const Y=v?f.evaluate(q,{},h):void 0,ee={id:I,properties:S.properties,type:S.type,sourceLayerIndex:$,index:z,geometry:j?q.geometry:Gl(S),patterns:{},sortKey:Y};x.push(ee)}v&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:z,sourceLayerIndex:$}=S;if(this.hasPattern){const j=Vv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(S,I,z,h,{});s.featureIndex.insert(n[z].feature,I,z,$,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,IM)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,CM),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,f,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),I=x.get("line-cap"),z=x.get("line-miter-limit"),$=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const j of s)this.addLine(j,n,S,I,z,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}addLine(n,s,h,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=TM[s.type]==="Polygon";let I=n.length;for(;I>=2&&n[I-1].equals(n[I-2]);)I--;let z=0;for(;z<I-1&&n[z].equals(n[z+1]);)z++;if(I<(S?3:2))return;h==="bevel"&&(v=1.05);const $=this.overscaling<=16?15*Bn/(512*this.overscaling):0,j=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let q,Y,ee,le,me;this.e1=this.e2=-1,S&&(q=n[I-2],me=n[z].sub(q)._unit()._perp());for(let ve=z;ve<I;ve++){if(ee=ve===I-1?S?n[z+1]:void 0:n[ve+1],ee&&n[ve].equals(ee))continue;me&&(le=me),q&&(Y=q),q=n[ve],me=ee?ee.sub(q)._unit()._perp():le,le=le||me;let Ae=le.add(me);Ae.x===0&&Ae.y===0||Ae._unit();const we=le.x*me.x+le.y*me.y,Re=Ae.x*me.x+Ae.y*me.y,Ue=Re!==0?1/Re:1/0,rt=2*Math.sqrt(2-2*Re),It=Re<PM&&Y&&ee,Ot=le.x*me.y-le.y*me.x>0;if(It&&ve>z){const ft=q.dist(Y);if(ft>2*$){const Rt=q.sub(q.sub(Y)._mult($/ft)._round());this.updateDistance(Y,Rt),this.addCurrentVertex(Rt,le,0,0,j),Y=Rt}}const Ct=Y&&ee;let _t=Ct?h:S?"butt":f;if(Ct&&_t==="round"&&(Ue<x?_t="miter":Ue<=2&&(_t="fakeround")),_t==="miter"&&Ue>v&&(_t="bevel"),_t==="bevel"&&(Ue>2&&(_t="flipbevel"),Ue<v&&(_t="miter")),Y&&this.updateDistance(Y,q),_t==="miter")Ae._mult(Ue),this.addCurrentVertex(q,Ae,0,0,j);else if(_t==="flipbevel"){if(Ue>100)Ae=me.mult(-1);else{const ft=Ue*le.add(me).mag()/le.sub(me).mag();Ae._perp()._mult(ft*(Ot?-1:1))}this.addCurrentVertex(q,Ae,0,0,j),this.addCurrentVertex(q,Ae.mult(-1),0,0,j)}else if(_t==="bevel"||_t==="fakeround"){const ft=-Math.sqrt(Ue*Ue-1),Rt=Ot?ft:0,gt=Ot?0:ft;if(Y&&this.addCurrentVertex(q,le,Rt,gt,j),_t==="fakeround"){const ct=Math.round(180*rt/Math.PI/20);for(let Xt=1;Xt<ct;Xt++){let jt=Xt/ct;if(jt!==.5){const ln=jt-.5;jt+=jt*ln*(jt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*ln*ln+(.848013+we*(.215638*we-1.06021)))}const gr=me.sub(le)._mult(jt)._add(le)._unit()._mult(Ot?-1:1);this.addHalfVertex(q,gr.x,gr.y,!1,Ot,0,j)}}ee&&this.addCurrentVertex(q,me,-Rt,-gt,j)}else if(_t==="butt")this.addCurrentVertex(q,Ae,0,0,j);else if(_t==="square"){const ft=Y?1:-1;this.addCurrentVertex(q,Ae,ft,ft,j)}else _t==="round"&&(Y&&(this.addCurrentVertex(q,le,0,0,j),this.addCurrentVertex(q,le,1,1,j,!0)),ee&&(this.addCurrentVertex(q,me,-1,-1,j,!0),this.addCurrentVertex(q,me,0,0,j)));if(It&&ve<I-1){const ft=q.dist(ee);if(ft>2*$){const Rt=q.add(ee.sub(q)._mult($/ft)._round());this.updateDistance(q,Rt),this.addCurrentVertex(Rt,me,0,0,j),q=Rt}}}}addCurrentVertex(n,s,h,f,v,x=!1){const S=s.y*f-s.x,I=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,S,I,x,!0,-f,v),this.distance>iw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,f,v,x))}addHalfVertex({x:n,y:s},h,f,v,x,S,I){const z=.5*(this.lineClips?this.scaledDistance*(iw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(S===0?0:S<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const $=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),I.primitiveLength++),x?this.e2=$:this.e1=$}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let ow,aw;Dt("LineBucket",Gv,{omit:["layers","patternFeatures"]});var sw={get paint(){return aw=aw||new zn({"line-opacity":new nr(je.paint_line["line-opacity"]),"line-color":new nr(je.paint_line["line-color"]),"line-translate":new Ut(je.paint_line["line-translate"]),"line-translate-anchor":new Ut(je.paint_line["line-translate-anchor"]),"line-width":new nr(je.paint_line["line-width"]),"line-gap-width":new nr(je.paint_line["line-gap-width"]),"line-offset":new nr(je.paint_line["line-offset"]),"line-blur":new nr(je.paint_line["line-blur"]),"line-dasharray":new Xd(je.paint_line["line-dasharray"]),"line-pattern":new Ul(je.paint_line["line-pattern"]),"line-gradient":new Jd(je.paint_line["line-gradient"])})},get layout(){return ow=ow||new zn({"line-cap":new Ut(je.layout_line["line-cap"]),"line-join":new nr(je.layout_line["line-join"]),"line-miter-limit":new Ut(je.layout_line["line-miter-limit"]),"line-round-limit":new Ut(je.layout_line["line-round-limit"]),"line-sort-key":new nr(je.layout_line["line-sort-key"])})}};class EM extends nr{possiblyEvaluate(n,s){return s=new an(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,f){return s=Z({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,f)}}let tm;class zM extends po{constructor(n){super(n,sw),this.gradientVersion=0,tm||(tm=new EM(sw.paint.properties["line-width"].specification),tm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=tm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Gv(n)}queryRadius(n){const s=n,h=lw(oh("line-width",this,s),oh("line-gap-width",this,s)),f=oh("line-offset",this,s);return h/2+Math.abs(f)+Zf(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S){const I=Kf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),z=S/2*lw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),$=this.paint.get("line-offset").evaluate(s,h);return $&&(f=function(j,q){const Y=[];for(let ee=0;ee<j.length;ee++){const le=j[ee],me=[];for(let ve=0;ve<le.length;ve++){const Ae=le[ve-1],we=le[ve],Re=le[ve+1],Ue=ve===0?new M(0,0):we.sub(Ae)._unit()._perp(),rt=ve===le.length-1?new M(0,0):Re.sub(we)._unit()._perp(),It=Ue._add(rt)._unit(),Ot=It.x*rt.x+It.y*rt.y;Ot!==0&&It._mult(1/Ot),me.push(It._mult(q)._add(we))}Y.push(me)}return Y}(f,$*S)),function(j,q,Y){for(let ee=0;ee<q.length;ee++){const le=q[ee];if(j.length>=3){for(let me=0;me<le.length;me++)if(Xc(j,le[me]))return!0}if($z(j,le,Y))return!0}return!1}(I,f,z)}isTileClipped(){return!0}}function lw(a,n){return n>0?n+2*a:a}const MM=gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),DM=gn([{name:"a_projected_pos",components:3,type:"Float32"}],4);gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const AM=gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cw=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),RM=gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function LM(a,n,s){return a.sections.forEach(h=>{h.text=function(f,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?f=f.toLocaleUpperCase():S==="lowercase"&&(f=f.toLocaleLowerCase()),Yi.applyArabicShaping&&(f=Yi.applyArabicShaping(f)),f}(h.text,n,s)}),a}gn([{name:"triangle",components:3,type:"Uint16"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gn([{type:"Float32",name:"offsetX"}]),gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const fh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Wn=24,uw=Zr,dw=function(a,n,s,h,f){var v,x,S=8*f-h-1,I=(1<<S)-1,z=I>>1,$=-7,j=f-1,q=-1,Y=a[n+j];for(j+=q,v=Y&(1<<-$)-1,Y>>=-$,$+=S;$>0;v=256*v+a[n+j],j+=q,$-=8);for(x=v&(1<<-$)-1,v>>=-$,$+=h;$>0;x=256*x+a[n+j],j+=q,$-=8);if(v===0)v=1-z;else{if(v===I)return x?NaN:1/0*(Y?-1:1);x+=Math.pow(2,h),v-=z}return(Y?-1:1)*x*Math.pow(2,v-h)},hw=function(a,n,s,h,f,v){var x,S,I,z=8*v-f-1,$=(1<<z)-1,j=$>>1,q=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=0,ee=1,le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=$):(x=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-x))<1&&(x--,I*=2),(n+=x+j>=1?q/I:q*Math.pow(2,1-j))*I>=2&&(x++,I/=2),x+j>=$?(S=0,x=$):x+j>=1?(S=(n*I-1)*Math.pow(2,f),x+=j):(S=n*Math.pow(2,j-1)*Math.pow(2,f),x=0));f>=8;a[s+Y]=255&S,Y+=ee,S/=256,f-=8);for(x=x<<f|S,z+=f;z>0;a[s+Y]=255&x,Y+=ee,x/=256,z-=8);a[s+Y-ee]|=128*le};function Zr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var qv=4294967296,pw=1/qv,fw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ms(a){return a.type===Zr.Bytes?a.readVarint()+a.pos:a.pos+1}function eu(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function mw(a,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var f=s.pos-1;f>=a;f--)s.buf[f+h]=s.buf[f]}function $M(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function BM(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function OM(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function FM(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function NM(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function jM(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function VM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function UM(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function HM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function rm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function tu(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function gw(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Zr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),f=h>>3,v=this.pos;this.type=7&h,a(f,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=rm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=gw(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=rm(this.buf,this.pos)+rm(this.buf,this.pos+4)*qv;return this.pos+=8,a},readSFixed64:function(){var a=rm(this.buf,this.pos)+gw(this.buf,this.pos+4)*qv;return this.pos+=8,a},readFloat:function(){var a=dw(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=dw(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(f,v,x){var S,I,z=x.buf;if(S=(112&(I=z[x.pos++]))>>4,I<128||(S|=(127&(I=z[x.pos++]))<<3,I<128)||(S|=(127&(I=z[x.pos++]))<<10,I<128)||(S|=(127&(I=z[x.pos++]))<<17,I<128)||(S|=(127&(I=z[x.pos++]))<<24,I<128)||(S|=(1&(I=z[x.pos++]))<<31,I<128))return eu(f,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&fw?function(s,h,f){return fw.decode(s.subarray(h,f))}(this.buf,n,a):function(s,h,f){for(var v="",x=h;x<f;){var S,I,z,$=s[x],j=null,q=$>239?4:$>223?3:$>191?2:1;if(x+q>f)break;q===1?$<128&&(j=$):q===2?(192&(S=s[x+1]))==128&&(j=(31&$)<<6|63&S)<=127&&(j=null):q===3?(I=s[x+2],(192&(S=s[x+1]))==128&&(192&I)==128&&((j=(15&$)<<12|(63&S)<<6|63&I)<=2047||j>=55296&&j<=57343)&&(j=null)):q===4&&(I=s[x+2],z=s[x+3],(192&(S=s[x+1]))==128&&(192&I)==128&&(192&z)==128&&((j=(15&$)<<18|(63&S)<<12|(63&I)<<6|63&z)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,q=1):j>65535&&(j-=65536,v+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),v+=String.fromCharCode(j),x+=q}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Zr.Bytes)return a.push(this.readVarint(n));var s=ms(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Zr.Bytes)return a.push(this.readSVarint());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Zr.Bytes)return a.push(this.readBoolean());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Zr.Bytes)return a.push(this.readFloat());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Zr.Bytes)return a.push(this.readDouble());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Zr.Bytes)return a.push(this.readFixed32());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Zr.Bytes)return a.push(this.readSFixed32());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Zr.Bytes)return a.push(this.readFixed64());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Zr.Bytes)return a.push(this.readSFixed64());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Zr.Fixed32)this.pos+=4;else{if(n!==Zr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),tu(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),tu(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),tu(this.buf,-1&a,this.pos),tu(this.buf,Math.floor(a*pw),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),tu(this.buf,-1&a,this.pos),tu(this.buf,Math.floor(a*pw),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var h,f;if(n>=0?(h=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,f,v){for(var x,S,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!S){x>56319||I+1===f.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&mw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),hw(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),hw(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var h=this.pos-s;h>=128&&mw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,s){this.writeTag(a,Zr.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,$M,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,BM,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,NM,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,OM,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,FM,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,jM,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,VM,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,UM,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,HM,n)},writeBytesField:function(a,n){this.writeTag(a,Zr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Zr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Zr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Zr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Zr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Zr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Zr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Zr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Zr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Zr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var Zv=w(uw);const Kv=3;function WM(a,n,s){a===1&&s.readMessage(GM,n)}function GM(a,n,s){if(a===3){const{id:h,bitmap:f,width:v,height:x,left:S,top:I,advance:z}=s.readMessage(qM,{});n.push({id:h,bitmap:new sh({width:v+2*Kv,height:x+2*Kv},f),metrics:{width:v,height:x,left:S,top:I,advance:z}})}}function qM(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}const yw=Kv;function vw(a){let n=0,s=0;for(const x of a)n+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,v=0;for(const x of a)for(let S=h.length-1;S>=0;S--){const I=h[S];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===I.w&&x.h===I.h){const z=h.pop();S<h.length&&(h[S]=z)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(h.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const eo=1;class Xv{constructor(n,{pixelRatio:s,version:h,stretchX:f,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+eo,this.paddedRect.y+eo]}get br(){return[this.paddedRect.x+this.paddedRect.w-eo,this.paddedRect.y+this.paddedRect.h-eo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*eo)/this.pixelRatio,(this.paddedRect.h-2*eo)/this.pixelRatio]}}class _w{constructor(n,s){const h={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,f,v);const{w:x,h:S}=vw(v),I=new Io({width:x||1,height:S||1});for(const z in n){const $=n[z],j=h[z].paddedRect;Io.copy($.data,I,{x:0,y:0},{x:j.x+eo,y:j.y+eo},$.data)}for(const z in s){const $=s[z],j=f[z].paddedRect,q=j.x+eo,Y=j.y+eo,ee=$.data.width,le=$.data.height;Io.copy($.data,I,{x:0,y:0},{x:q,y:Y},$.data),Io.copy($.data,I,{x:0,y:le-1},{x:q,y:Y-1},{width:ee,height:1}),Io.copy($.data,I,{x:0,y:0},{x:q,y:Y+le},{width:ee,height:1}),Io.copy($.data,I,{x:ee-1,y:0},{x:q-1,y:Y},{width:1,height:le}),Io.copy($.data,I,{x:0,y:0},{x:q+ee,y:Y},{width:1,height:le})}this.image=I,this.iconPositions=h,this.patternPositions=f}addImages(n,s,h){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*eo,h:v.data.height+2*eo};h.push(x),s[f]=new Xv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,v]=n.tl;h.update(s.data,void 0,{x:f,y:v})}}var Ks;Dt("ImagePosition",Xv),Dt("ImageAtlas",_w),l.ai=void 0,(Ks=l.ai||(l.ai={}))[Ks.none=0]="none",Ks[Ks.horizontal=1]="horizontal",Ks[Ks.vertical=2]="vertical",Ks[Ks.horizontalOnly=3]="horizontalOnly";const mh=-17;class gh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new gh;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new gh;return s.imageName=n,s}}class ru{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new ru;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const f=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=f&&Bf(f)&&!fh[n[h+1]]||v&&Bf(v)&&!fh[n[h-1]]||!fh[n[h]]?n[h]:fh[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&im[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&im[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new ru;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(gh.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Ye("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(gh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function nm(a,n,s,h,f,v,x,S,I,z,$,j,q,Y,ee,le){const me=ru.fromFeature(a,f);let ve;j===l.ai.vertical&&me.verticalizePunctuation();const{processBidirectionalText:Ae,processStyledBidirectionalText:we}=Yi;if(Ae&&me.sections.length===1){ve=[];const rt=Ae(me.toString(),Jv(me,z,v,n,h,Y,ee));for(const It of rt){const Ot=new ru;Ot.text=It,Ot.sections=me.sections;for(let Ct=0;Ct<It.length;Ct++)Ot.sectionIndex.push(0);ve.push(Ot)}}else if(we){ve=[];const rt=we(me.text,me.sectionIndex,Jv(me,z,v,n,h,Y,ee));for(const It of rt){const Ot=new ru;Ot.text=It[0],Ot.sectionIndex=It[1],Ot.sections=me.sections,ve.push(Ot)}}else ve=function(rt,It){const Ot=[],Ct=rt.text;let _t=0;for(const ft of It)Ot.push(rt.substring(_t,ft)),_t=ft;return _t<Ct.length&&Ot.push(rt.substring(_t,Ct.length)),Ot}(me,Jv(me,z,v,n,h,Y,ee));const Re=[],Ue={positionedLines:Re,text:me.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(rt,It,Ot,Ct,_t,ft,Rt,gt,ct,Xt,jt,gr){let ln=0,hn=mh,Gn=0,mo=0;const Oi=gt==="right"?1:gt==="left"?0:.5;let On=0;for(const qn of _t){qn.trim();const Zn=qn.getMaxScale(),wi=(Zn-1)*Wn,ji={positionedGlyphs:[],lineOffset:0};rt.positionedLines[On]=ji;const Si=ji.positionedGlyphs;let to=0;if(!qn.length()){hn+=ft,++On;continue}for(let Kn=0;Kn<qn.length();Kn++){const br=qn.getSection(Kn),Ci=qn.getSectionIndex(Kn),mi=qn.getCharCode(Kn);let Xn=0,Jo=null,xa=null,ba=null,gs=Wn;const Yo=!(ct===l.ai.horizontal||!jt&&!Vd(mi)||jt&&(im[mi]||(li=mi,kt.Arabic(li)||kt["Arabic Supplement"](li)||kt["Arabic Extended-A"](li)||kt["Arabic Presentation Forms-A"](li)||kt["Arabic Presentation Forms-B"](li))));if(br.imageName){const Po=Ct[br.imageName];if(!Po)continue;ba=br.imageName,rt.iconsInText=rt.iconsInText||!0,xa=Po.paddedRect;const no=Po.displaySize;br.scale=br.scale*Wn/gr,Jo={width:no[0],height:no[1],left:eo,top:-yw,advance:Yo?no[1]:no[0]},Xn=wi+(Wn-no[1]*br.scale),gs=Jo.advance;const ys=Yo?no[0]*br.scale-Wn*Zn:no[1]*br.scale-Wn*Zn;ys>0&&ys>to&&(to=ys)}else{const Po=Ot[br.fontStack],no=Po&&Po[mi];if(no&&no.rect)xa=no.rect,Jo=no.metrics;else{const ys=It[br.fontStack],bh=ys&&ys[mi];if(!bh)continue;Jo=bh.metrics}Xn=(Zn-br.scale)*Wn}Yo?(rt.verticalizable=!0,Si.push({glyph:mi,imageName:ba,x:ln,y:hn+Xn,vertical:Yo,scale:br.scale,fontStack:br.fontStack,sectionIndex:Ci,metrics:Jo,rect:xa}),ln+=gs*br.scale+Xt):(Si.push({glyph:mi,imageName:ba,x:ln,y:hn+Xn,vertical:Yo,scale:br.scale,fontStack:br.fontStack,sectionIndex:Ci,metrics:Jo,rect:xa}),ln+=Jo.advance*br.scale+Xt)}Si.length!==0&&(Gn=Math.max(ln-Xt,Gn),XM(Si,0,Si.length-1,Oi,to)),ln=0;const ro=ft*Zn+to;ji.lineOffset=Math.max(to,wi),hn+=ro,mo=Math.max(ro,mo),++On}var li;const fi=hn-mh,{horizontalAlign:Fi,verticalAlign:Ni}=Yv(Rt);(function(qn,Zn,wi,ji,Si,to,ro,Kn,br){const Ci=(Zn-wi)*Si;let mi=0;mi=to!==ro?-Kn*ji-mh:(-ji*br+.5)*ro;for(const Xn of qn)for(const Jo of Xn.positionedGlyphs)Jo.x+=Ci,Jo.y+=mi})(rt.positionedLines,Oi,Fi,Ni,Gn,mo,ft,fi,_t.length),rt.top+=-Ni*fi,rt.bottom=rt.top+fi,rt.left+=-Fi*Gn,rt.right=rt.left+Gn}(Ue,n,s,h,ve,x,S,I,j,z,q,le),!function(rt){for(const It of rt)if(It.positionedGlyphs.length!==0)return!1;return!0}(Re)&&Ue}const im={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ZM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xw(a,n,s,h,f,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Wn/v+f:0}{const x=s[n.fontStack],S=x&&x[a];return S?S.metrics.advance*n.scale+f:0}}function bw(a,n,s,h){const f=Math.pow(a-n,2);return h?a<n?f/2:2*f:f+Math.abs(s)*s}function KM(a,n,s){let h=0;return a===10&&(h-=1e4),s&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function ww(a,n,s,h,f,v){let x=null,S=bw(n,s,f,v);for(const I of h){const z=bw(n-I.x,s,f,v)+I.badness;z<=S&&(x=I,S=z)}return{index:a,x:n,priorBreak:x,badness:S}}function Sw(a){return a?Sw(a.priorBreak).concat(a.index):[]}function Jv(a,n,s,h,f,v,x){if(v!=="point")return[];if(!a)return[];const S=[],I=function(q,Y,ee,le,me,ve){let Ae=0;for(let we=0;we<q.length();we++){const Re=q.getSection(we);Ae+=xw(q.getCharCode(we),Re,le,me,Y,ve)}return Ae/Math.max(1,Math.ceil(Ae/ee))}(a,n,s,h,f,x),z=a.text.indexOf("")>=0;let $=0;for(let q=0;q<a.length();q++){const Y=a.getSection(q),ee=a.getCharCode(q);if(im[ee]||($+=xw(ee,Y,h,f,n,x)),q<a.length()-1){const le=!((j=ee)<11904||!(kt["Bopomofo Extended"](j)||kt.Bopomofo(j)||kt["CJK Compatibility Forms"](j)||kt["CJK Compatibility Ideographs"](j)||kt["CJK Compatibility"](j)||kt["CJK Radicals Supplement"](j)||kt["CJK Strokes"](j)||kt["CJK Symbols and Punctuation"](j)||kt["CJK Unified Ideographs Extension A"](j)||kt["CJK Unified Ideographs"](j)||kt["Enclosed CJK Letters and Months"](j)||kt["Halfwidth and Fullwidth Forms"](j)||kt.Hiragana(j)||kt["Ideographic Description Characters"](j)||kt["Kangxi Radicals"](j)||kt["Katakana Phonetic Extensions"](j)||kt.Katakana(j)||kt["Vertical Forms"](j)||kt["Yi Radicals"](j)||kt["Yi Syllables"](j)));(ZM[ee]||le||Y.imageName)&&S.push(ww(q+1,$,I,S,KM(ee,a.getCharCode(q+1),le&&z),!1))}}var j;return Sw(ww(a.length(),$,I,S,0,!0))}function Yv(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function XM(a,n,s,h,f){if(!h&&!f)return;const v=a[s],x=(a[s].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=s;S++)a[S].x-=x,a[S].y+=f}function JM(a,n,s){const{horizontalAlign:h,verticalAlign:f}=Yv(s),v=n[0]-a.displaySize[0]*h,x=n[1]-a.displaySize[1]*f;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function Cw(a,n,s,h,f,v){const x=a.image;let S;if(x.content){const me=x.content,ve=x.pixelRatio||1;S=[me[0]/ve,me[1]/ve,x.displaySize[0]-me[2]/ve,x.displaySize[1]-me[3]/ve]}const I=n.left*v,z=n.right*v;let $,j,q,Y;s==="width"||s==="both"?(Y=f[0]+I-h[3],j=f[0]+z+h[1]):(Y=f[0]+(I+z-x.displaySize[0])/2,j=Y+x.displaySize[0]);const ee=n.top*v,le=n.bottom*v;return s==="height"||s==="both"?($=f[1]+ee-h[0],q=f[1]+le+h[2]):($=f[1]+(ee+le-x.displaySize[1])/2,q=$+x.displaySize[1]),{image:x,top:$,right:j,bottom:q,left:Y,collisionPadding:S}}const yh=255,Ha=128,Xs=yh*Ha;function kw(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new an(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=s;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const S=h[v],I=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:S,maxZoom:I,minSize:s.evaluate(new an(S)),maxSize:s.evaluate(new an(I)),interpolationType:f}}}function Qv(a,n,s){let h="never";const f=a.get(n);return f?h=f:a.get(s)&&(h="always"),h}const YM=Zs.VectorTileFeature.types,QM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function om(a,n,s,h,f,v,x,S,I,z,$,j,q){const Y=S?Math.min(Xs,Math.round(S[0])):0,ee=S?Math.min(Xs,Math.round(S[1])):0;a.emplaceBack(n,s,Math.round(32*h),Math.round(32*f),v,x,(Y<<1)+(I?1:0),ee,16*z,16*$,256*j,256*q)}function e0(a,n,s){a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s)}function eD(a){for(const n of a.sections)if(Iv(n.text))return!0;return!1}class t0{constructor(n){this.layoutVertexArray=new yr,this.indexArray=new ai,this.programConfigurations=n,this.segments=new sn,this.dynamicLayoutVertexArray=new pr,this.opacityVertexArray=new xr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Pe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,MM.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,DM.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,QM,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dt("SymbolBuffers",t0);class r0{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new sn,this.collisionVertexArray=new en}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,AM.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dt("CollisionBuffers",r0);class nu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Av([]),this.placementViewportMatrix=Av([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kw(this.zoom,s["text-size"]),this.iconSizeData=kw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Qv(h,"text-overlap","text-allow-overlap")!=="never"||Qv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new t0(new _a(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new t0(new _a(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new De,this.lineVertexArray=new He,this.symbolInstances=new ge,this.textAnchorOffsets=new tt}calculateGlyphDependencies(n,s,h,f,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||f)&&v){const S=fh[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const f=this.layers[0],v=f.layout,x=v.get("text-font"),S=v.get("text-field"),I=v.get("icon-image"),z=(S.value.kind!=="constant"||S.value.value instanceof Br&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),$=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!z&&!$)return;const q=s.iconDependencies,Y=s.glyphDependencies,ee=s.availableImages,le=new an(this.zoom);for(const{feature:me,id:ve,index:Ae,sourceLayerIndex:we}of n){const Re=f._featureFilter.needGeometry,Ue=ql(me,Re);if(!f._featureFilter.filter(le,Ue,h))continue;let rt,It;if(Re||(Ue.geometry=Gl(me)),z){const Ct=f.getValueAndResolveTokens("text-field",Ue,h,ee),_t=Br.factory(Ct);eD(_t)&&(this.hasRTLText=!0),(!this.hasRTLText||Zd()==="unavailable"||this.hasRTLText&&Yi.isParsed())&&(rt=LM(_t,f,Ue))}if($){const Ct=f.getValueAndResolveTokens("icon-image",Ue,h,ee);It=Ct instanceof fr?Ct:fr.fromString(Ct)}if(!rt&&!It)continue;const Ot=this.sortFeaturesByKey?j.evaluate(Ue,{},h):void 0;if(this.features.push({id:ve,text:rt,icon:It,index:Ae,sourceLayerIndex:we,geometry:Ue.geometry,properties:me.properties,type:YM[me.type],sortKey:Ot}),It&&(q[It.name]=!0),rt){const Ct=x.evaluate(Ue,{},h).join(","),_t=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const ft of rt.sections)if(ft.image)q[ft.image.name]=!0;else{const Rt=Nd(rt.toString()),gt=ft.fontStack||Ct,ct=Y[gt]=Y[gt]||{};this.calculateGlyphDependencies(ft.text,ct,_t,this.allowVerticalPlacement,Rt)}}}v.get("symbol-placement")==="line"&&(this.features=function(me){const ve={},Ae={},we=[];let Re=0;function Ue(Ct){we.push(me[Ct]),Re++}function rt(Ct,_t,ft){const Rt=Ae[Ct];return delete Ae[Ct],Ae[_t]=Rt,we[Rt].geometry[0].pop(),we[Rt].geometry[0]=we[Rt].geometry[0].concat(ft[0]),Rt}function It(Ct,_t,ft){const Rt=ve[_t];return delete ve[_t],ve[Ct]=Rt,we[Rt].geometry[0].shift(),we[Rt].geometry[0]=ft[0].concat(we[Rt].geometry[0]),Rt}function Ot(Ct,_t,ft){const Rt=ft?_t[0][_t[0].length-1]:_t[0][0];return`${Ct}:${Rt.x}:${Rt.y}`}for(let Ct=0;Ct<me.length;Ct++){const _t=me[Ct],ft=_t.geometry,Rt=_t.text?_t.text.toString():null;if(!Rt){Ue(Ct);continue}const gt=Ot(Rt,ft),ct=Ot(Rt,ft,!0);if(gt in Ae&&ct in ve&&Ae[gt]!==ve[ct]){const Xt=It(gt,ct,ft),jt=rt(gt,ct,we[Xt].geometry);delete ve[gt],delete Ae[ct],Ae[Ot(Rt,we[jt].geometry,!0)]=jt,we[Xt].geometry=null}else gt in Ae?rt(gt,ct,ft):ct in ve?It(gt,ct,ft):(Ue(Ct),ve[gt]=Re-1,Ae[ct]=Re-1)}return we.filter(Ct=>Ct.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,ve)=>me.sortKey-ve.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:f},S<s.length-1&&(f+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const I=x[S];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,f,v,x,S,I,z,$,j,q){const Y=n.indexArray,ee=n.layoutVertexArray,le=n.segments.prepareSegment(4*s.length,ee,Y,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,ve=le.vertexLength,Ae=this.allowVerticalPlacement&&S===l.ai.vertical?Math.PI/2:0,we=x.text&&x.text.sections;for(let Re=0;Re<s.length;Re++){const{tl:Ue,tr:rt,bl:It,br:Ot,tex:Ct,pixelOffsetTL:_t,pixelOffsetBR:ft,minFontScaleX:Rt,minFontScaleY:gt,glyphOffset:ct,isSDF:Xt,sectionIndex:jt}=s[Re],gr=le.vertexLength,ln=ct[1];om(ee,I.x,I.y,Ue.x,ln+Ue.y,Ct.x,Ct.y,h,Xt,_t.x,_t.y,Rt,gt),om(ee,I.x,I.y,rt.x,ln+rt.y,Ct.x+Ct.w,Ct.y,h,Xt,ft.x,_t.y,Rt,gt),om(ee,I.x,I.y,It.x,ln+It.y,Ct.x,Ct.y+Ct.h,h,Xt,_t.x,ft.y,Rt,gt),om(ee,I.x,I.y,Ot.x,ln+Ot.y,Ct.x+Ct.w,Ct.y+Ct.h,h,Xt,ft.x,ft.y,Rt,gt),e0(n.dynamicLayoutVertexArray,I,Ae),Y.emplaceBack(gr,gr+1,gr+2),Y.emplaceBack(gr+1,gr+2,gr+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),Re!==s.length-1&&jt===s[Re+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,x,x.index,{},q,we&&we[jt])}n.placedSymbolArray.emplaceBack(I.x,I.y,me,this.glyphOffsetArray.length-me,ve,z,$,I.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],S,0,!1,0,j)}_addCollisionDebugVertex(n,s,h,f,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,f,v,x,S){const I=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),z=I.vertexLength,$=v.layoutVertexArray,j=v.collisionVertexArray,q=S.anchorX,Y=S.anchorY;this._addCollisionDebugVertex($,j,x,q,Y,new M(n,s)),this._addCollisionDebugVertex($,j,x,q,Y,new M(h,s)),this._addCollisionDebugVertex($,j,x,q,Y,new M(h,f)),this._addCollisionDebugVertex($,j,x,q,Y,new M(n,f)),I.vertexLength+=4;const ee=v.indexArray;ee.emplaceBack(z,z+1),ee.emplaceBack(z+1,z+2),ee.emplaceBack(z+2,z+3),ee.emplaceBack(z+3,z),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,f){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new r0(kn,cw.members,Un),this.iconCollisionBox=new r0(kn,cw.members,Un);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,f,v,x,S,I,z){const $={};for(let j=s;j<h;j++){const q=n.get(j);$.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.textFeatureIndex=q.featureIndex;break}for(let j=f;j<v;j++){const q=n.get(j);$.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.verticalTextFeatureIndex=q.featureIndex;break}for(let j=x;j<S;j++){const q=n.get(j);$.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.iconFeatureIndex=q.featureIndex;break}for(let j=I;j<z;j++){const q=n.get(j);$.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.verticalIconFeatureIndex=q.featureIndex;break}return $}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),f=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),f=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const I=this.symbolInstances.get(S);f.push(0|Math.round(s*I.anchorX+h*I.anchorY)),v.push(I.featureIndex)}return x.sort((S,I)=>f[S]-f[I]||v[I]-v[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Iw,Tw;Dt("SymbolBucket",nu,{omit:["layers","collisionBoxArray","features","compareText"]}),nu.MAX_GLYPHS=65535,nu.addDynamicAttributes=e0;var n0={get paint(){return Tw=Tw||new zn({"icon-opacity":new nr(je.paint_symbol["icon-opacity"]),"icon-color":new nr(je.paint_symbol["icon-color"]),"icon-halo-color":new nr(je.paint_symbol["icon-halo-color"]),"icon-halo-width":new nr(je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nr(je.paint_symbol["icon-halo-blur"]),"icon-translate":new Ut(je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ut(je.paint_symbol["icon-translate-anchor"]),"text-opacity":new nr(je.paint_symbol["text-opacity"]),"text-color":new nr(je.paint_symbol["text-color"],{runtimeType:hr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new nr(je.paint_symbol["text-halo-color"]),"text-halo-width":new nr(je.paint_symbol["text-halo-width"]),"text-halo-blur":new nr(je.paint_symbol["text-halo-blur"]),"text-translate":new Ut(je.paint_symbol["text-translate"]),"text-translate-anchor":new Ut(je.paint_symbol["text-translate-anchor"])})},get layout(){return Iw=Iw||new zn({"symbol-placement":new Ut(je.layout_symbol["symbol-placement"]),"symbol-spacing":new Ut(je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ut(je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nr(je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ut(je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ut(je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ut(je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ut(je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ut(je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ut(je.layout_symbol["icon-rotation-alignment"]),"icon-size":new nr(je.layout_symbol["icon-size"]),"icon-text-fit":new Ut(je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ut(je.layout_symbol["icon-text-fit-padding"]),"icon-image":new nr(je.layout_symbol["icon-image"]),"icon-rotate":new nr(je.layout_symbol["icon-rotate"]),"icon-padding":new nr(je.layout_symbol["icon-padding"]),"icon-keep-upright":new Ut(je.layout_symbol["icon-keep-upright"]),"icon-offset":new nr(je.layout_symbol["icon-offset"]),"icon-anchor":new nr(je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ut(je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ut(je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ut(je.layout_symbol["text-rotation-alignment"]),"text-field":new nr(je.layout_symbol["text-field"]),"text-font":new nr(je.layout_symbol["text-font"]),"text-size":new nr(je.layout_symbol["text-size"]),"text-max-width":new nr(je.layout_symbol["text-max-width"]),"text-line-height":new Ut(je.layout_symbol["text-line-height"]),"text-letter-spacing":new nr(je.layout_symbol["text-letter-spacing"]),"text-justify":new nr(je.layout_symbol["text-justify"]),"text-radial-offset":new nr(je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ut(je.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new nr(je.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new nr(je.layout_symbol["text-anchor"]),"text-max-angle":new Ut(je.layout_symbol["text-max-angle"]),"text-writing-mode":new Ut(je.layout_symbol["text-writing-mode"]),"text-rotate":new nr(je.layout_symbol["text-rotate"]),"text-padding":new Ut(je.layout_symbol["text-padding"]),"text-keep-upright":new Ut(je.layout_symbol["text-keep-upright"]),"text-transform":new nr(je.layout_symbol["text-transform"]),"text-offset":new nr(je.layout_symbol["text-offset"]),"text-allow-overlap":new Ut(je.layout_symbol["text-allow-overlap"]),"text-overlap":new Ut(je.layout_symbol["text-overlap"]),"text-ignore-placement":new Ut(je.layout_symbol["text-ignore-placement"]),"text-optional":new Ut(je.layout_symbol["text-optional"])})}};class Pw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:vn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dt("FormatSectionOverride",Pw,{omit:["defaultValue"]});class am extends po{constructor(n){super(n,n0)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const v of h)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,f){const v=this.layout.get(n).evaluate(s,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Bc(x.value)||!v?v:function(S,I){return I.replace(/{([^{}]+)}/g,(z,$)=>S&&$ in S?String(S[$]):"")}(s.properties,v)}createBucket(n){return new nu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of n0.paint.overridableProperties){if(!am.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Pw(s),f=new Rd(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Ld("source",f):new Fc("composite",f,s.value.zoomStops),this.paint._values[n]=new xi(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&am.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),f=n0.paint.properties[s];let v=!1;const x=S=>{for(const I of S)if(f.overrides&&f.overrides.hasOverride(I))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Br)x(h.value.value.sections);else if(h.value.kind==="source"){const S=z=>{v||(z instanceof pa&&Or(z.value)===he?x(z.value.sections):z instanceof $c?x(z.sections):z.eachChild(S))},I=h.value;I._styleExpression&&S(I._styleExpression.expression)}return v}}let Ew;var tD={get paint(){return Ew=Ew||new zn({"background-color":new Ut(je.paint_background["background-color"]),"background-pattern":new Xd(je.paint_background["background-pattern"]),"background-opacity":new Ut(je.paint_background["background-opacity"])})}};class rD extends po{constructor(n){super(n,tD)}}let zw;var nD={get paint(){return zw=zw||new zn({"raster-opacity":new Ut(je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ut(je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ut(je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ut(je.paint_raster["raster-brightness-max"]),"raster-saturation":new Ut(je.paint_raster["raster-saturation"]),"raster-contrast":new Ut(je.paint_raster["raster-contrast"]),"raster-resampling":new Ut(je.paint_raster["raster-resampling"]),"raster-fade-duration":new Ut(je.paint_raster["raster-fade-duration"])})}};class iD extends po{constructor(n){super(n,nD)}}class oD extends po{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class aD{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const i0=63710088e-1;class Js{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Js(ie(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,f=n.lat*s,v=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return i0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Js)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Js(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Js(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Mw=2*Math.PI*i0;function Dw(a){return Mw*Math.cos(a*Math.PI/180)}function Aw(a){return(180+a)/360}function Rw(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Lw(a,n){return a/Dw(n)}function $w(a){return 360*a-180}function o0(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class sm{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Js.convert(n);return new sm(Aw(h.lng),Rw(h.lat),Lw(s,h.lat))}toLngLat(){return new Js($w(this.x),o0(this.y))}toAltitude(){return this.z*Dw(o0(this.y))}meterInMercatorCoordinateUnits(){return 1/Mw*(n=o0(this.y),1/Math.cos(n*Math.PI/180));var n}}function Bw(a,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class a0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=vh(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const f=(x=this.y,S=this.z,I=Bw(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),z=Bw(256*(v+1),256*(x+1),S),I[0]+","+I[1]+","+z[0]+","+z[1]);var v,x,S,I,z;const $=function(j,q,Y){let ee,le="";for(let me=j;me>0;me--)ee=1<<me-1,le+=(q&ee?1:0)+(Y&ee?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,$).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new M((n.x*s-this.x)*Bn,(n.y*s-this.y)*Bn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ow{constructor(n,s){this.wrap=n,this.canonical=s,this.key=vh(n,s.z,s.z,s.x,s.y)}}class To{constructor(n,s,h,f,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new a0(h,+f,+v),this.key=vh(s,n,h,f,v)}clone(){return new To(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new To(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new To(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?vh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):vh(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new To(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new To(s,this.wrap,s,h,f),new To(s,this.wrap,s,h+1,f),new To(s,this.wrap,s,h,f+1),new To(s,this.wrap,s,h+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new To(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new To(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ow(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new sm(n.x-this.wrap,n.y))}}function vh(a,n,s,h,f){(a*=2)<0&&(a=-1*a-1);const v=1<<s;return(v*v*a+v*f+h).toString(36)+s.toString(36)+n.toString(36)}Dt("CanonicalTileID",a0),Dt("OverscaledTileID",To,{omit:["posMatrix"]});class Fw{constructor(n,s,h,f=1,v=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ye(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<I;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(I,z)]=this.data[this._idx(I-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,I)]=this.data[this._idx(z,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<I;z++)for(let $=0;$<I;$++){const j=this.get(z,$);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(n,s){const h=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Io({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const I=-s*this.dim,z=-h*this.dim;for(let $=x;$<S;$++)for(let j=f;j<v;j++)this.data[this._idx(j,$)]=n.data[this._idx(j+I,$+z)]}}Dt("DEMData",Fw);class Nw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class jw{constructor(n,s,h,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Vw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Us(Bn,16,0),this.grid3D=new Us(Bn,16,0),this.featureIndexArray=new ot,this.promoteId=s}insert(n,s,h,f,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,v);const I=x?this.grid3D:this.grid;for(let z=0;z<s.length;z++){const $=s[z],j=[1/0,1/0,-1/0,-1/0];for(let q=0;q<$.length;q++){const Y=$[q];j[0]=Math.min(j[0],Y.x),j[1]=Math.min(j[1],Y.y),j[2]=Math.max(j[2],Y.x),j[3]=Math.max(j[3],Y.y)}j[0]<Bn&&j[1]<Bn&&j[2]>=0&&j[3]>=0&&I.insert(S,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zs.VectorTile(new Zv(this.rawTileData)).layers,this.sourceLayerCoder=new Nw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,f){this.loadVTLayers();const v=n.params||{},x=Bn/n.tileSize/n.scale,S=Bd(v.filter),I=n.queryGeometry,z=n.queryPadding*x,$=Hw(I),j=this.grid.query($.minX-z,$.minY-z,$.maxX+z,$.maxY+z),q=Hw(n.cameraQueryGeometry),Y=this.grid3D.query(q.minX-z,q.minY-z,q.maxX+z,q.maxY+z,(me,ve,Ae,we)=>function(Re,Ue,rt,It,Ot){for(const _t of Re)if(Ue<=_t.x&&rt<=_t.y&&It>=_t.x&&Ot>=_t.y)return!0;const Ct=[new M(Ue,rt),new M(Ue,Ot),new M(It,Ot),new M(It,rt)];if(Re.length>2){for(const _t of Ct)if(Xc(Re,_t))return!0}for(let _t=0;_t<Re.length-1;_t++)if(Oz(Re[_t],Re[_t+1],Ct))return!0;return!1}(n.cameraQueryGeometry,me-z,ve-z,Ae+z,we+z));for(const me of Y)j.push(me);j.sort(sD);const ee={};let le;for(let me=0;me<j.length;me++){const ve=j[me];if(ve===le)continue;le=ve;const Ae=this.featureIndexArray.get(ve);let we=null;this.loadMatchingFeature(ee,Ae.bucketIndex,Ae.sourceLayerIndex,Ae.featureIndex,S,v.layers,v.availableImages,s,h,f,(Re,Ue,rt)=>(we||(we=Gl(Re)),Ue.queryIntersectsFeature(I,Re,rt,we,this.z,n.transform,x,n.pixelPosMatrix)))}return ee}loadMatchingFeature(n,s,h,f,v,x,S,I,z,$,j){const q=this.bucketLayerIDs[s];if(x&&!function(me,ve){for(let Ae=0;Ae<me.length;Ae++)if(ve.indexOf(me[Ae])>=0)return!0;return!1}(x,q))return;const Y=this.sourceLayerCoder.decode(h),ee=this.vtLayers[Y].feature(f);if(v.needGeometry){const me=ql(ee,!0);if(!v.filter(new an(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!v.filter(new an(this.tileID.overscaledZ),ee))return;const le=this.getId(ee,Y);for(let me=0;me<q.length;me++){const ve=q[me];if(x&&x.indexOf(ve)<0)continue;const Ae=I[ve];if(!Ae)continue;let we={};le&&$&&(we=$.getState(Ae.sourceLayer||"_geojsonTileLayer",le));const Re=Z({},z[ve]);Re.paint=Uw(Re.paint,Ae.paint,ee,we,S),Re.layout=Uw(Re.layout,Ae.layout,ee,we,S);const Ue=!j||j(ee,Ae,we);if(!Ue)continue;const rt=new jw(ee,this.z,this.x,this.y,le);rt.layer=Re;let It=n[ve];It===void 0&&(It=n[ve]=[]),It.push({featureIndex:f,feature:rt,intersectionZ:Ue})}}lookupSymbolFeatures(n,s,h,f,v,x,S,I){const z={};this.loadVTLayers();const $=Bd(v);for(const j of n)this.loadMatchingFeature(z,h,f,j,$,x,S,I,s);return z}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Uw(a,n,s,h,f){return _e(a,(v,x)=>{const S=n instanceof Zc?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,f):S})}function Hw(a){let n=1/0,s=1/0,h=-1/0,f=-1/0;for(const v of a)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y);return{minX:n,minY:s,maxX:h,maxY:f}}function sD(a,n){return n-a}function Ww(a,n,s,h,f){const v=[];for(let x=0;x<a.length;x++){const S=a[x];let I;for(let z=0;z<S.length-1;z++){let $=S[z],j=S[z+1];$.x<n&&j.x<n||($.x<n?$=new M(n,$.y+(n-$.x)/(j.x-$.x)*(j.y-$.y))._round():j.x<n&&(j=new M(n,$.y+(n-$.x)/(j.x-$.x)*(j.y-$.y))._round()),$.y<s&&j.y<s||($.y<s?$=new M($.x+(s-$.y)/(j.y-$.y)*(j.x-$.x),s)._round():j.y<s&&(j=new M($.x+(s-$.y)/(j.y-$.y)*(j.x-$.x),s)._round()),$.x>=h&&j.x>=h||($.x>=h?$=new M(h,$.y+(h-$.x)/(j.x-$.x)*(j.y-$.y))._round():j.x>=h&&(j=new M(h,$.y+(h-$.x)/(j.x-$.x)*(j.y-$.y))._round()),$.y>=f&&j.y>=f||($.y>=f?$=new M($.x+(f-$.y)/(j.y-$.y)*(j.x-$.x),f)._round():j.y>=f&&(j=new M($.x+(f-$.y)/(j.y-$.y)*(j.x-$.x),f)._round()),I&&$.equals(I[I.length-1])||(I=[$],v.push(I)),I.push(j)))))}}return v}Dt("FeatureIndex",Vw,{omit:["rawTileData","sourceLayerCoder"]});class Ys extends M{constructor(n,s,h,f){super(n,s),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new Ys(this.x,this.y,this.angle,this.segment)}}function Gw(a,n,s,h,f){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=a[x].dist(v),v=a[x]}S+=a[x].dist(a[x+1]),x++;const I=[];let z=0;for(;S<s/2;){const $=a[x],j=a[x+1];if(!j)return!1;let q=a[x-1].angleTo($)-$.angleTo(j);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:S,angleDelta:q}),z+=q;S-I[0].distance>h;)z-=I.shift().angleDelta;if(z>f)return!1;x++,S+=$.dist(j)}return!0}function qw(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function Zw(a,n,s){return a?.6*n*s:0}function Kw(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function lD(a,n,s,h,f,v){const x=Zw(s,f,v),S=Kw(s,h)*v;let I=0;const z=qw(a)/2;for(let $=0;$<a.length-1;$++){const j=a[$],q=a[$+1],Y=j.dist(q);if(I+Y>z){const ee=(z-I)/Y,le=Ki.number(j.x,q.x,ee),me=Ki.number(j.y,q.y,ee),ve=new Ys(le,me,q.angleTo(j),$);return ve._round(),!x||Gw(a,ve,S,x,n)?ve:void 0}I+=Y}}function cD(a,n,s,h,f,v,x,S,I){const z=Zw(h,v,x),$=Kw(h,f),j=$*x,q=a[0].x===0||a[0].x===I||a[0].y===0||a[0].y===I;return n-j<n/4&&(n=j+n/4),Xw(a,q?n/2*S%n:($/2+2*v)*x*S%n,n,z,s,j,q,!1,I)}function Xw(a,n,s,h,f,v,x,S,I){const z=v/2,$=qw(a);let j=0,q=n-s,Y=[];for(let ee=0;ee<a.length-1;ee++){const le=a[ee],me=a[ee+1],ve=le.dist(me),Ae=me.angleTo(le);for(;q+s<j+ve;){q+=s;const we=(q-j)/ve,Re=Ki.number(le.x,me.x,we),Ue=Ki.number(le.y,me.y,we);if(Re>=0&&Re<I&&Ue>=0&&Ue<I&&q-z>=0&&q+z<=$){const rt=new Ys(Re,Ue,Ae,ee);rt._round(),h&&!Gw(a,rt,v,h,f)||Y.push(rt)}}j+=ve}return S||Y.length||x||(Y=Xw(a,j/2,s,h,f,v,x,!0,I)),Y}Dt("Anchor",Ys);const iu=eo;function Jw(a,n,s,h){const f=[],v=a.image,x=v.pixelRatio,S=v.paddedRect.w-2*iu,I=v.paddedRect.h-2*iu,z=a.right-a.left,$=a.bottom-a.top,j=v.stretchX||[[0,S]],q=v.stretchY||[[0,I]],Y=(ft,Rt)=>ft+Rt[1]-Rt[0],ee=j.reduce(Y,0),le=q.reduce(Y,0),me=S-ee,ve=I-le;let Ae=0,we=ee,Re=0,Ue=le,rt=0,It=me,Ot=0,Ct=ve;if(v.content&&h){const ft=v.content;Ae=lm(j,0,ft[0]),Re=lm(q,0,ft[1]),we=lm(j,ft[0],ft[2]),Ue=lm(q,ft[1],ft[3]),rt=ft[0]-Ae,Ot=ft[1]-Re,It=ft[2]-ft[0]-we,Ct=ft[3]-ft[1]-Ue}const _t=(ft,Rt,gt,ct)=>{const Xt=cm(ft.stretch-Ae,we,z,a.left),jt=um(ft.fixed-rt,It,ft.stretch,ee),gr=cm(Rt.stretch-Re,Ue,$,a.top),ln=um(Rt.fixed-Ot,Ct,Rt.stretch,le),hn=cm(gt.stretch-Ae,we,z,a.left),Gn=um(gt.fixed-rt,It,gt.stretch,ee),mo=cm(ct.stretch-Re,Ue,$,a.top),Oi=um(ct.fixed-Ot,Ct,ct.stretch,le),On=new M(Xt,gr),li=new M(hn,gr),fi=new M(hn,mo),Fi=new M(Xt,mo),Ni=new M(jt/x,ln/x),qn=new M(Gn/x,Oi/x),Zn=n*Math.PI/180;if(Zn){const Si=Math.sin(Zn),to=Math.cos(Zn),ro=[to,-Si,Si,to];On._matMult(ro),li._matMult(ro),Fi._matMult(ro),fi._matMult(ro)}const wi=ft.stretch+ft.fixed,ji=Rt.stretch+Rt.fixed;return{tl:On,tr:li,bl:Fi,br:fi,tex:{x:v.paddedRect.x+iu+wi,y:v.paddedRect.y+iu+ji,w:gt.stretch+gt.fixed-wi,h:ct.stretch+ct.fixed-ji},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ni,pixelOffsetBR:qn,minFontScaleX:It/x/z,minFontScaleY:Ct/x/$,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const ft=Yw(j,me,ee),Rt=Yw(q,ve,le);for(let gt=0;gt<ft.length-1;gt++){const ct=ft[gt],Xt=ft[gt+1];for(let jt=0;jt<Rt.length-1;jt++)f.push(_t(ct,Rt[jt],Xt,Rt[jt+1]))}}else f.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:I+1}));return f}function lm(a,n,s){let h=0;for(const f of a)h+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return h}function Yw(a,n,s){const h=[{fixed:-iu,stretch:0}];for(const[f,v]of a){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return h.push({fixed:n+iu,stretch:s}),h}function cm(a,n,s,h){return a/n*s+h}function um(a,n,s,h){return a-n*s/h}class dm{constructor(n,s,h,f,v,x,S,I,z,$){if(this.boxStartIndex=n.length,z){let j=x.top,q=x.bottom;const Y=x.collisionPadding;Y&&(j-=Y[1],q+=Y[3]);let ee=q-j;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let j=x.top*S-I[0],q=x.bottom*S+I[2],Y=x.left*S-I[3],ee=x.right*S+I[1];const le=x.collisionPadding;if(le&&(Y-=le[0]*S,j-=le[1]*S,ee+=le[2]*S,q+=le[3]*S),$){const me=new M(Y,j),ve=new M(ee,j),Ae=new M(Y,q),we=new M(ee,q),Re=$*Math.PI/180;me._rotate(Re),ve._rotate(Re),Ae._rotate(Re),we._rotate(Re),Y=Math.min(me.x,ve.x,Ae.x,we.x),ee=Math.max(me.x,ve.x,Ae.x,we.x),j=Math.min(me.y,ve.y,Ae.y,we.y),q=Math.max(me.y,ve.y,Ae.y,we.y)}n.emplaceBack(s.x,s.y,Y,j,ee,q,h,f,v)}this.boxEndIndex=n.length}}class uD{constructor(n=[],s=dD){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,f=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(f,x)>=0)break;s[n]=x,n=v}s[n]=f}_down(n){const{data:s,compare:h}=this,f=this.length>>1,v=s[n];for(;n<f;){let x=1+(n<<1),S=s[x];const I=x+1;if(I<this.length&&h(s[I],S)<0&&(x=I,S=s[I]),h(S,v)>=0)break;s[n]=S,n=x}s[n]=v}}function dD(a,n){return a<n?-1:a>n?1:0}function hD(a,n=1,s=!1){let h=1/0,f=1/0,v=-1/0,x=-1/0;const S=a[0];for(let Y=0;Y<S.length;Y++){const ee=S[Y];(!Y||ee.x<h)&&(h=ee.x),(!Y||ee.y<f)&&(f=ee.y),(!Y||ee.x>v)&&(v=ee.x),(!Y||ee.y>x)&&(x=ee.y)}const I=Math.min(v-h,x-f);let z=I/2;const $=new uD([],pD);if(I===0)return new M(h,f);for(let Y=h;Y<v;Y+=I)for(let ee=f;ee<x;ee+=I)$.push(new ou(Y+z,ee+z,z,a));let j=function(Y){let ee=0,le=0,me=0;const ve=Y[0];for(let Ae=0,we=ve.length,Re=we-1;Ae<we;Re=Ae++){const Ue=ve[Ae],rt=ve[Re],It=Ue.x*rt.y-rt.x*Ue.y;le+=(Ue.x+rt.x)*It,me+=(Ue.y+rt.y)*It,ee+=3*It}return new ou(le/ee,me/ee,0,Y)}(a),q=$.length;for(;$.length;){const Y=$.pop();(Y.d>j.d||!j.d)&&(j=Y,s&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,q)),Y.max-j.d<=n||(z=Y.h/2,$.push(new ou(Y.p.x-z,Y.p.y-z,z,a)),$.push(new ou(Y.p.x+z,Y.p.y-z,z,a)),$.push(new ou(Y.p.x-z,Y.p.y+z,z,a)),$.push(new ou(Y.p.x+z,Y.p.y+z,z,a)),q+=4)}return s&&(console.log(`num probes: ${q}`),console.log(`best distance: ${j.d}`)),j.p}function pD(a,n){return n.max-a.max}function ou(a,n,s,h){this.p=new M(a,n),this.h=s,this.d=function(f,v){let x=!1,S=1/0;for(let I=0;I<v.length;I++){const z=v[I];for(let $=0,j=z.length,q=j-1;$<j;q=$++){const Y=z[$],ee=z[q];Y.y>f.y!=ee.y>f.y&&f.x<(ee.x-Y.x)*(f.y-Y.y)/(ee.y-Y.y)+Y.x&&(x=!x),S=Math.min(S,Rb(f,Y,ee))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;l.aq=void 0,(pi=l.aq||(l.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const Qs=7,s0=Number.POSITIVE_INFINITY;function Qw(a,n){return n[1]!==s0?function(s,h,f){let v=0,x=0;switch(h=Math.abs(h),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Qs;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Qs}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(a,n[0],n[1]):function(s,h){let f=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Qs;break;case"bottom-right":case"bottom-left":v=-x+Qs;break;case"bottom":v=-h+Qs;break;case"top":v=h-Qs}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=h;break;case"right":f=-h}return[f,v]}(a,n[0])}function eS(a,n,s){var h;const f=a.layout,v=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const S=v.values,I=[];for(let z=0;z<S.length;z+=2){const $=I[z]=S[z],j=S[z+1].map(q=>q*Wn);$.startsWith("top")?j[1]-=Qs:$.startsWith("bottom")&&(j[1]+=Qs),I[z+1]=j}return new Zt(I)}const x=f.get("text-variable-anchor");if(x){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*Wn,s0]:f.get("text-offset").evaluate(n,{},s).map(z=>z*Wn);const I=[];for(const z of x)I.push(z,Qw(z,S));return new Zt(I)}return null}function l0(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function fD(a,n,s,h,f,v,x,S,I,z,$){let j=v.textMaxSize.evaluate(n,{});j===void 0&&(j=x);const q=a.layers[0].layout,Y=q.get("icon-offset").evaluate(n,{},$),ee=rS(s.horizontal),le=x/24,me=a.tilePixelRatio*le,ve=a.tilePixelRatio*j/24,Ae=a.tilePixelRatio*S,we=a.tilePixelRatio*q.get("symbol-spacing"),Re=q.get("text-padding")*a.tilePixelRatio,Ue=function(ct,Xt,jt,gr=1){const ln=ct.get("icon-padding").evaluate(Xt,{},jt),hn=ln&&ln.values;return[hn[0]*gr,hn[1]*gr,hn[2]*gr,hn[3]*gr]}(q,n,$,a.tilePixelRatio),rt=q.get("text-max-angle")/180*Math.PI,It=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",Ot=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",Ct=q.get("symbol-placement"),_t=we/2,ft=q.get("icon-text-fit");let Rt;h&&ft!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(Rt=Cw(h,s.vertical,ft,q.get("icon-text-fit-padding"),Y,le)),ee&&(h=Cw(h,ee,ft,q.get("icon-text-fit-padding"),Y,le)));const gt=(ct,Xt)=>{Xt.x<0||Xt.x>=Bn||Xt.y<0||Xt.y>=Bn||function(jt,gr,ln,hn,Gn,mo,Oi,On,li,fi,Fi,Ni,qn,Zn,wi,ji,Si,to,ro,Kn,br,Ci,mi,Xn,Jo){const xa=jt.addToLineVertexArray(gr,ln);let ba,gs,Yo,Po,no=0,ys=0,bh=0,aS=0,g0=-1,y0=-1;const vs={};let sS=hs("");if(jt.allowVerticalPlacement&&hn.vertical){const ki=On.layout.get("text-rotate").evaluate(br,{},Xn)+90;Yo=new dm(li,gr,fi,Fi,Ni,hn.vertical,qn,Zn,wi,ki),Oi&&(Po=new dm(li,gr,fi,Fi,Ni,Oi,Si,to,wi,ki))}if(Gn){const ki=On.layout.get("icon-rotate").evaluate(br,{}),Eo=On.layout.get("icon-text-fit")!=="none",Kl=Jw(Gn,ki,mi,Eo),Sa=Oi?Jw(Oi,ki,mi,Eo):void 0;gs=new dm(li,gr,fi,Fi,Ni,Gn,Si,to,!1,ki),no=4*Kl.length;const Xl=jt.iconSizeData;let Wa=null;Xl.kind==="source"?(Wa=[Ha*On.layout.get("icon-size").evaluate(br,{})],Wa[0]>Xs&&Ye(`${jt.layerIds[0]}: Value for "icon-size" is >= ${yh}. Reduce your "icon-size".`)):Xl.kind==="composite"&&(Wa=[Ha*Ci.compositeIconSizes[0].evaluate(br,{},Xn),Ha*Ci.compositeIconSizes[1].evaluate(br,{},Xn)],(Wa[0]>Xs||Wa[1]>Xs)&&Ye(`${jt.layerIds[0]}: Value for "icon-size" is >= ${yh}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Kl,Wa,Kn,ro,br,l.ai.none,gr,xa.lineStartIndex,xa.lineLength,-1,Xn),g0=jt.icon.placedSymbolArray.length-1,Sa&&(ys=4*Sa.length,jt.addSymbols(jt.icon,Sa,Wa,Kn,ro,br,l.ai.vertical,gr,xa.lineStartIndex,xa.lineLength,-1,Xn),y0=jt.icon.placedSymbolArray.length-1)}const lS=Object.keys(hn.horizontal);for(const ki of lS){const Eo=hn.horizontal[ki];if(!ba){sS=hs(Eo.text);const Sa=On.layout.get("text-rotate").evaluate(br,{},Xn);ba=new dm(li,gr,fi,Fi,Ni,Eo,qn,Zn,wi,Sa)}const Kl=Eo.positionedLines.length===1;if(bh+=tS(jt,gr,Eo,mo,On,wi,br,ji,xa,hn.vertical?l.ai.horizontal:l.ai.horizontalOnly,Kl?lS:[ki],vs,g0,Ci,Xn),Kl)break}hn.vertical&&(aS+=tS(jt,gr,hn.vertical,mo,On,wi,br,ji,xa,l.ai.vertical,["vertical"],vs,y0,Ci,Xn));const yD=ba?ba.boxStartIndex:jt.collisionBoxArray.length,vD=ba?ba.boxEndIndex:jt.collisionBoxArray.length,_D=Yo?Yo.boxStartIndex:jt.collisionBoxArray.length,xD=Yo?Yo.boxEndIndex:jt.collisionBoxArray.length,bD=gs?gs.boxStartIndex:jt.collisionBoxArray.length,wD=gs?gs.boxEndIndex:jt.collisionBoxArray.length,SD=Po?Po.boxStartIndex:jt.collisionBoxArray.length,CD=Po?Po.boxEndIndex:jt.collisionBoxArray.length;let wa=-1;const pm=(ki,Eo)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,Eo):Eo;wa=pm(ba,wa),wa=pm(Yo,wa),wa=pm(gs,wa),wa=pm(Po,wa);const cS=wa>-1?1:0;cS&&(wa*=Jo/Wn),jt.glyphOffsetArray.length>=nu.MAX_GLYPHS&&Ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),br.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,br.sortKey);const kD=eS(On,br,Xn),[ID,TD]=function(ki,Eo){const Kl=ki.length,Sa=Eo==null?void 0:Eo.values;if((Sa==null?void 0:Sa.length)>0)for(let Xl=0;Xl<Sa.length;Xl+=2){const Wa=Sa[Xl+1];ki.emplaceBack(l.aq[Sa[Xl]],Wa[0],Wa[1])}return[Kl,ki.length]}(jt.textAnchorOffsets,kD);jt.symbolInstances.emplaceBack(gr.x,gr.y,vs.right>=0?vs.right:-1,vs.center>=0?vs.center:-1,vs.left>=0?vs.left:-1,vs.vertical||-1,g0,y0,sS,yD,vD,_D,xD,bD,wD,SD,CD,fi,bh,aS,no,ys,cS,0,qn,wa,ID,TD)}(a,Xt,ct,s,h,f,Rt,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,me,[Re,Re,Re,Re],It,I,Ae,Ue,Ot,Y,n,v,z,$,x)};if(Ct==="line")for(const ct of Ww(n.geometry,0,0,Bn,Bn)){const Xt=cD(ct,we,rt,s.vertical||ee,h,24,ve,a.overscaling,Bn);for(const jt of Xt)ee&&mD(a,ee.text,_t,jt)||gt(ct,jt)}else if(Ct==="line-center"){for(const ct of n.geometry)if(ct.length>1){const Xt=lD(ct,rt,s.vertical||ee,h,24,ve);Xt&&gt(ct,Xt)}}else if(n.type==="Polygon")for(const ct of Nv(n.geometry,0)){const Xt=hD(ct,16);gt(ct[0],new Ys(Xt.x,Xt.y,0))}else if(n.type==="LineString")for(const ct of n.geometry)gt(ct,new Ys(ct[0].x,ct[0].y,0));else if(n.type==="Point")for(const ct of n.geometry)for(const Xt of ct)gt([Xt],new Ys(Xt.x,Xt.y,0))}function tS(a,n,s,h,f,v,x,S,I,z,$,j,q,Y,ee){const le=function(Ae,we,Re,Ue,rt,It,Ot,Ct){const _t=Ue.layout.get("text-rotate").evaluate(It,{})*Math.PI/180,ft=[];for(const Rt of we.positionedLines)for(const gt of Rt.positionedGlyphs){if(!gt.rect)continue;const ct=gt.rect||{};let Xt=yw+1,jt=!0,gr=1,ln=0;const hn=(rt||Ct)&&gt.vertical,Gn=gt.metrics.advance*gt.scale/2;if(Ct&&we.verticalizable&&(ln=Rt.lineOffset/2-(gt.imageName?-(Wn-gt.metrics.width*gt.scale)/2:(gt.scale-1)*Wn)),gt.imageName){const Kn=Ot[gt.imageName];jt=Kn.sdf,gr=Kn.pixelRatio,Xt=eo/gr}const mo=rt?[gt.x+Gn,gt.y]:[0,0];let Oi=rt?[0,0]:[gt.x+Gn+Re[0],gt.y+Re[1]-ln],On=[0,0];hn&&(On=Oi,Oi=[0,0]);const li=gt.metrics.isDoubleResolution?2:1,fi=(gt.metrics.left-Xt)*gt.scale-Gn+Oi[0],Fi=(-gt.metrics.top-Xt)*gt.scale+Oi[1],Ni=fi+ct.w/li*gt.scale/gr,qn=Fi+ct.h/li*gt.scale/gr,Zn=new M(fi,Fi),wi=new M(Ni,Fi),ji=new M(fi,qn),Si=new M(Ni,qn);if(hn){const Kn=new M(-Gn,Gn-mh),br=-Math.PI/2,Ci=Wn/2-Gn,mi=new M(5-mh-Ci,-(gt.imageName?Ci:0)),Xn=new M(...On);Zn._rotateAround(br,Kn)._add(mi)._add(Xn),wi._rotateAround(br,Kn)._add(mi)._add(Xn),ji._rotateAround(br,Kn)._add(mi)._add(Xn),Si._rotateAround(br,Kn)._add(mi)._add(Xn)}if(_t){const Kn=Math.sin(_t),br=Math.cos(_t),Ci=[br,-Kn,Kn,br];Zn._matMult(Ci),wi._matMult(Ci),ji._matMult(Ci),Si._matMult(Ci)}const to=new M(0,0),ro=new M(0,0);ft.push({tl:Zn,tr:wi,bl:ji,br:Si,tex:ct,writingMode:we.writingMode,glyphOffset:mo,sectionIndex:gt.sectionIndex,isSDF:jt,pixelOffsetTL:to,pixelOffsetBR:ro,minFontScaleX:0,minFontScaleY:0})}return ft}(0,s,S,f,v,x,h,a.allowVerticalPlacement),me=a.textSizeData;let ve=null;me.kind==="source"?(ve=[Ha*f.layout.get("text-size").evaluate(x,{})],ve[0]>Xs&&Ye(`${a.layerIds[0]}: Value for "text-size" is >= ${yh}. Reduce your "text-size".`)):me.kind==="composite"&&(ve=[Ha*Y.compositeTextSizes[0].evaluate(x,{},ee),Ha*Y.compositeTextSizes[1].evaluate(x,{},ee)],(ve[0]>Xs||ve[1]>Xs)&&Ye(`${a.layerIds[0]}: Value for "text-size" is >= ${yh}. Reduce your "text-size".`)),a.addSymbols(a.text,le,ve,S,v,x,z,n,I.lineStartIndex,I.lineLength,q,ee);for(const Ae of $)j[Ae]=a.text.placedSymbolArray.length-1;return 4*le.length}function rS(a){for(const n in a)return a[n];return null}function mD(a,n,s,h){const f=a.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else f[n]=[];return f[n].push(h),!1}const nS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class c0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=nS[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new c0(S,x,v,n)}constructor(n,s=64,h=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=nS.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return u0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,I=[0,v.length-1,0],z=[];for(;I.length;){const $=I.pop()||0,j=I.pop()||0,q=I.pop()||0;if(j-q<=S){for(let me=q;me<=j;me++){const ve=x[2*me],Ae=x[2*me+1];ve>=n&&ve<=h&&Ae>=s&&Ae<=f&&z.push(v[me])}continue}const Y=q+j>>1,ee=x[2*Y],le=x[2*Y+1];ee>=n&&ee<=h&&le>=s&&le<=f&&z.push(v[Y]),($===0?n<=ee:s<=le)&&(I.push(q),I.push(Y-1),I.push(1-$)),($===0?h>=ee:f>=le)&&(I.push(Y+1),I.push(j),I.push(1-$))}return z}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,S=[0,f.length-1,0],I=[],z=h*h;for(;S.length;){const $=S.pop()||0,j=S.pop()||0,q=S.pop()||0;if(j-q<=x){for(let me=q;me<=j;me++)oS(v[2*me],v[2*me+1],n,s)<=z&&I.push(f[me]);continue}const Y=q+j>>1,ee=v[2*Y],le=v[2*Y+1];oS(ee,le,n,s)<=z&&I.push(f[Y]),($===0?n-h<=ee:s-h<=le)&&(S.push(q),S.push(Y-1),S.push(1-$)),($===0?n+h>=ee:s+h>=le)&&(S.push(Y+1),S.push(j),S.push(1-$))}return I}}function u0(a,n,s,h,f,v){if(f-h<=s)return;const x=h+f>>1;iS(a,n,x,h,f,v),u0(a,n,s,h,x-1,1-v),u0(a,n,s,x+1,f,1-v)}function iS(a,n,s,h,f,v){for(;f>h;){if(f-h>600){const z=f-h+1,$=s-h+1,j=Math.log(z),q=.5*Math.exp(2*j/3),Y=.5*Math.sqrt(j*q*(z-q)/z)*($-z/2<0?-1:1);iS(a,n,s,Math.max(h,Math.floor(s-$*q/z+Y)),Math.min(f,Math.floor(s+(z-$)*q/z+Y)),v)}const x=n[2*s+v];let S=h,I=f;for(_h(a,n,h,s),n[2*f+v]>x&&_h(a,n,h,f);S<I;){for(_h(a,n,S,I),S++,I--;n[2*S+v]<x;)S++;for(;n[2*I+v]>x;)I--}n[2*h+v]===x?_h(a,n,h,I):(I++,_h(a,n,I,f)),I<=s&&(h=I+1),s<=I&&(f=I-1)}}function _h(a,n,s,h){d0(a,s,h),d0(n,2*s,2*h),d0(n,2*s+1,2*h+1)}function d0(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}function oS(a,n,s,h){const f=a-s,v=n-h;return f*f+v*v}var h0;l.bh=void 0,(h0=l.bh||(l.bh={})).create="create",h0.load="load",h0.fullLoad="fullLoad";let hm=null,xh=[];const p0=1e3/60,f0="loadTime",m0="fullLoadTime",gD={mark(a){performance.mark(a)},frame(a){const n=a;hm!=null&&xh.push(n-hm),hm=n},clearMetrics(){hm=null,xh=[],performance.clearMeasures(f0),performance.clearMeasures(m0);for(const a in l.bh)performance.clearMarks(l.bh[a])},getPerformanceMetrics(){performance.measure(f0,l.bh.create,l.bh.load),performance.measure(m0,l.bh.create,l.bh.fullLoad);const a=performance.getEntriesByName(f0)[0].duration,n=performance.getEntriesByName(m0)[0].duration,s=xh.length,h=1/(xh.reduce((v,x)=>v+x,0)/s/1e3),f=xh.filter(v=>v>p0).reduce((v,x)=>v+(x-p0)/p0,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};l.$=function(a,n,s){var h,f,v,x,S,I,z,$,j,q,Y,ee,le=s[0],me=s[1],ve=s[2];return n===a?(a[12]=n[0]*le+n[4]*me+n[8]*ve+n[12],a[13]=n[1]*le+n[5]*me+n[9]*ve+n[13],a[14]=n[2]*le+n[6]*me+n[10]*ve+n[14],a[15]=n[3]*le+n[7]*me+n[11]*ve+n[15]):(f=n[1],v=n[2],x=n[3],S=n[4],I=n[5],z=n[6],$=n[7],j=n[8],q=n[9],Y=n[10],ee=n[11],a[0]=h=n[0],a[1]=f,a[2]=v,a[3]=x,a[4]=S,a[5]=I,a[6]=z,a[7]=$,a[8]=j,a[9]=q,a[10]=Y,a[11]=ee,a[12]=h*le+S*me+j*ve+n[12],a[13]=f*le+I*me+q*ve+n[13],a[14]=v*le+z*me+Y*ve+n[14],a[15]=x*le+$*me+ee*ve+n[15]),a},l.A=Jc,l.B=Ki,l.C=class{constructor(a,n,s){this.receive=h=>{const f=h.data,v=f.id;if(v&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Fe()||f.mustQueue?(this.tasks[v]=f,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,f)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),f=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(h,f)},this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new aD(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Fe()?a:window}send(a,n,s,h,f=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],S={id:v,type:a,hasCallback:!!s,targetMapId:h,mustQueue:f,sourceMapId:this.mapId,data:ja(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(Hs(n.error)):s(null,Hs(n.data)))}else{let s=!1;const h=[],f=n.hasCallback?(S,I)=>{s=!0,delete this.cancelCallbacks[a];const z={id:a,type:"<response>",sourceMapId:this.mapId,error:S?ja(S):null,data:ja(I,h)};this.target.postMessage(z,{transfer:h})}:S=>{s=!0};let v=null;const x=Hs(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,f);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,f)}else f(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=Ut,l.E=Er,l.F=function(a,n){const s={};for(let h=0;h<n.length;h++){const f=n[h];f in a&&(s[f]=a[f])}return s},l.G=Aw,l.H=Rw,l.I=Xv,l.J=R,l.K=L,l.L=Js,l.M=at,l.N=Bn,l.O=To,l.P=M,l.Q=gn,l.R=Io,l.S=sn,l.T=jf,l.U=sm,l.V=class extends us{},l.W=a0,l.X=function(a,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<a.length;h++){const f=window.document.createElement("source");lr(a[h])||(s.crossOrigin="Anonymous"),f.src=a[h],s.appendChild(f)}return{cancel:()=>{}}},l.Y=Be,l.Z=function(){var a=new Jc(16);return Jc!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},l._=b,l.a=Oe,l.a$=class extends X{},l.a0=function(a,n,s){var h=s[0],f=s[1],v=s[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*f,a[5]=n[5]*f,a[6]=n[6]*f,a[7]=n[7]*f,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},l.a1=Ob,l.a2=function(){return Ce++},l.a3=pe,l.a4=nu,l.a5=function(){Yi.isLoading()||Yi.isLoaded()||Zd()!=="deferred"||Nf()},l.a6=Bd,l.a7=ql,l.a8=an,l.a9=jw,l.aA=jl,l.aB=function(a){a=a.slice();const n=Object.create(null);for(let s=0;s<a.length;s++)n[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=Dr(a[s],n[a[s].ref]));return a},l.aC=function(a){if(a.type==="custom")return new oD(a);switch(a.type){case"background":return new rD(a);case"circle":return new jz(a);case"fill":return new sM(a);case"fill-extrusion":return new wM(a);case"heatmap":return new Uz(a);case"hillshade":return new Wz(a);case"line":return new zM(a);case"raster":return new iD(a);case"symbol":return new am(a)}},l.aD=ze,l.aE=function(a,n){if(!a)return[{command:rr.setStyle,args:[n]}];let s=[];try{if(!qt(a.version,n.version))return[{command:rr.setStyle,args:[n]}];qt(a.center,n.center)||s.push({command:rr.setCenter,args:[n.center]}),qt(a.zoom,n.zoom)||s.push({command:rr.setZoom,args:[n.zoom]}),qt(a.bearing,n.bearing)||s.push({command:rr.setBearing,args:[n.bearing]}),qt(a.pitch,n.pitch)||s.push({command:rr.setPitch,args:[n.pitch]}),qt(a.sprite,n.sprite)||s.push({command:rr.setSprite,args:[n.sprite]}),qt(a.glyphs,n.glyphs)||s.push({command:rr.setGlyphs,args:[n.glyphs]}),qt(a.transition,n.transition)||s.push({command:rr.setTransition,args:[n.transition]}),qt(a.light,n.light)||s.push({command:rr.setLight,args:[n.light]});const h={},f=[];(function(x,S,I,z){let $;for($ in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,$)&&(Object.prototype.hasOwnProperty.call(S,$)||$r($,I,z));for($ in S)Object.prototype.hasOwnProperty.call(S,$)&&(Object.prototype.hasOwnProperty.call(x,$)?qt(x[$],S[$])||(x[$].type==="geojson"&&S[$].type==="geojson"&&cr(x,S,$)?I.push({command:rr.setGeoJSONSourceData,args:[$,S[$].data]}):dr($,S,I,z)):Fr($,S,I))})(a.sources,n.sources,f,h);const v=[];a.layers&&a.layers.forEach(x=>{h[x.source]?s.push({command:rr.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,S,I){S=S||[];const z=(x=x||[]).map(sr),$=S.map(sr),j=x.reduce(Ir,{}),q=S.reduce(Ir,{}),Y=z.slice(),ee=Object.create(null);let le,me,ve,Ae,we,Re,Ue;for(le=0,me=0;le<z.length;le++)ve=z[le],Object.prototype.hasOwnProperty.call(q,ve)?me++:(I.push({command:rr.removeLayer,args:[ve]}),Y.splice(Y.indexOf(ve,me),1));for(le=0,me=0;le<$.length;le++)ve=$[$.length-1-le],Y[Y.length-1-le]!==ve&&(Object.prototype.hasOwnProperty.call(j,ve)?(I.push({command:rr.removeLayer,args:[ve]}),Y.splice(Y.lastIndexOf(ve,Y.length-me),1)):me++,Re=Y[Y.length-le],I.push({command:rr.addLayer,args:[q[ve],Re]}),Y.splice(Y.length-le,0,ve),ee[ve]=!0);for(le=0;le<$.length;le++)if(ve=$[le],Ae=j[ve],we=q[ve],!ee[ve]&&!qt(Ae,we))if(qt(Ae.source,we.source)&&qt(Ae["source-layer"],we["source-layer"])&&qt(Ae.type,we.type)){for(Ue in Gt(Ae.layout,we.layout,I,ve,null,rr.setLayoutProperty),Gt(Ae.paint,we.paint,I,ve,null,rr.setPaintProperty),qt(Ae.filter,we.filter)||I.push({command:rr.setFilter,args:[ve,we.filter]}),qt(Ae.minzoom,we.minzoom)&&qt(Ae.maxzoom,we.maxzoom)||I.push({command:rr.setLayerZoomRange,args:[ve,we.minzoom,we.maxzoom]}),Ae)Object.prototype.hasOwnProperty.call(Ae,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Gt(Ae[Ue],we[Ue],I,ve,Ue.slice(6),rr.setPaintProperty):qt(Ae[Ue],we[Ue])||I.push({command:rr.setLayerProperty,args:[ve,Ue,we[Ue]]}));for(Ue in we)Object.prototype.hasOwnProperty.call(we,Ue)&&!Object.prototype.hasOwnProperty.call(Ae,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Gt(Ae[Ue],we[Ue],I,ve,Ue.slice(6),rr.setPaintProperty):qt(Ae[Ue],we[Ue])||I.push({command:rr.setLayerProperty,args:[ve,Ue,we[Ue]]}))}else I.push({command:rr.removeLayer,args:[ve]}),Re=Y[Y.lastIndexOf(ve)+1],I.push({command:rr.addLayer,args:[we,Re]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:rr.setStyle,args:[n]}]}return s},l.aF=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function a(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!a(n[h],s[h]))return!1;return!0}return n===s},l.aH=_e,l.aI=ke,l.aJ=Vl,l.aK=function(a){return a({pluginStatus:Li,pluginURL:Va}),Vl.on("pluginStateChange",a),a},l.aL=class extends ps{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},l.aM=Kc,l.aN=class extends ps{constructor(a,n){super(a,n),this.current=Pv}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},l.aO=Wf,l.aP=class extends ps{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},l.aQ=class extends ps{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},l.aR=Gf,l.aS=function(a,n,s,h,f,v,x){var S=1/(n-s),I=1/(h-f),z=1/(v-x);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*I,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*z,a[11]=0,a[12]=(n+s)*S,a[13]=(f+h)*I,a[14]=(x+v)*z,a[15]=1,a},l.aT=mr,l.aU=Nz,l.aV=class extends p{},l.aW=RM,l.aX=class extends _{},l.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},l.aZ=Ub,l.a_=dt,l.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,f,v)=>{const x=f||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.ab=function(a,n){const s=[];for(const h in a)h in n||s.push(h);return s},l.ac=function(a){if($e==null){const n=a.navigator?a.navigator.userAgent:null;$e=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return $e},l.ad=se,l.ae=function(a,n,s){var h=Math.sin(s),f=Math.cos(s),v=n[0],x=n[1],S=n[2],I=n[3],z=n[4],$=n[5],j=n[6],q=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*f+z*h,a[1]=x*f+$*h,a[2]=S*f+j*h,a[3]=I*f+q*h,a[4]=z*f-v*h,a[5]=$*f-x*h,a[6]=j*f-S*h,a[7]=q*f-I*h,a},l.af=function(a){var n=new Jc(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},l.ag=Xf,l.ah=function(a,n){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=a,S=f?se(Xi.interpolationFactor(f,n,v,x),0,1):0;a.kind==="camera"?h=Ki.number(a.minSize,a.maxSize,S):s=S}return{uSizeT:s,uSize:h}},l.aj=function(a,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:f}){return a.kind==="source"?h/Ha:a.kind==="composite"?Ki.number(h/Ha,f/Ha,s):n},l.ak=e0,l.al=function(a,n,s,h){const f=n.y-a.y,v=n.x-a.x,x=h.y-s.y,S=h.x-s.x,I=x*v-S*f;if(I===0)return null;const z=(S*(a.y-s.y)-x*(a.x-s.x))/I;return new M(a.x+z*v,a.y+z*f)},l.am=Ww,l.an=Db,l.ao=Av,l.ap=Wn,l.ar=Qv,l.as=function(a,n){var s=n[0],h=n[1],f=n[2],v=n[3],x=n[4],S=n[5],I=n[6],z=n[7],$=n[8],j=n[9],q=n[10],Y=n[11],ee=n[12],le=n[13],me=n[14],ve=n[15],Ae=s*S-h*x,we=s*I-f*x,Re=s*z-v*x,Ue=h*I-f*S,rt=h*z-v*S,It=f*z-v*I,Ot=$*le-j*ee,Ct=$*me-q*ee,_t=$*ve-Y*ee,ft=j*me-q*le,Rt=j*ve-Y*le,gt=q*ve-Y*me,ct=Ae*gt-we*Rt+Re*ft+Ue*_t-rt*Ct+It*Ot;return ct?(a[0]=(S*gt-I*Rt+z*ft)*(ct=1/ct),a[1]=(f*Rt-h*gt-v*ft)*ct,a[2]=(le*It-me*rt+ve*Ue)*ct,a[3]=(q*rt-j*It-Y*Ue)*ct,a[4]=(I*_t-x*gt-z*Ct)*ct,a[5]=(s*gt-f*_t+v*Ct)*ct,a[6]=(me*Re-ee*It-ve*we)*ct,a[7]=($*It-q*Re+Y*we)*ct,a[8]=(x*Rt-S*_t+z*Ot)*ct,a[9]=(h*_t-s*Rt-v*Ot)*ct,a[10]=(ee*rt-le*Re+ve*Ae)*ct,a[11]=(j*Re-$*rt-Y*Ae)*ct,a[12]=(S*Ct-x*ft-I*Ot)*ct,a[13]=(s*ft-h*Ct+f*Ot)*ct,a[14]=(le*we-ee*Ue-me*Ae)*ct,a[15]=($*Ue-j*we+q*Ae)*ct,a):null},l.at=l0,l.au=Yv,l.av=c0,l.aw=function(){const a={},n=je.$version;for(const s in je.$root){const h=je.$root[s];if(h.required){let f=null;f=s==="version"?n:h.type==="array"?[]:{},f!=null&&(a[s]=f)}}return a},l.ax=rr,l.ay=$f,l.az=pt,l.b=function(a,n){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=ai,l.b1=function(a,n){var s=a[0],h=a[1],f=a[2],v=a[3],x=a[4],S=a[5],I=a[6],z=a[7],$=a[8],j=a[9],q=a[10],Y=a[11],ee=a[12],le=a[13],me=a[14],ve=a[15],Ae=n[0],we=n[1],Re=n[2],Ue=n[3],rt=n[4],It=n[5],Ot=n[6],Ct=n[7],_t=n[8],ft=n[9],Rt=n[10],gt=n[11],ct=n[12],Xt=n[13],jt=n[14],gr=n[15];return Math.abs(s-Ae)<=Bi*Math.max(1,Math.abs(s),Math.abs(Ae))&&Math.abs(h-we)<=Bi*Math.max(1,Math.abs(h),Math.abs(we))&&Math.abs(f-Re)<=Bi*Math.max(1,Math.abs(f),Math.abs(Re))&&Math.abs(v-Ue)<=Bi*Math.max(1,Math.abs(v),Math.abs(Ue))&&Math.abs(x-rt)<=Bi*Math.max(1,Math.abs(x),Math.abs(rt))&&Math.abs(S-It)<=Bi*Math.max(1,Math.abs(S),Math.abs(It))&&Math.abs(I-Ot)<=Bi*Math.max(1,Math.abs(I),Math.abs(Ot))&&Math.abs(z-Ct)<=Bi*Math.max(1,Math.abs(z),Math.abs(Ct))&&Math.abs($-_t)<=Bi*Math.max(1,Math.abs($),Math.abs(_t))&&Math.abs(j-ft)<=Bi*Math.max(1,Math.abs(j),Math.abs(ft))&&Math.abs(q-Rt)<=Bi*Math.max(1,Math.abs(q),Math.abs(Rt))&&Math.abs(Y-gt)<=Bi*Math.max(1,Math.abs(Y),Math.abs(gt))&&Math.abs(ee-ct)<=Bi*Math.max(1,Math.abs(ee),Math.abs(ct))&&Math.abs(le-Xt)<=Bi*Math.max(1,Math.abs(le),Math.abs(Xt))&&Math.abs(me-jt)<=Bi*Math.max(1,Math.abs(me),Math.abs(jt))&&Math.abs(ve-gr)<=Bi*Math.max(1,Math.abs(ve),Math.abs(gr))},l.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},l.b3=function(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a[3]=n[3]*s[3],a},l.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},l.b5=ie,l.b6=Ow,l.b7=Lw,l.b8=function(a,n,s,h,f){var v,x=1/Math.tan(n/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,f!=null&&f!==1/0?(a[10]=(f+h)*(v=1/(h-f)),a[14]=2*f*h*v):(a[10]=-1,a[14]=-2*h),a},l.b9=function(a,n,s){var h=Math.sin(s),f=Math.cos(s),v=n[4],x=n[5],S=n[6],I=n[7],z=n[8],$=n[9],j=n[10],q=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*f+z*h,a[5]=x*f+$*h,a[6]=S*f+j*h,a[7]=I*f+q*h,a[8]=z*f-v*h,a[9]=$*f-x*h,a[10]=j*f-S*h,a[11]=q*f-I*h,a},l.bA=T,l.bB=uw,l.bC=Oc,l.bD=Yi,l.ba=re,l.bb=J,l.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},l.bd=class extends Wl{},l.be=i0,l.bf=$w,l.bg=gD,l.bi=Ze,l.bj=function(a,n,s=!1){if(Li===Ud||Li===Hd||Li===Wd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=Yt.resolveURL(a),Li=Ud,Gd=n,qd(),s||Nf()},l.bk=Zd,l.bl=function(a,n){const s={};for(let f=0;f<a.length;f++){const v=n&&n[a[f].id]||Vc(a[f]);n&&(n[a[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(a[f])}const h=[];for(const f in s)h.push(s[f]);return h},l.bm=Dt,l.bn=Nw,l.bo=Vw,l.bp=_w,l.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Bn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new an(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new an(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new an(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:$}=a.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new an(z),a.canonical),h["text-size"].possiblyEvaluate(new an($),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:$}=a.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new an(z),a.canonical),h["icon-size"].possiblyEvaluate(new an($),a.canonical)]}const v=s.get("text-line-height")*Wn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),I=s.get("text-size");for(const z of a.bucket.features){const $=s.get("text-font").evaluate(z,{},a.canonical).join(","),j=I.evaluate(z,{},a.canonical),q=f.layoutTextSize.evaluate(z,{},a.canonical),Y=f.layoutIconSize.evaluate(z,{},a.canonical),ee={horizontal:{},vertical:void 0},le=z.text;let me,ve=[0,0];if(le){const Re=le.toString(),Ue=s.get("text-letter-spacing").evaluate(z,{},a.canonical)*Wn,rt=jd(Re)?Ue:0,It=s.get("text-anchor").evaluate(z,{},a.canonical),Ot=eS(n,z,a.canonical);if(!Ot){const gt=s.get("text-radial-offset").evaluate(z,{},a.canonical);ve=gt?Qw(It,[gt*Wn,s0]):s.get("text-offset").evaluate(z,{},a.canonical).map(ct=>ct*Wn)}let Ct=x?"center":s.get("text-justify").evaluate(z,{},a.canonical);const _t=s.get("symbol-placement"),ft=_t==="point"?s.get("text-max-width").evaluate(z,{},a.canonical)*Wn:0,Rt=()=>{a.bucket.allowVerticalPlacement&&Nd(Re)&&(ee.vertical=nm(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,It,"left",rt,ve,l.ai.vertical,!0,_t,q,j))};if(!x&&Ot){const gt=new Set;if(Ct==="auto")for(let Xt=0;Xt<Ot.values.length;Xt+=2)gt.add(l0(Ot.values[Xt]));else gt.add(Ct);let ct=!1;for(const Xt of gt)if(!ee.horizontal[Xt])if(ct)ee.horizontal[Xt]=ee.horizontal[0];else{const jt=nm(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,"center",Xt,rt,ve,l.ai.horizontal,!1,_t,q,j);jt&&(ee.horizontal[Xt]=jt,ct=jt.positionedLines.length===1)}Rt()}else{Ct==="auto"&&(Ct=l0(It));const gt=nm(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,It,Ct,rt,ve,l.ai.horizontal,!1,_t,q,j);gt&&(ee.horizontal[Ct]=gt),Rt(),Nd(Re)&&x&&S&&(ee.vertical=nm(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,It,Ct,rt,ve,l.ai.vertical,!1,_t,q,j))}}let Ae=!1;if(z.icon&&z.icon.name){const Re=a.imageMap[z.icon.name];Re&&(me=JM(a.imagePositions[z.icon.name],s.get("icon-offset").evaluate(z,{},a.canonical),s.get("icon-anchor").evaluate(z,{},a.canonical)),Ae=!!Re.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Ae:a.bucket.sdfIcons!==Ae&&Ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Re.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const we=rS(ee.horizontal)||ee.vertical;a.bucket.iconsInText=!!we&&we.iconsInText,(we||me)&&fD(a.bucket,z,ee,me,a.imageMap,f,q,Y,ve,Ae,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},l.br=Gv,l.bs=Uv,l.bt=Wv,l.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},l.bv=Zv,l.bw=Zs,l.bx=function(a,n,s,h,f){return b(this,void 0,void 0,function*(){if(L())try{return yield at(a,n,s,h,f)}catch{}return function(v,x,S,I,z){const $=v.width,j=v.height;ut&&Pt||(ut=new OffscreenCanvas($,j),Pt=ut.getContext("2d",{willReadFrequently:!0})),ut.width=$,ut.height=j,Pt.drawImage(v,0,0,$,j);const q=Pt.getImageData(x,S,I,z);return Pt.clearRect(0,0,$,j),q.data}(a,n,s,h,f)})},l.by=Fw,l.bz=w,l.c=lt,l.d=function(a,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=et})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(h):et},l.e=Z,l.f=function(a,n){return Kt(Z(a,{type:"json"}),n)},l.g=yt,l.h=Yt,l.i=Fe,l.j=Mt,l.k=ur,l.l=Mr,l.m=Kt,l.n=function(a){return new Zv(a).readFields(WM,[])},l.o=function(a,n,s){if(!a.length)return s(null,[]);let h=a.length;const f=new Array(a.length);let v=null;a.forEach((x,S)=>{n(x,(I,z)=>{I&&(v=I),f[S]=z,--h==0&&s(v,f)})})},l.p=vw,l.q=sh,l.r=zn,l.s=lr,l.t=Cv,l.u=kt,l.v=je,l.w=Ye,l.x=Wc,l.y=ya,l.z=function([a,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(s),y:a*Math.sin(n)*Math.sin(s),z:a*Math.cos(s)}}}),d(["./shared"],function(l){class b{constructor(H){this.keyCache={},H&&this.replace(H)}replace(H){this._layerConfigs={},this._layers={},this.update(H,[])}update(H,G){for(const de of H){this._layerConfigs[de.id]=de;const fe=this._layers[de.id]=l.aC(de);fe._featureFilter=l.a6(fe.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(const de of G)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const te=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const de of te){const fe=de.map(ne=>this._layers[ne.id]),Me=fe[0];if(Me.visibility==="none")continue;const be=Me.source||"";let ye=this.familiesBySource[be];ye||(ye=this.familiesBySource[be]={});const Ee=Me.sourceLayer||"_geojsonTileLayer";let Je=ye[Ee];Je||(Je=ye[Ee]=[]),Je.push(fe)}}}class w{constructor(H){const G={},te=[];for(const be in H){const ye=H[be],Ee=G[be]={};for(const Je in ye){const ne=ye[+Je];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const oe={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};te.push(oe),Ee[Je]={rect:oe,metrics:ne.metrics}}}const{w:de,h:fe}=l.p(te),Me=new l.q({width:de||1,height:fe||1});for(const be in H){const ye=H[be];for(const Ee in ye){const Je=ye[+Ee];if(!Je||Je.bitmap.width===0||Je.bitmap.height===0)continue;const ne=G[be][Ee].rect;l.q.copy(Je.bitmap,Me,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Je.bitmap)}}this.image=Me,this.positions=G}}l.bm("GlyphAtlas",w);class T{constructor(H){this.tileID=new l.O(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(H,G,te,de,fe){this.status="parsing",this.data=H,this.collisionBoxArray=new l.a3;const Me=new l.bn(Object.keys(H.layers).sort()),be=new l.bo(this.tileID,this.promoteId);be.bucketLayerIDs=[];const ye={},Ee={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Je=G.familiesBySource[this.source];for(const Ke in Je){const Qe=H.layers[Ke];if(!Qe)continue;Qe.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ke}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $t=Me.encode(Ke),Tt=[];for(let er=0;er<Qe.length;er++){const or=Qe.feature(er),jr=be.getId(or,Ke);Tt.push({feature:or,id:jr,index:er,sourceLayerIndex:$t})}for(const er of Je[Ke]){const or=er[0];or.source!==this.source&&l.w(`layer.source = ${or.source} does not equal this.source = ${this.source}`),or.minzoom&&this.zoom<Math.floor(or.minzoom)||or.maxzoom&&this.zoom>=or.maxzoom||or.visibility!=="none"&&(E(er,this.zoom,te),(ye[or.id]=or.createBucket({index:be.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$t,sourceID:this.source})).populate(Tt,Ee,this.tileID.canonical),be.bucketLayerIDs.push(er.map(jr=>jr.id)))}}let ne,oe,Ie,Ve;const Xe=l.aH(Ee.glyphDependencies,Ke=>Object.keys(Ke).map(Number));this.inFlightDependencies.forEach(Ke=>Ke==null?void 0:Ke.cancel()),this.inFlightDependencies=[];const nt=++this.dependencySentinel;Object.keys(Xe).length?this.inFlightDependencies.push(de.send("getGlyphs",{uid:this.uid,stacks:Xe,source:this.source,tileID:this.tileID,type:"glyphs"},(Ke,Qe)=>{nt===this.dependencySentinel&&(ne||(ne=Ke,oe=Qe,qe.call(this)))})):oe={};const Se=Object.keys(Ee.iconDependencies);Se.length?this.inFlightDependencies.push(de.send("getImages",{icons:Se,source:this.source,tileID:this.tileID,type:"icons"},(Ke,Qe)=>{nt===this.dependencySentinel&&(ne||(ne=Ke,Ie=Qe,qe.call(this)))})):Ie={};const xe=Object.keys(Ee.patternDependencies);function qe(){if(ne)return fe(ne);if(oe&&Ie&&Ve){const Ke=new w(oe),Qe=new l.bp(Ie,Ve);for(const $t in ye){const Tt=ye[$t];Tt instanceof l.a4?(E(Tt.layers,this.zoom,te),l.bq({bucket:Tt,glyphMap:oe,glyphPositions:Ke.positions,imageMap:Ie,imagePositions:Qe.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tt.hasPattern&&(Tt instanceof l.br||Tt instanceof l.bs||Tt instanceof l.bt)&&(E(Tt.layers,this.zoom,te),Tt.addFeatures(Ee,this.tileID.canonical,Qe.patternPositions))}this.status="done",fe(null,{buckets:Object.values(ye).filter($t=>!$t.isEmpty()),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ke.image,imageAtlas:Qe,glyphMap:this.returnDependencies?oe:null,iconMap:this.returnDependencies?Ie:null,glyphPositions:this.returnDependencies?Ke.positions:null})}}xe.length?this.inFlightDependencies.push(de.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"patterns"},(Ke,Qe)=>{nt===this.dependencySentinel&&(ne||(ne=Ke,Ve=Qe,qe.call(this)))})):Ve={},qe.call(this)}}function E(he,H,G){const te=new l.a8(H);for(const de of he)de.recalculate(te,G)}function M(he,H){const G=l.l(he.request,(te,de,fe,Me)=>{if(te)H(te);else if(de)try{const be=new l.bw.VectorTile(new l.bv(de));H(null,{vectorTile:be,rawData:de,cacheControl:fe,expires:Me})}catch(be){const ye=new Uint8Array(de);let Ee=`Unable to parse the tile at ${he.request.url}, `;Ee+=ye[0]===31&&ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.messge}`,H(new Error(Ee))}});return()=>{G.cancel(),H()}}class O{constructor(H,G,te,de){this.actor=H,this.layerIndex=G,this.availableImages=te,this.loadVectorData=de||M,this.fetching={},this.loading={},this.loaded={}}loadTile(H,G){const te=H.uid;this.loading||(this.loading={});const de=!!(H&&H.request&&H.request.collectResourceTiming)&&new l.bu(H.request),fe=this.loading[te]=new T(H);fe.abort=this.loadVectorData(H,(Me,be)=>{if(delete this.loading[te],Me||!be)return fe.status="done",this.loaded[te]=fe,G(Me);const ye=be.rawData,Ee={};be.expires&&(Ee.expires=be.expires),be.cacheControl&&(Ee.cacheControl=be.cacheControl);const Je={};if(de){const ne=de.finish();ne&&(Je.resourceTiming=JSON.parse(JSON.stringify(ne)))}fe.vectorTile=be.vectorTile,fe.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,(ne,oe)=>{if(delete this.fetching[te],ne||!oe)return G(ne);G(null,l.e({rawTileData:ye.slice(0)},oe,Ee,Je))}),this.loaded=this.loaded||{},this.loaded[te]=fe,this.fetching[te]={rawTileData:ye,cacheControl:Ee,resourceTiming:Je}})}reloadTile(H,G){const te=this.loaded,de=H.uid;if(te&&te[de]){const fe=te[de];fe.showCollisionBoxes=H.showCollisionBoxes,fe.status==="parsing"?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Me,be)=>{if(Me||!be)return G(Me,be);let ye;if(this.fetching[de]){const{rawTileData:Ee,cacheControl:Je,resourceTiming:ne}=this.fetching[de];delete this.fetching[de],ye=l.e({rawTileData:Ee.slice(0)},be,Je,ne)}else ye=be;G(null,ye)}):fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}}abortTile(H,G){const te=this.loading,de=H.uid;te&&te[de]&&te[de].abort&&(te[de].abort(),delete te[de]),G()}removeTile(H,G){const te=this.loaded,de=H.uid;te&&te[de]&&delete te[de],G()}}class U{constructor(){this.loaded={}}loadTile(H,G){return l._(this,void 0,void 0,function*(){const{uid:te,encoding:de,rawImageData:fe,redFactor:Me,greenFactor:be,blueFactor:ye,baseShift:Ee}=H,Je=fe.width+2,ne=fe.height+2,oe=l.a(fe)?new l.R({width:Je,height:ne},yield l.bx(fe,-1,-1,Je,ne)):fe,Ie=new l.by(te,oe,de,Me,be,ye,Ee);this.loaded=this.loaded||{},this.loaded[te]=Ie,G(null,Ie)})}removeTile(H){const G=this.loaded,te=H.uid;G&&G[te]&&delete G[te]}}function V(he,H){if(he.length!==0){K(he[0],H);for(var G=1;G<he.length;G++)K(he[G],!H)}}function K(he,H){for(var G=0,te=0,de=0,fe=he.length,Me=fe-1;de<fe;Me=de++){var be=(he[de][0]-he[Me][0])*(he[Me][1]+he[de][1]),ye=G+be;te+=Math.abs(G)>=Math.abs(be)?G-ye+be:be-ye+G,G=ye}G+te>=0!=!!H&&he.reverse()}var F=l.bz(function he(H,G){var te,de=H&&H.type;if(de==="FeatureCollection")for(te=0;te<H.features.length;te++)he(H.features[te],G);else if(de==="GeometryCollection")for(te=0;te<H.geometries.length;te++)he(H.geometries[te],G);else if(de==="Feature")he(H.geometry,G);else if(de==="Polygon")V(H.coordinates,G);else if(de==="MultiPolygon")for(te=0;te<H.coordinates.length;te++)V(H.coordinates[te],G);return H});const R=l.bw.VectorTileFeature.prototype.toGeoJSON;var L={exports:{}},re=l.bA,J=l.bw.VectorTileFeature,se=ie;function ie(he,H){this.options=H||{},this.features=he,this.length=he.length}function Z(he,H){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=H||4096}ie.prototype.feature=function(he){return new Z(this.features[he],this.options.extent)},Z.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var H=0;H<he.length;H++){for(var G=he[H],te=[],de=0;de<G.length;de++)te.push(new re(G[de][0],G[de][1]));this.geometry.push(te)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,H=1/0,G=-1/0,te=1/0,de=-1/0,fe=0;fe<he.length;fe++)for(var Me=he[fe],be=0;be<Me.length;be++){var ye=Me[be];H=Math.min(H,ye.x),G=Math.max(G,ye.x),te=Math.min(te,ye.y),de=Math.max(de,ye.y)}return[H,te,G,de]},Z.prototype.toGeoJSON=J.prototype.toGeoJSON;var Ce=l.bB,_e=se;function ke(he){var H=new Ce;return function(G,te){for(var de in G.layers)te.writeMessage(3,ze,G.layers[de])}(he,H),H.finish()}function ze(he,H){var G;H.writeVarintField(15,he.version||1),H.writeStringField(1,he.name||""),H.writeVarintField(5,he.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<he.length;G++)te.feature=he.feature(G),H.writeMessage(2,Le,te);var de=te.keys;for(G=0;G<de.length;G++)H.writeStringField(3,de[G]);var fe=te.values;for(G=0;G<fe.length;G++)H.writeMessage(4,$e,fe[G])}function Le(he,H){var G=he.feature;G.id!==void 0&&H.writeVarintField(1,G.id),H.writeMessage(2,Ye,he),H.writeVarintField(3,G.type),H.writeMessage(4,Fe,G)}function Ye(he,H){var G=he.feature,te=he.keys,de=he.values,fe=he.keycache,Me=he.valuecache;for(var be in G.properties){var ye=G.properties[be],Ee=fe[be];if(ye!==null){Ee===void 0&&(te.push(be),fe[be]=Ee=te.length-1),H.writeVarint(Ee);var Je=typeof ye;Je!=="string"&&Je!=="boolean"&&Je!=="number"&&(ye=JSON.stringify(ye));var ne=Je+":"+ye,oe=Me[ne];oe===void 0&&(de.push(ye),Me[ne]=oe=de.length-1),H.writeVarint(oe)}}}function Ge(he,H){return(H<<3)+(7&he)}function Te(he){return he<<1^he>>31}function Fe(he,H){for(var G=he.loadGeometry(),te=he.type,de=0,fe=0,Me=G.length,be=0;be<Me;be++){var ye=G[be],Ee=1;te===1&&(Ee=ye.length),H.writeVarint(Ge(1,Ee));for(var Je=te===3?ye.length-1:ye.length,ne=0;ne<Je;ne++){ne===1&&te!==1&&H.writeVarint(Ge(2,Je-1));var oe=ye[ne].x-de,Ie=ye[ne].y-fe;H.writeVarint(Te(oe)),H.writeVarint(Te(Ie)),de+=oe,fe+=Ie}te===3&&H.writeVarint(Ge(7,1))}}function $e(he,H){var G=typeof he;G==="string"?H.writeStringField(1,he):G==="boolean"?H.writeBooleanField(7,he):G==="number"&&(he%1!=0?H.writeDoubleField(3,he):he<0?H.writeSVarintField(6,he):H.writeVarintField(5,he))}L.exports=ke,L.exports.fromVectorTileJs=ke,L.exports.fromGeojsonVt=function(he,H){H=H||{};var G={};for(var te in he)G[te]=new _e(he[te].features,H),G[te].name=te,G[te].version=H.version,G[te].extent=H.extent;return ke({layers:G})},L.exports.GeoJSONWrapper=_e;var Oe=l.bz(L.exports);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},at=Math.fround||(ut=new Float32Array(1),he=>(ut[0]=+he,ut[0]));var ut;const Pt=3,wt=5,zt=6;class Yt{constructor(H){this.options=Object.assign(Object.create(et),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:G,minZoom:te,maxZoom:de}=this.options;G&&console.time("total time");const fe=`prepare ${H.length} points`;G&&console.time(fe),this.points=H;const Me=[];for(let ye=0;ye<H.length;ye++){const Ee=H[ye];if(!Ee.geometry)continue;const[Je,ne]=Ee.geometry.coordinates,oe=at(pt(Je)),Ie=at(yt(ne));Me.push(oe,Ie,1/0,ye,-1,1),this.options.reduce&&Me.push(0)}let be=this.trees[de+1]=this._createTree(Me);G&&console.timeEnd(fe);for(let ye=de;ye>=te;ye--){const Ee=+Date.now();be=this.trees[ye]=this._createTree(this._cluster(be,ye)),G&&console.log("z%d: %d clusters in %dms",ye,be.numItems,+Date.now()-Ee)}return G&&console.timeEnd("total time"),this}getClusters(H,G){let te=((H[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,H[1]));let fe=H[2]===180?180:((H[2]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)te=-180,fe=180;else if(te>fe){const ne=this.getClusters([te,de,180,Me],G),oe=this.getClusters([-180,de,fe,Me],G);return ne.concat(oe)}const be=this.trees[this._limitZoom(G)],ye=be.range(pt(te),yt(Me),pt(fe),yt(de)),Ee=be.data,Je=[];for(const ne of ye){const oe=this.stride*ne;Je.push(Ee[oe+wt]>1?lt(Ee,oe,this.clusterProps):this.points[Ee[oe+Pt]])}return Je}getChildren(H){const G=this._getOriginId(H),te=this._getOriginZoom(H),de="No cluster with the specified id.",fe=this.trees[te];if(!fe)throw new Error(de);const Me=fe.data;if(G*this.stride>=Me.length)throw new Error(de);const be=this.options.radius/(this.options.extent*Math.pow(2,te-1)),ye=fe.within(Me[G*this.stride],Me[G*this.stride+1],be),Ee=[];for(const Je of ye){const ne=Je*this.stride;Me[ne+4]===H&&Ee.push(Me[ne+wt]>1?lt(Me,ne,this.clusterProps):this.points[Me[ne+Pt]])}if(Ee.length===0)throw new Error(de);return Ee}getLeaves(H,G,te){const de=[];return this._appendLeaves(de,H,G=G||10,te=te||0,0),de}getTile(H,G,te){const de=this.trees[this._limitZoom(H)],fe=Math.pow(2,H),{extent:Me,radius:be}=this.options,ye=be/Me,Ee=(te-ye)/fe,Je=(te+1+ye)/fe,ne={features:[]};return this._addTileFeatures(de.range((G-ye)/fe,Ee,(G+1+ye)/fe,Je),de.data,G,te,fe,ne),G===0&&this._addTileFeatures(de.range(1-ye/fe,Ee,1,Je),de.data,fe,te,fe,ne),G===fe-1&&this._addTileFeatures(de.range(0,Ee,ye/fe,Je),de.data,-1,te,fe,ne),ne.features.length?ne:null}getClusterExpansionZoom(H){let G=this._getOriginZoom(H)-1;for(;G<=this.options.maxZoom;){const te=this.getChildren(H);if(G++,te.length!==1)break;H=te[0].properties.cluster_id}return G}_appendLeaves(H,G,te,de,fe){const Me=this.getChildren(G);for(const be of Me){const ye=be.properties;if(ye&&ye.cluster?fe+ye.point_count<=de?fe+=ye.point_count:fe=this._appendLeaves(H,ye.cluster_id,te,de,fe):fe<de?fe++:H.push(be),H.length===te)break}return fe}_createTree(H){const G=new l.av(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<H.length;te+=this.stride)G.add(H[te],H[te+1]);return G.finish(),G.data=H,G}_addTileFeatures(H,G,te,de,fe,Me){for(const be of H){const ye=be*this.stride,Ee=G[ye+wt]>1;let Je,ne,oe;if(Ee)Je=Ze(G,ye,this.clusterProps),ne=G[ye],oe=G[ye+1];else{const Xe=this.points[G[ye+Pt]];Je=Xe.properties;const[nt,Se]=Xe.geometry.coordinates;ne=pt(nt),oe=yt(Se)}const Ie={type:1,geometry:[[Math.round(this.options.extent*(ne*fe-te)),Math.round(this.options.extent*(oe*fe-de))]],tags:Je};let Ve;Ve=Ee||this.options.generateId?G[ye+Pt]:this.points[G[ye+Pt]].id,Ve!==void 0&&(Ie.id=Ve),Me.features.push(Ie)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,G){const{radius:te,extent:de,reduce:fe,minPoints:Me}=this.options,be=te/(de*Math.pow(2,G)),ye=H.data,Ee=[],Je=this.stride;for(let ne=0;ne<ye.length;ne+=Je){if(ye[ne+2]<=G)continue;ye[ne+2]=G;const oe=ye[ne],Ie=ye[ne+1],Ve=H.within(ye[ne],ye[ne+1],be),Xe=ye[ne+wt];let nt=Xe;for(const Se of Ve){const xe=Se*Je;ye[xe+2]>G&&(nt+=ye[xe+wt])}if(nt>Xe&&nt>=Me){let Se,xe=oe*Xe,qe=Ie*Xe,Ke=-1;const Qe=((ne/Je|0)<<5)+(G+1)+this.points.length;for(const $t of Ve){const Tt=$t*Je;if(ye[Tt+2]<=G)continue;ye[Tt+2]=G;const er=ye[Tt+wt];xe+=ye[Tt]*er,qe+=ye[Tt+1]*er,ye[Tt+4]=Qe,fe&&(Se||(Se=this._map(ye,ne,!0),Ke=this.clusterProps.length,this.clusterProps.push(Se)),fe(Se,this._map(ye,Tt)))}ye[ne+4]=Qe,Ee.push(xe/nt,qe/nt,1/0,Qe,-1,nt),fe&&Ee.push(Ke)}else{for(let Se=0;Se<Je;Se++)Ee.push(ye[ne+Se]);if(nt>1)for(const Se of Ve){const xe=Se*Je;if(!(ye[xe+2]<=G)){ye[xe+2]=G;for(let qe=0;qe<Je;qe++)Ee.push(ye[xe+qe])}}}}return Ee}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,G,te){if(H[G+wt]>1){const Me=this.clusterProps[H[G+zt]];return te?Object.assign({},Me):Me}const de=this.points[H[G+Pt]].properties,fe=this.options.map(de);return te&&fe===de?Object.assign({},fe):fe}}function lt(he,H,G){return{type:"Feature",id:he[H+Pt],properties:Ze(he,H,G),geometry:{type:"Point",coordinates:[(te=he[H],360*(te-.5)),ar(he[H+1])]}};var te}function Ze(he,H,G){const te=he[H+wt],de=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,fe=he[H+zt],Me=fe===-1?{}:Object.assign({},G[fe]);return Object.assign(Me,{cluster:!0,cluster_id:he[H+Pt],point_count:te,point_count_abbreviated:de})}function pt(he){return he/360+.5}function yt(he){const H=Math.sin(he*Math.PI/180),G=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return G<0?0:G>1?1:G}function ar(he){const H=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Kt(he,H,G,te){for(var de,fe=te,Me=G-H>>1,be=G-H,ye=he[H],Ee=he[H+1],Je=he[G],ne=he[G+1],oe=H+3;oe<G;oe+=3){var Ie=Mr(he[oe],he[oe+1],ye,Ee,Je,ne);if(Ie>fe)de=oe,fe=Ie;else if(Ie===fe){var Ve=Math.abs(oe-Me);Ve<be&&(de=oe,be=Ve)}}fe>te&&(de-H>3&&Kt(he,H,de,te),he[de+2]=fe,G-de>3&&Kt(he,de,G,te))}function Mr(he,H,G,te,de,fe){var Me=de-G,be=fe-te;if(Me!==0||be!==0){var ye=((he-G)*Me+(H-te)*be)/(Me*Me+be*be);ye>1?(G=de,te=fe):ye>0&&(G+=Me*ye,te+=be*ye)}return(Me=he-G)*Me+(be=H-te)*be}function lr(he,H,G,te){var de={id:he===void 0?null:he,type:H,geometry:G,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var Me=fe.geometry,be=fe.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")Vt(fe,Me);else if(be==="Polygon"||be==="MultiLineString")for(var ye=0;ye<Me.length;ye++)Vt(fe,Me[ye]);else if(be==="MultiPolygon")for(ye=0;ye<Me.length;ye++)for(var Ee=0;Ee<Me[ye].length;Ee++)Vt(fe,Me[ye][Ee])}(de),de}function Vt(he,H){for(var G=0;G<H.length;G+=3)he.minX=Math.min(he.minX,H[G]),he.minY=Math.min(he.minY,H[G+1]),he.maxX=Math.max(he.maxX,H[G]),he.maxY=Math.max(he.maxY,H[G+1])}function Et(he,H,G,te){if(H.geometry){var de=H.geometry.coordinates,fe=H.geometry.type,Me=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),be=[],ye=H.id;if(G.promoteId?ye=H.properties[G.promoteId]:G.generateId&&(ye=te||0),fe==="Point")ur(de,be);else if(fe==="MultiPoint")for(var Ee=0;Ee<de.length;Ee++)ur(de[Ee],be);else if(fe==="LineString")Mt(de,be,Me,!1);else if(fe==="MultiLineString"){if(G.lineMetrics){for(Ee=0;Ee<de.length;Ee++)Mt(de[Ee],be=[],Me,!1),he.push(lr(ye,"LineString",be,H.properties));return}Er(de,be,Me,!1)}else if(fe==="Polygon")Er(de,be,Me,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(Ee=0;Ee<H.geometry.geometries.length;Ee++)Et(he,{id:ye,geometry:H.geometry.geometries[Ee],properties:H.properties},G,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<de.length;Ee++){var Je=[];Er(de[Ee],Je,Me,!0),be.push(Je)}}he.push(lr(ye,fe,be,H.properties))}}function ur(he,H){H.push(je(he[0])),H.push(wr(he[1])),H.push(0)}function Mt(he,H,G,te){for(var de,fe,Me=0,be=0;be<he.length;be++){var ye=je(he[be][0]),Ee=wr(he[be][1]);H.push(ye),H.push(Ee),H.push(0),be>0&&(Me+=te?(de*Ee-ye*fe)/2:Math.sqrt(Math.pow(ye-de,2)+Math.pow(Ee-fe,2))),de=ye,fe=Ee}var Je=H.length-3;H[2]=1,Kt(H,0,Je,G),H[Je+2]=1,H.size=Math.abs(Me),H.start=0,H.end=H.size}function Er(he,H,G,te){for(var de=0;de<he.length;de++){var fe=[];Mt(he[de],fe,G,te),H.push(fe)}}function je(he){return he/360+.5}function wr(he){var H=Math.sin(he*Math.PI/180),G=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return G<0?0:G>1?1:G}function Dr(he,H,G,te,de,fe,Me,be){if(te/=H,fe>=(G/=H)&&Me<te)return he;if(Me<G||fe>=te)return null;for(var ye=[],Ee=0;Ee<he.length;Ee++){var Je=he[Ee],ne=Je.geometry,oe=Je.type,Ie=de===0?Je.minX:Je.minY,Ve=de===0?Je.maxX:Je.maxY;if(Ie>=G&&Ve<te)ye.push(Je);else if(!(Ve<G||Ie>=te)){var Xe=[];if(oe==="Point"||oe==="MultiPoint")qt(ne,Xe,G,te,de);else if(oe==="LineString")rr(ne,Xe,G,te,de,!1,be.lineMetrics);else if(oe==="MultiLineString")$r(ne,Xe,G,te,de,!1);else if(oe==="Polygon")$r(ne,Xe,G,te,de,!0);else if(oe==="MultiPolygon")for(var nt=0;nt<ne.length;nt++){var Se=[];$r(ne[nt],Se,G,te,de,!0),Se.length&&Xe.push(Se)}if(Xe.length){if(be.lineMetrics&&oe==="LineString"){for(nt=0;nt<Xe.length;nt++)ye.push(lr(Je.id,oe,Xe[nt],Je.tags));continue}oe!=="LineString"&&oe!=="MultiLineString"||(Xe.length===1?(oe="LineString",Xe=Xe[0]):oe="MultiLineString"),oe!=="Point"&&oe!=="MultiPoint"||(oe=Xe.length===3?"Point":"MultiPoint"),ye.push(lr(Je.id,oe,Xe,Je.tags))}}}return ye.length?ye:null}function qt(he,H,G,te,de){for(var fe=0;fe<he.length;fe+=3){var Me=he[fe+de];Me>=G&&Me<=te&&(H.push(he[fe]),H.push(he[fe+1]),H.push(he[fe+2]))}}function rr(he,H,G,te,de,fe,Me){for(var be,ye,Ee=Fr(he),Je=de===0?cr:Gt,ne=he.start,oe=0;oe<he.length-3;oe+=3){var Ie=he[oe],Ve=he[oe+1],Xe=he[oe+2],nt=he[oe+3],Se=he[oe+4],xe=de===0?Ie:Ve,qe=de===0?nt:Se,Ke=!1;Me&&(be=Math.sqrt(Math.pow(Ie-nt,2)+Math.pow(Ve-Se,2))),xe<G?qe>G&&(ye=Je(Ee,Ie,Ve,nt,Se,G),Me&&(Ee.start=ne+be*ye)):xe>te?qe<te&&(ye=Je(Ee,Ie,Ve,nt,Se,te),Me&&(Ee.start=ne+be*ye)):dr(Ee,Ie,Ve,Xe),qe<G&&xe>=G&&(ye=Je(Ee,Ie,Ve,nt,Se,G),Ke=!0),qe>te&&xe<=te&&(ye=Je(Ee,Ie,Ve,nt,Se,te),Ke=!0),!fe&&Ke&&(Me&&(Ee.end=ne+be*ye),H.push(Ee),Ee=Fr(he)),Me&&(ne+=be)}var Qe=he.length-3;Ie=he[Qe],Ve=he[Qe+1],Xe=he[Qe+2],(xe=de===0?Ie:Ve)>=G&&xe<=te&&dr(Ee,Ie,Ve,Xe),Qe=Ee.length-3,fe&&Qe>=3&&(Ee[Qe]!==Ee[0]||Ee[Qe+1]!==Ee[1])&&dr(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&H.push(Ee)}function Fr(he){var H=[];return H.size=he.size,H.start=he.start,H.end=he.end,H}function $r(he,H,G,te,de,fe){for(var Me=0;Me<he.length;Me++)rr(he[Me],H,G,te,de,fe,!1)}function dr(he,H,G,te){he.push(H),he.push(G),he.push(te)}function cr(he,H,G,te,de,fe){var Me=(fe-H)/(te-H);return he.push(fe),he.push(G+(de-G)*Me),he.push(1),Me}function Gt(he,H,G,te,de,fe){var Me=(fe-G)/(de-G);return he.push(H+(te-H)*Me),he.push(fe),he.push(1),Me}function sr(he,H){for(var G=[],te=0;te<he.length;te++){var de,fe=he[te],Me=fe.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")de=Ir(fe.geometry,H);else if(Me==="MultiLineString"||Me==="Polygon"){de=[];for(var be=0;be<fe.geometry.length;be++)de.push(Ir(fe.geometry[be],H))}else if(Me==="MultiPolygon")for(de=[],be=0;be<fe.geometry.length;be++){for(var ye=[],Ee=0;Ee<fe.geometry[be].length;Ee++)ye.push(Ir(fe.geometry[be][Ee],H));de.push(ye)}G.push(lr(fe.id,Me,de,fe.tags))}return G}function Ir(he,H){var G=[];G.size=he.size,he.start!==void 0&&(G.start=he.start,G.end=he.end);for(var te=0;te<he.length;te+=3)G.push(he[te]+H,he[te+1],he[te+2]);return G}function Be(he,H){if(he.transformed)return he;var G,te,de,fe=1<<he.z,Me=he.x,be=he.y;for(G=0;G<he.features.length;G++){var ye=he.features[G],Ee=ye.geometry,Je=ye.type;if(ye.geometry=[],Je===1)for(te=0;te<Ee.length;te+=2)ye.geometry.push(xt(Ee[te],Ee[te+1],H,fe,Me,be));else for(te=0;te<Ee.length;te++){var ne=[];for(de=0;de<Ee[te].length;de+=2)ne.push(xt(Ee[te][de],Ee[te][de+1],H,fe,Me,be));ye.geometry.push(ne)}}return he.transformed=!0,he}function xt(he,H,G,te,de,fe){return[Math.round(G*(he*te-de)),Math.round(G*(H*te-fe))]}function St(he,H,G,te,de){for(var fe=H===de.maxZoom?0:de.tolerance/((1<<H)*de.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:te,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},be=0;be<he.length;be++){Me.numFeatures++,Qt(Me,he[be],fe,de);var ye=he[be].minX,Ee=he[be].minY,Je=he[be].maxX,ne=he[be].maxY;ye<Me.minX&&(Me.minX=ye),Ee<Me.minY&&(Me.minY=Ee),Je>Me.maxX&&(Me.maxX=Je),ne>Me.maxY&&(Me.maxY=ne)}return Me}function Qt(he,H,G,te){var de=H.geometry,fe=H.type,Me=[];if(fe==="Point"||fe==="MultiPoint")for(var be=0;be<de.length;be+=3)Me.push(de[be]),Me.push(de[be+1]),he.numPoints++,he.numSimplified++;else if(fe==="LineString")vn(Me,de,he,G,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(be=0;be<de.length;be++)vn(Me,de[be],he,G,fe==="Polygon",be===0);else if(fe==="MultiPolygon")for(var ye=0;ye<de.length;ye++){var Ee=de[ye];for(be=0;be<Ee.length;be++)vn(Me,Ee[be],he,G,!0,be===0)}if(Me.length){var Je=H.tags||null;if(fe==="LineString"&&te.lineMetrics){for(var ne in Je={},H.tags)Je[ne]=H.tags[ne];Je.mapbox_clip_start=de.start/de.size,Je.mapbox_clip_end=de.end/de.size}var oe={geometry:Me,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:Je};H.id!==null&&(oe.id=H.id),he.features.push(oe)}}function vn(he,H,G,te,de,fe){var Me=te*te;if(te>0&&H.size<(de?Me:te))G.numPoints+=H.length/3;else{for(var be=[],ye=0;ye<H.length;ye+=3)(te===0||H[ye+2]>Me)&&(G.numSimplified++,be.push(H[ye]),be.push(H[ye+1])),G.numPoints++;de&&function(Ee,Je){for(var ne=0,oe=0,Ie=Ee.length,Ve=Ie-2;oe<Ie;Ve=oe,oe+=2)ne+=(Ee[oe]-Ee[Ve])*(Ee[oe+1]+Ee[Ve+1]);if(ne>0===Je)for(oe=0,Ie=Ee.length;oe<Ie/2;oe+=2){var Xe=Ee[oe],nt=Ee[oe+1];Ee[oe]=Ee[Ie-2-oe],Ee[oe+1]=Ee[Ie-1-oe],Ee[Ie-2-oe]=Xe,Ee[Ie-1-oe]=nt}}(be,fe),he.push(be)}}function it(he,H){var G=(H=this.options=function(de,fe){for(var Me in fe)de[Me]=fe[Me];return de}(Object.create(this.options),H)).debug;if(G&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(de,fe){var Me=[];if(de.type==="FeatureCollection")for(var be=0;be<de.features.length;be++)Et(Me,de.features[be],fe,be);else Et(Me,de.type==="Feature"?de:{geometry:de},fe);return Me}(he,H);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(de,fe){var Me=fe.buffer/fe.extent,be=de,ye=Dr(de,1,-1-Me,Me,0,-1,2,fe),Ee=Dr(de,1,1-Me,2+Me,0,-1,2,fe);return(ye||Ee)&&(be=Dr(de,1,-Me,1+Me,0,-1,2,fe)||[],ye&&(be=sr(ye,1).concat(be)),Ee&&(be=be.concat(sr(Ee,-1)))),be}(te,H),te.length&&this.splitTile(te,0,0,0),G&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Jt(he,H,G){return 32*((1<<he)*G+H)+he}function Ft(he,H){return H?he.properties[H]:he.id}function hr(he,H){if(he==null)return!0;if(he.type==="Feature")return Ft(he,H)!=null;if(he.type==="FeatureCollection"){const G=new Set;for(const te of he.features){const de=Ft(te,H);if(de==null||G.has(de))return!1;G.add(de)}return!0}return!1}function vr(he,H){const G=new Map;if(he!=null)if(he.type==="Feature")G.set(Ft(he,H),he);else for(const te of he.features)G.set(Ft(te,H),te);return G}it.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},it.prototype.splitTile=function(he,H,G,te,de,fe,Me){for(var be=[he,H,G,te],ye=this.options,Ee=ye.debug;be.length;){te=be.pop(),G=be.pop(),H=be.pop(),he=be.pop();var Je=1<<H,ne=Jt(H,G,te),oe=this.tiles[ne];if(!oe&&(Ee>1&&console.time("creation"),oe=this.tiles[ne]=St(he,H,G,te,ye),this.tileCoords.push({z:H,x:G,y:te}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,G,te,oe.numFeatures,oe.numPoints,oe.numSimplified),console.timeEnd("creation"));var Ie="z"+H;this.stats[Ie]=(this.stats[Ie]||0)+1,this.total++}if(oe.source=he,de){if(H===ye.maxZoom||H===de)continue;var Ve=1<<de-H;if(G!==Math.floor(fe/Ve)||te!==Math.floor(Me/Ve))continue}else if(H===ye.indexMaxZoom||oe.numPoints<=ye.indexMaxPoints)continue;if(oe.source=null,he.length!==0){Ee>1&&console.time("clipping");var Xe,nt,Se,xe,qe,Ke,Qe=.5*ye.buffer/ye.extent,$t=.5-Qe,Tt=.5+Qe,er=1+Qe;Xe=nt=Se=xe=null,qe=Dr(he,Je,G-Qe,G+Tt,0,oe.minX,oe.maxX,ye),Ke=Dr(he,Je,G+$t,G+er,0,oe.minX,oe.maxX,ye),he=null,qe&&(Xe=Dr(qe,Je,te-Qe,te+Tt,1,oe.minY,oe.maxY,ye),nt=Dr(qe,Je,te+$t,te+er,1,oe.minY,oe.maxY,ye),qe=null),Ke&&(Se=Dr(Ke,Je,te-Qe,te+Tt,1,oe.minY,oe.maxY,ye),xe=Dr(Ke,Je,te+$t,te+er,1,oe.minY,oe.maxY,ye),Ke=null),Ee>1&&console.timeEnd("clipping"),be.push(Xe||[],H+1,2*G,2*te),be.push(nt||[],H+1,2*G,2*te+1),be.push(Se||[],H+1,2*G+1,2*te),be.push(xe||[],H+1,2*G+1,2*te+1)}}},it.prototype.getTile=function(he,H,G){var te=this.options,de=te.extent,fe=te.debug;if(he<0||he>24)return null;var Me=1<<he,be=Jt(he,H=(H%Me+Me)%Me,G);if(this.tiles[be])return Be(this.tiles[be],de);fe>1&&console.log("drilling down to z%d-%d-%d",he,H,G);for(var ye,Ee=he,Je=H,ne=G;!ye&&Ee>0;)Ee--,Je=Math.floor(Je/2),ne=Math.floor(ne/2),ye=this.tiles[Jt(Ee,Je,ne)];return ye&&ye.source?(fe>1&&console.log("found parent tile z%d-%d-%d",Ee,Je,ne),fe>1&&console.time("drilling down"),this.splitTile(ye.source,Ee,Je,ne,he,H,G),fe>1&&console.timeEnd("drilling down"),this.tiles[be]?Be(this.tiles[be],de):null):null};class Lt extends O{constructor(H,G,te,de){super(H,G,te),this._dataUpdateable=new Map,this.loadGeoJSON=(fe,Me)=>{const{promoteId:be}=fe;if(fe.request)return l.f(fe.request,(ye,Ee,Je,ne)=>{this._dataUpdateable=hr(Ee,be)?vr(Ee,be):void 0,Me(ye,Ee,Je,ne)});if(typeof fe.data=="string")try{const ye=JSON.parse(fe.data);this._dataUpdateable=hr(ye,be)?vr(ye,be):void 0,Me(null,ye)}catch{Me(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else fe.dataDiff?this._dataUpdateable?(function(ye,Ee,Je){var ne,oe,Ie,Ve;if(Ee.removeAll&&ye.clear(),Ee.remove)for(const Xe of Ee.remove)ye.delete(Xe);if(Ee.add)for(const Xe of Ee.add){const nt=Ft(Xe,Je);nt!=null&&ye.set(nt,Xe)}if(Ee.update)for(const Xe of Ee.update){let nt=ye.get(Xe.id);if(nt==null)continue;const Se=!Xe.removeAllProperties&&(((ne=Xe.removeProperties)===null||ne===void 0?void 0:ne.length)>0||((oe=Xe.addOrUpdateProperties)===null||oe===void 0?void 0:oe.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||Se)&&(nt=Object.assign({},nt),ye.set(Xe.id,nt),Se&&(nt.properties=Object.assign({},nt.properties))),Xe.newGeometry&&(nt.geometry=Xe.newGeometry),Xe.removeAllProperties)nt.properties={};else if(((Ie=Xe.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(const xe of Xe.removeProperties)Object.prototype.hasOwnProperty.call(nt.properties,xe)&&delete nt.properties[xe];if(((Ve=Xe.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0)for(const{key:xe,value:qe}of Xe.addOrUpdateProperties)nt.properties[xe]=qe}}(this._dataUpdateable,fe.dataDiff,be),Me(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Me(new Error(`Cannot update existing geojson data in ${fe.source}`)):Me(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,de&&(this.loadGeoJSON=de)}loadGeoJSONTile(H,G){const te=H.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);const de=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!de)return G(null,null);const fe=new class{constructor(be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=be.length,this._features=be}feature(be){return new class{constructor(ye){this._feature=ye,this.extent=l.N,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Ee of this._feature.geometry)ye.push([new l.P(Ee[0],Ee[1])]);return ye}{const ye=[];for(const Ee of this._feature.geometry){const Je=[];for(const ne of Ee)Je.push(new l.P(ne[0],ne[1]));ye.push(Je)}return ye}}toGeoJSON(ye,Ee,Je){return R.call(this,ye,Ee,Je)}}(this._features[be])}}(de.features);let Me=Oe(fe);Me.byteOffset===0&&Me.byteLength===Me.buffer.byteLength||(Me=new Uint8Array(Me)),G(null,{vectorTile:fe,rawData:Me.buffer})}loadData(H,G){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const de=!!(H&&H.request&&H.request.collectResourceTiming)&&new l.bu(H.request);this._pendingCallback=G,this._pendingRequest=this.loadGeoJSON(H,(fe,Me)=>{if(delete this._pendingCallback,delete this._pendingRequest,fe||!Me)return G(fe);if(typeof Me!="object")return G(new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`));{F(Me,!0);try{if(H.filter){const ye=l.bC(H.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(Je=>`${Je.key}: ${Je.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(Je=>ye.value.evaluate({zoom:0},Je))}}this._geoJSONIndex=H.cluster?new Yt(function({superclusterOptions:ye,clusterProperties:Ee}){if(!Ee||!ye)return ye;const Je={},ne={},oe={accumulated:null,zoom:0},Ie={properties:null},Ve=Object.keys(Ee);for(const Xe of Ve){const[nt,Se]=Ee[Xe],xe=l.bC(Se),qe=l.bC(typeof nt=="string"?[nt,["accumulated"],["get",Xe]]:nt);Je[Xe]=xe.value,ne[Xe]=qe.value}return ye.map=Xe=>{Ie.properties=Xe;const nt={};for(const Se of Ve)nt[Se]=Je[Se].evaluate(oe,Ie);return nt},ye.reduce=(Xe,nt)=>{Ie.properties=nt;for(const Se of Ve)oe.accumulated=Xe[Se],Xe[Se]=ne[Se].evaluate(oe,Ie)},ye}(H)).load(Me.features):function(ye,Ee){return new it(ye,Ee)}(Me,H.geojsonVtOptions)}catch(ye){return G(ye)}this.loaded={};const be={};if(de){const ye=de.finish();ye&&(be.resourceTiming={},be.resourceTiming[H.source]=JSON.parse(JSON.stringify(ye)))}G(null,be)}})}reloadTile(H,G){const te=this.loaded;return te&&te[H.uid]?super.reloadTile(H,G):this.loadTile(H,G)}removeSource(H,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()}getClusterExpansionZoom(H,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(H.clusterId))}catch(te){G(te)}}getClusterChildren(H,G){try{G(null,this._geoJSONIndex.getChildren(H.clusterId))}catch(te){G(te)}}getClusterLeaves(H,G){try{G(null,this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset))}catch(te){G(te)}}}class Nr{constructor(H){this.self=H,this.actor=new l.C(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:O,geojson:Lt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,te)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=te},this.self.registerRTLTextPlugin=G=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=G.applyArabicShaping,l.bD.processBidirectionalText=G.processBidirectionalText,l.bD.processStyledBidirectionalText=G.processStyledBidirectionalText}}setReferrer(H,G){this.referrer=G}setImages(H,G,te){this.availableImages[H]=G;for(const de in this.workerSources[H]){const fe=this.workerSources[H][de];for(const Me in fe)fe[Me].availableImages=G}te()}setLayers(H,G,te){this.getLayerIndex(H).replace(G),te()}updateLayers(H,G,te){this.getLayerIndex(H).update(G.layers,G.removedIds),te()}loadTile(H,G,te){this.getWorkerSource(H,G.type,G.source).loadTile(G,te)}loadDEMTile(H,G,te){this.getDEMWorkerSource(H,G.source).loadTile(G,te)}reloadTile(H,G,te){this.getWorkerSource(H,G.type,G.source).reloadTile(G,te)}abortTile(H,G,te){this.getWorkerSource(H,G.type,G.source).abortTile(G,te)}removeTile(H,G,te){this.getWorkerSource(H,G.type,G.source).removeTile(G,te)}removeDEMTile(H,G){this.getDEMWorkerSource(H,G.source).removeTile(G)}removeSource(H,G,te){if(!this.workerSources[H]||!this.workerSources[H][G.type]||!this.workerSources[H][G.type][G.source])return;const de=this.workerSources[H][G.type][G.source];delete this.workerSources[H][G.type][G.source],de.removeSource!==void 0?de.removeSource(G,te):te()}loadWorkerSource(H,G,te){try{this.self.importScripts(G.url),te()}catch(de){te(de.toString())}}syncRTLPluginState(H,G,te){try{l.bD.setState(G);const de=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&de!=null){this.self.importScripts(de);const fe=l.bD.isParsed();te(fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${de}`),fe)}}catch(de){te(de.toString())}}getAvailableImages(H){let G=this.availableImages[H];return G||(G=[]),G}getLayerIndex(H){let G=this.layerIndexes[H];return G||(G=this.layerIndexes[H]=new b),G}getWorkerSource(H,G,te){return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][G]||(this.workerSources[H][G]={}),this.workerSources[H][G][te]||(this.workerSources[H][G][te]=new this.workerSourceTypes[G]({send:(de,fe,Me)=>{this.actor.send(de,fe,Me,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][G][te]}getDEMWorkerSource(H,G){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][G]||(this.demWorkerSources[H][G]=new U),this.demWorkerSources[H][G]}}return l.i()&&(self.worker=new Nr(self)),Nr}),d(["./shared"],function(l){var b="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,p){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,p,g={}){i.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(i,u,p,g={}){i.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new l.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new l.P(u[_].clientX-p.left-i.clientLeft,u[_].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(y){!O&&M&&(U?V(y):E=y)}};let E,M,O=!1,U=!1;function V(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,M),y.isContextLost())return;T.supported=!0}catch{}y.deleteTexture(i),O=!0}var K,F;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){E&&V(E),E=null,U=!0},M.onerror=function(){O=!0,E=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,g;y.resetRequestQueue=()=>{i=[],u=0,p=0,g={}},y.addThrottleControl=D=>{const B=p++;return g[B]=D,B},y.removeThrottleControl=D=>{delete g[D],k()},y.getImage=(D,B,N=!0)=>{T.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const X={requestParameters:D,supportImageRefresh:N,callback:B,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),u--),k())}};return i.push(X),k(),X};const _=D=>{const{requestParameters:B,supportImageRefresh:N,callback:X}=D;return l.e(B,{type:"image"}),(N!==!1||l.i()||l.g(B.url)||B.headers&&!Object.keys(B.headers).reduce((ue,ce)=>ue&&ce==="accept",!0)?l.m:P)(B,(ue,ce,pe,ae)=>{C(D,X,ue,ce,pe,ae)})},C=(D,B,N,X,ue,ce)=>{N?B(N):X instanceof HTMLImageElement||l.a(X)?B(null,X):X&&((pe,ae)=>{typeof createImageBitmap=="function"?l.b(pe,ae):l.d(pe,ae)})(X,(pe,ae)=>{pe!=null?B(pe):ae!=null&&B(null,ae,{cacheControl:ue,expires:ce})}),D.cancelled||(D.completed=!0,u--,k())},k=()=>{const D=(()=>{const B=Object.keys(g);let N=!1;if(B.length>0){for(const X of B)if(N=g[X](),N)break}return N})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=u;B<D&&i.length>0;B++){const N=i.shift();if(N.cancelled){B--;continue}const X=_(N);u++,N.innerRequest=X}},P=(D,B)=>{const N=new Image,X=D.url;let ue=!1;const ce=D.credentials;return ce&&ce==="include"?N.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!l.s(X))&&(N.crossOrigin="anonymous"),N.fetchPriority="high",N.onload=()=>{B(null,N),N.onerror=N.onload=null},N.onerror=()=>{ue||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),N.onerror=N.onload=null},N.src=X,{cancel:()=>{ue=!0,N.src=""}}}}(K||(K={})),K.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(F||(F={}));class R{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const g=function(_){const C=_.match(L);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${p}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const L=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re(y){var i=new l.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var J,se=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};J=new l.A(3),l.A!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0);var ie=function(y){var i=y[0],u=y[1];return i*i+u*u};function Z(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:p,url:g}))}}return i}function Ce(y,i,u,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const k=l.h.getImageCanvasContext(u[C]),P=i[C];for(const D in P){const{width:B,height:N,x:X,y:ue,sdf:ce,pixelRatio:pe,stretchX:ae,stretchY:Pe,content:Ne}=P[D];_[C][D]={data:null,pixelRatio:pe,sdf:ce,stretchX:ae,stretchY:Pe,content:Ne,spriteData:{width:B,height:N,x:X,y:ue,context:k}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class _e{constructor(i,u,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,p){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:k}=this,{gl:P}=k;if(this.useMipmap=!!(u&&u.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,i):P.texImage2D(P.TEXTURE_2D,0,this.format,g,_,0,this.format,P.UNSIGNED_BYTE,i.data);else{const{x:D,y:B}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?P.texSubImage2D(P.TEXTURE_2D,0,D,B,P.RGBA,P.UNSIGNED_BYTE,i):P.texSubImage2D(P.TEXTURE_2D,0,D,B,g,_,P.RGBA,P.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(i,u,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function ke(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class ze extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const g of i){let _=this.getImage(g);_||(this.fire(new l.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?p[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new l.I(g,p);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _e(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:p}=l.p(i),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],k=C.x+1,P=C.y+1,D=this.getImage(_).data,B=D.width,N=D.height;l.R.copy(D,g,{x:0,y:0},{x:k,y:P},{width:B,height:N}),l.R.copy(D,g,{x:0,y:N-1},{x:k,y:P-1},{width:B,height:1}),l.R.copy(D,g,{x:0,y:0},{x:k,y:P+N},{width:B,height:1}),l.R.copy(D,g,{x:B-1,y:0},{x:k-1,y:P},{width:1,height:N}),l.R.copy(D,g,{x:0,y:0},{x:k+B,y:P},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),ke(p)&&this.updateImage(u,p)}}}const Le=1e20;function Ye(y,i,u,p,g,_,C,k,P){for(let D=i;D<i+p;D++)Ge(y,u*_+D,_,g,C,k,P);for(let D=u;D<u+g;D++)Ge(y,D*_+i,1,p,C,k,P)}function Ge(y,i,u,p,g,_,C){_[0]=0,C[0]=-Le,C[1]=Le,g[0]=y[i];for(let k=1,P=0,D=0;k<p;k++){g[k]=y[i+k*u];const B=k*k;do{const N=_[P];D=(g[k]-g[N]+B-N*N)/(k-N)/2}while(D<=C[P]&&--P>-1);P++,_[P]=k,C[P]=D,C[P+1]=Le}for(let k=0,P=0;k<p;k++){for(;C[P+1]<k;)P++;const D=_[P],B=k-D;y[i+k*u]=g[D]+B*B}}class Te{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const g in i)for(const _ of i[g])p.push({stack:g,id:_});l.o(p,({stack:g,id:_},C)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let P=k.glyphs[_];if(P!==void 0)return void C(null,{stack:g,id:_,glyph:P});if(P=this._tinySDF(k,g,_),P)return k.glyphs[_]=P,void C(null,{stack:g,id:_,glyph:P});const D=Math.floor(_/256);if(256*D>65535)return void C(new Error("glyphs > 65535 not supported"));if(k.ranges[D])return void C(null,{stack:g,id:_,glyph:P});if(!this.url)return void C(new Error("glyphsUrl is not set"));let B=k.requests[D];B||(B=k.requests[D]=[],Te.loadGlyphRange(g,D,this.url,this.requestManager,(N,X)=>{if(X){for(const ue in X)this._doesCharSupportLocalGlyph(+ue)||(k.glyphs[+ue]=X[+ue]);k.ranges[D]=!0}for(const ue of B)ue(N,X);delete k.requests[D]})),B.push((N,X)=>{N?C(N):X&&C(null,{stack:g,id:_,glyph:X[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:k,id:P,glyph:D}of _)(C[k]||(C[k]={}))[P]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](i)||l.u["Hangul Syllables"](i)||l.u.Hiragana(i)||l.u.Katakana(i))}_tinySDF(i,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),_=i.tinySDF=new Te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const C=_.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Te.loadGlyphRange=function(y,i,u,p,g){const _=256*i,C=_+255,k=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),F.Glyphs);l.l(k,(P,D)=>{if(P)g(P);else if(D){const B={};for(const N of l.n(D))B[N.id]=N;g(null,B)}})},Te.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const k=this.size=y+4*i,P=this._createCanvas(k),D=this.ctx=P.getContext("2d",{willReadFrequently:!0});D.font=`${C} ${_} ${y}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),P=Math.min(this.size-this.buffer,C+Math.ceil(p)),D=k+2*this.buffer,B=P+2*this.buffer,N=Math.max(D*B,0),X=new Uint8ClampedArray(N),ue={data:X,width:D,height:B,glyphWidth:k,glyphHeight:P,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(k===0||P===0)return ue;const{ctx:ce,buffer:pe,gridInner:ae,gridOuter:Pe}=this;ce.clearRect(pe,pe,k,P),ce.fillText(y,pe,pe+C);const Ne=ce.getImageData(pe,pe,k,P);Pe.fill(Le,0,N),ae.fill(0,0,N);for(let ge=0;ge<P;ge++)for(let De=0;De<k;De++){const He=Ne.data[4*(ge*k+De)+3]/255;if(He===0)continue;const We=(ge+pe)*D+De+pe;if(He===1)Pe[We]=0,ae[We]=Le;else{const tt=.5-He;Pe[We]=tt>0?tt*tt:0,ae[We]=tt<0?tt*tt:0}}Ye(Pe,0,0,D,B,D,this.f,this.v,this.z),Ye(ae,pe,pe,k,P,D,this.f,this.v,this.z);for(let ge=0;ge<N;ge++){const De=Math.sqrt(Pe[ge])-Math.sqrt(ae[ge]);X[ge]=Math.round(255-255*(De/this.radius+this.cutoff))}return ue}};class Fe{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,u){return l.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:l.B.number(i.x,u.x,p),y:l.B.number(i.y,u.y,p),z:l.B.number(i.z,u.z,p)}}}let $e;class Oe extends l.E{constructor(i){super(),$e=$e||new l.r({anchor:new l.D(l.v.light.anchor),position:new Fe,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T($e),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.t,i,u))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&l.x(this,i.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class et{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const g=[];let _=i.length%2==1?-i[i.length-1]*p:0,C=i[0]*p,k=!0;g.push({left:_,right:C,isDash:k,zeroLength:i[0]===0});let P=i[0];for(let D=1;D<i.length;D++){k=!k;const B=i[D];_=P*p,P+=B,C=P*p,g.push({left:_,right:C,isDash:k,zeroLength:B===0})}return g}addRoundDash(i,u,p){const g=u/2;for(let _=-p;_<=p;_++){const C=this.width*(this.nextRow+p+_);let k=0,P=i[k];for(let D=0;D<this.width;D++){D/P.right>1&&(P=i[++k]);const B=Math.abs(D-P.left),N=Math.abs(D-P.right),X=Math.min(B,N);let ue;const ce=_/p*(g+1);if(P.isDash){const pe=g-Math.abs(ce);ue=Math.sqrt(X*X+pe*pe)}else ue=g-Math.sqrt(X*X+ce*ce);this.data[C+D]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(i){for(let k=i.length-1;k>=0;--k){const P=i[k],D=i[k+1];P.zeroLength?i.splice(k,1):D&&D.isDash===P.isDash&&(D.left=P.left,i.splice(k,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let k=0;k<this.width;k++){k/C.right>1&&(C=i[++_]);const P=Math.abs(k-C.left),D=Math.abs(k-C.right),B=Math.min(P,D);this.data[g+k]=Math.max(0,Math.min(255,(C.isDash?B:-B)+128))}}addDash(i,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let k=0;k<i.length;k++)_+=i[k];if(_!==0){const k=this.width/_,P=this.getDashRanges(i,this.width,k);u?this.addRoundDash(P,k,p):this.addRegularDash(P)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class at{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let _=0;_<g.length;_++){const C=new l.C(g[_],u,p);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){l.o(this.actors,(g,_)=>{g.send(i,u,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function ut(y,i,u){const p=function(g,_){if(g)return u(g);if(_){const C=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(k=>k.id)),u(null,C)}};return y.url?l.f(i.transformRequest(y.url,F.Source),p):l.h.frame(()=>p(null,y))}class Pt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let g,_;if(i instanceof l.L)g=i,_=i;else{if(!(i instanceof Pt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Pt.convert(i)):this.extend(l.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new l.L(g.lng,g.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=l.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof Pt?i:i&&new Pt(i)}static fromLngLat(i,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new Pt(new l.L(i.lng-g,i.lat-p),new l.L(i.lng+g,i.lat+p))}}class wt{constructor(i,u,p){this.bounds=Pt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(l.G(this.bounds.getWest())*u),g=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),C=Math.ceil(l.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<_&&i.y>=g&&i.y<C}}class zt extends l.E{constructor(i,u,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):C&&(l.e(this,C),C.bounds&&(this.tileBounds=new wt(C.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,F.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,k){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(k&&k.resourceTiming&&(i.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&i.setExpiryData(k),i.loadVectorData(k,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Yt extends l.E{constructor(i,u,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.j(i)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new wt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=K.getImage(this.map._requestManager.transformRequest(p,F.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const k=this.map.painter.context,P=k.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new _e(k,_,P.RGBA,{useMipmap:!0}),i.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class lt extends Yt{constructor(i,u,p,g){super(i,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,F.Tile);function _(C,k){C&&(i.state="errored",u(C)),k&&(i.dem=k,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=K.getImage(g,(C,k,P)=>l._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(k){this.map._refreshExpiredTiles&&i.setExpiryData(P);const D=l.a(k)&&l.J()?k:yield function(N){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const X=N.width+2,ue=N.height+2;try{return new l.R({width:X,height:ue},yield l.M(N,-1,-1,X,ue))}catch{}}return l.h.getImageData(N,1)})}(k),B={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",B,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+p)%p,k=u.x+1===p?i.wrap+1:i.wrap,P={};return P[new l.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},P[new l.O(i.overscaledZ,k,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(P[new l.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},P[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},P[new l.O(i.overscaledZ,k,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<p&&(P[new l.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},P[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},P[new l.O(i.overscaledZ,k,u.z,C,u.y+1).key]={backfilled:!1}),P}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Ze extends l.E{constructor(i,u,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},g),this}_updateWorkerData(i){const u=l.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),F.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new l.j(p));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(C,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var pt=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class yt extends l.E{constructor(i,u,p,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=K.getImage(this.map._requestManager.transformRequest(this.url,F.Image),(k,P)=>{this._request=null,this._loaded=!0,k?this.fire(new l.j(k)):P&&(this.image=P,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _e(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,k=!0)}k&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(l.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,k=-1/0,P=-1/0;for(const X of g)_=Math.min(_,X.x),C=Math.min(C,X.y),k=Math.max(k,X.x),P=Math.max(P,X.y);const D=Math.max(k-_,P-C),B=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),N=Math.pow(2,B);return new l.W(B,Math.floor((_+k)/2*N),Math.floor((C+P)/2*N))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class ar extends yt{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,F.Source).url);l.X(this.urls,(C,k)=>{this._loaded=!0,C?this.fire(new l.j(C)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new _e(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,k=!0)}k&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Kt extends yt{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,k=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _e(C,this.canvas,k.RGBA,{premultiply:!0});let P=!1;for(const D in this.tiles){const B=this.tiles[D];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,P=!0)}P&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Mr={},lr=y=>{switch(y){case"geojson":return Ze;case"image":return yt;case"raster":return Yt;case"raster-dem":return lt;case"vector":return zt;case"video":return ar;case"canvas":return Kt}return Mr[y]};function Vt(y,i){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Et(y,i,u,p,g,_){const C=function(N,X,ue){if(N)for(const ce of N){const pe=X[ce];if(pe&&pe.source===ue&&pe.type==="fill-extrusion")return!0}else for(const ce in X){const pe=X[ce];if(pe.source===ue&&pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),k=_.maxPitchScaleFactor(),P=y.tilesIn(p,k,C);P.sort(ur);const D=[];for(const N of P)D.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(i,u,y._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,g,_,k,Vt(y.transform,N.tileID))});const B=function(N){const X={},ue={};for(const ce of N){const pe=ce.queryResults,ae=ce.wrappedTileID,Pe=ue[ae]=ue[ae]||{};for(const Ne in pe){const ge=pe[Ne],De=Pe[Ne]=Pe[Ne]||{},He=X[Ne]=X[Ne]||[];for(const We of ge)De[We.featureIndex]||(De[We.featureIndex]=!0,He.push(We))}}return X}(D);for(const N in B)B[N].forEach(X=>{const ue=X.feature,ce=y.getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=ce});return B}function ur(y,i){const u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class Mt{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const k of g){const P=k.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(P.length!==0){k.layers=P,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(D=>P.filter(B=>B.id===D)[0]));for(const D of P)C[D.id]=k}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _e(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _e(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,g,_,C,k,P,D,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:B,transform:P,params:k,queryPadding:this.queryPadding*D},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const k=l.a6(u&&u.filter),{z:P,x:D,y:B}=this.tileID.canonical,N={z:P,x:D,y:B};for(let X=0;X<C.length;X++){const ue=C.feature(X);if(k.needGeometry){const ae=l.a7(ue,!0);if(!k.filter(new l.a8(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!k.filter(new l.a8(this.tileID.overscaledZ),ue))continue;const ce=p.getId(ue,_),pe=new l.a9(ue,P,D,B,ce);pe.tile=N,i.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=l.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",k=p[C],P=i[C];if(!k||!P||Object.keys(P).length===0)continue;_.update(P,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=u&&u.style&&u.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.h.now()+i}setDependencies(i,u){const p={};for(const g of u)p[g]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const g=this.dependencies[p];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Er{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class je{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},l.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])p[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),g=l.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),l.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const k of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][k];_[C]=this.state[g][C]}p[g]=p[g]||{},l.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,u)}}class wr extends l.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,k)=>{const P=new(lr(_.type))(g,_,C,k);if(P.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${P.id}`);return P})(i,u,p,this),this._tiles={},this._cache=new Er(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new je,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Dr).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,g)=>{const _=p.tileID,C=g.tileID,k=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),P=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||P.y-k.y||P.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Dr).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new l.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);p(i,C),p(C,i)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const k=_.tileID.canonical.y-g.tileID.canonical.y,P=Math.pow(2,g.tileID.canonical.z),D=_.tileID.key;C===0&&k===0||Math.abs(k)>1||(Math.abs(C)>1&&(Math.abs(C+P)===1?C+=P:Math.abs(C-P)===1&&(C-=P)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,k),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>p)continue;let k=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const D=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[D.key],C&&C.hasData()&&(k=D)}let P=k;for(;P.overscaledZ>u;)if(P=P.scaledTo(P.overscaledZ-1),i[P.key]){g[k.key]=k;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const g=i.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new l.O(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(B=>this._source.hasTile(B)))):p=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-wr.maxOverzooming,this._source.minzoom),C=Math.max(g+wr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const N of p)if(N.canonical.z>this._source.minzoom){const X=N.scaledTo(N.canonical.z-1);B[X.key]=X;const ue=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));B[ue.key]=ue}p=p.concat(Object.values(B))}const k=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(p,g);if(qt(this._source.type)){const B={},N={},X=Object.keys(P),ue=l.h.now();for(const ce of X){const pe=P[ce],ae=this._tiles[ce];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=ue)continue;const Pe=this.findLoadedParent(pe,_);Pe&&(this._addTile(Pe.tileID),B[Pe.tileID.key]=Pe.tileID),N[ce]=pe}this._retainLoadedChildren(N,g,C,P);for(const ce in B)P[ce]||(this._coveredTiles[ce]=!0,P[ce]=B[ce]);if(u){const ce={},pe={};for(const ae of p)this._tiles[ae.key].hasData()?ce[ae.key]=ae:pe[ae.key]=ae;for(const ae in pe){const Pe=pe[ae].children(this._source.maxzoom);this._tiles[Pe[0].key]&&this._tiles[Pe[1].key]&&this._tiles[Pe[2].key]&&this._tiles[Pe[3].key]&&(ce[Pe[0].key]=P[Pe[0].key]=Pe[0],ce[Pe[1].key]=P[Pe[1].key]=Pe[1],ce[Pe[2].key]=P[Pe[2].key]=Pe[2],ce[Pe[3].key]=P[Pe[3].key]=Pe[3],delete pe[ae])}for(const ae in pe){const Pe=this.findLoadedParent(pe[ae],this._source.minzoom);if(Pe){ce[Pe.tileID.key]=P[Pe.tileID.key]=Pe.tileID;for(const Ne in ce)ce[Ne].isChildOf(Pe.tileID)&&delete ce[Ne]}}for(const ae in this._tiles)ce[ae]||(this._coveredTiles[ae]=!0)}}for(const B in P)this._tiles[B].clearFadeHold();const D=l.ab(this._tiles,P);for(const B of D){const N=this._tiles[B];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},g={},_=Math.max(u-wr.maxOverzooming,this._source.minzoom),C=Math.max(u+wr.maxUnderzooming,this._source.minzoom),k={};for(const P of i){const D=this._addTile(P);p[P.key]=P,D.hasData()||u<this._source.maxzoom&&(k[P.key]=P)}this._retainLoadedChildren(k,u,C,p);for(const P of i){let D=this._tiles[P.key];if(D.hasData())continue;if(u+1>this._source.maxzoom){const N=P.children(this._source.maxzoom)[0],X=this.getTile(N);if(X&&X.hasData()){p[N.key]=N;continue}}else{const N=P.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let B=D.wasRequested();for(let N=P.overscaledZ-1;N>=_;--N){const X=P.scaledTo(N);if(g[X.key])break;if(g[X.key]=!0,D=this.getTile(X),!D&&B&&(D=this._addTile(X)),D){const ue=D.hasData();if((B||ue)&&(p[X.key]=X),B=D.wasRequested(),ue)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of u)this._loadedParentTiles[_]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new Mt(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const g=[],_=this.transform;if(!_)return g;const C=p?_.getCameraQueryGeometry(i):i,k=i.map(ce=>_.pointCoordinate(ce,this.terrain)),P=C.map(ce=>_.pointCoordinate(ce,this.terrain)),D=this.getIds();let B=1/0,N=1/0,X=-1/0,ue=-1/0;for(const ce of P)B=Math.min(B,ce.x),N=Math.min(N,ce.y),X=Math.max(X,ce.x),ue=Math.max(ue,ce.y);for(let ce=0;ce<D.length;ce++){const pe=this._tiles[D[ce]];if(pe.holdingForFade())continue;const ae=pe.tileID,Pe=Math.pow(2,_.zoom-pe.tileID.overscaledZ),Ne=u*pe.queryPadding*l.N/pe.tileSize/Pe,ge=[ae.getTilePoint(new l.U(B,N)),ae.getTilePoint(new l.U(X,ue))];if(ge[0].x-Ne<l.N&&ge[0].y-Ne<l.N&&ge[1].x+Ne>=0&&ge[1].y+Ne>=0){const De=k.map(We=>ae.getTilePoint(We)),He=P.map(We=>ae.getTilePoint(We));g.push({tile:pe,tileID:ae,queryGeometry:De,cameraQueryGeometry:He,scale:Pe})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(qt(this._source.type)){const i=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const g=this._tiles[i];g&&g.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function Dr(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function qt(y){return y==="raster"||y==="image"||y==="video"}wr.maxOverzooming=10,wr.maxUnderzooming=3;const rr="mapboxgl_preloaded_worker_pool";class Fr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Fr.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rr]}numActive(){return Object.keys(this.active).length}}const $r=Math.floor(l.h.hardwareConcurrency/2);let dr;function cr(){return dr||(dr=new Fr),dr}Fr.workerCount=l.ac(globalThis)?Math.max(Math.min($r,3),1):1;class Gt{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ad(i,0,1);let u=1,p=this._distances[u];const g=i*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const _=u-1,C=this._distances[_],k=p-C,P=k>0?(g-C)/k:0;return this.points[_].mult(1-P).add(this.points[u].mult(P))}}function sr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Ir{constructor(i,u,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,g,_){this._forEachCell(u,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,u,p,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,p,g,_,C){this.circleCells[_].push(C)}_query(i,u,p,g,_,C,k){if(p<0||i>this.width||g<0||u>this.height)return[];const P=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:p,y2:g}];for(let D=0;D<this.boxKeys.length;D++)P.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const B=this.circles[3*D],N=this.circles[3*D+1],X=this.circles[3*D+2];P.push({key:this.circleKeys[D],x1:B-X,y1:N-X,x2:B+X,y2:N+X})}}else this._forEachCell(i,u,p,g,this._queryCell,P,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},k);return P}query(i,u,p,g){return this._query(i,u,p,g,!1,null)}hitTest(i,u,p,g,_,C){return this._query(i,u,p,g,!0,_,C).length>0}hitTestCircle(i,u,p,g,_){const C=i-p,k=i+p,P=u-p,D=u+p;if(k<0||C>this.width||D<0||P>this.height)return!1;const B=[];return this._forEachCell(C,P,k,D,this._queryCellCircle,B,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},_),B.length>0}_queryCell(i,u,p,g,_,C,k,P){const{seenUids:D,hitTest:B,overlapMode:N}=k,X=this.boxCells[_];if(X!==null){const ce=this.bboxes;for(const pe of X)if(!D.box[pe]){D.box[pe]=!0;const ae=4*pe,Pe=this.boxKeys[pe];if(i<=ce[ae+2]&&u<=ce[ae+3]&&p>=ce[ae+0]&&g>=ce[ae+1]&&(!P||P(Pe))&&(!B||!sr(N,Pe.overlapMode))&&(C.push({key:Pe,x1:ce[ae],y1:ce[ae+1],x2:ce[ae+2],y2:ce[ae+3]}),B))return!0}}const ue=this.circleCells[_];if(ue!==null){const ce=this.circles;for(const pe of ue)if(!D.circle[pe]){D.circle[pe]=!0;const ae=3*pe,Pe=this.circleKeys[pe];if(this._circleAndRectCollide(ce[ae],ce[ae+1],ce[ae+2],i,u,p,g)&&(!P||P(Pe))&&(!B||!sr(N,Pe.overlapMode))){const Ne=ce[ae],ge=ce[ae+1],De=ce[ae+2];if(C.push({key:Pe,x1:Ne-De,y1:ge-De,x2:Ne+De,y2:ge+De}),B)return!0}}}return!1}_queryCellCircle(i,u,p,g,_,C,k,P){const{circle:D,seenUids:B,overlapMode:N}=k,X=this.boxCells[_];if(X!==null){const ce=this.bboxes;for(const pe of X)if(!B.box[pe]){B.box[pe]=!0;const ae=4*pe,Pe=this.boxKeys[pe];if(this._circleAndRectCollide(D.x,D.y,D.radius,ce[ae+0],ce[ae+1],ce[ae+2],ce[ae+3])&&(!P||P(Pe))&&!sr(N,Pe.overlapMode))return C.push(!0),!0}}const ue=this.circleCells[_];if(ue!==null){const ce=this.circles;for(const pe of ue)if(!B.circle[pe]){B.circle[pe]=!0;const ae=3*pe,Pe=this.circleKeys[pe];if(this._circlesCollide(ce[ae],ce[ae+1],ce[ae+2],D.x,D.y,D.radius)&&(!P||P(Pe))&&!sr(N,Pe.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,p,g,_,C,k,P){const D=this._convertToXCellCoord(i),B=this._convertToYCellCoord(u),N=this._convertToXCellCoord(p),X=this._convertToYCellCoord(g);for(let ue=D;ue<=N;ue++)for(let ce=B;ce<=X;ce++)if(_.call(this,i,u,p,g,this.xCellCount*ce+ue,C,k,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,g,_,C){const k=g-i,P=_-u,D=p+C;return D*D>k*k+P*P}_circleAndRectCollide(i,u,p,g,_,C,k){const P=(C-g)/2,D=Math.abs(i-(g+P));if(D>P+p)return!1;const B=(k-_)/2,N=Math.abs(u-(_+B));if(N>B+p)return!1;if(D<=P||N<=B)return!0;const X=D-P,ue=N-B;return X*X+ue*ue<=p*p}}function Be(y,i,u,p,g){const _=l.Z();return i?(l.a0(_,_,[1/g,1/g,1]),u||l.ae(_,_,p.angle)):l.a1(_,p.labelPlaneMatrix,y),_}function xt(y,i,u,p,g){if(i){const _=l.af(y);return l.a0(_,_,[g,g,1]),u||l.ae(_,_,-p.angle),_}return p.glCoordMatrix}function St(y,i,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],l.ag(p,p,i)):(p=[y.x,y.y,0,1],de(p,p,i));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Qt(y,i){return .5+y/i*.5}function vn(y,i){const u=y[0]/y[3],p=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function it(y,i,u,p,g,_,C,k,P,D){const B=p?y.textSizeData:y.iconSizeData,N=l.ah(B,u.transform.zoom),X=[256/u.width*2+1,256/u.height*2+1],ue=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ue.clear();const ce=y.lineVertexArray,pe=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ae=u.transform.width/u.transform.height;let Pe=!1;for(let Ne=0;Ne<pe.length;Ne++){const ge=pe.get(Ne);if(ge.hidden||ge.writingMode===l.ai.vertical&&!Pe){te(ge.numGlyphs,ue);continue}let De;if(Pe=!1,D?(De=[ge.anchorX,ge.anchorY,D(ge.anchorX,ge.anchorY),1],l.ag(De,De,i)):(De=[ge.anchorX,ge.anchorY,0,1],de(De,De,i)),!vn(De,X)){te(ge.numGlyphs,ue);continue}const He=Qt(u.transform.cameraToCenterDistance,De[3]),We=l.aj(B,N,ge),tt=C?We/He:We*He,st=new l.P(ge.anchorX,ge.anchorY),ot=St(st,g,D).point,dt={projections:{},offsets:{}},Bt=hr(ge,tt,!1,k,i,g,_,y.glyphOffsetArray,ce,ue,ot,st,dt,ae,P,D);Pe=Bt.useVertical,(Bt.notEnoughRoom||Pe||Bt.needsFlipping&&hr(ge,tt,!0,k,i,g,_,y.glyphOffsetArray,ce,ue,ot,st,dt,ae,P,D).notEnoughRoom)&&te(ge.numGlyphs,ue)}p?y.text.dynamicLayoutVertexBuffer.updateData(ue):y.icon.dynamicLayoutVertexBuffer.updateData(ue)}function Jt(y,i,u,p,g,_,C,k,P,D,B,N,X){const ue=k.glyphStartIndex+k.numGlyphs,ce=k.lineStartIndex,pe=k.lineStartIndex+k.lineLength,ae=i.getoffsetX(k.glyphStartIndex),Pe=i.getoffsetX(ue-1),Ne=H(y*ae,u,p,g,_,C,k.segment,ce,pe,P,D,B,N,X);if(!Ne)return null;const ge=H(y*Pe,u,p,g,_,C,k.segment,ce,pe,P,D,B,N,X);return ge?{first:Ne,last:ge}:null}function Ft(y,i,u,p){return y===l.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===l.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function hr(y,i,u,p,g,_,C,k,P,D,B,N,X,ue,ce,pe){const ae=i/24,Pe=y.lineOffsetX*ae,Ne=y.lineOffsetY*ae;let ge;if(y.numGlyphs>1){const De=y.glyphStartIndex+y.numGlyphs,He=y.lineStartIndex,We=y.lineStartIndex+y.lineLength,tt=Jt(ae,k,Pe,Ne,u,B,N,y,P,_,X,ce,pe);if(!tt)return{notEnoughRoom:!0};const st=St(tt.first.point,C,pe).point,ot=St(tt.last.point,C,pe).point;if(p&&!u){const dt=Ft(y.writingMode,st,ot,ue);if(dt)return dt}ge=[tt.first];for(let dt=y.glyphStartIndex+1;dt<De-1;dt++)ge.push(H(ae*k.getoffsetX(dt),Pe,Ne,u,B,N,y.segment,He,We,P,_,X,ce,pe));ge.push(tt.last)}else{if(p&&!u){const He=St(N,g,pe).point,We=y.lineStartIndex+y.segment+1,tt=new l.P(P.getx(We),P.gety(We)),st=St(tt,g,pe),ot=st.signedDistanceFromCamera>0?st.point:vr(N,tt,He,1,g,pe),dt=Ft(y.writingMode,He,ot,ue);if(dt)return dt}const De=H(ae*k.getoffsetX(y.glyphStartIndex),Pe,Ne,u,B,N,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,P,_,X,ce,pe);if(!De)return{notEnoughRoom:!0};ge=[De]}for(const De of ge)l.ak(D,De.point,De.angle);return{}}function vr(y,i,u,p,g,_){const C=St(y.add(y.sub(i)._unit()),g,_).point,k=u.sub(C);return u.add(k._mult(p/k.mag()))}function Lt(y,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:k,previousVertex:P,direction:D,absOffsetX:B}=i;if(u.projections[y])return u.projections[y];const N=new l.P(p.getx(y),p.gety(y)),X=St(N,g,k);if(X.signedDistanceFromCamera>0)return u.projections[y]=X.point,X.point;const ue=y-D;return vr(C===0?_:new l.P(p.getx(ue),p.gety(ue)),N,P,B-C+1,g,k)}function Nr(y,i,u){return y._unit()._perp()._mult(i*u)}function he(y,i,u,p,g,_,C,k){const{projectionCache:P,direction:D}=k;if(P.offsets[y])return P.offsets[y];const B=u.add(i);if(y+D<p||y+D>=g)return P.offsets[y]=B,B;const N=Lt(y+D,k),X=Nr(N.sub(u),C,D),ue=u.add(X),ce=N.add(X);return P.offsets[y]=l.al(_,B,ue,ce)||B,P.offsets[y]}function H(y,i,u,p,g,_,C,k,P,D,B,N,X,ue){const ce=p?y-i:y+i;let pe=ce>0?1:-1,ae=0;p&&(pe*=-1,ae=Math.PI),pe<0&&(ae+=Math.PI);let Pe,Ne,ge=pe>0?k+C:k+C+1,De=g,He=g,We=0,tt=0;const st=Math.abs(ce),ot=[];let dt;for(;We+tt<=st;){if(ge+=pe,ge<k||ge>=P)return null;We+=tt,He=De,Ne=Pe;const vt={projectionCache:N,lineVertexArray:D,labelPlaneMatrix:B,tileAnchorPoint:_,distanceFromAnchor:We,getElevation:ue,previousVertex:He,direction:pe,absOffsetX:st};if(De=Lt(ge,vt),u===0)ot.push(He),dt=De.sub(He);else{let ir;const Nt=De.sub(He);ir=Nt.mag()===0?Nr(Lt(ge+pe,vt).sub(De),u,pe):Nr(Nt,u,pe),Ne||(Ne=He.add(ir)),Pe=he(ge,ir,De,k,P,Ne,u,vt),ot.push(Ne),dt=Pe.sub(Ne)}tt=dt.mag()}const Bt=dt._mult((st-We)/tt)._add(Ne||He),_r=ae+Math.atan2(De.y-He.y,De.x-He.x);return ot.push(Bt),{point:Bt,angle:X?_r:0,path:ot}}const G=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function te(y,i){for(let u=0;u<y;u++){const p=i.length;i.resize(p+4),i.float32.set(G,3*p)}}function de(y,i,u){const p=i[0],g=i[1];return y[0]=u[0]*p+u[4]*g+u[12],y[1]=u[1]*p+u[5]*g+u[13],y[3]=u[3]*p+u[7]*g+u[15],y}const fe=100;class Me{constructor(i,u=new Ir(i.width+200,i.height+200,25),p=new Ir(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+fe,this.screenBottomBoundary=i.height+fe,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,g,_,C){const k=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),P=p*k.perspectiveRatio,D=i.x1*P+k.point.x,B=i.y1*P+k.point.y,N=i.x2*P+k.point.x,X=i.y2*P+k.point.y;return!this.isInsideGrid(D,B,N,X)||u!=="always"&&this.grid.hitTest(D,B,N,X,u,_)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,B,N,X],offscreen:this.isOffscreen(D,B,N,X)}}placeCollisionCircles(i,u,p,g,_,C,k,P,D,B,N,X,ue,ce){const pe=[],ae=new l.P(u.anchorX,u.anchorY),Pe=St(ae,C,ce),Ne=Qt(this.transform.cameraToCenterDistance,Pe.signedDistanceFromCamera),ge=(B?_/Ne:_*Ne)/l.ap,De=St(ae,k,ce).point,He=Jt(ge,g,u.lineOffsetX*ge,u.lineOffsetY*ge,!1,De,ae,u,p,k,{projections:{},offsets:{}},!1,ce);let We=!1,tt=!1,st=!0;if(He){const ot=.5*X*Ne+ue,dt=new l.P(-100,-100),Bt=new l.P(this.screenRightBoundary,this.screenBottomBoundary),_r=new Gt,vt=He.first,ir=He.last;let Nt=[];for(let pr=vt.path.length-1;pr>=1;pr--)Nt.push(vt.path[pr]);for(let pr=1;pr<ir.path.length;pr++)Nt.push(ir.path[pr]);const qr=2.5*ot;if(P){const pr=Nt.map(xr=>St(xr,P,ce));Nt=pr.some(xr=>xr.signedDistanceFromCamera<=0)?[]:pr.map(xr=>xr.point)}let yr=[];if(Nt.length>0){const pr=Nt[0].clone(),xr=Nt[0].clone();for(let kn=1;kn<Nt.length;kn++)pr.x=Math.min(pr.x,Nt[kn].x),pr.y=Math.min(pr.y,Nt[kn].y),xr.x=Math.max(xr.x,Nt[kn].x),xr.y=Math.max(xr.y,Nt[kn].y);yr=pr.x>=dt.x&&xr.x<=Bt.x&&pr.y>=dt.y&&xr.y<=Bt.y?[Nt]:xr.x<dt.x||pr.x>Bt.x||xr.y<dt.y||pr.y>Bt.y?[]:l.am([Nt],dt.x,dt.y,Bt.x,Bt.y)}for(const pr of yr){_r.reset(pr,.25*ot);let xr=0;xr=_r.length<=.5*ot?1:Math.ceil(_r.paddedLength/qr)+1;for(let kn=0;kn<xr;kn++){const en=kn/Math.max(xr-1,1),ai=_r.lerp(en),Un=ai.x+fe,Mn=ai.y+fe;pe.push(Un,Mn,ot,0);const Qi=Un-ot,sn=Mn-ot,Go=Un+ot,qo=Mn+ot;if(st=st&&this.isOffscreen(Qi,sn,Go,qo),tt=tt||this.isInsideGrid(Qi,sn,Go,qo),i!=="always"&&this.grid.hitTestCircle(Un,Mn,ot,i,N)&&(We=!0,!D))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!D&&We||!tt||Ne<this.perspectiveRatioCutoff?[]:pe,offscreen:st,collisionDetected:We}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,_=-1/0,C=-1/0;for(const B of i){const N=new l.P(B.x+fe,B.y+fe);p=Math.min(p,N.x),g=Math.min(g,N.y),_=Math.max(_,N.x),C=Math.max(C,N.y),u.push(N)}const k=this.grid.query(p,g,_,C).concat(this.ignoredGrid.query(p,g,_,C)),P={},D={};for(const B of k){const N=B.key;if(P[N.bucketInstanceId]===void 0&&(P[N.bucketInstanceId]={}),P[N.bucketInstanceId][N.featureIndex])continue;const X=[new l.P(B.x1,B.y1),new l.P(B.x2,B.y1),new l.P(B.x2,B.y2),new l.P(B.x1,B.y2)];l.an(u,X)&&(P[N.bucketInstanceId][N.featureIndex]=!0,D[N.bucketInstanceId]===void 0&&(D[N.bucketInstanceId]=[]),D[N.bucketInstanceId].push(N.featureIndex))}return D}insertCollisionBox(i,u,p,g,_,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,g,_,C){const k=p?this.ignoredGrid:this.grid,P={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let D=0;D<i.length;D+=4)k.insertCircle(P,i[D],i[D+1],i[D+2])}projectAndGetPerspectiveRatio(i,u,p,g){let _;return g?(_=[u,p,g(u,p),1],l.ag(_,_,i)):(_=[u,p,0,1],de(_,_,i)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+fe,(-_[1]/_[3]+1)/2*this.transform.height+fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,p,g){return p<fe||i>=this.screenRightBoundary||g<fe||u>this.screenBottomBoundary}isInsideGrid(i,u,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.ao([]);return l.$(i,i,[-100,-100,0]),i}}function be(y,i,u){return i*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class ye{constructor(i,u,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Ee{constructor(i,u,p,g,_){this.text=new ye(i?i.text:null,u,p,_),this.icon=new ye(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Je{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class ne{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class oe{constructor(i,u,p,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Ie{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function Ve(y,i,u,p,g){const{horizontalAlign:_,verticalAlign:C}=l.au(y);return new l.P(-(_-.5)*i+p[0]*g,-(C-.5)*u+p[1]*g)}function Xe(y,i,u,p,g,_){const{x1:C,x2:k,y1:P,y2:D,anchorPointX:B,anchorPointY:N}=y,X=new l.P(i,u);return p&&X._rotate(g?_:-_),{x1:C+X.x,y1:P+X.y,x2:k+X.x,y2:D+X.y,anchorPointX:B,anchorPointY:N}}class nt{constructor(i,u,p,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ie(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,g){const _=p.getBucket(u),C=p.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const k=p.collisionBoxArray,P=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),B=p.tileSize/l.N,N=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),X=P.get("text-pitch-alignment")==="map",ue=P.get("text-rotation-alignment")==="map",ce=be(p,1,this.transform.zoom),pe=Be(N,X,ue,this.transform,ce);let ae=null;if(X){const Ne=xt(N,X,ue,this.transform,ce);ae=l.a1([],this.transform.labelPlaneMatrix,Ne)}this.retainedQueryData[_.bucketInstanceId]=new oe(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,p.tileID);const Pe={bucket:_,layout:P,posMatrix:N,textLabelPlaneMatrix:pe,labelToScreenMatrix:ae,scale:D,textPixelRatio:B,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Ne of _.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:De,symbolInstanceEnd:He}=Ne;i.push({sortKey:ge,symbolInstanceStart:De,symbolInstanceEnd:He,parameters:Pe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Pe})}attemptAnchorPlacement(i,u,p,g,_,C,k,P,D,B,N,X,ue,ce,pe,ae){const Pe=l.aq[i.textAnchor],Ne=[i.textOffset0,i.textOffset1],ge=Ve(Pe,p,g,Ne,_),De=this.collisionIndex.placeCollisionBox(Xe(u,ge.x,ge.y,C,k,this.transform.angle),N,P,D,B.predicate,ae);if((!pe||this.collisionIndex.placeCollisionBox(Xe(pe,ge.x,ge.y,C,k,this.transform.angle),N,P,D,B.predicate,ae).box.length!==0)&&De.box.length>0){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(He=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Ne,width:p,height:g,anchor:Pe,textBoxScale:_,prevAnchor:He},this.markUsedJustification(ue,Pe,X,ce),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,ce,X),this.placedOrientations[X.crossTileID]=ce),{shift:ge,placedGlyphBoxes:De}}}placeLayerBucketPart(i,u,p){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:k,labelToScreenMatrix:P,textPixelRatio:D,holdingForFade:B,collisionBoxArray:N,partiallyEvaluatedTextSize:X,collisionGroup:ue}=i.parameters,ce=_.get("text-optional"),pe=_.get("icon-optional"),ae=l.ar(_,"text-overlap","text-allow-overlap"),Pe=ae==="always",Ne=l.ar(_,"icon-overlap","icon-allow-overlap"),ge=Ne==="always",De=_.get("text-rotation-alignment")==="map",He=_.get("text-pitch-alignment")==="map",We=_.get("icon-text-fit")!=="none",tt=_.get("symbol-z-order")==="viewport-y",st=Pe&&(ge||!g.hasIconData()||pe),ot=ge&&(Pe||!g.hasTextData()||ce);!g.collisionArrays&&N&&g.deserializeCollisionBoxes(N);const dt=this.retainedQueryData[g.bucketInstanceId].tileID,Bt=this.terrain?(vt,ir)=>this.terrain.getElevation(dt,vt,ir):null,_r=(vt,ir)=>{var Nt,qr;if(u[vt.crossTileID])return;if(B)return void(this.placements[vt.crossTileID]=new Je(!1,!1,!1));let yr=!1,pr=!1,xr=!0,kn=null,en={box:null,offscreen:null},ai={box:null,offscreen:null},Un=null,Mn=null,Qi=null,sn=0,Go=0,qo=0;ir.textFeatureIndex?sn=ir.textFeatureIndex:vt.useRuntimeCollisionCircles&&(sn=vt.featureIndex),ir.verticalTextFeatureIndex&&(Go=ir.verticalTextFeatureIndex);const Ua=ir.textBox;if(Ua){const hi=In=>{let Hn=l.ai.horizontal;if(g.allowVerticalPlacement&&!In&&this.prevPlacement){const $i=this.prevPlacement.placedOrientations[vt.crossTileID];$i&&(this.placedOrientations[vt.crossTileID]=$i,Hn=$i,this.markUsedOrientation(g,Hn,vt))}return Hn},si=(In,Hn)=>{if(g.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&ir.verticalTextBox){for(const $i of g.writingModes)if($i===l.ai.vertical?(en=Hn(),ai=en):en=In(),en&&en.box&&en.box.length)break}else en=In()},bi=vt.textAnchorOffsetStartIndex,hs=vt.textAnchorOffsetEndIndex;if(hs===bi){const In=(Hn,$i)=>{const Tn=this.collisionIndex.placeCollisionBox(Hn,ae,D,C,ue.predicate,Bt);return Tn&&Tn.box&&Tn.box.length&&(this.markUsedOrientation(g,$i,vt),this.placedOrientations[vt.crossTileID]=$i),Tn};si(()=>In(Ua,l.ai.horizontal),()=>{const Hn=ir.verticalTextBox;return g.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&Hn?In(Hn,l.ai.vertical):{box:null,offscreen:null}}),hi(en&&en.box&&en.box.length)}else{let In=l.aq[(qr=(Nt=this.prevPlacement)===null||Nt===void 0?void 0:Nt.variableOffsets[vt.crossTileID])===null||qr===void 0?void 0:qr.anchor];const Hn=(Tn,ps,Kc)=>{const Wf=Tn.x2-Tn.x1,Gf=Tn.y2-Tn.y1,Pv=vt.textBoxScale,nh=We&&Ne==="never"?ps:null;let Zo={box:[],offscreen:!1},fs=ae==="never"?1:2,Ko="never";In&&fs++;for(let fo=0;fo<fs;fo++){for(let Xo=bi;Xo<hs;Xo++){const ih=g.textAnchorOffsets.get(Xo);if(In&&ih.textAnchor!==In)continue;const _a=this.attemptAnchorPlacement(ih,Tn,Wf,Gf,Pv,De,He,D,C,ue,Ko,vt,g,Kc,nh,Bt);if(_a&&(Zo=_a.placedGlyphBoxes,Zo&&Zo.box&&Zo.box.length))return yr=!0,kn=_a.shift,Zo}In?In=null:Ko=ae}return Zo};si(()=>Hn(Ua,ir.iconBox,l.ai.horizontal),()=>{const Tn=ir.verticalTextBox;return g.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&vt.numVerticalGlyphVertices>0&&Tn?Hn(Tn,ir.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),en&&(yr=en.box,xr=en.offscreen);const $i=hi(en&&en.box);if(!yr&&this.prevPlacement){const Tn=this.prevPlacement.variableOffsets[vt.crossTileID];Tn&&(this.variableOffsets[vt.crossTileID]=Tn,this.markUsedJustification(g,Tn.anchor,vt,$i))}}}if(Un=en,yr=Un&&Un.box&&Un.box.length>0,xr=Un&&Un.offscreen,vt.useRuntimeCollisionCircles){const hi=g.text.placedSymbolArray.get(vt.centerJustifiedTextSymbolIndex),si=l.aj(g.textSizeData,X,hi),bi=_.get("text-padding");Mn=this.collisionIndex.placeCollisionCircles(ae,hi,g.lineVertexArray,g.glyphOffsetArray,si,C,k,P,p,He,ue.predicate,vt.collisionCircleDiameter,bi,Bt),Mn.circles.length&&Mn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),yr=Pe||Mn.circles.length>0&&!Mn.collisionDetected,xr=xr&&Mn.offscreen}if(ir.iconFeatureIndex&&(qo=ir.iconFeatureIndex),ir.iconBox){const hi=si=>{const bi=We&&kn?Xe(si,kn.x,kn.y,De,He,this.transform.angle):si;return this.collisionIndex.placeCollisionBox(bi,Ne,D,C,ue.predicate,Bt)};ai&&ai.box&&ai.box.length&&ir.verticalIconBox?(Qi=hi(ir.verticalIconBox),pr=Qi.box.length>0):(Qi=hi(ir.iconBox),pr=Qi.box.length>0),xr=xr&&Qi.offscreen}const ds=ce||vt.numHorizontalGlyphVertices===0&&vt.numVerticalGlyphVertices===0,qs=pe||vt.numIconVertices===0;if(ds||qs?qs?ds||(pr=pr&&yr):yr=pr&&yr:pr=yr=pr&&yr,yr&&Un&&Un.box&&this.collisionIndex.insertCollisionBox(Un.box,ae,_.get("text-ignore-placement"),g.bucketInstanceId,ai&&ai.box&&Go?Go:sn,ue.ID),pr&&Qi&&this.collisionIndex.insertCollisionBox(Qi.box,Ne,_.get("icon-ignore-placement"),g.bucketInstanceId,qo,ue.ID),Mn&&(yr&&this.collisionIndex.insertCollisionCircles(Mn.circles,ae,_.get("text-ignore-placement"),g.bucketInstanceId,sn,ue.ID),p)){const hi=g.bucketInstanceId;let si=this.collisionCircleArrays[hi];si===void 0&&(si=this.collisionCircleArrays[hi]=new ne);for(let bi=0;bi<Mn.circles.length;bi+=4)si.circles.push(Mn.circles[bi+0]),si.circles.push(Mn.circles[bi+1]),si.circles.push(Mn.circles[bi+2]),si.circles.push(Mn.collisionDetected?1:0)}if(vt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vt.crossTileID]=new Je(yr||st,pr||ot,xr||g.justReloaded),u[vt.crossTileID]=!0};if(tt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vt=g.getSortedSymbolIndexes(this.transform.angle);for(let ir=vt.length-1;ir>=0;--ir){const Nt=vt[ir];_r(g.symbolInstances.get(Nt),g.collisionArrays[Nt])}}else for(let vt=i.symbolInstanceStart;vt<i.symbolInstanceEnd;vt++)_r(g.symbolInstances.get(vt),g.collisionArrays[vt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const vt=this.collisionCircleArrays[g.bucketInstanceId];l.as(vt.invProjMatrix,C),vt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,p,g){let _;_=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.at(u)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of C)k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=_>=0&&k!==_?0:p.crossTileID)}markUsedOrientation(i,u,p){const g=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of C)i.text.placedSymbolArray.get(k).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const P in this.placements){const D=this.placements[P],B=_[P];B?(this.opacities[P]=new Ee(B,g,D.text,D.icon),p=p||D.text!==B.text.placed||D.icon!==B.icon.placed):(this.opacities[P]=new Ee(null,g,D.text,D.icon,D.skipFade),p=p||D.text||D.icon)}for(const P in _){const D=_[P];if(!this.opacities[P]){const B=new Ee(D,g,!1,!1);B.isHidden()||(this.opacities[P]=B,p=p||D.text.placed||D.icon.placed)}}for(const P in C)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=C[P]);for(const P in k)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=k[P]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,g.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new Ee(null,0,!1,!1,!0),k=_.get("text-allow-overlap"),P=_.get("icon-allow-overlap"),D=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=_.get("text-rotation-alignment")==="map",N=_.get("text-pitch-alignment")==="map",X=_.get("icon-text-fit")!=="none",ue=new Ee(null,0,k&&(P||!i.hasIconData()||_.get("icon-optional")),P&&(k||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ce=(pe,ae,Pe)=>{for(let Ne=0;Ne<ae/4;Ne++)pe.opacityVertexArray.emplaceBack(Pe);pe.hasVisibleVertices=pe.hasVisibleVertices||Pe!==jr};for(let pe=0;pe<i.symbolInstances.length;pe++){const ae=i.symbolInstances.get(pe),{numHorizontalGlyphVertices:Pe,numVerticalGlyphVertices:Ne,crossTileID:ge}=ae;let De=this.opacities[ge];u[ge]?De=C:De||(De=ue,this.opacities[ge]=De),u[ge]=!0;const He=ae.numIconVertices>0,We=this.placedOrientations[ae.crossTileID],tt=We===l.ai.vertical,st=We===l.ai.horizontal||We===l.ai.horizontalOnly;if(Pe>0||Ne>0){const ot=or(De.text);ce(i.text,Pe,tt?jr:ot),ce(i.text,Ne,st?jr:ot);const dt=De.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(vt=>{vt>=0&&(i.text.placedSymbolArray.get(vt).hidden=dt||tt?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=dt||st?1:0);const Bt=this.variableOffsets[ae.crossTileID];Bt&&this.markUsedJustification(i,Bt.anchor,ae,We);const _r=this.placedOrientations[ae.crossTileID];_r&&(this.markUsedJustification(i,"left",ae,_r),this.markUsedOrientation(i,_r,ae))}if(He){const ot=or(De.icon),dt=!(X&&ae.verticalPlacedIconSymbolIndex&&tt);ae.placedIconSymbolIndex>=0&&(ce(i.icon,ae.numIconVertices,dt?ot:jr),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=De.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(ce(i.icon,ae.numVerticalIconVertices,dt?jr:ot),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ot=i.collisionArrays[pe];if(ot){let dt=new l.P(0,0);if(ot.textBox||ot.verticalTextBox){let _r=!0;if(D){const vt=this.variableOffsets[ge];vt?(dt=Ve(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textBoxScale),B&&dt._rotate(N?this.transform.angle:-this.transform.angle)):_r=!1}ot.textBox&&Se(i.textCollisionBox.collisionVertexArray,De.text.placed,!_r||tt,dt.x,dt.y),ot.verticalTextBox&&Se(i.textCollisionBox.collisionVertexArray,De.text.placed,!_r||st,dt.x,dt.y)}const Bt=!!(!st&&ot.verticalIconBox);ot.iconBox&&Se(i.iconCollisionBox.collisionVertexArray,De.icon.placed,Bt,X?dt.x:0,X?dt.y:0),ot.verticalIconBox&&Se(i.iconCollisionBox.collisionVertexArray,De.icon.placed,!Bt,X?dt.x:0,X?dt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=pe.invProjMatrix,i.placementViewportMatrix=pe.viewportMatrix,i.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Se(y,i,u,p,g){y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0)}const xe=Math.pow(2,25),qe=Math.pow(2,24),Ke=Math.pow(2,17),Qe=Math.pow(2,16),$t=Math.pow(2,9),Tt=Math.pow(2,8),er=Math.pow(2,1);function or(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*xe+i*qe+u*Ke+i*Qe+u*$t+i*Tt+u*er+i}const jr=0;class pn{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((k,P)=>k.sortKey-P.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Ai{constructor(i,u,p,g,_,C,k,P){this.placement=new nt(i,u,C,k,P),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const g=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=k)&&(!C.maxzoom||C.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new pn(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Vn=512/l.N/2;class Ho{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),k=C.key,P=g.get(k);P?P.push(C):g.set(k,[C])}for(const[_,C]of g){const k={positions:C.map(P=>({x:Math.floor(P.anchorX*Vn),y:Math.floor(P.anchorY*Vn)})),crossTileIDs:C.map(P=>P.crossTileID)};if(k.positions.length>128){const P=new l.av(k.positions.length,16,Uint16Array);for(const{x:D,y:B}of k.positions)P.add(D,B);P.finish(),delete k.positions,k.index=P}this._symbolsByKey[_]=k}}getScaledCoordinates(i,u){const{x:p,y:g,z:_}=this.tileID.canonical,{x:C,y:k,z:P}=u.canonical,D=Vn/Math.pow(2,P-_),B=(k*l.N+i.anchorY)*D,N=g*l.N*Vn;return{x:Math.floor((C*l.N+i.anchorX)*D-p*l.N*Vn),y:Math.floor(B-N)}}findMatches(i,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const k=this._symbolsByKey[C.key];if(!k)continue;const P=this.getScaledCoordinates(C,u);if(k.index){const D=k.index.range(P.x-g,P.y-g,P.x+g,P.y+g).sort();for(const B of D){const N=k.crossTileIDs[B];if(!p[N]){p[N]=!0,C.crossTileID=N;break}}}else if(k.positions)for(let D=0;D<k.positions.length;D++){const B=k.positions[D],N=k.crossTileIDs[D];if(Math.abs(B.x-P.x)<=g&&Math.abs(B.y-P.y)<=g&&!p[N]){p[N]=!0,C.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class mr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ko{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const C in g){const k=g[C];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),_[k.tileID.key]=k}this.indexes[p]=_}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const k in C){const P=C[k];P.tileID.isChildOf(i)&&P.findMatches(u.symbolInstances,i,g)}else{const k=C[i.scaledTo(Number(_)).key];k&&k.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ho(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],u=!0)}return u}}class tr{constructor(){this.layerIndexes={},this.crossTileIDs=new mr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new ko);let _=!1;const C={};g.handleWrapJump(p);for(const k of u){const P=k.getBucket(i);P&&i.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,P,this.crossTileIDs)&&(_=!0),C[P.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const Br=(y,i)=>l.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Tr=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ei=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Zt=l.aw();class fr extends l.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new at(cr(),this,i._getMapId()),this.imageManager=new ze,this.imageManager.setEventedParent(this),this.glyphManager=new Te(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new et(256,512),this.crossTileSymbolIndex=new tr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const p=this;this._rtlTextPluginCallback=fr.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(l.aA(_),C&&C.every(k=>k))for(const k in p.sourceCaches){const P=p.sourceCaches[k].getSource().type;P!=="vector"&&P!=="geojson"||p.sourceCaches[k].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const k in this._layers){const P=this._layers[k];P.source===C.id&&this._validateLayer(P)}})}loadURL(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,F.Style);this._request=l.f(g,(_,C)=>{this._request=null,_?this.fire(new l.j(_)):C&&this._load(C,u,p)})}loadJSON(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Zt,{validate:!1})}_load(i,u,p){var g;const _=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!Br(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Oe(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=l.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,k){const P=Z(g),D=P.length,B=C>1?"@2x":"",N={},X={},ue={};for(const{id:ce,url:pe}of P){const ae=_.transformRequest(_.normalizeSpriteURL(pe,B,".json"),F.SpriteJSON),Pe=`${ce}_${ae.url}`;N[Pe]=l.f(ae,(De,He)=>{delete N[Pe],X[ce]=He,Ce(k,X,ue,De,D)});const Ne=_.transformRequest(_.normalizeSpriteURL(pe,B,".png"),F.SpriteImage),ge=`${ce}_${Ne.url}`;N[ge]=K.getImage(Ne,(De,He)=>{delete N[ge],ue[ce]=He,Ce(k,X,ue,De,D)})}return{cancel(){for(const ce of Object.values(N))ce.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new l.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const k=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(P=>!(P in _)):[];for(const P of k)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in _[C]){const D=C==="default"?P:`${C}:${P}`;this._spritesImagesIds[C].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[C][P],!1):this.imageManager.addImage(D,_[C][P]),u&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const g of i)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const k=this._updatedSources[C];if(k==="reload")this._reloadSource(C);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];p[g]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,Br(this,l.y(i)))return!1;(i=l.aD(i)).layers=l.aB(i.layers);const g=l.aE(p,i).filter(C=>!(C.command in ei));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in Tr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new wr(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(Br(this,l.aF(i)))return;_=l.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=l.aD(i),i=l.e(i,{source:g})),this._validate(l.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;_=l.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!l.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.y.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=l.aD(u),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,g),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,g=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",p={},g=[];for(let C=this._order.length-1;C>=0;C--){const k=this._order[C];if(u(k)){p[k]=C;for(const P of i){const D=P[k];if(D)for(const B of D)g.push(B)}}}g.sort((C,k)=>k.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const k=this._order[C];if(u(k))for(let P=g.length-1;P>=0;P--){const D=g[P].feature;if(p[D.layer.id]<C)break;_.push(D),g.pop()}else for(const P of i){const D=P[k];if(D)for(const B of D)_.push(B.feature)}}return _}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const k of u.layers){const P=this._layers[k];if(!P)return this.fire(new l.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[P.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const k in this.sourceCaches)u.layers&&!g[k]||_.push(Et(this.sourceCaches[k],this._layers,C,i,u,p));return this.placement&&_.push(function(k,P,D,B,N,X,ue){const ce={},pe=X.queryRenderedSymbols(B),ae=[];for(const Pe of Object.keys(pe).map(Number))ae.push(ue[Pe]);ae.sort(ur);for(const Pe of ae){const Ne=Pe.featureIndex.lookupSymbolFeatures(pe[Pe.bucketInstanceId],P,Pe.bucketIndex,Pe.sourceLayerIndex,N.filter,N.layers,N.availableImages,k);for(const ge in Ne){const De=ce[ge]=ce[ge]||[],He=Ne[ge];He.sort((We,tt)=>{const st=Pe.featureSortOrder;if(st){const ot=st.indexOf(We.featureIndex);return st.indexOf(tt.featureIndex)-ot}return tt.featureIndex-We.featureIndex});for(const We of He)De.push(We)}}for(const Pe in ce)ce[Pe].forEach(Ne=>{const ge=Ne.feature,De=D[k[Pe].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=De});return ce}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(g,_){const C=g.getRenderableIds().map(D=>g.getTileByID(D)),k=[],P={};for(let D=0;D<C.length;D++){const B=C[D],N=B.tileID.canonical.key;P[N]||(P[N]=!0,B.querySourceFeatures(k,_))}return k}(p,u):[]}addSourceType(i,u,p){return lr(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{Mr[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in i)if(!l.aG(i[C],p[C])){g=!0;break}if(!g)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,p,g,_={}){return(!_||_.validate!==!1)&&Br(this,i.call(l.y,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,g,_=!1){let C=!1,k=!1;const P={};for(const D of this._order){const B=this._layers[D];if(B.type!=="symbol")continue;if(!P[B.source]){const X=this.sourceCaches[B.source];P[B.source]=X.getRenderableIds(!0).map(ue=>X.getTileByID(ue)).sort((ue,ce)=>ce.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(ce.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(B,P[B.source],i.center.lng);C=C||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),i.zoom))&&(this.pauseablePlacement=new Ai(i,this.map.terrain,this._order,_,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),k=!0),C&&this.pauseablePlacement.placement.setStale()),k||C)for(const D of this._order){const B=this._layers[D];B.type==="symbol"&&this.placement.updateLayerOpacities(B,P[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return l.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(l.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...Z(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=Z(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(l.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}fr.registerForPluginStateChange=l.aK;var Qr=l.Q([{name:"a_pos",type:"Int16",components:2}]),Sr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Or={prelude:zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Sr),terrainDepth:zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Sr),terrainCoords:zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Sr)};function zr(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,k={};return{fragmentSource:y=y.replace(u,(P,D,B,N,X)=>(k[X]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${B} ${N} ${X};
#else
uniform ${B} ${N} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${B} ${N} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(u,(P,D,B,N,X)=>{const ue=N==="float"?"vec2":"vec4",ce=X.match(/color/)?"color":ue;return k[X]?D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${ue} a_${X};
varying ${B} ${N} ${X};
#else
uniform ${B} ${N} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${B} ${N} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${B} ${N} ${X} = u_${X};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${ue} a_${X};
#else
uniform ${B} ${N} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${N} ${X} = a_${X};
#else
    ${B} ${N} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${N} ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${B} ${N} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:C}}class pa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,g,_,C,k,P,D){this.context=i;let B=this.boundPaintVertexBuffers.length!==g.length;for(let N=0;!B&&N<g.length;N++)this.boundPaintVertexBuffers[N]!==g[N]&&(B=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==D?this.freshBind(u,p,g,_,C,k,P,D):(i.bindVertexArray.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),P&&P.bind(),D&&D.bind())}freshBind(i,u,p,g,_,C,k,P){const D=i.numAttributes,B=this.context,N=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=P,u.enableAttributes(N,i);for(const X of p)X.enableAttributes(N,i);C&&C.enableAttributes(N,i),k&&k.enableAttributes(N,i),P&&P.enableAttributes(N,i),u.bind(),u.setVertexAttribPointers(N,i,_);for(const X of p)X.bind(),X.setVertexAttribPointers(N,i,_);C&&(C.bind(),C.setVertexAttribPointers(N,i,_)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(N,i,_)),P&&(P.bind(),P.setVertexAttribPointers(N,i,_)),B.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function _n(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");i.push(p.pop())}return i}class Sc{constructor(i,u,p,g,_,C){const k=i.gl;this.program=k.createProgram();const P=_n(u.staticAttributes),D=p?p.getBinderAttributes():[],B=P.concat(D),N=Or.prelude.staticUniforms?_n(Or.prelude.staticUniforms):[],X=u.staticUniforms?_n(u.staticUniforms):[],ue=p?p.getBinderUniforms():[],ce=N.concat(X).concat(ue),pe=[];for(const We of ce)pe.indexOf(We)<0&&pe.push(We);const ae=p?p.defines():[];_&&ae.push("#define OVERDRAW_INSPECTOR;"),C&&ae.push("#define TERRAIN3D;");const Pe=ae.concat(Or.prelude.fragmentSource,u.fragmentSource).join(`
`),Ne=ae.concat(Or.prelude.vertexSource,u.vertexSource).join(`
`),ge=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(ge,Pe),k.compileShader(ge),!k.getShaderParameter(ge,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(ge)}`);k.attachShader(this.program,ge);const De=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(De,Ne),k.compileShader(De),!k.getShaderParameter(De,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(De)}`);k.attachShader(this.program,De),this.attributes={};const He={};this.numAttributes=B.length;for(let We=0;We<this.numAttributes;We++)B[We]&&(k.bindAttribLocation(this.program,We,B[We]),this.attributes[B[We]]=We);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(De),k.deleteShader(ge);for(let We=0;We<pe.length;We++){const tt=pe[We];if(tt&&!He[tt]){const st=k.getUniformLocation(this.program,tt);st&&(He[tt]=st)}}this.fixedUniforms=g(i,He),this.terrainUniforms=((We,tt)=>({u_depth:new l.aL(We,tt.u_depth),u_terrain:new l.aL(We,tt.u_terrain),u_terrain_dim:new l.aM(We,tt.u_terrain_dim),u_terrain_matrix:new l.aN(We,tt.u_terrain_matrix),u_terrain_unpack:new l.aO(We,tt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(We,tt.u_terrain_exaggeration)}))(i,He),this.binderUniforms=p?p.getUniforms(i,He):[]}draw(i,u,p,g,_,C,k,P,D,B,N,X,ue,ce,pe,ae,Pe,Ne){const ge=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),P){i.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,P.depthTexture),i.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,P.texture);for(const He in this.terrainUniforms)this.terrainUniforms[He].set(P[He])}for(const He in this.fixedUniforms)this.fixedUniforms[He].set(k[He]);pe&&pe.setUniforms(i,this.binderUniforms,ue,{zoom:ce});let De=0;switch(u){case ge.LINES:De=2;break;case ge.TRIANGLES:De=3;break;case ge.LINE_STRIP:De=1}for(const He of X.get()){const We=He.vaos||(He.vaos={});(We[D]||(We[D]=new pa)).bind(i,this,B,pe?pe.getPaintVertexBuffers():[],N,He.vertexOffset,ae,Pe,Ne),ge.drawElements(u,He.primitiveLength*De,ge.UNSIGNED_SHORT,He.primitiveOffset*De*2)}}}function co(y,i,u){const p=1/be(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),k=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,k>>16],u_pixel_coord_lower:[65535&C,65535&k]}}const yd=(y,i,u,p)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],k=function(){var D=new l.A(9);return l.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();g.properties.get("anchor")==="viewport"&&function(D,B){var N=Math.sin(B),X=Math.cos(B);D[0]=X,D[1]=N,D[2]=0,D[3]=-N,D[4]=X,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(k,-i.transform.angle),function(D,B,N){var X=B[0],ue=B[1],ce=B[2];D[0]=X*N[0]+ue*N[3]+ce*N[6],D[1]=X*N[1]+ue*N[4]+ce*N[7],D[2]=X*N[2]+ue*N[5]+ce*N[8]}(C,C,k);const P=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+u,u_opacity:p}},Ba=(y,i,u,p,g,_,C)=>l.e(yd(y,i,u,p),co(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),lf=y=>({u_matrix:y}),vd=(y,i,u,p)=>l.e(lf(y),co(u,i,p)),Cc=(y,i)=>({u_matrix:y,u_world:i}),kc=(y,i,u,p,g)=>l.e(vd(y,i,u,p),{u_world:g}),Oa=(y,i,u,p)=>{const g=y.transform;let _,C;if(p.paint.get("circle-pitch-alignment")==="map"){const k=be(u,1,g.zoom);_=!0,C=[k,k]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},_d=(y,i,u)=>{const p=be(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:_}},zl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),cf=y=>({u_matrix:y}),pv=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:be(i,1,u),u_intensity:p});function xd(y,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new l.U(0,p/u).toLngLat().lat,new l.U(0,(p+1)/u).toLngLat().lat]}const bd=(y,i,u,p)=>{const g=y.transform;return{u_matrix:Ic(y,i,u,p),u_ratio:1/be(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},uf=(y,i,u,p,g)=>l.e(bd(y,i,u,g),{u_image:0,u_image_height:p}),fv=(y,i,u,p,g)=>{const _=y.transform,C=hf(i,_);return{u_matrix:Ic(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/be(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},df=(y,i,u,p,g,_)=>{const C=y.lineAtlas,k=hf(i,y.transform),P=u.layout.get("line-cap")==="round",D=C.getDash(p.from,P),B=C.getDash(p.to,P),N=D.width*g.fromScale,X=B.width*g.toScale;return l.e(bd(y,i,u,_),{u_patternscale_a:[k/N,-D.height/2],u_patternscale_b:[k/X,-B.height/2],u_sdfgamma:C.width/(256*Math.min(N,X)*y.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:B.y,u_mix:g.t})};function hf(y,i){return 1/be(y,1,i.tileZoom)}function Ic(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const pf=(y,i,u,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:ff(g.paint.get("raster-hue-rotate"))};var _,C};function ff(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const wd=(y,i,u,p,g,_,C,k,P,D)=>{const B=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:B.cameraToCenterDistance,u_pitch:B.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:B.width/B.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:k,u_is_text:+P,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},Sd=(y,i,u,p,g,_,C,k,P,D,B)=>{const N=g.transform;return l.e(wd(y,i,u,p,g,_,C,k,P,D),{u_gamma_scale:p?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+B})},is=(y,i,u,p,g,_,C,k,P,D)=>l.e(Sd(y,i,u,p,g,_,C,k,!0,P,!0),{u_texsize_icon:D,u_texture_icon:1}),Tc=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),uo=(y,i,u,p,g,_)=>l.e(function(C,k,P,D){const B=P.imageManager.getPattern(C.from.toString()),N=P.imageManager.getPattern(C.to.toString()),{width:X,height:ue}=P.imageManager.getPixelSize(),ce=Math.pow(2,D.tileID.overscaledZ),pe=D.tileSize*Math.pow(2,P.transform.tileZoom)/ce,ae=pe*(D.tileID.canonical.x+D.tileID.wrap*ce),Pe=pe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[X,ue],u_mix:k.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/be(D,1,P.transform.tileZoom),u_pixel_coord_upper:[ae>>16,Pe>>16],u_pixel_coord_lower:[65535&ae,65535&Pe]}}(p,_,u,g),{u_matrix:y,u_opacity:i}),Pc={fillExtrusion:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_opacity:new l.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_height_factor:new l.aM(y,i.u_height_factor),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade),u_opacity:new l.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,i.u_scale_with_map),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_matrix:new l.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_overscale_factor:new l.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_inv_matrix:new l.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new l.aR(y,i.u_color),u_matrix:new l.aN(y,i.u_matrix),u_overlay:new l.aL(y,i.u_overlay),u_overlay_scale:new l.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new l.aM(y,i.u_extrude_scale),u_intensity:new l.aM(y,i.u_intensity),u_matrix:new l.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_color_ramp:new l.aL(y,i.u_color_ramp),u_opacity:new l.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_latrange:new l.aQ(y,i.u_latrange),u_light:new l.aQ(y,i.u_light),u_shadow:new l.aR(y,i.u_shadow),u_highlight:new l.aR(y,i.u_highlight),u_accent:new l.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_dimension:new l.aQ(y,i.u_dimension),u_zoom:new l.aM(y,i.u_zoom),u_unpack:new l.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_image:new l.aL(y,i.u_image),u_image_height:new l.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texsize:new l.aQ(y,i.u_texsize),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_image:new l.aL(y,i.u_image),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_patternscale_a:new l.aQ(y,i.u_patternscale_a),u_patternscale_b:new l.aQ(y,i.u_patternscale_b),u_sdfgamma:new l.aM(y,i.u_sdfgamma),u_image:new l.aL(y,i.u_image),u_tex_y_a:new l.aM(y,i.u_tex_y_a),u_tex_y_b:new l.aM(y,i.u_tex_y_b),u_mix:new l.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_tl_parent:new l.aQ(y,i.u_tl_parent),u_scale_parent:new l.aM(y,i.u_scale_parent),u_buffer_scale:new l.aM(y,i.u_buffer_scale),u_fade_t:new l.aM(y,i.u_fade_t),u_opacity:new l.aM(y,i.u_opacity),u_image0:new l.aL(y,i.u_image0),u_image1:new l.aL(y,i.u_image1),u_brightness_low:new l.aM(y,i.u_brightness_low),u_brightness_high:new l.aM(y,i.u_brightness_high),u_saturation_factor:new l.aM(y,i.u_saturation_factor),u_contrast_factor:new l.aM(y,i.u_contrast_factor),u_spin_weights:new l.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texsize_icon:new l.aQ(y,i.u_texsize_icon),u_texture:new l.aL(y,i.u_texture),u_texture_icon:new l.aL(y,i.u_texture_icon),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_color:new l.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_image:new l.aL(y,i.u_image),u_pattern_tl_a:new l.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,i.u_pattern_br_b),u_texsize:new l.aQ(y,i.u_texsize),u_mix:new l.aM(y,i.u_mix),u_pattern_size_a:new l.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,i.u_pattern_size_b),u_scale_a:new l.aM(y,i.u_scale_a),u_scale_b:new l.aM(y,i.u_scale_b),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_terrain_coords_id:new l.aM(y,i.u_terrain_coords_id),u_ele_delta:new l.aM(y,i.u_ele_delta)})};class Ec{constructor(i,u,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ml={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zc{constructor(i,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[Ml[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bs=new WeakMap;function Fa(y){var i;if(Bs.has(y))return Bs.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Bs.set(y,u),u}}class Cr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mc extends Cr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Ki extends Cr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Xi extends Cr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Cd extends Cr{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Dc extends Cr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Ac extends Cr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class kd extends Cr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Id extends Cr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Rc extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Td extends Cr{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Pd extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Lc extends Cr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class mf extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class gf extends Cr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Os extends Cr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class mv extends Cr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class gv extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class yv extends Cr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class vv extends Cr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class _v extends Cr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class xv extends Cr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ed extends Cr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class $c extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class zd extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Md extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Fs extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class yf extends Cr{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class vf extends Cr{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Fa(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Dd extends Cr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class os extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class _f extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Na extends Cr{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Ns extends Na{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class xf extends Na{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ad extends Na{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Vr{constructor(i,u,p,g,_){this.context=i,this.width=u,this.height=p;const C=i.gl,k=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Ns(i,k),g)this.depthAttachment=_?new Ad(i,k):new xf(i,k);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class fn{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}fn.Replace=[1,0],fn.disabled=new fn(fn.Replace,l.aT.transparent,[!1,!1,!1,!1]),fn.unblended=new fn(fn.Replace,l.aT.transparent,[!0,!0,!0,!0]),fn.alphaBlended=new fn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class bv{constructor(i){var u,p;if(this.gl=i,this.clearColor=new Mc(this),this.clearDepth=new Ki(this),this.clearStencil=new Xi(this),this.colorMask=new Cd(this),this.depthMask=new Dc(this),this.stencilMask=new Ac(this),this.stencilFunc=new kd(this),this.stencilOp=new Id(this),this.stencilTest=new Rc(this),this.depthRange=new Td(this),this.depthTest=new Pd(this),this.depthFunc=new Lc(this),this.blend=new mf(this),this.blendFunc=new gf(this),this.blendColor=new Os(this),this.blendEquation=new mv(this),this.cullFace=new gv(this),this.cullFaceSide=new yv(this),this.frontFace=new vv(this),this.program=new _v(this),this.activeTexture=new xv(this),this.viewport=new Ed(this),this.bindFramebuffer=new $c(this),this.bindRenderbuffer=new zd(this),this.bindTexture=new Md(this),this.bindVertexBuffer=new Fs(this),this.bindElementBuffer=new yf(this),this.bindVertexArray=new vf(this),this.pixelStoreUnpack=new Dd(this),this.pixelStoreUnpackPremultiplyAlpha=new os(this),this.pixelStoreUnpackFlipY=new _f(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Fa(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Ec(this,i,u)}createVertexBuffer(i,u,p){return new zc(this,i,u,p)}createRenderbuffer(i,u,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,p,g){return new Vr(this,i,u,p,g)}clear({color:i,depth:u,stencil:p}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aG(i.blendFunction,fn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Fa(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Fa(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class kr{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}kr.ReadOnly=!1,kr.ReadWrite=!0,kr.disabled=new kr(519,kr.ReadOnly,[0,1]);const as=7680;class mn{constructor(i,u,p,g,_,C){this.test=i,this.ref=u,this.mask=p,this.fail=g,this.depthFail=_,this.pass=C}}mn.disabled=new mn({func:519,mask:0},0,0,as,as,as);class dn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let Dl;function bf(y,i,u,p,g,_,C){const k=y.context,P=k.gl,D=y.useProgram("collisionBox"),B=[];let N=0,X=0;for(let ge=0;ge<p.length;ge++){const De=p[ge],He=i.getTile(De),We=He.getBucket(u);if(!We)continue;let tt=De.posMatrix;g[0]===0&&g[1]===0||(tt=y.translatePosMatrix(De.posMatrix,He,g,_));const st=C?We.textCollisionBox:We.iconCollisionBox,ot=We.collisionCircleArray;if(ot.length>0){const dt=l.Z(),Bt=tt;l.aU(dt,We.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(dt,dt,We.placementViewportMatrix),B.push({circleArray:ot,circleOffset:X,transform:Bt,invTransform:dt,coord:De}),N+=ot.length/4,X=N}st&&D.draw(k,P.LINES,kr.disabled,mn.disabled,y.colorModeForRenderPass(),dn.disabled,_d(tt,y.transform,He),y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),u.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,y.transform.zoom,null,null,st.collisionVertexBuffer)}if(!C||!B.length)return;const ue=y.useProgram("collisionCircle"),ce=new l.aV;ce.resize(4*N),ce._trim();let pe=0;for(const ge of B)for(let De=0;De<ge.circleArray.length/4;De++){const He=4*De,We=ge.circleArray[He+0],tt=ge.circleArray[He+1],st=ge.circleArray[He+2],ot=ge.circleArray[He+3];ce.emplace(pe++,We,tt,st,ot,0),ce.emplace(pe++,We,tt,st,ot,1),ce.emplace(pe++,We,tt,st,ot,2),ce.emplace(pe++,We,tt,st,ot,3)}(!Dl||Dl.length<2*N)&&(Dl=function(ge){const De=2*ge,He=new l.aX;He.resize(De),He._trim();for(let We=0;We<De;We++){const tt=6*We;He.uint16[tt+0]=4*We+0,He.uint16[tt+1]=4*We+1,He.uint16[tt+2]=4*We+2,He.uint16[tt+3]=4*We+2,He.uint16[tt+4]=4*We+3,He.uint16[tt+5]=4*We+0}return He}(N));const ae=k.createIndexBuffer(Dl,!0),Pe=k.createVertexBuffer(ce,l.aW.members,!0);for(const ge of B){const De={u_matrix:ge.transform,u_inv_matrix:ge.invTransform,u_camera_to_center_distance:(Ne=y.transform).cameraToCenterDistance,u_viewport_size:[Ne.width,Ne.height]};ue.draw(k,P.TRIANGLES,kr.disabled,mn.disabled,y.colorModeForRenderPass(),dn.disabled,De,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge.coord),u.id,Pe,ae,l.S.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ne;Pe.destroy(),ae.destroy()}dn.disabled=new dn(!1,1029,2305),dn.backCCW=new dn(!0,1029,2305);const Rd=l.ao(new Float32Array(16));function Bc(y,i,u,p,g,_){const{horizontalAlign:C,verticalAlign:k}=l.au(y);return new l.P((-(C-.5)*i/g+p[0])*_,(-(k-.5)*u/g+p[1])*_)}function Oc(y,i,u,p,g,_,C,k,P,D,B){const N=y.text.placedSymbolArray,X=y.text.dynamicLayoutVertexArray,ue=y.icon.dynamicLayoutVertexArray,ce={};X.clear();for(let pe=0;pe<N.length;pe++){const ae=N.get(pe),Pe=ae.hidden||!ae.crossTileID||y.allowVerticalPlacement&&!ae.placedOrientation?null:p[ae.crossTileID];if(Pe){const Ne=new l.P(ae.anchorX,ae.anchorY),ge=St(Ne,u?C:_,B),De=Qt(g.cameraToCenterDistance,ge.signedDistanceFromCamera);let He=l.aj(y.textSizeData,P,ae)*De/l.ap;u&&(He*=y.tilePixelRatio/k);const{width:We,height:tt,anchor:st,textOffset:ot,textBoxScale:dt}=Pe,Bt=Bc(st,We,tt,ot,dt,He),_r=u?St(Ne.add(Bt),_,B).point:ge.point.add(i?Bt.rotate(-g.angle):Bt),vt=y.allowVerticalPlacement&&ae.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let ir=0;ir<ae.numGlyphs;ir++)l.ak(X,_r,vt);D&&ae.associatedIconIndex>=0&&(ce[ae.associatedIconIndex]={shiftedAnchor:_r,angle:vt})}else te(ae.numGlyphs,X)}if(D){ue.clear();const pe=y.icon.placedSymbolArray;for(let ae=0;ae<pe.length;ae++){const Pe=pe.get(ae);if(Pe.hidden)te(Pe.numGlyphs,ue);else{const Ne=ce[ae];if(Ne)for(let ge=0;ge<Pe.numGlyphs;ge++)l.ak(ue,Ne.shiftedAnchor,Ne.angle);else te(Pe.numGlyphs,ue)}}y.icon.dynamicLayoutVertexBuffer.updateData(ue)}y.text.dynamicLayoutVertexBuffer.updateData(X)}function Ld(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Fc(y,i,u,p,g,_,C,k,P,D,B,N){const X=y.context,ue=X.gl,ce=y.transform,pe=k==="map",ae=P==="map",Pe=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ne=pe&&!ae&&!Pe,ge=!u.layout.get("symbol-sort-key").isConstant();let De=!1;const He=y.depthModeForSublayer(0,kr.ReadOnly),We=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tt=[];for(const st of p){const ot=i.getTile(st),dt=ot.getBucket(u);if(!dt)continue;const Bt=g?dt.text:dt.icon;if(!Bt||!Bt.segments.get().length||!Bt.hasVisibleVertices)continue;const _r=Bt.programConfigurations.get(u.id),vt=g||dt.sdfIcons,ir=g?dt.textSizeData:dt.iconSizeData,Nt=ae||ce.pitch!==0,qr=y.useProgram(Ld(vt,g,dt),_r),yr=l.ah(ir,ce.zoom),pr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(st);let xr,kn,en,ai,Un=[0,0],Mn=null;if(g)kn=ot.glyphAtlasTexture,en=ue.LINEAR,xr=ot.glyphAtlasTexture.size,dt.iconsInText&&(Un=ot.imageAtlasTexture.size,Mn=ot.imageAtlasTexture,ai=Nt||y.options.rotating||y.options.zooming||ir.kind==="composite"||ir.kind==="camera"?ue.LINEAR:ue.NEAREST);else{const In=u.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;kn=ot.imageAtlasTexture,en=vt||y.options.rotating||y.options.zooming||In||Nt?ue.LINEAR:ue.NEAREST,xr=ot.imageAtlasTexture.size}const Qi=be(ot,1,y.transform.zoom),sn=Be(st.posMatrix,ae,pe,y.transform,Qi),Go=xt(st.posMatrix,ae,pe,y.transform,Qi),qo=We&&dt.hasTextData(),Ua=u.layout.get("icon-text-fit")!=="none"&&qo&&dt.hasIconData();if(Pe){const In=y.style.map.terrain?($i,Tn)=>y.style.map.terrain.getElevation(st,$i,Tn):null,Hn=u.layout.get("text-rotation-alignment")==="map";it(dt,st.posMatrix,y,g,sn,Go,ae,D,Hn,In)}const ds=y.translatePosMatrix(st.posMatrix,ot,_,C),qs=Pe||g&&We||Ua?Rd:sn,hi=y.translatePosMatrix(Go,ot,_,C,!0),si=vt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let bi;bi=vt?dt.iconsInText?is(ir.kind,yr,Ne,ae,y,ds,qs,hi,xr,Un):Sd(ir.kind,yr,Ne,ae,y,ds,qs,hi,g,xr,!0):wd(ir.kind,yr,Ne,ae,y,ds,qs,hi,g,xr);const hs={program:qr,buffers:Bt,uniformValues:bi,atlasTexture:kn,atlasTextureIcon:Mn,atlasInterpolation:en,atlasInterpolationIcon:ai,isSDF:vt,hasHalo:si};if(ge&&dt.canOverlap){De=!0;const In=Bt.segments.get();for(const Hn of In)tt.push({segments:new l.S([Hn]),sortKey:Hn.sortKey,state:hs,terrainData:pr})}else tt.push({segments:Bt.segments,sortKey:0,state:hs,terrainData:pr})}De&&tt.sort((st,ot)=>st.sortKey-ot.sortKey);for(const st of tt){const ot=st.state;if(X.activeTexture.set(ue.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,ue.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(X.activeTexture.set(ue.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),ot.isSDF){const dt=ot.uniformValues;ot.hasHalo&&(dt.u_is_halo=1,$d(ot.buffers,st.segments,u,y,ot.program,He,B,N,dt,st.terrainData)),dt.u_is_halo=0}$d(ot.buffers,st.segments,u,y,ot.program,He,B,N,ot.uniformValues,st.terrainData)}}function $d(y,i,u,p,g,_,C,k,P,D){const B=p.context;g.draw(B,B.gl.TRIANGLES,_,C,k,dn.disabled,P,D,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Al(y,i,u,p,g){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let C=_[u.to.toString()],k=_[u.from.toString()];if(!C&&k&&(C=k),!k&&C&&(k=C),!C||!k){const P=g.getPaintProperty(i);C=_[P],k=_[P]}C&&k&&y.setConstantPatternPositions(C,k)}function Rl(y,i,u,p,g,_,C){const k=y.context.gl,P="fill-pattern",D=u.paint.get(P),B=D&&D.constantOr(1),N=u.getCrossfadeParameters();let X,ue,ce,pe,ae;C?(ue=B&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=k.LINES):(ue=B?"fillPattern":"fill",X=k.TRIANGLES);const Pe=D.constantOr(null);for(const Ne of p){const ge=i.getTile(Ne);if(B&&!ge.patternsLoaded())continue;const De=ge.getBucket(u);if(!De)continue;const He=De.programConfigurations.get(u.id),We=y.useProgram(ue,He),tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne);B&&(y.context.activeTexture.set(k.TEXTURE0),ge.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),He.updatePaintBuffers(N)),Al(He,P,Pe,ge,u);const st=tt?Ne:null,ot=y.translatePosMatrix(st?st.posMatrix:Ne.posMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){pe=De.indexBuffer2,ae=De.segments2;const dt=[k.drawingBufferWidth,k.drawingBufferHeight];ce=ue==="fillOutlinePattern"&&B?kc(ot,y,N,ge,dt):Cc(ot,dt)}else pe=De.indexBuffer,ae=De.segments,ce=B?vd(ot,y,N,ge):lf(ot);We.draw(y.context,X,g,y.stencilModeForClipping(Ne),_,dn.disabled,ce,tt,u.id,De.layoutVertexBuffer,pe,ae,u.paint,y.transform.zoom,He)}}function Ll(y,i,u,p,g,_,C){const k=y.context,P=k.gl,D="fill-extrusion-pattern",B=u.paint.get(D),N=B.constantOr(1),X=u.getCrossfadeParameters(),ue=u.paint.get("fill-extrusion-opacity"),ce=B.constantOr(null);for(const pe of p){const ae=i.getTile(pe),Pe=ae.getBucket(u);if(!Pe)continue;const Ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),ge=Pe.programConfigurations.get(u.id),De=y.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ge);N&&(y.context.activeTexture.set(P.TEXTURE0),ae.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ge.updatePaintBuffers(X)),Al(ge,D,ce,ae,u);const He=y.translatePosMatrix(pe.posMatrix,ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),We=u.paint.get("fill-extrusion-vertical-gradient"),tt=N?Ba(He,y,We,ue,pe,X,ae):yd(He,y,We,ue);De.draw(k,k.gl.TRIANGLES,g,_,C,dn.backCCW,tt,Ne,u.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,u.paint,y.transform.zoom,ge,y.style.map.terrain&&Pe.centroidVertexBuffer)}}function wv(y,i,u,p,g,_,C){const k=y.context,P=k.gl,D=u.fbo;if(!D)return;const B=y.useProgram("hillshade"),N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,D.colorAttachment.get()),B.draw(k,P.TRIANGLES,g,_,C,dn.disabled,((X,ue,ce,pe)=>{const ae=ce.paint.get("hillshade-shadow-color"),Pe=ce.paint.get("hillshade-highlight-color"),Ne=ce.paint.get("hillshade-accent-color");let ge=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=X.transform.angle);const De=!X.options.moving;return{u_matrix:pe?pe.posMatrix:X.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),De),u_image:0,u_latrange:xd(0,ue.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),ge],u_shadow:ae,u_highlight:Pe,u_accent:Ne}})(y,u,p,N?i:null),N,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Bd(y,i,u,p,g,_){const C=y.context,k=C.gl,P=i.dem;if(P&&P.data){const D=P.dim,B=P.stride,N=P.getPixels();if(C.activeTexture.set(k.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(B),i.demTexture){const ue=i.demTexture;ue.update(N,{premultiply:!1}),ue.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else i.demTexture=new _e(C,N,k.RGBA,{premultiply:!1}),i.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);C.activeTexture.set(k.TEXTURE0);let X=i.fbo;if(!X){const ue=new _e(C,{width:D,height:D,data:null},k.RGBA);ue.bind(k.LINEAR,k.CLAMP_TO_EDGE),X=i.fbo=C.createFramebuffer(D,D,!0,!1),X.colorAttachment.set(ue.texture)}C.bindFramebuffer.set(X.framebuffer),C.viewport.set([0,0,D,D]),y.useProgram("hillshadePrepare").draw(C,k.TRIANGLES,p,g,_,dn.disabled,((ue,ce)=>{const pe=ce.stride,ae=l.Z();return l.aS(ae,0,l.N,-l.N,0,0,1),l.$(ae,ae,[0,-l.N,0]),{u_matrix:ae,u_image:1,u_dimension:[pe,pe],u_zoom:ue.overscaledZ,u_unpack:ce.getUnpackVector()}})(i.tileID,P),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Sv(y,i,u,p,g,_){const C=p.paint.get("raster-fade-duration");if(!_&&C>0){const k=l.h.now(),P=(k-y.timeAdded)/C,D=i?(k-i.timeAdded)/C:-1,B=u.getSource(),N=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),X=!i||Math.abs(i.tileID.overscaledZ-N)>Math.abs(y.tileID.overscaledZ-N),ue=X&&y.refreshedUponExpiration?1:l.ad(X?P:1-D,0,1);return y.refreshedUponExpiration&&P>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}const wf=new l.aT(1,0,0,1),Nc=new l.aT(0,1,0,1),Od=new l.aT(0,0,1,1),Sf=new l.aT(1,0,1,1),Cf=new l.aT(0,1,1,1);function $l(y,i,u,p){Vc(y,0,i+u/2,y.transform.width,u,p)}function jc(y,i,u,p){Vc(y,i-u/2,0,u,y.transform.height,p)}function Vc(y,i,u,p,g,_){const C=y.context,k=C.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),k.disable(k.SCISSOR_TEST)}function kf(y,i,u){const p=y.context,g=p.gl,_=u.posMatrix,C=y.useProgram("debug"),k=kr.disabled,P=mn.disabled,D=y.colorModeForRenderPass(),B="$debug",N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const X=i.getTileByID(u.key).latestRawTileData,ue=Math.floor((X&&X.byteLength||0)/1024),ce=i.getTile(u).tileSize,pe=512/Math.min(ce,512)*(u.overscaledZ/y.transform.zoom)*.5;let ae=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ae+=` => ${u.overscaledZ}`),function(Pe,Ne){Pe.initDebugOverlayCanvas();const ge=Pe.debugOverlayCanvas,De=Pe.context.gl,He=Pe.debugOverlayCanvas.getContext("2d");He.clearRect(0,0,ge.width,ge.height),He.shadowColor="white",He.shadowBlur=2,He.lineWidth=1.5,He.strokeStyle="white",He.textBaseline="top",He.font="bold 36px Open Sans, sans-serif",He.fillText(Ne,5,5),He.strokeText(Ne,5,5),Pe.debugOverlayTexture.update(ge),Pe.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(y,`${ae} ${ue}kB`),C.draw(p,g.TRIANGLES,k,P,fn.alphaBlended,dn.disabled,zl(_,l.aT.transparent,pe),null,B,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(p,g.LINE_STRIP,k,P,D,dn.disabled,zl(_,l.aT.red),N,B,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function xn(y,i,u){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),C=new kr(g.LEQUAL,kr.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),P=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const D of u){const B=y.renderToTexture.getTexture(D),N=i.getTerrainData(D.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.texture);const X={u_matrix:y.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};k.draw(p,g.TRIANGLES,C,mn.disabled,_,dn.backCCW,X,N,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class ss{constructor(i,u){this.context=new bv(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=wr.maxUnderzooming+wr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tr}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=i.createVertexBuffer(u,Qr.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const p=new l.a_;p.emplaceBack(0,0),p.emplaceBack(l.N,0),p.emplaceBack(0,l.N),p.emplaceBack(l.N,l.N),this.debugBuffer=i.createVertexBuffer(p,Qr.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const g=new l.V;g.emplaceBack(0,0,0,0),g.emplaceBack(l.N,0,l.N,0),g.emplaceBack(0,l.N,0,l.N),g.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,pt.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,Qr.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const C=new l.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const k=new l.b0;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k);const P=this.context.gl;this.stencilClearMode=new mn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.Z();l.aS(p,0,this.width,this.height,0,0,1),l.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,kr.disabled,this.stencilClearMode,fn.disabled,dn.disabled,cf(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(fn.disabled),p.setDepthMode(kr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const k=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(p,g.TRIANGLES,kr.disabled,new mn({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),fn.disabled,dn.disabled,cf(C.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new mn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new mn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((C,k)=>k.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let k=0;k<_;k++)C[k+g]=new mn({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,p]}return[{[g]:mn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new fn([i.CONSTANT_COLOR,i.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fn.unblended:fn.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return kr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new kr(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},C={},k={};for(const P in g){const D=g[P];D.used&&D.prepare(this.context),_[P]=D.getVisibleCoordinates(),C[P]=_[P].slice().reverse(),k[P]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<p.length;P++)if(this.style._layers[p[P]].is3D()){this.opaquePassCutoff=P;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,B){const N=D.context,X=N.gl,ue=fn.unblended,ce=new kr(X.LEQUAL,kr.ReadWrite,[0,1]),pe=B.getTerrainMesh(),ae=B.sourceCache.getRenderableTiles(),Pe=D.useProgram("terrainDepth");N.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),N.clear({color:l.aT.transparent,depth:1});for(const Ne of ae){const ge=B.getTerrainData(Ne.tileID),De={u_matrix:D.transform.calculatePosMatrix(Ne.tileID.toUnwrapped()),u_ele_delta:B.getMeshFrameDelta(D.transform.zoom)};Pe.draw(N,X.TRIANGLES,ce,mn.disabled,ue,dn.backCCW,De,ge,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,B){const N=D.context,X=N.gl,ue=fn.unblended,ce=new kr(X.LEQUAL,kr.ReadWrite,[0,1]),pe=B.getTerrainMesh(),ae=B.getCoordsTexture(),Pe=B.sourceCache.getRenderableTiles(),Ne=D.useProgram("terrainCoords");N.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),N.clear({color:l.aT.transparent,depth:1}),B.coordsIndex=[];for(const ge of Pe){const De=B.getTerrainData(ge.tileID);N.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ae.texture);const He={u_matrix:D.transform.calculatePosMatrix(ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(D.transform.zoom)};Ne.draw(N,X.TRIANGLES,ce,mn.disabled,ue,dn.backCCW,He,De,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),B.coordsIndex.push(ge.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const P of p){const D=this.style._layers[P];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const B=C[D.source];(D.type==="custom"||B.length)&&this.renderLayer(this,g[D.source],D,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[p[this.currentLayer]],D=g[P.source],B=_[P.source];this._renderTileClippingMasks(P,B),this.renderLayer(this,D,P,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const P=this.style._layers[p[this.currentLayer]],D=g[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const B=(P.type==="symbol"?k:C)[P.source];this._renderTileClippingMasks(P,_[P.source]),this.renderLayer(this,D,P,B)}if(this.options.showTileBoundaries){const P=function(D,B){let N=null;const X=Object.values(D._layers).flatMap(ae=>ae.source&&!ae.isHidden(B)?[D.sourceCaches[ae.source]]:[]),ue=X.filter(ae=>ae.getSource().type==="vector"),ce=X.filter(ae=>ae.getSource().type!=="vector"),pe=ae=>{(!N||N.getSource().maxzoom<ae.getSource().maxzoom)&&(N=ae)};return ue.forEach(ae=>pe(ae)),N||ce.forEach(ae=>pe(ae)),N}(this.style,this.transform.zoom);P&&function(D,B,N){for(let X=0;X<N.length;X++)kf(D,B,N[X])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const D=P.transform.padding;$l(P,P.transform.height-(D.top||0),3,wf),$l(P,D.bottom||0,3,Nc),jc(P,D.left||0,3,Od),jc(P,P.transform.width-(D.right||0),3,Sf);const B=P.transform.centerPoint;(function(N,X,ue,ce){Vc(N,X-1,ue-10,2,20,ce),Vc(N,X-10,ue-1,20,2,ce)})(P,B.x,P.transform.height-B.y,Cf)}(this),this.context.setDefault()}renderLayer(i,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,C,k,P,D){if(_.renderPass!=="translucent")return;const B=mn.disabled,N=_.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ue,ce,pe,ae,Pe,Ne){const ge=ue.transform,De=ae==="map",He=Pe==="map";for(const We of X){const tt=pe.getTile(We),st=tt.getBucket(ce);if(!st||!st.text||!st.text.segments.get().length)continue;const ot=l.ah(st.textSizeData,ge.zoom),dt=be(tt,1,ue.transform.zoom),Bt=Be(We.posMatrix,He,De,ue.transform,dt),_r=ce.layout.get("icon-text-fit")!=="none"&&st.hasIconData();if(ot){const vt=Math.pow(2,ge.zoom-tt.tileID.overscaledZ);Oc(st,De,He,Ne,ge,Bt,We.posMatrix,vt,ot,_r,ue.style.map.terrain?(ir,Nt)=>ue.style.map.terrain.getElevation(We,ir,Nt):null)}}}(P,_,k,C,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),D),k.paint.get("icon-opacity").constantOr(1)!==0&&Fc(_,C,k,P,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),B,N),k.paint.get("text-opacity").constantOr(1)!==0&&Fc(_,C,k,P,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),B,N),C.map.showCollisionBoxes&&(bf(_,C,k,P,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),bf(_,C,k,P,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(i,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,k,P){if(_.renderPass!=="translucent")return;const D=k.paint.get("circle-opacity"),B=k.paint.get("circle-stroke-width"),N=k.paint.get("circle-stroke-opacity"),X=!k.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(B.constantOr(1)===0||N.constantOr(1)===0))return;const ue=_.context,ce=ue.gl,pe=_.depthModeForSublayer(0,kr.ReadOnly),ae=mn.disabled,Pe=_.colorModeForRenderPass(),Ne=[];for(let ge=0;ge<P.length;ge++){const De=P[ge],He=C.getTile(De),We=He.getBucket(k);if(!We)continue;const tt=We.programConfigurations.get(k.id),st=_.useProgram("circle",tt),ot=We.layoutVertexBuffer,dt=We.indexBuffer,Bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De),_r={programConfiguration:tt,program:st,layoutVertexBuffer:ot,indexBuffer:dt,uniformValues:Oa(_,De,He,k),terrainData:Bt};if(X){const vt=We.segments.get();for(const ir of vt)Ne.push({segments:new l.S([ir]),sortKey:ir.sortKey,state:_r})}else Ne.push({segments:We.segments,sortKey:0,state:_r})}X&&Ne.sort((ge,De)=>ge.sortKey-De.sortKey);for(const ge of Ne){const{programConfiguration:De,program:He,layoutVertexBuffer:We,indexBuffer:tt,uniformValues:st,terrainData:ot}=ge.state;He.draw(ue,ce.TRIANGLES,pe,ae,Pe,dn.disabled,st,ot,k.id,We,tt,ge.segments,k.paint,_.transform.zoom,De)}})(i,u,p,g);break;case"heatmap":(function(_,C,k,P){if(k.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,B=D.gl,N=mn.disabled,X=new fn([B.ONE,B.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(ue,ce,pe){const ae=ue.gl;ue.activeTexture.set(ae.TEXTURE1),ue.viewport.set([0,0,ce.width/4,ce.height/4]);let Pe=pe.heatmapFbo;if(Pe)ae.bindTexture(ae.TEXTURE_2D,Pe.colorAttachment.get()),ue.bindFramebuffer.set(Pe.framebuffer);else{const Ne=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Ne),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),Pe=pe.heatmapFbo=ue.createFramebuffer(ce.width/4,ce.height/4,!1,!1),function(ge,De,He,We){var tt,st;const ot=ge.gl,dt=(tt=ge.HALF_FLOAT)!==null&&tt!==void 0?tt:ot.UNSIGNED_BYTE,Bt=(st=ge.RGBA16F)!==null&&st!==void 0?st:ot.RGBA;ot.texImage2D(ot.TEXTURE_2D,0,Bt,De.width/4,De.height/4,0,ot.RGBA,dt,null),We.colorAttachment.set(He)}(ue,ce,Ne,Pe)}})(D,_,k),D.clear({color:l.aT.transparent});for(let ue=0;ue<P.length;ue++){const ce=P[ue];if(C.hasRenderableParent(ce))continue;const pe=C.getTile(ce),ae=pe.getBucket(k);if(!ae)continue;const Pe=ae.programConfigurations.get(k.id),Ne=_.useProgram("heatmap",Pe),{zoom:ge}=_.transform;Ne.draw(D,B.TRIANGLES,kr.disabled,N,X,dn.disabled,pv(ce.posMatrix,pe,ge,k.paint.get("heatmap-intensity")),null,k.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,k.paint,_.transform.zoom,Pe)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,B){const N=D.context,X=N.gl,ue=B.heatmapFbo;if(!ue)return;N.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ue.colorAttachment.get()),N.activeTexture.set(X.TEXTURE1);let ce=B.colorRampTexture;ce||(ce=B.colorRampTexture=new _e(N,B.colorRamp,X.RGBA)),ce.bind(X.LINEAR,X.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(N,X.TRIANGLES,kr.disabled,mn.disabled,D.colorModeForRenderPass(),dn.disabled,((pe,ae,Pe,Ne)=>{const ge=l.Z();l.aS(ge,0,pe.width,pe.height,0,0,1);const De=pe.context.gl;return{u_matrix:ge,u_world:[De.drawingBufferWidth,De.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(D,B),null,B.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,B.paint,D.transform.zoom)}(_,k))})(i,u,p,g);break;case"line":(function(_,C,k,P){if(_.renderPass!=="translucent")return;const D=k.paint.get("line-opacity"),B=k.paint.get("line-width");if(D.constantOr(1)===0||B.constantOr(1)===0)return;const N=_.depthModeForSublayer(0,kr.ReadOnly),X=_.colorModeForRenderPass(),ue=k.paint.get("line-dasharray"),ce=k.paint.get("line-pattern"),pe=ce.constantOr(1),ae=k.paint.get("line-gradient"),Pe=k.getCrossfadeParameters(),Ne=pe?"linePattern":ue?"lineSDF":ae?"lineGradient":"line",ge=_.context,De=ge.gl;let He=!0;for(const We of P){const tt=C.getTile(We);if(pe&&!tt.patternsLoaded())continue;const st=tt.getBucket(k);if(!st)continue;const ot=st.programConfigurations.get(k.id),dt=_.context.program.get(),Bt=_.useProgram(Ne,ot),_r=He||Bt.program!==dt,vt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(We),ir=ce.constantOr(null);if(ir&&tt.imageAtlas){const yr=tt.imageAtlas,pr=yr.patternPositions[ir.to.toString()],xr=yr.patternPositions[ir.from.toString()];pr&&xr&&ot.setConstantPatternPositions(pr,xr)}const Nt=vt?We:null,qr=pe?fv(_,tt,k,Pe,Nt):ue?df(_,tt,k,ue,Pe,Nt):ae?uf(_,tt,k,st.lineClipsArray.length,Nt):bd(_,tt,k,Nt);if(pe)ge.activeTexture.set(De.TEXTURE0),tt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),ot.updatePaintBuffers(Pe);else if(ue&&(_r||_.lineAtlas.dirty))ge.activeTexture.set(De.TEXTURE0),_.lineAtlas.bind(ge);else if(ae){const yr=st.gradients[k.id];let pr=yr.texture;if(k.gradientVersion!==yr.version){let xr=256;if(k.stepInterpolant){const kn=C.getSource().maxzoom,en=We.canonical.z===kn?Math.ceil(1<<_.transform.maxZoom-We.canonical.z):1;xr=l.ad(l.aY(st.maxLineLength/l.N*1024*en),256,ge.maxTextureSize)}yr.gradient=l.aZ({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:xr,image:yr.gradient||void 0,clips:st.lineClipsArray}),yr.texture?yr.texture.update(yr.gradient):yr.texture=new _e(ge,yr.gradient,De.RGBA),yr.version=k.gradientVersion,pr=yr.texture}ge.activeTexture.set(De.TEXTURE0),pr.bind(k.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}Bt.draw(ge,De.TRIANGLES,N,_.stencilModeForClipping(We),X,dn.disabled,qr,vt,k.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,k.paint,_.transform.zoom,ot,st.layoutVertexBuffer2),He=!1}})(i,u,p,g);break;case"fill":(function(_,C,k,P){const D=k.paint.get("fill-color"),B=k.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const N=_.colorModeForRenderPass(),X=k.paint.get("fill-pattern"),ue=_.opaquePassEnabledForLayer()&&!X.constantOr(1)&&D.constantOr(l.aT.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ue){const ce=_.depthModeForSublayer(1,_.renderPass==="opaque"?kr.ReadWrite:kr.ReadOnly);Rl(_,C,k,P,ce,N,!1)}if(_.renderPass==="translucent"&&k.paint.get("fill-antialias")){const ce=_.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,kr.ReadOnly);Rl(_,C,k,P,ce,N,!0)}})(i,u,p,g);break;case"fill-extrusion":(function(_,C,k,P){const D=k.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const B=new kr(_.context.gl.LEQUAL,kr.ReadWrite,_.depthRangeFor3D);if(D!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Ll(_,C,k,P,B,mn.disabled,fn.disabled),Ll(_,C,k,P,B,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const N=_.colorModeForRenderPass();Ll(_,C,k,P,B,mn.disabled,N)}}})(i,u,p,g);break;case"hillshade":(function(_,C,k,P){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,B=_.depthModeForSublayer(0,kr.ReadOnly),N=_.colorModeForRenderPass(),[X,ue]=_.renderPass==="translucent"?_.stencilConfigForOverlap(P):[{},P];for(const ce of ue){const pe=C.getTile(ce);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&_.renderPass==="offscreen"?Bd(_,pe,k,B,mn.disabled,N):_.renderPass==="translucent"&&wv(_,ce,pe,k,B,X[ce.overscaledZ],N)}D.viewport.set([0,0,_.width,_.height])})(i,u,p,g);break;case"raster":(function(_,C,k,P){if(_.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!P.length)return;const D=_.context,B=D.gl,N=C.getSource(),X=_.useProgram("raster"),ue=_.colorModeForRenderPass(),[ce,pe]=N instanceof yt?[{},P]:_.stencilConfigForOverlap(P),ae=pe[pe.length-1].overscaledZ,Pe=!_.options.moving;for(const Ne of pe){const ge=_.depthModeForSublayer(Ne.overscaledZ-ae,k.paint.get("raster-opacity")===1?kr.ReadWrite:kr.ReadOnly,B.LESS),De=C.getTile(Ne);De.registerFadeDuration(k.paint.get("raster-fade-duration"));const He=C.findLoadedParent(Ne,0),We=Sv(De,He,C,k,_.transform,_.style.map.terrain);let tt,st;const ot=k.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;D.activeTexture.set(B.TEXTURE0),De.texture.bind(ot,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(B.TEXTURE1),He?(He.texture.bind(ot,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,He.tileID.overscaledZ-De.tileID.overscaledZ),st=[De.tileID.canonical.x*tt%1,De.tileID.canonical.y*tt%1]):De.texture.bind(ot,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ne),Bt=dt?Ne:null,_r=Bt?Bt.posMatrix:_.transform.calculatePosMatrix(Ne.toUnwrapped(),Pe),vt=pf(_r,st||[0,0],tt||1,We,k);N instanceof yt?X.draw(D,B.TRIANGLES,ge,mn.disabled,ue,dn.disabled,vt,dt,k.id,N.boundsBuffer,_.quadTriangleIndexBuffer,N.boundsSegments):X.draw(D,B.TRIANGLES,ge,ce[Ne.overscaledZ],ue,dn.disabled,vt,dt,k.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,p,g);break;case"background":(function(_,C,k,P){const D=k.paint.get("background-color"),B=k.paint.get("background-opacity");if(B===0)return;const N=_.context,X=N.gl,ue=_.transform,ce=ue.tileSize,pe=k.paint.get("background-pattern");if(_.isPatternMissing(pe))return;const ae=!pe&&D.a===1&&B===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const Pe=mn.disabled,Ne=_.depthModeForSublayer(0,ae==="opaque"?kr.ReadWrite:kr.ReadOnly),ge=_.colorModeForRenderPass(),De=_.useProgram(pe?"backgroundPattern":"background"),He=P||ue.coveringTiles({tileSize:ce,terrain:_.style.map.terrain});pe&&(N.activeTexture.set(X.TEXTURE0),_.imageManager.bind(_.context));const We=k.getCrossfadeParameters();for(const tt of He){const st=P?tt.posMatrix:_.transform.calculatePosMatrix(tt.toUnwrapped()),ot=pe?uo(st,B,_,pe,{tileID:tt,tileSize:ce},We):Tc(st,B,D),dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt);De.draw(N,X.TRIANGLES,Ne,Pe,ge,dn.disabled,ot,dt,k.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(_,C,k){const P=_.context,D=k.implementation;if(_.renderPass==="offscreen"){const B=D.prerender;B&&(_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),B.call(D,P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),P.setStencilMode(mn.disabled);const B=D.renderingMode==="3d"?new kr(_.context.gl.LEQUAL,kr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,kr.ReadOnly);P.setDepthMode(B),D.render(P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState(),P.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,g,_){if(!p[0]&&!p[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const D=Math.sin(C),B=Math.cos(C);p=[p[0]*B-p[1]*D,p[0]*D+p[1]*B]}const k=[_?p[0]:be(u,p[0],this.transform.zoom),_?p[1]:be(u,p[1],this.transform.zoom),0],P=new Float32Array(16);return l.$(P,i,k),P}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Sc(this.context,Or[i],u,Pc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Ri{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const P=1/(k=l.ag([],k,i))[3]/u*g;return l.b3(k,k,[P,P,1/k[3],P])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const P=function(X,ue){var ce=ue[0],pe=ue[1],ae=ue[2],Pe=ce*ce+pe*pe+ae*ae;return Pe>0&&(Pe=1/Math.sqrt(Pe)),X[0]=ue[0]*Pe,X[1]=ue[1]*Pe,X[2]=ue[2]*Pe,X}([],function(X,ue,ce){var pe=ue[0],ae=ue[1],Pe=ue[2],Ne=ce[0],ge=ce[1],De=ce[2];return X[0]=ae*De-Pe*ge,X[1]=Pe*Ne-pe*De,X[2]=pe*ge-ae*Ne,X}([],se([],_[k[0]],_[k[1]]),se([],_[k[2]],_[k[1]]))),D=-((B=P)[0]*(N=_[k[1]])[0]+B[1]*N[1]+B[2]*N[2]);var B,N;return P.concat(D)});return new Ri(_,C)}}class js{constructor(i,u){this.min=i,this.max=u,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=re(this.min),g=re(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new js(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let k=0;k<u.length;k++)l.b4(_,u[k])>=0&&C++;if(C===0)return 0;C!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const P=i.points[k][g]-this.min[g];_=Math.min(_,P),C=Math.max(C,P)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Bl{constructor(i=0,u=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=g}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=l.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=l.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=l.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=l.ad((this.left+i-this.right)/2,0,i),g=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Bl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Uc{constructor(i,u,p,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Uc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var C=g[0],k=g[1],P=g[2],D=g[3],B=Math.sin(_),N=Math.cos(_);p[0]=C*N+P*B,p[1]=k*N+D*B,p[2]=C*-B+P*N,p[3]=k*-B+D*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),C=this.pointCoordinate(new l.P(0,this.height)),k=Math.floor(Math.min(p.x,g.x,_.x,C.x)),P=Math.floor(Math.max(p.x,g.x,_.x,C.x)),D=1;for(let B=k-D;B<=P+D;B++)B!==0&&u.push(new l.b6(B,i))}return u}coveringTiles(i){var u,p;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),k=l.U.fromLngLat(this.center),P=Math.pow(2,g),D=[P*C.x,P*C.y,0],B=[P*k.x,P*k.y,0],N=Ri.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let X=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=g);const ue=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ce=ge=>({aabb:new js([ge*P,0,0],[(ge+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),pe=[],ae=[],Pe=g,Ne=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)pe.push(ce(-ge)),pe.push(ce(ge));for(pe.push(ce(0));pe.length>0;){const ge=pe.pop(),De=ge.x,He=ge.y;let We=ge.fullyVisible;if(!We){const Bt=ge.aabb.intersects(N);if(Bt===0)continue;We=Bt===2}const tt=i.terrain?D:B,st=ge.aabb.distanceX(tt),ot=ge.aabb.distanceY(tt),dt=Math.max(Math.abs(st),Math.abs(ot));if(ge.zoom===Pe||dt>ue+(1<<Pe-ge.zoom)-2&&ge.zoom>=X){const Bt=Pe-ge.zoom,_r=D[0]-.5-(De<<Bt),vt=D[1]-.5-(He<<Bt);ae.push({tileID:new l.O(ge.zoom===Pe?Ne:ge.zoom,ge.wrap,ge.zoom,De,He),distanceSq:ie([B[0]-.5-De,B[1]-.5-He]),tileDistanceToCamera:Math.sqrt(_r*_r+vt*vt)})}else for(let Bt=0;Bt<4;Bt++){const _r=(De<<1)+Bt%2,vt=(He<<1)+(Bt>>1),ir=ge.zoom+1;let Nt=ge.aabb.quadrant(Bt);if(i.terrain){const qr=new l.O(ir,ge.wrap,ir,_r,vt),yr=i.terrain.getMinMaxElevation(qr),pr=(u=yr.minElevation)!==null&&u!==void 0?u:this.elevation,xr=(p=yr.maxElevation)!==null&&p!==void 0?p:this.elevation;Nt=new js([Nt.min[0],Nt.min[1],pr],[Nt.max[0],Nt.max[1],xr])}pe.push({aabb:Nt,zoom:ir,x:_r,y:vt,wrap:ge.wrap,fullyVisible:We})}}return ae.sort((ge,De)=>ge.distanceSq-De.distanceSq).map(ge=>ge.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(i.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(i){return new l.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),_=l.U.fromLngLat(g.lngLat,g.altitude),C=l.U.fromLngLat(u,p),k=_.x-C.x,P=_.y-C.y,D=_.z-C.z,B=Math.sqrt(k*k+P*P+D*D),N=this.scaleZoom(this.cameraToCenterDistance/B/this.tileSize);this._elevation=p,this._center=u,this.zoom=N}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new l.U(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const X=u.pointCoordinate(i);if(X!=null)return X}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const _=p[3],C=g[3],k=p[1]/_,P=g[1]/C,D=p[2]/_,B=g[2]/C,N=D===B?0:(0-D)/(B-D);return new l.U(l.B.number(p[0]/_,g[0]/C,N)/this.worldSize,l.B.number(k,P,N)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Pt().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),k=_.x+Math.pow(2,_.z)*i.wrap,P=l.ao(new Float64Array(16));return l.$(P,P,[k*C,_.y*C,0]),l.a0(P,P,[C/l.N,C/l.N,1]),l.a1(P,u?this.alignedProjMatrix:this.projMatrix,P),g[p]=new Float32Array(P),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,g,_=-90,C=90,k=-180,P=180;const D=this.size,B=this._unmodified;if(this.latRange){const ue=this.latRange;_=l.H(ue[1])*this.worldSize,C=l.H(ue[0])*this.worldSize,i=C-_<D.y?D.y/(C-_):0}if(this.lngRange){const ue=this.lngRange;k=l.b5(l.G(ue[0])*this.worldSize,0,this.worldSize),P=l.b5(l.G(ue[1])*this.worldSize,0,this.worldSize),P<k&&(P+=this.worldSize),u=P-k<D.x?D.x/(P-k):0}const N=this.point,X=Math.max(u||0,i||0);if(X)return this.center=this.unproject(new l.P(u?(P+k)/2:N.x,i?(C+_)/2:N.y)),this.zoom+=this.scaleZoom(X),this._unmodified=B,void(this._constraining=!1);if(this.latRange){const ue=N.y,ce=D.y/2;ue-ce<_&&(g=_+ce),ue+ce>C&&(g=C-ce)}if(this.lngRange){const ue=(k+P)/2,ce=l.b5(N.x,ue-this.worldSize/2,ue+this.worldSize/2),pe=D.x/2;ce-pe<k&&(p=k+pe),ce+pe>P&&(p=P-pe)}p===void 0&&g===void 0||(this.center=this.unproject(new l.P(p!==void 0?p:N.x,g!==void 0?g:N.y)).wrap()),this._unmodified=B,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.a0(g,g,[this.width/2,-this.height/2,1]),l.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.a0(g,g,[1,-1,1]),l.$(g,g,[-1,-1,0]),l.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),k=_-C*this._pixelPerMeter/Math.cos(this._pitch),P=C<0?k:_,D=Math.PI/2+this._pitch,B=this._fov*(.5+i.y/this.height),N=Math.sin(B)*P/Math.sin(l.ad(Math.PI-D-B,.01,Math.PI-.01)),X=this.getHorizon(),ue=2*Math.atan(X/this.cameraToCenterDistance)*(.5+i.y/(2*X)),ce=Math.sin(ue)*P/Math.sin(l.ad(Math.PI-D-ue,.01,Math.PI-.01)),pe=Math.min(N,ce),ae=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+P),Pe=this.height/50;g=new Float64Array(16),l.b8(g,this._fov,this.width/this.height,Pe,ae),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,l.a0(g,g,[1,-1,1]),l.$(g,g,[0,0,-this.cameraToCenterDistance]),l.b9(g,g,this._pitch),l.ae(g,g,this.angle),l.$(g,g,[-u,-p,0]),this.mercatorMatrix=l.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),l.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,g),l.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.as([],g),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ne=this.width%2/2,ge=this.height%2/2,De=Math.cos(this.angle),He=Math.sin(this.angle),We=u-Math.round(u)+De*Ne+He*ge,tt=p-Math.round(p)+De*ge+He*Ne,st=new Float64Array(g);if(l.$(st,st,[We>.5?We-1:We,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=st,g=l.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,g=u.y,_=u.x,C=u.y;for(const k of i)p=Math.min(p,k.x),g=Math.min(g,k.y),_=Math.max(_,k.x),C=Math.max(C,k.y);return[new l.P(p,g),new l.P(_,g),new l.P(_,C),new l.P(p,C),new l.P(p,g)]}}}function ls(y,i){let u,p=!1,g=null,_=null;const C=()=>{g=null,p&&(y.apply(_,u),g=setTimeout(C,i),p=!1)};return(...k)=>(p=!0,_=this,u=k,g||C(),g)}class Ol{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ls(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,k=Math.round(u.lat*_)/_,P=this._map.getBearing(),D=this._map.getPitch();let B="";if(B+=i?`/${C}/${k}/${p}`:`${p}/${k}/${C}`,(P||D)&&(B+="/"+Math.round(10*P)/10),D&&(B+=`/${Math.round(D)}`),this._hashName){const N=this._hashName;let X=!1;const ue=window.location.hash.slice(1).split("&").map(ce=>{const pe=ce.split("=")[0];return pe===N?(X=!0,`${pe}=${B}`):ce}).filter(ce=>ce);return X||ue.push(`${N}=${B}`),`#${ue.join("&")}`}return`#${B}`}}const Vs={linearity:.3,easing:l.ba(0,0,.3,1)},If=l.e({deceleration:2500,maxSpeed:1400},Vs),Tf=l.e({deceleration:20,maxSpeed:1400},Vs),Pf=l.e({deceleration:1e3,maxSpeed:360},Vs),Ef=l.e({deceleration:1e3,maxSpeed:90},Vs);class zf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Fl(u.pan.mag(),p,l.e({},If,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Wo(g,_)}if(u.zoom){const _=Fl(u.zoom,p,Tf);g.zoom=this._map.transform.zoom+_.amount,Wo(g,_)}if(u.bearing){const _=Fl(u.bearing,p,Pf);g.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),Wo(g,_)}if(u.pitch){const _=Fl(u.pitch,p,Ef);g.pitch=this._map.transform.pitch+_.amount,Wo(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function Wo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Fl(y,i,u){const{maxSpeed:p,linearity:g,deceleration:_}=u,C=l.ad(y*g/(i/1e3),-p,p),k=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*k,amount:C*(k/2)}}class Ji extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,g={}){const _=w.mousePos(u.getCanvasContainer(),p),C=u.unproject(_);super(i,l.e({point:_,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class Nl extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const g=i==="touchend"?p.changedTouches:p.touches,_=w.touchPos(u.getCanvasContainer(),g),C=_.map(P=>u.unproject(P)),k=_.reduce((P,D,B,N)=>P.add(D.div(N.length)),new l.P(0,0));super(i,{points:_,point:k,lngLats:C,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Mf extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Df{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Mf(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Ji(i.type,this._map,i))}mouseup(i){this._map.fire(new Ji(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Ji(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ji(i.type,this._map,i))}mouseover(i){this._map.fire(new Ji(i.type,this._map,i))}mouseout(i){this._map.fire(new Ji(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Nl(i.type,this._map,i))}touchmove(i){this._map.fire(new Nl(i.type,this._map,i))}touchend(i){this._map.fire(new Nl(i.type,this._map,i))}touchcancel(i){this._map.fire(new Nl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Af{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ji(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ji("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ji(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fa{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class Rf{constructor(i,u){this._map=i,this._tr=new fa(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,p.x),C=Math.max(g.x,p.x),k=Math.min(g.y,p.y),P=Math.max(g.y,p.y);w.setTransform(this._box,`translate(${_}px,${k}px)`),this._box.style.width=C-_+"px",this._box.style.height=P-k+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,g=u;if(this.reset(),w.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.k(i,{originalEvent:u}))}}function ho(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class ma{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new l.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=ho(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const g=ho(p,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Hc{constructor(i){this.singleTap=new ma(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const g=this.singleTap.touchend(i,u,p);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class ga{constructor(i){this._tr=new fa(i),this._zoomIn=new Hc({numTouches:1,numTaps:2}),this._zoomOut=new Hc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const g=this._zoomIn.touchend(i,u,p),_=this._zoomOut.touchend(i,u,p),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ya{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Cv={0:1,2:2};class Fd{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const g=Cv[p];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class Lf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Wc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Us=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new Fd({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new ya({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:p,enable:y,assignEvents:Wc})},va=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new Fd({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new ya({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:p,enable:y,assignEvents:Wc})};class Dt{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const g=ho(p,u),_=new l.P(0,0),C=new l.P(0,0);let k=0;for(const D in g){const B=g[D],N=this._touches[D];N&&(_._add(B),C._add(B.sub(N)),k++,g[D]=B)}if(this._touches=g,k<this._minTouches||!C.mag())return;const P=C.div(k);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(k),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=ja(p,u,g),k=ja(p,u,_);if(!C||!k)return;const P=this._aroundCenter?null:C.add(k).div(2);return this._move([C,k],P,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=ja(p,u,g),k=ja(p,u,_);C&&k||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ja(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function Hs(y,i){return Math.log(y/i)/Math.LN2}class $f extends Gc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Hs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hs(this._distance,p),pinchAround:u}}}function kt(y,i){return 180*y.angleWith(i)/Math.PI}class Nd extends Gc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:kt(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=kt(i,this._startVector);return Math.abs(p)<u}}function jd(y){return Math.abs(y.y)>Math.abs(y.x)}class kv extends Gc{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,jd(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return jd(i)&&jd(u)&&C}}const Vd={panStep:100,bearingStep:15,pitchStep:10};class Bf{constructor(i){this._tr=new fa(i);const u=Vd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:k=>{const P=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Of,zoom:u?Math.round(P.zoom)+u*(i.shiftKey?2:1):P.zoom,bearing:P.bearing+p*this._bearingStep,pitch:P.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:P.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Of(y){return y*(2-y)}const Ff=4.000244140625;class Iv{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new fa(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=l.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Ff==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),p=this._tr;this._around=l.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Ff?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&P!==0&&(P=1/P);const D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*P))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&p&&g){const k=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),P=g(k);_=l.B.number(p,u,P),k<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.bb;if(this._prevEase){const p=this._prevEase,g=(l.h.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-C*C);u=l.ba(C,k,.25,1)}return this._prevEase={start:l.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ud{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Hd{constructor(i){this._tr=new fa(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wd{constructor(){this._tap=new Hc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,u,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gd{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Li{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Va{constructor(i,u,p,g){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const jl=y=>y.zoom||y.drag||y.pitch||y.rotate;class qd extends l.k{}function Vl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Zd{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,k={needsRenderFrame:!1},P={},D={},B=g.touches,N=B?this._getMapTouches(B):void 0,X=N?w.touchPos(this._el,N):w.mousePos(this._el,g);for(const{handlerName:pe,handler:ae,allowed:Pe}of this._handlers){if(!ae.isEnabled())continue;let Ne;this._blockedByActive(D,Pe,pe)?ae.reset():ae[_||g.type]&&(Ne=ae[_||g.type](g,X,N),this.mergeHandlerResult(k,P,Ne,pe,C),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()),(Ne||ae.isActive())&&(D[pe]=ae)}const ue={};for(const pe in this._previousActiveHandlers)D[pe]||(ue[pe]=C);this._previousActiveHandlers=D,(Object.keys(ue).length||Vl(k))&&(this._changes.push([k,P,ue]),this._triggerRenderFrame()),(Object.keys(D).length||Vl(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=k;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zf(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)w.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,p]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Df(u,i));const g=u.boxZoom=new Rf(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new ga(u),C=new Hd(u);u.doubleClickZoom=new Ud(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const k=new Wd;this._add("tapDragZoom",k);const P=u.touchPitch=new kv(u);this._add("touchPitch",P),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const D=Us(i),B=va(i);u.dragRotate=new Li(i,D,B),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const N=(({enable:Pe,clickTolerance:Ne})=>{const ge=new Fd({checkCorrectEvent:De=>w.mouseButton(De)===0&&!De.ctrlKey});return new ya({clickTolerance:Ne,move:(De,He)=>({around:He,panDelta:He.sub(De)}),activateOnStart:!0,moveStateManager:ge,enable:Pe,assignEvents:Wc})})(i),X=new Dt(i,u);u.dragPan=new Gd(p,N,X),this._add("mousePan",N),this._add("touchPan",X,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ue=new Nd,ce=new $f;u.touchZoomRotate=new Va(p,ce,ue,k),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const pe=u.scrollZoom=new Iv(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const ae=u.keyboard=new Bf(u);this._add("keyboard",ae),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Af(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!jl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const g in i)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,g,_){if(!p)return;l.e(i,p);const C={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=C),p.panDelta!==void 0&&(u.drag=C),p.pitchDelta!==void 0&&(u.pitch=C),p.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},p={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),l.e(u,_),l.e(p,C);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(Vl(i)||C&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:k,zoomDelta:P,bearingDelta:D,pitchDelta:B,around:N,pinchAround:X}=i;X!==void 0&&(N=X),g._stop(!0),N=N||g.transform.centerPoint;const ue=_.pointLocation(k?N.sub(k):N);D&&(_.bearing+=D),B&&(_.pitch+=B),P&&(_.zoom+=P),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(k)):_.setLocationAtPoint(ue,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ue,N),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(ue,N),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const g=jl(this._eventsInProgress),_=jl(i),C={};for(const B in i){const{originalEvent:N}=i[B];this._eventsInProgress[B]||(C[`${B}start`]=N),this._eventsInProgress[B]=i[B]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const B in C)this._fireEvent(B,C[B]);_&&this._fireEvent("move",_.originalEvent);for(const B in i){const{originalEvent:N}=i[B];this._fireEvent(B,N)}const k={};let P;for(const B in this._eventsInProgress){const{handlerName:N,originalEvent:X}=this._eventsInProgress[B];this._handlersById[N].isActive()||(delete this._eventsInProgress[B],P=u[N]||X,k[`${B}end`]=P)}for(const B in k)this._fireEvent(B,k[B]);const D=jl(this._eventsInProgress);if(p&&(g||_)&&!D){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!B||!B.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:P})),N(this._map.getBearing())&&this._map.resetNorth()):(N(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new qd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Nf extends l.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(l.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(l.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(l.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,l.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Pt.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const He=g.padding;g.padding={top:He,bottom:He,right:He,left:He}}g.padding=l.e(_,g.padding);const C=this.transform,k=C.padding,P=C.project(l.L.convert(i)),D=C.project(l.L.convert(u)),B=P.rotate(-p*Math.PI/180),N=D.rotate(-p*Math.PI/180),X=new l.P(Math.max(B.x,N.x),Math.max(B.y,N.y)),ue=new l.P(Math.min(B.x,N.x),Math.min(B.y,N.y)),ce=X.sub(ue),pe=(C.width-(k.left+k.right+g.padding.left+g.padding.right))/ce.x,ae=(C.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/ce.y;if(ae<0||pe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Pe=Math.min(C.scaleZoom(C.scale*Math.min(pe,ae)),g.maxZoom),Ne=l.P.convert(g.offset),ge=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),De=Ne.add(ge).mult(C.scale/C.zoomScale(Pe));return{center:C.unproject(P.add(D).div(2).sub(De)),zoom:Pe,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(u)),p,g),g,_)}_fitInternal(i,u,p){return i?(delete(u=l.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=l.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(C=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),g&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),C&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,g=0){const _=l.U.fromLngLat(i,u),C=l.U.fromLngLat(p,g),k=C.x-_.x,P=C.y-_.y,D=C.z-_.z,B=Math.hypot(k,P,D);if(B===0)throw new Error("Can't calculate camera options with same From and To");const N=Math.hypot(k,P),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),ue=180*Math.atan2(k,-P)/Math.PI;let ce=180*Math.acos(N/B)/Math.PI;return ce=D<0?90-ce:90+ce,{center:C.toLngLat(),zoom:X,pitch:ce,bearing:ue}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.bb},i)).animate===!1||!i.essential&&l.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),k=this.getPadding(),P="zoom"in i?+i.zoom:g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,B="pitch"in i?+i.pitch:C,N="padding"in i?i.padding:p.padding,X=l.P.convert(i.offset);let ue=p.centerPoint.add(X);const ce=p.pointLocation(ue),pe=l.L.convert(i.center||ce);this._normalizeCenter(pe);const ae=p.project(ce),Pe=p.project(pe).sub(ae),Ne=p.zoomScale(P-g);let ge,De;i.around&&(ge=l.L.convert(i.around),De=p.locationPoint(ge));const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==g,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||B!==C,this._padding=!p.isPaddingEqual(N),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,He),this.terrain&&this._prepareElevation(pe),this._ease(We=>{if(this._zooming&&(p.zoom=l.B.number(g,P,We)),this._rotating&&(p.bearing=l.B.number(_,D,We)),this._pitching&&(p.pitch=l.B.number(C,B,We)),this._padding&&(p.interpolatePadding(k,N,We),ue=p.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(We),ge)p.setLocationAtPoint(ge,De);else{const tt=p.zoomScale(p.zoom-g),st=P>g?Math.min(2,Ne):Math.max(.5,Ne),ot=Math.pow(st,1-We),dt=p.unproject(ae.add(Pe.mult(We*ot)).mult(tt));p.setLocationAtPoint(p.renderWorldCopies?dt.wrap():dt,ue)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},We=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,We)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:g,pitch:_,bearing:C,elevation:k}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),k!==void 0&&(u.elevation=k),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",i)),g&&this.fire(new l.k("rotateend",i)),_&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,u){if(!i.essential&&l.h.prefersReducedMotion){const Nt=l.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,u)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),k=this.getPadding(),P="zoom"in i?l.ad(+i.zoom,p.minZoom,p.maxZoom):g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,B="pitch"in i?+i.pitch:C,N="padding"in i?i.padding:p.padding,X=p.zoomScale(P-g),ue=l.P.convert(i.offset);let ce=p.centerPoint.add(ue);const pe=p.pointLocation(ce),ae=l.L.convert(i.center||pe);this._normalizeCenter(ae);const Pe=p.project(pe),Ne=p.project(ae).sub(Pe);let ge=i.curve;const De=Math.max(p.width,p.height),He=De/X,We=Ne.mag();if("minZoom"in i){const Nt=l.ad(Math.min(i.minZoom,g,P),p.minZoom,p.maxZoom),qr=De/p.zoomScale(Nt-g);ge=Math.sqrt(qr/We*2)}const tt=ge*ge;function st(Nt){const qr=(He*He-De*De+(Nt?-1:1)*tt*tt*We*We)/(2*(Nt?He:De)*tt*We);return Math.log(Math.sqrt(qr*qr+1)-qr)}function ot(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function dt(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const Bt=st(!1);let _r=function(Nt){return dt(Bt)/dt(Bt+ge*Nt)},vt=function(Nt){return De*((dt(Bt)*(ot(qr=Bt+ge*Nt)/dt(qr))-ot(Bt))/tt)/We;var qr},ir=(st(!0)-Bt)/ge;if(Math.abs(We)<1e-6||!isFinite(ir)){if(Math.abs(De-He)<1e-6)return this.easeTo(i,u);const Nt=He<De?-1:1;ir=Math.abs(Math.log(He/De))/ge,vt=function(){return 0},_r=function(qr){return Math.exp(Nt*ge*qr)}}return i.duration="duration"in i?+i.duration:1e3*ir/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=B!==C,this._padding=!p.isPaddingEqual(N),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ae),this._ease(Nt=>{const qr=Nt*ir,yr=1/_r(qr);p.zoom=Nt===1?P:g+p.scaleZoom(yr),this._rotating&&(p.bearing=l.B.number(_,D,Nt)),this._pitching&&(p.pitch=l.B.number(C,B,Nt)),this._padding&&(p.interpolatePadding(k,N,Nt),ce=p.centerPoint.add(ue)),this.terrain&&!i.freezeElevation&&this._updateElevation(Nt);const pr=Nt===1?ae:p.unproject(Pe.add(Ne.mult(vt(qr))).mult(yr));p.setLocationAtPoint(p.renderWorldCopies?pr.wrap():pr,ce),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=l.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=l.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Yi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class an{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class qc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Kd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var jf=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Vf extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aS(g.posMatrix,0,l.N,0,l.N,0,1),this._tiles[g.key]=new Mt(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[p]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,k=g.canonical.x-(g.canonical.x>>C<<C),P=g.canonical.y-(g.canonical.y>>C<<C),D=l.N>>C;l.aS(_.posMatrix,0,D,0,D,0,1),l.$(_.posMatrix,_.posMatrix,[-k*D,-P*D,0]),u[p]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,k=i.canonical.x-(i.canonical.x>>C<<C),P=i.canonical.y-(i.canonical.y>>C<<C),D=l.N>>C;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[k*D,P*D,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[p]=_}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class Uf{constructor(i,u,p){this.painter=i,this.sourceCache=new Vf(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,g=l.N){var _;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(i),k=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!k)return 0;const P=function(ce,pe,ae){var Pe=pe[0],Ne=pe[1];return ce[0]=ae[0]*Pe+ae[4]*Ne+ae[12],ce[1]=ae[1]*Pe+ae[5]*Ne+ae[13],ce}([],[u/g*l.N,p/g*l.N],C.u_terrain_matrix),D=[P[0]*k.dim,P[1]*k.dim],B=Math.floor(D[0]),N=Math.floor(D[1]),X=D[0]-B,ue=D[1]-N;return k.get(B,N)*(1-X)*(1-ue)+k.get(B+1,N)*X*(1-ue)+k.get(B,N+1)*(1-X)*ue+k.get(B+1,N+1)*X*ue}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,g%l.N,_%l.N,l.N)}getElevation(i,u,p,g=l.N){return this.getDEMElevation(i,u,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _e(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _e(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new _e(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),k=i.canonical.y-(i.canonical.y>>_<<_),P=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(P,P,[C*l.N,k*l.N,0]),this._demMatrixCache[i.key]={matrix:P,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _e(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _e(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let k=0;k<this._coordsTextureSize;k++,C+=4)u[C+0]=255&k,u[C+1]=255&_,u[C+2]=k>>8<<4|_>>8,u[C+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new _e(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],P=k&&this.sourceCache.getTileByID(k);if(!P)return null;const D=this._coordsTextureSize,B=(1<<P.tileID.canonical.z)*D;return new l.U(this._allowMercatorOverflow(i,(P.tileID.canonical.x*D+_)/B),(P.tileID.canonical.y*D+C)/B,this.getElevation(P.tileID,_,C,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new l.bd,p=new l.b0,g=this.meshSize,_=l.N/g,C=g*g;for(let N=0;N<=g;N++)for(let X=0;X<=g;X++)u.emplaceBack(X*_,N*_,0);for(let N=0;N<C;N+=g+1)for(let X=0;X<g;X++)p.emplaceBack(X+N,g+X+N+1,g+X+N+2),p.emplaceBack(X+N,g+X+N+2,X+N+1);const k=u.length,P=k+2*(g+1);for(const N of[0,1])for(let X=0;X<=g;X++)for(const ue of[0,1])u.emplaceBack(X*_,N*l.N,ue);for(let N=0;N<2*g;N+=2)p.emplaceBack(P+N,P+N+1,P+N+3),p.emplaceBack(P+N,P+N+3,P+N+2),p.emplaceBack(k+N,k+N+3,k+N+1),p.emplaceBack(k+N,k+N+2,k+N+3);const D=u.length,B=D+2*(g+1);for(const N of[0,1])for(let X=0;X<=g;X++)for(const ue of[0,1])u.emplaceBack(N*l.N,X*_,ue);for(let N=0;N<2*g;N+=2)p.emplaceBack(D+N,D+N+1,D+N+3),p.emplaceBack(D+N,D+N+3,D+N+2),p.emplaceBack(B+N,B+N+3,B+N+1),p.emplaceBack(B+N,B+N+2,B+N+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,jf.members),segments:l.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=l.U.fromLngLat(i.wrap()),g=(1<<u)*l.N,_=p.x*g,C=p.y*g,k=Math.floor(_/l.N),P=Math.floor(C/l.N);return{tileID:new l.O(u,0,u,k,P),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let g=l.bf(u);const _=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(_)<0||!p&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,l.G(g)):u}}class Tv{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new _e(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const xi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Zc{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Tv(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const k in C)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(C[k])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],_=g.source;if(xi[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(xi[u]&&(this._prevType&&xi[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(xi[this._prevType]||xi[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(xn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[_]){const D=this.pool.getObjectForId(k.rtt[_].id);if(D.stamp===k.rtt[_].stamp){this.pool.useObject(D);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),k.rtt[_]={id:P.id,stamp:P.stamp},p.context.bindFramebuffer.set(P.fbo.framebuffer),p.context.clear({color:l.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let D=0;D<C.length;D++){const B=p.style._layers[C[D]],N=B.source?this._coordsDescendingInv[B.source][k.tileID.key]:[k.tileID];p.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),p._renderTileClippingMasks(B,N),p.renderLayer(p,p.style.sourceCaches[B.source],B,N),B.source&&(k.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][k.tileID.key])}}return xn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xi[u]}return!1}}const Ut=b,nr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Ul=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Xd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jd{constructor(i,u,p=!1){this.mousedown=C=>{this.startMouse(l.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Us({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:k,bearingDegreesPerPixelMoved:P=.8})=>{const D=new Lf;return new ya({clickTolerance:k,move:(B,N)=>({bearingDelta:(N.x-B.x)*P}),moveStateManager:D,enable:C,assignEvents:Ul})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=va({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:k,pitchDegreesPerPixelMoved:P=-.5})=>{const D=new Lf;return new ya({clickTolerance:k,move:(B,N)=>({pitchDelta:(N.y-B.y)*P}),moveStateManager:D,enable:C,assignEvents:Ul})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let zn;function Yd(y,i,u){if(y=new l.L(y.lng,y.lat),i){const p=new l.L(y.lng-360,y.lat),g=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(p).distSqr(i)<_?y=p:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const po={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hf(y,i,u){const p=y.classList;for(const g in po)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${i}`)}class cs extends l.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Yd(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${po[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),k=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*k?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const k=w.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Pe of P){const Ne=w.createNS("http://www.w3.org/2000/svg","ellipse");Ne.setAttributeNS(null,"opacity","0.04"),Ne.setAttributeNS(null,"cx","10.5"),Ne.setAttributeNS(null,"cy","5.80029008"),Ne.setAttributeNS(null,"rx",Pe.rx),Ne.setAttributeNS(null,"ry",Pe.ry),k.appendChild(Ne)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const B=w.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(B);const N=w.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(X);const ue=w.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const ce=w.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=w.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ae=w.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),ce.appendChild(pe),ce.appendChild(ae),C.appendChild(k),C.appendChild(D),C.appendChild(N),C.appendChild(ue),C.appendChild(ce),u.appendChild(C),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Hf(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const bn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let gn=0,Ws=!1;const Hl={maxWidth:100,unit:"metric"};function Wl(y,i,u){const p=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([p,g]),k=_.distanceTo(C);if(u&&u.unit==="imperial"){const P=3.2808*k;P>5280?us(i,p,P/5280,y._getUIString("ScaleControl.Miles")):us(i,p,P,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?us(i,p,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?us(i,p,k/1e3,y._getUIString("ScaleControl.Kilometers")):us(i,p,k,y._getUIString("ScaleControl.Meters"))}function us(y,i,u,p){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let k=_/C;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(P){const D=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*D)/D}(k),C*k}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Qd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},eh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gs(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-y),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const i=l.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return Gs(new l.P(0,0))}const th={extend:(y,...i)=>l.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},rh=b;class Ur{static get version(){return rh}static get workerCount(){return Fr.workerCount}static set workerCount(i){Fr.workerCount=i}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){l.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(i){l.c.WORKER_URL=i}static addProtocol(i,u){l.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete l.c.REGISTERED_PROTOCOLS[i]}}return Ur.Map=class extends Nf{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},nr,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Uc(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new qc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Kd,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new R(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=ls(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Zd(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Ol(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Yi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new an,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new l.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new l.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new l.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;const u=this._containerDimensions(),p=u[0],g=u[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const P=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,P),this.painter.resize(p,g,P)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),C&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>p?p/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Pt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?p||(p=!0,u.call(this,new Ji(y,this,_.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Ji(y,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,u.call(this,new Ji(y,this,C.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:p}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const k in C.delegates)this.off(k,C.delegates[k]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const p=y instanceof l.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof l.P||typeof g[0]=="number")u=[l.P.convert(g)];else{const _=l.P.convert(g[0]),C=l.P.convert(g[1]);u=[_,new l.P(C.x,_.y),C,new l.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new fr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,F.Style);l.f(u,(p,g)=>{p?this.fire(new l.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Uf(this.painter,i,y),this.painter.renderToTexture=new Zc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:C,content:k}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:D,data:B}=i,N=i;return this.style.addImage(y,{data:new l.R({width:P,height:D},new Uint8Array(B)),pixelRatio:p,stretchX:_,stretchY:C,content:k,sdf:g,version:0,userImage:N}),N.onAdd&&N.onAdd(this,y),this}}{const{width:P,height:D,data:B}=l.h.getImageData(i);this.style.addImage(y,{data:new l.R({width:P,height:D},B),pixelRatio:p,stretchX:_,stretchY:C,content:k,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||l.a(i)?l.h.getImageData(i):i,{width:g,height:_,data:C}=p;if(g===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(i instanceof HTMLImageElement||l.a(i));return u.data.replace(C,k),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){K.getImage(this._requestManager.transformRequest(y,F.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new ss(u,this.transform),T.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(g,_);const C=new l.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=C.crossFadingFactor();k===1&&k===this._crossFadingFactor||(u=!0,this._crossFadingFactor=k),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Ut}getCameraTargetElevation(){return this.transform.elevation}},Ur.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=l.e({},Xd,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},Ur.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new l.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),_=l.e({bearing:g},this.options.fitBoundsOptions),C=Pt.fromLngLat(u,p);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new l.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Ws)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new cs({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},bn,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){zn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{zn=p.state!=="denied",i(zn)}).catch(()=>{zn=!!window.navigator.geolocation,i(zn)}):(zn=!!window.navigator.geolocation,i(zn)):i(zn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,gn=0,Ws=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gn--,Ws=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),gn++,gn>1?(y={maximumAge:6e5,timeout:0},Ws=!0):(y=this.options.positionOptions,Ws=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Ur.AttributionControl=Yi,Ur.LogoControl=an,Ur.ScaleControl=class{constructor(y){this._onMove=()=>{Wl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Wl(this._map,this._container,this.options)},this.options=l.e({},Hl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Ur.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Ur.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Ur.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Yd(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=Gs(this.options.offset);if(!p){const C=this._container.offsetWidth,k=this._container.offsetHeight;let P;P=u.y+g.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<C/2?P.push("left"):u.x>this._map.transform.width-C/2&&P.push("right"),p=P.length===0?"bottom":P.join("-")}const _=u.add(g[p]).round();w.setTransform(this._container,`${po[p]} translate(${_.x}px,${_.y}px)`),Hf(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Qd),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(eh);y&&y.focus()}},Ur.Marker=cs,Ur.Style=fr,Ur.LngLat=l.L,Ur.LngLatBounds=Pt,Ur.Point=l.P,Ur.MercatorCoordinate=l.U,Ur.Evented=l.E,Ur.AJAXError=l.bi,Ur.config=l.c,Ur.CanvasSource=Kt,Ur.GeoJSONSource=Ze,Ur.ImageSource=yt,Ur.RasterDEMTileSource=lt,Ur.RasterTileSource=Yt,Ur.VectorTileSource=zt,Ur.VideoSource=ar,Ur.setRTLTextPlugin=l.bj,Ur.getRTLTextPluginStatus=l.bk,Ur.prewarm=function(){cr().acquire(rr)},Ur.clearPrewarmedResources=function(){const y=dr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(rr),dr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},th.extend(Ur,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),Ur});var m=c;return m})})(KE);var hv=KE.exports;const JE=zx(hv),eU=Ex({__proto__:null,default:JE},[hv]);var Fu=Math.pow,Ei=(e,t,r)=>new Promise((o,c)=>{var d=b=>{try{l(r.next(b))}catch(w){c(w)}},m=b=>{try{l(r.throw(b))}catch(w){c(w)}},l=b=>b.done?o(b.value):Promise.resolve(b.value).then(d,m);l((r=r.apply(e,t)).next())}),Lo=Uint8Array,sp=Uint16Array,tU=Int32Array,YE=new Lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),QE=new Lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rU=new Lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ez=function(e,t){for(var r=new sp(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var c=new tU(r[30]),o=1;o<30;++o)for(var d=r[o];d<r[o+1];++d)c[d]=d-r[o]<<5|o;return{b:r,r:c}},tz=ez(YE,2),rz=tz.b,nU=tz.r;rz[28]=258,nU[258]=28;var iU=ez(QE,0),oU=iU.b,nz=new sp(32768);for(Yr=0;Yr<32768;++Yr)_s=(Yr&43690)>>1|(Yr&21845)<<1,_s=(_s&52428)>>2|(_s&13107)<<2,_s=(_s&61680)>>4|(_s&3855)<<4,nz[Yr]=((_s&65280)>>8|(_s&255)<<8)>>1;var _s,Yr,lp=function(e,t,r){for(var o=e.length,c=0,d=new sp(t);c<o;++c)e[c]&&++d[e[c]-1];var m=new sp(t);for(c=1;c<t;++c)m[c]=m[c-1]+d[c-1]<<1;var l;{l=new sp(1<<t);var b=15-t;for(c=0;c<o;++c)if(e[c])for(var w=c<<4|e[c],T=t-e[c],E=m[e[c]-1]++<<T,M=E|(1<<T)-1;E<=M;++E)l[nz[E]>>b]=w}return l},af=new Lo(288);for(Yr=0;Yr<144;++Yr)af[Yr]=8;var Yr;for(Yr=144;Yr<256;++Yr)af[Yr]=9;var Yr;for(Yr=256;Yr<280;++Yr)af[Yr]=7;var Yr;for(Yr=280;Yr<288;++Yr)af[Yr]=8;var Yr,iz=new Lo(32);for(Yr=0;Yr<32;++Yr)iz[Yr]=5;var Yr,aU=lp(af,9),sU=lp(iz,5),o_=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ka=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},a_=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},lU=function(e){return(e+7)/8|0},cU=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var o=new Lo(r-t);return o.set(e.subarray(t,r)),o},uU=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mo=function(e,t,r){var o=new Error(t||uU[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,Mo),!r)throw o;return o},Sb=function(e,t,r,o){var c=e.length,d=0;if(!c||t.f&&!t.l)return r||new Lo(0);var m=!r||t.i!=2,l=t.i;r||(r=new Lo(c*3));var b=function(yt){var ar=r.length;if(yt>ar){var Kt=new Lo(Math.max(ar*2,yt));Kt.set(r),r=Kt}},w=t.f||0,T=t.p||0,E=t.b||0,M=t.l,O=t.d,U=t.m,V=t.n,K=c*8;do{if(!M){w=ka(e,T,1);var F=ka(e,T+1,3);if(T+=3,F)if(F==1)M=aU,O=sU,U=9,V=5;else if(F==2){var J=ka(e,T,31)+257,se=ka(e,T+10,15)+4,ie=J+ka(e,T+5,31)+1;T+=14;for(var Z=new Lo(ie),Ce=new Lo(19),_e=0;_e<se;++_e)Ce[rU[_e]]=ka(e,T+_e*3,7);T+=se*3;for(var ke=o_(Ce),ze=(1<<ke)-1,Le=lp(Ce,ke),_e=0;_e<ie;){var Ye=Le[ka(e,T,ze)];T+=Ye&15;var R=Ye>>4;if(R<16)Z[_e++]=R;else{var Ge=0,Te=0;for(R==16?(Te=3+ka(e,T,3),T+=2,Ge=Z[_e-1]):R==17?(Te=3+ka(e,T,7),T+=3):R==18&&(Te=11+ka(e,T,127),T+=7);Te--;)Z[_e++]=Ge}}var Fe=Z.subarray(0,J),$e=Z.subarray(J);U=o_(Fe),V=o_($e),M=lp(Fe,U),O=lp($e,V)}else Mo(1);else{var R=lU(T)+4,L=e[R-4]|e[R-3]<<8,re=R+L;if(re>c){l&&Mo(0);break}m&&b(E+L),r.set(e.subarray(R,re),E),t.b=E+=L,t.p=T=re*8,t.f=w;continue}if(T>K){l&&Mo(0);break}}m&&b(E+131072);for(var Oe=(1<<U)-1,et=(1<<V)-1,at=T;;at=T){var Ge=M[a_(e,T)&Oe],ut=Ge>>4;if(T+=Ge&15,T>K){l&&Mo(0);break}if(Ge||Mo(2),ut<256)r[E++]=ut;else if(ut==256){at=T,M=null;break}else{var Pt=ut-254;if(ut>264){var _e=ut-257,wt=YE[_e];Pt=ka(e,T,(1<<wt)-1)+rz[_e],T+=wt}var zt=O[a_(e,T)&et],Yt=zt>>4;zt||Mo(3),T+=zt&15;var $e=oU[Yt];if(Yt>3){var wt=QE[Yt];$e+=a_(e,T)&(1<<wt)-1,T+=wt}if(T>K){l&&Mo(0);break}m&&b(E+131072);var lt=E+Pt;if(E<$e){var Ze=d-$e,pt=Math.min($e,lt);for(Ze+E<0&&Mo(3);E<pt;++E)r[E]=o[Ze+E]}for(;E<lt;E+=4)r[E]=r[E-$e],r[E+1]=r[E+1-$e],r[E+2]=r[E+2-$e],r[E+3]=r[E+3-$e];E=lt}}t.l=M,t.p=at,t.b=E,t.f=w,M&&(w=1,t.m=U,t.d=O,t.n=V)}while(!w);return E==r.length?r:cU(r,0,E)},dU=new Lo(0),hU=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Mo(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},pU=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},fU=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Mo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Mo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function mU(e,t){return Sb(e,{i:2},t,t)}function gU(e,t){var r=hU(e);return r+8>e.length&&Mo(6,"invalid gzip data"),Sb(e.subarray(r,-8),{i:2},new Lo(pU(e)),t)}function yU(e,t){return Sb(e.subarray(fU(e,t),-4),{i:2},t,t)}function bx(e,t){return e[0]==31&&e[1]==139&&e[2]==8?gU(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?mU(e,t):yU(e,t)}var vU=typeof TextDecoder<"u"&&new TextDecoder,_U=0;try{vU.decode(dU,{stream:!0}),_U=1}catch{}var oz=(e,t)=>e*Fu(2,t),Oh=(e,t)=>Math.floor(e/Fu(2,t)),Zg=(e,t)=>oz(e.getUint16(t+1,!0),8)+e.getUint8(t),az=(e,t)=>oz(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),xU=(e,t,r,o,c)=>{if(e!==o.getUint8(c))return e-o.getUint8(c);const d=Zg(o,c+1);if(t!==d)return t-d;const m=Zg(o,c+4);return r!==m?r-m:0},bU=(e,t,r,o)=>{const c=sz(e,t|128,r,o);return c?{z:t,x:r,y:o,offset:c[0],length:c[1],isDir:!0}:null},JC=(e,t,r,o)=>{const c=sz(e,t,r,o);return c?{z:t,x:r,y:o,offset:c[0],length:c[1],isDir:!1}:null},sz=(e,t,r,o)=>{let c=0,d=e.byteLength/17-1;for(;c<=d;){const m=d+c>>1,l=xU(t,r,o,e,m*17);if(l>0)c=m+1;else if(l<0)d=m-1;else return[az(e,m*17+7),e.getUint32(m*17+13,!0)]}return null},wU=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,lz=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Zg(e,t*17+1),y:Zg(e,t*17+4),offset:az(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},YC=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(lz(r,o));return SU(t)},SU=e=>{e.sort(wU);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const c=e[o];let d=c.z;c.isDir&&(d=d|128),r[o*17]=d,r[o*17+1]=c.x&255,r[o*17+2]=c.x>>8&255,r[o*17+3]=c.x>>16&255,r[o*17+4]=c.y&255,r[o*17+5]=c.y>>8&255,r[o*17+6]=c.y>>16&255,r[o*17+7]=c.offset&255,r[o*17+8]=Oh(c.offset,8)&255,r[o*17+9]=Oh(c.offset,16)&255,r[o*17+10]=Oh(c.offset,24)&255,r[o*17+11]=Oh(c.offset,32)&255,r[o*17+12]=Oh(c.offset,48)&255,r[o*17+13]=c.length&255,r[o*17+14]=c.length>>8&255,r[o*17+15]=c.length>>16&255,r[o*17+16]=c.length>>24&255}return t},CU=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=lz(e,r-1);if(o.isDir){const c=o.z,d=t.z-c,m=Math.trunc(t.x/(1<<d)),l=Math.trunc(t.y/(1<<d));return{z:c,x:m,y:l}}return null};function kU(e){return Ei(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),c=r.getUint16(8,!0),d=new TextDecoder("utf-8"),m=JSON.parse(d.decode(new DataView(t.data,10,o)));let l=0;m.compression==="gzip"&&(l=2);let b=0;"minzoom"in m&&(b=+m.minzoom);let w=0;"maxzoom"in m&&(w=+m.maxzoom);let T=0,E=0,M=0,O=-180,U=-85,V=180,K=85;if(m.bounds){const R=m.bounds.split(",");O=+R[0],U=+R[1],V=+R[2],K=+R[3]}if(m.center){const R=m.center.split(",");T=+R[0],E=+R[1],M=+R[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:c*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:l,tileType:1,minZoom:b,maxZoom:w,minLon:O,minLat:U,maxLon:V,maxLat:K,centerZoom:M,centerLon:T,centerLat:E,etag:t.etag}})}function IU(e,t,r,o,c,d,m){return Ei(this,null,function*(){let l=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(l=YC(l));const b=JC(new DataView(l),o,c,d);if(b){let E=(yield t.getBytes(b.offset,b.length,m)).data;const M=new DataView(E);return M.getUint8(0)===31&&M.getUint8(1)===139&&(E=bx(new Uint8Array(E))),{data:E}}const w=CU(new DataView(l),{z:o,x:c,y:d});if(w){const T=bU(new DataView(l),w.z,w.x,w.y);if(T){let E=yield r.getArrayBuffer(t,T.offset,T.length,e);e.specVersion===1&&(E=YC(E));const M=JC(new DataView(E),o,c,d);if(M){let U=(yield t.getBytes(M.offset,M.length,m)).data;const V=new DataView(U);return V.getUint8(0)===31&&V.getUint8(1)===139&&(U=bx(new Uint8Array(U))),{data:U}}}}})}var cz={getHeader:kU,getZxy:IU},TU=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(c=>r(void 0,c.data,c.cacheControl||"",c.expires||""),c=>r(c)).catch(c=>r(c)),{cancel:()=>o.abort()}},PU=class{constructor(e){this.tilev4=(t,r)=>Ei(this,null,function*(){if(t.type==="json"){const M=t.url.substr(10);let O=this.tiles.get(M);if(O||(O=new QC(M),this.tiles.set(M,O)),this.metadata)return{data:yield O.getTileJson(t.url)};const U=yield O.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:U.minZoom,maxzoom:U.maxZoom,bounds:[U.minLon,U.minLat,U.maxLon,U.maxLat]}}}const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),c=t.url.match(o);if(!c)throw new Error("Invalid PMTiles protocol URL");const d=c[1];let m=this.tiles.get(d);m||(m=new QC(d),this.tiles.set(d,m));const l=c[2],b=c[3],w=c[4],T=yield m.getHeader(),E=yield m==null?void 0:m.getZxy(+l,+b,+w,r.signal);return E?{data:new Uint8Array(E.data),cacheControl:E.cacheControl,expires:E.expires}:T.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=TU(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function cu(e,t){return(t>>>0)*4294967296+(e>>>0)}function EU(e,t){const r=t.buf;let o=r[t.pos++],c=(o&112)>>4;if(o<128||(o=r[t.pos++],c|=(o&127)<<3,o<128)||(o=r[t.pos++],c|=(o&127)<<10,o<128)||(o=r[t.pos++],c|=(o&127)<<17,o<128)||(o=r[t.pos++],c|=(o&127)<<24,o<128)||(o=r[t.pos++],c|=(o&1)<<31,o<128))return cu(e,c);throw new Error("Expected varint not more than 10 bytes")}function Fh(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,EU(o,e))}function zU(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const c=t[0];t[0]=t[1],t[1]=c}}var MU=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function DU(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Fu(2,e)-1||r>Fu(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=MU[e],c=Fu(2,e);let d=0,m=0,l=0;const b=[t,r];let w=c/2;for(;w>0;)d=(b[0]&w)>0?1:0,m=(b[1]&w)>0?1:0,l+=w*w*(3*d^m),zU(w,b,d,m),w=w/2;return o+l}function uz(e,t){return Ei(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return bx(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}function AU(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var RU=127;function LU(e,t){let r=0,o=e.length-1;for(;r<=o;){const c=o+r>>1,d=t-e[c].tileId;if(d>0)r=c+1;else if(d<0)o=c-1;else return e[c]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var $U=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");const o=r.indexOf("Windows")>-1,c=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,o&&c&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return Ei(this,null,function*(){let c,d;r?d=r:(c=new AbortController,d=c.signal);const m=new Headers(this.customHeaders);m.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload?l="reload":this.chromeWindowsNoCache&&(l="no-store");let b=yield fetch(this.url,{signal:d,cache:l,headers:m});if(e===0&&b.status===416){const M=b.headers.get("Content-Range");if(!M||!M.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const O=+M.substr(8);b=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${O-1}`}})}let w=b.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),b.status===416||o&&w&&w!==o)throw this.mustReload=!0,new wx(`Server returned non-matching ETag ${o} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const T=b.headers.get("Content-Length");if(b.status===200&&(!T||+T>t))throw c&&c.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:w||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function Ia(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*Fu(2,32)+o}function BU(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Ia(r,8),rootDirectoryLength:Ia(r,16),jsonMetadataOffset:Ia(r,24),jsonMetadataLength:Ia(r,32),leafDirectoryOffset:Ia(r,40),leafDirectoryLength:Ia(r,48),tileDataOffset:Ia(r,56),tileDataLength:Ia(r,64),numAddressedTiles:Ia(r,72),numTileEntries:Ia(r,80),numTileContents:Ia(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function dz(e){const t={buf:new Uint8Array(e),pos:0},r=Fh(t),o=[];let c=0;for(let d=0;d<r;d++){const m=Fh(t);o.push({tileId:c+m,offset:0,length:0,runLength:1}),c+=m}for(let d=0;d<r;d++)o[d].runLength=Fh(t);for(let d=0;d<r;d++)o[d].length=Fh(t);for(let d=0;d<r;d++){const m=Fh(t);m===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=m-1}return o}function OU(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var wx=class extends Error{};function FU(e,t){return Ei(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(OU(r.data)<3)return[yield cz.getHeader(e)];const c=r.data.slice(0,RU),d=BU(c,r.etag),m=r.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),l=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,b=dz(yield t(m,d.internalCompression));return[d,[l,b.length,b]]})}function NU(e,t,r,o,c){return Ei(this,null,function*(){const d=yield e.getBytes(r,o,void 0,c.etag),m=yield t(d.data,c.internalCompression),l=dz(m);if(l.length===0)throw new Error("Empty directory is invalid");return l})}var jU=class{constructor(e=100,t=!0,r=uz){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Ei(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((c,d)=>{FU(e,this.decompress).then(m=>{m[1]&&this.cache.set(m[1][0],{lastUsed:this.counter++,data:Promise.resolve(m[1][2])}),c(m[0]),this.prune()}).catch(m=>{d(m)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return Ei(this,null,function*(){const c=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(c);if(d)return d.lastUsed=this.counter++,yield d.data;const m=new Promise((l,b)=>{NU(e,this.decompress,t,r,o).then(w=>{l(w),this.prune()}).catch(w=>{b(w)})});return this.cache.set(c,{lastUsed:this.counter++,data:m}),m})}getArrayBuffer(e,t,r,o){return Ei(this,null,function*(){const c=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(c);if(d)return d.lastUsed=this.counter++,yield d.data;const m=new Promise((l,b)=>{e.getBytes(t,r,void 0,o.etag).then(w=>{l(w.data),this.cache.has(c),this.prune()}).catch(w=>{b(w)})});return this.cache.set(c,{lastUsed:this.counter++,data:m}),m})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return Ei(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,c)=>{this.getHeader(e).then(d=>{o(),this.invalidations.delete(t)}).catch(d=>{c(d)})});this.invalidations.set(t,r)})}},QC=class{constructor(e,t,r){typeof e=="string"?this.source=new $U(e):this.source=e,r?this.decompress=r:this.decompress=uz,t?this.cache=t:this.cache=new jU}getHeader(){return Ei(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return Ei(this,null,function*(){const c=DU(e,t,r),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return cz.getZxy(d,this.source,this.cache,e,t,r,o);if(e<d.minZoom||e>d.maxZoom)return;let m=d.rootDirectoryOffset,l=d.rootDirectoryLength;for(let b=0;b<=3;b++){const w=yield this.cache.getDirectory(this.source,m,l,d),T=LU(w,c);if(T){if(T.runLength>0){const E=yield this.source.getBytes(d.tileDataOffset+T.offset,T.length,o,d.etag);return{data:yield this.decompress(E.data,d.tileCompression),cacheControl:E.cacheControl,expires:E.expires}}m=d.leafDirectoryOffset+T.offset,l=T.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return Ei(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(c){if(c instanceof wx)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw c}})}getMetadataAttempt(){return Ei(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return Ei(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof wx)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Ei(this,null,function*(){const t=yield this.getHeader(),r=yield this.getMetadata(),o=AU(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${o}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let ek=!1;function Cb(){if(ek)return;const e=new PU;JE.addProtocol("pmtiles",e.tile),ek=!0}const hz=e=>{Cb();const{mode:t="light",children:r}=e,o=wb[t];return Q.jsxs(Q.Fragment,{children:[Q.jsx(Jr,{id:"background",type:"background",paint:{"background-color":o.water}}),Q.jsxs(fd,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[Q.jsx(Jr,{"source-layer":"land",type:"fill",paint:{"fill-color":o.land}}),r,Q.jsx(Jr,{"source-layer":"states",type:"line",paint:{"line-color":o.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),Q.jsx(Jr,{"source-layer":"countries",type:"line",paint:{"line-color":o.countryBorder,"line-width":1,"line-opacity":1}}),Q.jsx(Jr,{"source-layer":"lakes",type:"fill",paint:{"fill-color":o.water}})]})]})},Sx=e=>(Cb(),Q.jsx(fd,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:Q.jsx(Jr,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));class kb extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class rd{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return Sn(t,r)}}var ti=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(ti||{});const Lp=new Set(Array.from({length:17},(e,t)=>t)),Cx=e=>{const{game:t,visibleIcons:r=Lp,enableIconAutoHide:o=!0,mode:c="light"}=e,d=t==="ats"?rk(t,e.dlcs??Rp):rk(t,e.dlcs??h8),m=wb[c];return Cb(),Q.jsxs(fd,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[Q.jsx(Jr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":l_(c),"fill-outline-color":["case",["==",["get","color"],UE.Road],m.mapAreaOutline,l_(c)]}}),Q.jsx(Jr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":l_(c)}}),Q.jsx(VU,{game:t,mode:c,color:m.footprint}),Q.jsx(Jr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],d],paint:{"line-color":m.hiddenRoad,"line-width":1,"line-opacity":.7}}),Q.jsx(Jr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:nk,paint:{"line-color":qU(c),"line-gap-width":ik,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),Q.jsx(Jr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:nk,paint:{"line-color":GU(c),"line-width":ik}}),Q.jsx(Jr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":m.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),Q.jsx(Jr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),Q.jsx(Jr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),Q.jsx(Jr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),Q.jsx(Jr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...tc,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":m.ferryHalo,"text-color":m.ferryLabel}}),Q.jsx(Jr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...tc,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":m.trainHalo,"text-color":m.trainLabel}}),r.has(15)&&Q.jsx(Jr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],d],layout:uu(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&Q.jsx(Jr,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",tk]]]],layout:uu(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&Q.jsx(Jr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],d],layout:uu(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&Q.jsx(Jr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],d],layout:uu(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&Q.jsx(Jr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],d,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",tk]]]]],layout:uu(o,.4,.75,1.25)}),r.has(14)&&Q.jsx(Jr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],d],layout:{...tc,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Gh,"text-size":12,"icon-image":s_,"icon-allow-overlap":!o,"icon-size":.6},paint:m.baseTextPaint}),r.has(14)&&Q.jsx(Jr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],d],layout:{...tc,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Gh,"text-size":13,"icon-image":s_,"icon-allow-overlap":!o,"icon-size":.6},paint:m.baseTextPaint}),r.has(14)&&Q.jsx(Jr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],d],layout:{...tc,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Gh,"text-size":14,"icon-image":s_,"icon-allow-overlap":!o,"icon-size":.8},paint:m.baseTextPaint}),t==="ets2"&&r.has(14)&&Q.jsx(Jr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...tc,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Gh,"text-size":14},paint:m.baseTextPaint}),pz(r)&&Q.jsx(Jr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],HU(r),d],layout:uu(o,.6,1.25,2.5,{vertical:2,horizontal:2})})]})},VU=({game:e,color:t,mode:r})=>Q.jsxs(fd,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[Q.jsx(Jr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),Q.jsx(Jr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function uu(e,t,r,o,c={vertical:10,horizontal:30}){const d=["literal",[c.vertical,c.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const s_=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],UU=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],tk=["weigh_ico","toll_ico","agri_check","border_ico"];function pz(e){return UU.some(t=>e.has(t))}function HU(e){rd.checkArgument(pz(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const c=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,m=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",c,d,m]}function rk(e,t){if(e!=="ats")return["boolean",!0];const r=dv(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Gh=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],tc={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},nk={"line-cap":"round","line-join":"bevel"},ik=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],fz={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},WU={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)"}},GU=e=>["match",["get","roadType"],...Object.entries(fz[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],qU=e=>["match",["get","roadType"],...Object.entries(fz[e]).flatMap(([t,[r,o]])=>[t,o]),"#b0b"],l_=e=>["match",["get","color"],...Object.entries(WU[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],mz="https://raw.githubusercontent.com/nautofon/ats-towns/arkansas/all-towns.geojson",gz="/ets2-villages.geojson";var Ii=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Ii||{});const ZU={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},KU=new Set(Object.keys(ZU)),kx=e=>{const{game:t,enableAutoHide:r=!0,mode:o="light"}=e,c=t==="ats"?mz:gz,d=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??KU]]]:["boolean",!0],m=wb[o];return Q.jsx(fd,{id:`${t}-scenery-towns`,type:"geojson",data:c,children:Q.jsx(Jr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:d,layout:{...tc,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Gh,"text-size":10.5},paint:m.baseTextPaint})})},yz={version:8,sprite:"https://truckermudgeon.github.io/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]};function XU(e){return KL(e)}var sf={},vz={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(vz);var _z=vz.exports;const JU=Rs(QD);var c_={exports:{}},ok;function YU(){return ok||(ok=1,function(e){function t(r,o){if(r==null)return{};var c={};for(var d in r)if({}.hasOwnProperty.call(r,d)){if(o.includes(d))continue;c[d]=r[d]}return c}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(c_)),c_.exports}const QU=Rs(aR),e9=Rs(sR),t9=Rs(pR),r9=Rs(hL),n9=Rs(QR),i9=Rs(oL);var md=_z;Object.defineProperty(sf,"__esModule",{value:!0});var o9=sf.default=v9;sf.shouldForwardProp=ag;sf.systemDefaultTheme=void 0;var Qo=md(JU),Ix=md(YU()),ak=h9(QU),a9=e9;md(t9);md(r9);var s9=md(n9),l9=md(i9);const c9=["ownerState"],u9=["variants"],d9=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function xz(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(xz=function(o){return o?r:t})(e)}function h9(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=xz(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var m=c?Object.getOwnPropertyDescriptor(e,d):null;m&&(m.get||m.set)?Object.defineProperty(o,d,m):o[d]=e[d]}return o.default=e,r&&r.set(e,o),o}function p9(e){return Object.keys(e).length===0}function f9(e){return typeof e=="string"&&e.charCodeAt(0)>96}function ag(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const m9=sf.systemDefaultTheme=(0,s9.default)(),g9=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Om({defaultTheme:e,theme:t,themeId:r}){return p9(t)?e:t[r]||t}function y9(e){return e?(t,r)=>r[e]:null}function sg(e,t){let{ownerState:r}=t,o=(0,Ix.default)(t,c9);const c=typeof e=="function"?e((0,Qo.default)({ownerState:r},o)):e;if(Array.isArray(c))return c.flatMap(d=>sg(d,(0,Qo.default)({ownerState:r},o)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:d=[]}=c;let l=(0,Ix.default)(c,u9);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props((0,Qo.default)({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(l)||(l=[l]),l.push(typeof b.style=="function"?b.style((0,Qo.default)({ownerState:r},o,r)):b.style))}),l}return c}function v9(e={}){const{themeId:t,defaultTheme:r=m9,rootShouldForwardProp:o=ag,slotShouldForwardProp:c=ag}=e,d=m=>(0,l9.default)((0,Qo.default)({},m,{theme:Om((0,Qo.default)({},m,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(m,l={})=>{(0,ak.internal_processStyles)(m,J=>J.filter(se=>!(se!=null&&se.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:E,overridesResolver:M=y9(g9(w))}=l,O=(0,Ix.default)(l,d9),U=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,V=E||!1;let K,F=ag;w==="Root"||w==="root"?F=o:w?F=c:f9(m)&&(F=void 0);const R=(0,ak.default)(m,(0,Qo.default)({shouldForwardProp:F,label:K},O)),L=J=>typeof J=="function"&&J.__emotion_real!==J||(0,a9.isPlainObject)(J)?se=>sg(J,(0,Qo.default)({},se,{theme:Om({theme:se.theme,defaultTheme:r,themeId:t})})):J,re=(J,...se)=>{let ie=L(J);const Z=se?se.map(L):[];b&&M&&Z.push(ke=>{const ze=Om((0,Qo.default)({},ke,{defaultTheme:r,themeId:t}));if(!ze.components||!ze.components[b]||!ze.components[b].styleOverrides)return null;const Le=ze.components[b].styleOverrides,Ye={};return Object.entries(Le).forEach(([Ge,Te])=>{Ye[Ge]=sg(Te,(0,Qo.default)({},ke,{theme:ze}))}),M(ke,Ye)}),b&&!U&&Z.push(ke=>{var ze;const Le=Om((0,Qo.default)({},ke,{defaultTheme:r,themeId:t})),Ye=Le==null||(ze=Le.components)==null||(ze=ze[b])==null?void 0:ze.variants;return sg({variants:Ye},(0,Qo.default)({},ke,{theme:Le}))}),V||Z.push(d);const Ce=Z.length-se.length;if(Array.isArray(J)&&Ce>0){const ke=new Array(Ce).fill("");ie=[...J,...ke],ie.raw=[...J.raw,...ke]}const _e=R(ie,...Z);return m.muiName&&(_e.muiName=m.muiName),_e};return R.withConfig&&(re.withConfig=R.withConfig),re}}function _9(e,t){return W({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Qn={};const x9=Rs(YD),b9=Rs(CL);var bz=_z;Object.defineProperty(Qn,"__esModule",{value:!0});Qn.alpha=kz;Qn.blend=R9;Qn.colorChannel=void 0;var w9=Qn.darken=Tb;Qn.decomposeColor=ua;Qn.emphasize=Iz;var S9=Qn.getContrastRatio=E9;Qn.getLuminance=Kg;Qn.hexToRgb=wz;Qn.hslToRgb=Cz;var C9=Qn.lighten=Pb;Qn.private_safeAlpha=z9;Qn.private_safeColorChannel=void 0;Qn.private_safeDarken=M9;Qn.private_safeEmphasize=A9;Qn.private_safeLighten=D9;Qn.recomposeColor=gd;Qn.rgbToHex=P9;var sk=bz(x9),k9=bz(b9);function Ib(e,t=0,r=1){return(0,k9.default)(e,t,r)}function wz(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,c)=>c<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function I9(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ua(e){if(e.type)return e;if(e.charAt(0)==="#")return ua(wz(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,sk.default)(9,e));let o=e.substring(t+1,e.length-1),c;if(r==="color"){if(o=o.split(" "),c=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error((0,sk.default)(10,c))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:c}}const Sz=e=>{const t=ua(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};Qn.colorChannel=Sz;const T9=(e,t)=>{try{return Sz(e)}catch{return e}};Qn.private_safeColorChannel=T9;function gd(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function P9(e){if(e.indexOf("#")===0)return e;const{values:t}=ua(e);return`#${t.map((r,o)=>I9(o===3?Math.round(255*r):r)).join("")}`}function Cz(e){e=ua(e);const{values:t}=e,r=t[0],o=t[1]/100,c=t[2]/100,d=o*Math.min(c,1-c),m=(w,T=(w+r/30)%12)=>c-d*Math.max(Math.min(T-3,9-T,1),-1);let l="rgb";const b=[Math.round(m(0)*255),Math.round(m(8)*255),Math.round(m(4)*255)];return e.type==="hsla"&&(l+="a",b.push(t[3])),gd({type:l,values:b})}function Kg(e){e=ua(e);let t=e.type==="hsl"||e.type==="hsla"?ua(Cz(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function E9(e,t){const r=Kg(e),o=Kg(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function kz(e,t){return e=ua(e),t=Ib(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,gd(e)}function z9(e,t,r){try{return kz(e,t)}catch{return e}}function Tb(e,t){if(e=ua(e),t=Ib(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return gd(e)}function M9(e,t,r){try{return Tb(e,t)}catch{return e}}function Pb(e,t){if(e=ua(e),t=Ib(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return gd(e)}function D9(e,t,r){try{return Pb(e,t)}catch{return e}}function Iz(e,t=.15){return Kg(e)>.5?Tb(e,t):Pb(e,t)}function A9(e,t,r){try{return Iz(e,t)}catch{return e}}function R9(e,t,r,o=1){const c=(b,w)=>Math.round((b**(1/o)*(1-r)+w**(1/o)*r)**o),d=ua(e),m=ua(t),l=[c(d.values[0],m.values[0]),c(d.values[1],m.values[1]),c(d.values[2],m.values[2])];return gd({type:"rgb",values:l})}const $p={black:"#000",white:"#fff"},L9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},du={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},hu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Nh={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},pu={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},fu={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},mu={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},$9=["mode","contrastThreshold","tonalOffset"],lk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:$p.white,default:$p.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},u_={text:{primary:$p.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:$p.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ck(e,t,r,o){const c=o.light||o,d=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=C9(e.main,c):t==="dark"&&(e.dark=w9(e.main,d)))}function B9(e="light"){return e==="dark"?{main:pu[200],light:pu[50],dark:pu[400]}:{main:pu[700],light:pu[400],dark:pu[800]}}function O9(e="light"){return e==="dark"?{main:du[200],light:du[50],dark:du[400]}:{main:du[500],light:du[300],dark:du[700]}}function F9(e="light"){return e==="dark"?{main:hu[500],light:hu[300],dark:hu[700]}:{main:hu[700],light:hu[400],dark:hu[800]}}function N9(e="light"){return e==="dark"?{main:fu[400],light:fu[300],dark:fu[700]}:{main:fu[700],light:fu[500],dark:fu[900]}}function j9(e="light"){return e==="dark"?{main:mu[400],light:mu[300],dark:mu[700]}:{main:mu[800],light:mu[500],dark:mu[900]}}function V9(e="light"){return e==="dark"?{main:Nh[400],light:Nh[300],dark:Nh[700]}:{main:"#ed6c02",light:Nh[500],dark:Nh[900]}}function U9(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,c=Wt(e,$9),d=e.primary||B9(t),m=e.secondary||O9(t),l=e.error||F9(t),b=e.info||N9(t),w=e.success||j9(t),T=e.warning||V9(t);function E(V){return S9(V,u_.text.primary)>=r?u_.text.primary:lk.text.primary}const M=({color:V,name:K,mainShade:F=500,lightShade:R=300,darkShade:L=700})=>{if(V=W({},V),!V.main&&V[F]&&(V.main=V[F]),!V.hasOwnProperty("main"))throw new Error(Is(11,K?` (${K})`:"",F));if(typeof V.main!="string")throw new Error(Is(12,K?` (${K})`:"",JSON.stringify(V.main)));return ck(V,"light",R,o),ck(V,"dark",L,o),V.contrastText||(V.contrastText=E(V.main)),V},O={dark:u_,light:lk};return di(W({common:W({},$p),mode:t,primary:M({color:d,name:"primary"}),secondary:M({color:m,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:M({color:l,name:"error"}),warning:M({color:T,name:"warning"}),info:M({color:b,name:"info"}),success:M({color:w,name:"success"}),grey:L9,contrastThreshold:r,getContrastText:E,augmentColor:M,tonalOffset:o},O[t]),c)}const H9=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function W9(e){return Math.round(e*1e5)/1e5}const uk={textTransform:"uppercase"},dk='"Roboto", "Helvetica", "Arial", sans-serif';function G9(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=dk,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:m=400,fontWeightMedium:l=500,fontWeightBold:b=700,htmlFontSize:w=16,allVariants:T,pxToRem:E}=r,M=Wt(r,H9),O=c/14,U=E||(F=>`${F/w*O}rem`),V=(F,R,L,re,J)=>W({fontFamily:o,fontWeight:F,fontSize:U(R),lineHeight:L},o===dk?{letterSpacing:`${W9(re/R)}em`}:{},J,T),K={h1:V(d,96,1.167,-1.5),h2:V(d,60,1.2,-.5),h3:V(m,48,1.167,0),h4:V(m,34,1.235,.25),h5:V(m,24,1.334,0),h6:V(l,20,1.6,.15),subtitle1:V(m,16,1.75,.15),subtitle2:V(l,14,1.57,.1),body1:V(m,16,1.5,.15),body2:V(m,14,1.43,.15),button:V(l,14,1.75,.4,uk),caption:V(m,12,1.66,.4),overline:V(m,12,2.66,1,uk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return di(W({htmlFontSize:w,pxToRem:U,fontFamily:o,fontSize:c,fontWeightLight:d,fontWeightRegular:m,fontWeightMedium:l,fontWeightBold:b},K),M,{clone:!1})}const q9=.2,Z9=.14,K9=.12;function Pn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${q9})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Z9})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${K9})`].join(",")}const X9=["none",Pn(0,2,1,-1,0,1,1,0,0,1,3,0),Pn(0,3,1,-2,0,2,2,0,0,1,5,0),Pn(0,3,3,-2,0,3,4,0,0,1,8,0),Pn(0,2,4,-1,0,4,5,0,0,1,10,0),Pn(0,3,5,-1,0,5,8,0,0,1,14,0),Pn(0,3,5,-1,0,6,10,0,0,1,18,0),Pn(0,4,5,-2,0,7,10,1,0,2,16,1),Pn(0,5,5,-3,0,8,10,1,0,3,14,2),Pn(0,5,6,-3,0,9,12,1,0,3,16,2),Pn(0,6,6,-3,0,10,14,1,0,4,18,3),Pn(0,6,7,-4,0,11,15,1,0,4,20,3),Pn(0,7,8,-4,0,12,17,2,0,5,22,4),Pn(0,7,8,-4,0,13,19,2,0,5,24,4),Pn(0,7,9,-4,0,14,21,2,0,5,26,4),Pn(0,8,9,-5,0,15,22,2,0,6,28,5),Pn(0,8,10,-5,0,16,24,2,0,6,30,5),Pn(0,8,11,-5,0,17,26,2,0,6,32,5),Pn(0,9,11,-5,0,18,28,2,0,7,34,6),Pn(0,9,12,-6,0,19,29,2,0,7,36,6),Pn(0,10,13,-6,0,20,31,3,0,8,38,7),Pn(0,10,13,-6,0,21,33,3,0,8,40,7),Pn(0,10,14,-6,0,22,35,3,0,8,42,7),Pn(0,11,14,-7,0,23,36,3,0,9,44,8),Pn(0,11,15,-7,0,24,38,3,0,9,46,8)],J9=["duration","easing","delay"],Y9={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Q9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function hk(e){return`${Math.round(e)}ms`}function e7(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function t7(e){const t=W({},Y9,e.easing),r=W({},Q9,e.duration);return W({getAutoHeightDuration:e7,create:(c=["all"],d={})=>{const{duration:m=r.standard,easing:l=t.easeInOut,delay:b=0}=d;return Wt(d,J9),(Array.isArray(c)?c:[c]).map(w=>`${w} ${typeof m=="string"?m:hk(m)} ${l} ${typeof b=="string"?b:hk(b)}`).join(",")}},e,{easing:t,duration:r})}const r7={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},n7=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function i7(e={},...t){const{mixins:r={},palette:o={},transitions:c={},typography:d={}}=e,m=Wt(e,n7);if(e.vars)throw new Error(Is(18));const l=U9(o),b=jp(e);let w=di(b,{mixins:_9(b.breakpoints,r),palette:l,shadows:X9.slice(),typography:G9(l,d),transitions:t7(c),zIndex:W({},r7)});return w=di(w,m),w=t.reduce((T,E)=>di(T,E),w),w.unstable_sxConfig=W({},od,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(E){return ad({sx:E,theme:this})},w}const o7=i7(),a7="$$material";function s7(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const l7=e=>s7(e)&&e!=="classes",c7=o9({themeId:a7,defaultTheme:o7,rootShouldForwardProp:l7});function u7(e){return vy("MuiSvgIcon",e)}mI("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const d7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],h7=e=>{const{color:t,fontSize:r,classes:o}=e,c={root:["root",t!=="inherit"&&`color${bt(t)}`,`fontSize${bt(r)}`]};return Rr(c,u7,o)},p7=c7("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${bt(r.color)}`],t[`fontSize${bt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,c,d,m,l,b,w,T,E,M,O,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(m=d.pxToRem)==null?void 0:m.call(d,20))||"1.25rem",medium:((l=e.typography)==null||(b=l.pxToRem)==null?void 0:b.call(l,24))||"1.5rem",large:((w=e.typography)==null||(T=w.pxToRem)==null?void 0:T.call(w,35))||"2.1875rem"}[t.fontSize],color:(E=(M=(e.vars||e).palette)==null||(M=M[t.color])==null?void 0:M.main)!=null?E:{action:(O=(e.vars||e).palette)==null||(O=O.action)==null?void 0:O.active,disabled:(U=(e.vars||e).palette)==null||(U=U.action)==null?void 0:U.disabled,inherit:void 0}[t.color]}}),Tx=A.forwardRef(function(t,r){const o=XU({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:m="inherit",component:l="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:E,viewBox:M="0 0 24 24"}=o,O=Wt(o,d7),U=A.isValidElement(c)&&c.type==="svg",V=W({},o,{color:m,component:l,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:M,hasSvgAsChild:U}),K={};T||(K.viewBox=M);const F=h7(V);return Q.jsxs(p7,W({as:l,className:oi(F.root,d),focusable:"false",color:w,"aria-hidden":E?void 0:!0,role:E?"img":void 0,ref:r},K,O,U&&c.props,{ownerState:V,children:[U?c.props.children:c,E?Q.jsx("title",{children:E}):null]}))});Tx.muiName="SvgIcon";function El(e,t){function r(o,c){return Q.jsx(Tx,W({"data-testid":`${t}Icon`,ref:c},o,{children:e}))}return r.muiName=Tx.muiName,A.memo(A.forwardRef(r))}const f7=El(Q.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),m7=El(Q.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),g7=El(Q.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),y7=El(Q.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),Tz=El(Q.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),v7=El(Q.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),_7=El(Q.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),Pz=El(Q.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),Ez={[ti.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[ti.Toll]:{iconName:"toll_ico",label:"Toll gate"},[ti.Parking]:{iconName:"parking_ico",label:"Rest stop"},[ti.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[ti.Service]:{iconName:"service_ico",label:"Service"},[ti.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[ti.Port]:{iconName:"port_overlay",label:"Port"},[ti.Train]:{iconName:"train_ico",label:"Train"},[ti.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[ti.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[ti.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[ti.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[ti.Garage]:{iconName:"garage_large_ico",label:"Garage"},[ti.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[ti.CityNames]:{iconName:"city_names_ico",label:"City names"},[ti.Company]:{iconName:"companies_ico",label:"Companies"},[ti.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},pk=new Map(Object.entries(Ez).map(([e,t])=>[Number(e),t.label])),fk=new Map(Object.entries(u8).map(([e,t])=>[Number(e),t]));function Xg(e,t,r){return{selectedItems:e,onSelectAllToggle:o=>t(new Set(o?r:[])),onItemToggle:(o,c)=>{t(d=>{const m=new Set(d);return c?m.add(o):m.delete(o),m})}}}const zz=e=>{const t=A.useRef(null),[r,o]=A.useState(!1),[c,d]=A.useState(0);return $s(()=>({onAdd:()=>Sn(t.current),onRemove:()=>Sn(t.current).remove()}),{position:"bottom-left"}),Q.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[Q.jsx(iv,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>o(!0),children:Q.jsx(_7,{})}),Q.jsx(bE,{open:r,onClose:()=>o(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:Q.jsxs(CE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[Q.jsx(gE,{children:"Map Options"}),Q.jsx(SE,{}),Q.jsx(yC,{onChange:(m,l)=>d(Number(l)),children:Q.jsxs(_j,{tabFlex:1,sx:{borderRadius:0},children:[Q.jsx(Q0,{children:"Icons"}),Q.jsx(Q0,{children:"ATS DLC"}),Q.jsx(Q0,{children:"Advanced"})]})}),Q.jsx(mE,{sx:{overflowX:"hidden"},children:Q.jsxs(yC,{value:c,children:[Q.jsx(e_,{sx:{p:0},value:0,children:Q.jsx(mk,{items:pk,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:m=>Q.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${Ez[m].iconName}.png`})})}),Q.jsx(e_,{sx:{p:0},value:1,children:Q.jsx(mk,{items:fk,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),Q.jsx(e_,{sx:{p:0},value:2,children:Q.jsx(S7,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),Q.jsx(fb,{}),c===0&&Q.jsx(x7,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===pk.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),c===1&&Q.jsx(w7,{enableSelectAll:e.atsDlcs.selectedItems.size===fk.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},x7=A.memo(e=>Q.jsxs(rf,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[Q.jsx(Aj,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:Q.jsx(Qu,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),Q.jsx(Qu,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),b7=e=>Q.jsx(Qp,{size:"lg",sx:{p:0,[`& .${uc.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var o;return Q.jsxs(xc,{children:[(o=e.icon)==null?void 0:o.call(e,t),Q.jsx(Qu,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:c=>e.onItemToggle(t,c.target.checked)})]},String(t))})}),mk=A.memo(b7),w7=A.memo(e=>Q.jsx(rf,{direction:"row",justifyContent:"end",gap:1,mx:2,children:Q.jsx(Qu,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),S7=e=>Q.jsxs(rf,{mx:2,children:[Q.jsx($a,{mb:2,level:"title-lg",children:"Experimental Features"}),Q.jsxs(I6,{children:[Q.jsx(Qu,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),Q.jsx($a,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),Mz=()=>{const e=A.useRef(null),{mode:t="light",setMode:r}=a1();return $s(()=>({onAdd:()=>Sn(e.current),onRemove:()=>Sn(e.current).remove()})),Q.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:Q.jsxs(O5,{children:[Q.jsx(EN,{slots:{root:iv},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:Q.jsx(f7,{})}),Q.jsxs(bN,{placement:"left",children:[Q.jsx(xc,{sticky:!0,children:Q.jsx($a,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),Q.jsxs(Y0,{onClick:()=>r("light"),selected:t==="light",children:[Q.jsx(ig,{children:Q.jsx(g7,{})})," ","Light"]}),Q.jsxs(Y0,{onClick:()=>r("dark"),selected:t==="dark",children:[Q.jsx(ig,{children:Q.jsx(y7,{})})," ","Dark"]}),Q.jsxs(Y0,{onClick:()=>r("system"),selected:t==="system",children:[Q.jsx(ig,{children:Q.jsx(m7,{})})," ","Auto"]})]})]})})};function C7(e,t){return I7(e,t,(r,o,c,d)=>Math.sqrt(Math.pow(c-r,2)+Math.pow(d-o,2)))}function Dz(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),o=Math.max(o,d[0]),r=Math.min(r,d[1]),c=Math.max(c,d[1])):(t=Math.min(t,d.x),o=Math.max(o,d.x),r=Math.min(r,d.y),c=Math.max(c,d.y));return[t,r,o,c]}function k7(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function gk(e){return k7(e*Math.PI/180)}function I7(e,t,r){let o,c;Array.isArray(e)?(rd.checkArgument(e.length>=2),o=e[0],c=e[1]):(o=e.x,c=e.y);let d,m;return Array.isArray(t)?(rd.checkArgument(t.length>=2),d=t[0],m=t[1]):(d=t.x,m=t.y),r(o,c,d,m)}function T7(e,t,r){let o=r.get(e);return o==null&&(o=t,r.set(e,o)),o}const P7=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[c,d]=A.useState([]);A.useEffect(()=>{const b=t==="usa"?"ats":"ets2";Promise.all([fetch(`${b}-achievements.json`).then(w=>w.json()),fetch(`${b}-achievements.geojson`).then(w=>w.json())]).then(([w,T])=>{const E=new Map;for(const O of T.features)T7(O.properties.name,[],E).push({coordinates:O.geometry.coordinates,dlcGuard:O.properties.dlcGuard});const M=new Set(T.features.map(O=>O.properties.name));d([...w.data.filter(O=>M.has(O.id)).map(O=>({...O,label:O.title,value:O.id,features:Sn(E.get(O.id))})).sort((O,U)=>O.label.localeCompare(U.label))])},()=>console.error("could not load achievements json."))},[t]);const m=c.filter(b=>{if(t==="europe")return!0;const w=dv(e.visibleStateDlcs);return b.features.some(T=>w.has(T.dlcGuard))}),l=sb({stringify:b=>[b.label,b.desc].join(" ")});return Q.jsx(Vg,{onChange:(b,w)=>o(w),placeholder:"Search achievements...",options:m,filterOptions:l,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r,renderOption:(b,w)=>Q.jsxs(BF,{...b,children:[Q.jsx(ig,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:Q.jsx("img",{loading:"lazy",width:"48",height:"48",src:w.imgUrl,alt:""})}),Q.jsxs(pN,{children:[Q.jsx($a,{level:"title-md",children:w.label}),Q.jsx($a,{level:"body-xs",children:w.desc})]})]})},t)},E7=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[c,d]=A.useState([]);A.useEffect(()=>{Promise.all([fetch("cities.geojson").then(b=>b.json()),fetch(mz).then(b=>b.json()),fetch(gz).then(b=>b.json())]).then(([b,w,T])=>{d(M7(b,w,T))},()=>console.error("could not load cities/towns geojson."))},[]);const m=c.filter(b=>{const w=b.map===t;return t==="europe"?w:w&&e.visibleStates.has(b.stateCode)}),l=sb({stringify:b=>[b.state,b.label].join(" ")});return Q.jsx(Vg,{onChange:(b,w)=>w&&o(w),placeholder:"Search cities...",options:m,filterOptions:l,groupBy:b=>b.state,blurOnSelect:!0,autoComplete:!0,renderGroup:z7,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r},t)};function z7(e){return Q.jsxs(A.Fragment,{children:[Q.jsx($a,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),Q.jsx(Qp,{children:e.children}),Q.jsx(wE,{})]},e.key)}function M7(e,t,r){const o=[],c=new Map;for(const d of e.features)if(d.properties.type==="city")o.push(d);else if(d.properties.type==="country")c.set(d.properties.code,d.properties.name);else throw new Error;for(const d of t.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"usa",countryCode:d.properties.state,name:d.properties.name}});for(const d of r.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"europe",countryCode:d.properties.state,name:d.properties.name}});return o.map(({properties:d,geometry:m})=>({map:d.map,state:Sn(c.get(d.countryCode)),stateCode:d.countryCode,label:d.name,value:m.coordinates})).sort((d,m)=>d.state!==m.state?d.state.localeCompare(m.state):d.label.localeCompare(m.label))}const Px=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],d_=(e,t)=>rd.checkExists(Px.find(r=>r.value.map===e&&r.value.search===t)),yk=({selected:e,onSelect:t})=>Q.jsx(oj,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(r,o)=>{r!=null&&t(Sn(Px.find(c=>c.value===o)))},renderValue:r=>{if(r)return Q.jsxs(rf,{direction:"row",gap:1,sx:{alignItems:"center"},children:[Q.jsx($a,{level:"body-xs",fontWeight:"lg",children:r.value.map==="usa"?"ATS":"ETS2"}),r.value.search==="cities"?Q.jsx(Pz,{}):Q.jsx(Tz,{})]})},children:Object.entries(Object.groupBy(Px,({label:r})=>r)).map(([r,o])=>Q.jsxs(Qp,{children:[Q.jsx(xc,{children:Q.jsx($a,{level:"body-xs",fontWeight:"lg",children:r})}),o==null?void 0:o.map(c=>Q.jsxs(GN,{value:c.value,sx:{px:"1em",textTransform:"capitalize"},children:[Q.jsx(D7,{search:c.value.search}),c.value.search]},c.value.search))]},r))}),D7=({search:e})=>{switch(e){case"cities":return Q.jsx(Pz,{});case"achievements":return Q.jsx(Tz,{});default:throw new kb(e)}},lg={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},A7=e=>{const t=A.useRef(null);$s(()=>({onAdd:()=>Sn(t.current),onRemove:()=>Sn(t.current).remove()}),{position:"top-left"});const{current:r}=bb(),[o,c]=A.useState(d_(localStorage.getItem("tm-map")==="europe"?"europe":"usa",localStorage.getItem("tm-search")==="achievements"?"achievements":"cities")),d=jm.useCallback(M=>{if(M==null||(c(M),localStorage.setItem("tm-map",M.value.map),localStorage.setItem("tm-search",M.value.search),!r||M.value.map===o.value.map))return;const{longitude:O,latitude:U}=lg[M.value.map];r.easeTo({zoom:4,center:[O,U]})},[r,o]);A.useEffect(()=>{if(!r)return;const M=()=>{const O=r.getCenter().lng,U=vk(O,lg.usa.longitude),V=vk(O,lg.europe.longitude);U<V&&o.value.map!=="usa"?(c(d_("usa",o.value.search)),localStorage.setItem("tm-map","usa")):V<U&&o.value.map!=="europe"&&(c(d_("europe",o.value.search)),localStorage.setItem("tm-map","europe"))};return r.on("moveend",M),()=>void r.off("moveend",M)},[r,o,c]);const m=jm.useCallback(M=>{r==null||M==null||(r.flyTo({curve:1,zoom:9,center:M.value.map(O=>Number(O.toFixed(3)))}),r.once("moveend",O=>{const{lat:U,lng:V}=O.target.getCenter(),K=O.target.getZoom(),F=Number(O.target.getBearing().toFixed(1)),R=Math.round(O.target.getPitch());R?window.location.hash=`${K}/${U.toFixed(3)}/${V.toFixed(3)}/${F}/${R}`:F?window.location.hash=`${K}/${U.toFixed(3)}/${V.toFixed(3)}/${F}`:window.location.hash=`${K}/${U.toFixed(3)}/${V.toFixed(3)}`}))},[r]),[l,b]=A.useState([]),[w,T]=A.useState(null),E=jm.useCallback((M,O={enableFitBounds:!0})=>{if(l.forEach(K=>K.remove()),T(M),r==null||M==null)return;const U=dv(e.visibleStateDlcs),V=M.features.filter(K=>U.has(K.dlcGuard)).map(({coordinates:K})=>new hv.Marker().setLngLat(K).addTo(r.getMap()));if(b(V),V.length&&O.enableFitBounds){const K=Dz(V.map(L=>L.getLngLat().toArray())),F=[K[0],K[1]],R=[K[2],K[3]];r.fitBounds([F,R],{curve:1,padding:100,maxZoom:9})}},[r,l,T,b,e.visibleStates]);return A.useEffect(()=>{E(w,{enableFitBounds:!1})},[w,e.visibleStates]),Q.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:Q.jsx(rf,{direction:"row",gap:1,children:o.value.search==="cities"?Q.jsx(E7,{selectDecorator:Q.jsx(yk,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:m,visibleStates:e.visibleStates}):Q.jsx(P7,{selectDecorator:Q.jsx(yk,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:E,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})};function vk(e,t){const r=gk(e)/2,o=gk(t)/2;return Math.abs(Math.sin(r)-Math.sin(o))}const h_=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},R7=()=>{const e=A.useRef(null),[t,r]=A.useState(!1),[o,c]=A.useState(!1),[d,m]=A.useState(window.location.origin),l=bb();return $s(()=>({onAdd:()=>Sn(e.current),onRemove:()=>Sn(e.current).remove()})),A.useEffect(()=>{const b=l.current;if(!b||!t)return;const w=()=>{const M=b.getCenter(),O=b.getBearing(),U=b.getPitch(),V=O||U?[O,U]:[],K=b.getZoom(),F=T?"?"+new URLSearchParams({mlat:String(h_(T.getLngLat().lat,2)),mlon:String(h_(T.getLngLat().lng,2))}).toString():"",R="#"+[K,M.lat,M.lng,...V].map(L=>h_(L,2)).join("/");m(window.location.origin+F+R)};let T,E;if(o){T=new hv.Marker,T.setLngLat(b.getCenter()).setDraggable(!0).addTo(b.getMap());let M=!0;E=()=>M&&T.setLngLat(b.getCenter()),T.on("dragend",()=>{M=!1,b.easeTo({center:T==null?void 0:T.getLngLat()}),b.once("moveend",()=>M=!0)})}return w(),b.on("moveend",w),E&&b.on("move",E),()=>{b.off("moveend",w),E&&b.off("move",E),T==null||T.remove()}},[l,t,o]),Q.jsxs("div",{ref:e,children:[Q.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:Q.jsx(iv,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:Q.jsx(v7,{})})}),Q.jsx(bE,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:Q.jsxs(CE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[Q.jsx(gE,{children:"Share"}),Q.jsx(SE,{}),Q.jsx(fb,{}),Q.jsxs(mE,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[Q.jsx($a,{children:"Share a link to this map"}),Q.jsx(IF,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:b=>b.target.select(),value:d,endDecorator:Q.jsx(dE,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard ")),children:"Copy"})}),Q.jsx(Qu,{label:"Include marker",checked:o,onChange:b=>c(b.target.checked)})]})]})})]})};function Az(e){return new Set([...e].map(L7).concat(Ii.CA))}function L7(e){switch(e){case Gi.Arizona:return Ii.AZ;case Gi.Arkansas:return Ii.AR;case Gi.Colorado:return Ii.CO;case Gi.Idaho:return Ii.ID;case Gi.Kansas:return Ii.KS;case Gi.Montana:return Ii.MT;case Gi.Nebraska:return Ii.NE;case Gi.Nevada:return Ii.NV;case Gi.NewMexico:return Ii.NM;case Gi.Oklahoma:return Ii.OK;case Gi.Oregon:return Ii.OR;case Gi.Texas:return Ii.TX;case Gi.Utah:return Ii.UT;case Gi.Washington:return Ii.WA;case Gi.Wyoming:return Ii.WY;default:throw new kb(e)}}const _k=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,$7=()=>{const{mode:e,systemMode:t}=a1(),r=e==="system"?t:e,{longitude:o,latitude:c}=lg[B7(localStorage.getItem("tm-map"))],[d]=l8(),m=Number(d.get("mlat")),l=Number(d.get("mlon")),b=_k(m,[-90,90])&&_k(l,[-180,180])?{lat:m,lon:l}:void 0,[w,T]=A.useState(!0),[E,M]=A.useState(new Set(Lp)),[O,U]=A.useState(new Set(Rp)),V=Az(O),K=Xg(E,M,Lp),F=Xg(O,U,Rp),[R,L]=A.useState(!1);return Q.jsxs(WE,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:yz,initialViewState:{longitude:o,latitude:c,zoom:4},children:[b&&Q.jsx(J8,{longitude:b.lon,latitude:b.lat}),Q.jsxs(hz,{mode:r,children:[Q.jsx(Sx,{game:"ats",showContours:R}),Q.jsx(Sx,{game:"ets2",showContours:R})]}),Q.jsx(Cx,{game:"ats",mode:r,enableIconAutoHide:w,visibleIcons:E,dlcs:O}),Q.jsx(Cx,{game:"ets2",mode:r,enableIconAutoHide:w,visibleIcons:E}),E.has(ti.CityNames)&&Q.jsx(kx,{game:"ats",mode:r,enableAutoHide:w,enabledStates:V}),E.has(ti.CityNames)&&Q.jsx(kx,{game:"ets2",mode:r,enableAutoHide:w}),Q.jsx(ZE,{visualizePitch:!0}),Q.jsx(qE,{containerId:"fsElem"}),Q.jsx(R7,{}),Q.jsx(Mz,{}),Q.jsx(GE,{compact:!0,style:{marginLeft:54},customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),Q.jsx(A7,{visibleStates:V,visibleStateDlcs:O}),Q.jsx(zz,{icons:{...K,enableAutoHiding:w,onAutoHidingToggle:T},advanced:{showContours:R,onContoursToggle:L},atsDlcs:F})]})};function B7(e){return e==="europe"?e:"usa"}var O7=Object.defineProperty,F7=(e,t,r)=>t in e?O7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N7=(e,t,r)=>(F7(e,t+"",r),r);class j7{constructor(t){N7(this,"_kind"),this._kind=t}}function V7(e,t){const r=e.toString(),o=t.toString();return r>o?1:r<o?-1:0}const U7=V7;var H7=Object.defineProperty,W7=(e,t,r)=>t in e?H7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xk=(e,t,r)=>(W7(e,typeof t!="symbol"?t+"":t,r),r);function G7(e,t,r){const o=t*2,c=t*2+1;let d=t;return o<e.length&&r(e[d],e[o])<0&&(d=o),c<e.length&&r(e[d],e[c])<0&&(d=c),d}function Eb(e,t,r){const o=G7(e,t,r);if(o!==t){const c=e[t];e[t]=e[o],e[o]=c,Eb(e,o,r)}}function bk(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)Eb(e.collection,t,e.comparator)}class Jg extends j7{constructor({comparator:t=U7}={}){super("BinaryHeap"),xk(this,"comparator"),xk(this,"collection",[]),this.comparator=t}static from(t,r={}){const o=new Jg(r);return o.collection=Array.from(t),bk(o),o}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),Eb(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let o=r.length-1,c=Math.floor(o/2);o>0&&this.comparator(r[c],r[o])<0;o=c,c=Math.floor(c/2)){const d=r[o];r[o]=r[c],r[c]=d}}merge(t){t instanceof Jg?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),bk(this),t.clear()}isEmpty(){return!this.collection.length}}function q7(e,t,r,o,c){const d=`${e}-${t}-${r}-${o}`,{nodeLUT:m,graph:l}=c,b=Sn(m.get(e)),w=Sn(m.get(t)),T=new K7({comparator:(R,L)=>{const re=K.get(R)??1/0;return(K.get(L)??1/0)-re}}),E={nodeId:e,distance:0,direction:r,dlcGuard:-1};T.push(E);const M=new Map,O=new Map;O.set(E,0);const U=R=>C7(R,w),V=(R,L)=>{switch(o){case"shortest":return L.distance;case"smallRoads":return L.isOneLaneRoad?L.distance:L.distance*10;default:throw new kb(o)}},K=new Map;K.set(E,U(b));let F=0;for(;!T.isEmpty();){F++;const R=T.pop();if(R.nodeId===t)return{success:!0,key:d,mode:o,...Z7(M,R)};const L=l.get(R.nodeId);if(!L)continue;const re=R.direction==="forward"?L.forward:L.backward;for(const J of re){if(!c.enabledDlcGuards.has(J.dlcGuard))continue;const se=(O.get(R)??1/0)+V(R,J);se<(O.get(J)??1/0)&&(M.set(J,R),O.set(J,se),K.set(J,se+U(Sn(m.get(J.nodeId)))),T.has(J)||T.push(J))}}return{success:!1,key:d,mode:o,numIters:F}}function Z7(e,t){let r=0;const o=[t];for(;e.has(t);)t=e.get(t),o.unshift(t),r+=t.distance;return o.length===1&&o.push(o[0]),{route:o,distance:r}}class K7 extends Jg{constructor(r){super(r);uS(this,"items",new Set)}has(r){return this.items.has(r)}push(r){rd.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return rd.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const o of this.collection)this.items.add(o)}}const X7=()=>{const{mode:e,systemMode:t}=a1(),r=e==="system"?t:e,[o,c]=A.useState(!0),[d,m]=A.useState(new Set(Lp)),[l,b]=A.useState(new Set(Rp)),w=Az(l),T=Xg(d,m,Lp),E=Xg(l,b,Rp),[M,O]=A.useState(!1);return Q.jsxs(WE,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:yz,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[Q.jsx(hz,{mode:r,children:Q.jsx(Sx,{game:"ats",showContours:M})}),Q.jsx(Cx,{game:"ats",mode:r,enableIconAutoHide:o,visibleIcons:d,dlcs:l}),Q.jsx(kx,{game:"ats",mode:r,enableAutoHide:o,enabledStates:w}),Q.jsx(fd,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:Q.jsx(Jr,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),Q.jsx(ZE,{visualizePitch:!0}),Q.jsx(qE,{}),Q.jsx(Mz,{}),Q.jsx(GE,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),Q.jsx(J7,{dlcs:l}),Q.jsx(zz,{icons:{...T,enableAutoHiding:o,onAutoHidingToggle:c},advanced:{showContours:M,onContoursToggle:O},atsDlcs:E})]})},J7=e=>{const{current:t}=bb(),r=dv(e.dlcs),[o,c]=A.useState(void 0),[d,m]=A.useState(void 0),[l,b]=A.useState([]),[w,T]=A.useState([]);A.useEffect(()=>{fetch("usa-graph-demo.json").then(ie=>ie.json()).then(ie=>{b(ie.demoCompanies.map(Ck)),m(Y7(ie)),c(ie)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[E,M]=A.useState(void 0),[O,U]=A.useState(void 0),V=A.useCallback(ie=>{ie=Sn(ie),M(ie.value);let Z;if(o!=null){Z=Sn(o.demoCompanies.find(ke=>ke.n===ie.value));const Ce=Sn(o.demoCompanyDefs.find(ke=>ke.t===Z.t)),_e=new Set(Ce.d);T(o.demoCompanies.filter(ke=>_e.has(ke.t)).map(Ck))}if(!(t==null||d==null)&&(O!=null&&(Sn(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),U(void 0)),Z)){const Ce=Sn(d.nodeLUT.get(Z.n));t.flyTo({curve:1,zoom:9,center:[Ce.x,Ce.y]})}},[t,O,d,o]),K=A.useCallback(ie=>{ie=Sn(ie),U(ie.value),!(t==null||d==null)&&F(Sn(E),ie.value,t,{...d,enabledDlcGuards:r})},[t,E,d,e.dlcs]),F=(ie,Z,Ce,_e)=>{Promise.all([kk(ie,Z,"shortest",_e),kk(ie,Z,"smallRoads",_e)]).then(ke=>{const ze=Sn(Ce.getSource("route1"));if(ke.some(Ye=>Ye==null)){alert("Cannot calculate a route "),ze.setData({type:"FeatureCollection",features:[]});return}const Le=ke;ze.setData({type:"FeatureCollection",features:Le}),Ce.fitBounds(Dz(Le.flatMap(Ye=>Ye.geometry.coordinates)),{padding:150,curve:1,duration:2500})},ke=>{console.error("error finding route",ke)})},R=new Map;if(o)for(const[,ie]of o.demoGraph)for(const Z of[...ie.b??[],...ie.f??[]]){const Ce=R.get(Z.n)??0;R.set(Z.n,Ce||Z.g)}const L=ie=>{if(d==null)return!0;const Z=Sn(R.get(ie.value));return r.has(Z)},re=(ie,Z)=>ie.city!==Z.city?ie.city.localeCompare(Z.city):ie.label.localeCompare(Z.label),J=l.filter(L).sort(re),se=w.filter(L).sort(re);return Q.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[Q.jsx("h2",{children:"Start"}),Q.jsx(Vg,{options:J,onChange:(ie,Z)=>Z&&V(Z),groupBy:ie=>ie.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:wk}),Q.jsx("h2",{children:"End"}),Q.jsx(Vg,{options:se,onChange:(ie,Z)=>Z&&K(Z),groupBy:ie=>ie.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:E==null,renderGroup:wk},E)]})};function wk(e){return Q.jsxs(Q.Fragment,{children:[Q.jsx($a,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),Q.jsx(Qp,{children:e.children}),Q.jsx(wE,{})]})}function Y7(e){const t=new Map,r=new Map;for(const[o,c]of e.demoGraph)t.set(o,{forward:(c.f??[]).map(Sk),backward:(c.b??[]).map(Sk)});for(const[o,c]of e.demoNodes)r.set(o,{x:c[0],y:c[1]});return{graph:t,nodeLUT:r}}function Sk(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function Ck(e){return{label:e.t,city:e.c,value:e.n}}function kk(e,t,r,o){return new Promise(c=>{const d=q7(e,t,"forward",r,o);if(!d.success){c(void 0);return}c({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(m=>{const l=Sn(o.nodeLUT.get(m.nodeId));return[l.x,l.y]})},properties:{distance:d.distance,mode:r}})})}const Q7=XV(_x([Q.jsx(vx,{path:"/",element:Q.jsx($7,{})}),Q.jsx(vx,{path:"routes",element:Q.jsx(X7,{})})])),eH=TI({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),tH=document.getElementById("root"),rH=kE(tH);rH.render(Q.jsx(A.StrictMode,{children:Q.jsxs(S5,{defaultMode:"system",modeStorageKey:"tm-mode",theme:eH,children:[Q.jsx(j6,{}),Q.jsx(o8,{router:Q7})]})}));
