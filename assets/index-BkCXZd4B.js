var S$=Object.defineProperty;var C$=(e,t,r)=>t in e?S$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var uC=(e,t,r)=>C$(e,typeof t!="symbol"?t+"":t,r);function v1(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const d=Object.getOwnPropertyDescriptor(o,s);d&&Object.defineProperty(e,s,d.get?d:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(s){if(s.ep)return;s.ep=!0;const d=r(s);fetch(s.href,d)}})();var Xx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ds(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var Uk={exports:{}},Vy={},Hk={exports:{}},Br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=Symbol.for("react.element"),I$=Symbol.for("react.portal"),T$=Symbol.for("react.fragment"),P$=Symbol.for("react.strict_mode"),k$=Symbol.for("react.profiler"),E$=Symbol.for("react.provider"),A$=Symbol.for("react.context"),z$=Symbol.for("react.forward_ref"),R$=Symbol.for("react.suspense"),M$=Symbol.for("react.memo"),D$=Symbol.for("react.lazy"),dC=Symbol.iterator;function L$(e){return e===null||typeof e!="object"?null:(e=dC&&e[dC]||e["@@iterator"],typeof e=="function"?e:null)}var Wk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gk=Object.assign,qk={};function kd(e,t,r){this.props=e,this.context=t,this.refs=qk,this.updater=r||Wk}kd.prototype.isReactComponent={};kd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Zk(){}Zk.prototype=kd.prototype;function _1(e,t,r){this.props=e,this.context=t,this.refs=qk,this.updater=r||Wk}var x1=_1.prototype=new Zk;x1.constructor=_1;Gk(x1,kd.prototype);x1.isPureReactComponent=!0;var hC=Array.isArray,Kk=Object.prototype.hasOwnProperty,b1={current:null},Xk={key:!0,ref:!0,__self:!0,__source:!0};function Jk(e,t,r){var o,s={},d=null,p=null;if(t!=null)for(o in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(d=""+t.key),t)Kk.call(t,o)&&!Xk.hasOwnProperty(o)&&(s[o]=t[o]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var b=Array(c),w=0;w<c;w++)b[w]=arguments[w+2];s.children=b}if(e&&e.defaultProps)for(o in c=e.defaultProps,c)s[o]===void 0&&(s[o]=c[o]);return{$$typeof:df,type:e,key:d,ref:p,props:s,_owner:b1.current}}function $$(e,t){return{$$typeof:df,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function w1(e){return typeof e=="object"&&e!==null&&e.$$typeof===df}function O$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var pC=/\/+/g;function p_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O$(""+e.key):t.toString(36)}function bg(e,t,r,o,s){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case df:case I$:p=!0}}if(p)return p=e,s=s(p),e=o===""?"."+p_(p,0):o,hC(s)?(r="",e!=null&&(r=e.replace(pC,"$&/")+"/"),bg(s,t,r,"",function(w){return w})):s!=null&&(w1(s)&&(s=$$(s,r+(!s.key||p&&p.key===s.key?"":(""+s.key).replace(pC,"$&/")+"/")+e)),t.push(s)),1;if(p=0,o=o===""?".":o+":",hC(e))for(var c=0;c<e.length;c++){d=e[c];var b=o+p_(d,c);p+=bg(d,t,r,b,s)}else if(b=L$(e),typeof b=="function")for(e=b.call(e),c=0;!(d=e.next()).done;)d=d.value,b=o+p_(d,c++),p+=bg(d,t,r,b,s);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Gm(e,t,r){if(e==null)return e;var o=[],s=0;return bg(e,o,"","",function(d){return t.call(r,d,s++)}),o}function B$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ho={current:null},wg={transition:null},F$={ReactCurrentDispatcher:ho,ReactCurrentBatchConfig:wg,ReactCurrentOwner:b1};function Yk(){throw Error("act(...) is not supported in production builds of React.")}Br.Children={map:Gm,forEach:function(e,t,r){Gm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Gm(e,function(){t++}),t},toArray:function(e){return Gm(e,function(t){return t})||[]},only:function(e){if(!w1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Br.Component=kd;Br.Fragment=T$;Br.Profiler=k$;Br.PureComponent=_1;Br.StrictMode=P$;Br.Suspense=R$;Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F$;Br.act=Yk;Br.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Gk({},e.props),s=e.key,d=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,p=b1.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(b in t)Kk.call(t,b)&&!Xk.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&c!==void 0?c[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){c=Array(b);for(var w=0;w<b;w++)c[w]=arguments[w+2];o.children=c}return{$$typeof:df,type:e.type,key:s,ref:d,props:o,_owner:p}};Br.createContext=function(e){return e={$$typeof:A$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:E$,_context:e},e.Consumer=e};Br.createElement=Jk;Br.createFactory=function(e){var t=Jk.bind(null,e);return t.type=e,t};Br.createRef=function(){return{current:null}};Br.forwardRef=function(e){return{$$typeof:z$,render:e}};Br.isValidElement=w1;Br.lazy=function(e){return{$$typeof:D$,_payload:{_status:-1,_result:e},_init:B$}};Br.memo=function(e,t){return{$$typeof:M$,type:e,compare:t===void 0?null:t}};Br.startTransition=function(e){var t=wg.transition;wg.transition={};try{e()}finally{wg.transition=t}};Br.unstable_act=Yk;Br.useCallback=function(e,t){return ho.current.useCallback(e,t)};Br.useContext=function(e){return ho.current.useContext(e)};Br.useDebugValue=function(){};Br.useDeferredValue=function(e){return ho.current.useDeferredValue(e)};Br.useEffect=function(e,t){return ho.current.useEffect(e,t)};Br.useId=function(){return ho.current.useId()};Br.useImperativeHandle=function(e,t,r){return ho.current.useImperativeHandle(e,t,r)};Br.useInsertionEffect=function(e,t){return ho.current.useInsertionEffect(e,t)};Br.useLayoutEffect=function(e,t){return ho.current.useLayoutEffect(e,t)};Br.useMemo=function(e,t){return ho.current.useMemo(e,t)};Br.useReducer=function(e,t,r){return ho.current.useReducer(e,t,r)};Br.useRef=function(e){return ho.current.useRef(e)};Br.useState=function(e){return ho.current.useState(e)};Br.useSyncExternalStore=function(e,t,r){return ho.current.useSyncExternalStore(e,t,r)};Br.useTransition=function(){return ho.current.useTransition()};Br.version="18.3.1";Hk.exports=Br;var L=Hk.exports;const Sg=jy(L),Xg=v1({__proto__:null,default:Sg},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N$=L,j$=Symbol.for("react.element"),V$=Symbol.for("react.fragment"),U$=Object.prototype.hasOwnProperty,H$=N$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W$={key:!0,ref:!0,__self:!0,__source:!0};function Qk(e,t,r){var o,s={},d=null,p=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(p=t.ref);for(o in t)U$.call(t,o)&&!W$.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)s[o]===void 0&&(s[o]=t[o]);return{$$typeof:j$,type:e,key:d,ref:p,props:s,_owner:H$.current}}Vy.Fragment=V$;Vy.jsx=Qk;Vy.jsxs=Qk;Uk.exports=Vy;var Y=Uk.exports;const qh={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Uy="$$joy";function $s(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const G$=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"}));function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(null,arguments)}const q$=Object.freeze(Object.defineProperty({__proto__:null,get default(){return K}},Symbol.toStringTag,{value:"Module"}));function eE(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Z$=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,K$=eE(function(e){return Z$.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),X$=!1;function J$(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Y$(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Q$=function(){function e(r){var o=this;this._insertTag=function(s){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(s,d),o.tags.push(s)},this.isSpeedy=r.speedy===void 0?!X$:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Y$(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var d=J$(s);try{d.insertRule(o,d.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var s;return(s=o.parentNode)==null?void 0:s.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Ki="-ms-",Jg="-moz-",Qr="-webkit-",tE="comm",S1="rule",C1="decl",e5="@import",rE="@keyframes",t5="@layer",r5=Math.abs,Hy=String.fromCharCode,n5=Object.assign;function i5(e,t){return Ri(e,0)^45?(((t<<2^Ri(e,0))<<2^Ri(e,1))<<2^Ri(e,2))<<2^Ri(e,3):0}function nE(e){return e.trim()}function o5(e,t){return(e=t.exec(e))?e[0]:e}function en(e,t,r){return e.replace(t,r)}function Jx(e,t){return e.indexOf(t)}function Ri(e,t){return e.charCodeAt(t)|0}function $p(e,t,r){return e.slice(t,r)}function rs(e){return e.length}function I1(e){return e.length}function qm(e,t){return t.push(e),e}function a5(e,t){return e.map(t).join("")}var Wy=1,ud=1,iE=0,Po=0,oi=0,Ed="";function Gy(e,t,r,o,s,d,p){return{value:e,root:t,parent:r,type:o,props:s,children:d,line:Wy,column:ud,length:p,return:""}}function Zh(e,t){return n5(Gy("",null,null,"",null,null,0),e,{length:-e.length},t)}function s5(){return oi}function l5(){return oi=Po>0?Ri(Ed,--Po):0,ud--,oi===10&&(ud=1,Wy--),oi}function Vo(){return oi=Po<iE?Ri(Ed,Po++):0,ud++,oi===10&&(ud=1,Wy++),oi}function os(){return Ri(Ed,Po)}function Cg(){return Po}function hf(e,t){return $p(Ed,e,t)}function Op(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function oE(e){return Wy=ud=1,iE=rs(Ed=e),Po=0,[]}function aE(e){return Ed="",e}function Ig(e){return nE(hf(Po-1,Yx(e===91?e+2:e===40?e+1:e)))}function c5(e){for(;(oi=os())&&oi<33;)Vo();return Op(e)>2||Op(oi)>3?"":" "}function u5(e,t){for(;--t&&Vo()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return hf(e,Cg()+(t<6&&os()==32&&Vo()==32))}function Yx(e){for(;Vo();)switch(oi){case e:return Po;case 34:case 39:e!==34&&e!==39&&Yx(oi);break;case 40:e===41&&Yx(e);break;case 92:Vo();break}return Po}function d5(e,t){for(;Vo()&&e+oi!==57;)if(e+oi===84&&os()===47)break;return"/*"+hf(t,Po-1)+"*"+Hy(e===47?e:Vo())}function h5(e){for(;!Op(os());)Vo();return hf(e,Po)}function p5(e){return aE(Tg("",null,null,null,[""],e=oE(e),0,[0],e))}function Tg(e,t,r,o,s,d,p,c,b){for(var w=0,T=0,k=p,A=0,$=0,V=0,N=1,G=1,O=1,R=0,M="",ee=s,Z=d,oe=o,ie=M;G;)switch(V=R,R=Vo()){case 40:if(V!=108&&Ri(ie,k-1)==58){Jx(ie+=en(Ig(R),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:ie+=Ig(R);break;case 9:case 10:case 13:case 32:ie+=c5(V);break;case 92:ie+=u5(Cg()-1,7);continue;case 47:switch(os()){case 42:case 47:qm(f5(d5(Vo(),Cg()),t,r),b);break;default:ie+="/"}break;case 123*N:c[w++]=rs(ie)*O;case 125*N:case 59:case 0:switch(R){case 0:case 125:G=0;case 59+T:O==-1&&(ie=en(ie,/\f/g,"")),$>0&&rs(ie)-k&&qm($>32?mC(ie+";",o,r,k-1):mC(en(ie," ","")+";",o,r,k-2),b);break;case 59:ie+=";";default:if(qm(oe=fC(ie,t,r,w,T,s,c,M,ee=[],Z=[],k),d),R===123)if(T===0)Tg(ie,t,oe,oe,ee,d,k,c,Z);else switch(A===99&&Ri(ie,3)===110?100:A){case 100:case 108:case 109:case 115:Tg(e,oe,oe,o&&qm(fC(e,oe,oe,0,0,s,c,M,s,ee=[],k),Z),s,Z,k,c,o?ee:Z);break;default:Tg(ie,oe,oe,oe,[""],Z,0,c,Z)}}w=T=$=0,N=O=1,M=ie="",k=p;break;case 58:k=1+rs(ie),$=V;default:if(N<1){if(R==123)--N;else if(R==125&&N++==0&&l5()==125)continue}switch(ie+=Hy(R),R*N){case 38:O=T>0?1:(ie+="\f",-1);break;case 44:c[w++]=(rs(ie)-1)*O,O=1;break;case 64:os()===45&&(ie+=Ig(Vo())),A=os(),T=k=rs(M=ie+=h5(Cg())),R++;break;case 45:V===45&&rs(ie)==2&&(N=0)}}return d}function fC(e,t,r,o,s,d,p,c,b,w,T){for(var k=s-1,A=s===0?d:[""],$=I1(A),V=0,N=0,G=0;V<o;++V)for(var O=0,R=$p(e,k+1,k=r5(N=p[V])),M=e;O<$;++O)(M=nE(N>0?A[O]+" "+R:en(R,/&\f/g,A[O])))&&(b[G++]=M);return Gy(e,t,r,s===0?S1:c,b,w,T)}function f5(e,t,r){return Gy(e,t,r,tE,Hy(s5()),$p(e,2,-2),0)}function mC(e,t,r,o){return Gy(e,t,r,C1,$p(e,0,o),$p(e,o+1,-1),o)}function Yu(e,t){for(var r="",o=I1(e),s=0;s<o;s++)r+=t(e[s],s,e,t)||"";return r}function m5(e,t,r,o){switch(e.type){case t5:if(e.children.length)break;case e5:case C1:return e.return=e.return||e.value;case tE:return"";case rE:return e.return=e.value+"{"+Yu(e.children,o)+"}";case S1:e.value=e.props.join(",")}return rs(r=Yu(e.children,o))?e.return=e.value+"{"+r+"}":""}function g5(e){var t=I1(e);return function(r,o,s,d){for(var p="",c=0;c<t;c++)p+=e[c](r,o,s,d)||"";return p}}function y5(e){return function(t){t.root||(t=t.return)&&e(t)}}var v5=function(t,r,o){for(var s=0,d=0;s=d,d=os(),s===38&&d===12&&(r[o]=1),!Op(d);)Vo();return hf(t,Po)},_5=function(t,r){var o=-1,s=44;do switch(Op(s)){case 0:s===38&&os()===12&&(r[o]=1),t[o]+=v5(Po-1,r,o);break;case 2:t[o]+=Ig(s);break;case 4:if(s===44){t[++o]=os()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=Hy(s)}while(s=Vo());return t},x5=function(t,r){return aE(_5(oE(t),r))},gC=new WeakMap,b5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,s=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!gC.get(o))&&!s){gC.set(t,!0);for(var d=[],p=x5(r,d),c=o.props,b=0,w=0;b<p.length;b++)for(var T=0;T<c.length;T++,w++)t.props[w]=d[b]?p[b].replace(/&\f/g,c[T]):c[T]+" "+p[b]}}},w5=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function sE(e,t){switch(i5(e,t)){case 5103:return Qr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qr+e+Jg+e+Ki+e+e;case 6828:case 4268:return Qr+e+Ki+e+e;case 6165:return Qr+e+Ki+"flex-"+e+e;case 5187:return Qr+e+en(e,/(\w+).+(:[^]+)/,Qr+"box-$1$2"+Ki+"flex-$1$2")+e;case 5443:return Qr+e+Ki+"flex-item-"+en(e,/flex-|-self/,"")+e;case 4675:return Qr+e+Ki+"flex-line-pack"+en(e,/align-content|flex-|-self/,"")+e;case 5548:return Qr+e+Ki+en(e,"shrink","negative")+e;case 5292:return Qr+e+Ki+en(e,"basis","preferred-size")+e;case 6060:return Qr+"box-"+en(e,"-grow","")+Qr+e+Ki+en(e,"grow","positive")+e;case 4554:return Qr+en(e,/([^-])(transform)/g,"$1"+Qr+"$2")+e;case 6187:return en(en(en(e,/(zoom-|grab)/,Qr+"$1"),/(image-set)/,Qr+"$1"),e,"")+e;case 5495:case 3959:return en(e,/(image-set\([^]*)/,Qr+"$1$`$1");case 4968:return en(en(e,/(.+:)(flex-)?(.*)/,Qr+"box-pack:$3"+Ki+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qr+e+e;case 4095:case 3583:case 4068:case 2532:return en(e,/(.+)-inline(.+)/,Qr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rs(e)-1-t>6)switch(Ri(e,t+1)){case 109:if(Ri(e,t+4)!==45)break;case 102:return en(e,/(.+:)(.+)-([^]+)/,"$1"+Qr+"$2-$3$1"+Jg+(Ri(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Jx(e,"stretch")?sE(en(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ri(e,t+1)!==115)break;case 6444:switch(Ri(e,rs(e)-3-(~Jx(e,"!important")&&10))){case 107:return en(e,":",":"+Qr)+e;case 101:return en(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qr+(Ri(e,14)===45?"inline-":"")+"box$3$1"+Qr+"$2$3$1"+Ki+"$2box$3")+e}break;case 5936:switch(Ri(e,t+11)){case 114:return Qr+e+Ki+en(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qr+e+Ki+en(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qr+e+Ki+en(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qr+e+Ki+e+e}return e}var S5=function(t,r,o,s){if(t.length>-1&&!t.return)switch(t.type){case C1:t.return=sE(t.value,t.length);break;case rE:return Yu([Zh(t,{value:en(t.value,"@","@"+Qr)})],s);case S1:if(t.length)return a5(t.props,function(d){switch(o5(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yu([Zh(t,{props:[en(d,/:(read-\w+)/,":"+Jg+"$1")]})],s);case"::placeholder":return Yu([Zh(t,{props:[en(d,/:(plac\w+)/,":"+Qr+"input-$1")]}),Zh(t,{props:[en(d,/:(plac\w+)/,":"+Jg+"$1")]}),Zh(t,{props:[en(d,/:(plac\w+)/,Ki+"input-$1")]})],s)}return""})}},C5=[S5],lE=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(N){var G=N.getAttribute("data-emotion");G.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var s=t.stylisPlugins||C5,d={},p,c=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(N){for(var G=N.getAttribute("data-emotion").split(" "),O=1;O<G.length;O++)d[G[O]]=!0;c.push(N)});var b,w=[b5,w5];{var T,k=[m5,y5(function(N){T.insert(N)})],A=g5(w.concat(s,k)),$=function(G){return Yu(p5(G),A)};b=function(G,O,R,M){T=R,$(G?G+"{"+O.styles+"}":O.styles),M&&(V.inserted[O.name]=!0)}}var V={key:r,sheet:new Q$({key:r,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return V.sheet.hydrate(c),V},cE={exports:{}},sn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wi=typeof Symbol=="function"&&Symbol.for,T1=wi?Symbol.for("react.element"):60103,P1=wi?Symbol.for("react.portal"):60106,qy=wi?Symbol.for("react.fragment"):60107,Zy=wi?Symbol.for("react.strict_mode"):60108,Ky=wi?Symbol.for("react.profiler"):60114,Xy=wi?Symbol.for("react.provider"):60109,Jy=wi?Symbol.for("react.context"):60110,k1=wi?Symbol.for("react.async_mode"):60111,Yy=wi?Symbol.for("react.concurrent_mode"):60111,Qy=wi?Symbol.for("react.forward_ref"):60112,ev=wi?Symbol.for("react.suspense"):60113,I5=wi?Symbol.for("react.suspense_list"):60120,tv=wi?Symbol.for("react.memo"):60115,rv=wi?Symbol.for("react.lazy"):60116,T5=wi?Symbol.for("react.block"):60121,P5=wi?Symbol.for("react.fundamental"):60117,k5=wi?Symbol.for("react.responder"):60118,E5=wi?Symbol.for("react.scope"):60119;function Go(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case T1:switch(e=e.type,e){case k1:case Yy:case qy:case Ky:case Zy:case ev:return e;default:switch(e=e&&e.$$typeof,e){case Jy:case Qy:case rv:case tv:case Xy:return e;default:return t}}case P1:return t}}}function uE(e){return Go(e)===Yy}sn.AsyncMode=k1;sn.ConcurrentMode=Yy;sn.ContextConsumer=Jy;sn.ContextProvider=Xy;sn.Element=T1;sn.ForwardRef=Qy;sn.Fragment=qy;sn.Lazy=rv;sn.Memo=tv;sn.Portal=P1;sn.Profiler=Ky;sn.StrictMode=Zy;sn.Suspense=ev;sn.isAsyncMode=function(e){return uE(e)||Go(e)===k1};sn.isConcurrentMode=uE;sn.isContextConsumer=function(e){return Go(e)===Jy};sn.isContextProvider=function(e){return Go(e)===Xy};sn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===T1};sn.isForwardRef=function(e){return Go(e)===Qy};sn.isFragment=function(e){return Go(e)===qy};sn.isLazy=function(e){return Go(e)===rv};sn.isMemo=function(e){return Go(e)===tv};sn.isPortal=function(e){return Go(e)===P1};sn.isProfiler=function(e){return Go(e)===Ky};sn.isStrictMode=function(e){return Go(e)===Zy};sn.isSuspense=function(e){return Go(e)===ev};sn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qy||e===Yy||e===Ky||e===Zy||e===ev||e===I5||typeof e=="object"&&e!==null&&(e.$$typeof===rv||e.$$typeof===tv||e.$$typeof===Xy||e.$$typeof===Jy||e.$$typeof===Qy||e.$$typeof===P5||e.$$typeof===k5||e.$$typeof===E5||e.$$typeof===T5)};sn.typeOf=Go;cE.exports=sn;var A5=cE.exports,dE=A5,z5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},R5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hE={};hE[dE.ForwardRef]=z5;hE[dE.Memo]=R5;var M5=!0;function D5(e,t,r){var o="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(o+=s+" ")}),o}var pE=function(t,r,o){var s=t.key+"-"+r.name;(o===!1||M5===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},fE=function(t,r,o){pE(t,r,o);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+s:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function L5(e){for(var t=0,r,o=0,s=e.length;s>=4;++o,s-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var $5={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},O5=!1,B5=/[A-Z]|^ms/g,F5=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mE=function(t){return t.charCodeAt(1)===45},yC=function(t){return t!=null&&typeof t!="boolean"},f_=eE(function(e){return mE(e)?e:e.replace(B5,"-$&").toLowerCase()}),vC=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(F5,function(o,s,d){return ns={name:s,styles:d,next:ns},s})}return $5[t]!==1&&!mE(t)&&typeof r=="number"&&r!==0?r+"px":r},N5="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Bp(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return ns={name:s.name,styles:s.styles,next:ns},s.name;var d=r;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)ns={name:p.name,styles:p.styles,next:ns},p=p.next;var c=d.styles+";";return c}return j5(e,t,r)}case"function":{if(e!==void 0){var b=ns,w=r(e);return ns=b,Bp(e,t,w)}break}}var T=r;if(t==null)return T;var k=t[T];return k!==void 0?k:T}function j5(e,t,r){var o="";if(Array.isArray(r))for(var s=0;s<r.length;s++)o+=Bp(e,t,r[s])+";";else for(var d in r){var p=r[d];if(typeof p!="object"){var c=p;t!=null&&t[c]!==void 0?o+=d+"{"+t[c]+"}":yC(c)&&(o+=f_(d)+":"+vC(d,c)+";")}else{if(d==="NO_COMPONENT_SELECTOR"&&O5)throw new Error(N5);if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var b=0;b<p.length;b++)yC(p[b])&&(o+=f_(d)+":"+vC(d,p[b])+";");else{var w=Bp(e,t,p);switch(d){case"animation":case"animationName":{o+=f_(d)+":"+w+";";break}default:o+=d+"{"+w+"}"}}}}return o}var _C=/label:\s*([^\s;{]+)\s*(;|$)/g,ns;function E1(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,s="";ns=void 0;var d=e[0];if(d==null||d.raw===void 0)o=!1,s+=Bp(r,t,d);else{var p=d;s+=p[0]}for(var c=1;c<e.length;c++)if(s+=Bp(r,t,e[c]),o){var b=d;s+=b[c]}_C.lastIndex=0;for(var w="",T;(T=_C.exec(s))!==null;)w+="-"+T[1];var k=L5(s)+w;return{name:k,styles:s,next:ns}}var V5=function(t){return t()},gE=Xg.useInsertionEffect?Xg.useInsertionEffect:!1,U5=gE||V5,xC=gE||L.useLayoutEffect,yE=L.createContext(typeof HTMLElement<"u"?lE({key:"css"}):null),H5=yE.Provider,vE=function(t){return L.forwardRef(function(r,o){var s=L.useContext(yE);return t(r,s,o)})},pf=L.createContext({}),W5=vE(function(e,t){var r=e.styles,o=E1([r],void 0,L.useContext(pf)),s=L.useRef();return xC(function(){var d=t.key+"-global",p=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,b=document.querySelector('style[data-emotion="'+d+" "+o.name+'"]');return t.sheet.tags.length&&(p.before=t.sheet.tags[0]),b!==null&&(c=!0,b.setAttribute("data-emotion",d),p.hydrate([b])),s.current=[p,c],function(){p.flush()}},[t]),xC(function(){var d=s.current,p=d[0],c=d[1];if(c){d[1]=!1;return}if(o.next!==void 0&&fE(t,o.next,!0),p.tags.length){var b=p.tags[p.tags.length-1].nextElementSibling;p.before=b,p.flush()}t.insert("",o,p,!1)},[t,o.name]),null});function A1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return E1(t)}var _E=function(){var t=A1.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},G5=K$,q5=function(t){return t!=="theme"},bC=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?G5:q5},wC=function(t,r,o){var s;if(r){var d=r.shouldForwardProp;s=t.__emotion_forwardProp&&d?function(p){return t.__emotion_forwardProp(p)&&d(p)}:d}return typeof s!="function"&&o&&(s=t.__emotion_forwardProp),s},Z5=!1,K5=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return pE(r,o,s),U5(function(){return fE(r,o,s)}),null},X5=function e(t,r){var o=t.__emotion_real===t,s=o&&t.__emotion_base||t,d,p;r!==void 0&&(d=r.label,p=r.target);var c=wC(t,r,o),b=c||bC(s),w=!b("as");return function(){var T=arguments,k=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&k.push("label:"+d+";"),T[0]==null||T[0].raw===void 0)k.push.apply(k,T);else{k.push(T[0][0]);for(var A=T.length,$=1;$<A;$++)k.push(T[$],T[0][$])}var V=vE(function(N,G,O){var R=w&&N.as||s,M="",ee=[],Z=N;if(N.theme==null){Z={};for(var oe in N)Z[oe]=N[oe];Z.theme=L.useContext(pf)}typeof N.className=="string"?M=D5(G.registered,ee,N.className):N.className!=null&&(M=N.className+" ");var ie=E1(k.concat(ee),G.registered,Z);M+=G.key+"-"+ie.name,p!==void 0&&(M+=" "+p);var W=w&&c===void 0?bC(R):b,Ie={};for(var _e in N)w&&_e==="as"||W(_e)&&(Ie[_e]=N[_e]);return Ie.className=M,O&&(Ie.ref=O),L.createElement(L.Fragment,null,L.createElement(K5,{cache:G,serialized:ie,isStringTag:typeof R=="string"}),L.createElement(R,Ie))});return V.displayName=d!==void 0?d:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",V.defaultProps=t.defaultProps,V.__emotion_real=V,V.__emotion_base=s,V.__emotion_styles=k,V.__emotion_forwardProp=c,Object.defineProperty(V,"toString",{value:function(){return p===void 0&&Z5?"NO_COMPONENT_SELECTOR":"."+p}}),V.withComponent=function(N,G){return e(N,K({},r,G,{shouldForwardProp:wC(V,G,!0)})).apply(void 0,k)},V}},J5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Qx=X5.bind();J5.forEach(function(e){Qx[e]=Qx(e)});let eb;typeof document=="object"&&(eb=lE({key:"css",prepend:!0}));function Y5(e){const{injectFirst:t,children:r}=e;return t&&eb?Y.jsx(H5,{value:eb,children:r}):r}function Q5(e){return e==null||Object.keys(e).length===0}function xp(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?s=>t(Q5(s)?r:s):t;return Y.jsx(W5,{styles:o})}function xE(e,t){return Qx(e,t)}const bE=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},e3=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:xp,StyledEngineProvider:Y5,ThemeContext:pf,css:A1,default:xE,internal_processStyles:bE,keyframes:_E},Symbol.toStringTag,{value:"Module"}));function Jt(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}function Rs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wE(e){if(!Rs(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=wE(e[r])}),t}function pi(e,t,r={clone:!0}){const o=r.clone?K({},e):e;return Rs(e)&&Rs(t)&&Object.keys(t).forEach(s=>{Rs(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Rs(e[s])?o[s]=pi(e[s],t[s],r):r.clone?o[s]=Rs(t[s])?wE(t[s]):t[s]:o[s]=t[s]}),o}const t3=Object.freeze(Object.defineProperty({__proto__:null,default:pi,isPlainObject:Rs},Symbol.toStringTag,{value:"Module"})),r3=["values","unit","step"],n3=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>K({},r,{[o.key]:o.val}),{})};function z1(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,s=Jt(e,r3),d=n3(t),p=Object.keys(d);function c(A){return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${r})`}function b(A){return`@media (max-width:${(typeof t[A]=="number"?t[A]:A)-o/100}${r})`}function w(A,$){const V=p.indexOf($);return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${r}) and (max-width:${(V!==-1&&typeof t[p[V]]=="number"?t[p[V]]:$)-o/100}${r})`}function T(A){return p.indexOf(A)+1<p.length?w(A,p[p.indexOf(A)+1]):c(A)}function k(A){const $=p.indexOf(A);return $===0?c(p[1]):$===p.length-1?b(p[$]):w(A,p[p.indexOf(A)+1]).replace("@media","@media not all and")}return K({keys:p,values:d,up:c,down:b,between:w,only:T,not:k,unit:r},s)}const i3={borderRadius:4};function bp(e,t){return t?pi(e,t,{clone:!1}):e}const R1={xs:0,sm:600,md:900,lg:1200,xl:1536},SC={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${R1[e]}px)`};function Na(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||SC;return t.reduce((p,c,b)=>(p[d.up(d.keys[b])]=r(t[b]),p),{})}if(typeof t=="object"){const d=o.breakpoints||SC;return Object.keys(t).reduce((p,c)=>{if(Object.keys(d.values||R1).indexOf(c)!==-1){const b=d.up(c);p[b]=r(t[c],c)}else{const b=c;p[b]=t[b]}return p},{})}return r(t)}function SE(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,s)=>{const d=e.up(s);return o[d]={},o},{}))||{}}function CE(e,t){return e.reduce((r,o)=>{const s=r[o];return(!s||Object.keys(s).length===0)&&delete r[o],r},t)}function o3(e,...t){const r=SE(e),o=[r,...t].reduce((s,d)=>pi(s,d),{});return CE(Object.keys(r),o)}function a3(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((s,d)=>{d<e.length&&(r[s]=!0)}):o.forEach(s=>{e[s]!=null&&(r[s]=!0)}),r}function m_({values:e,breakpoints:t,base:r}){const o=r||a3(e,t),s=Object.keys(o);if(s.length===0)return e;let d;return s.reduce((p,c,b)=>(Array.isArray(e)?(p[c]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(p[c]=e[c]!=null?e[c]:e[d],d=c):p[c]=e,p),{})}function kt(e){if(typeof e!="string")throw new Error($s(7));return e.charAt(0).toUpperCase()+e.slice(1)}const s3=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"}));function zl(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((s,d)=>s&&s[d]?s[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,s)=>o&&o[s]!=null?o[s]:null,e)}function Yg(e,t,r,o=r){let s;return typeof e=="function"?s=e(r):Array.isArray(e)?s=e[r]||o:s=zl(e,r)||o,t&&(s=t(s,o,e)),s}function ei(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:s}=e,d=p=>{if(p[t]==null)return null;const c=p[t],b=p.theme,w=zl(b,o)||{};return Na(p,c,k=>{let A=Yg(w,s,k);return k===A&&typeof k=="string"&&(A=Yg(w,s,`${t}${k==="default"?"":kt(k)}`,k)),r===!1?A:{[r]:A}})};return d.propTypes={},d.filterProps=[t],d}function l3(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const c3={m:"margin",p:"padding"},u3={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},CC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},d3=l3(e=>{if(e.length>2)if(CC[e])e=CC[e];else return[e];const[t,r]=e.split(""),o=c3[t],s=u3[r]||"";return Array.isArray(s)?s.map(d=>o+d):[o+s]}),M1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],D1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...M1,...D1];function ff(e,t,r,o){var s;const d=(s=zl(e,t,!1))!=null?s:r;return typeof d=="number"?p=>typeof p=="string"?p:d*p:Array.isArray(d)?p=>typeof p=="string"?p:d[p]:typeof d=="function"?d:()=>{}}function L1(e){return ff(e,"spacing",8)}function Pc(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function h3(e,t){return r=>e.reduce((o,s)=>(o[s]=Pc(t,r),o),{})}function p3(e,t,r,o){if(t.indexOf(r)===-1)return null;const s=d3(r),d=h3(s,o),p=e[r];return Na(e,p,d)}function IE(e,t){const r=L1(e.theme);return Object.keys(e).map(o=>p3(e,t,o,r)).reduce(bp,{})}function jn(e){return IE(e,M1)}jn.propTypes={};jn.filterProps=M1;function Vn(e){return IE(e,D1)}Vn.propTypes={};Vn.filterProps=D1;function TE(e=8){if(e.mui)return e;const t=L1({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(d=>{const p=t(d);return typeof p=="number"?`${p}px`:p}).join(" ");return r.mui=!0,r}function nv(...e){const t=e.reduce((o,s)=>(s.filterProps.forEach(d=>{o[d]=s}),o),{}),r=o=>Object.keys(o).reduce((s,d)=>t[d]?bp(s,t[d](o)):s,{});return r.propTypes={},r.filterProps=e.reduce((o,s)=>o.concat(s.filterProps),[]),r}function oa(e){return typeof e!="number"?e:`${e}px solid`}function ga(e,t){return ei({prop:e,themeKey:"borders",transform:t})}const f3=ga("border",oa),m3=ga("borderTop",oa),g3=ga("borderRight",oa),y3=ga("borderBottom",oa),v3=ga("borderLeft",oa),_3=ga("borderColor"),x3=ga("borderTopColor"),b3=ga("borderRightColor"),w3=ga("borderBottomColor"),S3=ga("borderLeftColor"),C3=ga("outline",oa),I3=ga("outlineColor"),iv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ff(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:Pc(t,o)});return Na(e,e.borderRadius,r)}return null};iv.propTypes={};iv.filterProps=["borderRadius"];nv(f3,m3,g3,y3,v3,_3,x3,b3,w3,S3,iv,C3,I3);const ov=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ff(e.theme,"spacing",8),r=o=>({gap:Pc(t,o)});return Na(e,e.gap,r)}return null};ov.propTypes={};ov.filterProps=["gap"];const av=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ff(e.theme,"spacing",8),r=o=>({columnGap:Pc(t,o)});return Na(e,e.columnGap,r)}return null};av.propTypes={};av.filterProps=["columnGap"];const sv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ff(e.theme,"spacing",8),r=o=>({rowGap:Pc(t,o)});return Na(e,e.rowGap,r)}return null};sv.propTypes={};sv.filterProps=["rowGap"];const T3=ei({prop:"gridColumn"}),P3=ei({prop:"gridRow"}),k3=ei({prop:"gridAutoFlow"}),E3=ei({prop:"gridAutoColumns"}),A3=ei({prop:"gridAutoRows"}),z3=ei({prop:"gridTemplateColumns"}),R3=ei({prop:"gridTemplateRows"}),M3=ei({prop:"gridTemplateAreas"}),D3=ei({prop:"gridArea"});nv(ov,av,sv,T3,P3,k3,E3,A3,z3,R3,M3,D3);function Qu(e,t){return t==="grey"?t:e}const L3=ei({prop:"color",themeKey:"palette",transform:Qu}),$3=ei({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Qu}),O3=ei({prop:"backgroundColor",themeKey:"palette",transform:Qu});nv(L3,$3,O3);function Bo(e){return e<=1&&e!==0?`${e*100}%`:e}const B3=ei({prop:"width",transform:Bo}),$1=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,s;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||R1[r];return d?((s=e.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Bo(r)}};return Na(e,e.maxWidth,t)}return null};$1.filterProps=["maxWidth"];const F3=ei({prop:"minWidth",transform:Bo}),N3=ei({prop:"height",transform:Bo}),j3=ei({prop:"maxHeight",transform:Bo}),V3=ei({prop:"minHeight",transform:Bo});ei({prop:"size",cssProperty:"width",transform:Bo});ei({prop:"size",cssProperty:"height",transform:Bo});const U3=ei({prop:"boxSizing"});nv(B3,$1,F3,N3,j3,V3,U3);const Ad={border:{themeKey:"borders",transform:oa},borderTop:{themeKey:"borders",transform:oa},borderRight:{themeKey:"borders",transform:oa},borderBottom:{themeKey:"borders",transform:oa},borderLeft:{themeKey:"borders",transform:oa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:oa},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:iv},color:{themeKey:"palette",transform:Qu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Qu},backgroundColor:{themeKey:"palette",transform:Qu},p:{style:Vn},pt:{style:Vn},pr:{style:Vn},pb:{style:Vn},pl:{style:Vn},px:{style:Vn},py:{style:Vn},padding:{style:Vn},paddingTop:{style:Vn},paddingRight:{style:Vn},paddingBottom:{style:Vn},paddingLeft:{style:Vn},paddingX:{style:Vn},paddingY:{style:Vn},paddingInline:{style:Vn},paddingInlineStart:{style:Vn},paddingInlineEnd:{style:Vn},paddingBlock:{style:Vn},paddingBlockStart:{style:Vn},paddingBlockEnd:{style:Vn},m:{style:jn},mt:{style:jn},mr:{style:jn},mb:{style:jn},ml:{style:jn},mx:{style:jn},my:{style:jn},margin:{style:jn},marginTop:{style:jn},marginRight:{style:jn},marginBottom:{style:jn},marginLeft:{style:jn},marginX:{style:jn},marginY:{style:jn},marginInline:{style:jn},marginInlineStart:{style:jn},marginInlineEnd:{style:jn},marginBlock:{style:jn},marginBlockStart:{style:jn},marginBlockEnd:{style:jn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ov},rowGap:{style:sv},columnGap:{style:av},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Bo},maxWidth:{style:$1},minWidth:{transform:Bo},height:{transform:Bo},maxHeight:{transform:Bo},minHeight:{transform:Bo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function H3(...e){const t=e.reduce((o,s)=>o.concat(Object.keys(s)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function W3(e,t){return typeof e=="function"?e(t):e}function PE(){function e(r,o,s,d){const p={[r]:o,theme:s},c=d[r];if(!c)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:T,style:k}=c;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const A=zl(s,w)||{};return k?k(p):Na(p,o,V=>{let N=Yg(A,T,V);return V===N&&typeof V=="string"&&(N=Yg(A,T,`${r}${V==="default"?"":kt(V)}`,V)),b===!1?N:{[b]:N}})}function t(r){var o;const{sx:s,theme:d={}}=r||{};if(!s)return null;const p=(o=d.unstable_sxConfig)!=null?o:Ad;function c(b){let w=b;if(typeof b=="function")w=b(d);else if(typeof b!="object")return b;if(!w)return null;const T=SE(d.breakpoints),k=Object.keys(T);let A=T;return Object.keys(w).forEach($=>{const V=W3(w[$],d);if(V!=null)if(typeof V=="object")if(p[$])A=bp(A,e($,V,d,p));else{const N=Na({theme:d},V,G=>({[$]:G}));H3(N,V)?A[$]=t({sx:V,theme:d}):A=bp(A,N)}else A=bp(A,e($,V,d,p))}),CE(k,A)}return Array.isArray(s)?s.map(c):c(s)}return t}const zd=PE();zd.filterProps=["sx"];function O1(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const G3=["breakpoints","palette","spacing","shape"];function mf(e={},...t){const{breakpoints:r={},palette:o={},spacing:s,shape:d={}}=e,p=Jt(e,G3),c=z1(r),b=TE(s);let w=pi({breakpoints:c,direction:"ltr",components:{},palette:K({mode:"light"},o),spacing:b,shape:K({},i3,d)},p);return w.applyStyles=O1,w=t.reduce((T,k)=>pi(T,k),w),w.unstable_sxConfig=K({},Ad,p==null?void 0:p.unstable_sxConfig),w.unstable_sx=function(k){return zd({sx:k,theme:this})},w}const q3=Object.freeze(Object.defineProperty({__proto__:null,default:mf,private_createBreakpoints:z1,unstable_applyStyles:O1},Symbol.toStringTag,{value:"Module"}));function Z3(e){return Object.keys(e).length===0}function kE(e=null){const t=L.useContext(pf);return!t||Z3(t)?e:t}const K3=mf();function EE(e=K3){return kE(e)}function X3({styles:e,themeId:t,defaultTheme:r={}}){const o=EE(r),s=typeof e=="function"?e(t&&o[t]||o):e;return Y.jsx(xp,{styles:s})}const J3=["sx"],Y3=e=>{var t,r;const o={systemProps:{},otherProps:{}},s=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:Ad;return Object.keys(e).forEach(d=>{s[d]?o.systemProps[d]=e[d]:o.otherProps[d]=e[d]}),o};function B1(e){const{sx:t}=e,r=Jt(e,J3),{systemProps:o,otherProps:s}=Y3(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...p)=>{const c=t(...p);return Rs(c)?K({},o,c):o}:d=K({},o,t),K({},s,{sx:d})}const Q3=Object.freeze(Object.defineProperty({__proto__:null,default:zd,extendSxProp:B1,unstable_createStyleFunctionSx:PE,unstable_defaultSxConfig:Ad},Symbol.toStringTag,{value:"Module"})),IC=e=>e,eO=()=>{let e=IC;return{configure(t){e=t},generate(t){return e(t)},reset(){e=IC}}},tO=eO();function AE(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=AE(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function si(){for(var e,t,r=0,o="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=AE(e))&&(o&&(o+=" "),o+=t);return o}const zE={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function lv(e,t,r="Mui"){const o=zE[t];return o?`${r}-${o}`:`${tO.generate(e)}-${t}`}function RE(e,t,r="Mui"){const o={};return t.forEach(s=>{o[s]=lv(e,s,r)}),o}var ME={exports:{}},ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=Symbol.for("react.element"),N1=Symbol.for("react.portal"),cv=Symbol.for("react.fragment"),uv=Symbol.for("react.strict_mode"),dv=Symbol.for("react.profiler"),hv=Symbol.for("react.provider"),pv=Symbol.for("react.context"),rO=Symbol.for("react.server_context"),fv=Symbol.for("react.forward_ref"),mv=Symbol.for("react.suspense"),gv=Symbol.for("react.suspense_list"),yv=Symbol.for("react.memo"),vv=Symbol.for("react.lazy"),nO=Symbol.for("react.offscreen"),DE;DE=Symbol.for("react.module.reference");function ya(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case F1:switch(e=e.type,e){case cv:case dv:case uv:case mv:case gv:return e;default:switch(e=e&&e.$$typeof,e){case rO:case pv:case fv:case vv:case yv:case hv:return e;default:return t}}case N1:return t}}}ln.ContextConsumer=pv;ln.ContextProvider=hv;ln.Element=F1;ln.ForwardRef=fv;ln.Fragment=cv;ln.Lazy=vv;ln.Memo=yv;ln.Portal=N1;ln.Profiler=dv;ln.StrictMode=uv;ln.Suspense=mv;ln.SuspenseList=gv;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(e){return ya(e)===pv};ln.isContextProvider=function(e){return ya(e)===hv};ln.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===F1};ln.isForwardRef=function(e){return ya(e)===fv};ln.isFragment=function(e){return ya(e)===cv};ln.isLazy=function(e){return ya(e)===vv};ln.isMemo=function(e){return ya(e)===yv};ln.isPortal=function(e){return ya(e)===N1};ln.isProfiler=function(e){return ya(e)===dv};ln.isStrictMode=function(e){return ya(e)===uv};ln.isSuspense=function(e){return ya(e)===mv};ln.isSuspenseList=function(e){return ya(e)===gv};ln.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===cv||e===dv||e===uv||e===mv||e===gv||e===nO||typeof e=="object"&&e!==null&&(e.$$typeof===vv||e.$$typeof===yv||e.$$typeof===hv||e.$$typeof===pv||e.$$typeof===fv||e.$$typeof===DE||e.getModuleId!==void 0)};ln.typeOf=ya;ME.exports=ln;var TC=ME.exports;const iO=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function LE(e){const t=`${e}`.match(iO);return t&&t[1]||""}function $E(e,t=""){return e.displayName||e.name||LE(e)||t}function PC(e,t,r){const o=$E(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function oO(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return $E(e,"Component");if(typeof e=="object")switch(e.$$typeof){case TC.ForwardRef:return PC(e,e.render,"ForwardRef");case TC.Memo:return PC(e,e.type,"memo");default:return}}}const aO=Object.freeze(Object.defineProperty({__proto__:null,default:oO,getFunctionName:LE},Symbol.toStringTag,{value:"Module"})),sO=["ownerState"],lO=["variants"],cO=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function uO(e){return Object.keys(e).length===0}function dO(e){return typeof e=="string"&&e.charCodeAt(0)>96}function g_(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const hO=mf(),pO=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Zm({defaultTheme:e,theme:t,themeId:r}){return uO(t)?e:t[r]||t}function fO(e){return e?(t,r)=>r[e]:null}function Pg(e,t){let{ownerState:r}=t,o=Jt(t,sO);const s=typeof e=="function"?e(K({ownerState:r},o)):e;if(Array.isArray(s))return s.flatMap(d=>Pg(d,K({ownerState:r},o)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:d=[]}=s;let c=Jt(s,lO);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props(K({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style(K({ownerState:r},o,r)):b.style))}),c}return s}function OE(e={}){const{themeId:t,defaultTheme:r=hO,rootShouldForwardProp:o=g_,slotShouldForwardProp:s=g_}=e,d=p=>zd(K({},p,{theme:Zm(K({},p,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(p,c={})=>{bE(p,Z=>Z.filter(oe=>!(oe!=null&&oe.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:k,overridesResolver:A=fO(pO(w))}=c,$=Jt(c,cO),V=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,N=k||!1;let G,O=g_;w==="Root"||w==="root"?O=o:w?O=s:dO(p)&&(O=void 0);const R=xE(p,K({shouldForwardProp:O,label:G},$)),M=Z=>typeof Z=="function"&&Z.__emotion_real!==Z||Rs(Z)?oe=>Pg(Z,K({},oe,{theme:Zm({theme:oe.theme,defaultTheme:r,themeId:t})})):Z,ee=(Z,...oe)=>{let ie=M(Z);const W=oe?oe.map(M):[];b&&A&&W.push(Te=>{const Ae=Zm(K({},Te,{defaultTheme:r,themeId:t}));if(!Ae.components||!Ae.components[b]||!Ae.components[b].styleOverrides)return null;const $e=Ae.components[b].styleOverrides,et={};return Object.entries($e).forEach(([Ve,ke])=>{et[Ve]=Pg(ke,K({},Te,{theme:Ae}))}),A(Te,et)}),b&&!V&&W.push(Te=>{var Ae;const $e=Zm(K({},Te,{defaultTheme:r,themeId:t})),et=$e==null||(Ae=$e.components)==null||(Ae=Ae[b])==null?void 0:Ae.variants;return Pg({variants:et},K({},Te,{theme:$e}))}),N||W.push(d);const Ie=W.length-oe.length;if(Array.isArray(Z)&&Ie>0){const Te=new Array(Ie).fill("");ie=[...Z,...Te],ie.raw=[...Z.raw,...Te]}const _e=R(ie,...W);return p.muiName&&(_e.muiName=p.muiName),_e};return R.withConfig&&(ee.withConfig=R.withConfig),ee}}const mO=OE();function Qg(e,t){const r=K({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=K({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=s:!s||!Object.keys(s)?r[o]=d:(r[o]=K({},d),Object.keys(s).forEach(p=>{r[o][p]=Qg(s[p],d[p])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function gO(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:Qg(t.components[r].defaultProps,o)}function BE({props:e,name:t,defaultTheme:r,themeId:o}){let s=EE(r);return o&&(s=s[o]||s),gO({theme:s,name:t,props:e})}const Os=typeof window<"u"?L.useLayoutEffect:L.useEffect;function yO(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const vO=Object.freeze(Object.defineProperty({__proto__:null,default:yO},Symbol.toStringTag,{value:"Module"}));function _O(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,s)=>s<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function FE(e){if(e.type)return e;if(e.charAt(0)==="#")return FE(_O(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error($s(9,e));let o=e.substring(t+1,e.length-1),s;if(r==="color"){if(o=o.split(" "),s=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error($s(10,s))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:s}}const uc=e=>{const t=FE(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function kC(...e){return e.reduce((t,r)=>r==null?t:function(...s){t.apply(this,s),r.apply(this,s)},()=>{})}function j1(e,t){var r,o;return L.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function as(e){return e&&e.ownerDocument||document}function V1(e){return as(e).defaultView||window}function ey(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let EC=0;function xO(e){const[t,r]=L.useState(e),o=e||t;return L.useEffect(()=>{t==null&&(EC+=1,r(`mui-${EC}`))},[t]),o}const AC=Xg.useId;function ko(e){if(AC!==void 0){const t=AC();return e??t}return xO(e)}function ed({controlled:e,default:t,name:r,state:o="value"}){const{current:s}=L.useRef(e!==void 0),[d,p]=L.useState(t),c=s?e:d,b=L.useCallback(w=>{s||p(w)},[]);return[c,b]}function vl(e){const t=L.useRef(e);return Os(()=>{t.current=e}),L.useRef((...r)=>(0,t.current)(...r)).current}function on(...e){return L.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{ey(r,t)})},e)}const zC={};function bO(e,t){const r=L.useRef(zC);return r.current===zC&&(r.current=e(t)),r}const wO=[];function SO(e){L.useEffect(e,wO)}class gf{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new gf}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Km(){const e=bO(gf.create).current;return SO(e.disposeEffect),e}let _v=!0,tb=!1;const CO=new gf,IO={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function TO(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&IO[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function PO(e){e.metaKey||e.altKey||e.ctrlKey||(_v=!0)}function y_(){_v=!1}function kO(){this.visibilityState==="hidden"&&tb&&(_v=!0)}function EO(e){e.addEventListener("keydown",PO,!0),e.addEventListener("mousedown",y_,!0),e.addEventListener("pointerdown",y_,!0),e.addEventListener("touchstart",y_,!0),e.addEventListener("visibilitychange",kO,!0)}function AO(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return _v||TO(t)}function U1(){const e=L.useCallback(s=>{s!=null&&EO(s.ownerDocument)},[]),t=L.useRef(!1);function r(){return t.current?(tb=!0,CO.start(100,()=>{tb=!1}),t.current=!1,!0):!1}function o(s){return AO(s)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function zO(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const RO=e=>{const t=L.useRef({});return L.useEffect(()=>{t.current=e}),t.current},MO={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Fr(e,t,r=void 0){const o={};return Object.keys(e).forEach(s=>{o[s]=e[s].reduce((d,p)=>{if(p){const c=t(p);c!==""&&d.push(c),r&&r[p]&&d.push(r[p])}return d},[]).join(" ")}),o}const NE=L.createContext(null);function H1(){return L.useContext(NE)}const DO=typeof Symbol=="function"&&Symbol.for,LO=DO?Symbol.for("mui.nested"):"__THEME_NESTED__";function $O(e,t){return typeof t=="function"?t(e):K({},e,t)}function OO(e){const{children:t,theme:r}=e,o=H1(),s=L.useMemo(()=>{const d=o===null?r:$O(o,r);return d!=null&&(d[LO]=o!==null),d},[r,o]);return Y.jsx(NE.Provider,{value:s,children:t})}const BO=["value"],FO=L.createContext();function NO(e){let{value:t}=e,r=Jt(e,BO);return Y.jsx(FO.Provider,K({value:t??!0},r))}const jE=L.createContext(void 0);function jO({value:e,children:t}){return Y.jsx(jE.Provider,{value:e,children:t})}function VO(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const s=t.components[r];return s.defaultProps?Qg(s.defaultProps,o):!s.styleOverrides&&!s.variants?Qg(s,o):o}function UO({props:e,name:t}){const r=L.useContext(jE);return VO({props:e,name:t,theme:{components:r}})}const RC={};function MC(e,t,r,o=!1){return L.useMemo(()=>{const s=e&&t[e]||t;if(typeof r=="function"){const d=r(s),p=e?K({},t,{[e]:d}):d;return o?()=>p:p}return e?K({},t,{[e]:r}):K({},t,r)},[e,t,r,o])}function HO(e){const{children:t,theme:r,themeId:o}=e,s=kE(RC),d=H1()||RC,p=MC(o,s,r),c=MC(o,d,r,!0),b=p.direction==="rtl";return Y.jsx(OO,{theme:c,children:Y.jsx(pf.Provider,{value:p,children:Y.jsx(NO,{value:b,children:Y.jsx(jO,{value:p==null?void 0:p.components,children:t})})})})}const W1="mode",G1="color-scheme",VE="data-color-scheme";function WO(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:s=W1,colorSchemeStorageKey:d=G1,attribute:p=VE,colorSchemeNode:c="document.documentElement",nonce:b}=e||{};return Y.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?b:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${s}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${o}';
  }
  if (colorScheme) {
    ${c}.setAttribute('${p}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function DC(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function UE(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function GO(e){return UE(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function v_(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function qO(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:s=[],modeStorageKey:d=W1,colorSchemeStorageKey:p=G1,storageWindow:c=typeof window>"u"?void 0:window}=e,b=s.join(","),[w,T]=L.useState(()=>{const G=v_(d,t),O=v_(`${p}-light`,r),R=v_(`${p}-dark`,o);return{mode:G,systemMode:DC(G),lightColorScheme:O,darkColorScheme:R}}),k=GO(w),A=L.useCallback(G=>{T(O=>{if(G===O.mode)return O;const R=G??t;try{localStorage.setItem(d,R)}catch{}return K({},O,{mode:R,systemMode:DC(R)})})},[d,t]),$=L.useCallback(G=>{G?typeof G=="string"?G&&!b.includes(G)?console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`):T(O=>{const R=K({},O);return UE(O,M=>{try{localStorage.setItem(`${p}-${M}`,G)}catch{}M==="light"&&(R.lightColorScheme=G),M==="dark"&&(R.darkColorScheme=G)}),R}):T(O=>{const R=K({},O),M=G.light===null?r:G.light,ee=G.dark===null?o:G.dark;if(M)if(!b.includes(M))console.error(`\`${M}\` does not exist in \`theme.colorSchemes\`.`);else{R.lightColorScheme=M;try{localStorage.setItem(`${p}-light`,M)}catch{}}if(ee)if(!b.includes(ee))console.error(`\`${ee}\` does not exist in \`theme.colorSchemes\`.`);else{R.darkColorScheme=ee;try{localStorage.setItem(`${p}-dark`,ee)}catch{}}return R}):T(O=>{try{localStorage.setItem(`${p}-light`,r),localStorage.setItem(`${p}-dark`,o)}catch{}return K({},O,{lightColorScheme:r,darkColorScheme:o})})},[b,p,r,o]),V=L.useCallback(G=>{w.mode==="system"&&T(O=>{const R=G!=null&&G.matches?"dark":"light";return O.systemMode===R?O:K({},O,{systemMode:R})})},[w.mode]),N=L.useRef(V);return N.current=V,L.useEffect(()=>{const G=(...R)=>N.current(...R),O=window.matchMedia("(prefers-color-scheme: dark)");return O.addListener(G),G(O),()=>{O.removeListener(G)}},[]),L.useEffect(()=>{if(c){const G=O=>{const R=O.newValue;typeof O.key=="string"&&O.key.startsWith(p)&&(!R||b.match(R))&&(O.key.endsWith("light")&&$({light:R}),O.key.endsWith("dark")&&$({dark:R})),O.key===d&&(!R||["light","dark","system"].includes(R))&&A(R||t)};return c.addEventListener("storage",G),()=>{c.removeEventListener("storage",G)}}},[$,A,d,p,b,t,c]),K({},w,{colorScheme:k,setMode:A,setColorScheme:$})}const ZO=["colorSchemes","components","generateCssVars","cssVarPrefix"],KO="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function XO(e){const{themeId:t,theme:r={},attribute:o=VE,modeStorageKey:s=W1,colorSchemeStorageKey:d=G1,defaultMode:p="light",defaultColorScheme:c,disableTransitionOnChange:b=!1,resolveTheme:w,excludeVariablesFromRoot:T}=e;(!r.colorSchemes||typeof c=="string"&&!r.colorSchemes[c]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.light]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.dark])&&console.error(`MUI: \`${c}\` does not exist in \`theme.colorSchemes\`.`);const k=L.createContext(void 0),A=()=>{const O=L.useContext(k);if(!O)throw new Error($s(19));return O};function $(O){const{children:R,theme:M=r,modeStorageKey:ee=s,colorSchemeStorageKey:Z=d,attribute:oe=o,defaultMode:ie=p,defaultColorScheme:W=c,disableTransitionOnChange:Ie=b,storageWindow:_e=typeof window>"u"?void 0:window,documentNode:Te=typeof document>"u"?void 0:document,colorSchemeNode:Ae=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:$e=":root",disableNestedContext:et=!1,disableStyleSheetGeneration:Ve=!1}=O,ke=L.useRef(!1),Ne=H1(),Oe=L.useContext(k),Fe=!!Oe&&!et,nt=M[t],lt=nt||M,{colorSchemes:ut={},components:Dt={},generateCssVars:St=()=>({vars:{},css:{}}),cssVarPrefix:$t}=lt,Yt=Jt(lt,ZO),ct=Object.keys(ut),Je=typeof W=="string"?W:W.light,ft=typeof W=="string"?W:W.dark,{mode:_t,setMode:sr,systemMode:Qt,lightColorScheme:Pr,darkColorScheme:hr,colorScheme:Ht,setColorScheme:Ct}=qO({supportedColorSchemes:ct,defaultLightColorScheme:Je,defaultDarkColorScheme:ft,modeStorageKey:ee,colorSchemeStorageKey:Z,defaultMode:ie,storageWindow:_e});let ur=_t,Ot=Ht;Fe&&(ur=Oe.mode,Ot=Oe.colorScheme);const Cr=ur||(ie==="system"?p:ie),We=Ot||(Cr==="dark"?ft:Je),{css:br,vars:zr}=St(),Kt=K({},Yt,{components:Dt,colorSchemes:ut,cssVarPrefix:$t,vars:zr,getColorSchemeSelector:Gt=>`[${oe}="${Gt}"] &`}),rr={},Or={};Object.entries(ut).forEach(([Gt,cr])=>{const{css:Ir,vars:Be}=St(Gt);Kt.vars=pi(Kt.vars,Be),Gt===We&&(Object.keys(cr).forEach(bt=>{cr[bt]&&typeof cr[bt]=="object"?Kt[bt]=K({},Kt[bt],cr[bt]):Kt[bt]=cr[bt]}),Kt.palette&&(Kt.palette.colorScheme=Gt));const xt=typeof W=="string"?W:ie==="dark"?W.dark:W.light;if(Gt===xt){if(T){const bt={};T($t).forEach(Ce=>{bt[Ce]=Ir[Ce],delete Ir[Ce]}),rr[`[${oe}="${Gt}"]`]=bt}rr[`${$e}, [${oe}="${Gt}"]`]=Ir}else Or[`${$e===":root"?"":$e}[${oe}="${Gt}"]`]=Ir}),Kt.vars=pi(Kt.vars,zr),L.useEffect(()=>{Ot&&Ae&&Ae.setAttribute(oe,Ot)},[Ot,oe,Ae]),L.useEffect(()=>{let Gt;if(Ie&&ke.current&&Te){const cr=Te.createElement("style");cr.appendChild(Te.createTextNode(KO)),Te.head.appendChild(cr),window.getComputedStyle(Te.body),Gt=setTimeout(()=>{Te.head.removeChild(cr)},1)}return()=>{clearTimeout(Gt)}},[Ot,Ie,Te]),L.useEffect(()=>(ke.current=!0,()=>{ke.current=!1}),[]);const Rr=L.useMemo(()=>({allColorSchemes:ct,colorScheme:Ot,darkColorScheme:hr,lightColorScheme:Pr,mode:ur,setColorScheme:Ct,setMode:sr,systemMode:Qt}),[ct,Ot,hr,Pr,ur,Ct,sr,Qt]);let fr=!0;(Ve||Fe&&(Ne==null?void 0:Ne.cssVarPrefix)===$t)&&(fr=!1);const dr=Y.jsxs(L.Fragment,{children:[fr&&Y.jsxs(L.Fragment,{children:[Y.jsx(xp,{styles:{[$e]:br}}),Y.jsx(xp,{styles:rr}),Y.jsx(xp,{styles:Or})]}),Y.jsx(HO,{themeId:nt?t:void 0,theme:w?w(Kt):Kt,children:R})]});return Fe?dr:Y.jsx(k.Provider,{value:Rr,children:dr})}const V=typeof c=="string"?c:c.light,N=typeof c=="string"?c:c.dark;return{CssVarsProvider:$,useColorScheme:A,getInitColorSchemeScript:O=>WO(K({attribute:o,colorSchemeStorageKey:d,defaultMode:p,defaultLightColorScheme:V,defaultDarkColorScheme:N,modeStorageKey:s},O))}}function q1(e=""){function t(...o){if(!o.length)return"";const s=o[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...o.slice(1))})`:`, ${s}`}return(o,...s)=>`var(--${e?`${e}-`:""}${o}${t(...s)})`}const LC=(e,t,r,o=[])=>{let s=e;t.forEach((d,p)=>{p===t.length-1?Array.isArray(s)?s[Number(d)]=r:s&&typeof s=="object"&&(s[d]=r):s&&typeof s=="object"&&(s[d]||(s[d]=o.includes(d)?[]:{}),s=s[d])})},JO=(e,t,r)=>{function o(s,d=[],p=[]){Object.entries(s).forEach(([c,b])=>{(!r||r&&!r([...d,c]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...d,c],Array.isArray(b)?[...p,c]:p):t([...d,c],b,p))})}o(e)},YO=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function __(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t||{},s={},d={},p={};return JO(e,(c,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(c,b))){const T=`--${r?`${r}-`:""}${c.join("-")}`;Object.assign(s,{[T]:YO(c,b)}),LC(d,c,`var(${T})`,w),LC(p,c,`var(${T}, ${b})`,w)}},c=>c[0]==="vars"),{css:s,vars:d,varsWithDefaults:p}}function Fp(e){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function QO(e,t){if(Fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t);if(Fp(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function e4(e){var t=QO(e,"string");return Fp(t)=="symbol"?t:t+""}const t4=["colorSchemes","components","defaultColorScheme"];function r4(e,t){const{colorSchemes:r={},defaultColorScheme:o="light"}=e,s=Jt(e,t4),{vars:d,css:p,varsWithDefaults:c}=__(s,t);let b=c;const w={},{[o]:T}=r,k=Jt(r,[o].map(e4));if(Object.entries(k||{}).forEach(([$,V])=>{const{vars:N,css:G,varsWithDefaults:O}=__(V,t);b=pi(b,O),w[$]={css:G,vars:N}}),T){const{css:$,vars:V,varsWithDefaults:N}=__(T,t);b=pi(b,N),w[o]={css:$,vars:V}}return{vars:b,generateCssVars:$=>{var V;if(!$){var N;const O=K({},p);return{css:O,vars:d,selector:(t==null||(N=t.getSelector)==null?void 0:N.call(t,$,O))||":root"}}const G=K({},w[$].css);return{css:G,vars:w[$].vars,selector:(t==null||(V=t.getSelector)==null?void 0:V.call(t,$,G))||":root"}}}}const n4=["component","direction","spacing","divider","children","className","useFlexGap"],i4=mf(),o4=mO("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function a4(e){return BE({props:e,name:"MuiStack",defaultTheme:i4})}function s4(e,t){const r=L.Children.toArray(e).filter(Boolean);return r.reduce((o,s,d)=>(o.push(s),d<r.length-1&&o.push(L.cloneElement(t,{key:`separator-${d}`})),o),[])}const l4=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],c4=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},Na({theme:t},m_({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=L1(t),s=Object.keys(t.breakpoints.values).reduce((b,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(b[w]=!0),b),{}),d=m_({values:e.direction,base:s}),p=m_({values:e.spacing,base:s});typeof d=="object"&&Object.keys(d).forEach((b,w,T)=>{if(!d[b]){const A=w>0?d[T[w-1]]:"column";d[b]=A}}),r=pi(r,Na({theme:t},p,(b,w)=>e.useFlexGap?{gap:Pc(o,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${l4(w?d[w]:e.direction)}`]:Pc(o,b)}}))}return r=o3(t.breakpoints,r),r};function u4(e={}){const{createStyledComponent:t=o4,useThemeProps:r=a4,componentName:o="MuiStack"}=e,s=()=>Fr({root:["root"]},b=>lv(o,b),{}),d=t(c4);return L.forwardRef(function(b,w){const T=r(b),k=B1(T),{component:A="div",direction:$="column",spacing:V=0,divider:N,children:G,className:O,useFlexGap:R=!1}=k,M=Jt(k,n4),ee={direction:$,spacing:V,useFlexGap:R},Z=s();return Y.jsx(d,K({as:A,ownerState:ee,ref:w,className:si(Z.root,O)},M,{children:N?s4(G,N):G}))})}const d4=K({},Ad,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function h4(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const qr=(e,t)=>lv(e,t,"Mui"),Nr=(e,t)=>RE(e,t,"Mui"),p4=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),$C=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},OC=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([s,d])=>{if(s.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const p=r?r(s):d;s.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),s.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),s.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),$C(o,s,p)}}),o},Gi=(e,t)=>{let r={};if(t){const{getCssVar:o,palette:s}=t;Object.entries(s).forEach(d=>{const[p,c]=d;p4(c)&&typeof c=="object"&&(r=K({},r,{[p]:OC(e,c,b=>`var(--variant-${b}, ${o(`palette-${p}-${b}`,s[p][b])})`)}))})}return r.context=OC(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},f4=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],m4=["colorSchemes"],g4=(e="joy")=>q1(e);function HE(e){var t,r,o,s,d,p,c,b,w,T;const k=e||{},{cssVarPrefix:A="joy",breakpoints:$,spacing:V,components:N,variants:G,shouldSkipGeneratingVar:O=h4}=k,R=Jt(k,f4),M=g4(A),ee={primary:qh.blue,neutral:qh.grey,danger:qh.red,success:qh.green,warning:qh.yellow,common:{white:"#FFF",black:"#000"}},Z=Je=>{var ft;const _t=Je.split("-"),sr=_t[1],Qt=_t[2];return M(Je,(ft=ee[sr])==null?void 0:ft[Qt])},oe=Je=>({plainColor:Z(`palette-${Je}-500`),plainHoverBg:Z(`palette-${Je}-100`),plainActiveBg:Z(`palette-${Je}-200`),plainDisabledColor:Z("palette-neutral-400"),outlinedColor:Z(`palette-${Je}-500`),outlinedBorder:Z(`palette-${Je}-300`),outlinedHoverBg:Z(`palette-${Je}-100`),outlinedActiveBg:Z(`palette-${Je}-200`),outlinedDisabledColor:Z("palette-neutral-400"),outlinedDisabledBorder:Z("palette-neutral-200"),softColor:Z(`palette-${Je}-700`),softBg:Z(`palette-${Je}-100`),softHoverBg:Z(`palette-${Je}-200`),softActiveColor:Z(`palette-${Je}-800`),softActiveBg:Z(`palette-${Je}-300`),softDisabledColor:Z("palette-neutral-400"),softDisabledBg:Z("palette-neutral-50"),solidColor:Z("palette-common-white"),solidBg:Z(`palette-${Je}-500`),solidHoverBg:Z(`palette-${Je}-600`),solidActiveBg:Z(`palette-${Je}-700`),solidDisabledColor:Z("palette-neutral-400"),solidDisabledBg:Z("palette-neutral-100")}),ie=Je=>({plainColor:Z(`palette-${Je}-300`),plainHoverBg:Z(`palette-${Je}-800`),plainActiveBg:Z(`palette-${Je}-700`),plainDisabledColor:Z("palette-neutral-500"),outlinedColor:Z(`palette-${Je}-200`),outlinedBorder:Z(`palette-${Je}-700`),outlinedHoverBg:Z(`palette-${Je}-800`),outlinedActiveBg:Z(`palette-${Je}-700`),outlinedDisabledColor:Z("palette-neutral-500"),outlinedDisabledBorder:Z("palette-neutral-800"),softColor:Z(`palette-${Je}-200`),softBg:Z(`palette-${Je}-800`),softHoverBg:Z(`palette-${Je}-700`),softActiveColor:Z(`palette-${Je}-100`),softActiveBg:Z(`palette-${Je}-600`),softDisabledColor:Z("palette-neutral-500"),softDisabledBg:Z("palette-neutral-800"),solidColor:Z("palette-common-white"),solidBg:Z(`palette-${Je}-500`),solidHoverBg:Z(`palette-${Je}-600`),solidActiveBg:Z(`palette-${Je}-700`),solidDisabledColor:Z("palette-neutral-500"),solidDisabledBg:Z("palette-neutral-800")}),W={palette:{mode:"light",primary:K({},ee.primary,oe("primary")),neutral:K({},ee.neutral,oe("neutral"),{plainColor:Z("palette-neutral-700"),plainHoverColor:Z("palette-neutral-900"),outlinedColor:Z("palette-neutral-700")}),danger:K({},ee.danger,oe("danger")),success:K({},ee.success,oe("success")),warning:K({},ee.warning,oe("warning")),common:{white:"#FFF",black:"#000"},text:{primary:Z("palette-neutral-800"),secondary:Z("palette-neutral-700"),tertiary:Z("palette-neutral-600"),icon:Z("palette-neutral-500")},background:{body:Z("palette-common-white"),surface:Z("palette-neutral-50"),popup:Z("palette-common-white"),level1:Z("palette-neutral-100"),level2:Z("palette-neutral-200"),level3:Z("palette-neutral-300"),tooltip:Z("palette-neutral-500"),backdrop:`rgba(${M("palette-neutral-darkChannel",uc(ee.neutral[900]))} / 0.25)`},divider:`rgba(${M("palette-neutral-mainChannel",uc(ee.neutral[500]))} / 0.2)`,focusVisible:Z("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},Ie={palette:{mode:"dark",primary:K({},ee.primary,ie("primary")),neutral:K({},ee.neutral,ie("neutral"),{plainColor:Z("palette-neutral-300"),plainHoverColor:Z("palette-neutral-300")}),danger:K({},ee.danger,ie("danger")),success:K({},ee.success,ie("success")),warning:K({},ee.warning,ie("warning")),common:{white:"#FFF",black:"#000"},text:{primary:Z("palette-neutral-100"),secondary:Z("palette-neutral-300"),tertiary:Z("palette-neutral-400"),icon:Z("palette-neutral-400")},background:{body:Z("palette-common-black"),surface:Z("palette-neutral-900"),popup:Z("palette-common-black"),level1:Z("palette-neutral-800"),level2:Z("palette-neutral-700"),level3:Z("palette-neutral-600"),tooltip:Z("palette-neutral-600"),backdrop:`rgba(${M("palette-neutral-darkChannel",uc(ee.neutral[50]))} / 0.25)`},divider:`rgba(${M("palette-neutral-mainChannel",uc(ee.neutral[500]))} / 0.16)`,focusVisible:Z("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},_e='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Te=K({body:`"Inter", ${M(`fontFamily-fallback, ${_e}`)}`,display:`"Inter", ${M(`fontFamily-fallback, ${_e}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:_e},R.fontFamily),Ae=K({sm:300,md:500,lg:600,xl:700},R.fontWeight),$e=K({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},R.fontSize),et=K({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},R.lineHeight),Ve=(t=(r=R.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:W.shadowRing,ke=(o=(s=R.colorSchemes)==null||(s=s.light)==null?void 0:s.shadowChannel)!=null?o:W.shadowChannel,Ne=(d=(p=R.colorSchemes)==null||(p=p.light)==null?void 0:p.shadowOpacity)!=null?d:W.shadowOpacity,Oe={colorSchemes:{light:W,dark:Ie},fontSize:$e,fontFamily:Te,fontWeight:Ae,focus:{thickness:"2px",selector:`&.${qr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${M("focus-thickness",(c=(b=R.focus)==null?void 0:b.thickness)!=null?c:"2px")})`,outline:`${M("focus-thickness",(w=(T=R.focus)==null?void 0:T.thickness)!=null?w:"2px")} solid ${M("palette-focusVisible",ee.primary[500])}`}},lineHeight:et,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${M("shadowRing",Ve)}, 0px 1px 2px 0px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)})`,sm:`${M("shadowRing",Ve)}, 0px 1px 2px 0px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)}), 0px 2px 4px 0px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)})`,md:`${M("shadowRing",Ve)}, 0px 2px 8px -2px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)}), 0px 6px 12px -2px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)})`,lg:`${M("shadowRing",Ve)}, 0px 2px 8px -2px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)}), 0px 12px 16px -4px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)})`,xl:`${M("shadowRing",Ve)}, 0px 2px 8px -2px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)}), 0px 20px 24px -4px rgba(${M("shadowChannel",ke)} / ${M("shadowOpacity",Ne)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:M(`fontFamily-display, ${Te.display}`),fontWeight:M(`fontWeight-xl, ${Ae.xl}`),fontSize:M(`fontSize-xl4, ${$e.xl4}`),lineHeight:M(`lineHeight-xs, ${et.xs}`),letterSpacing:"-0.025em",color:M(`palette-text-primary, ${W.palette.text.primary}`)},h2:{fontFamily:M(`fontFamily-display, ${Te.display}`),fontWeight:M(`fontWeight-xl, ${Ae.xl}`),fontSize:M(`fontSize-xl3, ${$e.xl3}`),lineHeight:M(`lineHeight-xs, ${et.xs}`),letterSpacing:"-0.025em",color:M(`palette-text-primary, ${W.palette.text.primary}`)},h3:{fontFamily:M(`fontFamily-display, ${Te.display}`),fontWeight:M(`fontWeight-lg, ${Ae.lg}`),fontSize:M(`fontSize-xl2, ${$e.xl2}`),lineHeight:M(`lineHeight-xs, ${et.xs}`),letterSpacing:"-0.025em",color:M(`palette-text-primary, ${W.palette.text.primary}`)},h4:{fontFamily:M(`fontFamily-display, ${Te.display}`),fontWeight:M(`fontWeight-lg, ${Ae.lg}`),fontSize:M(`fontSize-xl, ${$e.xl}`),lineHeight:M(`lineHeight-md, ${et.md}`),letterSpacing:"-0.025em",color:M(`palette-text-primary, ${W.palette.text.primary}`)},"title-lg":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontWeight:M(`fontWeight-lg, ${Ae.lg}`),fontSize:M(`fontSize-lg, ${$e.lg}`),lineHeight:M(`lineHeight-xs, ${et.xs}`),color:M(`palette-text-primary, ${W.palette.text.primary}`)},"title-md":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontWeight:M(`fontWeight-md, ${Ae.md}`),fontSize:M(`fontSize-md, ${$e.md}`),lineHeight:M(`lineHeight-md, ${et.md}`),color:M(`palette-text-primary, ${W.palette.text.primary}`)},"title-sm":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontWeight:M(`fontWeight-md, ${Ae.md}`),fontSize:M(`fontSize-sm, ${$e.sm}`),lineHeight:M(`lineHeight-sm, ${et.sm}`),color:M(`palette-text-primary, ${W.palette.text.primary}`)},"body-lg":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontSize:M(`fontSize-lg, ${$e.lg}`),lineHeight:M(`lineHeight-md, ${et.md}`),color:M(`palette-text-secondary, ${W.palette.text.secondary}`)},"body-md":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontSize:M(`fontSize-md, ${$e.md}`),lineHeight:M(`lineHeight-md, ${et.md}`),color:M(`palette-text-secondary, ${W.palette.text.secondary}`)},"body-sm":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontSize:M(`fontSize-sm, ${$e.sm}`),lineHeight:M(`lineHeight-md, ${et.md}`),color:M(`palette-text-tertiary, ${W.palette.text.tertiary}`)},"body-xs":{fontFamily:M(`fontFamily-body, ${Te.body}`),fontWeight:M(`fontWeight-md, ${Ae.md}`),fontSize:M(`fontSize-xs, ${$e.xs}`),lineHeight:M(`lineHeight-md, ${et.md}`),color:M(`palette-text-tertiary, ${W.palette.text.tertiary}`)}}},Fe=R?pi(Oe,R):Oe,{colorSchemes:nt}=Fe,lt=Jt(Fe,m4),ut=K({colorSchemes:nt},lt,{breakpoints:z1($??{}),components:pi({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:Je,theme:ft})=>{var _t;const sr=Je.instanceFontSize;return K({margin:"var(--Icon-margin)"},Je.fontSize&&Je.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${ft.vars.fontSize[Je.fontSize]})`},!Je.htmlColor&&K({color:`var(--Icon-color, ${ut.vars.palette.text.icon})`},Je.color&&Je.color!=="inherit"&&ft.vars.palette[Je.color]&&{color:`rgba(${(_t=ft.vars.palette[Je.color])==null?void 0:_t.mainChannel} / 1)`}),sr&&sr!=="inherit"&&{"--Icon-fontSize":ft.vars.fontSize[sr]})}}}},N),cssVarPrefix:A,getCssVar:M,spacing:TE(V)});function Dt(Je,ft){Object.keys(ft).forEach(_t=>{const sr={main:"500",light:"200",dark:"700"};Je==="dark"&&(sr.main=400),!ft[_t].mainChannel&&ft[_t][sr.main]&&(ft[_t].mainChannel=uc(ft[_t][sr.main])),!ft[_t].lightChannel&&ft[_t][sr.light]&&(ft[_t].lightChannel=uc(ft[_t][sr.light])),!ft[_t].darkChannel&&ft[_t][sr.dark]&&(ft[_t].darkChannel=uc(ft[_t][sr.dark]))})}Object.entries(ut.colorSchemes).forEach(([Je,ft])=>{Dt(Je,ft.palette)});const St={prefix:A,shouldSkipGeneratingVar:O},{vars:$t,generateCssVars:Yt}=r4(K({colorSchemes:nt},lt),St);ut.vars=$t,ut.generateCssVars=Yt,ut.unstable_sxConfig=K({},d4,e==null?void 0:e.unstable_sxConfig),ut.unstable_sx=function(ft){return zd({sx:ft,theme:this})},ut.getColorSchemeSelector=Je=>Je==="light"?"&":`&[data-joy-color-scheme="${Je}"], [data-joy-color-scheme="${Je}"] &`;const ct={getCssVar:M,palette:ut.colorSchemes.light.palette};return ut.variants=pi({plain:Gi("plain",ct),plainHover:Gi("plainHover",ct),plainActive:Gi("plainActive",ct),plainDisabled:Gi("plainDisabled",ct),outlined:Gi("outlined",ct),outlinedHover:Gi("outlinedHover",ct),outlinedActive:Gi("outlinedActive",ct),outlinedDisabled:Gi("outlinedDisabled",ct),soft:Gi("soft",ct),softHover:Gi("softHover",ct),softActive:Gi("softActive",ct),softDisabled:Gi("softDisabled",ct),solid:Gi("solid",ct),solidHover:Gi("solidHover",ct),solidActive:Gi("solidActive",ct),solidDisabled:Gi("solidDisabled",ct)},G),ut.palette=K({},ut.colorSchemes.light.palette,{colorScheme:"light"}),ut.shouldSkipGeneratingVar=O,ut.applyStyles=O1,ut}const yf=HE(),Kh={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:y4,useColorScheme:Z1,getInitColorSchemeScript:pY}=XO({themeId:Uy,theme:yf,attribute:Kh.attribute,modeStorageKey:Kh.modeStorageKey,colorSchemeStorageKey:Kh.colorSchemeStorageKey,defaultColorScheme:{light:Kh.defaultLightColorScheme,dark:Kh.defaultDarkColorScheme}}),mt=OE({defaultTheme:yf,themeId:Uy});function Zr({props:e,name:t}){return BE({props:e,name:t,defaultTheme:K({},yf,{components:{}}),themeId:Uy})}function v4(e){return Y.jsx(X3,K({},e,{defaultTheme:yf,themeId:Uy}))}function _4(e){return typeof e=="string"}function WE(e,t,r){return e===void 0||_4(e)?t:K({},t,{ownerState:K({},t.ownerState,r)})}function BC(e,t,r=(o,s)=>o===s){return e.length===t.length&&e.every((o,s)=>r(o,t[s]))}const x4={disableDefaultClasses:!1},b4=L.createContext(x4);function w4(e){const{disableDefaultClasses:t}=L.useContext(b4);return r=>t?"":e(r)}function Di(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function GE(e,t,r){return typeof e=="function"?e(t,r):e}function S4(e){const{rootElementName:t="",componentName:r}=e,[o,s]=L.useState(t.toUpperCase()),d=L.useCallback(p=>{var c;s((c=p==null?void 0:p.tagName)!=null?c:"")},[]);return[o,d]}function FC(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function qE(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:s,className:d}=e;if(!t){const $=si(r==null?void 0:r.className,d,s==null?void 0:s.className,o==null?void 0:o.className),V=K({},r==null?void 0:r.style,s==null?void 0:s.style,o==null?void 0:o.style),N=K({},r,s,o);return $.length>0&&(N.className=$),Object.keys(V).length>0&&(N.style=V),{props:N,internalRef:void 0}}const p=Di(K({},s,o)),c=FC(o),b=FC(s),w=t(p),T=si(w==null?void 0:w.className,r==null?void 0:r.className,d,s==null?void 0:s.className,o==null?void 0:o.className),k=K({},w==null?void 0:w.style,r==null?void 0:r.style,s==null?void 0:s.style,o==null?void 0:o.style),A=K({},w,r,b,c);return T.length>0&&(A.className=T),Object.keys(k).length>0&&(A.style=k),{props:A,internalRef:w.ref}}const C4=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function ZE(e){var t;const{elementType:r,externalSlotProps:o,ownerState:s,skipResolvingSlotProps:d=!1}=e,p=Jt(e,C4),c=d?{}:GE(o,s),{props:b,internalRef:w}=qE(K({},p,{externalSlotProps:c})),T=on(w,c==null?void 0:c.ref,(t=e.additionalProps)==null?void 0:t.ref);return WE(r,K({},b,{ref:T}),s)}const KE="base";function I4(e){return`${KE}--${e}`}function T4(e,t){return`${KE}-${e}-${t}`}function XE(e,t){const r=zE[t];return r?I4(r):T4(e,t)}function P4(e,t){const r={};return t.forEach(o=>{r[o]=XE(e,o)}),r}function hs(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:s,tabIndex:d,to:p,type:c,rootElementName:b}=e,w=L.useRef(),[T,k]=L.useState(!1),{isFocusVisibleRef:A,onFocus:$,onBlur:V,ref:N}=U1(),[G,O]=L.useState(!1);t&&!r&&G&&O(!1),L.useEffect(()=>{A.current=G},[G,A]);const[R,M]=S4({rootElementName:b??(o||p?"a":void 0),componentName:"Button"}),ee=Ve=>ke=>{var Ne;G&&ke.preventDefault(),(Ne=Ve.onMouseLeave)==null||Ne.call(Ve,ke)},Z=Ve=>ke=>{var Ne;V(ke),A.current===!1&&O(!1),(Ne=Ve.onBlur)==null||Ne.call(Ve,ke)},oe=Ve=>ke=>{var Ne;if(w.current||(w.current=ke.currentTarget),$(ke),A.current===!0){var Oe;O(!0),(Oe=Ve.onFocusVisible)==null||Oe.call(Ve,ke)}(Ne=Ve.onFocus)==null||Ne.call(Ve,ke)},ie=()=>{const Ve=w.current;return R==="BUTTON"||R==="INPUT"&&["button","submit","reset"].includes(Ve==null?void 0:Ve.type)||R==="A"&&(Ve==null?void 0:Ve.href)},W=Ve=>ke=>{if(!t){var Ne;(Ne=Ve.onClick)==null||Ne.call(Ve,ke)}},Ie=Ve=>ke=>{var Ne;t||(k(!0),document.addEventListener("mouseup",()=>{k(!1)},{once:!0})),(Ne=Ve.onMouseDown)==null||Ne.call(Ve,ke)},_e=Ve=>ke=>{var Ne;if((Ne=Ve.onKeyDown)==null||Ne.call(Ve,ke),!ke.defaultMuiPrevented&&(ke.target===ke.currentTarget&&!ie()&&ke.key===" "&&ke.preventDefault(),ke.target===ke.currentTarget&&ke.key===" "&&!t&&k(!0),ke.target===ke.currentTarget&&!ie()&&ke.key==="Enter"&&!t)){var Oe;(Oe=Ve.onClick)==null||Oe.call(Ve,ke),ke.preventDefault()}},Te=Ve=>ke=>{var Ne;if(ke.target===ke.currentTarget&&k(!1),(Ne=Ve.onKeyUp)==null||Ne.call(Ve,ke),ke.target===ke.currentTarget&&!ie()&&!t&&ke.key===" "&&!ke.defaultMuiPrevented){var Oe;(Oe=Ve.onClick)==null||Oe.call(Ve,ke)}},Ae=on(M,s,N,w),$e={};return d!==void 0&&($e.tabIndex=d),R==="BUTTON"?($e.type=c??"button",r?$e["aria-disabled"]=t:$e.disabled=t):R==="INPUT"?c&&["button","submit","reset"].includes(c)&&(r?$e["aria-disabled"]=t:$e.disabled=t):R!==""&&(!o&&!p&&($e.role="button",$e.tabIndex=d??0),t&&($e["aria-disabled"]=t,$e.tabIndex=r?d??0:-1)),{getRootProps:(Ve={})=>{const ke=K({},Di(e),Di(Ve)),Ne=K({type:c},ke,$e,Ve,{onBlur:Z(ke),onClick:W(ke),onFocus:oe(ke),onKeyDown:_e(ke),onKeyUp:Te(ke),onMouseDown:Ie(ke),onMouseLeave:ee(ke),ref:Ae});return delete Ne.onFocusVisible,Ne},focusVisible:G,setFocusVisible:O,active:T,rootRef:Ae}}const xv=L.createContext(null);function k4(e,t){return e===t}const x_={},NC=()=>{};function rb(e,t){const r=K({},e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(r[o]=t[o])}),r}function E4(e){const{nextState:t,initialState:r,stateComparers:o,onStateChange:s,controlledProps:d,lastActionRef:p}=e,c=L.useRef(r);L.useEffect(()=>{if(p.current===null)return;const b=rb(c.current,d);Object.keys(t).forEach(w=>{var T;const k=(T=o[w])!=null?T:k4,A=t[w],$=b[w];if($==null&&A!=null||$!=null&&A==null||$!=null&&A!=null&&!k(A,$)){var V,N;s==null||s((V=p.current.event)!=null?V:null,w,A,(N=p.current.type)!=null?N:"",t)}}),c.current=t,p.current=null},[c,t,p,s,o,d])}function JE(e){const t=L.useRef(null),{reducer:r,initialState:o,controlledProps:s=x_,stateComparers:d=x_,onStateChange:p=NC,actionContext:c,componentName:b=""}=e;L.useRef(s);const w=L.useCallback(($,V)=>{t.current=V;const N=rb($,s);return r(N,V)},[s,r]),[T,k]=L.useReducer(w,o),A=L.useCallback($=>{k(K({},$,{context:c}))},[c]);return E4({nextState:T,initialState:o,stateComparers:d??x_,onStateChange:p??NC,controlledProps:s,lastActionRef:t}),[rb(T,s),A]}const Oa={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function A4(e,t){switch(t.type){case Oa.blur:return{open:!1,changeReason:t.event};case Oa.escapeKeyDown:return{open:!1,changeReason:t.event};case Oa.toggle:return{open:!e.open,changeReason:t.event};case Oa.open:return{open:!0,changeReason:t.event};case Oa.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function z4(e={}){const{defaultOpen:t,onOpenChange:r,open:o,componentName:s="useDropdown"}=e,[d,p]=L.useState(""),[c,b]=L.useState(null),w=L.useRef(null),T=L.useCallback((N,G,O,R)=>{G==="open"&&(r==null||r(N,O)),w.current=R},[r]),k=L.useMemo(()=>o!==void 0?{open:o}:{},[o]),[A,$]=JE({controlledProps:k,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:T,reducer:A4,componentName:s});return L.useEffect(()=>{!A.open&&w.current!==null&&w.current!==Oa.blur&&(c==null||c.focus())},[A.open,c]),{contextValue:{state:A,dispatch:$,popupId:d,registerPopup:p,registerTrigger:b,triggerElement:c},open:A.open}}function R4(e){const{children:t,open:r,defaultOpen:o,onOpenChange:s}=e,{contextValue:d}=z4({defaultOpen:o,onOpenChange:s,open:r});return Y.jsx(xv.Provider,{value:d,children:t})}const M4=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function D4(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function L4(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function $4(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||L4(e))}function O4(e){const t=[],r=[];return Array.from(e.querySelectorAll(M4)).forEach((o,s)=>{const d=D4(o);d===-1||!$4(o)||(d===0?t.push(o):r.push({documentOrder:s,tabIndex:d,node:o}))}),r.sort((o,s)=>o.tabIndex===s.tabIndex?o.documentOrder-s.documentOrder:o.tabIndex-s.tabIndex).map(o=>o.node).concat(t)}function B4(){return!0}function F4(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:o=!1,disableRestoreFocus:s=!1,getTabbable:d=O4,isEnabled:p=B4,open:c}=e,b=L.useRef(!1),w=L.useRef(null),T=L.useRef(null),k=L.useRef(null),A=L.useRef(null),$=L.useRef(!1),V=L.useRef(null),N=on(t.ref,V),G=L.useRef(null);L.useEffect(()=>{!c||!V.current||($.current=!r)},[r,c]),L.useEffect(()=>{if(!c||!V.current)return;const M=as(V.current);return V.current.contains(M.activeElement)||(V.current.hasAttribute("tabIndex")||V.current.setAttribute("tabIndex","-1"),$.current&&V.current.focus()),()=>{s||(k.current&&k.current.focus&&(b.current=!0,k.current.focus()),k.current=null)}},[c]),L.useEffect(()=>{if(!c||!V.current)return;const M=as(V.current),ee=ie=>{G.current=ie,!(o||!p()||ie.key!=="Tab")&&M.activeElement===V.current&&ie.shiftKey&&(b.current=!0,T.current&&T.current.focus())},Z=()=>{const ie=V.current;if(ie===null)return;if(!M.hasFocus()||!p()||b.current){b.current=!1;return}if(ie.contains(M.activeElement)||o&&M.activeElement!==w.current&&M.activeElement!==T.current)return;if(M.activeElement!==A.current)A.current=null;else if(A.current!==null)return;if(!$.current)return;let W=[];if((M.activeElement===w.current||M.activeElement===T.current)&&(W=d(V.current)),W.length>0){var Ie,_e;const Te=!!((Ie=G.current)!=null&&Ie.shiftKey&&((_e=G.current)==null?void 0:_e.key)==="Tab"),Ae=W[0],$e=W[W.length-1];typeof Ae!="string"&&typeof $e!="string"&&(Te?$e.focus():Ae.focus())}else ie.focus()};M.addEventListener("focusin",Z),M.addEventListener("keydown",ee,!0);const oe=setInterval(()=>{M.activeElement&&M.activeElement.tagName==="BODY"&&Z()},50);return()=>{clearInterval(oe),M.removeEventListener("focusin",Z),M.removeEventListener("keydown",ee,!0)}},[r,o,s,p,c,d]);const O=M=>{k.current===null&&(k.current=M.relatedTarget),$.current=!0,A.current=M.target;const ee=t.props.onFocus;ee&&ee(M)},R=M=>{k.current===null&&(k.current=M.relatedTarget),$.current=!0};return Y.jsxs(L.Fragment,{children:[Y.jsx("div",{tabIndex:c?0:-1,onFocus:R,ref:w,"data-testid":"sentinelStart"}),L.cloneElement(t,{ref:N,onFocus:O}),Y.jsx("div",{tabIndex:c?0:-1,onFocus:R,ref:T,"data-testid":"sentinelEnd"})]})}const N4=L.createContext(void 0);function j4(){return L.useContext(N4)}function V4(e={}){const{defaultValue:t,disabled:r=!1,error:o=!1,onBlur:s,onChange:d,onFocus:p,required:c=!1,value:b,inputRef:w}=e,T=j4();let k,A,$,V,N;if(T){var G,O,R;k=void 0,A=(G=T.disabled)!=null?G:!1,$=(O=T.error)!=null?O:!1,V=(R=T.required)!=null?R:!1,N=T.value}else k=t,A=r,$=o,V=c,N=b;const{current:M}=L.useRef(N!=null),ee=L.useCallback(Ve=>{},[]),Z=L.useRef(null),oe=on(Z,w,ee),[ie,W]=L.useState(!1);L.useEffect(()=>{!T&&A&&ie&&(W(!1),s==null||s())},[T,A,ie,s]);const Ie=Ve=>ke=>{var Ne;if(T!=null&&T.disabled){ke.stopPropagation();return}if((Ne=Ve.onFocus)==null||Ne.call(Ve,ke),T&&T.onFocus){var Oe;T==null||(Oe=T.onFocus)==null||Oe.call(T)}else W(!0)},_e=Ve=>ke=>{var Ne;(Ne=Ve.onBlur)==null||Ne.call(Ve,ke),T&&T.onBlur?T.onBlur():W(!1)},Te=Ve=>(ke,...Ne)=>{var Oe,Fe;if(!M&&(ke.target||Z.current)==null)throw new Error($s(17));T==null||(Oe=T.onChange)==null||Oe.call(T,ke),(Fe=Ve.onChange)==null||Fe.call(Ve,ke,...Ne)},Ae=Ve=>ke=>{var Ne;Z.current&&ke.currentTarget===ke.target&&Z.current.focus(),(Ne=Ve.onClick)==null||Ne.call(Ve,ke)};return{disabled:A,error:$,focused:ie,formControlContext:T,getInputProps:(Ve={})=>{const Ne=K({},{onBlur:s,onChange:d,onFocus:p},Di(Ve)),Oe=K({},Ne,{onBlur:_e(Ne),onChange:Te(Ne),onFocus:Ie(Ne)});return K({},Oe,{"aria-invalid":$||void 0,defaultValue:k,value:N,required:V,disabled:A},Ve,{ref:oe},Oe)},getRootProps:(Ve={})=>{const ke=Di(e,["onBlur","onChange","onFocus"]),Ne=K({},ke,Di(Ve));return K({},Ve,Ne,{onClick:Ae(Ne)})},inputRef:oe,required:V,value:N}}const pn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function U4(e,t,r,o,s,d){if(r.length===0||!o&&r.every((c,b)=>s(c,b)))return-1;let p=e;for(;;){if(!d&&t==="next"&&p===r.length||!d&&t==="previous"&&p===-1)return-1;if(o?!1:s(r[p],p))p+=t==="next"?1:-1,d&&(p=(p+r.length)%r.length);else return p}}function _i(e,t,r){var o;const{items:s,isItemDisabled:d,disableListWrap:p,disabledItemsFocusable:c,itemComparer:b,focusManagement:w}=r,T=w==="DOM"?0:-1,k=s.length-1,A=e==null?-1:s.findIndex(O=>b(O,e));let $,V,N=!p;switch(t){case"reset":if(T===-1)return null;$=0,V="next",N=!1;break;case"start":$=0,V="next",N=!1;break;case"end":$=k,V="previous",N=!1;break;default:{const O=A+t;O<0?!N&&A!==-1||Math.abs(t)>1?($=0,V="next"):($=k,V="previous"):O>k?!N||Math.abs(t)>1?($=k,V="previous"):($=0,V="next"):($=O,V=t>=0?"next":"previous")}}const G=U4($,V,s,c,d,N);return G===-1&&e!==null&&!d(e,A)?e:(o=s[G])!=null?o:null}function H4(e,t,r,o){return r==="none"?[]:r==="single"?o(t[0],e)?t:[e]:t.some(s=>o(s,e))?t.filter(s=>!o(s,e)):[...t,e]}function K1(e,t,r){const{itemComparer:o,isItemDisabled:s,selectionMode:d,items:p}=r,{selectedValues:c}=t,b=p.findIndex(T=>o(e,T));if(s(e,b))return t;const w=H4(e,c,d,o);return K({},t,{selectedValues:w,highlightedValue:e})}function W4(e,t,r){const o=t.highlightedValue,{orientation:s,pageSize:d}=r;switch(e){case"Home":return K({},t,{highlightedValue:_i(o,"start",r)});case"End":return K({},t,{highlightedValue:_i(o,"end",r)});case"PageUp":return K({},t,{highlightedValue:_i(o,-d,r)});case"PageDown":return K({},t,{highlightedValue:_i(o,d,r)});case"ArrowUp":if(s!=="vertical")break;return K({},t,{highlightedValue:_i(o,-1,r)});case"ArrowDown":if(s!=="vertical")break;return K({},t,{highlightedValue:_i(o,1,r)});case"ArrowLeft":{if(s==="vertical")break;return K({},t,{highlightedValue:_i(o,s==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(s==="vertical")break;return K({},t,{highlightedValue:_i(o,s==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:K1(t.highlightedValue,t,r)}return t}function G4(e,t){return t.focusManagement==="DOM"?e:K({},e,{highlightedValue:null})}function q4(e,t,r){var o;const s=(o=r(e))==null?void 0:o.trim().toLowerCase();return!s||s.length===0?!1:s.indexOf(t)===0}function Z4(e,t,r){const{items:o,isItemDisabled:s,disabledItemsFocusable:d,getItemAsString:p}=r,c=t.length>1;let b=c?e.highlightedValue:_i(e.highlightedValue,1,r);for(let w=0;w<o.length;w+=1){if(!b||!c&&e.highlightedValue===b)return e;if(q4(b,t,p)&&(!s(b,o.indexOf(b))||d))return K({},e,{highlightedValue:b});b=_i(b,1,r)}return e}function K4(e,t,r,o){var s;const{itemComparer:d,focusManagement:p}=o;let c=null;if(r.highlightedValue!=null){var b;c=(b=e.find(k=>d(k,r.highlightedValue)))!=null?b:null}else p==="DOM"&&t.length===0&&(c=_i(null,"reset",o));const T=((s=r.selectedValues)!=null?s:[]).filter(k=>e.some(A=>d(A,k)));return K({},r,{highlightedValue:c,selectedValues:T})}function X4(e,t){return K({},e,{highlightedValue:_i(null,"reset",t)})}function J4(e,t){return K({},e,{highlightedValue:_i(null,"end",t)})}function Y4(e,t){return K({},e,{selectedValues:[],highlightedValue:_i(null,"reset",t)})}function bv(e,t){const{type:r,context:o}=t;switch(r){case pn.keyDown:return W4(t.key,e,o);case pn.itemClick:return K1(t.item,e,o);case pn.blur:return G4(e,o);case pn.textNavigation:return Z4(e,t.searchString,o);case pn.itemsChange:return K4(t.items,t.previousItems,e,o);case pn.resetHighlight:return X4(e,o);case pn.highlightLast:return J4(e,o);case pn.clearSelection:return Y4(e,o);default:return e}}const Q4=500;function eB(e){const t=L.useRef({searchString:"",lastTime:null});return L.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const o=t.current,s=r.key.toLowerCase(),d=performance.now();o.searchString.length>0&&o.lastTime&&d-o.lastTime>Q4?o.searchString=s:(o.searchString.length!==1||s!==o.searchString)&&(o.searchString+=s),o.lastTime=d,e(o.searchString,r)}},[e])}const jC={},tB=()=>{},rB=(e,t)=>e===t,nB=()=>!1,iB=e=>typeof e=="string"?e:String(e),oB=()=>({highlightedValue:null,selectedValues:[]});function X1(e){const{controlledProps:t=jC,disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:s="activeDescendant",getInitialState:d=oB,getItemDomElement:p,getItemId:c,isItemDisabled:b=nB,rootRef:w,onStateChange:T=tB,items:k,itemComparer:A=rB,getItemAsString:$=iB,onChange:V,onHighlightChange:N,onItemsChange:G,orientation:O="vertical",pageSize:R=5,reducerActionContext:M=jC,selectionMode:ee="single",stateReducer:Z,componentName:oe="useList"}=e,ie=L.useRef(null),W=on(w,ie),Ie=L.useCallback((ct,Je,ft)=>{if(N==null||N(ct,Je,ft),s==="DOM"&&Je!=null&&(ft===pn.itemClick||ft===pn.keyDown||ft===pn.textNavigation)){var _t;p==null||(_t=p(Je))==null||_t.focus()}},[p,N,s]),_e=L.useMemo(()=>({highlightedValue:A,selectedValues:(ct,Je)=>BC(ct,Je,A)}),[A]),Te=L.useCallback((ct,Je,ft,_t,sr)=>{switch(T==null||T(ct,Je,ft,_t,sr),Je){case"highlightedValue":Ie(ct,ft,_t);break;case"selectedValues":V==null||V(ct,ft,_t);break}},[Ie,V,T]),Ae=L.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:o,focusManagement:s,isItemDisabled:b,itemComparer:A,items:k,getItemAsString:$,onHighlightChange:Ie,orientation:O,pageSize:R,selectionMode:ee,stateComparers:_e}),[r,o,s,b,A,k,$,Ie,O,R,ee,_e]),$e=d(),et=Z??bv,Ve=L.useMemo(()=>K({},M,Ae),[M,Ae]),[ke,Ne]=JE({reducer:et,actionContext:Ve,initialState:$e,controlledProps:t,stateComparers:_e,onStateChange:Te,componentName:oe}),{highlightedValue:Oe,selectedValues:Fe}=ke,nt=eB((ct,Je)=>Ne({type:pn.textNavigation,event:Je,searchString:ct})),lt=L.useRef([]);L.useEffect(()=>{BC(lt.current,k,A)||(Ne({type:pn.itemsChange,event:null,items:k,previousItems:lt.current}),lt.current=k,G==null||G(k))},[k,A,Ne,G]);const ut=ct=>Je=>{var ft;if((ft=ct.onKeyDown)==null||ft.call(ct,Je),Je.defaultMuiPrevented)return;const _t=["Home","End","PageUp","PageDown"];O==="vertical"?_t.push("ArrowUp","ArrowDown"):_t.push("ArrowLeft","ArrowRight"),s==="activeDescendant"&&_t.push(" ","Enter"),_t.includes(Je.key)&&Je.preventDefault(),Ne({type:pn.keyDown,key:Je.key,event:Je}),nt(Je)},Dt=ct=>Je=>{var ft,_t;(ft=ct.onBlur)==null||ft.call(ct,Je),!Je.defaultMuiPrevented&&((_t=ie.current)!=null&&_t.contains(Je.relatedTarget)||Ne({type:pn.blur,event:Je}))},St=(ct={})=>{const Je=Di(ct);return K({},ct,{"aria-activedescendant":s==="activeDescendant"&&Oe!=null?c(Oe):void 0,tabIndex:s==="DOM"?-1:0,ref:W},Je,{onBlur:Dt(Je),onKeyDown:ut(Je)})},$t=L.useCallback(ct=>{const Je=(Fe??[]).some(sr=>sr!=null&&A(ct,sr)),ft=Oe!=null&&A(ct,Oe);return{focusable:s==="DOM",highlighted:ft,selected:Je}},[A,Fe,Oe,s]),Yt=L.useMemo(()=>({dispatch:Ne,getItemState:$t}),[Ne,$t]);return L.useDebugValue({state:ke}),{contextValue:Yt,dispatch:Ne,getRootProps:St,rootRef:W,state:ke}}const Ll=L.createContext(null);function J1(e){const{handlePointerOverEvents:t=!1,item:r}=e,o=L.useContext(Ll);if(!o)throw new Error("useListItem must be used within a ListProvider");const{dispatch:s,getItemState:d}=o,{highlighted:p,selected:c,focusable:b}=d(r),w=L.useCallback($=>V=>{var N;(N=$.onClick)==null||N.call($,V),!V.defaultPrevented&&s({type:pn.itemClick,item:r,event:V})},[s,r]),T=L.useCallback($=>V=>{var N;(N=$.onMouseOver)==null||N.call($,V),!V.defaultPrevented&&s({type:pn.itemHover,item:r,event:V})},[s,r]);let k;return b&&(k=p?0:-1),{getRootProps:($={})=>{const V=Di($);return K({},$,{onClick:w(V),onPointerOver:t?T(V):void 0,tabIndex:k})},highlighted:p,selected:c}}function aB(e,t){if(t.type===pn.itemHover)return K({},e,{highlightedValue:t.item});const r=bv(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return K({},r,{highlightedValue:t.context.items[0]});if(t.type===pn.keyDown&&t.event.key==="Escape")return K({},r,{open:!1});if(t.type===pn.blur){var o;if(!((o=t.context.listboxRef.current)!=null&&o.contains(t.event.relatedTarget))){var s,d;const p=(s=t.context.listboxRef.current)==null?void 0:s.getAttribute("id"),c=(d=t.event.relatedTarget)==null?void 0:d.getAttribute("aria-controls");return p&&c&&p===c?r:K({},r,{open:!1,highlightedValue:t.context.items[0]})}}return r}const vf=L.createContext(null);function sB(e){const t=Array.from(e.keys()).map(r=>{const o=e.get(r);return{key:r,subitem:o}});return t.sort((r,o)=>{const s=r.subitem.ref.current,d=o.subitem.ref.current;return s===null||d===null||s===d?0:s.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function wv(){const[e,t]=L.useState(new Map),r=L.useRef(new Set),o=L.useCallback(function(w){r.current.delete(w),t(T=>{const k=new Map(T);return k.delete(w),k})},[]),s=L.useCallback(function(w,T){let k;return typeof w=="function"?k=w(r.current):k=w,r.current.add(k),t(A=>{const $=new Map(A);return $.set(k,T),$}),{id:k,deregister:()=>o(k)}},[o]),d=L.useMemo(()=>sB(e),[e]),p=L.useCallback(function(w){return Array.from(d.keys()).indexOf(w)},[d]);return{contextValue:L.useMemo(()=>({getItemIndex:p,registerItem:s,totalSubitemCount:e.size}),[p,s,e.size]),subitems:d}}function Sv(e,t){const r=L.useContext(vf);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=r,[s,d]=L.useState(typeof e=="function"?void 0:e);return Os(()=>{const{id:p,deregister:c}=o(e,t);return d(p),c},[o,t,e]),{id:s,index:s!==void 0?r.getItemIndex(s):-1,totalItemCount:r.totalSubitemCount}}function Bs(e,t){return function(o={}){const s=K({},o,e(o));return K({},s,t(s))}}const lB={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function cB(e={}){var t,r;const{listboxRef:o,onItemsChange:s,id:d,disabledItemsFocusable:p=!0,disableListWrap:c=!1,autoFocus:b=!0,componentName:w="useMenu"}=e,T=L.useRef(null),k=on(T,o),A=(t=ko(d))!=null?t:"",{state:{open:$,changeReason:V},dispatch:N,triggerElement:G,registerPopup:O}=(r=L.useContext(xv))!=null?r:lB,R=L.useRef($),{subitems:M,contextValue:ee}=wv(),Z=L.useMemo(()=>Array.from(M.keys()),[M]),oe=L.useCallback(Fe=>{var nt,lt;return Fe==null?null:(nt=(lt=M.get(Fe))==null?void 0:lt.ref.current)!=null?nt:null},[M]),ie=L.useCallback(Fe=>{var nt;return(M==null||(nt=M.get(Fe))==null?void 0:nt.disabled)||!1},[M]),W=L.useCallback(Fe=>{var nt,lt;return((nt=M.get(Fe))==null?void 0:nt.label)||((lt=M.get(Fe))==null||(lt=lt.ref.current)==null?void 0:lt.innerText)},[M]),Ie=L.useMemo(()=>({listboxRef:T}),[T]),{dispatch:_e,getRootProps:Te,contextValue:Ae,state:{highlightedValue:$e},rootRef:et}=X1({disabledItemsFocusable:p,disableListWrap:c,focusManagement:"DOM",getItemDomElement:oe,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:ie,items:Z,getItemAsString:W,rootRef:k,onItemsChange:s,reducerActionContext:Ie,selectionMode:"none",stateReducer:aB,componentName:w});Os(()=>{O(A)},[A,O]),Os(()=>{$&&(V==null?void 0:V.type)==="keydown"&&V.key==="ArrowUp"&&_e({type:pn.highlightLast,event:V})},[$,V,_e]),L.useEffect(()=>{if($&&b&&$e&&!R.current){var Fe;(Fe=M.get($e))==null||(Fe=Fe.ref)==null||(Fe=Fe.current)==null||Fe.focus()}},[$,b,$e,M,Z]),L.useEffect(()=>{var Fe;if((Fe=T.current)!=null&&Fe.contains(document.activeElement)&&$e!==null){var nt;M==null||(nt=M.get($e))==null||(nt=nt.ref.current)==null||nt.focus()}},[$e,M]);const Ve=Fe=>nt=>{var lt,ut;(lt=Fe.onBlur)==null||lt.call(Fe,nt),!nt.defaultMuiPrevented&&((ut=T.current)!=null&&ut.contains(nt.relatedTarget)||nt.relatedTarget===G||N({type:Oa.blur,event:nt}))},ke=Fe=>nt=>{var lt;(lt=Fe.onKeyDown)==null||lt.call(Fe,nt),!nt.defaultMuiPrevented&&nt.key==="Escape"&&N({type:Oa.escapeKeyDown,event:nt})},Ne=(Fe={})=>({onBlur:Ve(Fe),onKeyDown:ke(Fe)}),Oe=(Fe={})=>{const nt=Bs(Ne,Te),lt=Di(Fe);return K({},Fe,lt,nt(lt),{id:A,role:"menu"})};return L.useDebugValue({subitems:M,highlightedValue:$e}),{contextValue:K({},ee,Ae),dispatch:_e,getListboxProps:Oe,highlightedValue:$e,listboxRef:et,menuItems:M,open:$,triggerElement:G}}function uB(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:s,getItemState:d,registerItem:p,totalSubitemCount:c}=t,b=L.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:s}),[o,s,d]),w=L.useMemo(()=>({getItemIndex:s,registerItem:p,totalSubitemCount:c}),[p,s,c]);return Y.jsx(vf.Provider,{value:w,children:Y.jsx(Ll.Provider,{value:b,children:r})})}var YE={exports:{}},qo={},QE={exports:{}},eA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Oe,Fe){var nt=Oe.length;Oe.push(Fe);e:for(;0<nt;){var lt=nt-1>>>1,ut=Oe[lt];if(0<s(ut,Fe))Oe[lt]=Fe,Oe[nt]=ut,nt=lt;else break e}}function r(Oe){return Oe.length===0?null:Oe[0]}function o(Oe){if(Oe.length===0)return null;var Fe=Oe[0],nt=Oe.pop();if(nt!==Fe){Oe[0]=nt;e:for(var lt=0,ut=Oe.length,Dt=ut>>>1;lt<Dt;){var St=2*(lt+1)-1,$t=Oe[St],Yt=St+1,ct=Oe[Yt];if(0>s($t,nt))Yt<ut&&0>s(ct,$t)?(Oe[lt]=ct,Oe[Yt]=nt,lt=Yt):(Oe[lt]=$t,Oe[St]=nt,lt=St);else if(Yt<ut&&0>s(ct,nt))Oe[lt]=ct,Oe[Yt]=nt,lt=Yt;else break e}}return Fe}function s(Oe,Fe){var nt=Oe.sortIndex-Fe.sortIndex;return nt!==0?nt:Oe.id-Fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var p=Date,c=p.now();e.unstable_now=function(){return p.now()-c}}var b=[],w=[],T=1,k=null,A=3,$=!1,V=!1,N=!1,G=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(Oe){for(var Fe=r(w);Fe!==null;){if(Fe.callback===null)o(w);else if(Fe.startTime<=Oe)o(w),Fe.sortIndex=Fe.expirationTime,t(b,Fe);else break;Fe=r(w)}}function ee(Oe){if(N=!1,M(Oe),!V)if(r(b)!==null)V=!0,ke(Z);else{var Fe=r(w);Fe!==null&&Ne(ee,Fe.startTime-Oe)}}function Z(Oe,Fe){V=!1,N&&(N=!1,O(W),W=-1),$=!0;var nt=A;try{for(M(Fe),k=r(b);k!==null&&(!(k.expirationTime>Fe)||Oe&&!Te());){var lt=k.callback;if(typeof lt=="function"){k.callback=null,A=k.priorityLevel;var ut=lt(k.expirationTime<=Fe);Fe=e.unstable_now(),typeof ut=="function"?k.callback=ut:k===r(b)&&o(b),M(Fe)}else o(b);k=r(b)}if(k!==null)var Dt=!0;else{var St=r(w);St!==null&&Ne(ee,St.startTime-Fe),Dt=!1}return Dt}finally{k=null,A=nt,$=!1}}var oe=!1,ie=null,W=-1,Ie=5,_e=-1;function Te(){return!(e.unstable_now()-_e<Ie)}function Ae(){if(ie!==null){var Oe=e.unstable_now();_e=Oe;var Fe=!0;try{Fe=ie(!0,Oe)}finally{Fe?$e():(oe=!1,ie=null)}}else oe=!1}var $e;if(typeof R=="function")$e=function(){R(Ae)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,Ve=et.port2;et.port1.onmessage=Ae,$e=function(){Ve.postMessage(null)}}else $e=function(){G(Ae,0)};function ke(Oe){ie=Oe,oe||(oe=!0,$e())}function Ne(Oe,Fe){W=G(function(){Oe(e.unstable_now())},Fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Oe){Oe.callback=null},e.unstable_continueExecution=function(){V||$||(V=!0,ke(Z))},e.unstable_forceFrameRate=function(Oe){0>Oe||125<Oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<Oe?Math.floor(1e3/Oe):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Oe){switch(A){case 1:case 2:case 3:var Fe=3;break;default:Fe=A}var nt=A;A=Fe;try{return Oe()}finally{A=nt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Oe,Fe){switch(Oe){case 1:case 2:case 3:case 4:case 5:break;default:Oe=3}var nt=A;A=Oe;try{return Fe()}finally{A=nt}},e.unstable_scheduleCallback=function(Oe,Fe,nt){var lt=e.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?lt+nt:lt):nt=lt,Oe){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=nt+ut,Oe={id:T++,callback:Fe,priorityLevel:Oe,startTime:nt,expirationTime:ut,sortIndex:-1},nt>lt?(Oe.sortIndex=nt,t(w,Oe),r(b)===null&&Oe===r(w)&&(N?(O(W),W=-1):N=!0,Ne(ee,nt-lt))):(Oe.sortIndex=ut,t(b,Oe),V||$||(V=!0,ke(Z))),Oe},e.unstable_shouldYield=Te,e.unstable_wrapCallback=function(Oe){var Fe=A;return function(){var nt=A;A=Fe;try{return Oe.apply(this,arguments)}finally{A=nt}}}})(eA);QE.exports=eA;var dB=QE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hB=L,Ho=dB;function vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tA=new Set,Np={};function Dc(e,t){dd(e,t),dd(e+"Capture",t)}function dd(e,t){for(Np[e]=t,e=0;e<t.length;e++)tA.add(t[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nb=Object.prototype.hasOwnProperty,pB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VC={},UC={};function fB(e){return nb.call(UC,e)?!0:nb.call(VC,e)?!1:pB.test(e)?UC[e]=!0:(VC[e]=!0,!1)}function mB(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gB(e,t,r,o){if(t===null||typeof t>"u"||mB(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function po(e,t,r,o,s,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var $i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$i[e]=new po(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$i[t]=new po(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$i[e]=new po(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$i[e]=new po(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$i[e]=new po(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$i[e]=new po(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$i[e]=new po(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$i[e]=new po(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$i[e]=new po(e,5,!1,e.toLowerCase(),null,!1,!1)});var Y1=/[\-:]([a-z])/g;function Q1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Y1,Q1);$i[t]=new po(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Y1,Q1);$i[t]=new po(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Y1,Q1);$i[t]=new po(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$i[e]=new po(e,1,!1,e.toLowerCase(),null,!1,!1)});$i.xlinkHref=new po("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$i[e]=new po(e,1,!1,e.toLowerCase(),null,!0,!0)});function ew(e,t,r,o){var s=$i.hasOwnProperty(t)?$i[t]:null;(s!==null?s.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gB(t,r,s,o)&&(r=null),o||s===null?fB(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,o=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Hs=hB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xm=Symbol.for("react.element"),Bu=Symbol.for("react.portal"),Fu=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),ib=Symbol.for("react.profiler"),rA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),rw=Symbol.for("react.forward_ref"),ob=Symbol.for("react.suspense"),ab=Symbol.for("react.suspense_list"),nw=Symbol.for("react.memo"),pl=Symbol.for("react.lazy"),iA=Symbol.for("react.offscreen"),HC=Symbol.iterator;function Xh(e){return e===null||typeof e!="object"?null:(e=HC&&e[HC]||e["@@iterator"],typeof e=="function"?e:null)}var Bn=Object.assign,b_;function mp(e){if(b_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);b_=t&&t[1]||""}return`
`+b_+e}var w_=!1;function S_(e,t){if(!e||w_)return"";w_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var s=w.stack.split(`
`),d=o.stack.split(`
`),p=s.length-1,c=d.length-1;1<=p&&0<=c&&s[p]!==d[c];)c--;for(;1<=p&&0<=c;p--,c--)if(s[p]!==d[c]){if(p!==1||c!==1)do if(p--,c--,0>c||s[p]!==d[c]){var b=`
`+s[p].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=p&&0<=c);break}}}finally{w_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?mp(e):""}function yB(e){switch(e.tag){case 5:return mp(e.type);case 16:return mp("Lazy");case 13:return mp("Suspense");case 19:return mp("SuspenseList");case 0:case 2:case 15:return e=S_(e.type,!1),e;case 11:return e=S_(e.type.render,!1),e;case 1:return e=S_(e.type,!0),e;default:return""}}function sb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fu:return"Fragment";case Bu:return"Portal";case ib:return"Profiler";case tw:return"StrictMode";case ob:return"Suspense";case ab:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nA:return(e.displayName||"Context")+".Consumer";case rA:return(e._context.displayName||"Context")+".Provider";case rw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nw:return t=e.displayName||null,t!==null?t:sb(e.type)||"Memo";case pl:t=e._payload,e=e._init;try{return sb(e(t))}catch{}}return null}function vB(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sb(t);case 8:return t===tw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _B(e){var t=oA(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(p){o=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(p){o=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jm(e){e._valueTracker||(e._valueTracker=_B(e))}function aA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=oA(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function ty(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lb(e,t){var r=t.checked;return Bn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function WC(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Rl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sA(e,t){t=t.checked,t!=null&&ew(e,"checked",t,!1)}function cb(e,t){sA(e,t);var r=Rl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ub(e,t.type,r):t.hasOwnProperty("defaultValue")&&ub(e,t.type,Rl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function GC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ub(e,t,r){(t!=="number"||ty(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var gp=Array.isArray;function td(e,t,r,o){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Rl(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function db(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(vt(91));return Bn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(vt(92));if(gp(r)){if(1<r.length)throw Error(vt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Rl(r)}}function lA(e,t){var r=Rl(t.value),o=Rl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function ZC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ym,uA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ym=Ym||document.createElement("div"),Ym.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ym.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xB=["Webkit","ms","Moz","O"];Object.keys(wp).forEach(function(e){xB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wp[t]=wp[e]})});function dA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wp.hasOwnProperty(e)&&wp[e]?(""+t).trim():t+"px"}function hA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,s=dA(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,s):e[r]=s}}var bB=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pb(e,t){if(t){if(bB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(vt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(vt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(vt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(vt(62))}}function fb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mb=null;function iw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gb=null,rd=null,nd=null;function KC(e){if(e=bf(e)){if(typeof gb!="function")throw Error(vt(280));var t=e.stateNode;t&&(t=kv(t),gb(e.stateNode,e.type,t))}}function pA(e){rd?nd?nd.push(e):nd=[e]:rd=e}function fA(){if(rd){var e=rd,t=nd;if(nd=rd=null,KC(e),t)for(e=0;e<t.length;e++)KC(t[e])}}function mA(e,t){return e(t)}function gA(){}var C_=!1;function yA(e,t,r){if(C_)return e(t,r);C_=!0;try{return mA(e,t,r)}finally{C_=!1,(rd!==null||nd!==null)&&(gA(),fA())}}function Vp(e,t){var r=e.stateNode;if(r===null)return null;var o=kv(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(vt(231,t,typeof r));return r}var yb=!1;if(Fs)try{var Jh={};Object.defineProperty(Jh,"passive",{get:function(){yb=!0}}),window.addEventListener("test",Jh,Jh),window.removeEventListener("test",Jh,Jh)}catch{yb=!1}function wB(e,t,r,o,s,d,p,c,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var Sp=!1,ry=null,ny=!1,vb=null,SB={onError:function(e){Sp=!0,ry=e}};function CB(e,t,r,o,s,d,p,c,b){Sp=!1,ry=null,wB.apply(SB,arguments)}function IB(e,t,r,o,s,d,p,c,b){if(CB.apply(this,arguments),Sp){if(Sp){var w=ry;Sp=!1,ry=null}else throw Error(vt(198));ny||(ny=!0,vb=w)}}function Lc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function vA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function XC(e){if(Lc(e)!==e)throw Error(vt(188))}function TB(e){var t=e.alternate;if(!t){if(t=Lc(e),t===null)throw Error(vt(188));return t!==e?null:e}for(var r=e,o=t;;){var s=r.return;if(s===null)break;var d=s.alternate;if(d===null){if(o=s.return,o!==null){r=o;continue}break}if(s.child===d.child){for(d=s.child;d;){if(d===r)return XC(s),e;if(d===o)return XC(s),t;d=d.sibling}throw Error(vt(188))}if(r.return!==o.return)r=s,o=d;else{for(var p=!1,c=s.child;c;){if(c===r){p=!0,r=s,o=d;break}if(c===o){p=!0,o=s,r=d;break}c=c.sibling}if(!p){for(c=d.child;c;){if(c===r){p=!0,r=d,o=s;break}if(c===o){p=!0,o=d,r=s;break}c=c.sibling}if(!p)throw Error(vt(189))}}if(r.alternate!==o)throw Error(vt(190))}if(r.tag!==3)throw Error(vt(188));return r.stateNode.current===r?e:t}function _A(e){return e=TB(e),e!==null?xA(e):null}function xA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xA(e);if(t!==null)return t;e=e.sibling}return null}var bA=Ho.unstable_scheduleCallback,JC=Ho.unstable_cancelCallback,PB=Ho.unstable_shouldYield,kB=Ho.unstable_requestPaint,Qn=Ho.unstable_now,EB=Ho.unstable_getCurrentPriorityLevel,ow=Ho.unstable_ImmediatePriority,wA=Ho.unstable_UserBlockingPriority,iy=Ho.unstable_NormalPriority,AB=Ho.unstable_LowPriority,SA=Ho.unstable_IdlePriority,Cv=null,ss=null;function zB(e){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(Cv,e,void 0,(e.current.flags&128)===128)}catch{}}var Ba=Math.clz32?Math.clz32:DB,RB=Math.log,MB=Math.LN2;function DB(e){return e>>>=0,e===0?32:31-(RB(e)/MB|0)|0}var Qm=64,eg=4194304;function yp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oy(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,s=e.suspendedLanes,d=e.pingedLanes,p=r&268435455;if(p!==0){var c=p&~s;c!==0?o=yp(c):(d&=p,d!==0&&(o=yp(d)))}else p=r&~s,p!==0?o=yp(p):d!==0&&(o=yp(d));if(o===0)return 0;if(t!==0&&t!==o&&!(t&s)&&(s=o&-o,d=t&-t,s>=d||s===16&&(d&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Ba(t),s=1<<r,o|=e[r],t&=~s;return o}function LB(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $B(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-Ba(d),c=1<<p,b=s[p];b===-1?(!(c&r)||c&o)&&(s[p]=LB(c,t)):b<=t&&(e.expiredLanes|=c),d&=~c}}function _b(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CA(){var e=Qm;return Qm<<=1,!(Qm&4194240)&&(Qm=64),e}function I_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _f(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ba(t),e[t]=r}function OB(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ba(r),d=1<<s;t[s]=0,o[s]=-1,e[s]=-1,r&=~d}}function aw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Ba(r),s=1<<o;s&t|e[o]&t&&(e[o]|=t),r&=~s}}var an=0;function IA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var TA,sw,PA,kA,EA,xb=!1,tg=[],wl=null,Sl=null,Cl=null,Up=new Map,Hp=new Map,ml=[],BB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YC(e,t){switch(e){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Up.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(t.pointerId)}}function Yh(e,t,r,o,s,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[s]},t!==null&&(t=bf(t),t!==null&&sw(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function FB(e,t,r,o,s){switch(t){case"focusin":return wl=Yh(wl,e,t,r,o,s),!0;case"dragenter":return Sl=Yh(Sl,e,t,r,o,s),!0;case"mouseover":return Cl=Yh(Cl,e,t,r,o,s),!0;case"pointerover":var d=s.pointerId;return Up.set(d,Yh(Up.get(d)||null,e,t,r,o,s)),!0;case"gotpointercapture":return d=s.pointerId,Hp.set(d,Yh(Hp.get(d)||null,e,t,r,o,s)),!0}return!1}function AA(e){var t=yc(e.target);if(t!==null){var r=Lc(t);if(r!==null){if(t=r.tag,t===13){if(t=vA(r),t!==null){e.blockedOn=t,EA(e.priority,function(){PA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);mb=o,r.target.dispatchEvent(o),mb=null}else return t=bf(r),t!==null&&sw(t),e.blockedOn=r,!1;t.shift()}return!0}function QC(e,t,r){kg(e)&&r.delete(t)}function NB(){xb=!1,wl!==null&&kg(wl)&&(wl=null),Sl!==null&&kg(Sl)&&(Sl=null),Cl!==null&&kg(Cl)&&(Cl=null),Up.forEach(QC),Hp.forEach(QC)}function Qh(e,t){e.blockedOn===t&&(e.blockedOn=null,xb||(xb=!0,Ho.unstable_scheduleCallback(Ho.unstable_NormalPriority,NB)))}function Wp(e){function t(s){return Qh(s,e)}if(0<tg.length){Qh(tg[0],e);for(var r=1;r<tg.length;r++){var o=tg[r];o.blockedOn===e&&(o.blockedOn=null)}}for(wl!==null&&Qh(wl,e),Sl!==null&&Qh(Sl,e),Cl!==null&&Qh(Cl,e),Up.forEach(t),Hp.forEach(t),r=0;r<ml.length;r++)o=ml[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<ml.length&&(r=ml[0],r.blockedOn===null);)AA(r),r.blockedOn===null&&ml.shift()}var id=Hs.ReactCurrentBatchConfig,ay=!0;function jB(e,t,r,o){var s=an,d=id.transition;id.transition=null;try{an=1,lw(e,t,r,o)}finally{an=s,id.transition=d}}function VB(e,t,r,o){var s=an,d=id.transition;id.transition=null;try{an=4,lw(e,t,r,o)}finally{an=s,id.transition=d}}function lw(e,t,r,o){if(ay){var s=bb(e,t,r,o);if(s===null)L_(e,t,o,sy,r),YC(e,o);else if(FB(s,e,t,r,o))o.stopPropagation();else if(YC(e,o),t&4&&-1<BB.indexOf(e)){for(;s!==null;){var d=bf(s);if(d!==null&&TA(d),d=bb(e,t,r,o),d===null&&L_(e,t,o,sy,r),d===s)break;s=d}s!==null&&o.stopPropagation()}else L_(e,t,o,null,r)}}var sy=null;function bb(e,t,r,o){if(sy=null,e=iw(o),e=yc(e),e!==null)if(t=Lc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=vA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sy=e,null}function zA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EB()){case ow:return 1;case wA:return 4;case iy:case AB:return 16;case SA:return 536870912;default:return 16}default:return 16}}var _l=null,cw=null,Eg=null;function RA(){if(Eg)return Eg;var e,t=cw,r=t.length,o,s="value"in _l?_l.value:_l.textContent,d=s.length;for(e=0;e<r&&t[e]===s[e];e++);var p=r-e;for(o=1;o<=p&&t[r-o]===s[d-o];o++);return Eg=s.slice(e,1<o?1-o:void 0)}function Ag(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rg(){return!0}function eI(){return!1}function Zo(e){function t(r,o,s,d,p){this._reactName=r,this._targetInst=s,this.type=o,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(d):d[c]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?rg:eI,this.isPropagationStopped=eI,this}return Bn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=rg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=rg)},persist:function(){},isPersistent:rg}),t}var Rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uw=Zo(Rd),xf=Bn({},Rd,{view:0,detail:0}),UB=Zo(xf),T_,P_,ep,Iv=Bn({},xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ep&&(ep&&e.type==="mousemove"?(T_=e.screenX-ep.screenX,P_=e.screenY-ep.screenY):P_=T_=0,ep=e),T_)},movementY:function(e){return"movementY"in e?e.movementY:P_}}),tI=Zo(Iv),HB=Bn({},Iv,{dataTransfer:0}),WB=Zo(HB),GB=Bn({},xf,{relatedTarget:0}),k_=Zo(GB),qB=Bn({},Rd,{animationName:0,elapsedTime:0,pseudoElement:0}),ZB=Zo(qB),KB=Bn({},Rd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),XB=Zo(KB),JB=Bn({},Rd,{data:0}),rI=Zo(JB),YB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eF[e])?!!t[e]:!1}function dw(){return tF}var rF=Bn({},xf,{key:function(e){if(e.key){var t=YB[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ag(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?QB[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dw,charCode:function(e){return e.type==="keypress"?Ag(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ag(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nF=Zo(rF),iF=Bn({},Iv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nI=Zo(iF),oF=Bn({},xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dw}),aF=Zo(oF),sF=Bn({},Rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),lF=Zo(sF),cF=Bn({},Iv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uF=Zo(cF),dF=[9,13,27,32],hw=Fs&&"CompositionEvent"in window,Cp=null;Fs&&"documentMode"in document&&(Cp=document.documentMode);var hF=Fs&&"TextEvent"in window&&!Cp,MA=Fs&&(!hw||Cp&&8<Cp&&11>=Cp),iI=" ",oI=!1;function DA(e,t){switch(e){case"keyup":return dF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nu=!1;function pF(e,t){switch(e){case"compositionend":return LA(t);case"keypress":return t.which!==32?null:(oI=!0,iI);case"textInput":return e=t.data,e===iI&&oI?null:e;default:return null}}function fF(e,t){if(Nu)return e==="compositionend"||!hw&&DA(e,t)?(e=RA(),Eg=cw=_l=null,Nu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MA&&t.locale!=="ko"?null:t.data;default:return null}}var mF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mF[e.type]:t==="textarea"}function $A(e,t,r,o){pA(o),t=ly(t,"onChange"),0<t.length&&(r=new uw("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Ip=null,Gp=null;function gF(e){qA(e,0)}function Tv(e){var t=Uu(e);if(aA(t))return e}function yF(e,t){if(e==="change")return t}var OA=!1;if(Fs){var E_;if(Fs){var A_="oninput"in document;if(!A_){var sI=document.createElement("div");sI.setAttribute("oninput","return;"),A_=typeof sI.oninput=="function"}E_=A_}else E_=!1;OA=E_&&(!document.documentMode||9<document.documentMode)}function lI(){Ip&&(Ip.detachEvent("onpropertychange",BA),Gp=Ip=null)}function BA(e){if(e.propertyName==="value"&&Tv(Gp)){var t=[];$A(t,Gp,e,iw(e)),yA(gF,t)}}function vF(e,t,r){e==="focusin"?(lI(),Ip=t,Gp=r,Ip.attachEvent("onpropertychange",BA)):e==="focusout"&&lI()}function _F(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tv(Gp)}function xF(e,t){if(e==="click")return Tv(t)}function bF(e,t){if(e==="input"||e==="change")return Tv(t)}function wF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ja=typeof Object.is=="function"?Object.is:wF;function qp(e,t){if(ja(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var s=r[o];if(!nb.call(t,s)||!ja(e[s],t[s]))return!1}return!0}function cI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uI(e,t){var r=cI(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cI(r)}}function FA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NA(){for(var e=window,t=ty();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ty(e.document)}return t}function pw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function SF(e){var t=NA(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&FA(r.ownerDocument.documentElement,r)){if(o!==null&&pw(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,d=Math.min(o.start,s);o=o.end===void 0?d:Math.min(o.end,s),!e.extend&&d>o&&(s=o,o=d,d=s),s=uI(r,d);var p=uI(r,o);s&&p&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CF=Fs&&"documentMode"in document&&11>=document.documentMode,ju=null,wb=null,Tp=null,Sb=!1;function dI(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sb||ju==null||ju!==ty(o)||(o=ju,"selectionStart"in o&&pw(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Tp&&qp(Tp,o)||(Tp=o,o=ly(wb,"onSelect"),0<o.length&&(t=new uw("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=ju)))}function ng(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vu={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},z_={},jA={};Fs&&(jA=document.createElement("div").style,"AnimationEvent"in window||(delete Vu.animationend.animation,delete Vu.animationiteration.animation,delete Vu.animationstart.animation),"TransitionEvent"in window||delete Vu.transitionend.transition);function Pv(e){if(z_[e])return z_[e];if(!Vu[e])return e;var t=Vu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jA)return z_[e]=t[r];return e}var VA=Pv("animationend"),UA=Pv("animationiteration"),HA=Pv("animationstart"),WA=Pv("transitionend"),GA=new Map,hI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $l(e,t){GA.set(e,t),Dc(t,[e])}for(var R_=0;R_<hI.length;R_++){var M_=hI[R_],IF=M_.toLowerCase(),TF=M_[0].toUpperCase()+M_.slice(1);$l(IF,"on"+TF)}$l(VA,"onAnimationEnd");$l(UA,"onAnimationIteration");$l(HA,"onAnimationStart");$l("dblclick","onDoubleClick");$l("focusin","onFocus");$l("focusout","onBlur");$l(WA,"onTransitionEnd");dd("onMouseEnter",["mouseout","mouseover"]);dd("onMouseLeave",["mouseout","mouseover"]);dd("onPointerEnter",["pointerout","pointerover"]);dd("onPointerLeave",["pointerout","pointerover"]);Dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PF=new Set("cancel close invalid load scroll toggle".split(" ").concat(vp));function pI(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,IB(o,t,void 0,e),e.currentTarget=null}function qA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],s=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var p=o.length-1;0<=p;p--){var c=o[p],b=c.instance,w=c.currentTarget;if(c=c.listener,b!==d&&s.isPropagationStopped())break e;pI(s,c,w),d=b}else for(p=0;p<o.length;p++){if(c=o[p],b=c.instance,w=c.currentTarget,c=c.listener,b!==d&&s.isPropagationStopped())break e;pI(s,c,w),d=b}}}if(ny)throw e=vb,ny=!1,vb=null,e}function Cn(e,t){var r=t[kb];r===void 0&&(r=t[kb]=new Set);var o=e+"__bubble";r.has(o)||(ZA(t,e,2,!1),r.add(o))}function D_(e,t,r){var o=0;t&&(o|=4),ZA(r,e,o,t)}var ig="_reactListening"+Math.random().toString(36).slice(2);function Zp(e){if(!e[ig]){e[ig]=!0,tA.forEach(function(r){r!=="selectionchange"&&(PF.has(r)||D_(r,!1,e),D_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ig]||(t[ig]=!0,D_("selectionchange",!1,t))}}function ZA(e,t,r,o){switch(zA(t)){case 1:var s=jB;break;case 4:s=VB;break;default:s=lw}r=s.bind(null,t,r,e),s=void 0,!yb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function L_(e,t,r,o,s){var d=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var c=o.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(p===4)for(p=o.return;p!==null;){var b=p.tag;if((b===3||b===4)&&(b=p.stateNode.containerInfo,b===s||b.nodeType===8&&b.parentNode===s))return;p=p.return}for(;c!==null;){if(p=yc(c),p===null)return;if(b=p.tag,b===5||b===6){o=d=p;continue e}c=c.parentNode}}o=o.return}yA(function(){var w=d,T=iw(r),k=[];e:{var A=GA.get(e);if(A!==void 0){var $=uw,V=e;switch(e){case"keypress":if(Ag(r)===0)break e;case"keydown":case"keyup":$=nF;break;case"focusin":V="focus",$=k_;break;case"focusout":V="blur",$=k_;break;case"beforeblur":case"afterblur":$=k_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=tI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=WB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=aF;break;case VA:case UA:case HA:$=ZB;break;case WA:$=lF;break;case"scroll":$=UB;break;case"wheel":$=uF;break;case"copy":case"cut":case"paste":$=XB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=nI}var N=(t&4)!==0,G=!N&&e==="scroll",O=N?A!==null?A+"Capture":null:A;N=[];for(var R=w,M;R!==null;){M=R;var ee=M.stateNode;if(M.tag===5&&ee!==null&&(M=ee,O!==null&&(ee=Vp(R,O),ee!=null&&N.push(Kp(R,ee,M)))),G)break;R=R.return}0<N.length&&(A=new $(A,V,null,r,T),k.push({event:A,listeners:N}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",A&&r!==mb&&(V=r.relatedTarget||r.fromElement)&&(yc(V)||V[Ns]))break e;if(($||A)&&(A=T.window===T?T:(A=T.ownerDocument)?A.defaultView||A.parentWindow:window,$?(V=r.relatedTarget||r.toElement,$=w,V=V?yc(V):null,V!==null&&(G=Lc(V),V!==G||V.tag!==5&&V.tag!==6)&&(V=null)):($=null,V=w),$!==V)){if(N=tI,ee="onMouseLeave",O="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(N=nI,ee="onPointerLeave",O="onPointerEnter",R="pointer"),G=$==null?A:Uu($),M=V==null?A:Uu(V),A=new N(ee,R+"leave",$,r,T),A.target=G,A.relatedTarget=M,ee=null,yc(T)===w&&(N=new N(O,R+"enter",V,r,T),N.target=M,N.relatedTarget=G,ee=N),G=ee,$&&V)t:{for(N=$,O=V,R=0,M=N;M;M=Cu(M))R++;for(M=0,ee=O;ee;ee=Cu(ee))M++;for(;0<R-M;)N=Cu(N),R--;for(;0<M-R;)O=Cu(O),M--;for(;R--;){if(N===O||O!==null&&N===O.alternate)break t;N=Cu(N),O=Cu(O)}N=null}else N=null;$!==null&&fI(k,A,$,N,!1),V!==null&&G!==null&&fI(k,G,V,N,!0)}}e:{if(A=w?Uu(w):window,$=A.nodeName&&A.nodeName.toLowerCase(),$==="select"||$==="input"&&A.type==="file")var Z=yF;else if(aI(A))if(OA)Z=bF;else{Z=_F;var oe=vF}else($=A.nodeName)&&$.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(Z=xF);if(Z&&(Z=Z(e,w))){$A(k,Z,r,T);break e}oe&&oe(e,A,w),e==="focusout"&&(oe=A._wrapperState)&&oe.controlled&&A.type==="number"&&ub(A,"number",A.value)}switch(oe=w?Uu(w):window,e){case"focusin":(aI(oe)||oe.contentEditable==="true")&&(ju=oe,wb=w,Tp=null);break;case"focusout":Tp=wb=ju=null;break;case"mousedown":Sb=!0;break;case"contextmenu":case"mouseup":case"dragend":Sb=!1,dI(k,r,T);break;case"selectionchange":if(CF)break;case"keydown":case"keyup":dI(k,r,T)}var ie;if(hw)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Nu?DA(e,r)&&(W="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(W="onCompositionStart");W&&(MA&&r.locale!=="ko"&&(Nu||W!=="onCompositionStart"?W==="onCompositionEnd"&&Nu&&(ie=RA()):(_l=T,cw="value"in _l?_l.value:_l.textContent,Nu=!0)),oe=ly(w,W),0<oe.length&&(W=new rI(W,e,null,r,T),k.push({event:W,listeners:oe}),ie?W.data=ie:(ie=LA(r),ie!==null&&(W.data=ie)))),(ie=hF?pF(e,r):fF(e,r))&&(w=ly(w,"onBeforeInput"),0<w.length&&(T=new rI("onBeforeInput","beforeinput",null,r,T),k.push({event:T,listeners:w}),T.data=ie))}qA(k,t)})}function Kp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ly(e,t){for(var r=t+"Capture",o=[];e!==null;){var s=e,d=s.stateNode;s.tag===5&&d!==null&&(s=d,d=Vp(e,r),d!=null&&o.unshift(Kp(e,d,s)),d=Vp(e,t),d!=null&&o.push(Kp(e,d,s))),e=e.return}return o}function Cu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fI(e,t,r,o,s){for(var d=t._reactName,p=[];r!==null&&r!==o;){var c=r,b=c.alternate,w=c.stateNode;if(b!==null&&b===o)break;c.tag===5&&w!==null&&(c=w,s?(b=Vp(r,d),b!=null&&p.unshift(Kp(r,b,c))):s||(b=Vp(r,d),b!=null&&p.push(Kp(r,b,c)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var kF=/\r\n?/g,EF=/\u0000|\uFFFD/g;function mI(e){return(typeof e=="string"?e:""+e).replace(kF,`
`).replace(EF,"")}function og(e,t,r){if(t=mI(t),mI(e)!==t&&r)throw Error(vt(425))}function cy(){}var Cb=null,Ib=null;function Tb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pb=typeof setTimeout=="function"?setTimeout:void 0,AF=typeof clearTimeout=="function"?clearTimeout:void 0,gI=typeof Promise=="function"?Promise:void 0,zF=typeof queueMicrotask=="function"?queueMicrotask:typeof gI<"u"?function(e){return gI.resolve(null).then(e).catch(RF)}:Pb;function RF(e){setTimeout(function(){throw e})}function $_(e,t){var r=t,o=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(o===0){e.removeChild(s),Wp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=s}while(r);Wp(t)}function Il(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Md=Math.random().toString(36).slice(2),is="__reactFiber$"+Md,Xp="__reactProps$"+Md,Ns="__reactContainer$"+Md,kb="__reactEvents$"+Md,MF="__reactListeners$"+Md,DF="__reactHandles$"+Md;function yc(e){var t=e[is];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ns]||r[is]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=yI(e);e!==null;){if(r=e[is])return r;e=yI(e)}return t}e=r,r=e.parentNode}return null}function bf(e){return e=e[is]||e[Ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Uu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(vt(33))}function kv(e){return e[Xp]||null}var Eb=[],Hu=-1;function Ol(e){return{current:e}}function Tn(e){0>Hu||(e.current=Eb[Hu],Eb[Hu]=null,Hu--)}function xn(e,t){Hu++,Eb[Hu]=e.current,e.current=t}var Ml={},Yi=Ol(Ml),wo=Ol(!1),kc=Ml;function hd(e,t){var r=e.type.contextTypes;if(!r)return Ml;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var s={},d;for(d in r)s[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function So(e){return e=e.childContextTypes,e!=null}function uy(){Tn(wo),Tn(Yi)}function vI(e,t,r){if(Yi.current!==Ml)throw Error(vt(168));xn(Yi,t),xn(wo,r)}function KA(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var s in o)if(!(s in t))throw Error(vt(108,vB(e)||"Unknown",s));return Bn({},r,o)}function dy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ml,kc=Yi.current,xn(Yi,e),xn(wo,wo.current),!0}function _I(e,t,r){var o=e.stateNode;if(!o)throw Error(vt(169));r?(e=KA(e,t,kc),o.__reactInternalMemoizedMergedChildContext=e,Tn(wo),Tn(Yi),xn(Yi,e)):Tn(wo),xn(wo,r)}var zs=null,Ev=!1,O_=!1;function XA(e){zs===null?zs=[e]:zs.push(e)}function LF(e){Ev=!0,XA(e)}function Bl(){if(!O_&&zs!==null){O_=!0;var e=0,t=an;try{var r=zs;for(an=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}zs=null,Ev=!1}catch(s){throw zs!==null&&(zs=zs.slice(e+1)),bA(ow,Bl),s}finally{an=t,O_=!1}}return null}var Wu=[],Gu=0,hy=null,py=0,aa=[],sa=0,Ec=null,Ms=1,Ds="";function pc(e,t){Wu[Gu++]=py,Wu[Gu++]=hy,hy=e,py=t}function JA(e,t,r){aa[sa++]=Ms,aa[sa++]=Ds,aa[sa++]=Ec,Ec=e;var o=Ms;e=Ds;var s=32-Ba(o)-1;o&=~(1<<s),r+=1;var d=32-Ba(t)+s;if(30<d){var p=s-s%5;d=(o&(1<<p)-1).toString(32),o>>=p,s-=p,Ms=1<<32-Ba(t)+s|r<<s|o,Ds=d+e}else Ms=1<<d|r<<s|o,Ds=e}function fw(e){e.return!==null&&(pc(e,1),JA(e,1,0))}function mw(e){for(;e===hy;)hy=Wu[--Gu],Wu[Gu]=null,py=Wu[--Gu],Wu[Gu]=null;for(;e===Ec;)Ec=aa[--sa],aa[sa]=null,Ds=aa[--sa],aa[sa]=null,Ms=aa[--sa],aa[sa]=null}var Uo=null,jo=null,zn=!1,$a=null;function YA(e,t){var r=la(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function xI(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Uo=e,jo=Il(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Uo=e,jo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ec!==null?{id:Ms,overflow:Ds}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=la(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Uo=e,jo=null,!0):!1;default:return!1}}function Ab(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zb(e){if(zn){var t=jo;if(t){var r=t;if(!xI(e,t)){if(Ab(e))throw Error(vt(418));t=Il(r.nextSibling);var o=Uo;t&&xI(e,t)?YA(o,r):(e.flags=e.flags&-4097|2,zn=!1,Uo=e)}}else{if(Ab(e))throw Error(vt(418));e.flags=e.flags&-4097|2,zn=!1,Uo=e}}}function bI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Uo=e}function ag(e){if(e!==Uo)return!1;if(!zn)return bI(e),zn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tb(e.type,e.memoizedProps)),t&&(t=jo)){if(Ab(e))throw QA(),Error(vt(418));for(;t;)YA(e,t),t=Il(t.nextSibling)}if(bI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(vt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jo=Il(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jo=null}}else jo=Uo?Il(e.stateNode.nextSibling):null;return!0}function QA(){for(var e=jo;e;)e=Il(e.nextSibling)}function pd(){jo=Uo=null,zn=!1}function gw(e){$a===null?$a=[e]:$a.push(e)}var $F=Hs.ReactCurrentBatchConfig;function tp(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(vt(309));var o=r.stateNode}if(!o)throw Error(vt(147,e));var s=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var c=s.refs;p===null?delete c[d]:c[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(vt(284));if(!r._owner)throw Error(vt(290,e))}return e}function sg(e,t){throw e=Object.prototype.toString.call(t),Error(vt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wI(e){var t=e._init;return t(e._payload)}function ez(e){function t(O,R){if(e){var M=O.deletions;M===null?(O.deletions=[R],O.flags|=16):M.push(R)}}function r(O,R){if(!e)return null;for(;R!==null;)t(O,R),R=R.sibling;return null}function o(O,R){for(O=new Map;R!==null;)R.key!==null?O.set(R.key,R):O.set(R.index,R),R=R.sibling;return O}function s(O,R){return O=El(O,R),O.index=0,O.sibling=null,O}function d(O,R,M){return O.index=M,e?(M=O.alternate,M!==null?(M=M.index,M<R?(O.flags|=2,R):M):(O.flags|=2,R)):(O.flags|=1048576,R)}function p(O){return e&&O.alternate===null&&(O.flags|=2),O}function c(O,R,M,ee){return R===null||R.tag!==6?(R=H_(M,O.mode,ee),R.return=O,R):(R=s(R,M),R.return=O,R)}function b(O,R,M,ee){var Z=M.type;return Z===Fu?T(O,R,M.props.children,ee,M.key):R!==null&&(R.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===pl&&wI(Z)===R.type)?(ee=s(R,M.props),ee.ref=tp(O,R,M),ee.return=O,ee):(ee=Og(M.type,M.key,M.props,null,O.mode,ee),ee.ref=tp(O,R,M),ee.return=O,ee)}function w(O,R,M,ee){return R===null||R.tag!==4||R.stateNode.containerInfo!==M.containerInfo||R.stateNode.implementation!==M.implementation?(R=W_(M,O.mode,ee),R.return=O,R):(R=s(R,M.children||[]),R.return=O,R)}function T(O,R,M,ee,Z){return R===null||R.tag!==7?(R=wc(M,O.mode,ee,Z),R.return=O,R):(R=s(R,M),R.return=O,R)}function k(O,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return R=H_(""+R,O.mode,M),R.return=O,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Xm:return M=Og(R.type,R.key,R.props,null,O.mode,M),M.ref=tp(O,null,R),M.return=O,M;case Bu:return R=W_(R,O.mode,M),R.return=O,R;case pl:var ee=R._init;return k(O,ee(R._payload),M)}if(gp(R)||Xh(R))return R=wc(R,O.mode,M,null),R.return=O,R;sg(O,R)}return null}function A(O,R,M,ee){var Z=R!==null?R.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return Z!==null?null:c(O,R,""+M,ee);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Xm:return M.key===Z?b(O,R,M,ee):null;case Bu:return M.key===Z?w(O,R,M,ee):null;case pl:return Z=M._init,A(O,R,Z(M._payload),ee)}if(gp(M)||Xh(M))return Z!==null?null:T(O,R,M,ee,null);sg(O,M)}return null}function $(O,R,M,ee,Z){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return O=O.get(M)||null,c(R,O,""+ee,Z);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Xm:return O=O.get(ee.key===null?M:ee.key)||null,b(R,O,ee,Z);case Bu:return O=O.get(ee.key===null?M:ee.key)||null,w(R,O,ee,Z);case pl:var oe=ee._init;return $(O,R,M,oe(ee._payload),Z)}if(gp(ee)||Xh(ee))return O=O.get(M)||null,T(R,O,ee,Z,null);sg(R,ee)}return null}function V(O,R,M,ee){for(var Z=null,oe=null,ie=R,W=R=0,Ie=null;ie!==null&&W<M.length;W++){ie.index>W?(Ie=ie,ie=null):Ie=ie.sibling;var _e=A(O,ie,M[W],ee);if(_e===null){ie===null&&(ie=Ie);break}e&&ie&&_e.alternate===null&&t(O,ie),R=d(_e,R,W),oe===null?Z=_e:oe.sibling=_e,oe=_e,ie=Ie}if(W===M.length)return r(O,ie),zn&&pc(O,W),Z;if(ie===null){for(;W<M.length;W++)ie=k(O,M[W],ee),ie!==null&&(R=d(ie,R,W),oe===null?Z=ie:oe.sibling=ie,oe=ie);return zn&&pc(O,W),Z}for(ie=o(O,ie);W<M.length;W++)Ie=$(ie,O,W,M[W],ee),Ie!==null&&(e&&Ie.alternate!==null&&ie.delete(Ie.key===null?W:Ie.key),R=d(Ie,R,W),oe===null?Z=Ie:oe.sibling=Ie,oe=Ie);return e&&ie.forEach(function(Te){return t(O,Te)}),zn&&pc(O,W),Z}function N(O,R,M,ee){var Z=Xh(M);if(typeof Z!="function")throw Error(vt(150));if(M=Z.call(M),M==null)throw Error(vt(151));for(var oe=Z=null,ie=R,W=R=0,Ie=null,_e=M.next();ie!==null&&!_e.done;W++,_e=M.next()){ie.index>W?(Ie=ie,ie=null):Ie=ie.sibling;var Te=A(O,ie,_e.value,ee);if(Te===null){ie===null&&(ie=Ie);break}e&&ie&&Te.alternate===null&&t(O,ie),R=d(Te,R,W),oe===null?Z=Te:oe.sibling=Te,oe=Te,ie=Ie}if(_e.done)return r(O,ie),zn&&pc(O,W),Z;if(ie===null){for(;!_e.done;W++,_e=M.next())_e=k(O,_e.value,ee),_e!==null&&(R=d(_e,R,W),oe===null?Z=_e:oe.sibling=_e,oe=_e);return zn&&pc(O,W),Z}for(ie=o(O,ie);!_e.done;W++,_e=M.next())_e=$(ie,O,W,_e.value,ee),_e!==null&&(e&&_e.alternate!==null&&ie.delete(_e.key===null?W:_e.key),R=d(_e,R,W),oe===null?Z=_e:oe.sibling=_e,oe=_e);return e&&ie.forEach(function(Ae){return t(O,Ae)}),zn&&pc(O,W),Z}function G(O,R,M,ee){if(typeof M=="object"&&M!==null&&M.type===Fu&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Xm:e:{for(var Z=M.key,oe=R;oe!==null;){if(oe.key===Z){if(Z=M.type,Z===Fu){if(oe.tag===7){r(O,oe.sibling),R=s(oe,M.props.children),R.return=O,O=R;break e}}else if(oe.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===pl&&wI(Z)===oe.type){r(O,oe.sibling),R=s(oe,M.props),R.ref=tp(O,oe,M),R.return=O,O=R;break e}r(O,oe);break}else t(O,oe);oe=oe.sibling}M.type===Fu?(R=wc(M.props.children,O.mode,ee,M.key),R.return=O,O=R):(ee=Og(M.type,M.key,M.props,null,O.mode,ee),ee.ref=tp(O,R,M),ee.return=O,O=ee)}return p(O);case Bu:e:{for(oe=M.key;R!==null;){if(R.key===oe)if(R.tag===4&&R.stateNode.containerInfo===M.containerInfo&&R.stateNode.implementation===M.implementation){r(O,R.sibling),R=s(R,M.children||[]),R.return=O,O=R;break e}else{r(O,R);break}else t(O,R);R=R.sibling}R=W_(M,O.mode,ee),R.return=O,O=R}return p(O);case pl:return oe=M._init,G(O,R,oe(M._payload),ee)}if(gp(M))return V(O,R,M,ee);if(Xh(M))return N(O,R,M,ee);sg(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,R!==null&&R.tag===6?(r(O,R.sibling),R=s(R,M),R.return=O,O=R):(r(O,R),R=H_(M,O.mode,ee),R.return=O,O=R),p(O)):r(O,R)}return G}var fd=ez(!0),tz=ez(!1),fy=Ol(null),my=null,qu=null,yw=null;function vw(){yw=qu=my=null}function _w(e){var t=fy.current;Tn(fy),e._currentValue=t}function Rb(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function od(e,t){my=e,yw=qu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bo=!0),e.firstContext=null)}function da(e){var t=e._currentValue;if(yw!==e)if(e={context:e,memoizedValue:t,next:null},qu===null){if(my===null)throw Error(vt(308));qu=e,my.dependencies={lanes:0,firstContext:e}}else qu=qu.next=e;return t}var vc=null;function xw(e){vc===null?vc=[e]:vc.push(e)}function rz(e,t,r,o){var s=t.interleaved;return s===null?(r.next=r,xw(t)):(r.next=s.next,s.next=r),t.interleaved=r,js(e,o)}function js(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fl=!1;function bw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tl(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Xr&2){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,js(e,r)}return s=o.interleaved,s===null?(t.next=t,xw(o)):(t.next=s.next,s.next=t),o.interleaved=t,js(e,r)}function zg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,aw(e,r)}}function SI(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var s=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?s=d=p:d=d.next=p,r=r.next}while(r!==null);d===null?s=d=t:d=d.next=t}else s=d=t;r={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function gy(e,t,r,o){var s=e.updateQueue;fl=!1;var d=s.firstBaseUpdate,p=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var b=c,w=b.next;b.next=null,p===null?d=w:p.next=w,p=b;var T=e.alternate;T!==null&&(T=T.updateQueue,c=T.lastBaseUpdate,c!==p&&(c===null?T.firstBaseUpdate=w:c.next=w,T.lastBaseUpdate=b))}if(d!==null){var k=s.baseState;p=0,T=w=b=null,c=d;do{var A=c.lane,$=c.eventTime;if((o&A)===A){T!==null&&(T=T.next={eventTime:$,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var V=e,N=c;switch(A=t,$=r,N.tag){case 1:if(V=N.payload,typeof V=="function"){k=V.call($,k,A);break e}k=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=N.payload,A=typeof V=="function"?V.call($,k,A):V,A==null)break e;k=Bn({},k,A);break e;case 2:fl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,A=s.effects,A===null?s.effects=[c]:A.push(c))}else $={eventTime:$,lane:A,tag:c.tag,payload:c.payload,callback:c.callback,next:null},T===null?(w=T=$,b=k):T=T.next=$,p|=A;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;A=c,c=A.next,A.next=null,s.lastBaseUpdate=A,s.shared.pending=null}}while(!0);if(T===null&&(b=k),s.baseState=b,s.firstBaseUpdate=w,s.lastBaseUpdate=T,t=s.shared.interleaved,t!==null){s=t;do p|=s.lane,s=s.next;while(s!==t)}else d===null&&(s.shared.lanes=0);zc|=p,e.lanes=p,e.memoizedState=k}}function CI(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],s=o.callback;if(s!==null){if(o.callback=null,o=r,typeof s!="function")throw Error(vt(191,s));s.call(o)}}}var wf={},ls=Ol(wf),Jp=Ol(wf),Yp=Ol(wf);function _c(e){if(e===wf)throw Error(vt(174));return e}function ww(e,t){switch(xn(Yp,t),xn(Jp,e),xn(ls,wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hb(t,e)}Tn(ls),xn(ls,t)}function md(){Tn(ls),Tn(Jp),Tn(Yp)}function iz(e){_c(Yp.current);var t=_c(ls.current),r=hb(t,e.type);t!==r&&(xn(Jp,e),xn(ls,r))}function Sw(e){Jp.current===e&&(Tn(ls),Tn(Jp))}var $n=Ol(0);function yy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var B_=[];function Cw(){for(var e=0;e<B_.length;e++)B_[e]._workInProgressVersionPrimary=null;B_.length=0}var Rg=Hs.ReactCurrentDispatcher,F_=Hs.ReactCurrentBatchConfig,Ac=0,On=null,di=null,xi=null,vy=!1,Pp=!1,Qp=0,OF=0;function qi(){throw Error(vt(321))}function Iw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ja(e[r],t[r]))return!1;return!0}function Tw(e,t,r,o,s,d){if(Ac=d,On=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Rg.current=e===null||e.memoizedState===null?jF:VF,e=r(o,s),Pp){d=0;do{if(Pp=!1,Qp=0,25<=d)throw Error(vt(301));d+=1,xi=di=null,t.updateQueue=null,Rg.current=UF,e=r(o,s)}while(Pp)}if(Rg.current=_y,t=di!==null&&di.next!==null,Ac=0,xi=di=On=null,vy=!1,t)throw Error(vt(300));return e}function Pw(){var e=Qp!==0;return Qp=0,e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?On.memoizedState=xi=e:xi=xi.next=e,xi}function ha(){if(di===null){var e=On.alternate;e=e!==null?e.memoizedState:null}else e=di.next;var t=xi===null?On.memoizedState:xi.next;if(t!==null)xi=t,di=e;else{if(e===null)throw Error(vt(310));di=e,e={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},xi===null?On.memoizedState=xi=e:xi=xi.next=e}return xi}function ef(e,t){return typeof t=="function"?t(e):t}function N_(e){var t=ha(),r=t.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=e;var o=di,s=o.baseQueue,d=r.pending;if(d!==null){if(s!==null){var p=s.next;s.next=d.next,d.next=p}o.baseQueue=s=d,r.pending=null}if(s!==null){d=s.next,o=o.baseState;var c=p=null,b=null,w=d;do{var T=w.lane;if((Ac&T)===T)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var k={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(c=b=k,p=o):b=b.next=k,On.lanes|=T,zc|=T}w=w.next}while(w!==null&&w!==d);b===null?p=o:b.next=c,ja(o,t.memoizedState)||(bo=!0),t.memoizedState=o,t.baseState=p,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){s=e;do d=s.lane,On.lanes|=d,zc|=d,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function j_(e){var t=ha(),r=t.queue;if(r===null)throw Error(vt(311));r.lastRenderedReducer=e;var o=r.dispatch,s=r.pending,d=t.memoizedState;if(s!==null){r.pending=null;var p=s=s.next;do d=e(d,p.action),p=p.next;while(p!==s);ja(d,t.memoizedState)||(bo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function oz(){}function az(e,t){var r=On,o=ha(),s=t(),d=!ja(o.memoizedState,s);if(d&&(o.memoizedState=s,bo=!0),o=o.queue,kw(cz.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||xi!==null&&xi.memoizedState.tag&1){if(r.flags|=2048,tf(9,lz.bind(null,r,o,s,t),void 0,null),bi===null)throw Error(vt(349));Ac&30||sz(r,t,s)}return s}function sz(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lz(e,t,r,o){t.value=r,t.getSnapshot=o,uz(t)&&dz(e)}function cz(e,t,r){return r(function(){uz(t)&&dz(e)})}function uz(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ja(e,r)}catch{return!0}}function dz(e){var t=js(e,1);t!==null&&Fa(t,e,1,-1)}function II(e){var t=ts();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:e},t.queue=e,e=e.dispatch=NF.bind(null,On,e),[t.memoizedState,e]}function tf(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=On.updateQueue,t===null?(t={lastEffect:null,stores:null},On.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function hz(){return ha().memoizedState}function Mg(e,t,r,o){var s=ts();On.flags|=e,s.memoizedState=tf(1|t,r,void 0,o===void 0?null:o)}function Av(e,t,r,o){var s=ha();o=o===void 0?null:o;var d=void 0;if(di!==null){var p=di.memoizedState;if(d=p.destroy,o!==null&&Iw(o,p.deps)){s.memoizedState=tf(t,r,d,o);return}}On.flags|=e,s.memoizedState=tf(1|t,r,d,o)}function TI(e,t){return Mg(8390656,8,e,t)}function kw(e,t){return Av(2048,8,e,t)}function pz(e,t){return Av(4,2,e,t)}function fz(e,t){return Av(4,4,e,t)}function mz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gz(e,t,r){return r=r!=null?r.concat([e]):null,Av(4,4,mz.bind(null,t,e),r)}function Ew(){}function yz(e,t){var r=ha();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&Iw(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function vz(e,t){var r=ha();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&Iw(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function _z(e,t,r){return Ac&21?(ja(r,t)||(r=CA(),On.lanes|=r,zc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r)}function BF(e,t){var r=an;an=r!==0&&4>r?r:4,e(!0);var o=F_.transition;F_.transition={};try{e(!1),t()}finally{an=r,F_.transition=o}}function xz(){return ha().memoizedState}function FF(e,t,r){var o=kl(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},bz(e))wz(t,r);else if(r=rz(e,t,r,o),r!==null){var s=uo();Fa(r,e,o,s),Sz(r,t,o)}}function NF(e,t,r){var o=kl(e),s={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(bz(e))wz(t,s);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,c=d(p,r);if(s.hasEagerState=!0,s.eagerState=c,ja(c,p)){var b=t.interleaved;b===null?(s.next=s,xw(t)):(s.next=b.next,b.next=s),t.interleaved=s;return}}catch{}finally{}r=rz(e,t,s,o),r!==null&&(s=uo(),Fa(r,e,o,s),Sz(r,t,o))}}function bz(e){var t=e.alternate;return e===On||t!==null&&t===On}function wz(e,t){Pp=vy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Sz(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,aw(e,r)}}var _y={readContext:da,useCallback:qi,useContext:qi,useEffect:qi,useImperativeHandle:qi,useInsertionEffect:qi,useLayoutEffect:qi,useMemo:qi,useReducer:qi,useRef:qi,useState:qi,useDebugValue:qi,useDeferredValue:qi,useTransition:qi,useMutableSource:qi,useSyncExternalStore:qi,useId:qi,unstable_isNewReconciler:!1},jF={readContext:da,useCallback:function(e,t){return ts().memoizedState=[e,t===void 0?null:t],e},useContext:da,useEffect:TI,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mg(4194308,4,mz.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mg(4,2,e,t)},useMemo:function(e,t){var r=ts();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=ts();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=FF.bind(null,On,e),[o.memoizedState,e]},useRef:function(e){var t=ts();return e={current:e},t.memoizedState=e},useState:II,useDebugValue:Ew,useDeferredValue:function(e){return ts().memoizedState=e},useTransition:function(){var e=II(!1),t=e[0];return e=BF.bind(null,e[1]),ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=On,s=ts();if(zn){if(r===void 0)throw Error(vt(407));r=r()}else{if(r=t(),bi===null)throw Error(vt(349));Ac&30||sz(o,t,r)}s.memoizedState=r;var d={value:r,getSnapshot:t};return s.queue=d,TI(cz.bind(null,o,d,e),[e]),o.flags|=2048,tf(9,lz.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=ts(),t=bi.identifierPrefix;if(zn){var r=Ds,o=Ms;r=(o&~(1<<32-Ba(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Qp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=OF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},VF={readContext:da,useCallback:yz,useContext:da,useEffect:kw,useImperativeHandle:gz,useInsertionEffect:pz,useLayoutEffect:fz,useMemo:vz,useReducer:N_,useRef:hz,useState:function(){return N_(ef)},useDebugValue:Ew,useDeferredValue:function(e){var t=ha();return _z(t,di.memoizedState,e)},useTransition:function(){var e=N_(ef)[0],t=ha().memoizedState;return[e,t]},useMutableSource:oz,useSyncExternalStore:az,useId:xz,unstable_isNewReconciler:!1},UF={readContext:da,useCallback:yz,useContext:da,useEffect:kw,useImperativeHandle:gz,useInsertionEffect:pz,useLayoutEffect:fz,useMemo:vz,useReducer:j_,useRef:hz,useState:function(){return j_(ef)},useDebugValue:Ew,useDeferredValue:function(e){var t=ha();return di===null?t.memoizedState=e:_z(t,di.memoizedState,e)},useTransition:function(){var e=j_(ef)[0],t=ha().memoizedState;return[e,t]},useMutableSource:oz,useSyncExternalStore:az,useId:xz,unstable_isNewReconciler:!1};function Ma(e,t){if(e&&e.defaultProps){t=Bn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Mb(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:Bn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var zv={isMounted:function(e){return(e=e._reactInternals)?Lc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=uo(),s=kl(e),d=Ls(o,s);d.payload=t,r!=null&&(d.callback=r),t=Tl(e,d,s),t!==null&&(Fa(t,e,s,o),zg(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=uo(),s=kl(e),d=Ls(o,s);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Tl(e,d,s),t!==null&&(Fa(t,e,s,o),zg(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=uo(),o=kl(e),s=Ls(r,o);s.tag=2,t!=null&&(s.callback=t),t=Tl(e,s,o),t!==null&&(Fa(t,e,o,r),zg(t,e,o))}};function PI(e,t,r,o,s,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,p):t.prototype&&t.prototype.isPureReactComponent?!qp(r,o)||!qp(s,d):!0}function Cz(e,t,r){var o=!1,s=Ml,d=t.contextType;return typeof d=="object"&&d!==null?d=da(d):(s=So(t)?kc:Yi.current,o=t.contextTypes,d=(o=o!=null)?hd(e,s):Ml),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zv,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=d),t}function kI(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&zv.enqueueReplaceState(t,t.state,null)}function Db(e,t,r,o){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},bw(e);var d=t.contextType;typeof d=="object"&&d!==null?s.context=da(d):(d=So(t)?kc:Yi.current,s.context=hd(e,d)),s.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Mb(e,t,d,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&zv.enqueueReplaceState(s,s.state,null),gy(e,r,s,o),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function gd(e,t){try{var r="",o=t;do r+=yB(o),o=o.return;while(o);var s=r}catch(d){s=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:s,digest:null}}function V_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Lb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var HF=typeof WeakMap=="function"?WeakMap:Map;function Iz(e,t,r){r=Ls(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){by||(by=!0,Wb=o),Lb(e,t)},r}function Tz(e,t,r){r=Ls(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var s=t.value;r.payload=function(){return o(s)},r.callback=function(){Lb(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){Lb(e,t),typeof o!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function EI(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new HF;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(r)||(s.add(r),e=i6.bind(null,e,t,r),t.then(e,e))}function AI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zI(e,t,r,o,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ls(-1,1),t.tag=2,Tl(r,t,1))),r.lanes|=1),e)}var WF=Hs.ReactCurrentOwner,bo=!1;function co(e,t,r,o){t.child=e===null?tz(t,null,r,o):fd(t,e.child,r,o)}function RI(e,t,r,o,s){r=r.render;var d=t.ref;return od(t,s),o=Tw(e,t,r,o,d,s),r=Pw(),e!==null&&!bo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(zn&&r&&fw(t),t.flags|=1,co(e,t,o,s),t.child)}function MI(e,t,r,o,s){if(e===null){var d=r.type;return typeof d=="function"&&!Ow(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Pz(e,t,d,o,s)):(e=Og(r.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&s)){var p=d.memoizedProps;if(r=r.compare,r=r!==null?r:qp,r(p,o)&&e.ref===t.ref)return Vs(e,t,s)}return t.flags|=1,e=El(d,o),e.ref=t.ref,e.return=t,t.child=e}function Pz(e,t,r,o,s){if(e!==null){var d=e.memoizedProps;if(qp(d,o)&&e.ref===t.ref)if(bo=!1,t.pendingProps=o=d,(e.lanes&s)!==0)e.flags&131072&&(bo=!0);else return t.lanes=e.lanes,Vs(e,t,s)}return $b(e,t,r,o,s)}function kz(e,t,r){var o=t.pendingProps,s=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(Ku,Lo),Lo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xn(Ku,Lo),Lo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,xn(Ku,Lo),Lo|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,xn(Ku,Lo),Lo|=o;return co(e,t,s,r),t.child}function Ez(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $b(e,t,r,o,s){var d=So(r)?kc:Yi.current;return d=hd(t,d),od(t,s),r=Tw(e,t,r,o,d,s),o=Pw(),e!==null&&!bo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(zn&&o&&fw(t),t.flags|=1,co(e,t,r,s),t.child)}function DI(e,t,r,o,s){if(So(r)){var d=!0;dy(t)}else d=!1;if(od(t,s),t.stateNode===null)Dg(e,t),Cz(t,r,o),Db(t,r,o,s),o=!0;else if(e===null){var p=t.stateNode,c=t.memoizedProps;p.props=c;var b=p.context,w=r.contextType;typeof w=="object"&&w!==null?w=da(w):(w=So(r)?kc:Yi.current,w=hd(t,w));var T=r.getDerivedStateFromProps,k=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function";k||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==o||b!==w)&&kI(t,p,o,w),fl=!1;var A=t.memoizedState;p.state=A,gy(t,o,p,s),b=t.memoizedState,c!==o||A!==b||wo.current||fl?(typeof T=="function"&&(Mb(t,r,T,o),b=t.memoizedState),(c=fl||PI(t,r,c,o,A,b,w))?(k||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),p.props=o,p.state=b,p.context=w,o=c):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{p=t.stateNode,nz(e,t),c=t.memoizedProps,w=t.type===t.elementType?c:Ma(t.type,c),p.props=w,k=t.pendingProps,A=p.context,b=r.contextType,typeof b=="object"&&b!==null?b=da(b):(b=So(r)?kc:Yi.current,b=hd(t,b));var $=r.getDerivedStateFromProps;(T=typeof $=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==k||A!==b)&&kI(t,p,o,b),fl=!1,A=t.memoizedState,p.state=A,gy(t,o,p,s);var V=t.memoizedState;c!==k||A!==V||wo.current||fl?(typeof $=="function"&&(Mb(t,r,$,o),V=t.memoizedState),(w=fl||PI(t,r,w,o,A,V,b)||!1)?(T||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,V,b),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,V,b)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=V),p.props=o,p.state=V,p.context=b,o=w):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),o=!1)}return Ob(e,t,r,o,d,s)}function Ob(e,t,r,o,s,d){Ez(e,t);var p=(t.flags&128)!==0;if(!o&&!p)return s&&_I(t,r,!1),Vs(e,t,d);o=t.stateNode,WF.current=t;var c=p&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&p?(t.child=fd(t,e.child,null,d),t.child=fd(t,null,c,d)):co(e,t,c,d),t.memoizedState=o.state,s&&_I(t,r,!0),t.child}function Az(e){var t=e.stateNode;t.pendingContext?vI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vI(e,t.context,!1),ww(e,t.containerInfo)}function LI(e,t,r,o,s){return pd(),gw(s),t.flags|=256,co(e,t,r,o),t.child}var Bb={dehydrated:null,treeContext:null,retryLane:0};function Fb(e){return{baseLanes:e,cachePool:null,transitions:null}}function zz(e,t,r){var o=t.pendingProps,s=$n.current,d=!1,p=(t.flags&128)!==0,c;if((c=p)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),xn($n,s&1),e===null)return zb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=o.children,e=o.fallback,d?(o=t.mode,d=t.child,p={mode:"hidden",children:p},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=p):d=Dv(p,o,0,null),e=wc(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Fb(r),t.memoizedState=Bb,e):Aw(t,p));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return GF(e,t,p,o,c,s,r);if(d){d=o.fallback,p=t.mode,s=e.child,c=s.sibling;var b={mode:"hidden",children:o.children};return!(p&1)&&t.child!==s?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=El(s,b),o.subtreeFlags=s.subtreeFlags&14680064),c!==null?d=El(c,d):(d=wc(d,p,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,p=e.child.memoizedState,p=p===null?Fb(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~r,t.memoizedState=Bb,o}return d=e.child,e=d.sibling,o=El(d,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Aw(e,t){return t=Dv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lg(e,t,r,o){return o!==null&&gw(o),fd(t,e.child,null,r),e=Aw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GF(e,t,r,o,s,d,p){if(r)return t.flags&256?(t.flags&=-257,o=V_(Error(vt(422))),lg(e,t,p,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,s=t.mode,o=Dv({mode:"visible",children:o.children},s,0,null),d=wc(d,s,p,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,t.mode&1&&fd(t,e.child,null,p),t.child.memoizedState=Fb(p),t.memoizedState=Bb,d);if(!(t.mode&1))return lg(e,t,p,null);if(s.data==="$!"){if(o=s.nextSibling&&s.nextSibling.dataset,o)var c=o.dgst;return o=c,d=Error(vt(419)),o=V_(d,o,void 0),lg(e,t,p,o)}if(c=(p&e.childLanes)!==0,bo||c){if(o=bi,o!==null){switch(p&-p){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(o.suspendedLanes|p)?0:s,s!==0&&s!==d.retryLane&&(d.retryLane=s,js(e,s),Fa(o,e,s,-1))}return $w(),o=V_(Error(vt(421))),lg(e,t,p,o)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=o6.bind(null,e),s._reactRetry=t,null):(e=d.treeContext,jo=Il(s.nextSibling),Uo=t,zn=!0,$a=null,e!==null&&(aa[sa++]=Ms,aa[sa++]=Ds,aa[sa++]=Ec,Ms=e.id,Ds=e.overflow,Ec=t),t=Aw(t,o.children),t.flags|=4096,t)}function $I(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Rb(e.return,t,r)}function U_(e,t,r,o,s){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:s}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=s)}function Rz(e,t,r){var o=t.pendingProps,s=o.revealOrder,d=o.tail;if(co(e,t,o.children,r),o=$n.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$I(e,r,t);else if(e.tag===19)$I(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(xn($n,o),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&yy(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),U_(t,!1,s,r,d);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&yy(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}U_(t,!0,r,null,d);break;case"together":U_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Dg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(vt(153));if(t.child!==null){for(e=t.child,r=El(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=El(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qF(e,t,r){switch(t.tag){case 3:Az(t),pd();break;case 5:iz(t);break;case 1:So(t.type)&&dy(t);break;case 4:ww(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,s=t.memoizedProps.value;xn(fy,o._currentValue),o._currentValue=s;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(xn($n,$n.current&1),t.flags|=128,null):r&t.child.childLanes?zz(e,t,r):(xn($n,$n.current&1),e=Vs(e,t,r),e!==null?e.sibling:null);xn($n,$n.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return Rz(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xn($n,$n.current),o)break;return null;case 22:case 23:return t.lanes=0,kz(e,t,r)}return Vs(e,t,r)}var Mz,Nb,Dz,Lz;Mz=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Nb=function(){};Dz=function(e,t,r,o){var s=e.memoizedProps;if(s!==o){e=t.stateNode,_c(ls.current);var d=null;switch(r){case"input":s=lb(e,s),o=lb(e,o),d=[];break;case"select":s=Bn({},s,{value:void 0}),o=Bn({},o,{value:void 0}),d=[];break;case"textarea":s=db(e,s),o=db(e,o),d=[];break;default:typeof s.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=cy)}pb(r,o);var p;r=null;for(w in s)if(!o.hasOwnProperty(w)&&s.hasOwnProperty(w)&&s[w]!=null)if(w==="style"){var c=s[w];for(p in c)c.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Np.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in o){var b=o[w];if(c=s!=null?s[w]:void 0,o.hasOwnProperty(w)&&b!==c&&(b!=null||c!=null))if(w==="style")if(c){for(p in c)!c.hasOwnProperty(p)||b&&b.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in b)b.hasOwnProperty(p)&&c[p]!==b[p]&&(r||(r={}),r[p]=b[p])}else r||(d||(d=[]),d.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,c=c?c.__html:void 0,b!=null&&c!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Np.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&Cn("scroll",e),d||c===b||(d=[])):(d=d||[]).push(w,b))}r&&(d=d||[]).push("style",r);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};Lz=function(e,t,r,o){r!==o&&(t.flags|=4)};function rp(e,t){if(!zn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Zi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,o|=s.subtreeFlags&14680064,o|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function ZF(e,t,r){var o=t.pendingProps;switch(mw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(t),null;case 1:return So(t.type)&&uy(),Zi(t),null;case 3:return o=t.stateNode,md(),Tn(wo),Tn(Yi),Cw(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ag(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$a!==null&&(Zb($a),$a=null))),Nb(e,t),Zi(t),null;case 5:Sw(t);var s=_c(Yp.current);if(r=t.type,e!==null&&t.stateNode!=null)Dz(e,t,r,o,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(vt(166));return Zi(t),null}if(e=_c(ls.current),ag(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[is]=t,o[Xp]=d,e=(t.mode&1)!==0,r){case"dialog":Cn("cancel",o),Cn("close",o);break;case"iframe":case"object":case"embed":Cn("load",o);break;case"video":case"audio":for(s=0;s<vp.length;s++)Cn(vp[s],o);break;case"source":Cn("error",o);break;case"img":case"image":case"link":Cn("error",o),Cn("load",o);break;case"details":Cn("toggle",o);break;case"input":WC(o,d),Cn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Cn("invalid",o);break;case"textarea":qC(o,d),Cn("invalid",o)}pb(r,d),s=null;for(var p in d)if(d.hasOwnProperty(p)){var c=d[p];p==="children"?typeof c=="string"?o.textContent!==c&&(d.suppressHydrationWarning!==!0&&og(o.textContent,c,e),s=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(d.suppressHydrationWarning!==!0&&og(o.textContent,c,e),s=["children",""+c]):Np.hasOwnProperty(p)&&c!=null&&p==="onScroll"&&Cn("scroll",o)}switch(r){case"input":Jm(o),GC(o,d,!0);break;case"textarea":Jm(o),ZC(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=cy)}o=s,t.updateQueue=o,o!==null&&(t.flags|=4)}else{p=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cA(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=p.createElement(r,{is:o.is}):(e=p.createElement(r),r==="select"&&(p=e,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):e=p.createElementNS(e,r),e[is]=t,e[Xp]=o,Mz(e,t,!1,!1),t.stateNode=e;e:{switch(p=fb(r,o),r){case"dialog":Cn("cancel",e),Cn("close",e),s=o;break;case"iframe":case"object":case"embed":Cn("load",e),s=o;break;case"video":case"audio":for(s=0;s<vp.length;s++)Cn(vp[s],e);s=o;break;case"source":Cn("error",e),s=o;break;case"img":case"image":case"link":Cn("error",e),Cn("load",e),s=o;break;case"details":Cn("toggle",e),s=o;break;case"input":WC(e,o),s=lb(e,o),Cn("invalid",e);break;case"option":s=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},s=Bn({},o,{value:void 0}),Cn("invalid",e);break;case"textarea":qC(e,o),s=db(e,o),Cn("invalid",e);break;default:s=o}pb(r,s),c=s;for(d in c)if(c.hasOwnProperty(d)){var b=c[d];d==="style"?hA(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&uA(e,b)):d==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&jp(e,b):typeof b=="number"&&jp(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Np.hasOwnProperty(d)?b!=null&&d==="onScroll"&&Cn("scroll",e):b!=null&&ew(e,d,b,p))}switch(r){case"input":Jm(e),GC(e,o,!1);break;case"textarea":Jm(e),ZC(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Rl(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?td(e,!!o.multiple,d,!1):o.defaultValue!=null&&td(e,!!o.multiple,o.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=cy)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zi(t),null;case 6:if(e&&t.stateNode!=null)Lz(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(vt(166));if(r=_c(Yp.current),_c(ls.current),ag(t)){if(o=t.stateNode,r=t.memoizedProps,o[is]=t,(d=o.nodeValue!==r)&&(e=Uo,e!==null))switch(e.tag){case 3:og(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&og(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[is]=t,t.stateNode=o}return Zi(t),null;case 13:if(Tn($n),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(zn&&jo!==null&&t.mode&1&&!(t.flags&128))QA(),pd(),t.flags|=98560,d=!1;else if(d=ag(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(vt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(vt(317));d[is]=t}else pd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zi(t),d=!1}else $a!==null&&(Zb($a),$a=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||$n.current&1?hi===0&&(hi=3):$w())),t.updateQueue!==null&&(t.flags|=4),Zi(t),null);case 4:return md(),Nb(e,t),e===null&&Zp(t.stateNode.containerInfo),Zi(t),null;case 10:return _w(t.type._context),Zi(t),null;case 17:return So(t.type)&&uy(),Zi(t),null;case 19:if(Tn($n),d=t.memoizedState,d===null)return Zi(t),null;if(o=(t.flags&128)!==0,p=d.rendering,p===null)if(o)rp(d,!1);else{if(hi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=yy(e),p!==null){for(t.flags|=128,rp(d,!1),o=p.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return xn($n,$n.current&1|2),t.child}e=e.sibling}d.tail!==null&&Qn()>yd&&(t.flags|=128,o=!0,rp(d,!1),t.lanes=4194304)}else{if(!o)if(e=yy(p),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),rp(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!zn)return Zi(t),null}else 2*Qn()-d.renderingStartTime>yd&&r!==1073741824&&(t.flags|=128,o=!0,rp(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(r=d.last,r!==null?r.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Qn(),t.sibling=null,r=$n.current,xn($n,o?r&1|2:r&1),t):(Zi(t),null);case 22:case 23:return Lw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Lo&1073741824&&(Zi(t),t.subtreeFlags&6&&(t.flags|=8192)):Zi(t),null;case 24:return null;case 25:return null}throw Error(vt(156,t.tag))}function KF(e,t){switch(mw(t),t.tag){case 1:return So(t.type)&&uy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return md(),Tn(wo),Tn(Yi),Cw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sw(t),null;case 13:if(Tn($n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(vt(340));pd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tn($n),null;case 4:return md(),null;case 10:return _w(t.type._context),null;case 22:case 23:return Lw(),null;case 24:return null;default:return null}}var cg=!1,Ji=!1,XF=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Zu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Un(e,t,o)}else r.current=null}function jb(e,t,r){try{r()}catch(o){Un(e,t,o)}}var OI=!1;function JF(e,t){if(Cb=ay,e=NA(),pw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var s=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var p=0,c=-1,b=-1,w=0,T=0,k=e,A=null;t:for(;;){for(var $;k!==r||s!==0&&k.nodeType!==3||(c=p+s),k!==d||o!==0&&k.nodeType!==3||(b=p+o),k.nodeType===3&&(p+=k.nodeValue.length),($=k.firstChild)!==null;)A=k,k=$;for(;;){if(k===e)break t;if(A===r&&++w===s&&(c=p),A===d&&++T===o&&(b=p),($=k.nextSibling)!==null)break;k=A,A=k.parentNode}k=$}r=c===-1||b===-1?null:{start:c,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ib={focusedElem:e,selectionRange:r},ay=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){t=Xt;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var N=V.memoizedProps,G=V.memoizedState,O=t.stateNode,R=O.getSnapshotBeforeUpdate(t.elementType===t.type?N:Ma(t.type,N),G);O.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var M=t.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(vt(163))}}catch(ee){Un(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}return V=OI,OI=!1,V}function kp(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&e)===e){var d=s.destroy;s.destroy=void 0,d!==void 0&&jb(t,r,d)}s=s.next}while(s!==o)}}function Rv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function Vb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function $z(e){var t=e.alternate;t!==null&&(e.alternate=null,$z(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[is],delete t[Xp],delete t[kb],delete t[MF],delete t[DF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Oz(e){return e.tag===5||e.tag===3||e.tag===4}function BI(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Oz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ub(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=cy));else if(o!==4&&(e=e.child,e!==null))for(Ub(e,t,r),e=e.sibling;e!==null;)Ub(e,t,r),e=e.sibling}function Hb(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Hb(e,t,r),e=e.sibling;e!==null;)Hb(e,t,r),e=e.sibling}var zi=null,Da=!1;function ul(e,t,r){for(r=r.child;r!==null;)Bz(e,t,r),r=r.sibling}function Bz(e,t,r){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(Cv,r)}catch{}switch(r.tag){case 5:Ji||Zu(r,t);case 6:var o=zi,s=Da;zi=null,ul(e,t,r),zi=o,Da=s,zi!==null&&(Da?(e=zi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):zi.removeChild(r.stateNode));break;case 18:zi!==null&&(Da?(e=zi,r=r.stateNode,e.nodeType===8?$_(e.parentNode,r):e.nodeType===1&&$_(e,r),Wp(e)):$_(zi,r.stateNode));break;case 4:o=zi,s=Da,zi=r.stateNode.containerInfo,Da=!0,ul(e,t,r),zi=o,Da=s;break;case 0:case 11:case 14:case 15:if(!Ji&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){s=o=o.next;do{var d=s,p=d.destroy;d=d.tag,p!==void 0&&(d&2||d&4)&&jb(r,t,p),s=s.next}while(s!==o)}ul(e,t,r);break;case 1:if(!Ji&&(Zu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(c){Un(r,t,c)}ul(e,t,r);break;case 21:ul(e,t,r);break;case 22:r.mode&1?(Ji=(o=Ji)||r.memoizedState!==null,ul(e,t,r),Ji=o):ul(e,t,r);break;default:ul(e,t,r)}}function FI(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new XF),t.forEach(function(o){var s=a6.bind(null,e,o);r.has(o)||(r.add(o),o.then(s,s))})}}function Aa(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];try{var d=e,p=t,c=p;e:for(;c!==null;){switch(c.tag){case 5:zi=c.stateNode,Da=!1;break e;case 3:zi=c.stateNode.containerInfo,Da=!0;break e;case 4:zi=c.stateNode.containerInfo,Da=!0;break e}c=c.return}if(zi===null)throw Error(vt(160));Bz(d,p,s),zi=null,Da=!1;var b=s.alternate;b!==null&&(b.return=null),s.return=null}catch(w){Un(s,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fz(t,e),t=t.sibling}function Fz(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Aa(t,e),Ya(e),o&4){try{kp(3,e,e.return),Rv(3,e)}catch(N){Un(e,e.return,N)}try{kp(5,e,e.return)}catch(N){Un(e,e.return,N)}}break;case 1:Aa(t,e),Ya(e),o&512&&r!==null&&Zu(r,r.return);break;case 5:if(Aa(t,e),Ya(e),o&512&&r!==null&&Zu(r,r.return),e.flags&32){var s=e.stateNode;try{jp(s,"")}catch(N){Un(e,e.return,N)}}if(o&4&&(s=e.stateNode,s!=null)){var d=e.memoizedProps,p=r!==null?r.memoizedProps:d,c=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{c==="input"&&d.type==="radio"&&d.name!=null&&sA(s,d),fb(c,p);var w=fb(c,d);for(p=0;p<b.length;p+=2){var T=b[p],k=b[p+1];T==="style"?hA(s,k):T==="dangerouslySetInnerHTML"?uA(s,k):T==="children"?jp(s,k):ew(s,T,k,w)}switch(c){case"input":cb(s,d);break;case"textarea":lA(s,d);break;case"select":var A=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!d.multiple;var $=d.value;$!=null?td(s,!!d.multiple,$,!1):A!==!!d.multiple&&(d.defaultValue!=null?td(s,!!d.multiple,d.defaultValue,!0):td(s,!!d.multiple,d.multiple?[]:"",!1))}s[Xp]=d}catch(N){Un(e,e.return,N)}}break;case 6:if(Aa(t,e),Ya(e),o&4){if(e.stateNode===null)throw Error(vt(162));s=e.stateNode,d=e.memoizedProps;try{s.nodeValue=d}catch(N){Un(e,e.return,N)}}break;case 3:if(Aa(t,e),Ya(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Wp(t.containerInfo)}catch(N){Un(e,e.return,N)}break;case 4:Aa(t,e),Ya(e);break;case 13:Aa(t,e),Ya(e),s=e.child,s.flags&8192&&(d=s.memoizedState!==null,s.stateNode.isHidden=d,!d||s.alternate!==null&&s.alternate.memoizedState!==null||(Mw=Qn())),o&4&&FI(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(Ji=(w=Ji)||T,Aa(t,e),Ji=w):Aa(t,e),Ya(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!T&&e.mode&1)for(Xt=e,T=e.child;T!==null;){for(k=Xt=T;Xt!==null;){switch(A=Xt,$=A.child,A.tag){case 0:case 11:case 14:case 15:kp(4,A,A.return);break;case 1:Zu(A,A.return);var V=A.stateNode;if(typeof V.componentWillUnmount=="function"){o=A,r=A.return;try{t=o,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(N){Un(o,r,N)}}break;case 5:Zu(A,A.return);break;case 22:if(A.memoizedState!==null){jI(k);continue}}$!==null?($.return=A,Xt=$):jI(k)}T=T.sibling}e:for(T=null,k=e;;){if(k.tag===5){if(T===null){T=k;try{s=k.stateNode,w?(d=s.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(c=k.stateNode,b=k.memoizedProps.style,p=b!=null&&b.hasOwnProperty("display")?b.display:null,c.style.display=dA("display",p))}catch(N){Un(e,e.return,N)}}}else if(k.tag===6){if(T===null)try{k.stateNode.nodeValue=w?"":k.memoizedProps}catch(N){Un(e,e.return,N)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;T===k&&(T=null),k=k.return}T===k&&(T=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Aa(t,e),Ya(e),o&4&&FI(e);break;case 21:break;default:Aa(t,e),Ya(e)}}function Ya(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Oz(r)){var o=r;break e}r=r.return}throw Error(vt(160))}switch(o.tag){case 5:var s=o.stateNode;o.flags&32&&(jp(s,""),o.flags&=-33);var d=BI(e);Hb(e,d,s);break;case 3:case 4:var p=o.stateNode.containerInfo,c=BI(e);Ub(e,c,p);break;default:throw Error(vt(161))}}catch(b){Un(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YF(e,t,r){Xt=e,Nz(e)}function Nz(e,t,r){for(var o=(e.mode&1)!==0;Xt!==null;){var s=Xt,d=s.child;if(s.tag===22&&o){var p=s.memoizedState!==null||cg;if(!p){var c=s.alternate,b=c!==null&&c.memoizedState!==null||Ji;c=cg;var w=Ji;if(cg=p,(Ji=b)&&!w)for(Xt=s;Xt!==null;)p=Xt,b=p.child,p.tag===22&&p.memoizedState!==null?VI(s):b!==null?(b.return=p,Xt=b):VI(s);for(;d!==null;)Xt=d,Nz(d),d=d.sibling;Xt=s,cg=c,Ji=w}NI(e)}else s.subtreeFlags&8772&&d!==null?(d.return=s,Xt=d):NI(e)}}function NI(e){for(;Xt!==null;){var t=Xt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ji||Rv(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Ji)if(r===null)o.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ma(t.type,r.memoizedProps);o.componentDidUpdate(s,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&CI(t,d,o);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}CI(t,p,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var k=T.dehydrated;k!==null&&Wp(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(vt(163))}Ji||t.flags&512&&Vb(t)}catch(A){Un(t,t.return,A)}}if(t===e){Xt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Xt=r;break}Xt=t.return}}function jI(e){for(;Xt!==null;){var t=Xt;if(t===e){Xt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Xt=r;break}Xt=t.return}}function VI(e){for(;Xt!==null;){var t=Xt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Rv(4,t)}catch(b){Un(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var s=t.return;try{o.componentDidMount()}catch(b){Un(t,s,b)}}var d=t.return;try{Vb(t)}catch(b){Un(t,d,b)}break;case 5:var p=t.return;try{Vb(t)}catch(b){Un(t,p,b)}}}catch(b){Un(t,t.return,b)}if(t===e){Xt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Xt=c;break}Xt=t.return}}var QF=Math.ceil,xy=Hs.ReactCurrentDispatcher,zw=Hs.ReactCurrentOwner,ca=Hs.ReactCurrentBatchConfig,Xr=0,bi=null,ai=null,Li=0,Lo=0,Ku=Ol(0),hi=0,rf=null,zc=0,Mv=0,Rw=0,Ep=null,xo=null,Mw=0,yd=1/0,As=null,by=!1,Wb=null,Pl=null,ug=!1,xl=null,wy=0,Ap=0,Gb=null,Lg=-1,$g=0;function uo(){return Xr&6?Qn():Lg!==-1?Lg:Lg=Qn()}function kl(e){return e.mode&1?Xr&2&&Li!==0?Li&-Li:$F.transition!==null?($g===0&&($g=CA()),$g):(e=an,e!==0||(e=window.event,e=e===void 0?16:zA(e.type)),e):1}function Fa(e,t,r,o){if(50<Ap)throw Ap=0,Gb=null,Error(vt(185));_f(e,r,o),(!(Xr&2)||e!==bi)&&(e===bi&&(!(Xr&2)&&(Mv|=r),hi===4&&gl(e,Li)),Co(e,o),r===1&&Xr===0&&!(t.mode&1)&&(yd=Qn()+500,Ev&&Bl()))}function Co(e,t){var r=e.callbackNode;$B(e,t);var o=oy(e,e===bi?Li:0);if(o===0)r!==null&&JC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&JC(r),t===1)e.tag===0?LF(UI.bind(null,e)):XA(UI.bind(null,e)),zF(function(){!(Xr&6)&&Bl()}),r=null;else{switch(IA(o)){case 1:r=ow;break;case 4:r=wA;break;case 16:r=iy;break;case 536870912:r=SA;break;default:r=iy}r=Zz(r,jz.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jz(e,t){if(Lg=-1,$g=0,Xr&6)throw Error(vt(327));var r=e.callbackNode;if(ad()&&e.callbackNode!==r)return null;var o=oy(e,e===bi?Li:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Sy(e,o);else{t=o;var s=Xr;Xr|=2;var d=Uz();(bi!==e||Li!==t)&&(As=null,yd=Qn()+500,bc(e,t));do try{r6();break}catch(c){Vz(e,c)}while(!0);vw(),xy.current=d,Xr=s,ai!==null?t=0:(bi=null,Li=0,t=hi)}if(t!==0){if(t===2&&(s=_b(e),s!==0&&(o=s,t=qb(e,s))),t===1)throw r=rf,bc(e,0),gl(e,o),Co(e,Qn()),r;if(t===6)gl(e,o);else{if(s=e.current.alternate,!(o&30)&&!e6(s)&&(t=Sy(e,o),t===2&&(d=_b(e),d!==0&&(o=d,t=qb(e,d))),t===1))throw r=rf,bc(e,0),gl(e,o),Co(e,Qn()),r;switch(e.finishedWork=s,e.finishedLanes=o,t){case 0:case 1:throw Error(vt(345));case 2:fc(e,xo,As);break;case 3:if(gl(e,o),(o&130023424)===o&&(t=Mw+500-Qn(),10<t)){if(oy(e,0)!==0)break;if(s=e.suspendedLanes,(s&o)!==o){uo(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Pb(fc.bind(null,e,xo,As),t);break}fc(e,xo,As);break;case 4:if(gl(e,o),(o&4194240)===o)break;for(t=e.eventTimes,s=-1;0<o;){var p=31-Ba(o);d=1<<p,p=t[p],p>s&&(s=p),o&=~d}if(o=s,o=Qn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*QF(o/1960))-o,10<o){e.timeoutHandle=Pb(fc.bind(null,e,xo,As),o);break}fc(e,xo,As);break;case 5:fc(e,xo,As);break;default:throw Error(vt(329))}}}return Co(e,Qn()),e.callbackNode===r?jz.bind(null,e):null}function qb(e,t){var r=Ep;return e.current.memoizedState.isDehydrated&&(bc(e,t).flags|=256),e=Sy(e,t),e!==2&&(t=xo,xo=r,t!==null&&Zb(t)),e}function Zb(e){xo===null?xo=e:xo.push.apply(xo,e)}function e6(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var s=r[o],d=s.getSnapshot;s=s.value;try{if(!ja(d(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gl(e,t){for(t&=~Rw,t&=~Mv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ba(t),o=1<<r;e[r]=-1,t&=~o}}function UI(e){if(Xr&6)throw Error(vt(327));ad();var t=oy(e,0);if(!(t&1))return Co(e,Qn()),null;var r=Sy(e,t);if(e.tag!==0&&r===2){var o=_b(e);o!==0&&(t=o,r=qb(e,o))}if(r===1)throw r=rf,bc(e,0),gl(e,t),Co(e,Qn()),r;if(r===6)throw Error(vt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fc(e,xo,As),Co(e,Qn()),null}function Dw(e,t){var r=Xr;Xr|=1;try{return e(t)}finally{Xr=r,Xr===0&&(yd=Qn()+500,Ev&&Bl())}}function Rc(e){xl!==null&&xl.tag===0&&!(Xr&6)&&ad();var t=Xr;Xr|=1;var r=ca.transition,o=an;try{if(ca.transition=null,an=1,e)return e()}finally{an=o,ca.transition=r,Xr=t,!(Xr&6)&&Bl()}}function Lw(){Lo=Ku.current,Tn(Ku)}function bc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,AF(r)),ai!==null)for(r=ai.return;r!==null;){var o=r;switch(mw(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&uy();break;case 3:md(),Tn(wo),Tn(Yi),Cw();break;case 5:Sw(o);break;case 4:md();break;case 13:Tn($n);break;case 19:Tn($n);break;case 10:_w(o.type._context);break;case 22:case 23:Lw()}r=r.return}if(bi=e,ai=e=El(e.current,null),Li=Lo=t,hi=0,rf=null,Rw=Mv=zc=0,xo=Ep=null,vc!==null){for(t=0;t<vc.length;t++)if(r=vc[t],o=r.interleaved,o!==null){r.interleaved=null;var s=o.next,d=r.pending;if(d!==null){var p=d.next;d.next=s,o.next=p}r.pending=o}vc=null}return e}function Vz(e,t){do{var r=ai;try{if(vw(),Rg.current=_y,vy){for(var o=On.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}vy=!1}if(Ac=0,xi=di=On=null,Pp=!1,Qp=0,zw.current=null,r===null||r.return===null){hi=1,rf=t,ai=null;break}e:{var d=e,p=r.return,c=r,b=t;if(t=Li,c.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,T=c,k=T.tag;if(!(T.mode&1)&&(k===0||k===11||k===15)){var A=T.alternate;A?(T.updateQueue=A.updateQueue,T.memoizedState=A.memoizedState,T.lanes=A.lanes):(T.updateQueue=null,T.memoizedState=null)}var $=AI(p);if($!==null){$.flags&=-257,zI($,p,c,d,t),$.mode&1&&EI(d,w,t),t=$,b=w;var V=t.updateQueue;if(V===null){var N=new Set;N.add(b),t.updateQueue=N}else V.add(b);break e}else{if(!(t&1)){EI(d,w,t),$w();break e}b=Error(vt(426))}}else if(zn&&c.mode&1){var G=AI(p);if(G!==null){!(G.flags&65536)&&(G.flags|=256),zI(G,p,c,d,t),gw(gd(b,c));break e}}d=b=gd(b,c),hi!==4&&(hi=2),Ep===null?Ep=[d]:Ep.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var O=Iz(d,b,t);SI(d,O);break e;case 1:c=b;var R=d.type,M=d.stateNode;if(!(d.flags&128)&&(typeof R.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Pl===null||!Pl.has(M)))){d.flags|=65536,t&=-t,d.lanes|=t;var ee=Tz(d,c,t);SI(d,ee);break e}}d=d.return}while(d!==null)}Wz(r)}catch(Z){t=Z,ai===r&&r!==null&&(ai=r=r.return);continue}break}while(!0)}function Uz(){var e=xy.current;return xy.current=_y,e===null?_y:e}function $w(){(hi===0||hi===3||hi===2)&&(hi=4),bi===null||!(zc&268435455)&&!(Mv&268435455)||gl(bi,Li)}function Sy(e,t){var r=Xr;Xr|=2;var o=Uz();(bi!==e||Li!==t)&&(As=null,bc(e,t));do try{t6();break}catch(s){Vz(e,s)}while(!0);if(vw(),Xr=r,xy.current=o,ai!==null)throw Error(vt(261));return bi=null,Li=0,hi}function t6(){for(;ai!==null;)Hz(ai)}function r6(){for(;ai!==null&&!PB();)Hz(ai)}function Hz(e){var t=qz(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,t===null?Wz(e):ai=t,zw.current=null}function Wz(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=KF(r,t),r!==null){r.flags&=32767,ai=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hi=6,ai=null;return}}else if(r=ZF(r,t,Lo),r!==null){ai=r;return}if(t=t.sibling,t!==null){ai=t;return}ai=t=e}while(t!==null);hi===0&&(hi=5)}function fc(e,t,r){var o=an,s=ca.transition;try{ca.transition=null,an=1,n6(e,t,r,o)}finally{ca.transition=s,an=o}return null}function n6(e,t,r,o){do ad();while(xl!==null);if(Xr&6)throw Error(vt(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(vt(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(OB(e,d),e===bi&&(ai=bi=null,Li=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ug||(ug=!0,Zz(iy,function(){return ad(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=ca.transition,ca.transition=null;var p=an;an=1;var c=Xr;Xr|=4,zw.current=null,JF(e,r),Fz(r,e),SF(Ib),ay=!!Cb,Ib=Cb=null,e.current=r,YF(r),kB(),Xr=c,an=p,ca.transition=d}else e.current=r;if(ug&&(ug=!1,xl=e,wy=s),d=e.pendingLanes,d===0&&(Pl=null),zB(r.stateNode),Co(e,Qn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],o(s.value,{componentStack:s.stack,digest:s.digest});if(by)throw by=!1,e=Wb,Wb=null,e;return wy&1&&e.tag!==0&&ad(),d=e.pendingLanes,d&1?e===Gb?Ap++:(Ap=0,Gb=e):Ap=0,Bl(),null}function ad(){if(xl!==null){var e=IA(wy),t=ca.transition,r=an;try{if(ca.transition=null,an=16>e?16:e,xl===null)var o=!1;else{if(e=xl,xl=null,wy=0,Xr&6)throw Error(vt(331));var s=Xr;for(Xr|=4,Xt=e.current;Xt!==null;){var d=Xt,p=d.child;if(Xt.flags&16){var c=d.deletions;if(c!==null){for(var b=0;b<c.length;b++){var w=c[b];for(Xt=w;Xt!==null;){var T=Xt;switch(T.tag){case 0:case 11:case 15:kp(8,T,d)}var k=T.child;if(k!==null)k.return=T,Xt=k;else for(;Xt!==null;){T=Xt;var A=T.sibling,$=T.return;if($z(T),T===w){Xt=null;break}if(A!==null){A.return=$,Xt=A;break}Xt=$}}}var V=d.alternate;if(V!==null){var N=V.child;if(N!==null){V.child=null;do{var G=N.sibling;N.sibling=null,N=G}while(N!==null)}}Xt=d}}if(d.subtreeFlags&2064&&p!==null)p.return=d,Xt=p;else e:for(;Xt!==null;){if(d=Xt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:kp(9,d,d.return)}var O=d.sibling;if(O!==null){O.return=d.return,Xt=O;break e}Xt=d.return}}var R=e.current;for(Xt=R;Xt!==null;){p=Xt;var M=p.child;if(p.subtreeFlags&2064&&M!==null)M.return=p,Xt=M;else e:for(p=R;Xt!==null;){if(c=Xt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Rv(9,c)}}catch(Z){Un(c,c.return,Z)}if(c===p){Xt=null;break e}var ee=c.sibling;if(ee!==null){ee.return=c.return,Xt=ee;break e}Xt=c.return}}if(Xr=s,Bl(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(Cv,e)}catch{}o=!0}return o}finally{an=r,ca.transition=t}}return!1}function HI(e,t,r){t=gd(r,t),t=Iz(e,t,1),e=Tl(e,t,1),t=uo(),e!==null&&(_f(e,1,t),Co(e,t))}function Un(e,t,r){if(e.tag===3)HI(e,e,r);else for(;t!==null;){if(t.tag===3){HI(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Pl===null||!Pl.has(o))){e=gd(r,e),e=Tz(t,e,1),t=Tl(t,e,1),e=uo(),t!==null&&(_f(t,1,e),Co(t,e));break}}t=t.return}}function i6(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=uo(),e.pingedLanes|=e.suspendedLanes&r,bi===e&&(Li&r)===r&&(hi===4||hi===3&&(Li&130023424)===Li&&500>Qn()-Mw?bc(e,0):Rw|=r),Co(e,t)}function Gz(e,t){t===0&&(e.mode&1?(t=eg,eg<<=1,!(eg&130023424)&&(eg=4194304)):t=1);var r=uo();e=js(e,t),e!==null&&(_f(e,t,r),Co(e,r))}function o6(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Gz(e,r)}function a6(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(vt(314))}o!==null&&o.delete(t),Gz(e,r)}var qz;qz=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||wo.current)bo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return bo=!1,qF(e,t,r);bo=!!(e.flags&131072)}else bo=!1,zn&&t.flags&1048576&&JA(t,py,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Dg(e,t),e=t.pendingProps;var s=hd(t,Yi.current);od(t,r),s=Tw(null,t,o,e,s,r);var d=Pw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,So(o)?(d=!0,dy(t)):d=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bw(t),s.updater=zv,t.stateNode=s,s._reactInternals=t,Db(t,o,e,r),t=Ob(null,t,o,!0,d,r)):(t.tag=0,zn&&d&&fw(t),co(null,t,s,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Dg(e,t),e=t.pendingProps,s=o._init,o=s(o._payload),t.type=o,s=t.tag=l6(o),e=Ma(o,e),s){case 0:t=$b(null,t,o,e,r);break e;case 1:t=DI(null,t,o,e,r);break e;case 11:t=RI(null,t,o,e,r);break e;case 14:t=MI(null,t,o,Ma(o.type,e),r);break e}throw Error(vt(306,o,""))}return t;case 0:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Ma(o,s),$b(e,t,o,s,r);case 1:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Ma(o,s),DI(e,t,o,s,r);case 3:e:{if(Az(t),e===null)throw Error(vt(387));o=t.pendingProps,d=t.memoizedState,s=d.element,nz(e,t),gy(t,o,null,r);var p=t.memoizedState;if(o=p.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){s=gd(Error(vt(423)),t),t=LI(e,t,o,r,s);break e}else if(o!==s){s=gd(Error(vt(424)),t),t=LI(e,t,o,r,s);break e}else for(jo=Il(t.stateNode.containerInfo.firstChild),Uo=t,zn=!0,$a=null,r=tz(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pd(),o===s){t=Vs(e,t,r);break e}co(e,t,o,r)}t=t.child}return t;case 5:return iz(t),e===null&&zb(t),o=t.type,s=t.pendingProps,d=e!==null?e.memoizedProps:null,p=s.children,Tb(o,s)?p=null:d!==null&&Tb(o,d)&&(t.flags|=32),Ez(e,t),co(e,t,p,r),t.child;case 6:return e===null&&zb(t),null;case 13:return zz(e,t,r);case 4:return ww(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=fd(t,null,o,r):co(e,t,o,r),t.child;case 11:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Ma(o,s),RI(e,t,o,s,r);case 7:return co(e,t,t.pendingProps,r),t.child;case 8:return co(e,t,t.pendingProps.children,r),t.child;case 12:return co(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,s=t.pendingProps,d=t.memoizedProps,p=s.value,xn(fy,o._currentValue),o._currentValue=p,d!==null)if(ja(d.value,p)){if(d.children===s.children&&!wo.current){t=Vs(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var c=d.dependencies;if(c!==null){p=d.child;for(var b=c.firstContext;b!==null;){if(b.context===o){if(d.tag===1){b=Ls(-1,r&-r),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?b.next=b:(b.next=T.next,T.next=b),w.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),Rb(d.return,r,t),c.lanes|=r;break}b=b.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(vt(341));p.lanes|=r,c=p.alternate,c!==null&&(c.lanes|=r),Rb(p,r,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}co(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,o=t.pendingProps.children,od(t,r),s=da(s),o=o(s),t.flags|=1,co(e,t,o,r),t.child;case 14:return o=t.type,s=Ma(o,t.pendingProps),s=Ma(o.type,s),MI(e,t,o,s,r);case 15:return Pz(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Ma(o,s),Dg(e,t),t.tag=1,So(o)?(e=!0,dy(t)):e=!1,od(t,r),Cz(t,o,s),Db(t,o,s,r),Ob(null,t,o,!0,e,r);case 19:return Rz(e,t,r);case 22:return kz(e,t,r)}throw Error(vt(156,t.tag))};function Zz(e,t){return bA(e,t)}function s6(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(e,t,r,o){return new s6(e,t,r,o)}function Ow(e){return e=e.prototype,!(!e||!e.isReactComponent)}function l6(e){if(typeof e=="function")return Ow(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rw)return 11;if(e===nw)return 14}return 2}function El(e,t){var r=e.alternate;return r===null?(r=la(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Og(e,t,r,o,s,d){var p=2;if(o=e,typeof e=="function")Ow(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Fu:return wc(r.children,s,d,t);case tw:p=8,s|=8;break;case ib:return e=la(12,r,t,s|2),e.elementType=ib,e.lanes=d,e;case ob:return e=la(13,r,t,s),e.elementType=ob,e.lanes=d,e;case ab:return e=la(19,r,t,s),e.elementType=ab,e.lanes=d,e;case iA:return Dv(r,s,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rA:p=10;break e;case nA:p=9;break e;case rw:p=11;break e;case nw:p=14;break e;case pl:p=16,o=null;break e}throw Error(vt(130,e==null?e:typeof e,""))}return t=la(p,r,t,s),t.elementType=e,t.type=o,t.lanes=d,t}function wc(e,t,r,o){return e=la(7,e,o,t),e.lanes=r,e}function Dv(e,t,r,o){return e=la(22,e,o,t),e.elementType=iA,e.lanes=r,e.stateNode={isHidden:!1},e}function H_(e,t,r){return e=la(6,e,null,t),e.lanes=r,e}function W_(e,t,r){return t=la(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function c6(e,t,r,o,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=I_(0),this.expirationTimes=I_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I_(0),this.identifierPrefix=o,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bw(e,t,r,o,s,d,p,c,b){return e=new c6(e,t,r,c,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=la(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bw(d),e}function u6(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function Kz(e){if(!e)return Ml;e=e._reactInternals;e:{if(Lc(e)!==e||e.tag!==1)throw Error(vt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(So(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(vt(171))}if(e.tag===1){var r=e.type;if(So(r))return KA(e,r,t)}return t}function Xz(e,t,r,o,s,d,p,c,b){return e=Bw(r,o,!0,e,s,d,p,c,b),e.context=Kz(null),r=e.current,o=uo(),s=kl(r),d=Ls(o,s),d.callback=t??null,Tl(r,d,s),e.current.lanes=s,_f(e,s,o),Co(e,o),e}function Lv(e,t,r,o){var s=t.current,d=uo(),p=kl(s);return r=Kz(r),t.context===null?t.context=r:t.pendingContext=r,t=Ls(d,p),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Tl(s,t,p),e!==null&&(Fa(e,s,p,d),zg(e,s,p)),p}function Cy(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function WI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Fw(e,t){WI(e,t),(e=e.alternate)&&WI(e,t)}function d6(){return null}var Jz=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nw(e){this._internalRoot=e}$v.prototype.render=Nw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(vt(409));Lv(e,t,null,null)};$v.prototype.unmount=Nw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rc(function(){Lv(null,e,null,null)}),t[Ns]=null}};function $v(e){this._internalRoot=e}$v.prototype.unstable_scheduleHydration=function(e){if(e){var t=kA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ml.length&&t!==0&&t<ml[r].priority;r++);ml.splice(r,0,e),r===0&&AA(e)}};function jw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ov(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function GI(){}function h6(e,t,r,o,s){if(s){if(typeof o=="function"){var d=o;o=function(){var w=Cy(p);d.call(w)}}var p=Xz(t,o,e,0,null,!1,!1,"",GI);return e._reactRootContainer=p,e[Ns]=p.current,Zp(e.nodeType===8?e.parentNode:e),Rc(),p}for(;s=e.lastChild;)e.removeChild(s);if(typeof o=="function"){var c=o;o=function(){var w=Cy(b);c.call(w)}}var b=Bw(e,0,!1,null,null,!1,!1,"",GI);return e._reactRootContainer=b,e[Ns]=b.current,Zp(e.nodeType===8?e.parentNode:e),Rc(function(){Lv(t,b,r,o)}),b}function Bv(e,t,r,o,s){var d=r._reactRootContainer;if(d){var p=d;if(typeof s=="function"){var c=s;s=function(){var b=Cy(p);c.call(b)}}Lv(t,p,e,s)}else p=h6(r,t,e,s,o);return Cy(p)}TA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=yp(t.pendingLanes);r!==0&&(aw(t,r|1),Co(t,Qn()),!(Xr&6)&&(yd=Qn()+500,Bl()))}break;case 13:Rc(function(){var o=js(e,1);if(o!==null){var s=uo();Fa(o,e,1,s)}}),Fw(e,1)}};sw=function(e){if(e.tag===13){var t=js(e,134217728);if(t!==null){var r=uo();Fa(t,e,134217728,r)}Fw(e,134217728)}};PA=function(e){if(e.tag===13){var t=kl(e),r=js(e,t);if(r!==null){var o=uo();Fa(r,e,t,o)}Fw(e,t)}};kA=function(){return an};EA=function(e,t){var r=an;try{return an=e,t()}finally{an=r}};gb=function(e,t,r){switch(t){case"input":if(cb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var s=kv(o);if(!s)throw Error(vt(90));aA(o),cb(o,s)}}}break;case"textarea":lA(e,r);break;case"select":t=r.value,t!=null&&td(e,!!r.multiple,t,!1)}};mA=Dw;gA=Rc;var p6={usingClientEntryPoint:!1,Events:[bf,Uu,kv,pA,fA,Dw]},np={findFiberByHostInstance:yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f6={bundleType:np.bundleType,version:np.version,rendererPackageName:np.rendererPackageName,rendererConfig:np.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_A(e),e===null?null:e.stateNode},findFiberByHostInstance:np.findFiberByHostInstance||d6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dg.isDisabled&&dg.supportsFiber)try{Cv=dg.inject(f6),ss=dg}catch{}}qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6;qo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jw(t))throw Error(vt(200));return u6(e,t,null,r)};qo.createRoot=function(e,t){if(!jw(e))throw Error(vt(299));var r=!1,o="",s=Jz;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bw(e,1,!1,null,null,r,!1,o,s),e[Ns]=t.current,Zp(e.nodeType===8?e.parentNode:e),new Nw(t)};qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(vt(188)):(e=Object.keys(e).join(","),Error(vt(268,e)));return e=_A(t),e=e===null?null:e.stateNode,e};qo.flushSync=function(e){return Rc(e)};qo.hydrate=function(e,t,r){if(!Ov(t))throw Error(vt(200));return Bv(null,e,t,!0,r)};qo.hydrateRoot=function(e,t,r){if(!jw(e))throw Error(vt(405));var o=r!=null&&r.hydratedSources||null,s=!1,d="",p=Jz;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=Xz(t,null,e,1,r??null,s,!1,d,p),e[Ns]=t.current,Zp(e),o)for(e=0;e<o.length;e++)r=o[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new $v(t)};qo.render=function(e,t,r){if(!Ov(t))throw Error(vt(200));return Bv(null,e,t,!1,r)};qo.unmountComponentAtNode=function(e){if(!Ov(e))throw Error(vt(40));return e._reactRootContainer?(Rc(function(){Bv(null,null,e,!1,function(){e._reactRootContainer=null,e[Ns]=null})}),!0):!1};qo.unstable_batchedUpdates=Dw;qo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Ov(r))throw Error(vt(200));if(e==null||e._reactInternals===void 0)throw Error(vt(38));return Bv(e,t,r,!1,o)};qo.version="18.3.1-next-f1338f8080-20240426";function Yz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yz)}catch(e){console.error(e)}}Yz(),YE.exports=qo;var Dd=YE.exports;const m6=jy(Dd),g6=v1({__proto__:null,default:m6},[Dd]);function y6(e){return typeof e=="function"?e():e}const Qz=L.forwardRef(function(t,r){const{children:o,container:s,disablePortal:d=!1}=t,[p,c]=L.useState(null),b=on(L.isValidElement(o)?o.ref:null,r);if(Os(()=>{d||c(y6(s)||document.body)},[s,d]),Os(()=>{if(p&&!d)return ey(r,p),()=>{ey(r,null)}},[r,p,d]),d){if(L.isValidElement(o)){const w={ref:b};return L.cloneElement(o,w)}return Y.jsx(L.Fragment,{children:o})}return Y.jsx(L.Fragment,{children:p&&Dd.createPortal(o,p)})});function v6(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:o}=e,s=L.useContext(xv);if(s===null)throw new Error("useMenuButton: no menu context available.");const{state:d,dispatch:p,registerTrigger:c,popupId:b}=s,{getRootProps:w,rootRef:T,active:k}=hs({disabled:t,focusableWhenDisabled:r,rootRef:o}),A=on(T,c),$=O=>R=>{var M;(M=O.onClick)==null||M.call(O,R),!R.defaultMuiPrevented&&p({type:Oa.toggle,event:R})},V=O=>R=>{var M;(M=O.onKeyDown)==null||M.call(O,R),!R.defaultMuiPrevented&&(R.key==="ArrowDown"||R.key==="ArrowUp")&&(R.preventDefault(),p({type:Oa.open,event:R}))},N=(O={})=>({onClick:$(O),onKeyDown:V(O)});return{active:k,getRootProps:(O={})=>{const R=Di(O),M=Bs(N,w);return K({"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":b},O,R,M(R),{tabIndex:0,ref:A})},open:d.open,rootRef:A}}function _6(e){return`menu-item-${e.size}`}const x6={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function b6(e){var t;const{disabled:r=!1,id:o,rootRef:s,label:d,disableFocusOnHover:p=!1}=e,c=ko(o),b=L.useRef(null),w=L.useMemo(()=>({disabled:r,id:c??"",label:d,ref:b}),[r,c,d]),{dispatch:T}=(t=L.useContext(xv))!=null?t:x6,{getRootProps:k,highlighted:A}=J1({item:c,handlePointerOverEvents:!p}),{index:$,totalItemCount:V}=Sv(c??_6,w),{getRootProps:N,focusVisible:G,rootRef:O}=hs({disabled:r,focusableWhenDisabled:!0}),R=on(O,s,b);L.useDebugValue({id:c,highlighted:A,disabled:r,label:d});const M=oe=>ie=>{var W;(W=oe.onClick)==null||W.call(oe,ie),!ie.defaultMuiPrevented&&T({type:Oa.close,event:ie})},ee=(oe={})=>K({},oe,{onClick:M(oe)});function Z(oe={}){const ie=Di(oe),W=Bs(ee,Bs(N,k));return K({},oe,ie,W(ie),{id:c,ref:R,role:"menuitem"})}return c===void 0?{getRootProps:Z,disabled:!1,focusVisible:G,highlighted:!1,index:-1,totalItemCount:0,rootRef:R}:{getRootProps:Z,disabled:r,focusVisible:G,highlighted:A,index:$,totalItemCount:V,rootRef:R}}function w6(e){const t=L.useContext(Ll);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=ko(e),{getItemState:o,dispatch:s}=t;let d;r!=null?d=o(r):d={focusable:!0,highlighted:!1,selected:!1};const{highlighted:p,selected:c,focusable:b}=d,w=L.useCallback(k=>{if(k!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${k} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:p,selected:c,focusable:b}},[p,c,b,r]);return{contextValue:L.useMemo(()=>({dispatch:s,getItemState:w}),[s,w]),id:r}}function S6(e){const t=as(e);return t.body===e?V1(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function zp(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function qI(e){return parseInt(V1(e).getComputedStyle(e).paddingRight,10)||0}function C6(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||o}function ZI(e,t,r,o,s){const d=[t,r,...o];[].forEach.call(e.children,p=>{const c=d.indexOf(p)===-1,b=!C6(p);c&&b&&zp(p,s)})}function G_(e,t){let r=-1;return e.some((o,s)=>t(o)?(r=s,!0):!1),r}function I6(e,t){const r=[],o=e.container;if(!t.disableScrollLock){if(S6(o)){const p=zO(as(o));r.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${qI(o)+p}px`;const c=as(o).querySelectorAll(".mui-fixed");[].forEach.call(c,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${qI(b)+p}px`})}let d;if(o.parentNode instanceof DocumentFragment)d=as(o).body;else{const p=o.parentElement,c=V1(o);d=(p==null?void 0:p.nodeName)==="HTML"&&c.getComputedStyle(p).overflowY==="scroll"?p:o}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:p,property:c})=>{d?p.style.setProperty(c,d):p.style.removeProperty(c)})}}function T6(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class P6{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&zp(t.modalRef,!1);const s=T6(r);ZI(r,t.mount,t.modalRef,s,!0);const d=G_(this.containers,p=>p.container===r);return d!==-1?(this.containers[d].modals.push(t),o):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:s}),o)}mount(t,r){const o=G_(this.containers,d=>d.modals.indexOf(t)!==-1),s=this.containers[o];s.restore||(s.restore=I6(s,r))}remove(t,r=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const s=G_(this.containers,p=>p.modals.indexOf(t)!==-1),d=this.containers[s];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(o,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&zp(t.modalRef,r),ZI(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(s,1);else{const p=d.modals[d.modals.length-1];p.modalRef&&zp(p.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function k6(e){return typeof e=="function"?e():e}function E6(e){return e?e.props.hasOwnProperty("in"):!1}const A6=new P6;function z6(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,manager:s=A6,closeAfterTransition:d=!1,onTransitionEnter:p,onTransitionExited:c,children:b,onClose:w,open:T,rootRef:k}=e,A=L.useRef({}),$=L.useRef(null),V=L.useRef(null),N=on(V,k),[G,O]=L.useState(!T),R=E6(b);let M=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(M=!1);const ee=()=>as($.current),Z=()=>(A.current.modalRef=V.current,A.current.mount=$.current,A.current),oe=()=>{s.mount(Z(),{disableScrollLock:o}),V.current&&(V.current.scrollTop=0)},ie=vl(()=>{const ke=k6(t)||ee().body;s.add(Z(),ke),V.current&&oe()}),W=L.useCallback(()=>s.isTopModal(Z()),[s]),Ie=vl(ke=>{$.current=ke,ke&&(T&&W()?oe():V.current&&zp(V.current,M))}),_e=L.useCallback(()=>{s.remove(Z(),M)},[M,s]);L.useEffect(()=>()=>{_e()},[_e]),L.useEffect(()=>{T?ie():(!R||!d)&&_e()},[T,_e,R,d,ie]);const Te=ke=>Ne=>{var Oe;(Oe=ke.onKeyDown)==null||Oe.call(ke,Ne),!(Ne.key!=="Escape"||Ne.which===229||!W())&&(r||(Ne.stopPropagation(),w&&w(Ne,"escapeKeyDown")))},Ae=ke=>Ne=>{var Oe;(Oe=ke.onClick)==null||Oe.call(ke,Ne),Ne.target===Ne.currentTarget&&w&&w(Ne,"backdropClick")};return{getRootProps:(ke={})=>{const Ne=Di(e);delete Ne.onTransitionEnter,delete Ne.onTransitionExited;const Oe=K({},Ne,ke);return K({role:"presentation"},Oe,{onKeyDown:Te(Oe),ref:N})},getBackdropProps:(ke={})=>{const Ne=ke;return K({"aria-hidden":!0},Ne,{onClick:Ae(Ne),open:T})},getTransitionProps:()=>{const ke=()=>{O(!1),p&&p()},Ne=()=>{O(!0),c&&c(),d&&_e()};return{onEnter:kC(ke,b==null?void 0:b.props.onEnter),onExited:kC(Ne,b==null?void 0:b.props.onExited)}},rootRef:N,portalRef:Ie,isTopModal:W,exited:G,hasTransition:R}}function R6(e){const{value:t,label:r,disabled:o,rootRef:s,id:d}=e,{getRootProps:p,highlighted:c,selected:b}=J1({item:t}),{getRootProps:w,rootRef:T}=hs({disabled:o,focusableWhenDisabled:!0}),k=ko(d),A=L.useRef(null),$=L.useMemo(()=>({disabled:o,label:r,value:t,ref:A,id:k}),[o,r,t,k]),{index:V}=Sv(t,$),N=on(s,A,T),G=R=>M=>{var ee;(ee=R.onKeyDown)==null||ee.call(R,M),!M.defaultMuiPrevented&&[" ","Enter"].includes(M.key)&&(M.defaultMuiPrevented=!0)},O=(R={})=>({onKeyDown:G(R)});return{getRootProps:(R={})=>{const M=Di(R),ee=Bs(p,Bs(w,O));return K({},R,M,ee(M),{id:k,ref:N,role:"option","aria-selected":b})},highlighted:c,index:V,selected:b,rootRef:N}}function M6(e){const t=L.useContext(Ll);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:o}=t,{highlighted:s,selected:d,focusable:p}=r(e),c=L.useCallback(w=>{if(w!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:s,selected:d,focusable:p}},[s,d,p,e]);return{contextValue:L.useMemo(()=>({dispatch:o,getItemState:c}),[o,c])}}var Io="top",pa="bottom",fa="right",To="left",Vw="auto",Sf=[Io,pa,fa,To],vd="start",nf="end",D6="clippingParents",eR="viewport",ip="popper",L6="reference",KI=Sf.reduce(function(e,t){return e.concat([t+"-"+vd,t+"-"+nf])},[]),tR=[].concat(Sf,[Vw]).reduce(function(e,t){return e.concat([t,t+"-"+vd,t+"-"+nf])},[]),$6="beforeRead",O6="read",B6="afterRead",F6="beforeMain",N6="main",j6="afterMain",V6="beforeWrite",U6="write",H6="afterWrite",W6=[$6,O6,B6,F6,N6,j6,V6,U6,H6];function us(e){return e?(e.nodeName||"").toLowerCase():null}function Wo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Mc(e){var t=Wo(e).Element;return e instanceof t||e instanceof Element}function ua(e){var t=Wo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Uw(e){if(typeof ShadowRoot>"u")return!1;var t=Wo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function G6(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},s=t.attributes[r]||{},d=t.elements[r];!ua(d)||!us(d)||(Object.assign(d.style,o),Object.keys(s).forEach(function(p){var c=s[p];c===!1?d.removeAttribute(p):d.setAttribute(p,c===!0?"":c)}))})}function q6(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var s=t.elements[o],d=t.attributes[o]||{},p=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),c=p.reduce(function(b,w){return b[w]="",b},{});!ua(s)||!us(s)||(Object.assign(s.style,c),Object.keys(d).forEach(function(b){s.removeAttribute(b)}))})}}const Z6={name:"applyStyles",enabled:!0,phase:"write",fn:G6,effect:q6,requires:["computeStyles"]};function cs(e){return e.split("-")[0]}var Sc=Math.max,Iy=Math.min,_d=Math.round;function Kb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function rR(){return!/^((?!chrome|android).)*safari/i.test(Kb())}function xd(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),s=1,d=1;t&&ua(e)&&(s=e.offsetWidth>0&&_d(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&_d(o.height)/e.offsetHeight||1);var p=Mc(e)?Wo(e):window,c=p.visualViewport,b=!rR()&&r,w=(o.left+(b&&c?c.offsetLeft:0))/s,T=(o.top+(b&&c?c.offsetTop:0))/d,k=o.width/s,A=o.height/d;return{width:k,height:A,top:T,right:w+k,bottom:T+A,left:w,x:w,y:T}}function Hw(e){var t=xd(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function nR(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Uw(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Us(e){return Wo(e).getComputedStyle(e)}function K6(e){return["table","td","th"].indexOf(us(e))>=0}function Fl(e){return((Mc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fv(e){return us(e)==="html"?e:e.assignedSlot||e.parentNode||(Uw(e)?e.host:null)||Fl(e)}function XI(e){return!ua(e)||Us(e).position==="fixed"?null:e.offsetParent}function X6(e){var t=/firefox/i.test(Kb()),r=/Trident/i.test(Kb());if(r&&ua(e)){var o=Us(e);if(o.position==="fixed")return null}var s=Fv(e);for(Uw(s)&&(s=s.host);ua(s)&&["html","body"].indexOf(us(s))<0;){var d=Us(s);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return s;s=s.parentNode}return null}function Cf(e){for(var t=Wo(e),r=XI(e);r&&K6(r)&&Us(r).position==="static";)r=XI(r);return r&&(us(r)==="html"||us(r)==="body"&&Us(r).position==="static")?t:r||X6(e)||t}function Ww(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Rp(e,t,r){return Sc(e,Iy(t,r))}function J6(e,t,r){var o=Rp(e,t,r);return o>r?r:o}function iR(){return{top:0,right:0,bottom:0,left:0}}function oR(e){return Object.assign({},iR(),e)}function aR(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var Y6=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,oR(typeof t!="number"?t:aR(t,Sf))};function Q6(e){var t,r=e.state,o=e.name,s=e.options,d=r.elements.arrow,p=r.modifiersData.popperOffsets,c=cs(r.placement),b=Ww(c),w=[To,fa].indexOf(c)>=0,T=w?"height":"width";if(!(!d||!p)){var k=Y6(s.padding,r),A=Hw(d),$=b==="y"?Io:To,V=b==="y"?pa:fa,N=r.rects.reference[T]+r.rects.reference[b]-p[b]-r.rects.popper[T],G=p[b]-r.rects.reference[b],O=Cf(d),R=O?b==="y"?O.clientHeight||0:O.clientWidth||0:0,M=N/2-G/2,ee=k[$],Z=R-A[T]-k[V],oe=R/2-A[T]/2+M,ie=Rp(ee,oe,Z),W=b;r.modifiersData[o]=(t={},t[W]=ie,t.centerOffset=ie-oe,t)}}function eN(e){var t=e.state,r=e.options,o=r.element,s=o===void 0?"[data-popper-arrow]":o;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||nR(t.elements.popper,s)&&(t.elements.arrow=s))}const tN={name:"arrow",enabled:!0,phase:"main",fn:Q6,effect:eN,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bd(e){return e.split("-")[1]}var rN={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nN(e,t){var r=e.x,o=e.y,s=t.devicePixelRatio||1;return{x:_d(r*s)/s||0,y:_d(o*s)/s||0}}function JI(e){var t,r=e.popper,o=e.popperRect,s=e.placement,d=e.variation,p=e.offsets,c=e.position,b=e.gpuAcceleration,w=e.adaptive,T=e.roundOffsets,k=e.isFixed,A=p.x,$=A===void 0?0:A,V=p.y,N=V===void 0?0:V,G=typeof T=="function"?T({x:$,y:N}):{x:$,y:N};$=G.x,N=G.y;var O=p.hasOwnProperty("x"),R=p.hasOwnProperty("y"),M=To,ee=Io,Z=window;if(w){var oe=Cf(r),ie="clientHeight",W="clientWidth";if(oe===Wo(r)&&(oe=Fl(r),Us(oe).position!=="static"&&c==="absolute"&&(ie="scrollHeight",W="scrollWidth")),oe=oe,s===Io||(s===To||s===fa)&&d===nf){ee=pa;var Ie=k&&oe===Z&&Z.visualViewport?Z.visualViewport.height:oe[ie];N-=Ie-o.height,N*=b?1:-1}if(s===To||(s===Io||s===pa)&&d===nf){M=fa;var _e=k&&oe===Z&&Z.visualViewport?Z.visualViewport.width:oe[W];$-=_e-o.width,$*=b?1:-1}}var Te=Object.assign({position:c},w&&rN),Ae=T===!0?nN({x:$,y:N},Wo(r)):{x:$,y:N};if($=Ae.x,N=Ae.y,b){var $e;return Object.assign({},Te,($e={},$e[ee]=R?"0":"",$e[M]=O?"0":"",$e.transform=(Z.devicePixelRatio||1)<=1?"translate("+$+"px, "+N+"px)":"translate3d("+$+"px, "+N+"px, 0)",$e))}return Object.assign({},Te,(t={},t[ee]=R?N+"px":"",t[M]=O?$+"px":"",t.transform="",t))}function iN(e){var t=e.state,r=e.options,o=r.gpuAcceleration,s=o===void 0?!0:o,d=r.adaptive,p=d===void 0?!0:d,c=r.roundOffsets,b=c===void 0?!0:c,w={placement:cs(t.placement),variation:bd(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,JI(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,JI(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const oN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:iN,data:{}};var hg={passive:!0};function aN(e){var t=e.state,r=e.instance,o=e.options,s=o.scroll,d=s===void 0?!0:s,p=o.resize,c=p===void 0?!0:p,b=Wo(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&w.forEach(function(T){T.addEventListener("scroll",r.update,hg)}),c&&b.addEventListener("resize",r.update,hg),function(){d&&w.forEach(function(T){T.removeEventListener("scroll",r.update,hg)}),c&&b.removeEventListener("resize",r.update,hg)}}const sN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:aN,data:{}};var lN={left:"right",right:"left",bottom:"top",top:"bottom"};function Bg(e){return e.replace(/left|right|bottom|top/g,function(t){return lN[t]})}var cN={start:"end",end:"start"};function YI(e){return e.replace(/start|end/g,function(t){return cN[t]})}function Gw(e){var t=Wo(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function qw(e){return xd(Fl(e)).left+Gw(e).scrollLeft}function uN(e,t){var r=Wo(e),o=Fl(e),s=r.visualViewport,d=o.clientWidth,p=o.clientHeight,c=0,b=0;if(s){d=s.width,p=s.height;var w=rR();(w||!w&&t==="fixed")&&(c=s.offsetLeft,b=s.offsetTop)}return{width:d,height:p,x:c+qw(e),y:b}}function dN(e){var t,r=Fl(e),o=Gw(e),s=(t=e.ownerDocument)==null?void 0:t.body,d=Sc(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),p=Sc(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-o.scrollLeft+qw(e),b=-o.scrollTop;return Us(s||r).direction==="rtl"&&(c+=Sc(r.clientWidth,s?s.clientWidth:0)-d),{width:d,height:p,x:c,y:b}}function Zw(e){var t=Us(e),r=t.overflow,o=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+o)}function sR(e){return["html","body","#document"].indexOf(us(e))>=0?e.ownerDocument.body:ua(e)&&Zw(e)?e:sR(Fv(e))}function Mp(e,t){var r;t===void 0&&(t=[]);var o=sR(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),d=Wo(o),p=s?[d].concat(d.visualViewport||[],Zw(o)?o:[]):o,c=t.concat(p);return s?c:c.concat(Mp(Fv(p)))}function Xb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function hN(e,t){var r=xd(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function QI(e,t,r){return t===eR?Xb(uN(e,r)):Mc(t)?hN(t,r):Xb(dN(Fl(e)))}function pN(e){var t=Mp(Fv(e)),r=["absolute","fixed"].indexOf(Us(e).position)>=0,o=r&&ua(e)?Cf(e):e;return Mc(o)?t.filter(function(s){return Mc(s)&&nR(s,o)&&us(s)!=="body"}):[]}function fN(e,t,r,o){var s=t==="clippingParents"?pN(e):[].concat(t),d=[].concat(s,[r]),p=d[0],c=d.reduce(function(b,w){var T=QI(e,w,o);return b.top=Sc(T.top,b.top),b.right=Iy(T.right,b.right),b.bottom=Iy(T.bottom,b.bottom),b.left=Sc(T.left,b.left),b},QI(e,p,o));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function lR(e){var t=e.reference,r=e.element,o=e.placement,s=o?cs(o):null,d=o?bd(o):null,p=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,b;switch(s){case Io:b={x:p,y:t.y-r.height};break;case pa:b={x:p,y:t.y+t.height};break;case fa:b={x:t.x+t.width,y:c};break;case To:b={x:t.x-r.width,y:c};break;default:b={x:t.x,y:t.y}}var w=s?Ww(s):null;if(w!=null){var T=w==="y"?"height":"width";switch(d){case vd:b[w]=b[w]-(t[T]/2-r[T]/2);break;case nf:b[w]=b[w]+(t[T]/2-r[T]/2);break}}return b}function of(e,t){t===void 0&&(t={});var r=t,o=r.placement,s=o===void 0?e.placement:o,d=r.strategy,p=d===void 0?e.strategy:d,c=r.boundary,b=c===void 0?D6:c,w=r.rootBoundary,T=w===void 0?eR:w,k=r.elementContext,A=k===void 0?ip:k,$=r.altBoundary,V=$===void 0?!1:$,N=r.padding,G=N===void 0?0:N,O=oR(typeof G!="number"?G:aR(G,Sf)),R=A===ip?L6:ip,M=e.rects.popper,ee=e.elements[V?R:A],Z=fN(Mc(ee)?ee:ee.contextElement||Fl(e.elements.popper),b,T,p),oe=xd(e.elements.reference),ie=lR({reference:oe,element:M,strategy:"absolute",placement:s}),W=Xb(Object.assign({},M,ie)),Ie=A===ip?W:oe,_e={top:Z.top-Ie.top+O.top,bottom:Ie.bottom-Z.bottom+O.bottom,left:Z.left-Ie.left+O.left,right:Ie.right-Z.right+O.right},Te=e.modifiersData.offset;if(A===ip&&Te){var Ae=Te[s];Object.keys(_e).forEach(function($e){var et=[fa,pa].indexOf($e)>=0?1:-1,Ve=[Io,pa].indexOf($e)>=0?"y":"x";_e[$e]+=Ae[Ve]*et})}return _e}function mN(e,t){t===void 0&&(t={});var r=t,o=r.placement,s=r.boundary,d=r.rootBoundary,p=r.padding,c=r.flipVariations,b=r.allowedAutoPlacements,w=b===void 0?tR:b,T=bd(o),k=T?c?KI:KI.filter(function(V){return bd(V)===T}):Sf,A=k.filter(function(V){return w.indexOf(V)>=0});A.length===0&&(A=k);var $=A.reduce(function(V,N){return V[N]=of(e,{placement:N,boundary:s,rootBoundary:d,padding:p})[cs(N)],V},{});return Object.keys($).sort(function(V,N){return $[V]-$[N]})}function gN(e){if(cs(e)===Vw)return[];var t=Bg(e);return[YI(e),t,YI(t)]}function yN(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var s=r.mainAxis,d=s===void 0?!0:s,p=r.altAxis,c=p===void 0?!0:p,b=r.fallbackPlacements,w=r.padding,T=r.boundary,k=r.rootBoundary,A=r.altBoundary,$=r.flipVariations,V=$===void 0?!0:$,N=r.allowedAutoPlacements,G=t.options.placement,O=cs(G),R=O===G,M=b||(R||!V?[Bg(G)]:gN(G)),ee=[G].concat(M).reduce(function(St,$t){return St.concat(cs($t)===Vw?mN(t,{placement:$t,boundary:T,rootBoundary:k,padding:w,flipVariations:V,allowedAutoPlacements:N}):$t)},[]),Z=t.rects.reference,oe=t.rects.popper,ie=new Map,W=!0,Ie=ee[0],_e=0;_e<ee.length;_e++){var Te=ee[_e],Ae=cs(Te),$e=bd(Te)===vd,et=[Io,pa].indexOf(Ae)>=0,Ve=et?"width":"height",ke=of(t,{placement:Te,boundary:T,rootBoundary:k,altBoundary:A,padding:w}),Ne=et?$e?fa:To:$e?pa:Io;Z[Ve]>oe[Ve]&&(Ne=Bg(Ne));var Oe=Bg(Ne),Fe=[];if(d&&Fe.push(ke[Ae]<=0),c&&Fe.push(ke[Ne]<=0,ke[Oe]<=0),Fe.every(function(St){return St})){Ie=Te,W=!1;break}ie.set(Te,Fe)}if(W)for(var nt=V?3:1,lt=function($t){var Yt=ee.find(function(ct){var Je=ie.get(ct);if(Je)return Je.slice(0,$t).every(function(ft){return ft})});if(Yt)return Ie=Yt,"break"},ut=nt;ut>0;ut--){var Dt=lt(ut);if(Dt==="break")break}t.placement!==Ie&&(t.modifiersData[o]._skip=!0,t.placement=Ie,t.reset=!0)}}const vN={name:"flip",enabled:!0,phase:"main",fn:yN,requiresIfExists:["offset"],data:{_skip:!1}};function eT(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function tT(e){return[Io,fa,pa,To].some(function(t){return e[t]>=0})}function _N(e){var t=e.state,r=e.name,o=t.rects.reference,s=t.rects.popper,d=t.modifiersData.preventOverflow,p=of(t,{elementContext:"reference"}),c=of(t,{altBoundary:!0}),b=eT(p,o),w=eT(c,s,d),T=tT(b),k=tT(w);t.modifiersData[r]={referenceClippingOffsets:b,popperEscapeOffsets:w,isReferenceHidden:T,hasPopperEscaped:k},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":k})}const xN={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_N};function bN(e,t,r){var o=cs(e),s=[To,Io].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,p=d[0],c=d[1];return p=p||0,c=(c||0)*s,[To,fa].indexOf(o)>=0?{x:c,y:p}:{x:p,y:c}}function wN(e){var t=e.state,r=e.options,o=e.name,s=r.offset,d=s===void 0?[0,0]:s,p=tR.reduce(function(T,k){return T[k]=bN(k,t.rects,d),T},{}),c=p[t.placement],b=c.x,w=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=w),t.modifiersData[o]=p}const SN={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:wN};function CN(e){var t=e.state,r=e.name;t.modifiersData[r]=lR({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const IN={name:"popperOffsets",enabled:!0,phase:"read",fn:CN,data:{}};function TN(e){return e==="x"?"y":"x"}function PN(e){var t=e.state,r=e.options,o=e.name,s=r.mainAxis,d=s===void 0?!0:s,p=r.altAxis,c=p===void 0?!1:p,b=r.boundary,w=r.rootBoundary,T=r.altBoundary,k=r.padding,A=r.tether,$=A===void 0?!0:A,V=r.tetherOffset,N=V===void 0?0:V,G=of(t,{boundary:b,rootBoundary:w,padding:k,altBoundary:T}),O=cs(t.placement),R=bd(t.placement),M=!R,ee=Ww(O),Z=TN(ee),oe=t.modifiersData.popperOffsets,ie=t.rects.reference,W=t.rects.popper,Ie=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,_e=typeof Ie=="number"?{mainAxis:Ie,altAxis:Ie}:Object.assign({mainAxis:0,altAxis:0},Ie),Te=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ae={x:0,y:0};if(oe){if(d){var $e,et=ee==="y"?Io:To,Ve=ee==="y"?pa:fa,ke=ee==="y"?"height":"width",Ne=oe[ee],Oe=Ne+G[et],Fe=Ne-G[Ve],nt=$?-W[ke]/2:0,lt=R===vd?ie[ke]:W[ke],ut=R===vd?-W[ke]:-ie[ke],Dt=t.elements.arrow,St=$&&Dt?Hw(Dt):{width:0,height:0},$t=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:iR(),Yt=$t[et],ct=$t[Ve],Je=Rp(0,ie[ke],St[ke]),ft=M?ie[ke]/2-nt-Je-Yt-_e.mainAxis:lt-Je-Yt-_e.mainAxis,_t=M?-ie[ke]/2+nt+Je+ct+_e.mainAxis:ut+Je+ct+_e.mainAxis,sr=t.elements.arrow&&Cf(t.elements.arrow),Qt=sr?ee==="y"?sr.clientTop||0:sr.clientLeft||0:0,Pr=($e=Te==null?void 0:Te[ee])!=null?$e:0,hr=Ne+ft-Pr-Qt,Ht=Ne+_t-Pr,Ct=Rp($?Iy(Oe,hr):Oe,Ne,$?Sc(Fe,Ht):Fe);oe[ee]=Ct,Ae[ee]=Ct-Ne}if(c){var ur,Ot=ee==="x"?Io:To,Cr=ee==="x"?pa:fa,We=oe[Z],br=Z==="y"?"height":"width",zr=We+G[Ot],Kt=We-G[Cr],rr=[Io,To].indexOf(O)!==-1,Or=(ur=Te==null?void 0:Te[Z])!=null?ur:0,Rr=rr?zr:We-ie[br]-W[br]-Or+_e.altAxis,fr=rr?We+ie[br]+W[br]-Or-_e.altAxis:Kt,dr=$&&rr?J6(Rr,We,fr):Rp($?Rr:zr,We,$?fr:Kt);oe[Z]=dr,Ae[Z]=dr-We}t.modifiersData[o]=Ae}}const kN={name:"preventOverflow",enabled:!0,phase:"main",fn:PN,requiresIfExists:["offset"]};function EN(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function AN(e){return e===Wo(e)||!ua(e)?Gw(e):EN(e)}function zN(e){var t=e.getBoundingClientRect(),r=_d(t.width)/e.offsetWidth||1,o=_d(t.height)/e.offsetHeight||1;return r!==1||o!==1}function RN(e,t,r){r===void 0&&(r=!1);var o=ua(t),s=ua(t)&&zN(t),d=Fl(t),p=xd(e,s,r),c={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(o||!o&&!r)&&((us(t)!=="body"||Zw(d))&&(c=AN(t)),ua(t)?(b=xd(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=qw(d))),{x:p.left+c.scrollLeft-b.x,y:p.top+c.scrollTop-b.y,width:p.width,height:p.height}}function MN(e){var t=new Map,r=new Set,o=[];e.forEach(function(d){t.set(d.name,d)});function s(d){r.add(d.name);var p=[].concat(d.requires||[],d.requiresIfExists||[]);p.forEach(function(c){if(!r.has(c)){var b=t.get(c);b&&s(b)}}),o.push(d)}return e.forEach(function(d){r.has(d.name)||s(d)}),o}function DN(e){var t=MN(e);return W6.reduce(function(r,o){return r.concat(t.filter(function(s){return s.phase===o}))},[])}function LN(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function $N(e){var t=e.reduce(function(r,o){var s=r[o.name];return r[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var rT={placement:"bottom",modifiers:[],strategy:"absolute"};function nT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function ON(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,s=t.defaultOptions,d=s===void 0?rT:s;return function(c,b,w){w===void 0&&(w=d);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},rT,d),modifiersData:{},elements:{reference:c,popper:b},attributes:{},styles:{}},k=[],A=!1,$={state:T,setOptions:function(O){var R=typeof O=="function"?O(T.options):O;N(),T.options=Object.assign({},d,T.options,R),T.scrollParents={reference:Mc(c)?Mp(c):c.contextElement?Mp(c.contextElement):[],popper:Mp(b)};var M=DN($N([].concat(o,T.options.modifiers)));return T.orderedModifiers=M.filter(function(ee){return ee.enabled}),V(),$.update()},forceUpdate:function(){if(!A){var O=T.elements,R=O.reference,M=O.popper;if(nT(R,M)){T.rects={reference:RN(R,Cf(M),T.options.strategy==="fixed"),popper:Hw(M)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(_e){return T.modifiersData[_e.name]=Object.assign({},_e.data)});for(var ee=0;ee<T.orderedModifiers.length;ee++){if(T.reset===!0){T.reset=!1,ee=-1;continue}var Z=T.orderedModifiers[ee],oe=Z.fn,ie=Z.options,W=ie===void 0?{}:ie,Ie=Z.name;typeof oe=="function"&&(T=oe({state:T,options:W,name:Ie,instance:$})||T)}}}},update:LN(function(){return new Promise(function(G){$.forceUpdate(),G(T)})}),destroy:function(){N(),A=!0}};if(!nT(c,b))return $;$.setOptions(w).then(function(G){!A&&w.onFirstUpdate&&w.onFirstUpdate(G)});function V(){T.orderedModifiers.forEach(function(G){var O=G.name,R=G.options,M=R===void 0?{}:R,ee=G.effect;if(typeof ee=="function"){var Z=ee({state:T,name:O,instance:$,options:M}),oe=function(){};k.push(Z||oe)}})}function N(){k.forEach(function(G){return G()}),k=[]}return $}}var BN=[sN,IN,oN,Z6,SN,vN,kN,tN,xN],FN=ON({defaultModifiers:BN});const cR="Popper";function NN(e){return XE(cR,e)}P4(cR,["root"]);const jN=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],VN=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function UN(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function Jb(e){return typeof e=="function"?e():e}function HN(e){return e.nodeType!==void 0}const WN=()=>Fr({root:["root"]},w4(NN)),GN={},qN=L.forwardRef(function(t,r){var o;const{anchorEl:s,children:d,direction:p,disablePortal:c,modifiers:b,open:w,placement:T,popperOptions:k,popperRef:A,slotProps:$={},slots:V={},TransitionProps:N}=t,G=Jt(t,jN),O=L.useRef(null),R=on(O,r),M=L.useRef(null),ee=on(M,A),Z=L.useRef(ee);Os(()=>{Z.current=ee},[ee]),L.useImperativeHandle(A,()=>M.current,[]);const oe=UN(T,p),[ie,W]=L.useState(oe),[Ie,_e]=L.useState(Jb(s));L.useEffect(()=>{M.current&&M.current.forceUpdate()}),L.useEffect(()=>{s&&_e(Jb(s))},[s]),Os(()=>{if(!Ie||!w)return;const Ve=Oe=>{W(Oe.placement)};let ke=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Oe})=>{Ve(Oe)}}];b!=null&&(ke=ke.concat(b)),k&&k.modifiers!=null&&(ke=ke.concat(k.modifiers));const Ne=FN(Ie,O.current,K({placement:oe},k,{modifiers:ke}));return Z.current(Ne),()=>{Ne.destroy(),Z.current(null)}},[Ie,c,b,w,k,oe]);const Te={placement:ie};N!==null&&(Te.TransitionProps=N);const Ae=WN(),$e=(o=V.root)!=null?o:"div",et=ZE({elementType:$e,externalSlotProps:$.root,externalForwardedProps:G,additionalProps:{role:"tooltip",ref:R},ownerState:t,className:Ae.root});return Y.jsx($e,K({},et,{children:typeof d=="function"?d(Te):d}))}),Nv=L.forwardRef(function(t,r){const{anchorEl:o,children:s,container:d,direction:p="ltr",disablePortal:c=!1,keepMounted:b=!1,modifiers:w,open:T,placement:k="bottom",popperOptions:A=GN,popperRef:$,style:V,transition:N=!1,slotProps:G={},slots:O={}}=t,R=Jt(t,VN),[M,ee]=L.useState(!0),Z=()=>{ee(!1)},oe=()=>{ee(!0)};if(!b&&!T&&(!N||M))return null;let ie;if(d)ie=d;else if(o){const _e=Jb(o);ie=_e&&HN(_e)?as(_e).body:as(null).body}const W=!T&&b&&(!N||M)?"none":void 0,Ie=N?{in:T,onEnter:Z,onExited:oe}:void 0;return Y.jsx(Qz,{disablePortal:c,container:ie,children:Y.jsx(qN,K({anchorEl:o,direction:p,disablePortal:c,modifiers:w,ref:r,open:N?!M:T,placement:k,popperOptions:A,popperRef:$,slotProps:G,slots:O},R,{style:K({position:"fixed",top:0,left:0,display:W},V),TransitionProps:Ie,children:s}))})}),Ty={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},ZN=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function KN(e,t){const{open:r}=e,{context:{selectionMode:o}}=t;if(t.type===Ty.buttonClick){var s;const b=(s=e.selectedValues[0])!=null?s:_i(null,"start",t.context);return K({},e,{open:!r,highlightedValue:r?null:b})}if(t.type===Ty.browserAutoFill)return K1(t.item,e,t.context);const d=bv(e,t);switch(t.type){case pn.keyDown:if(e.open){if(t.event.key==="Escape")return K({},d,{open:!1})}else{if(t.event.key==="ArrowDown"){var p;return K({},e,{open:!0,highlightedValue:(p=e.selectedValues[0])!=null?p:_i(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var c;return K({},e,{open:!0,highlightedValue:(c=e.selectedValues[0])!=null?c:_i(null,"end",t.context)})}}break;case pn.itemClick:if(o==="single")return K({},d,{open:!1});break;case pn.blur:return K({},d,{open:!1});default:return d}return d}function XN(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function JN(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:o=!1,defaultValue:s,disabled:d=!1,listboxId:p,listboxRef:c,multiple:b=!1,name:w,required:T,onChange:k,onHighlightChange:A,onOpenChange:$,open:V,options:N,getOptionAsString:G=ZN,getSerializedValue:O=XN,value:R,componentName:M="useSelect"}=e,ee=L.useRef(null),Z=on(r,ee),oe=L.useRef(null),ie=ko(p);let W;R===void 0&&s===void 0?W=[]:s!==void 0&&(b?W=s:W=s==null?[]:[s]);const Ie=L.useMemo(()=>{if(R!==void 0)return b?R:R==null?[]:[R]},[R,b]),{subitems:_e,contextValue:Te}=wv(),Ae=L.useMemo(()=>N!=null?new Map(N.map((Be,xt)=>[Be.value,{value:Be.value,label:Be.label,disabled:Be.disabled,ref:L.createRef(),id:`${ie}_${xt}`}])):_e,[N,_e,ie]),$e=on(c,oe),{getRootProps:et,active:Ve,focusVisible:ke,rootRef:Ne}=hs({disabled:d,rootRef:Z}),Oe=L.useMemo(()=>Array.from(Ae.keys()),[Ae]),Fe=L.useCallback(Be=>{if(t!==void 0){const xt=Oe.find(bt=>t(bt,Be));return Ae.get(xt)}return Ae.get(Be)},[Ae,t,Oe]),nt=L.useCallback(Be=>{var xt;const bt=Fe(Be);return(xt=bt==null?void 0:bt.disabled)!=null?xt:!1},[Fe]),lt=L.useCallback(Be=>{const xt=Fe(Be);return xt?G(xt):""},[Fe,G]),ut=L.useMemo(()=>({selectedValues:Ie,open:V}),[Ie,V]),Dt=L.useCallback(Be=>{var xt;return(xt=Ae.get(Be))==null?void 0:xt.id},[Ae]),St=L.useCallback((Be,xt)=>{if(b)k==null||k(Be,xt);else{var bt;k==null||k(Be,(bt=xt[0])!=null?bt:null)}},[b,k]),$t=L.useCallback((Be,xt)=>{A==null||A(Be,xt??null)},[A]),Yt=L.useCallback((Be,xt,bt)=>{if(xt==="open"&&($==null||$(bt),bt===!1&&(Be==null?void 0:Be.type)!=="blur")){var Ce;(Ce=ee.current)==null||Ce.focus()}},[$]),ct=L.useCallback(Be=>{var xt,bt;return Be==null?null:(xt=(bt=_e.get(Be))==null?void 0:bt.ref.current)!=null?xt:null},[_e]),Je={getInitialState:()=>{var Be;return{highlightedValue:null,selectedValues:(Be=W)!=null?Be:[],open:o}},getItemId:Dt,controlledProps:ut,focusManagement:"DOM",getItemDomElement:ct,itemComparer:t,isItemDisabled:nt,rootRef:$e,onChange:St,onHighlightChange:$t,onStateChange:Yt,reducerActionContext:L.useMemo(()=>({multiple:b}),[b]),items:Oe,getItemAsString:lt,selectionMode:b?"multiple":"single",stateReducer:KN,componentName:M},{dispatch:ft,getRootProps:_t,contextValue:sr,state:{open:Qt,highlightedValue:Pr,selectedValues:hr},rootRef:Ht}=X1(Je),Ct=L.useRef(Qt);Os(()=>{if(Qt&&Pr!==null){var Be;const xt=(Be=Fe(Pr))==null?void 0:Be.ref;if(!oe.current||!(xt!=null&&xt.current))return;Ct.current||xt.current.focus({preventScroll:!0});const bt=oe.current.getBoundingClientRect(),Ce=xt.current.getBoundingClientRect();Ce.top<bt.top?oe.current.scrollTop-=bt.top-Ce.top:Ce.bottom>bt.bottom&&(oe.current.scrollTop+=Ce.bottom-bt.bottom)}},[Qt,Pr,Fe]);const ur=L.useCallback(Be=>Fe(Be),[Fe]),Ot=Be=>xt=>{var bt;if(Be==null||(bt=Be.onClick)==null||bt.call(Be,xt),!xt.defaultMuiPrevented){const Ce={type:Ty.buttonClick,event:xt};ft(Ce)}},Cr=Be=>xt=>{var bt;(bt=Be.onKeyDown)==null||bt.call(Be,xt),!xt.defaultMuiPrevented&&(xt.key==="ArrowDown"||xt.key==="ArrowUp")&&(xt.preventDefault(),ft({type:pn.keyDown,key:xt.key,event:xt}))},We=(Be={})=>({onClick:Ot(Be),onKeyDown:Cr(Be)}),br=(Be={})=>K({},Be,We(Be),{role:"combobox","aria-expanded":Qt,"aria-controls":ie}),zr=(Be={})=>{const xt=Di(Be),bt=Bs(br,et);return K({},Be,bt(xt))},Kt=Be=>xt=>{var bt,Ce;(bt=Be.onBlur)==null||bt.call(Be,xt),!xt.defaultMuiPrevented&&((Ce=oe.current)!=null&&Ce.contains(xt.relatedTarget)||xt.relatedTarget===ee.current)&&(xt.defaultMuiPrevented=!0)},rr=(Be={})=>({onBlur:Kt(Be)}),Or=(Be={})=>{const xt=Di(Be),bt=Bs(rr,_t);return K({id:ie,role:"listbox","aria-multiselectable":b?"true":void 0},Be,bt(xt))};L.useDebugValue({selectedOptions:hr,highlightedOption:Pr,open:Qt});const Rr=L.useMemo(()=>K({},sr,Te),[sr,Te]);let fr;e.multiple?fr=hr:fr=hr.length>0?hr[0]:null;let dr;if(b)dr=fr.map(Be=>ur(Be)).filter(Be=>Be!==void 0);else{var Gt;dr=(Gt=ur(fr))!=null?Gt:null}const cr=Be=>xt=>{var bt;if(Be==null||(bt=Be.onChange)==null||bt.call(Be,xt),xt.defaultMuiPrevented)return;const Ce=Ae.get(xt.target.value);xt.target.value===""?ft({type:pn.clearSelection}):Ce!==void 0&&ft({type:Ty.browserAutoFill,item:Ce.value,event:xt})};return{buttonActive:Ve,buttonFocusVisible:ke,buttonRef:Ne,contextValue:Rr,disabled:d,dispatch:ft,getButtonProps:zr,getHiddenInputProps:(Be={})=>{const xt=Di(Be);return K({name:w,tabIndex:-1,"aria-hidden":!0,required:T?!0:void 0,value:O(dr),style:MO},Be,{onChange:cr(xt)})},getListboxProps:Or,getOptionMetadata:ur,listboxRef:Ht,open:Qt,options:Oe,value:fr,highlightedOption:Pr}}function YN(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:s,getItemState:d,registerItem:p,totalSubitemCount:c}=t,b=L.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:s}),[o,s,d]),w=L.useMemo(()=>({getItemIndex:s,registerItem:p,totalSubitemCount:c}),[p,s,c]);return Y.jsx(vf.Provider,{value:w,children:Y.jsx(Ll.Provider,{value:b,children:r})})}function QN(e){const{checked:t,defaultChecked:r,disabled:o,onBlur:s,onChange:d,onFocus:p,onFocusVisible:c,readOnly:b,required:w}=e,[T,k]=ed({controlled:t,default:!!r,name:"Switch",state:"checked"}),A=W=>Ie=>{var _e;Ie.nativeEvent.defaultPrevented||(k(Ie.target.checked),d==null||d(Ie),(_e=W.onChange)==null||_e.call(W,Ie))},{isFocusVisibleRef:$,onBlur:V,onFocus:N,ref:G}=U1(),[O,R]=L.useState(!1);o&&O&&R(!1),L.useEffect(()=>{$.current=O},[O,$]);const M=L.useRef(null),ee=W=>Ie=>{var _e;M.current||(M.current=Ie.currentTarget),N(Ie),$.current===!0&&(R(!0),c==null||c(Ie)),p==null||p(Ie),(_e=W.onFocus)==null||_e.call(W,Ie)},Z=W=>Ie=>{var _e;V(Ie),$.current===!1&&R(!1),s==null||s(Ie),(_e=W.onBlur)==null||_e.call(W,Ie)},oe=on(G,M);return{checked:T,disabled:!!o,focusVisible:O,getInputProps:(W={})=>K({checked:t,defaultChecked:r,disabled:o,readOnly:b,ref:oe,required:w,type:"checkbox",role:"switch","aria-checked":t},W,{onChange:A(W),onFocus:ee(W),onBlur:Z(W)}),inputRef:oe,readOnly:!!b}}function ej(e){const{value:t,defaultValue:r,onChange:o,orientation:s="horizontal",direction:d="ltr",selectionFollowsFocus:p=!1}=e,[c,b]=ed({controlled:t,default:r,name:"Tabs",state:"value"}),w=L.useCallback((G,O)=>{b(O),o==null||o(G,O)},[o,b]),{subitems:T,contextValue:k}=wv(),A=L.useRef(()=>{}),$=L.useCallback(G=>{var O;return(O=T.get(G))==null?void 0:O.id},[T]),V=L.useCallback(G=>A.current(G),[]),N=L.useCallback(G=>{A.current=G},[]);return{contextValue:K({direction:d,getTabId:V,getTabPanelId:$,onSelected:w,orientation:s,registerTabIdLookup:N,selectionFollowsFocus:p,value:c},k)}}const uR=L.createContext(null);function jv(){const e=L.useContext(uR);if(e==null)throw new Error("No TabsContext provided");return e}function tj(e){const{value:t,children:r}=e,{direction:o,getItemIndex:s,onSelected:d,orientation:p,registerItem:c,registerTabIdLookup:b,selectionFollowsFocus:w,totalSubitemCount:T,value:k,getTabId:A,getTabPanelId:$}=t,V=L.useMemo(()=>({getItemIndex:s,registerItem:c,totalSubitemCount:T}),[c,s,T]),N=L.useMemo(()=>({direction:o,getTabId:A,getTabPanelId:$,onSelected:d,orientation:p,registerTabIdLookup:b,selectionFollowsFocus:w,value:k}),[o,A,$,d,p,b,w,k]);return Y.jsx(vf.Provider,{value:V,children:Y.jsx(uR.Provider,{value:N,children:r})})}function rj(e){return e.size}function nj(e){const{value:t,id:r,rootRef:o}=e,s=jv();if(s===null)throw new Error("No TabContext provided");const{value:d,getTabId:p}=s,c=ko(r),b=L.useRef(null),w=on(b,o),T=L.useMemo(()=>({id:c,ref:b}),[c]),{id:k}=Sv(t??rj,T),A=k!==d,$=k!==void 0?p(k):void 0;return{hidden:A,getRootProps:(N={})=>K({"aria-labelledby":$??void 0,hidden:A,id:c??void 0},N,{ref:w}),rootRef:w}}const dR={valueChange:"valueChange"};function ij(e,t){if(t.type===dR.valueChange)return K({},e,{highlightedValue:t.value});const r=bv(e,t),{context:{selectionFollowsFocus:o}}=t;if(t.type===pn.itemsChange){if(r.selectedValues.length>0)return K({},r,{highlightedValue:r.selectedValues[0]});_i(null,"reset",t.context)}return o&&r.highlightedValue!=null?K({},r,{selectedValues:[r.highlightedValue]}):r}function oj(e){var t;const{rootRef:r}=e,{direction:o="ltr",onSelected:s,orientation:d="horizontal",value:p,registerTabIdLookup:c,selectionFollowsFocus:b}=jv(),{subitems:w,contextValue:T}=wv(),k=L.useCallback(Te=>{var Ae;return(Ae=w.get(Te))==null?void 0:Ae.id},[w]);c(k);const A=L.useMemo(()=>Array.from(w.keys()),[w]),$=L.useCallback(Te=>{var Ae,$e;return Te==null?null:(Ae=($e=w.get(Te))==null?void 0:$e.ref.current)!=null?Ae:null},[w]),V=o==="rtl";let N;d==="vertical"?N="vertical":N=V?"horizontal-rtl":"horizontal-ltr";const G=L.useCallback((Te,Ae)=>{var $e;s(Te,($e=Ae[0])!=null?$e:null)},[s]),O=L.useMemo(()=>p===void 0?{}:p!=null?{selectedValues:[p]}:{selectedValues:[]},[p]),R=L.useCallback(Te=>{var Ae,$e;return(Ae=($e=w.get(Te))==null?void 0:$e.disabled)!=null?Ae:!1},[w]),{contextValue:M,dispatch:ee,getRootProps:Z,state:{highlightedValue:oe,selectedValues:ie},rootRef:W}=X1({controlledProps:O,disabledItemsFocusable:!b,focusManagement:"DOM",getItemDomElement:$,isItemDisabled:R,items:A,rootRef:r,onChange:G,orientation:N,reducerActionContext:L.useMemo(()=>({selectionFollowsFocus:b||!1}),[b]),selectionMode:"single",stateReducer:ij});L.useEffect(()=>{p!==void 0&&p!=null&&ee({type:dR.valueChange,value:p})},[ee,p]);const Ie=(Te={})=>K({},Te,Z(Te),{"aria-orientation":d==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:L.useMemo(()=>K({},T,M),[T,M]),dispatch:ee,getRootProps:Ie,highlightedValue:oe,isRtl:V,orientation:d,rootRef:W,selectedValue:(t=ie[0])!=null?t:null}}function aj(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:s,getItemState:d,registerItem:p,totalSubitemCount:c}=t,b=L.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:s}),[o,s,d]),w=L.useMemo(()=>({getItemIndex:s,registerItem:p,totalSubitemCount:c}),[p,s,c]);return Y.jsx(vf.Provider,{value:w,children:Y.jsx(Ll.Provider,{value:b,children:r})})}function sj(e){return e.size}function lj(e){const{value:t,rootRef:r,disabled:o=!1,id:s}=e,d=L.useRef(null),p=ko(s),{value:c,selectionFollowsFocus:b,getTabPanelId:w}=jv(),T=L.useMemo(()=>({disabled:o,ref:d,id:p}),[o,d,p]),{id:k,index:A,totalItemCount:$}=Sv(t??sj,T),{getRootProps:V,highlighted:N,selected:G}=J1({item:k}),{getRootProps:O,rootRef:R,active:M,focusVisible:ee,setFocusVisible:Z}=hs({disabled:o,focusableWhenDisabled:!b,type:"button"}),oe=on(d,r,R),ie=k!==void 0?w(k):void 0;return{getRootProps:(Ie={})=>{const _e=Di(Ie),Te=Bs(V,O);return K({},Ie,Te(_e),{role:"tab","aria-controls":ie,"aria-selected":G,id:p,ref:oe})},active:M,focusVisible:ee,highlighted:N,index:A,rootRef:oe,selected:G||k===c,setFocusVisible:Z,totalTabsCount:$}}function iT(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function Kw(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:o,matchFrom:s="any",stringify:d,trim:p=!1}=e;return(c,{inputValue:b,getOptionLabel:w})=>{let T=p?b.trim():b;r&&(T=T.toLowerCase()),t&&(T=iT(T));const k=T?c.filter(A=>{let $=(d||w)(A);return r&&($=$.toLowerCase()),t&&($=iT($)),s==="start"?$.indexOf(T)===0:$.indexOf(T)>-1}):c;return typeof o=="number"?k.slice(0,o):k}}function pg(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const cj=Kw(),oT=5,uj=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function dj(e){const{unstable_isActiveElementInListbox:t=uj,unstable_classNamePrefix:r="Mui",autoComplete:o=!1,autoHighlight:s=!1,autoSelect:d=!1,blurOnSelect:p=!1,clearOnBlur:c=!e.freeSolo,clearOnEscape:b=!1,componentName:w="useAutocomplete",defaultValue:T=e.multiple?[]:null,disableClearable:k=!1,disableCloseOnSelect:A=!1,disabled:$,disabledItemsFocusable:V=!1,disableListWrap:N=!1,filterOptions:G=cj,filterSelectedOptions:O=!1,freeSolo:R=!1,getOptionDisabled:M,getOptionKey:ee,getOptionLabel:Z=Se=>{var xe;return(xe=Se.label)!=null?xe:Se},groupBy:oe,handleHomeEndKeys:ie=!e.freeSolo,id:W,includeInputInList:Ie=!1,inputValue:_e,isOptionEqualToValue:Te=(Se,xe)=>Se===xe,multiple:Ae=!1,onChange:$e,onClose:et,onHighlightChange:Ve,onInputChange:ke,onOpen:Ne,open:Oe,openOnFocus:Fe=!1,options:nt,readOnly:lt=!1,selectOnFocus:ut=!e.freeSolo,value:Dt}=e,St=ko(W);let $t=Z;$t=Se=>{const xe=Z(Se);return typeof xe!="string"?String(xe):xe};const Yt=L.useRef(!1),ct=L.useRef(!0),Je=L.useRef(null),ft=L.useRef(null),[_t,sr]=L.useState(null),[Qt,Pr]=L.useState(-1),hr=s?0:-1,Ht=L.useRef(hr),[Ct,ur]=ed({controlled:Dt,default:T,name:w}),[Ot,Cr]=ed({controlled:_e,default:"",name:w,state:"inputValue"}),[We,br]=L.useState(!1),zr=L.useCallback((Se,xe)=>{if(!(Ae?Ct.length<xe.length:xe!==null)&&!c)return;let Xe;if(Ae)Xe="";else if(xe==null)Xe="";else{const rt=$t(xe);Xe=typeof rt=="string"?rt:""}Ot!==Xe&&(Cr(Xe),ke&&ke(Se,Xe,"reset"))},[$t,Ot,Ae,ke,Cr,c,Ct]),[Kt,rr]=ed({controlled:Oe,default:!1,name:w,state:"open"}),[Or,Rr]=L.useState(!0),fr=!Ae&&Ct!=null&&Ot===$t(Ct),dr=Kt&&!lt,Gt=dr?G(nt.filter(Se=>!(O&&(Ae?Ct:[Ct]).some(xe=>xe!==null&&Te(Se,xe)))),{inputValue:fr&&Or?"":Ot,getOptionLabel:$t}):[],cr=RO({filteredOptions:Gt,value:Ct,inputValue:Ot});L.useEffect(()=>{const Se=Ct!==cr.value;We&&!Se||R&&!Se||zr(null,Ct)},[Ct,zr,We,cr.value,R]);const Ir=Kt&&Gt.length>0&&!lt,Be=vl(Se=>{Se===-1?Je.current.focus():_t.querySelector(`[data-tag-index="${Se}"]`).focus()});L.useEffect(()=>{Ae&&Qt>Ct.length-1&&(Pr(-1),Be(-1))},[Ct,Ae,Qt,Be]);function xt(Se,xe){if(!ft.current||Se<0||Se>=Gt.length)return-1;let Ke=Se;for(;;){const Xe=ft.current.querySelector(`[data-option-index="${Ke}"]`),rt=V?!1:!Xe||Xe.disabled||Xe.getAttribute("aria-disabled")==="true";if(Xe&&Xe.hasAttribute("tabindex")&&!rt)return Ke;if(xe==="next"?Ke=(Ke+1)%Gt.length:Ke=(Ke-1+Gt.length)%Gt.length,Ke===Se)return-1}}const bt=vl(({event:Se,index:xe,reason:Ke="auto"})=>{if(Ht.current=xe,xe===-1?Je.current.removeAttribute("aria-activedescendant"):Je.current.setAttribute("aria-activedescendant",`${St}-option-${xe}`),Ve&&Ve(Se,xe===-1?null:Gt[xe],Ke),!ft.current)return;const Xe=ft.current.querySelector(`[role="option"].${r}-focused`);Xe&&(Xe.classList.remove(`${r}-focused`),Xe.classList.remove(`${r}-focusVisible`));let rt=ft.current;if(ft.current.getAttribute("role")!=="listbox"&&(rt=ft.current.parentElement.querySelector('[role="listbox"]')),!rt)return;if(xe===-1){rt.scrollTop=0;return}const jt=ft.current.querySelector(`[data-option-index="${xe}"]`);if(jt&&(jt.classList.add(`${r}-focused`),Ke==="keyboard"&&jt.classList.add(`${r}-focusVisible`),rt.scrollHeight>rt.clientHeight&&Ke!=="mouse"&&Ke!=="touch")){const zt=jt,nr=rt.clientHeight+rt.scrollTop,lr=zt.offsetTop+zt.offsetHeight;lr>nr?rt.scrollTop=lr-rt.clientHeight:zt.offsetTop-zt.offsetHeight*(oe?1.3:0)<rt.scrollTop&&(rt.scrollTop=zt.offsetTop-zt.offsetHeight*(oe?1.3:0))}}),Ce=vl(({event:Se,diff:xe,direction:Ke="next",reason:Xe="auto"})=>{if(!dr)return;const jt=xt((()=>{const zt=Gt.length-1;if(xe==="reset")return hr;if(xe==="start")return 0;if(xe==="end")return zt;const nr=Ht.current+xe;return nr<0?nr===-1&&Ie?-1:N&&Ht.current!==-1||Math.abs(xe)>1?0:zt:nr>zt?nr===zt+1&&Ie?-1:N||Math.abs(xe)>1?zt:0:nr})(),Ke);if(bt({index:jt,reason:Xe,event:Se}),o&&xe!=="reset")if(jt===-1)Je.current.value=Ot;else{const zt=$t(Gt[jt]);Je.current.value=zt,zt.toLowerCase().indexOf(Ot.toLowerCase())===0&&Ot.length>0&&Je.current.setSelectionRange(Ot.length,zt.length)}}),He=()=>{const Se=(xe,Ke)=>{const Xe=xe?$t(xe):"",rt=Ke?$t(Ke):"";return Xe===rt};if(Ht.current!==-1&&cr.filteredOptions&&cr.filteredOptions.length!==Gt.length&&cr.inputValue===Ot&&(Ae?Ct.length===cr.value.length&&cr.value.every((xe,Ke)=>$t(Ct[Ke])===$t(xe)):Se(cr.value,Ct))){const xe=cr.filteredOptions[Ht.current];if(xe)return pg(Gt,Ke=>$t(Ke)===$t(xe))}return-1},Ye=L.useCallback(()=>{if(!dr)return;const Se=He();if(Se!==-1){Ht.current=Se;return}const xe=Ae?Ct[0]:Ct;if(Gt.length===0||xe==null){Ce({diff:"reset"});return}if(ft.current){if(xe!=null){const Ke=Gt[Ht.current];if(Ae&&Ke&&pg(Ct,rt=>Te(Ke,rt))!==-1)return;const Xe=pg(Gt,rt=>Te(rt,xe));Xe===-1?Ce({diff:"reset"}):bt({index:Xe});return}if(Ht.current>=Gt.length-1){bt({index:Gt.length-1});return}bt({index:Ht.current})}},[Gt.length,Ae?!1:Ct,O,Ce,bt,dr,Ot,Ae]),It=vl(Se=>{ey(ft,Se),Se&&Ye()});L.useEffect(()=>{Ye()},[Ye]);const gt=Se=>{Kt||(rr(!0),Rr(!0),Ne&&Ne(Se))},Et=(Se,xe)=>{Kt&&(rr(!1),et&&et(Se,xe))},pr=(Se,xe,Ke,Xe)=>{if(Ae){if(Ct.length===xe.length&&Ct.every((rt,jt)=>rt===xe[jt]))return}else if(Ct===xe)return;$e&&$e(Se,xe,Ke,Xe),ur(xe)},Lt=L.useRef(!1),mr=(Se,xe,Ke="selectOption",Xe="options")=>{let rt=Ke,jt=xe;if(Ae){jt=Array.isArray(Ct)?Ct.slice():[];const zt=pg(jt,nr=>Te(xe,nr));zt===-1?jt.push(xe):Xe!=="freeSolo"&&(jt.splice(zt,1),rt="removeOption")}zr(Se,jt),pr(Se,jt,rt,{option:xe}),!A&&(!Se||!Se.ctrlKey&&!Se.metaKey)&&Et(Se,rt),(p===!0||p==="touch"&&Lt.current||p==="mouse"&&!Lt.current)&&Je.current.blur()};function ce(Se,xe){if(Se===-1)return-1;let Ke=Se;for(;;){if(xe==="next"&&Ke===Ct.length||xe==="previous"&&Ke===-1)return-1;const Xe=_t.querySelector(`[data-tag-index="${Ke}"]`);if(!Xe||!Xe.hasAttribute("tabindex")||Xe.disabled||Xe.getAttribute("aria-disabled")==="true")Ke+=xe==="next"?1:-1;else return Ke}}const H=(Se,xe)=>{if(!Ae)return;Ot===""&&Et(Se,"toggleInput");let Ke=Qt;Qt===-1?Ot===""&&xe==="previous"&&(Ke=Ct.length-1):(Ke+=xe==="next"?1:-1,Ke<0&&(Ke=0),Ke===Ct.length&&(Ke=-1)),Ke=ce(Ke,xe),Pr(Ke),Be(Ke)},q=Se=>{Yt.current=!0,Cr(""),ke&&ke(Se,"","clear"),pr(Se,Ae?[]:null,"clear")},te=Se=>xe=>{if(Se.onKeyDown&&Se.onKeyDown(xe),!xe.defaultMuiPrevented&&(Qt!==-1&&["ArrowLeft","ArrowRight"].indexOf(xe.key)===-1&&(Pr(-1),Be(-1)),xe.which!==229))switch(xe.key){case"Home":dr&&ie&&(xe.preventDefault(),Ce({diff:"start",direction:"next",reason:"keyboard",event:xe}));break;case"End":dr&&ie&&(xe.preventDefault(),Ce({diff:"end",direction:"previous",reason:"keyboard",event:xe}));break;case"PageUp":xe.preventDefault(),Ce({diff:-oT,direction:"previous",reason:"keyboard",event:xe}),gt(xe);break;case"PageDown":xe.preventDefault(),Ce({diff:oT,direction:"next",reason:"keyboard",event:xe}),gt(xe);break;case"ArrowDown":xe.preventDefault(),Ce({diff:1,direction:"next",reason:"keyboard",event:xe}),gt(xe);break;case"ArrowUp":xe.preventDefault(),Ce({diff:-1,direction:"previous",reason:"keyboard",event:xe}),gt(xe);break;case"ArrowLeft":H(xe,"previous");break;case"ArrowRight":H(xe,"next");break;case"Enter":if(Ht.current!==-1&&dr){const Ke=Gt[Ht.current],Xe=M?M(Ke):!1;if(xe.preventDefault(),Xe)return;mr(xe,Ke,"selectOption"),o&&Je.current.setSelectionRange(Je.current.value.length,Je.current.value.length)}else R&&Ot!==""&&fr===!1&&(Ae&&xe.preventDefault(),mr(xe,Ot,"createOption","freeSolo"));break;case"Escape":dr?(xe.preventDefault(),xe.stopPropagation(),Et(xe,"escape")):b&&(Ot!==""||Ae&&Ct.length>0)&&(xe.preventDefault(),xe.stopPropagation(),q(xe));break;case"Backspace":if(Ae&&!lt&&Ot===""&&Ct.length>0){const Ke=Qt===-1?Ct.length-1:Qt,Xe=Ct.slice();Xe.splice(Ke,1),pr(xe,Xe,"removeOption",{option:Ct[Ke]})}break;case"Delete":if(Ae&&!lt&&Ot===""&&Ct.length>0&&Qt!==-1){const Ke=Qt,Xe=Ct.slice();Xe.splice(Ke,1),pr(xe,Xe,"removeOption",{option:Ct[Ke]})}break}},he=Se=>{br(!0),Fe&&!Yt.current&&gt(Se)},fe=Se=>{if(t(ft)){Je.current.focus();return}br(!1),ct.current=!0,Yt.current=!1,d&&Ht.current!==-1&&dr?mr(Se,Gt[Ht.current],"blur"):d&&R&&Ot!==""?mr(Se,Ot,"blur","freeSolo"):c&&zr(Se,Ct),Et(Se,"blur")},Re=Se=>{const xe=Se.target.value;Ot!==xe&&(Cr(xe),Rr(!1),ke&&ke(Se,xe,"input")),xe===""?!k&&!Ae&&pr(Se,null,"clear"):gt(Se)},be=Se=>{const xe=Number(Se.currentTarget.getAttribute("data-option-index"));Ht.current!==xe&&bt({event:Se,index:xe,reason:"mouse"})},ge=Se=>{bt({event:Se,index:Number(Se.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Lt.current=!0},Ee=Se=>{const xe=Number(Se.currentTarget.getAttribute("data-option-index"));mr(Se,Gt[xe],"selectOption"),Lt.current=!1},tt=Se=>xe=>{const Ke=Ct.slice();Ke.splice(Se,1),pr(xe,Ke,"removeOption",{option:Ct[Se]})},ne=Se=>{Kt?Et(Se,"toggleInput"):gt(Se)},ae=Se=>{Se.currentTarget.contains(Se.target)&&Se.target.getAttribute("id")!==St&&Se.preventDefault()},Pe=Se=>{Se.currentTarget.contains(Se.target)&&(Je.current.focus(),ut&&ct.current&&Je.current.selectionEnd-Je.current.selectionStart===0&&Je.current.select(),ct.current=!1)},Ue=Se=>{!$&&(Ot===""||!Kt)&&ne(Se)};let Qe=R&&Ot.length>0;Qe=Qe||(Ae?Ct.length>0:Ct!==null);let it=Gt;return oe&&(it=Gt.reduce((Se,xe,Ke)=>{const Xe=oe(xe);return Se.length>0&&Se[Se.length-1].group===Xe?Se[Se.length-1].options.push(xe):Se.push({key:Ke,index:Ke,group:Xe,options:[xe]}),Se},[])),$&&We&&fe(),{getRootProps:(Se={})=>K({"aria-owns":Ir?`${St}-listbox`:null},Se,{onKeyDown:te(Se),onMouseDown:ae,onClick:Pe}),getInputLabelProps:()=>({id:`${St}-label`,htmlFor:St}),getInputProps:()=>({id:St,value:Ot,onBlur:fe,onFocus:he,onChange:Re,onMouseDown:Ue,"aria-activedescendant":dr?"":null,"aria-autocomplete":o?"both":"list","aria-controls":Ir?`${St}-listbox`:void 0,"aria-expanded":Ir,autoComplete:"off",ref:Je,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:$}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:q}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:ne}),getTagProps:({index:Se})=>K({key:Se,"data-tag-index":Se,tabIndex:-1},!lt&&{onDelete:tt(Se)}),getListboxProps:()=>({role:"listbox",id:`${St}-listbox`,"aria-labelledby":`${St}-label`,ref:It,onMouseDown:Se=>{Se.preventDefault()}}),getOptionProps:({index:Se,option:xe})=>{var Ke;const Xe=(Ae?Ct:[Ct]).some(jt=>jt!=null&&Te(xe,jt)),rt=M?M(xe):!1;return{key:(Ke=ee==null?void 0:ee(xe))!=null?Ke:$t(xe),tabIndex:-1,role:"option",id:`${St}-option-${Se}`,onMouseMove:be,onClick:Ee,onTouchStart:ge,"data-option-index":Se,"aria-disabled":rt,"aria-selected":Xe}},id:St,inputValue:Ot,value:Ct,dirty:Qe,expanded:dr&&_t,popupOpen:dr,focused:We||Qt!==-1,anchorEl:_t,setAnchorEl:sr,focusedTag:Qt,groupedOptions:it}}const hj=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],pj=["component","slots","slotProps"],fj=["component"];function Ft(e,t){const{className:r,elementType:o,ownerState:s,externalForwardedProps:d,getSlotOwnerState:p,internalForwardedProps:c}=t,b=Jt(t,hj),{component:w,slots:T={[e]:void 0},slotProps:k={[e]:void 0}}=d,A=Jt(d,pj),$=T[e]||o,V=GE(k[e],s),N=qE(K({className:r},b,{externalForwardedProps:e==="root"?A:void 0,externalSlotProps:V})),{props:{component:G},internalRef:O}=N,R=Jt(N.props,fj),M=on(O,V==null?void 0:V.ref,t.ref),ee=p?p(R):{},Z=K({},s,ee),oe=e==="root"?G||w:G,ie=WE($,K({},e==="root"&&!w&&!T[e]&&c,e!=="root"&&!T[e]&&c,R,oe&&{as:oe},{ref:M}),Z);return Object.keys(ee).forEach(W=>{delete ie[W]}),[$,ie]}function mj(e){return qr("MuiListItem",e)}const Py=Nr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),ky=L.createContext(!1),Ld=L.createContext(!1),hR=L.createContext(!1),Xw=L.createContext(void 0),pR=L.createContext(void 0),Vv=L.createContext(void 0),gj=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],yj=e=>{const{sticky:t,nested:r,nesting:o,variant:s,color:d}=e,p={root:["root",r&&"nested",o&&"nesting",t&&"sticky",d&&`color${kt(d)}`,s&&`variant${kt(s)}`],startAction:["startAction"],endAction:["endAction"]};return Fr(p,mj,{})},vj=mt("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},K({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&K({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${Py.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),_j=mt(vj,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),xj=mt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),bj=mt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),$c=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyListItem"}),s=L.useContext(Vv),d=L.useContext(Xw),p=L.useContext(Ld),c=L.useContext(hR),b=L.useContext(ky),{component:w,className:T,children:k,nested:A=!1,sticky:$=!1,variant:V="plain",color:N="neutral",startAction:G,endAction:O,role:R,slots:M={},slotProps:ee={}}=o,Z=Jt(o,gj),[oe,ie]=L.useState(""),[W,Ie]=(d==null?void 0:d.split(":"))||["",""],_e=w||(W&&!W.match(/^(ul|ol|menu)$/)?"div":void 0);let Te=s==="menu"?"none":void 0;d&&(Te={menu:"none",menubar:"none",group:"presentation"}[Ie]),R&&(Te=R);const Ae=K({},o,{sticky:$,startAction:G,endAction:O,row:p,wrap:c,variant:V,color:N,nesting:b,nested:A,component:_e,role:Te}),$e=yj(Ae),et=K({},Z,{component:_e,slots:M,slotProps:ee}),[Ve,ke]=Ft("root",{additionalProps:{role:Te},ref:r,className:si($e.root,T),elementType:_j,externalForwardedProps:et,ownerState:Ae}),[Ne,Oe]=Ft("startAction",{className:$e.startAction,elementType:xj,externalForwardedProps:et,ownerState:Ae}),[Fe,nt]=Ft("endAction",{className:$e.endAction,elementType:bj,externalForwardedProps:et,ownerState:Ae});return Y.jsx(pR.Provider,{value:ie,children:Y.jsx(ky.Provider,{value:A?oe||!0:!1,children:Y.jsxs(Ve,K({},ke,{children:[G&&Y.jsx(Ne,K({},Oe,{children:G})),L.Children.map(k,(lt,ut)=>L.isValidElement(lt)?L.cloneElement(lt,K({},ut===0&&{"data-first-child":""},j1(lt,["ListItem"])&&{component:lt.props.component||"div"})):lt),O&&Y.jsx(Fe,K({},nt,{children:O}))]}))})})});$c.muiName="ListItem";const Uv={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function If(e){const{children:t,nested:r,row:o=!1,wrap:s=!1}=e,d=Y.jsx(Ld.Provider,{value:o,children:Y.jsx(hR.Provider,{value:s,children:L.Children.map(t,(p,c)=>L.isValidElement(p)?L.cloneElement(p,K({},c===0&&{"data-first-child":""},c===L.Children.count(t)-1&&{"data-last-child":""})):p)})});return r===void 0?d:Y.jsx(ky.Provider,{value:r,children:d})}const $d=({theme:e,ownerState:t},r)=>{let o={};function s(d){if(typeof d=="function"){const p=d(e);s(p)}else Array.isArray(d)?d.forEach(p=>{typeof p!="boolean"&&s(p)}):typeof d=="object"&&(o=K({},o,d))}return t.sx&&(s(t.sx),r.forEach(d=>{const p=o[d];if(typeof p=="string"||typeof p=="number")if(d==="borderRadius")if(typeof p=="number")o[d]=`${p}px`;else{var c;o[d]=((c=e.vars)==null?void 0:c.radius[p])||p}else["p","padding","m","margin"].indexOf(d)!==-1&&typeof p=="number"?o[d]=e.spacing(p):o[d]=p;else typeof p=="function"?o[d]=p(e):o[d]=void 0})),o};function wj(e){return qr("MuiList",e)}const Sj=Nr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),Cj=L.createContext(void 0),Ij=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],Tj=e=>{const{variant:t,color:r,size:o,nesting:s,orientation:d,instanceSize:p}=e,c={root:["root",d,t&&`variant${kt(t)}`,r&&`color${kt(r)}`,!p&&!s&&o&&`size${kt(o)}`,p&&`size${kt(p)}`,s&&"nesting"]};return Fr(c,wj,{})},Tf=mt("ul")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:s,borderRadius:d}=$d({theme:e,ownerState:t},["p","padding","borderRadius"]);function p(c){return c==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:c==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:c==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&K({},p(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&K({},p(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?K({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),K({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},d!==void 0&&{"--List-radius":d},o!==void 0&&{"--List-padding":o},s!==void 0&&{"--List-padding":s})]}),Pj=mt(Tf,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Pf=L.forwardRef(function(t,r){var o;const s=L.useContext(ky),d=L.useContext(Vv),p=L.useContext(Cj),c=Zr({props:t,name:"JoyList"}),{component:b,className:w,children:T,size:k,orientation:A="vertical",wrap:$=!1,variant:V="plain",color:N="neutral",role:G,slots:O={},slotProps:R={}}=c,M=Jt(c,Ij),ee=k||((o=t.size)!=null?o:"md");let Z;d&&(Z="group"),p&&(Z="presentation"),G&&(Z=G);const oe=K({},c,{instanceSize:t.size,size:ee,nesting:s,orientation:A,wrap:$,variant:V,color:N,role:Z}),ie=Tj(oe),W=K({},M,{component:b,slots:O,slotProps:R}),[Ie,_e]=Ft("root",{ref:r,className:si(ie.root,w),elementType:Pj,externalForwardedProps:W,ownerState:oe,additionalProps:{as:b,role:Z,"aria-labelledby":typeof s=="string"?s:void 0}});return Y.jsx(Ie,K({},_e,{children:Y.jsx(Xw.Provider,{value:`${typeof b=="string"?b:""}:${Z||""}`,children:Y.jsx(If,{row:A==="horizontal",wrap:$,children:T})})}))}),Fg=Nr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),Jw=L.createContext("horizontal"),kf=mt("div")(({theme:e,ownerState:t})=>{var r,o,s,d,p,c;return K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:K({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${Py.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${Fg.selected}`]:K({},(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${Fg.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(p=e.variants[`${t.variant}Active`])==null?void 0:p[t.color]},[`&.${Fg.disabled}`]:K({},(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])})});mt(kf,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>K({},!e.row&&{[`&.${Fg.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function kj(e){return qr("MuiSvgIcon",e)}Nr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const Ej=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],Aj=e=>{const{color:t,size:r,fontSize:o}=e,s={root:["root",t&&t!=="inherit"&&`color${kt(t)}`,r&&`size${kt(r)}`,o&&`fontSize${kt(o)}`]};return Fr(s,kj,{})},aT={sm:"xl",md:"xl2",lg:"xl3"},zj=mt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[aT[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[aT[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&K({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),sT=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoySvgIcon"}),{children:s,className:d,color:p,component:c="svg",fontSize:b,htmlColor:w,inheritViewBox:T=!1,titleAccess:k,viewBox:A="0 0 24 24",size:$="md",slots:V={},slotProps:N={}}=o,G=Jt(o,Ej),O=L.isValidElement(s)&&s.type==="svg",R=K({},o,{color:p,component:c,size:$,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:A,hasSvgAsChild:O}),M=Aj(R),ee=K({},G,{component:c,slots:V,slotProps:N}),[Z,oe]=Ft("root",{ref:r,className:si(M.root,d),elementType:zj,externalForwardedProps:ee,ownerState:R,additionalProps:K({color:w,focusable:!1},k&&{role:"img"},!k&&{"aria-hidden":!0},!T&&{viewBox:A},O&&s.props)});return Y.jsxs(Z,K({},oe,{children:[O?s.props.children:s,k?Y.jsx("title",{children:k}):null]}))});function Od(e,t){function r(o,s){return Y.jsx(sT,K({"data-testid":`${t}Icon`,ref:s},o,{children:e}))}return r.muiName=sT.muiName,L.memo(L.forwardRef(r))}const Yw=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,wd="data-skip-inverted-colors",fR=`& :not([${wd}], [${wd}] *)`,mR=e=>{var t,r,o,s,d,p,c,b,w,T,k,A,$,V,N,G,O,R,M,ee,Z,oe;const ie=Yw(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[ie("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[ie("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[ie("--palette-background-surface")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.surface} !important`,[ie("--palette-background-popup")]:`${(s=e.colorSchemes.light)==null?void 0:s.palette.background.popup} !important`,[ie("--palette-background-level1")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.level1} !important`,[ie("--palette-background-level2")]:`${(p=e.colorSchemes.light)==null?void 0:p.palette.background.level2} !important`,[ie("--palette-background-level3")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.level3} !important`,[ie("--palette-text-primary")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.text.primary} !important`,[ie("--palette-text-secondary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.secondary} !important`,[ie("--palette-text-tertiary")]:`${(T=e.colorSchemes.light)==null?void 0:T.palette.text.tertiary} !important`,[ie("--palette-divider")]:`${(k=e.colorSchemes.light)==null?void 0:k.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[ie("--palette-focusVisible")]:`${(A=e.colorSchemes.dark)==null?void 0:A.palette.focusVisible} !important`,[ie("--palette-background-body")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.body} !important`,[ie("--palette-background-surface")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.background.surface} !important`,[ie("--palette-background-popup")]:`${(N=e.colorSchemes.dark)==null?void 0:N.palette.background.popup} !important`,[ie("--palette-background-level1")]:`${(G=e.colorSchemes.dark)==null?void 0:G.palette.background.level1} !important`,[ie("--palette-background-level2")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.background.level2} !important`,[ie("--palette-background-level3")]:`${(R=e.colorSchemes.dark)==null?void 0:R.palette.background.level3} !important`,[ie("--palette-text-primary")]:`${(M=e.colorSchemes.dark)==null?void 0:M.palette.text.primary} !important`,[ie("--palette-text-secondary")]:`${(ee=e.colorSchemes.dark)==null?void 0:ee.palette.text.secondary} !important`,[ie("--palette-text-tertiary")]:`${(Z=e.colorSchemes.dark)==null?void 0:Z.palette.text.tertiary} !important`,[ie("--palette-divider")]:`${(oe=e.colorSchemes.dark)==null?void 0:oe.palette.divider} !important`}}};function Rj(e){return e.theme!==void 0}const Hv=e=>t=>{const r=Rj(t)?t.theme:t,o=q1(r.cssVarPrefix),s=Yw(r.cssVarPrefix),d=p=>{const c=p.split("-");return o(p,r.palette[c[1]][c[2]])};return{[fR]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[s("--palette-focusVisible")]:d(`palette-${e}-200`),[s("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[s("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[s("--palette-background-popup")]:d(`palette-${e}-700`),[s("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[s("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[s("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[s("--palette-text-primary")]:d("palette-common-white"),[s("--palette-text-secondary")]:d(`palette-${e}-200`),[s("--palette-text-tertiary")]:d(`palette-${e}-300`),[s("--palette-text-icon")]:d(`palette-${e}-200`),[s("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${wd}]`]:mR(r)}},Wv=e=>t=>{const{theme:r=t}=t,o=q1(r.cssVarPrefix),s=Yw(r.cssVarPrefix),d=p=>{const c=p.split("-");return o(p,r.palette[c[1]][c[2]])};return{[fR]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[s("--palette-focusVisible")]:d(`palette-${e}-300`),[s("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[s("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[s("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[s("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[s("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[s("--palette-text-primary")]:d(`palette-${e}-100`),[s("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[s("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[s("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[s("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[s("--palette-focusVisible")]:d(`palette-${e}-500`),[s("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[s("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[s("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[s("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[s("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[s("--palette-text-primary")]:d(`palette-${e}-700`),[s("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[s("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[s("--palette-text-icon")]:d(`palette-${e}-500`),[s("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${wd}]`]:mR(r)}},gR=Od(Y.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Mj=Od(Y.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),yR=L.createContext(void 0);function mc(e,t){let r=t,o=e;return e==="outlined"&&(r="neutral",o="plain"),e==="plain"&&(r="neutral"),{variant:o,color:r}}function Gv(e,t,r=!1){const o=L.useContext(yR),[s,d]=typeof o=="string"?o.split(":"):[],p=mc(s||void 0,d||void 0);return p.variant=e||p.variant,p.color=t||(r?d:p.color),p}function qv({children:e,color:t,variant:r}){return Y.jsx(yR.Provider,{value:`${r||""}:${t||""}`,children:e})}function Dj(e){return qr("MuiIconButton",e)}Nr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const Qw=L.createContext({}),vR=L.createContext(void 0);function Lj(e){return qr("MuiCircularProgress",e)}Nr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let $j=e=>e,lT;const Oj=["color","backgroundColor"],Bj=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],Fj=_E({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),Nj=e=>{const{determinate:t,color:r,variant:o,size:s}=e,d={root:["root",t&&"determinate",r&&`color${kt(r)}`,o&&`variant${kt(o)}`,s&&`size${kt(s)}`],svg:["svg"],track:["track"],progress:["progress"]};return Fr(d,Lj,{})};function Iu(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const jj=mt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,s,d;const p=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:c,backgroundColor:b}=p,w=Jt(p,Oj);return K({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":b,"--CircularProgress-progressColor":c,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":Iu("track","3px"),"--_progress-thickness":Iu("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":Iu("track","6px"),"--_progress-thickness":Iu("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":Iu("track","8px"),"--_progress-thickness":Iu("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:c},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},w,e.variant==="outlined"&&{"&::before":K({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},w)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(o=t.variants.solid)==null?void 0:o[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(s=t.variants.softHover)==null?void 0:s[e.color].backgroundColor,"--CircularProgress-progressColor":(d=t.variants.solid)==null?void 0:d[e.color].backgroundColor})}),Vj=mt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),Uj=mt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),Hj=mt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&A1(lT||(lT=$j`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),Fj)),eS=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyCircularProgress"}),{children:s,className:d,color:p="primary",size:c="md",variant:b="soft",thickness:w,determinate:T=!1,value:k=T?0:25,component:A,slots:$={},slotProps:V={}}=o,N=Jt(o,Bj),G=K({},o,{color:p,size:c,variant:b,thickness:w,value:k,determinate:T,instanceSize:t.size}),O=Nj(G),R=K({},N,{component:A,slots:$,slotProps:V}),[M,ee]=Ft("root",{ref:r,className:si(O.root,d),elementType:jj,externalForwardedProps:R,ownerState:G,additionalProps:K({role:"progressbar",style:{"--CircularProgress-percent":k}},k&&T&&{"aria-valuenow":Math.round(typeof k=="number"?k:Number(k||0))})}),[Z,oe]=Ft("svg",{className:O.svg,elementType:Vj,externalForwardedProps:R,ownerState:G}),[ie,W]=Ft("track",{className:O.track,elementType:Uj,externalForwardedProps:R,ownerState:G}),[Ie,_e]=Ft("progress",{className:O.progress,elementType:Hj,externalForwardedProps:R,ownerState:G});return Y.jsxs(M,K({},ee,{children:[Y.jsxs(Z,K({},oe,{children:[Y.jsx(ie,K({},W)),Y.jsx(Ie,K({},_e))]})),s]}))}),Wj=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],Gj=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:s,size:d,variant:p,loading:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",p&&`variant${kt(p)}`,t&&`color${kt(t)}`,d&&`size${kt(d)}`,c&&"loading"],loadingIndicator:["loadingIndicator"]},w=Fr(b,Dj,{});return o&&s&&(w.root+=` ${s}`),w},Ef=mt("button")(({theme:e,ownerState:t})=>{var r,o,s,d;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:K({"--Icon-color":"currentColor"},e.focus.default)}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":K({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':K({"--Icon-color":"currentColor"},(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),qj=mt(Ef,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Zj=mt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),Zv=L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyIconButton"}),{children:d,action:p,component:c="button",color:b="neutral",disabled:w,variant:T="plain",loading:k=!1,loadingIndicator:A,size:$="md",slots:V={},slotProps:N={}}=s,G=Jt(s,Wj),O=L.useContext(Qw),R=L.useContext(vR),M=t.variant||O.variant||T,ee=t.size||O.size||$,Z=t.color||O.color||b,oe=(o=t.loading||t.disabled)!=null?o:O.disabled||k||w,ie=L.useRef(null),W=on(ie,r),{focusVisible:Ie,setFocusVisible:_e,getRootProps:Te}=hs(K({},s,{disabled:oe,rootRef:W})),Ae=A??Y.jsx(eS,{color:Z,thickness:{sm:2,md:3,lg:4}[ee]||3});L.useImperativeHandle(p,()=>({focusVisible:()=>{var ut;_e(!0),(ut=ie.current)==null||ut.focus()}}),[_e]);const $e=K({},s,{component:c,color:Z,disabled:oe,variant:M,loading:k,size:ee,focusVisible:Ie,instanceSize:t.size}),et=Gj($e),Ve=ut=>{var Dt;let St=s.onClick;if(typeof N.root=="function"?St=N.root($e).onClick:N.root&&(St=N.root.onClick),(Dt=St)==null||Dt(ut),R){var $t;($t=R.onClick)==null||$t.call(R,ut,s.value)}};let ke=s["aria-pressed"];typeof N.root=="function"?ke=N.root($e)["aria-pressed"]:N.root&&(ke=N.root["aria-pressed"]),R!=null&&R.value&&(Array.isArray(R.value)?ke=R.value.indexOf(s.value)!==-1:ke=R.value===s.value);const Ne=K({},G,{component:c,slots:V,slotProps:N}),[Oe,Fe]=Ft("root",{ref:r,className:et.root,elementType:qj,getSlotProps:Te,externalForwardedProps:Ne,ownerState:$e,additionalProps:{onClick:Ve,"aria-pressed":ke}}),[nt,lt]=Ft("loadingIndicator",{className:et.loadingIndicator,elementType:Zj,externalForwardedProps:Ne,ownerState:$e});return Y.jsx(Oe,K({},Fe,{children:k?Y.jsx(nt,K({},lt,{children:Ae})):d}))});Zv.muiName="IconButton";function Kj(e){return qr("MuiChip",e)}const Yb=Nr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),_R=L.createContext({disabled:void 0,variant:void 0,color:void 0}),Xj=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],Jj=e=>{const{disabled:t,size:r,color:o,clickable:s,variant:d,focusVisible:p}=e,c={root:["root",t&&"disabled",o&&`color${kt(o)}`,r&&`size${kt(r)}`,d&&`variant${kt(d)}`,s&&"clickable"],action:["action",t&&"disabled",p&&"focusVisible"],label:["label",r&&`label${kt(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Fr(c,Kj,{})},Yj=mt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,s;const d=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:p}=$d({theme:e,ownerState:t},["borderRadius"]);return[K({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${Yb.disabled}`]:{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:d==null?void 0:d.color}]:[K({backgroundColor:e.vars.palette.background.surface},d,{[`&.${Yb.disabled}`]:(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color]})],p!==void 0&&{"--_Chip-radius":p}]}),Qj=mt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),eV=mt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,s,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},K({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]}},{"&:active":(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color]},{[`&.${Yb.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),tV=mt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),rV=mt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),nV=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyChip"}),{children:s,className:d,color:p="neutral",onClick:c,disabled:b=!1,size:w="md",variant:T="soft",startDecorator:k,endDecorator:A,component:$,slots:V={},slotProps:N={}}=o,G=Jt(o,Xj),O=!!c||!!N.action,R=K({},o,{disabled:b,size:w,color:p,variant:T,clickable:O,focusVisible:!1}),M=typeof N.action=="function"?N.action(R):N.action,ee=L.useRef(null),{focusVisible:Z,getRootProps:oe}=hs(K({},M,{disabled:b,rootRef:ee}));R.focusVisible=Z;const ie=Jj(R),W=K({},G,{component:$,slots:V,slotProps:N}),[Ie,_e]=Ft("root",{ref:r,className:si(ie.root,d),elementType:Yj,externalForwardedProps:W,ownerState:R}),[Te,Ae]=Ft("label",{className:ie.label,elementType:Qj,externalForwardedProps:W,ownerState:R}),$e=ko(Ae.id),[et,Ve]=Ft("action",{className:ie.action,elementType:eV,externalForwardedProps:W,ownerState:R,getSlotProps:oe,additionalProps:{"aria-labelledby":$e,as:M==null?void 0:M.component,onClick:c}}),[ke,Ne]=Ft("startDecorator",{className:ie.startDecorator,elementType:tV,externalForwardedProps:W,ownerState:R}),[Oe,Fe]=Ft("endDecorator",{className:ie.endDecorator,elementType:rV,externalForwardedProps:W,ownerState:R}),nt=L.useMemo(()=>({disabled:b}),[b]);return Y.jsx(_R.Provider,{value:nt,children:Y.jsx(qv,{variant:T,color:p,children:Y.jsxs(Ie,K({},_e,{children:[O&&Y.jsx(et,K({},Ve)),Y.jsx(Te,K({},Ae,{id:$e,children:s})),k&&Y.jsx(ke,K({},Ne,{children:k})),A&&Y.jsx(Oe,K({},Fe,{children:A}))]}))})})}),iV=Od(Y.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function oV(e){return qr("MuiChipDelete",e)}Nr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var cT;const aV=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],sV=["onDelete"],lV=e=>{const{focusVisible:t,variant:r,color:o,disabled:s}=e,d={root:["root",s&&"disabled",t&&"focusVisible",r&&`variant${kt(r)}`,o&&`color${kt(o)}`]};return Fr(d,oV,{})},cV=mt(Ef,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),uV=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyChipDelete"}),{children:s,variant:d="plain",color:p="neutral",disabled:c,onKeyDown:b,onDelete:w,onClick:T,component:k,slots:A={},slotProps:$={}}=o,V=Jt(o,aV),N=L.useContext(_R),{variant:G=d,color:O=p}=Gv(t.variant,t.color,!0),R=t.color||O,M=c??N.disabled,ee=L.useRef(null),Z=on(ee,r),{focusVisible:oe,getRootProps:ie}=hs(K({},o,{disabled:M,rootRef:Z})),W=K({},o,{disabled:M,variant:G,color:R,focusVisible:oe}),Ie=lV(W),_e=K({},V,{component:k,slots:A,slotProps:$}),Te=ke=>{!M&&w&&w(ke),T&&T(ke)},Ae=ke=>{["Backspace","Enter","Delete"].includes(ke.key)&&(ke.preventDefault(),!M&&w&&w(ke)),b&&b(ke)},[$e,et]=Ft("root",{ref:r,elementType:cV,getSlotProps:ie,externalForwardedProps:_e,ownerState:W,additionalProps:{as:k,onKeyDown:Ae,onClick:Te},className:Ie.root}),Ve=Jt(et,sV);return Y.jsx($e,K({},Ve,{children:s??(cT||(cT=Y.jsx(iV,{})))}))});function dV(e){return qr("MuiInput",e)}const xR=Nr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),Kv=L.createContext(void 0),hV=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function pV(e,t){var r;const o=L.useContext(Kv),{"aria-describedby":s,"aria-label":d,"aria-labelledby":p,autoComplete:c,autoFocus:b,className:w,defaultValue:T,disabled:k,disabledInProp:A,error:$,id:V,name:N,onClick:G,onChange:O,onKeyDown:R,onKeyUp:M,onFocus:ee,onBlur:Z,placeholder:oe,readOnly:ie,required:W,type:Ie,value:_e}=e,Te=Jt(e,hV),{getRootProps:Ae,getInputProps:$e,focused:et,error:Ve,disabled:ke}=V4({disabled:(r=A??(o==null?void 0:o.disabled))!=null?r:k,defaultValue:T,error:$,onBlur:Z,onClick:G,onChange:O,onFocus:ee,required:W??(o==null?void 0:o.required),value:_e}),Ne={[t.disabled]:ke,[t.error]:Ve,[t.focused]:et,[t.formControl]:!!o,[w]:w},Oe={[t.disabled]:ke};return K({formControl:o,propsToForward:{"aria-describedby":s,"aria-label":d,"aria-labelledby":p,autoComplete:c,autoFocus:b,disabled:ke,id:V,onKeyDown:R,onKeyUp:M,name:N,placeholder:oe,readOnly:ie,type:Ie},rootStateClasses:Ne,inputStateClasses:Oe,getRootProps:Ae,getInputProps:$e,focused:et,error:Ve,disabled:ke},Te)}const fV=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],mV=e=>{const{disabled:t,fullWidth:r,variant:o,color:s,size:d}=e,p={root:["root",t&&"disabled",r&&"fullWidth",o&&`variant${kt(o)}`,s&&`color${kt(s)}`,d&&`size${kt(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Fr(p,dV,{})},bR=mt("div")(({theme:e,ownerState:t})=>{var r,o,s,d,p,c;const b=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[K({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],[`&:not([${wd}])`]:K({},t.instanceColor&&{"--_Input-focusedHighlight":(s=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:s[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],b,{backgroundColor:(d=b==null?void 0:b.backgroundColor)!=null?d:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":K({},(p=e.variants[`${t.variant}Hover`])==null?void 0:p[t.color],{backgroundColor:null}),[`&.${xR.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),wR=mt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":K({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),SR=mt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),CR=mt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),gV=mt(bR,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yV=mt(wR,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),vV=mt(SR,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),_V=mt(CR,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),xV=L.forwardRef(function(t,r){var o,s,d,p,c,b;const w=Zr({props:t,name:"JoyInput"}),T=pV(K({},w,{disabledInProp:t.disabled}),xR),{propsToForward:k,rootStateClasses:A,inputStateClasses:$,getRootProps:V,getInputProps:N,formControl:G,focused:O,error:R=!1,disabled:M,fullWidth:ee=!1,size:Z="md",color:oe="neutral",variant:ie="outlined",startDecorator:W,endDecorator:Ie,component:_e,slots:Te={},slotProps:Ae={}}=T,$e=Jt(T,fV),et=(o=(s=t.error)!=null?s:G==null?void 0:G.error)!=null?o:R,Ve=(d=(p=t.size)!=null?p:G==null?void 0:G.size)!=null?d:Z,ke=(c=t.color)!=null?c:et?"danger":(b=G==null?void 0:G.color)!=null?b:oe,Ne=K({instanceColor:et?"danger":t.color},w,{fullWidth:ee,color:ke,disabled:M,error:et,focused:O,size:Ve,variant:ie}),Oe=mV(Ne),Fe=K({},$e,{component:_e,slots:Te,slotProps:Ae}),[nt,lt]=Ft("root",{ref:r,className:[Oe.root,A],elementType:gV,getSlotProps:V,externalForwardedProps:Fe,ownerState:Ne}),[ut,Dt]=Ft("input",K({},G&&{additionalProps:{id:G.htmlFor,"aria-describedby":G["aria-describedby"]}},{className:[Oe.input,$],elementType:yV,getSlotProps:N,internalForwardedProps:k,externalForwardedProps:Fe,ownerState:Ne})),[St,$t]=Ft("startDecorator",{className:Oe.startDecorator,elementType:vV,externalForwardedProps:Fe,ownerState:Ne}),[Yt,ct]=Ft("endDecorator",{className:Oe.endDecorator,elementType:_V,externalForwardedProps:Fe,ownerState:Ne});return Y.jsxs(nt,K({},lt,{children:[W&&Y.jsx(St,K({},$t,{children:W})),Y.jsx(ut,K({},Dt)),Ie&&Y.jsx(Yt,K({},ct,{children:Ie}))]}))});function bV(e){return qr("MuiListSubheader",e)}Nr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const wV=["component","className","children","id","sticky","variant","color","slots","slotProps"],SV=e=>{const{variant:t,color:r,sticky:o}=e,s={root:["root",o&&"sticky",r&&`color${kt(r)}`,t&&`variant${kt(t)}`]};return Fr(s,bV,{})},CV=mt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;return K({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${wd}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(o=e.variants[t.variant])==null?void 0:o[t.color])}),IV=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyListSubheader"}),{component:s,className:d,children:p,id:c,sticky:b=!1,variant:w,color:T,slots:k={},slotProps:A={}}=o,$=Jt(o,wV),V=ko(c),N=L.useContext(pR);L.useEffect(()=>{N&&N(V||"")},[N,V]);const G=K({instanceColor:t.color},o,{id:V,sticky:b,variant:w,color:w?T??"neutral":T}),O=SV(G),R=K({},$,{component:s,slots:k,slotProps:A}),[M,ee]=Ft("root",{ref:r,className:si(O.root,d),elementType:CV,externalForwardedProps:R,ownerState:G,additionalProps:{as:s,id:V}});return Y.jsx(M,K({},ee,{children:p}))});function TV(e){return qr("MuiAutocomplete",e)}const yl=Nr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),IR=mt(Tf)(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Uv,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${Py.nested}, & .${Py.nested} .${Sj.root}`]:{position:"initial"}})});mt(IR,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function PV(e){return qr("MuiAutocompleteOption",e)}Nr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const kV=["children","component","color","variant","className","slots","slotProps"],EV=e=>{const{color:t,variant:r}=e,o={root:["root",t&&`color${kt(t)}`,r&&`variant${kt(r)}`]};return Fr(o,PV,{})},TR=mt(kf)(({theme:e,ownerState:t})=>{var r,o;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':K({},(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],{fontWeight:e.vars.fontWeight.md})}}),AV=mt(TR,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),zV=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyAutocompleteOption"}),{children:s,component:d="li",color:p="neutral",variant:c="plain",className:b,slots:w={},slotProps:T={}}=o,k=Jt(o,kV),{variant:A=c,color:$=p}=Gv(t.variant,t.color),V=K({},o,{component:d,color:$,variant:A}),N=EV(V),G=K({},k,{component:d,slots:w,slotProps:T}),[O,R]=Ft("root",{ref:r,className:si(N.root,b),elementType:AV,externalForwardedProps:G,ownerState:V,additionalProps:{as:d,role:"option"}});return Y.jsx(O,K({},R,{children:s}))});var uT,dT;const RV=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],MV=["onDelete"],DV=["key"],LV=["onBlur","onFocus","onMouseDown"],$V=["key"],OV=e=>e.current!==null&&e.current.contains(document.activeElement),BV=e=>{var t;return(t=e.label)!=null?t:e},FV=e=>`+${e}`,NV=e=>Y.jsxs($c,{nested:!0,children:[Y.jsx(IV,{sticky:!0,children:e.group}),Y.jsx(Pf,{children:e.children})]},e.key),jV=e=>{const{disabled:t,focused:r,hasClearIcon:o,hasPopupIcon:s,popupOpen:d,variant:p,color:c,size:b,multiple:w}=e,T={root:["root",r&&"focused",o&&"hasClearIcon",s&&"hasPopupIcon",p&&`variant${kt(p)}`,c&&`color${kt(c)}`,b&&`size${kt(b)}`],wrapper:["wrapper",w&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Fr(T,TV,{})},VV=mt(bR,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${yl.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),UV=mt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${yl.multiple}`]:K({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),HV=mt(wR,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>K({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),WV=mt(SR,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),GV=mt(CR,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>K({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),qV=mt(Ef,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>K({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),ZV=mt(Ef,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${yl.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),KV=mt(IR,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),XV=mt(TR,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),JV=mt($c,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),YV=mt($c,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),QV=mt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),Ey=L.forwardRef(function(t,r){var o,s,d,p,c,b,w;const T=Zr({props:t,name:"JoyAutocomplete"}),{"aria-describedby":k,"aria-label":A,"aria-labelledby":$,autoFocus:V,clearIcon:N=uT||(uT=Y.jsx(gR,{fontSize:"md"})),clearText:G="Clear",closeText:O="Close",disableClearable:R=!1,disabled:M,endDecorator:ee,error:Z=!1,forcePopupIcon:oe="auto",freeSolo:ie=!1,getLimitTagsText:W=FV,getOptionLabel:Ie=BV,groupBy:_e,id:Te,limitTags:Ae=-1,loading:$e=!1,loadingText:et="Loading",multiple:Ve=!1,name:ke,noOptionsText:Ne="No options",openText:Oe="Open",placeholder:Fe,popupIcon:nt=dT||(dT=Y.jsx(Mj,{})),readOnly:lt=!1,renderGroup:ut=NV,renderOption:Dt,renderTags:St,required:$t,type:Yt,startDecorator:ct,size:Je="md",color:ft="neutral",variant:_t="outlined",component:sr,slots:Qt={},slotProps:Pr={}}=T,hr=Jt(T,RV),Ht=L.useContext(Kv),Ct=(o=(s=t.error)!=null?s:Ht==null?void 0:Ht.error)!=null?o:Z,ur=(d=(p=t.size)!=null?p:Ht==null?void 0:Ht.size)!=null?d:Je,Ot=(c=t.color)!=null?c:Ct?"danger":(b=Ht==null?void 0:Ht.color)!=null?b:ft,Cr=(w=M??(Ht==null?void 0:Ht.disabled))!=null?w:!1,{getRootProps:We,getInputProps:br,getPopupIndicatorProps:zr,getClearProps:Kt,getTagProps:rr,getListboxProps:Or,getOptionProps:Rr,value:fr,dirty:dr,popupOpen:Gt,focused:cr,focusedTag:Ir,anchorEl:Be,setAnchorEl:xt,inputValue:bt,groupedOptions:Ce}=dj(K({},T,{id:Te??(Ht==null?void 0:Ht.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:OV})),{onMouseDown:He}=br(),{onClick:Ye}=We(),It=!R&&!Cr&&dr&&!lt,gt=(!ie||oe===!0)&&oe!==!1,Et=K({instanceColor:t.color},T,{value:fr,disabled:Cr,focused:cr,getOptionLabel:Ie,hasOptions:!!Ce.length,hasClearIcon:It,hasPopupIcon:gt,inputFocused:Ir===-1,popupOpen:Gt,size:ur,color:Ot,variant:_t}),pr=jV(Et),Lt=K({},hr,{component:sr,slots:Qt,slotProps:Pr});let mr;if(Ve&&fr.length>0){const ir=jr=>{const Mr=rr(jr),{onDelete:ri}=Mr,er=Jt(Mr,MV);return K({disabled:Cr,size:ur,onClick:ri},er)};St?mr=St(fr,ir,Et):mr=fr.map((jr,Mr)=>{const ri=ir({index:Mr}),{key:er}=ri,yr=Jt(ri,DV);return Y.jsx(nV,{size:ur,variant:"soft",color:"neutral",endDecorator:Y.jsx(uV,K({},yr),er),sx:{minWidth:0},children:Ie(jr)},Mr)})}const ce=on(r,xt),H={[yl.disabled]:Cr,[yl.error]:Ct,[yl.focused]:cr,[yl.formControl]:!!Ht},[q,te]=Ft("root",{ref:ce,className:[pr.root,H],elementType:VV,externalForwardedProps:Lt,ownerState:Et,getSlotProps:We,additionalProps:{onClick:ir=>{Ye&&Ye(ir),ir.currentTarget===ir.target&&He&&He(ir)}}}),[he,fe]=Ft("wrapper",{className:pr.wrapper,elementType:UV,externalForwardedProps:Lt,ownerState:Et}),Re={[yl.disabled]:Cr},[be,ge]=Ft("input",{className:[pr.input,Re],elementType:HV,getSlotProps:ir=>{const jr=br(),{onBlur:Mr,onFocus:ri,onMouseDown:er}=jr,yr=Jt(jr,LV);return K({},yr,{onBlur:rn=>{var kr;Mr==null||Mr(rn),(kr=ir.onBlur)==null||kr.call(ir,rn)},onFocus:rn=>{var kr;ri==null||ri(rn),(kr=ir.onFocus)==null||kr.call(ir,rn)},onMouseDown:rn=>{var kr;er==null||er(rn),(kr=ir.onMouseDown)==null||kr.call(ir,rn)}})},externalForwardedProps:Lt,ownerState:Et,additionalProps:{autoFocus:V,placeholder:Fe,name:ke,readOnly:lt,disabled:Cr,required:$t??(Ht==null?void 0:Ht.required),type:Yt,"aria-invalid":Ct||void 0,"aria-label":A,"aria-labelledby":$,"aria-describedby":k??(Ht==null?void 0:Ht["aria-describedby"])}}),[Ee,tt]=Ft("startDecorator",{className:pr.startDecorator,elementType:WV,externalForwardedProps:Lt,ownerState:Et}),[ne,ae]=Ft("endDecorator",{className:pr.endDecorator,elementType:GV,externalForwardedProps:Lt,ownerState:Et}),[Pe,Ue]=Ft("clearIndicator",{className:pr.clearIndicator,elementType:qV,getSlotProps:Kt,externalForwardedProps:Lt,ownerState:Et,getSlotOwnerState:ir=>({size:ir.size||ur,variant:ir.variant||mc(_t,Ot).variant||"plain",color:ir.color||mc(_t,Ot).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":G,title:G}}),[Qe,it]=Ft("popupIndicator",{className:pr.popupIndicator,elementType:ZV,getSlotProps:zr,externalForwardedProps:Lt,ownerState:Et,getSlotOwnerState:ir=>({size:ir.size||ur,variant:ir.variant||mc(_t,Ot).variant||"plain",color:ir.color||mc(_t,Ot).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Cr,"aria-label":Gt?O:Oe,title:Gt?O:Oe,type:"button"}}),[Se,xe]=Ft("listbox",{className:pr.listbox,elementType:KV,getSlotProps:Or,externalForwardedProps:Lt,ownerState:Et,getSlotOwnerState:ir=>({size:ir.size||ur,variant:ir.variant||_t,color:ir.color||Ot,disableColorInversion:!ir.disablePortal}),additionalProps:{anchorEl:Be,open:Gt,style:Be?{width:Be.clientWidth}:{}}}),[Ke,Xe]=Ft("loading",{className:pr.loading,elementType:JV,externalForwardedProps:Lt,ownerState:Et}),[rt,jt]=Ft("noOptions",{className:pr.noOptions,elementType:YV,externalForwardedProps:Lt,ownerState:Et,additionalProps:{role:"presentation",onMouseDown:ir=>{ir.preventDefault()}}}),[zt,nr]=Ft("limitTag",{className:pr.limitTag,elementType:QV,externalForwardedProps:Lt,ownerState:Et});if(Ae>-1&&Array.isArray(mr)){const ir=mr.length-Ae;!cr&&ir>0&&(mr=mr.splice(0,Ae),mr.push(Y.jsx(zt,K({},nr,{children:W(ir)}),mr.length)))}const[lr,Hr]=Ft("option",{className:pr.option,elementType:XV,externalForwardedProps:Lt,ownerState:Et,getSlotOwnerState:ir=>({variant:ir.variant||mc(_t,Ot).variant||"plain",color:ir.color||mc(_t,Ot).color||"neutral",disableColorInversion:!xe.disablePortal}),additionalProps:{as:"li"}}),Oi=Dt||((ir,jr)=>{const{key:Mr}=ir,ri=Jt(ir,$V);return Y.jsx(lr,K({},ri,{children:Ie(jr)}),Mr)}),Hn=(ir,jr)=>{const Mr=Rr({option:ir,index:jr});return Oi(K({},Hr,Mr),ir,{selected:!!Mr["aria-selected"],inputValue:bt,ownerState:Et})},Ko=L.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...xe.modifiers||[]],[xe.modifiers]);let vr=null;if(Be){var Ao;vr=Y.jsx(qv,{variant:_t,color:Ot,children:Y.jsx(If,{nested:!0,children:Y.jsxs(Se,K({},xe,{className:si(xe.className),modifiers:Ko},!((Ao=T.slots)!=null&&Ao.listbox)&&{as:Nv,slots:{root:xe.as||"ul"}},{children:[Ce.map((ir,jr)=>{if(_e){const Mr=ir;return ut({key:String(Mr.key),group:Mr.group,children:Mr.options.map((ri,er)=>Hn(ri,Mr.index+er))})}return Hn(ir,jr)}),$e&&Ce.length===0?Y.jsx(Ke,K({},Xe,{children:et})):null,Ce.length===0&&!ie&&!$e?Y.jsx(rt,K({},jt,{children:Ne})):null]}))})})}return Y.jsxs(L.Fragment,{children:[Y.jsxs(q,K({},te,{children:[ct&&Y.jsx(Ee,K({},tt,{children:ct})),Y.jsxs(he,K({},fe,{children:[mr,Y.jsx(be,K({},ge))]})),ee&&Y.jsx(ne,K({},ae,{children:ee})),It?Y.jsx(Pe,K({},Ue,{children:N})):null,gt?Y.jsx(Qe,K({},it,{children:nt})):null]})),vr]})});function e8(e){return qr("MuiTypography",e)}Nr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const t8=["color","textColor"],r8=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],Qb=L.createContext(!1),n8=L.createContext(!1),i8=e=>{const{gutterBottom:t,noWrap:r,level:o,color:s,variant:d}=e,p={root:["root",o,t&&"gutterBottom",r&&"noWrap",s&&`color${kt(s)}`,d&&`variant${kt(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Fr(p,e8,{})},o8=mt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),a8=mt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),s8=mt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,s,d,p;const c=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${c})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:K({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&K({display:"flex",alignItems:"center"},t.nesting&&K({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(o=(s=e.typography[t.level])==null?void 0:s.fontSize)!=null?o:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(p=e.variants[t.variant])==null?void 0:p[t.color]))}),hT={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Va=L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyTypography"}),{color:d,textColor:p}=s,c=Jt(s,t8),b=L.useContext(Qb),w=L.useContext(n8),T=B1(K({},c,{color:p})),{component:k,gutterBottom:A=!1,noWrap:$=!1,level:V="body-md",levelMapping:N=hT,children:G,endDecorator:O,startDecorator:R,variant:M,slots:ee={},slotProps:Z={}}=T,oe=Jt(T,r8),ie=(o=t.color)!=null?o:M?d??"neutral":d,W=b||w?t.level||"inherit":V,Ie=j1(G,["Skeleton"]),_e=k||(b?"span":N[W]||hT[W]||"span"),Te=K({},T,{level:W,component:_e,color:ie,gutterBottom:A,noWrap:$,nesting:b,variant:M,unstable_hasSkeleton:Ie}),Ae=i8(Te),$e=K({},oe,{component:_e,slots:ee,slotProps:Z}),[et,Ve]=Ft("root",{ref:r,className:Ae.root,elementType:s8,externalForwardedProps:$e,ownerState:Te}),[ke,Ne]=Ft("startDecorator",{className:Ae.startDecorator,elementType:o8,externalForwardedProps:$e,ownerState:Te}),[Oe,Fe]=Ft("endDecorator",{className:Ae.endDecorator,elementType:a8,externalForwardedProps:$e,ownerState:Te});return Y.jsx(Qb.Provider,{value:!0,children:Y.jsxs(et,K({},Ve,{children:[R&&Y.jsx(ke,K({},Ne,{children:R})),Ie?L.cloneElement(G,{variant:G.props.variant||"inline"}):G,O&&Y.jsx(Oe,K({},Fe,{children:O}))]}))})});Va.muiName="Typography";function l8(e){return qr("MuiButton",e)}const pT=Nr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),c8=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],u8=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:s,fullWidth:d,size:p,variant:c,loading:b}=e,w={root:["root",r&&"disabled",o&&"focusVisible",d&&"fullWidth",c&&`variant${kt(c)}`,t&&`color${kt(t)}`,p&&`size${kt(p)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},T=Fr(w,l8,{});return o&&s&&(T.root+=` ${s}`),T},d8=mt("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),h8=mt("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),p8=mt("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),PR=({theme:e,ownerState:t})=>{var r,o,s,d;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color],[`&.${pT.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${pT.loading}`]:{color:"transparent"}})]},f8=mt("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(PR),kR=L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyButton"}),{children:d,action:p,color:c="primary",variant:b="solid",size:w="md",fullWidth:T=!1,startDecorator:k,endDecorator:A,loading:$=!1,loadingPosition:V="center",loadingIndicator:N,disabled:G,component:O,slots:R={},slotProps:M={}}=s,ee=Jt(s,c8),Z=L.useContext(Qw),oe=L.useContext(vR),ie=t.variant||Z.variant||b,W=t.size||Z.size||w,Ie=t.color||Z.color||c,_e=(o=t.loading||t.disabled)!=null?o:Z.disabled||$||G,Te=L.useRef(null),Ae=on(Te,r),{focusVisible:$e,setFocusVisible:et,getRootProps:Ve}=hs(K({},s,{disabled:_e,rootRef:Ae})),ke=N??Y.jsx(eS,{color:Ie,thickness:{sm:2,md:3,lg:4}[W]||3});L.useImperativeHandle(p,()=>({focusVisible:()=>{var _t;et(!0),(_t=Te.current)==null||_t.focus()}}),[et]);const Ne=K({},s,{color:Ie,fullWidth:T,variant:ie,size:W,focusVisible:$e,loading:$,loadingPosition:V,disabled:_e}),Oe=u8(Ne),Fe=_t=>{var sr;let Qt=s.onClick;if(typeof M.root=="function"?Qt=M.root(Ne).onClick:M.root&&(Qt=M.root.onClick),(sr=Qt)==null||sr(_t),oe){var Pr;(Pr=oe.onClick)==null||Pr.call(oe,_t,s.value)}};let nt=s["aria-pressed"];typeof M.root=="function"?nt=M.root(Ne)["aria-pressed"]:M.root&&(nt=M.root["aria-pressed"]),oe!=null&&oe.value&&(Array.isArray(oe.value)?nt=oe.value.indexOf(s.value)!==-1:nt=oe.value===s.value);const lt=K({},ee,{component:O,slots:R,slotProps:M}),[ut,Dt]=Ft("root",{ref:r,className:Oe.root,elementType:f8,externalForwardedProps:lt,getSlotProps:Ve,ownerState:Ne,additionalProps:{onClick:Fe,"aria-pressed":nt}}),[St,$t]=Ft("startDecorator",{className:Oe.startDecorator,elementType:d8,externalForwardedProps:lt,ownerState:Ne}),[Yt,ct]=Ft("endDecorator",{className:Oe.endDecorator,elementType:h8,externalForwardedProps:lt,ownerState:Ne}),[Je,ft]=Ft("loadingIndicatorCenter",{className:Oe.loadingIndicatorCenter,elementType:p8,externalForwardedProps:lt,ownerState:Ne});return Y.jsxs(ut,K({},Dt,{children:[(k||$&&V==="start")&&Y.jsx(St,K({},$t,{children:$&&V==="start"?ke:k})),d,$&&V==="center"&&Y.jsx(Je,K({},ft,{children:ke})),(A||$&&V==="end")&&Y.jsx(Yt,K({},ct,{children:$&&V==="end"?ke:A}))]}))});kR.muiName="Button";function m8(e){return qr("MuiCard",e)}Nr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const g8=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],y8=e=>{const{size:t,variant:r,color:o,orientation:s}=e,d={root:["root",s,r&&`variant${kt(r)}`,o&&`color${kt(o)}`,t&&`size${kt(t)}`]};return Fr(d,m8,{})},v8=mt("div")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:s,borderRadius:d}=$d({theme:e,ownerState:t},["p","padding","borderRadius"]);return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&Hv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Wv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color]),o!==void 0&&{"--Card-padding":o},s!==void 0&&{"--Card-padding":s},d!==void 0&&{"--Card-radius":d}]}),_8=mt(v8,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),x8=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyCard"}),{className:s,color:d="neutral",component:p="div",invertedColors:c=!1,size:b="md",variant:w="outlined",children:T,orientation:k="vertical",slots:A={},slotProps:$={}}=o,V=Jt(o,g8),N=K({},o,{color:d,component:p,orientation:k,size:b,variant:w,invertedColors:c}),G=y8(N),O=K({},V,{component:p,slots:A,slotProps:$}),[R,M]=Ft("root",{ref:r,className:si(G.root,s),elementType:_8,externalForwardedProps:O,ownerState:N});return Y.jsx(R,K({},M,{children:L.Children.map(T,(ee,Z)=>{if(!L.isValidElement(ee))return ee;const oe={};if(j1(ee,["Divider"])){oe.inset="inset"in ee.props?ee.props.inset:"context";const ie=k==="vertical"?"horizontal":"vertical";oe.orientation="orientation"in ee.props?ee.props.orientation:ie}return Z===0&&(oe["data-first-child"]=""),Z===L.Children.count(T)-1&&(oe["data-last-child"]=""),L.cloneElement(ee,oe)})}))}),ER=Nr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function b8(e){return qr("MuiDivider",e)}Nr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const AR=mt("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${ER.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));mt(AR,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const w8=Nr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function S8(e){return qr("MuiCheckbox",e)}const Cc=Nr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),C8=Od(Y.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),I8=Od(Y.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),T8=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],P8=e=>{const{checked:t,disabled:r,disableIcon:o,focusVisible:s,color:d,variant:p,size:c,indeterminate:b}=e,w={root:["root",t&&"checked",r&&"disabled",s&&"focusVisible",p&&`variant${kt(p)}`,d&&`color${kt(d)}`,c&&`size${kt(c)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",o&&r&&"disabled",s&&"focusVisible"],input:["input"],label:["label"]};return Fr(w,S8,{})},k8=mt("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,s;return K({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${Cc.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[e.color])==null?void 0:r.color}},e.disableIcon&&{color:(o=t.variants[e.variant])==null||(o=o[e.color])==null?void 0:o.color,[`&.${Cc.disabled}`]:{color:(s=t.variants[`${e.variant}Disabled`])==null||(s=s[e.color])==null?void 0:s.color}})}),E8=mt("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var r,o,s,d,p;const c=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${Cc.checked}, &.${Cc.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[K({},c,{backgroundColor:(o=c==null?void 0:c.backgroundColor)!=null?o:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(s=e.variants[`${t.variant}Hover`])==null?void 0:s[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${Cc.disabled}`]:(p=e.variants[`${t.variant}Disabled`])==null?void 0:p[t.color]}]]}),A8=mt("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,s,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},{"&:active":(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color]},{[`&.${Cc.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),z8=mt("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),R8=mt("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),M8=Y.jsx(C8,{}),D8=Y.jsx(I8,{}),Sd=L.forwardRef(function(t,r){var o,s,d,p,c;const b=Zr({props:t,name:"JoyCheckbox"}),{checked:w,uncheckedIcon:T,checkedIcon:k=M8,label:A,defaultChecked:$,disabled:V,disableIcon:N=!1,overlay:G,id:O,indeterminate:R=!1,indeterminateIcon:M=D8,name:ee,onBlur:Z,onChange:oe,onFocus:ie,onFocusVisible:W,readOnly:Ie,required:_e,value:Te,color:Ae,variant:$e,size:et="md",component:Ve,slots:ke={},slotProps:Ne={}}=b,Oe=Jt(b,T8),Fe=L.useContext(Kv),nt=(o=(s=t.disabled)!=null?s:Fe==null?void 0:Fe.disabled)!=null?o:V,lt=(d=(p=t.size)!=null?p:Fe==null?void 0:Fe.size)!=null?d:et,ut=ko(O??(Fe==null?void 0:Fe.htmlFor)),Dt={checked:w,defaultChecked:$,disabled:nt,onBlur:Z,onChange:oe,onFocus:ie,onFocusVisible:W},{getInputProps:St,checked:$t,disabled:Yt,focusVisible:ct}=QN(Dt),Je=$t||R,sr=Je?$e||"solid":$e||"outlined",Qt=t.color||(Fe!=null&&Fe.error?"danger":(c=Fe==null?void 0:Fe.color)!=null?c:Ae),Ht=K({},b,{checked:$t,disabled:Yt,disableIcon:N,overlay:G,focusVisible:ct,color:Je?Qt||"primary":Qt||"neutral",variant:sr,size:lt}),Ct=P8(Ht),ur=K({},Oe,{component:Ve,slots:ke,slotProps:Ne}),[Ot,Cr]=Ft("root",{ref:r,className:Ct.root,elementType:k8,externalForwardedProps:ur,ownerState:Ht}),[We,br]=Ft("checkbox",{className:Ct.checkbox,elementType:E8,externalForwardedProps:ur,ownerState:Ht}),[zr,Kt]=Ft("action",{className:Ct.action,elementType:A8,externalForwardedProps:ur,ownerState:Ht}),[rr,Or]=Ft("input",{additionalProps:K({id:ut,name:ee,value:Te,readOnly:Ie,role:void 0,required:_e??(Fe==null?void 0:Fe.required),"aria-describedby":Fe==null?void 0:Fe["aria-describedby"]},R&&{"aria-checked":"mixed"}),className:Ct.input,elementType:z8,externalForwardedProps:ur,getSlotProps:St,ownerState:Ht}),[Rr,fr]=Ft("label",{additionalProps:{htmlFor:ut},className:Ct.label,elementType:R8,externalForwardedProps:ur,ownerState:Ht});let dr=T;return N?dr=null:R?dr=M:$t&&(dr=k),Y.jsxs(Ot,K({},Cr,{children:[Y.jsxs(We,K({},br,{children:[Y.jsx(zr,K({},Kt,{children:Y.jsx(rr,K({},Or))})),dr]})),A&&Y.jsx(Qb.Provider,{value:!0,children:Y.jsx(Rr,K({},fr,{children:A}))})]}))});function L8(e){const{children:t,disableColorScheme:r=!1}=e;return Y.jsxs(L.Fragment,{children:[Y.jsx(v4,{styles:o=>{var s,d;const p={};r||Object.entries(o.colorSchemes).forEach(([b,w])=>{var T;p[o.getColorSchemeSelector(b).replace(/\s*&/,"")]={colorScheme:(T=w.palette)==null?void 0:T.mode}});const c=(s=(d=o.components)==null||(d=d.JoyTypography)==null||(d=d.defaultProps)==null?void 0:d.level)!=null?s:"body-md";return K({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:K({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[c],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},p)},defaultTheme:yf}),t]})}function $8(e){return qr("MuiDialogContent",e)}Nr("MuiDialogContent",["root"]);const Xv=L.createContext(void 0);function O8(e){return qr("MuiDialogTitle",e)}const zR=Nr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),B8=["component","children","orientation","slots","slotProps"],F8=()=>Fr({root:["root"]},$8,{}),N8=mt(AR,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${w8.root} > .${zR.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),RR=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyDialogContent"}),s=L.useContext(Xv),{component:d="div",children:p,orientation:c="vertical",slots:b={},slotProps:w={}}=o,T=Jt(o,B8),k=K({},T,{component:d,slots:b,slotProps:w}),A=K({},o,{component:d,orientation:c}),$=F8(),[V,N]=Ft("root",{ref:r,className:$.root,elementType:N8,externalForwardedProps:k,ownerState:A,additionalProps:{id:s==null?void 0:s.describedBy}});return Y.jsx(V,K({},N,{children:p}))}),tS=L.createContext(void 0),j8=["component","children","variant","color","level","slots","slotProps"],V8=e=>{const{level:t,color:r,variant:o}=e,s={root:["root",t,r&&`color${kt(r)}`,o&&`variant${kt(o)}`]};return Fr(s,O8,{})},U8=mt("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const s=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${s})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(o=e.variants[t.variant])==null?void 0:o[t.color]),{[`.${ER.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),H8={sm:"title-md",md:"title-lg",lg:"h4"},MR=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyDialogTitle"}),s=L.useContext(tS),d=L.useContext(Xv),{component:p="h2",children:c,variant:b,color:w,level:T=H8[s||"md"],slots:k={},slotProps:A={}}=o,$=Jt(o,j8),V=t.color||(b?w??"neutral":w),N=K({},$,{component:p,slots:k,slotProps:A}),G=K({},o,{component:p,color:V,variant:b,level:T}),O=V8(G),[R,M]=Ft("root",{ref:r,className:O.root,elementType:U8,externalForwardedProps:N,ownerState:G,additionalProps:{id:d==null?void 0:d.labelledBy}});return Y.jsx(R,K({},M,{children:c}))}),W8=["className","children","component","inset","orientation","role","slots","slotProps"],G8=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${kt(r)}`]};return Fr(o,b8,{})},DR=mt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>K({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?K({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),rS=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyDivider"}),{className:s,children:d,component:p=d!=null?"div":"hr",inset:c,orientation:b="horizontal",role:w=p!=="hr"?"separator":void 0,slots:T={},slotProps:k={}}=o,A=Jt(o,W8),$=K({},o,{inset:c,role:w,orientation:b,component:p}),V=G8($),N=K({},A,{component:p,slots:T,slotProps:k}),[G,O]=Ft("root",{ref:r,className:si(V.root,s),elementType:DR,externalForwardedProps:N,ownerState:$,additionalProps:K({as:p,role:w},w==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return Y.jsx(G,K({},O,{children:d}))});rS.muiName="Divider";const LR=L.createContext(void 0),$R=mt("div")(({ownerState:e,theme:t})=>K({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));mt($R,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const OR=mt("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));mt(OR,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function q8(e){return qr("MuiDrawer",e)}Nr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const Z8=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],K8=e=>{const{open:t,variant:r,color:o,size:s}=e,d={root:["root",!t&&"hidden",r&&`variant${kt(r)}`,o&&`color${kt(o)}`,s&&`size${kt(s)}`],backdrop:["backdrop"],content:["content"]};return Fr(d,q8,{})},X8=mt($R,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),J8=mt(OR,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),Y8=mt("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return K({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&Hv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Wv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${zR.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),BR=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyDrawer"}),{children:s,anchor:d="left",container:p,disableAutoFocus:c=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:T=!1,disableRestoreFocus:k=!1,disableScrollLock:A=!1,hideBackdrop:$=!1,color:V="neutral",variant:N="plain",invertedColors:G=!1,size:O="md",onClose:R,open:M,component:ee,slots:Z={},slotProps:oe={}}=o,ie=Jt(o,Z8),W=K({},o,{anchor:d,disableAutoFocus:c,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:T,disableRestoreFocus:k,disableScrollLock:A,hideBackdrop:$,invertedColors:G,color:V,variant:N,size:O}),{getRootProps:Ie,getBackdropProps:_e,rootRef:Te,portalRef:Ae,isTopModal:$e}=z6(K({},W,{rootRef:r,children:null})),et=K8(W),Ve=K({},ie,{component:ee,slots:Z,slotProps:oe}),ke=ko(),Ne=ko(),Oe=L.useMemo(()=>({variant:N,color:V,labelledBy:ke,describedBy:Ne}),[V,N,ke,Ne]),[Fe,nt]=Ft("root",{ref:Te,className:et.root,elementType:X8,externalForwardedProps:Ve,getSlotProps:Ie,ownerState:W}),[lt,ut]=Ft("backdrop",{className:et.backdrop,elementType:J8,externalForwardedProps:Ve,getSlotProps:_e,ownerState:W}),[Dt,St]=Ft("content",{className:et.content,elementType:Y8,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":ke,"aria-describedby":Ne},externalForwardedProps:Ve,ownerState:W});return Y.jsx(LR.Provider,{value:R,children:Y.jsx(tS.Provider,{value:O,children:Y.jsx(Xv.Provider,{value:Oe,children:Y.jsx(Qz,{ref:Ae,container:p,disablePortal:T,children:Y.jsxs(Fe,K({},nt,{children:[$?null:Y.jsx(lt,K({},ut)),Y.jsx(F4,{disableEnforceFocus:b,disableAutoFocus:c,disableRestoreFocus:k,isEnabled:$e,open:M,children:Y.jsx(Dt,K({},St,{children:s}))})]}))})})})})});function Q8(e){return qr("MuiListDivider",e)}Nr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const eU=["component","role","className","children","inset","orientation","slots","slotProps"],tU=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${kt(r)}`]};return Fr(o,Q8,{})},rU=mt(DR,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&K({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&K({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),FR=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyListDivider"}),s=L.useContext(Ld),d=L.useContext(Xw),{component:p,role:c,className:b,children:w,inset:T="context",orientation:k,slots:A={},slotProps:$={}}=o,V=Jt(o,eU),[N]=(d==null?void 0:d.split(":"))||["",""],G=p||(N&&!N.match(/^(ul|ol|menu)$/)?"div":"li"),O=c||(G==="li"?"separator":void 0),R=k||(s?"vertical":"horizontal"),M=K({},o,{inset:T,row:s,orientation:R,component:G,role:O}),ee=tU(M),Z=K({},V,{component:G,slots:A,slotProps:$}),[oe,ie]=Ft("root",{ref:r,className:si(ee.root,b),elementType:rU,externalForwardedProps:Z,ownerState:M,additionalProps:K({as:G,role:O},O==="separator"&&R==="vertical"&&{"aria-orientation":"vertical"})});return Y.jsx(oe,K({},ie,{children:w}))});function nU(e){return qr("MuiListItemContent",e)}Nr("MuiListItemContent",["root"]);const iU=["component","className","children","slots","slotProps"],oU=()=>Fr({root:["root"]},nU,{}),aU=mt("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),sU=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyListItemContent"}),{component:s,className:d,children:p,slots:c={},slotProps:b={}}=o,w=Jt(o,iU),T=K({},o),k=oU(),A=K({},w,{component:s,slots:c,slotProps:b}),[$,V]=Ft("root",{ref:r,className:si(k.root,d),elementType:aU,externalForwardedProps:A,ownerState:T});return Y.jsx($,K({},V,{children:p}))});function lU(e){return qr("MuiListItemDecorator",e)}Nr("MuiListItemDecorator",["root"]);const cU=["component","className","children","slots","slotProps"],uU=()=>Fr({root:["root"]},lU,{}),dU=mt("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),Ng=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyListItemDecorator"}),{component:s,className:d,children:p,slots:c={},slotProps:b={}}=o,w=Jt(o,cU),T=L.useContext(Jw),k=K({parentOrientation:T},o),A=uU(),$=K({},w,{component:s,slots:c,slotProps:b}),[V,N]=Ft("root",{ref:r,className:si(A.root,d),elementType:dU,externalForwardedProps:$,ownerState:k});return Y.jsx(V,K({},N,{children:p}))});function hU(e){return qr("MuiMenu",e)}Nr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const pU=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],fU=e=>{const{open:t,variant:r,color:o,size:s}=e,d={root:["root",t&&"expanded",r&&`variant${kt(r)}`,o&&`color${kt(o)}`,s&&`size${kt(s)}`],listbox:["listbox"]};return Fr(d,hU,{})},fT=mt(Tf,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const s=(r=e.variants[t.variant])==null?void 0:r[t.color];return[K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(s==null?void 0:s.backgroundColor)||(s==null?void 0:s.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Uv,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(s!=null&&s.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&Hv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Wv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color])]}),mU=L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyMenu"}),{actions:d,children:p,color:c="neutral",component:b,disablePortal:w=!1,keepMounted:T=!1,id:k,invertedColors:A=!1,onItemsChange:$,modifiers:V,variant:N="outlined",size:G="md",slots:O={},slotProps:R={}}=s,M=Jt(s,pU),{contextValue:ee,getListboxProps:Z,dispatch:oe,open:ie,triggerElement:W}=cB({onItemsChange:$,id:k,listboxRef:r});L.useImperativeHandle(d,()=>({dispatch:oe,resetHighlight:()=>oe({type:pn.resetHighlight,event:null})}),[oe]);const Ie=K({},s,{disablePortal:w,invertedColors:A,color:c,variant:N,size:G,open:ie,nesting:!1,row:!1}),_e=fU(Ie),Te=K({},M,{component:b,slots:O,slotProps:R}),Ae=L.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...V||[]],[V]),$e=ZE({elementType:fT,getSlotProps:Z,externalForwardedProps:Te,externalSlotProps:{},ownerState:Ie,additionalProps:{anchorEl:W,open:ie&&W!==null,disablePortal:w,keepMounted:T,modifiers:Ae},className:_e.root});return Y.jsx(fT,K({},$e,!((o=s.slots)!=null&&o.root)&&{as:Nv,slots:{root:b||"ul"}},{children:Y.jsx(uB,{value:ee,children:Y.jsx(qv,{variant:A?void 0:N,color:c,children:Y.jsx(Vv.Provider,{value:"menu",children:Y.jsx(If,{nested:!0,children:p})})})})}))});function gU(e){return qr("MuiMenuButton",e)}Nr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const yU=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],vU=e=>{const{color:t,disabled:r,fullWidth:o,size:s,variant:d,loading:p}=e,c={root:["root",r&&"disabled",o&&"fullWidth",d&&`variant${kt(d)}`,t&&`color${kt(t)}`,s&&`size${kt(s)}`,p&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Fr(c,gU,{})},_U=mt("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(PR),xU=mt("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),bU=mt("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),wU=mt("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),SU=L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyMenuButton"}),{children:d,color:p="neutral",component:c,disabled:b=!1,endDecorator:w,loading:T=!1,loadingPosition:k="center",loadingIndicator:A,size:$="md",slotProps:V={},slots:N={},startDecorator:G,variant:O="outlined"}=s,R=Jt(s,yU),M=L.useContext(Qw),ee=t.variant||M.variant||O,Z=t.size||M.size||$,oe=(o=t.disabled)!=null?o:M.disabled||b||T,{getRootProps:ie,open:W,active:Ie}=v6({rootRef:r,disabled:oe}),_e=A??Y.jsx(eS,{color:p,thickness:{sm:2,md:3,lg:4}[Z]||3}),Te=K({},s,{active:Ie,color:p,disabled:oe,open:W,size:Z,variant:ee}),Ae=vU(Te),$e=K({},R,{component:c,slots:N,slotProps:V}),[et,Ve]=Ft("root",{elementType:_U,getSlotProps:ie,externalForwardedProps:$e,ref:r,ownerState:Te,className:Ae.root}),[ke,Ne]=Ft("startDecorator",{className:Ae.startDecorator,elementType:xU,externalForwardedProps:$e,ownerState:Te}),[Oe,Fe]=Ft("endDecorator",{className:Ae.endDecorator,elementType:bU,externalForwardedProps:$e,ownerState:Te}),[nt,lt]=Ft("loadingIndicatorCenter",{className:Ae.loadingIndicatorCenter,elementType:wU,externalForwardedProps:$e,ownerState:Te});return Y.jsxs(et,K({},Ve,{children:[(G||T&&k==="start")&&Y.jsx(ke,K({},Ne,{children:T&&k==="start"?_e:G})),d,T&&k==="center"&&Y.jsx(nt,K({},lt,{children:_e})),(w||T&&k==="end")&&Y.jsx(Oe,K({},Fe,{children:T&&k==="end"?_e:w}))]}))});function CU(e){return qr("MuiMenuItem",e)}Nr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const IU=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],TU=e=>{const{focusVisible:t,disabled:r,selected:o,color:s,variant:d}=e,p={root:["root",t&&"focusVisible",r&&"disabled",o&&"selected",s&&`color${kt(s)}`,d&&`variant${kt(d)}`]};return Fr(p,CU,{})},PU=mt(kf,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),kU=L.memo(L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyMenuItem"}),s=L.useContext(Ld),{children:d,disabled:p=!1,component:c="li",selected:b=!1,color:w="neutral",orientation:T="horizontal",variant:k="plain",slots:A={},slotProps:$={},id:V}=o,N=Jt(o,IU),{variant:G=k,color:O=w}=Gv(t.variant,t.color),{getRootProps:R,disabled:M,focusVisible:ee}=b6({id:V,disabled:p,rootRef:r}),Z=K({},o,{component:c,color:O,disabled:M,focusVisible:ee,orientation:T,selected:b,row:s,variant:G}),oe=TU(Z),ie=K({},N,{component:c,slots:A,slotProps:$}),[W,Ie]=Ft("root",{ref:r,elementType:PU,getSlotProps:R,externalForwardedProps:ie,className:oe.root,ownerState:Z});return Y.jsx(Jw.Provider,{value:T,children:Y.jsx(W,K({},Ie,{children:d}))})})),q_=L.forwardRef(function(t,r){const{contextValue:o,id:s}=w6(t.id);return Y.jsx(Ll.Provider,{value:o,children:Y.jsx(kU,K({},t,{id:s,ref:r}))})});function EU(e){return qr("MuiModalClose",e)}Nr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var mT;const AU=["component","color","variant","size","onClick","slots","slotProps"],zU=e=>{const{variant:t,color:r,disabled:o,focusVisible:s,size:d}=e,p={root:["root",o&&"disabled",s&&"focusVisible",t&&`variant${kt(t)}`,r&&`color${kt(r)}`,d&&`size${kt(d)}`]};return Fr(p,EU,{})},RU=mt(Ef,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r;return K({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((r=t.variants[e.variant])!=null&&(r=r[e.color])!=null&&r.backgroundColor)&&{color:t.vars.palette.text.secondary})}),MU={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},NR=L.forwardRef(function(t,r){var o,s,d,p,c,b;const w=Zr({props:t,name:"JoyModalClose"}),{component:T="button",color:k="neutral",variant:A="plain",size:$="md",onClick:V,slots:N={},slotProps:G={}}=w,O=Jt(w,AU),R=L.useContext(LR),M=L.useContext(Xv),ee=(o=(s=t.variant)!=null?s:MU[M==null?void 0:M.variant])!=null?o:A,Z=(d=(p=t.color)!=null?p:M==null?void 0:M.color)!=null?d:k,oe=L.useContext(tS),ie=(c=(b=t.size)!=null?b:oe)!=null?c:$,{focusVisible:W,getRootProps:Ie}=hs(K({},w,{rootRef:r})),_e=K({},w,{color:Z,component:T,variant:ee,size:ie,focusVisible:W}),Te=zU(_e),[Ae,$e]=Ft("root",{ref:r,elementType:RU,getSlotProps:Ie,externalForwardedProps:K({onClick:et=>{R==null||R(et,"closeClick"),V==null||V(et)}},O,{component:T,slots:N,slotProps:G}),className:Te.root,ownerState:_e});return Y.jsx(Ae,K({},$e,{children:mT||(mT=Y.jsx(gR,{}))}))});function DU(e){return qr("MuiOption",e)}const LU=Nr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),$U=["component","children","disabled","value","label","variant","color","slots","slotProps"],OU=e=>{const{disabled:t,highlighted:r,selected:o}=e;return Fr({root:["root",t&&"disabled",r&&"highlighted",o&&"selected"]},DU,{})},BU=mt(kf,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[`${t.variant}Hover`])==null?void 0:r[t.color];return{[`&.${LU.highlighted}:not([aria-selected="true"])`]:{backgroundColor:o==null?void 0:o.backgroundColor}}}),FU=L.memo(L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyOption"}),{component:d="li",children:p,disabled:c=!1,value:b,label:w,variant:T="plain",color:k="neutral",slots:A={},slotProps:$={}}=s,V=Jt(s,$U),N=L.useContext(Ld),{variant:G=T,color:O=k}=Gv(t.variant,t.color),R=L.useRef(null),M=on(R,r),ee=w??(typeof p=="string"?p:(o=R.current)==null?void 0:o.innerText),{getRootProps:Z,selected:oe,highlighted:ie,index:W}=R6({disabled:c,label:ee,value:b,rootRef:M}),Ie=K({},s,{disabled:c,selected:oe,highlighted:ie,index:W,component:d,variant:G,color:O,row:N}),_e=OU(Ie),Te=K({},V,{component:d,slots:A,slotProps:$}),[Ae,$e]=Ft("root",{ref:r,getSlotProps:Z,elementType:BU,externalForwardedProps:Te,className:_e.root,ownerState:Ie});return Y.jsx(Ae,K({},$e,{children:p}))})),NU=L.forwardRef(function(t,r){const{contextValue:o}=M6(t.value);return Y.jsx(Ll.Provider,{value:o,children:Y.jsx(FU,K({},t,{ref:r}))})}),jU=Od(Y.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function VU(e){return qr("MuiSelect",e)}const sd=Nr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var gT;const UU=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function HU(e){var t;return Array.isArray(e)?Y.jsx(L.Fragment,{children:e.map(r=>r.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const WU=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],GU=e=>{const{color:t,disabled:r,focusVisible:o,size:s,variant:d,open:p,multiple:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",p&&"expanded",d&&`variant${kt(d)}`,t&&`color${kt(t)}`,s&&`size${kt(s)}`,c&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",p&&"expanded"],listbox:["listbox",p&&"expanded",r&&"disabled"]};return Fr(b,VU,{})},qU=mt("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,s,d,p;const c=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color],{borderRadius:b}=$d({theme:e,ownerState:t},["borderRadius"]);return[K({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],'&:not([data-inverted-colors="false"])':K({},t.instanceColor&&{"--_Select-focusedHighlight":(s=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:s[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":c!=null&&c.backgroundColor?c==null?void 0:c.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(c!=null&&c.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],c,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${sd.focusVisible}`]:{"--Select-indicatorColor":c==null?void 0:c.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${sd.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],[`&.${sd.disabled}`]:(p=e.variants[`${t.variant}Disabled`])==null?void 0:p[t.color]},b!==void 0&&{"--Select-radius":b}]}),ZU=mt("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>K({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),KU=mt(Tf,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Uv,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),XU=mt("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),JU=mt("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),YU=mt("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${sd.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${sd.expanded}, .${sd.disabled} > &`]:{"--Icon-color":"currentColor"}})),QU=L.forwardRef(function(t,r){var o,s,d,p,c,b,w;const T=Zr({props:t,name:"JoySelect"}),k=T,{action:A,autoFocus:$,children:V,defaultValue:N,defaultListboxOpen:G=!1,disabled:O,getSerializedValue:R,placeholder:M,listboxId:ee,listboxOpen:Z,onChange:oe,onListboxOpenChange:ie,onClose:W,renderValue:Ie,required:_e=!1,value:Te,size:Ae="md",variant:$e="outlined",color:et="neutral",startDecorator:Ve,endDecorator:ke,indicator:Ne=gT||(gT=Y.jsx(jU,{})),"aria-describedby":Oe,"aria-label":Fe,"aria-labelledby":nt,id:lt,name:ut,multiple:Dt=!1,slots:St={},slotProps:$t={}}=k,Yt=Jt(k,UU),ct=L.useContext(Kv),Je=(o=(s=t.disabled)!=null?s:ct==null?void 0:ct.disabled)!=null?o:O,ft=(d=(p=t.size)!=null?p:ct==null?void 0:ct.size)!=null?d:Ae,_t=(c=t.color)!=null?c:ct!=null&&ct.error?"danger":(b=ct==null?void 0:ct.color)!=null?b:et,sr=Ie??HU,[Qt,Pr]=L.useState(null),hr=L.useRef(null),Ht=L.useRef(null),Ct=on(r,hr);L.useImperativeHandle(A,()=>({focusVisible:()=>{var q;(q=Ht.current)==null||q.focus()}}),[]),L.useEffect(()=>{Pr(hr.current)},[]),L.useEffect(()=>{$&&Ht.current.focus()},[$]);const ur=L.useCallback(q=>{ie==null||ie(q),q||W==null||W()},[W,ie]),{buttonActive:Ot,buttonFocusVisible:Cr,contextValue:We,disabled:br,getButtonProps:zr,getListboxProps:Kt,getHiddenInputProps:rr,getOptionMetadata:Or,open:Rr,value:fr}=JN({buttonRef:Ht,defaultOpen:G,defaultValue:N,disabled:Je,getSerializedValue:R,listboxId:ee,multiple:Dt,name:ut,required:_e,onChange:oe,onOpenChange:ur,open:Z,value:Te}),dr=K({},T,{active:Ot,defaultListboxOpen:G,disabled:br,focusVisible:Cr,open:Rr,renderValue:sr,value:fr,size:ft,variant:$e,color:_t}),Gt=GU(dr),cr=K({},Yt,{slots:St,slotProps:$t}),Ir=L.useMemo(()=>{let q;if(Dt)q=fr.map(he=>Or(he)).filter(he=>he!==void 0);else{var te;q=(te=Or(fr))!=null?te:null}return q},[Or,fr,Dt]),[Be,xt]=Ft("root",{ref:Ct,className:Gt.root,elementType:qU,externalForwardedProps:cr,ownerState:dr}),[bt,Ce]=Ft("button",{additionalProps:{"aria-describedby":Oe??(ct==null?void 0:ct["aria-describedby"]),"aria-label":Fe,"aria-labelledby":nt??(ct==null?void 0:ct.labelId),"aria-required":_e?"true":void 0,id:lt??(ct==null?void 0:ct.htmlFor),name:ut},className:Gt.button,elementType:ZU,externalForwardedProps:cr,getSlotProps:zr,ownerState:dr}),[He,Ye]=Ft("listbox",{additionalProps:{anchorEl:Qt,open:Rr,placement:"bottom",keepMounted:!0},className:Gt.listbox,elementType:KU,externalForwardedProps:cr,getSlotProps:Kt,ownerState:K({},dr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:q=>({size:q.size||ft,variant:q.variant||$e,color:q.color||(q.disablePortal?_t:et),disableColorInversion:!q.disablePortal})}),[It,gt]=Ft("startDecorator",{className:Gt.startDecorator,elementType:XU,externalForwardedProps:cr,ownerState:dr}),[Et,pr]=Ft("endDecorator",{className:Gt.endDecorator,elementType:JU,externalForwardedProps:cr,ownerState:dr}),[Lt,mr]=Ft("indicator",{className:Gt.indicator,elementType:YU,externalForwardedProps:cr,ownerState:dr}),ce=L.useMemo(()=>[...WU,...Ye.modifiers||[]],[Ye.modifiers]);let H=M;return(Array.isArray(Ir)&&Ir.length>0||!Array.isArray(Ir)&&Ir)&&(H=sr(Ir)),Y.jsxs(L.Fragment,{children:[Y.jsxs(Be,K({},xt,{children:[Ve&&Y.jsx(It,K({},gt,{children:Ve})),Y.jsx(bt,K({},Ce,{children:H})),ke&&Y.jsx(Et,K({},pr,{children:ke})),Ne&&Y.jsx(Lt,K({},mr,{children:Ne})),Y.jsx("input",K({},rr()))]})),Qt&&Y.jsx(He,K({},Ye,{className:si(Ye.className),modifiers:ce},!((w=T.slots)!=null&&w.listbox)&&{as:Nv,slots:{root:Ye.as||"ul"}},{children:Y.jsx(YN,{value:We,children:Y.jsx(qv,{variant:$e,color:et,children:Y.jsx(Vv.Provider,{value:"select",children:Y.jsx(If,{nested:!0,children:V})})})})}))]})});function e9(e){return qr("MuiSheet",e)}Nr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const t9=["className","color","component","variant","invertedColors","slots","slotProps"],r9=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${kt(t)}`,r&&`color${kt(r)}`]};return Fr(o,e9,{})},n9=mt("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const s=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:d,bgcolor:p,backgroundColor:c,background:b}=$d({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),w=zl(e,`palette.${p}`)||p||zl(e,`palette.${c}`)||c||b||(s==null?void 0:s.backgroundColor)||(s==null?void 0:s.background)||e.vars.palette.background.surface;return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":w==="transparent"?"initial":w,"--Sheet-background":w==="transparent"?"initial":w},d!==void 0&&{"--List-radius":`calc(${d} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${d} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),K({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&Hv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Wv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color],s)]}),jR=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoySheet"}),{className:s,color:d="neutral",component:p="div",variant:c="plain",invertedColors:b=!1,slots:w={},slotProps:T={}}=o,k=Jt(o,t9),A=K({},o,{color:d,component:p,invertedColors:b,variant:c}),$=r9(A),V=K({},k,{component:p,slots:w,slotProps:T}),[N,G]=Ft("root",{ref:r,className:si($.root,s),elementType:n9,externalForwardedProps:V,ownerState:A});return Y.jsx(N,K({},G))}),Af=u4({createStyledComponent:mt("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Zr({props:e,name:"JoyStack"})});function i9(e){return qr("MuiTab",e)}const o9=Nr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),a9=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],s9=e=>{const{selected:t,disabled:r,focusVisible:o,variant:s,color:d,orientation:p}=e,c={root:["root",p,r&&"disabled",o&&"focusVisible",t&&"selected",s&&`variant${kt(s)}`,d&&`color${kt(d)}`]};return Fr(c,i9,{})},l9=mt(kf,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),Z_=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyTab"}),s=L.useContext(Ld),{action:d,children:p,disabled:c=!1,component:b="button",orientation:w="horizontal",variant:T="plain",color:k="neutral",disableIndicator:A=!1,indicatorPlacement:$=s?"bottom":"right",indicatorInset:V=!1,slots:N={},slotProps:G={}}=o,O=Jt(o,a9),R=L.useRef(),M=on(R,r),{active:ee,focusVisible:Z,setFocusVisible:oe,selected:ie,getRootProps:W}=lj(K({},o,{rootRef:M}));L.useImperativeHandle(d,()=>({focusVisible:()=>{oe(!0),R.current.focus()}}),[oe]);const Ie=K({},o,{disableIndicator:A,indicatorPlacement:$,indicatorInset:V,orientation:w,row:s,active:ee,focusVisible:Z,disabled:c,selected:ie,variant:T,color:k}),_e=s9(Ie),Te=K({},O,{component:b,slots:N,slotProps:G}),[Ae,$e]=Ft("root",{ref:r,elementType:l9,getSlotProps:W,externalForwardedProps:Te,ownerState:Ie,className:_e.root});return Y.jsx(Jw.Provider,{value:w,children:Y.jsx(Ae,K({},$e,{children:p}))})}),nS=L.createContext("md");function c9(e){return qr("MuiTabList",e)}Nr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const u9=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],d9=e=>{const{orientation:t,size:r,variant:o,color:s}=e,d={root:["root",t,o&&`variant${kt(o)}`,s&&`color${kt(s)}`,r&&`size${kt(r)}`]};return Fr(d,c9,{})},h9=mt(Tf,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},Uv,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(o==null?void 0:o.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&K({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${o9.root}`]:{flex:t.tabFlex}})}),p9=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyTabList"}),s=L.useContext(nS),{isRtl:d,orientation:p,getRootProps:c,contextValue:b}=oj({rootRef:r}),{component:w="div",children:T,variant:k="plain",color:A="neutral",size:$,disableUnderline:V=!1,underlinePlacement:N=p==="horizontal"?"bottom":"right",tabFlex:G,sticky:O,slots:R={},slotProps:M={}}=o,ee=Jt(o,u9),oe=K({},o,{isRtl:d,orientation:p,variant:k,color:A,size:$??s,sticky:O,tabFlex:G,nesting:!1,disableUnderline:V,underlinePlacement:N}),ie=d9(oe),W=K({},ee,{component:w,slots:R,slotProps:M}),[Ie,_e]=Ft("root",{ref:r,elementType:h9,getSlotProps:c,externalForwardedProps:W,ownerState:oe,className:ie.root});return Y.jsx(Ie,K({},_e,{children:Y.jsx(aj,{value:b,children:Y.jsx(If,{row:p==="horizontal",nested:!0,children:T})})}))});function f9(e){return qr("MuiTabPanel",e)}Nr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const m9=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],g9=e=>{const{hidden:t,size:r,variant:o,color:s,orientation:d}=e,p={root:["root",t&&"hidden",r&&`size${kt(r)}`,d,o&&`variant${kt(o)}`,s&&`color${kt(s)}`,r&&`size${kt(r)}`]};return Fr(p,f9,{})},y9=mt("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),K_=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyTabPanel"}),{orientation:s}=jv()||{orientation:"horizontal"},d=L.useContext(nS),{children:p,value:c=0,component:b,color:w="neutral",variant:T="plain",size:k,slots:A={},slotProps:$={},keepMounted:V=!1}=o,N=Jt(o,m9),{hidden:G,getRootProps:O}=nj(K({},o,{value:c})),M=K({},o,{orientation:s,hidden:G,size:k??d,color:w,variant:T}),ee=g9(M),Z=K({},N,{component:b,slots:A,slotProps:$}),[oe,ie]=Ft("root",{ref:r,elementType:y9,getSlotProps:O,externalForwardedProps:Z,additionalProps:{role:"tabpanel",ref:r,as:b},ownerState:M,className:ee.root});return V?Y.jsx(oe,K({},ie,{children:p})):Y.jsx(oe,K({},ie,{children:!G&&p}))});function v9(e){return qr("MuiTabs",e)}Nr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const _9=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],x9=e=>{const{orientation:t,variant:r,color:o,size:s}=e,d={root:["root",t,r&&`variant${kt(r)}`,o&&`color${kt(o)}`,s&&`size${kt(s)}`]};return Fr(d,v9,{})},b9=mt("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o;const s=(r=t.variants[e.variant])==null?void 0:r[e.color],{bgcolor:d,backgroundColor:p,background:c,p:b,padding:w}=$d({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),T=zl(t,`palette.${d}`)||d||zl(t,`palette.${p}`)||p||c||(s==null?void 0:s.backgroundColor)||(s==null?void 0:s.background)||t.vars.palette.background.surface;return K({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":T==="transparent"?"initial":T,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(o=t.variants[e.variant])==null?void 0:o[e.color],b!==void 0&&{"--Tabs-padding":b},w!==void 0&&{"--Tabs-padding":w})}),yT=L.forwardRef(function(t,r){const o=Zr({props:t,name:"JoyTabs"}),{children:s,value:d,defaultValue:p,orientation:c="horizontal",direction:b="ltr",component:w,variant:T="plain",color:k="neutral",size:A="md",slots:$={},slotProps:V={}}=o,N=Jt(o,_9),G=p||(d===void 0?0:void 0),{contextValue:O}=ej(K({},o,{orientation:c,defaultValue:G})),R=K({},o,{orientation:c,direction:b,variant:T,color:k,size:A}),M=x9(R),ee=K({},N,{component:w,slots:$,slotProps:V}),[Z,oe]=Ft("root",{ref:r,elementType:b9,externalForwardedProps:ee,additionalProps:{ref:r,as:w},ownerState:R,className:M.root});return Y.jsx(Z,K({},oe,{children:Y.jsx(tj,{value:O,children:Y.jsx(nS.Provider,{value:A,children:s})})}))});function w9(e){return qr("MuiTooltip",e)}Nr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const S9=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],C9=e=>{const{arrow:t,variant:r,color:o,size:s,placement:d,touch:p}=e,c={root:["root",t&&"tooltipArrow",p&&"touch",s&&`size${kt(s)}`,o&&`color${kt(o)}`,r&&`variant${kt(r)}`,`tooltipPlacement${kt(d.split("-")[0])}`],arrow:["arrow"]};return Fr(c,w9,{})},I9=mt("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,s;const d=(r=t.variants[e.variant])==null?void 0:r[e.color];return K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],d,!d.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(o=e.placement)!=null&&o.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(s=e.placement)!=null&&s.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),T9=mt("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var r,o,s;const d=(r=e.variants[t.variant])==null?void 0:r[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(o=d==null?void 0:d.backgroundColor)!=null?o:e.vars.palette.background.surface,borderRightColor:(s=d==null?void 0:d.backgroundColor)!=null?s:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${d.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let fg=!1;const vT=new gf;let op={x:0,y:0};function _T(e,t){return r=>{t&&t(r),e(r)}}function xT(e,t){return(r,...o)=>{t&&t(r,...o),e(r,...o)}}const P9=L.forwardRef(function(t,r){var o;const s=Zr({props:t,name:"JoyTooltip"}),{children:d,className:p,component:c,arrow:b=!1,describeChild:w=!1,disableFocusListener:T=!1,disableHoverListener:k=!1,disableInteractive:A=!1,disableTouchListener:$=!1,enterDelay:V=100,enterNextDelay:N=0,enterTouchDelay:G=700,followCursor:O=!1,id:R,leaveDelay:M=0,leaveTouchDelay:ee=1500,onClose:Z,onOpen:oe,open:ie,disablePortal:W,direction:Ie,keepMounted:_e,modifiers:Te,placement:Ae="bottom",title:$e,color:et="neutral",variant:Ve="solid",size:ke="md",slots:Ne={},slotProps:Oe={}}=s,Fe=Jt(s,S9),[nt,lt]=L.useState(),[ut,Dt]=L.useState(null),St=L.useRef(!1),$t=A||O,Yt=Km(),ct=Km(),Je=Km(),ft=Km(),[_t,sr]=ed({controlled:ie,default:!1,name:"Tooltip",state:"open"});let Qt=_t;const Pr=ko(R),hr=L.useRef(),Ht=vl(()=>{hr.current!==void 0&&(document.body.style.WebkitUserSelect=hr.current,hr.current=void 0),ft.clear()});L.useEffect(()=>Ht,[Ht]);const Ct=te=>{vT.clear(),fg=!0,sr(!0),oe&&!Qt&&oe(te)},ur=vl(te=>{vT.start(800+M,()=>{fg=!1}),sr(!1),Z&&Qt&&Z(te),Yt.start(150,()=>{St.current=!1})}),Ot=te=>{St.current&&te.type!=="touchstart"||(nt&&nt.removeAttribute("title"),ct.clear(),Je.clear(),V||fg&&N?ct.start(fg?N:V,()=>{Ct(te)}):Ct(te))},Cr=te=>{ct.clear(),Je.start(M,()=>{ur(te)})},{isFocusVisibleRef:We,onBlur:br,onFocus:zr,ref:Kt}=U1(),[,rr]=L.useState(!1),Or=te=>{br(te),We.current===!1&&(rr(!1),Cr(te))},Rr=te=>{nt||lt(te.currentTarget),zr(te),We.current===!0&&(rr(!0),Ot(te))},fr=te=>{St.current=!0;const he=d.props;he.onTouchStart&&he.onTouchStart(te)},dr=te=>{fr(te),Je.clear(),Yt.clear(),Ht(),hr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ft.start(G,()=>{document.body.style.WebkitUserSelect=hr.current,Ot(te)})},Gt=te=>{d.props.onTouchEnd&&d.props.onTouchEnd(te),Ht(),Je.start(ee,()=>{ur(te)})};L.useEffect(()=>{if(!Qt)return;function te(he){(he.key==="Escape"||he.key==="Esc")&&ur(he)}return document.addEventListener("keydown",te),()=>{document.removeEventListener("keydown",te)}},[ur,Qt]);const cr=on(lt,r),Ir=on(Kt,cr),Be=on(d.ref,Ir);typeof $e!="number"&&!$e&&(Qt=!1);const xt=L.useRef(null),bt=te=>{const he=d.props;he.onMouseMove&&he.onMouseMove(te),op={x:te.clientX,y:te.clientY},xt.current&&xt.current.update()},Ce={},He=typeof $e=="string";w?(Ce.title=!Qt&&He&&!k?$e:null,Ce["aria-describedby"]=Qt?Pr:null):(Ce["aria-label"]=He?$e:null,Ce["aria-labelledby"]=Qt&&!He?Pr:null);const Ye=K({},Ce,Fe,{component:c},d.props,{className:si(p,d.props.className),onTouchStart:fr,ref:Be},O?{onMouseMove:bt}:{}),It={};$||(Ye.onTouchStart=dr,Ye.onTouchEnd=Gt),k||(Ye.onMouseOver=_T(Ot,Ye.onMouseOver),Ye.onMouseLeave=_T(Cr,Ye.onMouseLeave),$t||(It.onMouseOver=Ot,It.onMouseLeave=Cr)),T||(Ye.onFocus=xT(Rr,Ye.onFocus),Ye.onBlur=xT(Or,Ye.onBlur),$t||(It.onFocus=Rr,It.onBlur=Or));const gt=K({},s,{arrow:b,disableInteractive:$t,placement:Ae,touch:St.current,color:et,variant:Ve,size:ke}),Et=C9(gt),pr=K({},Fe,{component:c,slots:Ne,slotProps:Oe}),Lt=L.useMemo(()=>[{name:"arrow",enabled:!!ut,options:{element:ut,padding:6}},{name:"offset",options:{offset:[0,10]}},...Te||[]],[ut,Te]),[mr,ce]=Ft("root",{additionalProps:K({id:Pr,popperRef:xt,placement:Ae,anchorEl:O?{getBoundingClientRect:()=>({top:op.y,left:op.x,right:op.x,bottom:op.y,width:0,height:0})}:nt,open:nt?Qt:!1,disablePortal:W,keepMounted:_e,direction:Ie,modifiers:Lt},It),ref:null,className:Et.root,elementType:I9,externalForwardedProps:pr,ownerState:gt}),[H,q]=Ft("arrow",{ref:Dt,className:Et.arrow,elementType:T9,externalForwardedProps:pr,ownerState:gt});return Y.jsxs(L.Fragment,{children:[L.isValidElement(d)&&L.cloneElement(d,Ye),Y.jsxs(mr,K({},ce,!((o=s.slots)!=null&&o.root)&&{as:Nv,slots:{root:c||"div"}},{children:[$e,b?Y.jsx(H,K({},q)):null]}))]})});var VR,bT=Dd;VR=bT.createRoot,bT.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ln.apply(this,arguments)}var ii;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ii||(ii={}));const wT="popstate";function k9(e){e===void 0&&(e={});function t(o,s){let{pathname:d,search:p,hash:c}=o.location;return af("",{pathname:d,search:p,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(o,s){return typeof s=="string"?s:zf(s)}return A9(t,r,null,e)}function Dr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function E9(){return Math.random().toString(36).substr(2,8)}function ST(e,t){return{usr:e.state,key:e.key,idx:t}}function af(e,t,r,o){return r===void 0&&(r=null),Ln({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nl(t):t,{state:r,key:t&&t.key||o||E9()})}function zf(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Nl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function A9(e,t,r,o){o===void 0&&(o={});let{window:s=document.defaultView,v5Compat:d=!1}=o,p=s.history,c=ii.Pop,b=null,w=T();w==null&&(w=0,p.replaceState(Ln({},p.state,{idx:w}),""));function T(){return(p.state||{idx:null}).idx}function k(){c=ii.Pop;let G=T(),O=G==null?null:G-w;w=G,b&&b({action:c,location:N.location,delta:O})}function A(G,O){c=ii.Push;let R=af(N.location,G,O);w=T()+1;let M=ST(R,w),ee=N.createHref(R);try{p.pushState(M,"",ee)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(ee)}d&&b&&b({action:c,location:N.location,delta:1})}function $(G,O){c=ii.Replace;let R=af(N.location,G,O);w=T();let M=ST(R,w),ee=N.createHref(R);p.replaceState(M,"",ee),d&&b&&b({action:c,location:N.location,delta:0})}function V(G){let O=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof G=="string"?G:zf(G);return R=R.replace(/ $/,"%20"),Dr(O,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,O)}let N={get action(){return c},get location(){return e(s,p)},listen(G){if(b)throw new Error("A history only accepts one active listener");return s.addEventListener(wT,k),b=G,()=>{s.removeEventListener(wT,k),b=null}},createHref(G){return t(s,G)},createURL:V,encodeLocation(G){let O=V(G);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:A,replace:$,go(G){return p.go(G)}};return N}var hn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hn||(hn={}));const z9=new Set(["lazy","caseSensitive","path","id","index","children"]);function R9(e){return e.index===!0}function sf(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((s,d)=>{let p=[...r,String(d)],c=typeof s.id=="string"?s.id:p.join("-");if(Dr(s.index!==!0||!s.children,"Cannot specify children on an index route"),Dr(!o[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),R9(s)){let b=Ln({},s,t(s),{id:c});return o[c]=b,b}else{let b=Ln({},s,t(s),{id:c,children:void 0});return o[c]=b,s.children&&(b.children=sf(s.children,t,p,o)),b}})}function gc(e,t,r){return r===void 0&&(r="/"),jg(e,t,r,!1)}function jg(e,t,r,o){let s=typeof t=="string"?Nl(t):t,d=Rf(s.pathname||"/",r);if(d==null)return null;let p=UR(e);D9(p);let c=null;for(let b=0;c==null&&b<p.length;++b){let w=W9(d);c=U9(p[b],w,o)}return c}function M9(e,t){let{route:r,pathname:o,params:s}=e;return{id:r.id,pathname:o,params:s,data:t[r.id],handle:r.handle}}function UR(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let s=(d,p,c)=>{let b={relativePath:c===void 0?d.path||"":c,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};b.relativePath.startsWith("/")&&(Dr(b.relativePath.startsWith(o),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(o.length));let w=Al([o,b.relativePath]),T=r.concat(b);d.children&&d.children.length>0&&(Dr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),UR(d.children,t,T,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:j9(w,d.index),routesMeta:T})};return e.forEach((d,p)=>{var c;if(d.path===""||!((c=d.path)!=null&&c.includes("?")))s(d,p);else for(let b of HR(d.path))s(d,p,b)}),t}function HR(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,s=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return s?[d,""]:[d];let p=HR(o.join("/")),c=[];return c.push(...p.map(b=>b===""?d:[d,b].join("/"))),s&&c.push(...p),c.map(b=>e.startsWith("/")&&b===""?"/":b)}function D9(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:V9(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const L9=/^:[\w-]+$/,$9=3,O9=2,B9=1,F9=10,N9=-2,CT=e=>e==="*";function j9(e,t){let r=e.split("/"),o=r.length;return r.some(CT)&&(o+=N9),t&&(o+=O9),r.filter(s=>!CT(s)).reduce((s,d)=>s+(L9.test(d)?$9:d===""?B9:F9),o)}function V9(e,t){return e.length===t.length&&e.slice(0,-1).every((o,s)=>o===t[s])?e[e.length-1]-t[t.length-1]:0}function U9(e,t,r){r===void 0&&(r=!1);let{routesMeta:o}=e,s={},d="/",p=[];for(let c=0;c<o.length;++c){let b=o[c],w=c===o.length-1,T=d==="/"?t:t.slice(d.length)||"/",k=IT({path:b.relativePath,caseSensitive:b.caseSensitive,end:w},T),A=b.route;if(!k&&w&&r&&!o[o.length-1].route.index&&(k=IT({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},T)),!k)return null;Object.assign(s,k.params),p.push({params:s,pathname:Al([d,k.pathname]),pathnameBase:Z9(Al([d,k.pathnameBase])),route:A}),k.pathnameBase!=="/"&&(d=Al([d,k.pathnameBase]))}return p}function IT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=H9(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let d=s[0],p=d.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:o.reduce((w,T,k)=>{let{paramName:A,isOptional:$}=T;if(A==="*"){let N=c[k]||"";p=d.slice(0,d.length-N.length).replace(/(.)\/+$/,"$1")}const V=c[k];return $&&!V?w[A]=void 0:w[A]=(V||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:p,pattern:e}}function H9(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Cd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,c,b)=>(o.push({paramName:c,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),o]}function W9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Rf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function G9(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:s=""}=typeof e=="string"?Nl(e):e;return{pathname:r?r.startsWith("/")?r:q9(r,t):t,search:K9(o),hash:X9(s)}}function q9(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function X_(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function GR(e,t){let r=WR(e);return t?r.map((o,s)=>s===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function qR(e,t,r,o){o===void 0&&(o=!1);let s;typeof e=="string"?s=Nl(e):(s=Ln({},e),Dr(!s.pathname||!s.pathname.includes("?"),X_("?","pathname","search",s)),Dr(!s.pathname||!s.pathname.includes("#"),X_("#","pathname","hash",s)),Dr(!s.search||!s.search.includes("#"),X_("#","search","hash",s)));let d=e===""||s.pathname==="",p=d?"/":s.pathname,c;if(p==null)c=r;else{let k=t.length-1;if(!o&&p.startsWith("..")){let A=p.split("/");for(;A[0]==="..";)A.shift(),k-=1;s.pathname=A.join("/")}c=k>=0?t[k]:"/"}let b=G9(s,c),w=p&&p!=="/"&&p.endsWith("/"),T=(d||p===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(w||T)&&(b.pathname+="/"),b}const Al=e=>e.join("/").replace(/\/\/+/g,"/"),Z9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,X9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Ay{constructor(t,r,o,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function Jv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ZR=["post","put","patch","delete"],J9=new Set(ZR),Y9=["get",...ZR],Q9=new Set(Y9),e7=new Set([301,302,303,307,308]),t7=new Set([307,308]),J_={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},r7={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ap={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},iS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n7=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),KR="remix-router-transitions";function i7(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!r;Dr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let ne=e.detectErrorBoundary;s=ae=>({hasErrorBoundary:ne(ae)})}else s=n7;let d={},p=sf(e.routes,s,void 0,d),c,b=e.basename||"/",w=e.unstable_dataStrategy||u7,T=e.unstable_patchRoutesOnNavigation,k=Ln({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),A=null,$=new Set,V=1e3,N=new Set,G=null,O=null,R=null,M=e.hydrationData!=null,ee=gc(p,e.history.location,b),Z=null;if(ee==null&&!T){let ne=lo(404,{pathname:e.history.location.pathname}),{matches:ae,route:Pe}=DT(p);ee=ae,Z={[Pe.id]:ne}}ee&&!e.hydrationData&&Re(ee,p,e.history.location.pathname).active&&(ee=null);let oe;if(ee)if(ee.some(ne=>ne.route.lazy))oe=!1;else if(!ee.some(ne=>ne.route.loader))oe=!0;else if(k.v7_partialHydration){let ne=e.hydrationData?e.hydrationData.loaderData:null,ae=e.hydrationData?e.hydrationData.errors:null,Pe=Ue=>Ue.route.loader?typeof Ue.route.loader=="function"&&Ue.route.loader.hydrate===!0?!1:ne&&ne[Ue.route.id]!==void 0||ae&&ae[Ue.route.id]!==void 0:!0;if(ae){let Ue=ee.findIndex(Qe=>ae[Qe.route.id]!==void 0);oe=ee.slice(0,Ue+1).every(Pe)}else oe=ee.every(Pe)}else oe=e.hydrationData!=null;else if(oe=!1,ee=[],k.v7_partialHydration){let ne=Re(null,p,e.history.location.pathname);ne.active&&ne.matches&&(ee=ne.matches)}let ie,W={historyAction:e.history.action,location:e.history.location,matches:ee,initialized:oe,navigation:J_,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},Ie=ii.Pop,_e=!1,Te,Ae=!1,$e=new Map,et=null,Ve=!1,ke=!1,Ne=[],Oe=new Set,Fe=new Map,nt=0,lt=-1,ut=new Map,Dt=new Set,St=new Map,$t=new Map,Yt=new Set,ct=new Map,Je=new Map,ft=new Map,_t;function sr(){if(A=e.history.listen(ne=>{let{action:ae,location:Pe,delta:Ue}=ne;if(_t){_t(),_t=void 0;return}Cd(Je.size===0||Ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Qe=Lt({currentLocation:W.location,nextLocation:Pe,historyAction:ae});if(Qe&&Ue!=null){let it=new Promise(Se=>{_t=Se});e.history.go(Ue*-1),pr(Qe,{state:"blocked",location:Pe,proceed(){pr(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:Pe}),it.then(()=>e.history.go(Ue))},reset(){let Se=new Map(W.blockers);Se.set(Qe,ap),hr({blockers:Se})}});return}return Ot(ae,Pe)}),r){I7(t,$e);let ne=()=>T7(t,$e);t.addEventListener("pagehide",ne),et=()=>t.removeEventListener("pagehide",ne)}return W.initialized||Ot(ii.Pop,W.location,{initialHydration:!0}),ie}function Qt(){A&&A(),et&&et(),$.clear(),Te&&Te.abort(),W.fetchers.forEach((ne,ae)=>xt(ae)),W.blockers.forEach((ne,ae)=>Et(ae))}function Pr(ne){return $.add(ne),()=>$.delete(ne)}function hr(ne,ae){ae===void 0&&(ae={}),W=Ln({},W,ne);let Pe=[],Ue=[];k.v7_fetcherPersist&&W.fetchers.forEach((Qe,it)=>{Qe.state==="idle"&&(Yt.has(it)?Ue.push(it):Pe.push(it))}),[...$].forEach(Qe=>Qe(W,{deletedFetchers:Ue,unstable_viewTransitionOpts:ae.viewTransitionOpts,unstable_flushSync:ae.flushSync===!0})),k.v7_fetcherPersist&&(Pe.forEach(Qe=>W.fetchers.delete(Qe)),Ue.forEach(Qe=>xt(Qe)))}function Ht(ne,ae,Pe){var Ue,Qe;let{flushSync:it}=Pe===void 0?{}:Pe,Se=W.actionData!=null&&W.navigation.formMethod!=null&&La(W.navigation.formMethod)&&W.navigation.state==="loading"&&((Ue=ne.state)==null?void 0:Ue._isRedirect)!==!0,xe;ae.actionData?Object.keys(ae.actionData).length>0?xe=ae.actionData:xe=null:Se?xe=W.actionData:xe=null;let Ke=ae.loaderData?RT(W.loaderData,ae.loaderData,ae.matches||[],ae.errors):W.loaderData,Xe=W.blockers;Xe.size>0&&(Xe=new Map(Xe),Xe.forEach((zt,nr)=>Xe.set(nr,ap)));let rt=_e===!0||W.navigation.formMethod!=null&&La(W.navigation.formMethod)&&((Qe=ne.state)==null?void 0:Qe._isRedirect)!==!0;c&&(p=c,c=void 0),Ve||Ie===ii.Pop||(Ie===ii.Push?e.history.push(ne,ne.state):Ie===ii.Replace&&e.history.replace(ne,ne.state));let jt;if(Ie===ii.Pop){let zt=$e.get(W.location.pathname);zt&&zt.has(ne.pathname)?jt={currentLocation:W.location,nextLocation:ne}:$e.has(ne.pathname)&&(jt={currentLocation:ne,nextLocation:W.location})}else if(Ae){let zt=$e.get(W.location.pathname);zt?zt.add(ne.pathname):(zt=new Set([ne.pathname]),$e.set(W.location.pathname,zt)),jt={currentLocation:W.location,nextLocation:ne}}hr(Ln({},ae,{actionData:xe,loaderData:Ke,historyAction:Ie,location:ne,initialized:!0,navigation:J_,revalidation:"idle",restoreScrollPosition:fe(ne,ae.matches||W.matches),preventScrollReset:rt,blockers:Xe}),{viewTransitionOpts:jt,flushSync:it===!0}),Ie=ii.Pop,_e=!1,Ae=!1,Ve=!1,ke=!1,Ne=[]}async function Ct(ne,ae){if(typeof ne=="number"){e.history.go(ne);return}let Pe=e1(W.location,W.matches,b,k.v7_prependBasename,ne,k.v7_relativeSplatPath,ae==null?void 0:ae.fromRouteId,ae==null?void 0:ae.relative),{path:Ue,submission:Qe,error:it}=TT(k.v7_normalizeFormMethod,!1,Pe,ae),Se=W.location,xe=af(W.location,Ue,ae&&ae.state);xe=Ln({},xe,e.history.encodeLocation(xe));let Ke=ae&&ae.replace!=null?ae.replace:void 0,Xe=ii.Push;Ke===!0?Xe=ii.Replace:Ke===!1||Qe!=null&&La(Qe.formMethod)&&Qe.formAction===W.location.pathname+W.location.search&&(Xe=ii.Replace);let rt=ae&&"preventScrollReset"in ae?ae.preventScrollReset===!0:void 0,jt=(ae&&ae.unstable_flushSync)===!0,zt=Lt({currentLocation:Se,nextLocation:xe,historyAction:Xe});if(zt){pr(zt,{state:"blocked",location:xe,proceed(){pr(zt,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),Ct(ne,ae)},reset(){let nr=new Map(W.blockers);nr.set(zt,ap),hr({blockers:nr})}});return}return await Ot(Xe,xe,{submission:Qe,pendingError:it,preventScrollReset:rt,replace:ae&&ae.replace,enableViewTransition:ae&&ae.unstable_viewTransition,flushSync:jt})}function ur(){if(Gt(),hr({revalidation:"loading"}),W.navigation.state!=="submitting"){if(W.navigation.state==="idle"){Ot(W.historyAction,W.location,{startUninterruptedRevalidation:!0});return}Ot(Ie||W.historyAction,W.navigation.location,{overrideNavigation:W.navigation,enableViewTransition:Ae===!0})}}async function Ot(ne,ae,Pe){Te&&Te.abort(),Te=null,Ie=ne,Ve=(Pe&&Pe.startUninterruptedRevalidation)===!0,he(W.location,W.matches),_e=(Pe&&Pe.preventScrollReset)===!0,Ae=(Pe&&Pe.enableViewTransition)===!0;let Ue=c||p,Qe=Pe&&Pe.overrideNavigation,it=gc(Ue,ae,b),Se=(Pe&&Pe.flushSync)===!0,xe=Re(it,Ue,ae.pathname);if(xe.active&&xe.matches&&(it=xe.matches),!it){let{error:lr,notFoundMatches:Hr,route:gn}=mr(ae.pathname);Ht(ae,{matches:Hr,loaderData:{},errors:{[gn.id]:lr}},{flushSync:Se});return}if(W.initialized&&!ke&&g7(W.location,ae)&&!(Pe&&Pe.submission&&La(Pe.submission.formMethod))){Ht(ae,{matches:it},{flushSync:Se});return}Te=new AbortController;let Ke=Tu(e.history,ae,Te.signal,Pe&&Pe.submission),Xe;if(Pe&&Pe.pendingError)Xe=[Xu(it).route.id,{type:hn.error,error:Pe.pendingError}];else if(Pe&&Pe.submission&&La(Pe.submission.formMethod)){let lr=await Cr(Ke,ae,Pe.submission,it,xe.active,{replace:Pe.replace,flushSync:Se});if(lr.shortCircuited)return;if(lr.pendingActionResult){let[Hr,gn]=lr.pendingActionResult;if(Oo(gn)&&Jv(gn.error)&&gn.error.status===404){Te=null,Ht(ae,{matches:lr.matches,loaderData:{},errors:{[Hr]:gn.error}});return}}it=lr.matches||it,Xe=lr.pendingActionResult,Qe=Y_(ae,Pe.submission),Se=!1,xe.active=!1,Ke=Tu(e.history,Ke.url,Ke.signal)}let{shortCircuited:rt,matches:jt,loaderData:zt,errors:nr}=await We(Ke,ae,it,xe.active,Qe,Pe&&Pe.submission,Pe&&Pe.fetcherSubmission,Pe&&Pe.replace,Pe&&Pe.initialHydration===!0,Se,Xe);rt||(Te=null,Ht(ae,Ln({matches:jt||it},MT(Xe),{loaderData:zt,errors:nr})))}async function Cr(ne,ae,Pe,Ue,Qe,it){it===void 0&&(it={}),Gt();let Se=S7(ae,Pe);if(hr({navigation:Se},{flushSync:it.flushSync===!0}),Qe){let Xe=await be(Ue,ae.pathname,ne.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let{boundaryId:rt,error:jt}=ce(ae.pathname,Xe);return{matches:Xe.partialMatches,pendingActionResult:[rt,{type:hn.error,error:jt}]}}else if(Xe.matches)Ue=Xe.matches;else{let{notFoundMatches:rt,error:jt,route:zt}=mr(ae.pathname);return{matches:rt,pendingActionResult:[zt.id,{type:hn.error,error:jt}]}}}let xe,Ke=_p(Ue,ae);if(!Ke.route.action&&!Ke.route.lazy)xe={type:hn.error,error:lo(405,{method:ne.method,pathname:ae.pathname,routeId:Ke.route.id})};else if(xe=(await fr("action",W,ne,[Ke],Ue,null))[Ke.route.id],ne.signal.aborted)return{shortCircuited:!0};if(xc(xe)){let Xe;return it&&it.replace!=null?Xe=it.replace:Xe=ET(xe.response.headers.get("Location"),new URL(ne.url),b)===W.location.pathname+W.location.search,await Rr(ne,xe,!0,{submission:Pe,replace:Xe}),{shortCircuited:!0}}if(bl(xe))throw lo(400,{type:"defer-action"});if(Oo(xe)){let Xe=Xu(Ue,Ke.route.id);return(it&&it.replace)!==!0&&(Ie=ii.Push),{matches:Ue,pendingActionResult:[Xe.route.id,xe]}}return{matches:Ue,pendingActionResult:[Ke.route.id,xe]}}async function We(ne,ae,Pe,Ue,Qe,it,Se,xe,Ke,Xe,rt){let jt=Qe||Y_(ae,it),zt=it||Se||$T(jt),nr=!Ve&&(!k.v7_partialHydration||!Ke);if(Ue){if(nr){let yr=br(rt);hr(Ln({navigation:jt},yr!==void 0?{actionData:yr}:{}),{flushSync:Xe})}let er=await be(Pe,ae.pathname,ne.signal);if(er.type==="aborted")return{shortCircuited:!0};if(er.type==="error"){let{boundaryId:yr,error:rn}=ce(ae.pathname,er);return{matches:er.partialMatches,loaderData:{},errors:{[yr]:rn}}}else if(er.matches)Pe=er.matches;else{let{error:yr,notFoundMatches:rn,route:kr}=mr(ae.pathname);return{matches:rn,loaderData:{},errors:{[kr.id]:yr}}}}let lr=c||p,[Hr,gn]=PT(e.history,W,Pe,zt,ae,k.v7_partialHydration&&Ke===!0,k.v7_skipActionErrorRevalidation,ke,Ne,Oe,Yt,St,Dt,lr,b,rt);if(H(er=>!(Pe&&Pe.some(yr=>yr.route.id===er))||Hr&&Hr.some(yr=>yr.route.id===er)),lt=++nt,Hr.length===0&&gn.length===0){let er=Ye();return Ht(ae,Ln({matches:Pe,loaderData:{},errors:rt&&Oo(rt[1])?{[rt[0]]:rt[1].error}:null},MT(rt),er?{fetchers:new Map(W.fetchers)}:{}),{flushSync:Xe}),{shortCircuited:!0}}if(nr){let er={};if(!Ue){er.navigation=jt;let yr=br(rt);yr!==void 0&&(er.actionData=yr)}gn.length>0&&(er.fetchers=zr(gn)),hr(er,{flushSync:Xe})}gn.forEach(er=>{Fe.has(er.key)&&Ce(er.key),er.controller&&Fe.set(er.key,er.controller)});let Oi=()=>gn.forEach(er=>Ce(er.key));Te&&Te.signal.addEventListener("abort",Oi);let{loaderResults:Hn,fetcherResults:Ko}=await dr(W,Pe,Hr,gn,ne);if(ne.signal.aborted)return{shortCircuited:!0};Te&&Te.signal.removeEventListener("abort",Oi),gn.forEach(er=>Fe.delete(er.key));let vr=mg(Hn);if(vr)return await Rr(ne,vr.result,!0,{replace:xe}),{shortCircuited:!0};if(vr=mg(Ko),vr)return Dt.add(vr.key),await Rr(ne,vr.result,!0,{replace:xe}),{shortCircuited:!0};let{loaderData:Ao,errors:ir}=zT(W,Pe,Hr,Hn,rt,gn,Ko,ct);ct.forEach((er,yr)=>{er.subscribe(rn=>{(rn||er.done)&&ct.delete(yr)})}),k.v7_partialHydration&&Ke&&W.errors&&Object.entries(W.errors).filter(er=>{let[yr]=er;return!Hr.some(rn=>rn.route.id===yr)}).forEach(er=>{let[yr,rn]=er;ir=Object.assign(ir||{},{[yr]:rn})});let jr=Ye(),Mr=It(lt),ri=jr||Mr||gn.length>0;return Ln({matches:Pe,loaderData:Ao,errors:ir},ri?{fetchers:new Map(W.fetchers)}:{})}function br(ne){if(ne&&!Oo(ne[1]))return{[ne[0]]:ne[1].data};if(W.actionData)return Object.keys(W.actionData).length===0?null:W.actionData}function zr(ne){return ne.forEach(ae=>{let Pe=W.fetchers.get(ae.key),Ue=sp(void 0,Pe?Pe.data:void 0);W.fetchers.set(ae.key,Ue)}),new Map(W.fetchers)}function Kt(ne,ae,Pe,Ue){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Fe.has(ne)&&Ce(ne);let Qe=(Ue&&Ue.unstable_flushSync)===!0,it=c||p,Se=e1(W.location,W.matches,b,k.v7_prependBasename,Pe,k.v7_relativeSplatPath,ae,Ue==null?void 0:Ue.relative),xe=gc(it,Se,b),Ke=Re(xe,it,Se);if(Ke.active&&Ke.matches&&(xe=Ke.matches),!xe){Ir(ne,ae,lo(404,{pathname:Se}),{flushSync:Qe});return}let{path:Xe,submission:rt,error:jt}=TT(k.v7_normalizeFormMethod,!0,Se,Ue);if(jt){Ir(ne,ae,jt,{flushSync:Qe});return}let zt=_p(xe,Xe);if(_e=(Ue&&Ue.preventScrollReset)===!0,rt&&La(rt.formMethod)){rr(ne,ae,Xe,zt,xe,Ke.active,Qe,rt);return}St.set(ne,{routeId:ae,path:Xe}),Or(ne,ae,Xe,zt,xe,Ke.active,Qe,rt)}async function rr(ne,ae,Pe,Ue,Qe,it,Se,xe){Gt(),St.delete(ne);function Ke(kr){if(!kr.route.action&&!kr.route.lazy){let Vr=lo(405,{method:xe.formMethod,pathname:Pe,routeId:ae});return Ir(ne,ae,Vr,{flushSync:Se}),!0}return!1}if(!it&&Ke(Ue))return;let Xe=W.fetchers.get(ne);cr(ne,C7(xe,Xe),{flushSync:Se});let rt=new AbortController,jt=Tu(e.history,Pe,rt.signal,xe);if(it){let kr=await be(Qe,Pe,jt.signal);if(kr.type==="aborted")return;if(kr.type==="error"){let{error:Vr}=ce(Pe,kr);Ir(ne,ae,Vr,{flushSync:Se});return}else if(kr.matches){if(Qe=kr.matches,Ue=_p(Qe,Pe),Ke(Ue))return}else{Ir(ne,ae,lo(404,{pathname:Pe}),{flushSync:Se});return}}Fe.set(ne,rt);let zt=nt,lr=(await fr("action",W,jt,[Ue],Qe,ne))[Ue.route.id];if(jt.signal.aborted){Fe.get(ne)===rt&&Fe.delete(ne);return}if(k.v7_fetcherPersist&&Yt.has(ne)){if(xc(lr)||Oo(lr)){cr(ne,hl(void 0));return}}else{if(xc(lr))if(Fe.delete(ne),lt>zt){cr(ne,hl(void 0));return}else return Dt.add(ne),cr(ne,sp(xe)),Rr(jt,lr,!1,{fetcherSubmission:xe});if(Oo(lr)){Ir(ne,ae,lr.error);return}}if(bl(lr))throw lo(400,{type:"defer-action"});let Hr=W.navigation.location||W.location,gn=Tu(e.history,Hr,rt.signal),Oi=c||p,Hn=W.navigation.state!=="idle"?gc(Oi,W.navigation.location,b):W.matches;Dr(Hn,"Didn't find any matches after fetcher action");let Ko=++nt;ut.set(ne,Ko);let vr=sp(xe,lr.data);W.fetchers.set(ne,vr);let[Ao,ir]=PT(e.history,W,Hn,xe,Hr,!1,k.v7_skipActionErrorRevalidation,ke,Ne,Oe,Yt,St,Dt,Oi,b,[Ue.route.id,lr]);ir.filter(kr=>kr.key!==ne).forEach(kr=>{let Vr=kr.key,$r=W.fetchers.get(Vr),_a=sp(void 0,$r?$r.data:void 0);W.fetchers.set(Vr,_a),Fe.has(Vr)&&Ce(Vr),kr.controller&&Fe.set(Vr,kr.controller)}),hr({fetchers:new Map(W.fetchers)});let jr=()=>ir.forEach(kr=>Ce(kr.key));rt.signal.addEventListener("abort",jr);let{loaderResults:Mr,fetcherResults:ri}=await dr(W,Hn,Ao,ir,gn);if(rt.signal.aborted)return;rt.signal.removeEventListener("abort",jr),ut.delete(ne),Fe.delete(ne),ir.forEach(kr=>Fe.delete(kr.key));let er=mg(Mr);if(er)return Rr(gn,er.result,!1);if(er=mg(ri),er)return Dt.add(er.key),Rr(gn,er.result,!1);let{loaderData:yr,errors:rn}=zT(W,Hn,Ao,Mr,void 0,ir,ri,ct);if(W.fetchers.has(ne)){let kr=hl(lr.data);W.fetchers.set(ne,kr)}It(Ko),W.navigation.state==="loading"&&Ko>lt?(Dr(Ie,"Expected pending action"),Te&&Te.abort(),Ht(W.navigation.location,{matches:Hn,loaderData:yr,errors:rn,fetchers:new Map(W.fetchers)})):(hr({errors:rn,loaderData:RT(W.loaderData,yr,Hn,rn),fetchers:new Map(W.fetchers)}),ke=!1)}async function Or(ne,ae,Pe,Ue,Qe,it,Se,xe){let Ke=W.fetchers.get(ne);cr(ne,sp(xe,Ke?Ke.data:void 0),{flushSync:Se});let Xe=new AbortController,rt=Tu(e.history,Pe,Xe.signal);if(it){let lr=await be(Qe,Pe,rt.signal);if(lr.type==="aborted")return;if(lr.type==="error"){let{error:Hr}=ce(Pe,lr);Ir(ne,ae,Hr,{flushSync:Se});return}else if(lr.matches)Qe=lr.matches,Ue=_p(Qe,Pe);else{Ir(ne,ae,lo(404,{pathname:Pe}),{flushSync:Se});return}}Fe.set(ne,Xe);let jt=nt,nr=(await fr("loader",W,rt,[Ue],Qe,ne))[Ue.route.id];if(bl(nr)&&(nr=await oS(nr,rt.signal,!0)||nr),Fe.get(ne)===Xe&&Fe.delete(ne),!rt.signal.aborted){if(Yt.has(ne)){cr(ne,hl(void 0));return}if(xc(nr))if(lt>jt){cr(ne,hl(void 0));return}else{Dt.add(ne),await Rr(rt,nr,!1);return}if(Oo(nr)){Ir(ne,ae,nr.error);return}Dr(!bl(nr),"Unhandled fetcher deferred data"),cr(ne,hl(nr.data))}}async function Rr(ne,ae,Pe,Ue){let{submission:Qe,fetcherSubmission:it,replace:Se}=Ue===void 0?{}:Ue;ae.response.headers.has("X-Remix-Revalidate")&&(ke=!0);let xe=ae.response.headers.get("Location");Dr(xe,"Expected a Location header on the redirect Response"),xe=ET(xe,new URL(ne.url),b);let Ke=af(W.location,xe,{_isRedirect:!0});if(r){let lr=!1;if(ae.response.headers.has("X-Remix-Reload-Document"))lr=!0;else if(iS.test(xe)){const Hr=e.history.createURL(xe);lr=Hr.origin!==t.location.origin||Rf(Hr.pathname,b)==null}if(lr){Se?t.location.replace(xe):t.location.assign(xe);return}}Te=null;let Xe=Se===!0||ae.response.headers.has("X-Remix-Replace")?ii.Replace:ii.Push,{formMethod:rt,formAction:jt,formEncType:zt}=W.navigation;!Qe&&!it&&rt&&jt&&zt&&(Qe=$T(W.navigation));let nr=Qe||it;if(t7.has(ae.response.status)&&nr&&La(nr.formMethod))await Ot(Xe,Ke,{submission:Ln({},nr,{formAction:xe}),preventScrollReset:_e,enableViewTransition:Pe?Ae:void 0});else{let lr=Y_(Ke,Qe);await Ot(Xe,Ke,{overrideNavigation:lr,fetcherSubmission:it,preventScrollReset:_e,enableViewTransition:Pe?Ae:void 0})}}async function fr(ne,ae,Pe,Ue,Qe,it){let Se,xe={};try{Se=await d7(w,ne,ae,Pe,Ue,Qe,it,d,s)}catch(Ke){return Ue.forEach(Xe=>{xe[Xe.route.id]={type:hn.error,error:Ke}}),xe}for(let[Ke,Xe]of Object.entries(Se))if(v7(Xe)){let rt=Xe.result;xe[Ke]={type:hn.redirect,response:f7(rt,Pe,Ke,Qe,b,k.v7_relativeSplatPath)}}else xe[Ke]=await p7(Xe);return xe}async function dr(ne,ae,Pe,Ue,Qe){let it=ne.matches,Se=fr("loader",ne,Qe,Pe,ae,null),xe=Promise.all(Ue.map(async rt=>{if(rt.matches&&rt.match&&rt.controller){let zt=(await fr("loader",ne,Tu(e.history,rt.path,rt.controller.signal),[rt.match],rt.matches,rt.key))[rt.match.route.id];return{[rt.key]:zt}}else return Promise.resolve({[rt.key]:{type:hn.error,error:lo(404,{pathname:rt.path})}})})),Ke=await Se,Xe=(await xe).reduce((rt,jt)=>Object.assign(rt,jt),{});return await Promise.all([b7(ae,Ke,Qe.signal,it,ne.loaderData),w7(ae,Xe,Ue)]),{loaderResults:Ke,fetcherResults:Xe}}function Gt(){ke=!0,Ne.push(...H()),St.forEach((ne,ae)=>{Fe.has(ae)&&(Oe.add(ae),Ce(ae))})}function cr(ne,ae,Pe){Pe===void 0&&(Pe={}),W.fetchers.set(ne,ae),hr({fetchers:new Map(W.fetchers)},{flushSync:(Pe&&Pe.flushSync)===!0})}function Ir(ne,ae,Pe,Ue){Ue===void 0&&(Ue={});let Qe=Xu(W.matches,ae);xt(ne),hr({errors:{[Qe.route.id]:Pe},fetchers:new Map(W.fetchers)},{flushSync:(Ue&&Ue.flushSync)===!0})}function Be(ne){return k.v7_fetcherPersist&&($t.set(ne,($t.get(ne)||0)+1),Yt.has(ne)&&Yt.delete(ne)),W.fetchers.get(ne)||r7}function xt(ne){let ae=W.fetchers.get(ne);Fe.has(ne)&&!(ae&&ae.state==="loading"&&ut.has(ne))&&Ce(ne),St.delete(ne),ut.delete(ne),Dt.delete(ne),Yt.delete(ne),Oe.delete(ne),W.fetchers.delete(ne)}function bt(ne){if(k.v7_fetcherPersist){let ae=($t.get(ne)||0)-1;ae<=0?($t.delete(ne),Yt.add(ne)):$t.set(ne,ae)}else xt(ne);hr({fetchers:new Map(W.fetchers)})}function Ce(ne){let ae=Fe.get(ne);Dr(ae,"Expected fetch controller: "+ne),ae.abort(),Fe.delete(ne)}function He(ne){for(let ae of ne){let Pe=Be(ae),Ue=hl(Pe.data);W.fetchers.set(ae,Ue)}}function Ye(){let ne=[],ae=!1;for(let Pe of Dt){let Ue=W.fetchers.get(Pe);Dr(Ue,"Expected fetcher: "+Pe),Ue.state==="loading"&&(Dt.delete(Pe),ne.push(Pe),ae=!0)}return He(ne),ae}function It(ne){let ae=[];for(let[Pe,Ue]of ut)if(Ue<ne){let Qe=W.fetchers.get(Pe);Dr(Qe,"Expected fetcher: "+Pe),Qe.state==="loading"&&(Ce(Pe),ut.delete(Pe),ae.push(Pe))}return He(ae),ae.length>0}function gt(ne,ae){let Pe=W.blockers.get(ne)||ap;return Je.get(ne)!==ae&&Je.set(ne,ae),Pe}function Et(ne){W.blockers.delete(ne),Je.delete(ne)}function pr(ne,ae){let Pe=W.blockers.get(ne)||ap;Dr(Pe.state==="unblocked"&&ae.state==="blocked"||Pe.state==="blocked"&&ae.state==="blocked"||Pe.state==="blocked"&&ae.state==="proceeding"||Pe.state==="blocked"&&ae.state==="unblocked"||Pe.state==="proceeding"&&ae.state==="unblocked","Invalid blocker state transition: "+Pe.state+" -> "+ae.state);let Ue=new Map(W.blockers);Ue.set(ne,ae),hr({blockers:Ue})}function Lt(ne){let{currentLocation:ae,nextLocation:Pe,historyAction:Ue}=ne;if(Je.size===0)return;Je.size>1&&Cd(!1,"A router only supports one blocker at a time");let Qe=Array.from(Je.entries()),[it,Se]=Qe[Qe.length-1],xe=W.blockers.get(it);if(!(xe&&xe.state==="proceeding")&&Se({currentLocation:ae,nextLocation:Pe,historyAction:Ue}))return it}function mr(ne){let ae=lo(404,{pathname:ne}),Pe=c||p,{matches:Ue,route:Qe}=DT(Pe);return H(),{notFoundMatches:Ue,route:Qe,error:ae}}function ce(ne,ae){return{boundaryId:Xu(ae.partialMatches).route.id,error:lo(400,{type:"route-discovery",pathname:ne,message:ae.error!=null&&"message"in ae.error?ae.error:String(ae.error)})}}function H(ne){let ae=[];return ct.forEach((Pe,Ue)=>{(!ne||ne(Ue))&&(Pe.cancel(),ae.push(Ue),ct.delete(Ue))}),ae}function q(ne,ae,Pe){if(G=ne,R=ae,O=Pe||null,!M&&W.navigation===J_){M=!0;let Ue=fe(W.location,W.matches);Ue!=null&&hr({restoreScrollPosition:Ue})}return()=>{G=null,R=null,O=null}}function te(ne,ae){return O&&O(ne,ae.map(Ue=>M9(Ue,W.loaderData)))||ne.key}function he(ne,ae){if(G&&R){let Pe=te(ne,ae);G[Pe]=R()}}function fe(ne,ae){if(G){let Pe=te(ne,ae),Ue=G[Pe];if(typeof Ue=="number")return Ue}return null}function Re(ne,ae,Pe){if(T){if(N.has(Pe))return{active:!1,matches:ne};if(ne){if(Object.keys(ne[0].params).length>0)return{active:!0,matches:jg(ae,Pe,b,!0)}}else return{active:!0,matches:jg(ae,Pe,b,!0)||[]}}return{active:!1,matches:null}}async function be(ne,ae,Pe){let Ue=ne;for(;;){let Qe=c==null,it=c||p;try{await l7(T,ae,Ue,it,d,s,ft,Pe)}catch(Ke){return{type:"error",error:Ke,partialMatches:Ue}}finally{Qe&&(p=[...p])}if(Pe.aborted)return{type:"aborted"};let Se=gc(it,ae,b);if(Se)return ge(ae,N),{type:"success",matches:Se};let xe=jg(it,ae,b,!0);if(!xe||Ue.length===xe.length&&Ue.every((Ke,Xe)=>Ke.route.id===xe[Xe].route.id))return ge(ae,N),{type:"success",matches:null};Ue=xe}}function ge(ne,ae){if(ae.size>=V){let Pe=ae.values().next().value;ae.delete(Pe)}ae.add(ne)}function Ee(ne){d={},c=sf(ne,s,void 0,d)}function tt(ne,ae){let Pe=c==null;JR(ne,ae,c||p,d,s),Pe&&(p=[...p],hr({}))}return ie={get basename(){return b},get future(){return k},get state(){return W},get routes(){return p},get window(){return t},initialize:sr,subscribe:Pr,enableScrollRestoration:q,navigate:Ct,fetch:Kt,revalidate:ur,createHref:ne=>e.history.createHref(ne),encodeLocation:ne=>e.history.encodeLocation(ne),getFetcher:Be,deleteFetcher:bt,dispose:Qt,getBlocker:gt,deleteBlocker:Et,patchRoutes:tt,_internalFetchControllers:Fe,_internalActiveDeferreds:ct,_internalSetRoutes:Ee},ie}function o7(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function e1(e,t,r,o,s,d,p,c){let b,w;if(p){b=[];for(let k of t)if(b.push(k),k.route.id===p){w=k;break}}else b=t,w=t[t.length-1];let T=qR(s||".",GR(b,d),Rf(e.pathname,r)||e.pathname,c==="path");return s==null&&(T.search=e.search,T.hash=e.hash),(s==null||s===""||s===".")&&w&&w.route.index&&!aS(T.search)&&(T.search=T.search?T.search.replace(/^\?/,"?index&"):"?index"),o&&r!=="/"&&(T.pathname=T.pathname==="/"?r:Al([r,T.pathname])),zf(T)}function TT(e,t,r,o){if(!o||!o7(o))return{path:r};if(o.formMethod&&!x7(o.formMethod))return{path:r,error:lo(405,{method:o.formMethod})};let s=()=>({path:r,error:lo(400,{type:"invalid-body"})}),d=o.formMethod||"get",p=e?d.toUpperCase():d.toLowerCase(),c=YR(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!La(p))return s();let A=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce(($,V)=>{let[N,G]=V;return""+$+N+"="+G+`
`},""):String(o.body);return{path:r,submission:{formMethod:p,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:A}}}else if(o.formEncType==="application/json"){if(!La(p))return s();try{let A=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:p,formAction:c,formEncType:o.formEncType,formData:void 0,json:A,text:void 0}}}catch{return s()}}}Dr(typeof FormData=="function","FormData is not available in this environment");let b,w;if(o.formData)b=t1(o.formData),w=o.formData;else if(o.body instanceof FormData)b=t1(o.body),w=o.body;else if(o.body instanceof URLSearchParams)b=o.body,w=AT(b);else if(o.body==null)b=new URLSearchParams,w=new FormData;else try{b=new URLSearchParams(o.body),w=AT(b)}catch{return s()}let T={formMethod:p,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(La(T.formMethod))return{path:r,submission:T};let k=Nl(r);return t&&k.search&&aS(k.search)&&b.append("index",""),k.search="?"+b,{path:zf(k),submission:T}}function a7(e,t){let r=e;if(t){let o=e.findIndex(s=>s.route.id===t);o>=0&&(r=e.slice(0,o))}return r}function PT(e,t,r,o,s,d,p,c,b,w,T,k,A,$,V,N){let G=N?Oo(N[1])?N[1].error:N[1].data:void 0,O=e.createURL(t.location),R=e.createURL(s),M=N&&Oo(N[1])?N[0]:void 0,ee=M?a7(r,M):r,Z=N?N[1].statusCode:void 0,oe=p&&Z&&Z>=400,ie=ee.filter((Ie,_e)=>{let{route:Te}=Ie;if(Te.lazy)return!0;if(Te.loader==null)return!1;if(d)return typeof Te.loader!="function"||Te.loader.hydrate?!0:t.loaderData[Te.id]===void 0&&(!t.errors||t.errors[Te.id]===void 0);if(s7(t.loaderData,t.matches[_e],Ie)||b.some(et=>et===Ie.route.id))return!0;let Ae=t.matches[_e],$e=Ie;return kT(Ie,Ln({currentUrl:O,currentParams:Ae.params,nextUrl:R,nextParams:$e.params},o,{actionResult:G,actionStatus:Z,defaultShouldRevalidate:oe?!1:c||O.pathname+O.search===R.pathname+R.search||O.search!==R.search||XR(Ae,$e)}))}),W=[];return k.forEach((Ie,_e)=>{if(d||!r.some(Ve=>Ve.route.id===Ie.routeId)||T.has(_e))return;let Te=gc($,Ie.path,V);if(!Te){W.push({key:_e,routeId:Ie.routeId,path:Ie.path,matches:null,match:null,controller:null});return}let Ae=t.fetchers.get(_e),$e=_p(Te,Ie.path),et=!1;A.has(_e)?et=!1:w.has(_e)?(w.delete(_e),et=!0):Ae&&Ae.state!=="idle"&&Ae.data===void 0?et=c:et=kT($e,Ln({currentUrl:O,currentParams:t.matches[t.matches.length-1].params,nextUrl:R,nextParams:r[r.length-1].params},o,{actionResult:G,actionStatus:Z,defaultShouldRevalidate:oe?!1:c})),et&&W.push({key:_e,routeId:Ie.routeId,path:Ie.path,matches:Te,match:$e,controller:new AbortController})}),[ie,W]}function s7(e,t,r){let o=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return o||s}function XR(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function kT(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function l7(e,t,r,o,s,d,p,c){let b=[t,...r.map(w=>w.route.id)].join("-");try{let w=p.get(b);w||(w=e({path:t,matches:r,patch:(T,k)=>{c.aborted||JR(T,k,o,s,d)}}),p.set(b,w)),w&&y7(w)&&await w}finally{p.delete(b)}}function JR(e,t,r,o,s){if(e){var d;let p=o[e];Dr(p,"No route found to patch children into: routeId = "+e);let c=sf(t,s,[e,"patch",String(((d=p.children)==null?void 0:d.length)||"0")],o);p.children?p.children.push(...c):p.children=c}else{let p=sf(t,s,["patch",String(r.length||"0")],o);r.push(...p)}}async function c7(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let s=r[e.id];Dr(s,"No route found in manifest");let d={};for(let p in o){let b=s[p]!==void 0&&p!=="hasErrorBoundary";Cd(!b,'Route "'+s.id+'" has a static property "'+p+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+p+'" will be ignored.')),!b&&!z9.has(p)&&(d[p]=o[p])}Object.assign(s,d),Object.assign(s,Ln({},t(s),{lazy:void 0}))}async function u7(e){let{matches:t}=e,r=t.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,d,p)=>Object.assign(s,{[r[p].route.id]:d}),{})}async function d7(e,t,r,o,s,d,p,c,b,w){let T=d.map($=>$.route.lazy?c7($.route,b,c):void 0),k=d.map(($,V)=>{let N=T[V],G=s.some(R=>R.route.id===$.route.id);return Ln({},$,{shouldLoad:G,resolve:async R=>(R&&o.method==="GET"&&($.route.lazy||$.route.loader)&&(G=!0),G?h7(t,o,$,N,R,w):Promise.resolve({type:hn.data,result:void 0}))})}),A=await e({matches:k,request:o,params:d[0].params,fetcherKey:p,context:w});try{await Promise.all(T)}catch{}return A}async function h7(e,t,r,o,s,d){let p,c,b=w=>{let T,k=new Promise((V,N)=>T=N);c=()=>T(),t.signal.addEventListener("abort",c);let A=V=>typeof w!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):w({request:t,params:r.params,context:d},...V!==void 0?[V]:[]),$=(async()=>{try{return{type:"data",result:await(s?s(N=>A(N)):A())}}catch(V){return{type:"error",result:V}}})();return Promise.race([$,k])};try{let w=r.route[e];if(o)if(w){let T,[k]=await Promise.all([b(w).catch(A=>{T=A}),o]);if(T!==void 0)throw T;p=k}else if(await o,w=r.route[e],w)p=await b(w);else if(e==="action"){let T=new URL(t.url),k=T.pathname+T.search;throw lo(405,{method:t.method,pathname:k,routeId:r.route.id})}else return{type:hn.data,result:void 0};else if(w)p=await b(w);else{let T=new URL(t.url),k=T.pathname+T.search;throw lo(404,{pathname:k})}Dr(p.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(w){return{type:hn.error,result:w}}finally{c&&t.signal.removeEventListener("abort",c)}return p}async function p7(e){let{result:t,type:r}=e;if(QR(t)){let w;try{let T=t.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?t.body==null?w=null:w=await t.json():w=await t.text()}catch(T){return{type:hn.error,error:T}}return r===hn.error?{type:hn.error,error:new Ay(t.status,t.statusText,w),statusCode:t.status,headers:t.headers}:{type:hn.data,data:w,statusCode:t.status,headers:t.headers}}if(r===hn.error){if(LT(t)){var o;if(t.data instanceof Error){var s;return{type:hn.error,error:t.data,statusCode:(s=t.init)==null?void 0:s.status}}t=new Ay(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:hn.error,error:t,statusCode:Jv(t)?t.status:void 0}}if(_7(t)){var d,p;return{type:hn.deferred,deferredData:t,statusCode:(d=t.init)==null?void 0:d.status,headers:((p=t.init)==null?void 0:p.headers)&&new Headers(t.init.headers)}}if(LT(t)){var c,b;return{type:hn.data,data:t.data,statusCode:(c=t.init)==null?void 0:c.status,headers:(b=t.init)!=null&&b.headers?new Headers(t.init.headers):void 0}}return{type:hn.data,data:t}}function f7(e,t,r,o,s,d){let p=e.headers.get("Location");if(Dr(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!iS.test(p)){let c=o.slice(0,o.findIndex(b=>b.route.id===r)+1);p=e1(new URL(t.url),c,s,!0,p,d),e.headers.set("Location",p)}return e}function ET(e,t,r){if(iS.test(e)){let o=e,s=o.startsWith("//")?new URL(t.protocol+o):new URL(o),d=Rf(s.pathname,r)!=null;if(s.origin===t.origin&&d)return s.pathname+s.search+s.hash}return e}function Tu(e,t,r,o){let s=e.createURL(YR(t)).toString(),d={signal:r};if(o&&La(o.formMethod)){let{formMethod:p,formEncType:c}=o;d.method=p.toUpperCase(),c==="application/json"?(d.headers=new Headers({"Content-Type":c}),d.body=JSON.stringify(o.json)):c==="text/plain"?d.body=o.text:c==="application/x-www-form-urlencoded"&&o.formData?d.body=t1(o.formData):d.body=o.formData}return new Request(s,d)}function t1(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,typeof o=="string"?o:o.name);return t}function AT(e){let t=new FormData;for(let[r,o]of e.entries())t.append(r,o);return t}function m7(e,t,r,o,s){let d={},p=null,c,b=!1,w={},T=r&&Oo(r[1])?r[1].error:void 0;return e.forEach(k=>{if(!(k.route.id in t))return;let A=k.route.id,$=t[A];if(Dr(!xc($),"Cannot handle redirect results in processLoaderData"),Oo($)){let V=$.error;T!==void 0&&(V=T,T=void 0),p=p||{};{let N=Xu(e,A);p[N.route.id]==null&&(p[N.route.id]=V)}d[A]=void 0,b||(b=!0,c=Jv($.error)?$.error.status:500),$.headers&&(w[A]=$.headers)}else bl($)?(o.set(A,$.deferredData),d[A]=$.deferredData.data,$.statusCode!=null&&$.statusCode!==200&&!b&&(c=$.statusCode),$.headers&&(w[A]=$.headers)):(d[A]=$.data,$.statusCode&&$.statusCode!==200&&!b&&(c=$.statusCode),$.headers&&(w[A]=$.headers))}),T!==void 0&&r&&(p={[r[0]]:T},d[r[0]]=void 0),{loaderData:d,errors:p,statusCode:c||200,loaderHeaders:w}}function zT(e,t,r,o,s,d,p,c){let{loaderData:b,errors:w}=m7(t,o,s,c);return d.forEach(T=>{let{key:k,match:A,controller:$}=T,V=p[k];if(Dr(V,"Did not find corresponding fetcher result"),!($&&$.signal.aborted))if(Oo(V)){let N=Xu(e.matches,A==null?void 0:A.route.id);w&&w[N.route.id]||(w=Ln({},w,{[N.route.id]:V.error})),e.fetchers.delete(k)}else if(xc(V))Dr(!1,"Unhandled fetcher revalidation redirect");else if(bl(V))Dr(!1,"Unhandled fetcher deferred data");else{let N=hl(V.data);e.fetchers.set(k,N)}}),{loaderData:b,errors:w}}function RT(e,t,r,o){let s=Ln({},t);for(let d of r){let p=d.route.id;if(t.hasOwnProperty(p)?t[p]!==void 0&&(s[p]=t[p]):e[p]!==void 0&&d.route.loader&&(s[p]=e[p]),o&&o.hasOwnProperty(p))break}return s}function MT(e){return e?Oo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Xu(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function DT(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function lo(e,t){let{pathname:r,routeId:o,method:s,type:d,message:p}=t===void 0?{}:t,c="Unknown Server Error",b="Unknown @remix-run/router error";return e===400?(c="Bad Request",d==="route-discovery"?b='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+p):s&&r&&o?b="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":d==="defer-action"?b="defer() is not supported in actions":d==="invalid-body"&&(b="Unable to encode submission body")):e===403?(c="Forbidden",b='Route "'+o+'" does not match URL "'+r+'"'):e===404?(c="Not Found",b='No route matches URL "'+r+'"'):e===405&&(c="Method Not Allowed",s&&r&&o?b="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":s&&(b='Invalid request method "'+s.toUpperCase()+'"')),new Ay(e||500,c,new Error(b),!0)}function mg(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[o,s]=t[r];if(xc(s))return{key:o,result:s}}}function YR(e){let t=typeof e=="string"?Nl(e):e;return zf(Ln({},t,{hash:""}))}function g7(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function y7(e){return typeof e=="object"&&e!=null&&"then"in e}function v7(e){return QR(e.result)&&e7.has(e.result.status)}function bl(e){return e.type===hn.deferred}function Oo(e){return e.type===hn.error}function xc(e){return(e&&e.type)===hn.redirect}function LT(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function _7(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function QR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function x7(e){return Q9.has(e.toLowerCase())}function La(e){return J9.has(e.toLowerCase())}async function b7(e,t,r,o,s){let d=Object.entries(t);for(let p=0;p<d.length;p++){let[c,b]=d[p],w=e.find(A=>(A==null?void 0:A.route.id)===c);if(!w)continue;let T=o.find(A=>A.route.id===w.route.id),k=T!=null&&!XR(T,w)&&(s&&s[w.route.id])!==void 0;bl(b)&&k&&await oS(b,r,!1).then(A=>{A&&(t[c]=A)})}}async function w7(e,t,r){for(let o=0;o<r.length;o++){let{key:s,routeId:d,controller:p}=r[o],c=t[s];e.find(w=>(w==null?void 0:w.route.id)===d)&&bl(c)&&(Dr(p,"Expected an AbortController for revalidating fetcher deferred result"),await oS(c,p.signal,!0).then(w=>{w&&(t[s]=w)}))}}async function oS(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:hn.data,data:e.deferredData.unwrappedData}}catch(s){return{type:hn.error,error:s}}return{type:hn.data,data:e.deferredData.data}}}function aS(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function _p(e,t){let r=typeof t=="string"?Nl(t).search:t.search;if(e[e.length-1].route.index&&aS(r||""))return e[e.length-1];let o=WR(e);return o[o.length-1]}function $T(e){let{formMethod:t,formAction:r,formEncType:o,text:s,formData:d,json:p}=e;if(!(!t||!r||!o)){if(s!=null)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:void 0,text:s};if(d!=null)return{formMethod:t,formAction:r,formEncType:o,formData:d,json:void 0,text:void 0};if(p!==void 0)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:p,text:void 0}}}function Y_(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function S7(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function sp(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function C7(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function hl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function I7(e,t){try{let r=e.sessionStorage.getItem(KR);if(r){let o=JSON.parse(r);for(let[s,d]of Object.entries(o||{}))d&&Array.isArray(d)&&t.set(s,new Set(d||[]))}}catch{}}function T7(e,t){if(t.size>0){let r={};for(let[o,s]of t)r[o]=[...s];try{e.sessionStorage.setItem(KR,JSON.stringify(r))}catch(o){Cd(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zy.apply(this,arguments)}const Yv=L.createContext(null),eM=L.createContext(null),Qv=L.createContext(null),sS=L.createContext(null),Bd=L.createContext({outlet:null,matches:[],isDataRoute:!1}),tM=L.createContext(null);function e0(){return L.useContext(sS)!=null}function lS(){return e0()||Dr(!1),L.useContext(sS).location}function rM(e){L.useContext(Qv).static||L.useLayoutEffect(e)}function P7(){let{isDataRoute:e}=L.useContext(Bd);return e?F7():k7()}function k7(){e0()||Dr(!1);let e=L.useContext(Yv),{basename:t,future:r,navigator:o}=L.useContext(Qv),{matches:s}=L.useContext(Bd),{pathname:d}=lS(),p=JSON.stringify(GR(s,r.v7_relativeSplatPath)),c=L.useRef(!1);return rM(()=>{c.current=!0}),L.useCallback(function(w,T){if(T===void 0&&(T={}),!c.current)return;if(typeof w=="number"){o.go(w);return}let k=qR(w,JSON.parse(p),d,T.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:Al([t,k.pathname])),(T.replace?o.replace:o.push)(k,T.state,T)},[t,o,p,d,e])}function E7(e,t,r,o){e0()||Dr(!1);let{navigator:s}=L.useContext(Qv),{matches:d}=L.useContext(Bd),p=d[d.length-1],c=p?p.params:{};p&&p.pathname;let b=p?p.pathnameBase:"/";p&&p.route;let w=lS(),T;T=w;let k=T.pathname||"/",A=k;if(b!=="/"){let N=b.replace(/^\//,"").split("/");A="/"+k.replace(/^\//,"").split("/").slice(N.length).join("/")}let $=gc(e,{pathname:A});return D7($&&$.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Al([b,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?b:Al([b,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),d,r,o)}function A7(){let e=B7(),t=Jv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),r?L.createElement("pre",{style:s},r):null,null)}const z7=L.createElement(A7,null);class R7 extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?L.createElement(Bd.Provider,{value:this.props.routeContext},L.createElement(tM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function M7(e){let{routeContext:t,match:r,children:o}=e,s=L.useContext(Yv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),L.createElement(Bd.Provider,{value:t},o)}function D7(e,t,r,o){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var d;if(!r)return null;if(r.errors)e=r.matches;else if((d=o)!=null&&d.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let p=e,c=(s=r)==null?void 0:s.errors;if(c!=null){let T=p.findIndex(k=>k.route.id&&(c==null?void 0:c[k.route.id])!==void 0);T>=0||Dr(!1),p=p.slice(0,Math.min(p.length,T+1))}let b=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let T=0;T<p.length;T++){let k=p[T];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(w=T),k.route.id){let{loaderData:A,errors:$}=r,V=k.route.loader&&A[k.route.id]===void 0&&(!$||$[k.route.id]===void 0);if(k.route.lazy||V){b=!0,w>=0?p=p.slice(0,w+1):p=[p[0]];break}}}return p.reduceRight((T,k,A)=>{let $,V=!1,N=null,G=null;r&&($=c&&k.route.id?c[k.route.id]:void 0,N=k.route.errorElement||z7,b&&(w<0&&A===0?(V=!0,G=null):w===A&&(V=!0,G=k.route.hydrateFallbackElement||null)));let O=t.concat(p.slice(0,A+1)),R=()=>{let M;return $?M=N:V?M=G:k.route.Component?M=L.createElement(k.route.Component,null):k.route.element?M=k.route.element:M=T,L.createElement(M7,{match:k,routeContext:{outlet:T,matches:O,isDataRoute:r!=null},children:M})};return r&&(k.route.ErrorBoundary||k.route.errorElement||A===0)?L.createElement(R7,{location:r.location,revalidation:r.revalidation,component:N,error:$,children:R(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):R()},null)}var nM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nM||{}),Ry=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ry||{});function L7(e){let t=L.useContext(Yv);return t||Dr(!1),t}function $7(e){let t=L.useContext(eM);return t||Dr(!1),t}function O7(e){let t=L.useContext(Bd);return t||Dr(!1),t}function iM(e){let t=O7(),r=t.matches[t.matches.length-1];return r.route.id||Dr(!1),r.route.id}function B7(){var e;let t=L.useContext(tM),r=$7(Ry.UseRouteError),o=iM(Ry.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function F7(){let{router:e}=L7(nM.UseNavigateStable),t=iM(Ry.UseNavigateStable),r=L.useRef(!1);return rM(()=>{r.current=!0}),L.useCallback(function(s,d){d===void 0&&(d={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,zy({fromRouteId:t},d)))},[e,t])}function r1(e){Dr(!1)}function N7(e){let{basename:t="/",children:r=null,location:o,navigationType:s=ii.Pop,navigator:d,static:p=!1,future:c}=e;e0()&&Dr(!1);let b=t.replace(/^\/*/,"/"),w=L.useMemo(()=>({basename:b,navigator:d,static:p,future:zy({v7_relativeSplatPath:!1},c)}),[b,c,d,p]);typeof o=="string"&&(o=Nl(o));let{pathname:T="/",search:k="",hash:A="",state:$=null,key:V="default"}=o,N=L.useMemo(()=>{let G=Rf(T,b);return G==null?null:{location:{pathname:G,search:k,hash:A,state:$,key:V},navigationType:s}},[b,T,k,A,$,V,s]);return N==null?null:L.createElement(Qv.Provider,{value:w},L.createElement(sS.Provider,{children:r,value:N}))}new Promise(()=>{});function n1(e,t){t===void 0&&(t=[]);let r=[];return L.Children.forEach(e,(o,s)=>{if(!L.isValidElement(o))return;let d=[...t,s];if(o.type===L.Fragment){r.push.apply(r,n1(o.props.children,d));return}o.type!==r1&&Dr(!1),!o.props.index||!o.props.children||Dr(!1);let p={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=n1(o.props.children,d)),r.push(p)}),r}function j7(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:L.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:L.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:L.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function My(){return My=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},My.apply(this,arguments)}function i1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(s=>[r,s]):[[r,o]])},[]))}function V7(e,t){let r=i1(e);return t&&t.forEach((o,s)=>{r.has(s)||t.getAll(s).forEach(d=>{r.append(s,d)})}),r}const U7="6";try{window.__reactRouterVersion=U7}catch{}function H7(e,t){return i7({basename:void 0,future:My({},void 0,{v7_prependBasename:!0}),history:k9({window:void 0}),hydrationData:W7(),routes:e,mapRouteProperties:j7,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function W7(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=My({},t,{errors:G7(t.errors)})),t}function G7(e){if(!e)return null;let t=Object.entries(e),r={};for(let[o,s]of t)if(s&&s.__type==="RouteErrorResponse")r[o]=new Ay(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let d=window[s.__subType];if(typeof d=="function")try{let p=new d(s.message);p.stack="",r[o]=p}catch{}}if(r[o]==null){let d=new Error(s.message);d.stack="",r[o]=d}}else r[o]=s;return r}const q7=L.createContext({isTransitioning:!1}),Z7=L.createContext(new Map),K7="startTransition",OT=Xg[K7],X7="flushSync",BT=g6[X7];function J7(e){OT?OT(e):e()}function lp(e){BT?BT(e):e()}class Y7{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}}function Q7(e){let{fallbackElement:t,router:r,future:o}=e,[s,d]=L.useState(r.state),[p,c]=L.useState(),[b,w]=L.useState({isTransitioning:!1}),[T,k]=L.useState(),[A,$]=L.useState(),[V,N]=L.useState(),G=L.useRef(new Map),{v7_startTransition:O}=o||{},R=L.useCallback(W=>{O?J7(W):W()},[O]),M=L.useCallback((W,Ie)=>{let{deletedFetchers:_e,unstable_flushSync:Te,unstable_viewTransitionOpts:Ae}=Ie;_e.forEach(et=>G.current.delete(et)),W.fetchers.forEach((et,Ve)=>{et.data!==void 0&&G.current.set(Ve,et.data)});let $e=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!Ae||$e){Te?lp(()=>d(W)):R(()=>d(W));return}if(Te){lp(()=>{A&&(T&&T.resolve(),A.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:Ae.currentLocation,nextLocation:Ae.nextLocation})});let et=r.window.document.startViewTransition(()=>{lp(()=>d(W))});et.finished.finally(()=>{lp(()=>{k(void 0),$(void 0),c(void 0),w({isTransitioning:!1})})}),lp(()=>$(et));return}A?(T&&T.resolve(),A.skipTransition(),N({state:W,currentLocation:Ae.currentLocation,nextLocation:Ae.nextLocation})):(c(W),w({isTransitioning:!0,flushSync:!1,currentLocation:Ae.currentLocation,nextLocation:Ae.nextLocation}))},[r.window,A,T,G,R]);L.useLayoutEffect(()=>r.subscribe(M),[r,M]),L.useEffect(()=>{b.isTransitioning&&!b.flushSync&&k(new Y7)},[b]),L.useEffect(()=>{if(T&&p&&r.window){let W=p,Ie=T.promise,_e=r.window.document.startViewTransition(async()=>{R(()=>d(W)),await Ie});_e.finished.finally(()=>{k(void 0),$(void 0),c(void 0),w({isTransitioning:!1})}),$(_e)}},[R,p,T,r.window]),L.useEffect(()=>{T&&p&&s.location.key===p.location.key&&T.resolve()},[T,A,s.location,p]),L.useEffect(()=>{!b.isTransitioning&&V&&(c(V.state),w({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}),N(void 0))},[b.isTransitioning,V]),L.useEffect(()=>{},[]);let ee=L.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:W=>r.navigate(W),push:(W,Ie,_e)=>r.navigate(W,{state:Ie,preventScrollReset:_e==null?void 0:_e.preventScrollReset}),replace:(W,Ie,_e)=>r.navigate(W,{replace:!0,state:Ie,preventScrollReset:_e==null?void 0:_e.preventScrollReset})}),[r]),Z=r.basename||"/",oe=L.useMemo(()=>({router:r,navigator:ee,static:!1,basename:Z}),[r,ee,Z]),ie=L.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return L.createElement(L.Fragment,null,L.createElement(Yv.Provider,{value:oe},L.createElement(eM.Provider,{value:s},L.createElement(Z7.Provider,{value:G.current},L.createElement(q7.Provider,{value:b},L.createElement(N7,{basename:Z,location:s.location,navigationType:s.historyAction,navigator:ee,future:ie},s.initialized||r.future.v7_partialHydration?L.createElement(eH,{routes:r.routes,future:r.future,state:s}):t))))),null)}const eH=L.memo(tH);function tH(e){let{routes:t,future:r,state:o}=e;return E7(t,void 0,o,r)}var FT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(FT||(FT={}));var NT;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(NT||(NT={}));function rH(e){let t=L.useRef(i1(e)),r=L.useRef(!1),o=lS(),s=L.useMemo(()=>V7(o.search,r.current?null:t.current),[o.search]),d=P7(),p=L.useCallback((c,b)=>{const w=i1(typeof c=="function"?c(s):c);r.current=!0,d("?"+w,b)},[d,s]);return[s,p]}function In(e,t){if(e==null)throw new Error(t);return e}function nH(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}var Xi=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Kansas=4]="Kansas",e[e.Montana=5]="Montana",e[e.Nebraska=6]="Nebraska",e[e.Nevada=7]="Nevada",e[e.NewMexico=8]="NewMexico",e[e.Oklahoma=9]="Oklahoma",e[e.Oregon=10]="Oregon",e[e.Texas=11]="Texas",e[e.Utah=12]="Utah",e[e.Washington=13]="Washington",e[e.Wyoming=14]="Wyoming",e))(Xi||{});const lf=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),iH={7:"Nevada",0:"Arizona",8:"New Mexico",10:"Oregon",13:"Washington",12:"Utah",3:"Idaho",2:"Colorado",14:"Wyoming",5:"Montana",11:"Texas",9:"Oklahoma",4:"Kansas",6:"Nebraska",1:"Arkansas"},oM={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},oH={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values(oH))e!==0&&nH(oM[e].size===1);function t0(e){const t=new Set;for(const[r,o]of Object.entries(oM))[...o].every(s=>e.has(s))&&t.add(Number(r));return t}const aH=new Set([]);var aM=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(aM||{});const sH="modulepreload",lH=function(e){return"/"+e},jT={},cH=function(t,r,o){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),c=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));s=Promise.allSettled(r.map(b=>{if(b=lH(b),b in jT)return;jT[b]=!0;const w=b.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const k=document.createElement("link");if(k.rel=w?"stylesheet":sH,w||(k.as="script"),k.crossOrigin="",k.href=b,c&&k.setAttribute("nonce",c),document.head.appendChild(k),w)return new Promise((A,$)=>{k.addEventListener("load",A),k.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(p){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=p,window.dispatchEvent(c),!c.defaultPrevented)throw p}return s.then(p=>{for(const c of p||[])c.status==="rejected"&&d(c.reason);return t().catch(d)})},sM=L.createContext(null);function uH(){var e;const t=(e=L.useContext(sM))===null||e===void 0?void 0:e.maps,r=L.useContext(Oc);return L.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function dH(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,s=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===s&&o===d}function Fo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Fo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const s of r)if(!t.hasOwnProperty(s)||!Fo(e[s],t[s]))return!1;return!0}return!1}function hH(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function VT(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();Fo(r,o)||t.setProjection(r)}function UT(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function HT(e,t){const r=t.viewState||t;let o=!1;if("longitude"in r&&"latitude"in r){const s=e.center;e.center=new s.constructor(r.longitude,r.latitude),o=o||s!==e.center}if("zoom"in r){const s=e.zoom;e.zoom=r.zoom,o=o||s!==e.zoom}if("bearing"in r){const s=e.bearing;e.bearing=r.bearing,o=o||s!==e.bearing}if("pitch"in r){const s=e.pitch;e.pitch=r.pitch,o=o||s!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),o}const pH=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function WT(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let s=null;"interactive"in o&&(s=Object.assign({},o),delete s.interactive);const d=t[o.ref];if(d){s=s||Object.assign({},o),delete s.ref;for(const p of pH)p in d&&(s[p]=d[p])}return s||o});return{...e,layers:r}}var GT={};const qT={version:8,sources:{},layers:[]},ZT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Q_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},KT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},fH=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],mH=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Id{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const d=this.props[KT[s.type]];d?d(s):s.type==="error"&&console.error(s.error)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const d=this.props[ZT[s.type]];d&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),d(s),delete s.features)},this._onCameraEvent=s=>{if(!this._internalUpdate){const d=this.props[Q_[s.type]];d&&d(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const s=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||s||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=Id.savedMaps.pop();if(!o)return null;const s=o.map,d=s.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);s._container=r;const p=s._resizeObserver;p&&(p.disconnect(),p.observe(r)),o.setProps({...t,styleDiffing:!1}),s.resize();const{initialViewState:c}=t;return c&&(c.bounds?s.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):o._updateViewState(c,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),s._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=qT}=r,s={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||gH()||null,container:t,style:WT(o)},d=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),r.gl){const T=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=T,r.gl)}const p=new this._MapClass(s);d.padding&&p.setPadding(d.padding),r.cursor&&(p.getCanvas().style.cursor=r.cursor),this._createShadowTransform(p);const c=p._render;p._render=T=>{this._inRender=!0,c.call(p,T),this._inRender=!1};const b=p._renderTaskQueue.run;p._renderTaskQueue.run=T=>{b.call(p._renderTaskQueue,T),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const w=p.fire;p.fire=this._fireEvent.bind(this,w),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),VT(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const T in ZT)p.on(T,this._onPointerEvent);for(const T in Q_)p.on(T,this._onCameraEvent);for(const T in KT)p.on(T,this._onEvent);this._map=p}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Id.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=hH(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,s=this._renderTransform,{zoom:d,pitch:p,bearing:c}=s,b=o.isMoving();b&&(s.cameraElevationReference="sea");const w=HT(s,{...UT(o.transform),...t});if(b&&(s.cameraElevationReference="ground"),w&&r){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=d!==s.zoom),T.rotate||(T.rotate=c!==s.bearing),T.pitch||(T.pitch=p!==s.pitch)}return b||HT(o.transform,t),w}_updateSettings(t,r){const o=this._map;let s=!1;for(const d of fH)if(d in t&&!Fo(t[d],r[d])){s=!0;const p=o[`set${d[0].toUpperCase()}${d.slice(1)}`];p==null||p.call(o,t[d])}return s}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=qT,styleDiffing:s=!0}=t,d={diff:s};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(WT(o),d),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let s=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!Fo(t.light,r.light)&&(s=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!Fo(t.fog,r.fog)&&(s=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!Fo(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(s=!0,o.setTerrain(t.terrain))),s}_updateHandlers(t,r){var o,s;const d=this._map;let p=!1;for(const c of mH){const b=(o=t[c])!==null&&o!==void 0?o:!0,w=(s=r[c])!==null&&s!==void 0?s:!0;Fo(b,w)||(p=!0,b?d[c].enable(b):d[c].disable())}return p}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:s=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:s.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const d=t.type,p=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,c=this._queryRenderedFeatures(t.point),b=c.length>0;!b&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,b&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,o){const s=this._map,d=s.transform,p=typeof r=="string"?r:r.type;return p==="move"&&this._updateViewState(this.props,!1),p in Q_&&(typeof r=="object"&&(r.viewState=UT(d)),this._map.isMoving())?(s.transform=this._renderTransform,t.call(s,r,o),s.transform=d,s):(t.call(s,r,o),s)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{VT(this._renderTransform,r),t.transform=r}}}Id.savedMaps=[];function gH(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||GT.MapboxAccessToken}catch{}try{e=e||GT.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const yH=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function vH(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const s=t.transform;t.transform=e.transform;const d=t.project(o);return t.transform=s,d},unproject:o=>{const s=t.transform;t.transform=e.transform;const d=t.unproject(o);return t.transform=s,d},queryTerrainElevation:(o,s)=>{const d=t.transform;t.transform=e.transform;const p=t.queryTerrainElevation(o,s);return t.transform=d,p},queryRenderedFeatures:(o,s)=>{const d=t.transform;t.transform=e.transform;const p=t.queryRenderedFeatures(o,s);return t.transform=d,p}};for(const o of _H(t))!(o in r)&&!yH.includes(o)&&(r[o]=t[o].bind(t));return r}function _H(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const xH=typeof document<"u"?L.useLayoutEffect:L.useEffect,bH=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function wH(e,t){for(const o of bH)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const Oc=L.createContext(null);function SH(e,t,r){const o=L.useContext(sM),[s,d]=L.useState(null),p=L.useRef(),{current:c}=L.useRef({mapLib:null,map:null});L.useEffect(()=>{const T=e.mapLib;let k=!0,A;return Promise.resolve(T||r).then($=>{if(!k)return;if(!$)throw new Error("Invalid mapLib");const V="Map"in $?$:$.default;if(!V.Map)throw new Error("Invalid mapLib");if(wH(V,e),!V.supported||V.supported(e))e.reuseMaps&&(A=Id.reuse(e,p.current)),A||(A=new Id(V.Map,e,p.current)),c.map=vH(A),c.mapLib=V,d(A),o==null||o.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch($=>{const{onError:V}=e;V?V({type:"error",target:null,originalEvent:null,error:$}):console.error($)}),()=>{k=!1,A&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?A.recycle():A.destroy())}},[]),xH(()=>{s&&s.setProps(e)}),L.useImperativeHandle(t,()=>c.map,[s]);const b=L.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return L.createElement("div",{id:e.id,ref:p,style:b},s&&L.createElement(Oc.Provider,{value:c},L.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const CH=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Bc(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const s=t[o];Number.isFinite(s)&&!CH.test(o)?r[o]=`${s}px`:r[o]=s}}function IH(e,t){const{map:r,mapLib:o}=L.useContext(Oc),s=L.useRef({props:e});s.current.props=e;const d=L.useMemo(()=>{let N=!1;L.Children.forEach(e.children,R=>{R&&(N=!0)});const G={...e,element:N?document.createElement("div"):null},O=new o.Marker(G);return O.setLngLat([e.longitude,e.latitude]),O.getElement().addEventListener("click",R=>{var M,ee;(ee=(M=s.current.props).onClick)===null||ee===void 0||ee.call(M,{type:"click",target:O,originalEvent:R})}),O.on("dragstart",R=>{var M,ee;const Z=R;Z.lngLat=d.getLngLat(),(ee=(M=s.current.props).onDragStart)===null||ee===void 0||ee.call(M,Z)}),O.on("drag",R=>{var M,ee;const Z=R;Z.lngLat=d.getLngLat(),(ee=(M=s.current.props).onDrag)===null||ee===void 0||ee.call(M,Z)}),O.on("dragend",R=>{var M,ee;const Z=R;Z.lngLat=d.getLngLat(),(ee=(M=s.current.props).onDragEnd)===null||ee===void 0||ee.call(M,Z)}),O},[]);L.useEffect(()=>(d.addTo(r.getMap()),()=>{d.remove()}),[]);const{longitude:p,latitude:c,offset:b,style:w,draggable:T=!1,popup:k=null,rotation:A=0,rotationAlignment:$="auto",pitchAlignment:V="auto"}=e;return L.useEffect(()=>{Bc(d.getElement(),w)},[w]),L.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==p||d.getLngLat().lat!==c)&&d.setLngLat([p,c]),b&&!dH(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==T&&d.setDraggable(T),d.getRotation()!==A&&d.setRotation(A),d.getRotationAlignment()!==$&&d.setRotationAlignment($),d.getPitchAlignment()!==V&&d.setPitchAlignment(V),d.getPopup()!==k&&d.setPopup(k),Dd.createPortal(e.children,d.getElement())}const TH=L.memo(L.forwardRef(IH));function XT(e){return new Set(e?e.trim().split(/\s+/):[])}function PH(e,t){const{map:r,mapLib:o}=L.useContext(Oc),s=L.useMemo(()=>document.createElement("div"),[]),d=L.useRef({props:e});d.current.props=e;const p=L.useMemo(()=>{const c={...e},b=new o.Popup(c);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var T,k;(k=(T=d.current.props).onOpen)===null||k===void 0||k.call(T,w)}),b},[]);if(L.useEffect(()=>{const c=b=>{var w,T;(T=(w=d.current.props).onClose)===null||T===void 0||T.call(w,b)};return p.on("close",c),p.setDOMContent(s).addTo(r.getMap()),()=>{p.off("close",c),p.isOpen()&&p.remove()}},[]),L.useEffect(()=>{Bc(p.getElement(),e.style)},[e.style]),L.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!Fo(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const c=XT(p.options.className),b=XT(e.className);for(const w of c)b.has(w)||p.removeClassName(w);for(const w of b)c.has(w)||p.addClassName(w);p.options.className=e.className}return Dd.createPortal(e.children,s)}L.memo(L.forwardRef(PH));function Ws(e,t,r,o){const s=L.useContext(Oc),d=L.useMemo(()=>e(s),[]);return L.useEffect(()=>{const p=t,c=typeof t=="function"&&typeof r=="function"?t:null,b=typeof t=="function"?t:null,{map:w}=s;return w.hasControl(d)||(w.addControl(d,p==null?void 0:p.position),c&&c(s)),()=>{b&&b(s),w.hasControl(d)&&w.removeControl(d)}},[]),d}function kH(e){const t=Ws(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return L.useEffect(()=>{Bc(t._container,e.style)},[e.style]),null}const EH=L.memo(kH);function AH(e){const t=Ws(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return L.useEffect(()=>{Bc(t._controlContainer,e.style)},[e.style]),null}const zH=L.memo(AH);function RH(e,t){const r=L.useRef({props:e}),o=Ws(({mapLib:s})=>{const d=new s.GeolocateControl(e),p=d._setupUI;return d._setupUI=c=>{d._container.hasChildNodes()||p(c)},d.on("geolocate",c=>{var b,w;(w=(b=r.current.props).onGeolocate)===null||w===void 0||w.call(b,c)}),d.on("error",c=>{var b,w;(w=(b=r.current.props).onError)===null||w===void 0||w.call(b,c)}),d.on("outofmaxbounds",c=>{var b,w;(w=(b=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,c)}),d.on("trackuserlocationstart",c=>{var b,w;(w=(b=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,c)}),d.on("trackuserlocationend",c=>{var b,w;(w=(b=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,c)}),d},{position:e.position});return r.current.props=e,L.useImperativeHandle(t,()=>o,[]),L.useEffect(()=>{Bc(o._container,e.style)},[e.style]),null}L.memo(L.forwardRef(RH));function MH(e){const t=Ws(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return L.useEffect(()=>{Bc(t._container,e.style)},[e.style]),null}const DH=L.memo(MH);function LH(e){const t=Ws(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),r=L.useRef(e),o=r.current;r.current=e;const{style:s}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),L.useEffect(()=>{Bc(t._container,s)},[s]),null}L.memo(LH);function Dy(e,t){if(!e)throw new Error(t)}function $H(e,t,r,o){if(Dy(r.id===o.id,"layer id changed"),Dy(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:s={},paint:d={},filter:p,minzoom:c,maxzoom:b,beforeId:w}=r;if(w!==o.beforeId&&e.moveLayer(t,w),s!==o.layout){const T=o.layout||{};for(const k in s)Fo(s[k],T[k])||e.setLayoutProperty(t,k,s[k]);for(const k in T)s.hasOwnProperty(k)||e.setLayoutProperty(t,k,void 0)}if(d!==o.paint){const T=o.paint||{};for(const k in d)Fo(d[k],T[k])||e.setPaintProperty(t,k,d[k]);for(const k in T)d.hasOwnProperty(k)||e.setPaintProperty(t,k,void 0)}Fo(p,o.filter)||e.setFilter(t,p),(c!==o.minzoom||b!==o.maxzoom)&&e.setLayerZoomRange(t,c,b)}function OH(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let BH=0;function FH(e){const t=L.useContext(Oc).map.getMap(),r=L.useRef(e),[,o]=L.useState(0),s=L.useMemo(()=>e.id||`jsx-layer-${BH++}`,[]);if(L.useEffect(()=>{if(t){const p=()=>o(c=>c+1);return t.on("styledata",p),p(),()=>{t.off("styledata",p),t.style&&t.style._loaded&&t.getLayer(s)&&t.removeLayer(s)}}},[t]),t&&t.style&&t.getLayer(s))try{$H(t,s,e,r.current)}catch(p){console.warn(p)}else OH(t,s,e);return r.current=e,null}let NH=0;function jH(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function VH(e,t,r){Dy(t.id===r.id,"source id changed"),Dy(t.type===r.type,"source type changed");let o="",s=0;for(const p in t)p!=="children"&&p!=="id"&&!Fo(r[p],t[p])&&(o=p,s++);if(!s)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&s===1&&o==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(o){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${o}`)}function UH(e){const t=L.useContext(Oc).map.getMap(),r=L.useRef(e),[,o]=L.useState(0),s=L.useMemo(()=>e.id||`jsx-source-${NH++}`,[]);L.useEffect(()=>{if(t){const p=()=>setTimeout(()=>o(c=>c+1),0);return t.on("styledata",p),p(),()=>{var c;if(t.off("styledata",p),t.style&&t.style._loaded&&t.getSource(s)){const b=(c=t.getStyle())===null||c===void 0?void 0:c.layers;if(b)for(const w of b)w.source===s&&t.removeLayer(w.id);t.removeSource(s)}}}},[t]);let d=t&&t.style&&t.getSource(s);return d?VH(d,e,r.current):d=jH(t,s,e),r.current=e,d&&L.Children.map(e.children,p=>p&&L.cloneElement(p,{source:s}))||null}function cS(){return uH()}const HH=cH(()=>Promise.resolve().then(()=>XH),void 0),lM=L.forwardRef(function(t,r){return SH(t,r,HH)}),WH=TH,cM=EH,uM=zH,dM=DH,Kr=FH,Fd=UH,GH={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},qH={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},ZH={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},KH={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},uS={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:GH,secondaryTextPaint:qH,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:ZH,secondaryTextPaint:KH,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var hM={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(Xx,function(){var r,o,s;function d(c,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),s=b(T),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(c){function b(a,n,l,h){return new(l||(l=Promise))(function(m,v){function x(z){try{P(h.next(z))}catch(B){v(B)}}function S(z){try{P(h.throw(z))}catch(B){v(B)}}function P(z){var B;z.done?m(z.value):(B=z.value,B instanceof l?B:new l(function(U){U(B)})).then(x,S)}P((h=h.apply(a,n||[])).next())})}function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var T=k;function k(a,n){this.x=a,this.y=n}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,l=a.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),l=Math.sin(a),h=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=h,this},_rotateAround:function(a,n){var l=Math.cos(a),h=Math.sin(a),m=n.y+h*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(a){return a instanceof k?a:Array.isArray(a)?new k(a[0],a[1]):a};var A=w(T),$=V;function V(a,n,l,h){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=l,this.p2y=h}V.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,h=0;h<8;h++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<n)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var x=0,S=1;for(l=a,h=0;h<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<n));h++)a>m?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var N=w($);let G,O;function R(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function M(){if(O==null&&(O=!1,R())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const m=4*h;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const l=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){O=!0;break}}}return O||!1}function ee(a,n,l,h){const m=new N(a,n,l,h);return function(v){return m.solve(v)}}const Z=ee(.25,.1,.25,1);function oe(a,n,l){return Math.min(l,Math.max(n,a))}function ie(a,n,l){const h=l-n,m=((a-n)%h+h)%h+n;return m===n?l:m}function W(a,...n){for(const l of n)for(const h in l)a[h]=l[h];return a}let Ie=1;function _e(a,n,l){const h={};for(const m in a)h[m]=n.call(l||this,a[m],m,a);return h}function Te(a,n,l){const h={};for(const m in a)n.call(l||this,a[m],m,a)&&(h[m]=a[m]);return h}function Ae(a){return Array.isArray(a)?a.map(Ae):typeof a=="object"&&a?_e(a,Ae):a}const $e={};function et(a){$e[a]||(typeof console<"u"&&console.warn(a),$e[a]=!0)}function Ve(a,n,l){return(l.y-a.y)*(n.x-a.x)>(n.y-a.y)*(l.x-a.x)}function ke(a){let n=0;for(let l,h,m=0,v=a.length,x=v-1;m<v;x=m++)l=a[m],h=a[x],n+=(h.x-l.x)*(l.y+h.y);return n}function Ne(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Oe=null;function Fe(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function lt(a,n,l,h,m){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),P=new Uint8ClampedArray(h*m*4);if(yield v.copyTo(P,function(z,B,U,X,Q){const re=4*Math.max(-B,0),le=(Math.max(0,U)-U)*X*4+re,me=4*X,ve=Math.max(0,B),De=Math.max(0,U);return{rect:{x:ve,y:De,width:Math.min(z.width,B+X)-ve,height:Math.min(z.height,U+Q)-De},layout:[{offset:le,stride:me}]}}(a,n,l,h,m)),S)for(let z=0;z<P.length;z+=4){const B=P[z];P[z]=P[z+2],P[z+2]=B}return P}finally{v.close()}})}let ut,Dt,St,$t;const Yt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,l.drawImage(a,0,0,a.width,a.height),l},resolveURL:a=>(St||(St=document.createElement("a")),St.href=a,St.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&($t==null&&($t=matchMedia("(prefers-reduced-motion: reduce)")),$t.matches)}},ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Je extends Error{constructor(n,l,h,m){super(`AJAXError: ${l} (${n}): ${h}`),this.status=n,this.statusText=l,this.url=h,this.body=m}}const ft=Ne()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,_t=a=>ct.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function sr(a,n){const l=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:ft(),signal:l.signal});let m=!1,v=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(P=>{v||(m=!0,n(null,P,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(x):x.blob().then(S=>n(new Je(x.status,x.statusText,a.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,m||l.abort()}}}const Qt=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Ne())return(_t(a.url)||sr)(a,n)}if(!(/^file:/.test(l=a.url)||/^file:/.test(ft())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return sr(a,n);if(Ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var l;return function(h,m){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return m(S)}m(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new Je(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(a,n)},Pr=function(a,n){return Qt(W(a,{type:"arrayBuffer"}),n)};function hr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function Ht(a,n,l){l[a]&&l[a].indexOf(n)!==-1||(l[a]=l[a]||[],l[a].push(n))}function Ct(a,n,l){if(l&&l[a]){const h=l[a].indexOf(n);h!==-1&&l[a].splice(h,1)}}class ur{constructor(n,l={}){W(this,l),this.type=n}}class Ot extends ur{constructor(n,l={}){super("error",W({error:n},l))}}class Cr{on(n,l){return this._listeners=this._listeners||{},Ht(n,l,this._listeners),this}off(n,l){return Ct(n,l,this._listeners),Ct(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Ht(n,l,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,l){typeof n=="string"&&(n=new ur(n,l||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)Ct(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(W(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Ot&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const br=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function zr(a,n){const l={};for(const h in a)h!=="ref"&&(l[h]=a[h]);return br.forEach(h=>{h in n&&(l[h]=n[h])}),l}function Kt(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let l=0;l<a.length;l++)if(!Kt(a[l],n[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const l in a)if(!Kt(a[l],n[l]))return!1;return!0}return a===n}const rr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Or(a,n,l){l.push({command:rr.addSource,args:[a,n[a]]})}function Rr(a,n,l){n.push({command:rr.removeSource,args:[a]}),l[a]=!0}function fr(a,n,l,h){Rr(a,l,h),Or(a,n,l)}function dr(a,n,l){let h;for(h in a[l])if(Object.prototype.hasOwnProperty.call(a[l],h)&&h!=="data"&&!Kt(a[l][h],n[l][h]))return!1;for(h in n[l])if(Object.prototype.hasOwnProperty.call(n[l],h)&&h!=="data"&&!Kt(a[l][h],n[l][h]))return!1;return!0}function Gt(a,n,l,h,m,v){let x;for(x in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,x)&&(Kt(a[x],n[x])||l.push({command:v,args:[h,x,n[x],m]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(Kt(a[x],n[x])||l.push({command:v,args:[h,x,n[x],m]}))}function cr(a){return a.id}function Ir(a,n){return a[n.id]=n,a}class Be{constructor(n,l,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function xt(a,...n){for(const l of n)for(const h in l)a[h]=l[h];return a}class bt extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class Ce{constructor(n,l=[]){this.parent=n,this.bindings={};for(const[h,m]of l)this.bindings[h]=m}concat(n){return new Ce(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const He={kind:"null"},Ye={kind:"number"},It={kind:"string"},gt={kind:"boolean"},Et={kind:"color"},pr={kind:"object"},Lt={kind:"value"},mr={kind:"collator"},ce={kind:"formatted"},H={kind:"padding"},q={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function he(a,n){return{kind:"array",itemType:a,N:n}}function fe(a){if(a.kind==="array"){const n=fe(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const Re=[He,Ye,It,gt,Et,ce,pr,he(Lt),H,q,te];function be(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!be(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const l of Re)if(!be(l,n))return null}}return`Expected ${fe(a)} but found ${fe(n)} instead.`}function ge(a,n){return n.some(l=>l.kind===a.kind)}function Ee(a,n){return n.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function tt(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const ne=.96422,ae=.82521,Pe=4/29,Ue=6/29,Qe=3*Ue*Ue,it=Ue*Ue*Ue,Se=Math.PI/180,xe=180/Math.PI;function Ke(a){return(a%=360)<0&&(a+=360),a}function Xe([a,n,l,h]){let m,v;const x=jt((.2225045*(a=rt(a))+.7168786*(n=rt(n))+.0606169*(l=rt(l)))/1);a===n&&n===l?m=v=x:(m=jt((.4360747*a+.3850649*n+.1430804*l)/ne),v=jt((.0139322*a+.0971045*n+.7141733*l)/ae));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-v),h]}function rt(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function jt(a){return a>it?Math.pow(a,1/3):a/Qe+Pe}function zt([a,n,l,h]){let m=(a+16)/116,v=isNaN(n)?m:m+n/500,x=isNaN(l)?m:m-l/200;return m=1*lr(m),v=ne*lr(v),x=ae*lr(x),[nr(3.1338561*v-1.6168667*m-.4906146*x),nr(-.9787684*v+1.9161415*m+.033454*x),nr(.0719453*v-.2289914*m+1.4052427*x),h]}function nr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function lr(a){return a>Ue?a*a*a:Qe*(a-Pe)}function Hr(a){return parseInt(a.padEnd(2,a),16)/255}function gn(a,n){return Oi(n?a/100:a,0,1)}function Oi(a,n,l){return Math.min(Math.max(n,a),l)}function Hn(a){return!a.some(Number.isNaN)}const Ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class vr{constructor(n,l,h,m=1,v=!0){this.r=n,this.g=l,this.b=h,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,l,h,m]))}static parse(n){if(n instanceof vr)return n;if(typeof n!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Ko[h];if(m){const[x,S,P]=m;return[x/255,S/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Hr(h.slice(S,S+=x)),Hr(h.slice(S,S+=x)),Hr(h.slice(S,S+=x)),Hr(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,P,z,B,U,X,Q,re,le,me,ve,De]=x,we=[B||" ",Q||" ",me].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Le=[z,X,le].join(""),Ge=Le==="%%%"?100:Le===""?255:0;if(Ge){const at=[Oi(+P/Ge,0,1),Oi(+U/Ge,0,1),Oi(+re/Ge,0,1),ve?gn(+ve,De):1];if(Hn(at))return at}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,P,z,B,U,X,Q,re]=v,le=[P||" ",B||" ",X].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const me=[+S,Oi(+z,0,100),Oi(+U,0,100),Q?gn(+Q,re):1];if(Hn(me))return function([ve,De,we,Le]){function Ge(at){const Mt=(at+ve/30)%12,Ut=De*Math.min(we,1-we);return we-Ut*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return ve=Ke(ve),De/=100,we/=100,[Ge(0),Ge(8),Ge(4),Le]}(me)}}}(n);return l?new vr(...l,!1):void 0}get rgb(){const{r:n,g:l,b:h,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,l/v,h/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[l,h,m,v]=Xe(n),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?Ke(Math.atan2(m,h)*xe):NaN,x,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Xe(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){const[n,l,h,m]=this.rgb;return`rgba(${[n,l,h].map(v=>Math.round(255*v)).join(",")},${m})`}}vr.black=new vr(0,0,0,1),vr.white=new vr(1,1,1,1),vr.transparent=new vr(0,0,0,0),vr.red=new vr(1,0,0,1);class Ao{constructor(n,l,h){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ir{constructor(n,l,h,m,v){this.text=n,this.image=l,this.scale=h,this.fontStack=m,this.textColor=v}}class jr{constructor(n){this.sections=n}static fromString(n){return new jr([new ir(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof jr?n:jr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Mr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Mr)return n;if(typeof n=="number")return new Mr([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Mr(n)}}toString(){return JSON.stringify(this.values)}}const ri=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class er{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof er)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){const h=n[l],m=n[l+1];if(typeof h!="string"||!ri.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new er(n)}}toString(){return JSON.stringify(this.values)}}class yr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new yr({name:n,available:!1}):null}}function rn(a,n,l,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,l,h]:[a,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function kr(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof vr||a instanceof Ao||a instanceof jr||a instanceof Mr||a instanceof er||a instanceof yr)return!0;if(Array.isArray(a)){for(const n of a)if(!kr(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!kr(a[n]))return!1;return!0}return!1}function Vr(a){if(a===null)return He;if(typeof a=="string")return It;if(typeof a=="boolean")return gt;if(typeof a=="number")return Ye;if(a instanceof vr)return Et;if(a instanceof Ao)return mr;if(a instanceof jr)return ce;if(a instanceof Mr)return H;if(a instanceof er)return te;if(a instanceof yr)return q;if(Array.isArray(a)){const n=a.length;let l;for(const h of a){const m=Vr(h);if(l){if(l===m)continue;l=Lt;break}l=m}return he(l||Lt,n)}return pr}function $r(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof vr||a instanceof jr||a instanceof Mr||a instanceof er||a instanceof yr?a.toString():JSON.stringify(a)}class _a{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!kr(n[1]))return l.error("invalid value");const h=n[1];let m=Vr(h);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new _a(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class bn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const jc={string:It,number:Ye,boolean:gt,object:pr};class fo{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h,m=1;const v=n[0];if(v==="array"){let S,P;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in jc)||z==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=jc[z],m++}else S=Lt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=n[2],m++}h=he(S,P)}else{if(!jc[v])throw new Error(`Types doesn't contain name = ${v}`);h=jc[v]}const x=[];for(;m<n.length;m++){const S=l.parse(n[m],m,Lt);if(!S)return null;x.push(S)}return new fo(h,x)}evaluate(n){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(n);if(!be(this.type,Vr(h)))return h;if(l===this.args.length-1)throw new bn(`Expected value to be of type ${fe(this.type)}, but found ${fe(Vr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Vd={"to-boolean":gt,"to-color":Et,"to-number":Ye,"to-string":It};class Ua{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const h=n[0];if(!Vd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return l.error("Expected one argument.");const m=Vd[h],v=[];for(let x=1;x<n.length;x++){const S=l.parse(n[x],x,Lt);if(!S)return null;v.push(S)}return new Ua(m,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,h;for(const m of this.args){if(l=m.evaluate(n),h=null,l instanceof vr)return l;if(typeof l=="string"){const v=n.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:rn(l[0],l[1],l[2],l[3]),!h))return new vr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new bn(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(n);const m=Mr.parse(l);if(m)return m}throw new bn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(n);const m=er.parse(l);if(m)return m}throw new bn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(n),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new bn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return jr.fromString($r(this.args[0].evaluate(n)));case"resolvedImage":return yr.fromString($r(this.args[0].evaluate(n)));default:return $r(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Nf=["Unknown","Point","LineString","Polygon"];class Ud{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Nf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=vr.parse(n)),l}}class Vc{constructor(n,l,h=[],m,v=new Ce,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=l}parse(n,l,h,m,v={}){return l?this.concat(l,h,m)._parse(n,v):this._parse(n,v)}_parse(n,l){function h(m,v,x){return x==="assert"?new fo(v,[m]):x==="coerce"?new Ua(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,P=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else x=h(x,S,l.typeAnnotation||"coerce");else x=h(x,S,l.typeAnnotation||"coerce");else x=h(x,S,l.typeAnnotation||"coerce");else x=h(x,S,l.typeAnnotation||"assert")}if(!(x instanceof _a)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Ud;try{x=new _a(x.type,x.evaluate(S))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,l,h){const m=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Vc(this.registry,this._isConstant,m,l||null,v,this.errors)}error(n,...l){const h=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new bt(h,n))}checkSubtype(n,l){const h=be(n,l);return h&&this.error(h),h}}class Uc{constructor(n,l,h){this.type=mr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const m=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,gt);if(!m)return null;const v=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,gt);if(!v)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,It),!x)?null:new Uc(m,v,x)}evaluate(n){return new Ao(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Ha=8192;function Hd(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Ul(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function jf(a,n){const l=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(l*m*Ha),Math.round(h*m*Ha)]}function l0(a,n,l){const h=a[0]-n[0],m=a[1]-n[1],v=a[0]-l[0],x=a[1]-l[1];return h*x-v*m==0&&h*v<=0&&m*x<=0}function Wd(a,n){let l=!1;for(let x=0,S=n.length;x<S;x++){const P=n[x];for(let z=0,B=P.length;z<B-1;z++){if(l0(a,P[z],P[z+1]))return!1;(m=P[z])[1]>(h=a)[1]!=(v=P[z+1])[1]>h[1]&&h[0]<(v[0]-m[0])*(h[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}}var h,m,v;return l}function Gd(a,n){for(let l=0;l<n.length;l++)if(Wd(a,n[l]))return!0;return!1}function Vf(a,n,l,h){const m=h[0]-l[0],v=h[1]-l[1],x=(a[0]-l[0])*v-m*(a[1]-l[1]),S=(n[0]-l[0])*v-m*(n[1]-l[1]);return x>0&&S<0||x<0&&S>0}function c0(a,n,l){for(const z of l)for(let B=0;B<z.length-1;++B)if((S=[(x=z[B+1])[0]-(v=z[B])[0],x[1]-v[1]])[0]*(P=[(m=n)[0]-(h=a)[0],m[1]-h[1]])[1]-S[1]*P[0]!=0&&Vf(h,m,v,x)&&Vf(v,x,h,m))return!0;var h,m,v,x,S,P;return!1}function Uf(a,n){for(let l=0;l<a.length;++l)if(!Wd(a[l],n))return!1;for(let l=0;l<a.length-1;++l)if(c0(a[l],a[l+1],n))return!1;return!0}function Hf(a,n){for(let l=0;l<n.length;l++)if(Uf(a,n[l]))return!0;return!1}function Hc(a,n,l){const h=[];for(let m=0;m<a.length;m++){const v=[];for(let x=0;x<a[m].length;x++){const S=jf(a[m][x],l);Hd(n,S),v.push(S)}h.push(v)}return h}function Wf(a,n,l){const h=[];for(let m=0;m<a.length;m++){const v=Hc(a[m],n,l);h.push(v)}return h}function Gf(a,n,l,h){if(a[0]<l[0]||a[0]>l[2]){const m=.5*h;let v=a[0]-l[0]>m?-h:l[0]-a[0]>m?h:0;v===0&&(v=a[0]-l[2]>m?-h:l[2]-a[0]>m?h:0),a[0]+=v}Hd(n,a)}function qd(a,n,l,h){const m=Math.pow(2,h.z)*Ha,v=[h.x*Ha,h.y*Ha],x=[];for(const S of a)for(const P of S){const z=[P.x+v[0],P.y+v[1]];Gf(z,n,l,m),x.push(z)}return x}function Zd(a,n,l,h){const m=Math.pow(2,h.z)*Ha,v=[h.x*Ha,h.y*Ha],x=[];for(const P of a){const z=[];for(const B of P){const U=[B.x+v[0],B.y+v[1]];Hd(n,U),z.push(U)}x.push(z)}if(n[2]-n[0]<=m/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of x)for(const z of P)Gf(z,n,l,m)}var S;return x}class ps{constructor(n,l){this.type=gt,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(kr(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const v=h.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ps(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ps(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ps(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const S=Hc(h.coordinates,v,x),P=qd(l.geometry(),m,v,x);if(!Ul(m,v))return!1;for(const z of P)if(!Wd(z,S))return!1}if(h.type==="MultiPolygon"){const S=Wf(h.coordinates,v,x),P=qd(l.geometry(),m,v,x);if(!Ul(m,v))return!1;for(const z of P)if(!Gd(z,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(h.type==="Polygon"){const S=Hc(h.coordinates,v,x),P=Zd(l.geometry(),m,v,x);if(!Ul(m,v))return!1;for(const z of P)if(!Uf(z,S))return!1}if(h.type==="MultiPolygon"){const S=Wf(h.coordinates,v,x),P=Zd(l.geometry(),m,v,x);if(!Ul(m,v))return!1;for(const z of P)if(!Hf(z,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Wc{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=n[1];return l.scope.has(h)?new Wc(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class mo{constructor(n,l,h,m){this.name=n,this.type=l,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){const h=n[0],m=mo.definitions[h];if(!m)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([z])=>!Array.isArray(z)||z.length===n.length-1);let P=null;for(const[z,B]of S){P=new Vc(l.registry,Gc,l.path,null,l.scope);const U=[];let X=!1;for(let Q=1;Q<n.length;Q++){const re=n[Q],le=Array.isArray(z)?z[Q-1]:z.type,me=P.parse(re,1+U.length,le);if(!me){X=!0;break}U.push(me)}if(!X)if(Array.isArray(z)&&z.length!==U.length)P.error(`Expected ${z.length} arguments, but found ${U.length} instead.`);else{for(let Q=0;Q<U.length;Q++){const re=Array.isArray(z)?z[Q]:z.type,le=U[Q];P.concat(Q+1).checkSubtype(re,le.type)}if(P.errors.length===0)return new mo(h,v,B,U)}}if(S.length===1)l.errors.push(...P.errors);else{const z=(S.length?S:x).map(([U])=>{return X=U,Array.isArray(X)?`(${X.map(fe).join(", ")})`:`(${fe(X.type)}...)`;var X}).join(" | "),B=[];for(let U=1;U<n.length;U++){const X=l.parse(n[U],1+B.length);if(!X)return null;B.push(fe(X.type))}l.error(`Expected arguments of type ${z}, but found (${B.join(", ")}) instead.`)}return null}static register(n,l){mo.definitions=l;for(const h in l)n[h]=mo}}function Gc(a){if(a instanceof Wc)return Gc(a.boundExpression);if(a instanceof mo&&a.name==="error"||a instanceof Uc||a instanceof ps)return!1;const n=a instanceof Ua||a instanceof fo;let l=!0;return a.eachChild(h=>{l=n?l&&Gc(h):l&&h instanceof _a}),!!l&&qc(a)&&Zc(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function qc(a){if(a instanceof mo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ps)return!1;let n=!0;return a.eachChild(l=>{n&&!qc(l)&&(n=!1)}),n}function Hl(a){if(a instanceof mo&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(l=>{n&&!Hl(l)&&(n=!1)}),n}function Zc(a,n){if(a instanceof mo&&n.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(h=>{l&&!Zc(h,n)&&(l=!1)}),l}function qs(a,n){const l=a.length-1;let h,m,v=0,x=l,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=a[S],m=a[S+1],h<=n){if(S===l||n<m)return S;v=S+1}else{if(!(h>n))throw new bn("Input is not a number.");x=S-1}return 0}class Wa{constructor(n,l,h){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(n[1],1,Ye);if(!h)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],P=n[x+1],z=x,B=x+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const U=l.parse(P,B,v);if(!U)return null;v=v||U.type,m.push([S,U])}return new Wa(v,h,m)}evaluate(n){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return h[0].evaluate(n);const v=l.length;return m>=l[v-1]?h[v-1].evaluate(n):h[qs(l,m)].evaluate(n)}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Er(a,n,l){return a+l*(n-a)}function Kc(a,n,l){return a.map((h,m)=>Er(h,n[m],l))}const Qi={number:Er,color:function(a,n,l,h="rgb"){switch(h){case"rgb":{const[m,v,x,S]=Kc(a.rgb,n.rgb,l);return new vr(m,v,x,S,!1)}case"hcl":{const[m,v,x,S]=a.hcl,[P,z,B,U]=n.hcl;let X,Q;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?X=NaN:(X=P,x!==1&&x!==0||(Q=z)):(X=m,B!==1&&B!==0||(Q=v));else{let De=P-m;P>m&&De>180?De-=360:P<m&&m-P>180&&(De+=360),X=m+l*De}const[re,le,me,ve]=function([De,we,Le,Ge]){return De=isNaN(De)?0:De*Se,zt([Le,Math.cos(De)*we,Math.sin(De)*we,Ge])}([X,Q??Er(v,z,l),Er(x,B,l),Er(S,U,l)]);return new vr(re,le,me,ve,!1)}case"lab":{const[m,v,x,S]=zt(Kc(a.lab,n.lab,l));return new vr(m,v,x,S,!1)}}},array:Kc,padding:function(a,n,l){return new Mr(Kc(a.values,n.values,l))},variableAnchorOffsetCollection:function(a,n,l){const h=a.values,m=n.values;if(h.length!==m.length)throw new bn(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new bn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);v.push(h[x]);const[S,P]=h[x+1],[z,B]=m[x+1];v.push([Er(S,z,l),Er(P,B,l)])}return new er(v)}};class eo{constructor(n,l,h,m,v){this.type=n,this.operator=l,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,l,h,m){let v=0;if(n.name==="exponential")v=Kd(l,n.base,h,m);else if(n.name==="linear")v=Kd(l,1,h,m);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new N(x[0],x[1],x[2],x[3]).solve(Kd(l,1,h,m))}return v}static parse(n,l){let[h,m,v,...x]=n;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const z=m[1];if(typeof z!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:z}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const z=m.slice(1);if(z.length!==4||z.some(B=>typeof B!="number"||B<0||B>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,Ye),!v)return null;const S=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=Et:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let z=0;z<x.length;z+=2){const B=x[z],U=x[z+1],X=z+3,Q=z+4;if(typeof B!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(S.length&&S[S.length-1][0]>=B)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const re=l.parse(U,Q,P);if(!re)return null;P=P||re.type,S.push([B,re])}return tt(P,Ye)||tt(P,Et)||tt(P,H)||tt(P,te)||tt(P,he(Ye))?new eo(P,h,m,v,S):l.error(`Type ${fe(P)} is not interpolatable.`)}evaluate(n){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return h[0].evaluate(n);const v=l.length;if(m>=l[v-1])return h[v-1].evaluate(n);const x=qs(l,m),S=eo.interpolationFactor(this.interpolation,m,l[x],l[x+1]),P=h[x].evaluate(n),z=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Qi[this.type.kind](P,z,S);case"interpolate-hcl":return Qi.color(P,z,S,"hcl");case"interpolate-lab":return Qi.color(P,z,S,"lab")}}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Kd(a,n,l,h){const m=h-l,v=a-l;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class Xc{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let h=null;const m=l.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const S of n.slice(1)){const P=l.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=m&&v.some(S=>be(m,S.type));return new Xc(x?Lt:h,v)}evaluate(n){let l,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(n),h&&h instanceof yr&&!h.available&&(l||(l=h.name),h=null,m===this.args.length&&(h=l)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Jc{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=l.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const m=l.parse(n[n.length-1],n.length-1,l.expectedType,h);return m?new Jc(h,m):null}outputDefined(){return this.result.outputDefined()}}class Xd{constructor(n,l,h){this.type=n,this.index=l,this.input=h}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Ye),m=l.parse(n[2],2,he(l.expectedType||Lt));return h&&m?new Xd(m.type.itemType,h,m):null}evaluate(n){const l=this.index.evaluate(n),h=this.input.evaluate(n);if(l<0)throw new bn(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new bn(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new bn(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Jd{constructor(n,l){this.type=gt,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Lt),m=l.parse(n[2],2,Lt);return h&&m?ge(h.type,[gt,It,Ye,He,Lt])?new Jd(h,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`):null}evaluate(n){const l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ee(l,["boolean","string","number","null"]))throw new bn(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Vr(l))} instead.`);if(!Ee(h,["string","array"]))throw new bn(`Expected second argument to be of type array or string, but found ${fe(Vr(h))} instead.`);return h.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Yc{constructor(n,l,h){this.type=Ye,this.needle=n,this.haystack=l,this.fromIndex=h}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Lt),m=l.parse(n[2],2,Lt);if(!h||!m)return null;if(!ge(h.type,[gt,It,Ye,He,Lt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`);if(n.length===4){const v=l.parse(n[3],3,Ye);return v?new Yc(h,m,v):null}return new Yc(h,m)}evaluate(n){const l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ee(l,["boolean","string","number","null"]))throw new bn(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Vr(l))} instead.`);if(!Ee(h,["string","array"]))throw new bn(`Expected second argument to be of type array or string, but found ${fe(Vr(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(l,m)}return h.indexOf(l)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Yd{constructor(n,l,h,m,v,x){this.inputType=n,this.type=l,this.input=h,this.cases=m,this.outputs=v,this.otherwise=x}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let h,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},x=[];for(let z=2;z<n.length-1;z+=2){let B=n[z];const U=n[z+1];Array.isArray(B)||(B=[B]);const X=l.concat(z);if(B.length===0)return X.error("Expected at least one branch label.");for(const re of B){if(typeof re!="number"&&typeof re!="string")return X.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return X.error("Numeric branch labels must be integer values.");if(h){if(X.checkSubtype(h,Vr(re)))return null}else h=Vr(re);if(v[String(re)]!==void 0)return X.error("Branch labels must be unique.");v[String(re)]=x.length}const Q=l.parse(U,z,m);if(!Q)return null;m=m||Q.type,x.push(Q)}const S=l.parse(n[1],1,Lt);if(!S)return null;const P=l.parse(n[n.length-1],n.length-1,m);return P?S.type.kind!=="value"&&l.concat(1).checkSubtype(h,S.type)?null:new Yd(h,m,S,v,x,P):null}evaluate(n){const l=this.input.evaluate(n);return(Vr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Qd{constructor(n,l,h){this.type=n,this.branches=l,this.otherwise=h}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const m=[];for(let x=1;x<n.length-1;x+=2){const S=l.parse(n[x],x,gt);if(!S)return null;const P=l.parse(n[x+1],x+1,h);if(!P)return null;m.push([S,P]),h=h||P.type}const v=l.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new Qd(h,m,v)}evaluate(n){for(const[l,h]of this.branches)if(l.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[l,h]of this.branches)n(l),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Qc{constructor(n,l,h,m){this.type=n,this.input=l,this.beginIndex=h,this.endIndex=m}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Lt),m=l.parse(n[2],2,Ye);if(!h||!m)return null;if(!ge(h.type,[he(Lt),It,Lt]))return l.error(`Expected first argument to be of type array or string, but found ${fe(h.type)} instead`);if(n.length===4){const v=l.parse(n[3],3,Ye);return v?new Qc(h.type,h,m,v):null}return new Qc(h.type,h,m)}evaluate(n){const l=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ee(l,["string","array"]))throw new bn(`Expected first argument to be of type array or string, but found ${fe(Vr(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return l.slice(h,m)}return l.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function qf(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Zf(a,n,l,h){return h.compare(n,l)===0}function Zs(a,n,l){const h=a!=="=="&&a!=="!=";return class pM{constructor(v,x,S){this.type=gt,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let P=x.parse(v[1],1,Lt);if(!P)return null;if(!qf(S,P.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${fe(P.type)}'.`);let z=x.parse(v[2],2,Lt);if(!z)return null;if(!qf(S,z.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${fe(z.type)}'.`);if(P.type.kind!==z.type.kind&&P.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${fe(P.type)}' and '${fe(z.type)}'.`);h&&(P.type.kind==="value"&&z.type.kind!=="value"?P=new fo(z.type,[P]):P.type.kind!=="value"&&z.type.kind==="value"&&(z=new fo(P.type,[z])));let B=null;if(v.length===4){if(P.type.kind!=="string"&&z.type.kind!=="string"&&P.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(B=x.parse(v[3],3,mr),!B)return null}return new pM(P,z,B)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=Vr(x),z=Vr(S);if(P.kind!==z.kind||P.kind!=="string"&&P.kind!=="number")throw new bn(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=Vr(x),z=Vr(S);if(P.kind!=="string"||z.kind!=="string")return n(v,x,S)}return this.collator?l(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const u0=Zs("==",function(a,n,l){return n===l},Zf),d0=Zs("!=",function(a,n,l){return n!==l},function(a,n,l,h){return!Zf(0,n,l,h)}),h0=Zs("<",function(a,n,l){return n<l},function(a,n,l,h){return h.compare(n,l)<0}),p0=Zs(">",function(a,n,l){return n>l},function(a,n,l,h){return h.compare(n,l)>0}),f0=Zs("<=",function(a,n,l){return n<=l},function(a,n,l,h){return h.compare(n,l)<=0}),m0=Zs(">=",function(a,n,l){return n>=l},function(a,n,l,h){return h.compare(n,l)>=0});class eh{constructor(n,l,h,m,v){this.type=It,this.number=n,this.locale=l,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");const h=l.parse(n[1],1,Ye);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,It),!v))return null;let x=null;if(m.currency&&(x=l.parse(m.currency,1,It),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,Ye),!S))return null;let P=null;return m["max-fraction-digits"]&&(P=l.parse(m["max-fraction-digits"],1,Ye),!P)?null:new eh(h,v,x,S,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class eu{constructor(n){this.type=ce,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=l.parse(S["font-scale"],1,Ye),!P))return null;let z=null;if(S["text-font"]&&(z=l.parse(S["text-font"],1,he(It)),!z))return null;let B=null;if(S["text-color"]&&(B=l.parse(S["text-color"],1,Et),!B))return null;const U=m[m.length-1];U.scale=P,U.font=z,U.textColor=B}else{const P=l.parse(n[x],1,Lt);if(!P)return null;const z=P.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new eu(m)}evaluate(n){return new jr(this.sections.map(l=>{const h=l.content.evaluate(n);return Vr(h)===q?new ir("",h,null,null,null):new ir($r(h),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(const l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class th{constructor(n){this.type=q,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");const h=l.parse(n[1],1,It);return h?new th(h):l.error("No image name provided.")}evaluate(n){const l=this.input.evaluate(n),h=yr.fromString(l);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(l)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class rh{constructor(n){this.type=Ye,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=l.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${fe(h.type)} instead.`):new rh(h):null}evaluate(n){const l=this.input.evaluate(n);if(typeof l=="string"||Array.isArray(l))return l.length;throw new bn(`Expected value to be of type string or array, but found ${fe(Vr(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ks={"==":u0,"!=":d0,">":p0,"<":h0,">=":m0,"<=":f0,array:fo,at:Xd,boolean:fo,case:Qd,coalesce:Xc,collator:Uc,format:eu,image:th,in:Jd,"index-of":Yc,interpolate:eo,"interpolate-hcl":eo,"interpolate-lab":eo,length:rh,let:Jc,literal:_a,match:Yd,number:fo,"number-format":eh,object:fo,slice:Qc,step:Wa,string:fo,"to-boolean":Ua,"to-color":Ua,"to-number":Ua,"to-string":Ua,var:Wc,within:ps};function Kf(a,[n,l,h,m]){n=n.evaluate(a),l=l.evaluate(a),h=h.evaluate(a);const v=m?m.evaluate(a):1,x=rn(n,l,h,v);if(x)throw new bn(x);return new vr(n/255,l/255,h/255,v,!1)}function Xf(a,n){return a in n}function nh(a,n){const l=n[a];return l===void 0?null:l}function fs(a){return{type:a}}function Jf(a){return{result:"success",value:a}}function Ga(a){return{result:"error",value:a}}function Xs(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Yf(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function ih(a){return!!a.expression&&a.expression.interpolated}function Wr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function yn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function g0(a){return a}function Ar(a,n){const l=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",m=h||!(h||a.property!==void 0),v=a.type||(ih(n)?"exponential":"interval");if(l||n.type==="padding"){const B=l?vr.parse:Mr.parse;(a=xt({},a)).stops&&(a.stops=a.stops.map(U=>[U[0],B(U[1])])),a.default=B(a.default?a.default:n.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let S,P,z;if(v==="exponential")S=Wl;else if(v==="interval")S=fn;else if(v==="categorical"){S=vn,P=Object.create(null);for(const B of a.stops)P[B[0]]=B[1];z=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=Qf}if(h){const B={},U=[];for(let re=0;re<a.stops.length;re++){const le=a.stops[re],me=le[0].zoom;B[me]===void 0&&(B[me]={zoom:me,type:a.type,property:a.property,default:a.default,stops:[]},U.push(me)),B[me].stops.push([le[0].value,le[1]])}const X=[];for(const re of U)X.push([B[re].zoom,Ar(B[re],n)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:eo.interpolationFactor.bind(void 0,Q),zoomStops:X.map(re=>re[0]),evaluate:({zoom:re},le)=>Wl({stops:X,base:a.base},n,re).evaluate(re,le)}}if(m){const B=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:eo.interpolationFactor.bind(void 0,B),zoomStops:a.stops.map(U=>U[0]),evaluate:({zoom:U})=>S(a,n,U,P,z)}}return{kind:"source",evaluate(B,U){const X=U&&U.properties?U.properties[a.property]:void 0;return X===void 0?ms(a.default,n.default):S(a,n,X,P,z)}}}function ms(a,n,l){return a!==void 0?a:n!==void 0?n:l!==void 0?l:void 0}function vn(a,n,l,h,m){return ms(typeof l===m?h[l]:void 0,a.default,n.default)}function fn(a,n,l){if(Wr(l)!=="number")return ms(a.default,n.default);const h=a.stops.length;if(h===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[h-1][0])return a.stops[h-1][1];const m=qs(a.stops.map(v=>v[0]),l);return a.stops[m][1]}function Wl(a,n,l){const h=a.base!==void 0?a.base:1;if(Wr(l)!=="number")return ms(a.default,n.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const v=qs(a.stops.map(B=>B[0]),l),x=function(B,U,X,Q){const re=Q-X,le=B-X;return re===0?0:U===1?le/re:(Math.pow(U,le)-1)/(Math.pow(U,re)-1)}(l,h,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],P=a.stops[v+1][1],z=Qi[n.type]||g0;return typeof S.evaluate=="function"?{evaluate(...B){const U=S.evaluate.apply(void 0,B),X=P.evaluate.apply(void 0,B);if(U!==void 0&&X!==void 0)return z(U,X,x,a.colorSpace)}}:z(S,P,x,a.colorSpace)}function Qf(a,n,l){switch(n.type){case"color":l=vr.parse(l);break;case"formatted":l=jr.fromString(l.toString());break;case"resolvedImage":l=yr.fromString(l.toString());break;case"padding":l=Mr.parse(l);break;default:Wr(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0)}return ms(l,a.default,n.default)}mo.register(Ks,{error:[{kind:"error"},[It],(a,[n])=>{throw new bn(n.evaluate(a))}],typeof:[It,[Lt],(a,[n])=>fe(Vr(n.evaluate(a)))],"to-rgba":[he(Ye,4),[Et],(a,[n])=>{const[l,h,m,v]=n.evaluate(a).rgb;return[255*l,255*h,255*m,v]}],rgb:[Et,[Ye,Ye,Ye],Kf],rgba:[Et,[Ye,Ye,Ye,Ye],Kf],has:{type:gt,overloads:[[[It],(a,[n])=>Xf(n.evaluate(a),a.properties())],[[It,pr],(a,[n,l])=>Xf(n.evaluate(a),l.evaluate(a))]]},get:{type:Lt,overloads:[[[It],(a,[n])=>nh(n.evaluate(a),a.properties())],[[It,pr],(a,[n,l])=>nh(n.evaluate(a),l.evaluate(a))]]},"feature-state":[Lt,[It],(a,[n])=>nh(n.evaluate(a),a.featureState||{})],properties:[pr,[],a=>a.properties()],"geometry-type":[It,[],a=>a.geometryType()],id:[Lt,[],a=>a.id()],zoom:[Ye,[],a=>a.globals.zoom],"heatmap-density":[Ye,[],a=>a.globals.heatmapDensity||0],"line-progress":[Ye,[],a=>a.globals.lineProgress||0],accumulated:[Lt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Ye,fs(Ye),(a,n)=>{let l=0;for(const h of n)l+=h.evaluate(a);return l}],"*":[Ye,fs(Ye),(a,n)=>{let l=1;for(const h of n)l*=h.evaluate(a);return l}],"-":{type:Ye,overloads:[[[Ye,Ye],(a,[n,l])=>n.evaluate(a)-l.evaluate(a)],[[Ye],(a,[n])=>-n.evaluate(a)]]},"/":[Ye,[Ye,Ye],(a,[n,l])=>n.evaluate(a)/l.evaluate(a)],"%":[Ye,[Ye,Ye],(a,[n,l])=>n.evaluate(a)%l.evaluate(a)],ln2:[Ye,[],()=>Math.LN2],pi:[Ye,[],()=>Math.PI],e:[Ye,[],()=>Math.E],"^":[Ye,[Ye,Ye],(a,[n,l])=>Math.pow(n.evaluate(a),l.evaluate(a))],sqrt:[Ye,[Ye],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[Ye,[Ye],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[Ye,[Ye],(a,[n])=>Math.log(n.evaluate(a))],log2:[Ye,[Ye],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[Ye,[Ye],(a,[n])=>Math.sin(n.evaluate(a))],cos:[Ye,[Ye],(a,[n])=>Math.cos(n.evaluate(a))],tan:[Ye,[Ye],(a,[n])=>Math.tan(n.evaluate(a))],asin:[Ye,[Ye],(a,[n])=>Math.asin(n.evaluate(a))],acos:[Ye,[Ye],(a,[n])=>Math.acos(n.evaluate(a))],atan:[Ye,[Ye],(a,[n])=>Math.atan(n.evaluate(a))],min:[Ye,fs(Ye),(a,n)=>Math.min(...n.map(l=>l.evaluate(a)))],max:[Ye,fs(Ye),(a,n)=>Math.max(...n.map(l=>l.evaluate(a)))],abs:[Ye,[Ye],(a,[n])=>Math.abs(n.evaluate(a))],round:[Ye,[Ye],(a,[n])=>{const l=n.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ye,[Ye],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[Ye,[Ye],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[gt,[It,Lt],(a,[n,l])=>a.properties()[n.value]===l.value],"filter-id-==":[gt,[Lt],(a,[n])=>a.id()===n.value],"filter-type-==":[gt,[It],(a,[n])=>a.geometryType()===n.value],"filter-<":[gt,[It,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h<m}],"filter-id-<":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[gt,[It,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h>m}],"filter-id->":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[gt,[It,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[gt,[It,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[gt,[Lt],(a,[n])=>n.value in a.properties()],"filter-has-id":[gt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[gt,[he(It)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[gt,[he(Lt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[gt,[It,he(Lt)],(a,[n,l])=>l.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[gt,[It,he(Lt)],(a,[n,l])=>function(h,m,v,x){for(;v<=x;){const S=v+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:v=S+1}return!1}(a.properties()[n.value],l.value,0,l.value.length-1)],all:{type:gt,overloads:[[[gt,gt],(a,[n,l])=>n.evaluate(a)&&l.evaluate(a)],[fs(gt),(a,n)=>{for(const l of n)if(!l.evaluate(a))return!1;return!0}]]},any:{type:gt,overloads:[[[gt,gt],(a,[n,l])=>n.evaluate(a)||l.evaluate(a)],[fs(gt),(a,n)=>{for(const l of n)if(l.evaluate(a))return!0;return!1}]]},"!":[gt,[gt],(a,[n])=>!n.evaluate(a)],"is-supported-script":[gt,[It],(a,[n])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(n.evaluate(a))}],upcase:[It,[It],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[It,[It],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[It,fs(Lt),(a,n)=>n.map(l=>$r(l.evaluate(a))).join("")],"resolved-locale":[It,[mr],(a,[n])=>n.evaluate(a).resolvedLocale()]});class oh{constructor(n,l){var h;this.expression=n,this._warningHistory={},this._evaluator=new Ud,this._defaultValue=l?(h=l).type==="color"&&yn(h.default)?new vr(0,0,0,0):h.type==="color"?vr.parse(h.default)||null:h.type==="padding"?Mr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?er.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,h,m,v,x){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,l,h,m,v,x){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new bn(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function tu(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Ks}function ru(a,n){const l=new Vc(Ks,Gc,[],n?function(m){const v={color:Et,string:It,number:Ye,enum:It,boolean:gt,formatted:ce,padding:H,resolvedImage:q,variableAnchorOffsetCollection:te};return m.type==="array"?he(v[m.value]||Lt,m.length):v[m.type]}(n):void 0),h=l.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Jf(new oh(h,n)):Ga(l.errors)}class ah{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!Hl(l.expression)}evaluateWithoutErrorHandling(n,l,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,m,v,x)}evaluate(n,l,h,m,v,x){return this._styleExpression.evaluate(n,l,h,m,v,x)}}class nu{constructor(n,l,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!Hl(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,l,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,m,v,x)}evaluate(n,l,h,m,v,x){return this._styleExpression.evaluate(n,l,h,m,v,x)}interpolationFactor(n,l,h){return this.interpolationType?eo.interpolationFactor(this.interpolationType,n,l,h):0}}function sh(a,n){const l=ru(a,n);if(l.result==="error")return l;const h=l.value.expression,m=qc(h);if(!m&&!Xs(n))return Ga([new bt("","data expressions not supported")]);const v=Zc(h,["zoom"]);if(!v&&!Yf(n))return Ga([new bt("","zoom expressions not supported")]);const x=ql(h);return x||v?x instanceof bt?Ga([x]):x instanceof eo&&!ih(n)?Ga([new bt("",'"interpolate" expressions cannot be used with this property')]):Jf(x?new nu(m?"camera":"composite",l.value,x.labels,x instanceof eo?x.interpolation:void 0):new ah(m?"constant":"source",l.value)):Ga([new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Gl{constructor(n,l){this._parameters=n,this._specification=l,xt(this,Ar(this._parameters,this._specification))}static deserialize(n){return new Gl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ql(a){let n=null;if(a instanceof Jc)n=ql(a.result);else if(a instanceof Xc){for(const l of a.args)if(n=ql(l),n)break}else(a instanceof Wa||a instanceof eo)&&a.input instanceof mo&&a.input.name==="zoom"&&(n=a);return n instanceof bt||a.eachChild(l=>{const h=ql(l);h instanceof bt?n=h:!n&&h?n=new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Zl(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Zl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const y0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function lh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Zl(a)||(a=iu(a));const n=ru(a,y0);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,m)=>n.value.evaluate(l,h,{},m),needGeometry:em(a)}}function v0(a,n){return a<n?-1:a>n?1:0}function em(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(em(a[n]))return!0;return!1}function iu(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?ch(a[1],a[2],"=="):n==="!="?Kl(ch(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?ch(a[1],a[2],n):n==="any"?(l=a.slice(1),["any"].concat(l.map(iu))):n==="all"?["all"].concat(a.slice(1).map(iu)):n==="none"?["all"].concat(a.slice(1).map(iu).map(Kl)):n==="in"?tm(a[1],a.slice(2)):n==="!in"?Kl(tm(a[1],a.slice(2))):n==="has"?rm(a[1]):n==="!has"?Kl(rm(a[1])):n!=="within"||a;var l}function ch(a,n,l){switch(a){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,a,n]}}function tm(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",a,["literal",n.sort(v0)]]:["filter-in-small",a,["literal",n]]}}function rm(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Kl(a){return["!",a]}function ou(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${ou(v)},`;return`${m}]`}const l=Object.keys(a).sort();let h="{";for(let m=0;m<l.length;m++)h+=`${JSON.stringify(l[m])}:${ou(a[l[m]])},`;return`${h}}`}function au(a){let n="";for(const l of br)n+=`/${ou(a[l])}`;return n}function nm(a){const n=a.value;return n?[new Be(a.key,n,"constants have been deprecated as of v8")]:[]}function wn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function gs(a){if(Array.isArray(a))return a.map(gs);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const l in a)n[l]=gs(a[l]);return n}return wn(a)}function Bi(a){const n=a.key,l=a.value,h=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,x=a.styleSpec,S=a.validateSpec;let P=[];const z=Wr(l);if(z!=="object")return[new Be(n,l,`object expected, ${z} found`)];for(const B in l){const U=B.split(".")[0],X=h[U]||h["*"];let Q;if(m[U])Q=m[U];else if(h[U])Q=S;else if(m["*"])Q=m["*"];else{if(!h["*"]){P.push(new Be(n,l[B],`unknown property "${B}"`));continue}Q=S}P=P.concat(Q({key:(n&&`${n}.`)+B,value:l[B],valueSpec:X,style:v,styleSpec:x,object:l,objectKey:B,validateSpec:S},l))}for(const B in h)m[B]||h[B].required&&h[B].default===void 0&&l[B]===void 0&&P.push(new Be(n,l,`missing required property "${B}"`));return P}function Js(a){const n=a.value,l=a.valueSpec,h=a.style,m=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(Wr(n)!=="array")return[new Be(v,n,`array expected, ${Wr(n)} found`)];if(l.length&&n.length!==l.length)return[new Be(v,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new Be(v,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),Wr(l.value)==="object"&&(S=l.value);let P=[];for(let z=0;z<n.length;z++)P=P.concat(x({array:n,arrayIndex:z,value:n[z],valueSpec:S,validateSpec:a.validateSpec,style:h,styleSpec:m,key:`${v}[${z}]`}));return P}function Xl(a){const n=a.key,l=a.value,h=a.valueSpec;let m=Wr(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Be(n,l,`number expected, ${m} found`)]:"minimum"in h&&l<h.minimum?[new Be(n,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Be(n,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function su(a){const n=a.valueSpec,l=wn(a.value.type);let h,m,v,x={};const S=l!=="categorical"&&a.value.property===void 0,P=!S,z=Wr(a.value.stops)==="array"&&Wr(a.value.stops[0])==="array"&&Wr(a.value.stops[0][0])==="object",B=Bi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Q){if(l==="identity")return[new Be(Q.key,Q.value,'identity function may not have a "stops" property')];let re=[];const le=Q.value;return re=re.concat(Js({key:Q.key,value:le,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:U})),Wr(le)==="array"&&le.length===0&&re.push(new Be(Q.key,le,"array must have at least one stop")),re},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return l==="identity"&&S&&B.push(new Be(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||B.push(new Be(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!ih(a.valueSpec)&&B.push(new Be(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!Xs(a.valueSpec)?B.push(new Be(a.key,a.value,"property functions not supported")):S&&!Yf(a.valueSpec)&&B.push(new Be(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!z||a.value.property!==void 0||B.push(new Be(a.key,a.value,'"property" property is required')),B;function U(Q){let re=[];const le=Q.value,me=Q.key;if(Wr(le)!=="array")return[new Be(me,le,`array expected, ${Wr(le)} found`)];if(le.length!==2)return[new Be(me,le,`array length 2 expected, length ${le.length} found`)];if(z){if(Wr(le[0])!=="object")return[new Be(me,le,`object expected, ${Wr(le[0])} found`)];if(le[0].zoom===void 0)return[new Be(me,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new Be(me,le,"object stop key must have value")];if(v&&v>wn(le[0].zoom))return[new Be(me,le[0].zoom,"stop zoom values must appear in ascending order")];wn(le[0].zoom)!==v&&(v=wn(le[0].zoom),m=void 0,x={}),re=re.concat(Bi({key:`${me}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Xl,value:X}}))}else re=re.concat(X({key:`${me}[0]`,value:le[0],valueSpec:{},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},le));return tu(gs(le[1]))?re.concat([new Be(`${me}[1]`,le[1],"expressions are not allowed in function stops.")]):re.concat(Q.validateSpec({key:`${me}[1]`,value:le[1],valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function X(Q,re){const le=Wr(Q.value),me=wn(Q.value),ve=Q.value!==null?Q.value:re;if(h){if(le!==h)return[new Be(Q.key,ve,`${le} stop domain type must match previous stop domain type ${h}`)]}else h=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new Be(Q.key,ve,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&l!=="categorical"){let De=`number expected, ${le} found`;return Xs(n)&&l===void 0&&(De+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(Q.key,ve,De)]}return l!=="categorical"||le!=="number"||isFinite(me)&&Math.floor(me)===me?l!=="categorical"&&le==="number"&&m!==void 0&&me<m?[new Be(Q.key,ve,"stop domain values must appear in ascending order")]:(m=me,l==="categorical"&&me in x?[new Be(Q.key,ve,"stop domain values must be unique")]:(x[me]=!0,[])):[new Be(Q.key,ve,`integer expected, found ${me}`)]}}function ys(a){const n=(a.expressionContext==="property"?sh:ru)(gs(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Be(`${a.key}${h.key}`,a.value,h.message));const l=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new Be(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Hl(l))return[new Be(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Hl(l))return[new Be(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Zc(l,["zoom","feature-state"]))return[new Be(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!qc(l))return[new Be(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jl(a){const n=a.key,l=a.value,h=a.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(wn(l))===-1&&m.push(new Be(n,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(wn(l))===-1&&m.push(new Be(n,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Ys(a){return Zl(gs(a.value))?ys(xt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):im(a)}function im(a){const n=a.value,l=a.key;if(Wr(n)!=="array")return[new Be(l,n,`array expected, ${Wr(n)} found`)];const h=a.styleSpec;let m,v=[];if(n.length<1)return[new Be(l,n,"filter array must have at least 1 element")];switch(v=v.concat(Jl({key:`${l}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),wn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&wn(n[1])==="$type"&&v.push(new Be(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Be(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Wr(n[1]),m!=="string"&&v.push(new Be(`${l}[1]`,n[1],`string expected, ${m} found`)));for(let x=2;x<n.length;x++)m=Wr(n[x]),wn(n[1])==="$type"?v=v.concat(Jl({key:`${l}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Be(`${l}[${x}]`,n[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(im({key:`${l}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Wr(n[1]),n.length!==2?v.push(new Be(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Be(`${l}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Wr(n[1]),n.length!==2?v.push(new Be(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Be(`${l}[1]`,n[1],`object expected, ${m} found`))}return v}function om(a,n){const l=a.key,h=a.validateSpec,m=a.style,v=a.styleSpec,x=a.value,S=a.objectKey,P=v[`${n}_${a.layerType}`];if(!P)return[];const z=S.match(/^(.*)-transition$/);if(n==="paint"&&z&&P[z[1]]&&P[z[1]].transition)return h({key:l,value:x,valueSpec:v.transition,style:m,styleSpec:v});const B=a.valueSpec||P[S];if(!B)return[new Be(l,x,`unknown property "${S}"`)];let U;if(Wr(x)==="string"&&Xs(B)&&!B.tokens&&(U=/^{([^}]+)}$/.exec(x)))return[new Be(l,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];const X=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&X.push(new Be(l,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&yn(gs(x))&&wn(x.type)==="identity"&&X.push(new Be(l,x,'"text-font" does not support identity functions'))),X.concat(h({key:a.key,value:x,valueSpec:B,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function am(a){return om(a,"paint")}function sm(a){return om(a,"layout")}function lm(a){let n=[];const l=a.value,h=a.key,m=a.style,v=a.styleSpec;l.type||l.ref||n.push(new Be(h,l,'either "type" or "ref" is required'));let x=wn(l.type);const S=wn(l.ref);if(l.id){const P=wn(l.id);for(let z=0;z<a.arrayIndex;z++){const B=m.layers[z];wn(B.id)===P&&n.push(new Be(h,l.id,`duplicate layer id "${l.id}", previously used at line ${B.id.__line__}`))}}if("ref"in l){let P;["type","source","source-layer","filter","layout"].forEach(z=>{z in l&&n.push(new Be(h,l[z],`"${z}" is prohibited for ref layers`))}),m.layers.forEach(z=>{wn(z.id)===S&&(P=z)}),P?P.ref?n.push(new Be(h,l.ref,"ref cannot reference another ref layer")):x=wn(P.type):n.push(new Be(h,l.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(l.source){const P=m.sources&&m.sources[l.source],z=P&&wn(P.type);P?z==="vector"&&x==="raster"?n.push(new Be(h,l.source,`layer "${l.id}" requires a raster source`)):z!=="raster-dem"&&x==="hillshade"?n.push(new Be(h,l.source,`layer "${l.id}" requires a raster-dem source`)):z==="raster"&&x!=="raster"?n.push(new Be(h,l.source,`layer "${l.id}" requires a vector source`)):z!=="vector"||l["source-layer"]?z==="raster-dem"&&x!=="hillshade"?n.push(new Be(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||z==="geojson"&&P.lineMetrics||n.push(new Be(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Be(h,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new Be(h,l.source,`source "${l.source}" not found`))}else n.push(new Be(h,l,'missing required property "source"'));return n=n.concat(Bi({key:h,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:Ys,layout:P=>Bi({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":z=>sm(xt({layerType:x},z))}}),paint:P=>Bi({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":z=>am(xt({layerType:x},z))}})}})),n}function Xo(a){const n=a.value,l=a.key,h=Wr(n);return h!=="string"?[new Be(l,n,`string expected, ${h} found`)]:[]}const Yl={promoteId:function({key:a,value:n}){if(Wr(n)==="string")return Xo({key:a,value:n});{const l=[];for(const h in n)l.push(...Xo({key:`${a}.${h}`,value:n[h]}));return l}}};function to(a){const n=a.value,l=a.key,h=a.styleSpec,m=a.style,v=a.validateSpec;if(!n.type)return[new Be(l,n,'"type" is required')];const x=wn(n.type);let S;switch(x){case"vector":case"raster":return S=Bi({key:l,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Yl,validateSpec:v}),S;case"raster-dem":return S=function(P){var z;const B=(z=P.sourceName)!==null&&z!==void 0?z:"",U=P.value,X=P.styleSpec,Q=X.source_raster_dem,re=P.style;let le=[];const me=Wr(U);if(U===void 0)return le;if(me!=="object")return le.push(new Be("source_raster_dem",U,`object expected, ${me} found`)),le;const ve=wn(U.encoding)==="custom",De=["redFactor","greenFactor","blueFactor","baseShift"],we=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Le in U)!ve&&De.includes(Le)?le.push(new Be(Le,U[Le],`In "${B}": "${Le}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):Q[Le]?le=le.concat(P.validateSpec({key:Le,value:U[Le],valueSpec:Q[Le],validateSpec:P.validateSpec,style:re,styleSpec:X})):le.push(new Be(Le,U[Le],`unknown property "${Le}"`));return le}({sourceName:l,value:n,style:a.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Bi({key:l,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:v,objectElementValidators:Yl}),n.cluster)for(const P in n.clusterProperties){const[z,B]=n.clusterProperties[P],U=typeof z=="string"?[z,["accumulated"],["get",P]]:z;S.push(...ys({key:`${l}.${P}.map`,value:B,validateSpec:v,expressionContext:"cluster-map"})),S.push(...ys({key:`${l}.${P}.reduce`,value:U,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Bi({key:l,value:n,valueSpec:h.source_video,style:m,validateSpec:v,styleSpec:h});case"image":return Bi({key:l,value:n,valueSpec:h.source_image,style:m,validateSpec:v,styleSpec:h});case"canvas":return[new Be(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Jl({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:h})}}function Ql(a){const n=a.value,l=a.styleSpec,h=l.light,m=a.style;let v=[];const x=Wr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Be("light",n,`object expected, ${x} found`)]),v;for(const S in n){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:l.transition,validateSpec:a.validateSpec,style:m,styleSpec:l}):h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Be(S,n[S],`unknown property "${S}"`)])}return v}function cm(a){const n=a.value,l=a.styleSpec,h=l.terrain,m=a.style;let v=[];const x=Wr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Be("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Be(S,n[S],`unknown property "${S}"`)]);return v}function um(a){let n=[];const l=a.value,h=a.key;if(Array.isArray(l)){const m=[],v=[];for(const x in l)l[x].id&&m.includes(l[x].id)&&n.push(new Be(h,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),m.push(l[x].id),l[x].url&&v.includes(l[x].url)&&n.push(new Be(h,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),v.push(l[x].url),n=n.concat(Bi({key:`${h}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Xo({key:h,value:l})}const dm={"*":()=>[],array:Js,boolean:function(a){const n=a.value,l=a.key,h=Wr(n);return h!=="boolean"?[new Be(l,n,`boolean expected, ${h} found`)]:[]},number:Xl,color:function(a){const n=a.key,l=a.value,h=Wr(l);return h!=="string"?[new Be(n,l,`color expected, ${h} found`)]:vr.parse(String(l))?[]:[new Be(n,l,`color expected, "${l}" found`)]},constants:nm,enum:Jl,filter:Ys,function:su,layer:lm,object:Bi,source:to,light:Ql,terrain:cm,string:Xo,formatted:function(a){return Xo(a).length===0?[]:ys(a)},resolvedImage:function(a){return Xo(a).length===0?[]:ys(a)},padding:function(a){const n=a.key,l=a.value;if(Wr(l)==="array"){if(l.length<1||l.length>4)return[new Be(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<l.length;v++)m=m.concat(a.validateSpec({key:`${n}[${v}]`,value:l[v],validateSpec:a.validateSpec,valueSpec:h}));return m}return Xl({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,l=a.value,h=Wr(l),m=a.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Be(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<l.length;x+=2)v=v.concat(Jl({key:`${n}[${x}]`,value:l[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Js({key:`${n}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:um};function xa(a){const n=a.value,l=a.valueSpec,h=a.styleSpec;return a.validateSpec=xa,l.expression&&yn(wn(n))?su(a):l.expression&&tu(gs(n))?ys(a):l.type&&dm[l.type]?dm[l.type](a):Bi(xt({},a,{valueSpec:l.type?h[l.type]:l}))}function hm(a){const n=a.value,l=a.key,h=Xo(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Be(l,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Be(l,n,'"glyphs" url must include a "{range}" token'))),h}function go(a,n=We){let l=[];return l=l.concat(xa({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:xa,objectElementValidators:{glyphs:hm,"*":()=>[]}})),a.constants&&(l=l.concat(nm({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:xa}))),lu(l)}function ba(a){return function(n){return a({...n,validateSpec:xa})}}function lu(a){return[].concat(a).sort((n,l)=>n.line-l.line)}function wa(a){return function(...n){return lu(a.apply(this,n))}}go.source=wa(ba(to)),go.sprite=wa(ba(um)),go.glyphs=wa(ba(hm)),go.light=wa(ba(Ql)),go.terrain=wa(ba(cm)),go.layer=wa(ba(lm)),go.filter=wa(ba(Ys)),go.paintProperty=wa(ba(am)),go.layoutProperty=wa(ba(sm));const Sa=go,_0=Sa.light,uh=Sa.paintProperty,pm=Sa.layoutProperty;function cu(a,n){let l=!1;if(n&&n.length)for(const h of n)a.fire(new Ot(new Error(h.message))),l=!0;return l}class Qs{constructor(n,l,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(l=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const z=x[3+P],B=x[3+P+1];m.push(z===B?null:x.subarray(z,B))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=h,this.scale=l/n,this.uid=0;const v=h/l*n;this.min=-v,this.max=n+v}insert(n,l,h,m,v){this._forEachCell(l,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,h,m,v,x){this.cells[v].push(x)}query(n,l,h,m,v){const x=this.min,S=this.max;if(n<=x&&l<=x&&S<=h&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,l,h,m,this._queryCell,P,{},v),P}}_queryCell(n,l,h,m,v,x,S,P){const z=this.cells[v];if(z!==null){const B=this.keys,U=this.bboxes;for(let X=0;X<z.length;X++){const Q=z[X];if(S[Q]===void 0){const re=4*Q;(P?P(U[re+0],U[re+1],U[re+2],U[re+3]):n<=U[re+2]&&l<=U[re+3]&&h>=U[re+0]&&m>=U[re+1])?(S[Q]=!0,x.push(B[Q])):S[Q]=!1}}}}_forEachCell(n,l,h,m,v,x,S,P){const z=this._convertToCellCoord(n),B=this._convertToCellCoord(l),U=this._convertToCellCoord(h),X=this._convertToCellCoord(m);for(let Q=z;Q<=U;Q++)for(let re=B;re<=X;re++){const le=this.d*re+Q;if((!P||P(this._convertFromCellCoord(Q),this._convertFromCellCoord(re),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(re+1)))&&v.call(this,n,l,h,m,le,x,S,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,l=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(l+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=l;for(let x=0;x<n.length;x++){const S=n[x];m[3+x]=v,m.set(S,v),v+=S.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,l){const h=n.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(n){return new Qs(n.buffer)}}const Ca={};function Bt(a,n,l={}){if(Ca[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),Ca[a]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Qs),Bt("Color",vr),Bt("Error",Error),Bt("AJAXError",Je),Bt("ResolvedImage",yr),Bt("StylePropertyFunction",Gl),Bt("StyleExpression",oh,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",nu),Bt("ZoomConstantExpression",ah),Bt("CompoundExpression",mo,{omit:["_evaluate"]});for(const a in Ks)Ks[a]._classRegistryKey||Bt(`Expression_${a}`,Ks[a]);function uu(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function qa(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(uu(a)||Fe(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return n&&n.push(l.buffer),l}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const h of a)l.push(qa(h,n));return l}if(typeof a=="object"){const l=a.constructor,h=l._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Ca[h])throw new Error(`${h} is not registered.`);const m=l.serialize?l.serialize(a,n):{};if(l.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||Ca[h].omit.indexOf(v)>=0)continue;const x=a[v];m[v]=Ca[h].shallow.indexOf(v)>=0?x:qa(x,n)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof a)}function el(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||uu(a)||Fe(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(el);if(typeof a=="object"){const n=a.$name||"Object";if(!Ca[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:l}=Ca[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(a);const h=Object.create(l.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];h[m]=Ca[n].shallow.indexOf(m)>=0?v:el(v)}return h}throw new Error("can't deserialize object of type "+typeof a)}class fm{constructor(){this.first=!0}update(n,l){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Rt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function dh(a){for(const n of a)if(ph(n.charCodeAt(0)))return!0;return!1}function hh(a){for(const n of a)if(!x0(n.charCodeAt(0)))return!1;return!0}function x0(a){return!(Rt.Arabic(a)||Rt["Arabic Supplement"](a)||Rt["Arabic Extended-A"](a)||Rt["Arabic Presentation Forms-A"](a)||Rt["Arabic Presentation Forms-B"](a))}function ph(a){return!(a!==746&&a!==747&&(a<4352||!(Rt["Bopomofo Extended"](a)||Rt.Bopomofo(a)||Rt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Rt["CJK Compatibility Ideographs"](a)||Rt["CJK Compatibility"](a)||Rt["CJK Radicals Supplement"](a)||Rt["CJK Strokes"](a)||!(!Rt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Rt["CJK Unified Ideographs Extension A"](a)||Rt["CJK Unified Ideographs"](a)||Rt["Enclosed CJK Letters and Months"](a)||Rt["Hangul Compatibility Jamo"](a)||Rt["Hangul Jamo Extended-A"](a)||Rt["Hangul Jamo Extended-B"](a)||Rt["Hangul Jamo"](a)||Rt["Hangul Syllables"](a)||Rt.Hiragana(a)||Rt["Ideographic Description Characters"](a)||Rt.Kanbun(a)||Rt["Kangxi Radicals"](a)||Rt["Katakana Phonetic Extensions"](a)||Rt.Katakana(a)&&a!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Rt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Rt["Unified Canadian Aboriginal Syllabics"](a)||Rt["Unified Canadian Aboriginal Syllabics Extended"](a)||Rt["Vertical Forms"](a)||Rt["Yijing Hexagram Symbols"](a)||Rt["Yi Syllables"](a)||Rt["Yi Radicals"](a))))}function mm(a){return!(ph(a)||function(n){return!!(Rt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Rt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Rt["Letterlike Symbols"](n)||Rt["Number Forms"](n)||Rt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Rt["Control Pictures"](n)&&n!==9251||Rt["Optical Character Recognition"](n)||Rt["Enclosed Alphanumerics"](n)||Rt["Geometric Shapes"](n)||Rt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Rt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Rt["CJK Symbols and Punctuation"](n)||Rt.Katakana(n)||Rt["Private Use Area"](n)||Rt["CJK Compatibility Forms"](n)||Rt["Small Form Variants"](n)||Rt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function gm(a){return a>=1424&&a<=2303||Rt["Arabic Presentation Forms-A"](a)||Rt["Arabic Presentation Forms-B"](a)}function ym(a,n){return!(!n&&gm(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Rt.Khmer(a))}function b0(a){for(const n of a)if(gm(n.charCodeAt(0)))return!0;return!1}const fh="deferred",mh="loading",gh="loaded";let yh=null,Fi="unavailable",Za=null;const ec=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Fi="error"),yh&&yh(a)};function vh(){tc.fire(new ur("pluginStateChange",{pluginStatus:Fi,pluginURL:Za}))}const tc=new Cr,_h=function(){return Fi},vm=function(){if(Fi!==fh||!Za)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fi=mh,vh(),Za&&Pr({url:Za},a=>{a?ec(a):(Fi=gh,vh())})},ro={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fi===gh||ro.applyArabicShaping!=null,isLoading:()=>Fi===mh,setState(a){if(!Ne())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Fi=a.pluginStatus,Za=a.pluginURL},isParsed(){if(!Ne())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ro.applyArabicShaping!=null&&ro.processBidirectionalText!=null&&ro.processStyledBidirectionalText!=null},getPluginURL(){if(!Ne())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Za}};class cn{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fm,this.transition={})}isSupportedScript(n){return function(l,h){for(const m of l)if(!ym(m.charCodeAt(0),h))return!1;return!0}(n,ro.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,l=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class du{constructor(n,l){this.property=n,this.value=l,this.expression=function(h,m){if(yn(h))return new Gl(h,m);if(tu(h)){const v=sh(h,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=vr.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=er.parse(h)):v=Mr.parse(h),{kind:"constant",evaluate:()=>v}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,h){return this.property.possiblyEvaluate(this,n,l,h)}}class xh{constructor(n){this.property=n,this.value=new du(n,void 0)}transitioned(n,l){return new xm(this.property,this.value,l,W({},n.transition,this.transition),n.now)}untransitioned(){return new xm(this.property,this.value,null,{},0)}}class _m{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ae(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new xh(this._values[n].property)),this._values[n].value=new du(this._values[n].property,l===null?void 0:Ae(l))}getTransition(n){return Ae(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new xh(this._values[n].property)),this._values[n].transition=Ae(l)||void 0}serialize(){const n={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(n[l]=h);const m=this.getTransition(l);m!==void 0&&(n[`${l}-transition`]=m)}return n}transitioned(n,l){const h=new bm(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,l._values[m]);return h}untransitioned(){const n=new bm(this._properties);for(const l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class xm{constructor(n,l,h,m,v){this.property=n,this.value=l,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,l,h){const m=n.now||0,v=this.value.possiblyEvaluate(n,l,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(n,l,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,l,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const z=P*P,B=z*P;return 4*(P<.5?B:3*(P-z)+B-.75)}(S))}}return v}}class bm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,h){const m=new hu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,l,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class w0{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Ae(this._values[n].value)}setValue(n,l){this._values[n]=new du(this._values[n].property,l===null?void 0:Ae(l))}serialize(){const n={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(n[l]=h)}return n}possiblyEvaluate(n,l,h){const m=new hu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,l,h);return m}}class Ci{constructor(n,l,h){this.property=n,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,h,m){return this.property.evaluate(this.value,this.parameters,n,l,h,m)}}class hu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Zt{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,h){const m=Qi[this.specification.type];return m?m(n,l,h):n}}class or{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,h,m){return new Ci(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},h,m)}:n.expression,l)}interpolate(n,l,h){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new Ci(this,{kind:"constant",value:void 0},n.parameters);const m=Qi[this.specification.type];if(m){const v=m(n.value.value,l.value.value,h);return new Ci(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,l,h,m,v,x){return n.kind==="constant"?n.value:n.evaluate(l,h,m,v,x)}}class rc extends or{possiblyEvaluate(n,l,h,m){if(n.value===void 0)return new Ci(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){const v=n.expression.evaluate(l,null,{},h,m),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,l);return new Ci(this,{kind:"constant",value:S},l)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new Ci(this,{kind:"constant",value:v},l)}return new Ci(this,n.expression,l)}evaluate(n,l,h,m,v,x){if(n.kind==="source"){const S=n.evaluate(l,h,m,v,x);return this._calculate(S,S,S,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,m),n.evaluate({zoom:Math.floor(l.zoom)},h,m),n.evaluate({zoom:Math.floor(l.zoom)+1},h,m),l):n.value}_calculate(n,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class bh{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(l,null,{},h,m);return this._calculate(v,v,v,l)}return this._calculate(n.expression.evaluate(new cn(Math.floor(l.zoom-1),l)),n.expression.evaluate(new cn(Math.floor(l.zoom),l)),n.expression.evaluate(new cn(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class wh{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,m){return!!n.expression.evaluate(l,null,{},h,m)}interpolate(){return!1}}class Rn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in n){const h=n[l];h.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new du(h,void 0),v=this.defaultTransitionablePropertyValues[l]=new xh(h);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}Bt("DataDrivenProperty",or),Bt("DataConstantProperty",Zt),Bt("CrossFadedDataDrivenProperty",rc),Bt("CrossFadedProperty",bh),Bt("ColorRampProperty",wh);const Sh="-transition";class yo extends Cr{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new w0(l.layout)),l.paint)){this._transitionablePaint=new _m(l.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hu(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,h={}){l!=null&&this._validate(pm,`layers.${this.id}.layout.${n}`,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(Sh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,h={}){if(l!=null&&this._validate(uh,`layers.${this.id}.paint.${n}`,n,l,h))return!1;if(n.endsWith(Sh))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Te(n,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(n,l,h,m,v={}){return(!v||v.validate!==!1)&&cu(this,n.call(Sa,{key:l,layerType:this.type,objectKey:h,value:m,styleSpec:We,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const l=this.paint.get(n);if(l instanceof Ci&&Xs(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const wm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class vs{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _n(a,n=1){let l=0,h=0;return{members:a.map(m=>{const v=wm[m.type].BYTES_PER_ELEMENT,x=l=tl(l,Math.max(n,v)),S=m.components||1;return h=Math.max(h,v),l+=v*S,{name:m.name,type:m.type,components:S,offset:x}}),size:tl(l,Math.max(h,n)),alignment:n}}function tl(a,n){return Math.ceil(a/n)*n}class nc extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.int16[m+0]=l,this.int16[m+1]=h,n}}nc.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",nc);class ic extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.int16[v+0]=l,this.int16[v+1]=h,this.int16[v+2]=m,n}}ic.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",ic);class _s extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,h,m)}emplace(n,l,h,m,v){const x=4*n;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=v,n}}_s.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",_s);class Ch extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,m,v,x)}emplace(n,l,h,m,v,x,S){const P=6*n;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,n}}Ch.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",Ch);class Ih extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,m,v,x)}emplace(n,l,h,m,v,x,S){const P=4*n,z=8*n;return this.int16[P+0]=l,this.int16[P+1]=h,this.uint8[z+4]=m,this.uint8[z+5]=v,this.uint8[z+6]=x,this.uint8[z+7]=S,n}}Ih.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",Ih);class rl extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.float32[m+0]=l,this.float32[m+1]=h,n}}rl.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",rl);class Th extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x,S,P,z,B){const U=this.length;return this.resize(U+1),this.emplace(U,n,l,h,m,v,x,S,P,z,B)}emplace(n,l,h,m,v,x,S,P,z,B,U){const X=10*n;return this.uint16[X+0]=l,this.uint16[X+1]=h,this.uint16[X+2]=m,this.uint16[X+3]=v,this.uint16[X+4]=x,this.uint16[X+5]=S,this.uint16[X+6]=P,this.uint16[X+7]=z,this.uint16[X+8]=B,this.uint16[X+9]=U,n}}Th.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",Th);class Ph extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x,S,P,z,B,U,X){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,l,h,m,v,x,S,P,z,B,U,X)}emplace(n,l,h,m,v,x,S,P,z,B,U,X,Q){const re=12*n;return this.int16[re+0]=l,this.int16[re+1]=h,this.int16[re+2]=m,this.int16[re+3]=v,this.uint16[re+4]=x,this.uint16[re+5]=S,this.uint16[re+6]=P,this.uint16[re+7]=z,this.int16[re+8]=B,this.int16[re+9]=U,this.int16[re+10]=X,this.int16[re+11]=Q,n}}Ph.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",Ph);class Gr extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.float32[v+0]=l,this.float32[v+1]=h,this.float32[v+2]=m,n}}Gr.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",Gr);class y extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}y.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",y);class i extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x,S,P,z){const B=this.length;return this.resize(B+1),this.emplace(B,n,l,h,m,v,x,S,P,z)}emplace(n,l,h,m,v,x,S,P,z,B){const U=10*n,X=5*n;return this.int16[U+0]=l,this.int16[U+1]=h,this.int16[U+2]=m,this.int16[U+3]=v,this.int16[U+4]=x,this.int16[U+5]=S,this.uint32[X+3]=P,this.uint16[U+8]=z,this.uint16[U+9]=B,n}}i.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",i);class u extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,m,v,x)}emplace(n,l,h,m,v,x,S){const P=6*n;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=S,n}}u.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",u);class f extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,l,h,m,v)}emplace(n,l,h,m,v,x){const S=4*n,P=8*n;return this.float32[S+0]=l,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[P+6]=v,this.int16[P+7]=x,n}}f.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",f);class g extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,h,m)}emplace(n,l,h,m,v){const x=12*n,S=3*n;return this.uint8[x+0]=l,this.uint8[x+1]=h,this.float32[S+1]=m,this.float32[S+2]=v,n}}g.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",g);class _ extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.uint16[v+0]=l,this.uint16[v+1]=h,this.uint16[v+2]=m,n}}_.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",_);class C extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le,me,ve){const De=this.length;return this.resize(De+1),this.emplace(De,n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le,me,ve)}emplace(n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le,me,ve,De){const we=24*n,Le=12*n,Ge=48*n;return this.int16[we+0]=l,this.int16[we+1]=h,this.uint16[we+2]=m,this.uint16[we+3]=v,this.uint32[Le+2]=x,this.uint32[Le+3]=S,this.uint32[Le+4]=P,this.uint16[we+10]=z,this.uint16[we+11]=B,this.uint16[we+12]=U,this.float32[Le+7]=X,this.float32[Le+8]=Q,this.uint8[Ge+36]=re,this.uint8[Ge+37]=le,this.uint8[Ge+38]=me,this.uint32[Le+10]=ve,this.int16[we+22]=De,n}}C.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class I extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le,me,ve,De,we,Le,Ge,at,Mt,Ut,At,Pt,yt,Nt){const wt=this.length;return this.resize(wt+1),this.emplace(wt,n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le,me,ve,De,we,Le,Ge,at,Mt,Ut,At,Pt,yt,Nt)}emplace(n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le,me,ve,De,we,Le,Ge,at,Mt,Ut,At,Pt,yt,Nt,wt){const ht=32*n,tr=16*n;return this.int16[ht+0]=l,this.int16[ht+1]=h,this.int16[ht+2]=m,this.int16[ht+3]=v,this.int16[ht+4]=x,this.int16[ht+5]=S,this.int16[ht+6]=P,this.int16[ht+7]=z,this.uint16[ht+8]=B,this.uint16[ht+9]=U,this.uint16[ht+10]=X,this.uint16[ht+11]=Q,this.uint16[ht+12]=re,this.uint16[ht+13]=le,this.uint16[ht+14]=me,this.uint16[ht+15]=ve,this.uint16[ht+16]=De,this.uint16[ht+17]=we,this.uint16[ht+18]=Le,this.uint16[ht+19]=Ge,this.uint16[ht+20]=at,this.uint16[ht+21]=Mt,this.uint16[ht+22]=Ut,this.uint32[tr+12]=At,this.float32[tr+13]=Pt,this.float32[tr+14]=yt,this.uint16[ht+30]=Nt,this.uint16[ht+31]=wt,n}}I.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",I);class E extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}E.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",E);class D extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.uint16[6*n+0]=l,this.float32[v+1]=h,this.float32[v+2]=m,n}}D.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",D);class F extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=4*n;return this.uint32[2*n+0]=l,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}F.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",F);class j extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.uint16[m+0]=l,this.uint16[m+1]=h,n}}j.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",j);class J extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}J.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",J);class de extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,h,m)}emplace(n,l,h,m,v){const x=4*n;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=v,n}}de.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",de);class ue extends vs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}ue.prototype.size=20;class pe extends i{get(n){return new ue(this,n)}}Bt("CollisionBoxArray",pe);class se extends vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}se.prototype.size=48;class ze extends C{get(n){return new se(this,n)}}Bt("PlacedSymbolArray",ze);class je extends vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}je.prototype.size=64;class ye extends I{get(n){return new je(this,n)}}Bt("SymbolInstanceArray",ye);class Me extends E{getoffsetX(n){return this.float32[1*n+0]}}Bt("GlyphOffsetArray",Me);class qe extends ic{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Bt("SymbolLineVertexArray",qe);class Ze extends vs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ze.prototype.size=12;class ot extends D{get(n){return new Ze(this,n)}}Bt("TextAnchorOffsetArray",ot);class dt extends vs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}dt.prototype.size=8;class st extends F{get(n){return new dt(this,n)}}Bt("FeatureIndexArray",st);class pt extends nc{}class Vt extends nc{}class wr extends nc{}class Tt extends Ch{}class ar extends Ih{}class Wt extends rl{}class Jr extends Th{}class xr extends Ph{}class gr extends Gr{}class Sr extends y{}class Pn extends u{}class nn extends g{}class li extends _{}class Wn extends j{}const Mn=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:no}=Mn;class un{constructor(n=[]){this.segments=n}prepareSegment(n,l,h,m){let v=this.segments[this.segments.length-1];return n>un.MAX_VERTEX_ARRAY_LENGTH&&et(`Max vertices per segment is ${un.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>un.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,h,m){return new un([{vertexOffset:n,primitiveOffset:l,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Jo(a,n){return 256*(a=oe(Math.floor(a),0,255))+oe(Math.floor(n),0,255)}un.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",un);const Yo=_n([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ka={exports:{}},xs={exports:{}};xs.exports=function(a,n){var l,h,m,v,x,S,P,z;for(h=a.length-(l=3&a.length),m=n,x=3432918353,S=461845907,z=0;z<h;)P=255&a.charCodeAt(z)|(255&a.charCodeAt(++z))<<8|(255&a.charCodeAt(++z))<<16|(255&a.charCodeAt(++z))<<24,++z,m=27492+(65535&(v=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,l){case 3:P^=(255&a.charCodeAt(z+2))<<16;case 2:P^=(255&a.charCodeAt(z+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(z)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var nl=xs.exports,fi={exports:{}};fi.exports=function(a,n){for(var l,h=a.length,m=n^h,v=0;h>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var ci=nl,Ii=fi.exports;Ka.exports=ci,Ka.exports.murmur3=ci,Ka.exports.murmur2=Ii;var bs=w(Ka.exports);class kn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,h,m){this.ids.push(Gn(n)),this.positions.push(l,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Gn(n);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=l?m=x:h=x+1}const v=[];for(;this.ids[h]===l;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,l){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Ni(h,m,0,h.length-1),l&&l.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const l=new kn;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function Gn(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:bs(String(a))}function Ni(a,n,l,h){for(;l<h;){const m=a[l+h>>1];let v=l-1,x=h+1;for(;;){do v++;while(a[v]<m);do x--;while(a[x]>m);if(v>=x)break;En(a,v,x),En(n,3*v,3*x),En(n,3*v+1,3*x+1),En(n,3*v+2,3*x+2)}x-l<h-x?(Ni(a,n,l,x),l=x+1):(Ni(a,n,x+1,h),h=x)}}function En(a,n,l){const h=a[n];a[n]=a[l],a[l]=h}Bt("FeaturePositionMap",kn);class ws{constructor(n,l){this.gl=n.gl,this.location=l}}class pu extends ws{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Sm extends ws{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Cm extends ws{constructor(n,l){super(n,l),this.current=vr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const S0=new Float32Array(16);function kh(a){return[Jo(255*a.r,255*a.g),Jo(255*a.b,255*a.a)]}class Qo{constructor(n,l,h){this.value=n,this.uniformNames=l.map(m=>`u_${m}`),this.type=h}setUniform(n,l,h){n.set(h.constantOr(this.value))}getBinding(n,l,h){return this.type==="color"?new Cm(n,l):new pu(n,l)}}class Ss{constructor(n,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,l,h){return h.substr(0,9)==="u_pattern"?new Sm(n,l):new pu(n,l)}}class ea{constructor(n,l,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,l,h,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new cn(0),l,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,l,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,l,v)}_setPaintValue(n,l,h){if(this.type==="color"){const m=kh(h);for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<l;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vo{constructor(n,l,h,m,v,x){this.expression=n,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,l,h,m,v){const x=this.expression.evaluate(new cn(this.zoom),l,{},m,[],v),S=this.expression.evaluate(new cn(this.zoom+1),l,{},m,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,S)}updatePaintArray(n,l,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,l,v,x)}_setPaintValue(n,l,h,m){if(this.type==="color"){const v=kh(h),x=kh(m);for(let S=n;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=oe(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,l,h){return new pu(n,l)}}class ta{constructor(n,l,h,m,v,x){this.expression=n,this.type=l,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,l,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(n,l,h,m,v){this._setPaintValues(n,l,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,l,h,m){if(!m||!h)return;const{min:v,mid:x,max:S}=h,P=m[v],z=m[x],B=m[S];if(P&&z&&B)for(let U=n;U<l;U++)this.zoomInPaintVertexArray.emplace(U,z.tl[0],z.tl[1],z.br[0],z.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],z.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,z.tl[0],z.tl[1],z.br[0],z.br[1],B.tl[0],B.tl[1],B.br[0],B.br[1],z.pixelRatio,B.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Yo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Yo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Eh{constructor(n,l,h){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Ci&&Xs(x.property.specification)))continue;const S=ED(v,n.type),P=x.value,z=x.property.specification.type,B=x.property.useIntegerZoom,U=x.property.specification["property-type"],X=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=X?new Ss(P.value,S):new Qo(P.value,S,z),m.push(`/u_${v}`);else if(P.kind==="source"||X){const Q=AS(v,z,"source");this.binders[v]=X?new ta(P,z,B,l,Q,n.id):new ea(P,S,z,Q),m.push(`/a_${v}`)}else{const Q=AS(v,z,"composite");this.binders[v]=new vo(P,S,z,B,l,Q),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const l=this.binders[n];return l instanceof ea||l instanceof vo?l.maxValue:0}populatePaintArrays(n,l,h,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof ea||S instanceof vo||S instanceof ta)&&S.populatePaintArray(n,l,h,m,v)}}setConstantPatternPositions(n,l){for(const h in this.binders){const m=this.binders[h];m instanceof Ss&&m.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,h,m,v){let x=!1;for(const S in n){const P=l.getPositions(S);for(const z of P){const B=h.feature(z.index);for(const U in this.binders){const X=this.binders[U];if((X instanceof ea||X instanceof vo||X instanceof ta)&&X.expression.isStateDependent===!0){const Q=m.paint.get(U);X.expression=Q.value,X.updatePaintArray(z.start,z.end,B,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const l in this.binders){const h=this.binders[l];(h instanceof Qo||h instanceof Ss)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof ea||h instanceof vo)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof ta)for(let m=0;m<Yo.members.length;m++)n.push(Yo.members[m].name)}return n}getBinderUniforms(){const n=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Qo||h instanceof Ss||h instanceof vo)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Qo||v instanceof Ss||v instanceof vo){for(const x of v.uniformNames)if(l[x]){const S=v.getBinding(n,l[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(n,l,h,m){for(const{name:v,property:x,binding:S}of l)this.binders[x].setUniform(S,m,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(n&&h instanceof ta){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof ea||h instanceof vo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const l in this.binders){const h=this.binders[l];(h instanceof ea||h instanceof vo||h instanceof ta)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const l=this.binders[n];(l instanceof ea||l instanceof vo||l instanceof ta)&&l.destroy()}}}class Ia{constructor(n,l,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new Eh(m,l,h);this.needsUpload=!1,this._featureMap=new kn,this._bufferOffset=0}populatePaintArrays(n,l,h,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,l,m,v,x);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,l,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function ED(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function AS(a,n,l){const h={color:{source:rl,composite:de},number:{source:E,composite:rl}},m=function(v){return{"line-pattern":{source:Jr,composite:Jr},"fill-pattern":{source:Jr,composite:Jr},"fill-extrusion-pattern":{source:Jr,composite:Jr}}[v]}(a);return m&&m[l]||h[n][l]}Bt("ConstantBinder",Qo),Bt("CrossFadedConstantBinder",Ss),Bt("SourceExpressionBinder",ea),Bt("CrossFadedCompositeBinder",ta),Bt("CompositeExpressionBinder",vo),Bt("ProgramConfiguration",Eh,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",Ia);const Fn=8192,C0=Math.pow(2,14)-1,zS=-C0-1;function oc(a){const n=Fn/a.extent,l=a.loadGeometry();for(let h=0;h<l.length;h++){const m=l[h];for(let v=0;v<m.length;v++){const x=m[v],S=Math.round(x.x*n),P=Math.round(x.y*n);x.x=oe(S,zS,C0),x.y=oe(P,zS,C0),(S<x.x||S>x.x+1||P<x.y||P>x.y+1)&&et("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function ac(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?oc(a):[]}}function Im(a,n,l,h,m){a.emplaceBack(2*n+(h+1)/2,2*l+(m+1)/2)}class I0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Vt,this.indexArray=new li,this.segments=new un,this.programConfigurations=new Ia(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){const m=this.layers[0],v=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:P,id:z,index:B,sourceLayerIndex:U}of n){const X=this.layers[0]._featureFilter.needGeometry,Q=ac(P,X);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),Q,h))continue;const re=S?x.evaluate(Q,{},h):void 0,le={id:z,properties:P.properties,type:P.type,sourceLayerIndex:U,index:B,geometry:X?Q.geometry:oc(P),patterns:{},sortKey:re};v.push(le)}S&&v.sort((P,z)=>P.sortKey-z.sortKey);for(const P of v){const{geometry:z,index:B,sourceLayerIndex:U}=P,X=n[B].feature;this.addFeature(P,z,B,h),l.featureIndex.insert(X,z,B,U,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,no),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,h,m){for(const v of l)for(const x of v){const S=x.x,P=x.y;if(S<0||S>=Fn||P<0||P>=Fn)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),B=z.vertexLength;Im(this.layoutVertexArray,S,P,-1,-1),Im(this.layoutVertexArray,S,P,1,-1),Im(this.layoutVertexArray,S,P,1,1),Im(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+3,B+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function RS(a,n){for(let l=0;l<a.length;l++)if(fu(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(fu(a,n[l]))return!0;return!!T0(a,n)}function AD(a,n,l){return!!fu(a,n)||!!P0(n,a,l)}function MS(a,n){if(a.length===1)return LS(n,a[0]);for(let l=0;l<n.length;l++){const h=n[l];for(let m=0;m<h.length;m++)if(fu(a,h[m]))return!0}for(let l=0;l<a.length;l++)if(LS(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(T0(a,n[l]))return!0;return!1}function zD(a,n,l){if(a.length>1){if(T0(a,n))return!0;for(let h=0;h<n.length;h++)if(P0(n[h],a,l))return!0}for(let h=0;h<a.length;h++)if(P0(a[h],n,l))return!0;return!1}function T0(a,n){if(a.length===0||n.length===0)return!1;for(let l=0;l<a.length-1;l++){const h=a[l],m=a[l+1];for(let v=0;v<n.length-1;v++)if(RD(h,m,n[v],n[v+1]))return!0}return!1}function RD(a,n,l,h){return Ve(a,l,h)!==Ve(n,l,h)&&Ve(a,n,l)!==Ve(a,n,h)}function P0(a,n,l){const h=l*l;if(n.length===1)return a.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(DS(a,n[m-1],n[m])<h)return!0;return!1}function DS(a,n,l){const h=n.distSqr(l);if(h===0)return a.distSqr(n);const m=((a.x-n.x)*(l.x-n.x)+(a.y-n.y)*(l.y-n.y))/h;return a.distSqr(m<0?n:m>1?l:l.sub(n)._mult(m)._add(n))}function LS(a,n){let l,h,m,v=!1;for(let x=0;x<a.length;x++){l=a[x];for(let S=0,P=l.length-1;S<l.length;P=S++)h=l[S],m=l[P],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function fu(a,n){let l=!1;for(let h=0,m=a.length-1;h<a.length;m=h++){const v=a[h],x=a[m];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function MD(a,n,l){const h=l[0],m=l[2];if(a.x<h.x&&n.x<h.x||a.x>m.x&&n.x>m.x||a.y<h.y&&n.y<h.y||a.y>m.y&&n.y>m.y)return!1;const v=Ve(a,n,l[0]);return v!==Ve(a,n,l[1])||v!==Ve(a,n,l[2])||v!==Ve(a,n,l[3])}function Ah(a,n,l){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:l.programConfigurations.get(n.id).getMaxValue(a)}function Tm(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Pm(a,n,l,h,m){if(!n[0]&&!n[1])return a;const v=A.convert(n)._mult(m);l==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<a.length;S++)x.push(a[S].sub(v));return x}let $S,OS;Bt("CircleBucket",I0,{omit:["layers"]});var DD={get paint(){return OS=OS||new Rn({"circle-radius":new or(We.paint_circle["circle-radius"]),"circle-color":new or(We.paint_circle["circle-color"]),"circle-blur":new or(We.paint_circle["circle-blur"]),"circle-opacity":new or(We.paint_circle["circle-opacity"]),"circle-translate":new Zt(We.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new or(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new or(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new or(We.paint_circle["circle-stroke-opacity"])})},get layout(){return $S=$S||new Rn({"circle-sort-key":new or(We.layout_circle["circle-sort-key"])})}},ji=1e-6,mu=typeof Float32Array<"u"?Float32Array:Array;function k0(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function BS(a,n,l){var h=n[0],m=n[1],v=n[2],x=n[3],S=n[4],P=n[5],z=n[6],B=n[7],U=n[8],X=n[9],Q=n[10],re=n[11],le=n[12],me=n[13],ve=n[14],De=n[15],we=l[0],Le=l[1],Ge=l[2],at=l[3];return a[0]=we*h+Le*S+Ge*U+at*le,a[1]=we*m+Le*P+Ge*X+at*me,a[2]=we*v+Le*z+Ge*Q+at*ve,a[3]=we*x+Le*B+Ge*re+at*De,a[4]=(we=l[4])*h+(Le=l[5])*S+(Ge=l[6])*U+(at=l[7])*le,a[5]=we*m+Le*P+Ge*X+at*me,a[6]=we*v+Le*z+Ge*Q+at*ve,a[7]=we*x+Le*B+Ge*re+at*De,a[8]=(we=l[8])*h+(Le=l[9])*S+(Ge=l[10])*U+(at=l[11])*le,a[9]=we*m+Le*P+Ge*X+at*me,a[10]=we*v+Le*z+Ge*Q+at*ve,a[11]=we*x+Le*B+Ge*re+at*De,a[12]=(we=l[12])*h+(Le=l[13])*S+(Ge=l[14])*U+(at=l[15])*le,a[13]=we*m+Le*P+Ge*X+at*me,a[14]=we*v+Le*z+Ge*Q+at*ve,a[15]=we*x+Le*B+Ge*re+at*De,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var zh,LD=BS;function km(a,n,l){var h=n[0],m=n[1],v=n[2],x=n[3];return a[0]=l[0]*h+l[4]*m+l[8]*v+l[12]*x,a[1]=l[1]*h+l[5]*m+l[9]*v+l[13]*x,a[2]=l[2]*h+l[6]*m+l[10]*v+l[14]*x,a[3]=l[3]*h+l[7]*m+l[11]*v+l[15]*x,a}zh=new mu(4),mu!=Float32Array&&(zh[0]=0,zh[1]=0,zh[2]=0,zh[3]=0);class $D extends yo{constructor(n){super(n,DD)}createBucket(n){return new I0(n)}queryRadius(n){const l=n;return Ah("circle-radius",this,l)+Ah("circle-stroke-width",this,l)+Tm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,h,m,v,x,S,P){const z=Pm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),B=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),U=this.paint.get("circle-pitch-alignment")==="map",X=U?z:function(re,le){return re.map(me=>FS(me,le))}(z,P),Q=U?B*S:B;for(const re of m)for(const le of re){const me=U?le:FS(le,P);let ve=Q;const De=km([],[le.x,le.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=De[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=x.cameraToCenterDistance/De[3]),AD(X,me,ve))return!0}return!1}}function FS(a,n){const l=km([],[a.x,a.y,0,1],n);return new A(l[0]/l[3],l[1]/l[3])}class NS extends I0{}let jS;Bt("HeatmapBucket",NS,{omit:["layers"]});var OD={get paint(){return jS=jS||new Rn({"heatmap-radius":new or(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new or(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new wh(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(We.paint_heatmap["heatmap-opacity"])})}};function E0(a,{width:n,height:l},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*l*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*l*h}`)}else m=new Uint8Array(n*l*h);return a.width=n,a.height=l,a.data=m,a}function VS(a,{width:n,height:l},h){if(n===a.width&&l===a.height)return;const m=E0({},{width:n,height:l},h);A0(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,l)},h),a.width=n,a.height=l,a.data=m.data}function A0(a,n,l,h,m,v){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const z=((l.y+P)*a.width+l.x)*v,B=((h.y+P)*n.width+h.x)*v;for(let U=0;U<m.width*v;U++)S[B+U]=x[z+U]}return n}class Rh{constructor(n,l){E0(this,n,1,l)}resize(n){VS(this,n,1)}clone(){return new Rh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,m,v){A0(n,l,h,m,v,1)}}class zo{constructor(n,l){E0(this,n,4,l)}resize(n){VS(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,m,v){A0(n,l,h,m,v,4)}}function US(a){const n={},l=a.resolution||256,h=a.clips?a.clips.length:1,m=a.image||new zo({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(x,S,P)=>{n[a.evaluationKey]=P;const z=a.expression.evaluate(n);m.data[x+S+0]=Math.floor(255*z.r/z.a),m.data[x+S+1]=Math.floor(255*z.g/z.a),m.data[x+S+2]=Math.floor(255*z.b/z.a),m.data[x+S+3]=Math.floor(255*z.a)};if(a.clips)for(let x=0,S=0;x<h;++x,S+=4*l)for(let P=0,z=0;P<l;P++,z+=4){const B=P/(l-1),{start:U,end:X}=a.clips[x];v(S,z,U*(1-B)+X*B)}else for(let x=0,S=0;x<l;x++,S+=4)v(0,S,x/(l-1));return m}Bt("AlphaImage",Rh),Bt("RGBAImage",zo);class BD extends yo{createBucket(n){return new NS(n)}constructor(n){super(n,OD),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=US({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let HS;var FD={get paint(){return HS=HS||new Rn({"hillshade-illumination-direction":new Zt(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zt(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(We.paint_hillshade["hillshade-accent-color"])})}};class ND extends yo{constructor(n){super(n,FD)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const jD=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:VD}=jD;var z0={exports:{}};function Em(a,n,l){l=l||2;var h,m,v,x,S,P,z,B=n&&n.length,U=B?n[0]*l:a.length,X=WS(a,0,U,l,!0),Q=[];if(!X||X.next===X.prev)return Q;if(B&&(X=function(le,me,ve,De){var we,Le,Ge,at=[];for(we=0,Le=me.length;we<Le;we++)(Ge=WS(le,me[we]*De,we<Le-1?me[we+1]*De:le.length,De,!1))===Ge.next&&(Ge.steiner=!0),at.push(XD(Ge));for(at.sort(qD),we=0;we<at.length;we++)ve=ZD(at[we],ve);return ve}(a,n,X,l)),a.length>80*l){h=v=a[0],m=x=a[1];for(var re=l;re<U;re+=l)(S=a[re])<h&&(h=S),(P=a[re+1])<m&&(m=P),S>v&&(v=S),P>x&&(x=P);z=(z=Math.max(v-h,x-m))!==0?32767/z:0}return Mh(X,Q,l,h,m,z,0),Q}function WS(a,n,l,h,m){var v,x;if(m===D0(a,n,l,h)>0)for(v=n;v<l;v+=h)x=ZS(v,a[v],a[v+1],x);else for(v=l-h;v>=n;v-=h)x=ZS(v,a[v],a[v+1],x);return x&&Am(x,x.next)&&(Lh(x),x=x.next),x}function sc(a,n){if(!a)return a;n||(n=a);var l,h=a;do if(l=!1,h.steiner||!Am(h,h.next)&&Dn(h.prev,h,h.next)!==0)h=h.next;else{if(Lh(h),(h=n=h.prev)===h.next)break;l=!0}while(l||h!==n);return n}function Mh(a,n,l,h,m,v,x){if(a){!x&&v&&function(B,U,X,Q){var re=B;do re.z===0&&(re.z=R0(re.x,re.y,U,X,Q)),re.prevZ=re.prev,re.nextZ=re.next,re=re.next;while(re!==B);re.prevZ.nextZ=null,re.prevZ=null,function(le){var me,ve,De,we,Le,Ge,at,Mt,Ut=1;do{for(ve=le,le=null,Le=null,Ge=0;ve;){for(Ge++,De=ve,at=0,me=0;me<Ut&&(at++,De=De.nextZ);me++);for(Mt=Ut;at>0||Mt>0&&De;)at!==0&&(Mt===0||!De||ve.z<=De.z)?(we=ve,ve=ve.nextZ,at--):(we=De,De=De.nextZ,Mt--),Le?Le.nextZ=we:le=we,we.prevZ=Le,Le=we;ve=De}Le.nextZ=null,Ut*=2}while(Ge>1)}(re)}(a,h,m,v);for(var S,P,z=a;a.prev!==a.next;)if(S=a.prev,P=a.next,v?HD(a,h,m,v):UD(a))n.push(S.i/l|0),n.push(a.i/l|0),n.push(P.i/l|0),Lh(a),a=P.next,z=P.next;else if((a=P)===z){x?x===1?Mh(a=WD(sc(a),n,l),n,l,h,m,v,2):x===2&&GD(a,n,l,h,m,v):Mh(sc(a),n,l,h,m,v,1);break}}}function UD(a){var n=a.prev,l=a,h=a.next;if(Dn(n,l,h)>=0)return!1;for(var m=n.x,v=l.x,x=h.x,S=n.y,P=l.y,z=h.y,B=m<v?m<x?m:x:v<x?v:x,U=S<P?S<z?S:z:P<z?P:z,X=m>v?m>x?m:x:v>x?v:x,Q=S>P?S>z?S:z:P>z?P:z,re=h.next;re!==n;){if(re.x>=B&&re.x<=X&&re.y>=U&&re.y<=Q&&gu(m,S,v,P,x,z,re.x,re.y)&&Dn(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function HD(a,n,l,h){var m=a.prev,v=a,x=a.next;if(Dn(m,v,x)>=0)return!1;for(var S=m.x,P=v.x,z=x.x,B=m.y,U=v.y,X=x.y,Q=S<P?S<z?S:z:P<z?P:z,re=B<U?B<X?B:X:U<X?U:X,le=S>P?S>z?S:z:P>z?P:z,me=B>U?B>X?B:X:U>X?U:X,ve=R0(Q,re,n,l,h),De=R0(le,me,n,l,h),we=a.prevZ,Le=a.nextZ;we&&we.z>=ve&&Le&&Le.z<=De;){if(we.x>=Q&&we.x<=le&&we.y>=re&&we.y<=me&&we!==m&&we!==x&&gu(S,B,P,U,z,X,we.x,we.y)&&Dn(we.prev,we,we.next)>=0||(we=we.prevZ,Le.x>=Q&&Le.x<=le&&Le.y>=re&&Le.y<=me&&Le!==m&&Le!==x&&gu(S,B,P,U,z,X,Le.x,Le.y)&&Dn(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;we&&we.z>=ve;){if(we.x>=Q&&we.x<=le&&we.y>=re&&we.y<=me&&we!==m&&we!==x&&gu(S,B,P,U,z,X,we.x,we.y)&&Dn(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Le&&Le.z<=De;){if(Le.x>=Q&&Le.x<=le&&Le.y>=re&&Le.y<=me&&Le!==m&&Le!==x&&gu(S,B,P,U,z,X,Le.x,Le.y)&&Dn(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function WD(a,n,l){var h=a;do{var m=h.prev,v=h.next.next;!Am(m,v)&&GS(m,h,h.next,v)&&Dh(m,v)&&Dh(v,m)&&(n.push(m.i/l|0),n.push(h.i/l|0),n.push(v.i/l|0),Lh(h),Lh(h.next),h=a=v),h=h.next}while(h!==a);return sc(h)}function GD(a,n,l,h,m,v){var x=a;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&JD(x,S)){var P=qS(x,S);return x=sc(x,x.next),P=sc(P,P.next),Mh(x,n,l,h,m,v,0),void Mh(P,n,l,h,m,v,0)}S=S.next}x=x.next}while(x!==a)}function qD(a,n){return a.x-n.x}function ZD(a,n){var l=function(m,v){var x,S=v,P=m.x,z=m.y,B=-1/0;do{if(z<=S.y&&z>=S.next.y&&S.next.y!==S.y){var U=S.x+(z-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(U<=P&&U>B&&(B=U,x=S.x<S.next.x?S:S.next,U===P))return x}S=S.next}while(S!==v);if(!x)return null;var X,Q=x,re=x.x,le=x.y,me=1/0;S=x;do P>=S.x&&S.x>=re&&P!==S.x&&gu(z<le?P:B,z,re,le,z<le?B:P,z,S.x,S.y)&&(X=Math.abs(z-S.y)/(P-S.x),Dh(S,m)&&(X<me||X===me&&(S.x>x.x||S.x===x.x&&KD(x,S)))&&(x=S,me=X)),S=S.next;while(S!==Q);return x}(a,n);if(!l)return n;var h=qS(l,a);return sc(h,h.next),sc(l,l.next)}function KD(a,n){return Dn(a.prev,a,n.prev)<0&&Dn(n.next,a,a.next)<0}function R0(a,n,l,h,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function XD(a){var n=a,l=a;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==a);return l}function gu(a,n,l,h,m,v,x,S){return(m-x)*(n-S)>=(a-x)*(v-S)&&(a-x)*(h-S)>=(l-x)*(n-S)&&(l-x)*(v-S)>=(m-x)*(h-S)}function JD(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(l,h){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==h.i&&m.next.i!==h.i&&GS(m,m.next,l,h))return!0;m=m.next}while(m!==l);return!1}(a,n)&&(Dh(a,n)&&Dh(n,a)&&function(l,h){var m=l,v=!1,x=(l.x+h.x)/2,S=(l.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(a,n)&&(Dn(a.prev,a,n.prev)||Dn(a,n.prev,n))||Am(a,n)&&Dn(a.prev,a,a.next)>0&&Dn(n.prev,n,n.next)>0)}function Dn(a,n,l){return(n.y-a.y)*(l.x-n.x)-(n.x-a.x)*(l.y-n.y)}function Am(a,n){return a.x===n.x&&a.y===n.y}function GS(a,n,l,h){var m=Rm(Dn(a,n,l)),v=Rm(Dn(a,n,h)),x=Rm(Dn(l,h,a)),S=Rm(Dn(l,h,n));return m!==v&&x!==S||!(m!==0||!zm(a,l,n))||!(v!==0||!zm(a,h,n))||!(x!==0||!zm(l,a,h))||!(S!==0||!zm(l,n,h))}function zm(a,n,l){return n.x<=Math.max(a.x,l.x)&&n.x>=Math.min(a.x,l.x)&&n.y<=Math.max(a.y,l.y)&&n.y>=Math.min(a.y,l.y)}function Rm(a){return a>0?1:a<0?-1:0}function Dh(a,n){return Dn(a.prev,a,a.next)<0?Dn(a,n,a.next)>=0&&Dn(a,a.prev,n)>=0:Dn(a,n,a.prev)<0||Dn(a,a.next,n)<0}function qS(a,n){var l=new M0(a.i,a.x,a.y),h=new M0(n.i,n.x,n.y),m=a.next,v=n.prev;return a.next=n,n.prev=a,l.next=m,m.prev=l,h.next=l,l.prev=h,v.next=h,h.prev=v,h}function ZS(a,n,l,h){var m=new M0(a,n,l);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Lh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function M0(a,n,l){this.i=a,this.x=n,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D0(a,n,l,h){for(var m=0,v=n,x=l-h;v<l;v+=h)m+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return m}z0.exports=Em,z0.exports.default=Em,Em.deviation=function(a,n,l,h){var m=n&&n.length,v=Math.abs(D0(a,0,m?n[0]*l:a.length,l));if(m)for(var x=0,S=n.length;x<S;x++)v-=Math.abs(D0(a,n[x]*l,x<S-1?n[x+1]*l:a.length,l));var P=0;for(x=0;x<h.length;x+=3){var z=h[x]*l,B=h[x+1]*l,U=h[x+2]*l;P+=Math.abs((a[z]-a[U])*(a[B+1]-a[z+1])-(a[z]-a[B])*(a[U+1]-a[z+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Em.flatten=function(a){for(var n=a[0][0].length,l={vertices:[],holes:[],dimensions:n},h=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var x=0;x<n;x++)l.vertices.push(a[m][v][x]);m>0&&l.holes.push(h+=a[m-1].length)}return l};var KS=w(z0.exports);function YD(a,n,l,h,m){XS(a,n,l,h||a.length-1,m||QD)}function XS(a,n,l,h,m){for(;h>l;){if(h-l>600){var v=h-l+1,x=n-l+1,S=Math.log(v),P=.5*Math.exp(2*S/3),z=.5*Math.sqrt(S*P*(v-P)/v)*(x-v/2<0?-1:1);XS(a,n,Math.max(l,Math.floor(n-x*P/v+z)),Math.min(h,Math.floor(n+(v-x)*P/v+z)),m)}var B=a[n],U=l,X=h;for($h(a,l,n),m(a[h],B)>0&&$h(a,l,h);U<X;){for($h(a,U,X),U++,X--;m(a[U],B)<0;)U++;for(;m(a[X],B)>0;)X--}m(a[l],B)===0?$h(a,l,X):$h(a,++X,h),X<=n&&(l=X+1),n<=X&&(h=X-1)}}function $h(a,n,l){var h=a[n];a[n]=a[l],a[l]=h}function QD(a,n){return a<n?-1:a>n?1:0}function L0(a,n){const l=a.length;if(l<=1)return[a];const h=[];let m,v;for(let x=0;x<l;x++){const S=ke(a[x]);S!==0&&(a[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(m&&h.push(m),m=[a[x]]):m.push(a[x]))}if(m&&h.push(m),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(YD(h[x],n,1,h[x].length-1,eL),h[x]=h[x].slice(0,n));return h}function eL(a,n){return n.area-a.area}function $0(a,n,l){const h=l.patternDependencies;let m=!1;for(const v of n){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function O0(a,n,l,h,m){const v=m.patternDependencies;for(const x of n){const S=x.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:h-1},l,{},m.availableImages),z=S.evaluate({zoom:h},l,{},m.availableImages),B=S.evaluate({zoom:h+1},l,{},m.availableImages);P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,B=B&&B.name?B.name:B,v[P]=!0,v[z]=!0,v[B]=!0,l.patterns[x.id]={min:P,mid:z,max:B}}}return l}class B0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wr,this.indexArray=new li,this.indexArray2=new Wn,this.programConfigurations=new Ia(n.layers,n.zoom),this.segments=new un,this.segments2=new un,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=$0("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:P,index:z,sourceLayerIndex:B}of n){const U=this.layers[0]._featureFilter.needGeometry,X=ac(S,U);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),X,h))continue;const Q=v?m.evaluate(X,{},h,l.availableImages):void 0,re={id:P,properties:S.properties,type:S.type,sourceLayerIndex:B,index:z,geometry:U?X.geometry:oc(S),patterns:{},sortKey:Q};x.push(re)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:z,sourceLayerIndex:B}=S;if(this.hasPattern){const U=O0("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(U)}else this.addFeature(S,P,z,h,{});l.featureIndex.insert(n[z].feature,P,z,B,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,VD),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,h,m,v){for(const x of L0(l,500)){let S=0;for(const Q of x)S+=Q.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),z=P.vertexLength,B=[],U=[];for(const Q of x){if(Q.length===0)continue;Q!==x[0]&&U.push(B.length/2);const re=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),le=re.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(le+Q.length-1,le),B.push(Q[0].x),B.push(Q[0].y);for(let me=1;me<Q.length;me++)this.layoutVertexArray.emplaceBack(Q[me].x,Q[me].y),this.indexArray2.emplaceBack(le+me-1,le+me),B.push(Q[me].x),B.push(Q[me].y);re.vertexLength+=Q.length,re.primitiveLength+=Q.length}const X=KS(B,U);for(let Q=0;Q<X.length;Q+=3)this.indexArray.emplaceBack(z+X[Q],z+X[Q+1],z+X[Q+2]);P.vertexLength+=S,P.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}let JS,YS;Bt("FillBucket",B0,{omit:["layers","patternFeatures"]});var tL={get paint(){return YS=YS||new Rn({"fill-antialias":new Zt(We.paint_fill["fill-antialias"]),"fill-opacity":new or(We.paint_fill["fill-opacity"]),"fill-color":new or(We.paint_fill["fill-color"]),"fill-outline-color":new or(We.paint_fill["fill-outline-color"]),"fill-translate":new Zt(We.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new rc(We.paint_fill["fill-pattern"])})},get layout(){return JS=JS||new Rn({"fill-sort-key":new or(We.layout_fill["fill-sort-key"])})}};class rL extends yo{constructor(n){super(n,tL)}recalculate(n,l){super.recalculate(n,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new B0(n)}queryRadius(){return Tm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,h,m,v,x,S){return MS(Pm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const nL=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),iL=_n([{name:"a_centroid",components:2,type:"Int16"}],4),{members:oL}=nL;var il={},aL=T,QS=yu;function yu(a,n,l,h,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=m,a.readFields(sL,this,n)}function sL(a,n,l){a==1?n.id=l.readVarint():a==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(l,n):a==3?n.type=l.readVarint():a==4&&(n._geometry=l.pos)}function lL(a){for(var n,l,h=0,m=0,v=a.length,x=v-1;m<v;x=m++)h+=((l=a[x]).x-(n=a[m]).x)*(n.y+l.y);return h}yu.types=["Unknown","Point","LineString","Polygon"],yu.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,l=a.readVarint()+a.pos,h=1,m=0,v=0,x=0,S=[];a.pos<l;){if(m<=0){var P=a.readVarint();h=7&P,m=P>>3}if(m--,h===1||h===2)v+=a.readSVarint(),x+=a.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new aL(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},yu.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,l=1,h=0,m=0,v=0,x=1/0,S=-1/0,P=1/0,z=-1/0;a.pos<n;){if(h<=0){var B=a.readVarint();l=7&B,h=B>>3}if(h--,l===1||l===2)(m+=a.readSVarint())<x&&(x=m),m>S&&(S=m),(v+=a.readSVarint())<P&&(P=v),v>z&&(z=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,P,S,z]},yu.prototype.toGeoJSON=function(a,n,l){var h,m,v=this.extent*Math.pow(2,l),x=this.extent*a,S=this.extent*n,P=this.loadGeometry(),z=yu.types[this.type];function B(Q){for(var re=0;re<Q.length;re++){var le=Q[re];Q[re]=[360*(le.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(h=0;h<P.length;h++)U[h]=P[h][0];B(P=U);break;case 2:for(h=0;h<P.length;h++)B(P[h]);break;case 3:for(P=function(Q){var re=Q.length;if(re<=1)return[Q];for(var le,me,ve=[],De=0;De<re;De++){var we=lL(Q[De]);we!==0&&(me===void 0&&(me=we<0),me===we<0?(le&&ve.push(le),le=[Q[De]]):le.push(Q[De]))}return le&&ve.push(le),ve}(P),h=0;h<P.length;h++)for(m=0;m<P[h].length;m++)B(P[h][m])}P.length===1?P=P[0]:z="Multi"+z;var X={type:"Feature",geometry:{type:z,coordinates:P},properties:this.properties};return"id"in this&&(X.id=this.id),X};var cL=QS,e2=t2;function t2(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(uL,this,n),this.length=this._features.length}function uL(a,n,l){a===15?n.version=l.readVarint():a===1?n.name=l.readString():a===5?n.extent=l.readVarint():a===2?n._features.push(l.pos):a===3?n._keys.push(l.readString()):a===4&&n._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(l))}t2.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new cL(this._pbf,n,this.extent,this._keys,this._values)};var dL=e2;function hL(a,n,l){if(a===3){var h=new dL(l,l.readVarint()+l.pos);h.length&&(n[h.name]=h)}}il.VectorTile=function(a,n){this.layers=a.readFields(hL,{},n)},il.VectorTileFeature=QS,il.VectorTileLayer=e2;const pL=il.VectorTileFeature.types,F0=Math.pow(2,13);function Oh(a,n,l,h,m,v,x,S){a.emplaceBack(n,l,2*Math.floor(h*F0)+x,m*F0*2,v*F0*2,Math.round(S))}class N0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Tt,this.centroidVertexArray=new pt,this.indexArray=new li,this.programConfigurations=new Ia(n.layers,n.zoom),this.segments=new un,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.features=[],this.hasPattern=$0("fill-extrusion",this.layers,l);for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of n){const P=this.layers[0]._featureFilter.needGeometry,z=ac(m,P);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),z,h))continue;const B={id:v,sourceLayerIndex:S,index:x,geometry:P?z.geometry:oc(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(O0("fill-extrusion",this.layers,B,this.zoom,l)):this.addFeature(B,B.geometry,x,h,{}),l.featureIndex.insert(m,B.geometry,x,S,this.index,!0)}}addFeatures(n,l,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,l,h)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,oL),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,iL.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,h,m,v){const x={x:0,y:0,vertexCount:0};for(const S of L0(l,500)){let P=0;for(const re of S)P+=re.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const re of S){if(re.length===0||mL(re))continue;let le=0;for(let me=0;me<re.length;me++){const ve=re[me];if(me>=1){const De=re[me-1];if(!fL(ve,De)){z.vertexLength+4>un.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const we=ve.sub(De)._perp()._unit(),Le=De.dist(ve);le+Le>32768&&(le=0),Oh(this.layoutVertexArray,ve.x,ve.y,we.x,we.y,0,0,le),Oh(this.layoutVertexArray,ve.x,ve.y,we.x,we.y,0,1,le),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2,le+=Le,Oh(this.layoutVertexArray,De.x,De.y,we.x,we.y,0,0,le),Oh(this.layoutVertexArray,De.x,De.y,we.x,we.y,0,1,le),x.x+=2*De.x,x.y+=2*De.y,x.vertexCount+=2;const Ge=z.vertexLength;this.indexArray.emplaceBack(Ge,Ge+2,Ge+1),this.indexArray.emplaceBack(Ge+1,Ge+2,Ge+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+P>un.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),pL[n.type]!=="Polygon")continue;const B=[],U=[],X=z.vertexLength;for(const re of S)if(re.length!==0){re!==S[0]&&U.push(B.length/2);for(let le=0;le<re.length;le++){const me=re[le];Oh(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),x.x+=me.x,x.y+=me.y,x.vertexCount+=1,B.push(me.x),B.push(me.y)}}const Q=KS(B,U);for(let re=0;re<Q.length;re+=3)this.indexArray.emplaceBack(X+Q[re],X+Q[re+2],X+Q[re+1]);z.primitiveLength+=Q.length/3,z.vertexLength+=P}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}function fL(a,n){return a.x===n.x&&(a.x<0||a.x>Fn)||a.y===n.y&&(a.y<0||a.y>Fn)}function mL(a){return a.every(n=>n.x<0)||a.every(n=>n.x>Fn)||a.every(n=>n.y<0)||a.every(n=>n.y>Fn)}let r2;Bt("FillExtrusionBucket",N0,{omit:["layers","features"]});var gL={get paint(){return r2=r2||new Rn({"fill-extrusion-opacity":new Zt(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new or(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rc(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new or(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new or(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class yL extends yo{constructor(n){super(n,gL)}createBucket(n){return new N0(n)}queryRadius(){return Tm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,h,m,v,x,S,P){const z=Pm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),B=this.paint.get("fill-extrusion-height").evaluate(l,h),U=this.paint.get("fill-extrusion-base").evaluate(l,h),X=function(re,le,me,ve){const De=[];for(const we of re){const Le=[we.x,we.y,0,1];km(Le,Le,le),De.push(new A(Le[0]/Le[3],Le[1]/Le[3]))}return De}(z,P),Q=function(re,le,me,ve){const De=[],we=[],Le=ve[8]*le,Ge=ve[9]*le,at=ve[10]*le,Mt=ve[11]*le,Ut=ve[8]*me,At=ve[9]*me,Pt=ve[10]*me,yt=ve[11]*me;for(const Nt of re){const wt=[],ht=[];for(const tr of Nt){const qt=tr.x,_r=tr.y,dn=ve[0]*qt+ve[4]*_r+ve[12],mn=ve[1]*qt+ve[5]*_r+ve[13],Zn=ve[2]*qt+ve[6]*_r+ve[14],_o=ve[3]*qt+ve[7]*_r+ve[15],Vi=Zn+at,Nn=_o+Mt,ui=dn+Ut,gi=mn+At,Ui=Zn+Pt,Hi=_o+yt,Kn=new A((dn+Le)/Nn,(mn+Ge)/Nn);Kn.z=Vi/Nn,wt.push(Kn);const Xn=new A(ui/Hi,gi/Hi);Xn.z=Ui/Hi,ht.push(Xn)}De.push(wt),we.push(ht)}return[De,we]}(m,U,B,P);return function(re,le,me){let ve=1/0;MS(me,le)&&(ve=n2(me,le[0]));for(let De=0;De<le.length;De++){const we=le[De],Le=re[De];for(let Ge=0;Ge<we.length-1;Ge++){const at=we[Ge],Mt=[at,we[Ge+1],Le[Ge+1],Le[Ge],at];RS(me,Mt)&&(ve=Math.min(ve,n2(me,Mt)))}}return ve!==1/0&&ve}(Q[0],Q[1],X)}}function Bh(a,n){return a.x*n.x+a.y*n.y}function n2(a,n){if(a.length===1){let l=0;const h=n[l++];let m;for(;!m||h.equals(m);)if(m=n[l++],!m)return 1/0;for(;l<n.length;l++){const v=n[l],x=a[0],S=m.sub(h),P=v.sub(h),z=x.sub(h),B=Bh(S,S),U=Bh(S,P),X=Bh(P,P),Q=Bh(z,S),re=Bh(z,P),le=B*X-U*U,me=(X*Q-U*re)/le,ve=(B*re-U*Q)/le,De=h.z*(1-me-ve)+m.z*me+v.z*ve;if(isFinite(De))return De}return 1/0}{let l=1/0;for(const h of n)l=Math.min(l,h.z);return l}}const vL=_n([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:_L}=vL,xL=_n([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bL}=xL,wL=il.VectorTileFeature.types,SL=Math.cos(Math.PI/180*37.5),i2=Math.pow(2,14)/.5;class j0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new ar,this.layoutVertexArray2=new Wt,this.indexArray=new li,this.programConfigurations=new Ia(n.layers,n.zoom),this.segments=new un,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=$0("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:P,index:z,sourceLayerIndex:B}of n){const U=this.layers[0]._featureFilter.needGeometry,X=ac(S,U);if(!this.layers[0]._featureFilter.filter(new cn(this.zoom),X,h))continue;const Q=v?m.evaluate(X,{},h):void 0,re={id:P,properties:S.properties,type:S.type,sourceLayerIndex:B,index:z,geometry:U?X.geometry:oc(S),patterns:{},sortKey:Q};x.push(re)}v&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:z,sourceLayerIndex:B}=S;if(this.hasPattern){const U=O0("line",this.layers,S,this.zoom,l);this.patternFeatures.push(U)}else this.addFeature(S,P,z,h,{});l.featureIndex.insert(n[z].feature,P,z,B,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,bL)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_L),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,h,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),z=x.get("line-miter-limit"),B=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const U of l)this.addLine(U,n,S,P,z,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}addLine(n,l,h,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=wL[l.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let z=0;for(;z<P-1&&n[z].equals(n[z+1]);)z++;if(P<(S?3:2))return;h==="bevel"&&(v=1.05);const B=this.overscaling<=16?15*Fn/(512*this.overscaling):0,U=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let X,Q,re,le,me;this.e1=this.e2=-1,S&&(X=n[P-2],me=n[z].sub(X)._unit()._perp());for(let ve=z;ve<P;ve++){if(re=ve===P-1?S?n[z+1]:void 0:n[ve+1],re&&n[ve].equals(re))continue;me&&(le=me),X&&(Q=X),X=n[ve],me=re?re.sub(X)._unit()._perp():le,le=le||me;let De=le.add(me);De.x===0&&De.y===0||De._unit();const we=le.x*me.x+le.y*me.y,Le=De.x*me.x+De.y*me.y,Ge=Le!==0?1/Le:1/0,at=2*Math.sqrt(2-2*Le),Mt=Le<SL&&Q&&re,Ut=le.x*me.y-le.y*me.x>0;if(Mt&&ve>z){const yt=X.dist(Q);if(yt>2*B){const Nt=X.sub(X.sub(Q)._mult(B/yt)._round());this.updateDistance(Q,Nt),this.addCurrentVertex(Nt,le,0,0,U),Q=Nt}}const At=Q&&re;let Pt=At?h:S?"butt":m;if(At&&Pt==="round"&&(Ge<x?Pt="miter":Ge<=2&&(Pt="fakeround")),Pt==="miter"&&Ge>v&&(Pt="bevel"),Pt==="bevel"&&(Ge>2&&(Pt="flipbevel"),Ge<v&&(Pt="miter")),Q&&this.updateDistance(Q,X),Pt==="miter")De._mult(Ge),this.addCurrentVertex(X,De,0,0,U);else if(Pt==="flipbevel"){if(Ge>100)De=me.mult(-1);else{const yt=Ge*le.add(me).mag()/le.sub(me).mag();De._perp()._mult(yt*(Ut?-1:1))}this.addCurrentVertex(X,De,0,0,U),this.addCurrentVertex(X,De.mult(-1),0,0,U)}else if(Pt==="bevel"||Pt==="fakeround"){const yt=-Math.sqrt(Ge*Ge-1),Nt=Ut?yt:0,wt=Ut?0:yt;if(Q&&this.addCurrentVertex(X,le,Nt,wt,U),Pt==="fakeround"){const ht=Math.round(180*at/Math.PI/20);for(let tr=1;tr<ht;tr++){let qt=tr/ht;if(qt!==.5){const dn=qt-.5;qt+=qt*dn*(qt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*dn*dn+(.848013+we*(.215638*we-1.06021)))}const _r=me.sub(le)._mult(qt)._add(le)._unit()._mult(Ut?-1:1);this.addHalfVertex(X,_r.x,_r.y,!1,Ut,0,U)}}re&&this.addCurrentVertex(X,me,-Nt,-wt,U)}else if(Pt==="butt")this.addCurrentVertex(X,De,0,0,U);else if(Pt==="square"){const yt=Q?1:-1;this.addCurrentVertex(X,De,yt,yt,U)}else Pt==="round"&&(Q&&(this.addCurrentVertex(X,le,0,0,U),this.addCurrentVertex(X,le,1,1,U,!0)),re&&(this.addCurrentVertex(X,me,-1,-1,U,!0),this.addCurrentVertex(X,me,0,0,U)));if(Mt&&ve<P-1){const yt=X.dist(re);if(yt>2*B){const Nt=X.add(re.sub(X)._mult(B/yt)._round());this.updateDistance(X,Nt),this.addCurrentVertex(Nt,me,0,0,U),X=Nt}}}}addCurrentVertex(n,l,h,m,v,x=!1){const S=l.y*m-l.x,P=-l.y-l.x*m;this.addHalfVertex(n,l.x+l.y*h,l.y-l.x*h,x,!1,h,v),this.addHalfVertex(n,S,P,x,!0,-m,v),this.distance>i2/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,h,m,v,x))}addHalfVertex({x:n,y:l},h,m,v,x,S,P){const z=.5*(this.lineClips?this.scaledDistance*(i2-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,B),P.primitiveLength++),x?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let o2,a2;Bt("LineBucket",j0,{omit:["layers","patternFeatures"]});var s2={get paint(){return a2=a2||new Rn({"line-opacity":new or(We.paint_line["line-opacity"]),"line-color":new or(We.paint_line["line-color"]),"line-translate":new Zt(We.paint_line["line-translate"]),"line-translate-anchor":new Zt(We.paint_line["line-translate-anchor"]),"line-width":new or(We.paint_line["line-width"]),"line-gap-width":new or(We.paint_line["line-gap-width"]),"line-offset":new or(We.paint_line["line-offset"]),"line-blur":new or(We.paint_line["line-blur"]),"line-dasharray":new bh(We.paint_line["line-dasharray"]),"line-pattern":new rc(We.paint_line["line-pattern"]),"line-gradient":new wh(We.paint_line["line-gradient"])})},get layout(){return o2=o2||new Rn({"line-cap":new Zt(We.layout_line["line-cap"]),"line-join":new or(We.layout_line["line-join"]),"line-miter-limit":new Zt(We.layout_line["line-miter-limit"]),"line-round-limit":new Zt(We.layout_line["line-round-limit"]),"line-sort-key":new or(We.layout_line["line-sort-key"])})}};class CL extends or{possiblyEvaluate(n,l){return l=new cn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,h,m){return l=W({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,h,m)}}let Mm;class IL extends yo{constructor(n){super(n,s2),this.gradientVersion=0,Mm||(Mm=new CL(s2.paint.properties["line-width"].specification),Mm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Wa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=Mm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new j0(n)}queryRadius(n){const l=n,h=l2(Ah("line-width",this,l),Ah("line-gap-width",this,l)),m=Ah("line-offset",this,l);return h/2+Math.abs(m)+Tm(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,h,m,v,x,S){const P=Pm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),z=S/2*l2(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),B=this.paint.get("line-offset").evaluate(l,h);return B&&(m=function(U,X){const Q=[];for(let re=0;re<U.length;re++){const le=U[re],me=[];for(let ve=0;ve<le.length;ve++){const De=le[ve-1],we=le[ve],Le=le[ve+1],Ge=ve===0?new A(0,0):we.sub(De)._unit()._perp(),at=ve===le.length-1?new A(0,0):Le.sub(we)._unit()._perp(),Mt=Ge._add(at)._unit(),Ut=Mt.x*at.x+Mt.y*at.y;Ut!==0&&Mt._mult(1/Ut),me.push(Mt._mult(X)._add(we))}Q.push(me)}return Q}(m,B*S)),function(U,X,Q){for(let re=0;re<X.length;re++){const le=X[re];if(U.length>=3){for(let me=0;me<le.length;me++)if(fu(U,le[me]))return!0}if(zD(U,le,Q))return!0}return!1}(P,m,z)}isTileClipped(){return!0}}function l2(a,n){return n>0?n+2*a:a}const TL=_n([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),PL=_n([{name:"a_projected_pos",components:3,type:"Float32"}],4);_n([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const kL=_n([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_n([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const c2=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),EL=_n([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function AL(a,n,l){return a.sections.forEach(h=>{h.text=function(m,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),ro.applyArabicShaping&&(m=ro.applyArabicShaping(m)),m}(h.text,n,l)}),a}_n([{name:"triangle",components:3,type:"Uint16"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),_n([{type:"Float32",name:"offsetX"}]),_n([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),_n([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Fh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var qn=24,u2=Yr,d2=function(a,n,l,h,m){var v,x,S=8*m-h-1,P=(1<<S)-1,z=P>>1,B=-7,U=m-1,X=-1,Q=a[n+U];for(U+=X,v=Q&(1<<-B)-1,Q>>=-B,B+=S;B>0;v=256*v+a[n+U],U+=X,B-=8);for(x=v&(1<<-B)-1,v>>=-B,B+=h;B>0;x=256*x+a[n+U],U+=X,B-=8);if(v===0)v=1-z;else{if(v===P)return x?NaN:1/0*(Q?-1:1);x+=Math.pow(2,h),v-=z}return(Q?-1:1)*x*Math.pow(2,v-h)},h2=function(a,n,l,h,m,v){var x,S,P,z=8*v-m-1,B=(1<<z)-1,U=B>>1,X=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=0,re=1,le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=B):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+U>=1?X/P:X*Math.pow(2,1-U))*P>=2&&(x++,P/=2),x+U>=B?(S=0,x=B):x+U>=1?(S=(n*P-1)*Math.pow(2,m),x+=U):(S=n*Math.pow(2,U-1)*Math.pow(2,m),x=0));m>=8;a[l+Q]=255&S,Q+=re,S/=256,m-=8);for(x=x<<m|S,z+=m;z>0;a[l+Q]=255&x,Q+=re,x/=256,z-=8);a[l+Q-re]|=128*le};function Yr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Yr.Varint=0,Yr.Fixed64=1,Yr.Bytes=2,Yr.Fixed32=5;var V0=4294967296,p2=1/V0,f2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Cs(a){return a.type===Yr.Bytes?a.readVarint()+a.pos:a.pos+1}function vu(a,n,l){return l?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function m2(a,n,l){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(h);for(var m=l.pos-1;m>=a;m--)l.buf[m+h]=l.buf[m]}function zL(a,n){for(var l=0;l<a.length;l++)n.writeVarint(a[l])}function RL(a,n){for(var l=0;l<a.length;l++)n.writeSVarint(a[l])}function ML(a,n){for(var l=0;l<a.length;l++)n.writeFloat(a[l])}function DL(a,n){for(var l=0;l<a.length;l++)n.writeDouble(a[l])}function LL(a,n){for(var l=0;l<a.length;l++)n.writeBoolean(a[l])}function $L(a,n){for(var l=0;l<a.length;l++)n.writeFixed32(a[l])}function OL(a,n){for(var l=0;l<a.length;l++)n.writeSFixed32(a[l])}function BL(a,n){for(var l=0;l<a.length;l++)n.writeFixed64(a[l])}function FL(a,n){for(var l=0;l<a.length;l++)n.writeSFixed64(a[l])}function Dm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function _u(a,n,l){a[l]=n,a[l+1]=n>>>8,a[l+2]=n>>>16,a[l+3]=n>>>24}function g2(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Yr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,a(m,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=Dm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=g2(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Dm(this.buf,this.pos)+Dm(this.buf,this.pos+4)*V0;return this.pos+=8,a},readSFixed64:function(){var a=Dm(this.buf,this.pos)+g2(this.buf,this.pos+4)*V0;return this.pos+=8,a},readFloat:function(){var a=d2(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=d2(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,l,h=this.buf;return n=127&(l=h[this.pos++]),l<128?n:(n|=(127&(l=h[this.pos++]))<<7,l<128?n:(n|=(127&(l=h[this.pos++]))<<14,l<128?n:(n|=(127&(l=h[this.pos++]))<<21,l<128?n:function(m,v,x){var S,P,z=x.buf;if(S=(112&(P=z[x.pos++]))>>4,P<128||(S|=(127&(P=z[x.pos++]))<<3,P<128)||(S|=(127&(P=z[x.pos++]))<<10,P<128)||(S|=(127&(P=z[x.pos++]))<<17,P<128)||(S|=(127&(P=z[x.pos++]))<<24,P<128)||(S|=(1&(P=z[x.pos++]))<<31,P<128))return vu(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&f2?function(l,h,m){return f2.decode(l.subarray(h,m))}(this.buf,n,a):function(l,h,m){for(var v="",x=h;x<m;){var S,P,z,B=l[x],U=null,X=B>239?4:B>223?3:B>191?2:1;if(x+X>m)break;X===1?B<128&&(U=B):X===2?(192&(S=l[x+1]))==128&&(U=(31&B)<<6|63&S)<=127&&(U=null):X===3?(P=l[x+2],(192&(S=l[x+1]))==128&&(192&P)==128&&((U=(15&B)<<12|(63&S)<<6|63&P)<=2047||U>=55296&&U<=57343)&&(U=null)):X===4&&(P=l[x+2],z=l[x+3],(192&(S=l[x+1]))==128&&(192&P)==128&&(192&z)==128&&((U=(15&B)<<18|(63&S)<<12|(63&P)<<6|63&z)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,X=1):U>65535&&(U-=65536,v+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),v+=String.fromCharCode(U),x+=X}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Yr.Bytes)return a.push(this.readVarint(n));var l=Cs(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Yr.Bytes)return a.push(this.readSVarint());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Yr.Bytes)return a.push(this.readBoolean());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Yr.Bytes)return a.push(this.readFloat());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Yr.Bytes)return a.push(this.readDouble());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Yr.Bytes)return a.push(this.readFixed32());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Yr.Bytes)return a.push(this.readSFixed32());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Yr.Bytes)return a.push(this.readFixed64());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Yr.Bytes)return a.push(this.readSFixed64());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Yr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Yr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Yr.Fixed32)this.pos+=4;else{if(n!==Yr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),_u(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),_u(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),_u(this.buf,-1&a,this.pos),_u(this.buf,Math.floor(a*p2),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),_u(this.buf,-1&a,this.pos),_u(this.buf,Math.floor(a*p2),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,l){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,l),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,m,v){for(var x,S,P=0;P<m.length;P++){if((x=m.charCodeAt(P))>55295&&x<57344){if(!S){x>56319||P+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,a,this.pos);var l=this.pos-n;l>=128&&m2(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),h2(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),h2(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,n){this.pos++;var l=this.pos;a(n,this);var h=this.pos-l;h>=128&&m2(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,l){this.writeTag(a,Yr.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,zL,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,RL,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,LL,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,ML,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,DL,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,$L,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,OL,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,BL,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,FL,n)},writeBytesField:function(a,n){this.writeTag(a,Yr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Yr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Yr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Yr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Yr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Yr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Yr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Yr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Yr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Yr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var U0=w(u2);const H0=3;function NL(a,n,l){a===1&&l.readMessage(jL,n)}function jL(a,n,l){if(a===3){const{id:h,bitmap:m,width:v,height:x,left:S,top:P,advance:z}=l.readMessage(VL,{});n.push({id:h,bitmap:new Rh({width:v+2*H0,height:x+2*H0},m),metrics:{width:v,height:x,left:S,top:P,advance:z}})}}function VL(a,n,l){a===1?n.id=l.readVarint():a===2?n.bitmap=l.readBytes():a===3?n.width=l.readVarint():a===4?n.height=l.readVarint():a===5?n.left=l.readSVarint():a===6?n.top=l.readSVarint():a===7&&(n.advance=l.readVarint())}const y2=H0;function v2(a){let n=0,l=0;for(const x of a)n+=x.w*x.h,l=Math.max(l,x.w);a.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}];let m=0,v=0;for(const x of a)for(let S=h.length-1;S>=0;S--){const P=h[S];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===P.w&&x.h===P.h){const z=h.pop();S<h.length&&(h[S]=z)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const io=1;class W0{constructor(n,{pixelRatio:l,version:h,stretchX:m,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+io,this.paddedRect.y+io]}get br(){return[this.paddedRect.x+this.paddedRect.w-io,this.paddedRect.y+this.paddedRect.h-io]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*io)/this.pixelRatio,(this.paddedRect.h-2*io)/this.pixelRatio]}}class _2{constructor(n,l){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(l,m,v);const{w:x,h:S}=v2(v),P=new zo({width:x||1,height:S||1});for(const z in n){const B=n[z],U=h[z].paddedRect;zo.copy(B.data,P,{x:0,y:0},{x:U.x+io,y:U.y+io},B.data)}for(const z in l){const B=l[z],U=m[z].paddedRect,X=U.x+io,Q=U.y+io,re=B.data.width,le=B.data.height;zo.copy(B.data,P,{x:0,y:0},{x:X,y:Q},B.data),zo.copy(B.data,P,{x:0,y:le-1},{x:X,y:Q-1},{width:re,height:1}),zo.copy(B.data,P,{x:0,y:0},{x:X,y:Q+le},{width:re,height:1}),zo.copy(B.data,P,{x:re-1,y:0},{x:X-1,y:Q},{width:1,height:le}),zo.copy(B.data,P,{x:0,y:0},{x:X+re,y:Q},{width:1,height:le})}this.image=P,this.iconPositions=h,this.patternPositions=m}addImages(n,l,h){for(const m in n){const v=n[m],x={x:0,y:0,w:v.data.width+2*io,h:v.data.height+2*io};h.push(x),l[m]=new W0(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),l)}patchUpdatedImage(n,l,h){if(!n||!l||n.version===l.version)return;n.version=l.version;const[m,v]=n.tl;h.update(l.data,void 0,{x:m,y:v})}}var ol;Bt("ImagePosition",W0),Bt("ImageAtlas",_2),c.ai=void 0,(ol=c.ai||(c.ai={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const Nh=-17;class jh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){const h=new jh;return h.scale=n||1,h.fontStack=l,h}static forImage(n){const l=new jh;return l.imageName=n,l}}class xu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){const h=new xu;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,l)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;l+=m&&mm(m)&&!Fh[n[h+1]]||v&&mm(v)&&!Fh[n[h-1]]||!Fh[n[h]]?n[h]:Fh[n[h]]}return l}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&$m[this.text.charCodeAt(h)];h++)n++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&$m[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){const h=new xu;return h.text=this.text.substring(n,l),h.sectionIndex=this.sectionIndex.slice(n,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(jh.forText(n.scale,n.fontStack||l));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const l=n.image?n.image.name:"";if(l.length===0)return void et("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(jh.forImage(l)),this.sectionIndex.push(this.sections.length-1)):et("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lm(a,n,l,h,m,v,x,S,P,z,B,U,X,Q,re,le){const me=xu.fromFeature(a,m);let ve;U===c.ai.vertical&&me.verticalizePunctuation();const{processBidirectionalText:De,processStyledBidirectionalText:we}=ro;if(De&&me.sections.length===1){ve=[];const at=De(me.toString(),G0(me,z,v,n,h,Q,re));for(const Mt of at){const Ut=new xu;Ut.text=Mt,Ut.sections=me.sections;for(let At=0;At<Mt.length;At++)Ut.sectionIndex.push(0);ve.push(Ut)}}else if(we){ve=[];const at=we(me.text,me.sectionIndex,G0(me,z,v,n,h,Q,re));for(const Mt of at){const Ut=new xu;Ut.text=Mt[0],Ut.sectionIndex=Mt[1],Ut.sections=me.sections,ve.push(Ut)}}else ve=function(at,Mt){const Ut=[],At=at.text;let Pt=0;for(const yt of Mt)Ut.push(at.substring(Pt,yt)),Pt=yt;return Pt<At.length&&Ut.push(at.substring(Pt,At.length)),Ut}(me,G0(me,z,v,n,h,Q,re));const Le=[],Ge={positionedLines:Le,text:me.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(at,Mt,Ut,At,Pt,yt,Nt,wt,ht,tr,qt,_r){let dn=0,mn=Nh,Zn=0,_o=0;const Vi=wt==="right"?1:wt==="left"?0:.5;let Nn=0;for(const Kn of Pt){Kn.trim();const Xn=Kn.getMaxScale(),Ti=(Xn-1)*qn,Wi={positionedGlyphs:[],lineOffset:0};at.positionedLines[Nn]=Wi;const Pi=Wi.positionedGlyphs;let oo=0;if(!Kn.length()){mn+=yt,++Nn;continue}for(let Jn=0;Jn<Kn.length();Jn++){const Tr=Kn.getSection(Jn),ki=Kn.getSectionIndex(Jn),yi=Kn.getCharCode(Jn);let Yn=0,ra=null,Ta=null,Pa=null,Is=qn;const na=!(ht===c.ai.horizontal||!qt&&!ph(yi)||qt&&($m[yi]||(ui=yi,Rt.Arabic(ui)||Rt["Arabic Supplement"](ui)||Rt["Arabic Extended-A"](ui)||Rt["Arabic Presentation Forms-A"](ui)||Rt["Arabic Presentation Forms-B"](ui))));if(Tr.imageName){const Mo=At[Tr.imageName];if(!Mo)continue;Pa=Tr.imageName,at.iconsInText=at.iconsInText||!0,Ta=Mo.paddedRect;const so=Mo.displaySize;Tr.scale=Tr.scale*qn/_r,ra={width:so[0],height:so[1],left:io,top:-y2,advance:na?so[1]:so[0]},Yn=Ti+(qn-so[1]*Tr.scale),Is=ra.advance;const Ts=na?so[0]*Tr.scale-qn*Xn:so[1]*Tr.scale-qn*Xn;Ts>0&&Ts>oo&&(oo=Ts)}else{const Mo=Ut[Tr.fontStack],so=Mo&&Mo[yi];if(so&&so.rect)Ta=so.rect,ra=so.metrics;else{const Ts=Mt[Tr.fontStack],Gh=Ts&&Ts[yi];if(!Gh)continue;ra=Gh.metrics}Yn=(Xn-Tr.scale)*qn}na?(at.verticalizable=!0,Pi.push({glyph:yi,imageName:Pa,x:dn,y:mn+Yn,vertical:na,scale:Tr.scale,fontStack:Tr.fontStack,sectionIndex:ki,metrics:ra,rect:Ta}),dn+=Is*Tr.scale+tr):(Pi.push({glyph:yi,imageName:Pa,x:dn,y:mn+Yn,vertical:na,scale:Tr.scale,fontStack:Tr.fontStack,sectionIndex:ki,metrics:ra,rect:Ta}),dn+=ra.advance*Tr.scale+tr)}Pi.length!==0&&(Zn=Math.max(dn-tr,Zn),WL(Pi,0,Pi.length-1,Vi,oo)),dn=0;const ao=yt*Xn+oo;Wi.lineOffset=Math.max(oo,Ti),mn+=ao,_o=Math.max(ao,_o),++Nn}var ui;const gi=mn-Nh,{horizontalAlign:Ui,verticalAlign:Hi}=q0(Nt);(function(Kn,Xn,Ti,Wi,Pi,oo,ao,Jn,Tr){const ki=(Xn-Ti)*Pi;let yi=0;yi=oo!==ao?-Jn*Wi-Nh:(-Wi*Tr+.5)*ao;for(const Yn of Kn)for(const ra of Yn.positionedGlyphs)ra.x+=ki,ra.y+=yi})(at.positionedLines,Vi,Ui,Hi,Zn,_o,yt,gi,Pt.length),at.top+=-Hi*gi,at.bottom=at.top+gi,at.left+=-Ui*Zn,at.right=at.left+Zn}(Ge,n,l,h,ve,x,S,P,U,z,X,le),!function(at){for(const Mt of at)if(Mt.positionedGlyphs.length!==0)return!1;return!0}(Le)&&Ge}const $m={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},UL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function x2(a,n,l,h,m,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*qn/v+m:0}{const x=l[n.fontStack],S=x&&x[a];return S?S.metrics.advance*n.scale+m:0}}function b2(a,n,l,h){const m=Math.pow(a-n,2);return h?a<n?m/2:2*m:m+Math.abs(l)*l}function HL(a,n,l){let h=0;return a===10&&(h-=1e4),l&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function w2(a,n,l,h,m,v){let x=null,S=b2(n,l,m,v);for(const P of h){const z=b2(n-P.x,l,m,v)+P.badness;z<=S&&(x=P,S=z)}return{index:a,x:n,priorBreak:x,badness:S}}function S2(a){return a?S2(a.priorBreak).concat(a.index):[]}function G0(a,n,l,h,m,v,x){if(v!=="point")return[];if(!a)return[];const S=[],P=function(X,Q,re,le,me,ve){let De=0;for(let we=0;we<X.length();we++){const Le=X.getSection(we);De+=x2(X.getCharCode(we),Le,le,me,Q,ve)}return De/Math.max(1,Math.ceil(De/re))}(a,n,l,h,m,x),z=a.text.indexOf("")>=0;let B=0;for(let X=0;X<a.length();X++){const Q=a.getSection(X),re=a.getCharCode(X);if($m[re]||(B+=x2(re,Q,h,m,n,x)),X<a.length()-1){const le=!((U=re)<11904||!(Rt["Bopomofo Extended"](U)||Rt.Bopomofo(U)||Rt["CJK Compatibility Forms"](U)||Rt["CJK Compatibility Ideographs"](U)||Rt["CJK Compatibility"](U)||Rt["CJK Radicals Supplement"](U)||Rt["CJK Strokes"](U)||Rt["CJK Symbols and Punctuation"](U)||Rt["CJK Unified Ideographs Extension A"](U)||Rt["CJK Unified Ideographs"](U)||Rt["Enclosed CJK Letters and Months"](U)||Rt["Halfwidth and Fullwidth Forms"](U)||Rt.Hiragana(U)||Rt["Ideographic Description Characters"](U)||Rt["Kangxi Radicals"](U)||Rt["Katakana Phonetic Extensions"](U)||Rt.Katakana(U)||Rt["Vertical Forms"](U)||Rt["Yi Radicals"](U)||Rt["Yi Syllables"](U)));(UL[re]||le||Q.imageName)&&S.push(w2(X+1,B,P,S,HL(re,a.getCharCode(X+1),le&&z),!1))}}var U;return S2(w2(a.length(),B,P,S,0,!0))}function q0(a){let n=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function WL(a,n,l,h,m){if(!h&&!m)return;const v=a[l],x=(a[l].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=l;S++)a[S].x-=x,a[S].y+=m}function GL(a,n,l){const{horizontalAlign:h,verticalAlign:m}=q0(l),v=n[0]-a.displaySize[0]*h,x=n[1]-a.displaySize[1]*m;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function C2(a,n,l,h,m,v){const x=a.image;let S;if(x.content){const me=x.content,ve=x.pixelRatio||1;S=[me[0]/ve,me[1]/ve,x.displaySize[0]-me[2]/ve,x.displaySize[1]-me[3]/ve]}const P=n.left*v,z=n.right*v;let B,U,X,Q;l==="width"||l==="both"?(Q=m[0]+P-h[3],U=m[0]+z+h[1]):(Q=m[0]+(P+z-x.displaySize[0])/2,U=Q+x.displaySize[0]);const re=n.top*v,le=n.bottom*v;return l==="height"||l==="both"?(B=m[1]+re-h[0],X=m[1]+le+h[2]):(B=m[1]+(re+le-x.displaySize[1])/2,X=B+x.displaySize[1]),{image:x,top:B,right:U,bottom:X,left:Q,collisionPadding:S}}const Vh=255,Xa=128,al=Vh*Xa;function I2(a,n){const{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new cn(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=l;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const S=h[v],P=h[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:P,minSize:l.evaluate(new cn(S)),maxSize:l.evaluate(new cn(P)),interpolationType:m}}}function Z0(a,n,l){let h="never";const m=a.get(n);return m?h=m:a.get(l)&&(h="always"),h}const qL=il.VectorTileFeature.types,ZL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Om(a,n,l,h,m,v,x,S,P,z,B,U,X){const Q=S?Math.min(al,Math.round(S[0])):0,re=S?Math.min(al,Math.round(S[1])):0;a.emplaceBack(n,l,Math.round(32*h),Math.round(32*m),v,x,(Q<<1)+(P?1:0),re,16*z,16*B,256*U,256*X)}function K0(a,n,l){a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l)}function KL(a){for(const n of a.sections)if(b0(n.text))return!0;return!1}class X0{constructor(n){this.layoutVertexArray=new xr,this.indexArray=new li,this.programConfigurations=n,this.segments=new un,this.dynamicLayoutVertexArray=new gr,this.opacityVertexArray=new Sr,this.hasVisibleVertices=!1,this.placedSymbolArray=new ze}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,TL.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,PL.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ZL,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",X0);class J0{constructor(n,l,h){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new h,this.segments=new un,this.collisionVertexArray=new nn}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,kL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",J0);class bu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=k0([]),this.placementViewportMatrix=k0([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=I2(this.zoom,l["text-size"]),this.iconSizeData=I2(this.zoom,l["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Z0(h,"text-overlap","text-allow-overlap")!=="never"||Z0(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>c.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new X0(new Ia(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new X0(new Ia(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Me,this.lineVertexArray=new qe,this.symbolInstances=new ye,this.textAnchorOffsets=new ot}calculateGlyphDependencies(n,l,h,m,v){for(let x=0;x<n.length;x++)if(l[n.charCodeAt(x)]=!0,(h||m)&&v){const S=Fh[n.charAt(x)];S&&(l[S.charCodeAt(0)]=!0)}}populate(n,l,h){const m=this.layers[0],v=m.layout,x=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),z=(S.value.kind!=="constant"||S.value.value instanceof jr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),B=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,U=v.get("symbol-sort-key");if(this.features=[],!z&&!B)return;const X=l.iconDependencies,Q=l.glyphDependencies,re=l.availableImages,le=new cn(this.zoom);for(const{feature:me,id:ve,index:De,sourceLayerIndex:we}of n){const Le=m._featureFilter.needGeometry,Ge=ac(me,Le);if(!m._featureFilter.filter(le,Ge,h))continue;let at,Mt;if(Le||(Ge.geometry=oc(me)),z){const At=m.getValueAndResolveTokens("text-field",Ge,h,re),Pt=jr.factory(At);KL(Pt)&&(this.hasRTLText=!0),(!this.hasRTLText||_h()==="unavailable"||this.hasRTLText&&ro.isParsed())&&(at=AL(Pt,m,Ge))}if(B){const At=m.getValueAndResolveTokens("icon-image",Ge,h,re);Mt=At instanceof yr?At:yr.fromString(At)}if(!at&&!Mt)continue;const Ut=this.sortFeaturesByKey?U.evaluate(Ge,{},h):void 0;if(this.features.push({id:ve,text:at,icon:Mt,index:De,sourceLayerIndex:we,geometry:Ge.geometry,properties:me.properties,type:qL[me.type],sortKey:Ut}),Mt&&(X[Mt.name]=!0),at){const At=x.evaluate(Ge,{},h).join(","),Pt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const yt of at.sections)if(yt.image)X[yt.image.name]=!0;else{const Nt=dh(at.toString()),wt=yt.fontStack||At,ht=Q[wt]=Q[wt]||{};this.calculateGlyphDependencies(yt.text,ht,Pt,this.allowVerticalPlacement,Nt)}}}v.get("symbol-placement")==="line"&&(this.features=function(me){const ve={},De={},we=[];let Le=0;function Ge(At){we.push(me[At]),Le++}function at(At,Pt,yt){const Nt=De[At];return delete De[At],De[Pt]=Nt,we[Nt].geometry[0].pop(),we[Nt].geometry[0]=we[Nt].geometry[0].concat(yt[0]),Nt}function Mt(At,Pt,yt){const Nt=ve[Pt];return delete ve[Pt],ve[At]=Nt,we[Nt].geometry[0].shift(),we[Nt].geometry[0]=yt[0].concat(we[Nt].geometry[0]),Nt}function Ut(At,Pt,yt){const Nt=yt?Pt[0][Pt[0].length-1]:Pt[0][0];return`${At}:${Nt.x}:${Nt.y}`}for(let At=0;At<me.length;At++){const Pt=me[At],yt=Pt.geometry,Nt=Pt.text?Pt.text.toString():null;if(!Nt){Ge(At);continue}const wt=Ut(Nt,yt),ht=Ut(Nt,yt,!0);if(wt in De&&ht in ve&&De[wt]!==ve[ht]){const tr=Mt(wt,ht,yt),qt=at(wt,ht,we[tr].geometry);delete ve[wt],delete De[ht],De[Ut(Nt,we[qt].geometry,!0)]=qt,we[tr].geometry=null}else wt in De?at(wt,ht,yt):ht in ve?Mt(wt,ht,yt):(Ge(At),ve[wt]=Le-1,De[ht]=Le-1)}return we.filter(At=>At.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,ve)=>me.sortKey-ve.sortKey)}update(n,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(l[n.segment+1]),v=n.dist(l[n.segment]);const x={};for(let S=n.segment+1;S<l.length;S++)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const P=x[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,l,h,m,v,x,S,P,z,B,U,X){const Q=n.indexArray,re=n.layoutVertexArray,le=n.segments.prepareSegment(4*l.length,re,Q,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,ve=le.vertexLength,De=this.allowVerticalPlacement&&S===c.ai.vertical?Math.PI/2:0,we=x.text&&x.text.sections;for(let Le=0;Le<l.length;Le++){const{tl:Ge,tr:at,bl:Mt,br:Ut,tex:At,pixelOffsetTL:Pt,pixelOffsetBR:yt,minFontScaleX:Nt,minFontScaleY:wt,glyphOffset:ht,isSDF:tr,sectionIndex:qt}=l[Le],_r=le.vertexLength,dn=ht[1];Om(re,P.x,P.y,Ge.x,dn+Ge.y,At.x,At.y,h,tr,Pt.x,Pt.y,Nt,wt),Om(re,P.x,P.y,at.x,dn+at.y,At.x+At.w,At.y,h,tr,yt.x,Pt.y,Nt,wt),Om(re,P.x,P.y,Mt.x,dn+Mt.y,At.x,At.y+At.h,h,tr,Pt.x,yt.y,Nt,wt),Om(re,P.x,P.y,Ut.x,dn+Ut.y,At.x+At.w,At.y+At.h,h,tr,yt.x,yt.y,Nt,wt),K0(n.dynamicLayoutVertexArray,P,De),Q.emplaceBack(_r,_r+1,_r+2),Q.emplaceBack(_r+1,_r+2,_r+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ht[0]),Le!==l.length-1&&qt===l[Le+1].sectionIndex||n.programConfigurations.populatePaintArrays(re.length,x,x.index,{},X,we&&we[qt])}n.placedSymbolArray.emplaceBack(P.x,P.y,me,this.glyphOffsetArray.length-me,ve,z,B,P.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,U)}_addCollisionDebugVertex(n,l,h,m,v,x){return l.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,l,h,m,v,x,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),z=P.vertexLength,B=v.layoutVertexArray,U=v.collisionVertexArray,X=S.anchorX,Q=S.anchorY;this._addCollisionDebugVertex(B,U,x,X,Q,new A(n,l)),this._addCollisionDebugVertex(B,U,x,X,Q,new A(h,l)),this._addCollisionDebugVertex(B,U,x,X,Q,new A(h,m)),this._addCollisionDebugVertex(B,U,x,X,Q,new A(n,m)),P.vertexLength+=4;const re=v.indexArray;re.emplaceBack(z,z+1),re.emplaceBack(z+1,z+2),re.emplaceBack(z+2,z+3),re.emplaceBack(z+3,z),P.primitiveLength+=4}addDebugCollisionBoxes(n,l,h,m){for(let v=n;v<l;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new J0(Pn,c2.members,Wn),this.iconCollisionBox=new J0(Pn,c2.members,Wn);for(let n=0;n<this.symbolInstances.length;n++){const l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,h,m,v,x,S,P,z){const B={};for(let U=l;U<h;U++){const X=n.get(U);B.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},B.textFeatureIndex=X.featureIndex;break}for(let U=m;U<v;U++){const X=n.get(U);B.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},B.verticalTextFeatureIndex=X.featureIndex;break}for(let U=x;U<S;U++){const X=n.get(U);B.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},B.iconFeatureIndex=X.featureIndex;break}for(let U=P;U<z;U++){const X=n.get(U);B.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},B.verticalIconFeatureIndex=X.featureIndex;break}return B}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){const h=n.placedSymbolArray.get(l),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(n),h=Math.cos(n),m=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const P=this.symbolInstances.get(S);m.push(0|Math.round(l*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((S,P)=>m[S]-m[P]||v[P]-v[S]),x}addToSortKeyRanges(n,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let T2,P2;Bt("SymbolBucket",bu,{omit:["layers","collisionBoxArray","features","compareText"]}),bu.MAX_GLYPHS=65535,bu.addDynamicAttributes=K0;var Y0={get paint(){return P2=P2||new Rn({"icon-opacity":new or(We.paint_symbol["icon-opacity"]),"icon-color":new or(We.paint_symbol["icon-color"]),"icon-halo-color":new or(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new or(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new or(We.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new or(We.paint_symbol["text-opacity"]),"text-color":new or(We.paint_symbol["text-color"],{runtimeType:Et,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new or(We.paint_symbol["text-halo-color"]),"text-halo-width":new or(We.paint_symbol["text-halo-width"]),"text-halo-blur":new or(We.paint_symbol["text-halo-blur"]),"text-translate":new Zt(We.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(We.paint_symbol["text-translate-anchor"])})},get layout(){return T2=T2||new Rn({"symbol-placement":new Zt(We.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new or(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(We.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(We.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new or(We.layout_symbol["icon-size"]),"icon-text-fit":new Zt(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new or(We.layout_symbol["icon-image"]),"icon-rotate":new or(We.layout_symbol["icon-rotate"]),"icon-padding":new or(We.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(We.layout_symbol["icon-keep-upright"]),"icon-offset":new or(We.layout_symbol["icon-offset"]),"icon-anchor":new or(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(We.layout_symbol["text-rotation-alignment"]),"text-field":new or(We.layout_symbol["text-field"]),"text-font":new or(We.layout_symbol["text-font"]),"text-size":new or(We.layout_symbol["text-size"]),"text-max-width":new or(We.layout_symbol["text-max-width"]),"text-line-height":new Zt(We.layout_symbol["text-line-height"]),"text-letter-spacing":new or(We.layout_symbol["text-letter-spacing"]),"text-justify":new or(We.layout_symbol["text-justify"]),"text-radial-offset":new or(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(We.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new or(We.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new or(We.layout_symbol["text-anchor"]),"text-max-angle":new Zt(We.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(We.layout_symbol["text-writing-mode"]),"text-rotate":new or(We.layout_symbol["text-rotate"]),"text-padding":new Zt(We.layout_symbol["text-padding"]),"text-keep-upright":new Zt(We.layout_symbol["text-keep-upright"]),"text-transform":new or(We.layout_symbol["text-transform"]),"text-offset":new or(We.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(We.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(We.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(We.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(We.layout_symbol["text-optional"])})}};class k2{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:He,this.defaultValue=n}evaluate(n){if(n.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",k2,{omit:["defaultValue"]});class Bm extends yo{constructor(n){super(n,Y0)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,h,m){const v=this.layout.get(n).evaluate(l,{},h,m),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||tu(x.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(z,B)=>S&&B in S?String(S[B]):"")}(l.properties,v)}createBucket(n){return new bu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Y0.paint.overridableProperties){if(!Bm.hasPaintOverride(this.layout,n))continue;const l=this.paint.get(n),h=new k2(l),m=new oh(h,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new ah("source",m):new nu("composite",m,l.value.zoomStops),this.paint._values[n]=new Ci(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Bm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){const h=n.get("text-field"),m=Y0.paint.properties[l];let v=!1;const x=S=>{for(const P of S)if(m.overrides&&m.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof jr)x(h.value.value.sections);else if(h.value.kind==="source"){const S=z=>{v||(z instanceof _a&&Vr(z.value)===ce?x(z.value.sections):z instanceof eu?x(z.sections):z.eachChild(S))},P=h.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let E2;var XL={get paint(){return E2=E2||new Rn({"background-color":new Zt(We.paint_background["background-color"]),"background-pattern":new bh(We.paint_background["background-pattern"]),"background-opacity":new Zt(We.paint_background["background-opacity"])})}};class JL extends yo{constructor(n){super(n,XL)}}let A2;var YL={get paint(){return A2=A2||new Rn({"raster-opacity":new Zt(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(We.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(We.paint_raster["raster-saturation"]),"raster-contrast":new Zt(We.paint_raster["raster-contrast"]),"raster-resampling":new Zt(We.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(We.paint_raster["raster-fade-duration"])})}};class QL extends yo{constructor(n){super(n,YL)}}class e$ extends yo{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class t${constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Q0=63710088e-1;class sl{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sl(ie(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const l=Math.PI/180,h=this.lat*l,m=n.lat*l,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*l);return Q0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof sl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new sl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new sl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const z2=2*Math.PI*Q0;function R2(a){return z2*Math.cos(a*Math.PI/180)}function M2(a){return(180+a)/360}function D2(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function L2(a,n){return a/R2(n)}function $2(a){return 360*a-180}function e_(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Fm{constructor(n,l,h=0){this.x=+n,this.y=+l,this.z=+h}static fromLngLat(n,l=0){const h=sl.convert(n);return new Fm(M2(h.lng),D2(h.lat),L2(l,h.lat))}toLngLat(){return new sl($2(this.x),e_(this.y))}toAltitude(){return this.z*R2(e_(this.y))}meterInMercatorCoordinateUnits(){return 1/z2*(n=e_(this.y),1/Math.cos(n*Math.PI/180));var n}}function O2(a,n,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class t_{constructor(n,l,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||l<0||l>=Math.pow(2,n))throw new Error(`x=${l}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=h,this.key=Uh(0,n,n,l,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,h){const m=(x=this.y,S=this.z,P=O2(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),z=O2(256*(v+1),256*(x+1),S),P[0]+","+P[1]+","+z[0]+","+z[1]);var v,x,S,P,z;const B=function(U,X,Q){let re,le="";for(let me=U;me>0;me--)re=1<<me-1,le+=(X&re?1:0)+(Q&re?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){const l=Math.pow(2,this.z);return new A((n.x*l-this.x)*Fn,(n.y*l-this.y)*Fn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class B2{constructor(n,l){this.wrap=n,this.canonical=l,this.key=Uh(n,l.z,l.z,l.x,l.y)}}class Ro{constructor(n,l,h,m,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=l,this.canonical=new t_(h,+m,+v),this.key=Uh(l,n,h,m,v)}clone(){return new Ro(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-n;return n>this.canonical.z?new Ro(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ro(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Uh(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):Uh(this.wrap*+l,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Ro(l,this.wrap,l,h,m),new Ro(l,this.wrap,l,h+1,m),new Ro(l,this.wrap,l,h,m+1),new Ro(l,this.wrap,l,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Ro(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new B2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Fm(n.x-this.wrap,n.y))}}function Uh(a,n,l,h,m){(a*=2)<0&&(a=-1*a-1);const v=1<<l;return(v*v*a+v*m+h).toString(36)+l.toString(36)+n.toString(36)}Bt("CanonicalTileID",t_),Bt("OverscaledTileID",Ro,{omit:["posMatrix"]});class F2{constructor(n,l,h,m=1,v=1,x=1,S=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void et(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const P=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<P;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(P,z)]=this.data[this._idx(P-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,P)]=this.data[this._idx(z,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<P;z++)for(let B=0;B<P;B++){const U=this.get(z,B);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}get(n,l){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,l);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,h){return n*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new zo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const P=-l*this.dim,z=-h*this.dim;for(let B=x;B<S;B++)for(let U=m;U<v;U++)this.data[this._idx(U,B)]=n.data[this._idx(U+P,B+z)]}}Bt("DEMData",F2);class N2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){const h=n[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class j2{constructor(n,l,h,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=h,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class V2{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Qs(Fn,16,0),this.grid3D=new Qs(Fn,16,0),this.featureIndexArray=new st,this.promoteId=l}insert(n,l,h,m,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const P=x?this.grid3D:this.grid;for(let z=0;z<l.length;z++){const B=l[z],U=[1/0,1/0,-1/0,-1/0];for(let X=0;X<B.length;X++){const Q=B[X];U[0]=Math.min(U[0],Q.x),U[1]=Math.min(U[1],Q.y),U[2]=Math.max(U[2],Q.x),U[3]=Math.max(U[3],Q.y)}U[0]<Fn&&U[1]<Fn&&U[2]>=0&&U[3]>=0&&P.insert(S,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new U0(this.rawTileData)).layers,this.sourceLayerCoder=new N2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,h,m){this.loadVTLayers();const v=n.params||{},x=Fn/n.tileSize/n.scale,S=lh(v.filter),P=n.queryGeometry,z=n.queryPadding*x,B=H2(P),U=this.grid.query(B.minX-z,B.minY-z,B.maxX+z,B.maxY+z),X=H2(n.cameraQueryGeometry),Q=this.grid3D.query(X.minX-z,X.minY-z,X.maxX+z,X.maxY+z,(me,ve,De,we)=>function(Le,Ge,at,Mt,Ut){for(const Pt of Le)if(Ge<=Pt.x&&at<=Pt.y&&Mt>=Pt.x&&Ut>=Pt.y)return!0;const At=[new A(Ge,at),new A(Ge,Ut),new A(Mt,Ut),new A(Mt,at)];if(Le.length>2){for(const Pt of At)if(fu(Le,Pt))return!0}for(let Pt=0;Pt<Le.length-1;Pt++)if(MD(Le[Pt],Le[Pt+1],At))return!0;return!1}(n.cameraQueryGeometry,me-z,ve-z,De+z,we+z));for(const me of Q)U.push(me);U.sort(r$);const re={};let le;for(let me=0;me<U.length;me++){const ve=U[me];if(ve===le)continue;le=ve;const De=this.featureIndexArray.get(ve);let we=null;this.loadMatchingFeature(re,De.bucketIndex,De.sourceLayerIndex,De.featureIndex,S,v.layers,v.availableImages,l,h,m,(Le,Ge,at)=>(we||(we=oc(Le)),Ge.queryIntersectsFeature(P,Le,at,we,this.z,n.transform,x,n.pixelPosMatrix)))}return re}loadMatchingFeature(n,l,h,m,v,x,S,P,z,B,U){const X=this.bucketLayerIDs[l];if(x&&!function(me,ve){for(let De=0;De<me.length;De++)if(ve.indexOf(me[De])>=0)return!0;return!1}(x,X))return;const Q=this.sourceLayerCoder.decode(h),re=this.vtLayers[Q].feature(m);if(v.needGeometry){const me=ac(re,!0);if(!v.filter(new cn(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!v.filter(new cn(this.tileID.overscaledZ),re))return;const le=this.getId(re,Q);for(let me=0;me<X.length;me++){const ve=X[me];if(x&&x.indexOf(ve)<0)continue;const De=P[ve];if(!De)continue;let we={};le&&B&&(we=B.getState(De.sourceLayer||"_geojsonTileLayer",le));const Le=W({},z[ve]);Le.paint=U2(Le.paint,De.paint,re,we,S),Le.layout=U2(Le.layout,De.layout,re,we,S);const Ge=!U||U(re,De,we);if(!Ge)continue;const at=new j2(re,this.z,this.x,this.y,le);at.layer=Le;let Mt=n[ve];Mt===void 0&&(Mt=n[ve]=[]),Mt.push({featureIndex:m,feature:at,intersectionZ:Ge})}}lookupSymbolFeatures(n,l,h,m,v,x,S,P){const z={};this.loadVTLayers();const B=lh(v);for(const U of n)this.loadMatchingFeature(z,h,m,U,B,x,S,P,l);return z}hasLayer(n){for(const l of this.bucketLayerIDs)for(const h of l)if(n===h)return!0;return!1}getId(n,l){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof h=="boolean"&&(h=Number(h))),h}}function U2(a,n,l,h,m){return _e(a,(v,x)=>{const S=n instanceof hu?n.get(x):null;return S&&S.evaluate?S.evaluate(l,h,m):S})}function H2(a){let n=1/0,l=1/0,h=-1/0,m=-1/0;for(const v of a)n=Math.min(n,v.x),l=Math.min(l,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:n,minY:l,maxX:h,maxY:m}}function r$(a,n){return n-a}function W2(a,n,l,h,m){const v=[];for(let x=0;x<a.length;x++){const S=a[x];let P;for(let z=0;z<S.length-1;z++){let B=S[z],U=S[z+1];B.x<n&&U.x<n||(B.x<n?B=new A(n,B.y+(n-B.x)/(U.x-B.x)*(U.y-B.y))._round():U.x<n&&(U=new A(n,B.y+(n-B.x)/(U.x-B.x)*(U.y-B.y))._round()),B.y<l&&U.y<l||(B.y<l?B=new A(B.x+(l-B.y)/(U.y-B.y)*(U.x-B.x),l)._round():U.y<l&&(U=new A(B.x+(l-B.y)/(U.y-B.y)*(U.x-B.x),l)._round()),B.x>=h&&U.x>=h||(B.x>=h?B=new A(h,B.y+(h-B.x)/(U.x-B.x)*(U.y-B.y))._round():U.x>=h&&(U=new A(h,B.y+(h-B.x)/(U.x-B.x)*(U.y-B.y))._round()),B.y>=m&&U.y>=m||(B.y>=m?B=new A(B.x+(m-B.y)/(U.y-B.y)*(U.x-B.x),m)._round():U.y>=m&&(U=new A(B.x+(m-B.y)/(U.y-B.y)*(U.x-B.x),m)._round()),P&&B.equals(P[P.length-1])||(P=[B],v.push(P)),P.push(U)))))}}return v}Bt("FeatureIndex",V2,{omit:["rawTileData","sourceLayerCoder"]});class ll extends A{constructor(n,l,h,m){super(n,l),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new ll(this.x,this.y,this.angle,this.segment)}}function G2(a,n,l,h,m){if(n.segment===void 0||l===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-l/2;){if(x--,x<0)return!1;S-=a[x].dist(v),v=a[x]}S+=a[x].dist(a[x+1]),x++;const P=[];let z=0;for(;S<l/2;){const B=a[x],U=a[x+1];if(!U)return!1;let X=a[x-1].angleTo(B)-B.angleTo(U);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:X}),z+=X;S-P[0].distance>h;)z-=P.shift().angleDelta;if(z>m)return!1;x++,S+=B.dist(U)}return!0}function q2(a){let n=0;for(let l=0;l<a.length-1;l++)n+=a[l].dist(a[l+1]);return n}function Z2(a,n,l){return a?.6*n*l:0}function K2(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function n$(a,n,l,h,m,v){const x=Z2(l,m,v),S=K2(l,h)*v;let P=0;const z=q2(a)/2;for(let B=0;B<a.length-1;B++){const U=a[B],X=a[B+1],Q=U.dist(X);if(P+Q>z){const re=(z-P)/Q,le=Qi.number(U.x,X.x,re),me=Qi.number(U.y,X.y,re),ve=new ll(le,me,X.angleTo(U),B);return ve._round(),!x||G2(a,ve,S,x,n)?ve:void 0}P+=Q}}function i$(a,n,l,h,m,v,x,S,P){const z=Z2(h,v,x),B=K2(h,m),U=B*x,X=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return n-U<n/4&&(n=U+n/4),X2(a,X?n/2*S%n:(B/2+2*v)*x*S%n,n,z,l,U,X,!1,P)}function X2(a,n,l,h,m,v,x,S,P){const z=v/2,B=q2(a);let U=0,X=n-l,Q=[];for(let re=0;re<a.length-1;re++){const le=a[re],me=a[re+1],ve=le.dist(me),De=me.angleTo(le);for(;X+l<U+ve;){X+=l;const we=(X-U)/ve,Le=Qi.number(le.x,me.x,we),Ge=Qi.number(le.y,me.y,we);if(Le>=0&&Le<P&&Ge>=0&&Ge<P&&X-z>=0&&X+z<=B){const at=new ll(Le,Ge,De,re);at._round(),h&&!G2(a,at,v,h,m)||Q.push(at)}}U+=ve}return S||Q.length||x||(Q=X2(a,U/2,l,h,m,v,x,!0,P)),Q}Bt("Anchor",ll);const wu=io;function J2(a,n,l,h){const m=[],v=a.image,x=v.pixelRatio,S=v.paddedRect.w-2*wu,P=v.paddedRect.h-2*wu,z=a.right-a.left,B=a.bottom-a.top,U=v.stretchX||[[0,S]],X=v.stretchY||[[0,P]],Q=(yt,Nt)=>yt+Nt[1]-Nt[0],re=U.reduce(Q,0),le=X.reduce(Q,0),me=S-re,ve=P-le;let De=0,we=re,Le=0,Ge=le,at=0,Mt=me,Ut=0,At=ve;if(v.content&&h){const yt=v.content;De=Nm(U,0,yt[0]),Le=Nm(X,0,yt[1]),we=Nm(U,yt[0],yt[2]),Ge=Nm(X,yt[1],yt[3]),at=yt[0]-De,Ut=yt[1]-Le,Mt=yt[2]-yt[0]-we,At=yt[3]-yt[1]-Ge}const Pt=(yt,Nt,wt,ht)=>{const tr=jm(yt.stretch-De,we,z,a.left),qt=Vm(yt.fixed-at,Mt,yt.stretch,re),_r=jm(Nt.stretch-Le,Ge,B,a.top),dn=Vm(Nt.fixed-Ut,At,Nt.stretch,le),mn=jm(wt.stretch-De,we,z,a.left),Zn=Vm(wt.fixed-at,Mt,wt.stretch,re),_o=jm(ht.stretch-Le,Ge,B,a.top),Vi=Vm(ht.fixed-Ut,At,ht.stretch,le),Nn=new A(tr,_r),ui=new A(mn,_r),gi=new A(mn,_o),Ui=new A(tr,_o),Hi=new A(qt/x,dn/x),Kn=new A(Zn/x,Vi/x),Xn=n*Math.PI/180;if(Xn){const Pi=Math.sin(Xn),oo=Math.cos(Xn),ao=[oo,-Pi,Pi,oo];Nn._matMult(ao),ui._matMult(ao),Ui._matMult(ao),gi._matMult(ao)}const Ti=yt.stretch+yt.fixed,Wi=Nt.stretch+Nt.fixed;return{tl:Nn,tr:ui,bl:Ui,br:gi,tex:{x:v.paddedRect.x+wu+Ti,y:v.paddedRect.y+wu+Wi,w:wt.stretch+wt.fixed-Ti,h:ht.stretch+ht.fixed-Wi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hi,pixelOffsetBR:Kn,minFontScaleX:Mt/x/z,minFontScaleY:At/x/B,isSDF:l}};if(h&&(v.stretchX||v.stretchY)){const yt=Y2(U,me,re),Nt=Y2(X,ve,le);for(let wt=0;wt<yt.length-1;wt++){const ht=yt[wt],tr=yt[wt+1];for(let qt=0;qt<Nt.length-1;qt++)m.push(Pt(ht,Nt[qt],tr,Nt[qt+1]))}}else m.push(Pt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return m}function Nm(a,n,l){let h=0;for(const m of a)h+=Math.max(n,Math.min(l,m[1]))-Math.max(n,Math.min(l,m[0]));return h}function Y2(a,n,l){const h=[{fixed:-wu,stretch:0}];for(const[m,v]of a){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return h.push({fixed:n+wu,stretch:l}),h}function jm(a,n,l,h){return a/n*l+h}function Vm(a,n,l,h){return a-n*l/h}class Um{constructor(n,l,h,m,v,x,S,P,z,B){if(this.boxStartIndex=n.length,z){let U=x.top,X=x.bottom;const Q=x.collisionPadding;Q&&(U-=Q[1],X+=Q[3]);let re=X-U;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{let U=x.top*S-P[0],X=x.bottom*S+P[2],Q=x.left*S-P[3],re=x.right*S+P[1];const le=x.collisionPadding;if(le&&(Q-=le[0]*S,U-=le[1]*S,re+=le[2]*S,X+=le[3]*S),B){const me=new A(Q,U),ve=new A(re,U),De=new A(Q,X),we=new A(re,X),Le=B*Math.PI/180;me._rotate(Le),ve._rotate(Le),De._rotate(Le),we._rotate(Le),Q=Math.min(me.x,ve.x,De.x,we.x),re=Math.max(me.x,ve.x,De.x,we.x),U=Math.min(me.y,ve.y,De.y,we.y),X=Math.max(me.y,ve.y,De.y,we.y)}n.emplaceBack(l.x,l.y,Q,U,re,X,h,m,v)}this.boxEndIndex=n.length}}class o${constructor(n=[],l=a$){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:l,compare:h}=this,m=l[n];for(;n>0;){const v=n-1>>1,x=l[v];if(h(m,x)>=0)break;l[n]=x,n=v}l[n]=m}_down(n){const{data:l,compare:h}=this,m=this.length>>1,v=l[n];for(;n<m;){let x=1+(n<<1),S=l[x];const P=x+1;if(P<this.length&&h(l[P],S)<0&&(x=P,S=l[P]),h(S,v)>=0)break;l[n]=S,n=x}l[n]=v}}function a$(a,n){return a<n?-1:a>n?1:0}function s$(a,n=1,l=!1){let h=1/0,m=1/0,v=-1/0,x=-1/0;const S=a[0];for(let Q=0;Q<S.length;Q++){const re=S[Q];(!Q||re.x<h)&&(h=re.x),(!Q||re.y<m)&&(m=re.y),(!Q||re.x>v)&&(v=re.x),(!Q||re.y>x)&&(x=re.y)}const P=Math.min(v-h,x-m);let z=P/2;const B=new o$([],l$);if(P===0)return new A(h,m);for(let Q=h;Q<v;Q+=P)for(let re=m;re<x;re+=P)B.push(new Su(Q+z,re+z,z,a));let U=function(Q){let re=0,le=0,me=0;const ve=Q[0];for(let De=0,we=ve.length,Le=we-1;De<we;Le=De++){const Ge=ve[De],at=ve[Le],Mt=Ge.x*at.y-at.x*Ge.y;le+=(Ge.x+at.x)*Mt,me+=(Ge.y+at.y)*Mt,re+=3*Mt}return new Su(le/re,me/re,0,Q)}(a),X=B.length;for(;B.length;){const Q=B.pop();(Q.d>U.d||!U.d)&&(U=Q,l&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,X)),Q.max-U.d<=n||(z=Q.h/2,B.push(new Su(Q.p.x-z,Q.p.y-z,z,a)),B.push(new Su(Q.p.x+z,Q.p.y-z,z,a)),B.push(new Su(Q.p.x-z,Q.p.y+z,z,a)),B.push(new Su(Q.p.x+z,Q.p.y+z,z,a)),X+=4)}return l&&(console.log(`num probes: ${X}`),console.log(`best distance: ${U.d}`)),U.p}function l$(a,n){return n.max-a.max}function Su(a,n,l,h){this.p=new A(a,n),this.h=l,this.d=function(m,v){let x=!1,S=1/0;for(let P=0;P<v.length;P++){const z=v[P];for(let B=0,U=z.length,X=U-1;B<U;X=B++){const Q=z[B],re=z[X];Q.y>m.y!=re.y>m.y&&m.x<(re.x-Q.x)*(m.y-Q.y)/(re.y-Q.y)+Q.x&&(x=!x),S=Math.min(S,DS(m,Q,re))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var mi;c.aq=void 0,(mi=c.aq||(c.aq={}))[mi.center=1]="center",mi[mi.left=2]="left",mi[mi.right=3]="right",mi[mi.top=4]="top",mi[mi.bottom=5]="bottom",mi[mi["top-left"]=6]="top-left",mi[mi["top-right"]=7]="top-right",mi[mi["bottom-left"]=8]="bottom-left",mi[mi["bottom-right"]=9]="bottom-right";const cl=7,r_=Number.POSITIVE_INFINITY;function Q2(a,n){return n[1]!==r_?function(l,h,m){let v=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),l){case"top-right":case"top-left":case"top":x=m-cl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+cl}switch(l){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(a,n[0],n[1]):function(l,h){let m=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(l){case"top-right":case"top-left":v=x-cl;break;case"bottom-right":case"bottom-left":v=-x+cl;break;case"bottom":v=-h+cl;break;case"top":v=h-cl}switch(l){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(a,n[0])}function eC(a,n,l){var h;const m=a.layout,v=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},l);if(v){const S=v.values,P=[];for(let z=0;z<S.length;z+=2){const B=P[z]=S[z],U=S[z+1].map(X=>X*qn);B.startsWith("top")?U[1]-=cl:B.startsWith("bottom")&&(U[1]+=cl),P[z+1]=U}return new er(P)}const x=m.get("text-variable-anchor");if(x){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},l)*qn,r_]:m.get("text-offset").evaluate(n,{},l).map(z=>z*qn);const P=[];for(const z of x)P.push(z,Q2(z,S));return new er(P)}return null}function n_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function c$(a,n,l,h,m,v,x,S,P,z,B){let U=v.textMaxSize.evaluate(n,{});U===void 0&&(U=x);const X=a.layers[0].layout,Q=X.get("icon-offset").evaluate(n,{},B),re=rC(l.horizontal),le=x/24,me=a.tilePixelRatio*le,ve=a.tilePixelRatio*U/24,De=a.tilePixelRatio*S,we=a.tilePixelRatio*X.get("symbol-spacing"),Le=X.get("text-padding")*a.tilePixelRatio,Ge=function(ht,tr,qt,_r=1){const dn=ht.get("icon-padding").evaluate(tr,{},qt),mn=dn&&dn.values;return[mn[0]*_r,mn[1]*_r,mn[2]*_r,mn[3]*_r]}(X,n,B,a.tilePixelRatio),at=X.get("text-max-angle")/180*Math.PI,Mt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",Ut=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",At=X.get("symbol-placement"),Pt=we/2,yt=X.get("icon-text-fit");let Nt;h&&yt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(Nt=C2(h,l.vertical,yt,X.get("icon-text-fit-padding"),Q,le)),re&&(h=C2(h,re,yt,X.get("icon-text-fit-padding"),Q,le)));const wt=(ht,tr)=>{tr.x<0||tr.x>=Fn||tr.y<0||tr.y>=Fn||function(qt,_r,dn,mn,Zn,_o,Vi,Nn,ui,gi,Ui,Hi,Kn,Xn,Ti,Wi,Pi,oo,ao,Jn,Tr,ki,yi,Yn,ra){const Ta=qt.addToLineVertexArray(_r,dn);let Pa,Is,na,Mo,so=0,Ts=0,Gh=0,aC=0,d_=-1,h_=-1;const Ps={};let sC=bs("");if(qt.allowVerticalPlacement&&mn.vertical){const Ei=Nn.layout.get("text-rotate").evaluate(Tr,{},Yn)+90;na=new Um(ui,_r,gi,Ui,Hi,mn.vertical,Kn,Xn,Ti,Ei),Vi&&(Mo=new Um(ui,_r,gi,Ui,Hi,Vi,Pi,oo,Ti,Ei))}if(Zn){const Ei=Nn.layout.get("icon-rotate").evaluate(Tr,{}),Do=Nn.layout.get("icon-text-fit")!=="none",lc=J2(Zn,Ei,yi,Do),Ea=Vi?J2(Vi,Ei,yi,Do):void 0;Is=new Um(ui,_r,gi,Ui,Hi,Zn,Pi,oo,!1,Ei),so=4*lc.length;const cc=qt.iconSizeData;let Ja=null;cc.kind==="source"?(Ja=[Xa*Nn.layout.get("icon-size").evaluate(Tr,{})],Ja[0]>al&&et(`${qt.layerIds[0]}: Value for "icon-size" is >= ${Vh}. Reduce your "icon-size".`)):cc.kind==="composite"&&(Ja=[Xa*ki.compositeIconSizes[0].evaluate(Tr,{},Yn),Xa*ki.compositeIconSizes[1].evaluate(Tr,{},Yn)],(Ja[0]>al||Ja[1]>al)&&et(`${qt.layerIds[0]}: Value for "icon-size" is >= ${Vh}. Reduce your "icon-size".`)),qt.addSymbols(qt.icon,lc,Ja,Jn,ao,Tr,c.ai.none,_r,Ta.lineStartIndex,Ta.lineLength,-1,Yn),d_=qt.icon.placedSymbolArray.length-1,Ea&&(Ts=4*Ea.length,qt.addSymbols(qt.icon,Ea,Ja,Jn,ao,Tr,c.ai.vertical,_r,Ta.lineStartIndex,Ta.lineLength,-1,Yn),h_=qt.icon.placedSymbolArray.length-1)}const lC=Object.keys(mn.horizontal);for(const Ei of lC){const Do=mn.horizontal[Ei];if(!Pa){sC=bs(Do.text);const Ea=Nn.layout.get("text-rotate").evaluate(Tr,{},Yn);Pa=new Um(ui,_r,gi,Ui,Hi,Do,Kn,Xn,Ti,Ea)}const lc=Do.positionedLines.length===1;if(Gh+=tC(qt,_r,Do,_o,Nn,Ti,Tr,Wi,Ta,mn.vertical?c.ai.horizontal:c.ai.horizontalOnly,lc?lC:[Ei],Ps,d_,ki,Yn),lc)break}mn.vertical&&(aC+=tC(qt,_r,mn.vertical,_o,Nn,Ti,Tr,Wi,Ta,c.ai.vertical,["vertical"],Ps,h_,ki,Yn));const h$=Pa?Pa.boxStartIndex:qt.collisionBoxArray.length,p$=Pa?Pa.boxEndIndex:qt.collisionBoxArray.length,f$=na?na.boxStartIndex:qt.collisionBoxArray.length,m$=na?na.boxEndIndex:qt.collisionBoxArray.length,g$=Is?Is.boxStartIndex:qt.collisionBoxArray.length,y$=Is?Is.boxEndIndex:qt.collisionBoxArray.length,v$=Mo?Mo.boxStartIndex:qt.collisionBoxArray.length,_$=Mo?Mo.boxEndIndex:qt.collisionBoxArray.length;let ka=-1;const Wm=(Ei,Do)=>Ei&&Ei.circleDiameter?Math.max(Ei.circleDiameter,Do):Do;ka=Wm(Pa,ka),ka=Wm(na,ka),ka=Wm(Is,ka),ka=Wm(Mo,ka);const cC=ka>-1?1:0;cC&&(ka*=ra/qn),qt.glyphOffsetArray.length>=bu.MAX_GLYPHS&&et("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tr.sortKey!==void 0&&qt.addToSortKeyRanges(qt.symbolInstances.length,Tr.sortKey);const x$=eC(Nn,Tr,Yn),[b$,w$]=function(Ei,Do){const lc=Ei.length,Ea=Do==null?void 0:Do.values;if((Ea==null?void 0:Ea.length)>0)for(let cc=0;cc<Ea.length;cc+=2){const Ja=Ea[cc+1];Ei.emplaceBack(c.aq[Ea[cc]],Ja[0],Ja[1])}return[lc,Ei.length]}(qt.textAnchorOffsets,x$);qt.symbolInstances.emplaceBack(_r.x,_r.y,Ps.right>=0?Ps.right:-1,Ps.center>=0?Ps.center:-1,Ps.left>=0?Ps.left:-1,Ps.vertical||-1,d_,h_,sC,h$,p$,f$,m$,g$,y$,v$,_$,gi,Gh,aC,so,Ts,cC,0,Kn,ka,b$,w$)}(a,tr,ht,l,h,m,Nt,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,me,[Le,Le,Le,Le],Mt,P,De,Ge,Ut,Q,n,v,z,B,x)};if(At==="line")for(const ht of W2(n.geometry,0,0,Fn,Fn)){const tr=i$(ht,we,at,l.vertical||re,h,24,ve,a.overscaling,Fn);for(const qt of tr)re&&u$(a,re.text,Pt,qt)||wt(ht,qt)}else if(At==="line-center"){for(const ht of n.geometry)if(ht.length>1){const tr=n$(ht,at,l.vertical||re,h,24,ve);tr&&wt(ht,tr)}}else if(n.type==="Polygon")for(const ht of L0(n.geometry,0)){const tr=s$(ht,16);wt(ht[0],new ll(tr.x,tr.y,0))}else if(n.type==="LineString")for(const ht of n.geometry)wt(ht,new ll(ht[0].x,ht[0].y,0));else if(n.type==="Point")for(const ht of n.geometry)for(const tr of ht)wt([tr],new ll(tr.x,tr.y,0))}function tC(a,n,l,h,m,v,x,S,P,z,B,U,X,Q,re){const le=function(De,we,Le,Ge,at,Mt,Ut,At){const Pt=Ge.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,yt=[];for(const Nt of we.positionedLines)for(const wt of Nt.positionedGlyphs){if(!wt.rect)continue;const ht=wt.rect||{};let tr=y2+1,qt=!0,_r=1,dn=0;const mn=(at||At)&&wt.vertical,Zn=wt.metrics.advance*wt.scale/2;if(At&&we.verticalizable&&(dn=Nt.lineOffset/2-(wt.imageName?-(qn-wt.metrics.width*wt.scale)/2:(wt.scale-1)*qn)),wt.imageName){const Jn=Ut[wt.imageName];qt=Jn.sdf,_r=Jn.pixelRatio,tr=io/_r}const _o=at?[wt.x+Zn,wt.y]:[0,0];let Vi=at?[0,0]:[wt.x+Zn+Le[0],wt.y+Le[1]-dn],Nn=[0,0];mn&&(Nn=Vi,Vi=[0,0]);const ui=wt.metrics.isDoubleResolution?2:1,gi=(wt.metrics.left-tr)*wt.scale-Zn+Vi[0],Ui=(-wt.metrics.top-tr)*wt.scale+Vi[1],Hi=gi+ht.w/ui*wt.scale/_r,Kn=Ui+ht.h/ui*wt.scale/_r,Xn=new A(gi,Ui),Ti=new A(Hi,Ui),Wi=new A(gi,Kn),Pi=new A(Hi,Kn);if(mn){const Jn=new A(-Zn,Zn-Nh),Tr=-Math.PI/2,ki=qn/2-Zn,yi=new A(5-Nh-ki,-(wt.imageName?ki:0)),Yn=new A(...Nn);Xn._rotateAround(Tr,Jn)._add(yi)._add(Yn),Ti._rotateAround(Tr,Jn)._add(yi)._add(Yn),Wi._rotateAround(Tr,Jn)._add(yi)._add(Yn),Pi._rotateAround(Tr,Jn)._add(yi)._add(Yn)}if(Pt){const Jn=Math.sin(Pt),Tr=Math.cos(Pt),ki=[Tr,-Jn,Jn,Tr];Xn._matMult(ki),Ti._matMult(ki),Wi._matMult(ki),Pi._matMult(ki)}const oo=new A(0,0),ao=new A(0,0);yt.push({tl:Xn,tr:Ti,bl:Wi,br:Pi,tex:ht,writingMode:we.writingMode,glyphOffset:_o,sectionIndex:wt.sectionIndex,isSDF:qt,pixelOffsetTL:oo,pixelOffsetBR:ao,minFontScaleX:0,minFontScaleY:0})}return yt}(0,l,S,m,v,x,h,a.allowVerticalPlacement),me=a.textSizeData;let ve=null;me.kind==="source"?(ve=[Xa*m.layout.get("text-size").evaluate(x,{})],ve[0]>al&&et(`${a.layerIds[0]}: Value for "text-size" is >= ${Vh}. Reduce your "text-size".`)):me.kind==="composite"&&(ve=[Xa*Q.compositeTextSizes[0].evaluate(x,{},re),Xa*Q.compositeTextSizes[1].evaluate(x,{},re)],(ve[0]>al||ve[1]>al)&&et(`${a.layerIds[0]}: Value for "text-size" is >= ${Vh}. Reduce your "text-size".`)),a.addSymbols(a.text,le,ve,S,v,x,z,n,P.lineStartIndex,P.lineLength,X,re);for(const De of B)U[De]=a.text.placedSymbolArray.length-1;return 4*le.length}function rC(a){for(const n in a)return a[n];return null}function u$(a,n,l,h){const m=a.compareText;if(n in m){const v=m[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<l)return!0}else m[n]=[];return m[n].push(h),!1}const nC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class i_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=nC[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new i_(S,x,v,n)}constructor(n,l=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=nC.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=l,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return o_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,P=[0,v.length-1,0],z=[];for(;P.length;){const B=P.pop()||0,U=P.pop()||0,X=P.pop()||0;if(U-X<=S){for(let me=X;me<=U;me++){const ve=x[2*me],De=x[2*me+1];ve>=n&&ve<=h&&De>=l&&De<=m&&z.push(v[me])}continue}const Q=X+U>>1,re=x[2*Q],le=x[2*Q+1];re>=n&&re<=h&&le>=l&&le<=m&&z.push(v[Q]),(B===0?n<=re:l<=le)&&(P.push(X),P.push(Q-1),P.push(1-B)),(B===0?h>=re:m>=le)&&(P.push(Q+1),P.push(U),P.push(1-B))}return z}within(n,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],P=[],z=h*h;for(;S.length;){const B=S.pop()||0,U=S.pop()||0,X=S.pop()||0;if(U-X<=x){for(let me=X;me<=U;me++)oC(v[2*me],v[2*me+1],n,l)<=z&&P.push(m[me]);continue}const Q=X+U>>1,re=v[2*Q],le=v[2*Q+1];oC(re,le,n,l)<=z&&P.push(m[Q]),(B===0?n-h<=re:l-h<=le)&&(S.push(X),S.push(Q-1),S.push(1-B)),(B===0?n+h>=re:l+h>=le)&&(S.push(Q+1),S.push(U),S.push(1-B))}return P}}function o_(a,n,l,h,m,v){if(m-h<=l)return;const x=h+m>>1;iC(a,n,x,h,m,v),o_(a,n,l,h,x-1,1-v),o_(a,n,l,x+1,m,1-v)}function iC(a,n,l,h,m,v){for(;m>h;){if(m-h>600){const z=m-h+1,B=l-h+1,U=Math.log(z),X=.5*Math.exp(2*U/3),Q=.5*Math.sqrt(U*X*(z-X)/z)*(B-z/2<0?-1:1);iC(a,n,l,Math.max(h,Math.floor(l-B*X/z+Q)),Math.min(m,Math.floor(l+(z-B)*X/z+Q)),v)}const x=n[2*l+v];let S=h,P=m;for(Hh(a,n,h,l),n[2*m+v]>x&&Hh(a,n,h,m);S<P;){for(Hh(a,n,S,P),S++,P--;n[2*S+v]<x;)S++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?Hh(a,n,h,P):(P++,Hh(a,n,P,m)),P<=l&&(h=P+1),l<=P&&(m=P-1)}}function Hh(a,n,l,h){a_(a,l,h),a_(n,2*l,2*h),a_(n,2*l+1,2*h+1)}function a_(a,n,l){const h=a[n];a[n]=a[l],a[l]=h}function oC(a,n,l,h){const m=a-l,v=n-h;return m*m+v*v}var s_;c.bh=void 0,(s_=c.bh||(c.bh={})).create="create",s_.load="load",s_.fullLoad="fullLoad";let Hm=null,Wh=[];const l_=1e3/60,c_="loadTime",u_="fullLoadTime",d$={mark(a){performance.mark(a)},frame(a){const n=a;Hm!=null&&Wh.push(n-Hm),Hm=n},clearMetrics(){Hm=null,Wh=[],performance.clearMeasures(c_),performance.clearMeasures(u_);for(const a in c.bh)performance.clearMarks(c.bh[a])},getPerformanceMetrics(){performance.measure(c_,c.bh.create,c.bh.load),performance.measure(u_,c.bh.create,c.bh.fullLoad);const a=performance.getEntriesByName(c_)[0].duration,n=performance.getEntriesByName(u_)[0].duration,l=Wh.length,h=1/(Wh.reduce((v,x)=>v+x,0)/l/1e3),m=Wh.filter(v=>v>l_).reduce((v,x)=>v+(x-l_)/l_,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};c.$=function(a,n,l){var h,m,v,x,S,P,z,B,U,X,Q,re,le=l[0],me=l[1],ve=l[2];return n===a?(a[12]=n[0]*le+n[4]*me+n[8]*ve+n[12],a[13]=n[1]*le+n[5]*me+n[9]*ve+n[13],a[14]=n[2]*le+n[6]*me+n[10]*ve+n[14],a[15]=n[3]*le+n[7]*me+n[11]*ve+n[15]):(m=n[1],v=n[2],x=n[3],S=n[4],P=n[5],z=n[6],B=n[7],U=n[8],X=n[9],Q=n[10],re=n[11],a[0]=h=n[0],a[1]=m,a[2]=v,a[3]=x,a[4]=S,a[5]=P,a[6]=z,a[7]=B,a[8]=U,a[9]=X,a[10]=Q,a[11]=re,a[12]=h*le+S*me+U*ve+n[12],a[13]=m*le+P*me+X*ve+n[13],a[14]=v*le+z*me+Q*ve+n[14],a[15]=x*le+B*me+re*ve+n[15]),a},c.A=mu,c.B=Qi,c.C=class{constructor(a,n,l){this.receive=h=>{const m=h.data,v=m.id;if(v&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Ne()||m.mustQueue?(this.tasks[v]=m,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=a,this.parent=n,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new t$(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ne()?a:window}send(a,n,l,h,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[v]=l);const x=[],S={id:v,type:a,hasCallback:!!l,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:qa(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{l&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(n.error?l(el(n.error)):l(null,el(n.data)))}else{let l=!1;const h=[],m=n.hasCallback?(S,P)=>{l=!0,delete this.cancelCallbacks[a];const z={id:a,type:"<response>",sourceMapId:this.mapId,error:S?qa(S):null,data:qa(P,h)};this.target.postMessage(z,{transfer:h})}:S=>{l=!0};let v=null;const x=el(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,m);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,m)}else m(new Error(`Could not find function ${n.type}`));!l&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=Zt,c.E=Cr,c.F=function(a,n){const l={};for(let h=0;h<n.length;h++){const m=n[h];m in a&&(l[m]=a[m])}return l},c.G=M2,c.H=D2,c.I=W0,c.J=R,c.K=M,c.L=sl,c.M=lt,c.N=Fn,c.O=Ro,c.P=A,c.Q=_n,c.R=zo,c.S=un,c.T=_m,c.U=Fm,c.V=class extends _s{},c.W=t_,c.X=function(a,n){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){n(null,l)};for(let h=0;h<a.length;h++){const m=window.document.createElement("source");hr(a[h])||(l.crossOrigin="Anonymous"),m.src=a[h],l.appendChild(m)}return{cancel:()=>{}}},c.Y=Be,c.Z=function(){var a=new mu(16);return mu!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},c._=b,c.a=Fe,c.a$=class extends J{},c.a0=function(a,n,l){var h=l[0],m=l[1],v=l[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.a1=BS,c.a2=function(){return Ie++},c.a3=pe,c.a4=bu,c.a5=function(){ro.isLoading()||ro.isLoaded()||_h()!=="deferred"||vm()},c.a6=lh,c.a7=ac,c.a8=cn,c.a9=j2,c.aA=ec,c.aB=function(a){a=a.slice();const n=Object.create(null);for(let l=0;l<a.length;l++)n[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=zr(a[l],n[a[l].ref]));return a},c.aC=function(a){if(a.type==="custom")return new e$(a);switch(a.type){case"background":return new JL(a);case"circle":return new $D(a);case"fill":return new rL(a);case"fill-extrusion":return new yL(a);case"heatmap":return new BD(a);case"hillshade":return new ND(a);case"line":return new IL(a);case"raster":return new QL(a);case"symbol":return new Bm(a)}},c.aD=Ae,c.aE=function(a,n){if(!a)return[{command:rr.setStyle,args:[n]}];let l=[];try{if(!Kt(a.version,n.version))return[{command:rr.setStyle,args:[n]}];Kt(a.center,n.center)||l.push({command:rr.setCenter,args:[n.center]}),Kt(a.zoom,n.zoom)||l.push({command:rr.setZoom,args:[n.zoom]}),Kt(a.bearing,n.bearing)||l.push({command:rr.setBearing,args:[n.bearing]}),Kt(a.pitch,n.pitch)||l.push({command:rr.setPitch,args:[n.pitch]}),Kt(a.sprite,n.sprite)||l.push({command:rr.setSprite,args:[n.sprite]}),Kt(a.glyphs,n.glyphs)||l.push({command:rr.setGlyphs,args:[n.glyphs]}),Kt(a.transition,n.transition)||l.push({command:rr.setTransition,args:[n.transition]}),Kt(a.light,n.light)||l.push({command:rr.setLight,args:[n.light]});const h={},m=[];(function(x,S,P,z){let B;for(B in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,B)&&(Object.prototype.hasOwnProperty.call(S,B)||Rr(B,P,z));for(B in S)Object.prototype.hasOwnProperty.call(S,B)&&(Object.prototype.hasOwnProperty.call(x,B)?Kt(x[B],S[B])||(x[B].type==="geojson"&&S[B].type==="geojson"&&dr(x,S,B)?P.push({command:rr.setGeoJSONSourceData,args:[B,S[B].data]}):fr(B,S,P,z)):Or(B,S,P))})(a.sources,n.sources,m,h);const v=[];a.layers&&a.layers.forEach(x=>{h[x.source]?l.push({command:rr.removeLayer,args:[x.id]}):v.push(x)}),l=l.concat(m),function(x,S,P){S=S||[];const z=(x=x||[]).map(cr),B=S.map(cr),U=x.reduce(Ir,{}),X=S.reduce(Ir,{}),Q=z.slice(),re=Object.create(null);let le,me,ve,De,we,Le,Ge;for(le=0,me=0;le<z.length;le++)ve=z[le],Object.prototype.hasOwnProperty.call(X,ve)?me++:(P.push({command:rr.removeLayer,args:[ve]}),Q.splice(Q.indexOf(ve,me),1));for(le=0,me=0;le<B.length;le++)ve=B[B.length-1-le],Q[Q.length-1-le]!==ve&&(Object.prototype.hasOwnProperty.call(U,ve)?(P.push({command:rr.removeLayer,args:[ve]}),Q.splice(Q.lastIndexOf(ve,Q.length-me),1)):me++,Le=Q[Q.length-le],P.push({command:rr.addLayer,args:[X[ve],Le]}),Q.splice(Q.length-le,0,ve),re[ve]=!0);for(le=0;le<B.length;le++)if(ve=B[le],De=U[ve],we=X[ve],!re[ve]&&!Kt(De,we))if(Kt(De.source,we.source)&&Kt(De["source-layer"],we["source-layer"])&&Kt(De.type,we.type)){for(Ge in Gt(De.layout,we.layout,P,ve,null,rr.setLayoutProperty),Gt(De.paint,we.paint,P,ve,null,rr.setPaintProperty),Kt(De.filter,we.filter)||P.push({command:rr.setFilter,args:[ve,we.filter]}),Kt(De.minzoom,we.minzoom)&&Kt(De.maxzoom,we.maxzoom)||P.push({command:rr.setLayerZoomRange,args:[ve,we.minzoom,we.maxzoom]}),De)Object.prototype.hasOwnProperty.call(De,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Gt(De[Ge],we[Ge],P,ve,Ge.slice(6),rr.setPaintProperty):Kt(De[Ge],we[Ge])||P.push({command:rr.setLayerProperty,args:[ve,Ge,we[Ge]]}));for(Ge in we)Object.prototype.hasOwnProperty.call(we,Ge)&&!Object.prototype.hasOwnProperty.call(De,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Gt(De[Ge],we[Ge],P,ve,Ge.slice(6),rr.setPaintProperty):Kt(De[Ge],we[Ge])||P.push({command:rr.setLayerProperty,args:[ve,Ge,we[Ge]]}))}else P.push({command:rr.removeLayer,args:[ve]}),Le=Q[Q.lastIndexOf(ve)+1],P.push({command:rr.addLayer,args:[we,Le]})}(v,n.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:rr.setStyle,args:[n]}]}return l},c.aF=function(a){const n=[],l=a.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},c.aG=function a(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],l[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(const h in n)if(!a(n[h],l[h]))return!1;return!0}return n===l},c.aH=_e,c.aI=Te,c.aJ=tc,c.aK=function(a){return a({pluginStatus:Fi,pluginURL:Za}),tc.on("pluginStateChange",a),a},c.aL=class extends ws{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},c.aM=pu,c.aN=class extends ws{constructor(a,n){super(a,n),this.current=S0}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},c.aO=Sm,c.aP=class extends ws{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},c.aQ=class extends ws{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},c.aR=Cm,c.aS=function(a,n,l,h,m,v,x){var S=1/(n-l),P=1/(h-m),z=1/(v-x);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*z,a[11]=0,a[12]=(n+l)*S,a[13]=(m+h)*P,a[14]=(x+v)*z,a[15]=1,a},c.aT=vr,c.aU=LD,c.aV=class extends f{},c.aW=EL,c.aX=class extends _{},c.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},c.aZ=US,c.a_=pt,c.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,m,v)=>{const x=m||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},c.ab=function(a,n){const l=[];for(const h in a)h in n||l.push(h);return l},c.ac=function(a){if(Oe==null){const n=a.navigator?a.navigator.userAgent:null;Oe=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Oe},c.ad=oe,c.ae=function(a,n,l){var h=Math.sin(l),m=Math.cos(l),v=n[0],x=n[1],S=n[2],P=n[3],z=n[4],B=n[5],U=n[6],X=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*m+z*h,a[1]=x*m+B*h,a[2]=S*m+U*h,a[3]=P*m+X*h,a[4]=z*m-v*h,a[5]=B*m-x*h,a[6]=U*m-S*h,a[7]=X*m-P*h,a},c.af=function(a){var n=new mu(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},c.ag=km,c.ah=function(a,n){let l=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=a,S=m?oe(eo.interpolationFactor(m,n,v,x),0,1):0;a.kind==="camera"?h=Qi.number(a.minSize,a.maxSize,S):l=S}return{uSizeT:l,uSize:h}},c.aj=function(a,{uSize:n,uSizeT:l},{lowerSize:h,upperSize:m}){return a.kind==="source"?h/Xa:a.kind==="composite"?Qi.number(h/Xa,m/Xa,l):n},c.ak=K0,c.al=function(a,n,l,h){const m=n.y-a.y,v=n.x-a.x,x=h.y-l.y,S=h.x-l.x,P=x*v-S*m;if(P===0)return null;const z=(S*(a.y-l.y)-x*(a.x-l.x))/P;return new A(a.x+z*v,a.y+z*m)},c.am=W2,c.an=RS,c.ao=k0,c.ap=qn,c.ar=Z0,c.as=function(a,n){var l=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],P=n[6],z=n[7],B=n[8],U=n[9],X=n[10],Q=n[11],re=n[12],le=n[13],me=n[14],ve=n[15],De=l*S-h*x,we=l*P-m*x,Le=l*z-v*x,Ge=h*P-m*S,at=h*z-v*S,Mt=m*z-v*P,Ut=B*le-U*re,At=B*me-X*re,Pt=B*ve-Q*re,yt=U*me-X*le,Nt=U*ve-Q*le,wt=X*ve-Q*me,ht=De*wt-we*Nt+Le*yt+Ge*Pt-at*At+Mt*Ut;return ht?(a[0]=(S*wt-P*Nt+z*yt)*(ht=1/ht),a[1]=(m*Nt-h*wt-v*yt)*ht,a[2]=(le*Mt-me*at+ve*Ge)*ht,a[3]=(X*at-U*Mt-Q*Ge)*ht,a[4]=(P*Pt-x*wt-z*At)*ht,a[5]=(l*wt-m*Pt+v*At)*ht,a[6]=(me*Le-re*Mt-ve*we)*ht,a[7]=(B*Mt-X*Le+Q*we)*ht,a[8]=(x*Nt-S*Pt+z*Ut)*ht,a[9]=(h*Pt-l*Nt-v*Ut)*ht,a[10]=(re*at-le*Le+ve*De)*ht,a[11]=(U*Le-B*at-Q*De)*ht,a[12]=(S*At-x*yt-P*Ut)*ht,a[13]=(l*yt-h*At+m*Ut)*ht,a[14]=(le*we-re*Ge-me*De)*ht,a[15]=(B*Ge-U*we+X*De)*ht,a):null},c.at=n_,c.au=q0,c.av=i_,c.aw=function(){const a={},n=We.$version;for(const l in We.$root){const h=We.$root[l];if(h.required){let m=null;m=l==="version"?n:h.type==="array"?[]:{},m!=null&&(a[l]=m)}}return a},c.ax=rr,c.ay=fm,c.az=ft,c.b=function(a,n){const l=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(l).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=li,c.b1=function(a,n){var l=a[0],h=a[1],m=a[2],v=a[3],x=a[4],S=a[5],P=a[6],z=a[7],B=a[8],U=a[9],X=a[10],Q=a[11],re=a[12],le=a[13],me=a[14],ve=a[15],De=n[0],we=n[1],Le=n[2],Ge=n[3],at=n[4],Mt=n[5],Ut=n[6],At=n[7],Pt=n[8],yt=n[9],Nt=n[10],wt=n[11],ht=n[12],tr=n[13],qt=n[14],_r=n[15];return Math.abs(l-De)<=ji*Math.max(1,Math.abs(l),Math.abs(De))&&Math.abs(h-we)<=ji*Math.max(1,Math.abs(h),Math.abs(we))&&Math.abs(m-Le)<=ji*Math.max(1,Math.abs(m),Math.abs(Le))&&Math.abs(v-Ge)<=ji*Math.max(1,Math.abs(v),Math.abs(Ge))&&Math.abs(x-at)<=ji*Math.max(1,Math.abs(x),Math.abs(at))&&Math.abs(S-Mt)<=ji*Math.max(1,Math.abs(S),Math.abs(Mt))&&Math.abs(P-Ut)<=ji*Math.max(1,Math.abs(P),Math.abs(Ut))&&Math.abs(z-At)<=ji*Math.max(1,Math.abs(z),Math.abs(At))&&Math.abs(B-Pt)<=ji*Math.max(1,Math.abs(B),Math.abs(Pt))&&Math.abs(U-yt)<=ji*Math.max(1,Math.abs(U),Math.abs(yt))&&Math.abs(X-Nt)<=ji*Math.max(1,Math.abs(X),Math.abs(Nt))&&Math.abs(Q-wt)<=ji*Math.max(1,Math.abs(Q),Math.abs(wt))&&Math.abs(re-ht)<=ji*Math.max(1,Math.abs(re),Math.abs(ht))&&Math.abs(le-tr)<=ji*Math.max(1,Math.abs(le),Math.abs(tr))&&Math.abs(me-qt)<=ji*Math.max(1,Math.abs(me),Math.abs(qt))&&Math.abs(ve-_r)<=ji*Math.max(1,Math.abs(ve),Math.abs(_r))},c.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.b3=function(a,n,l){return a[0]=n[0]*l[0],a[1]=n[1]*l[1],a[2]=n[2]*l[2],a[3]=n[3]*l[3],a},c.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},c.b5=ie,c.b6=B2,c.b7=L2,c.b8=function(a,n,l,h,m){var v,x=1/Math.tan(n/2);return a[0]=x/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+h)*(v=1/(h-m)),a[14]=2*m*h*v):(a[10]=-1,a[14]=-2*h),a},c.b9=function(a,n,l){var h=Math.sin(l),m=Math.cos(l),v=n[4],x=n[5],S=n[6],P=n[7],z=n[8],B=n[9],U=n[10],X=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*m+z*h,a[5]=x*m+B*h,a[6]=S*m+U*h,a[7]=P*m+X*h,a[8]=z*m-v*h,a[9]=B*m-x*h,a[10]=U*m-S*h,a[11]=X*m-P*h,a},c.bA=T,c.bB=u2,c.bC=ru,c.bD=ro,c.ba=ee,c.bb=Z,c.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},c.bd=class extends ic{},c.be=Q0,c.bf=$2,c.bg=d$,c.bi=Je,c.bj=function(a,n,l=!1){if(Fi===fh||Fi===mh||Fi===gh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Za=Yt.resolveURL(a),Fi=fh,yh=n,vh(),l||vm()},c.bk=_h,c.bl=function(a,n){const l={};for(let m=0;m<a.length;m++){const v=n&&n[a[m].id]||au(a[m]);n&&(n[a[m].id]=v);let x=l[v];x||(x=l[v]=[]),x.push(a[m])}const h=[];for(const m in l)h.push(l[m]);return h},c.bm=Bt,c.bn=N2,c.bo=V2,c.bp=_2,c.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Fn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],l=n.layout,h=n._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new cn(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new cn(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new cn(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:B}=a.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new cn(z),a.canonical),h["text-size"].possiblyEvaluate(new cn(B),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:B}=a.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new cn(z),a.canonical),h["icon-size"].possiblyEvaluate(new cn(B),a.canonical)]}const v=l.get("text-line-height")*qn,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),P=l.get("text-size");for(const z of a.bucket.features){const B=l.get("text-font").evaluate(z,{},a.canonical).join(","),U=P.evaluate(z,{},a.canonical),X=m.layoutTextSize.evaluate(z,{},a.canonical),Q=m.layoutIconSize.evaluate(z,{},a.canonical),re={horizontal:{},vertical:void 0},le=z.text;let me,ve=[0,0];if(le){const Le=le.toString(),Ge=l.get("text-letter-spacing").evaluate(z,{},a.canonical)*qn,at=hh(Le)?Ge:0,Mt=l.get("text-anchor").evaluate(z,{},a.canonical),Ut=eC(n,z,a.canonical);if(!Ut){const wt=l.get("text-radial-offset").evaluate(z,{},a.canonical);ve=wt?Q2(Mt,[wt*qn,r_]):l.get("text-offset").evaluate(z,{},a.canonical).map(ht=>ht*qn)}let At=x?"center":l.get("text-justify").evaluate(z,{},a.canonical);const Pt=l.get("symbol-placement"),yt=Pt==="point"?l.get("text-max-width").evaluate(z,{},a.canonical)*qn:0,Nt=()=>{a.bucket.allowVerticalPlacement&&dh(Le)&&(re.vertical=Lm(le,a.glyphMap,a.glyphPositions,a.imagePositions,B,yt,v,Mt,"left",at,ve,c.ai.vertical,!0,Pt,X,U))};if(!x&&Ut){const wt=new Set;if(At==="auto")for(let tr=0;tr<Ut.values.length;tr+=2)wt.add(n_(Ut.values[tr]));else wt.add(At);let ht=!1;for(const tr of wt)if(!re.horizontal[tr])if(ht)re.horizontal[tr]=re.horizontal[0];else{const qt=Lm(le,a.glyphMap,a.glyphPositions,a.imagePositions,B,yt,v,"center",tr,at,ve,c.ai.horizontal,!1,Pt,X,U);qt&&(re.horizontal[tr]=qt,ht=qt.positionedLines.length===1)}Nt()}else{At==="auto"&&(At=n_(Mt));const wt=Lm(le,a.glyphMap,a.glyphPositions,a.imagePositions,B,yt,v,Mt,At,at,ve,c.ai.horizontal,!1,Pt,X,U);wt&&(re.horizontal[At]=wt),Nt(),dh(Le)&&x&&S&&(re.vertical=Lm(le,a.glyphMap,a.glyphPositions,a.imagePositions,B,yt,v,Mt,At,at,ve,c.ai.vertical,!1,Pt,X,U))}}let De=!1;if(z.icon&&z.icon.name){const Le=a.imageMap[z.icon.name];Le&&(me=GL(a.imagePositions[z.icon.name],l.get("icon-offset").evaluate(z,{},a.canonical),l.get("icon-anchor").evaluate(z,{},a.canonical)),De=!!Le.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=De:a.bucket.sdfIcons!==De&&et("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const we=rC(re.horizontal)||re.vertical;a.bucket.iconsInText=!!we&&we.iconsInText,(we||me)&&c$(a.bucket,z,re,me,a.imageMap,m,X,Q,ve,De,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},c.br=j0,c.bs=B0,c.bt=N0,c.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},c.bv=U0,c.bw=il,c.bx=function(a,n,l,h,m){return b(this,void 0,void 0,function*(){if(M())try{return yield lt(a,n,l,h,m)}catch{}return function(v,x,S,P,z){const B=v.width,U=v.height;ut&&Dt||(ut=new OffscreenCanvas(B,U),Dt=ut.getContext("2d",{willReadFrequently:!0})),ut.width=B,ut.height=U,Dt.drawImage(v,0,0,B,U);const X=Dt.getImageData(x,S,P,z);return Dt.clearRect(0,0,B,U),X.data}(a,n,l,h,m)})},c.by=F2,c.bz=w,c.c=ct,c.d=function(a,n){const l=new Image;l.onload=()=>{n(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=nt})},l.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});l.src=a.byteLength?URL.createObjectURL(h):nt},c.e=W,c.f=function(a,n){return Qt(W(a,{type:"json"}),n)},c.g=_t,c.h=Yt,c.i=Ne,c.j=Ot,c.k=ur,c.l=Pr,c.m=Qt,c.n=function(a){return new U0(a).readFields(NL,[])},c.o=function(a,n,l){if(!a.length)return l(null,[]);let h=a.length;const m=new Array(a.length);let v=null;a.forEach((x,S)=>{n(x,(P,z)=>{P&&(v=P),m[S]=z,--h==0&&l(v,m)})})},c.p=v2,c.q=Rh,c.r=Rn,c.s=hr,c.t=_0,c.u=Rt,c.v=We,c.w=et,c.x=cu,c.y=Sa,c.z=function([a,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(l),y:a*Math.sin(n)*Math.sin(l),z:a*Math.cos(l)}}}),d(["./shared"],function(c){class b{constructor(H){this.keyCache={},H&&this.replace(H)}replace(H){this._layerConfigs={},this._layers={},this.update(H,[])}update(H,q){for(const he of H){this._layerConfigs[he.id]=he;const fe=this._layers[he.id]=c.aC(he);fe._featureFilter=c.a6(fe.filter),this.keyCache[he.id]&&delete this.keyCache[he.id]}for(const he of q)delete this.keyCache[he],delete this._layerConfigs[he],delete this._layers[he];this.familiesBySource={};const te=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const he of te){const fe=he.map(ne=>this._layers[ne.id]),Re=fe[0];if(Re.visibility==="none")continue;const be=Re.source||"";let ge=this.familiesBySource[be];ge||(ge=this.familiesBySource[be]={});const Ee=Re.sourceLayer||"_geojsonTileLayer";let tt=ge[Ee];tt||(tt=ge[Ee]=[]),tt.push(fe)}}}class w{constructor(H){const q={},te=[];for(const be in H){const ge=H[be],Ee=q[be]={};for(const tt in ge){const ne=ge[+tt];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const ae={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};te.push(ae),Ee[tt]={rect:ae,metrics:ne.metrics}}}const{w:he,h:fe}=c.p(te),Re=new c.q({width:he||1,height:fe||1});for(const be in H){const ge=H[be];for(const Ee in ge){const tt=ge[+Ee];if(!tt||tt.bitmap.width===0||tt.bitmap.height===0)continue;const ne=q[be][Ee].rect;c.q.copy(tt.bitmap,Re,{x:0,y:0},{x:ne.x+1,y:ne.y+1},tt.bitmap)}}this.image=Re,this.positions=q}}c.bm("GlyphAtlas",w);class T{constructor(H){this.tileID=new c.O(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(H,q,te,he,fe){this.status="parsing",this.data=H,this.collisionBoxArray=new c.a3;const Re=new c.bn(Object.keys(H.layers).sort()),be=new c.bo(this.tileID,this.promoteId);be.bucketLayerIDs=[];const ge={},Ee={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},tt=q.familiesBySource[this.source];for(const Xe in tt){const rt=H.layers[Xe];if(!rt)continue;rt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Xe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const jt=Re.encode(Xe),zt=[];for(let nr=0;nr<rt.length;nr++){const lr=rt.feature(nr),Hr=be.getId(lr,Xe);zt.push({feature:lr,id:Hr,index:nr,sourceLayerIndex:jt})}for(const nr of tt[Xe]){const lr=nr[0];lr.source!==this.source&&c.w(`layer.source = ${lr.source} does not equal this.source = ${this.source}`),lr.minzoom&&this.zoom<Math.floor(lr.minzoom)||lr.maxzoom&&this.zoom>=lr.maxzoom||lr.visibility!=="none"&&(k(nr,this.zoom,te),(ge[lr.id]=lr.createBucket({index:be.bucketLayerIDs.length,layers:nr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:jt,sourceID:this.source})).populate(zt,Ee,this.tileID.canonical),be.bucketLayerIDs.push(nr.map(Hr=>Hr.id)))}}let ne,ae,Pe,Ue;const Qe=c.aH(Ee.glyphDependencies,Xe=>Object.keys(Xe).map(Number));this.inFlightDependencies.forEach(Xe=>Xe==null?void 0:Xe.cancel()),this.inFlightDependencies=[];const it=++this.dependencySentinel;Object.keys(Qe).length?this.inFlightDependencies.push(he.send("getGlyphs",{uid:this.uid,stacks:Qe,source:this.source,tileID:this.tileID,type:"glyphs"},(Xe,rt)=>{it===this.dependencySentinel&&(ne||(ne=Xe,ae=rt,Ke.call(this)))})):ae={};const Se=Object.keys(Ee.iconDependencies);Se.length?this.inFlightDependencies.push(he.send("getImages",{icons:Se,source:this.source,tileID:this.tileID,type:"icons"},(Xe,rt)=>{it===this.dependencySentinel&&(ne||(ne=Xe,Pe=rt,Ke.call(this)))})):Pe={};const xe=Object.keys(Ee.patternDependencies);function Ke(){if(ne)return fe(ne);if(ae&&Pe&&Ue){const Xe=new w(ae),rt=new c.bp(Pe,Ue);for(const jt in ge){const zt=ge[jt];zt instanceof c.a4?(k(zt.layers,this.zoom,te),c.bq({bucket:zt,glyphMap:ae,glyphPositions:Xe.positions,imageMap:Pe,imagePositions:rt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):zt.hasPattern&&(zt instanceof c.br||zt instanceof c.bs||zt instanceof c.bt)&&(k(zt.layers,this.zoom,te),zt.addFeatures(Ee,this.tileID.canonical,rt.patternPositions))}this.status="done",fe(null,{buckets:Object.values(ge).filter(jt=>!jt.isEmpty()),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xe.image,imageAtlas:rt,glyphMap:this.returnDependencies?ae:null,iconMap:this.returnDependencies?Pe:null,glyphPositions:this.returnDependencies?Xe.positions:null})}}xe.length?this.inFlightDependencies.push(he.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"patterns"},(Xe,rt)=>{it===this.dependencySentinel&&(ne||(ne=Xe,Ue=rt,Ke.call(this)))})):Ue={},Ke.call(this)}}function k(ce,H,q){const te=new c.a8(H);for(const he of ce)he.recalculate(te,q)}function A(ce,H){const q=c.l(ce.request,(te,he,fe,Re)=>{if(te)H(te);else if(he)try{const be=new c.bw.VectorTile(new c.bv(he));H(null,{vectorTile:be,rawData:he,cacheControl:fe,expires:Re})}catch(be){const ge=new Uint8Array(he);let Ee=`Unable to parse the tile at ${ce.request.url}, `;Ee+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.messge}`,H(new Error(Ee))}});return()=>{q.cancel(),H()}}class ${constructor(H,q,te,he){this.actor=H,this.layerIndex=q,this.availableImages=te,this.loadVectorData=he||A,this.fetching={},this.loading={},this.loaded={}}loadTile(H,q){const te=H.uid;this.loading||(this.loading={});const he=!!(H&&H.request&&H.request.collectResourceTiming)&&new c.bu(H.request),fe=this.loading[te]=new T(H);fe.abort=this.loadVectorData(H,(Re,be)=>{if(delete this.loading[te],Re||!be)return fe.status="done",this.loaded[te]=fe,q(Re);const ge=be.rawData,Ee={};be.expires&&(Ee.expires=be.expires),be.cacheControl&&(Ee.cacheControl=be.cacheControl);const tt={};if(he){const ne=he.finish();ne&&(tt.resourceTiming=JSON.parse(JSON.stringify(ne)))}fe.vectorTile=be.vectorTile,fe.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,(ne,ae)=>{if(delete this.fetching[te],ne||!ae)return q(ne);q(null,c.e({rawTileData:ge.slice(0)},ae,Ee,tt))}),this.loaded=this.loaded||{},this.loaded[te]=fe,this.fetching[te]={rawTileData:ge,cacheControl:Ee,resourceTiming:tt}})}reloadTile(H,q){const te=this.loaded,he=H.uid;if(te&&te[he]){const fe=te[he];fe.showCollisionBoxes=H.showCollisionBoxes,fe.status==="parsing"?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Re,be)=>{if(Re||!be)return q(Re,be);let ge;if(this.fetching[he]){const{rawTileData:Ee,cacheControl:tt,resourceTiming:ne}=this.fetching[he];delete this.fetching[he],ge=c.e({rawTileData:Ee.slice(0)},be,tt,ne)}else ge=be;q(null,ge)}):fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,q):q())}}abortTile(H,q){const te=this.loading,he=H.uid;te&&te[he]&&te[he].abort&&(te[he].abort(),delete te[he]),q()}removeTile(H,q){const te=this.loaded,he=H.uid;te&&te[he]&&delete te[he],q()}}class V{constructor(){this.loaded={}}loadTile(H,q){return c._(this,void 0,void 0,function*(){const{uid:te,encoding:he,rawImageData:fe,redFactor:Re,greenFactor:be,blueFactor:ge,baseShift:Ee}=H,tt=fe.width+2,ne=fe.height+2,ae=c.a(fe)?new c.R({width:tt,height:ne},yield c.bx(fe,-1,-1,tt,ne)):fe,Pe=new c.by(te,ae,he,Re,be,ge,Ee);this.loaded=this.loaded||{},this.loaded[te]=Pe,q(null,Pe)})}removeTile(H){const q=this.loaded,te=H.uid;q&&q[te]&&delete q[te]}}function N(ce,H){if(ce.length!==0){G(ce[0],H);for(var q=1;q<ce.length;q++)G(ce[q],!H)}}function G(ce,H){for(var q=0,te=0,he=0,fe=ce.length,Re=fe-1;he<fe;Re=he++){var be=(ce[he][0]-ce[Re][0])*(ce[Re][1]+ce[he][1]),ge=q+be;te+=Math.abs(q)>=Math.abs(be)?q-ge+be:be-ge+q,q=ge}q+te>=0!=!!H&&ce.reverse()}var O=c.bz(function ce(H,q){var te,he=H&&H.type;if(he==="FeatureCollection")for(te=0;te<H.features.length;te++)ce(H.features[te],q);else if(he==="GeometryCollection")for(te=0;te<H.geometries.length;te++)ce(H.geometries[te],q);else if(he==="Feature")ce(H.geometry,q);else if(he==="Polygon")N(H.coordinates,q);else if(he==="MultiPolygon")for(te=0;te<H.coordinates.length;te++)N(H.coordinates[te],q);return H});const R=c.bw.VectorTileFeature.prototype.toGeoJSON;var M={exports:{}},ee=c.bA,Z=c.bw.VectorTileFeature,oe=ie;function ie(ce,H){this.options=H||{},this.features=ce,this.length=ce.length}function W(ce,H){this.id=typeof ce.id=="number"?ce.id:void 0,this.type=ce.type,this.rawGeometry=ce.type===1?[ce.geometry]:ce.geometry,this.properties=ce.tags,this.extent=H||4096}ie.prototype.feature=function(ce){return new W(this.features[ce],this.options.extent)},W.prototype.loadGeometry=function(){var ce=this.rawGeometry;this.geometry=[];for(var H=0;H<ce.length;H++){for(var q=ce[H],te=[],he=0;he<q.length;he++)te.push(new ee(q[he][0],q[he][1]));this.geometry.push(te)}return this.geometry},W.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ce=this.geometry,H=1/0,q=-1/0,te=1/0,he=-1/0,fe=0;fe<ce.length;fe++)for(var Re=ce[fe],be=0;be<Re.length;be++){var ge=Re[be];H=Math.min(H,ge.x),q=Math.max(q,ge.x),te=Math.min(te,ge.y),he=Math.max(he,ge.y)}return[H,te,q,he]},W.prototype.toGeoJSON=Z.prototype.toGeoJSON;var Ie=c.bB,_e=oe;function Te(ce){var H=new Ie;return function(q,te){for(var he in q.layers)te.writeMessage(3,Ae,q.layers[he])}(ce,H),H.finish()}function Ae(ce,H){var q;H.writeVarintField(15,ce.version||1),H.writeStringField(1,ce.name||""),H.writeVarintField(5,ce.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<ce.length;q++)te.feature=ce.feature(q),H.writeMessage(2,$e,te);var he=te.keys;for(q=0;q<he.length;q++)H.writeStringField(3,he[q]);var fe=te.values;for(q=0;q<fe.length;q++)H.writeMessage(4,Oe,fe[q])}function $e(ce,H){var q=ce.feature;q.id!==void 0&&H.writeVarintField(1,q.id),H.writeMessage(2,et,ce),H.writeVarintField(3,q.type),H.writeMessage(4,Ne,q)}function et(ce,H){var q=ce.feature,te=ce.keys,he=ce.values,fe=ce.keycache,Re=ce.valuecache;for(var be in q.properties){var ge=q.properties[be],Ee=fe[be];if(ge!==null){Ee===void 0&&(te.push(be),fe[be]=Ee=te.length-1),H.writeVarint(Ee);var tt=typeof ge;tt!=="string"&&tt!=="boolean"&&tt!=="number"&&(ge=JSON.stringify(ge));var ne=tt+":"+ge,ae=Re[ne];ae===void 0&&(he.push(ge),Re[ne]=ae=he.length-1),H.writeVarint(ae)}}}function Ve(ce,H){return(H<<3)+(7&ce)}function ke(ce){return ce<<1^ce>>31}function Ne(ce,H){for(var q=ce.loadGeometry(),te=ce.type,he=0,fe=0,Re=q.length,be=0;be<Re;be++){var ge=q[be],Ee=1;te===1&&(Ee=ge.length),H.writeVarint(Ve(1,Ee));for(var tt=te===3?ge.length-1:ge.length,ne=0;ne<tt;ne++){ne===1&&te!==1&&H.writeVarint(Ve(2,tt-1));var ae=ge[ne].x-he,Pe=ge[ne].y-fe;H.writeVarint(ke(ae)),H.writeVarint(ke(Pe)),he+=ae,fe+=Pe}te===3&&H.writeVarint(Ve(7,1))}}function Oe(ce,H){var q=typeof ce;q==="string"?H.writeStringField(1,ce):q==="boolean"?H.writeBooleanField(7,ce):q==="number"&&(ce%1!=0?H.writeDoubleField(3,ce):ce<0?H.writeSVarintField(6,ce):H.writeVarintField(5,ce))}M.exports=Te,M.exports.fromVectorTileJs=Te,M.exports.fromGeojsonVt=function(ce,H){H=H||{};var q={};for(var te in ce)q[te]=new _e(ce[te].features,H),q[te].name=te,q[te].version=H.version,q[te].extent=H.extent;return Te({layers:q})},M.exports.GeoJSONWrapper=_e;var Fe=c.bz(M.exports);const nt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ce=>ce},lt=Math.fround||(ut=new Float32Array(1),ce=>(ut[0]=+ce,ut[0]));var ut;const Dt=3,St=5,$t=6;class Yt{constructor(H){this.options=Object.assign(Object.create(nt),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:q,minZoom:te,maxZoom:he}=this.options;q&&console.time("total time");const fe=`prepare ${H.length} points`;q&&console.time(fe),this.points=H;const Re=[];for(let ge=0;ge<H.length;ge++){const Ee=H[ge];if(!Ee.geometry)continue;const[tt,ne]=Ee.geometry.coordinates,ae=lt(ft(tt)),Pe=lt(_t(ne));Re.push(ae,Pe,1/0,ge,-1,1),this.options.reduce&&Re.push(0)}let be=this.trees[he+1]=this._createTree(Re);q&&console.timeEnd(fe);for(let ge=he;ge>=te;ge--){const Ee=+Date.now();be=this.trees[ge]=this._createTree(this._cluster(be,ge)),q&&console.log("z%d: %d clusters in %dms",ge,be.numItems,+Date.now()-Ee)}return q&&console.timeEnd("total time"),this}getClusters(H,q){let te=((H[0]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,H[1]));let fe=H[2]===180?180:((H[2]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)te=-180,fe=180;else if(te>fe){const ne=this.getClusters([te,he,180,Re],q),ae=this.getClusters([-180,he,fe,Re],q);return ne.concat(ae)}const be=this.trees[this._limitZoom(q)],ge=be.range(ft(te),_t(Re),ft(fe),_t(he)),Ee=be.data,tt=[];for(const ne of ge){const ae=this.stride*ne;tt.push(Ee[ae+St]>1?ct(Ee,ae,this.clusterProps):this.points[Ee[ae+Dt]])}return tt}getChildren(H){const q=this._getOriginId(H),te=this._getOriginZoom(H),he="No cluster with the specified id.",fe=this.trees[te];if(!fe)throw new Error(he);const Re=fe.data;if(q*this.stride>=Re.length)throw new Error(he);const be=this.options.radius/(this.options.extent*Math.pow(2,te-1)),ge=fe.within(Re[q*this.stride],Re[q*this.stride+1],be),Ee=[];for(const tt of ge){const ne=tt*this.stride;Re[ne+4]===H&&Ee.push(Re[ne+St]>1?ct(Re,ne,this.clusterProps):this.points[Re[ne+Dt]])}if(Ee.length===0)throw new Error(he);return Ee}getLeaves(H,q,te){const he=[];return this._appendLeaves(he,H,q=q||10,te=te||0,0),he}getTile(H,q,te){const he=this.trees[this._limitZoom(H)],fe=Math.pow(2,H),{extent:Re,radius:be}=this.options,ge=be/Re,Ee=(te-ge)/fe,tt=(te+1+ge)/fe,ne={features:[]};return this._addTileFeatures(he.range((q-ge)/fe,Ee,(q+1+ge)/fe,tt),he.data,q,te,fe,ne),q===0&&this._addTileFeatures(he.range(1-ge/fe,Ee,1,tt),he.data,fe,te,fe,ne),q===fe-1&&this._addTileFeatures(he.range(0,Ee,ge/fe,tt),he.data,-1,te,fe,ne),ne.features.length?ne:null}getClusterExpansionZoom(H){let q=this._getOriginZoom(H)-1;for(;q<=this.options.maxZoom;){const te=this.getChildren(H);if(q++,te.length!==1)break;H=te[0].properties.cluster_id}return q}_appendLeaves(H,q,te,he,fe){const Re=this.getChildren(q);for(const be of Re){const ge=be.properties;if(ge&&ge.cluster?fe+ge.point_count<=he?fe+=ge.point_count:fe=this._appendLeaves(H,ge.cluster_id,te,he,fe):fe<he?fe++:H.push(be),H.length===te)break}return fe}_createTree(H){const q=new c.av(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<H.length;te+=this.stride)q.add(H[te],H[te+1]);return q.finish(),q.data=H,q}_addTileFeatures(H,q,te,he,fe,Re){for(const be of H){const ge=be*this.stride,Ee=q[ge+St]>1;let tt,ne,ae;if(Ee)tt=Je(q,ge,this.clusterProps),ne=q[ge],ae=q[ge+1];else{const Qe=this.points[q[ge+Dt]];tt=Qe.properties;const[it,Se]=Qe.geometry.coordinates;ne=ft(it),ae=_t(Se)}const Pe={type:1,geometry:[[Math.round(this.options.extent*(ne*fe-te)),Math.round(this.options.extent*(ae*fe-he))]],tags:tt};let Ue;Ue=Ee||this.options.generateId?q[ge+Dt]:this.points[q[ge+Dt]].id,Ue!==void 0&&(Pe.id=Ue),Re.features.push(Pe)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,q){const{radius:te,extent:he,reduce:fe,minPoints:Re}=this.options,be=te/(he*Math.pow(2,q)),ge=H.data,Ee=[],tt=this.stride;for(let ne=0;ne<ge.length;ne+=tt){if(ge[ne+2]<=q)continue;ge[ne+2]=q;const ae=ge[ne],Pe=ge[ne+1],Ue=H.within(ge[ne],ge[ne+1],be),Qe=ge[ne+St];let it=Qe;for(const Se of Ue){const xe=Se*tt;ge[xe+2]>q&&(it+=ge[xe+St])}if(it>Qe&&it>=Re){let Se,xe=ae*Qe,Ke=Pe*Qe,Xe=-1;const rt=((ne/tt|0)<<5)+(q+1)+this.points.length;for(const jt of Ue){const zt=jt*tt;if(ge[zt+2]<=q)continue;ge[zt+2]=q;const nr=ge[zt+St];xe+=ge[zt]*nr,Ke+=ge[zt+1]*nr,ge[zt+4]=rt,fe&&(Se||(Se=this._map(ge,ne,!0),Xe=this.clusterProps.length,this.clusterProps.push(Se)),fe(Se,this._map(ge,zt)))}ge[ne+4]=rt,Ee.push(xe/it,Ke/it,1/0,rt,-1,it),fe&&Ee.push(Xe)}else{for(let Se=0;Se<tt;Se++)Ee.push(ge[ne+Se]);if(it>1)for(const Se of Ue){const xe=Se*tt;if(!(ge[xe+2]<=q)){ge[xe+2]=q;for(let Ke=0;Ke<tt;Ke++)Ee.push(ge[xe+Ke])}}}}return Ee}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,q,te){if(H[q+St]>1){const Re=this.clusterProps[H[q+$t]];return te?Object.assign({},Re):Re}const he=this.points[H[q+Dt]].properties,fe=this.options.map(he);return te&&fe===he?Object.assign({},fe):fe}}function ct(ce,H,q){return{type:"Feature",id:ce[H+Dt],properties:Je(ce,H,q),geometry:{type:"Point",coordinates:[(te=ce[H],360*(te-.5)),sr(ce[H+1])]}};var te}function Je(ce,H,q){const te=ce[H+St],he=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,fe=ce[H+$t],Re=fe===-1?{}:Object.assign({},q[fe]);return Object.assign(Re,{cluster:!0,cluster_id:ce[H+Dt],point_count:te,point_count_abbreviated:he})}function ft(ce){return ce/360+.5}function _t(ce){const H=Math.sin(ce*Math.PI/180),q=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return q<0?0:q>1?1:q}function sr(ce){const H=(180-360*ce)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Qt(ce,H,q,te){for(var he,fe=te,Re=q-H>>1,be=q-H,ge=ce[H],Ee=ce[H+1],tt=ce[q],ne=ce[q+1],ae=H+3;ae<q;ae+=3){var Pe=Pr(ce[ae],ce[ae+1],ge,Ee,tt,ne);if(Pe>fe)he=ae,fe=Pe;else if(Pe===fe){var Ue=Math.abs(ae-Re);Ue<be&&(he=ae,be=Ue)}}fe>te&&(he-H>3&&Qt(ce,H,he,te),ce[he+2]=fe,q-he>3&&Qt(ce,he,q,te))}function Pr(ce,H,q,te,he,fe){var Re=he-q,be=fe-te;if(Re!==0||be!==0){var ge=((ce-q)*Re+(H-te)*be)/(Re*Re+be*be);ge>1?(q=he,te=fe):ge>0&&(q+=Re*ge,te+=be*ge)}return(Re=ce-q)*Re+(be=H-te)*be}function hr(ce,H,q,te){var he={id:ce===void 0?null:ce,type:H,geometry:q,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var Re=fe.geometry,be=fe.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")Ht(fe,Re);else if(be==="Polygon"||be==="MultiLineString")for(var ge=0;ge<Re.length;ge++)Ht(fe,Re[ge]);else if(be==="MultiPolygon")for(ge=0;ge<Re.length;ge++)for(var Ee=0;Ee<Re[ge].length;Ee++)Ht(fe,Re[ge][Ee])}(he),he}function Ht(ce,H){for(var q=0;q<H.length;q+=3)ce.minX=Math.min(ce.minX,H[q]),ce.minY=Math.min(ce.minY,H[q+1]),ce.maxX=Math.max(ce.maxX,H[q]),ce.maxY=Math.max(ce.maxY,H[q+1])}function Ct(ce,H,q,te){if(H.geometry){var he=H.geometry.coordinates,fe=H.geometry.type,Re=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),be=[],ge=H.id;if(q.promoteId?ge=H.properties[q.promoteId]:q.generateId&&(ge=te||0),fe==="Point")ur(he,be);else if(fe==="MultiPoint")for(var Ee=0;Ee<he.length;Ee++)ur(he[Ee],be);else if(fe==="LineString")Ot(he,be,Re,!1);else if(fe==="MultiLineString"){if(q.lineMetrics){for(Ee=0;Ee<he.length;Ee++)Ot(he[Ee],be=[],Re,!1),ce.push(hr(ge,"LineString",be,H.properties));return}Cr(he,be,Re,!1)}else if(fe==="Polygon")Cr(he,be,Re,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(Ee=0;Ee<H.geometry.geometries.length;Ee++)Ct(ce,{id:ge,geometry:H.geometry.geometries[Ee],properties:H.properties},q,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<he.length;Ee++){var tt=[];Cr(he[Ee],tt,Re,!0),be.push(tt)}}ce.push(hr(ge,fe,be,H.properties))}}function ur(ce,H){H.push(We(ce[0])),H.push(br(ce[1])),H.push(0)}function Ot(ce,H,q,te){for(var he,fe,Re=0,be=0;be<ce.length;be++){var ge=We(ce[be][0]),Ee=br(ce[be][1]);H.push(ge),H.push(Ee),H.push(0),be>0&&(Re+=te?(he*Ee-ge*fe)/2:Math.sqrt(Math.pow(ge-he,2)+Math.pow(Ee-fe,2))),he=ge,fe=Ee}var tt=H.length-3;H[2]=1,Qt(H,0,tt,q),H[tt+2]=1,H.size=Math.abs(Re),H.start=0,H.end=H.size}function Cr(ce,H,q,te){for(var he=0;he<ce.length;he++){var fe=[];Ot(ce[he],fe,q,te),H.push(fe)}}function We(ce){return ce/360+.5}function br(ce){var H=Math.sin(ce*Math.PI/180),q=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return q<0?0:q>1?1:q}function zr(ce,H,q,te,he,fe,Re,be){if(te/=H,fe>=(q/=H)&&Re<te)return ce;if(Re<q||fe>=te)return null;for(var ge=[],Ee=0;Ee<ce.length;Ee++){var tt=ce[Ee],ne=tt.geometry,ae=tt.type,Pe=he===0?tt.minX:tt.minY,Ue=he===0?tt.maxX:tt.maxY;if(Pe>=q&&Ue<te)ge.push(tt);else if(!(Ue<q||Pe>=te)){var Qe=[];if(ae==="Point"||ae==="MultiPoint")Kt(ne,Qe,q,te,he);else if(ae==="LineString")rr(ne,Qe,q,te,he,!1,be.lineMetrics);else if(ae==="MultiLineString")Rr(ne,Qe,q,te,he,!1);else if(ae==="Polygon")Rr(ne,Qe,q,te,he,!0);else if(ae==="MultiPolygon")for(var it=0;it<ne.length;it++){var Se=[];Rr(ne[it],Se,q,te,he,!0),Se.length&&Qe.push(Se)}if(Qe.length){if(be.lineMetrics&&ae==="LineString"){for(it=0;it<Qe.length;it++)ge.push(hr(tt.id,ae,Qe[it],tt.tags));continue}ae!=="LineString"&&ae!=="MultiLineString"||(Qe.length===1?(ae="LineString",Qe=Qe[0]):ae="MultiLineString"),ae!=="Point"&&ae!=="MultiPoint"||(ae=Qe.length===3?"Point":"MultiPoint"),ge.push(hr(tt.id,ae,Qe,tt.tags))}}}return ge.length?ge:null}function Kt(ce,H,q,te,he){for(var fe=0;fe<ce.length;fe+=3){var Re=ce[fe+he];Re>=q&&Re<=te&&(H.push(ce[fe]),H.push(ce[fe+1]),H.push(ce[fe+2]))}}function rr(ce,H,q,te,he,fe,Re){for(var be,ge,Ee=Or(ce),tt=he===0?dr:Gt,ne=ce.start,ae=0;ae<ce.length-3;ae+=3){var Pe=ce[ae],Ue=ce[ae+1],Qe=ce[ae+2],it=ce[ae+3],Se=ce[ae+4],xe=he===0?Pe:Ue,Ke=he===0?it:Se,Xe=!1;Re&&(be=Math.sqrt(Math.pow(Pe-it,2)+Math.pow(Ue-Se,2))),xe<q?Ke>q&&(ge=tt(Ee,Pe,Ue,it,Se,q),Re&&(Ee.start=ne+be*ge)):xe>te?Ke<te&&(ge=tt(Ee,Pe,Ue,it,Se,te),Re&&(Ee.start=ne+be*ge)):fr(Ee,Pe,Ue,Qe),Ke<q&&xe>=q&&(ge=tt(Ee,Pe,Ue,it,Se,q),Xe=!0),Ke>te&&xe<=te&&(ge=tt(Ee,Pe,Ue,it,Se,te),Xe=!0),!fe&&Xe&&(Re&&(Ee.end=ne+be*ge),H.push(Ee),Ee=Or(ce)),Re&&(ne+=be)}var rt=ce.length-3;Pe=ce[rt],Ue=ce[rt+1],Qe=ce[rt+2],(xe=he===0?Pe:Ue)>=q&&xe<=te&&fr(Ee,Pe,Ue,Qe),rt=Ee.length-3,fe&&rt>=3&&(Ee[rt]!==Ee[0]||Ee[rt+1]!==Ee[1])&&fr(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&H.push(Ee)}function Or(ce){var H=[];return H.size=ce.size,H.start=ce.start,H.end=ce.end,H}function Rr(ce,H,q,te,he,fe){for(var Re=0;Re<ce.length;Re++)rr(ce[Re],H,q,te,he,fe,!1)}function fr(ce,H,q,te){ce.push(H),ce.push(q),ce.push(te)}function dr(ce,H,q,te,he,fe){var Re=(fe-H)/(te-H);return ce.push(fe),ce.push(q+(he-q)*Re),ce.push(1),Re}function Gt(ce,H,q,te,he,fe){var Re=(fe-q)/(he-q);return ce.push(H+(te-H)*Re),ce.push(fe),ce.push(1),Re}function cr(ce,H){for(var q=[],te=0;te<ce.length;te++){var he,fe=ce[te],Re=fe.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")he=Ir(fe.geometry,H);else if(Re==="MultiLineString"||Re==="Polygon"){he=[];for(var be=0;be<fe.geometry.length;be++)he.push(Ir(fe.geometry[be],H))}else if(Re==="MultiPolygon")for(he=[],be=0;be<fe.geometry.length;be++){for(var ge=[],Ee=0;Ee<fe.geometry[be].length;Ee++)ge.push(Ir(fe.geometry[be][Ee],H));he.push(ge)}q.push(hr(fe.id,Re,he,fe.tags))}return q}function Ir(ce,H){var q=[];q.size=ce.size,ce.start!==void 0&&(q.start=ce.start,q.end=ce.end);for(var te=0;te<ce.length;te+=3)q.push(ce[te]+H,ce[te+1],ce[te+2]);return q}function Be(ce,H){if(ce.transformed)return ce;var q,te,he,fe=1<<ce.z,Re=ce.x,be=ce.y;for(q=0;q<ce.features.length;q++){var ge=ce.features[q],Ee=ge.geometry,tt=ge.type;if(ge.geometry=[],tt===1)for(te=0;te<Ee.length;te+=2)ge.geometry.push(xt(Ee[te],Ee[te+1],H,fe,Re,be));else for(te=0;te<Ee.length;te++){var ne=[];for(he=0;he<Ee[te].length;he+=2)ne.push(xt(Ee[te][he],Ee[te][he+1],H,fe,Re,be));ge.geometry.push(ne)}}return ce.transformed=!0,ce}function xt(ce,H,q,te,he,fe){return[Math.round(q*(ce*te-he)),Math.round(q*(H*te-fe))]}function bt(ce,H,q,te,he){for(var fe=H===he.maxZoom?0:he.tolerance/((1<<H)*he.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:te,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},be=0;be<ce.length;be++){Re.numFeatures++,Ce(Re,ce[be],fe,he);var ge=ce[be].minX,Ee=ce[be].minY,tt=ce[be].maxX,ne=ce[be].maxY;ge<Re.minX&&(Re.minX=ge),Ee<Re.minY&&(Re.minY=Ee),tt>Re.maxX&&(Re.maxX=tt),ne>Re.maxY&&(Re.maxY=ne)}return Re}function Ce(ce,H,q,te){var he=H.geometry,fe=H.type,Re=[];if(fe==="Point"||fe==="MultiPoint")for(var be=0;be<he.length;be+=3)Re.push(he[be]),Re.push(he[be+1]),ce.numPoints++,ce.numSimplified++;else if(fe==="LineString")He(Re,he,ce,q,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(be=0;be<he.length;be++)He(Re,he[be],ce,q,fe==="Polygon",be===0);else if(fe==="MultiPolygon")for(var ge=0;ge<he.length;ge++){var Ee=he[ge];for(be=0;be<Ee.length;be++)He(Re,Ee[be],ce,q,!0,be===0)}if(Re.length){var tt=H.tags||null;if(fe==="LineString"&&te.lineMetrics){for(var ne in tt={},H.tags)tt[ne]=H.tags[ne];tt.mapbox_clip_start=he.start/he.size,tt.mapbox_clip_end=he.end/he.size}var ae={geometry:Re,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:tt};H.id!==null&&(ae.id=H.id),ce.features.push(ae)}}function He(ce,H,q,te,he,fe){var Re=te*te;if(te>0&&H.size<(he?Re:te))q.numPoints+=H.length/3;else{for(var be=[],ge=0;ge<H.length;ge+=3)(te===0||H[ge+2]>Re)&&(q.numSimplified++,be.push(H[ge]),be.push(H[ge+1])),q.numPoints++;he&&function(Ee,tt){for(var ne=0,ae=0,Pe=Ee.length,Ue=Pe-2;ae<Pe;Ue=ae,ae+=2)ne+=(Ee[ae]-Ee[Ue])*(Ee[ae+1]+Ee[Ue+1]);if(ne>0===tt)for(ae=0,Pe=Ee.length;ae<Pe/2;ae+=2){var Qe=Ee[ae],it=Ee[ae+1];Ee[ae]=Ee[Pe-2-ae],Ee[ae+1]=Ee[Pe-1-ae],Ee[Pe-2-ae]=Qe,Ee[Pe-1-ae]=it}}(be,fe),ce.push(be)}}function Ye(ce,H){var q=(H=this.options=function(he,fe){for(var Re in fe)he[Re]=fe[Re];return he}(Object.create(this.options),H)).debug;if(q&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(he,fe){var Re=[];if(he.type==="FeatureCollection")for(var be=0;be<he.features.length;be++)Ct(Re,he.features[be],fe,be);else Ct(Re,he.type==="Feature"?he:{geometry:he},fe);return Re}(ce,H);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(he,fe){var Re=fe.buffer/fe.extent,be=he,ge=zr(he,1,-1-Re,Re,0,-1,2,fe),Ee=zr(he,1,1-Re,2+Re,0,-1,2,fe);return(ge||Ee)&&(be=zr(he,1,-Re,1+Re,0,-1,2,fe)||[],ge&&(be=cr(ge,1).concat(be)),Ee&&(be=be.concat(cr(Ee,-1)))),be}(te,H),te.length&&this.splitTile(te,0,0,0),q&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function It(ce,H,q){return 32*((1<<ce)*q+H)+ce}function gt(ce,H){return H?ce.properties[H]:ce.id}function Et(ce,H){if(ce==null)return!0;if(ce.type==="Feature")return gt(ce,H)!=null;if(ce.type==="FeatureCollection"){const q=new Set;for(const te of ce.features){const he=gt(te,H);if(he==null||q.has(he))return!1;q.add(he)}return!0}return!1}function pr(ce,H){const q=new Map;if(ce!=null)if(ce.type==="Feature")q.set(gt(ce,H),ce);else for(const te of ce.features)q.set(gt(te,H),te);return q}Ye.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ye.prototype.splitTile=function(ce,H,q,te,he,fe,Re){for(var be=[ce,H,q,te],ge=this.options,Ee=ge.debug;be.length;){te=be.pop(),q=be.pop(),H=be.pop(),ce=be.pop();var tt=1<<H,ne=It(H,q,te),ae=this.tiles[ne];if(!ae&&(Ee>1&&console.time("creation"),ae=this.tiles[ne]=bt(ce,H,q,te,ge),this.tileCoords.push({z:H,x:q,y:te}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,q,te,ae.numFeatures,ae.numPoints,ae.numSimplified),console.timeEnd("creation"));var Pe="z"+H;this.stats[Pe]=(this.stats[Pe]||0)+1,this.total++}if(ae.source=ce,he){if(H===ge.maxZoom||H===he)continue;var Ue=1<<he-H;if(q!==Math.floor(fe/Ue)||te!==Math.floor(Re/Ue))continue}else if(H===ge.indexMaxZoom||ae.numPoints<=ge.indexMaxPoints)continue;if(ae.source=null,ce.length!==0){Ee>1&&console.time("clipping");var Qe,it,Se,xe,Ke,Xe,rt=.5*ge.buffer/ge.extent,jt=.5-rt,zt=.5+rt,nr=1+rt;Qe=it=Se=xe=null,Ke=zr(ce,tt,q-rt,q+zt,0,ae.minX,ae.maxX,ge),Xe=zr(ce,tt,q+jt,q+nr,0,ae.minX,ae.maxX,ge),ce=null,Ke&&(Qe=zr(Ke,tt,te-rt,te+zt,1,ae.minY,ae.maxY,ge),it=zr(Ke,tt,te+jt,te+nr,1,ae.minY,ae.maxY,ge),Ke=null),Xe&&(Se=zr(Xe,tt,te-rt,te+zt,1,ae.minY,ae.maxY,ge),xe=zr(Xe,tt,te+jt,te+nr,1,ae.minY,ae.maxY,ge),Xe=null),Ee>1&&console.timeEnd("clipping"),be.push(Qe||[],H+1,2*q,2*te),be.push(it||[],H+1,2*q,2*te+1),be.push(Se||[],H+1,2*q+1,2*te),be.push(xe||[],H+1,2*q+1,2*te+1)}}},Ye.prototype.getTile=function(ce,H,q){var te=this.options,he=te.extent,fe=te.debug;if(ce<0||ce>24)return null;var Re=1<<ce,be=It(ce,H=(H%Re+Re)%Re,q);if(this.tiles[be])return Be(this.tiles[be],he);fe>1&&console.log("drilling down to z%d-%d-%d",ce,H,q);for(var ge,Ee=ce,tt=H,ne=q;!ge&&Ee>0;)Ee--,tt=Math.floor(tt/2),ne=Math.floor(ne/2),ge=this.tiles[It(Ee,tt,ne)];return ge&&ge.source?(fe>1&&console.log("found parent tile z%d-%d-%d",Ee,tt,ne),fe>1&&console.time("drilling down"),this.splitTile(ge.source,Ee,tt,ne,ce,H,q),fe>1&&console.timeEnd("drilling down"),this.tiles[be]?Be(this.tiles[be],he):null):null};class Lt extends ${constructor(H,q,te,he){super(H,q,te),this._dataUpdateable=new Map,this.loadGeoJSON=(fe,Re)=>{const{promoteId:be}=fe;if(fe.request)return c.f(fe.request,(ge,Ee,tt,ne)=>{this._dataUpdateable=Et(Ee,be)?pr(Ee,be):void 0,Re(ge,Ee,tt,ne)});if(typeof fe.data=="string")try{const ge=JSON.parse(fe.data);this._dataUpdateable=Et(ge,be)?pr(ge,be):void 0,Re(null,ge)}catch{Re(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else fe.dataDiff?this._dataUpdateable?(function(ge,Ee,tt){var ne,ae,Pe,Ue;if(Ee.removeAll&&ge.clear(),Ee.remove)for(const Qe of Ee.remove)ge.delete(Qe);if(Ee.add)for(const Qe of Ee.add){const it=gt(Qe,tt);it!=null&&ge.set(it,Qe)}if(Ee.update)for(const Qe of Ee.update){let it=ge.get(Qe.id);if(it==null)continue;const Se=!Qe.removeAllProperties&&(((ne=Qe.removeProperties)===null||ne===void 0?void 0:ne.length)>0||((ae=Qe.addOrUpdateProperties)===null||ae===void 0?void 0:ae.length)>0);if((Qe.newGeometry||Qe.removeAllProperties||Se)&&(it=Object.assign({},it),ge.set(Qe.id,it),Se&&(it.properties=Object.assign({},it.properties))),Qe.newGeometry&&(it.geometry=Qe.newGeometry),Qe.removeAllProperties)it.properties={};else if(((Pe=Qe.removeProperties)===null||Pe===void 0?void 0:Pe.length)>0)for(const xe of Qe.removeProperties)Object.prototype.hasOwnProperty.call(it.properties,xe)&&delete it.properties[xe];if(((Ue=Qe.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const{key:xe,value:Ke}of Qe.addOrUpdateProperties)it.properties[xe]=Ke}}(this._dataUpdateable,fe.dataDiff,be),Re(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Re(new Error(`Cannot update existing geojson data in ${fe.source}`)):Re(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,he&&(this.loadGeoJSON=he)}loadGeoJSONTile(H,q){const te=H.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);const he=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!he)return q(null,null);const fe=new class{constructor(be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=be.length,this._features=be}feature(be){return new class{constructor(ge){this._feature=ge,this.extent=c.N,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))}loadGeometry(){if(this._feature.type===1){const ge=[];for(const Ee of this._feature.geometry)ge.push([new c.P(Ee[0],Ee[1])]);return ge}{const ge=[];for(const Ee of this._feature.geometry){const tt=[];for(const ne of Ee)tt.push(new c.P(ne[0],ne[1]));ge.push(tt)}return ge}}toGeoJSON(ge,Ee,tt){return R.call(this,ge,Ee,tt)}}(this._features[be])}}(he.features);let Re=Fe(fe);Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),q(null,{vectorTile:fe,rawData:Re.buffer})}loadData(H,q){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const he=!!(H&&H.request&&H.request.collectResourceTiming)&&new c.bu(H.request);this._pendingCallback=q,this._pendingRequest=this.loadGeoJSON(H,(fe,Re)=>{if(delete this._pendingCallback,delete this._pendingRequest,fe||!Re)return q(fe);if(typeof Re!="object")return q(new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`));{O(Re,!0);try{if(H.filter){const ge=c.bC(H.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(tt=>`${tt.key}: ${tt.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(tt=>ge.value.evaluate({zoom:0},tt))}}this._geoJSONIndex=H.cluster?new Yt(function({superclusterOptions:ge,clusterProperties:Ee}){if(!Ee||!ge)return ge;const tt={},ne={},ae={accumulated:null,zoom:0},Pe={properties:null},Ue=Object.keys(Ee);for(const Qe of Ue){const[it,Se]=Ee[Qe],xe=c.bC(Se),Ke=c.bC(typeof it=="string"?[it,["accumulated"],["get",Qe]]:it);tt[Qe]=xe.value,ne[Qe]=Ke.value}return ge.map=Qe=>{Pe.properties=Qe;const it={};for(const Se of Ue)it[Se]=tt[Se].evaluate(ae,Pe);return it},ge.reduce=(Qe,it)=>{Pe.properties=it;for(const Se of Ue)ae.accumulated=Qe[Se],Qe[Se]=ne[Se].evaluate(ae,Pe)},ge}(H)).load(Re.features):function(ge,Ee){return new Ye(ge,Ee)}(Re,H.geojsonVtOptions)}catch(ge){return q(ge)}this.loaded={};const be={};if(he){const ge=he.finish();ge&&(be.resourceTiming={},be.resourceTiming[H.source]=JSON.parse(JSON.stringify(ge)))}q(null,be)}})}reloadTile(H,q){const te=this.loaded;return te&&te[H.uid]?super.reloadTile(H,q):this.loadTile(H,q)}removeSource(H,q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),q()}getClusterExpansionZoom(H,q){try{q(null,this._geoJSONIndex.getClusterExpansionZoom(H.clusterId))}catch(te){q(te)}}getClusterChildren(H,q){try{q(null,this._geoJSONIndex.getChildren(H.clusterId))}catch(te){q(te)}}getClusterLeaves(H,q){try{q(null,this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset))}catch(te){q(te)}}}class mr{constructor(H){this.self=H,this.actor=new c.C(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:$,geojson:Lt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(q,te)=>{if(this.workerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.workerSourceTypes[q]=te},this.self.registerRTLTextPlugin=q=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=q.applyArabicShaping,c.bD.processBidirectionalText=q.processBidirectionalText,c.bD.processStyledBidirectionalText=q.processStyledBidirectionalText}}setReferrer(H,q){this.referrer=q}setImages(H,q,te){this.availableImages[H]=q;for(const he in this.workerSources[H]){const fe=this.workerSources[H][he];for(const Re in fe)fe[Re].availableImages=q}te()}setLayers(H,q,te){this.getLayerIndex(H).replace(q),te()}updateLayers(H,q,te){this.getLayerIndex(H).update(q.layers,q.removedIds),te()}loadTile(H,q,te){this.getWorkerSource(H,q.type,q.source).loadTile(q,te)}loadDEMTile(H,q,te){this.getDEMWorkerSource(H,q.source).loadTile(q,te)}reloadTile(H,q,te){this.getWorkerSource(H,q.type,q.source).reloadTile(q,te)}abortTile(H,q,te){this.getWorkerSource(H,q.type,q.source).abortTile(q,te)}removeTile(H,q,te){this.getWorkerSource(H,q.type,q.source).removeTile(q,te)}removeDEMTile(H,q){this.getDEMWorkerSource(H,q.source).removeTile(q)}removeSource(H,q,te){if(!this.workerSources[H]||!this.workerSources[H][q.type]||!this.workerSources[H][q.type][q.source])return;const he=this.workerSources[H][q.type][q.source];delete this.workerSources[H][q.type][q.source],he.removeSource!==void 0?he.removeSource(q,te):te()}loadWorkerSource(H,q,te){try{this.self.importScripts(q.url),te()}catch(he){te(he.toString())}}syncRTLPluginState(H,q,te){try{c.bD.setState(q);const he=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&he!=null){this.self.importScripts(he);const fe=c.bD.isParsed();te(fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${he}`),fe)}}catch(he){te(he.toString())}}getAvailableImages(H){let q=this.availableImages[H];return q||(q=[]),q}getLayerIndex(H){let q=this.layerIndexes[H];return q||(q=this.layerIndexes[H]=new b),q}getWorkerSource(H,q,te){return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][q]||(this.workerSources[H][q]={}),this.workerSources[H][q][te]||(this.workerSources[H][q][te]=new this.workerSourceTypes[q]({send:(he,fe,Re)=>{this.actor.send(he,fe,Re,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][q][te]}getDEMWorkerSource(H,q){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][q]||(this.demWorkerSources[H][q]=new V),this.demWorkerSources[H][q]}}return c.i()&&(self.worker=new mr(self)),mr}),d(["./shared"],function(c){var b="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,f){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,f,g={}){i.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(i,u,f,g={}){i.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new c.P(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new c.P(u[_].clientX-f.left-i.clientLeft,u[_].clientY-f.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(y){!$&&A&&(V?N(y):k=y)}};let k,A,$=!1,V=!1;function N(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,A),y.isContextLost())return;T.supported=!0}catch{}y.deleteTexture(i),$=!0}var G,O;typeof document<"u"&&(A=document.createElement("img"),A.onload=function(){k&&N(k),k=null,V=!0},A.onerror=function(){$=!0,k=null},A.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,f,g;y.resetRequestQueue=()=>{i=[],u=0,f=0,g={}},y.addThrottleControl=D=>{const F=f++;return g[F]=D,F},y.removeThrottleControl=D=>{delete g[D],I()},y.getImage=(D,F,j=!0)=>{T.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const J={requestParameters:D,supportImageRefresh:j,callback:F,cancelled:!1,completed:!1,cancel:()=>{J.completed||J.cancelled||(J.cancelled=!0,J.innerRequest&&(J.innerRequest.cancel(),u--),I())}};return i.push(J),I(),J};const _=D=>{const{requestParameters:F,supportImageRefresh:j,callback:J}=D;return c.e(F,{type:"image"}),(j!==!1||c.i()||c.g(F.url)||F.headers&&!Object.keys(F.headers).reduce((de,ue)=>de&&ue==="accept",!0)?c.m:E)(F,(de,ue,pe,se)=>{C(D,J,de,ue,pe,se)})},C=(D,F,j,J,de,ue)=>{j?F(j):J instanceof HTMLImageElement||c.a(J)?F(null,J):J&&((pe,se)=>{typeof createImageBitmap=="function"?c.b(pe,se):c.d(pe,se)})(J,(pe,se)=>{pe!=null?F(pe):se!=null&&F(null,se,{cacheControl:de,expires:ue})}),D.cancelled||(D.completed=!0,u--,I())},I=()=>{const D=(()=>{const F=Object.keys(g);let j=!1;if(F.length>0){for(const J of F)if(j=g[J](),j)break}return j})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=u;F<D&&i.length>0;F++){const j=i.shift();if(j.cancelled){F--;continue}const J=_(j);u++,j.innerRequest=J}},E=(D,F)=>{const j=new Image,J=D.url;let de=!1;const ue=D.credentials;return ue&&ue==="include"?j.crossOrigin="use-credentials":(ue&&ue==="same-origin"||!c.s(J))&&(j.crossOrigin="anonymous"),j.fetchPriority="high",j.onload=()=>{F(null,j),j.onerror=j.onload=null},j.onerror=()=>{de||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),j.onerror=j.onload=null},j.src=J,{cancel:()=>{de=!0,j.src=""}}}}(G||(G={})),G.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(O||(O={}));class R{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const g=function(_){const C=_.match(M);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${f}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const M=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ee(y){var i=new c.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var Z,oe=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};Z=new c.A(3),c.A!=Float32Array&&(Z[0]=0,Z[1]=0,Z[2]=0);var ie=function(y){var i=y[0],u=y[1];return i*i+u*u};function W(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:g}of y){const _=`${f}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:f,url:g}))}}return i}function Ie(y,i,u,f,g){if(f)return void y(f);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const I=c.h.getImageCanvasContext(u[C]),E=i[C];for(const D in E){const{width:F,height:j,x:J,y:de,sdf:ue,pixelRatio:pe,stretchX:se,stretchY:ze,content:je}=E[D];_[C][D]={data:null,pixelRatio:pe,sdf:ue,stretchX:se,stretchY:ze,content:je,spriteData:{width:F,height:j,x:J,y:de,context:I}}}}y(null,_)}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class _e{constructor(i,u,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,f){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||f),{context:I}=this,{gl:E}=I;if(this.useMipmap=!!(u&&u.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:D,y:F}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texSubImage2D(E.TEXTURE_2D,0,D,F,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,D,F,g,_,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(i,u,f){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Te(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ae extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new c.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const f=u.spriteData,g=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,f=!0){const g=this.getImage(i);if(f&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const g of i){let _=this.getImage(g);_||(this.fire(new c.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?f[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new c.I(g,f);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _e(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:f}=c.p(i),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],I=C.x+1,E=C.y+1,D=this.getImage(_).data,F=D.width,j=D.height;c.R.copy(D,g,{x:0,y:0},{x:I,y:E},{width:F,height:j}),c.R.copy(D,g,{x:0,y:j-1},{x:I,y:E-1},{width:F,height:1}),c.R.copy(D,g,{x:0,y:0},{x:I,y:E+j},{width:F,height:1}),c.R.copy(D,g,{x:F-1,y:0},{x:I-1,y:E},{width:1,height:j}),c.R.copy(D,g,{x:0,y:0},{x:I+F,y:E},{width:1,height:j})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||c.w(`Image with ID: "${u}" was not found`),Te(f)&&this.updateImage(u,f)}}}const $e=1e20;function et(y,i,u,f,g,_,C,I,E){for(let D=i;D<i+f;D++)Ve(y,u*_+D,_,g,C,I,E);for(let D=u;D<u+g;D++)Ve(y,D*_+i,1,f,C,I,E)}function Ve(y,i,u,f,g,_,C){_[0]=0,C[0]=-$e,C[1]=$e,g[0]=y[i];for(let I=1,E=0,D=0;I<f;I++){g[I]=y[i+I*u];const F=I*I;do{const j=_[E];D=(g[I]-g[j]+F-j*j)/(I-j)/2}while(D<=C[E]&&--E>-1);E++,_[E]=I,C[E]=D,C[E+1]=$e}for(let I=0,E=0;I<f;I++){for(;C[E+1]<I;)E++;const D=_[E],F=I-D;y[i+I*u]=g[D]+F*F}}class ke{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const g in i)for(const _ of i[g])f.push({stack:g,id:_});c.o(f,({stack:g,id:_},C)=>{let I=this.entries[g];I||(I=this.entries[g]={glyphs:{},requests:{},ranges:{}});let E=I.glyphs[_];if(E!==void 0)return void C(null,{stack:g,id:_,glyph:E});if(E=this._tinySDF(I,g,_),E)return I.glyphs[_]=E,void C(null,{stack:g,id:_,glyph:E});const D=Math.floor(_/256);if(256*D>65535)return void C(new Error("glyphs > 65535 not supported"));if(I.ranges[D])return void C(null,{stack:g,id:_,glyph:E});if(!this.url)return void C(new Error("glyphsUrl is not set"));let F=I.requests[D];F||(F=I.requests[D]=[],ke.loadGlyphRange(g,D,this.url,this.requestManager,(j,J)=>{if(J){for(const de in J)this._doesCharSupportLocalGlyph(+de)||(I.glyphs[+de]=J[+de]);I.ranges[D]=!0}for(const de of F)de(j,J);delete I.requests[D]})),F.push((j,J)=>{j?C(j):J&&C(null,{stack:g,id:_,glyph:J[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:I,id:E,glyph:D}of _)(C[I]||(C[I]={}))[E]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let _=i.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=i.tinySDF=new ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:I})}const C=_.draw(String.fromCharCode(f));return{id:f,bitmap:new c.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}ke.loadGlyphRange=function(y,i,u,f,g){const _=256*i,C=_+255,I=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),O.Glyphs);c.l(I,(E,D)=>{if(E)g(E);else if(D){const F={};for(const j of c.n(D))F[j.id]=j;g(null,F)}})},ke.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const I=this.size=y+4*i,E=this._createCanvas(I),D=this.ctx=E.getContext("2d",{willReadFrequently:!0});D.font=`${C} ${_} ${y}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),E=Math.min(this.size-this.buffer,C+Math.ceil(f)),D=I+2*this.buffer,F=E+2*this.buffer,j=Math.max(D*F,0),J=new Uint8ClampedArray(j),de={data:J,width:D,height:F,glyphWidth:I,glyphHeight:E,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(I===0||E===0)return de;const{ctx:ue,buffer:pe,gridInner:se,gridOuter:ze}=this;ue.clearRect(pe,pe,I,E),ue.fillText(y,pe,pe+C);const je=ue.getImageData(pe,pe,I,E);ze.fill($e,0,j),se.fill(0,0,j);for(let ye=0;ye<E;ye++)for(let Me=0;Me<I;Me++){const qe=je.data[4*(ye*I+Me)+3]/255;if(qe===0)continue;const Ze=(ye+pe)*D+Me+pe;if(qe===1)ze[Ze]=0,se[Ze]=$e;else{const ot=.5-qe;ze[Ze]=ot>0?ot*ot:0,se[Ze]=ot<0?ot*ot:0}}et(ze,0,0,D,F,D,this.f,this.v,this.z),et(se,pe,pe,I,E,D,this.f,this.v,this.z);for(let ye=0;ye<j;ye++){const Me=Math.sqrt(ze[ye])-Math.sqrt(se[ye]);J[ye]=Math.round(255-255*(Me/this.radius+this.cutoff))}return de}};class Ne{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,u){return c.z(i.expression.evaluate(u))}interpolate(i,u,f){return{x:c.B.number(i.x,u.x,f),y:c.B.number(i.y,u.y,f),z:c.B.number(i.z,u.z,f)}}}let Oe;class Fe extends c.E{constructor(i){super(),Oe=Oe||new c.r({anchor:new c.D(c.v.light.anchor),position:new Ne,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Oe),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(c.t,i,u))for(const f in i){const g=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class nt{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const g=[];let _=i.length%2==1?-i[i.length-1]*f:0,C=i[0]*f,I=!0;g.push({left:_,right:C,isDash:I,zeroLength:i[0]===0});let E=i[0];for(let D=1;D<i.length;D++){I=!I;const F=i[D];_=E*f,E+=F,C=E*f,g.push({left:_,right:C,isDash:I,zeroLength:F===0})}return g}addRoundDash(i,u,f){const g=u/2;for(let _=-f;_<=f;_++){const C=this.width*(this.nextRow+f+_);let I=0,E=i[I];for(let D=0;D<this.width;D++){D/E.right>1&&(E=i[++I]);const F=Math.abs(D-E.left),j=Math.abs(D-E.right),J=Math.min(F,j);let de;const ue=_/f*(g+1);if(E.isDash){const pe=g-Math.abs(ue);de=Math.sqrt(J*J+pe*pe)}else de=g-Math.sqrt(J*J+ue*ue);this.data[C+D]=Math.max(0,Math.min(255,de+128))}}}addRegularDash(i){for(let I=i.length-1;I>=0;--I){const E=i[I],D=i[I+1];E.zeroLength?i.splice(I,1):D&&D.isDash===E.isDash&&(D.left=E.left,i.splice(I,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++_]);const E=Math.abs(I-C.left),D=Math.abs(I-C.right),F=Math.min(E,D);this.data[g+I]=Math.max(0,Math.min(255,(C.isDash?F:-F)+128))}}addDash(i,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let I=0;I<i.length;I++)_+=i[I];if(_!==0){const I=this.width/_,E=this.getDashRanges(i,this.width,I);u?this.addRoundDash(E,I,f):this.addRegularDash(E)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class lt{constructor(i,u,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let _=0;_<g.length;_++){const C=new c.C(g[_],u,f);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,f){c.o(this.actors,(g,_)=>{g.send(i,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function ut(y,i,u){const f=function(g,_){if(g)return u(g);if(_){const C=c.F(c.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(I=>I.id)),u(null,C)}};return y.url?c.f(i.transformRequest(y.url,O.Source),f):c.h.frame(()=>f(null,y))}class Dt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const u=this._sw,f=this._ne;let g,_;if(i instanceof c.L)g=i,_=i;else{if(!(i instanceof Dt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dt.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new c.L(g.lng,g.lat),this._ne=new c.L(_.lng,_.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=c.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(i){return i instanceof Dt?i:i&&new Dt(i)}static fromLngLat(i,u=0){const f=360*u/40075017,g=f/Math.cos(Math.PI/180*i.lat);return new Dt(new c.L(i.lng-g,i.lat-f),new c.L(i.lng+g,i.lat+f))}}class St{constructor(i,u,f){this.bounds=Dt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(c.G(this.bounds.getWest())*u),g=Math.floor(c.H(this.bounds.getNorth())*u),_=Math.ceil(c.G(this.bounds.getEast())*u),C=Math.ceil(c.H(this.bounds.getSouth())*u);return i.x>=f&&i.x<_&&i.y>=g&&i.y<C}}class $t extends c.E{constructor(i,u,f,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new c.j(_)):C&&(c.e(this,C),C.bounds&&(this.tileBounds=new St(C.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,O.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,I){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(I&&I.resourceTiming&&(i.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&i.setExpiryData(I),i.loadVectorData(I,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Yt extends c.E{constructor(i,u,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):u&&(c.e(this,u),u.bounds&&(this.tileBounds=new St(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=G.getImage(this.map._requestManager.transformRequest(f,O.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const I=this.map.painter.context,E=I.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new _e(I,_,E.RGBA,{useMipmap:!0}),i.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&E.texParameterf(E.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class ct extends Yt{constructor(i,u,f,g){super(i,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(f,O.Tile);function _(C,I){C&&(i.state="errored",u(C)),I&&(i.dem=I,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=G.getImage(g,(C,I,E)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(I){this.map._refreshExpiredTiles&&i.setExpiryData(E);const D=c.a(I)&&c.J()?I:yield function(j){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const J=j.width+2,de=j.height+2;try{return new c.R({width:J,height:de},yield c.M(j,-1,-1,J,de))}catch{}}return c.h.getImageData(j,1)})}(I),F={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",F,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+f)%f,I=u.x+1===f?i.wrap+1:i.wrap,E={};return E[new c.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},E[new c.O(i.overscaledZ,I,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,I,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<f&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,I,u.z,C,u.y+1).key]={backfilled:!1}),E}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Je extends c.E{constructor(i,u,f,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},g),this}_updateWorkerData(i){const u=c.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),O.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new c.j(f));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&c.e(C,{resourceTiming:_}),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ft=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _t extends c.E{constructor(i,u,f,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=G.getImage(this.map._requestManager.transformRequest(this.url,O.Image),(I,E)=>{this._request=null,this._loaded=!0,I?this.fire(new c.j(I)):E&&(this.image=E,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new _e(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const E in this.tiles){const D=this.tiles[E];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(c.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,I=-1/0,E=-1/0;for(const J of g)_=Math.min(_,J.x),C=Math.min(C,J.y),I=Math.max(I,J.x),E=Math.max(E,J.y);const D=Math.max(I-_,E-C),F=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),j=Math.pow(2,F);return new c.W(F,Math.floor((_+I)/2*j),Math.floor((C+E)/2*j))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,c.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,c.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class sr extends _t{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,O.Source).url);c.X(this.urls,(C,I)=>{this._loaded=!0,C?this.fire(new c.j(C)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new _e(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const E in this.tiles){const D=this.tiles[E];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Qt extends _t{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,I=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _e(C,this.canvas,I.RGBA,{premultiply:!0});let E=!1;for(const D in this.tiles){const F=this.tiles[D];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,E=!0)}E&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Pr={},hr=y=>{switch(y){case"geojson":return Je;case"image":return _t;case"raster":return Yt;case"raster-dem":return ct;case"vector":return $t;case"video":return sr;case"canvas":return Qt}return Pr[y]};function Ht(y,i){const u=c.Z();return c.$(u,u,[1,1,0]),c.a0(u,u,[.5*y.width,.5*y.height,1]),c.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Ct(y,i,u,f,g,_){const C=function(j,J,de){if(j)for(const ue of j){const pe=J[ue];if(pe&&pe.source===de&&pe.type==="fill-extrusion")return!0}else for(const ue in J){const pe=J[ue];if(pe.source===de&&pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),I=_.maxPitchScaleFactor(),E=y.tilesIn(f,I,C);E.sort(ur);const D=[];for(const j of E)D.push({wrappedTileID:j.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(i,u,y._state,j.queryGeometry,j.cameraQueryGeometry,j.scale,g,_,I,Ht(y.transform,j.tileID))});const F=function(j){const J={},de={};for(const ue of j){const pe=ue.queryResults,se=ue.wrappedTileID,ze=de[se]=de[se]||{};for(const je in pe){const ye=pe[je],Me=ze[je]=ze[je]||{},qe=J[je]=J[je]||[];for(const Ze of ye)Me[Ze.featureIndex]||(Me[Ze.featureIndex]=!0,qe.push(Ze))}}return J}(D);for(const j in F)F[j].forEach(J=>{const de=J.feature,ue=y.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=ue});return F}function ur(y,i){const u=y.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class Ot{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const I of g){const E=I.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(E.length!==0){I.layers=E,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(D=>E.filter(F=>F.id===D)[0]));for(const D of E)C[D.id]=I}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4&&_.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _e(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _e(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,g,_,C,I,E,D,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:F,transform:E,params:I,queryPadding:this.queryPadding*D},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const I=c.a6(u&&u.filter),{z:E,x:D,y:F}=this.tileID.canonical,j={z:E,x:D,y:F};for(let J=0;J<C.length;J++){const de=C.feature(J);if(I.needGeometry){const se=c.a7(de,!0);if(!I.filter(new c.a8(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!I.filter(new c.a8(this.tileID.overscaledZ),de))continue;const ue=f.getId(de,_),pe=new c.a9(de,E,D,F,ue);pe.tile=j,i.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=c.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",I=f[C],E=i[C];if(!I||!E||Object.keys(E).length===0)continue;_.update(E,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=u&&u.style&&u.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,u){const f={};for(const g of u)f[g]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const g=this.dependencies[f];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Cr{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},f)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][g];return this.data[f].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class We{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},c.e(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])f[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),g=c.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),c.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];f[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const I of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][I];_[C]=this.state[g][C]}f[g]=f[g]||{},c.e(f[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,u)}}class br extends c.E{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,I)=>{const E=new(hr(_.type))(g,_,C,I);if(E.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${E.id}`);return E})(i,u,f,this),this._tiles={},this._cache=new Cr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new We,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(zr).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,g)=>{const _=f.tileID,C=g.tileID,I=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),E=new c.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||E.y-I.y||E.x-I.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(zr).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new c.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);f(i,C),f(C,i)}}function f(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const I=_.tileID.canonical.y-g.tileID.canonical.y,E=Math.pow(2,g.tileID.canonical.z),D=_.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+E)===1?C+=E:Math.abs(C-E)===1&&(C-=E)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,I),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>f)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const D=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[D.key],C&&C.hasData()&&(I=D)}let E=I;for(;E.overscaledZ>u;)if(E=E.scaledTo(E.overscaledZ-1),i[E.key]){g[I.key]=I;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const g=i.scaledTo(f),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new c.O(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(F=>this._source.hasTile(F)))):f=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-br.maxOverzooming,this._source.minzoom),C=Math.max(g+br.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const j of f)if(j.canonical.z>this._source.minzoom){const J=j.scaledTo(j.canonical.z-1);F[J.key]=J;const de=j.scaledTo(Math.max(this._source.minzoom,Math.min(j.canonical.z,5)));F[de.key]=de}f=f.concat(Object.values(F))}const I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(f,g);if(Kt(this._source.type)){const F={},j={},J=Object.keys(E),de=c.h.now();for(const ue of J){const pe=E[ue],se=this._tiles[ue];if(!se||se.fadeEndTime!==0&&se.fadeEndTime<=de)continue;const ze=this.findLoadedParent(pe,_);ze&&(this._addTile(ze.tileID),F[ze.tileID.key]=ze.tileID),j[ue]=pe}this._retainLoadedChildren(j,g,C,E);for(const ue in F)E[ue]||(this._coveredTiles[ue]=!0,E[ue]=F[ue]);if(u){const ue={},pe={};for(const se of f)this._tiles[se.key].hasData()?ue[se.key]=se:pe[se.key]=se;for(const se in pe){const ze=pe[se].children(this._source.maxzoom);this._tiles[ze[0].key]&&this._tiles[ze[1].key]&&this._tiles[ze[2].key]&&this._tiles[ze[3].key]&&(ue[ze[0].key]=E[ze[0].key]=ze[0],ue[ze[1].key]=E[ze[1].key]=ze[1],ue[ze[2].key]=E[ze[2].key]=ze[2],ue[ze[3].key]=E[ze[3].key]=ze[3],delete pe[se])}for(const se in pe){const ze=this.findLoadedParent(pe[se],this._source.minzoom);if(ze){ue[ze.tileID.key]=E[ze.tileID.key]=ze.tileID;for(const je in ue)ue[je].isChildOf(ze.tileID)&&delete ue[je]}}for(const se in this._tiles)ue[se]||(this._coveredTiles[se]=!0)}}for(const F in E)this._tiles[F].clearFadeHold();const D=c.ab(this._tiles,E);for(const F of D){const j=this._tiles[F];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},g={},_=Math.max(u-br.maxOverzooming,this._source.minzoom),C=Math.max(u+br.maxUnderzooming,this._source.minzoom),I={};for(const E of i){const D=this._addTile(E);f[E.key]=E,D.hasData()||u<this._source.maxzoom&&(I[E.key]=E)}this._retainLoadedChildren(I,u,C,f);for(const E of i){let D=this._tiles[E.key];if(D.hasData())continue;if(u+1>this._source.maxzoom){const j=E.children(this._source.maxzoom)[0],J=this.getTile(j);if(J&&J.hasData()){f[j.key]=j;continue}}else{const j=E.children(this._source.maxzoom);if(f[j[0].key]&&f[j[1].key]&&f[j[2].key]&&f[j[3].key])continue}let F=D.wasRequested();for(let j=E.overscaledZ-1;j>=_;--j){const J=E.scaledTo(j);if(g[J.key])break;if(g[J.key]=!0,D=this.getTile(J),!D&&F&&(D=this._addTile(J)),D){const de=D.hasData();if((F||de)&&(f[J.key]=J),F=D.wasRequested(),de)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;g=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new Ot(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const g=[],_=this.transform;if(!_)return g;const C=f?_.getCameraQueryGeometry(i):i,I=i.map(ue=>_.pointCoordinate(ue,this.terrain)),E=C.map(ue=>_.pointCoordinate(ue,this.terrain)),D=this.getIds();let F=1/0,j=1/0,J=-1/0,de=-1/0;for(const ue of E)F=Math.min(F,ue.x),j=Math.min(j,ue.y),J=Math.max(J,ue.x),de=Math.max(de,ue.y);for(let ue=0;ue<D.length;ue++){const pe=this._tiles[D[ue]];if(pe.holdingForFade())continue;const se=pe.tileID,ze=Math.pow(2,_.zoom-pe.tileID.overscaledZ),je=u*pe.queryPadding*c.N/pe.tileSize/ze,ye=[se.getTilePoint(new c.U(F,j)),se.getTilePoint(new c.U(J,de))];if(ye[0].x-je<c.N&&ye[0].y-je<c.N&&ye[1].x+je>=0&&ye[1].y+je>=0){const Me=I.map(Ze=>se.getTilePoint(Ze)),qe=E.map(Ze=>se.getTilePoint(Ze));g.push({tile:pe,tileID:se,queryGeometry:Me,cameraQueryGeometry:qe,scale:ze})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Kt(this._source.type)){const i=c.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const g=this._tiles[i];g&&g.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function zr(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||f-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Kt(y){return y==="raster"||y==="image"||y==="video"}br.maxOverzooming=10,br.maxUnderzooming=3;const rr="mapboxgl_preloaded_worker_pool";class Or{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Or.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rr]}numActive(){return Object.keys(this.active).length}}const Rr=Math.floor(c.h.hardwareConcurrency/2);let fr;function dr(){return fr||(fr=new Or),fr}Or.workerCount=c.ac(globalThis)?Math.max(Math.min(Rr,3),1):1;class Gt{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let u=1,f=this._distances[u];const g=i*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const _=u-1,C=this._distances[_],I=f-C,E=I>0?(g-C)/I:0;return this.points[_].mult(1-E).add(this.points[u].mult(E))}}function cr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Ir{constructor(i,u,f){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,g,_){this._forEachCell(u,f,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,u,f,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,f,g,_,C){this.circleCells[_].push(C)}_query(i,u,f,g,_,C,I){if(f<0||i>this.width||g<0||u>this.height)return[];const E=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:f,y2:g}];for(let D=0;D<this.boxKeys.length;D++)E.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const F=this.circles[3*D],j=this.circles[3*D+1],J=this.circles[3*D+2];E.push({key:this.circleKeys[D],x1:F-J,y1:j-J,x2:F+J,y2:j+J})}}else this._forEachCell(i,u,f,g,this._queryCell,E,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},I);return E}query(i,u,f,g){return this._query(i,u,f,g,!1,null)}hitTest(i,u,f,g,_,C){return this._query(i,u,f,g,!0,_,C).length>0}hitTestCircle(i,u,f,g,_){const C=i-f,I=i+f,E=u-f,D=u+f;if(I<0||C>this.width||D<0||E>this.height)return!1;const F=[];return this._forEachCell(C,E,I,D,this._queryCellCircle,F,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},_),F.length>0}_queryCell(i,u,f,g,_,C,I,E){const{seenUids:D,hitTest:F,overlapMode:j}=I,J=this.boxCells[_];if(J!==null){const ue=this.bboxes;for(const pe of J)if(!D.box[pe]){D.box[pe]=!0;const se=4*pe,ze=this.boxKeys[pe];if(i<=ue[se+2]&&u<=ue[se+3]&&f>=ue[se+0]&&g>=ue[se+1]&&(!E||E(ze))&&(!F||!cr(j,ze.overlapMode))&&(C.push({key:ze,x1:ue[se],y1:ue[se+1],x2:ue[se+2],y2:ue[se+3]}),F))return!0}}const de=this.circleCells[_];if(de!==null){const ue=this.circles;for(const pe of de)if(!D.circle[pe]){D.circle[pe]=!0;const se=3*pe,ze=this.circleKeys[pe];if(this._circleAndRectCollide(ue[se],ue[se+1],ue[se+2],i,u,f,g)&&(!E||E(ze))&&(!F||!cr(j,ze.overlapMode))){const je=ue[se],ye=ue[se+1],Me=ue[se+2];if(C.push({key:ze,x1:je-Me,y1:ye-Me,x2:je+Me,y2:ye+Me}),F)return!0}}}return!1}_queryCellCircle(i,u,f,g,_,C,I,E){const{circle:D,seenUids:F,overlapMode:j}=I,J=this.boxCells[_];if(J!==null){const ue=this.bboxes;for(const pe of J)if(!F.box[pe]){F.box[pe]=!0;const se=4*pe,ze=this.boxKeys[pe];if(this._circleAndRectCollide(D.x,D.y,D.radius,ue[se+0],ue[se+1],ue[se+2],ue[se+3])&&(!E||E(ze))&&!cr(j,ze.overlapMode))return C.push(!0),!0}}const de=this.circleCells[_];if(de!==null){const ue=this.circles;for(const pe of de)if(!F.circle[pe]){F.circle[pe]=!0;const se=3*pe,ze=this.circleKeys[pe];if(this._circlesCollide(ue[se],ue[se+1],ue[se+2],D.x,D.y,D.radius)&&(!E||E(ze))&&!cr(j,ze.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,f,g,_,C,I,E){const D=this._convertToXCellCoord(i),F=this._convertToYCellCoord(u),j=this._convertToXCellCoord(f),J=this._convertToYCellCoord(g);for(let de=D;de<=j;de++)for(let ue=F;ue<=J;ue++)if(_.call(this,i,u,f,g,this.xCellCount*ue+de,C,I,E))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,g,_,C){const I=g-i,E=_-u,D=f+C;return D*D>I*I+E*E}_circleAndRectCollide(i,u,f,g,_,C,I){const E=(C-g)/2,D=Math.abs(i-(g+E));if(D>E+f)return!1;const F=(I-_)/2,j=Math.abs(u-(_+F));if(j>F+f)return!1;if(D<=E||j<=F)return!0;const J=D-E,de=j-F;return J*J+de*de<=f*f}}function Be(y,i,u,f,g){const _=c.Z();return i?(c.a0(_,_,[1/g,1/g,1]),u||c.ae(_,_,f.angle)):c.a1(_,f.labelPlaneMatrix,y),_}function xt(y,i,u,f,g){if(i){const _=c.af(y);return c.a0(_,_,[g,g,1]),u||c.ae(_,_,-f.angle),_}return f.glCoordMatrix}function bt(y,i,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],c.ag(f,f,i)):(f=[y.x,y.y,0,1],he(f,f,i));const g=f[3];return{point:new c.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function Ce(y,i){return .5+y/i*.5}function He(y,i){const u=y[0]/y[3],f=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function Ye(y,i,u,f,g,_,C,I,E,D){const F=f?y.textSizeData:y.iconSizeData,j=c.ah(F,u.transform.zoom),J=[256/u.width*2+1,256/u.height*2+1],de=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;de.clear();const ue=y.lineVertexArray,pe=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,se=u.transform.width/u.transform.height;let ze=!1;for(let je=0;je<pe.length;je++){const ye=pe.get(je);if(ye.hidden||ye.writingMode===c.ai.vertical&&!ze){te(ye.numGlyphs,de);continue}let Me;if(ze=!1,D?(Me=[ye.anchorX,ye.anchorY,D(ye.anchorX,ye.anchorY),1],c.ag(Me,Me,i)):(Me=[ye.anchorX,ye.anchorY,0,1],he(Me,Me,i)),!He(Me,J)){te(ye.numGlyphs,de);continue}const qe=Ce(u.transform.cameraToCenterDistance,Me[3]),Ze=c.aj(F,j,ye),ot=C?Ze/qe:Ze*qe,dt=new c.P(ye.anchorX,ye.anchorY),st=bt(dt,g,D).point,pt={projections:{},offsets:{}},Vt=Et(ye,ot,!1,I,i,g,_,y.glyphOffsetArray,ue,de,st,dt,pt,se,E,D);ze=Vt.useVertical,(Vt.notEnoughRoom||ze||Vt.needsFlipping&&Et(ye,ot,!0,I,i,g,_,y.glyphOffsetArray,ue,de,st,dt,pt,se,E,D).notEnoughRoom)&&te(ye.numGlyphs,de)}f?y.text.dynamicLayoutVertexBuffer.updateData(de):y.icon.dynamicLayoutVertexBuffer.updateData(de)}function It(y,i,u,f,g,_,C,I,E,D,F,j,J){const de=I.glyphStartIndex+I.numGlyphs,ue=I.lineStartIndex,pe=I.lineStartIndex+I.lineLength,se=i.getoffsetX(I.glyphStartIndex),ze=i.getoffsetX(de-1),je=H(y*se,u,f,g,_,C,I.segment,ue,pe,E,D,F,j,J);if(!je)return null;const ye=H(y*ze,u,f,g,_,C,I.segment,ue,pe,E,D,F,j,J);return ye?{first:je,last:ye}:null}function gt(y,i,u,f){return y===c.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(y===c.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Et(y,i,u,f,g,_,C,I,E,D,F,j,J,de,ue,pe){const se=i/24,ze=y.lineOffsetX*se,je=y.lineOffsetY*se;let ye;if(y.numGlyphs>1){const Me=y.glyphStartIndex+y.numGlyphs,qe=y.lineStartIndex,Ze=y.lineStartIndex+y.lineLength,ot=It(se,I,ze,je,u,F,j,y,E,_,J,ue,pe);if(!ot)return{notEnoughRoom:!0};const dt=bt(ot.first.point,C,pe).point,st=bt(ot.last.point,C,pe).point;if(f&&!u){const pt=gt(y.writingMode,dt,st,de);if(pt)return pt}ye=[ot.first];for(let pt=y.glyphStartIndex+1;pt<Me-1;pt++)ye.push(H(se*I.getoffsetX(pt),ze,je,u,F,j,y.segment,qe,Ze,E,_,J,ue,pe));ye.push(ot.last)}else{if(f&&!u){const qe=bt(j,g,pe).point,Ze=y.lineStartIndex+y.segment+1,ot=new c.P(E.getx(Ze),E.gety(Ze)),dt=bt(ot,g,pe),st=dt.signedDistanceFromCamera>0?dt.point:pr(j,ot,qe,1,g,pe),pt=gt(y.writingMode,qe,st,de);if(pt)return pt}const Me=H(se*I.getoffsetX(y.glyphStartIndex),ze,je,u,F,j,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,E,_,J,ue,pe);if(!Me)return{notEnoughRoom:!0};ye=[Me]}for(const Me of ye)c.ak(D,Me.point,Me.angle);return{}}function pr(y,i,u,f,g,_){const C=bt(y.add(y.sub(i)._unit()),g,_).point,I=u.sub(C);return u.add(I._mult(f/I.mag()))}function Lt(y,i){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:I,previousVertex:E,direction:D,absOffsetX:F}=i;if(u.projections[y])return u.projections[y];const j=new c.P(f.getx(y),f.gety(y)),J=bt(j,g,I);if(J.signedDistanceFromCamera>0)return u.projections[y]=J.point,J.point;const de=y-D;return pr(C===0?_:new c.P(f.getx(de),f.gety(de)),j,E,F-C+1,g,I)}function mr(y,i,u){return y._unit()._perp()._mult(i*u)}function ce(y,i,u,f,g,_,C,I){const{projectionCache:E,direction:D}=I;if(E.offsets[y])return E.offsets[y];const F=u.add(i);if(y+D<f||y+D>=g)return E.offsets[y]=F,F;const j=Lt(y+D,I),J=mr(j.sub(u),C,D),de=u.add(J),ue=j.add(J);return E.offsets[y]=c.al(_,F,de,ue)||F,E.offsets[y]}function H(y,i,u,f,g,_,C,I,E,D,F,j,J,de){const ue=f?y-i:y+i;let pe=ue>0?1:-1,se=0;f&&(pe*=-1,se=Math.PI),pe<0&&(se+=Math.PI);let ze,je,ye=pe>0?I+C:I+C+1,Me=g,qe=g,Ze=0,ot=0;const dt=Math.abs(ue),st=[];let pt;for(;Ze+ot<=dt;){if(ye+=pe,ye<I||ye>=E)return null;Ze+=ot,qe=Me,je=ze;const Tt={projectionCache:j,lineVertexArray:D,labelPlaneMatrix:F,tileAnchorPoint:_,distanceFromAnchor:Ze,getElevation:de,previousVertex:qe,direction:pe,absOffsetX:dt};if(Me=Lt(ye,Tt),u===0)st.push(qe),pt=Me.sub(qe);else{let ar;const Wt=Me.sub(qe);ar=Wt.mag()===0?mr(Lt(ye+pe,Tt).sub(Me),u,pe):mr(Wt,u,pe),je||(je=qe.add(ar)),ze=ce(ye,ar,Me,I,E,je,u,Tt),st.push(je),pt=ze.sub(je)}ot=pt.mag()}const Vt=pt._mult((dt-Ze)/ot)._add(je||qe),wr=se+Math.atan2(Me.y-qe.y,Me.x-qe.x);return st.push(Vt),{point:Vt,angle:J?wr:0,path:st}}const q=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function te(y,i){for(let u=0;u<y;u++){const f=i.length;i.resize(f+4),i.float32.set(q,3*f)}}function he(y,i,u){const f=i[0],g=i[1];return y[0]=u[0]*f+u[4]*g+u[12],y[1]=u[1]*f+u[5]*g+u[13],y[3]=u[3]*f+u[7]*g+u[15],y}const fe=100;class Re{constructor(i,u=new Ir(i.width+200,i.height+200,25),f=new Ir(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+fe,this.screenBottomBoundary=i.height+fe,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,f,g,_,C){const I=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),E=f*I.perspectiveRatio,D=i.x1*E+I.point.x,F=i.y1*E+I.point.y,j=i.x2*E+I.point.x,J=i.y2*E+I.point.y;return!this.isInsideGrid(D,F,j,J)||u!=="always"&&this.grid.hitTest(D,F,j,J,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,F,j,J],offscreen:this.isOffscreen(D,F,j,J)}}placeCollisionCircles(i,u,f,g,_,C,I,E,D,F,j,J,de,ue){const pe=[],se=new c.P(u.anchorX,u.anchorY),ze=bt(se,C,ue),je=Ce(this.transform.cameraToCenterDistance,ze.signedDistanceFromCamera),ye=(F?_/je:_*je)/c.ap,Me=bt(se,I,ue).point,qe=It(ye,g,u.lineOffsetX*ye,u.lineOffsetY*ye,!1,Me,se,u,f,I,{projections:{},offsets:{}},!1,ue);let Ze=!1,ot=!1,dt=!0;if(qe){const st=.5*J*je+de,pt=new c.P(-100,-100),Vt=new c.P(this.screenRightBoundary,this.screenBottomBoundary),wr=new Gt,Tt=qe.first,ar=qe.last;let Wt=[];for(let gr=Tt.path.length-1;gr>=1;gr--)Wt.push(Tt.path[gr]);for(let gr=1;gr<ar.path.length;gr++)Wt.push(ar.path[gr]);const Jr=2.5*st;if(E){const gr=Wt.map(Sr=>bt(Sr,E,ue));Wt=gr.some(Sr=>Sr.signedDistanceFromCamera<=0)?[]:gr.map(Sr=>Sr.point)}let xr=[];if(Wt.length>0){const gr=Wt[0].clone(),Sr=Wt[0].clone();for(let Pn=1;Pn<Wt.length;Pn++)gr.x=Math.min(gr.x,Wt[Pn].x),gr.y=Math.min(gr.y,Wt[Pn].y),Sr.x=Math.max(Sr.x,Wt[Pn].x),Sr.y=Math.max(Sr.y,Wt[Pn].y);xr=gr.x>=pt.x&&Sr.x<=Vt.x&&gr.y>=pt.y&&Sr.y<=Vt.y?[Wt]:Sr.x<pt.x||gr.x>Vt.x||Sr.y<pt.y||gr.y>Vt.y?[]:c.am([Wt],pt.x,pt.y,Vt.x,Vt.y)}for(const gr of xr){wr.reset(gr,.25*st);let Sr=0;Sr=wr.length<=.5*st?1:Math.ceil(wr.paddedLength/Jr)+1;for(let Pn=0;Pn<Sr;Pn++){const nn=Pn/Math.max(Sr-1,1),li=wr.lerp(nn),Wn=li.x+fe,Mn=li.y+fe;pe.push(Wn,Mn,st,0);const no=Wn-st,un=Mn-st,Jo=Wn+st,Yo=Mn+st;if(dt=dt&&this.isOffscreen(no,un,Jo,Yo),ot=ot||this.isInsideGrid(no,un,Jo,Yo),i!=="always"&&this.grid.hitTestCircle(Wn,Mn,st,i,j)&&(Ze=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Ze}}}}return{circles:!D&&Ze||!ot||je<this.perspectiveRatioCutoff?[]:pe,offscreen:dt,collisionDetected:Ze}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,_=-1/0,C=-1/0;for(const F of i){const j=new c.P(F.x+fe,F.y+fe);f=Math.min(f,j.x),g=Math.min(g,j.y),_=Math.max(_,j.x),C=Math.max(C,j.y),u.push(j)}const I=this.grid.query(f,g,_,C).concat(this.ignoredGrid.query(f,g,_,C)),E={},D={};for(const F of I){const j=F.key;if(E[j.bucketInstanceId]===void 0&&(E[j.bucketInstanceId]={}),E[j.bucketInstanceId][j.featureIndex])continue;const J=[new c.P(F.x1,F.y1),new c.P(F.x2,F.y1),new c.P(F.x2,F.y2),new c.P(F.x1,F.y2)];c.an(u,J)&&(E[j.bucketInstanceId][j.featureIndex]=!0,D[j.bucketInstanceId]===void 0&&(D[j.bucketInstanceId]=[]),D[j.bucketInstanceId].push(j.featureIndex))}return D}insertCollisionBox(i,u,f,g,_,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,g,_,C){const I=f?this.ignoredGrid:this.grid,E={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let D=0;D<i.length;D+=4)I.insertCircle(E,i[D],i[D+1],i[D+2])}projectAndGetPerspectiveRatio(i,u,f,g){let _;return g?(_=[u,f,g(u,f),1],c.ag(_,_,i)):(_=[u,f,0,1],he(_,_,i)),{point:new c.P((_[0]/_[3]+1)/2*this.transform.width+fe,(-_[1]/_[3]+1)/2*this.transform.height+fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,f,g){return f<fe||i>=this.screenRightBoundary||g<fe||u>this.screenBottomBoundary}isInsideGrid(i,u,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function be(y,i,u){return i*(c.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class ge{constructor(i,u,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Ee{constructor(i,u,f,g,_){this.text=new ge(i?i.text:null,u,f,_),this.icon=new ge(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tt{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class ne{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class ae{constructor(i,u,f,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=_}}class Pe{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function Ue(y,i,u,f,g){const{horizontalAlign:_,verticalAlign:C}=c.au(y);return new c.P(-(_-.5)*i+f[0]*g,-(C-.5)*u+f[1]*g)}function Qe(y,i,u,f,g,_){const{x1:C,x2:I,y1:E,y2:D,anchorPointX:F,anchorPointY:j}=y,J=new c.P(i,u);return f&&J._rotate(g?_:-_),{x1:C+J.x,y1:E+J.y,x2:I+J.x,y2:D+J.y,anchorPointX:F,anchorPointY:j}}class it{constructor(i,u,f,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Re(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Pe(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,g){const _=f.getBucket(u),C=f.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const I=f.collisionBoxArray,E=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),F=f.tileSize/c.N,j=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),J=E.get("text-pitch-alignment")==="map",de=E.get("text-rotation-alignment")==="map",ue=be(f,1,this.transform.zoom),pe=Be(j,J,de,this.transform,ue);let se=null;if(J){const je=xt(j,J,de,this.transform,ue);se=c.a1([],this.transform.labelPlaneMatrix,je)}this.retainedQueryData[_.bucketInstanceId]=new ae(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,f.tileID);const ze={bucket:_,layout:E,posMatrix:j,textLabelPlaneMatrix:pe,labelToScreenMatrix:se,scale:D,textPixelRatio:F,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const je of _.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:Me,symbolInstanceEnd:qe}=je;i.push({sortKey:ye,symbolInstanceStart:Me,symbolInstanceEnd:qe,parameters:ze})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(i,u,f,g,_,C,I,E,D,F,j,J,de,ue,pe,se){const ze=c.aq[i.textAnchor],je=[i.textOffset0,i.textOffset1],ye=Ue(ze,f,g,je,_),Me=this.collisionIndex.placeCollisionBox(Qe(u,ye.x,ye.y,C,I,this.transform.angle),j,E,D,F.predicate,se);if((!pe||this.collisionIndex.placeCollisionBox(Qe(pe,ye.x,ye.y,C,I,this.transform.angle),j,E,D,F.predicate,se).box.length!==0)&&Me.box.length>0){let qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(qe=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:je,width:f,height:g,anchor:ze,textBoxScale:_,prevAnchor:qe},this.markUsedJustification(de,ze,J,ue),de.allowVerticalPlacement&&(this.markUsedOrientation(de,ue,J),this.placedOrientations[J.crossTileID]=ue),{shift:ye,placedGlyphBoxes:Me}}}placeLayerBucketPart(i,u,f){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:I,labelToScreenMatrix:E,textPixelRatio:D,holdingForFade:F,collisionBoxArray:j,partiallyEvaluatedTextSize:J,collisionGroup:de}=i.parameters,ue=_.get("text-optional"),pe=_.get("icon-optional"),se=c.ar(_,"text-overlap","text-allow-overlap"),ze=se==="always",je=c.ar(_,"icon-overlap","icon-allow-overlap"),ye=je==="always",Me=_.get("text-rotation-alignment")==="map",qe=_.get("text-pitch-alignment")==="map",Ze=_.get("icon-text-fit")!=="none",ot=_.get("symbol-z-order")==="viewport-y",dt=ze&&(ye||!g.hasIconData()||pe),st=ye&&(ze||!g.hasTextData()||ue);!g.collisionArrays&&j&&g.deserializeCollisionBoxes(j);const pt=this.retainedQueryData[g.bucketInstanceId].tileID,Vt=this.terrain?(Tt,ar)=>this.terrain.getElevation(pt,Tt,ar):null,wr=(Tt,ar)=>{var Wt,Jr;if(u[Tt.crossTileID])return;if(F)return void(this.placements[Tt.crossTileID]=new tt(!1,!1,!1));let xr=!1,gr=!1,Sr=!0,Pn=null,nn={box:null,offscreen:null},li={box:null,offscreen:null},Wn=null,Mn=null,no=null,un=0,Jo=0,Yo=0;ar.textFeatureIndex?un=ar.textFeatureIndex:Tt.useRuntimeCollisionCircles&&(un=Tt.featureIndex),ar.verticalTextFeatureIndex&&(Jo=ar.verticalTextFeatureIndex);const Ka=ar.textBox;if(Ka){const fi=kn=>{let Gn=c.ai.horizontal;if(g.allowVerticalPlacement&&!kn&&this.prevPlacement){const Ni=this.prevPlacement.placedOrientations[Tt.crossTileID];Ni&&(this.placedOrientations[Tt.crossTileID]=Ni,Gn=Ni,this.markUsedOrientation(g,Gn,Tt))}return Gn},ci=(kn,Gn)=>{if(g.allowVerticalPlacement&&Tt.numVerticalGlyphVertices>0&&ar.verticalTextBox){for(const Ni of g.writingModes)if(Ni===c.ai.vertical?(nn=Gn(),li=nn):nn=kn(),nn&&nn.box&&nn.box.length)break}else nn=kn()},Ii=Tt.textAnchorOffsetStartIndex,bs=Tt.textAnchorOffsetEndIndex;if(bs===Ii){const kn=(Gn,Ni)=>{const En=this.collisionIndex.placeCollisionBox(Gn,se,D,C,de.predicate,Vt);return En&&En.box&&En.box.length&&(this.markUsedOrientation(g,Ni,Tt),this.placedOrientations[Tt.crossTileID]=Ni),En};ci(()=>kn(Ka,c.ai.horizontal),()=>{const Gn=ar.verticalTextBox;return g.allowVerticalPlacement&&Tt.numVerticalGlyphVertices>0&&Gn?kn(Gn,c.ai.vertical):{box:null,offscreen:null}}),fi(nn&&nn.box&&nn.box.length)}else{let kn=c.aq[(Jr=(Wt=this.prevPlacement)===null||Wt===void 0?void 0:Wt.variableOffsets[Tt.crossTileID])===null||Jr===void 0?void 0:Jr.anchor];const Gn=(En,ws,pu)=>{const Sm=En.x2-En.x1,Cm=En.y2-En.y1,S0=Tt.textBoxScale,kh=Ze&&je==="never"?ws:null;let Qo={box:[],offscreen:!1},Ss=se==="never"?1:2,ea="never";kn&&Ss++;for(let vo=0;vo<Ss;vo++){for(let ta=Ii;ta<bs;ta++){const Eh=g.textAnchorOffsets.get(ta);if(kn&&Eh.textAnchor!==kn)continue;const Ia=this.attemptAnchorPlacement(Eh,En,Sm,Cm,S0,Me,qe,D,C,de,ea,Tt,g,pu,kh,Vt);if(Ia&&(Qo=Ia.placedGlyphBoxes,Qo&&Qo.box&&Qo.box.length))return xr=!0,Pn=Ia.shift,Qo}kn?kn=null:ea=se}return Qo};ci(()=>Gn(Ka,ar.iconBox,c.ai.horizontal),()=>{const En=ar.verticalTextBox;return g.allowVerticalPlacement&&!(nn&&nn.box&&nn.box.length)&&Tt.numVerticalGlyphVertices>0&&En?Gn(En,ar.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),nn&&(xr=nn.box,Sr=nn.offscreen);const Ni=fi(nn&&nn.box);if(!xr&&this.prevPlacement){const En=this.prevPlacement.variableOffsets[Tt.crossTileID];En&&(this.variableOffsets[Tt.crossTileID]=En,this.markUsedJustification(g,En.anchor,Tt,Ni))}}}if(Wn=nn,xr=Wn&&Wn.box&&Wn.box.length>0,Sr=Wn&&Wn.offscreen,Tt.useRuntimeCollisionCircles){const fi=g.text.placedSymbolArray.get(Tt.centerJustifiedTextSymbolIndex),ci=c.aj(g.textSizeData,J,fi),Ii=_.get("text-padding");Mn=this.collisionIndex.placeCollisionCircles(se,fi,g.lineVertexArray,g.glyphOffsetArray,ci,C,I,E,f,qe,de.predicate,Tt.collisionCircleDiameter,Ii,Vt),Mn.circles.length&&Mn.collisionDetected&&!f&&c.w("Collisions detected, but collision boxes are not shown"),xr=ze||Mn.circles.length>0&&!Mn.collisionDetected,Sr=Sr&&Mn.offscreen}if(ar.iconFeatureIndex&&(Yo=ar.iconFeatureIndex),ar.iconBox){const fi=ci=>{const Ii=Ze&&Pn?Qe(ci,Pn.x,Pn.y,Me,qe,this.transform.angle):ci;return this.collisionIndex.placeCollisionBox(Ii,je,D,C,de.predicate,Vt)};li&&li.box&&li.box.length&&ar.verticalIconBox?(no=fi(ar.verticalIconBox),gr=no.box.length>0):(no=fi(ar.iconBox),gr=no.box.length>0),Sr=Sr&&no.offscreen}const xs=ue||Tt.numHorizontalGlyphVertices===0&&Tt.numVerticalGlyphVertices===0,nl=pe||Tt.numIconVertices===0;if(xs||nl?nl?xs||(gr=gr&&xr):xr=gr&&xr:gr=xr=gr&&xr,xr&&Wn&&Wn.box&&this.collisionIndex.insertCollisionBox(Wn.box,se,_.get("text-ignore-placement"),g.bucketInstanceId,li&&li.box&&Jo?Jo:un,de.ID),gr&&no&&this.collisionIndex.insertCollisionBox(no.box,je,_.get("icon-ignore-placement"),g.bucketInstanceId,Yo,de.ID),Mn&&(xr&&this.collisionIndex.insertCollisionCircles(Mn.circles,se,_.get("text-ignore-placement"),g.bucketInstanceId,un,de.ID),f)){const fi=g.bucketInstanceId;let ci=this.collisionCircleArrays[fi];ci===void 0&&(ci=this.collisionCircleArrays[fi]=new ne);for(let Ii=0;Ii<Mn.circles.length;Ii+=4)ci.circles.push(Mn.circles[Ii+0]),ci.circles.push(Mn.circles[Ii+1]),ci.circles.push(Mn.circles[Ii+2]),ci.circles.push(Mn.collisionDetected?1:0)}if(Tt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Tt.crossTileID]=new tt(xr||dt,gr||st,Sr||g.justReloaded),u[Tt.crossTileID]=!0};if(ot){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Tt=g.getSortedSymbolIndexes(this.transform.angle);for(let ar=Tt.length-1;ar>=0;--ar){const Wt=Tt[ar];wr(g.symbolInstances.get(Wt),g.collisionArrays[Wt])}}else for(let Tt=i.symbolInstanceStart;Tt<i.symbolInstanceEnd;Tt++)wr(g.symbolInstances.get(Tt),g.collisionArrays[Tt]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const Tt=this.collisionCircleArrays[g.bucketInstanceId];c.as(Tt.invProjMatrix,C),Tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,f,g){let _;_=g===c.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[c.at(u)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of C)I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:f.crossTileID)}markUsedOrientation(i,u,f){const g=u===c.ai.horizontal||u===c.ai.horizontalOnly?u:0,_=u===c.ai.vertical?u:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of C)i.text.placedSymbolArray.get(I).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const E in this.placements){const D=this.placements[E],F=_[E];F?(this.opacities[E]=new Ee(F,g,D.text,D.icon),f=f||D.text!==F.text.placed||D.icon!==F.icon.placed):(this.opacities[E]=new Ee(null,g,D.text,D.icon,D.skipFade),f=f||D.text||D.icon)}for(const E in _){const D=_[E];if(!this.opacities[E]){const F=new Ee(D,g,!1,!1);F.isHidden()||(this.opacities[E]=F,f=f||D.text.placed||D.icon.placed)}}for(const E in C)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=C[E]);for(const E in I)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=I[E]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,g.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new Ee(null,0,!1,!1,!0),I=_.get("text-allow-overlap"),E=_.get("icon-allow-overlap"),D=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=_.get("text-rotation-alignment")==="map",j=_.get("text-pitch-alignment")==="map",J=_.get("icon-text-fit")!=="none",de=new Ee(null,0,I&&(E||!i.hasIconData()||_.get("icon-optional")),E&&(I||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const ue=(pe,se,ze)=>{for(let je=0;je<se/4;je++)pe.opacityVertexArray.emplaceBack(ze);pe.hasVisibleVertices=pe.hasVisibleVertices||ze!==Hr};for(let pe=0;pe<i.symbolInstances.length;pe++){const se=i.symbolInstances.get(pe),{numHorizontalGlyphVertices:ze,numVerticalGlyphVertices:je,crossTileID:ye}=se;let Me=this.opacities[ye];u[ye]?Me=C:Me||(Me=de,this.opacities[ye]=Me),u[ye]=!0;const qe=se.numIconVertices>0,Ze=this.placedOrientations[se.crossTileID],ot=Ze===c.ai.vertical,dt=Ze===c.ai.horizontal||Ze===c.ai.horizontalOnly;if(ze>0||je>0){const st=lr(Me.text);ue(i.text,ze,ot?Hr:st),ue(i.text,je,dt?Hr:st);const pt=Me.text.isHidden();[se.rightJustifiedTextSymbolIndex,se.centerJustifiedTextSymbolIndex,se.leftJustifiedTextSymbolIndex].forEach(Tt=>{Tt>=0&&(i.text.placedSymbolArray.get(Tt).hidden=pt||ot?1:0)}),se.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(se.verticalPlacedTextSymbolIndex).hidden=pt||dt?1:0);const Vt=this.variableOffsets[se.crossTileID];Vt&&this.markUsedJustification(i,Vt.anchor,se,Ze);const wr=this.placedOrientations[se.crossTileID];wr&&(this.markUsedJustification(i,"left",se,wr),this.markUsedOrientation(i,wr,se))}if(qe){const st=lr(Me.icon),pt=!(J&&se.verticalPlacedIconSymbolIndex&&ot);se.placedIconSymbolIndex>=0&&(ue(i.icon,se.numIconVertices,pt?st:Hr),i.icon.placedSymbolArray.get(se.placedIconSymbolIndex).hidden=Me.icon.isHidden()),se.verticalPlacedIconSymbolIndex>=0&&(ue(i.icon,se.numVerticalIconVertices,pt?Hr:st),i.icon.placedSymbolArray.get(se.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const st=i.collisionArrays[pe];if(st){let pt=new c.P(0,0);if(st.textBox||st.verticalTextBox){let wr=!0;if(D){const Tt=this.variableOffsets[ye];Tt?(pt=Ue(Tt.anchor,Tt.width,Tt.height,Tt.textOffset,Tt.textBoxScale),F&&pt._rotate(j?this.transform.angle:-this.transform.angle)):wr=!1}st.textBox&&Se(i.textCollisionBox.collisionVertexArray,Me.text.placed,!wr||ot,pt.x,pt.y),st.verticalTextBox&&Se(i.textCollisionBox.collisionVertexArray,Me.text.placed,!wr||dt,pt.x,pt.y)}const Vt=!!(!dt&&st.verticalIconBox);st.iconBox&&Se(i.iconCollisionBox.collisionVertexArray,Me.icon.placed,Vt,J?pt.x:0,J?pt.y:0),st.verticalIconBox&&Se(i.iconCollisionBox.collisionVertexArray,Me.icon.placed,!Vt,J?pt.x:0,J?pt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=pe.invProjMatrix,i.placementViewportMatrix=pe.viewportMatrix,i.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Se(y,i,u,f,g){y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0)}const xe=Math.pow(2,25),Ke=Math.pow(2,24),Xe=Math.pow(2,17),rt=Math.pow(2,16),jt=Math.pow(2,9),zt=Math.pow(2,8),nr=Math.pow(2,1);function lr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*xe+i*Ke+u*Xe+i*rt+u*jt+i*zt+u*nr+i}const Hr=0;class gn{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,E)=>I.sortKey-E.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class Oi{constructor(i,u,f,g,_,C,I,E){this.placement=new it(i,u,C,I,E),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const g=c.h.now(),_=()=>!this._forceFullPlacement&&c.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new gn(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Hn=512/c.N/2;class Ko{constructor(i,u,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),I=C.key,E=g.get(I);E?E.push(C):g.set(I,[C])}for(const[_,C]of g){const I={positions:C.map(E=>({x:Math.floor(E.anchorX*Hn),y:Math.floor(E.anchorY*Hn)})),crossTileIDs:C.map(E=>E.crossTileID)};if(I.positions.length>128){const E=new c.av(I.positions.length,16,Uint16Array);for(const{x:D,y:F}of I.positions)E.add(D,F);E.finish(),delete I.positions,I.index=E}this._symbolsByKey[_]=I}}getScaledCoordinates(i,u){const{x:f,y:g,z:_}=this.tileID.canonical,{x:C,y:I,z:E}=u.canonical,D=Hn/Math.pow(2,E-_),F=(I*c.N+i.anchorY)*D,j=g*c.N*Hn;return{x:Math.floor((C*c.N+i.anchorX)*D-f*c.N*Hn),y:Math.floor(F-j)}}findMatches(i,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const I=this._symbolsByKey[C.key];if(!I)continue;const E=this.getScaledCoordinates(C,u);if(I.index){const D=I.index.range(E.x-g,E.y-g,E.x+g,E.y+g).sort();for(const F of D){const j=I.crossTileIDs[F];if(!f[j]){f[j]=!0,C.crossTileID=j;break}}}else if(I.positions)for(let D=0;D<I.positions.length;D++){const F=I.positions[D],j=I.crossTileIDs[D];if(Math.abs(F.x-E.x)<=g&&Math.abs(F.y-E.y)<=g&&!f[j]){f[j]=!0,C.crossTileID=j;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class vr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ao{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],_={};for(const C in g){const I=g[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[f]=_}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const I in C){const E=C[I];E.tileID.isChildOf(i)&&E.findMatches(u.symbolInstances,i,g)}else{const I=C[i.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=f.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ko(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f of u.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[_]),delete g[_],u=!0)}return u}}class ir{constructor(){this.layerIndexes={},this.crossTileIDs=new vr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new Ao);let _=!1;const C={};g.handleWrapJump(f);for(const I of u){const E=I.getBucket(i);E&&i.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(I.tileID,E,this.crossTileIDs)&&(_=!0),C[E.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const jr=(y,i)=>c.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Mr=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ri=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),er=c.aw();class yr extends c.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new lt(dr(),this,i._getMapId()),this.imageManager=new Ae,this.imageManager.setEventedParent(this),this.glyphManager=new ke(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new nt(256,512),this.crossTileSymbolIndex=new ir,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const f=this;this._rtlTextPluginCallback=yr.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(c.aA(_),C&&C.every(I=>I))for(const I in f.sourceCaches){const E=f.sourceCaches[I].getSource().type;E!=="vector"&&E!=="geojson"||f.sourceCaches[I].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const I in this._layers){const E=this._layers[I];E.source===C.id&&this._validateLayer(E)}})}loadURL(i,u={},f){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,O.Style);this._request=c.f(g,(_,C)=>{this._request=null,_?this.fire(new c.j(_)):C&&this._load(C,u,f)})}loadJSON(i,u={},f){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,f)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(er,{validate:!1})}_load(i,u,f){var g;const _=u.transformStyle?u.transformStyle(f,i):i;if(!u.validate||!jr(this,c.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Fe(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const f=c.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(i,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,I){const E=W(g),D=E.length,F=C>1?"@2x":"",j={},J={},de={};for(const{id:ue,url:pe}of E){const se=_.transformRequest(_.normalizeSpriteURL(pe,F,".json"),O.SpriteJSON),ze=`${ue}_${se.url}`;j[ze]=c.f(se,(Me,qe)=>{delete j[ze],J[ue]=qe,Ie(I,J,de,Me,D)});const je=_.transformRequest(_.normalizeSpriteURL(pe,F,".png"),O.SpriteImage),ye=`${ue}_${je.url}`;j[ye]=G.getImage(je,(Me,qe)=>{delete j[ye],de[ue]=qe,Ie(I,J,de,Me,D)})}return{cancel(){for(const ue of Object.values(j))ue.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new c.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(E=>!(E in _)):[];for(const E of I)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in _[C]){const D=C==="default"?E:`${C}:${E}`;this._spritesImagesIds[C].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[C][E],!1):this.imageManager.addImage(D,_[C][E]),u&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new c.j(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const f=[];for(const g of i)u[g]&&f.push(u[g]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const g=this._layers[f];g.type!=="custom"&&(i[f]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];f[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in f){const _=this.sourceCaches[g];f[g]!==_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const f=this.serialize();if(i=u.transformStyle?u.transformStyle(f,i):i,jr(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const g=c.aE(f,i).filter(C=>!(C.command in ri));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in Mr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.y.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new br(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new c.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(jr(this,c.aF(i)))return;_=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=c.aD(i),i=c.e(i,{source:g})),this._validate(c.y.layer,`layers.${g}`,i,{arrayIndex:-1},f))return;_=c.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new c.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const I=this._removedLayers[g];delete this._removedLayers[g],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!c.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.y.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=c.aD(u),this._updateLayer(g)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,g),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,g=i.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${f}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new c.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,g=this.stylesheet;return c.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",f={},g=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I)){f[I]=C;for(const E of i){const D=E[I];if(D)for(const F of D)g.push(F)}}}g.sort((C,I)=>I.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I))for(let E=g.length-1;E>=0;E--){const D=g[E].feature;if(f[D.layer.id]<C)break;_.push(D),g.pop()}else for(const E of i){const D=E[I];if(D)for(const F of D)_.push(F.feature)}}return _}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const E=this._layers[I];if(!E)return this.fire(new c.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];g[E.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const I in this.sourceCaches)u.layers&&!g[I]||_.push(Ct(this.sourceCaches[I],this._layers,C,i,u,f));return this.placement&&_.push(function(I,E,D,F,j,J,de){const ue={},pe=J.queryRenderedSymbols(F),se=[];for(const ze of Object.keys(pe).map(Number))se.push(de[ze]);se.sort(ur);for(const ze of se){const je=ze.featureIndex.lookupSymbolFeatures(pe[ze.bucketInstanceId],E,ze.bucketIndex,ze.sourceLayerIndex,j.filter,j.layers,j.availableImages,I);for(const ye in je){const Me=ue[ye]=ue[ye]||[],qe=je[ye];qe.sort((Ze,ot)=>{const dt=ze.featureSortOrder;if(dt){const st=dt.indexOf(Ze.featureIndex);return dt.indexOf(ot.featureIndex)-st}return ot.featureIndex-Ze.featureIndex});for(const Ze of qe)Me.push(Ze)}}for(const ze in ue)ue[ze].forEach(je=>{const ye=je.feature,Me=D[I[ze].source].getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=Me});return ue}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(g,_){const C=g.getRenderableIds().map(D=>g.getTileByID(D)),I=[],E={};for(let D=0;D<C.length;D++){const F=C[D],j=F.tileID.canonical.key;E[j]||(E[j]=!0,F.querySourceFeatures(I,_))}return I}(f,u):[]}addSourceType(i,u,f){return hr(i)?f(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{Pr[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const C in i)if(!c.aG(i[C],f[C])){g=!0;break}if(!g)return;const _={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,f,g,_={}){return(!_||_.validate!==!1)&&jr(this,i.call(c.y,c.e({key:u,style:this.serialize(),value:f,styleSpec:c.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,g,_=!1){let C=!1,I=!1;const E={};for(const D of this._order){const F=this._layers[D];if(F.type!=="symbol")continue;if(!E[F.source]){const J=this.sourceCaches[F.source];E[F.source]=J.getRenderableIds(!0).map(de=>J.getTileByID(de)).sort((de,ue)=>ue.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(ue.tileID)?-1:1))}const j=this.crossTileSymbolIndex.addLayer(F,E[F.source],i.center.lng);C=C||j}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new Oi(i,this.map.terrain,this._order,_,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const D of this._order){const F=this._layers[D];F.type==="symbol"&&this.placement.updateLayerOpacities(F,E[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,f){return c.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,f={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...W(this.stylesheet.sprite),..._];this._validate(c.y.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=W(this.stylesheet.sprite);if(u.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return W(this.stylesheet.sprite)}setSprite(i,u={},f){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}yr.registerForPluginStateChange=c.aK;var rn=c.Q([{name:"a_pos",type:"Int16",components:2}]),kr="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Vr={prelude:$r(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:$r(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:$r(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$r(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$r("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$r(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:$r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$r("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$r("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$r("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:$r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:$r(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:$r(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$r(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$r(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$r(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:$r(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:$r(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$r("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",kr),terrainDepth:$r("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",kr),terrainCoords:$r("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",kr)};function $r(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,I={};return{fragmentSource:y=y.replace(u,(E,D,F,j,J)=>(I[J]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${J}
varying ${F} ${j} ${J};
#else
uniform ${F} ${j} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${F} ${j} ${J} = u_${J};
#endif
`)),vertexSource:i=i.replace(u,(E,D,F,j,J)=>{const de=j==="float"?"vec2":"vec4",ue=J.match(/color/)?"color":de;return I[J]?D==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${F} ${de} a_${J};
varying ${F} ${j} ${J};
#else
uniform ${F} ${j} u_${J};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${F} ${j} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${ue}(a_${J}, u_${J}_t);
#else
    ${F} ${j} ${J} = u_${J};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${F} ${de} a_${J};
#else
uniform ${F} ${j} u_${J};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${F} ${j} ${J} = a_${J};
#else
    ${F} ${j} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${F} ${j} ${J} = unpack_mix_${ue}(a_${J}, u_${J}_t);
#else
    ${F} ${j} ${J} = u_${J};
#endif
`}),staticAttributes:f,staticUniforms:C}}class _a{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,g,_,C,I,E,D){this.context=i;let F=this.boundPaintVertexBuffers.length!==g.length;for(let j=0;!F&&j<g.length;j++)this.boundPaintVertexBuffers[j]!==g[j]&&(F=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||F||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==D?this.freshBind(u,f,g,_,C,I,E,D):(i.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),E&&E.bind(),D&&D.bind())}freshBind(i,u,f,g,_,C,I,E){const D=i.numAttributes,F=this.context,j=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=E,u.enableAttributes(j,i);for(const J of f)J.enableAttributes(j,i);C&&C.enableAttributes(j,i),I&&I.enableAttributes(j,i),E&&E.enableAttributes(j,i),u.bind(),u.setVertexAttribPointers(j,i,_);for(const J of f)J.bind(),J.setVertexAttribPointers(j,i,_);C&&(C.bind(),C.setVertexAttribPointers(j,i,_)),g&&g.bind(),I&&(I.bind(),I.setVertexAttribPointers(j,i,_)),E&&(E.bind(),E.setVertexAttribPointers(j,i,_)),F.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function bn(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");i.push(f.pop())}return i}class jc{constructor(i,u,f,g,_,C){const I=i.gl;this.program=I.createProgram();const E=bn(u.staticAttributes),D=f?f.getBinderAttributes():[],F=E.concat(D),j=Vr.prelude.staticUniforms?bn(Vr.prelude.staticUniforms):[],J=u.staticUniforms?bn(u.staticUniforms):[],de=f?f.getBinderUniforms():[],ue=j.concat(J).concat(de),pe=[];for(const Ze of ue)pe.indexOf(Ze)<0&&pe.push(Ze);const se=f?f.defines():[];_&&se.push("#define OVERDRAW_INSPECTOR;"),C&&se.push("#define TERRAIN3D;");const ze=se.concat(Vr.prelude.fragmentSource,u.fragmentSource).join(`
`),je=se.concat(Vr.prelude.vertexSource,u.vertexSource).join(`
`),ye=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(ye,ze),I.compileShader(ye),!I.getShaderParameter(ye,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(ye)}`);I.attachShader(this.program,ye);const Me=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Me,je),I.compileShader(Me),!I.getShaderParameter(Me,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(Me)}`);I.attachShader(this.program,Me),this.attributes={};const qe={};this.numAttributes=F.length;for(let Ze=0;Ze<this.numAttributes;Ze++)F[Ze]&&(I.bindAttribLocation(this.program,Ze,F[Ze]),this.attributes[F[Ze]]=Ze);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(Me),I.deleteShader(ye);for(let Ze=0;Ze<pe.length;Ze++){const ot=pe[Ze];if(ot&&!qe[ot]){const dt=I.getUniformLocation(this.program,ot);dt&&(qe[ot]=dt)}}this.fixedUniforms=g(i,qe),this.terrainUniforms=((Ze,ot)=>({u_depth:new c.aL(Ze,ot.u_depth),u_terrain:new c.aL(Ze,ot.u_terrain),u_terrain_dim:new c.aM(Ze,ot.u_terrain_dim),u_terrain_matrix:new c.aN(Ze,ot.u_terrain_matrix),u_terrain_unpack:new c.aO(Ze,ot.u_terrain_unpack),u_terrain_exaggeration:new c.aM(Ze,ot.u_terrain_exaggeration)}))(i,qe),this.binderUniforms=f?f.getUniforms(i,qe):[]}draw(i,u,f,g,_,C,I,E,D,F,j,J,de,ue,pe,se,ze,je){const ye=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),E){i.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,E.depthTexture),i.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,E.texture);for(const qe in this.terrainUniforms)this.terrainUniforms[qe].set(E[qe])}for(const qe in this.fixedUniforms)this.fixedUniforms[qe].set(I[qe]);pe&&pe.setUniforms(i,this.binderUniforms,de,{zoom:ue});let Me=0;switch(u){case ye.LINES:Me=2;break;case ye.TRIANGLES:Me=3;break;case ye.LINE_STRIP:Me=1}for(const qe of J.get()){const Ze=qe.vaos||(qe.vaos={});(Ze[D]||(Ze[D]=new _a)).bind(i,this,F,pe?pe.getPaintVertexBuffers():[],j,qe.vertexOffset,se,ze,je),ye.drawElements(u,qe.primitiveLength*Me,ye.UNSIGNED_SHORT,qe.primitiveOffset*Me*2)}}}function fo(y,i,u){const f=1/be(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}const Vd=(y,i,u,f)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],I=function(){var D=new c.A(9);return c.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();g.properties.get("anchor")==="viewport"&&function(D,F){var j=Math.sin(F),J=Math.cos(F);D[0]=J,D[1]=j,D[2]=0,D[3]=-j,D[4]=J,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(I,-i.transform.angle),function(D,F,j){var J=F[0],de=F[1],ue=F[2];D[0]=J*j[0]+de*j[3]+ue*j[6],D[1]=J*j[1]+de*j[4]+ue*j[7],D[2]=J*j[2]+de*j[5]+ue*j[8]}(C,C,I);const E=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+u,u_opacity:f}},Ua=(y,i,u,f,g,_,C)=>c.e(Vd(y,i,u,f),fo(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),Nf=y=>({u_matrix:y}),Ud=(y,i,u,f)=>c.e(Nf(y),fo(u,i,f)),Vc=(y,i)=>({u_matrix:y,u_world:i}),Uc=(y,i,u,f,g)=>c.e(Ud(y,i,u,f),{u_world:g}),Ha=(y,i,u,f)=>{const g=y.transform;let _,C;if(f.paint.get("circle-pitch-alignment")==="map"){const I=be(u,1,g.zoom);_=!0,C=[I,I]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},Hd=(y,i,u)=>{const f=be(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*g),i.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:_}},Ul=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),jf=y=>({u_matrix:y}),l0=(y,i,u,f)=>({u_matrix:y,u_extrude_scale:be(i,1,u),u_intensity:f});function Wd(y,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new c.U(0,f/u).toLngLat().lat,new c.U(0,(f+1)/u).toLngLat().lat]}const Gd=(y,i,u,f)=>{const g=y.transform;return{u_matrix:Hc(y,i,u,f),u_ratio:1/be(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Vf=(y,i,u,f,g)=>c.e(Gd(y,i,u,g),{u_image:0,u_image_height:f}),c0=(y,i,u,f,g)=>{const _=y.transform,C=Hf(i,_);return{u_matrix:Hc(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/be(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Uf=(y,i,u,f,g,_)=>{const C=y.lineAtlas,I=Hf(i,y.transform),E=u.layout.get("line-cap")==="round",D=C.getDash(f.from,E),F=C.getDash(f.to,E),j=D.width*g.fromScale,J=F.width*g.toScale;return c.e(Gd(y,i,u,_),{u_patternscale_a:[I/j,-D.height/2],u_patternscale_b:[I/J,-F.height/2],u_sdfgamma:C.width/(256*Math.min(j,J)*y.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:F.y,u_mix:g.t})};function Hf(y,i){return 1/be(y,1,i.tileZoom)}function Hc(y,i,u,f){return y.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Wf=(y,i,u,f,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Gf(g.paint.get("raster-hue-rotate"))};var _,C};function Gf(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const qd=(y,i,u,f,g,_,C,I,E,D)=>{const F=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:F.width/F.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+E,u_pitch_with_map:+f,u_texsize:D,u_texture:0}},Zd=(y,i,u,f,g,_,C,I,E,D,F)=>{const j=g.transform;return c.e(qd(y,i,u,f,g,_,C,I,E,D),{u_gamma_scale:f?Math.cos(j._pitch)*j.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+F})},ps=(y,i,u,f,g,_,C,I,E,D)=>c.e(Zd(y,i,u,f,g,_,C,I,!0,E,!0),{u_texsize_icon:D,u_texture_icon:1}),Wc=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),mo=(y,i,u,f,g,_)=>c.e(function(C,I,E,D){const F=E.imageManager.getPattern(C.from.toString()),j=E.imageManager.getPattern(C.to.toString()),{width:J,height:de}=E.imageManager.getPixelSize(),ue=Math.pow(2,D.tileID.overscaledZ),pe=D.tileSize*Math.pow(2,E.transform.tileZoom)/ue,se=pe*(D.tileID.canonical.x+D.tileID.wrap*ue),ze=pe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:j.tl,u_pattern_br_b:j.br,u_texsize:[J,de],u_mix:I.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:j.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/be(D,1,E.transform.tileZoom),u_pixel_coord_upper:[se>>16,ze>>16],u_pixel_coord_lower:[65535&se,65535&ze]}}(f,_,u,g),{u_matrix:y,u_opacity:i}),Gc={fillExtrusion:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_opacity:new c.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_height_factor:new c.aM(y,i.u_height_factor),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade),u_opacity:new c.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(y,i.u_scale_with_map),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_matrix:new c.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_overscale_factor:new c.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_inv_matrix:new c.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new c.aR(y,i.u_color),u_matrix:new c.aN(y,i.u_matrix),u_overlay:new c.aL(y,i.u_overlay),u_overlay_scale:new c.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new c.aM(y,i.u_extrude_scale),u_intensity:new c.aM(y,i.u_intensity),u_matrix:new c.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_color_ramp:new c.aL(y,i.u_color_ramp),u_opacity:new c.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_latrange:new c.aQ(y,i.u_latrange),u_light:new c.aQ(y,i.u_light),u_shadow:new c.aR(y,i.u_shadow),u_highlight:new c.aR(y,i.u_highlight),u_accent:new c.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_dimension:new c.aQ(y,i.u_dimension),u_zoom:new c.aM(y,i.u_zoom),u_unpack:new c.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_image:new c.aL(y,i.u_image),u_image_height:new c.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texsize:new c.aQ(y,i.u_texsize),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_image:new c.aL(y,i.u_image),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_patternscale_a:new c.aQ(y,i.u_patternscale_a),u_patternscale_b:new c.aQ(y,i.u_patternscale_b),u_sdfgamma:new c.aM(y,i.u_sdfgamma),u_image:new c.aL(y,i.u_image),u_tex_y_a:new c.aM(y,i.u_tex_y_a),u_tex_y_b:new c.aM(y,i.u_tex_y_b),u_mix:new c.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_tl_parent:new c.aQ(y,i.u_tl_parent),u_scale_parent:new c.aM(y,i.u_scale_parent),u_buffer_scale:new c.aM(y,i.u_buffer_scale),u_fade_t:new c.aM(y,i.u_fade_t),u_opacity:new c.aM(y,i.u_opacity),u_image0:new c.aL(y,i.u_image0),u_image1:new c.aL(y,i.u_image1),u_brightness_low:new c.aM(y,i.u_brightness_low),u_brightness_high:new c.aM(y,i.u_brightness_high),u_saturation_factor:new c.aM(y,i.u_saturation_factor),u_contrast_factor:new c.aM(y,i.u_contrast_factor),u_spin_weights:new c.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texsize_icon:new c.aQ(y,i.u_texsize_icon),u_texture:new c.aL(y,i.u_texture),u_texture_icon:new c.aL(y,i.u_texture_icon),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_color:new c.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_image:new c.aL(y,i.u_image),u_pattern_tl_a:new c.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(y,i.u_pattern_br_b),u_texsize:new c.aQ(y,i.u_texsize),u_mix:new c.aM(y,i.u_mix),u_pattern_size_a:new c.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(y,i.u_pattern_size_b),u_scale_a:new c.aM(y,i.u_scale_a),u_scale_b:new c.aM(y,i.u_scale_b),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_terrain_coords_id:new c.aM(y,i.u_terrain_coords_id),u_ele_delta:new c.aM(y,i.u_ele_delta)})};class qc{constructor(i,u,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Zc{constructor(i,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,f){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[Hl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qs=new WeakMap;function Wa(y){var i;if(qs.has(y))return qs.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return qs.set(y,u),u}}class Er{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Kc extends Er{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Qi extends Er{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class eo extends Er{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Kd extends Er{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Xc extends Er{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Jc extends Er{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Xd extends Er{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Jd extends Er{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Yc extends Er{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Yd extends Er{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Qd extends Er{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Qc extends Er{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class qf extends Er{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Zf extends Er{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Zs extends Er{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class u0 extends Er{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class d0 extends Er{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class h0 extends Er{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class p0 extends Er{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class f0 extends Er{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class m0 extends Er{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class eh extends Er{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class eu extends Er{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class th extends Er{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class rh extends Er{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Ks extends Er{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Kf extends Er{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Xf extends Er{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const f=this.gl;Wa(f)?f.bindVertexArray(i):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class nh extends Er{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class fs extends Er{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Jf extends Er{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ga extends Er{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Xs extends Ga{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Yf extends Ga{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ih extends Ga{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Wr{constructor(i,u,f,g,_){this.context=i,this.width=u,this.height=f;const C=i.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Xs(i,I),g)this.depthAttachment=_?new ih(i,I):new Yf(i,I);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class yn{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}yn.Replace=[1,0],yn.disabled=new yn(yn.Replace,c.aT.transparent,[!1,!1,!1,!1]),yn.unblended=new yn(yn.Replace,c.aT.transparent,[!0,!0,!0,!0]),yn.alphaBlended=new yn([1,771],c.aT.transparent,[!0,!0,!0,!0]);class g0{constructor(i){var u,f;if(this.gl=i,this.clearColor=new Kc(this),this.clearDepth=new Qi(this),this.clearStencil=new eo(this),this.colorMask=new Kd(this),this.depthMask=new Xc(this),this.stencilMask=new Jc(this),this.stencilFunc=new Xd(this),this.stencilOp=new Jd(this),this.stencilTest=new Yc(this),this.depthRange=new Yd(this),this.depthTest=new Qd(this),this.depthFunc=new Qc(this),this.blend=new qf(this),this.blendFunc=new Zf(this),this.blendColor=new Zs(this),this.blendEquation=new u0(this),this.cullFace=new d0(this),this.cullFaceSide=new h0(this),this.frontFace=new p0(this),this.program=new f0(this),this.activeTexture=new m0(this),this.viewport=new eh(this),this.bindFramebuffer=new eu(this),this.bindRenderbuffer=new th(this),this.bindTexture=new rh(this),this.bindVertexBuffer=new Ks(this),this.bindElementBuffer=new Kf(this),this.bindVertexArray=new Xf(this),this.pixelStoreUnpack=new nh(this),this.pixelStoreUnpackPremultiplyAlpha=new fs(this),this.pixelStoreUnpackFlipY=new Jf(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Wa(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new qc(this,i,u)}createVertexBuffer(i,u,f){return new Zc(this,i,u,f)}createRenderbuffer(i,u,f){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,f,g){return new Wr(this,i,u,f,g)}clear({color:i,depth:u,stencil:f}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,yn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Wa(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Wa(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Ar{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}Ar.ReadOnly=!1,Ar.ReadWrite=!0,Ar.disabled=new Ar(519,Ar.ReadOnly,[0,1]);const ms=7680;class vn{constructor(i,u,f,g,_,C){this.test=i,this.ref=u,this.mask=f,this.fail=g,this.depthFail=_,this.pass=C}}vn.disabled=new vn({func:519,mask:0},0,0,ms,ms,ms);class fn{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let Wl;function Qf(y,i,u,f,g,_,C){const I=y.context,E=I.gl,D=y.useProgram("collisionBox"),F=[];let j=0,J=0;for(let ye=0;ye<f.length;ye++){const Me=f[ye],qe=i.getTile(Me),Ze=qe.getBucket(u);if(!Ze)continue;let ot=Me.posMatrix;g[0]===0&&g[1]===0||(ot=y.translatePosMatrix(Me.posMatrix,qe,g,_));const dt=C?Ze.textCollisionBox:Ze.iconCollisionBox,st=Ze.collisionCircleArray;if(st.length>0){const pt=c.Z(),Vt=ot;c.aU(pt,Ze.placementInvProjMatrix,y.transform.glCoordMatrix),c.aU(pt,pt,Ze.placementViewportMatrix),F.push({circleArray:st,circleOffset:J,transform:Vt,invTransform:pt,coord:Me}),j+=st.length/4,J=j}dt&&D.draw(I,E.LINES,Ar.disabled,vn.disabled,y.colorModeForRenderPass(),fn.disabled,Hd(ot,y.transform,qe),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Me),u.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,null,y.transform.zoom,null,null,dt.collisionVertexBuffer)}if(!C||!F.length)return;const de=y.useProgram("collisionCircle"),ue=new c.aV;ue.resize(4*j),ue._trim();let pe=0;for(const ye of F)for(let Me=0;Me<ye.circleArray.length/4;Me++){const qe=4*Me,Ze=ye.circleArray[qe+0],ot=ye.circleArray[qe+1],dt=ye.circleArray[qe+2],st=ye.circleArray[qe+3];ue.emplace(pe++,Ze,ot,dt,st,0),ue.emplace(pe++,Ze,ot,dt,st,1),ue.emplace(pe++,Ze,ot,dt,st,2),ue.emplace(pe++,Ze,ot,dt,st,3)}(!Wl||Wl.length<2*j)&&(Wl=function(ye){const Me=2*ye,qe=new c.aX;qe.resize(Me),qe._trim();for(let Ze=0;Ze<Me;Ze++){const ot=6*Ze;qe.uint16[ot+0]=4*Ze+0,qe.uint16[ot+1]=4*Ze+1,qe.uint16[ot+2]=4*Ze+2,qe.uint16[ot+3]=4*Ze+2,qe.uint16[ot+4]=4*Ze+3,qe.uint16[ot+5]=4*Ze+0}return qe}(j));const se=I.createIndexBuffer(Wl,!0),ze=I.createVertexBuffer(ue,c.aW.members,!0);for(const ye of F){const Me={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(je=y.transform).cameraToCenterDistance,u_viewport_size:[je.width,je.height]};de.draw(I,E.TRIANGLES,Ar.disabled,vn.disabled,y.colorModeForRenderPass(),fn.disabled,Me,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye.coord),u.id,ze,se,c.S.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,y.transform.zoom,null,null,null)}var je;ze.destroy(),se.destroy()}fn.disabled=new fn(!1,1029,2305),fn.backCCW=new fn(!0,1029,2305);const oh=c.ao(new Float32Array(16));function tu(y,i,u,f,g,_){const{horizontalAlign:C,verticalAlign:I}=c.au(y);return new c.P((-(C-.5)*i/g+f[0])*_,(-(I-.5)*u/g+f[1])*_)}function ru(y,i,u,f,g,_,C,I,E,D,F){const j=y.text.placedSymbolArray,J=y.text.dynamicLayoutVertexArray,de=y.icon.dynamicLayoutVertexArray,ue={};J.clear();for(let pe=0;pe<j.length;pe++){const se=j.get(pe),ze=se.hidden||!se.crossTileID||y.allowVerticalPlacement&&!se.placedOrientation?null:f[se.crossTileID];if(ze){const je=new c.P(se.anchorX,se.anchorY),ye=bt(je,u?C:_,F),Me=Ce(g.cameraToCenterDistance,ye.signedDistanceFromCamera);let qe=c.aj(y.textSizeData,E,se)*Me/c.ap;u&&(qe*=y.tilePixelRatio/I);const{width:Ze,height:ot,anchor:dt,textOffset:st,textBoxScale:pt}=ze,Vt=tu(dt,Ze,ot,st,pt,qe),wr=u?bt(je.add(Vt),_,F).point:ye.point.add(i?Vt.rotate(-g.angle):Vt),Tt=y.allowVerticalPlacement&&se.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let ar=0;ar<se.numGlyphs;ar++)c.ak(J,wr,Tt);D&&se.associatedIconIndex>=0&&(ue[se.associatedIconIndex]={shiftedAnchor:wr,angle:Tt})}else te(se.numGlyphs,J)}if(D){de.clear();const pe=y.icon.placedSymbolArray;for(let se=0;se<pe.length;se++){const ze=pe.get(se);if(ze.hidden)te(ze.numGlyphs,de);else{const je=ue[se];if(je)for(let ye=0;ye<ze.numGlyphs;ye++)c.ak(de,je.shiftedAnchor,je.angle);else te(ze.numGlyphs,de)}}y.icon.dynamicLayoutVertexBuffer.updateData(de)}y.text.dynamicLayoutVertexBuffer.updateData(J)}function ah(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function nu(y,i,u,f,g,_,C,I,E,D,F,j){const J=y.context,de=J.gl,ue=y.transform,pe=I==="map",se=E==="map",ze=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",je=pe&&!se&&!ze,ye=!u.layout.get("symbol-sort-key").isConstant();let Me=!1;const qe=y.depthModeForSublayer(0,Ar.ReadOnly),Ze=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ot=[];for(const dt of f){const st=i.getTile(dt),pt=st.getBucket(u);if(!pt)continue;const Vt=g?pt.text:pt.icon;if(!Vt||!Vt.segments.get().length||!Vt.hasVisibleVertices)continue;const wr=Vt.programConfigurations.get(u.id),Tt=g||pt.sdfIcons,ar=g?pt.textSizeData:pt.iconSizeData,Wt=se||ue.pitch!==0,Jr=y.useProgram(ah(Tt,g,pt),wr),xr=c.ah(ar,ue.zoom),gr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(dt);let Sr,Pn,nn,li,Wn=[0,0],Mn=null;if(g)Pn=st.glyphAtlasTexture,nn=de.LINEAR,Sr=st.glyphAtlasTexture.size,pt.iconsInText&&(Wn=st.imageAtlasTexture.size,Mn=st.imageAtlasTexture,li=Wt||y.options.rotating||y.options.zooming||ar.kind==="composite"||ar.kind==="camera"?de.LINEAR:de.NEAREST);else{const kn=u.layout.get("icon-size").constantOr(0)!==1||pt.iconsNeedLinear;Pn=st.imageAtlasTexture,nn=Tt||y.options.rotating||y.options.zooming||kn||Wt?de.LINEAR:de.NEAREST,Sr=st.imageAtlasTexture.size}const no=be(st,1,y.transform.zoom),un=Be(dt.posMatrix,se,pe,y.transform,no),Jo=xt(dt.posMatrix,se,pe,y.transform,no),Yo=Ze&&pt.hasTextData(),Ka=u.layout.get("icon-text-fit")!=="none"&&Yo&&pt.hasIconData();if(ze){const kn=y.style.map.terrain?(Ni,En)=>y.style.map.terrain.getElevation(dt,Ni,En):null,Gn=u.layout.get("text-rotation-alignment")==="map";Ye(pt,dt.posMatrix,y,g,un,Jo,se,D,Gn,kn)}const xs=y.translatePosMatrix(dt.posMatrix,st,_,C),nl=ze||g&&Ze||Ka?oh:un,fi=y.translatePosMatrix(Jo,st,_,C,!0),ci=Tt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ii;Ii=Tt?pt.iconsInText?ps(ar.kind,xr,je,se,y,xs,nl,fi,Sr,Wn):Zd(ar.kind,xr,je,se,y,xs,nl,fi,g,Sr,!0):qd(ar.kind,xr,je,se,y,xs,nl,fi,g,Sr);const bs={program:Jr,buffers:Vt,uniformValues:Ii,atlasTexture:Pn,atlasTextureIcon:Mn,atlasInterpolation:nn,atlasInterpolationIcon:li,isSDF:Tt,hasHalo:ci};if(ye&&pt.canOverlap){Me=!0;const kn=Vt.segments.get();for(const Gn of kn)ot.push({segments:new c.S([Gn]),sortKey:Gn.sortKey,state:bs,terrainData:gr})}else ot.push({segments:Vt.segments,sortKey:0,state:bs,terrainData:gr})}Me&&ot.sort((dt,st)=>dt.sortKey-st.sortKey);for(const dt of ot){const st=dt.state;if(J.activeTexture.set(de.TEXTURE0),st.atlasTexture.bind(st.atlasInterpolation,de.CLAMP_TO_EDGE),st.atlasTextureIcon&&(J.activeTexture.set(de.TEXTURE1),st.atlasTextureIcon&&st.atlasTextureIcon.bind(st.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),st.isSDF){const pt=st.uniformValues;st.hasHalo&&(pt.u_is_halo=1,sh(st.buffers,dt.segments,u,y,st.program,qe,F,j,pt,dt.terrainData)),pt.u_is_halo=0}sh(st.buffers,dt.segments,u,y,st.program,qe,F,j,st.uniformValues,dt.terrainData)}}function sh(y,i,u,f,g,_,C,I,E,D){const F=f.context;g.draw(F,F.gl.TRIANGLES,_,C,I,fn.disabled,E,D,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Gl(y,i,u,f,g){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let C=_[u.to.toString()],I=_[u.from.toString()];if(!C&&I&&(C=I),!I&&C&&(I=C),!C||!I){const E=g.getPaintProperty(i);C=_[E],I=_[E]}C&&I&&y.setConstantPatternPositions(C,I)}function ql(y,i,u,f,g,_,C){const I=y.context.gl,E="fill-pattern",D=u.paint.get(E),F=D&&D.constantOr(1),j=u.getCrossfadeParameters();let J,de,ue,pe,se;C?(de=F&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=I.LINES):(de=F?"fillPattern":"fill",J=I.TRIANGLES);const ze=D.constantOr(null);for(const je of f){const ye=i.getTile(je);if(F&&!ye.patternsLoaded())continue;const Me=ye.getBucket(u);if(!Me)continue;const qe=Me.programConfigurations.get(u.id),Ze=y.useProgram(de,qe),ot=y.style.map.terrain&&y.style.map.terrain.getTerrainData(je);F&&(y.context.activeTexture.set(I.TEXTURE0),ye.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),qe.updatePaintBuffers(j)),Gl(qe,E,ze,ye,u);const dt=ot?je:null,st=y.translatePosMatrix(dt?dt.posMatrix:je.posMatrix,ye,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){pe=Me.indexBuffer2,se=Me.segments2;const pt=[I.drawingBufferWidth,I.drawingBufferHeight];ue=de==="fillOutlinePattern"&&F?Uc(st,y,j,ye,pt):Vc(st,pt)}else pe=Me.indexBuffer,se=Me.segments,ue=F?Ud(st,y,j,ye):Nf(st);Ze.draw(y.context,J,g,y.stencilModeForClipping(je),_,fn.disabled,ue,ot,u.id,Me.layoutVertexBuffer,pe,se,u.paint,y.transform.zoom,qe)}}function Zl(y,i,u,f,g,_,C){const I=y.context,E=I.gl,D="fill-extrusion-pattern",F=u.paint.get(D),j=F.constantOr(1),J=u.getCrossfadeParameters(),de=u.paint.get("fill-extrusion-opacity"),ue=F.constantOr(null);for(const pe of f){const se=i.getTile(pe),ze=se.getBucket(u);if(!ze)continue;const je=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),ye=ze.programConfigurations.get(u.id),Me=y.useProgram(j?"fillExtrusionPattern":"fillExtrusion",ye);j&&(y.context.activeTexture.set(E.TEXTURE0),se.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ye.updatePaintBuffers(J)),Gl(ye,D,ue,se,u);const qe=y.translatePosMatrix(pe.posMatrix,se,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ze=u.paint.get("fill-extrusion-vertical-gradient"),ot=j?Ua(qe,y,Ze,de,pe,J,se):Vd(qe,y,Ze,de);Me.draw(I,I.gl.TRIANGLES,g,_,C,fn.backCCW,ot,je,u.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,u.paint,y.transform.zoom,ye,y.style.map.terrain&&ze.centroidVertexBuffer)}}function y0(y,i,u,f,g,_,C){const I=y.context,E=I.gl,D=u.fbo;if(!D)return;const F=y.useProgram("hillshade"),j=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);I.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,D.colorAttachment.get()),F.draw(I,E.TRIANGLES,g,_,C,fn.disabled,((J,de,ue,pe)=>{const se=ue.paint.get("hillshade-shadow-color"),ze=ue.paint.get("hillshade-highlight-color"),je=ue.paint.get("hillshade-accent-color");let ye=ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);ue.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=J.transform.angle);const Me=!J.options.moving;return{u_matrix:pe?pe.posMatrix:J.transform.calculatePosMatrix(de.tileID.toUnwrapped(),Me),u_image:0,u_latrange:Wd(0,de.tileID),u_light:[ue.paint.get("hillshade-exaggeration"),ye],u_shadow:se,u_highlight:ze,u_accent:je}})(y,u,f,j?i:null),j,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function lh(y,i,u,f,g,_){const C=y.context,I=C.gl,E=i.dem;if(E&&E.data){const D=E.dim,F=E.stride,j=E.getPixels();if(C.activeTexture.set(I.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(F),i.demTexture){const de=i.demTexture;de.update(j,{premultiply:!1}),de.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else i.demTexture=new _e(C,j,I.RGBA,{premultiply:!1}),i.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);C.activeTexture.set(I.TEXTURE0);let J=i.fbo;if(!J){const de=new _e(C,{width:D,height:D,data:null},I.RGBA);de.bind(I.LINEAR,I.CLAMP_TO_EDGE),J=i.fbo=C.createFramebuffer(D,D,!0,!1),J.colorAttachment.set(de.texture)}C.bindFramebuffer.set(J.framebuffer),C.viewport.set([0,0,D,D]),y.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,f,g,_,fn.disabled,((de,ue)=>{const pe=ue.stride,se=c.Z();return c.aS(se,0,c.N,-c.N,0,0,1),c.$(se,se,[0,-c.N,0]),{u_matrix:se,u_image:1,u_dimension:[pe,pe],u_zoom:de.overscaledZ,u_unpack:ue.getUnpackVector()}})(i.tileID,E),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function v0(y,i,u,f,g,_){const C=f.paint.get("raster-fade-duration");if(!_&&C>0){const I=c.h.now(),E=(I-y.timeAdded)/C,D=i?(I-i.timeAdded)/C:-1,F=u.getSource(),j=g.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),J=!i||Math.abs(i.tileID.overscaledZ-j)>Math.abs(y.tileID.overscaledZ-j),de=J&&y.refreshedUponExpiration?1:c.ad(J?E:1-D,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-de}:{opacity:de,mix:0}}return{opacity:1,mix:0}}const em=new c.aT(1,0,0,1),iu=new c.aT(0,1,0,1),ch=new c.aT(0,0,1,1),tm=new c.aT(1,0,1,1),rm=new c.aT(0,1,1,1);function Kl(y,i,u,f){au(y,0,i+u/2,y.transform.width,u,f)}function ou(y,i,u,f){au(y,i-u/2,0,u,y.transform.height,f)}function au(y,i,u,f,g,_){const C=y.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(i*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),I.disable(I.SCISSOR_TEST)}function nm(y,i,u){const f=y.context,g=f.gl,_=u.posMatrix,C=y.useProgram("debug"),I=Ar.disabled,E=vn.disabled,D=y.colorModeForRenderPass(),F="$debug",j=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(g.TEXTURE0);const J=i.getTileByID(u.key).latestRawTileData,de=Math.floor((J&&J.byteLength||0)/1024),ue=i.getTile(u).tileSize,pe=512/Math.min(ue,512)*(u.overscaledZ/y.transform.zoom)*.5;let se=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(se+=` => ${u.overscaledZ}`),function(ze,je){ze.initDebugOverlayCanvas();const ye=ze.debugOverlayCanvas,Me=ze.context.gl,qe=ze.debugOverlayCanvas.getContext("2d");qe.clearRect(0,0,ye.width,ye.height),qe.shadowColor="white",qe.shadowBlur=2,qe.lineWidth=1.5,qe.strokeStyle="white",qe.textBaseline="top",qe.font="bold 36px Open Sans, sans-serif",qe.fillText(je,5,5),qe.strokeText(je,5,5),ze.debugOverlayTexture.update(ye),ze.debugOverlayTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}(y,`${se} ${de}kB`),C.draw(f,g.TRIANGLES,I,E,yn.alphaBlended,fn.disabled,Ul(_,c.aT.transparent,pe),null,F,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(f,g.LINE_STRIP,I,E,D,fn.disabled,Ul(_,c.aT.red),j,F,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function wn(y,i,u){const f=y.context,g=f.gl,_=y.colorModeForRenderPass(),C=new Ar(g.LEQUAL,Ar.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),E=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const D of u){const F=y.renderToTexture.getTexture(D),j=i.getTerrainData(D.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,F.texture);const J={u_matrix:y.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};I.draw(f,g.TRIANGLES,C,vn.disabled,_,fn.backCCW,J,j,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class gs{constructor(i,u){this.context=new g0(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=br.maxUnderzooming+br.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ir}resize(i,u,f){if(this.width=Math.floor(i*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new c.a_;u.emplaceBack(0,0),u.emplaceBack(c.N,0),u.emplaceBack(0,c.N),u.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(u,rn.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const f=new c.a_;f.emplaceBack(0,0),f.emplaceBack(c.N,0),f.emplaceBack(0,c.N),f.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(f,rn.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const g=new c.V;g.emplaceBack(0,0,0,0),g.emplaceBack(c.N,0,c.N,0),g.emplaceBack(0,c.N,0,c.N),g.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,ft.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const _=new c.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,rn.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const C=new c.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const I=new c.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(I);const E=this.context.gl;this.stencilClearMode=new vn({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=c.Z();c.aS(f,0,this.width,this.height,0,0,1),c.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,Ar.disabled,this.stencilClearMode,yn.disabled,fn.disabled,jf(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(yn.disabled),f.setDepthMode(Ar.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const I=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(f,g.TRIANGLES,Ar.disabled,new vn({func:g.ALWAYS,mask:0},I,255,g.KEEP,g.KEEP,g.REPLACE),yn.disabled,fn.disabled,jf(C.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new vn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new vn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),g=f[f.length-1].overscaledZ,_=f[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let I=0;I<_;I++)C[I+g]=new vn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,f]}return[{[g]:vn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new yn([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yn.unblended:yn.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return Ar.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Ar(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,_={},C={},I={};for(const E in g){const D=g[E];D.used&&D.prepare(this.context),_[E]=D.getVisibleCoordinates(),C[E]=_[E].slice().reverse(),I[E]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<f.length;E++)if(this.style._layers[f[E]].is3D()){this.opaquePassCutoff=E;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const E=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||E.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,F){const j=D.context,J=j.gl,de=yn.unblended,ue=new Ar(J.LEQUAL,Ar.ReadWrite,[0,1]),pe=F.getTerrainMesh(),se=F.sourceCache.getRenderableTiles(),ze=D.useProgram("terrainDepth");j.bindFramebuffer.set(F.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),j.clear({color:c.aT.transparent,depth:1});for(const je of se){const ye=F.getTerrainData(je.tileID),Me={u_matrix:D.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_ele_delta:F.getMeshFrameDelta(D.transform.zoom)};ze.draw(j,J.TRIANGLES,ue,vn.disabled,de,fn.backCCW,Me,ye,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,F){const j=D.context,J=j.gl,de=yn.unblended,ue=new Ar(J.LEQUAL,Ar.ReadWrite,[0,1]),pe=F.getTerrainMesh(),se=F.getCoordsTexture(),ze=F.sourceCache.getRenderableTiles(),je=D.useProgram("terrainCoords");j.bindFramebuffer.set(F.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),j.clear({color:c.aT.transparent,depth:1}),F.coordsIndex=[];for(const ye of ze){const Me=F.getTerrainData(ye.tileID);j.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,se.texture);const qe={u_matrix:D.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-F.coordsIndex.length)/255,u_texture:0,u_ele_delta:F.getMeshFrameDelta(D.transform.zoom)};je.draw(j,J.TRIANGLES,ue,vn.disabled,de,fn.backCCW,qe,Me,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),F.coordsIndex.push(ye.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const E of f){const D=this.style._layers[E];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const F=C[D.source];(D.type==="custom"||F.length)&&this.renderLayer(this,g[D.source],D,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[f[this.currentLayer]],D=g[E.source],F=_[E.source];this._renderTileClippingMasks(E,F),this.renderLayer(this,D,E,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const E=this.style._layers[f[this.currentLayer]],D=g[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const F=(E.type==="symbol"?I:C)[E.source];this._renderTileClippingMasks(E,_[E.source]),this.renderLayer(this,D,E,F)}if(this.options.showTileBoundaries){const E=function(D,F){let j=null;const J=Object.values(D._layers).flatMap(se=>se.source&&!se.isHidden(F)?[D.sourceCaches[se.source]]:[]),de=J.filter(se=>se.getSource().type==="vector"),ue=J.filter(se=>se.getSource().type!=="vector"),pe=se=>{(!j||j.getSource().maxzoom<se.getSource().maxzoom)&&(j=se)};return de.forEach(se=>pe(se)),j||ue.forEach(se=>pe(se)),j}(this.style,this.transform.zoom);E&&function(D,F,j){for(let J=0;J<j.length;J++)nm(D,F,j[J])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const D=E.transform.padding;Kl(E,E.transform.height-(D.top||0),3,em),Kl(E,D.bottom||0,3,iu),ou(E,D.left||0,3,ch),ou(E,E.transform.width-(D.right||0),3,tm);const F=E.transform.centerPoint;(function(j,J,de,ue){au(j,J-1,de-10,2,20,ue),au(j,J-10,de-1,20,2,ue)})(E,F.x,E.transform.height-F.y,rm)}(this),this.context.setDefault()}renderLayer(i,u,f,g){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(g||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,C,I,E,D){if(_.renderPass!=="translucent")return;const F=vn.disabled,j=_.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(J,de,ue,pe,se,ze,je){const ye=de.transform,Me=se==="map",qe=ze==="map";for(const Ze of J){const ot=pe.getTile(Ze),dt=ot.getBucket(ue);if(!dt||!dt.text||!dt.text.segments.get().length)continue;const st=c.ah(dt.textSizeData,ye.zoom),pt=be(ot,1,de.transform.zoom),Vt=Be(Ze.posMatrix,qe,Me,de.transform,pt),wr=ue.layout.get("icon-text-fit")!=="none"&&dt.hasIconData();if(st){const Tt=Math.pow(2,ye.zoom-ot.tileID.overscaledZ);ru(dt,Me,qe,je,ye,Vt,Ze.posMatrix,Tt,st,wr,de.style.map.terrain?(ar,Wt)=>de.style.map.terrain.getElevation(Ze,ar,Wt):null)}}}(E,_,I,C,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),D),I.paint.get("icon-opacity").constantOr(1)!==0&&nu(_,C,I,E,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),F,j),I.paint.get("text-opacity").constantOr(1)!==0&&nu(_,C,I,E,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),F,j),C.map.showCollisionBoxes&&(Qf(_,C,I,E,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),Qf(_,C,I,E,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(i,u,f,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,I,E){if(_.renderPass!=="translucent")return;const D=I.paint.get("circle-opacity"),F=I.paint.get("circle-stroke-width"),j=I.paint.get("circle-stroke-opacity"),J=!I.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(F.constantOr(1)===0||j.constantOr(1)===0))return;const de=_.context,ue=de.gl,pe=_.depthModeForSublayer(0,Ar.ReadOnly),se=vn.disabled,ze=_.colorModeForRenderPass(),je=[];for(let ye=0;ye<E.length;ye++){const Me=E[ye],qe=C.getTile(Me),Ze=qe.getBucket(I);if(!Ze)continue;const ot=Ze.programConfigurations.get(I.id),dt=_.useProgram("circle",ot),st=Ze.layoutVertexBuffer,pt=Ze.indexBuffer,Vt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Me),wr={programConfiguration:ot,program:dt,layoutVertexBuffer:st,indexBuffer:pt,uniformValues:Ha(_,Me,qe,I),terrainData:Vt};if(J){const Tt=Ze.segments.get();for(const ar of Tt)je.push({segments:new c.S([ar]),sortKey:ar.sortKey,state:wr})}else je.push({segments:Ze.segments,sortKey:0,state:wr})}J&&je.sort((ye,Me)=>ye.sortKey-Me.sortKey);for(const ye of je){const{programConfiguration:Me,program:qe,layoutVertexBuffer:Ze,indexBuffer:ot,uniformValues:dt,terrainData:st}=ye.state;qe.draw(de,ue.TRIANGLES,pe,se,ze,fn.disabled,dt,st,I.id,Ze,ot,ye.segments,I.paint,_.transform.zoom,Me)}})(i,u,f,g);break;case"heatmap":(function(_,C,I,E){if(I.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,F=D.gl,j=vn.disabled,J=new yn([F.ONE,F.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(de,ue,pe){const se=de.gl;de.activeTexture.set(se.TEXTURE1),de.viewport.set([0,0,ue.width/4,ue.height/4]);let ze=pe.heatmapFbo;if(ze)se.bindTexture(se.TEXTURE_2D,ze.colorAttachment.get()),de.bindFramebuffer.set(ze.framebuffer);else{const je=se.createTexture();se.bindTexture(se.TEXTURE_2D,je),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,se.LINEAR),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,se.LINEAR),ze=pe.heatmapFbo=de.createFramebuffer(ue.width/4,ue.height/4,!1,!1),function(ye,Me,qe,Ze){var ot,dt;const st=ye.gl,pt=(ot=ye.HALF_FLOAT)!==null&&ot!==void 0?ot:st.UNSIGNED_BYTE,Vt=(dt=ye.RGBA16F)!==null&&dt!==void 0?dt:st.RGBA;st.texImage2D(st.TEXTURE_2D,0,Vt,Me.width/4,Me.height/4,0,st.RGBA,pt,null),Ze.colorAttachment.set(qe)}(de,ue,je,ze)}})(D,_,I),D.clear({color:c.aT.transparent});for(let de=0;de<E.length;de++){const ue=E[de];if(C.hasRenderableParent(ue))continue;const pe=C.getTile(ue),se=pe.getBucket(I);if(!se)continue;const ze=se.programConfigurations.get(I.id),je=_.useProgram("heatmap",ze),{zoom:ye}=_.transform;je.draw(D,F.TRIANGLES,Ar.disabled,j,J,fn.disabled,l0(ue.posMatrix,pe,ye,I.paint.get("heatmap-intensity")),null,I.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,I.paint,_.transform.zoom,ze)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,F){const j=D.context,J=j.gl,de=F.heatmapFbo;if(!de)return;j.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,de.colorAttachment.get()),j.activeTexture.set(J.TEXTURE1);let ue=F.colorRampTexture;ue||(ue=F.colorRampTexture=new _e(j,F.colorRamp,J.RGBA)),ue.bind(J.LINEAR,J.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(j,J.TRIANGLES,Ar.disabled,vn.disabled,D.colorModeForRenderPass(),fn.disabled,((pe,se,ze,je)=>{const ye=c.Z();c.aS(ye,0,pe.width,pe.height,0,0,1);const Me=pe.context.gl;return{u_matrix:ye,u_world:[Me.drawingBufferWidth,Me.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:se.paint.get("heatmap-opacity")}})(D,F),null,F.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,F.paint,D.transform.zoom)}(_,I))})(i,u,f,g);break;case"line":(function(_,C,I,E){if(_.renderPass!=="translucent")return;const D=I.paint.get("line-opacity"),F=I.paint.get("line-width");if(D.constantOr(1)===0||F.constantOr(1)===0)return;const j=_.depthModeForSublayer(0,Ar.ReadOnly),J=_.colorModeForRenderPass(),de=I.paint.get("line-dasharray"),ue=I.paint.get("line-pattern"),pe=ue.constantOr(1),se=I.paint.get("line-gradient"),ze=I.getCrossfadeParameters(),je=pe?"linePattern":de?"lineSDF":se?"lineGradient":"line",ye=_.context,Me=ye.gl;let qe=!0;for(const Ze of E){const ot=C.getTile(Ze);if(pe&&!ot.patternsLoaded())continue;const dt=ot.getBucket(I);if(!dt)continue;const st=dt.programConfigurations.get(I.id),pt=_.context.program.get(),Vt=_.useProgram(je,st),wr=qe||Vt.program!==pt,Tt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ze),ar=ue.constantOr(null);if(ar&&ot.imageAtlas){const xr=ot.imageAtlas,gr=xr.patternPositions[ar.to.toString()],Sr=xr.patternPositions[ar.from.toString()];gr&&Sr&&st.setConstantPatternPositions(gr,Sr)}const Wt=Tt?Ze:null,Jr=pe?c0(_,ot,I,ze,Wt):de?Uf(_,ot,I,de,ze,Wt):se?Vf(_,ot,I,dt.lineClipsArray.length,Wt):Gd(_,ot,I,Wt);if(pe)ye.activeTexture.set(Me.TEXTURE0),ot.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),st.updatePaintBuffers(ze);else if(de&&(wr||_.lineAtlas.dirty))ye.activeTexture.set(Me.TEXTURE0),_.lineAtlas.bind(ye);else if(se){const xr=dt.gradients[I.id];let gr=xr.texture;if(I.gradientVersion!==xr.version){let Sr=256;if(I.stepInterpolant){const Pn=C.getSource().maxzoom,nn=Ze.canonical.z===Pn?Math.ceil(1<<_.transform.maxZoom-Ze.canonical.z):1;Sr=c.ad(c.aY(dt.maxLineLength/c.N*1024*nn),256,ye.maxTextureSize)}xr.gradient=c.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Sr,image:xr.gradient||void 0,clips:dt.lineClipsArray}),xr.texture?xr.texture.update(xr.gradient):xr.texture=new _e(ye,xr.gradient,Me.RGBA),xr.version=I.gradientVersion,gr=xr.texture}ye.activeTexture.set(Me.TEXTURE0),gr.bind(I.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}Vt.draw(ye,Me.TRIANGLES,j,_.stencilModeForClipping(Ze),J,fn.disabled,Jr,Tt,I.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,I.paint,_.transform.zoom,st,dt.layoutVertexBuffer2),qe=!1}})(i,u,f,g);break;case"fill":(function(_,C,I,E){const D=I.paint.get("fill-color"),F=I.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const j=_.colorModeForRenderPass(),J=I.paint.get("fill-pattern"),de=_.opaquePassEnabledForLayer()&&!J.constantOr(1)&&D.constantOr(c.aT.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===de){const ue=_.depthModeForSublayer(1,_.renderPass==="opaque"?Ar.ReadWrite:Ar.ReadOnly);ql(_,C,I,E,ue,j,!1)}if(_.renderPass==="translucent"&&I.paint.get("fill-antialias")){const ue=_.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Ar.ReadOnly);ql(_,C,I,E,ue,j,!0)}})(i,u,f,g);break;case"fill-extrusion":(function(_,C,I,E){const D=I.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const F=new Ar(_.context.gl.LEQUAL,Ar.ReadWrite,_.depthRangeFor3D);if(D!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Zl(_,C,I,E,F,vn.disabled,yn.disabled),Zl(_,C,I,E,F,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const j=_.colorModeForRenderPass();Zl(_,C,I,E,F,vn.disabled,j)}}})(i,u,f,g);break;case"hillshade":(function(_,C,I,E){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,F=_.depthModeForSublayer(0,Ar.ReadOnly),j=_.colorModeForRenderPass(),[J,de]=_.renderPass==="translucent"?_.stencilConfigForOverlap(E):[{},E];for(const ue of de){const pe=C.getTile(ue);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&_.renderPass==="offscreen"?lh(_,pe,I,F,vn.disabled,j):_.renderPass==="translucent"&&y0(_,ue,pe,I,F,J[ue.overscaledZ],j)}D.viewport.set([0,0,_.width,_.height])})(i,u,f,g);break;case"raster":(function(_,C,I,E){if(_.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!E.length)return;const D=_.context,F=D.gl,j=C.getSource(),J=_.useProgram("raster"),de=_.colorModeForRenderPass(),[ue,pe]=j instanceof _t?[{},E]:_.stencilConfigForOverlap(E),se=pe[pe.length-1].overscaledZ,ze=!_.options.moving;for(const je of pe){const ye=_.depthModeForSublayer(je.overscaledZ-se,I.paint.get("raster-opacity")===1?Ar.ReadWrite:Ar.ReadOnly,F.LESS),Me=C.getTile(je);Me.registerFadeDuration(I.paint.get("raster-fade-duration"));const qe=C.findLoadedParent(je,0),Ze=v0(Me,qe,C,I,_.transform,_.style.map.terrain);let ot,dt;const st=I.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;D.activeTexture.set(F.TEXTURE0),Me.texture.bind(st,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(F.TEXTURE1),qe?(qe.texture.bind(st,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),ot=Math.pow(2,qe.tileID.overscaledZ-Me.tileID.overscaledZ),dt=[Me.tileID.canonical.x*ot%1,Me.tileID.canonical.y*ot%1]):Me.texture.bind(st,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(je),Vt=pt?je:null,wr=Vt?Vt.posMatrix:_.transform.calculatePosMatrix(je.toUnwrapped(),ze),Tt=Wf(wr,dt||[0,0],ot||1,Ze,I);j instanceof _t?J.draw(D,F.TRIANGLES,ye,vn.disabled,de,fn.disabled,Tt,pt,I.id,j.boundsBuffer,_.quadTriangleIndexBuffer,j.boundsSegments):J.draw(D,F.TRIANGLES,ye,ue[je.overscaledZ],de,fn.disabled,Tt,pt,I.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,f,g);break;case"background":(function(_,C,I,E){const D=I.paint.get("background-color"),F=I.paint.get("background-opacity");if(F===0)return;const j=_.context,J=j.gl,de=_.transform,ue=de.tileSize,pe=I.paint.get("background-pattern");if(_.isPatternMissing(pe))return;const se=!pe&&D.a===1&&F===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==se)return;const ze=vn.disabled,je=_.depthModeForSublayer(0,se==="opaque"?Ar.ReadWrite:Ar.ReadOnly),ye=_.colorModeForRenderPass(),Me=_.useProgram(pe?"backgroundPattern":"background"),qe=E||de.coveringTiles({tileSize:ue,terrain:_.style.map.terrain});pe&&(j.activeTexture.set(J.TEXTURE0),_.imageManager.bind(_.context));const Ze=I.getCrossfadeParameters();for(const ot of qe){const dt=E?ot.posMatrix:_.transform.calculatePosMatrix(ot.toUnwrapped()),st=pe?mo(dt,F,_,pe,{tileID:ot,tileSize:ue},Ze):Wc(dt,F,D),pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ot);Me.draw(j,J.TRIANGLES,je,ze,ye,fn.disabled,st,pt,I.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,f,g);break;case"custom":(function(_,C,I){const E=_.context,D=I.implementation;if(_.renderPass==="offscreen"){const F=D.prerender;F&&(_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),F.call(D,E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),E.setStencilMode(vn.disabled);const F=D.renderingMode==="3d"?new Ar(_.context.gl.LEQUAL,Ar.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Ar.ReadOnly);E.setDepthMode(F),D.render(E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState(),E.bindFramebuffer.set(null)}})(i,0,f)}}translatePosMatrix(i,u,f,g,_){if(!f[0]&&!f[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const D=Math.sin(C),F=Math.cos(C);f=[f[0]*F-f[1]*D,f[0]*D+f[1]*F]}const I=[_?f[0]:be(u,f[0],this.transform.zoom),_?f[1]:be(u,f[1],this.transform.zoom),0],E=new Float32Array(16);return c.$(E,i,I),E}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new jc(this.context,Vr[i],u,Gc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _e(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Bi{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const g=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const E=1/(I=c.ag([],I,i))[3]/u*g;return c.b3(I,I,[E,E,1/I[3],E])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const E=function(J,de){var ue=de[0],pe=de[1],se=de[2],ze=ue*ue+pe*pe+se*se;return ze>0&&(ze=1/Math.sqrt(ze)),J[0]=de[0]*ze,J[1]=de[1]*ze,J[2]=de[2]*ze,J}([],function(J,de,ue){var pe=de[0],se=de[1],ze=de[2],je=ue[0],ye=ue[1],Me=ue[2];return J[0]=se*Me-ze*ye,J[1]=ze*je-pe*Me,J[2]=pe*ye-se*je,J}([],oe([],_[I[0]],_[I[1]]),oe([],_[I[2]],_[I[1]]))),D=-((F=E)[0]*(j=_[I[1]])[0]+F[1]*j[1]+F[2]*j[2]);var F,j;return E.concat(D)});return new Bi(_,C)}}class Js{constructor(i,u){this.min=i,this.max=u,this.center=function(f,g,_){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,_){return f[0]=g[0]+_[0],f[1]=g[1]+_[1],f[2]=g[2]+_[2],f}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],f=ee(this.min),g=ee(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Js(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let I=0;I<u.length;I++)c.b4(_,u[I])>=0&&C++;if(C===0)return 0;C!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let I=0;I<i.points.length;I++){const E=i.points[I][g]-this.min[g];_=Math.min(_,E),C=Math.max(C,E)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Xl{constructor(i=0,u=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=g}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,u.right,f)),this}getCenter(i,u){const f=c.ad((this.left+i-this.right)/2,0,i),g=c.ad((this.top+u-this.bottom)/2,0,u);return new c.P(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Xl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class su{constructor(i,u,f,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new su(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-c.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new c.A(4);return c.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,_){var C=g[0],I=g[1],E=g[2],D=g[3],F=Math.sin(_),j=Math.cos(_);f[0]=C*j+E*F,f[1]=I*j+D*F,f[2]=C*-F+E*j,f[3]=I*-F+D*j}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new c.b6(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new c.P(0,0)),g=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),C=this.pointCoordinate(new c.P(0,this.height)),I=Math.floor(Math.min(f.x,g.x,_.x,C.x)),E=Math.floor(Math.max(f.x,g.x,_.x,C.x)),D=1;for(let F=I-D;F<=E+D;F++)F!==0&&u.push(new c.b6(F,i))}return u}coveringTiles(i){var u,f;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),I=c.U.fromLngLat(this.center),E=Math.pow(2,g),D=[E*C.x,E*C.y,0],F=[E*I.x,E*I.y,0],j=Bi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let J=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(J=g);const de=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ue=ye=>({aabb:new Js([ye*E,0,0],[(ye+1)*E,E,0]),zoom:0,x:0,y:0,wrap:ye,fullyVisible:!1}),pe=[],se=[],ze=g,je=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ye=1;ye<=3;ye++)pe.push(ue(-ye)),pe.push(ue(ye));for(pe.push(ue(0));pe.length>0;){const ye=pe.pop(),Me=ye.x,qe=ye.y;let Ze=ye.fullyVisible;if(!Ze){const Vt=ye.aabb.intersects(j);if(Vt===0)continue;Ze=Vt===2}const ot=i.terrain?D:F,dt=ye.aabb.distanceX(ot),st=ye.aabb.distanceY(ot),pt=Math.max(Math.abs(dt),Math.abs(st));if(ye.zoom===ze||pt>de+(1<<ze-ye.zoom)-2&&ye.zoom>=J){const Vt=ze-ye.zoom,wr=D[0]-.5-(Me<<Vt),Tt=D[1]-.5-(qe<<Vt);se.push({tileID:new c.O(ye.zoom===ze?je:ye.zoom,ye.wrap,ye.zoom,Me,qe),distanceSq:ie([F[0]-.5-Me,F[1]-.5-qe]),tileDistanceToCamera:Math.sqrt(wr*wr+Tt*Tt)})}else for(let Vt=0;Vt<4;Vt++){const wr=(Me<<1)+Vt%2,Tt=(qe<<1)+(Vt>>1),ar=ye.zoom+1;let Wt=ye.aabb.quadrant(Vt);if(i.terrain){const Jr=new c.O(ar,ye.wrap,ar,wr,Tt),xr=i.terrain.getMinMaxElevation(Jr),gr=(u=xr.minElevation)!==null&&u!==void 0?u:this.elevation,Sr=(f=xr.maxElevation)!==null&&f!==void 0?f:this.elevation;Wt=new Js([Wt.min[0],Wt.min[1],gr],[Wt.max[0],Wt.max[1],Sr])}pe.push({aabb:Wt,zoom:ar,x:wr,y:Tt,wrap:ye.wrap,fullyVisible:Ze})}}return se.sort((ye,Me)=>ye.distanceSq-Me.distanceSq).map(ye=>ye.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(u)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),f=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const g=this.getCameraPosition(),_=c.U.fromLngLat(g.lngLat,g.altitude),C=c.U.fromLngLat(u,f),I=_.x-C.x,E=_.y-C.y,D=_.z-C.z,F=Math.sqrt(I*I+E*E+D*D),j=this.scaleZoom(this.cameraToCenterDistance/F/this.tileSize);this._elevation=f,this._center=u,this.zoom=j}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new c.U(_.x-(f.x-g.x),_.y-(f.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const J=u.pointCoordinate(i);if(J!=null)return J}const f=[i.x,i.y,0,1],g=[i.x,i.y,1,1];c.ag(f,f,this.pixelMatrixInverse),c.ag(g,g,this.pixelMatrixInverse);const _=f[3],C=g[3],I=f[1]/_,E=g[1]/C,D=f[2]/_,F=g[2]/C,j=D===F?0:(0-D)/(F-D);return new c.U(c.B.number(f[0]/_,g[0]/C,j)/this.worldSize,c.B.number(I,E,j)/this.worldSize)}coordinatePoint(i,u=0,f=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return c.ag(g,g,f),new c.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*i.wrap,E=c.ao(new Float64Array(16));return c.$(E,E,[I*C,_.y*C,0]),c.a0(E,E,[C/c.N,C/c.N,1]),c.a1(E,u?this.alignedProjMatrix:this.projMatrix,E),g[f]=new Float32Array(E),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,g,_=-90,C=90,I=-180,E=180;const D=this.size,F=this._unmodified;if(this.latRange){const de=this.latRange;_=c.H(de[1])*this.worldSize,C=c.H(de[0])*this.worldSize,i=C-_<D.y?D.y/(C-_):0}if(this.lngRange){const de=this.lngRange;I=c.b5(c.G(de[0])*this.worldSize,0,this.worldSize),E=c.b5(c.G(de[1])*this.worldSize,0,this.worldSize),E<I&&(E+=this.worldSize),u=E-I<D.x?D.x/(E-I):0}const j=this.point,J=Math.max(u||0,i||0);if(J)return this.center=this.unproject(new c.P(u?(E+I)/2:j.x,i?(C+_)/2:j.y)),this.zoom+=this.scaleZoom(J),this._unmodified=F,void(this._constraining=!1);if(this.latRange){const de=j.y,ue=D.y/2;de-ue<_&&(g=_+ue),de+ue>C&&(g=C-ue)}if(this.lngRange){const de=(I+E)/2,ue=c.b5(j.x,de-this.worldSize/2,de+this.worldSize/2),pe=D.x/2;ue-pe<I&&(f=I+pe),ue+pe>E&&(f=E-pe)}f===void 0&&g===void 0||(this.center=this.unproject(new c.P(f!==void 0?f:j.x,g!==void 0?g:j.y)).wrap()),this._unmodified=F,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let g=c.ao(new Float64Array(16));c.a0(g,g,[this.width/2,-this.height/2,1]),c.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.ao(new Float64Array(16)),c.a0(g,g,[1,-1,1]),c.$(g,g,[-1,-1,0]),c.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),I=_-C*this._pixelPerMeter/Math.cos(this._pitch),E=C<0?I:_,D=Math.PI/2+this._pitch,F=this._fov*(.5+i.y/this.height),j=Math.sin(F)*E/Math.sin(c.ad(Math.PI-D-F,.01,Math.PI-.01)),J=this.getHorizon(),de=2*Math.atan(J/this.cameraToCenterDistance)*(.5+i.y/(2*J)),ue=Math.sin(de)*E/Math.sin(c.ad(Math.PI-D-de,.01,Math.PI-.01)),pe=Math.min(j,ue),se=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+E),ze=this.height/50;g=new Float64Array(16),c.b8(g,this._fov,this.width/this.height,ze,se),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,c.a0(g,g,[1,-1,1]),c.$(g,g,[0,0,-this.cameraToCenterDistance]),c.b9(g,g,this._pitch),c.ae(g,g,this.angle),c.$(g,g,[-u,-f,0]),this.mercatorMatrix=c.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),c.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,g),c.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.as([],g),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,g);const je=this.width%2/2,ye=this.height%2/2,Me=Math.cos(this.angle),qe=Math.sin(this.angle),Ze=u-Math.round(u)+Me*je+qe*ye,ot=f-Math.round(f)+Me*ye+qe*je,dt=new Float64Array(g);if(c.$(dt,dt,[Ze>.5?Ze-1:Ze,ot>.5?ot-1:ot,0]),this.alignedProjMatrix=dt,g=c.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,g=u.y,_=u.x,C=u.y;for(const I of i)f=Math.min(f,I.x),g=Math.min(g,I.y),_=Math.max(_,I.x),C=Math.max(C,I.y);return[new c.P(f,g),new c.P(_,g),new c.P(_,C),new c.P(f,C),new c.P(f,g)]}}}function ys(y,i){let u,f=!1,g=null,_=null;const C=()=>{g=null,f&&(y.apply(_,u),g=setTimeout(C,i),f=!1)};return(...I)=>(f=!0,_=this,u=I,g||C(),g)}class Jl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ys(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,E=this._map.getBearing(),D=this._map.getPitch();let F="";if(F+=i?`/${C}/${I}/${f}`:`${f}/${I}/${C}`,(E||D)&&(F+="/"+Math.round(10*E)/10),D&&(F+=`/${Math.round(D)}`),this._hashName){const j=this._hashName;let J=!1;const de=window.location.hash.slice(1).split("&").map(ue=>{const pe=ue.split("=")[0];return pe===j?(J=!0,`${pe}=${F}`):ue}).filter(ue=>ue);return J||de.push(`${j}=${F}`),`#${de.join("&")}`}return`#${F}`}}const Ys={linearity:.3,easing:c.ba(0,0,.3,1)},im=c.e({deceleration:2500,maxSpeed:1400},Ys),om=c.e({deceleration:20,maxSpeed:1400},Ys),am=c.e({deceleration:1e3,maxSpeed:360},Ys),sm=c.e({deceleration:1e3,maxSpeed:90},Ys);class lm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=c.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Yl(u.pan.mag(),f,c.e({},im,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Xo(g,_)}if(u.zoom){const _=Yl(u.zoom,f,om);g.zoom=this._map.transform.zoom+_.amount,Xo(g,_)}if(u.bearing){const _=Yl(u.bearing,f,am);g.bearing=this._map.transform.bearing+c.ad(_.amount,-179,179),Xo(g,_)}if(u.pitch){const _=Yl(u.pitch,f,sm);g.pitch=this._map.transform.pitch+_.amount,Xo(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(g,{noMoveStart:!0})}}function Xo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Yl(y,i,u){const{maxSpeed:f,linearity:g,deceleration:_}=u,C=c.ad(y*g/(i/1e3),-f,f),I=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*I,amount:C*(I/2)}}class to extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f,g={}){const _=w.mousePos(u.getCanvasContainer(),f),C=u.unproject(_);super(i,c.e({point:_,lngLat:C,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}}class Ql extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){const g=i==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),g),C=_.map(E=>u.unproject(E)),I=_.reduce((E,D,F,j)=>E.add(D.div(j.length)),new c.P(0,0));super(i,{points:_,point:I,lngLats:C,lngLat:u.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class cm extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class um{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new cm(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new to(i.type,this._map,i))}mouseup(i){this._map.fire(new to(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new to(i.type,this._map,i))}dblclick(i){return this._firePreventable(new to(i.type,this._map,i))}mouseover(i){this._map.fire(new to(i.type,this._map,i))}mouseout(i){this._map.fire(new to(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ql(i.type,this._map,i))}touchmove(i){this._map.fire(new Ql(i.type,this._map,i))}touchend(i){this._map.fire(new Ql(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ql(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dm{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new to(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new to("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new to(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xa{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class hm{constructor(i,u){this._map=i,this._tr=new xa(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,f.x),C=Math.max(g.x,f.x),I=Math.min(g.y,f.y),E=Math.max(g.y,f.y);w.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=C-_+"px",this._box.style.height=E-I+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,g=u;if(this.reset(),w.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new c.k(i,{originalEvent:u}))}}function go(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=i[f];return u}class ba{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const _=new c.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=go(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const g=go(f,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class lu{constructor(i){this.singleTap=new ba(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const g=this.singleTap.touchend(i,u,f);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class wa{constructor(i){this._tr=new xa(i),this._zoomIn=new lu({numTouches:1,numTaps:2}),this._zoomOut=new lu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const g=this._zoomIn.touchend(i,u,f),_=this._zoomOut.touchend(i,u,f),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sa{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _0={0:1,2:2};class uh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,f){const g=_0[f];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class pm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const cu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Qs=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const f=new uh({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Sa({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:f,enable:y,assignEvents:cu})},Ca=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new uh({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Sa({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:f,enable:y,assignEvents:cu})};class Bt{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const g=go(f,u),_=new c.P(0,0),C=new c.P(0,0);let I=0;for(const D in g){const F=g[D],j=this._touches[D];j&&(_._add(F),C._add(F.sub(j)),I++,g[D]=F)}if(this._touches=g,I<this._minTouches||!C.mag())return;const E=C.div(I);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=qa(f,u,g),I=qa(f,u,_);if(!C||!I)return;const E=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],E,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=qa(f,u,g),I=qa(f,u,_);C&&I||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function qa(y,i,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return i[f]}function el(y,i){return Math.log(y/i)/Math.LN2}class fm extends uu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(el(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:el(this._distance,f),pinchAround:u}}}function Rt(y,i){return 180*y.angleWith(i)/Math.PI}class dh extends uu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rt(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Rt(i,this._startVector);return Math.abs(f)<u}}function hh(y){return Math.abs(y.y)>Math.abs(y.x)}class x0 extends uu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,f){super.touchstart(i,u,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,hh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return hh(i)&&hh(u)&&C}}const ph={panStep:100,bearingStep:15,pitchStep:10};class mm{constructor(i){this._tr=new xa(i);const u=ph;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:I=>{const E=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:gm,zoom:u?Math.round(E.zoom)+u*(i.shiftKey?2:1):E.zoom,bearing:E.bearing+f*this._bearingStep,pitch:E.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:E.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gm(y){return y*(2-y)}const ym=4.000244140625;class b0{constructor(i,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new xa(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=c.h.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%ym==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),f=this._tr;this._around=c.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>ym?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&E!==0&&(E=1/E);const D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*E))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&f&&g){const I=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),E=g(I);_=c.B.number(f,u,E),I<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=c.bb;if(this._prevEase){const f=this._prevEase,g=(c.h.now()-f.start)/f.duration,_=f.easing(g+.01)-f.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-C*C);u=c.ba(C,I,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class fh{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class mh{constructor(i){this._tr=new xa(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gh{constructor(){this._tap=new lu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,f){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,u,f)}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const g=this._tap.touchend(i,u,f);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fi{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Za{constructor(i,u,f,g){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ec=y=>y.zoom||y.drag||y.pitch||y.rotate;class vh extends c.k{}function tc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class _h{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,I={needsRenderFrame:!1},E={},D={},F=g.touches,j=F?this._getMapTouches(F):void 0,J=j?w.touchPos(this._el,j):w.mousePos(this._el,g);for(const{handlerName:pe,handler:se,allowed:ze}of this._handlers){if(!se.isEnabled())continue;let je;this._blockedByActive(D,ze,pe)?se.reset():se[_||g.type]&&(je=se[_||g.type](g,J,j),this.mergeHandlerResult(I,E,je,pe,C),je&&je.needsRenderFrame&&this._triggerRenderFrame()),(je||se.isActive())&&(D[pe]=se)}const de={};for(const pe in this._previousActiveHandlers)D[pe]||(de[pe]=C);this._previousActiveHandlers=D,(Object.keys(de).length||tc(I))&&(this._changes.push([I,E,de]),this._triggerRenderFrame()),(Object.keys(D).length||tc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ue}=I;ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ue(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lm(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)w.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,f]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new um(u,i));const g=u.boxZoom=new hm(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new wa(u),C=new mh(u);u.doubleClickZoom=new fh(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const I=new gh;this._add("tapDragZoom",I);const E=u.touchPitch=new x0(u);this._add("touchPitch",E),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const D=Qs(i),F=Ca(i);u.dragRotate=new Fi(i,D,F),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const j=(({enable:ze,clickTolerance:je})=>{const ye=new uh({checkCorrectEvent:Me=>w.mouseButton(Me)===0&&!Me.ctrlKey});return new Sa({clickTolerance:je,move:(Me,qe)=>({around:qe,panDelta:qe.sub(Me)}),activateOnStart:!0,moveStateManager:ye,enable:ze,assignEvents:cu})})(i),J=new Bt(i,u);u.dragPan=new yh(f,j,J),this._add("mousePan",j),this._add("touchPan",J,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const de=new dh,ue=new fm;u.touchZoomRotate=new Za(f,ue,de,I),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const pe=u.scrollZoom=new b0(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const se=u.keyboard=new mm(u);this._add("keyboard",se),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new dm(u))}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ec(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,f){for(const g in i)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(i,u,f,g,_){if(!f)return;c.e(i,f);const C={handlerName:g,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=C),f.panDelta!==void 0&&(u.drag=C),f.pitchDelta!==void 0&&(u.pitch=C),f.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},f={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),c.e(u,_),c.e(f,C);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(tc(i)||C&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:E,bearingDelta:D,pitchDelta:F,around:j,pinchAround:J}=i;J!==void 0&&(j=J),g._stop(!0),j=j||g.transform.centerPoint;const de=_.pointLocation(I?j.sub(I):j);D&&(_.bearing+=D),F&&(_.pitch+=F),E&&(_.zoom+=E),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(I)):_.setLocationAtPoint(de,j):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(de,j),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(de,j),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const g=ec(this._eventsInProgress),_=ec(i),C={};for(const F in i){const{originalEvent:j}=i[F];this._eventsInProgress[F]||(C[`${F}start`]=j),this._eventsInProgress[F]=i[F]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const F in C)this._fireEvent(F,C[F]);_&&this._fireEvent("move",_.originalEvent);for(const F in i){const{originalEvent:j}=i[F];this._fireEvent(F,j)}const I={};let E;for(const F in this._eventsInProgress){const{handlerName:j,originalEvent:J}=this._eventsInProgress[F];this._handlersById[j].isActive()||(delete this._eventsInProgress[F],E=u[j]||J,I[`${F}end`]=E)}for(const F in I)this._fireEvent(F,I[F]);const D=ec(this._eventsInProgress);if(f&&(g||_)&&!D){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!F||!F.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:E})),j(this._map.getBearing())&&this._map.resetNorth()):(j(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new c.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new vh("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class vm extends c.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const f=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},u),f)}panTo(i,u,f){return this.easeTo(c.e({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(c.e({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(c.e({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,c.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Dt.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const qe=g.padding;g.padding={top:qe,bottom:qe,right:qe,left:qe}}g.padding=c.e(_,g.padding);const C=this.transform,I=C.padding,E=C.project(c.L.convert(i)),D=C.project(c.L.convert(u)),F=E.rotate(-f*Math.PI/180),j=D.rotate(-f*Math.PI/180),J=new c.P(Math.max(F.x,j.x),Math.max(F.y,j.y)),de=new c.P(Math.min(F.x,j.x),Math.min(F.y,j.y)),ue=J.sub(de),pe=(C.width-(I.left+I.right+g.padding.left+g.padding.right))/ue.x,se=(C.height-(I.top+I.bottom+g.padding.top+g.padding.bottom))/ue.y;if(se<0||pe<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ze=Math.min(C.scaleZoom(C.scale*Math.min(pe,se)),g.maxZoom),je=c.P.convert(g.offset),ye=new c.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),Me=je.add(ye).mult(C.scale/C.zoomScale(ze));return{center:C.unproject(E.add(D).div(2).sub(Me)),zoom:ze,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(u)),f,g),g,_)}_fitInternal(i,u,f){return i?(delete(u=c.e(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=c.L.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(_=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(C=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),g&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),C&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(i,u,f,g=0){const _=c.U.fromLngLat(i,u),C=c.U.fromLngLat(f,g),I=C.x-_.x,E=C.y-_.y,D=C.z-_.z,F=Math.hypot(I,E,D);if(F===0)throw new Error("Can't calculate camera options with same From and To");const j=Math.hypot(I,E),J=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),de=180*Math.atan2(I,-E)/Math.PI;let ue=180*Math.acos(j/F)/Math.PI;return ue=D<0?90-ue:90+ue,{center:C.toLngLat(),zoom:J,pitch:ue,bearing:de}}easeTo(i,u){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),E="zoom"in i?+i.zoom:g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,F="pitch"in i?+i.pitch:C,j="padding"in i?i.padding:f.padding,J=c.P.convert(i.offset);let de=f.centerPoint.add(J);const ue=f.pointLocation(de),pe=c.L.convert(i.center||ue);this._normalizeCenter(pe);const se=f.project(ue),ze=f.project(pe).sub(se),je=f.zoomScale(E-g);let ye,Me;i.around&&(ye=c.L.convert(i.around),Me=f.locationPoint(ye));const qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||E!==g,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||F!==C,this._padding=!f.isPaddingEqual(j),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,qe),this.terrain&&this._prepareElevation(pe),this._ease(Ze=>{if(this._zooming&&(f.zoom=c.B.number(g,E,Ze)),this._rotating&&(f.bearing=c.B.number(_,D,Ze)),this._pitching&&(f.pitch=c.B.number(C,F,Ze)),this._padding&&(f.interpolatePadding(I,j,Ze),de=f.centerPoint.add(J)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ze),ye)f.setLocationAtPoint(ye,Me);else{const ot=f.zoomScale(f.zoom-g),dt=E>g?Math.min(2,je):Math.max(.5,je),st=Math.pow(dt,1-Ze),pt=f.unproject(se.add(ze.mult(Ze*st)).mult(ot));f.setLocationAtPoint(f.renderWorldCopies?pt.wrap():pt,de)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},Ze=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ze)},i),this}_prepareEase(i,u,f={}){this._moving=!0,u||f.moving||this.fire(new c.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(u-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:f,zoom:g,pitch:_,bearing:C,elevation:I}=this.transformCameraUpdate(u);f&&(u.center=f),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),I!==void 0&&(u.elevation=I),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new c.k("zoomend",i)),g&&this.fire(new c.k("rotateend",i)),_&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,u){if(!i.essential&&c.h.prefersReducedMotion){const Wt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Wt,u)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),E="zoom"in i?c.ad(+i.zoom,f.minZoom,f.maxZoom):g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,F="pitch"in i?+i.pitch:C,j="padding"in i?i.padding:f.padding,J=f.zoomScale(E-g),de=c.P.convert(i.offset);let ue=f.centerPoint.add(de);const pe=f.pointLocation(ue),se=c.L.convert(i.center||pe);this._normalizeCenter(se);const ze=f.project(pe),je=f.project(se).sub(ze);let ye=i.curve;const Me=Math.max(f.width,f.height),qe=Me/J,Ze=je.mag();if("minZoom"in i){const Wt=c.ad(Math.min(i.minZoom,g,E),f.minZoom,f.maxZoom),Jr=Me/f.zoomScale(Wt-g);ye=Math.sqrt(Jr/Ze*2)}const ot=ye*ye;function dt(Wt){const Jr=(qe*qe-Me*Me+(Wt?-1:1)*ot*ot*Ze*Ze)/(2*(Wt?qe:Me)*ot*Ze);return Math.log(Math.sqrt(Jr*Jr+1)-Jr)}function st(Wt){return(Math.exp(Wt)-Math.exp(-Wt))/2}function pt(Wt){return(Math.exp(Wt)+Math.exp(-Wt))/2}const Vt=dt(!1);let wr=function(Wt){return pt(Vt)/pt(Vt+ye*Wt)},Tt=function(Wt){return Me*((pt(Vt)*(st(Jr=Vt+ye*Wt)/pt(Jr))-st(Vt))/ot)/Ze;var Jr},ar=(dt(!0)-Vt)/ye;if(Math.abs(Ze)<1e-6||!isFinite(ar)){if(Math.abs(Me-qe)<1e-6)return this.easeTo(i,u);const Wt=qe<Me?-1:1;ar=Math.abs(Math.log(qe/Me))/ye,Tt=function(){return 0},wr=function(Jr){return Math.exp(Wt*ye*Jr)}}return i.duration="duration"in i?+i.duration:1e3*ar/("screenSpeed"in i?+i.screenSpeed/ye:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=F!==C,this._padding=!f.isPaddingEqual(j),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(se),this._ease(Wt=>{const Jr=Wt*ar,xr=1/wr(Jr);f.zoom=Wt===1?E:g+f.scaleZoom(xr),this._rotating&&(f.bearing=c.B.number(_,D,Wt)),this._pitching&&(f.pitch=c.B.number(C,F,Wt)),this._padding&&(f.interpolatePadding(I,j,Wt),ue=f.centerPoint.add(de)),this.terrain&&!i.freezeElevation&&this._updateElevation(Wt);const gr=Wt===1?se:f.unproject(ze.add(je.mult(Tt(Jr))).mult(xr));f.setLocationAtPoint(f.renderWorldCopies?gr.wrap():gr,ue),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=c.h.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=c.b5(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class ro{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class cn{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class du{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const xh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var _m=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class xm extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const f={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.aS(g.posMatrix,0,c.N,0,c.N,0,1),this._tiles[g.key]=new Ot(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const f=this._tiles[u];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),c.aS(_.posMatrix,0,c.N,0,c.N,0,1),u[f]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,I=g.canonical.x-(g.canonical.x>>C<<C),E=g.canonical.y-(g.canonical.y>>C<<C),D=c.N>>C;c.aS(_.posMatrix,0,D,0,D,0,1),c.$(_.posMatrix,_.posMatrix,[-I*D,-E*D,0]),u[f]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,I=i.canonical.x-(i.canonical.x>>C<<C),E=i.canonical.y-(i.canonical.y>>C<<C),D=c.N>>C;c.aS(_.posMatrix,0,c.N,0,c.N,0,1),c.$(_.posMatrix,_.posMatrix,[I*D,E*D,0]),c.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[f]=_}}return u}getSourceTile(i,u){const f=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class bm{constructor(i,u,f){this.painter=i,this.sourceCache=new xm(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,f,g=c.N){var _;if(!(u>=0&&u<g&&f>=0&&f<g))return 0;const C=this.getTerrainData(i),I=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const E=function(ue,pe,se){var ze=pe[0],je=pe[1];return ue[0]=se[0]*ze+se[4]*je+se[12],ue[1]=se[1]*ze+se[5]*je+se[13],ue}([],[u/g*c.N,f/g*c.N],C.u_terrain_matrix),D=[E[0]*I.dim,E[1]*I.dim],F=Math.floor(D[0]),j=Math.floor(D[1]),J=D[0]-F,de=D[1]-j;return I.get(F,j)*(1-J)*(1-de)+I.get(F+1,j)*J*(1-de)+I.get(F,j+1)*(1-J)*de+I.get(F+1,j+1)*J*de}getElevationForLngLatZoom(i,u){const{tileID:f,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(f,g%c.N,_%c.N,c.N)}getElevation(i,u,f,g=c.N){return this.getDEMElevation(i,u,f,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new _e(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new _e(g,new c.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new _e(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),I=i.canonical.y-(i.canonical.y>>_<<_),E=c.bc(new Float64Array(16),[1/(c.N<<_),1/(c.N<<_),0]);c.$(E,E,[C*c.N,I*c.N,0]),this._demMatrixCache[i.key]={matrix:E,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,f=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new _e(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new _e(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)u[C+0]=255&I,u[C+1]=255&_,u[C+2]=I>>8<<4|_>>8,u[C+3]=0;const f=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new _e(i,f,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],E=I&&this.sourceCache.getTileByID(I);if(!E)return null;const D=this._coordsTextureSize,F=(1<<E.tileID.canonical.z)*D;return new c.U(this._allowMercatorOverflow(i,(E.tileID.canonical.x*D+_)/F),(E.tileID.canonical.y*D+C)/F,this.getElevation(E.tileID,_,C,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new c.bd,f=new c.b0,g=this.meshSize,_=c.N/g,C=g*g;for(let j=0;j<=g;j++)for(let J=0;J<=g;J++)u.emplaceBack(J*_,j*_,0);for(let j=0;j<C;j+=g+1)for(let J=0;J<g;J++)f.emplaceBack(J+j,g+J+j+1,g+J+j+2),f.emplaceBack(J+j,g+J+j+2,J+j+1);const I=u.length,E=I+2*(g+1);for(const j of[0,1])for(let J=0;J<=g;J++)for(const de of[0,1])u.emplaceBack(J*_,j*c.N,de);for(let j=0;j<2*g;j+=2)f.emplaceBack(E+j,E+j+1,E+j+3),f.emplaceBack(E+j,E+j+3,E+j+2),f.emplaceBack(I+j,I+j+3,I+j+1),f.emplaceBack(I+j,I+j+2,I+j+3);const D=u.length,F=D+2*(g+1);for(const j of[0,1])for(let J=0;J<=g;J++)for(const de of[0,1])u.emplaceBack(j*c.N,J*_,de);for(let j=0;j<2*g;j+=2)f.emplaceBack(D+j,D+j+1,D+j+3),f.emplaceBack(D+j,D+j+3,D+j+2),f.emplaceBack(F+j,F+j+3,F+j+1),f.emplaceBack(F+j,F+j+2,F+j+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(u,_m.members),segments:c.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var f;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,u){const f=c.U.fromLngLat(i.wrap()),g=(1<<u)*c.N,_=f.x*g,C=f.y*g,I=Math.floor(_/c.N),E=Math.floor(C/c.N);return{tileID:new c.O(u,0,u,I,E),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const f=i.x<this.painter.width/2;let g=c.bf(u);const _=this.painter.transform.center.lng;return f&&Math.sign(g)>0&&Math.sign(_)<0||!f&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,c.G(g)):u}}class w0{constructor(i,u,f){this._context=i,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new _e(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:i,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Ci={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class hu{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new w0(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const g=i.sourceCaches[f].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const I in C)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(C[I])}}this._coordsDescendingInvStr={};for(const f of i._order){const g=i._layers[f],_=g.source;if(Ci[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(I=>I.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][f.tileID.key];_&&_!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Ci[u]&&(this._prevType&&Ci[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Ci[this._prevType]||Ci[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(wn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[_]){const D=this.pool.getObjectForId(I.rtt[_].id);if(D.stamp===I.rtt[_].stamp){this.pool.useObject(D);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),I.rtt[_]={id:E.id,stamp:E.stamp},f.context.bindFramebuffer.set(E.fbo.framebuffer),f.context.clear({color:c.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let D=0;D<C.length;D++){const F=f.style._layers[C[D]],j=F.source?this._coordsDescendingInv[F.source][I.tileID.key]:[I.tileID];f.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),f._renderTileClippingMasks(F,j),f.renderLayer(f,f.style.sourceCaches[F.source],F,j),F.source&&(I.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][I.tileID.key])}}return wn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ci[u]}return!1}}const Zt=b,or={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},rc=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},bh={showCompass:!0,showZoom:!0,visualizePitch:!1};class wh{constructor(i,u,f=!1){this.mousedown=C=>{this.startMouse(c.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Qs({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:I,bearingDegreesPerPixelMoved:E=.8})=>{const D=new pm;return new Sa({clickTolerance:I,move:(F,j)=>({bearingDelta:(j.x-F.x)*E}),moveStateManager:D,enable:C,assignEvents:rc})})({clickTolerance:g,enable:!0}),this.map=i,f&&(this.mousePitch=Ca({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:I,pitchDegreesPerPixelMoved:E=-.5})=>{const D=new pm;return new Sa({clickTolerance:I,move:(F,j)=>({pitchDelta:(j.y-F.y)*E}),moveStateManager:D,enable:C,assignEvents:rc})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(i,u){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Rn;function Sh(y,i,u){if(y=new c.L(y.lng,y.lat),i){const f=new c.L(y.lng-360,y.lat),g=new c.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(f).distSqr(i)<_?y=f:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const yo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wm(y,i,u){const f=y.classList;for(const g in yo)f.remove(`maplibregl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${i}`)}class vs extends c.E{constructor(i){if(super(),this._onKeyPress=u=>{const f=u.code,g=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Sh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${yo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ze of E){const je=w.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",ze.rx),je.setAttributeNS(null,"ry",ze.ry),I.appendChild(je)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const F=w.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(F);const j=w.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"opacity","0.25"),j.setAttributeNS(null,"fill","#000000");const J=w.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),j.appendChild(J);const de=w.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(6.0, 7.0)"),de.setAttributeNS(null,"fill","#FFFFFF");const ue=w.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=w.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const se=w.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#FFFFFF"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962"),ue.appendChild(pe),ue.appendChild(se),C.appendChild(I),C.appendChild(D),C.appendChild(j),C.appendChild(de),C.appendChild(ue),u.appendChild(C),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),wm(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Sn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let _n=0,tl=!1;const nc={maxWidth:100,unit:"metric"};function ic(y,i,u){const f=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([f,g]),I=_.distanceTo(C);if(u&&u.unit==="imperial"){const E=3.2808*I;E>5280?_s(i,f,E/5280,y._getUIString("ScaleControl.Miles")):_s(i,f,E,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?_s(i,f,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?_s(i,f,I/1e3,y._getUIString("ScaleControl.Kilometers")):_s(i,f,I,y._getUIString("ScaleControl.Meters"))}function _s(y,i,u,f){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(E){const D=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*D)/D}(I),C*I}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${f}`}const Ch={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ih=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rl(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-y),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const i=c.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return rl(new c.P(0,0))}const Th={extend:(y,...i)=>c.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},Ph=b;class Gr{static get version(){return Ph}static get workerCount(){return Or.workerCount}static set workerCount(i){Or.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,u){c.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return Gr.Map=class extends vm{constructor(y){if(c.bg.mark(c.bh.create),(y=c.e({},or,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new su(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new du,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},xh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new R(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=ys(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{i?u(f):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new _h(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Jl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ro({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new cn,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,f)}resize(y){var i;const u=this._containerDimensions(),f=u[0],g=u[1],_=this._getClampedPixelRatio(f,g);if(this._resizeCanvas(f,g,_),this.painter.resize(f,g,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const E=this._getClampedPixelRatio(f,g);this._resizeCanvas(f,g,E),this.painter.resize(f,g,E)}this.transform.resize(f,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,g);const C=!this._moving;return C&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),C&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>f?f/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Dt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(c.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?f||(f=!0,u.call(this,new to(y,this,_.originalEvent,{features:C}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new to(y,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,u.call(this,new to(y,this,C.originalEvent)))}}}}{const f=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:f}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const f=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const f=this._createDelegatedListener(y,i,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const I in C.delegates)this.off(I,C.delegates[I]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const f=y instanceof c.P||Array.isArray(y),g=f?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:y)||{},g instanceof c.P||typeof g[0]=="number")u=[c.P.convert(g)];else{const _=c.P.convert(g[0]),C=c.P.convert(g[1]);u=[_,new c.P(C.x,_.y),C,new c.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new yr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new yr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,O.Style);c.f(u,(f,g)=>{f?this.fire(new c.j(f)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bm(this.painter,i,y),this.painter.renderToTexture=new hu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:f=1,sdf:g=!1,stretchX:_,stretchY:C,content:I}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:E,height:D,data:F}=i,j=i;return this.style.addImage(y,{data:new c.R({width:E,height:D},new Uint8Array(F)),pixelRatio:f,stretchX:_,stretchY:C,content:I,sdf:g,version:0,userImage:j}),j.onAdd&&j.onAdd(this,y),this}}{const{width:E,height:D,data:F}=c.h.getImageData(i);this.style.addImage(y,{data:new c.R({width:E,height:D},F),pixelRatio:f,stretchX:_,stretchY:C,content:I,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:g,height:_,data:C}=f;if(g===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(i instanceof HTMLImageElement||c.a(i));return u.data.replace(C,I),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){G.getImage(this._requestManager.transformRequest(y,O.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,f={}){return this.style.setPaintProperty(y,i,u,f),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,f={}){return this.style.setLayoutProperty(y,i,u,f),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const g=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:y},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new gs(u,this.transform),T.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=c.h.now();this.style.zoomHistory.update(g,_);const C=new c.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=C.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(y=>{c.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Zt}getCameraTargetElevation(){return this.transform.elevation}},Gr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);i.title=f,i.setAttribute("aria-label",f)},this.options=c.e({},bh,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},Gr.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new c.L(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,g=this._map.getBearing(),_=c.e({bearing:g},this.options.fitBoundsOptions),C=Dt.fromLngLat(u,f);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&tl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new vs({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},Sn,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){Rn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Rn=f.state!=="denied",i(Rn)}).catch(()=>{Rn=!!window.navigator.geolocation,i(Rn)}):(Rn=!!window.navigator.geolocation,i(Rn)):i(Rn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_n=0,tl=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),f=i.distanceTo(u),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_n--,tl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),_n++,_n>1?(y={maximumAge:6e5,timeout:0},tl=!0):(y=this.options.positionOptions,tl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Gr.AttributionControl=ro,Gr.LogoControl=cn,Gr.ScaleControl=class{constructor(y){this._onMove=()=>{ic(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,ic(this._map,this._container,this.options)},this.options=c.e({},nc,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Gr.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Gr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Gr.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let f=this.options.anchor;const g=rl(this.options.offset);if(!f){const C=this._container.offsetWidth,I=this._container.offsetHeight;let E;E=u.y+g.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<C/2?E.push("left"):u.x>this._map.transform.width-C/2&&E.push("right"),f=E.length===0?"bottom":E.join("-")}const _=u.add(g[f]).round();w.setTransform(this._container,`${yo[f]} translate(${_.x}px,${_.y}px)`),wm(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Ch),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Ih);y&&y.focus()}},Gr.Marker=vs,Gr.Style=yr,Gr.LngLat=c.L,Gr.LngLatBounds=Dt,Gr.Point=c.P,Gr.MercatorCoordinate=c.U,Gr.Evented=c.E,Gr.AJAXError=c.bi,Gr.config=c.c,Gr.CanvasSource=Qt,Gr.GeoJSONSource=Je,Gr.ImageSource=_t,Gr.RasterDEMTileSource=ct,Gr.RasterTileSource=Yt,Gr.VectorTileSource=$t,Gr.VideoSource=sr,Gr.setRTLTextPlugin=c.bj,Gr.getRTLTextPluginStatus=c.bk,Gr.prewarm=function(){dr().acquire(rr)},Gr.clearPrewarmedResources=function(){const y=fr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(rr),fr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Th.extend(Gr,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),Gr});var p=s;return p})})(hM);var r0=hM.exports;const fM=jy(r0),XH=v1({__proto__:null,default:fM},[r0]);var ld=Math.pow,Mi=(e,t,r)=>new Promise((o,s)=>{var d=b=>{try{c(r.next(b))}catch(w){s(w)}},p=b=>{try{c(r.throw(b))}catch(w){s(w)}},c=b=>b.done?o(b.value):Promise.resolve(b.value).then(d,p);c((r=r.apply(e,t)).next())}),No=Uint8Array,Dp=Uint16Array,JH=Int32Array,mM=new No([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gM=new No([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),YH=new No([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yM=function(e,t){for(var r=new Dp(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var s=new JH(r[30]),o=1;o<30;++o)for(var d=r[o];d<r[o+1];++d)s[d]=d-r[o]<<5|o;return{b:r,r:s}},vM=yM(mM,2),_M=vM.b,QH=vM.r;_M[28]=258,QH[258]=28;var eW=yM(gM,0),tW=eW.b,xM=new Dp(32768);for(tn=0;tn<32768;++tn)ks=(tn&43690)>>1|(tn&21845)<<1,ks=(ks&52428)>>2|(ks&13107)<<2,ks=(ks&61680)>>4|(ks&3855)<<4,xM[tn]=((ks&65280)>>8|(ks&255)<<8)>>1;var ks,tn,Lp=function(e,t,r){for(var o=e.length,s=0,d=new Dp(t);s<o;++s)e[s]&&++d[e[s]-1];var p=new Dp(t);for(s=1;s<t;++s)p[s]=p[s-1]+d[s-1]<<1;var c;{c=new Dp(1<<t);var b=15-t;for(s=0;s<o;++s)if(e[s])for(var w=s<<4|e[s],T=t-e[s],k=p[e[s]-1]++<<T,A=k|(1<<T)-1;k<=A;++k)c[xM[k]>>b]=w}return c},Mf=new No(288);for(tn=0;tn<144;++tn)Mf[tn]=8;var tn;for(tn=144;tn<256;++tn)Mf[tn]=9;var tn;for(tn=256;tn<280;++tn)Mf[tn]=7;var tn;for(tn=280;tn<288;++tn)Mf[tn]=8;var tn,bM=new No(32);for(tn=0;tn<32;++tn)bM[tn]=5;var tn,rW=Lp(Mf,9),nW=Lp(bM,5),ex=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},za=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},tx=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},iW=function(e){return(e+7)/8|0},oW=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var o=new No(r-t);return o.set(e.subarray(t,r)),o},aW=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$o=function(e,t,r){var o=new Error(t||aW[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,$o),!r)throw o;return o},dS=function(e,t,r,o){var s=e.length,d=0;if(!s||t.f&&!t.l)return r||new No(0);var p=!r||t.i!=2,c=t.i;r||(r=new No(s*3));var b=function(_t){var sr=r.length;if(_t>sr){var Qt=new No(Math.max(sr*2,_t));Qt.set(r),r=Qt}},w=t.f||0,T=t.p||0,k=t.b||0,A=t.l,$=t.d,V=t.m,N=t.n,G=s*8;do{if(!A){w=za(e,T,1);var O=za(e,T+1,3);if(T+=3,O)if(O==1)A=rW,$=nW,V=9,N=5;else if(O==2){var Z=za(e,T,31)+257,oe=za(e,T+10,15)+4,ie=Z+za(e,T+5,31)+1;T+=14;for(var W=new No(ie),Ie=new No(19),_e=0;_e<oe;++_e)Ie[YH[_e]]=za(e,T+_e*3,7);T+=oe*3;for(var Te=ex(Ie),Ae=(1<<Te)-1,$e=Lp(Ie,Te),_e=0;_e<ie;){var et=$e[za(e,T,Ae)];T+=et&15;var R=et>>4;if(R<16)W[_e++]=R;else{var Ve=0,ke=0;for(R==16?(ke=3+za(e,T,3),T+=2,Ve=W[_e-1]):R==17?(ke=3+za(e,T,7),T+=3):R==18&&(ke=11+za(e,T,127),T+=7);ke--;)W[_e++]=Ve}}var Ne=W.subarray(0,Z),Oe=W.subarray(Z);V=ex(Ne),N=ex(Oe),A=Lp(Ne,V),$=Lp(Oe,N)}else $o(1);else{var R=iW(T)+4,M=e[R-4]|e[R-3]<<8,ee=R+M;if(ee>s){c&&$o(0);break}p&&b(k+M),r.set(e.subarray(R,ee),k),t.b=k+=M,t.p=T=ee*8,t.f=w;continue}if(T>G){c&&$o(0);break}}p&&b(k+131072);for(var Fe=(1<<V)-1,nt=(1<<N)-1,lt=T;;lt=T){var Ve=A[tx(e,T)&Fe],ut=Ve>>4;if(T+=Ve&15,T>G){c&&$o(0);break}if(Ve||$o(2),ut<256)r[k++]=ut;else if(ut==256){lt=T,A=null;break}else{var Dt=ut-254;if(ut>264){var _e=ut-257,St=mM[_e];Dt=za(e,T,(1<<St)-1)+_M[_e],T+=St}var $t=$[tx(e,T)&nt],Yt=$t>>4;$t||$o(3),T+=$t&15;var Oe=tW[Yt];if(Yt>3){var St=gM[Yt];Oe+=tx(e,T)&(1<<St)-1,T+=St}if(T>G){c&&$o(0);break}p&&b(k+131072);var ct=k+Dt;if(k<Oe){var Je=d-Oe,ft=Math.min(Oe,ct);for(Je+k<0&&$o(3);k<ft;++k)r[k]=o[Je+k]}for(;k<ct;k+=4)r[k]=r[k-Oe],r[k+1]=r[k+1-Oe],r[k+2]=r[k+2-Oe],r[k+3]=r[k+3-Oe];k=ct}}t.l=A,t.p=lt,t.b=k,t.f=w,A&&(w=1,t.m=V,t.d=$,t.n=N)}while(!w);return k==r.length?r:oW(r,0,k)},sW=new No(0),lW=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&$o(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},cW=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},uW=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&$o(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&$o(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function dW(e,t){return dS(e,{i:2},t,t)}function hW(e,t){var r=lW(e);return r+8>e.length&&$o(6,"invalid gzip data"),dS(e.subarray(r,-8),{i:2},new No(cW(e)),t)}function pW(e,t){return dS(e.subarray(uW(e,t),-4),{i:2},t,t)}function o1(e,t){return e[0]==31&&e[1]==139&&e[2]==8?hW(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?dW(e,t):pW(e,t)}var fW=typeof TextDecoder<"u"&&new TextDecoder,mW=0;try{fW.decode(sW,{stream:!0}),mW=1}catch{}var wM=(e,t)=>e*ld(2,t),cp=(e,t)=>Math.floor(e/ld(2,t)),Ly=(e,t)=>wM(e.getUint16(t+1,!0),8)+e.getUint8(t),SM=(e,t)=>wM(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),gW=(e,t,r,o,s)=>{if(e!==o.getUint8(s))return e-o.getUint8(s);const d=Ly(o,s+1);if(t!==d)return t-d;const p=Ly(o,s+4);return r!==p?r-p:0},yW=(e,t,r,o)=>{const s=CM(e,t|128,r,o);return s?{z:t,x:r,y:o,offset:s[0],length:s[1],isDir:!0}:null},JT=(e,t,r,o)=>{const s=CM(e,t,r,o);return s?{z:t,x:r,y:o,offset:s[0],length:s[1],isDir:!1}:null},CM=(e,t,r,o)=>{let s=0,d=e.byteLength/17-1;for(;s<=d;){const p=d+s>>1,c=gW(t,r,o,e,p*17);if(c>0)s=p+1;else if(c<0)d=p-1;else return[SM(e,p*17+7),e.getUint32(p*17+13,!0)]}return null},vW=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,IM=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Ly(e,t*17+1),y:Ly(e,t*17+4),offset:SM(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},YT=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(IM(r,o));return _W(t)},_W=e=>{e.sort(vW);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const s=e[o];let d=s.z;s.isDir&&(d=d|128),r[o*17]=d,r[o*17+1]=s.x&255,r[o*17+2]=s.x>>8&255,r[o*17+3]=s.x>>16&255,r[o*17+4]=s.y&255,r[o*17+5]=s.y>>8&255,r[o*17+6]=s.y>>16&255,r[o*17+7]=s.offset&255,r[o*17+8]=cp(s.offset,8)&255,r[o*17+9]=cp(s.offset,16)&255,r[o*17+10]=cp(s.offset,24)&255,r[o*17+11]=cp(s.offset,32)&255,r[o*17+12]=cp(s.offset,48)&255,r[o*17+13]=s.length&255,r[o*17+14]=s.length>>8&255,r[o*17+15]=s.length>>16&255,r[o*17+16]=s.length>>24&255}return t},xW=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=IM(e,r-1);if(o.isDir){const s=o.z,d=t.z-s,p=Math.trunc(t.x/(1<<d)),c=Math.trunc(t.y/(1<<d));return{z:s,x:p,y:c}}return null};function bW(e){return Mi(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),s=r.getUint16(8,!0),d=new TextDecoder("utf-8"),p=JSON.parse(d.decode(new DataView(t.data,10,o)));let c=0;p.compression==="gzip"&&(c=2);let b=0;"minzoom"in p&&(b=+p.minzoom);let w=0;"maxzoom"in p&&(w=+p.maxzoom);let T=0,k=0,A=0,$=-180,V=-85,N=180,G=85;if(p.bounds){const R=p.bounds.split(",");$=+R[0],V=+R[1],N=+R[2],G=+R[3]}if(p.center){const R=p.center.split(",");T=+R[0],k=+R[1],A=+R[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:s*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:b,maxZoom:w,minLon:$,minLat:V,maxLon:N,maxLat:G,centerZoom:A,centerLon:T,centerLat:k,etag:t.etag}})}function wW(e,t,r,o,s,d,p){return Mi(this,null,function*(){let c=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=YT(c));const b=JT(new DataView(c),o,s,d);if(b){let k=(yield t.getBytes(b.offset,b.length,p)).data;const A=new DataView(k);return A.getUint8(0)===31&&A.getUint8(1)===139&&(k=o1(new Uint8Array(k))),{data:k}}const w=xW(new DataView(c),{z:o,x:s,y:d});if(w){const T=yW(new DataView(c),w.z,w.x,w.y);if(T){let k=yield r.getArrayBuffer(t,T.offset,T.length,e);e.specVersion===1&&(k=YT(k));const A=JT(new DataView(k),o,s,d);if(A){let V=(yield t.getBytes(A.offset,A.length,p)).data;const N=new DataView(V);return N.getUint8(0)===31&&N.getUint8(1)===139&&(V=o1(new Uint8Array(V))),{data:V}}}}})}var TM={getHeader:bW,getZxy:wW},SW=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(s=>r(void 0,s.data,s.cacheControl||"",s.expires||""),s=>r(s)).catch(s=>r(s)),{cancel:()=>o.abort()}},CW=class{constructor(e){this.tilev4=(t,r)=>Mi(this,null,function*(){if(t.type==="json"){const A=t.url.substr(10);let $=this.tiles.get(A);if($||($=new QT(A),this.tiles.set(A,$)),this.metadata)return{data:yield $.getTileJson(t.url)};const V=yield $.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:V.minZoom,maxzoom:V.maxZoom,bounds:[V.minLon,V.minLat,V.maxLon,V.maxLat]}}}const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(o);if(!s)throw new Error("Invalid PMTiles protocol URL");const d=s[1];let p=this.tiles.get(d);p||(p=new QT(d),this.tiles.set(d,p));const c=s[2],b=s[3],w=s[4],T=yield p.getHeader(),k=yield p==null?void 0:p.getZxy(+c,+b,+w,r.signal);return k?{data:new Uint8Array(k.data),cacheControl:k.cacheControl,expires:k.expires}:T.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=SW(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function Pu(e,t){return(t>>>0)*4294967296+(e>>>0)}function IW(e,t){const r=t.buf;let o=r[t.pos++],s=(o&112)>>4;if(o<128||(o=r[t.pos++],s|=(o&127)<<3,o<128)||(o=r[t.pos++],s|=(o&127)<<10,o<128)||(o=r[t.pos++],s|=(o&127)<<17,o<128)||(o=r[t.pos++],s|=(o&127)<<24,o<128)||(o=r[t.pos++],s|=(o&1)<<31,o<128))return Pu(e,s);throw new Error("Expected varint not more than 10 bytes")}function up(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,IW(o,e))}function TW(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const s=t[0];t[0]=t[1],t[1]=s}}var PW=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function kW(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>ld(2,e)-1||r>ld(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=PW[e],s=ld(2,e);let d=0,p=0,c=0;const b=[t,r];let w=s/2;for(;w>0;)d=(b[0]&w)>0?1:0,p=(b[1]&w)>0?1:0,c+=w*w*(3*d^p),TW(w,b,d,p),w=w/2;return o+c}function PM(e,t){return Mi(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return o1(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}function EW(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var AW=127;function zW(e,t){let r=0,o=e.length-1;for(;r<=o;){const s=o+r>>1,d=t-e[s].tileId;if(d>0)r=s+1;else if(d<0)o=s-1;else return e[s]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var RW=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");const o=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,o&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return Mi(this,null,function*(){let s,d;r?d=r:(s=new AbortController,d=s.signal);const p=new Headers(this.customHeaders);p.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let b=yield fetch(this.url,{signal:d,cache:c,headers:p});if(e===0&&b.status===416){const A=b.headers.get("Content-Range");if(!A||!A.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const $=+A.substr(8);b=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${$-1}`}})}let w=b.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),b.status===416||o&&w&&w!==o)throw this.mustReload=!0,new a1(`Server returned non-matching ETag ${o} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const T=b.headers.get("Content-Length");if(b.status===200&&(!T||+T>t))throw s&&s.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:w||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function Ra(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*ld(2,32)+o}function MW(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Ra(r,8),rootDirectoryLength:Ra(r,16),jsonMetadataOffset:Ra(r,24),jsonMetadataLength:Ra(r,32),leafDirectoryOffset:Ra(r,40),leafDirectoryLength:Ra(r,48),tileDataOffset:Ra(r,56),tileDataLength:Ra(r,64),numAddressedTiles:Ra(r,72),numTileEntries:Ra(r,80),numTileContents:Ra(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function kM(e){const t={buf:new Uint8Array(e),pos:0},r=up(t),o=[];let s=0;for(let d=0;d<r;d++){const p=up(t);o.push({tileId:s+p,offset:0,length:0,runLength:1}),s+=p}for(let d=0;d<r;d++)o[d].runLength=up(t);for(let d=0;d<r;d++)o[d].length=up(t);for(let d=0;d<r;d++){const p=up(t);p===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=p-1}return o}function DW(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var a1=class extends Error{};function LW(e,t){return Mi(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(DW(r.data)<3)return[yield TM.getHeader(e)];const s=r.data.slice(0,AW),d=MW(s,r.etag),p=r.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),c=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,b=kM(yield t(p,d.internalCompression));return[d,[c,b.length,b]]})}function $W(e,t,r,o,s){return Mi(this,null,function*(){const d=yield e.getBytes(r,o,void 0,s.etag),p=yield t(d.data,s.internalCompression),c=kM(p);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var OW=class{constructor(e=100,t=!0,r=PM){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Mi(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((s,d)=>{LW(e,this.decompress).then(p=>{p[1]&&this.cache.set(p[1][0],{lastUsed:this.counter++,data:Promise.resolve(p[1][2])}),s(p[0]),this.prune()}).catch(p=>{d(p)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return Mi(this,null,function*(){const s=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(s);if(d)return d.lastUsed=this.counter++,yield d.data;const p=new Promise((c,b)=>{$W(e,this.decompress,t,r,o).then(w=>{c(w),this.prune()}).catch(w=>{b(w)})});return this.cache.set(s,{lastUsed:this.counter++,data:p}),p})}getArrayBuffer(e,t,r,o){return Mi(this,null,function*(){const s=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(s);if(d)return d.lastUsed=this.counter++,yield d.data;const p=new Promise((c,b)=>{e.getBytes(t,r,void 0,o.etag).then(w=>{c(w.data),this.cache.has(s),this.prune()}).catch(w=>{b(w)})});return this.cache.set(s,{lastUsed:this.counter++,data:p}),p})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return Mi(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,s)=>{this.getHeader(e).then(d=>{o(),this.invalidations.delete(t)}).catch(d=>{s(d)})});this.invalidations.set(t,r)})}},QT=class{constructor(e,t,r){typeof e=="string"?this.source=new RW(e):this.source=e,r?this.decompress=r:this.decompress=PM,t?this.cache=t:this.cache=new OW}getHeader(){return Mi(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return Mi(this,null,function*(){const s=kW(e,t,r),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return TM.getZxy(d,this.source,this.cache,e,t,r,o);if(e<d.minZoom||e>d.maxZoom)return;let p=d.rootDirectoryOffset,c=d.rootDirectoryLength;for(let b=0;b<=3;b++){const w=yield this.cache.getDirectory(this.source,p,c,d),T=zW(w,s);if(T){if(T.runLength>0){const k=yield this.source.getBytes(d.tileDataOffset+T.offset,T.length,o,d.etag);return{data:yield this.decompress(k.data,d.tileCompression),cacheControl:k.cacheControl,expires:k.expires}}p=d.leafDirectoryOffset+T.offset,c=T.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return Mi(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(s){if(s instanceof a1)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw s}})}getMetadataAttempt(){return Mi(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return Mi(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof a1)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Mi(this,null,function*(){const t=yield this.getHeader(),r=yield this.getMetadata(),o=EW(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${o}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let eP=!1;function hS(){if(eP)return;const e=new CW;fM.addProtocol("pmtiles",e.tile),eP=!0}const EM=e=>{hS();const{mode:t="light",children:r}=e,o=uS[t];return Y.jsxs(Y.Fragment,{children:[Y.jsx(Kr,{id:"background",type:"background",paint:{"background-color":o.land}}),Y.jsxs(Fd,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[Y.jsx(Kr,{"source-layer":"water",type:"fill",paint:{"fill-color":o.water}}),r,Y.jsx(Kr,{"source-layer":"states",type:"line",paint:{"line-color":o.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),Y.jsx(Kr,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":o.countryBorder,"line-width":2,"line-opacity":1}}),Y.jsx(Kr,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":o.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},s1=e=>(hS(),Y.jsx(Fd,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:Y.jsx(Kr,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));class pS extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class Td{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return In(t,r)}}var ni=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(ni||{});const cf=new Set(Array.from({length:17},(e,t)=>t)),l1=e=>{const{game:t,visibleIcons:r=cf,enableIconAutoHide:o=!0,mode:s="light"}=e,d=t==="ats"?nP(t,e.dlcs??lf):nP(t,e.dlcs??aH),p=uS[s];return hS(),Y.jsxs(Fd,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[Y.jsx(Kr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":nx(s),"fill-outline-color":["case",["==",["get","color"],aM.Road],p.mapAreaOutline,nx(s)]}}),Y.jsx(Kr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":nx(s)}}),Y.jsx(BW,{game:t,mode:s,color:p.footprint}),Y.jsx(Kr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],d],paint:{"line-color":p.hiddenRoad,"line-width":1,"line-opacity":.7}}),Y.jsx(Kr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:iP,paint:{"line-color":VW(s),"line-gap-width":oP,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),Y.jsx(Kr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:iP,paint:{"line-color":jW(s),"line-width":oP}}),Y.jsx(Kr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":p.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),Y.jsx(Kr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":p.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),Y.jsx(Kr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":p.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),Y.jsx(Kr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":p.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),Y.jsx(Kr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Es,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":p.ferryHalo,"text-color":p.ferryLabel}}),Y.jsx(Kr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Es,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":p.trainHalo,"text-color":p.trainLabel}}),r.has(15)&&Y.jsx(Kr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],d],layout:dc(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&Y.jsx(Kr,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",tP]]]],layout:dc(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&Y.jsx(Kr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],d],layout:dc(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&Y.jsx(Kr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],d],layout:dc(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&Y.jsx(Kr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],d,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",tP]]]]],layout:dc(o,.4,.75,1.25)}),r.has(14)&&Y.jsx(Kr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],d],layout:{...Es,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":$u,"text-size":12,"icon-image":rx,"icon-allow-overlap":!o,"icon-size":.6},paint:p.primaryTextPaint}),r.has(14)&&Y.jsx(Kr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],d],layout:{...Es,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":$u,"text-size":13,"icon-image":rx,"icon-allow-overlap":!o,"icon-size":.6},paint:p.primaryTextPaint}),r.has(14)&&Y.jsx(Kr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],d],layout:{...Es,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":$u,"text-size":14,"icon-image":rx,"icon-allow-overlap":!o,"icon-size":.8},paint:p.primaryTextPaint}),t==="ets2"&&r.has(14)&&Y.jsx(Kr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Es,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":$u,"text-size":14},paint:p.primaryTextPaint}),t==="ats"&&r.has(14)&&Y.jsx(Kr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Es,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":$u,"text-size":["step",["zoom"],10,5,13]},paint:p.secondaryTextPaint}),c1(r)&&Y.jsx(Kr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],rP(r),d],layout:dc(o,.6,1.25,2.5,{vertical:2,horizontal:2})}),c1(r)&&(r.has(8)||r.has(9))&&Y.jsx(Kr,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:o?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["in",["get","poiType"],["literal",["viewpoint","landmark"]]],rP(r),d],layout:{...dc(o,.6,1.25,2.5,{vertical:2,horizontal:2}),...Es,"text-field":"{poiName}","text-allow-overlap":!o,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:p.primaryTextPaint})]})},BW=({game:e,color:t,mode:r})=>Y.jsxs(Fd,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[Y.jsx(Kr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),Y.jsx(Kr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function dc(e,t,r,o,s={vertical:10,horizontal:30}){const d=["literal",[s.vertical,s.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const rx=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],FW=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],tP=["weigh_ico","toll_ico","agri_check","border_ico"];function c1(e){return FW.some(t=>e.has(t))}function rP(e){Td.checkArgument(c1(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const s=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,p=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",s,d,p]}function nP(e,t){if(e!=="ats")return["boolean",!0];const r=t0(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const $u=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Es={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},iP={"line-cap":"round","line-join":"bevel"},oP=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],AM={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},NW={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},jW=e=>["match",["get","roadType"],...Object.entries(AM[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],VW=e=>["match",["get","roadType"],...Object.entries(AM[e]).flatMap(([t,[r,o]])=>[t,o]),"#b0b"],nx=e=>["match",["get","color"],...Object.entries(NW[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],zM="https://raw.githubusercontent.com/nautofon/ats-towns/california/all-towns.geojson",RM="/ets2-villages.geojson";var Ai=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Ai||{});const UW={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},HW=new Set(Object.keys(UW)),u1=e=>{const{game:t,enableAutoHide:r=!0,mode:o="light"}=e,s=t==="ats"?zM:RM,d=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??HW]]]:["boolean",!0],p=uS[o];return Y.jsx(Fd,{id:`${t}-scenery-towns`,type:"geojson",data:s,children:Y.jsx(Kr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:d,layout:{...Es,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":$u,"text-size":10.5},paint:p.primaryTextPaint})})},MM={version:8,sprite:"https://truckermudgeon.github.io/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]};function WW(e){return UO(e)}var Df={},DM={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(DM);var LM=DM.exports;const GW=ds(q$);var ix={exports:{}},aP;function qW(){return aP||(aP=1,function(e){function t(r,o){if(r==null)return{};var s={};for(var d in r)if({}.hasOwnProperty.call(r,d)){if(o.includes(d))continue;s[d]=r[d]}return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ix)),ix.exports}const ZW=ds(e3),KW=ds(t3),XW=ds(s3),JW=ds(aO),YW=ds(q3),QW=ds(Q3);var Nd=LM;Object.defineProperty(Df,"__esModule",{value:!0});var eG=Df.default=pG;Df.shouldForwardProp=Vg;Df.systemDefaultTheme=void 0;var ia=Nd(GW),d1=Nd(qW()),sP=sG(ZW),tG=KW;Nd(XW);Nd(JW);var rG=Nd(YW),nG=Nd(QW);const iG=["ownerState"],oG=["variants"],aG=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function $M(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return($M=function(o){return o?r:t})(e)}function sG(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=$M(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var p=s?Object.getOwnPropertyDescriptor(e,d):null;p&&(p.get||p.set)?Object.defineProperty(o,d,p):o[d]=e[d]}return o.default=e,r&&r.set(e,o),o}function lG(e){return Object.keys(e).length===0}function cG(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Vg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const uG=Df.systemDefaultTheme=(0,rG.default)(),dG=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function gg({defaultTheme:e,theme:t,themeId:r}){return lG(t)?e:t[r]||t}function hG(e){return e?(t,r)=>r[e]:null}function Ug(e,t){let{ownerState:r}=t,o=(0,d1.default)(t,iG);const s=typeof e=="function"?e((0,ia.default)({ownerState:r},o)):e;if(Array.isArray(s))return s.flatMap(d=>Ug(d,(0,ia.default)({ownerState:r},o)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:d=[]}=s;let c=(0,d1.default)(s,oG);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props((0,ia.default)({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style((0,ia.default)({ownerState:r},o,r)):b.style))}),c}return s}function pG(e={}){const{themeId:t,defaultTheme:r=uG,rootShouldForwardProp:o=Vg,slotShouldForwardProp:s=Vg}=e,d=p=>(0,nG.default)((0,ia.default)({},p,{theme:gg((0,ia.default)({},p,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(p,c={})=>{(0,sP.internal_processStyles)(p,Z=>Z.filter(oe=>!(oe!=null&&oe.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:k,overridesResolver:A=hG(dG(w))}=c,$=(0,d1.default)(c,aG),V=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,N=k||!1;let G,O=Vg;w==="Root"||w==="root"?O=o:w?O=s:cG(p)&&(O=void 0);const R=(0,sP.default)(p,(0,ia.default)({shouldForwardProp:O,label:G},$)),M=Z=>typeof Z=="function"&&Z.__emotion_real!==Z||(0,tG.isPlainObject)(Z)?oe=>Ug(Z,(0,ia.default)({},oe,{theme:gg({theme:oe.theme,defaultTheme:r,themeId:t})})):Z,ee=(Z,...oe)=>{let ie=M(Z);const W=oe?oe.map(M):[];b&&A&&W.push(Te=>{const Ae=gg((0,ia.default)({},Te,{defaultTheme:r,themeId:t}));if(!Ae.components||!Ae.components[b]||!Ae.components[b].styleOverrides)return null;const $e=Ae.components[b].styleOverrides,et={};return Object.entries($e).forEach(([Ve,ke])=>{et[Ve]=Ug(ke,(0,ia.default)({},Te,{theme:Ae}))}),A(Te,et)}),b&&!V&&W.push(Te=>{var Ae;const $e=gg((0,ia.default)({},Te,{defaultTheme:r,themeId:t})),et=$e==null||(Ae=$e.components)==null||(Ae=Ae[b])==null?void 0:Ae.variants;return Ug({variants:et},(0,ia.default)({},Te,{theme:$e}))}),N||W.push(d);const Ie=W.length-oe.length;if(Array.isArray(Z)&&Ie>0){const Te=new Array(Ie).fill("");ie=[...Z,...Te],ie.raw=[...Z.raw,...Te]}const _e=R(ie,...W);return p.muiName&&(_e.muiName=p.muiName),_e};return R.withConfig&&(ee.withConfig=R.withConfig),ee}}function fG(e,t){return K({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var ti={};const mG=ds(G$),gG=ds(vO);var OM=LM;Object.defineProperty(ti,"__esModule",{value:!0});ti.alpha=jM;ti.blend=EG;ti.colorChannel=void 0;var yG=ti.darken=mS;ti.decomposeColor=ma;ti.emphasize=VM;var vG=ti.getContrastRatio=CG;ti.getLuminance=$y;ti.hexToRgb=BM;ti.hslToRgb=NM;var _G=ti.lighten=gS;ti.private_safeAlpha=IG;ti.private_safeColorChannel=void 0;ti.private_safeDarken=TG;ti.private_safeEmphasize=kG;ti.private_safeLighten=PG;ti.recomposeColor=jd;ti.rgbToHex=SG;var lP=OM(mG),xG=OM(gG);function fS(e,t=0,r=1){return(0,xG.default)(e,t,r)}function BM(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,s)=>s<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function bG(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ma(e){if(e.type)return e;if(e.charAt(0)==="#")return ma(BM(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,lP.default)(9,e));let o=e.substring(t+1,e.length-1),s;if(r==="color"){if(o=o.split(" "),s=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,lP.default)(10,s))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:s}}const FM=e=>{const t=ma(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};ti.colorChannel=FM;const wG=(e,t)=>{try{return FM(e)}catch{return e}};ti.private_safeColorChannel=wG;function jd(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((s,d)=>d<3?parseInt(s,10):s):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function SG(e){if(e.indexOf("#")===0)return e;const{values:t}=ma(e);return`#${t.map((r,o)=>bG(o===3?Math.round(255*r):r)).join("")}`}function NM(e){e=ma(e);const{values:t}=e,r=t[0],o=t[1]/100,s=t[2]/100,d=o*Math.min(s,1-s),p=(w,T=(w+r/30)%12)=>s-d*Math.max(Math.min(T-3,9-T,1),-1);let c="rgb";const b=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return e.type==="hsla"&&(c+="a",b.push(t[3])),jd({type:c,values:b})}function $y(e){e=ma(e);let t=e.type==="hsl"||e.type==="hsla"?ma(NM(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function CG(e,t){const r=$y(e),o=$y(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function jM(e,t){return e=ma(e),t=fS(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,jd(e)}function IG(e,t,r){try{return jM(e,t)}catch{return e}}function mS(e,t){if(e=ma(e),t=fS(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return jd(e)}function TG(e,t,r){try{return mS(e,t)}catch{return e}}function gS(e,t){if(e=ma(e),t=fS(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return jd(e)}function PG(e,t,r){try{return gS(e,t)}catch{return e}}function VM(e,t=.15){return $y(e)>.5?mS(e,t):gS(e,t)}function kG(e,t,r){try{return VM(e,t)}catch{return e}}function EG(e,t,r,o=1){const s=(b,w)=>Math.round((b**(1/o)*(1-r)+w**(1/o)*r)**o),d=ma(e),p=ma(t),c=[s(d.values[0],p.values[0]),s(d.values[1],p.values[1]),s(d.values[2],p.values[2])];return jd({type:"rgb",values:c})}const uf={black:"#000",white:"#fff"},AG={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ku={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Eu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},dp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Au={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},zu={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ru={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},zG=["mode","contrastThreshold","tonalOffset"],cP={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:uf.white,default:uf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ox={text:{primary:uf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:uf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function uP(e,t,r,o){const s=o.light||o,d=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=_G(e.main,s):t==="dark"&&(e.dark=yG(e.main,d)))}function RG(e="light"){return e==="dark"?{main:Au[200],light:Au[50],dark:Au[400]}:{main:Au[700],light:Au[400],dark:Au[800]}}function MG(e="light"){return e==="dark"?{main:ku[200],light:ku[50],dark:ku[400]}:{main:ku[500],light:ku[300],dark:ku[700]}}function DG(e="light"){return e==="dark"?{main:Eu[500],light:Eu[300],dark:Eu[700]}:{main:Eu[700],light:Eu[400],dark:Eu[800]}}function LG(e="light"){return e==="dark"?{main:zu[400],light:zu[300],dark:zu[700]}:{main:zu[700],light:zu[500],dark:zu[900]}}function $G(e="light"){return e==="dark"?{main:Ru[400],light:Ru[300],dark:Ru[700]}:{main:Ru[800],light:Ru[500],dark:Ru[900]}}function OG(e="light"){return e==="dark"?{main:dp[400],light:dp[300],dark:dp[700]}:{main:"#ed6c02",light:dp[500],dark:dp[900]}}function BG(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,s=Jt(e,zG),d=e.primary||RG(t),p=e.secondary||MG(t),c=e.error||DG(t),b=e.info||LG(t),w=e.success||$G(t),T=e.warning||OG(t);function k(N){return vG(N,ox.text.primary)>=r?ox.text.primary:cP.text.primary}const A=({color:N,name:G,mainShade:O=500,lightShade:R=300,darkShade:M=700})=>{if(N=K({},N),!N.main&&N[O]&&(N.main=N[O]),!N.hasOwnProperty("main"))throw new Error($s(11,G?` (${G})`:"",O));if(typeof N.main!="string")throw new Error($s(12,G?` (${G})`:"",JSON.stringify(N.main)));return uP(N,"light",R,o),uP(N,"dark",M,o),N.contrastText||(N.contrastText=k(N.main)),N},$={dark:ox,light:cP};return pi(K({common:K({},uf),mode:t,primary:A({color:d,name:"primary"}),secondary:A({color:p,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:c,name:"error"}),warning:A({color:T,name:"warning"}),info:A({color:b,name:"info"}),success:A({color:w,name:"success"}),grey:AG,contrastThreshold:r,getContrastText:k,augmentColor:A,tonalOffset:o},$[t]),s)}const FG=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function NG(e){return Math.round(e*1e5)/1e5}const dP={textTransform:"uppercase"},hP='"Roboto", "Helvetica", "Arial", sans-serif';function jG(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=hP,fontSize:s=14,fontWeightLight:d=300,fontWeightRegular:p=400,fontWeightMedium:c=500,fontWeightBold:b=700,htmlFontSize:w=16,allVariants:T,pxToRem:k}=r,A=Jt(r,FG),$=s/14,V=k||(O=>`${O/w*$}rem`),N=(O,R,M,ee,Z)=>K({fontFamily:o,fontWeight:O,fontSize:V(R),lineHeight:M},o===hP?{letterSpacing:`${NG(ee/R)}em`}:{},Z,T),G={h1:N(d,96,1.167,-1.5),h2:N(d,60,1.2,-.5),h3:N(p,48,1.167,0),h4:N(p,34,1.235,.25),h5:N(p,24,1.334,0),h6:N(c,20,1.6,.15),subtitle1:N(p,16,1.75,.15),subtitle2:N(c,14,1.57,.1),body1:N(p,16,1.5,.15),body2:N(p,14,1.43,.15),button:N(c,14,1.75,.4,dP),caption:N(p,12,1.66,.4),overline:N(p,12,2.66,1,dP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pi(K({htmlFontSize:w,pxToRem:V,fontFamily:o,fontSize:s,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:c,fontWeightBold:b},G),A,{clone:!1})}const VG=.2,UG=.14,HG=.12;function An(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${VG})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${UG})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${HG})`].join(",")}const WG=["none",An(0,2,1,-1,0,1,1,0,0,1,3,0),An(0,3,1,-2,0,2,2,0,0,1,5,0),An(0,3,3,-2,0,3,4,0,0,1,8,0),An(0,2,4,-1,0,4,5,0,0,1,10,0),An(0,3,5,-1,0,5,8,0,0,1,14,0),An(0,3,5,-1,0,6,10,0,0,1,18,0),An(0,4,5,-2,0,7,10,1,0,2,16,1),An(0,5,5,-3,0,8,10,1,0,3,14,2),An(0,5,6,-3,0,9,12,1,0,3,16,2),An(0,6,6,-3,0,10,14,1,0,4,18,3),An(0,6,7,-4,0,11,15,1,0,4,20,3),An(0,7,8,-4,0,12,17,2,0,5,22,4),An(0,7,8,-4,0,13,19,2,0,5,24,4),An(0,7,9,-4,0,14,21,2,0,5,26,4),An(0,8,9,-5,0,15,22,2,0,6,28,5),An(0,8,10,-5,0,16,24,2,0,6,30,5),An(0,8,11,-5,0,17,26,2,0,6,32,5),An(0,9,11,-5,0,18,28,2,0,7,34,6),An(0,9,12,-6,0,19,29,2,0,7,36,6),An(0,10,13,-6,0,20,31,3,0,8,38,7),An(0,10,13,-6,0,21,33,3,0,8,40,7),An(0,10,14,-6,0,22,35,3,0,8,42,7),An(0,11,14,-7,0,23,36,3,0,9,44,8),An(0,11,15,-7,0,24,38,3,0,9,46,8)],GG=["duration","easing","delay"],qG={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ZG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function pP(e){return`${Math.round(e)}ms`}function KG(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function XG(e){const t=K({},qG,e.easing),r=K({},ZG,e.duration);return K({getAutoHeightDuration:KG,create:(s=["all"],d={})=>{const{duration:p=r.standard,easing:c=t.easeInOut,delay:b=0}=d;return Jt(d,GG),(Array.isArray(s)?s:[s]).map(w=>`${w} ${typeof p=="string"?p:pP(p)} ${c} ${typeof b=="string"?b:pP(b)}`).join(",")}},e,{easing:t,duration:r})}const JG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},YG=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function QG(e={},...t){const{mixins:r={},palette:o={},transitions:s={},typography:d={}}=e,p=Jt(e,YG);if(e.vars)throw new Error($s(18));const c=BG(o),b=mf(e);let w=pi(b,{mixins:fG(b.breakpoints,r),palette:c,shadows:WG.slice(),typography:jG(c,d),transitions:XG(s),zIndex:K({},JG)});return w=pi(w,p),w=t.reduce((T,k)=>pi(T,k),w),w.unstable_sxConfig=K({},Ad,p==null?void 0:p.unstable_sxConfig),w.unstable_sx=function(k){return zd({sx:k,theme:this})},w}const eq=QG(),tq="$$material";function rq(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const nq=e=>rq(e)&&e!=="classes",iq=eG({themeId:tq,defaultTheme:eq,rootShouldForwardProp:nq});function oq(e){return lv("MuiSvgIcon",e)}RE("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const aq=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],sq=e=>{const{color:t,fontSize:r,classes:o}=e,s={root:["root",t!=="inherit"&&`color${kt(t)}`,`fontSize${kt(r)}`]};return Fr(s,oq,o)},lq=iq("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${kt(r.color)}`],t[`fontSize${kt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,s,d,p,c,b,w,T,k,A,$,V;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(s=e.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(p=d.pxToRem)==null?void 0:p.call(d,20))||"1.25rem",medium:((c=e.typography)==null||(b=c.pxToRem)==null?void 0:b.call(c,24))||"1.5rem",large:((w=e.typography)==null||(T=w.pxToRem)==null?void 0:T.call(w,35))||"2.1875rem"}[t.fontSize],color:(k=(A=(e.vars||e).palette)==null||(A=A[t.color])==null?void 0:A.main)!=null?k:{action:($=(e.vars||e).palette)==null||($=$.action)==null?void 0:$.active,disabled:(V=(e.vars||e).palette)==null||(V=V.action)==null?void 0:V.disabled,inherit:void 0}[t.color]}}),h1=L.forwardRef(function(t,r){const o=WW({props:t,name:"MuiSvgIcon"}),{children:s,className:d,color:p="inherit",component:c="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:k,viewBox:A="0 0 24 24"}=o,$=Jt(o,aq),V=L.isValidElement(s)&&s.type==="svg",N=K({},o,{color:p,component:c,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:A,hasSvgAsChild:V}),G={};T||(G.viewBox=A);const O=sq(N);return Y.jsxs(lq,K({as:c,className:si(O.root,d),focusable:"false",color:w,"aria-hidden":k?void 0:!0,role:k?"img":void 0,ref:r},G,$,V&&s.props,{ownerState:N,children:[V?s.props.children:s,k?Y.jsx("title",{children:k}):null]}))});h1.muiName="SvgIcon";function jl(e,t){function r(o,s){return Y.jsx(h1,K({"data-testid":`${t}Icon`,ref:s},o,{children:e}))}return r.muiName=h1.muiName,L.memo(L.forwardRef(r))}const cq=jl(Y.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),uq=jl(Y.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),dq=jl(Y.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),hq=jl(Y.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),UM=jl(Y.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),pq=jl(Y.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),fq=jl(Y.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),HM=jl(Y.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),WM={[ni.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[ni.Toll]:{iconName:"toll_ico",label:"Toll gate"},[ni.Parking]:{iconName:"parking_ico",label:"Rest stop"},[ni.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[ni.Service]:{iconName:"service_ico",label:"Service"},[ni.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[ni.Port]:{iconName:"port_overlay",label:"Port"},[ni.Train]:{iconName:"train_ico",label:"Train"},[ni.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[ni.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[ni.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[ni.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[ni.Garage]:{iconName:"garage_large_ico",label:"Garage"},[ni.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[ni.CityNames]:{iconName:"city_names_ico",label:"City names"},[ni.Company]:{iconName:"companies_ico",label:"Companies"},[ni.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},fP=new Map(Object.entries(WM).map(([e,t])=>[Number(e),t.label])),mP=new Map(Object.entries(iH).map(([e,t])=>[Number(e),t]));function Oy(e,t,r){return{selectedItems:e,onSelectAllToggle:o=>t(new Set(o?r:[])),onItemToggle:(o,s)=>{t(d=>{const p=new Set(d);return s?p.add(o):p.delete(o),p})}}}const GM=e=>{const t=L.useRef(null),[r,o]=L.useState(!1),[s,d]=L.useState(0);return Ws(()=>({onAdd:()=>In(t.current),onRemove:()=>In(t.current).remove()}),{position:"bottom-left"}),Y.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[Y.jsx(Zv,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>o(!0),children:Y.jsx(fq,{})}),Y.jsx(BR,{open:r,onClose:()=>o(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:Y.jsxs(jR,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[Y.jsx(MR,{children:"Map Options"}),Y.jsx(NR,{}),Y.jsx(yT,{onChange:(p,c)=>d(Number(c)),children:Y.jsxs(p9,{tabFlex:1,sx:{borderRadius:0},children:[Y.jsx(Z_,{children:"Icons"}),Y.jsx(Z_,{children:"ATS DLC"}),Y.jsx(Z_,{children:"Advanced"})]})}),Y.jsx(RR,{sx:{overflowX:"hidden"},children:Y.jsxs(yT,{value:s,children:[Y.jsx(K_,{sx:{p:0},value:0,children:Y.jsx(gP,{items:fP,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:p=>Y.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${WM[p].iconName}.png`})})}),Y.jsx(K_,{sx:{p:0},value:1,children:Y.jsx(gP,{items:mP,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),Y.jsx(K_,{sx:{p:0},value:2,children:Y.jsx(vq,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),Y.jsx(rS,{}),s===0&&Y.jsx(mq,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===fP.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),s===1&&Y.jsx(yq,{enableSelectAll:e.atsDlcs.selectedItems.size===mP.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},mq=L.memo(e=>Y.jsxs(Af,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[Y.jsx(P9,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:Y.jsx(Sd,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),Y.jsx(Sd,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),gq=e=>Y.jsx(Pf,{size:"lg",sx:{p:0,[`& .${Cc.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var o;return Y.jsxs($c,{children:[(o=e.icon)==null?void 0:o.call(e,t),Y.jsx(Sd,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:s=>e.onItemToggle(t,s.target.checked)})]},String(t))})}),gP=L.memo(gq),yq=L.memo(e=>Y.jsx(Af,{direction:"row",justifyContent:"end",gap:1,mx:2,children:Y.jsx(Sd,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),vq=e=>Y.jsxs(Af,{mx:2,children:[Y.jsx(Va,{mb:2,level:"title-lg",children:"Experimental Features"}),Y.jsxs(x8,{children:[Y.jsx(Sd,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),Y.jsx(Va,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),qM=()=>{const e=L.useRef(null),{mode:t="light",setMode:r}=Z1();return Ws(()=>({onAdd:()=>In(e.current),onRemove:()=>In(e.current).remove()})),Y.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:Y.jsxs(R4,{children:[Y.jsx(SU,{slots:{root:Zv},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:Y.jsx(cq,{})}),Y.jsxs(mU,{placement:"left",children:[Y.jsx($c,{sticky:!0,children:Y.jsx(Va,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),Y.jsxs(q_,{onClick:()=>r("light"),selected:t==="light",children:[Y.jsx(Ng,{children:Y.jsx(dq,{})})," ","Light"]}),Y.jsxs(q_,{onClick:()=>r("dark"),selected:t==="dark",children:[Y.jsx(Ng,{children:Y.jsx(hq,{})})," ","Dark"]}),Y.jsxs(q_,{onClick:()=>r("system"),selected:t==="system",children:[Y.jsx(Ng,{children:Y.jsx(uq,{})})," ","Auto"]})]})]})})};function _q(e,t){return bq(e,t,(r,o,s,d)=>Math.sqrt(Math.pow(s-r,2)+Math.pow(d-o,2)))}function ZM(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),o=Math.max(o,d[0]),r=Math.min(r,d[1]),s=Math.max(s,d[1])):(t=Math.min(t,d.x),o=Math.max(o,d.x),r=Math.min(r,d.y),s=Math.max(s,d.y));return[t,r,o,s]}function xq(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function yP(e){return xq(e*Math.PI/180)}function bq(e,t,r){let o,s;Array.isArray(e)?(Td.checkArgument(e.length>=2),o=e[0],s=e[1]):(o=e.x,s=e.y);let d,p;return Array.isArray(t)?(Td.checkArgument(t.length>=2),d=t[0],p=t[1]):(d=t.x,p=t.y),r(o,s,d,p)}function wq(e,t,r){let o=r.get(e);return o==null&&(o=t,r.set(e,o)),o}const Sq=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[s,d]=L.useState([]);L.useEffect(()=>{const b=t==="usa"?"ats":"ets2";Promise.all([fetch(`${b}-achievements.json`).then(w=>w.json()),fetch(`${b}-achievements.geojson`).then(w=>w.json())]).then(([w,T])=>{const k=new Map;for(const $ of T.features)wq($.properties.name,[],k).push({coordinates:$.geometry.coordinates,dlcGuard:$.properties.dlcGuard});const A=new Set(T.features.map($=>$.properties.name));d([...w.data.filter($=>A.has($.id)).map($=>({...$,label:$.title,value:$.id,features:In(k.get($.id))})).sort(($,V)=>$.label.localeCompare(V.label))])},()=>console.error("could not load achievements json."))},[t]);const p=s.filter(b=>{if(t==="europe")return!0;const w=t0(e.visibleStateDlcs);return b.features.some(T=>w.has(T.dlcGuard))}),c=Kw({stringify:b=>[b.label,b.desc].join(" ")});return Y.jsx(Ey,{onChange:(b,w)=>o(w),placeholder:"Search achievements...",options:p,filterOptions:c,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r,renderOption:(b,w)=>L.createElement(zV,{...b,key:w.value},Y.jsx(Ng,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:Y.jsx("img",{loading:"lazy",width:"48",height:"48",src:w.imgUrl,alt:""})}),Y.jsxs(sU,{children:[Y.jsx(Va,{level:"title-md",children:w.label}),Y.jsx(Va,{level:"body-xs",children:w.desc})]}))},t)},Cq=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[s,d]=L.useState([]);L.useEffect(()=>{Promise.all([fetch("cities.geojson").then(b=>b.json()),fetch(zM).then(b=>b.json()),fetch(RM).then(b=>b.json())]).then(([b,w,T])=>{d(Tq(b,w,T))},()=>console.error("could not load cities/towns geojson."))},[]);const p=s.filter(b=>{const w=b.map===t;return t==="europe"?w:w&&e.visibleStates.has(b.stateCode)}),c=Kw({stringify:b=>[b.state,b.label].join(" ")});return Y.jsx(Ey,{onChange:(b,w)=>w&&o(w),placeholder:"Search cities...",options:p,filterOptions:c,groupBy:b=>b.state,blurOnSelect:!0,autoComplete:!0,renderGroup:Iq,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r},t)};function Iq(e){return Y.jsxs(L.Fragment,{children:[Y.jsx(Va,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),Y.jsx(Pf,{children:e.children}),Y.jsx(FR,{})]},e.key)}function Tq(e,t,r){const o=[],s=new Map;for(const d of e.features)if(d.properties.type==="city")o.push(d);else if(d.properties.type==="country")s.set(d.properties.code,d.properties.name);else throw new Error;for(const d of t.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"usa",countryCode:d.properties.state,name:d.properties.name}});for(const d of r.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"europe",countryCode:d.properties.state,name:d.properties.name}});return o.map(({properties:d,geometry:p})=>({map:d.map,state:In(s.get(d.countryCode)),stateCode:d.countryCode,label:d.name,value:p.coordinates})).sort((d,p)=>d.state!==p.state?d.state.localeCompare(p.state):d.label.localeCompare(p.label))}var vP=Object.prototype.toString,KM=function(t){var r=vP.call(t),o=r==="[object Arguments]";return o||(o=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&vP.call(t.callee)==="[object Function]"),o},ax,_P;function Pq(){if(_P)return ax;_P=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=KM,s=Object.prototype.propertyIsEnumerable,d=!s.call({toString:null},"toString"),p=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=function(A){var $=A.constructor;return $&&$.prototype===A},w={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},T=function(){if(typeof window>"u")return!1;for(var A in window)try{if(!w["$"+A]&&t.call(window,A)&&window[A]!==null&&typeof window[A]=="object")try{b(window[A])}catch{return!0}}catch{return!0}return!1}(),k=function(A){if(typeof window>"u"||!T)return b(A);try{return b(A)}catch{return!1}};e=function($){var V=$!==null&&typeof $=="object",N=r.call($)==="[object Function]",G=o($),O=V&&r.call($)==="[object String]",R=[];if(!V&&!N&&!G)throw new TypeError("Object.keys called on a non-object");var M=p&&N;if(O&&$.length>0&&!t.call($,0))for(var ee=0;ee<$.length;++ee)R.push(String(ee));if(G&&$.length>0)for(var Z=0;Z<$.length;++Z)R.push(String(Z));else for(var oe in $)!(M&&oe==="prototype")&&t.call($,oe)&&R.push(String(oe));if(d)for(var ie=k($),W=0;W<c.length;++W)!(ie&&c[W]==="constructor")&&t.call($,c[W])&&R.push(c[W]);return R}}return ax=e,ax}var kq=Array.prototype.slice,Eq=KM,xP=Object.keys,Hg=xP?function(t){return xP(t)}:Pq(),bP=Object.keys;Hg.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(o){return Eq(o)?bP(kq.call(o)):bP(o)})}else Object.keys=Hg;return Object.keys||Hg};var Aq=Hg,zq=Error,Rq=EvalError,Mq=RangeError,Dq=ReferenceError,Vl=SyntaxError,Lr=TypeError,Lq=URIError,XM=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),o=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var s=42;t[r]=s;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var d=Object.getOwnPropertySymbols(t);if(d.length!==1||d[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var p=Object.getOwnPropertyDescriptor(t,r);if(p.value!==s||p.enumerable!==!0)return!1}return!0},wP=typeof Symbol<"u"&&Symbol,$q=XM,n0=function(){return typeof wP!="function"||typeof Symbol!="function"||typeof wP("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:$q()},sx={__proto__:null,foo:{}},Oq=Object,JM=function(){return{__proto__:sx}.foo===sx.foo&&!(sx instanceof Oq)},Bq="Function.prototype.bind called on incompatible ",Fq=Object.prototype.toString,Nq=Math.max,jq="[object Function]",SP=function(t,r){for(var o=[],s=0;s<t.length;s+=1)o[s]=t[s];for(var d=0;d<r.length;d+=1)o[d+t.length]=r[d];return o},Vq=function(t,r){for(var o=[],s=r,d=0;s<t.length;s+=1,d+=1)o[d]=t[s];return o},Uq=function(e,t){for(var r="",o=0;o<e.length;o+=1)r+=e[o],o+1<e.length&&(r+=t);return r},Hq=function(t){var r=this;if(typeof r!="function"||Fq.apply(r)!==jq)throw new TypeError(Bq+r);for(var o=Vq(arguments,1),s,d=function(){if(this instanceof s){var T=r.apply(this,SP(o,arguments));return Object(T)===T?T:this}return r.apply(t,SP(o,arguments))},p=Nq(0,r.length-o.length),c=[],b=0;b<p;b++)c[b]="$"+b;if(s=Function("binder","return function ("+Uq(c,",")+"){ return binder.apply(this,arguments); }")(d),r.prototype){var w=function(){};w.prototype=r.prototype,s.prototype=new w,w.prototype=null}return s},Wq=Hq,yS=Function.prototype.bind||Wq,Gq=Function.prototype.call,qq=Object.prototype.hasOwnProperty,Zq=yS,Gs=Zq.call(Gq,qq),Ur,Kq=zq,Xq=Rq,Jq=Mq,Yq=Dq,Pd=Vl,cd=Lr,Qq=Lq,YM=Function,lx=function(e){try{return YM('"use strict"; return ('+e+").constructor;")()}catch{}},Ic=Object.getOwnPropertyDescriptor;if(Ic)try{Ic({},"")}catch{Ic=null}var cx=function(){throw new cd},eZ=Ic?function(){try{return arguments.callee,cx}catch{try{return Ic(arguments,"callee").get}catch{return cx}}}():cx,Mu=n0(),tZ=JM(),vi=Object.getPrototypeOf||(tZ?function(e){return e.__proto__}:null),Ou={},rZ=typeof Uint8Array>"u"||!vi?Ur:vi(Uint8Array),Tc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ur:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ur:ArrayBuffer,"%ArrayIteratorPrototype%":Mu&&vi?vi([][Symbol.iterator]()):Ur,"%AsyncFromSyncIteratorPrototype%":Ur,"%AsyncFunction%":Ou,"%AsyncGenerator%":Ou,"%AsyncGeneratorFunction%":Ou,"%AsyncIteratorPrototype%":Ou,"%Atomics%":typeof Atomics>"u"?Ur:Atomics,"%BigInt%":typeof BigInt>"u"?Ur:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ur:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ur:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ur:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Kq,"%eval%":eval,"%EvalError%":Xq,"%Float32Array%":typeof Float32Array>"u"?Ur:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ur:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ur:FinalizationRegistry,"%Function%":YM,"%GeneratorFunction%":Ou,"%Int8Array%":typeof Int8Array>"u"?Ur:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ur:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ur:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Mu&&vi?vi(vi([][Symbol.iterator]())):Ur,"%JSON%":typeof JSON=="object"?JSON:Ur,"%Map%":typeof Map>"u"?Ur:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Mu||!vi?Ur:vi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ur:Promise,"%Proxy%":typeof Proxy>"u"?Ur:Proxy,"%RangeError%":Jq,"%ReferenceError%":Yq,"%Reflect%":typeof Reflect>"u"?Ur:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ur:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Mu||!vi?Ur:vi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ur:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Mu&&vi?vi(""[Symbol.iterator]()):Ur,"%Symbol%":Mu?Symbol:Ur,"%SyntaxError%":Pd,"%ThrowTypeError%":eZ,"%TypedArray%":rZ,"%TypeError%":cd,"%Uint8Array%":typeof Uint8Array>"u"?Ur:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ur:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ur:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ur:Uint32Array,"%URIError%":Qq,"%WeakMap%":typeof WeakMap>"u"?Ur:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ur:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ur:WeakSet};if(vi)try{null.error}catch(e){var nZ=vi(vi(e));Tc["%Error.prototype%"]=nZ}var iZ=function e(t){var r;if(t==="%AsyncFunction%")r=lx("async function () {}");else if(t==="%GeneratorFunction%")r=lx("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=lx("async function* () {}");else if(t==="%AsyncGenerator%"){var o=e("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=e("%AsyncGenerator%");s&&vi&&(r=vi(s.prototype))}return Tc[t]=r,r},CP={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Lf=yS,By=Gs,oZ=Lf.call(Function.call,Array.prototype.concat),aZ=Lf.call(Function.apply,Array.prototype.splice),IP=Lf.call(Function.call,String.prototype.replace),Fy=Lf.call(Function.call,String.prototype.slice),sZ=Lf.call(Function.call,RegExp.prototype.exec),lZ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cZ=/\\(\\)?/g,uZ=function(t){var r=Fy(t,0,1),o=Fy(t,-1);if(r==="%"&&o!=="%")throw new Pd("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&r!=="%")throw new Pd("invalid intrinsic syntax, expected opening `%`");var s=[];return IP(t,lZ,function(d,p,c,b){s[s.length]=c?IP(b,cZ,"$1"):p||d}),s},dZ=function(t,r){var o=t,s;if(By(CP,o)&&(s=CP[o],o="%"+s[0]+"%"),By(Tc,o)){var d=Tc[o];if(d===Ou&&(d=iZ(o)),typeof d>"u"&&!r)throw new cd("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:o,value:d}}throw new Pd("intrinsic "+t+" does not exist!")},Si=function(t,r){if(typeof t!="string"||t.length===0)throw new cd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new cd('"allowMissing" argument must be a boolean');if(sZ(/^%?[^%]*%?$/,t)===null)throw new Pd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=uZ(t),s=o.length>0?o[0]:"",d=dZ("%"+s+"%",r),p=d.name,c=d.value,b=!1,w=d.alias;w&&(s=w[0],aZ(o,oZ([0,1],w)));for(var T=1,k=!0;T<o.length;T+=1){var A=o[T],$=Fy(A,0,1),V=Fy(A,-1);if(($==='"'||$==="'"||$==="`"||V==='"'||V==="'"||V==="`")&&$!==V)throw new Pd("property names with quotes must have matching quotes");if((A==="constructor"||!k)&&(b=!0),s+="."+A,p="%"+s+"%",By(Tc,p))c=Tc[p];else if(c!=null){if(!(A in c)){if(!r)throw new cd("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ic&&T+1>=o.length){var N=Ic(c,A);k=!!N,k&&"get"in N&&!("originalValue"in N.get)?c=N.get:c=c[A]}else k=By(c,A),c=c[A];k&&!b&&(Tc[p]=c)}}return c},hZ=Si,Wg=hZ("%Object.defineProperty%",!0)||!1;if(Wg)try{Wg({},"a",{value:1})}catch{Wg=!1}var i0=Wg,pZ=Object.getOwnPropertyDescriptor,Gg=pZ;if(Gg)try{Gg([],"length")}catch{Gg=null}var o0=Gg,TP=i0,fZ=Vl,Du=Lr,PP=o0,QM=function(t,r,o){if(!t||typeof t!="object"&&typeof t!="function")throw new Du("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Du("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Du("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Du("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Du("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Du("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,p=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,b=!!PP&&PP(t,r);if(TP)TP(t,r,{configurable:p===null&&b?b.configurable:!p,enumerable:s===null&&b?b.enumerable:!s,value:o,writable:d===null&&b?b.writable:!d});else if(c||!s&&!d&&!p)t[r]=o;else throw new fZ("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},p1=i0,eD=function(){return!!p1};eD.hasArrayLengthDefineBug=function(){if(!p1)return null;try{return p1([],"length",{value:1}).length!==1}catch{return!0}};var vS=eD,mZ=Aq,gZ=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",yZ=Object.prototype.toString,vZ=Array.prototype.concat,kP=QM,_Z=function(e){return typeof e=="function"&&yZ.call(e)==="[object Function]"},tD=vS(),xZ=function(e,t,r,o){if(t in e){if(o===!0){if(e[t]===r)return}else if(!_Z(o)||!o())return}tD?kP(e,t,r,!0):kP(e,t,r)},rD=function(e,t){var r=arguments.length>2?arguments[2]:{},o=mZ(t);gZ&&(o=vZ.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)xZ(e,o[s],t[o[s]],r[o[s]])};rD.supportsDescriptors=!!tD;var nD=rD,iD={exports:{}},bZ=Si,EP=QM,wZ=vS(),AP=o0,zP=Lr,SZ=bZ("%Math.floor%"),CZ=function(t,r){if(typeof t!="function")throw new zP("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||SZ(r)!==r)throw new zP("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],s=!0,d=!0;if("length"in t&&AP){var p=AP(t,"length");p&&!p.configurable&&(s=!1),p&&!p.writable&&(d=!1)}return(s||d||!o)&&(wZ?EP(t,"length",r,!0,!0):EP(t,"length",r)),t};(function(e){var t=yS,r=Si,o=CZ,s=Lr,d=r("%Function.prototype.apply%"),p=r("%Function.prototype.call%"),c=r("%Reflect.apply%",!0)||t.call(p,d),b=i0,w=r("%Math.max%");e.exports=function(A){if(typeof A!="function")throw new s("a function is required");var $=c(t,p,arguments);return o($,1+w(0,A.length-(arguments.length-1)),!0)};var T=function(){return c(t,d,arguments)};b?b(e.exports,"apply",{value:T}):e.exports.apply=T})(iD);var _S=iD.exports,Fc=function(t){return typeof t=="string"||typeof t=="symbol"},IZ=Lr,hp=Gs,TZ={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},Nc=function(t){if(!t||typeof t!="object")return!1;for(var r in t)if(hp(t,r)&&!TZ[r])return!1;var o=hp(t,"[[Value]]")||hp(t,"[[Writable]]"),s=hp(t,"[[Get]]")||hp(t,"[[Set]]");if(o&&s)throw new IZ("Property Descriptors may not be both accessor and data descriptors");return!0},PZ=Lr,RP=Gs,kZ=Nc,xS=function(t){if(typeof t>"u")return!1;if(!kZ(t))throw new PZ("Assertion failed: `Desc` must be a Property Descriptor");return!(!RP(t,"[[Get]]")&&!RP(t,"[[Set]]"))},ux,MP;function EZ(){return MP||(MP=1,ux=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),ux}var oD=Si,AZ=oD("%Object.preventExtensions%",!0),zZ=oD("%Object.isExtensible%",!0),DP=EZ(),RZ=AZ?function(t){return!DP(t)&&zZ(t)}:function(t){return!DP(t)},MZ=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(typeof t=="function"||typeof t=="object")return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"},DZ=MZ,Eo=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":DZ(t)},aD=function(t){return!!t},sD=Function.prototype.toString,Ju=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,f1,qg;if(typeof Ju=="function"&&typeof Object.defineProperty=="function")try{f1=Object.defineProperty({},"length",{get:function(){throw qg}}),qg={},Ju(function(){throw 42},null,f1)}catch(e){e!==qg&&(Ju=null)}else Ju=null;var LZ=/^\s*class\b/,m1=function(t){try{var r=sD.call(t);return LZ.test(r)}catch{return!1}},dx=function(t){try{return m1(t)?!1:(sD.call(t),!0)}catch{return!1}},Zg=Object.prototype.toString,$Z="[object Object]",OZ="[object Function]",BZ="[object GeneratorFunction]",FZ="[object HTMLAllCollection]",NZ="[object HTML document.all class]",jZ="[object HTMLCollection]",VZ=typeof Symbol=="function"&&!!Symbol.toStringTag,UZ=!(0 in[,]),g1=function(){return!1};if(typeof document=="object"){var HZ=document.all;Zg.call(HZ)===Zg.call(document.all)&&(g1=function(t){if((UZ||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=Zg.call(t);return(r===FZ||r===NZ||r===jZ||r===$Z)&&t("")==null}catch{}return!1})}var lD=Ju?function(t){if(g1(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Ju(t,null,f1)}catch(r){if(r!==qg)return!1}return!m1(t)&&dx(t)}:function(t){if(g1(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(VZ)return dx(t);if(m1(t))return!1;var r=Zg.call(t);return r!==OZ&&r!==BZ&&!/^\[object HTML/.test(r)?!1:dx(t)},$f=lD,Qa=Gs,yg=Lr,WZ=Eo,hx=aD,LP=$f,GZ=function(t){if(WZ(t)!=="Object")throw new yg("ToPropertyDescriptor requires an object");var r={};if(Qa(t,"enumerable")&&(r["[[Enumerable]]"]=hx(t.enumerable)),Qa(t,"configurable")&&(r["[[Configurable]]"]=hx(t.configurable)),Qa(t,"value")&&(r["[[Value]]"]=t.value),Qa(t,"writable")&&(r["[[Writable]]"]=hx(t.writable)),Qa(t,"get")){var o=t.get;if(typeof o<"u"&&!LP(o))throw new yg("getter must be a function");r["[[Get]]"]=o}if(Qa(t,"set")){var s=t.set;if(typeof s<"u"&&!LP(s))throw new yg("setter must be a function");r["[[Set]]"]=s}if((Qa(r,"[[Get]]")||Qa(r,"[[Set]]"))&&(Qa(r,"[[Value]]")||Qa(r,"[[Writable]]")))throw new yg("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r},bS=Number.isNaN||function(t){return t!==t},$P=bS,wS=function(t,r){return t===r?t===0?1/t===1/r:!0:$P(t)&&$P(r)},cD=Si,uD=_S,qZ=uD(cD("String.prototype.indexOf")),va=function(t,r){var o=cD(t,!!r);return typeof o=="function"&&qZ(t,".prototype.")>-1?uD(o):o},px,OP;function SS(){if(OP)return px;OP=1;var e=Si,t=e("%Array%"),r=!t.isArray&&va("Object.prototype.toString");return px=t.isArray||function(s){return r(s)==="[object Array]"},px}var ZZ=vS,BP=i0,dD=ZZ.hasArrayLengthDefineBug(),KZ=dD&&SS(),XZ=va,JZ=XZ("Object.prototype.propertyIsEnumerable"),YZ=function(t,r,o,s,d,p){if(!BP){if(!t(p)||!p["[[Configurable]]"]||!p["[[Writable]]"]||d in s&&JZ(s,d)!==!!p["[[Enumerable]]"])return!1;var c=p["[[Value]]"];return s[d]=c,r(s[d],c)}return dD&&d==="length"&&"[[Value]]"in p&&KZ(s)&&s.length!==p["[[Value]]"]?(s.length=p["[[Value]]"],s.length===p["[[Value]]"]):(BP(s,d,o(p)),!0)},QZ=Nc,eK=function(t,r){return QZ(r)&&typeof r=="object"&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))},tK=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r},rK=Lr,nK=Nc,iK=tK,oK=function(t){if(typeof t<"u"&&!nK(t))throw new rK("Assertion failed: `Desc` must be a Property Descriptor");return iK(t)},aK=Lr,FP=Gs,sK=Nc,hD=function(t){if(typeof t>"u")return!1;if(!sK(t))throw new aK("Assertion failed: `Desc` must be a Property Descriptor");return!(!FP(t,"[[Value]]")&&!FP(t,"[[Writable]]"))},lK=Lr,cK=xS,uK=hD,dK=Nc,hK=function(t){if(typeof t>"u")return!1;if(!dK(t))throw new lK("Assertion failed: `Desc` must be a Property Descriptor");return!cK(t)&&!uK(t)},Lu=Lr,pp=YZ,pK=eK,NP=Nc,fp=oK,hc=xS,dl=hD,fK=hK,mK=Fc,es=wS,gK=Eo,yK=function(t,r,o,s,d){var p=gK(t);if(p!=="Undefined"&&p!=="Object")throw new Lu("Assertion failed: O must be undefined or an Object");if(!mK(r))throw new Lu("Assertion failed: P must be a Property Key");if(typeof o!="boolean")throw new Lu("Assertion failed: extensible must be a Boolean");if(!NP(s))throw new Lu("Assertion failed: Desc must be a Property Descriptor");if(typeof d<"u"&&!NP(d))throw new Lu("Assertion failed: current must be a Property Descriptor, or undefined");if(typeof d>"u")return o?p==="Undefined"?!0:hc(s)?pp(dl,es,fp,t,r,s):pp(dl,es,fp,t,r,{"[[Configurable]]":!!s["[[Configurable]]"],"[[Enumerable]]":!!s["[[Enumerable]]"],"[[Value]]":s["[[Value]]"],"[[Writable]]":!!s["[[Writable]]"]}):!1;if(!pK({IsAccessorDescriptor:hc,IsDataDescriptor:dl},d))throw new Lu("`current`, when present, must be a fully populated and valid Property Descriptor");if(!d["[[Configurable]]"]){if("[[Configurable]]"in s&&s["[[Configurable]]"]||"[[Enumerable]]"in s&&!es(s["[[Enumerable]]"],d["[[Enumerable]]"])||!fK(s)&&!es(hc(s),hc(d)))return!1;if(hc(d)){if("[[Get]]"in s&&!es(s["[[Get]]"],d["[[Get]]"])||"[[Set]]"in s&&!es(s["[[Set]]"],d["[[Set]]"]))return!1}else if(!d["[[Writable]]"]&&("[[Writable]]"in s&&s["[[Writable]]"]||"[[Value]]"in s&&!es(s["[[Value]]"],d["[[Value]]"])))return!1}if(p!=="Undefined"){var c,b;return dl(d)&&hc(s)?(c=("[[Configurable]]"in s?s:d)["[[Configurable]]"],b=("[[Enumerable]]"in s?s:d)["[[Enumerable]]"],pp(dl,es,fp,t,r,{"[[Configurable]]":!!c,"[[Enumerable]]":!!b,"[[Get]]":("[[Get]]"in s?s:d)["[[Get]]"],"[[Set]]":("[[Set]]"in s?s:d)["[[Set]]"]})):hc(d)&&dl(s)?(c=("[[Configurable]]"in s?s:d)["[[Configurable]]"],b=("[[Enumerable]]"in s?s:d)["[[Enumerable]]"],pp(dl,es,fp,t,r,{"[[Configurable]]":!!c,"[[Enumerable]]":!!b,"[[Value]]":("[[Value]]"in s?s:d)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in s?s:d)["[[Writable]]"]})):pp(dl,es,fp,t,r,s)}return!0},jP=o0,VP=Vl,fx=Lr,vK=Nc,_K=xS,xK=RZ,bK=Fc,wK=GZ,SK=wS,CK=Eo,IK=yK,TK=function(t,r,o){if(CK(t)!=="Object")throw new fx("Assertion failed: O must be an Object");if(!bK(r))throw new fx("Assertion failed: P must be a Property Key");if(!vK(o))throw new fx("Assertion failed: Desc must be a Property Descriptor");if(!jP){if(_K(o))throw new VP("This environment does not support accessor property descriptors.");var s=!(r in t)&&o["[[Writable]]"]&&o["[[Enumerable]]"]&&o["[[Configurable]]"]&&"[[Value]]"in o,d=r in t&&(!("[[Configurable]]"in o)||o["[[Configurable]]"])&&(!("[[Enumerable]]"in o)||o["[[Enumerable]]"])&&(!("[[Writable]]"in o)||o["[[Writable]]"])&&"[[Value]]"in o;if(s||d)return t[r]=o["[[Value]]"],SK(t[r],o["[[Value]]"]);throw new VP("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var p=jP(t,r),c=p&&wK(p),b=xK(t);return IK(t,r,b,o,c)},UP=Lr,PK=Fc,kK=TK,EK=Eo,AK=function(t,r,o){if(EK(t)!=="Object")throw new UP("Assertion failed: Type(O) is not Object");if(!PK(r))throw new UP("Assertion failed: IsPropertyKey(P) is not true");var s={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":o,"[[Writable]]":!0};return kK(t,r,s)},mx=Lr,zK=AK,RK=Fc,MK=Eo,DK=function(t,r,o){if(MK(t)!=="Object")throw new mx("Assertion failed: Type(O) is not Object");if(!RK(r))throw new mx("Assertion failed: IsPropertyKey(P) is not true");var s=zK(t,r,o);if(!s)throw new mx("unable to create data property")},gx,HP;function CS(){return HP||(HP=1,gx=SS()),gx}var IS=function(t,r){for(var o=0;o<t.length;o+=1)r(t[o],o,t)};const LK={},$K=Object.freeze(Object.defineProperty({__proto__:null,default:LK},Symbol.toStringTag,{value:"Module"})),OK=ds($K);var yx,WP;function Of(){if(WP)return yx;WP=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&typeof t.get=="function"?t.get:null,o=e&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,d=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=s&&d&&typeof d.get=="function"?d.get:null,c=s&&Set.prototype.forEach,b=typeof WeakMap=="function"&&WeakMap.prototype,w=b?WeakMap.prototype.has:null,T=typeof WeakSet=="function"&&WeakSet.prototype,k=T?WeakSet.prototype.has:null,A=typeof WeakRef=="function"&&WeakRef.prototype,$=A?WeakRef.prototype.deref:null,V=Boolean.prototype.valueOf,N=Object.prototype.toString,G=Function.prototype.toString,O=String.prototype.match,R=String.prototype.slice,M=String.prototype.replace,ee=String.prototype.toUpperCase,Z=String.prototype.toLowerCase,oe=RegExp.prototype.test,ie=Array.prototype.concat,W=Array.prototype.join,Ie=Array.prototype.slice,_e=Math.floor,Te=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ae=Object.getOwnPropertySymbols,$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,et=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ve=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===et||!0)?Symbol.toStringTag:null,ke=Object.prototype.propertyIsEnumerable,Ne=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ce){return Ce.__proto__}:null);function Oe(Ce,He){if(Ce===1/0||Ce===-1/0||Ce!==Ce||Ce&&Ce>-1e3&&Ce<1e3||oe.call(/e/,He))return He;var Ye=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ce=="number"){var It=Ce<0?-_e(-Ce):_e(Ce);if(It!==Ce){var gt=String(It),Et=R.call(He,gt.length+1);return M.call(gt,Ye,"$&_")+"."+M.call(M.call(Et,/([0-9]{3})/g,"$&_"),/_$/,"")}}return M.call(He,Ye,"$&_")}var Fe=OK,nt=Fe.custom,lt=Pr(nt)?nt:null,ut={__proto__:null,double:'"',single:"'"},Dt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};yx=function Ce(He,Ye,It,gt){var Et=Ye||{};if(Ct(Et,"quoteStyle")&&!Ct(ut,Et.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ct(Et,"maxStringLength")&&(typeof Et.maxStringLength=="number"?Et.maxStringLength<0&&Et.maxStringLength!==1/0:Et.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var pr=Ct(Et,"customInspect")?Et.customInspect:!0;if(typeof pr!="boolean"&&pr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ct(Et,"indent")&&Et.indent!==null&&Et.indent!=="	"&&!(parseInt(Et.indent,10)===Et.indent&&Et.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ct(Et,"numericSeparator")&&typeof Et.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Lt=Et.numericSeparator;if(typeof He>"u")return"undefined";if(He===null)return"null";if(typeof He=="boolean")return He?"true":"false";if(typeof He=="string")return Rr(He,Et);if(typeof He=="number"){if(He===0)return 1/0/He>0?"0":"-0";var mr=String(He);return Lt?Oe(He,mr):mr}if(typeof He=="bigint"){var ce=String(He)+"n";return Lt?Oe(He,ce):ce}var H=typeof Et.depth>"u"?5:Et.depth;if(typeof It>"u"&&(It=0),It>=H&&H>0&&typeof He=="object")return Yt(He)?"[Array]":"[Object]";var q=Be(Et,It);if(typeof gt>"u")gt=[];else if(Cr(gt,He)>=0)return"[Circular]";function te(Xe,rt,jt){if(rt&&(gt=Ie.call(gt),gt.push(rt)),jt){var zt={depth:Et.depth};return Ct(Et,"quoteStyle")&&(zt.quoteStyle=Et.quoteStyle),Ce(Xe,zt,It+1,gt)}return Ce(Xe,Et,It+1,gt)}if(typeof He=="function"&&!Je(He)){var he=Ot(He),fe=bt(He,te);return"[Function"+(he?": "+he:" (anonymous)")+"]"+(fe.length>0?" { "+W.call(fe,", ")+" }":"")}if(Pr(He)){var Re=et?M.call(String(He),/^(Symbol\(.*\))_[^)]*$/,"$1"):$e.call(He);return typeof He=="object"&&!et?dr(Re):Re}if(Or(He)){for(var be="<"+Z.call(String(He.nodeName)),ge=He.attributes||[],Ee=0;Ee<ge.length;Ee++)be+=" "+ge[Ee].name+"="+St($t(ge[Ee].value),"double",Et);return be+=">",He.childNodes&&He.childNodes.length&&(be+="..."),be+="</"+Z.call(String(He.nodeName))+">",be}if(Yt(He)){if(He.length===0)return"[]";var tt=bt(He,te);return q&&!Ir(tt)?"["+xt(tt,q)+"]":"[ "+W.call(tt,", ")+" ]"}if(ft(He)){var ne=bt(He,te);return!("cause"in Error.prototype)&&"cause"in He&&!ke.call(He,"cause")?"{ ["+String(He)+"] "+W.call(ie.call("[cause]: "+te(He.cause),ne),", ")+" }":ne.length===0?"["+String(He)+"]":"{ ["+String(He)+"] "+W.call(ne,", ")+" }"}if(typeof He=="object"&&pr){if(lt&&typeof He[lt]=="function"&&Fe)return Fe(He,{depth:H-It});if(pr!=="symbol"&&typeof He.inspect=="function")return He.inspect()}if(We(He)){var ae=[];return o&&o.call(He,function(Xe,rt){ae.push(te(rt,He,!0)+" => "+te(Xe,He))}),cr("Map",r.call(He),ae,q)}if(Kt(He)){var Pe=[];return c&&c.call(He,function(Xe){Pe.push(te(Xe,He))}),cr("Set",p.call(He),Pe,q)}if(br(He))return Gt("WeakMap");if(rr(He))return Gt("WeakSet");if(zr(He))return Gt("WeakRef");if(sr(He))return dr(te(Number(He)));if(hr(He))return dr(te(Te.call(He)));if(Qt(He))return dr(V.call(He));if(_t(He))return dr(te(String(He)));if(typeof window<"u"&&He===window)return"{ [object Window] }";if(typeof globalThis<"u"&&He===globalThis||typeof Xx<"u"&&He===Xx)return"{ [object globalThis] }";if(!ct(He)&&!Je(He)){var Ue=bt(He,te),Qe=Ne?Ne(He)===Object.prototype:He instanceof Object||He.constructor===Object,it=He instanceof Object?"":"null prototype",Se=!Qe&&Ve&&Object(He)===He&&Ve in He?R.call(ur(He),8,-1):it?"Object":"",xe=Qe||typeof He.constructor!="function"?"":He.constructor.name?He.constructor.name+" ":"",Ke=xe+(Se||it?"["+W.call(ie.call([],Se||[],it||[]),": ")+"] ":"");return Ue.length===0?Ke+"{}":q?Ke+"{"+xt(Ue,q)+"}":Ke+"{ "+W.call(Ue,", ")+" }"}return String(He)};function St(Ce,He,Ye){var It=Ye.quoteStyle||He,gt=ut[It];return gt+Ce+gt}function $t(Ce){return M.call(String(Ce),/"/g,"&quot;")}function Yt(Ce){return ur(Ce)==="[object Array]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function ct(Ce){return ur(Ce)==="[object Date]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function Je(Ce){return ur(Ce)==="[object RegExp]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function ft(Ce){return ur(Ce)==="[object Error]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function _t(Ce){return ur(Ce)==="[object String]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function sr(Ce){return ur(Ce)==="[object Number]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function Qt(Ce){return ur(Ce)==="[object Boolean]"&&(!Ve||!(typeof Ce=="object"&&Ve in Ce))}function Pr(Ce){if(et)return Ce&&typeof Ce=="object"&&Ce instanceof Symbol;if(typeof Ce=="symbol")return!0;if(!Ce||typeof Ce!="object"||!$e)return!1;try{return $e.call(Ce),!0}catch{}return!1}function hr(Ce){if(!Ce||typeof Ce!="object"||!Te)return!1;try{return Te.call(Ce),!0}catch{}return!1}var Ht=Object.prototype.hasOwnProperty||function(Ce){return Ce in this};function Ct(Ce,He){return Ht.call(Ce,He)}function ur(Ce){return N.call(Ce)}function Ot(Ce){if(Ce.name)return Ce.name;var He=O.call(G.call(Ce),/^function\s*([\w$]+)/);return He?He[1]:null}function Cr(Ce,He){if(Ce.indexOf)return Ce.indexOf(He);for(var Ye=0,It=Ce.length;Ye<It;Ye++)if(Ce[Ye]===He)return Ye;return-1}function We(Ce){if(!r||!Ce||typeof Ce!="object")return!1;try{r.call(Ce);try{p.call(Ce)}catch{return!0}return Ce instanceof Map}catch{}return!1}function br(Ce){if(!w||!Ce||typeof Ce!="object")return!1;try{w.call(Ce,w);try{k.call(Ce,k)}catch{return!0}return Ce instanceof WeakMap}catch{}return!1}function zr(Ce){if(!$||!Ce||typeof Ce!="object")return!1;try{return $.call(Ce),!0}catch{}return!1}function Kt(Ce){if(!p||!Ce||typeof Ce!="object")return!1;try{p.call(Ce);try{r.call(Ce)}catch{return!0}return Ce instanceof Set}catch{}return!1}function rr(Ce){if(!k||!Ce||typeof Ce!="object")return!1;try{k.call(Ce,k);try{w.call(Ce,w)}catch{return!0}return Ce instanceof WeakSet}catch{}return!1}function Or(Ce){return!Ce||typeof Ce!="object"?!1:typeof HTMLElement<"u"&&Ce instanceof HTMLElement?!0:typeof Ce.nodeName=="string"&&typeof Ce.getAttribute=="function"}function Rr(Ce,He){if(Ce.length>He.maxStringLength){var Ye=Ce.length-He.maxStringLength,It="... "+Ye+" more character"+(Ye>1?"s":"");return Rr(R.call(Ce,0,He.maxStringLength),He)+It}var gt=Dt[He.quoteStyle||"single"];gt.lastIndex=0;var Et=M.call(M.call(Ce,gt,"\\$1"),/[\x00-\x1f]/g,fr);return St(Et,"single",He)}function fr(Ce){var He=Ce.charCodeAt(0),Ye={8:"b",9:"t",10:"n",12:"f",13:"r"}[He];return Ye?"\\"+Ye:"\\x"+(He<16?"0":"")+ee.call(He.toString(16))}function dr(Ce){return"Object("+Ce+")"}function Gt(Ce){return Ce+" { ? }"}function cr(Ce,He,Ye,It){var gt=It?xt(Ye,It):W.call(Ye,", ");return Ce+" ("+He+") {"+gt+"}"}function Ir(Ce){for(var He=0;He<Ce.length;He++)if(Cr(Ce[He],`
`)>=0)return!1;return!0}function Be(Ce,He){var Ye;if(Ce.indent==="	")Ye="	";else if(typeof Ce.indent=="number"&&Ce.indent>0)Ye=W.call(Array(Ce.indent+1)," ");else return null;return{base:Ye,prev:W.call(Array(He+1),Ye)}}function xt(Ce,He){if(Ce.length===0)return"";var Ye=`
`+He.prev+He.base;return Ye+W.call(Ce,","+Ye)+`
`+He.prev}function bt(Ce,He){var Ye=Yt(Ce),It=[];if(Ye){It.length=Ce.length;for(var gt=0;gt<Ce.length;gt++)It[gt]=Ct(Ce,gt)?He(Ce[gt],Ce):""}var Et=typeof Ae=="function"?Ae(Ce):[],pr;if(et){pr={};for(var Lt=0;Lt<Et.length;Lt++)pr["$"+Et[Lt]]=Et[Lt]}for(var mr in Ce)Ct(Ce,mr)&&(Ye&&String(Number(mr))===mr&&mr<Ce.length||et&&pr["$"+mr]instanceof Symbol||(oe.call(/[^\w$]/,mr)?It.push(He(mr,Ce)+": "+He(Ce[mr],Ce)):It.push(mr+": "+He(Ce[mr],Ce))));if(typeof Ae=="function")for(var ce=0;ce<Et.length;ce++)ke.call(Ce,Et[ce])&&It.push("["+He(Et[ce])+"]: "+He(Ce[Et[ce]],Ce));return It}return yx}var vx,GP;function BK(){if(GP)return vx;GP=1;var e=Si,t=va,r=Of(),o=Lr,s=e("%WeakMap%",!0),d=e("%Map%",!0),p=t("WeakMap.prototype.get",!0),c=t("WeakMap.prototype.set",!0),b=t("WeakMap.prototype.has",!0),w=t("Map.prototype.get",!0),T=t("Map.prototype.set",!0),k=t("Map.prototype.has",!0),A=function(G,O){for(var R=G,M;(M=R.next)!==null;R=M)if(M.key===O)return R.next=M.next,M.next=G.next,G.next=M,M},$=function(G,O){var R=A(G,O);return R&&R.value},V=function(G,O,R){var M=A(G,O);M?M.value=R:G.next={key:O,next:G.next,value:R}},N=function(G,O){return!!A(G,O)};return vx=function(){var O,R,M,ee={assert:function(Z){if(!ee.has(Z))throw new o("Side channel does not contain "+r(Z))},get:function(Z){if(s&&Z&&(typeof Z=="object"||typeof Z=="function")){if(O)return p(O,Z)}else if(d){if(R)return w(R,Z)}else if(M)return $(M,Z)},has:function(Z){if(s&&Z&&(typeof Z=="object"||typeof Z=="function")){if(O)return b(O,Z)}else if(d){if(R)return k(R,Z)}else if(M)return N(M,Z);return!1},set:function(Z,oe){s&&Z&&(typeof Z=="object"||typeof Z=="function")?(O||(O=new s),c(O,Z,oe)):d?(R||(R=new d),T(R,Z,oe)):(M||(M={key:{},next:null}),V(M,Z,oe))}};return ee},vx}var _x,qP;function TS(){if(qP)return _x;qP=1;var e=Gs,t=BK()(),r=Lr,o={assert:function(s,d){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");if(t.assert(s),!o.has(s,d))throw new r("`"+d+"` is not present on `O`")},get:function(s,d){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");var p=t.get(s);return p&&p["$"+d]},has:function(s,d){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");var p=t.get(s);return!!p&&e(p,"$"+d)},set:function(s,d,p){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");var c=t.get(s);c||(c={},t.set(s,c)),c["$"+d]=p}};return Object.freeze&&Object.freeze(o),_x=o,_x}var FK=Si,ZP=FK("%Object.create%",!0),KP=Lr,NK=Vl,jK=CS(),VK=Eo,UK=IS,HK=TS(),WK=JM(),pD=function(t){if(t!==null&&VK(t)!=="Object")throw new KP("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!jK(r))throw new KP("Assertion failed: `additionalInternalSlotsList` must be an Array");var o;if(ZP)o=ZP(t);else if(WK)o={__proto__:t};else{if(t===null)throw new NK("native Object.create support is required to create null objects");var s=function(){};s.prototype=t,o=new s}return r.length>0&&UK(r,function(d){HK.set(o,d,void 0)}),o},xx,XP;function GK(){return XP||(XP=1,xx=function(t,r){for(var o=0;o<t.length;o+=1)if(!r(t[o],o,t))return!1;return!0}),xx}var JP=Lr,qK=va,YP=qK("Array.prototype.push"),ZK=wS,fD=SS(),KK=GK(),XK=IS,QP=Gs,JK=function(e){return QP(e,"[[Key]]")&&QP(e,"[[Elements]]")&&fD(e["[[Elements]]"])},YK=function(t,r,o){if(!fD(t)||t.length>0&&!KK(t,JK))throw new JP("Assertion failed: `groups` must be a List of Records with [[Key]] and [[Elements]]");var s=0;if(XK(t,function(p){if(ZK(p["[[Key]]"],r)){if(s+=1,s>1)throw new JP("Assertion failed: Exactly one element of groups meets this criterion");YP(p["[[Elements]]"],o)}}),s===0){var d={"[[Key]]":r,"[[Elements]]":[o]};YP(t,d)}},QK=Si,eX=va,tX=Lr,rX=CS(),nX=QK("%Reflect.apply%",!0)||eX("Function.prototype.apply"),Bf=function(t,r){var o=arguments.length>2?arguments[2]:[];if(!rX(o))throw new tX("Assertion failed: optional `argumentsList`, if provided, must be a List");return nX(t,r,o)},bx,ek;function mD(){return ek||(ek=1,bx=function(t){return typeof t=="number"&&t>=55296&&t<=56319}),bx}var wx,tk;function gD(){return tk||(tk=1,wx=function(t){return typeof t=="number"&&t>=56320&&t<=57343}),wx}var Sx,rk;function iX(){if(rk)return Sx;rk=1;var e=Si,t=Lr,r=e("%String.fromCharCode%"),o=mD(),s=gD();return Sx=function(p,c){if(!o(p)||!s(c))throw new t("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return r(p)+r(c)},Sx}var Cx,nk;function oX(){if(nk)return Cx;nk=1;var e=Lr,t=va,r=mD(),o=gD(),s=iX(),d=t("String.prototype.charAt"),p=t("String.prototype.charCodeAt");return Cx=function(b,w){if(typeof b!="string")throw new e("Assertion failed: `string` must be a String");var T=b.length;if(w<0||w>=T)throw new e("Assertion failed: `position` must be >= 0, and < the length of `string`");var k=p(b,w),A=d(b,w),$=r(k),V=o(k);if(!$&&!V)return{"[[CodePoint]]":A,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(V||w+1===T)return{"[[CodePoint]]":A,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var N=p(b,w+1);return o(N)?{"[[CodePoint]]":s(k,N),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":A,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}},Cx}var Ix,ik;function aX(){if(ik)return Ix;ik=1;var e=bS;return Ix=function(t){return(typeof t=="number"||typeof t=="bigint")&&!e(t)&&t!==1/0&&t!==-1/0},Ix}var Tx,ok;function sX(){if(ok)return Tx;ok=1;var e=Si,t=e("%Math.abs%"),r=e("%Math.floor%"),o=bS,s=aX();return Tx=function(p){if(typeof p!="number"||o(p)||!s(p))return!1;var c=t(p);return r(c)===c},Tx}var yD=Number.MAX_SAFE_INTEGER||9007199254740991,Px,ak;function lX(){if(ak)return Px;ak=1;var e=oX(),t=sX(),r=yD,o=Lr;return Px=function(d,p,c){if(typeof d!="string")throw new o("Assertion failed: `S` must be a String");if(!t(p)||p<0||p>r)throw new o("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof c!="boolean")throw new o("Assertion failed: `unicode` must be a Boolean");if(!c)return p+1;var b=d.length;if(p+1>=b)return p+1;var w=e(d,p);return p+w["[[CodeUnitCount]]"]},Px}var kx,sk;function vD(){if(sk)return kx;sk=1;var e=Lr;return kx=function(r,o){if(typeof o!="boolean")throw new e("Assertion failed: Type(done) is not Boolean");return{value:r,done:o}},kx}var lk=Lr,cX=Of(),uX=Fc,dX=Eo,a0=function(t,r){if(dX(t)!=="Object")throw new lk("Assertion failed: Type(O) is not Object");if(!uX(r))throw new lk("Assertion failed: IsPropertyKey(P) is not true, got "+cX(r));return t[r]},hX=Lr,pX=a0,fX=aD,mX=Eo,_D=function(t){if(mX(t)!=="Object")throw new hX("Assertion failed: Type(iterResult) is not Object");return fX(pX(t,"done"))},gX=Lr,yX=a0,vX=Eo,xD=function(t){if(vX(t)!=="Object")throw new gX("Assertion failed: Type(iterResult) is not Object");return yX(t,"value")},Ex,ck;function _X(){if(ck)return Ex;ck=1;var e=Si,t=_S,r=Vl,o=e("%Promise.resolve%",!0),s=o&&t(o);return Ex=function(p,c){if(!s)throw new r("This environment does not support Promises.");return s(p,c)},Ex}var Ax,uk;function xX(){if(uk)return Ax;uk=1;var e=Si,t=Vl,r=Lr,o=e("%Promise%",!0),s=va,d=vD(),p=_D,c=xD,b=_X(),w=Eo,T=s("Promise.prototype.then",!0);return Ax=function(A){if(w(A)!=="Object")throw new r("Assertion failed: Type(O) is not Object");if(arguments.length>1)throw new t("although AsyncFromSyncIteratorContinuation should take a second argument, it is not used in this implementation");if(!o)throw new t("This environment does not support Promises.");return new o(function($){var V=p(A),N=c(A),G=b(o,N),O=function(R){return d(R,V)};$(T(G,O))})},Ax}var bX=Lr,wX=Of(),SX=Fc,CX=function(t,r){if(!SX(r))throw new bX("Assertion failed: IsPropertyKey(P) is not true, got "+wX(r));return t[r]},dk=Lr,IX=CX,TX=$f,PX=Fc,hk=Of(),PS=function(t,r){if(!PX(r))throw new dk("Assertion failed: IsPropertyKey(P) is not true");var o=IX(t,r);if(o!=null){if(!TX(o))throw new dk(hk(r)+" is not a function: "+hk(o));return o}},zx=Gs,s0=function(t){return!!t&&typeof t=="object"&&zx(t,"[[Iterator]]")&&zx(t,"[[NextMethod]]")&&zx(t,"[[Done]]")&&typeof t["[[Done]]"]=="boolean"},pk=Lr,fk=Bf,kX=Eo,EX=s0,bD=function(t){if(!EX(t))throw new pk("Assertion failed: `iteratorRecord` must be an Iterator Record");var r;if(arguments.length<2?r=fk(t["[[NextMethod]]"],t["[[Iterator]]"]):r=fk(t["[[NextMethod]]"],t["[[Iterator]]"],[arguments[1]]),kX(r)!=="Object")throw new pk("iterator next must return an object");return r},Rx,mk;function AX(){if(mk)return Rx;mk=1;var e=Si,t=Vl,r=Lr,o=e("%Promise%",!0),s=xX(),d=Bf,p=vD(),c=a0,b=PS,w=bD,T=pD,k=Eo,A=TS(),$=s0,V=e("%AsyncFromSyncIteratorPrototype%",!0)||{next:function(G){if(!o)throw new t("This environment does not support Promises.");var O=this;A.assert(O,"[[SyncIteratorRecord]]");var R=arguments.length;return new o(function(M){var ee=A.get(O,"[[SyncIteratorRecord]]"),Z;R>0?Z=w(ee,G):Z=w(ee),M(s(Z))})},return:function(){if(!o)throw new t("This environment does not support Promises.");var N=this;A.assert(N,"[[SyncIteratorRecord]]");var G=arguments.length>0,O=G?arguments[0]:void 0;return new o(function(R,M){var ee=A.get(N,"[[SyncIteratorRecord]]")["[[Iterator]]"],Z=b(ee,"return");if(typeof Z>"u"){var oe=p(O,!0);d(R,void 0,[oe]);return}var ie;if(G?ie=d(Z,ee,[O]):ie=d(Z,ee),k(ie)!=="Object"){d(M,void 0,[new r("Iterator `return` method returned a non-object value.")]);return}R(s(ie))})},throw:function(){if(!o)throw new t("This environment does not support Promises.");var N=this;A.assert(N,"[[SyncIteratorRecord]]");var G=arguments.length>0,O=G?arguments[0]:void 0;return new o(function(R,M){var ee=A.get(N,"[[SyncIteratorRecord]]")["[[Iterator]]"],Z=b(ee,"throw");if(typeof Z>"u"){d(M,void 0,[O]);return}var oe;if(G?oe=d(Z,ee,[O]):oe=d(Z,ee),k(oe)!=="Object"){d(M,void 0,[new r("Iterator `throw` method returned a non-object value.")]);return}R(s(oe))})}};return Rx=function(G){if(!$(G))throw new r("Assertion failed: `syncIteratorRecord` must be an Iterator Record");var O=T(V);A.set(O,"[[SyncIteratorRecord]]",G);var R=c(O,"next");return{"[[Iterator]]":O,"[[NextMethod]]":R,"[[Done]]":!1}},Rx}var Mx,gk;function zX(){if(gk)return Mx;gk=1;var e=Lr,t=Bf,r=a0,o=$f,s=Eo;return Mx=function(p,c){if(!o(c))throw new e("method must be a function");var b=t(c,p);if(s(b)!=="Object")throw new e("iterator must return an object");var w=r(b,"next");return{"[[Iterator]]":b,"[[NextMethod]]":w,"[[Done]]":!1}},Mx}var Dx,yk;function kS(){if(yk)return Dx;yk=1;var e=XM;return Dx=function(){return e()&&!!Symbol.toStringTag},Dx}var Lx,vk;function RX(){if(vk)return Lx;vk=1;var e=va,t=e("String.prototype.valueOf"),r=function(c){try{return t(c),!0}catch{return!1}},o=e("Object.prototype.toString"),s="[object String]",d=kS()();return Lx=function(c){return typeof c=="string"?!0:!c||typeof c!="object"?!1:d?r(c):o(c)===s},Lx}var $x,_k;function MX(){if(_k)return $x;_k=1;var e=n0(),t=Si,r=va,o=RX(),s=t("%Symbol.iterator%",!0),d=r("String.prototype.slice"),p=t("%String%");return $x=function(b,w){var T;return e?T=b.GetMethod(w,s):b.IsArray(w)?T=function(){var k=-1,A=this;return{next:function(){return k+=1,{done:k>=A.length,value:A[k]}}}}:o(w)&&(T=function(){var k=0;return{next:function(){var A=b.AdvanceStringIndex(p(w),k,!0),$=d(w,k,A);return k=A,{done:A>w.length,value:$}}}}),T},$x}var DX=Si,Ox=Lr,xk=DX("%Symbol.asyncIterator%",!0),LX=Of(),$X=n0(),OX=lX(),BX=AX(),bk=zX(),wk=PS,FX=CS(),NX=MX(),jX=function(t,r){if(r!=="SYNC"&&r!=="ASYNC")throw new Ox("Assertion failed: `kind` must be one of 'sync' or 'async', got "+LX(r));var o;if(r==="ASYNC"&&$X&&xk&&(o=wk(t,xk)),typeof o>"u"){var s=NX({AdvanceStringIndex:OX,GetMethod:wk,IsArray:FX},t);if(r==="ASYNC"){if(typeof s>"u")throw new Ox("iterator method is `undefined`");var d=bk(t,s);return BX(d)}o=s}if(typeof o>"u")throw new Ox("iterator method is `undefined`");return bk(t,o)},wD=Vl,Dl=TS(),Ff=function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=="normal"&&t!=="break"&&t!=="continue"&&t!=="return"&&t!=="throw")throw new wD('Assertion failed: `type` must be one of "normal", "break", "continue", "return", or "throw"');Dl.set(this,"[[Type]]",t),Dl.set(this,"[[Value]]",r)};Ff.prototype.type=function(){return Dl.get(this,"[[Type]]")};Ff.prototype.value=function(){return Dl.get(this,"[[Value]]")};Ff.prototype["?"]=function(){var t=Dl.get(this,"[[Type]]"),r=Dl.get(this,"[[Value]]");if(t==="throw")throw r;return r};Ff.prototype["!"]=function(){var t=Dl.get(this,"[[Type]]");if(t!=="normal")throw new wD('Assertion failed: Completion Record is not of type "normal"');return Dl.get(this,"[[Value]]")};var SD=Ff,vg=Lr,VX=Bf,Sk=SD,UX=PS,HX=$f,Ck=Eo,WX=s0,GX=function(t,r){if(!WX(t))throw new vg("Assertion failed: `iteratorRecord` must be an Iterator Record");if(Ck(t["[[Iterator]]"])!=="Object")throw new vg("Assertion failed: iteratorRecord.[[Iterator]] must be an Object");if(!HX(r)&&!(r instanceof Sk))throw new vg("Assertion failed: completion is not a thunk representing a Completion Record, nor a Completion Record instance");var o=r instanceof Sk?function(){return r["?"]()}:r,s=t["[[Iterator]]"],d;try{d=UX(s,"return")}catch(b){throw o(),o=null,b}if(typeof d>"u")return o();var p;try{p=VX(d,s,[])}catch(b){throw o(),o=null,b}var c=o();if(o=null,Ck(p)!=="Object")throw new vg("iterator .return must return an object");return c},qX=Lr,ZX=_D,KX=bD,XX=s0,JX=function(t){if(!XX(t))throw new qX("Assertion failed: `iteratorRecord` must be an Iterator Record");var r=KX(t),o=ZX(r);return o===!0?!1:r},YX=Lr,QX=function(t){if(t==null)throw new YX(arguments.length>0&&arguments[1]||"Cannot call method on "+t);return t},eJ=QX,tJ=SD,rJ=function(t){return new tJ("throw",t)},Bx,Ik;function nJ(){return Ik||(Ik=1,Bx=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),Bx}var Fx,Tk;function iJ(){if(Tk)return Fx;Tk=1;var e=Date.prototype.getDay,t=function(p){try{return e.call(p),!0}catch{return!1}},r=Object.prototype.toString,o="[object Date]",s=kS()();return Fx=function(p){return typeof p!="object"||p===null?!1:s?t(p):r.call(p)===o},Fx}var _g={exports:{}},Nx,Pk;function oJ(){if(Pk)return Nx;Pk=1;var e=va,t=kS()(),r=Gs,o=o0,s;if(t){var d=e("RegExp.prototype.exec"),p={},c=function(){throw p},b={toString:c,valueOf:c};typeof Symbol.toPrimitive=="symbol"&&(b[Symbol.toPrimitive]=c),s=function(A){if(!A||typeof A!="object")return!1;var $=o(A,"lastIndex"),V=$&&r($,"value");if(!V)return!1;try{d(A,b)}catch(N){return N===p}}}else{var w=e("Object.prototype.toString"),T="[object RegExp]";s=function(A){return!A||typeof A!="object"&&typeof A!="function"?!1:w(A)===T}}return Nx=s,Nx}var jx,kk;function aJ(){if(kk)return jx;kk=1;var e=va,t=oJ(),r=e("RegExp.prototype.exec"),o=Lr;return jx=function(d){if(!t(d))throw new o("`regex` must be a RegExp");return function(c){return r(d,c)!==null}},jx}var Ek;function sJ(){if(Ek)return _g.exports;Ek=1;var e=va,t=e("Object.prototype.toString"),r=n0(),o=aJ();if(r){var s=e("Symbol.prototype.toString"),d=o(/^Symbol\(.*\)$/),p=function(b){return typeof b.valueOf()!="symbol"?!1:d(s(b))};_g.exports=function(b){if(typeof b=="symbol")return!0;if(!b||typeof b!="object"||t(b)!=="[object Symbol]")return!1;try{return p(b)}catch{return!1}}}else _g.exports=function(b){return!1};return _g.exports}var Vx,Ak;function lJ(){if(Ak)return Vx;Ak=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=nJ(),r=lD,o=iJ(),s=sJ(),d=function(b,w){if(typeof b>"u"||b===null)throw new TypeError("Cannot call method on "+b);if(typeof w!="string"||w!=="number"&&w!=="string")throw new TypeError('hint must be "string" or "number"');var T=w==="string"?["toString","valueOf"]:["valueOf","toString"],k,A,$;for($=0;$<T.length;++$)if(k=b[T[$]],r(k)&&(A=k.call(b),t(A)))return A;throw new TypeError("No default value")},p=function(b,w){var T=b[w];if(T!==null&&typeof T<"u"){if(!r(T))throw new TypeError(T+" returned for property "+String(w)+" of object "+b+" is not a function");return T}};return Vx=function(b){if(t(b))return b;var w="default";arguments.length>1&&(arguments[1]===String?w="string":arguments[1]===Number&&(w="number"));var T;if(e&&(Symbol.toPrimitive?T=p(b,Symbol.toPrimitive):s(b)&&(T=Symbol.prototype.valueOf)),typeof T<"u"){var k=T.call(b,w);if(t(k))return k;throw new TypeError("unable to convert exotic object to primitive")}return w==="default"&&(o(b)||s(b))&&(w="string"),d(b,w==="default"?"number":w)},Vx}var Ux,zk;function cJ(){if(zk)return Ux;zk=1;var e=lJ();return Ux=function(r){return arguments.length>1?e(r,arguments[1]):e(r)},Ux}var Hx,Rk;function uJ(){if(Rk)return Hx;Rk=1;var e=Si,t=e("%String%"),r=Lr;return Hx=function(s){if(typeof s=="symbol")throw new r("Cannot convert a Symbol value to a string");return t(s)},Hx}var dJ=Si,hJ=dJ("%String%"),pJ=cJ(),fJ=uJ(),mJ=function(t){var r=pJ(t,hJ);return typeof r=="symbol"?r:fJ(r)},gJ=function(t){return t===0&&1/t===-1/0},xg=Lr,yJ=YK,vJ=Bf,_J=jX,xJ=$f,Wx=GX,bJ=JX,wJ=xD,SJ=eJ,Gx=rJ,CJ=mJ,IJ=gJ,TJ=yD,PJ=function(t,r,o){if(o!=="PROPERTY"&&o!=="ZERO")throw new xg('Assertion failed: `keyCoercion` must be `"PROPERTY"` or `"ZERO"`');if(SJ(t),!xJ(r))throw new xg("callbackfn must be callable");for(var s=[],d=_J(t,"SYNC"),p=0;;){if(p>=TJ){var c=Gx(new xg("k must be less than 2 ** 53 - 1"));return Wx(d,c)}var b=bJ(d);if(!b)return s;var w=wJ(b),T;try{T=vJ(r,void 0,[w,p])}catch(k){return Wx(d,Gx(k))}if(o==="PROPERTY")try{T=CJ(T)}catch(k){return Wx(d,Gx(k))}else{if(o!=="ZERO")throw new xg("keyCoercion must be ~PROPERTY~ or ~ZERO~");IJ(T)&&(T=0)}yJ(s,T,w),p+=1}},kJ=DK,EJ=pD,AJ=IS,zJ=PJ,CD=function(t,r){var o=zJ(t,r,"PROPERTY"),s=EJ(null);return AJ(o,function(d){kJ(s,d["[[Key]]"],d["[[Elements]]"])}),s},RJ=CD,ID=function(){return Object.groupBy||RJ},qx,Mk;function MJ(){if(Mk)return qx;Mk=1;var e=nD,t=ID;return qx=function(){var o=t();return e(Object,{groupBy:o},{groupBy:function(){return Object.groupBy!==o}}),o},qx}var DJ=nD,LJ=_S,$J=CD,TD=ID,OJ=TD(),BJ=MJ(),PD=LJ(OJ,Object);DJ(PD,{getPolyfill:TD,implementation:$J,shim:BJ});var FJ=PD;const NJ=jy(FJ),y1=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],Zx=(e,t)=>Td.checkExists(y1.find(r=>r.value.map===e&&r.value.search===t)),Dk=({selected:e,onSelect:t})=>Y.jsx(QU,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(r,o)=>{r!=null&&t(In(y1.find(s=>s.value===o)))},renderValue:r=>{if(r)return Y.jsxs(Af,{direction:"row",gap:1,sx:{alignItems:"center"},children:[Y.jsx(Va,{level:"body-xs",fontWeight:"lg",children:r.value.map==="usa"?"ATS":"ETS2"}),r.value.search==="cities"?Y.jsx(HM,{}):Y.jsx(UM,{})]})},children:Object.entries(NJ(y1,({label:r})=>r)).map(([r,o])=>Y.jsxs(Pf,{children:[Y.jsx($c,{children:Y.jsx(Va,{level:"body-xs",fontWeight:"lg",children:r})}),o==null?void 0:o.map(s=>Y.jsxs(NU,{value:s.value,sx:{px:"1em",textTransform:"capitalize"},children:[Y.jsx(jJ,{search:s.value.search}),s.value.search]},s.value.search))]},r))}),jJ=({search:e})=>{switch(e){case"cities":return Y.jsx(HM,{});case"achievements":return Y.jsx(UM,{});default:throw new pS(e)}},Kg={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},VJ=e=>{const t=L.useRef(null);Ws(()=>({onAdd:()=>In(t.current),onRemove:()=>In(t.current).remove()}),{position:"top-left"});const{current:r}=cS(),[o,s]=L.useState(Zx(localStorage.getItem("tm-map")==="europe"?"europe":"usa",localStorage.getItem("tm-search")==="achievements"?"achievements":"cities")),d=Sg.useCallback(A=>{if(A==null||(s(A),localStorage.setItem("tm-map",A.value.map),localStorage.setItem("tm-search",A.value.search),!r||A.value.map===o.value.map))return;const{longitude:$,latitude:V}=Kg[A.value.map];r.easeTo({zoom:4,center:[$,V]})},[r,o]);L.useEffect(()=>{if(!r)return;const A=()=>{const $=r.getCenter().lng,V=Lk($,Kg.usa.longitude),N=Lk($,Kg.europe.longitude);V<N&&o.value.map!=="usa"?(s(Zx("usa",o.value.search)),localStorage.setItem("tm-map","usa")):N<V&&o.value.map!=="europe"&&(s(Zx("europe",o.value.search)),localStorage.setItem("tm-map","europe"))};return r.on("moveend",A),()=>void r.off("moveend",A)},[r,o,s]);const p=Sg.useCallback(A=>{r==null||A==null||(r.flyTo({curve:1,zoom:9,center:A.value.map($=>Number($.toFixed(3)))}),r.once("moveend",$=>{const{lat:V,lng:N}=$.target.getCenter(),G=$.target.getZoom(),O=Number($.target.getBearing().toFixed(1)),R=Math.round($.target.getPitch());R?window.location.hash=`${G}/${V.toFixed(3)}/${N.toFixed(3)}/${O}/${R}`:O?window.location.hash=`${G}/${V.toFixed(3)}/${N.toFixed(3)}/${O}`:window.location.hash=`${G}/${V.toFixed(3)}/${N.toFixed(3)}`}))},[r]),[c,b]=L.useState([]),[w,T]=L.useState(null),k=Sg.useCallback((A,$={enableFitBounds:!0})=>{if(c.forEach(G=>G.remove()),T(A),r==null||A==null)return;const V=t0(e.visibleStateDlcs),N=A.features.filter(G=>V.has(G.dlcGuard)).map(({coordinates:G})=>new r0.Marker().setLngLat(G).addTo(r.getMap()));if(b(N),N.length&&$.enableFitBounds){const G=ZM(N.map(M=>M.getLngLat().toArray())),O=[G[0],G[1]],R=[G[2],G[3]];r.fitBounds([O,R],{curve:1,padding:100,maxZoom:9})}},[r,c,T,b,e.visibleStates]);return L.useEffect(()=>{k(w,{enableFitBounds:!1})},[w,e.visibleStates]),Y.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:Y.jsx(Af,{direction:"row",gap:1,children:o.value.search==="cities"?Y.jsx(Cq,{selectDecorator:Y.jsx(Dk,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:p,visibleStates:e.visibleStates}):Y.jsx(Sq,{selectDecorator:Y.jsx(Dk,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:k,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})};function Lk(e,t){const r=yP(e)/2,o=yP(t)/2;return Math.abs(Math.sin(r)-Math.sin(o))}const Kx=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},UJ=()=>{const e=L.useRef(null),[t,r]=L.useState(!1),[o,s]=L.useState(!1),[d,p]=L.useState(window.location.origin),c=cS();return Ws(()=>({onAdd:()=>In(e.current),onRemove:()=>In(e.current).remove()})),L.useEffect(()=>{const b=c.current;if(!b||!t)return;const w=()=>{const A=b.getCenter(),$=b.getBearing(),V=b.getPitch(),N=$||V?[$,V]:[],G=b.getZoom(),O=T?"?"+new URLSearchParams({mlat:String(Kx(T.getLngLat().lat,2)),mlon:String(Kx(T.getLngLat().lng,2))}).toString():"",R="#"+[G,A.lat,A.lng,...N].map(M=>Kx(M,2)).join("/");p(window.location.origin+O+R)};let T,k;if(o){T=new r0.Marker,T.setLngLat(b.getCenter()).setDraggable(!0).addTo(b.getMap());let A=!0;k=()=>A&&T.setLngLat(b.getCenter()),T.on("dragend",()=>{A=!1,b.easeTo({center:T==null?void 0:T.getLngLat()}),b.once("moveend",()=>A=!0)})}return w(),b.on("moveend",w),k&&b.on("move",k),()=>{b.off("moveend",w),k&&b.off("move",k),T==null||T.remove()}},[c,t,o]),Y.jsxs("div",{ref:e,children:[Y.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:Y.jsx(Zv,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:Y.jsx(pq,{})})}),Y.jsx(BR,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:Y.jsxs(jR,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[Y.jsx(MR,{children:"Share"}),Y.jsx(NR,{}),Y.jsx(rS,{}),Y.jsxs(RR,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[Y.jsx(Va,{children:"Share a link to this map"}),Y.jsx(xV,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:b=>b.target.select(),value:d,endDecorator:Y.jsx(kR,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard ")),children:"Copy"})}),Y.jsx(Sd,{label:"Include marker",checked:o,onChange:b=>s(b.target.checked)})]})]})})]})};function kD(e){return new Set([...e].map(HJ).concat(Ai.CA))}function HJ(e){switch(e){case Xi.Arizona:return Ai.AZ;case Xi.Arkansas:return Ai.AR;case Xi.Colorado:return Ai.CO;case Xi.Idaho:return Ai.ID;case Xi.Kansas:return Ai.KS;case Xi.Montana:return Ai.MT;case Xi.Nebraska:return Ai.NE;case Xi.Nevada:return Ai.NV;case Xi.NewMexico:return Ai.NM;case Xi.Oklahoma:return Ai.OK;case Xi.Oregon:return Ai.OR;case Xi.Texas:return Ai.TX;case Xi.Utah:return Ai.UT;case Xi.Washington:return Ai.WA;case Xi.Wyoming:return Ai.WY;default:throw new pS(e)}}const $k=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,WJ=()=>{const{mode:e,systemMode:t}=Z1(),r=e==="system"?t:e,{longitude:o,latitude:s}=Kg[GJ(localStorage.getItem("tm-map"))],[d]=rH(),p=Number(d.get("mlat")??void 0),c=Number(d.get("mlon")??void 0),b=$k(p,[-90,90])&&$k(c,[-180,180])?{lat:p,lon:c}:void 0,[w,T]=L.useState(!0),[k,A]=L.useState(new Set(cf)),[$,V]=L.useState(new Set(lf)),N=kD($),G=Oy(k,A,cf),O=Oy($,V,lf),[R,M]=L.useState(!1);return Y.jsxs(lM,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:MM,initialViewState:{longitude:o,latitude:s,zoom:4},children:[b&&Y.jsx(WH,{longitude:b.lon,latitude:b.lat}),Y.jsxs(EM,{mode:r,children:[Y.jsx(s1,{game:"ats",showContours:R}),Y.jsx(s1,{game:"ets2",showContours:R})]}),Y.jsx(l1,{game:"ats",mode:r,enableIconAutoHide:w,visibleIcons:k,dlcs:$}),Y.jsx(l1,{game:"ets2",mode:r,enableIconAutoHide:w,visibleIcons:k}),k.has(ni.CityNames)&&Y.jsx(u1,{game:"ats",mode:r,enableAutoHide:w,enabledStates:N}),k.has(ni.CityNames)&&Y.jsx(u1,{game:"ets2",mode:r,enableAutoHide:w}),Y.jsx(dM,{visualizePitch:!0}),Y.jsx(uM,{containerId:"fsElem"}),Y.jsx(UJ,{}),Y.jsx(qM,{}),Y.jsx(cM,{compact:!0,style:{marginLeft:54},customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),Y.jsx(VJ,{visibleStates:N,visibleStateDlcs:$}),Y.jsx(GM,{icons:{...G,enableAutoHiding:w,onAutoHidingToggle:T},advanced:{showContours:R,onContoursToggle:M},atsDlcs:O})]})};function GJ(e){return e==="europe"?e:"usa"}var qJ=Object.defineProperty,ZJ=(e,t,r)=>t in e?qJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,KJ=(e,t,r)=>(ZJ(e,t+"",r),r);class XJ{constructor(t){KJ(this,"_kind"),this._kind=t}}function JJ(e,t){const r=e.toString(),o=t.toString();return r>o?1:r<o?-1:0}const YJ=JJ;var QJ=Object.defineProperty,eY=(e,t,r)=>t in e?QJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ok=(e,t,r)=>(eY(e,typeof t!="symbol"?t+"":t,r),r);function tY(e,t,r){const o=t*2,s=t*2+1;let d=t;return o<e.length&&r(e[d],e[o])<0&&(d=o),s<e.length&&r(e[d],e[s])<0&&(d=s),d}function ES(e,t,r){const o=tY(e,t,r);if(o!==t){const s=e[t];e[t]=e[o],e[o]=s,ES(e,o,r)}}function Bk(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)ES(e.collection,t,e.comparator)}class Ny extends XJ{constructor({comparator:t=YJ}={}){super("BinaryHeap"),Ok(this,"comparator"),Ok(this,"collection",[]),this.comparator=t}static from(t,r={}){const o=new Ny(r);return o.collection=Array.from(t),Bk(o),o}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),ES(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let o=r.length-1,s=Math.floor(o/2);o>0&&this.comparator(r[s],r[o])<0;o=s,s=Math.floor(s/2)){const d=r[o];r[o]=r[s],r[s]=d}}merge(t){t instanceof Ny?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),Bk(this),t.clear()}isEmpty(){return!this.collection.length}}function rY(e,t,r,o,s){const d=`${e}-${t}-${r}-${o}`,{nodeLUT:p,graph:c}=s,b=In(p.get(e)),w=In(p.get(t)),T=new iY({comparator:(R,M)=>{const ee=G.get(R)??1/0;return(G.get(M)??1/0)-ee}}),k={nodeId:e,distance:0,direction:r,dlcGuard:-1};T.push(k);const A=new Map,$=new Map;$.set(k,0);const V=R=>_q(R,w),N=(R,M)=>{switch(o){case"shortest":return M.distance;case"smallRoads":return M.isOneLaneRoad?M.distance:M.distance*10;default:throw new pS(o)}},G=new Map;G.set(k,V(b));let O=0;for(;!T.isEmpty();){O++;const R=T.pop();if(R.nodeId===t)return{success:!0,key:d,mode:o,...nY(A,R)};const M=c.get(R.nodeId);if(!M)continue;const ee=R.direction==="forward"?M.forward:M.backward;for(const Z of ee){if(!s.enabledDlcGuards.has(Z.dlcGuard))continue;const oe=($.get(R)??1/0)+N(R,Z);oe<($.get(Z)??1/0)&&(A.set(Z,R),$.set(Z,oe),G.set(Z,oe+V(In(p.get(Z.nodeId)))),T.has(Z)||T.push(Z))}}return{success:!1,key:d,mode:o,numIters:O}}function nY(e,t){let r=0;const o=[t];for(;e.has(t);)t=e.get(t),o.unshift(t),r+=t.distance;return o.length===1&&o.push(o[0]),{route:o,distance:r}}class iY extends Ny{constructor(r){super(r);uC(this,"items",new Set)}has(r){return this.items.has(r)}push(r){Td.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return Td.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const o of this.collection)this.items.add(o)}}const oY=()=>{const{mode:e,systemMode:t}=Z1(),r=e==="system"?t:e,[o,s]=L.useState(!0),[d,p]=L.useState(new Set(cf)),[c,b]=L.useState(new Set(lf)),w=kD(c),T=Oy(d,p,cf),k=Oy(c,b,lf),[A,$]=L.useState(!1);return Y.jsxs(lM,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:MM,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[Y.jsx(EM,{mode:r,children:Y.jsx(s1,{game:"ats",showContours:A})}),Y.jsx(l1,{game:"ats",mode:r,enableIconAutoHide:o,visibleIcons:d,dlcs:c}),Y.jsx(u1,{game:"ats",mode:r,enableAutoHide:o,enabledStates:w}),Y.jsx(Fd,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:Y.jsx(Kr,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),Y.jsx(dM,{visualizePitch:!0}),Y.jsx(uM,{}),Y.jsx(qM,{}),Y.jsx(cM,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),Y.jsx(aY,{dlcs:c}),Y.jsx(GM,{icons:{...T,enableAutoHiding:o,onAutoHidingToggle:s},advanced:{showContours:A,onContoursToggle:$},atsDlcs:k})]})},aY=e=>{const{current:t}=cS(),r=t0(e.dlcs),[o,s]=L.useState(void 0),[d,p]=L.useState(void 0),[c,b]=L.useState([]),[w,T]=L.useState([]);L.useEffect(()=>{fetch("usa-graph-demo.json").then(ie=>ie.json()).then(ie=>{b(ie.demoCompanies.map(jk)),p(sY(ie)),s(ie)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[k,A]=L.useState(void 0),[$,V]=L.useState(void 0),N=L.useCallback(ie=>{ie=In(ie),A(ie.value);let W;if(o!=null){W=In(o.demoCompanies.find(Te=>Te.n===ie.value));const Ie=In(o.demoCompanyDefs.find(Te=>Te.t===W.t)),_e=new Set(Ie.d);T(o.demoCompanies.filter(Te=>_e.has(Te.t)).map(jk))}if(!(t==null||d==null)&&($!=null&&(In(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),V(void 0)),W)){const Ie=In(d.nodeLUT.get(W.n));t.flyTo({curve:1,zoom:9,center:[Ie.x,Ie.y]})}},[t,$,d,o]),G=L.useCallback(ie=>{ie=In(ie),V(ie.value),!(t==null||d==null)&&O(In(k),ie.value,t,{...d,enabledDlcGuards:r})},[t,k,d,e.dlcs]),O=(ie,W,Ie,_e)=>{Promise.all([Vk(ie,W,"shortest",_e),Vk(ie,W,"smallRoads",_e)]).then(Te=>{const Ae=In(Ie.getSource("route1"));if(Te.some(et=>et==null)){alert("Cannot calculate a route "),Ae.setData({type:"FeatureCollection",features:[]});return}const $e=Te;Ae.setData({type:"FeatureCollection",features:$e}),Ie.fitBounds(ZM($e.flatMap(et=>et.geometry.coordinates)),{padding:150,curve:1,duration:2500})},Te=>{console.error("error finding route",Te)})},R=new Map;if(o)for(const[,ie]of o.demoGraph)for(const W of[...ie.b??[],...ie.f??[]]){const Ie=R.get(W.n)??0;R.set(W.n,Ie||W.g)}const M=ie=>{if(d==null)return!0;const W=In(R.get(ie.value));return r.has(W)},ee=(ie,W)=>ie.city!==W.city?ie.city.localeCompare(W.city):ie.label.localeCompare(W.label),Z=c.filter(M).sort(ee),oe=w.filter(M).sort(ee);return Y.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[Y.jsx("h2",{children:"Start"}),Y.jsx(Ey,{options:Z,onChange:(ie,W)=>W&&N(W),groupBy:ie=>ie.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:Fk}),Y.jsx("h2",{children:"End"}),Y.jsx(Ey,{options:oe,onChange:(ie,W)=>W&&G(W),groupBy:ie=>ie.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:k==null,renderGroup:Fk},k)]})};function Fk(e){return Y.jsxs(Y.Fragment,{children:[Y.jsx(Va,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),Y.jsx(Pf,{children:e.children}),Y.jsx(FR,{})]})}function sY(e){const t=new Map,r=new Map;for(const[o,s]of e.demoGraph)t.set(o,{forward:(s.f??[]).map(Nk),backward:(s.b??[]).map(Nk)});for(const[o,s]of e.demoNodes)r.set(o,{x:s[0],y:s[1]});return{graph:t,nodeLUT:r}}function Nk(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function jk(e){return{label:e.t,city:e.c,value:e.n}}function Vk(e,t,r,o){return new Promise(s=>{const d=rY(e,t,"forward",r,o);if(!d.success){s(void 0);return}s({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(p=>{const c=In(o.nodeLUT.get(p.nodeId));return[c.x,c.y]})},properties:{distance:d.distance,mode:r}})})}const lY=H7(n1([Y.jsx(r1,{path:"/",element:Y.jsx(WJ,{})}),Y.jsx(r1,{path:"routes",element:Y.jsx(oY,{})})])),cY=HE({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),uY=document.getElementById("root"),dY=VR(uY);dY.render(Y.jsx(L.StrictMode,{children:Y.jsxs(y4,{defaultMode:"system",modeStorageKey:"tm-mode",theme:cY,children:[Y.jsx(L8,{}),Y.jsx(Q7,{router:lY})]})}));
