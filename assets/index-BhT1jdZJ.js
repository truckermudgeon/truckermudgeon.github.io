var mj=Object.defineProperty;var gj=(e,t,r)=>t in e?mj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var vj=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Wi=(e,t,r)=>gj(e,typeof t!="symbol"?t+"":t,r);var i_e=vj(kr=>{function $z(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var jC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ay(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Oc(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Bz={exports:{}},Hx={},Fz={exports:{}},Qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=Symbol.for("react.element"),yj=Symbol.for("react.portal"),_j=Symbol.for("react.fragment"),xj=Symbol.for("react.strict_mode"),bj=Symbol.for("react.profiler"),wj=Symbol.for("react.provider"),Sj=Symbol.for("react.context"),Cj=Symbol.for("react.forward_ref"),Tj=Symbol.for("react.suspense"),kj=Symbol.for("react.memo"),Ej=Symbol.for("react.lazy"),oA=Symbol.iterator;function Ij(e){return e===null||typeof e!="object"?null:(e=oA&&e[oA]||e["@@iterator"],typeof e=="function"?e:null)}var Nz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jz=Object.assign,Vz={};function $p(e,t,r){this.props=e,this.context=t,this.refs=Vz,this.updater=r||Nz}$p.prototype.isReactComponent={};$p.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$p.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uz(){}Uz.prototype=$p.prototype;function $k(e,t,r){this.props=e,this.context=t,this.refs=Vz,this.updater=r||Nz}var Bk=$k.prototype=new Uz;Bk.constructor=$k;jz(Bk,$p.prototype);Bk.isPureReactComponent=!0;var aA=Array.isArray,Hz=Object.prototype.hasOwnProperty,Fk={current:null},Gz={key:!0,ref:!0,__self:!0,__source:!0};function qz(e,t,r){var n,i={},o=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)Hz.call(t,n)&&!Gz.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var p=Array(a),m=0;m<a;m++)p[m]=arguments[m+2];i.children=p}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:sy,type:e,key:o,ref:u,props:i,_owner:Fk.current}}function Mj(e,t){return{$$typeof:sy,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nk(e){return typeof e=="object"&&e!==null&&e.$$typeof===sy}function Pj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var sA=/\/+/g;function z2(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pj(""+e.key):t.toString(36)}function G_(e,t,r,n,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case sy:case yj:u=!0}}if(u)return u=e,i=i(u),e=n===""?"."+z2(u,0):n,aA(i)?(r="",e!=null&&(r=e.replace(sA,"$&/")+"/"),G_(i,t,r,"",function(m){return m})):i!=null&&(Nk(i)&&(i=Mj(i,r+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(sA,"$&/")+"/")+e)),t.push(i)),1;if(u=0,n=n===""?".":n+":",aA(e))for(var a=0;a<e.length;a++){o=e[a];var p=n+z2(o,a);u+=G_(o,t,r,p,i)}else if(p=Ij(e),typeof p=="function")for(e=p.call(e),a=0;!(o=e.next()).done;)o=o.value,p=n+z2(o,a++),u+=G_(o,t,r,p,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function a_(e,t,r){if(e==null)return e;var n=[],i=0;return G_(e,n,"","",function(o){return t.call(r,o,i++)}),n}function Aj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ta={current:null},q_={transition:null},Rj={ReactCurrentDispatcher:ta,ReactCurrentBatchConfig:q_,ReactCurrentOwner:Fk};function Wz(){throw Error("act(...) is not supported in production builds of React.")}Qr.Children={map:a_,forEach:function(e,t,r){a_(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return a_(e,function(){t++}),t},toArray:function(e){return a_(e,function(t){return t})||[]},only:function(e){if(!Nk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qr.Component=$p;Qr.Fragment=_j;Qr.Profiler=bj;Qr.PureComponent=$k;Qr.StrictMode=xj;Qr.Suspense=Tj;Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rj;Qr.act=Wz;Qr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jz({},e.props),i=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=Fk.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(p in t)Hz.call(t,p)&&!Gz.hasOwnProperty(p)&&(n[p]=t[p]===void 0&&a!==void 0?a[p]:t[p])}var p=arguments.length-2;if(p===1)n.children=r;else if(1<p){a=Array(p);for(var m=0;m<p;m++)a[m]=arguments[m+2];n.children=a}return{$$typeof:sy,type:e.type,key:i,ref:o,props:n,_owner:u}};Qr.createContext=function(e){return e={$$typeof:Sj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wj,_context:e},e.Consumer=e};Qr.createElement=qz;Qr.createFactory=function(e){var t=qz.bind(null,e);return t.type=e,t};Qr.createRef=function(){return{current:null}};Qr.forwardRef=function(e){return{$$typeof:Cj,render:e}};Qr.isValidElement=Nk;Qr.lazy=function(e){return{$$typeof:Ej,_payload:{_status:-1,_result:e},_init:Aj}};Qr.memo=function(e,t){return{$$typeof:kj,type:e,compare:t===void 0?null:t}};Qr.startTransition=function(e){var t=q_.transition;q_.transition={};try{e()}finally{q_.transition=t}};Qr.unstable_act=Wz;Qr.useCallback=function(e,t){return ta.current.useCallback(e,t)};Qr.useContext=function(e){return ta.current.useContext(e)};Qr.useDebugValue=function(){};Qr.useDeferredValue=function(e){return ta.current.useDeferredValue(e)};Qr.useEffect=function(e,t){return ta.current.useEffect(e,t)};Qr.useId=function(){return ta.current.useId()};Qr.useImperativeHandle=function(e,t,r){return ta.current.useImperativeHandle(e,t,r)};Qr.useInsertionEffect=function(e,t){return ta.current.useInsertionEffect(e,t)};Qr.useLayoutEffect=function(e,t){return ta.current.useLayoutEffect(e,t)};Qr.useMemo=function(e,t){return ta.current.useMemo(e,t)};Qr.useReducer=function(e,t,r){return ta.current.useReducer(e,t,r)};Qr.useRef=function(e){return ta.current.useRef(e)};Qr.useState=function(e){return ta.current.useState(e)};Qr.useSyncExternalStore=function(e,t,r){return ta.current.useSyncExternalStore(e,t,r)};Qr.useTransition=function(){return ta.current.useTransition()};Qr.version="18.3.1";Fz.exports=Qr;var z=Fz.exports;const Gs=ay(z),VC=$z({__proto__:null,default:Gs},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dj=z,zj=Symbol.for("react.element"),Lj=Symbol.for("react.fragment"),Oj=Object.prototype.hasOwnProperty,$j=Dj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bj={key:!0,ref:!0,__self:!0,__source:!0};function Zz(e,t,r){var n,i={},o=null,u=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)Oj.call(t,n)&&!Bj.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:zj,type:e,key:o,ref:u,props:i,_owner:$j.current}}Hx.Fragment=Lj;Hx.jsx=Zz;Hx.jsxs=Zz;Bz.exports=Hx;var N=Bz.exports;const tg={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},ly="$$joy";function kc(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const Fj=Object.freeze(Object.defineProperty({__proto__:null,default:kc},Symbol.toStringTag,{value:"Module"}));function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(null,arguments)}var Nj=!1;function jj(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Vj(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Uj=function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!Nj:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Vj(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=jj(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Po="-ms-",M1="-moz-",vn="-webkit-",Kz="comm",jk="rule",Vk="decl",Hj="@import",Xz="@keyframes",Gj="@layer",qj=Math.abs,Gx=String.fromCharCode,Wj=Object.assign;function Zj(e,t){return fo(e,0)^45?(((t<<2^fo(e,0))<<2^fo(e,1))<<2^fo(e,2))<<2^fo(e,3):0}function Jz(e){return e.trim()}function Kj(e,t){return(e=t.exec(e))?e[0]:e}function yn(e,t,r){return e.replace(t,r)}function UC(e,t){return e.indexOf(t)}function fo(e,t){return e.charCodeAt(t)|0}function lv(e,t,r){return e.slice(t,r)}function Cl(e){return e.length}function Uk(e){return e.length}function s_(e,t){return t.push(e),e}function Xj(e,t){return e.map(t).join("")}var qx=1,up=1,Yz=0,ba=0,zi=0,Bp="";function Wx(e,t,r,n,i,o,u){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:qx,column:up,length:u,return:""}}function rg(e,t){return Wj(Wx("",null,null,"",null,null,0),e,{length:-e.length},t)}function Jj(){return zi}function Yj(){return zi=ba>0?fo(Bp,--ba):0,up--,zi===10&&(up=1,qx--),zi}function Va(){return zi=ba<Yz?fo(Bp,ba++):0,up++,zi===10&&(up=1,qx++),zi}function Pl(){return fo(Bp,ba)}function W_(){return ba}function cy(e,t){return lv(Bp,e,t)}function cv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Qz(e){return qx=up=1,Yz=Cl(Bp=e),ba=0,[]}function eL(e){return Bp="",e}function Z_(e){return Jz(cy(ba-1,HC(e===91?e+2:e===40?e+1:e)))}function Qj(e){for(;(zi=Pl())&&zi<33;)Va();return cv(e)>2||cv(zi)>3?"":" "}function e9(e,t){for(;--t&&Va()&&!(zi<48||zi>102||zi>57&&zi<65||zi>70&&zi<97););return cy(e,W_()+(t<6&&Pl()==32&&Va()==32))}function HC(e){for(;Va();)switch(zi){case e:return ba;case 34:case 39:e!==34&&e!==39&&HC(zi);break;case 40:e===41&&HC(e);break;case 92:Va();break}return ba}function t9(e,t){for(;Va()&&e+zi!==57;)if(e+zi===84&&Pl()===47)break;return"/*"+cy(t,ba-1)+"*"+Gx(e===47?e:Va())}function r9(e){for(;!cv(Pl());)Va();return cy(e,ba)}function n9(e){return eL(K_("",null,null,null,[""],e=Qz(e),0,[0],e))}function K_(e,t,r,n,i,o,u,a,p){for(var m=0,w=0,C=u,T=0,P=0,R=0,$=1,H=1,D=1,O=0,L="",Q=i,V=o,F=n,X=L;H;)switch(R=O,O=Va()){case 40:if(R!=108&&fo(X,C-1)==58){UC(X+=yn(Z_(O),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:X+=Z_(O);break;case 9:case 10:case 13:case 32:X+=Qj(R);break;case 92:X+=e9(W_()-1,7);continue;case 47:switch(Pl()){case 42:case 47:s_(i9(t9(Va(),W_()),t,r),p);break;default:X+="/"}break;case 123*$:a[m++]=Cl(X)*D;case 125*$:case 59:case 0:switch(O){case 0:case 125:H=0;case 59+w:D==-1&&(X=yn(X,/\f/g,"")),P>0&&Cl(X)-C&&s_(P>32?cA(X+";",n,r,C-1):cA(yn(X," ","")+";",n,r,C-2),p);break;case 59:X+=";";default:if(s_(F=lA(X,t,r,m,w,i,a,L,Q=[],V=[],C),o),O===123)if(w===0)K_(X,t,F,F,Q,o,C,a,V);else switch(T===99&&fo(X,3)===110?100:T){case 100:case 108:case 109:case 115:K_(e,F,F,n&&s_(lA(e,F,F,0,0,i,a,L,i,Q=[],C),V),i,V,C,a,n?Q:V);break;default:K_(X,F,F,F,[""],V,0,a,V)}}m=w=P=0,$=D=1,L=X="",C=u;break;case 58:C=1+Cl(X),P=R;default:if($<1){if(O==123)--$;else if(O==125&&$++==0&&Yj()==125)continue}switch(X+=Gx(O),O*$){case 38:D=w>0?1:(X+="\f",-1);break;case 44:a[m++]=(Cl(X)-1)*D,D=1;break;case 64:Pl()===45&&(X+=Z_(Va())),T=Pl(),w=C=Cl(L=X+=r9(W_())),O++;break;case 45:R===45&&Cl(X)==2&&($=0)}}return o}function lA(e,t,r,n,i,o,u,a,p,m,w){for(var C=i-1,T=i===0?o:[""],P=Uk(T),R=0,$=0,H=0;R<n;++R)for(var D=0,O=lv(e,C+1,C=qj($=u[R])),L=e;D<P;++D)(L=Jz($>0?T[D]+" "+O:yn(O,/&\f/g,T[D])))&&(p[H++]=L);return Wx(e,t,r,i===0?jk:a,p,m,w)}function i9(e,t,r){return Wx(e,t,r,Kz,Gx(Jj()),lv(e,2,-2),0)}function cA(e,t,r,n){return Wx(e,t,r,Vk,lv(e,0,n),lv(e,n+1,-1),n)}function Kf(e,t){for(var r="",n=Uk(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function o9(e,t,r,n){switch(e.type){case Gj:if(e.children.length)break;case Hj:case Vk:return e.return=e.return||e.value;case Kz:return"";case Xz:return e.return=e.value+"{"+Kf(e.children,n)+"}";case jk:e.value=e.props.join(",")}return Cl(r=Kf(e.children,n))?e.return=e.value+"{"+r+"}":""}function a9(e){var t=Uk(e);return function(r,n,i,o){for(var u="",a=0;a<t;a++)u+=e[a](r,n,i,o)||"";return u}}function s9(e){return function(t){t.root||(t=t.return)&&e(t)}}function tL(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var l9=function(t,r,n){for(var i=0,o=0;i=o,o=Pl(),i===38&&o===12&&(r[n]=1),!cv(o);)Va();return cy(t,ba)},c9=function(t,r){var n=-1,i=44;do switch(cv(i)){case 0:i===38&&Pl()===12&&(r[n]=1),t[n]+=l9(ba-1,r,n);break;case 2:t[n]+=Z_(i);break;case 4:if(i===44){t[++n]=Pl()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Gx(i)}while(i=Va());return t},u9=function(t,r){return eL(c9(Qz(t),r))},uA=new WeakMap,h9=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!uA.get(n))&&!i){uA.set(t,!0);for(var o=[],u=u9(r,o),a=n.props,p=0,m=0;p<u.length;p++)for(var w=0;w<a.length;w++,m++)t.props[m]=o[p]?u[p].replace(/&\f/g,a[w]):a[w]+" "+u[p]}}},d9=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function rL(e,t){switch(Zj(e,t)){case 5103:return vn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vn+e+M1+e+Po+e+e;case 6828:case 4268:return vn+e+Po+e+e;case 6165:return vn+e+Po+"flex-"+e+e;case 5187:return vn+e+yn(e,/(\w+).+(:[^]+)/,vn+"box-$1$2"+Po+"flex-$1$2")+e;case 5443:return vn+e+Po+"flex-item-"+yn(e,/flex-|-self/,"")+e;case 4675:return vn+e+Po+"flex-line-pack"+yn(e,/align-content|flex-|-self/,"")+e;case 5548:return vn+e+Po+yn(e,"shrink","negative")+e;case 5292:return vn+e+Po+yn(e,"basis","preferred-size")+e;case 6060:return vn+"box-"+yn(e,"-grow","")+vn+e+Po+yn(e,"grow","positive")+e;case 4554:return vn+yn(e,/([^-])(transform)/g,"$1"+vn+"$2")+e;case 6187:return yn(yn(yn(e,/(zoom-|grab)/,vn+"$1"),/(image-set)/,vn+"$1"),e,"")+e;case 5495:case 3959:return yn(e,/(image-set\([^]*)/,vn+"$1$`$1");case 4968:return yn(yn(e,/(.+:)(flex-)?(.*)/,vn+"box-pack:$3"+Po+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vn+e+e;case 4095:case 3583:case 4068:case 2532:return yn(e,/(.+)-inline(.+)/,vn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cl(e)-1-t>6)switch(fo(e,t+1)){case 109:if(fo(e,t+4)!==45)break;case 102:return yn(e,/(.+:)(.+)-([^]+)/,"$1"+vn+"$2-$3$1"+M1+(fo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~UC(e,"stretch")?rL(yn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(fo(e,t+1)!==115)break;case 6444:switch(fo(e,Cl(e)-3-(~UC(e,"!important")&&10))){case 107:return yn(e,":",":"+vn)+e;case 101:return yn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vn+(fo(e,14)===45?"inline-":"")+"box$3$1"+vn+"$2$3$1"+Po+"$2box$3")+e}break;case 5936:switch(fo(e,t+11)){case 114:return vn+e+Po+yn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vn+e+Po+yn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vn+e+Po+yn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vn+e+Po+e+e}return e}var f9=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case Vk:t.return=rL(t.value,t.length);break;case Xz:return Kf([rg(t,{value:yn(t.value,"@","@"+vn)})],i);case jk:if(t.length)return Xj(t.props,function(o){switch(Kj(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Kf([rg(t,{props:[yn(o,/:(read-\w+)/,":"+M1+"$1")]})],i);case"::placeholder":return Kf([rg(t,{props:[yn(o,/:(plac\w+)/,":"+vn+"input-$1")]}),rg(t,{props:[yn(o,/:(plac\w+)/,":"+M1+"$1")]}),rg(t,{props:[yn(o,/:(plac\w+)/,Po+"input-$1")]})],i)}return""})}},p9=[f9],nL=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function($){var H=$.getAttribute("data-emotion");H.indexOf(" ")!==-1&&(document.head.appendChild($),$.setAttribute("data-s",""))})}var i=t.stylisPlugins||p9,o={},u,a=[];u=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function($){for(var H=$.getAttribute("data-emotion").split(" "),D=1;D<H.length;D++)o[H[D]]=!0;a.push($)});var p,m=[h9,d9];{var w,C=[o9,s9(function($){w.insert($)})],T=a9(m.concat(i,C)),P=function(H){return Kf(n9(H),T)};p=function(H,D,O,L){w=O,P(H?H+"{"+D.styles+"}":D.styles),L&&(R.inserted[D.name]=!0)}}var R={key:r,sheet:new Uj({key:r,container:u,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:p};return R.sheet.hydrate(a),R},iL={exports:{}},kn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=typeof Symbol=="function"&&Symbol.for,Hk=eo?Symbol.for("react.element"):60103,Gk=eo?Symbol.for("react.portal"):60106,Zx=eo?Symbol.for("react.fragment"):60107,Kx=eo?Symbol.for("react.strict_mode"):60108,Xx=eo?Symbol.for("react.profiler"):60114,Jx=eo?Symbol.for("react.provider"):60109,Yx=eo?Symbol.for("react.context"):60110,qk=eo?Symbol.for("react.async_mode"):60111,Qx=eo?Symbol.for("react.concurrent_mode"):60111,eb=eo?Symbol.for("react.forward_ref"):60112,tb=eo?Symbol.for("react.suspense"):60113,m9=eo?Symbol.for("react.suspense_list"):60120,rb=eo?Symbol.for("react.memo"):60115,nb=eo?Symbol.for("react.lazy"):60116,g9=eo?Symbol.for("react.block"):60121,v9=eo?Symbol.for("react.fundamental"):60117,y9=eo?Symbol.for("react.responder"):60118,_9=eo?Symbol.for("react.scope"):60119;function Wa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Hk:switch(e=e.type,e){case qk:case Qx:case Zx:case Xx:case Kx:case tb:return e;default:switch(e=e&&e.$$typeof,e){case Yx:case eb:case nb:case rb:case Jx:return e;default:return t}}case Gk:return t}}}function oL(e){return Wa(e)===Qx}kn.AsyncMode=qk;kn.ConcurrentMode=Qx;kn.ContextConsumer=Yx;kn.ContextProvider=Jx;kn.Element=Hk;kn.ForwardRef=eb;kn.Fragment=Zx;kn.Lazy=nb;kn.Memo=rb;kn.Portal=Gk;kn.Profiler=Xx;kn.StrictMode=Kx;kn.Suspense=tb;kn.isAsyncMode=function(e){return oL(e)||Wa(e)===qk};kn.isConcurrentMode=oL;kn.isContextConsumer=function(e){return Wa(e)===Yx};kn.isContextProvider=function(e){return Wa(e)===Jx};kn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hk};kn.isForwardRef=function(e){return Wa(e)===eb};kn.isFragment=function(e){return Wa(e)===Zx};kn.isLazy=function(e){return Wa(e)===nb};kn.isMemo=function(e){return Wa(e)===rb};kn.isPortal=function(e){return Wa(e)===Gk};kn.isProfiler=function(e){return Wa(e)===Xx};kn.isStrictMode=function(e){return Wa(e)===Kx};kn.isSuspense=function(e){return Wa(e)===tb};kn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Zx||e===Qx||e===Xx||e===Kx||e===tb||e===m9||typeof e=="object"&&e!==null&&(e.$$typeof===nb||e.$$typeof===rb||e.$$typeof===Jx||e.$$typeof===Yx||e.$$typeof===eb||e.$$typeof===v9||e.$$typeof===y9||e.$$typeof===_9||e.$$typeof===g9)};kn.typeOf=Wa;iL.exports=kn;var x9=iL.exports,aL=x9,b9={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},w9={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sL={};sL[aL.ForwardRef]=b9;sL[aL.Memo]=w9;var S9=!0;function lL(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var Wk=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||S9===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},Zk=function(t,r,n){Wk(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function C9(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var T9={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},k9=/[A-Z]|^ms/g,E9=/_EMO_([^_]+?)_([^]*?)_EMO_/g,cL=function(t){return t.charCodeAt(1)===45},hA=function(t){return t!=null&&typeof t!="boolean"},L2=tL(function(e){return cL(e)?e:e.replace(k9,"-$&").toLowerCase()}),dA=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(E9,function(n,i,o){return Tl={name:i,styles:o,next:Tl},i})}return T9[t]!==1&&!cL(t)&&typeof r=="number"&&r!==0?r+"px":r};function uv(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Tl={name:i.name,styles:i.styles,next:Tl},i.name;var o=r;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)Tl={name:u.name,styles:u.styles,next:Tl},u=u.next;var a=o.styles+";";return a}return I9(e,t,r)}case"function":{if(e!==void 0){var p=Tl,m=r(e);return Tl=p,uv(e,t,m)}break}}var w=r;if(t==null)return w;var C=t[w];return C!==void 0?C:w}function I9(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=uv(e,t,r[i])+";";else for(var o in r){var u=r[o];if(typeof u!="object"){var a=u;t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":hA(a)&&(n+=L2(o)+":"+dA(o,a)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(t==null||t[u[0]]===void 0))for(var p=0;p<u.length;p++)hA(u[p])&&(n+=L2(o)+":"+dA(o,u[p])+";");else{var m=uv(e,t,u);switch(o){case"animation":case"animationName":{n+=L2(o)+":"+m+";";break}default:n+=o+"{"+m+"}"}}}return n}var fA=/label:\s*([^\s;{]+)\s*(;|$)/g,Tl;function ib(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";Tl=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=uv(r,t,o);else{var u=o;i+=u[0]}for(var a=1;a<e.length;a++)if(i+=uv(r,t,e[a]),n){var p=o;i+=p[a]}fA.lastIndex=0;for(var m="",w;(w=fA.exec(i))!==null;)m+="-"+w[1];var C=C9(i)+m;return{name:C,styles:i,next:Tl}}var M9=function(t){return t()},uL=VC.useInsertionEffect?VC.useInsertionEffect:!1,hL=uL||M9,pA=uL||z.useLayoutEffect,P9=!1,dL=z.createContext(typeof HTMLElement<"u"?nL({key:"css"}):null),A9=dL.Provider,Kk=function(t){return z.forwardRef(function(r,n){var i=z.useContext(dL);return t(r,i,n)})},Fp=z.createContext({}),Xk={}.hasOwnProperty,GC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",R9=function(t,r){var n={};for(var i in r)Xk.call(r,i)&&(n[i]=r[i]);return n[GC]=t,n},D9=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return Wk(r,n,i),hL(function(){return Zk(r,n,i)}),null},z9=Kk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[GC],o=[n],u="";typeof e.className=="string"?u=lL(t.registered,o,e.className):e.className!=null&&(u=e.className+" ");var a=ib(o,void 0,z.useContext(Fp));u+=t.key+"-"+a.name;var p={};for(var m in e)Xk.call(e,m)&&m!=="css"&&m!==GC&&!P9&&(p[m]=e[m]);return p.className=u,r&&(p.ref=r),z.createElement(z.Fragment,null,z.createElement(D9,{cache:t,serialized:a,isStringTag:typeof i=="string"}),z.createElement(i,p))}),L9=z9,O2={exports:{}},mA;function fL(){return mA||(mA=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)({}).hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(O2)),O2.exports}fL();var O9=function(t,r){var n=arguments;if(r==null||!Xk.call(r,"css"))return z.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=L9,o[1]=R9(t,r);for(var u=2;u<i;u++)o[u]=n[u];return z.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(O9);var $9=Kk(function(e,t){var r=e.styles,n=ib([r],void 0,z.useContext(Fp)),i=z.useRef();return pA(function(){var o=t.key+"-global",u=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,p=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(u.before=t.sheet.tags[0]),p!==null&&(a=!0,p.setAttribute("data-emotion",o),u.hydrate([p])),i.current=[u,a],function(){u.flush()}},[t]),pA(function(){var o=i.current,u=o[0],a=o[1];if(a){o[1]=!1;return}if(n.next!==void 0&&Zk(t,n.next,!0),u.tags.length){var p=u.tags[u.tags.length-1].nextElementSibling;u.before=p,u.flush()}t.insert("",n,u,!1)},[t,n.name]),null});function Jk(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ib(t)}function pL(){var e=Jk.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var B9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,F9=tL(function(e){return B9.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),N9=F9,j9=function(t){return t!=="theme"},gA=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?N9:j9},vA=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(u){return t.__emotion_forwardProp(u)&&o(u)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},V9=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return Wk(r,n,i),hL(function(){return Zk(r,n,i)}),null},U9=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,u;r!==void 0&&(o=r.label,u=r.target);var a=vA(t,r,n),p=a||gA(i),m=!p("as");return function(){var w=arguments,C=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&C.push("label:"+o+";"),w[0]==null||w[0].raw===void 0)C.push.apply(C,w);else{var T=w[0];C.push(T[0]);for(var P=w.length,R=1;R<P;R++)C.push(w[R],T[R])}var $=Kk(function(H,D,O){var L=m&&H.as||i,Q="",V=[],F=H;if(H.theme==null){F={};for(var X in H)F[X]=H[X];F.theme=z.useContext(Fp)}typeof H.className=="string"?Q=lL(D.registered,V,H.className):H.className!=null&&(Q=H.className+" ");var re=ib(C.concat(V),D.registered,F);Q+=D.key+"-"+re.name,u!==void 0&&(Q+=" "+u);var ye=m&&a===void 0?gA(L):p,me={};for(var we in H)m&&we==="as"||ye(we)&&(me[we]=H[we]);return me.className=Q,O&&(me.ref=O),z.createElement(z.Fragment,null,z.createElement(V9,{cache:D,serialized:re,isStringTag:typeof L=="string"}),z.createElement(L,me))});return $.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",$.defaultProps=t.defaultProps,$.__emotion_real=$,$.__emotion_base=i,$.__emotion_styles=C,$.__emotion_forwardProp=a,Object.defineProperty($,"toString",{value:function(){return"."+u}}),$.withComponent=function(H,D){var O=e(H,K({},r,D,{shouldForwardProp:vA($,D,!0)}));return O.apply(void 0,C)},$}},H9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],qC=U9.bind(null);H9.forEach(function(e){qC[e]=qC(e)});let WC;typeof document=="object"&&(WC=nL({key:"css",prepend:!0}));function G9(e){const{injectFirst:t,children:r}=e;return t&&WC?N.jsx(A9,{value:WC,children:r}):r}function q9(e){return e==null||Object.keys(e).length===0}function Bg(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(q9(i)?r:i):t;return N.jsx($9,{styles:n})}function Yk(e,t){return qC(e,t)}const mL=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},W9=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Bg,StyledEngineProvider:G9,ThemeContext:Fp,css:Jk,default:Yk,internal_processStyles:mL,keyframes:pL},Symbol.toStringTag,{value:"Module"}));function Gt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function gc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function gL(e){if(z.isValidElement(e)||!gc(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=gL(e[r])}),t}function Oi(e,t,r={clone:!0}){const n=r.clone?K({},e):e;return gc(e)&&gc(t)&&Object.keys(t).forEach(i=>{z.isValidElement(t[i])?n[i]=t[i]:gc(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&gc(e[i])?n[i]=Oi(e[i],t[i],r):r.clone?n[i]=gc(t[i])?gL(t[i]):t[i]:n[i]=t[i]}),n}const Z9=Object.freeze(Object.defineProperty({__proto__:null,default:Oi,isPlainObject:gc},Symbol.toStringTag,{value:"Module"})),K9=["values","unit","step"],X9=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>K({},r,{[n.key]:n.val}),{})};function Qk(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,i=Gt(e,K9),o=X9(t),u=Object.keys(o);function a(T){return`@media (min-width:${typeof t[T]=="number"?t[T]:T}${r})`}function p(T){return`@media (max-width:${(typeof t[T]=="number"?t[T]:T)-n/100}${r})`}function m(T,P){const R=u.indexOf(P);return`@media (min-width:${typeof t[T]=="number"?t[T]:T}${r}) and (max-width:${(R!==-1&&typeof t[u[R]]=="number"?t[u[R]]:P)-n/100}${r})`}function w(T){return u.indexOf(T)+1<u.length?m(T,u[u.indexOf(T)+1]):a(T)}function C(T){const P=u.indexOf(T);return P===0?a(u[1]):P===u.length-1?p(u[P]):m(T,u[u.indexOf(T)+1]).replace("@media","@media not all and")}return K({keys:u,values:o,up:a,down:p,between:m,only:w,not:C,unit:r},i)}const J9={borderRadius:4};function Fg(e,t){return t?Oi(e,t,{clone:!1}):e}const eE={xs:0,sm:600,md:900,lg:1200,xl:1536},yA={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${eE[e]}px)`};function Qs(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||yA;return t.reduce((u,a,p)=>(u[o.up(o.keys[p])]=r(t[p]),u),{})}if(typeof t=="object"){const o=n.breakpoints||yA;return Object.keys(t).reduce((u,a)=>{if(Object.keys(o.values||eE).indexOf(a)!==-1){const p=o.up(a);u[p]=r(t[a],a)}else{const p=a;u[p]=t[p]}return u},{})}return r(t)}function vL(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,i)=>{const o=e.up(i);return n[o]={},n},{}))||{}}function yL(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function Y9(e,...t){const r=vL(e),n=[r,...t].reduce((i,o)=>Oi(i,o),{});return yL(Object.keys(r),n)}function Q9(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function $2({values:e,breakpoints:t,base:r}){const n=r||Q9(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((u,a,p)=>(Array.isArray(e)?(u[a]=e[p]!=null?e[p]:e[o],o=p):typeof e=="object"?(u[a]=e[a]!=null?e[a]:e[o],o=a):u[a]=e,u),{})}function bt(e){if(typeof e!="string")throw new Error(kc(7));return e.charAt(0).toUpperCase()+e.slice(1)}const eV=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"}));function Pu(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function P1(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=Pu(e,r)||n,t&&(i=t(i,n,e)),i}function Pi(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=u=>{if(u[t]==null)return null;const a=u[t],p=u.theme,m=Pu(p,n)||{};return Qs(u,a,C=>{let T=P1(m,i,C);return C===T&&typeof C=="string"&&(T=P1(m,i,`${t}${C==="default"?"":bt(C)}`,C)),r===!1?T:{[r]:T}})};return o.propTypes={},o.filterProps=[t],o}function tV(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const rV={m:"margin",p:"padding"},nV={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},_A={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},iV=tV(e=>{if(e.length>2)if(_A[e])e=_A[e];else return[e];const[t,r]=e.split(""),n=rV[t],i=nV[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),tE=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],rE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...tE,...rE];function uy(e,t,r,n){var i;const o=(i=Pu(e,t,!1))!=null?i:r;return typeof o=="number"?u=>typeof u=="string"?u:o*u:Array.isArray(o)?u=>typeof u=="string"?u:o[u]:typeof o=="function"?o:()=>{}}function nE(e){return uy(e,"spacing",8)}function Vh(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),n=e(r);return t>=0?n:typeof n=="number"?-n:`-${n}`}function oV(e,t){return r=>e.reduce((n,i)=>(n[i]=Vh(t,r),n),{})}function aV(e,t,r,n){if(t.indexOf(r)===-1)return null;const i=iV(r),o=oV(i,n),u=e[r];return Qs(e,u,o)}function _L(e,t){const r=nE(e.theme);return Object.keys(e).map(n=>aV(e,t,n,r)).reduce(Fg,{})}function gi(e){return _L(e,tE)}gi.propTypes={};gi.filterProps=tE;function vi(e){return _L(e,rE)}vi.propTypes={};vi.filterProps=rE;function xL(e=8){if(e.mui)return e;const t=nE({spacing:e}),r=(...n)=>(n.length===0?[1]:n).map(o=>{const u=t(o);return typeof u=="number"?`${u}px`:u}).join(" ");return r.mui=!0,r}function ob(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?Fg(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function cs(e){return typeof e!="number"?e:`${e}px solid`}function Cs(e,t){return Pi({prop:e,themeKey:"borders",transform:t})}const sV=Cs("border",cs),lV=Cs("borderTop",cs),cV=Cs("borderRight",cs),uV=Cs("borderBottom",cs),hV=Cs("borderLeft",cs),dV=Cs("borderColor"),fV=Cs("borderTopColor"),pV=Cs("borderRightColor"),mV=Cs("borderBottomColor"),gV=Cs("borderLeftColor"),vV=Cs("outline",cs),yV=Cs("outlineColor"),ab=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=uy(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:Vh(t,n)});return Qs(e,e.borderRadius,r)}return null};ab.propTypes={};ab.filterProps=["borderRadius"];ob(sV,lV,cV,uV,hV,dV,fV,pV,mV,gV,ab,vV,yV);const sb=e=>{if(e.gap!==void 0&&e.gap!==null){const t=uy(e.theme,"spacing",8),r=n=>({gap:Vh(t,n)});return Qs(e,e.gap,r)}return null};sb.propTypes={};sb.filterProps=["gap"];const lb=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=uy(e.theme,"spacing",8),r=n=>({columnGap:Vh(t,n)});return Qs(e,e.columnGap,r)}return null};lb.propTypes={};lb.filterProps=["columnGap"];const cb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=uy(e.theme,"spacing",8),r=n=>({rowGap:Vh(t,n)});return Qs(e,e.rowGap,r)}return null};cb.propTypes={};cb.filterProps=["rowGap"];const _V=Pi({prop:"gridColumn"}),xV=Pi({prop:"gridRow"}),bV=Pi({prop:"gridAutoFlow"}),wV=Pi({prop:"gridAutoColumns"}),SV=Pi({prop:"gridAutoRows"}),CV=Pi({prop:"gridTemplateColumns"}),TV=Pi({prop:"gridTemplateRows"}),kV=Pi({prop:"gridTemplateAreas"}),EV=Pi({prop:"gridArea"});ob(sb,lb,cb,_V,xV,bV,wV,SV,CV,TV,kV,EV);function Xf(e,t){return t==="grey"?t:e}const IV=Pi({prop:"color",themeKey:"palette",transform:Xf}),MV=Pi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Xf}),PV=Pi({prop:"backgroundColor",themeKey:"palette",transform:Xf});ob(IV,MV,PV);function za(e){return e<=1&&e!==0?`${e*100}%`:e}const AV=Pi({prop:"width",transform:za}),iE=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n,i;const o=((n=e.theme)==null||(n=n.breakpoints)==null||(n=n.values)==null?void 0:n[r])||eE[r];return o?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:za(r)}};return Qs(e,e.maxWidth,t)}return null};iE.filterProps=["maxWidth"];const RV=Pi({prop:"minWidth",transform:za}),DV=Pi({prop:"height",transform:za}),zV=Pi({prop:"maxHeight",transform:za}),LV=Pi({prop:"minHeight",transform:za});Pi({prop:"size",cssProperty:"width",transform:za});Pi({prop:"size",cssProperty:"height",transform:za});const OV=Pi({prop:"boxSizing"});ob(AV,iE,RV,DV,zV,LV,OV);const od={border:{themeKey:"borders",transform:cs},borderTop:{themeKey:"borders",transform:cs},borderRight:{themeKey:"borders",transform:cs},borderBottom:{themeKey:"borders",transform:cs},borderLeft:{themeKey:"borders",transform:cs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:cs},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ab},color:{themeKey:"palette",transform:Xf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Xf},backgroundColor:{themeKey:"palette",transform:Xf},p:{style:vi},pt:{style:vi},pr:{style:vi},pb:{style:vi},pl:{style:vi},px:{style:vi},py:{style:vi},padding:{style:vi},paddingTop:{style:vi},paddingRight:{style:vi},paddingBottom:{style:vi},paddingLeft:{style:vi},paddingX:{style:vi},paddingY:{style:vi},paddingInline:{style:vi},paddingInlineStart:{style:vi},paddingInlineEnd:{style:vi},paddingBlock:{style:vi},paddingBlockStart:{style:vi},paddingBlockEnd:{style:vi},m:{style:gi},mt:{style:gi},mr:{style:gi},mb:{style:gi},ml:{style:gi},mx:{style:gi},my:{style:gi},margin:{style:gi},marginTop:{style:gi},marginRight:{style:gi},marginBottom:{style:gi},marginLeft:{style:gi},marginX:{style:gi},marginY:{style:gi},marginInline:{style:gi},marginInlineStart:{style:gi},marginInlineEnd:{style:gi},marginBlock:{style:gi},marginBlockStart:{style:gi},marginBlockEnd:{style:gi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:sb},rowGap:{style:cb},columnGap:{style:lb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:za},maxWidth:{style:iE},minWidth:{transform:za},height:{transform:za},maxHeight:{transform:za},minHeight:{transform:za},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function $V(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function BV(e,t){return typeof e=="function"?e(t):e}function bL(){function e(r,n,i,o){const u={[r]:n,theme:i},a=o[r];if(!a)return{[r]:n};const{cssProperty:p=r,themeKey:m,transform:w,style:C}=a;if(n==null)return null;if(m==="typography"&&n==="inherit")return{[r]:n};const T=Pu(i,m)||{};return C?C(u):Qs(u,n,R=>{let $=P1(T,w,R);return R===$&&typeof R=="string"&&($=P1(T,w,`${r}${R==="default"?"":bt(R)}`,R)),p===!1?$:{[p]:$}})}function t(r){var n;const{sx:i,theme:o={}}=r||{};if(!i)return null;const u=(n=o.unstable_sxConfig)!=null?n:od;function a(p){let m=p;if(typeof p=="function")m=p(o);else if(typeof p!="object")return p;if(!m)return null;const w=vL(o.breakpoints),C=Object.keys(w);let T=w;return Object.keys(m).forEach(P=>{const R=BV(m[P],o);if(R!=null)if(typeof R=="object")if(u[P])T=Fg(T,e(P,R,o,u));else{const $=Qs({theme:o},R,H=>({[P]:H}));$V($,R)?T[P]=t({sx:R,theme:o}):T=Fg(T,$)}else T=Fg(T,e(P,R,o,u))}),yL(C,T)}return Array.isArray(i)?i.map(a):a(i)}return t}const $c=bL();$c.filterProps=["sx"];function oE(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const FV=["breakpoints","palette","spacing","shape"];function hy(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={}}=e,u=Gt(e,FV),a=Qk(r),p=xL(i);let m=Oi({breakpoints:a,direction:"ltr",components:{},palette:K({mode:"light"},n),spacing:p,shape:K({},J9,o)},u);return m.applyStyles=oE,m=t.reduce((w,C)=>Oi(w,C),m),m.unstable_sxConfig=K({},od,u==null?void 0:u.unstable_sxConfig),m.unstable_sx=function(C){return $c({sx:C,theme:this})},m}const NV=Object.freeze(Object.defineProperty({__proto__:null,default:hy,private_createBreakpoints:Qk,unstable_applyStyles:oE},Symbol.toStringTag,{value:"Module"}));function jV(e){return Object.keys(e).length===0}function wL(e=null){const t=z.useContext(Fp);return!t||jV(t)?e:t}const VV=hy();function ub(e=VV){return wL(e)}function UV({styles:e,themeId:t,defaultTheme:r={}}){const n=ub(r),i=typeof e=="function"?e(t&&n[t]||n):e;return N.jsx(Bg,{styles:i})}const HV=["sx"],GV=e=>{var t,r;const n={systemProps:{},otherProps:{}},i=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:od;return Object.keys(e).forEach(o=>{i[o]?n.systemProps[o]=e[o]:n.otherProps[o]=e[o]}),n};function hb(e){const{sx:t}=e,r=Gt(e,HV),{systemProps:n,otherProps:i}=GV(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...u)=>{const a=t(...u);return gc(a)?K({},n,a):n}:o=K({},n,t),K({},i,{sx:o})}const qV=Object.freeze(Object.defineProperty({__proto__:null,default:$c,extendSxProp:hb,unstable_createStyleFunctionSx:bL,unstable_defaultSxConfig:od},Symbol.toStringTag,{value:"Module"})),xA=e=>e,WV=()=>{let e=xA;return{configure(t){e=t},generate(t){return e(t)},reset(){e=xA}}},SL=WV();function CL(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=CL(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ei(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=CL(e))&&(n&&(n+=" "),n+=t);return n}const ZV=["className","component"];function KV(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=Yk("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})($c);return z.forwardRef(function(p,m){const w=ub(r),C=hb(p),{className:T,component:P="div"}=C,R=Gt(C,ZV);return N.jsx(o,K({as:P,ref:m,className:ei(T,i?i(n):n),theme:t&&w[t]||w},R))})}const TL={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function dy(e,t,r="Mui"){const n=TL[t];return n?`${r}-${n}`:`${SL.generate(e)}-${t}`}function db(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=dy(e,i,r)}),n}var kL={exports:{}},On={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE=Symbol.for("react.transitional.element"),sE=Symbol.for("react.portal"),fb=Symbol.for("react.fragment"),pb=Symbol.for("react.strict_mode"),mb=Symbol.for("react.profiler"),gb=Symbol.for("react.consumer"),vb=Symbol.for("react.context"),yb=Symbol.for("react.forward_ref"),_b=Symbol.for("react.suspense"),xb=Symbol.for("react.suspense_list"),bb=Symbol.for("react.memo"),wb=Symbol.for("react.lazy"),XV=Symbol.for("react.offscreen"),JV=Symbol.for("react.client.reference");function Ts(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aE:switch(e=e.type,e){case fb:case mb:case pb:case _b:case xb:return e;default:switch(e=e&&e.$$typeof,e){case vb:case yb:case wb:case bb:return e;case gb:return e;default:return t}}case sE:return t}}}On.ContextConsumer=gb;On.ContextProvider=vb;On.Element=aE;On.ForwardRef=yb;On.Fragment=fb;On.Lazy=wb;On.Memo=bb;On.Portal=sE;On.Profiler=mb;On.StrictMode=pb;On.Suspense=_b;On.SuspenseList=xb;On.isContextConsumer=function(e){return Ts(e)===gb};On.isContextProvider=function(e){return Ts(e)===vb};On.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aE};On.isForwardRef=function(e){return Ts(e)===yb};On.isFragment=function(e){return Ts(e)===fb};On.isLazy=function(e){return Ts(e)===wb};On.isMemo=function(e){return Ts(e)===bb};On.isPortal=function(e){return Ts(e)===sE};On.isProfiler=function(e){return Ts(e)===mb};On.isStrictMode=function(e){return Ts(e)===pb};On.isSuspense=function(e){return Ts(e)===_b};On.isSuspenseList=function(e){return Ts(e)===xb};On.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fb||e===mb||e===pb||e===_b||e===xb||e===XV||typeof e=="object"&&e!==null&&(e.$$typeof===wb||e.$$typeof===bb||e.$$typeof===vb||e.$$typeof===gb||e.$$typeof===yb||e.$$typeof===JV||e.getModuleId!==void 0)};On.typeOf=Ts;kL.exports=On;var bA=kL.exports;const YV=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function EL(e){const t=`${e}`.match(YV);return t&&t[1]||""}function IL(e,t=""){return e.displayName||e.name||EL(e)||t}function wA(e,t,r){const n=IL(t);return e.displayName||(n!==""?`${r}(${n})`:r)}function QV(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return IL(e,"Component");if(typeof e=="object")switch(e.$$typeof){case bA.ForwardRef:return wA(e,e.render,"ForwardRef");case bA.Memo:return wA(e,e.type,"memo");default:return}}}const e7=Object.freeze(Object.defineProperty({__proto__:null,default:QV,getFunctionName:EL},Symbol.toStringTag,{value:"Module"})),t7=["ownerState"],r7=["variants"],n7=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function i7(e){return Object.keys(e).length===0}function o7(e){return typeof e=="string"&&e.charCodeAt(0)>96}function B2(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const a7=hy(),s7=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function l_({defaultTheme:e,theme:t,themeId:r}){return i7(t)?e:t[r]||t}function l7(e){return e?(t,r)=>r[e]:null}function X_(e,t){let{ownerState:r}=t,n=Gt(t,t7);const i=typeof e=="function"?e(K({ownerState:r},n)):e;if(Array.isArray(i))return i.flatMap(o=>X_(o,K({ownerState:r},n)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=Gt(i,r7);return o.forEach(p=>{let m=!0;typeof p.props=="function"?m=p.props(K({ownerState:r},n,r)):Object.keys(p.props).forEach(w=>{(r==null?void 0:r[w])!==p.props[w]&&n[w]!==p.props[w]&&(m=!1)}),m&&(Array.isArray(a)||(a=[a]),a.push(typeof p.style=="function"?p.style(K({ownerState:r},n,r)):p.style))}),a}return i}function ML(e={}){const{themeId:t,defaultTheme:r=a7,rootShouldForwardProp:n=B2,slotShouldForwardProp:i=B2}=e,o=u=>$c(K({},u,{theme:l_(K({},u,{defaultTheme:r,themeId:t}))}));return o.__mui_systemSx=!0,(u,a={})=>{mL(u,V=>V.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:p,slot:m,skipVariantsResolver:w,skipSx:C,overridesResolver:T=l7(s7(m))}=a,P=Gt(a,n7),R=w!==void 0?w:m&&m!=="Root"&&m!=="root"||!1,$=C||!1;let H,D=B2;m==="Root"||m==="root"?D=n:m?D=i:o7(u)&&(D=void 0);const O=Yk(u,K({shouldForwardProp:D,label:H},P)),L=V=>typeof V=="function"&&V.__emotion_real!==V||gc(V)?F=>X_(V,K({},F,{theme:l_({theme:F.theme,defaultTheme:r,themeId:t})})):V,Q=(V,...F)=>{let X=L(V);const re=F?F.map(L):[];p&&T&&re.push(we=>{const ke=l_(K({},we,{defaultTheme:r,themeId:t}));if(!ke.components||!ke.components[p]||!ke.components[p].styleOverrides)return null;const Ie=ke.components[p].styleOverrides,qe={};return Object.entries(Ie).forEach(([Re,Se])=>{qe[Re]=X_(Se,K({},we,{theme:ke}))}),T(we,qe)}),p&&!R&&re.push(we=>{var ke;const Ie=l_(K({},we,{defaultTheme:r,themeId:t})),qe=Ie==null||(ke=Ie.components)==null||(ke=ke[p])==null?void 0:ke.variants;return X_({variants:qe},K({},we,{theme:Ie}))}),$||re.push(o);const ye=re.length-F.length;if(Array.isArray(V)&&ye>0){const we=new Array(ye).fill("");X=[...V,...we],X.raw=[...V.raw,...we]}const me=O(X,...re);return u.muiName&&(me.muiName=u.muiName),me};return O.withConfig&&(Q.withConfig=O.withConfig),Q}}const c7=ML();function A1(e,t){const r=K({},t);return Object.keys(e).forEach(n=>{if(n.toString().match(/^(components|slots)$/))r[n]=K({},e[n],r[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=e[n]||{},o=t[n];r[n]={},!o||!Object.keys(o)?r[n]=i:!i||!Object.keys(i)?r[n]=o:(r[n]=K({},o),Object.keys(i).forEach(u=>{r[n][u]=A1(i[u],o[u])}))}else r[n]===void 0&&(r[n]=e[n])}),r}function u7(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:A1(t.components[r].defaultProps,n)}function PL({props:e,name:t,defaultTheme:r,themeId:n}){let i=ub(r);return n&&(i=i[n]||i),u7({theme:i,name:t,props:e})}const Ec=typeof window<"u"?z.useLayoutEffect:z.useEffect;function h7(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const d7=Object.freeze(Object.defineProperty({__proto__:null,default:h7},Symbol.toStringTag,{value:"Module"}));function f7(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function AL(e){if(e.type)return e;if(e.charAt(0)==="#")return AL(f7(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(kc(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(kc(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const wh=e=>{const t=AL(e);return t.values.slice(0,3).map((r,n)=>t.type.indexOf("hsl")!==-1&&n!==0?`${r}%`:r).join(" ")};function SA(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function p7(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function Sb(e,t){var r,n;return z.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(n=e.type)==null||(n=n._payload)==null||(n=n.value)==null?void 0:n.muiName)!==-1}function Al(e){return e&&e.ownerDocument||document}function fy(e){return Al(e).defaultView||window}function R1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let CA=0;function m7(e){const[t,r]=z.useState(e),n=e||t;return z.useEffect(()=>{t==null&&(CA+=1,r(`mui-${CA}`))},[t]),n}const TA=VC.useId;function wa(e){if(TA!==void 0){const t=TA();return e??t}return m7(e)}function Jf({controlled:e,default:t,name:r,state:n="value"}){const{current:i}=z.useRef(e!==void 0),[o,u]=z.useState(t),a=i?e:o,p=z.useCallback(m=>{i||u(m)},[]);return[a,p]}function gu(e){const t=z.useRef(e);return Ec(()=>{t.current=e}),z.useRef((...r)=>(0,t.current)(...r)).current}function fn(...e){return z.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{R1(r,t)})},e)}const kA={};function g7(e,t){const r=z.useRef(kA);return r.current===kA&&(r.current=e(t)),r}const v7=[];function y7(e){z.useEffect(e,v7)}class py{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new py}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Tg(){const e=g7(py.create).current;return y7(e.disposeEffect),e}let Cb=!0,ZC=!1;const _7=new py,x7={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function b7(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&x7[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function w7(e){e.metaKey||e.altKey||e.ctrlKey||(Cb=!0)}function F2(){Cb=!1}function S7(){this.visibilityState==="hidden"&&ZC&&(Cb=!0)}function C7(e){e.addEventListener("keydown",w7,!0),e.addEventListener("mousedown",F2,!0),e.addEventListener("pointerdown",F2,!0),e.addEventListener("touchstart",F2,!0),e.addEventListener("visibilitychange",S7,!0)}function T7(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Cb||b7(t)}function lE(){const e=z.useCallback(i=>{i!=null&&C7(i.ownerDocument)},[]),t=z.useRef(!1);function r(){return t.current?(ZC=!0,_7.start(100,()=>{ZC=!1}),t.current=!1,!0):!1}function n(i){return T7(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:n,onBlur:r,ref:e}}function k7(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const E7=e=>{const t=z.useRef({});return z.useEffect(()=>{t.current=e}),t.current},I7={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function qr(e,t,r=void 0){const n={};return Object.keys(e).forEach(i=>{n[i]=e[i].reduce((o,u)=>{if(u){const a=t(u);a!==""&&o.push(a),r&&r[u]&&o.push(r[u])}return o},[]).join(" ")}),n}function M7(e){return typeof e=="string"}function RL(e,t,r){return e===void 0||M7(e)?t:K({},t,{ownerState:K({},t.ownerState,r)})}function go(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function EA(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function DL(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const P=ei(r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),R=K({},r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),$=K({},r,i,n);return P.length>0&&($.className=P),Object.keys(R).length>0&&($.style=R),{props:$,internalRef:void 0}}const u=go(K({},i,n)),a=EA(n),p=EA(i),m=t(u),w=ei(m==null?void 0:m.className,r==null?void 0:r.className,o,i==null?void 0:i.className,n==null?void 0:n.className),C=K({},m==null?void 0:m.style,r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),T=K({},m,r,p,a);return w.length>0&&(T.className=w),Object.keys(C).length>0&&(T.style=C),{props:T,internalRef:m.ref}}function zL(e,t,r){return typeof e=="function"?e(t,r):e}const P7=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function LL(e){var t;const{elementType:r,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:o=!1}=e,u=Gt(e,P7),a=o?{}:zL(n,i),{props:p,internalRef:m}=DL(K({},u,{externalSlotProps:a})),w=fn(m,a==null?void 0:a.ref,(t=e.additionalProps)==null?void 0:t.ref);return RL(r,K({},p,{ref:w}),i)}function my(e){if(parseInt(z.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return(e==null?void 0:e.ref)||null}const OL=z.createContext(null);function cE(){return z.useContext(OL)}const A7=typeof Symbol=="function"&&Symbol.for,R7=A7?Symbol.for("mui.nested"):"__THEME_NESTED__";function D7(e,t){return typeof t=="function"?t(e):K({},e,t)}function z7(e){const{children:t,theme:r}=e,n=cE(),i=z.useMemo(()=>{const o=n===null?r:D7(n,r);return o!=null&&(o[R7]=n!==null),o},[r,n]);return N.jsx(OL.Provider,{value:i,children:t})}const L7=["value"],O7=z.createContext();function $7(e){let{value:t}=e,r=Gt(e,L7);return N.jsx(O7.Provider,K({value:t??!0},r))}const $L=z.createContext(void 0);function B7({value:e,children:t}){return N.jsx($L.Provider,{value:e,children:t})}function F7(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?A1(i.defaultProps,n):!i.styleOverrides&&!i.variants?A1(i,n):n}function N7({props:e,name:t}){const r=z.useContext($L);return F7({props:e,name:t,theme:{components:r}})}const IA={};function MA(e,t,r,n=!1){return z.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),u=e?K({},t,{[e]:o}):o;return n?()=>u:u}return e?K({},t,{[e]:r}):K({},t,r)},[e,t,r,n])}function j7(e){const{children:t,theme:r,themeId:n}=e,i=wL(IA),o=cE()||IA,u=MA(n,i,r),a=MA(n,o,r,!0),p=u.direction==="rtl";return N.jsx(z7,{theme:a,children:N.jsx(Fp.Provider,{value:u,children:N.jsx($7,{value:p,children:N.jsx(B7,{value:u==null?void 0:u.components,children:t})})})})}const uE="mode",hE="color-scheme",BL="data-color-scheme";function V7(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=uE,colorSchemeStorageKey:o=hE,attribute:u=BL,colorSchemeNode:a="document.documentElement",nonce:p}=e||{};return N.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${i}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${o}-dark') || '${n}';
    } else {
      colorScheme = localStorage.getItem('${o}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${o}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${o}-dark') || '${n}';
  }
  if (colorScheme) {
    ${a}.setAttribute('${u}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function PA(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function FL(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function U7(e){return FL(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function N2(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function H7(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:o=uE,colorSchemeStorageKey:u=hE,storageWindow:a=typeof window>"u"?void 0:window}=e,p=i.join(","),[m,w]=z.useState(()=>{const H=N2(o,t),D=N2(`${u}-light`,r),O=N2(`${u}-dark`,n);return{mode:H,systemMode:PA(H),lightColorScheme:D,darkColorScheme:O}}),C=U7(m),T=z.useCallback(H=>{w(D=>{if(H===D.mode)return D;const O=H??t;try{localStorage.setItem(o,O)}catch{}return K({},D,{mode:O,systemMode:PA(O)})})},[o,t]),P=z.useCallback(H=>{H?typeof H=="string"?H&&!p.includes(H)?console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`):w(D=>{const O=K({},D);return FL(D,L=>{try{localStorage.setItem(`${u}-${L}`,H)}catch{}L==="light"&&(O.lightColorScheme=H),L==="dark"&&(O.darkColorScheme=H)}),O}):w(D=>{const O=K({},D),L=H.light===null?r:H.light,Q=H.dark===null?n:H.dark;if(L)if(!p.includes(L))console.error(`\`${L}\` does not exist in \`theme.colorSchemes\`.`);else{O.lightColorScheme=L;try{localStorage.setItem(`${u}-light`,L)}catch{}}if(Q)if(!p.includes(Q))console.error(`\`${Q}\` does not exist in \`theme.colorSchemes\`.`);else{O.darkColorScheme=Q;try{localStorage.setItem(`${u}-dark`,Q)}catch{}}return O}):w(D=>{try{localStorage.setItem(`${u}-light`,r),localStorage.setItem(`${u}-dark`,n)}catch{}return K({},D,{lightColorScheme:r,darkColorScheme:n})})},[p,u,r,n]),R=z.useCallback(H=>{m.mode==="system"&&w(D=>{const O=H!=null&&H.matches?"dark":"light";return D.systemMode===O?D:K({},D,{systemMode:O})})},[m.mode]),$=z.useRef(R);return $.current=R,z.useEffect(()=>{const H=(...O)=>$.current(...O),D=window.matchMedia("(prefers-color-scheme: dark)");return D.addListener(H),H(D),()=>{D.removeListener(H)}},[]),z.useEffect(()=>{if(a){const H=D=>{const O=D.newValue;typeof D.key=="string"&&D.key.startsWith(u)&&(!O||p.match(O))&&(D.key.endsWith("light")&&P({light:O}),D.key.endsWith("dark")&&P({dark:O})),D.key===o&&(!O||["light","dark","system"].includes(O))&&T(O||t)};return a.addEventListener("storage",H),()=>{a.removeEventListener("storage",H)}}},[P,T,o,u,p,t,a]),K({},m,{colorScheme:C,setMode:T,setColorScheme:P})}const G7=["colorSchemes","components","generateCssVars","cssVarPrefix"],q7="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function NL(e){const{themeId:t,theme:r={},attribute:n=BL,modeStorageKey:i=uE,colorSchemeStorageKey:o=hE,defaultMode:u="light",defaultColorScheme:a,disableTransitionOnChange:p=!1,resolveTheme:m,excludeVariablesFromRoot:w}=e;(!r.colorSchemes||typeof a=="string"&&!r.colorSchemes[a]||typeof a=="object"&&!r.colorSchemes[a==null?void 0:a.light]||typeof a=="object"&&!r.colorSchemes[a==null?void 0:a.dark])&&console.error(`MUI: \`${a}\` does not exist in \`theme.colorSchemes\`.`);const C=z.createContext(void 0),T=()=>{const D=z.useContext(C);if(!D)throw new Error(kc(19));return D};function P(D){const{children:O,theme:L=r,modeStorageKey:Q=i,colorSchemeStorageKey:V=o,attribute:F=n,defaultMode:X=u,defaultColorScheme:re=a,disableTransitionOnChange:ye=p,storageWindow:me=typeof window>"u"?void 0:window,documentNode:we=typeof document>"u"?void 0:document,colorSchemeNode:ke=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Ie=":root",disableNestedContext:qe=!1,disableStyleSheetGeneration:Re=!1}=D,Se=z.useRef(!1),Fe=cE(),Ce=z.useContext(C),Ne=!!Ce&&!qe,Je=L[t],at=Je||L,{colorSchemes:st={},components:Dt={},generateCssVars:Ct=()=>({vars:{},css:{}}),cssVarPrefix:Bt}=at,Tt=Gt(at,G7),it=Object.keys(st),Ze=typeof re=="string"?re:re.light,rt=typeof re=="string"?re:re.dark,{mode:pt,setMode:ur,systemMode:or,lightColorScheme:Er,darkColorScheme:jr,colorScheme:ar,setColorScheme:It}=H7({supportedColorSchemes:it,defaultLightColorScheme:Ze,defaultDarkColorScheme:rt,modeStorageKey:Q,colorSchemeStorageKey:V,defaultMode:X,storageWindow:me});let gr=pt,Wt=ar;Ne&&(gr=Ce.mode,Wt=Ce.colorScheme);const Br=gr||(X==="system"?u:X),He=Wt||(Br==="dark"?rt:Ze),{css:Cr,vars:Rr}=Ct(),tr=K({},Tt,{components:Dt,colorSchemes:st,cssVarPrefix:Bt,vars:Rr,getColorSchemeSelector:rr=>`[${F}="${rr}"] &`}),lr={},Pr={};Object.entries(st).forEach(([rr,mr])=>{const{css:ln,vars:je}=Ct(rr);tr.vars=Oi(tr.vars,je),rr===He&&(Object.keys(mr).forEach(wt=>{mr[wt]&&typeof mr[wt]=="object"?tr[wt]=K({},tr[wt],mr[wt]):tr[wt]=mr[wt]}),tr.palette&&(tr.palette.colorScheme=rr));const kt=typeof re=="string"?re:X==="dark"?re.dark:re.light;if(rr===kt){if(w){const wt={};w(Bt).forEach(Ee=>{wt[Ee]=ln[Ee],delete ln[Ee]}),lr[`[${F}="${rr}"]`]=wt}lr[`${Ie}, [${F}="${rr}"]`]=ln}else Pr[`${Ie===":root"?"":Ie}[${F}="${rr}"]`]=ln}),tr.vars=Oi(tr.vars,Rr),z.useEffect(()=>{Wt&&ke&&ke.setAttribute(F,Wt)},[Wt,F,ke]),z.useEffect(()=>{let rr;if(ye&&Se.current&&we){const mr=we.createElement("style");mr.appendChild(we.createTextNode(q7)),we.head.appendChild(mr),window.getComputedStyle(we.body),rr=setTimeout(()=>{we.head.removeChild(mr)},1)}return()=>{clearTimeout(rr)}},[Wt,ye,we]),z.useEffect(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const Fr=z.useMemo(()=>({allColorSchemes:it,colorScheme:Wt,darkColorScheme:jr,lightColorScheme:Er,mode:gr,setColorScheme:It,setMode:ur,systemMode:or}),[it,Wt,jr,Er,gr,It,ur,or]);let Ir=!0;(Re||Ne&&(Fe==null?void 0:Fe.cssVarPrefix)===Bt)&&(Ir=!1);const vr=N.jsxs(z.Fragment,{children:[Ir&&N.jsxs(z.Fragment,{children:[N.jsx(Bg,{styles:{[Ie]:Cr}}),N.jsx(Bg,{styles:lr}),N.jsx(Bg,{styles:Pr})]}),N.jsx(j7,{themeId:Je?t:void 0,theme:m?m(tr):tr,children:O})]});return Ne?vr:N.jsx(C.Provider,{value:Fr,children:vr})}const R=typeof a=="string"?a:a.light,$=typeof a=="string"?a:a.dark;return{CssVarsProvider:P,useColorScheme:T,getInitColorSchemeScript:D=>V7(K({attribute:n,colorSchemeStorageKey:o,defaultMode:u,defaultLightColorScheme:R,defaultDarkColorScheme:$,modeStorageKey:i},D))}}function Tb(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const AA=(e,t,r,n=[])=>{let i=e;t.forEach((o,u)=>{u===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},W7=(e,t,r)=>{function n(i,o=[],u=[]){Object.entries(i).forEach(([a,p])=>{(!r||!r([...o,a]))&&p!=null&&(typeof p=="object"&&Object.keys(p).length>0?n(p,[...o,a],Array.isArray(p)?[...u,a]:u):t([...o,a],p,u))})}n(e)},Z7=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function j2(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},u={};return W7(e,(a,p,m)=>{if((typeof p=="string"||typeof p=="number")&&(!n||!n(a,p))){const w=`--${r?`${r}-`:""}${a.join("-")}`;Object.assign(i,{[w]:Z7(a,p)}),AA(o,a,`var(${w})`,m),AA(u,a,`var(${w}, ${p})`,m)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:u}}function hv(e){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hv(e)}function K7(e,t){if(hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function X7(e){var t=K7(e,"string");return hv(t)=="symbol"?t:t+""}const J7=["colorSchemes","components","defaultColorScheme"];function jL(e,t){const{colorSchemes:r={},defaultColorScheme:n="light"}=e,i=Gt(e,J7),{vars:o,css:u,varsWithDefaults:a}=j2(i,t);let p=a;const m={},{[n]:w}=r,C=Gt(r,[n].map(X7));if(Object.entries(C||{}).forEach(([P,R])=>{const{vars:$,css:H,varsWithDefaults:D}=j2(R,t);p=Oi(p,D),m[P]={css:H,vars:$}}),w){const{css:P,vars:R,varsWithDefaults:$}=j2(w,t);p=Oi(p,$),m[n]={css:P,vars:R}}return{vars:p,generateCssVars:P=>{var R;if(!P){var $;const D=K({},u);return{css:D,vars:o,selector:(t==null||($=t.getSelector)==null?void 0:$.call(t,P,D))||":root"}}const H=K({},m[P].css);return{css:H,vars:m[P].vars,selector:(t==null||(R=t.getSelector)==null?void 0:R.call(t,P,H))||":root"}}}}const Y7=(e,t)=>e.filter(r=>t.includes(r)),Q7=(e,t,r)=>{const n=e.keys[0];Array.isArray(t)?t.forEach((i,o)=>{r((u,a)=>{o<=e.keys.length-1&&(o===0?Object.assign(u,a):u[e.up(e.keys[o])]=a)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Y7(e.keys,Object.keys(t))).forEach(o=>{if(e.keys.indexOf(o)!==-1){const u=t[o];u!==void 0&&r((a,p)=>{n===o?Object.assign(a,p):a[e.up(o)]=p},u)}}):(typeof t=="number"||typeof t=="string")&&r((i,o)=>{Object.assign(i,o)},t)},eU=["component","direction","spacing","divider","children","className","useFlexGap"],tU=hy(),rU=c7("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function nU(e){return PL({props:e,name:"MuiStack",defaultTheme:tU})}function iU(e,t){const r=z.Children.toArray(e).filter(Boolean);return r.reduce((n,i,o)=>(n.push(i),o<r.length-1&&n.push(z.cloneElement(t,{key:`separator-${o}`})),n),[])}const oU=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],aU=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},Qs({theme:t},$2({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=nE(t),i=Object.keys(t.breakpoints.values).reduce((p,m)=>((typeof e.spacing=="object"&&e.spacing[m]!=null||typeof e.direction=="object"&&e.direction[m]!=null)&&(p[m]=!0),p),{}),o=$2({values:e.direction,base:i}),u=$2({values:e.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((p,m,w)=>{if(!o[p]){const T=m>0?o[w[m-1]]:"column";o[p]=T}}),r=Oi(r,Qs({theme:t},u,(p,m)=>e.useFlexGap?{gap:Vh(n,p)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${oU(m?o[m]:e.direction)}`]:Vh(n,p)}}))}return r=Y9(t.breakpoints,r),r};function sU(e={}){const{createStyledComponent:t=rU,useThemeProps:r=nU,componentName:n="MuiStack"}=e,i=()=>qr({root:["root"]},p=>dy(n,p),{}),o=t(aU);return z.forwardRef(function(p,m){const w=r(p),C=hb(w),{component:T="div",direction:P="column",spacing:R=0,divider:$,children:H,className:D,useFlexGap:O=!1}=C,L=Gt(C,eU),Q={direction:P,spacing:R,useFlexGap:O},V=i();return N.jsx(o,K({as:T,ownerState:Q,ref:m,className:ei(V.root,D)},L,{children:$?iU(H,$):H}))})}const lU=K({},od,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function cU(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const en=(e,t)=>dy(e,t,"Mui"),Jr=(e,t)=>db(e,t,"Mui"),uU=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),RA=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},DA=(e,t,r)=>{const n={};return Object.entries(t||{}).forEach(([i,o])=>{if(i.match(new RegExp(`${e}(color|bg|border)`,"i"))&&o){const u=r?r(i):o;i.includes("Disabled")&&(n.pointerEvents="none",n.cursor="default",n["--Icon-color"]="currentColor"),i.match(/(Hover|Active|Disabled)/)||(n["--variant-borderWidth"]||(n["--variant-borderWidth"]="0px"),i.includes("Border")&&(n["--variant-borderWidth"]="1px",n.border="var(--variant-borderWidth) solid")),RA(n,i,u)}}),n},Eo=(e,t)=>{let r={};{const{getCssVar:n,palette:i}=t;Object.entries(i).forEach(o=>{const[u,a]=o;uU(a)&&typeof a=="object"&&(r=K({},r,{[u]:DA(e,a,p=>`var(--variant-${p}, ${n(`palette-${u}-${p}`,i[u][p])})`)}))})}return r.context=DA(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},hU=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],dU=["colorSchemes"],fU=(e="joy")=>Tb(e);function VL(e){var t,r,n,i,o,u,a,p,m,w;const C=e||{},{cssVarPrefix:T="joy",breakpoints:P,spacing:R,components:$,variants:H,shouldSkipGeneratingVar:D=cU}=C,O=Gt(C,hU),L=fU(T),Q={primary:tg.blue,neutral:tg.grey,danger:tg.red,success:tg.green,warning:tg.yellow,common:{white:"#FFF",black:"#000"}},V=Ze=>{var rt;const pt=Ze.split("-"),ur=pt[1],or=pt[2];return L(Ze,(rt=Q[ur])==null?void 0:rt[or])},F=Ze=>({plainColor:V(`palette-${Ze}-500`),plainHoverBg:V(`palette-${Ze}-100`),plainActiveBg:V(`palette-${Ze}-200`),plainDisabledColor:V("palette-neutral-400"),outlinedColor:V(`palette-${Ze}-500`),outlinedBorder:V(`palette-${Ze}-300`),outlinedHoverBg:V(`palette-${Ze}-100`),outlinedActiveBg:V(`palette-${Ze}-200`),outlinedDisabledColor:V("palette-neutral-400"),outlinedDisabledBorder:V("palette-neutral-200"),softColor:V(`palette-${Ze}-700`),softBg:V(`palette-${Ze}-100`),softHoverBg:V(`palette-${Ze}-200`),softActiveColor:V(`palette-${Ze}-800`),softActiveBg:V(`palette-${Ze}-300`),softDisabledColor:V("palette-neutral-400"),softDisabledBg:V("palette-neutral-50"),solidColor:V("palette-common-white"),solidBg:V(`palette-${Ze}-500`),solidHoverBg:V(`palette-${Ze}-600`),solidActiveBg:V(`palette-${Ze}-700`),solidDisabledColor:V("palette-neutral-400"),solidDisabledBg:V("palette-neutral-100")}),X=Ze=>({plainColor:V(`palette-${Ze}-300`),plainHoverBg:V(`palette-${Ze}-800`),plainActiveBg:V(`palette-${Ze}-700`),plainDisabledColor:V("palette-neutral-500"),outlinedColor:V(`palette-${Ze}-200`),outlinedBorder:V(`palette-${Ze}-700`),outlinedHoverBg:V(`palette-${Ze}-800`),outlinedActiveBg:V(`palette-${Ze}-700`),outlinedDisabledColor:V("palette-neutral-500"),outlinedDisabledBorder:V("palette-neutral-800"),softColor:V(`palette-${Ze}-200`),softBg:V(`palette-${Ze}-800`),softHoverBg:V(`palette-${Ze}-700`),softActiveColor:V(`palette-${Ze}-100`),softActiveBg:V(`palette-${Ze}-600`),softDisabledColor:V("palette-neutral-500"),softDisabledBg:V("palette-neutral-800"),solidColor:V("palette-common-white"),solidBg:V(`palette-${Ze}-500`),solidHoverBg:V(`palette-${Ze}-600`),solidActiveBg:V(`palette-${Ze}-700`),solidDisabledColor:V("palette-neutral-500"),solidDisabledBg:V("palette-neutral-800")}),re={palette:{mode:"light",primary:K({},Q.primary,F("primary")),neutral:K({},Q.neutral,F("neutral"),{plainColor:V("palette-neutral-700"),plainHoverColor:V("palette-neutral-900"),outlinedColor:V("palette-neutral-700")}),danger:K({},Q.danger,F("danger")),success:K({},Q.success,F("success")),warning:K({},Q.warning,F("warning")),common:{white:"#FFF",black:"#000"},text:{primary:V("palette-neutral-800"),secondary:V("palette-neutral-700"),tertiary:V("palette-neutral-600"),icon:V("palette-neutral-500")},background:{body:V("palette-common-white"),surface:V("palette-neutral-50"),popup:V("palette-common-white"),level1:V("palette-neutral-100"),level2:V("palette-neutral-200"),level3:V("palette-neutral-300"),tooltip:V("palette-neutral-500"),backdrop:`rgba(${L("palette-neutral-darkChannel",wh(Q.neutral[900]))} / 0.25)`},divider:`rgba(${L("palette-neutral-mainChannel",wh(Q.neutral[500]))} / 0.2)`,focusVisible:V("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},ye={palette:{mode:"dark",primary:K({},Q.primary,X("primary")),neutral:K({},Q.neutral,X("neutral"),{plainColor:V("palette-neutral-300"),plainHoverColor:V("palette-neutral-300")}),danger:K({},Q.danger,X("danger")),success:K({},Q.success,X("success")),warning:K({},Q.warning,X("warning")),common:{white:"#FFF",black:"#000"},text:{primary:V("palette-neutral-100"),secondary:V("palette-neutral-300"),tertiary:V("palette-neutral-400"),icon:V("palette-neutral-400")},background:{body:V("palette-common-black"),surface:V("palette-neutral-900"),popup:V("palette-common-black"),level1:V("palette-neutral-800"),level2:V("palette-neutral-700"),level3:V("palette-neutral-600"),tooltip:V("palette-neutral-600"),backdrop:`rgba(${L("palette-neutral-darkChannel",wh(Q.neutral[50]))} / 0.25)`},divider:`rgba(${L("palette-neutral-mainChannel",wh(Q.neutral[500]))} / 0.16)`,focusVisible:V("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},me='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',we=K({body:`"Inter", ${L(`fontFamily-fallback, ${me}`)}`,display:`"Inter", ${L(`fontFamily-fallback, ${me}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:me},O.fontFamily),ke=K({sm:300,md:500,lg:600,xl:700},O.fontWeight),Ie=K({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},O.fontSize),qe=K({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},O.lineHeight),Re=(t=(r=O.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:re.shadowRing,Se=(n=(i=O.colorSchemes)==null||(i=i.light)==null?void 0:i.shadowChannel)!=null?n:re.shadowChannel,Fe=(o=(u=O.colorSchemes)==null||(u=u.light)==null?void 0:u.shadowOpacity)!=null?o:re.shadowOpacity,Ce={colorSchemes:{light:re,dark:ye},fontSize:Ie,fontFamily:we,fontWeight:ke,focus:{thickness:"2px",selector:`&.${en("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${L("focus-thickness",(a=(p=O.focus)==null?void 0:p.thickness)!=null?a:"2px")})`,outline:`${L("focus-thickness",(m=(w=O.focus)==null?void 0:w.thickness)!=null?m:"2px")} solid ${L("palette-focusVisible",Q.primary[500])}`}},lineHeight:qe,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${L("shadowRing",Re)}, 0px 1px 2px 0px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,sm:`${L("shadowRing",Re)}, 0px 1px 2px 0px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 2px 4px 0px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,md:`${L("shadowRing",Re)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 6px 12px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,lg:`${L("shadowRing",Re)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 12px 16px -4px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,xl:`${L("shadowRing",Re)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 20px 24px -4px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-xl, ${ke.xl}`),fontSize:L(`fontSize-xl4, ${Ie.xl4}`),lineHeight:L(`lineHeight-xs, ${qe.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${re.palette.text.primary}`)},h2:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-xl, ${ke.xl}`),fontSize:L(`fontSize-xl3, ${Ie.xl3}`),lineHeight:L(`lineHeight-xs, ${qe.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${re.palette.text.primary}`)},h3:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-lg, ${ke.lg}`),fontSize:L(`fontSize-xl2, ${Ie.xl2}`),lineHeight:L(`lineHeight-xs, ${qe.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${re.palette.text.primary}`)},h4:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-lg, ${ke.lg}`),fontSize:L(`fontSize-xl, ${Ie.xl}`),lineHeight:L(`lineHeight-md, ${qe.md}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${re.palette.text.primary}`)},"title-lg":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-lg, ${ke.lg}`),fontSize:L(`fontSize-lg, ${Ie.lg}`),lineHeight:L(`lineHeight-xs, ${qe.xs}`),color:L(`palette-text-primary, ${re.palette.text.primary}`)},"title-md":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-md, ${ke.md}`),fontSize:L(`fontSize-md, ${Ie.md}`),lineHeight:L(`lineHeight-md, ${qe.md}`),color:L(`palette-text-primary, ${re.palette.text.primary}`)},"title-sm":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-md, ${ke.md}`),fontSize:L(`fontSize-sm, ${Ie.sm}`),lineHeight:L(`lineHeight-sm, ${qe.sm}`),color:L(`palette-text-primary, ${re.palette.text.primary}`)},"body-lg":{fontFamily:L(`fontFamily-body, ${we.body}`),fontSize:L(`fontSize-lg, ${Ie.lg}`),lineHeight:L(`lineHeight-md, ${qe.md}`),color:L(`palette-text-secondary, ${re.palette.text.secondary}`)},"body-md":{fontFamily:L(`fontFamily-body, ${we.body}`),fontSize:L(`fontSize-md, ${Ie.md}`),lineHeight:L(`lineHeight-md, ${qe.md}`),color:L(`palette-text-secondary, ${re.palette.text.secondary}`)},"body-sm":{fontFamily:L(`fontFamily-body, ${we.body}`),fontSize:L(`fontSize-sm, ${Ie.sm}`),lineHeight:L(`lineHeight-md, ${qe.md}`),color:L(`palette-text-tertiary, ${re.palette.text.tertiary}`)},"body-xs":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-md, ${ke.md}`),fontSize:L(`fontSize-xs, ${Ie.xs}`),lineHeight:L(`lineHeight-md, ${qe.md}`),color:L(`palette-text-tertiary, ${re.palette.text.tertiary}`)}}},Ne=O?Oi(Ce,O):Ce,{colorSchemes:Je}=Ne,at=Gt(Ne,dU),st=K({colorSchemes:Je},at,{breakpoints:Qk(P??{}),components:Oi({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:Ze,theme:rt})=>{var pt;const ur=Ze.instanceFontSize;return K({margin:"var(--Icon-margin)"},Ze.fontSize&&Ze.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${rt.vars.fontSize[Ze.fontSize]})`},!Ze.htmlColor&&K({color:`var(--Icon-color, ${st.vars.palette.text.icon})`},Ze.color&&Ze.color!=="inherit"&&rt.vars.palette[Ze.color]&&{color:`rgba(${(pt=rt.vars.palette[Ze.color])==null?void 0:pt.mainChannel} / 1)`}),ur&&ur!=="inherit"&&{"--Icon-fontSize":rt.vars.fontSize[ur]})}}}},$),cssVarPrefix:T,getCssVar:L,spacing:xL(R)});function Dt(Ze,rt){Object.keys(rt).forEach(pt=>{const ur={main:"500",light:"200",dark:"700"};Ze==="dark"&&(ur.main=400),!rt[pt].mainChannel&&rt[pt][ur.main]&&(rt[pt].mainChannel=wh(rt[pt][ur.main])),!rt[pt].lightChannel&&rt[pt][ur.light]&&(rt[pt].lightChannel=wh(rt[pt][ur.light])),!rt[pt].darkChannel&&rt[pt][ur.dark]&&(rt[pt].darkChannel=wh(rt[pt][ur.dark]))})}Object.entries(st.colorSchemes).forEach(([Ze,rt])=>{Dt(Ze,rt.palette)});const Ct={prefix:T,shouldSkipGeneratingVar:D},{vars:Bt,generateCssVars:Tt}=jL(K({colorSchemes:Je},at),Ct);st.vars=Bt,st.generateCssVars=Tt,st.unstable_sxConfig=K({},lU,e==null?void 0:e.unstable_sxConfig),st.unstable_sx=function(rt){return $c({sx:rt,theme:this})},st.getColorSchemeSelector=Ze=>Ze==="light"?"&":`&[data-joy-color-scheme="${Ze}"], [data-joy-color-scheme="${Ze}"] &`;const it={getCssVar:L,palette:st.colorSchemes.light.palette};return st.variants=Oi({plain:Eo("plain",it),plainHover:Eo("plainHover",it),plainActive:Eo("plainActive",it),plainDisabled:Eo("plainDisabled",it),outlined:Eo("outlined",it),outlinedHover:Eo("outlinedHover",it),outlinedActive:Eo("outlinedActive",it),outlinedDisabled:Eo("outlinedDisabled",it),soft:Eo("soft",it),softHover:Eo("softHover",it),softActive:Eo("softActive",it),softDisabled:Eo("softDisabled",it),solid:Eo("solid",it),solidHover:Eo("solidHover",it),solidActive:Eo("solidActive",it),solidDisabled:Eo("solidDisabled",it)},H),st.palette=K({},st.colorSchemes.light.palette,{colorScheme:"light"}),st.shouldSkipGeneratingVar=D,st.applyStyles=oE,st}const Np=VL(),ng={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:pU,useColorScheme:dE,getInitColorSchemeScript:a_e}=NL({themeId:ly,theme:Np,attribute:ng.attribute,modeStorageKey:ng.modeStorageKey,colorSchemeStorageKey:ng.colorSchemeStorageKey,defaultColorScheme:{light:ng.defaultLightColorScheme,dark:ng.defaultDarkColorScheme}}),ft=ML({defaultTheme:Np,themeId:ly});function tn({props:e,name:t}){return PL({props:e,name:t,defaultTheme:K({},Np,{components:{}}),themeId:ly})}function mU(e){return N.jsx(UV,K({},e,{defaultTheme:Np,themeId:ly}))}function zA(e,t,r=(n,i)=>n===i){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}const gU={disableDefaultClasses:!1},vU=z.createContext(gU);function yU(e){const{disableDefaultClasses:t}=z.useContext(vU);return r=>t?"":e(r)}function _U(e){const{rootElementName:t="",componentName:r}=e,[n,i]=z.useState(t.toUpperCase()),o=z.useCallback(u=>{var a;i((a=u==null?void 0:u.tagName)!=null?a:"")},[]);return[n,o]}const UL="base";function xU(e){return`${UL}--${e}`}function bU(e,t){return`${UL}-${e}-${t}`}function HL(e,t){const r=TL[t];return r?xU(r):bU(e,t)}function wU(e,t){const r={};return t.forEach(n=>{r[n]=HL(e,n)}),r}function ol(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:n,rootRef:i,tabIndex:o,to:u,type:a,rootElementName:p}=e,m=z.useRef(null),[w,C]=z.useState(!1),{isFocusVisibleRef:T,onFocus:P,onBlur:R,ref:$}=lE(),[H,D]=z.useState(!1);t&&!r&&H&&D(!1),z.useEffect(()=>{T.current=H},[H,T]);const[O,L]=_U({rootElementName:p??(n||u?"a":void 0),componentName:"Button"}),Q=Re=>Se=>{var Fe;H&&Se.preventDefault(),(Fe=Re.onMouseLeave)==null||Fe.call(Re,Se)},V=Re=>Se=>{var Fe;R(Se),T.current===!1&&D(!1),(Fe=Re.onBlur)==null||Fe.call(Re,Se)},F=Re=>Se=>{var Fe;if(m.current||(m.current=Se.currentTarget),P(Se),T.current===!0){var Ce;D(!0),(Ce=Re.onFocusVisible)==null||Ce.call(Re,Se)}(Fe=Re.onFocus)==null||Fe.call(Re,Se)},X=()=>{const Re=m.current;return O==="BUTTON"||O==="INPUT"&&["button","submit","reset"].includes(Re==null?void 0:Re.type)||O==="A"&&(Re==null?void 0:Re.href)},re=Re=>Se=>{if(!t){var Fe;(Fe=Re.onClick)==null||Fe.call(Re,Se)}},ye=Re=>Se=>{var Fe;t||(C(!0),document.addEventListener("mouseup",()=>{C(!1)},{once:!0})),(Fe=Re.onMouseDown)==null||Fe.call(Re,Se)},me=Re=>Se=>{var Fe;if((Fe=Re.onKeyDown)==null||Fe.call(Re,Se),!Se.defaultMuiPrevented&&(Se.target===Se.currentTarget&&!X()&&Se.key===" "&&Se.preventDefault(),Se.target===Se.currentTarget&&Se.key===" "&&!t&&C(!0),Se.target===Se.currentTarget&&!X()&&Se.key==="Enter"&&!t)){var Ce;(Ce=Re.onClick)==null||Ce.call(Re,Se),Se.preventDefault()}},we=Re=>Se=>{var Fe;if(Se.target===Se.currentTarget&&C(!1),(Fe=Re.onKeyUp)==null||Fe.call(Re,Se),Se.target===Se.currentTarget&&!X()&&!t&&Se.key===" "&&!Se.defaultMuiPrevented){var Ce;(Ce=Re.onClick)==null||Ce.call(Re,Se)}},ke=fn(L,i,$,m),Ie={};return o!==void 0&&(Ie.tabIndex=o),O==="BUTTON"?(Ie.type=a??"button",r?Ie["aria-disabled"]=t:Ie.disabled=t):O==="INPUT"?a&&["button","submit","reset"].includes(a)&&(r?Ie["aria-disabled"]=t:Ie.disabled=t):O!==""&&(!n&&!u&&(Ie.role="button",Ie.tabIndex=o??0),t&&(Ie["aria-disabled"]=t,Ie.tabIndex=r?o??0:-1)),{getRootProps:(Re={})=>{const Se=K({},go(e),go(Re)),Fe=K({type:a},Se,Ie,Re,{onBlur:V(Se),onClick:re(Se),onFocus:F(Se),onKeyDown:me(Se),onKeyUp:we(Se),onMouseDown:ye(Se),onMouseLeave:Q(Se),ref:ke});return delete Fe.onFocusVisible,Fe},focusVisible:H,setFocusVisible:D,active:w,rootRef:ke}}const kb=z.createContext(null);function SU(e,t){return e===t}const V2={},LA=()=>{};function KC(e,t){const r=K({},e);return Object.keys(t).forEach(n=>{t[n]!==void 0&&(r[n]=t[n])}),r}function CU(e){const{nextState:t,initialState:r,stateComparers:n,onStateChange:i,controlledProps:o,lastActionRef:u}=e,a=z.useRef(r);z.useEffect(()=>{if(u.current===null)return;const p=KC(a.current,o);Object.keys(t).forEach(m=>{var w;const C=(w=n[m])!=null?w:SU,T=t[m],P=p[m];if(P==null&&T!=null||P!=null&&T==null||P!=null&&T!=null&&!C(T,P)){var R,$;i==null||i((R=u.current.event)!=null?R:null,m,T,($=u.current.type)!=null?$:"",t)}}),a.current=t,u.current=null},[a,t,u,i,n,o])}function GL(e){const t=z.useRef(null),{reducer:r,initialState:n,controlledProps:i=V2,stateComparers:o=V2,onStateChange:u=LA,actionContext:a,componentName:p=""}=e;z.useRef(i);const m=z.useCallback((P,R)=>{t.current=R;const $=KC(P,i);return r($,R)},[i,r]),[w,C]=z.useReducer(m,n),T=z.useCallback(P=>{C(K({},P,{context:a}))},[a]);return CU({nextState:w,initialState:n,stateComparers:o??V2,onStateChange:u??LA,controlledProps:i,lastActionRef:t}),[KC(w,i),T]}const Hs={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function TU(e,t){switch(t.type){case Hs.blur:return{open:!1,changeReason:t.event};case Hs.escapeKeyDown:return{open:!1,changeReason:t.event};case Hs.toggle:return{open:!e.open,changeReason:t.event};case Hs.open:return{open:!0,changeReason:t.event};case Hs.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function kU(e={}){const{defaultOpen:t,onOpenChange:r,open:n,componentName:i="useDropdown"}=e,[o,u]=z.useState(""),[a,p]=z.useState(null),m=z.useRef(null),w=z.useCallback(($,H,D,O)=>{H==="open"&&(r==null||r($,D)),m.current=O},[r]),C=z.useMemo(()=>n!==void 0?{open:n}:{},[n]),[T,P]=GL({controlledProps:C,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:w,reducer:TU,componentName:i});return z.useEffect(()=>{!T.open&&m.current!==null&&m.current!==Hs.blur&&(a==null||a.focus())},[T.open,a]),{contextValue:{state:T,dispatch:P,popupId:o,registerPopup:u,registerTrigger:p,triggerElement:a},open:T.open}}function EU(e){const{children:t,open:r,defaultOpen:n,onOpenChange:i}=e,{contextValue:o}=kU({defaultOpen:n,onOpenChange:i,open:r});return N.jsx(kb.Provider,{value:o,children:t})}const IU=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function MU(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function PU(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function AU(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||PU(e))}function RU(e){const t=[],r=[];return Array.from(e.querySelectorAll(IU)).forEach((n,i)=>{const o=MU(n);o===-1||!AU(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function DU(){return!0}function zU(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=RU,isEnabled:u=DU,open:a}=e,p=z.useRef(!1),m=z.useRef(null),w=z.useRef(null),C=z.useRef(null),T=z.useRef(null),P=z.useRef(!1),R=z.useRef(null),$=fn(my(t),R),H=z.useRef(null);z.useEffect(()=>{!a||!R.current||(P.current=!r)},[r,a]),z.useEffect(()=>{if(!a||!R.current)return;const L=Al(R.current);return R.current.contains(L.activeElement)||(R.current.hasAttribute("tabIndex")||R.current.setAttribute("tabIndex","-1"),P.current&&R.current.focus()),()=>{i||(C.current&&C.current.focus&&(p.current=!0,C.current.focus()),C.current=null)}},[a]),z.useEffect(()=>{if(!a||!R.current)return;const L=Al(R.current),Q=X=>{H.current=X,!(n||!u()||X.key!=="Tab")&&L.activeElement===R.current&&X.shiftKey&&(p.current=!0,w.current&&w.current.focus())},V=()=>{const X=R.current;if(X===null)return;if(!L.hasFocus()||!u()||p.current){p.current=!1;return}if(X.contains(L.activeElement)||n&&L.activeElement!==m.current&&L.activeElement!==w.current)return;if(L.activeElement!==T.current)T.current=null;else if(T.current!==null)return;if(!P.current)return;let re=[];if((L.activeElement===m.current||L.activeElement===w.current)&&(re=o(R.current)),re.length>0){var ye,me;const we=!!((ye=H.current)!=null&&ye.shiftKey&&((me=H.current)==null?void 0:me.key)==="Tab"),ke=re[0],Ie=re[re.length-1];typeof ke!="string"&&typeof Ie!="string"&&(we?Ie.focus():ke.focus())}else X.focus()};L.addEventListener("focusin",V),L.addEventListener("keydown",Q,!0);const F=setInterval(()=>{L.activeElement&&L.activeElement.tagName==="BODY"&&V()},50);return()=>{clearInterval(F),L.removeEventListener("focusin",V),L.removeEventListener("keydown",Q,!0)}},[r,n,i,u,a,o]);const D=L=>{C.current===null&&(C.current=L.relatedTarget),P.current=!0,T.current=L.target;const Q=t.props.onFocus;Q&&Q(L)},O=L=>{C.current===null&&(C.current=L.relatedTarget),P.current=!0};return N.jsxs(z.Fragment,{children:[N.jsx("div",{tabIndex:a?0:-1,onFocus:O,ref:m,"data-testid":"sentinelStart"}),z.cloneElement(t,{ref:$,onFocus:D}),N.jsx("div",{tabIndex:a?0:-1,onFocus:O,ref:w,"data-testid":"sentinelEnd"})]})}const LU=z.createContext(void 0);function OU(){return z.useContext(LU)}function $U(e={}){const{defaultValue:t,disabled:r=!1,error:n=!1,onBlur:i,onChange:o,onFocus:u,required:a=!1,value:p,inputRef:m}=e,w=OU();let C,T,P,R,$;if(w){var H,D,O;C=void 0,T=(H=w.disabled)!=null?H:!1,P=(D=w.error)!=null?D:!1,R=(O=w.required)!=null?O:!1,$=w.value}else C=t,T=r,P=n,R=a,$=p;const{current:L}=z.useRef($!=null),Q=z.useCallback(Re=>{},[]),V=z.useRef(null),F=fn(V,m,Q),[X,re]=z.useState(!1);z.useEffect(()=>{!w&&T&&X&&(re(!1),i==null||i())},[w,T,X,i]);const ye=Re=>Se=>{var Fe;if(w!=null&&w.disabled){Se.stopPropagation();return}if((Fe=Re.onFocus)==null||Fe.call(Re,Se),w&&w.onFocus){var Ce;w==null||(Ce=w.onFocus)==null||Ce.call(w)}else re(!0)},me=Re=>Se=>{var Fe;(Fe=Re.onBlur)==null||Fe.call(Re,Se),w&&w.onBlur?w.onBlur():re(!1)},we=Re=>(Se,...Fe)=>{var Ce,Ne;if(!L&&(Se.target||V.current)==null)throw new Error(kc(17));w==null||(Ce=w.onChange)==null||Ce.call(w,Se),(Ne=Re.onChange)==null||Ne.call(Re,Se,...Fe)},ke=Re=>Se=>{var Fe;V.current&&Se.currentTarget===Se.target&&V.current.focus(),(Fe=Re.onClick)==null||Fe.call(Re,Se)};return{disabled:T,error:P,focused:X,formControlContext:w,getInputProps:(Re={})=>{const Fe=K({},{onBlur:i,onChange:o,onFocus:u},go(Re)),Ce=K({},Fe,{onBlur:me(Fe),onChange:we(Fe),onFocus:ye(Fe)});return K({},Ce,{"aria-invalid":P||void 0,defaultValue:C,value:$,required:R,disabled:T},Re,{ref:F},Ce)},getRootProps:(Re={})=>{const Se=go(e,["onBlur","onChange","onFocus"]),Fe=K({},Se,go(Re));return K({},Re,Fe,{onClick:ke(Fe)})},inputRef:F,required:R,value:$}}const Pn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function BU(e,t,r,n,i,o){if(r.length===0||!n&&r.every((a,p)=>i(a,p)))return-1;let u=e;for(;;){if(!o&&t==="next"&&u===r.length||!o&&t==="previous"&&u===-1)return-1;if(n?!1:i(r[u],u))u+=t==="next"?1:-1,o&&(u=(u+r.length)%r.length);else return u}}function Ki(e,t,r){var n;const{items:i,isItemDisabled:o,disableListWrap:u,disabledItemsFocusable:a,itemComparer:p,focusManagement:m}=r,w=m==="DOM"?0:-1,C=i.length-1,T=e==null?-1:i.findIndex(D=>p(D,e));let P,R,$=!u;switch(t){case"reset":if(w===-1)return null;P=0,R="next",$=!1;break;case"start":P=0,R="next",$=!1;break;case"end":P=C,R="previous",$=!1;break;default:{const D=T+t;D<0?!$&&T!==-1||Math.abs(t)>1?(P=0,R="next"):(P=C,R="previous"):D>C?!$||Math.abs(t)>1?(P=C,R="previous"):(P=0,R="next"):(P=D,R=t>=0?"next":"previous")}}const H=BU(P,R,i,a,o,$);return H===-1&&e!==null&&!o(e,T)?e:(n=i[H])!=null?n:null}function FU(e,t,r,n){return r==="none"?[]:r==="single"?n(t[0],e)?t:[e]:t.some(i=>n(i,e))?t.filter(i=>!n(i,e)):[...t,e]}function fE(e,t,r){const{itemComparer:n,isItemDisabled:i,selectionMode:o,items:u}=r,{selectedValues:a}=t,p=u.findIndex(w=>n(e,w));if(i(e,p))return t;const m=FU(e,a,o,n);return K({},t,{selectedValues:m,highlightedValue:e})}function NU(e,t,r){const n=t.highlightedValue,{orientation:i,pageSize:o}=r;switch(e){case"Home":return K({},t,{highlightedValue:Ki(n,"start",r)});case"End":return K({},t,{highlightedValue:Ki(n,"end",r)});case"PageUp":return K({},t,{highlightedValue:Ki(n,-o,r)});case"PageDown":return K({},t,{highlightedValue:Ki(n,o,r)});case"ArrowUp":if(i!=="vertical")break;return K({},t,{highlightedValue:Ki(n,-1,r)});case"ArrowDown":if(i!=="vertical")break;return K({},t,{highlightedValue:Ki(n,1,r)});case"ArrowLeft":{if(i==="vertical")break;return K({},t,{highlightedValue:Ki(n,i==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(i==="vertical")break;return K({},t,{highlightedValue:Ki(n,i==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:fE(t.highlightedValue,t,r)}return t}function jU(e,t){return t.focusManagement==="DOM"?e:K({},e,{highlightedValue:null})}function VU(e,t,r){var n;const i=(n=r(e))==null?void 0:n.trim().toLowerCase();return!i||i.length===0?!1:i.indexOf(t)===0}function UU(e,t,r){const{items:n,isItemDisabled:i,disabledItemsFocusable:o,getItemAsString:u}=r,a=t.length>1;let p=a?e.highlightedValue:Ki(e.highlightedValue,1,r);for(let m=0;m<n.length;m+=1){if(!p||!a&&e.highlightedValue===p)return e;if(VU(p,t,u)&&(!i(p,n.indexOf(p))||o))return K({},e,{highlightedValue:p});p=Ki(p,1,r)}return e}function HU(e,t,r,n){var i;const{itemComparer:o,focusManagement:u}=n;let a=null;if(r.highlightedValue!=null){var p;a=(p=e.find(C=>o(C,r.highlightedValue)))!=null?p:null}else u==="DOM"&&t.length===0&&(a=Ki(null,"reset",n));const w=((i=r.selectedValues)!=null?i:[]).filter(C=>e.some(T=>o(T,C)));return K({},r,{highlightedValue:a,selectedValues:w})}function GU(e,t){return K({},e,{highlightedValue:Ki(null,"reset",t)})}function qU(e,t){return K({},e,{highlightedValue:Ki(null,"end",t)})}function WU(e,t){return K({},e,{selectedValues:[],highlightedValue:Ki(null,"reset",t)})}function Eb(e,t){const{type:r,context:n}=t;switch(r){case Pn.keyDown:return NU(t.key,e,n);case Pn.itemClick:return fE(t.item,e,n);case Pn.blur:return jU(e,n);case Pn.textNavigation:return UU(e,t.searchString,n);case Pn.itemsChange:return HU(t.items,t.previousItems,e,n);case Pn.resetHighlight:return GU(e,n);case Pn.highlightLast:return qU(e,n);case Pn.clearSelection:return WU(e,n);default:return e}}const ZU=500;function KU(e){const t=z.useRef({searchString:"",lastTime:null});return z.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const n=t.current,i=r.key.toLowerCase(),o=performance.now();n.searchString.length>0&&n.lastTime&&o-n.lastTime>ZU?n.searchString=i:(n.searchString.length!==1||i!==n.searchString)&&(n.searchString+=i),n.lastTime=o,e(n.searchString,r)}},[e])}const OA={},XU=()=>{},JU=(e,t)=>e===t,YU=()=>!1,QU=e=>typeof e=="string"?e:String(e),eH=()=>({highlightedValue:null,selectedValues:[]});function pE(e){const{controlledProps:t=OA,disabledItemsFocusable:r=!1,disableListWrap:n=!1,focusManagement:i="activeDescendant",getInitialState:o=eH,getItemDomElement:u,getItemId:a,isItemDisabled:p=YU,rootRef:m,onStateChange:w=XU,items:C,itemComparer:T=JU,getItemAsString:P=QU,onChange:R,onHighlightChange:$,onItemsChange:H,orientation:D="vertical",pageSize:O=5,reducerActionContext:L=OA,selectionMode:Q="single",stateReducer:V,componentName:F="useList"}=e,X=z.useRef(null),re=fn(m,X),ye=z.useCallback((it,Ze,rt)=>{if($==null||$(it,Ze,rt),i==="DOM"&&Ze!=null&&(rt===Pn.itemClick||rt===Pn.keyDown||rt===Pn.textNavigation)){var pt;u==null||(pt=u(Ze))==null||pt.focus()}},[u,$,i]),me=z.useMemo(()=>({highlightedValue:T,selectedValues:(it,Ze)=>zA(it,Ze,T)}),[T]),we=z.useCallback((it,Ze,rt,pt,ur)=>{switch(w==null||w(it,Ze,rt,pt,ur),Ze){case"highlightedValue":ye(it,rt,pt);break;case"selectedValues":R==null||R(it,rt,pt);break}},[ye,R,w]),ke=z.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:n,focusManagement:i,isItemDisabled:p,itemComparer:T,items:C,getItemAsString:P,onHighlightChange:ye,orientation:D,pageSize:O,selectionMode:Q,stateComparers:me}),[r,n,i,p,T,C,P,ye,D,O,Q,me]),Ie=o(),qe=V??Eb,Re=z.useMemo(()=>K({},L,ke),[L,ke]),[Se,Fe]=GL({reducer:qe,actionContext:Re,initialState:Ie,controlledProps:t,stateComparers:me,onStateChange:we,componentName:F}),{highlightedValue:Ce,selectedValues:Ne}=Se,Je=KU((it,Ze)=>Fe({type:Pn.textNavigation,event:Ze,searchString:it})),at=z.useRef([]);z.useEffect(()=>{zA(at.current,C,T)||(Fe({type:Pn.itemsChange,event:null,items:C,previousItems:at.current}),at.current=C,H==null||H(C))},[C,T,Fe,H]);const st=it=>Ze=>{var rt;if((rt=it.onKeyDown)==null||rt.call(it,Ze),Ze.defaultMuiPrevented)return;const pt=["Home","End","PageUp","PageDown"];D==="vertical"?pt.push("ArrowUp","ArrowDown"):pt.push("ArrowLeft","ArrowRight"),i==="activeDescendant"&&pt.push(" ","Enter"),pt.includes(Ze.key)&&Ze.preventDefault(),Fe({type:Pn.keyDown,key:Ze.key,event:Ze}),Je(Ze)},Dt=it=>Ze=>{var rt,pt;(rt=it.onBlur)==null||rt.call(it,Ze),!Ze.defaultMuiPrevented&&((pt=X.current)!=null&&pt.contains(Ze.relatedTarget)||Fe({type:Pn.blur,event:Ze}))},Ct=(it={})=>{const Ze=go(it);return K({},it,{"aria-activedescendant":i==="activeDescendant"&&Ce!=null?a(Ce):void 0,tabIndex:i==="DOM"?-1:0,ref:re},Ze,{onBlur:Dt(Ze),onKeyDown:st(Ze)})},Bt=z.useCallback(it=>{const Ze=(Ne??[]).some(ur=>ur!=null&&T(it,ur)),rt=Ce!=null&&T(it,Ce);return{focusable:i==="DOM",highlighted:rt,selected:Ze}},[T,Ne,Ce,i]),Tt=z.useMemo(()=>({dispatch:Fe,getItemState:Bt}),[Fe,Bt]);return z.useDebugValue({state:Se}),{contextValue:Tt,dispatch:Fe,getRootProps:Ct,rootRef:re,state:Se}}const Uu=z.createContext(null);function mE(e){const{handlePointerOverEvents:t=!1,item:r}=e,n=z.useContext(Uu);if(!n)throw new Error("useListItem must be used within a ListProvider");const{dispatch:i,getItemState:o}=n,{highlighted:u,selected:a,focusable:p}=o(r),m=z.useCallback(P=>R=>{var $;($=P.onClick)==null||$.call(P,R),!R.defaultPrevented&&i({type:Pn.itemClick,item:r,event:R})},[i,r]),w=z.useCallback(P=>R=>{var $;($=P.onMouseOver)==null||$.call(P,R),!R.defaultPrevented&&i({type:Pn.itemHover,item:r,event:R})},[i,r]);let C;return p&&(C=u?0:-1),{getRootProps:(P={})=>{const R=go(P);return K({},P,{onClick:m(R),onPointerOver:t?w(R):void 0,tabIndex:C})},highlighted:u,selected:a}}function tH(e,t){if(t.type===Pn.itemHover)return K({},e,{highlightedValue:t.item});const r=Eb(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return K({},r,{highlightedValue:t.context.items[0]});if(t.type===Pn.keyDown&&t.event.key==="Escape")return K({},r,{open:!1});if(t.type===Pn.blur){var n;if(!((n=t.context.listboxRef.current)!=null&&n.contains(t.event.relatedTarget))){var i,o;const u=(i=t.context.listboxRef.current)==null?void 0:i.getAttribute("id"),a=(o=t.event.relatedTarget)==null?void 0:o.getAttribute("aria-controls");return u&&a&&u===a?r:K({},r,{open:!1,highlightedValue:t.context.items[0]})}}return r}const gy=z.createContext(null);function rH(e){const t=Array.from(e.keys()).map(r=>{const n=e.get(r);return{key:r,subitem:n}});return t.sort((r,n)=>{const i=r.subitem.ref.current,o=n.subitem.ref.current;return i===null||o===null||i===o?0:i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function Ib(){const[e,t]=z.useState(new Map),r=z.useRef(new Set),n=z.useCallback(function(m){r.current.delete(m),t(w=>{const C=new Map(w);return C.delete(m),C})},[]),i=z.useCallback(function(m,w){let C;return typeof m=="function"?C=m(r.current):C=m,r.current.add(C),t(T=>{const P=new Map(T);return P.set(C,w),P}),{id:C,deregister:()=>n(C)}},[n]),o=z.useMemo(()=>rH(e),[e]),u=z.useCallback(function(m){return Array.from(o.keys()).indexOf(m)},[o]);return{contextValue:z.useMemo(()=>({getItemIndex:u,registerItem:i,totalSubitemCount:e.size}),[u,i,e.size]),subitems:o}}function Mb(e,t){const r=z.useContext(gy);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:n}=r,[i,o]=z.useState(typeof e=="function"?void 0:e);return Ec(()=>{const{id:u,deregister:a}=n(e,t);return o(u),a},[n,t,e]),{id:i,index:i!==void 0?r.getItemIndex(i):-1,totalItemCount:r.totalSubitemCount}}function Ic(e,t){return function(n={}){const i=K({},n,e(n));return K({},i,t(i))}}const nH={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function iH(e={}){var t,r;const{listboxRef:n,onItemsChange:i,id:o,disabledItemsFocusable:u=!0,disableListWrap:a=!1,autoFocus:p=!0,componentName:m="useMenu"}=e,w=z.useRef(null),C=fn(w,n),T=(t=wa(o))!=null?t:"",{state:{open:P,changeReason:R},dispatch:$,triggerElement:H,registerPopup:D}=(r=z.useContext(kb))!=null?r:nH,O=z.useRef(P),{subitems:L,contextValue:Q}=Ib(),V=z.useMemo(()=>Array.from(L.keys()),[L]),F=z.useCallback(Ne=>{var Je,at;return Ne==null?null:(Je=(at=L.get(Ne))==null?void 0:at.ref.current)!=null?Je:null},[L]),X=z.useCallback(Ne=>{var Je;return(L==null||(Je=L.get(Ne))==null?void 0:Je.disabled)||!1},[L]),re=z.useCallback(Ne=>{var Je,at;return((Je=L.get(Ne))==null?void 0:Je.label)||((at=L.get(Ne))==null||(at=at.ref.current)==null?void 0:at.innerText)},[L]),ye=z.useMemo(()=>({listboxRef:w}),[w]),{dispatch:me,getRootProps:we,contextValue:ke,state:{highlightedValue:Ie},rootRef:qe}=pE({disabledItemsFocusable:u,disableListWrap:a,focusManagement:"DOM",getItemDomElement:F,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:X,items:V,getItemAsString:re,rootRef:C,onItemsChange:i,reducerActionContext:ye,selectionMode:"none",stateReducer:tH,componentName:m});Ec(()=>{D(T)},[T,D]),Ec(()=>{P&&(R==null?void 0:R.type)==="keydown"&&R.key==="ArrowUp"&&me({type:Pn.highlightLast,event:R})},[P,R,me]),z.useEffect(()=>{if(P&&p&&Ie&&!O.current){var Ne;(Ne=L.get(Ie))==null||(Ne=Ne.ref)==null||(Ne=Ne.current)==null||Ne.focus()}},[P,p,Ie,L,V]),z.useEffect(()=>{var Ne;if((Ne=w.current)!=null&&Ne.contains(document.activeElement)&&Ie!==null){var Je;L==null||(Je=L.get(Ie))==null||(Je=Je.ref.current)==null||Je.focus()}},[Ie,L]);const Re=Ne=>Je=>{var at,st;(at=Ne.onBlur)==null||at.call(Ne,Je),!Je.defaultMuiPrevented&&((st=w.current)!=null&&st.contains(Je.relatedTarget)||Je.relatedTarget===H||$({type:Hs.blur,event:Je}))},Se=Ne=>Je=>{var at;(at=Ne.onKeyDown)==null||at.call(Ne,Je),!Je.defaultMuiPrevented&&Je.key==="Escape"&&$({type:Hs.escapeKeyDown,event:Je})},Fe=(Ne={})=>({onBlur:Re(Ne),onKeyDown:Se(Ne)}),Ce=(Ne={})=>{const Je=Ic(Fe,we),at=go(Ne);return K({},Ne,at,Je(at),{id:T,role:"menu"})};return z.useDebugValue({subitems:L,highlightedValue:Ie}),{contextValue:K({},Q,ke),dispatch:me,getListboxProps:Ce,highlightedValue:Ie,listboxRef:qe,menuItems:L,open:P,triggerElement:H}}function oH(e){const{value:t,children:r}=e,{dispatch:n,getItemIndex:i,getItemState:o,registerItem:u,totalSubitemCount:a}=t,p=z.useMemo(()=>({dispatch:n,getItemState:o,getItemIndex:i}),[n,i,o]),m=z.useMemo(()=>({getItemIndex:i,registerItem:u,totalSubitemCount:a}),[u,i,a]);return N.jsx(gy.Provider,{value:m,children:N.jsx(Uu.Provider,{value:p,children:r})})}var qL={exports:{}},Za={},WL={exports:{}},ZL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ce,Ne){var Je=Ce.length;Ce.push(Ne);e:for(;0<Je;){var at=Je-1>>>1,st=Ce[at];if(0<i(st,Ne))Ce[at]=Ne,Ce[Je]=st,Je=at;else break e}}function r(Ce){return Ce.length===0?null:Ce[0]}function n(Ce){if(Ce.length===0)return null;var Ne=Ce[0],Je=Ce.pop();if(Je!==Ne){Ce[0]=Je;e:for(var at=0,st=Ce.length,Dt=st>>>1;at<Dt;){var Ct=2*(at+1)-1,Bt=Ce[Ct],Tt=Ct+1,it=Ce[Tt];if(0>i(Bt,Je))Tt<st&&0>i(it,Bt)?(Ce[at]=it,Ce[Tt]=Je,at=Tt):(Ce[at]=Bt,Ce[Ct]=Je,at=Ct);else if(Tt<st&&0>i(it,Je))Ce[at]=it,Ce[Tt]=Je,at=Tt;else break e}}return Ne}function i(Ce,Ne){var Je=Ce.sortIndex-Ne.sortIndex;return Je!==0?Je:Ce.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,a=u.now();e.unstable_now=function(){return u.now()-a}}var p=[],m=[],w=1,C=null,T=3,P=!1,R=!1,$=!1,H=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Ce){for(var Ne=r(m);Ne!==null;){if(Ne.callback===null)n(m);else if(Ne.startTime<=Ce)n(m),Ne.sortIndex=Ne.expirationTime,t(p,Ne);else break;Ne=r(m)}}function Q(Ce){if($=!1,L(Ce),!R)if(r(p)!==null)R=!0,Se(V);else{var Ne=r(m);Ne!==null&&Fe(Q,Ne.startTime-Ce)}}function V(Ce,Ne){R=!1,$&&($=!1,D(re),re=-1),P=!0;var Je=T;try{for(L(Ne),C=r(p);C!==null&&(!(C.expirationTime>Ne)||Ce&&!we());){var at=C.callback;if(typeof at=="function"){C.callback=null,T=C.priorityLevel;var st=at(C.expirationTime<=Ne);Ne=e.unstable_now(),typeof st=="function"?C.callback=st:C===r(p)&&n(p),L(Ne)}else n(p);C=r(p)}if(C!==null)var Dt=!0;else{var Ct=r(m);Ct!==null&&Fe(Q,Ct.startTime-Ne),Dt=!1}return Dt}finally{C=null,T=Je,P=!1}}var F=!1,X=null,re=-1,ye=5,me=-1;function we(){return!(e.unstable_now()-me<ye)}function ke(){if(X!==null){var Ce=e.unstable_now();me=Ce;var Ne=!0;try{Ne=X(!0,Ce)}finally{Ne?Ie():(F=!1,X=null)}}else F=!1}var Ie;if(typeof O=="function")Ie=function(){O(ke)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Re=qe.port2;qe.port1.onmessage=ke,Ie=function(){Re.postMessage(null)}}else Ie=function(){H(ke,0)};function Se(Ce){X=Ce,F||(F=!0,Ie())}function Fe(Ce,Ne){re=H(function(){Ce(e.unstable_now())},Ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ce){Ce.callback=null},e.unstable_continueExecution=function(){R||P||(R=!0,Se(V))},e.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<Ce?Math.floor(1e3/Ce):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(Ce){switch(T){case 1:case 2:case 3:var Ne=3;break;default:Ne=T}var Je=T;T=Ne;try{return Ce()}finally{T=Je}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ce,Ne){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var Je=T;T=Ce;try{return Ne()}finally{T=Je}},e.unstable_scheduleCallback=function(Ce,Ne,Je){var at=e.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?at+Je:at):Je=at,Ce){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Je+st,Ce={id:w++,callback:Ne,priorityLevel:Ce,startTime:Je,expirationTime:st,sortIndex:-1},Je>at?(Ce.sortIndex=Je,t(m,Ce),r(p)===null&&Ce===r(m)&&($?(D(re),re=-1):$=!0,Fe(Q,Je-at))):(Ce.sortIndex=st,t(p,Ce),R||P||(R=!0,Se(V))),Ce},e.unstable_shouldYield=we,e.unstable_wrapCallback=function(Ce){var Ne=T;return function(){var Je=T;T=Ne;try{return Ce.apply(this,arguments)}finally{T=Je}}}})(ZL);WL.exports=ZL;var aH=WL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sH=z,Ga=aH;function xt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KL=new Set,dv={};function ad(e,t){hp(e,t),hp(e+"Capture",t)}function hp(e,t){for(dv[e]=t,e=0;e<t.length;e++)KL.add(t[e])}var Mc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),XC=Object.prototype.hasOwnProperty,lH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$A={},BA={};function cH(e){return XC.call(BA,e)?!0:XC.call($A,e)?!1:lH.test(e)?BA[e]=!0:($A[e]=!0,!1)}function uH(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hH(e,t,r,n){if(t===null||typeof t>"u"||uH(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ra(e,t,r,n,i,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var yo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yo[e]=new ra(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yo[t]=new ra(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yo[e]=new ra(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yo[e]=new ra(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yo[e]=new ra(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yo[e]=new ra(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yo[e]=new ra(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yo[e]=new ra(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yo[e]=new ra(e,5,!1,e.toLowerCase(),null,!1,!1)});var gE=/[\-:]([a-z])/g;function vE(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gE,vE);yo[t]=new ra(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gE,vE);yo[t]=new ra(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gE,vE);yo[t]=new ra(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yo[e]=new ra(e,1,!1,e.toLowerCase(),null,!1,!1)});yo.xlinkHref=new ra("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yo[e]=new ra(e,1,!1,e.toLowerCase(),null,!0,!0)});function yE(e,t,r,n){var i=yo.hasOwnProperty(t)?yo[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hH(t,r,i,n)&&(r=null),n||i===null?cH(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Bc=sH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c_=Symbol.for("react.element"),kf=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),_E=Symbol.for("react.strict_mode"),JC=Symbol.for("react.profiler"),XL=Symbol.for("react.provider"),JL=Symbol.for("react.context"),xE=Symbol.for("react.forward_ref"),YC=Symbol.for("react.suspense"),QC=Symbol.for("react.suspense_list"),bE=Symbol.for("react.memo"),uu=Symbol.for("react.lazy"),YL=Symbol.for("react.offscreen"),FA=Symbol.iterator;function ig(e){return e===null||typeof e!="object"?null:(e=FA&&e[FA]||e["@@iterator"],typeof e=="function"?e:null)}var hi=Object.assign,U2;function kg(e){if(U2===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);U2=t&&t[1]||""}return`
`+U2+e}var H2=!1;function G2(e,t){if(!e||H2)return"";H2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var n=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){n=m}e.call(t.prototype)}else{try{throw Error()}catch(m){n=m}e()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=n.stack.split(`
`),u=i.length-1,a=o.length-1;1<=u&&0<=a&&i[u]!==o[a];)a--;for(;1<=u&&0<=a;u--,a--)if(i[u]!==o[a]){if(u!==1||a!==1)do if(u--,a--,0>a||i[u]!==o[a]){var p=`
`+i[u].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=u&&0<=a);break}}}finally{H2=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?kg(e):""}function dH(e){switch(e.tag){case 5:return kg(e.type);case 16:return kg("Lazy");case 13:return kg("Suspense");case 19:return kg("SuspenseList");case 0:case 2:case 15:return e=G2(e.type,!1),e;case 11:return e=G2(e.type.render,!1),e;case 1:return e=G2(e.type,!0),e;default:return""}}function eT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ef:return"Fragment";case kf:return"Portal";case JC:return"Profiler";case _E:return"StrictMode";case YC:return"Suspense";case QC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JL:return(e.displayName||"Context")+".Consumer";case XL:return(e._context.displayName||"Context")+".Provider";case xE:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bE:return t=e.displayName||null,t!==null?t:eT(e.type)||"Memo";case uu:t=e._payload,e=e._init;try{return eT(e(t))}catch{}}return null}function fH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eT(t);case 8:return t===_E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Au(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function QL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pH(e){var t=QL(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(u){n=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function u_(e){e._valueTracker||(e._valueTracker=pH(e))}function eO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=QL(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function D1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tT(e,t){var r=t.checked;return hi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function NA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Au(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function tO(e,t){t=t.checked,t!=null&&yE(e,"checked",t,!1)}function rT(e,t){tO(e,t);var r=Au(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nT(e,t.type,r):t.hasOwnProperty("defaultValue")&&nT(e,t.type,Au(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function nT(e,t,r){(t!=="number"||D1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Eg=Array.isArray;function Yf(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Au(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function iT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xt(91));return hi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function VA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(xt(92));if(Eg(r)){if(1<r.length)throw Error(xt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Au(r)}}function rO(e,t){var r=Au(t.value),n=Au(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function UA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var h_,iO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(h_=h_||document.createElement("div"),h_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=h_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fv(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ng={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mH=["Webkit","ms","Moz","O"];Object.keys(Ng).forEach(function(e){mH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ng[t]=Ng[e]})});function oO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ng.hasOwnProperty(e)&&Ng[e]?(""+t).trim():t+"px"}function aO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=oO(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var gH=hi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aT(e,t){if(t){if(gH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xt(62))}}function sT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lT=null;function wE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cT=null,Qf=null,ep=null;function HA(e){if(e=_y(e)){if(typeof cT!="function")throw Error(xt(280));var t=e.stateNode;t&&(t=zb(t),cT(e.stateNode,e.type,t))}}function sO(e){Qf?ep?ep.push(e):ep=[e]:Qf=e}function lO(){if(Qf){var e=Qf,t=ep;if(ep=Qf=null,HA(e),t)for(e=0;e<t.length;e++)HA(t[e])}}function cO(e,t){return e(t)}function uO(){}var q2=!1;function hO(e,t,r){if(q2)return e(t,r);q2=!0;try{return cO(e,t,r)}finally{q2=!1,(Qf!==null||ep!==null)&&(uO(),lO())}}function pv(e,t){var r=e.stateNode;if(r===null)return null;var n=zb(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(xt(231,t,typeof r));return r}var uT=!1;if(Mc)try{var og={};Object.defineProperty(og,"passive",{get:function(){uT=!0}}),window.addEventListener("test",og,og),window.removeEventListener("test",og,og)}catch{uT=!1}function vH(e,t,r,n,i,o,u,a,p){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(w){this.onError(w)}}var jg=!1,z1=null,L1=!1,hT=null,yH={onError:function(e){jg=!0,z1=e}};function _H(e,t,r,n,i,o,u,a,p){jg=!1,z1=null,vH.apply(yH,arguments)}function xH(e,t,r,n,i,o,u,a,p){if(_H.apply(this,arguments),jg){if(jg){var m=z1;jg=!1,z1=null}else throw Error(xt(198));L1||(L1=!0,hT=m)}}function sd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function dO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function GA(e){if(sd(e)!==e)throw Error(xt(188))}function bH(e){var t=e.alternate;if(!t){if(t=sd(e),t===null)throw Error(xt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return GA(i),e;if(o===n)return GA(i),t;o=o.sibling}throw Error(xt(188))}if(r.return!==n.return)r=i,n=o;else{for(var u=!1,a=i.child;a;){if(a===r){u=!0,r=i,n=o;break}if(a===n){u=!0,n=i,r=o;break}a=a.sibling}if(!u){for(a=o.child;a;){if(a===r){u=!0,r=o,n=i;break}if(a===n){u=!0,n=o,r=i;break}a=a.sibling}if(!u)throw Error(xt(189))}}if(r.alternate!==n)throw Error(xt(190))}if(r.tag!==3)throw Error(xt(188));return r.stateNode.current===r?e:t}function fO(e){return e=bH(e),e!==null?pO(e):null}function pO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pO(e);if(t!==null)return t;e=e.sibling}return null}var mO=Ga.unstable_scheduleCallback,qA=Ga.unstable_cancelCallback,wH=Ga.unstable_shouldYield,SH=Ga.unstable_requestPaint,Ii=Ga.unstable_now,CH=Ga.unstable_getCurrentPriorityLevel,SE=Ga.unstable_ImmediatePriority,gO=Ga.unstable_UserBlockingPriority,O1=Ga.unstable_NormalPriority,TH=Ga.unstable_LowPriority,vO=Ga.unstable_IdlePriority,Pb=null,Rl=null;function kH(e){if(Rl&&typeof Rl.onCommitFiberRoot=="function")try{Rl.onCommitFiberRoot(Pb,e,void 0,(e.current.flags&128)===128)}catch{}}var Ws=Math.clz32?Math.clz32:MH,EH=Math.log,IH=Math.LN2;function MH(e){return e>>>=0,e===0?32:31-(EH(e)/IH|0)|0}var d_=64,f_=4194304;function Ig(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $1(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,u=r&268435455;if(u!==0){var a=u&~i;a!==0?n=Ig(a):(o&=u,o!==0&&(n=Ig(o)))}else u=r&~i,u!==0?n=Ig(u):o!==0&&(n=Ig(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ws(t),i=1<<r,n|=e[r],t&=~i;return n}function PH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AH(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-Ws(o),a=1<<u,p=i[u];p===-1?(!(a&r)||a&n)&&(i[u]=PH(a,t)):p<=t&&(e.expiredLanes|=a),o&=~a}}function dT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yO(){var e=d_;return d_<<=1,!(d_&4194240)&&(d_=64),e}function W2(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vy(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ws(t),e[t]=r}function RH(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Ws(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}function CE(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ws(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Tn=0;function _O(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xO,TE,bO,wO,SO,fT=!1,p_=[],xu=null,bu=null,wu=null,mv=new Map,gv=new Map,du=[],DH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WA(e,t){switch(e){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":bu=null;break;case"mouseover":case"mouseout":wu=null;break;case"pointerover":case"pointerout":mv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gv.delete(t.pointerId)}}function ag(e,t,r,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=_y(t),t!==null&&TE(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function zH(e,t,r,n,i){switch(t){case"focusin":return xu=ag(xu,e,t,r,n,i),!0;case"dragenter":return bu=ag(bu,e,t,r,n,i),!0;case"mouseover":return wu=ag(wu,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return mv.set(o,ag(mv.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,gv.set(o,ag(gv.get(o)||null,e,t,r,n,i)),!0}return!1}function CO(e){var t=Ah(e.target);if(t!==null){var r=sd(t);if(r!==null){if(t=r.tag,t===13){if(t=dO(r),t!==null){e.blockedOn=t,SO(e.priority,function(){bO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function J_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);lT=n,r.target.dispatchEvent(n),lT=null}else return t=_y(r),t!==null&&TE(t),e.blockedOn=r,!1;t.shift()}return!0}function ZA(e,t,r){J_(e)&&r.delete(t)}function LH(){fT=!1,xu!==null&&J_(xu)&&(xu=null),bu!==null&&J_(bu)&&(bu=null),wu!==null&&J_(wu)&&(wu=null),mv.forEach(ZA),gv.forEach(ZA)}function sg(e,t){e.blockedOn===t&&(e.blockedOn=null,fT||(fT=!0,Ga.unstable_scheduleCallback(Ga.unstable_NormalPriority,LH)))}function vv(e){function t(i){return sg(i,e)}if(0<p_.length){sg(p_[0],e);for(var r=1;r<p_.length;r++){var n=p_[r];n.blockedOn===e&&(n.blockedOn=null)}}for(xu!==null&&sg(xu,e),bu!==null&&sg(bu,e),wu!==null&&sg(wu,e),mv.forEach(t),gv.forEach(t),r=0;r<du.length;r++)n=du[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<du.length&&(r=du[0],r.blockedOn===null);)CO(r),r.blockedOn===null&&du.shift()}var tp=Bc.ReactCurrentBatchConfig,B1=!0;function OH(e,t,r,n){var i=Tn,o=tp.transition;tp.transition=null;try{Tn=1,kE(e,t,r,n)}finally{Tn=i,tp.transition=o}}function $H(e,t,r,n){var i=Tn,o=tp.transition;tp.transition=null;try{Tn=4,kE(e,t,r,n)}finally{Tn=i,tp.transition=o}}function kE(e,t,r,n){if(B1){var i=pT(e,t,r,n);if(i===null)nS(e,t,n,F1,r),WA(e,n);else if(zH(i,e,t,r,n))n.stopPropagation();else if(WA(e,n),t&4&&-1<DH.indexOf(e)){for(;i!==null;){var o=_y(i);if(o!==null&&xO(o),o=pT(e,t,r,n),o===null&&nS(e,t,n,F1,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else nS(e,t,n,null,r)}}var F1=null;function pT(e,t,r,n){if(F1=null,e=wE(n),e=Ah(e),e!==null)if(t=sd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=dO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return F1=e,null}function TO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CH()){case SE:return 1;case gO:return 4;case O1:case TH:return 16;case vO:return 536870912;default:return 16}default:return 16}}var vu=null,EE=null,Y_=null;function kO(){if(Y_)return Y_;var e,t=EE,r=t.length,n,i="value"in vu?vu.value:vu.textContent,o=i.length;for(e=0;e<r&&t[e]===i[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===i[o-n];n++);return Y_=i.slice(e,1<n?1-n:void 0)}function Q_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function m_(){return!0}function KA(){return!1}function Ka(e){function t(r,n,i,o,u){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?m_:KA,this.isPropagationStopped=KA,this}return hi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=m_)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=m_)},persist:function(){},isPersistent:m_}),t}var jp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IE=Ka(jp),yy=hi({},jp,{view:0,detail:0}),BH=Ka(yy),Z2,K2,lg,Ab=hi({},yy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ME,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lg&&(lg&&e.type==="mousemove"?(Z2=e.screenX-lg.screenX,K2=e.screenY-lg.screenY):K2=Z2=0,lg=e),Z2)},movementY:function(e){return"movementY"in e?e.movementY:K2}}),XA=Ka(Ab),FH=hi({},Ab,{dataTransfer:0}),NH=Ka(FH),jH=hi({},yy,{relatedTarget:0}),X2=Ka(jH),VH=hi({},jp,{animationName:0,elapsedTime:0,pseudoElement:0}),UH=Ka(VH),HH=hi({},jp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),GH=Ka(HH),qH=hi({},jp,{data:0}),JA=Ka(qH),WH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KH[e])?!!t[e]:!1}function ME(){return XH}var JH=hi({},yy,{key:function(e){if(e.key){var t=WH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Q_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ZH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ME,charCode:function(e){return e.type==="keypress"?Q_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Q_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YH=Ka(JH),QH=hi({},Ab,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YA=Ka(QH),eG=hi({},yy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ME}),tG=Ka(eG),rG=hi({},jp,{propertyName:0,elapsedTime:0,pseudoElement:0}),nG=Ka(rG),iG=hi({},Ab,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oG=Ka(iG),aG=[9,13,27,32],PE=Mc&&"CompositionEvent"in window,Vg=null;Mc&&"documentMode"in document&&(Vg=document.documentMode);var sG=Mc&&"TextEvent"in window&&!Vg,EO=Mc&&(!PE||Vg&&8<Vg&&11>=Vg),QA=" ",eR=!1;function IO(e,t){switch(e){case"keyup":return aG.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var If=!1;function lG(e,t){switch(e){case"compositionend":return MO(t);case"keypress":return t.which!==32?null:(eR=!0,QA);case"textInput":return e=t.data,e===QA&&eR?null:e;default:return null}}function cG(e,t){if(If)return e==="compositionend"||!PE&&IO(e,t)?(e=kO(),Y_=EE=vu=null,If=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return EO&&t.locale!=="ko"?null:t.data;default:return null}}var uG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uG[e.type]:t==="textarea"}function PO(e,t,r,n){sO(n),t=N1(t,"onChange"),0<t.length&&(r=new IE("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ug=null,yv=null;function hG(e){jO(e,0)}function Rb(e){var t=Af(e);if(eO(t))return e}function dG(e,t){if(e==="change")return t}var AO=!1;if(Mc){var J2;if(Mc){var Y2="oninput"in document;if(!Y2){var rR=document.createElement("div");rR.setAttribute("oninput","return;"),Y2=typeof rR.oninput=="function"}J2=Y2}else J2=!1;AO=J2&&(!document.documentMode||9<document.documentMode)}function nR(){Ug&&(Ug.detachEvent("onpropertychange",RO),yv=Ug=null)}function RO(e){if(e.propertyName==="value"&&Rb(yv)){var t=[];PO(t,yv,e,wE(e)),hO(hG,t)}}function fG(e,t,r){e==="focusin"?(nR(),Ug=t,yv=r,Ug.attachEvent("onpropertychange",RO)):e==="focusout"&&nR()}function pG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rb(yv)}function mG(e,t){if(e==="click")return Rb(t)}function gG(e,t){if(e==="input"||e==="change")return Rb(t)}function vG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var el=typeof Object.is=="function"?Object.is:vG;function _v(e,t){if(el(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!XC.call(t,i)||!el(e[i],t[i]))return!1}return!0}function iR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oR(e,t){var r=iR(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=iR(r)}}function DO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?DO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zO(){for(var e=window,t=D1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=D1(e.document)}return t}function AE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yG(e){var t=zO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&DO(r.ownerDocument.documentElement,r)){if(n!==null&&AE(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=oR(r,o);var u=oR(r,n);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _G=Mc&&"documentMode"in document&&11>=document.documentMode,Mf=null,mT=null,Hg=null,gT=!1;function aR(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;gT||Mf==null||Mf!==D1(n)||(n=Mf,"selectionStart"in n&&AE(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hg&&_v(Hg,n)||(Hg=n,n=N1(mT,"onSelect"),0<n.length&&(t=new IE("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Mf)))}function g_(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pf={animationend:g_("Animation","AnimationEnd"),animationiteration:g_("Animation","AnimationIteration"),animationstart:g_("Animation","AnimationStart"),transitionend:g_("Transition","TransitionEnd")},Q2={},LO={};Mc&&(LO=document.createElement("div").style,"AnimationEvent"in window||(delete Pf.animationend.animation,delete Pf.animationiteration.animation,delete Pf.animationstart.animation),"TransitionEvent"in window||delete Pf.transitionend.transition);function Db(e){if(Q2[e])return Q2[e];if(!Pf[e])return e;var t=Pf[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in LO)return Q2[e]=t[r];return e}var OO=Db("animationend"),$O=Db("animationiteration"),BO=Db("animationstart"),FO=Db("transitionend"),NO=new Map,sR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hu(e,t){NO.set(e,t),ad(t,[e])}for(var eS=0;eS<sR.length;eS++){var tS=sR[eS],xG=tS.toLowerCase(),bG=tS[0].toUpperCase()+tS.slice(1);Hu(xG,"on"+bG)}Hu(OO,"onAnimationEnd");Hu($O,"onAnimationIteration");Hu(BO,"onAnimationStart");Hu("dblclick","onDoubleClick");Hu("focusin","onFocus");Hu("focusout","onBlur");Hu(FO,"onTransitionEnd");hp("onMouseEnter",["mouseout","mouseover"]);hp("onMouseLeave",["mouseout","mouseover"]);hp("onPointerEnter",["pointerout","pointerover"]);hp("onPointerLeave",["pointerout","pointerover"]);ad("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ad("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ad("onBeforeInput",["compositionend","keypress","textInput","paste"]);ad("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ad("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ad("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mg));function lR(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,xH(n,t,void 0,e),e.currentTarget=null}function jO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var u=n.length-1;0<=u;u--){var a=n[u],p=a.instance,m=a.currentTarget;if(a=a.listener,p!==o&&i.isPropagationStopped())break e;lR(i,a,m),o=p}else for(u=0;u<n.length;u++){if(a=n[u],p=a.instance,m=a.currentTarget,a=a.listener,p!==o&&i.isPropagationStopped())break e;lR(i,a,m),o=p}}}if(L1)throw e=hT,L1=!1,hT=null,e}function qn(e,t){var r=t[bT];r===void 0&&(r=t[bT]=new Set);var n=e+"__bubble";r.has(n)||(VO(t,e,2,!1),r.add(n))}function rS(e,t,r){var n=0;t&&(n|=4),VO(r,e,n,t)}var v_="_reactListening"+Math.random().toString(36).slice(2);function xv(e){if(!e[v_]){e[v_]=!0,KL.forEach(function(r){r!=="selectionchange"&&(wG.has(r)||rS(r,!1,e),rS(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[v_]||(t[v_]=!0,rS("selectionchange",!1,t))}}function VO(e,t,r,n){switch(TO(t)){case 1:var i=OH;break;case 4:i=$H;break;default:i=kE}r=i.bind(null,t,r,e),i=void 0,!uT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function nS(e,t,r,n,i){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(u===4)for(u=n.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;u=u.return}for(;a!==null;){if(u=Ah(a),u===null)return;if(p=u.tag,p===5||p===6){n=o=u;continue e}a=a.parentNode}}n=n.return}hO(function(){var m=o,w=wE(r),C=[];e:{var T=NO.get(e);if(T!==void 0){var P=IE,R=e;switch(e){case"keypress":if(Q_(r)===0)break e;case"keydown":case"keyup":P=YH;break;case"focusin":R="focus",P=X2;break;case"focusout":R="blur",P=X2;break;case"beforeblur":case"afterblur":P=X2;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=XA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=NH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=tG;break;case OO:case $O:case BO:P=UH;break;case FO:P=nG;break;case"scroll":P=BH;break;case"wheel":P=oG;break;case"copy":case"cut":case"paste":P=GH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=YA}var $=(t&4)!==0,H=!$&&e==="scroll",D=$?T!==null?T+"Capture":null:T;$=[];for(var O=m,L;O!==null;){L=O;var Q=L.stateNode;if(L.tag===5&&Q!==null&&(L=Q,D!==null&&(Q=pv(O,D),Q!=null&&$.push(bv(O,Q,L)))),H)break;O=O.return}0<$.length&&(T=new P(T,R,null,r,w),C.push({event:T,listeners:$}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",T&&r!==lT&&(R=r.relatedTarget||r.fromElement)&&(Ah(R)||R[Pc]))break e;if((P||T)&&(T=w.window===w?w:(T=w.ownerDocument)?T.defaultView||T.parentWindow:window,P?(R=r.relatedTarget||r.toElement,P=m,R=R?Ah(R):null,R!==null&&(H=sd(R),R!==H||R.tag!==5&&R.tag!==6)&&(R=null)):(P=null,R=m),P!==R)){if($=XA,Q="onMouseLeave",D="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&($=YA,Q="onPointerLeave",D="onPointerEnter",O="pointer"),H=P==null?T:Af(P),L=R==null?T:Af(R),T=new $(Q,O+"leave",P,r,w),T.target=H,T.relatedTarget=L,Q=null,Ah(w)===m&&($=new $(D,O+"enter",R,r,w),$.target=L,$.relatedTarget=H,Q=$),H=Q,P&&R)t:{for($=P,D=R,O=0,L=$;L;L=of(L))O++;for(L=0,Q=D;Q;Q=of(Q))L++;for(;0<O-L;)$=of($),O--;for(;0<L-O;)D=of(D),L--;for(;O--;){if($===D||D!==null&&$===D.alternate)break t;$=of($),D=of(D)}$=null}else $=null;P!==null&&cR(C,T,P,$,!1),R!==null&&H!==null&&cR(C,H,R,$,!0)}}e:{if(T=m?Af(m):window,P=T.nodeName&&T.nodeName.toLowerCase(),P==="select"||P==="input"&&T.type==="file")var V=dG;else if(tR(T))if(AO)V=gG;else{V=pG;var F=fG}else(P=T.nodeName)&&P.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(V=mG);if(V&&(V=V(e,m))){PO(C,V,r,w);break e}F&&F(e,T,m),e==="focusout"&&(F=T._wrapperState)&&F.controlled&&T.type==="number"&&nT(T,"number",T.value)}switch(F=m?Af(m):window,e){case"focusin":(tR(F)||F.contentEditable==="true")&&(Mf=F,mT=m,Hg=null);break;case"focusout":Hg=mT=Mf=null;break;case"mousedown":gT=!0;break;case"contextmenu":case"mouseup":case"dragend":gT=!1,aR(C,r,w);break;case"selectionchange":if(_G)break;case"keydown":case"keyup":aR(C,r,w)}var X;if(PE)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else If?IO(e,r)&&(re="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(re="onCompositionStart");re&&(EO&&r.locale!=="ko"&&(If||re!=="onCompositionStart"?re==="onCompositionEnd"&&If&&(X=kO()):(vu=w,EE="value"in vu?vu.value:vu.textContent,If=!0)),F=N1(m,re),0<F.length&&(re=new JA(re,e,null,r,w),C.push({event:re,listeners:F}),X?re.data=X:(X=MO(r),X!==null&&(re.data=X)))),(X=sG?lG(e,r):cG(e,r))&&(m=N1(m,"onBeforeInput"),0<m.length&&(w=new JA("onBeforeInput","beforeinput",null,r,w),C.push({event:w,listeners:m}),w.data=X))}jO(C,t)})}function bv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function N1(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=pv(e,r),o!=null&&n.unshift(bv(e,o,i)),o=pv(e,t),o!=null&&n.push(bv(e,o,i))),e=e.return}return n}function of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cR(e,t,r,n,i){for(var o=t._reactName,u=[];r!==null&&r!==n;){var a=r,p=a.alternate,m=a.stateNode;if(p!==null&&p===n)break;a.tag===5&&m!==null&&(a=m,i?(p=pv(r,o),p!=null&&u.unshift(bv(r,p,a))):i||(p=pv(r,o),p!=null&&u.push(bv(r,p,a)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var SG=/\r\n?/g,CG=/\u0000|\uFFFD/g;function uR(e){return(typeof e=="string"?e:""+e).replace(SG,`
`).replace(CG,"")}function y_(e,t,r){if(t=uR(t),uR(e)!==t&&r)throw Error(xt(425))}function j1(){}var vT=null,yT=null;function _T(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xT=typeof setTimeout=="function"?setTimeout:void 0,TG=typeof clearTimeout=="function"?clearTimeout:void 0,hR=typeof Promise=="function"?Promise:void 0,kG=typeof queueMicrotask=="function"?queueMicrotask:typeof hR<"u"?function(e){return hR.resolve(null).then(e).catch(EG)}:xT;function EG(e){setTimeout(function(){throw e})}function iS(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),vv(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);vv(t)}function Su(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vp=Math.random().toString(36).slice(2),kl="__reactFiber$"+Vp,wv="__reactProps$"+Vp,Pc="__reactContainer$"+Vp,bT="__reactEvents$"+Vp,IG="__reactListeners$"+Vp,MG="__reactHandles$"+Vp;function Ah(e){var t=e[kl];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Pc]||r[kl]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=dR(e);e!==null;){if(r=e[kl])return r;e=dR(e)}return t}e=r,r=e.parentNode}return null}function _y(e){return e=e[kl]||e[Pc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Af(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xt(33))}function zb(e){return e[wv]||null}var wT=[],Rf=-1;function Gu(e){return{current:e}}function Wn(e){0>Rf||(e.current=wT[Rf],wT[Rf]=null,Rf--)}function jn(e,t){Rf++,wT[Rf]=e.current,e.current=t}var Ru={},zo=Gu(Ru),ga=Gu(!1),Uh=Ru;function dp(e,t){var r=e.type.contextTypes;if(!r)return Ru;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function va(e){return e=e.childContextTypes,e!=null}function V1(){Wn(ga),Wn(zo)}function fR(e,t,r){if(zo.current!==Ru)throw Error(xt(168));jn(zo,t),jn(ga,r)}function UO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(xt(108,fH(e)||"Unknown",i));return hi({},r,n)}function U1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ru,Uh=zo.current,jn(zo,e),jn(ga,ga.current),!0}function pR(e,t,r){var n=e.stateNode;if(!n)throw Error(xt(169));r?(e=UO(e,t,Uh),n.__reactInternalMemoizedMergedChildContext=e,Wn(ga),Wn(zo),jn(zo,e)):Wn(ga),jn(ga,r)}var pc=null,Lb=!1,oS=!1;function HO(e){pc===null?pc=[e]:pc.push(e)}function PG(e){Lb=!0,HO(e)}function qu(){if(!oS&&pc!==null){oS=!0;var e=0,t=Tn;try{var r=pc;for(Tn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}pc=null,Lb=!1}catch(i){throw pc!==null&&(pc=pc.slice(e+1)),mO(SE,qu),i}finally{Tn=t,oS=!1}}return null}var Df=[],zf=0,H1=null,G1=0,us=[],hs=0,Hh=null,_c=1,xc="";function Th(e,t){Df[zf++]=G1,Df[zf++]=H1,H1=e,G1=t}function GO(e,t,r){us[hs++]=_c,us[hs++]=xc,us[hs++]=Hh,Hh=e;var n=_c;e=xc;var i=32-Ws(n)-1;n&=~(1<<i),r+=1;var o=32-Ws(t)+i;if(30<o){var u=i-i%5;o=(n&(1<<u)-1).toString(32),n>>=u,i-=u,_c=1<<32-Ws(t)+i|r<<i|n,xc=o+e}else _c=1<<o|r<<i|n,xc=e}function RE(e){e.return!==null&&(Th(e,1),GO(e,1,0))}function DE(e){for(;e===H1;)H1=Df[--zf],Df[zf]=null,G1=Df[--zf],Df[zf]=null;for(;e===Hh;)Hh=us[--hs],us[hs]=null,xc=us[--hs],us[hs]=null,_c=us[--hs],us[hs]=null}var Ua=null,Na=null,Qn=!1,Us=null;function qO(e,t){var r=ps(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function mR(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ua=e,Na=Su(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ua=e,Na=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Hh!==null?{id:_c,overflow:xc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ps(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ua=e,Na=null,!0):!1;default:return!1}}function ST(e){return(e.mode&1)!==0&&(e.flags&128)===0}function CT(e){if(Qn){var t=Na;if(t){var r=t;if(!mR(e,t)){if(ST(e))throw Error(xt(418));t=Su(r.nextSibling);var n=Ua;t&&mR(e,t)?qO(n,r):(e.flags=e.flags&-4097|2,Qn=!1,Ua=e)}}else{if(ST(e))throw Error(xt(418));e.flags=e.flags&-4097|2,Qn=!1,Ua=e}}}function gR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ua=e}function __(e){if(e!==Ua)return!1;if(!Qn)return gR(e),Qn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_T(e.type,e.memoizedProps)),t&&(t=Na)){if(ST(e))throw WO(),Error(xt(418));for(;t;)qO(e,t),t=Su(t.nextSibling)}if(gR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Na=Su(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Na=null}}else Na=Ua?Su(e.stateNode.nextSibling):null;return!0}function WO(){for(var e=Na;e;)e=Su(e.nextSibling)}function fp(){Na=Ua=null,Qn=!1}function zE(e){Us===null?Us=[e]:Us.push(e)}var AG=Bc.ReactCurrentBatchConfig;function cg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xt(309));var n=r.stateNode}if(!n)throw Error(xt(147,e));var i=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var a=i.refs;u===null?delete a[o]:a[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(xt(284));if(!r._owner)throw Error(xt(290,e))}return e}function x_(e,t){throw e=Object.prototype.toString.call(t),Error(xt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vR(e){var t=e._init;return t(e._payload)}function ZO(e){function t(D,O){if(e){var L=D.deletions;L===null?(D.deletions=[O],D.flags|=16):L.push(O)}}function r(D,O){if(!e)return null;for(;O!==null;)t(D,O),O=O.sibling;return null}function n(D,O){for(D=new Map;O!==null;)O.key!==null?D.set(O.key,O):D.set(O.index,O),O=O.sibling;return D}function i(D,O){return D=Eu(D,O),D.index=0,D.sibling=null,D}function o(D,O,L){return D.index=L,e?(L=D.alternate,L!==null?(L=L.index,L<O?(D.flags|=2,O):L):(D.flags|=2,O)):(D.flags|=1048576,O)}function u(D){return e&&D.alternate===null&&(D.flags|=2),D}function a(D,O,L,Q){return O===null||O.tag!==6?(O=dS(L,D.mode,Q),O.return=D,O):(O=i(O,L),O.return=D,O)}function p(D,O,L,Q){var V=L.type;return V===Ef?w(D,O,L.props.children,Q,L.key):O!==null&&(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===uu&&vR(V)===O.type)?(Q=i(O,L.props),Q.ref=cg(D,O,L),Q.return=D,Q):(Q=a1(L.type,L.key,L.props,null,D.mode,Q),Q.ref=cg(D,O,L),Q.return=D,Q)}function m(D,O,L,Q){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=fS(L,D.mode,Q),O.return=D,O):(O=i(O,L.children||[]),O.return=D,O)}function w(D,O,L,Q,V){return O===null||O.tag!==7?(O=Oh(L,D.mode,Q,V),O.return=D,O):(O=i(O,L),O.return=D,O)}function C(D,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return O=dS(""+O,D.mode,L),O.return=D,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case c_:return L=a1(O.type,O.key,O.props,null,D.mode,L),L.ref=cg(D,null,O),L.return=D,L;case kf:return O=fS(O,D.mode,L),O.return=D,O;case uu:var Q=O._init;return C(D,Q(O._payload),L)}if(Eg(O)||ig(O))return O=Oh(O,D.mode,L,null),O.return=D,O;x_(D,O)}return null}function T(D,O,L,Q){var V=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return V!==null?null:a(D,O,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case c_:return L.key===V?p(D,O,L,Q):null;case kf:return L.key===V?m(D,O,L,Q):null;case uu:return V=L._init,T(D,O,V(L._payload),Q)}if(Eg(L)||ig(L))return V!==null?null:w(D,O,L,Q,null);x_(D,L)}return null}function P(D,O,L,Q,V){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return D=D.get(L)||null,a(O,D,""+Q,V);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case c_:return D=D.get(Q.key===null?L:Q.key)||null,p(O,D,Q,V);case kf:return D=D.get(Q.key===null?L:Q.key)||null,m(O,D,Q,V);case uu:var F=Q._init;return P(D,O,L,F(Q._payload),V)}if(Eg(Q)||ig(Q))return D=D.get(L)||null,w(O,D,Q,V,null);x_(O,Q)}return null}function R(D,O,L,Q){for(var V=null,F=null,X=O,re=O=0,ye=null;X!==null&&re<L.length;re++){X.index>re?(ye=X,X=null):ye=X.sibling;var me=T(D,X,L[re],Q);if(me===null){X===null&&(X=ye);break}e&&X&&me.alternate===null&&t(D,X),O=o(me,O,re),F===null?V=me:F.sibling=me,F=me,X=ye}if(re===L.length)return r(D,X),Qn&&Th(D,re),V;if(X===null){for(;re<L.length;re++)X=C(D,L[re],Q),X!==null&&(O=o(X,O,re),F===null?V=X:F.sibling=X,F=X);return Qn&&Th(D,re),V}for(X=n(D,X);re<L.length;re++)ye=P(X,D,re,L[re],Q),ye!==null&&(e&&ye.alternate!==null&&X.delete(ye.key===null?re:ye.key),O=o(ye,O,re),F===null?V=ye:F.sibling=ye,F=ye);return e&&X.forEach(function(we){return t(D,we)}),Qn&&Th(D,re),V}function $(D,O,L,Q){var V=ig(L);if(typeof V!="function")throw Error(xt(150));if(L=V.call(L),L==null)throw Error(xt(151));for(var F=V=null,X=O,re=O=0,ye=null,me=L.next();X!==null&&!me.done;re++,me=L.next()){X.index>re?(ye=X,X=null):ye=X.sibling;var we=T(D,X,me.value,Q);if(we===null){X===null&&(X=ye);break}e&&X&&we.alternate===null&&t(D,X),O=o(we,O,re),F===null?V=we:F.sibling=we,F=we,X=ye}if(me.done)return r(D,X),Qn&&Th(D,re),V;if(X===null){for(;!me.done;re++,me=L.next())me=C(D,me.value,Q),me!==null&&(O=o(me,O,re),F===null?V=me:F.sibling=me,F=me);return Qn&&Th(D,re),V}for(X=n(D,X);!me.done;re++,me=L.next())me=P(X,D,re,me.value,Q),me!==null&&(e&&me.alternate!==null&&X.delete(me.key===null?re:me.key),O=o(me,O,re),F===null?V=me:F.sibling=me,F=me);return e&&X.forEach(function(ke){return t(D,ke)}),Qn&&Th(D,re),V}function H(D,O,L,Q){if(typeof L=="object"&&L!==null&&L.type===Ef&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case c_:e:{for(var V=L.key,F=O;F!==null;){if(F.key===V){if(V=L.type,V===Ef){if(F.tag===7){r(D,F.sibling),O=i(F,L.props.children),O.return=D,D=O;break e}}else if(F.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===uu&&vR(V)===F.type){r(D,F.sibling),O=i(F,L.props),O.ref=cg(D,F,L),O.return=D,D=O;break e}r(D,F);break}else t(D,F);F=F.sibling}L.type===Ef?(O=Oh(L.props.children,D.mode,Q,L.key),O.return=D,D=O):(Q=a1(L.type,L.key,L.props,null,D.mode,Q),Q.ref=cg(D,O,L),Q.return=D,D=Q)}return u(D);case kf:e:{for(F=L.key;O!==null;){if(O.key===F)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){r(D,O.sibling),O=i(O,L.children||[]),O.return=D,D=O;break e}else{r(D,O);break}else t(D,O);O=O.sibling}O=fS(L,D.mode,Q),O.return=D,D=O}return u(D);case uu:return F=L._init,H(D,O,F(L._payload),Q)}if(Eg(L))return R(D,O,L,Q);if(ig(L))return $(D,O,L,Q);x_(D,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,O!==null&&O.tag===6?(r(D,O.sibling),O=i(O,L),O.return=D,D=O):(r(D,O),O=dS(L,D.mode,Q),O.return=D,D=O),u(D)):r(D,O)}return H}var pp=ZO(!0),KO=ZO(!1),q1=Gu(null),W1=null,Lf=null,LE=null;function OE(){LE=Lf=W1=null}function $E(e){var t=q1.current;Wn(q1),e._currentValue=t}function TT(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function rp(e,t){W1=e,LE=Lf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ma=!0),e.firstContext=null)}function _s(e){var t=e._currentValue;if(LE!==e)if(e={context:e,memoizedValue:t,next:null},Lf===null){if(W1===null)throw Error(xt(308));Lf=e,W1.dependencies={lanes:0,firstContext:e}}else Lf=Lf.next=e;return t}var Rh=null;function BE(e){Rh===null?Rh=[e]:Rh.push(e)}function XO(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,BE(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ac(e,n)}function Ac(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var hu=!1;function FE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,hn&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ac(e,r)}return i=n.interleaved,i===null?(t.next=t,BE(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ac(e,r)}function e1(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,CE(e,r)}}function yR(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=u:o=o.next=u,r=r.next}while(r!==null);o===null?i=o=t:o=o.next=t}else i=o=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Z1(e,t,r,n){var i=e.updateQueue;hu=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var p=a,m=p.next;p.next=null,u===null?o=m:u.next=m,u=p;var w=e.alternate;w!==null&&(w=w.updateQueue,a=w.lastBaseUpdate,a!==u&&(a===null?w.firstBaseUpdate=m:a.next=m,w.lastBaseUpdate=p))}if(o!==null){var C=i.baseState;u=0,w=m=p=null,a=o;do{var T=a.lane,P=a.eventTime;if((n&T)===T){w!==null&&(w=w.next={eventTime:P,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var R=e,$=a;switch(T=t,P=r,$.tag){case 1:if(R=$.payload,typeof R=="function"){C=R.call(P,C,T);break e}C=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=$.payload,T=typeof R=="function"?R.call(P,C,T):R,T==null)break e;C=hi({},C,T);break e;case 2:hu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,T=i.effects,T===null?i.effects=[a]:T.push(a))}else P={eventTime:P,lane:T,tag:a.tag,payload:a.payload,callback:a.callback,next:null},w===null?(m=w=P,p=C):w=w.next=P,u|=T;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;T=a,a=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(!0);if(w===null&&(p=C),i.baseState=p,i.firstBaseUpdate=m,i.lastBaseUpdate=w,t=i.shared.interleaved,t!==null){i=t;do u|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);qh|=u,e.lanes=u,e.memoizedState=C}}function _R(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(xt(191,i));i.call(n)}}}var xy={},Dl=Gu(xy),Sv=Gu(xy),Cv=Gu(xy);function Dh(e){if(e===xy)throw Error(xt(174));return e}function NE(e,t){switch(jn(Cv,t),jn(Sv,e),jn(Dl,xy),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oT(t,e)}Wn(Dl),jn(Dl,t)}function mp(){Wn(Dl),Wn(Sv),Wn(Cv)}function YO(e){Dh(Cv.current);var t=Dh(Dl.current),r=oT(t,e.type);t!==r&&(jn(Sv,e),jn(Dl,r))}function jE(e){Sv.current===e&&(Wn(Dl),Wn(Sv))}var li=Gu(0);function K1(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aS=[];function VE(){for(var e=0;e<aS.length;e++)aS[e]._workInProgressVersionPrimary=null;aS.length=0}var t1=Bc.ReactCurrentDispatcher,sS=Bc.ReactCurrentBatchConfig,Gh=0,ui=null,ji=null,Xi=null,X1=!1,Gg=!1,Tv=0,RG=0;function Io(){throw Error(xt(321))}function UE(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!el(e[r],t[r]))return!1;return!0}function HE(e,t,r,n,i,o){if(Gh=o,ui=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,t1.current=e===null||e.memoizedState===null?OG:$G,e=r(n,i),Gg){o=0;do{if(Gg=!1,Tv=0,25<=o)throw Error(xt(301));o+=1,Xi=ji=null,t.updateQueue=null,t1.current=BG,e=r(n,i)}while(Gg)}if(t1.current=J1,t=ji!==null&&ji.next!==null,Gh=0,Xi=ji=ui=null,X1=!1,t)throw Error(xt(300));return e}function GE(){var e=Tv!==0;return Tv=0,e}function Sl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?ui.memoizedState=Xi=e:Xi=Xi.next=e,Xi}function xs(){if(ji===null){var e=ui.alternate;e=e!==null?e.memoizedState:null}else e=ji.next;var t=Xi===null?ui.memoizedState:Xi.next;if(t!==null)Xi=t,ji=e;else{if(e===null)throw Error(xt(310));ji=e,e={memoizedState:ji.memoizedState,baseState:ji.baseState,baseQueue:ji.baseQueue,queue:ji.queue,next:null},Xi===null?ui.memoizedState=Xi=e:Xi=Xi.next=e}return Xi}function kv(e,t){return typeof t=="function"?t(e):t}function lS(e){var t=xs(),r=t.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=e;var n=ji,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var a=u=null,p=null,m=o;do{var w=m.lane;if((Gh&w)===w)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:e(n,m.action);else{var C={lane:w,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(a=p=C,u=n):p=p.next=C,ui.lanes|=w,qh|=w}m=m.next}while(m!==null&&m!==o);p===null?u=n:p.next=a,el(n,t.memoizedState)||(ma=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=p,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do o=i.lane,ui.lanes|=o,qh|=o,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function cS(e){var t=xs(),r=t.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(i!==null){r.pending=null;var u=i=i.next;do o=e(o,u.action),u=u.next;while(u!==i);el(o,t.memoizedState)||(ma=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function QO(){}function e4(e,t){var r=ui,n=xs(),i=t(),o=!el(n.memoizedState,i);if(o&&(n.memoizedState=i,ma=!0),n=n.queue,qE(n4.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Xi!==null&&Xi.memoizedState.tag&1){if(r.flags|=2048,Ev(9,r4.bind(null,r,n,i,t),void 0,null),Yi===null)throw Error(xt(349));Gh&30||t4(r,t,i)}return i}function t4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ui.updateQueue,t===null?(t={lastEffect:null,stores:null},ui.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function r4(e,t,r,n){t.value=r,t.getSnapshot=n,i4(t)&&o4(e)}function n4(e,t,r){return r(function(){i4(t)&&o4(e)})}function i4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!el(e,r)}catch{return!0}}function o4(e){var t=Ac(e,1);t!==null&&Zs(t,e,1,-1)}function xR(e){var t=Sl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kv,lastRenderedState:e},t.queue=e,e=e.dispatch=LG.bind(null,ui,e),[t.memoizedState,e]}function Ev(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ui.updateQueue,t===null?(t={lastEffect:null,stores:null},ui.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function a4(){return xs().memoizedState}function r1(e,t,r,n){var i=Sl();ui.flags|=e,i.memoizedState=Ev(1|t,r,void 0,n===void 0?null:n)}function Ob(e,t,r,n){var i=xs();n=n===void 0?null:n;var o=void 0;if(ji!==null){var u=ji.memoizedState;if(o=u.destroy,n!==null&&UE(n,u.deps)){i.memoizedState=Ev(t,r,o,n);return}}ui.flags|=e,i.memoizedState=Ev(1|t,r,o,n)}function bR(e,t){return r1(8390656,8,e,t)}function qE(e,t){return Ob(2048,8,e,t)}function s4(e,t){return Ob(4,2,e,t)}function l4(e,t){return Ob(4,4,e,t)}function c4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function u4(e,t,r){return r=r!=null?r.concat([e]):null,Ob(4,4,c4.bind(null,t,e),r)}function WE(){}function h4(e,t){var r=xs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&UE(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function d4(e,t){var r=xs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&UE(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function f4(e,t,r){return Gh&21?(el(r,t)||(r=yO(),ui.lanes|=r,qh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ma=!0),e.memoizedState=r)}function DG(e,t){var r=Tn;Tn=r!==0&&4>r?r:4,e(!0);var n=sS.transition;sS.transition={};try{e(!1),t()}finally{Tn=r,sS.transition=n}}function p4(){return xs().memoizedState}function zG(e,t,r){var n=ku(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},m4(e))g4(t,r);else if(r=XO(e,t,r,n),r!==null){var i=Yo();Zs(r,e,n,i),v4(r,t,n)}}function LG(e,t,r){var n=ku(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(m4(e))g4(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,a=o(u,r);if(i.hasEagerState=!0,i.eagerState=a,el(a,u)){var p=t.interleaved;p===null?(i.next=i,BE(t)):(i.next=p.next,p.next=i),t.interleaved=i;return}}catch{}finally{}r=XO(e,t,i,n),r!==null&&(i=Yo(),Zs(r,e,n,i),v4(r,t,n))}}function m4(e){var t=e.alternate;return e===ui||t!==null&&t===ui}function g4(e,t){Gg=X1=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function v4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,CE(e,r)}}var J1={readContext:_s,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useInsertionEffect:Io,useLayoutEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useMutableSource:Io,useSyncExternalStore:Io,useId:Io,unstable_isNewReconciler:!1},OG={readContext:_s,useCallback:function(e,t){return Sl().memoizedState=[e,t===void 0?null:t],e},useContext:_s,useEffect:bR,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,r1(4194308,4,c4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return r1(4194308,4,e,t)},useInsertionEffect:function(e,t){return r1(4,2,e,t)},useMemo:function(e,t){var r=Sl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Sl();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=zG.bind(null,ui,e),[n.memoizedState,e]},useRef:function(e){var t=Sl();return e={current:e},t.memoizedState=e},useState:xR,useDebugValue:WE,useDeferredValue:function(e){return Sl().memoizedState=e},useTransition:function(){var e=xR(!1),t=e[0];return e=DG.bind(null,e[1]),Sl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ui,i=Sl();if(Qn){if(r===void 0)throw Error(xt(407));r=r()}else{if(r=t(),Yi===null)throw Error(xt(349));Gh&30||t4(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,bR(n4.bind(null,n,o,e),[e]),n.flags|=2048,Ev(9,r4.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Sl(),t=Yi.identifierPrefix;if(Qn){var r=xc,n=_c;r=(n&~(1<<32-Ws(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Tv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=RG++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$G={readContext:_s,useCallback:h4,useContext:_s,useEffect:qE,useImperativeHandle:u4,useInsertionEffect:s4,useLayoutEffect:l4,useMemo:d4,useReducer:lS,useRef:a4,useState:function(){return lS(kv)},useDebugValue:WE,useDeferredValue:function(e){var t=xs();return f4(t,ji.memoizedState,e)},useTransition:function(){var e=lS(kv)[0],t=xs().memoizedState;return[e,t]},useMutableSource:QO,useSyncExternalStore:e4,useId:p4,unstable_isNewReconciler:!1},BG={readContext:_s,useCallback:h4,useContext:_s,useEffect:qE,useImperativeHandle:u4,useInsertionEffect:s4,useLayoutEffect:l4,useMemo:d4,useReducer:cS,useRef:a4,useState:function(){return cS(kv)},useDebugValue:WE,useDeferredValue:function(e){var t=xs();return ji===null?t.memoizedState=e:f4(t,ji.memoizedState,e)},useTransition:function(){var e=cS(kv)[0],t=xs().memoizedState;return[e,t]},useMutableSource:QO,useSyncExternalStore:e4,useId:p4,unstable_isNewReconciler:!1};function Ns(e,t){if(e&&e.defaultProps){t=hi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function kT(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:hi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var $b={isMounted:function(e){return(e=e._reactInternals)?sd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Yo(),i=ku(e),o=Sc(n,i);o.payload=t,r!=null&&(o.callback=r),t=Cu(e,o,i),t!==null&&(Zs(t,e,i,n),e1(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Yo(),i=ku(e),o=Sc(n,i);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Cu(e,o,i),t!==null&&(Zs(t,e,i,n),e1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Yo(),n=ku(e),i=Sc(r,n);i.tag=2,t!=null&&(i.callback=t),t=Cu(e,i,n),t!==null&&(Zs(t,e,n,r),e1(t,e,n))}};function wR(e,t,r,n,i,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,u):t.prototype&&t.prototype.isPureReactComponent?!_v(r,n)||!_v(i,o):!0}function y4(e,t,r){var n=!1,i=Ru,o=t.contextType;return typeof o=="object"&&o!==null?o=_s(o):(i=va(t)?Uh:zo.current,n=t.contextTypes,o=(n=n!=null)?dp(e,i):Ru),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=$b,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function SR(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&$b.enqueueReplaceState(t,t.state,null)}function ET(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},FE(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=_s(o):(o=va(t)?Uh:zo.current,i.context=dp(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(kT(e,t,o,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&$b.enqueueReplaceState(i,i.state,null),Z1(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function gp(e,t){try{var r="",n=t;do r+=dH(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function uS(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function IT(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var FG=typeof WeakMap=="function"?WeakMap:Map;function _4(e,t,r){r=Sc(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Q1||(Q1=!0,BT=n),IT(e,t)},r}function x4(e,t,r){r=Sc(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){IT(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){IT(e,t),typeof n!="function"&&(Tu===null?Tu=new Set([this]):Tu.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function CR(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new FG;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=QG.bind(null,e,t,r),t.then(e,e))}function TR(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kR(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Sc(-1,1),t.tag=2,Cu(r,t,1))),r.lanes|=1),e)}var NG=Bc.ReactCurrentOwner,ma=!1;function Ko(e,t,r,n){t.child=e===null?KO(t,null,r,n):pp(t,e.child,r,n)}function ER(e,t,r,n,i){r=r.render;var o=t.ref;return rp(t,i),n=HE(e,t,r,n,o,i),r=GE(),e!==null&&!ma?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rc(e,t,i)):(Qn&&r&&RE(t),t.flags|=1,Ko(e,t,n,i),t.child)}function IR(e,t,r,n,i){if(e===null){var o=r.type;return typeof o=="function"&&!tI(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,b4(e,t,o,n,i)):(e=a1(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var u=o.memoizedProps;if(r=r.compare,r=r!==null?r:_v,r(u,n)&&e.ref===t.ref)return Rc(e,t,i)}return t.flags|=1,e=Eu(o,n),e.ref=t.ref,e.return=t,t.child=e}function b4(e,t,r,n,i){if(e!==null){var o=e.memoizedProps;if(_v(o,n)&&e.ref===t.ref)if(ma=!1,t.pendingProps=n=o,(e.lanes&i)!==0)e.flags&131072&&(ma=!0);else return t.lanes=e.lanes,Rc(e,t,i)}return MT(e,t,r,n,i)}function w4(e,t,r){var n=t.pendingProps,i=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn($f,Pa),Pa|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jn($f,Pa),Pa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,jn($f,Pa),Pa|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,jn($f,Pa),Pa|=n;return Ko(e,t,i,r),t.child}function S4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function MT(e,t,r,n,i){var o=va(r)?Uh:zo.current;return o=dp(t,o),rp(t,i),r=HE(e,t,r,n,o,i),n=GE(),e!==null&&!ma?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Rc(e,t,i)):(Qn&&n&&RE(t),t.flags|=1,Ko(e,t,r,i),t.child)}function MR(e,t,r,n,i){if(va(r)){var o=!0;U1(t)}else o=!1;if(rp(t,i),t.stateNode===null)n1(e,t),y4(t,r,n),ET(t,r,n,i),n=!0;else if(e===null){var u=t.stateNode,a=t.memoizedProps;u.props=a;var p=u.context,m=r.contextType;typeof m=="object"&&m!==null?m=_s(m):(m=va(r)?Uh:zo.current,m=dp(t,m));var w=r.getDerivedStateFromProps,C=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function";C||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(a!==n||p!==m)&&SR(t,u,n,m),hu=!1;var T=t.memoizedState;u.state=T,Z1(t,n,u,i),p=t.memoizedState,a!==n||T!==p||ga.current||hu?(typeof w=="function"&&(kT(t,r,w,n),p=t.memoizedState),(a=hu||wR(t,r,a,n,T,p,m))?(C||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=p),u.props=n,u.state=p,u.context=m,n=a):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,JO(e,t),a=t.memoizedProps,m=t.type===t.elementType?a:Ns(t.type,a),u.props=m,C=t.pendingProps,T=u.context,p=r.contextType,typeof p=="object"&&p!==null?p=_s(p):(p=va(r)?Uh:zo.current,p=dp(t,p));var P=r.getDerivedStateFromProps;(w=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(a!==C||T!==p)&&SR(t,u,n,p),hu=!1,T=t.memoizedState,u.state=T,Z1(t,n,u,i);var R=t.memoizedState;a!==C||T!==R||ga.current||hu?(typeof P=="function"&&(kT(t,r,P,n),R=t.memoizedState),(m=hu||wR(t,r,m,n,T,R,p)||!1)?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,R,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,R,p)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||a===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=R),u.props=n,u.state=R,u.context=p,n=m):(typeof u.componentDidUpdate!="function"||a===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),n=!1)}return PT(e,t,r,n,o,i)}function PT(e,t,r,n,i,o){S4(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return i&&pR(t,r,!1),Rc(e,t,o);n=t.stateNode,NG.current=t;var a=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=pp(t,e.child,null,o),t.child=pp(t,null,a,o)):Ko(e,t,a,o),t.memoizedState=n.state,i&&pR(t,r,!0),t.child}function C4(e){var t=e.stateNode;t.pendingContext?fR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fR(e,t.context,!1),NE(e,t.containerInfo)}function PR(e,t,r,n,i){return fp(),zE(i),t.flags|=256,Ko(e,t,r,n),t.child}var AT={dehydrated:null,treeContext:null,retryLane:0};function RT(e){return{baseLanes:e,cachePool:null,transitions:null}}function T4(e,t,r){var n=t.pendingProps,i=li.current,o=!1,u=(t.flags&128)!==0,a;if((a=u)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),jn(li,i&1),e===null)return CT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,o?(n=t.mode,o=t.child,u={mode:"hidden",children:u},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=Nb(u,n,0,null),e=Oh(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=RT(r),t.memoizedState=AT,e):ZE(t,u));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return jG(e,t,u,n,a,i,r);if(o){o=n.fallback,u=t.mode,i=e.child,a=i.sibling;var p={mode:"hidden",children:n.children};return!(u&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=p,t.deletions=null):(n=Eu(i,p),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Eu(a,o):(o=Oh(o,u,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,u=e.child.memoizedState,u=u===null?RT(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=AT,n}return o=e.child,e=o.sibling,n=Eu(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ZE(e,t){return t=Nb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function b_(e,t,r,n){return n!==null&&zE(n),pp(t,e.child,null,r),e=ZE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jG(e,t,r,n,i,o,u){if(r)return t.flags&256?(t.flags&=-257,n=uS(Error(xt(422))),b_(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Nb({mode:"visible",children:n.children},i,0,null),o=Oh(o,i,u,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&pp(t,e.child,null,u),t.child.memoizedState=RT(u),t.memoizedState=AT,o);if(!(t.mode&1))return b_(e,t,u,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(xt(419)),n=uS(o,n,void 0),b_(e,t,u,n)}if(a=(u&e.childLanes)!==0,ma||a){if(n=Yi,n!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ac(e,i),Zs(n,e,i,-1))}return eI(),n=uS(Error(xt(421))),b_(e,t,u,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=eq.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Na=Su(i.nextSibling),Ua=t,Qn=!0,Us=null,e!==null&&(us[hs++]=_c,us[hs++]=xc,us[hs++]=Hh,_c=e.id,xc=e.overflow,Hh=t),t=ZE(t,n.children),t.flags|=4096,t)}function AR(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),TT(e.return,t,r)}function hS(e,t,r,n,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function k4(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Ko(e,t,n.children,r),n=li.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&AR(e,r,t);else if(e.tag===19)AR(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(jn(li,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&K1(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),hS(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&K1(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}hS(t,!0,r,null,o);break;case"together":hS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function n1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xt(153));if(t.child!==null){for(e=t.child,r=Eu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Eu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function VG(e,t,r){switch(t.tag){case 3:C4(t),fp();break;case 5:YO(t);break;case 1:va(t.type)&&U1(t);break;case 4:NE(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;jn(q1,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(jn(li,li.current&1),t.flags|=128,null):r&t.child.childLanes?T4(e,t,r):(jn(li,li.current&1),e=Rc(e,t,r),e!==null?e.sibling:null);jn(li,li.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return k4(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jn(li,li.current),n)break;return null;case 22:case 23:return t.lanes=0,w4(e,t,r)}return Rc(e,t,r)}var E4,DT,I4,M4;E4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};DT=function(){};I4=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Dh(Dl.current);var o=null;switch(r){case"input":i=tT(e,i),n=tT(e,n),o=[];break;case"select":i=hi({},i,{value:void 0}),n=hi({},n,{value:void 0}),o=[];break;case"textarea":i=iT(e,i),n=iT(e,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=j1)}aT(r,n);var u;r=null;for(m in i)if(!n.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var a=i[m];for(u in a)a.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(dv.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in n){var p=n[m];if(a=i!=null?i[m]:void 0,n.hasOwnProperty(m)&&p!==a&&(p!=null||a!=null))if(m==="style")if(a){for(u in a)!a.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in p)p.hasOwnProperty(u)&&a[u]!==p[u]&&(r||(r={}),r[u]=p[u])}else r||(o||(o=[]),o.push(m,r)),r=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,a=a?a.__html:void 0,p!=null&&a!==p&&(o=o||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(dv.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&qn("scroll",e),o||a===p||(o=[])):(o=o||[]).push(m,p))}r&&(o=o||[]).push("style",r);var m=o;(t.updateQueue=m)&&(t.flags|=4)}};M4=function(e,t,r,n){r!==n&&(t.flags|=4)};function ug(e,t){if(!Qn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Mo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function UG(e,t,r){var n=t.pendingProps;switch(DE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mo(t),null;case 1:return va(t.type)&&V1(),Mo(t),null;case 3:return n=t.stateNode,mp(),Wn(ga),Wn(zo),VE(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(__(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Us!==null&&(jT(Us),Us=null))),DT(e,t),Mo(t),null;case 5:jE(t);var i=Dh(Cv.current);if(r=t.type,e!==null&&t.stateNode!=null)I4(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(xt(166));return Mo(t),null}if(e=Dh(Dl.current),__(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[kl]=t,n[wv]=o,e=(t.mode&1)!==0,r){case"dialog":qn("cancel",n),qn("close",n);break;case"iframe":case"object":case"embed":qn("load",n);break;case"video":case"audio":for(i=0;i<Mg.length;i++)qn(Mg[i],n);break;case"source":qn("error",n);break;case"img":case"image":case"link":qn("error",n),qn("load",n);break;case"details":qn("toggle",n);break;case"input":NA(n,o),qn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},qn("invalid",n);break;case"textarea":VA(n,o),qn("invalid",n)}aT(r,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var a=o[u];u==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&y_(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&y_(n.textContent,a,e),i=["children",""+a]):dv.hasOwnProperty(u)&&a!=null&&u==="onScroll"&&qn("scroll",n)}switch(r){case"input":u_(n),jA(n,o,!0);break;case"textarea":u_(n),UA(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=j1)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nO(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[kl]=t,e[wv]=n,E4(e,t,!1,!1),t.stateNode=e;e:{switch(u=sT(r,n),r){case"dialog":qn("cancel",e),qn("close",e),i=n;break;case"iframe":case"object":case"embed":qn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Mg.length;i++)qn(Mg[i],e);i=n;break;case"source":qn("error",e),i=n;break;case"img":case"image":case"link":qn("error",e),qn("load",e),i=n;break;case"details":qn("toggle",e),i=n;break;case"input":NA(e,n),i=tT(e,n),qn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=hi({},n,{value:void 0}),qn("invalid",e);break;case"textarea":VA(e,n),i=iT(e,n),qn("invalid",e);break;default:i=n}aT(r,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var p=a[o];o==="style"?aO(e,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&iO(e,p)):o==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&fv(e,p):typeof p=="number"&&fv(e,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(dv.hasOwnProperty(o)?p!=null&&o==="onScroll"&&qn("scroll",e):p!=null&&yE(e,o,p,u))}switch(r){case"input":u_(e),jA(e,n,!1);break;case"textarea":u_(e),UA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Au(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Yf(e,!!n.multiple,o,!1):n.defaultValue!=null&&Yf(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=j1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mo(t),null;case 6:if(e&&t.stateNode!=null)M4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(xt(166));if(r=Dh(Cv.current),Dh(Dl.current),__(t)){if(n=t.stateNode,r=t.memoizedProps,n[kl]=t,(o=n.nodeValue!==r)&&(e=Ua,e!==null))switch(e.tag){case 3:y_(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&y_(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[kl]=t,t.stateNode=n}return Mo(t),null;case 13:if(Wn(li),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qn&&Na!==null&&t.mode&1&&!(t.flags&128))WO(),fp(),t.flags|=98560,o=!1;else if(o=__(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(xt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(xt(317));o[kl]=t}else fp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mo(t),o=!1}else Us!==null&&(jT(Us),Us=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||li.current&1?Vi===0&&(Vi=3):eI())),t.updateQueue!==null&&(t.flags|=4),Mo(t),null);case 4:return mp(),DT(e,t),e===null&&xv(t.stateNode.containerInfo),Mo(t),null;case 10:return $E(t.type._context),Mo(t),null;case 17:return va(t.type)&&V1(),Mo(t),null;case 19:if(Wn(li),o=t.memoizedState,o===null)return Mo(t),null;if(n=(t.flags&128)!==0,u=o.rendering,u===null)if(n)ug(o,!1);else{if(Vi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=K1(e),u!==null){for(t.flags|=128,ug(o,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jn(li,li.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ii()>vp&&(t.flags|=128,n=!0,ug(o,!1),t.lanes=4194304)}else{if(!n)if(e=K1(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ug(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Qn)return Mo(t),null}else 2*Ii()-o.renderingStartTime>vp&&r!==1073741824&&(t.flags|=128,n=!0,ug(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(r=o.last,r!==null?r.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ii(),t.sibling=null,r=li.current,jn(li,n?r&1|2:r&1),t):(Mo(t),null);case 22:case 23:return QE(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pa&1073741824&&(Mo(t),t.subtreeFlags&6&&(t.flags|=8192)):Mo(t),null;case 24:return null;case 25:return null}throw Error(xt(156,t.tag))}function HG(e,t){switch(DE(t),t.tag){case 1:return va(t.type)&&V1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mp(),Wn(ga),Wn(zo),VE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jE(t),null;case 13:if(Wn(li),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xt(340));fp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Wn(li),null;case 4:return mp(),null;case 10:return $E(t.type._context),null;case 22:case 23:return QE(),null;case 24:return null;default:return null}}var w_=!1,Do=!1,GG=typeof WeakSet=="function"?WeakSet:Set,ir=null;function Of(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yi(e,t,n)}else r.current=null}function zT(e,t,r){try{r()}catch(n){yi(e,t,n)}}var RR=!1;function qG(e,t){if(vT=B1,e=zO(),AE(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var u=0,a=-1,p=-1,m=0,w=0,C=e,T=null;t:for(;;){for(var P;C!==r||i!==0&&C.nodeType!==3||(a=u+i),C!==o||n!==0&&C.nodeType!==3||(p=u+n),C.nodeType===3&&(u+=C.nodeValue.length),(P=C.firstChild)!==null;)T=C,C=P;for(;;){if(C===e)break t;if(T===r&&++m===i&&(a=u),T===o&&++w===n&&(p=u),(P=C.nextSibling)!==null)break;C=T,T=C.parentNode}C=P}r=a===-1||p===-1?null:{start:a,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(yT={focusedElem:e,selectionRange:r},B1=!1,ir=t;ir!==null;)if(t=ir,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ir=e;else for(;ir!==null;){t=ir;try{var R=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var $=R.memoizedProps,H=R.memoizedState,D=t.stateNode,O=D.getSnapshotBeforeUpdate(t.elementType===t.type?$:Ns(t.type,$),H);D.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xt(163))}}catch(Q){yi(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,ir=e;break}ir=t.return}return R=RR,RR=!1,R}function qg(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&zT(t,r,o)}i=i.next}while(i!==n)}}function Bb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function LT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function P4(e){var t=e.alternate;t!==null&&(e.alternate=null,P4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kl],delete t[wv],delete t[bT],delete t[IG],delete t[MG])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function A4(e){return e.tag===5||e.tag===3||e.tag===4}function DR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||A4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function OT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=j1));else if(n!==4&&(e=e.child,e!==null))for(OT(e,t,r),e=e.sibling;e!==null;)OT(e,t,r),e=e.sibling}function $T(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for($T(e,t,r),e=e.sibling;e!==null;)$T(e,t,r),e=e.sibling}var uo=null,js=!1;function su(e,t,r){for(r=r.child;r!==null;)R4(e,t,r),r=r.sibling}function R4(e,t,r){if(Rl&&typeof Rl.onCommitFiberUnmount=="function")try{Rl.onCommitFiberUnmount(Pb,r)}catch{}switch(r.tag){case 5:Do||Of(r,t);case 6:var n=uo,i=js;uo=null,su(e,t,r),uo=n,js=i,uo!==null&&(js?(e=uo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):uo.removeChild(r.stateNode));break;case 18:uo!==null&&(js?(e=uo,r=r.stateNode,e.nodeType===8?iS(e.parentNode,r):e.nodeType===1&&iS(e,r),vv(e)):iS(uo,r.stateNode));break;case 4:n=uo,i=js,uo=r.stateNode.containerInfo,js=!0,su(e,t,r),uo=n,js=i;break;case 0:case 11:case 14:case 15:if(!Do&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&zT(r,t,u),i=i.next}while(i!==n)}su(e,t,r);break;case 1:if(!Do&&(Of(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){yi(r,t,a)}su(e,t,r);break;case 21:su(e,t,r);break;case 22:r.mode&1?(Do=(n=Do)||r.memoizedState!==null,su(e,t,r),Do=n):su(e,t,r);break;default:su(e,t,r)}}function zR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new GG),t.forEach(function(n){var i=tq.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Os(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,u=t,a=u;e:for(;a!==null;){switch(a.tag){case 5:uo=a.stateNode,js=!1;break e;case 3:uo=a.stateNode.containerInfo,js=!0;break e;case 4:uo=a.stateNode.containerInfo,js=!0;break e}a=a.return}if(uo===null)throw Error(xt(160));R4(o,u,i),uo=null,js=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(m){yi(i,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)D4(t,e),t=t.sibling}function D4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Os(t,e),yl(e),n&4){try{qg(3,e,e.return),Bb(3,e)}catch($){yi(e,e.return,$)}try{qg(5,e,e.return)}catch($){yi(e,e.return,$)}}break;case 1:Os(t,e),yl(e),n&512&&r!==null&&Of(r,r.return);break;case 5:if(Os(t,e),yl(e),n&512&&r!==null&&Of(r,r.return),e.flags&32){var i=e.stateNode;try{fv(i,"")}catch($){yi(e,e.return,$)}}if(n&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,u=r!==null?r.memoizedProps:o,a=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&tO(i,o),sT(a,u);var m=sT(a,o);for(u=0;u<p.length;u+=2){var w=p[u],C=p[u+1];w==="style"?aO(i,C):w==="dangerouslySetInnerHTML"?iO(i,C):w==="children"?fv(i,C):yE(i,w,C,m)}switch(a){case"input":rT(i,o);break;case"textarea":rO(i,o);break;case"select":var T=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var P=o.value;P!=null?Yf(i,!!o.multiple,P,!1):T!==!!o.multiple&&(o.defaultValue!=null?Yf(i,!!o.multiple,o.defaultValue,!0):Yf(i,!!o.multiple,o.multiple?[]:"",!1))}i[wv]=o}catch($){yi(e,e.return,$)}}break;case 6:if(Os(t,e),yl(e),n&4){if(e.stateNode===null)throw Error(xt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch($){yi(e,e.return,$)}}break;case 3:if(Os(t,e),yl(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vv(t.containerInfo)}catch($){yi(e,e.return,$)}break;case 4:Os(t,e),yl(e);break;case 13:Os(t,e),yl(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(JE=Ii())),n&4&&zR(e);break;case 22:if(w=r!==null&&r.memoizedState!==null,e.mode&1?(Do=(m=Do)||w,Os(t,e),Do=m):Os(t,e),yl(e),n&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!w&&e.mode&1)for(ir=e,w=e.child;w!==null;){for(C=ir=w;ir!==null;){switch(T=ir,P=T.child,T.tag){case 0:case 11:case 14:case 15:qg(4,T,T.return);break;case 1:Of(T,T.return);var R=T.stateNode;if(typeof R.componentWillUnmount=="function"){n=T,r=T.return;try{t=n,R.props=t.memoizedProps,R.state=t.memoizedState,R.componentWillUnmount()}catch($){yi(n,r,$)}}break;case 5:Of(T,T.return);break;case 22:if(T.memoizedState!==null){OR(C);continue}}P!==null?(P.return=T,ir=P):OR(C)}w=w.sibling}e:for(w=null,C=e;;){if(C.tag===5){if(w===null){w=C;try{i=C.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=C.stateNode,p=C.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,a.style.display=oO("display",u))}catch($){yi(e,e.return,$)}}}else if(C.tag===6){if(w===null)try{C.stateNode.nodeValue=m?"":C.memoizedProps}catch($){yi(e,e.return,$)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;w===C&&(w=null),C=C.return}w===C&&(w=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Os(t,e),yl(e),n&4&&zR(e);break;case 21:break;default:Os(t,e),yl(e)}}function yl(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(A4(r)){var n=r;break e}r=r.return}throw Error(xt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(fv(i,""),n.flags&=-33);var o=DR(e);$T(e,o,i);break;case 3:case 4:var u=n.stateNode.containerInfo,a=DR(e);OT(e,a,u);break;default:throw Error(xt(161))}}catch(p){yi(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function WG(e,t,r){ir=e,z4(e)}function z4(e,t,r){for(var n=(e.mode&1)!==0;ir!==null;){var i=ir,o=i.child;if(i.tag===22&&n){var u=i.memoizedState!==null||w_;if(!u){var a=i.alternate,p=a!==null&&a.memoizedState!==null||Do;a=w_;var m=Do;if(w_=u,(Do=p)&&!m)for(ir=i;ir!==null;)u=ir,p=u.child,u.tag===22&&u.memoizedState!==null?$R(i):p!==null?(p.return=u,ir=p):$R(i);for(;o!==null;)ir=o,z4(o),o=o.sibling;ir=i,w_=a,Do=m}LR(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ir=o):LR(e)}}function LR(e){for(;ir!==null;){var t=ir;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Do||Bb(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Do)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Ns(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&_R(t,o,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}_R(t,u,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var w=m.memoizedState;if(w!==null){var C=w.dehydrated;C!==null&&vv(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xt(163))}Do||t.flags&512&&LT(t)}catch(T){yi(t,t.return,T)}}if(t===e){ir=null;break}if(r=t.sibling,r!==null){r.return=t.return,ir=r;break}ir=t.return}}function OR(e){for(;ir!==null;){var t=ir;if(t===e){ir=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ir=r;break}ir=t.return}}function $R(e){for(;ir!==null;){var t=ir;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Bb(4,t)}catch(p){yi(t,r,p)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(p){yi(t,i,p)}}var o=t.return;try{LT(t)}catch(p){yi(t,o,p)}break;case 5:var u=t.return;try{LT(t)}catch(p){yi(t,u,p)}}}catch(p){yi(t,t.return,p)}if(t===e){ir=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ir=a;break}ir=t.return}}var ZG=Math.ceil,Y1=Bc.ReactCurrentDispatcher,KE=Bc.ReactCurrentOwner,vs=Bc.ReactCurrentBatchConfig,hn=0,Yi=null,Li=null,vo=0,Pa=0,$f=Gu(0),Vi=0,Iv=null,qh=0,Fb=0,XE=0,Wg=null,da=null,JE=0,vp=1/0,fc=null,Q1=!1,BT=null,Tu=null,S_=!1,yu=null,ex=0,Zg=0,FT=null,i1=-1,o1=0;function Yo(){return hn&6?Ii():i1!==-1?i1:i1=Ii()}function ku(e){return e.mode&1?hn&2&&vo!==0?vo&-vo:AG.transition!==null?(o1===0&&(o1=yO()),o1):(e=Tn,e!==0||(e=window.event,e=e===void 0?16:TO(e.type)),e):1}function Zs(e,t,r,n){if(50<Zg)throw Zg=0,FT=null,Error(xt(185));vy(e,r,n),(!(hn&2)||e!==Yi)&&(e===Yi&&(!(hn&2)&&(Fb|=r),Vi===4&&fu(e,vo)),ya(e,n),r===1&&hn===0&&!(t.mode&1)&&(vp=Ii()+500,Lb&&qu()))}function ya(e,t){var r=e.callbackNode;AH(e,t);var n=$1(e,e===Yi?vo:0);if(n===0)r!==null&&qA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&qA(r),t===1)e.tag===0?PG(BR.bind(null,e)):HO(BR.bind(null,e)),kG(function(){!(hn&6)&&qu()}),r=null;else{switch(_O(n)){case 1:r=SE;break;case 4:r=gO;break;case 16:r=O1;break;case 536870912:r=vO;break;default:r=O1}r=V4(r,L4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function L4(e,t){if(i1=-1,o1=0,hn&6)throw Error(xt(327));var r=e.callbackNode;if(np()&&e.callbackNode!==r)return null;var n=$1(e,e===Yi?vo:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=tx(e,n);else{t=n;var i=hn;hn|=2;var o=$4();(Yi!==e||vo!==t)&&(fc=null,vp=Ii()+500,Lh(e,t));do try{JG();break}catch(a){O4(e,a)}while(!0);OE(),Y1.current=o,hn=i,Li!==null?t=0:(Yi=null,vo=0,t=Vi)}if(t!==0){if(t===2&&(i=dT(e),i!==0&&(n=i,t=NT(e,i))),t===1)throw r=Iv,Lh(e,0),fu(e,n),ya(e,Ii()),r;if(t===6)fu(e,n);else{if(i=e.current.alternate,!(n&30)&&!KG(i)&&(t=tx(e,n),t===2&&(o=dT(e),o!==0&&(n=o,t=NT(e,o))),t===1))throw r=Iv,Lh(e,0),fu(e,n),ya(e,Ii()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(xt(345));case 2:kh(e,da,fc);break;case 3:if(fu(e,n),(n&130023424)===n&&(t=JE+500-Ii(),10<t)){if($1(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Yo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=xT(kh.bind(null,e,da,fc),t);break}kh(e,da,fc);break;case 4:if(fu(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var u=31-Ws(n);o=1<<u,u=t[u],u>i&&(i=u),n&=~o}if(n=i,n=Ii()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ZG(n/1960))-n,10<n){e.timeoutHandle=xT(kh.bind(null,e,da,fc),n);break}kh(e,da,fc);break;case 5:kh(e,da,fc);break;default:throw Error(xt(329))}}}return ya(e,Ii()),e.callbackNode===r?L4.bind(null,e):null}function NT(e,t){var r=Wg;return e.current.memoizedState.isDehydrated&&(Lh(e,t).flags|=256),e=tx(e,t),e!==2&&(t=da,da=r,t!==null&&jT(t)),e}function jT(e){da===null?da=e:da.push.apply(da,e)}function KG(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!el(o(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fu(e,t){for(t&=~XE,t&=~Fb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ws(t),n=1<<r;e[r]=-1,t&=~n}}function BR(e){if(hn&6)throw Error(xt(327));np();var t=$1(e,0);if(!(t&1))return ya(e,Ii()),null;var r=tx(e,t);if(e.tag!==0&&r===2){var n=dT(e);n!==0&&(t=n,r=NT(e,n))}if(r===1)throw r=Iv,Lh(e,0),fu(e,t),ya(e,Ii()),r;if(r===6)throw Error(xt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kh(e,da,fc),ya(e,Ii()),null}function YE(e,t){var r=hn;hn|=1;try{return e(t)}finally{hn=r,hn===0&&(vp=Ii()+500,Lb&&qu())}}function Wh(e){yu!==null&&yu.tag===0&&!(hn&6)&&np();var t=hn;hn|=1;var r=vs.transition,n=Tn;try{if(vs.transition=null,Tn=1,e)return e()}finally{Tn=n,vs.transition=r,hn=t,!(hn&6)&&qu()}}function QE(){Pa=$f.current,Wn($f)}function Lh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,TG(r)),Li!==null)for(r=Li.return;r!==null;){var n=r;switch(DE(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&V1();break;case 3:mp(),Wn(ga),Wn(zo),VE();break;case 5:jE(n);break;case 4:mp();break;case 13:Wn(li);break;case 19:Wn(li);break;case 10:$E(n.type._context);break;case 22:case 23:QE()}r=r.return}if(Yi=e,Li=e=Eu(e.current,null),vo=Pa=t,Vi=0,Iv=null,XE=Fb=qh=0,da=Wg=null,Rh!==null){for(t=0;t<Rh.length;t++)if(r=Rh[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var u=o.next;o.next=i,n.next=u}r.pending=n}Rh=null}return e}function O4(e,t){do{var r=Li;try{if(OE(),t1.current=J1,X1){for(var n=ui.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}X1=!1}if(Gh=0,Xi=ji=ui=null,Gg=!1,Tv=0,KE.current=null,r===null||r.return===null){Vi=1,Iv=t,Li=null;break}e:{var o=e,u=r.return,a=r,p=t;if(t=vo,a.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,w=a,C=w.tag;if(!(w.mode&1)&&(C===0||C===11||C===15)){var T=w.alternate;T?(w.updateQueue=T.updateQueue,w.memoizedState=T.memoizedState,w.lanes=T.lanes):(w.updateQueue=null,w.memoizedState=null)}var P=TR(u);if(P!==null){P.flags&=-257,kR(P,u,a,o,t),P.mode&1&&CR(o,m,t),t=P,p=m;var R=t.updateQueue;if(R===null){var $=new Set;$.add(p),t.updateQueue=$}else R.add(p);break e}else{if(!(t&1)){CR(o,m,t),eI();break e}p=Error(xt(426))}}else if(Qn&&a.mode&1){var H=TR(u);if(H!==null){!(H.flags&65536)&&(H.flags|=256),kR(H,u,a,o,t),zE(gp(p,a));break e}}o=p=gp(p,a),Vi!==4&&(Vi=2),Wg===null?Wg=[o]:Wg.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var D=_4(o,p,t);yR(o,D);break e;case 1:a=p;var O=o.type,L=o.stateNode;if(!(o.flags&128)&&(typeof O.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Tu===null||!Tu.has(L)))){o.flags|=65536,t&=-t,o.lanes|=t;var Q=x4(o,a,t);yR(o,Q);break e}}o=o.return}while(o!==null)}F4(r)}catch(V){t=V,Li===r&&r!==null&&(Li=r=r.return);continue}break}while(!0)}function $4(){var e=Y1.current;return Y1.current=J1,e===null?J1:e}function eI(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),Yi===null||!(qh&268435455)&&!(Fb&268435455)||fu(Yi,vo)}function tx(e,t){var r=hn;hn|=2;var n=$4();(Yi!==e||vo!==t)&&(fc=null,Lh(e,t));do try{XG();break}catch(i){O4(e,i)}while(!0);if(OE(),hn=r,Y1.current=n,Li!==null)throw Error(xt(261));return Yi=null,vo=0,Vi}function XG(){for(;Li!==null;)B4(Li)}function JG(){for(;Li!==null&&!wH();)B4(Li)}function B4(e){var t=j4(e.alternate,e,Pa);e.memoizedProps=e.pendingProps,t===null?F4(e):Li=t,KE.current=null}function F4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=HG(r,t),r!==null){r.flags&=32767,Li=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vi=6,Li=null;return}}else if(r=UG(r,t,Pa),r!==null){Li=r;return}if(t=t.sibling,t!==null){Li=t;return}Li=t=e}while(t!==null);Vi===0&&(Vi=5)}function kh(e,t,r){var n=Tn,i=vs.transition;try{vs.transition=null,Tn=1,YG(e,t,r,n)}finally{vs.transition=i,Tn=n}return null}function YG(e,t,r,n){do np();while(yu!==null);if(hn&6)throw Error(xt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(xt(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(RH(e,o),e===Yi&&(Li=Yi=null,vo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||S_||(S_=!0,V4(O1,function(){return np(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=vs.transition,vs.transition=null;var u=Tn;Tn=1;var a=hn;hn|=4,KE.current=null,qG(e,r),D4(r,e),yG(yT),B1=!!vT,yT=vT=null,e.current=r,WG(r),SH(),hn=a,Tn=u,vs.transition=o}else e.current=r;if(S_&&(S_=!1,yu=e,ex=i),o=e.pendingLanes,o===0&&(Tu=null),kH(r.stateNode),ya(e,Ii()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Q1)throw Q1=!1,e=BT,BT=null,e;return ex&1&&e.tag!==0&&np(),o=e.pendingLanes,o&1?e===FT?Zg++:(Zg=0,FT=e):Zg=0,qu(),null}function np(){if(yu!==null){var e=_O(ex),t=vs.transition,r=Tn;try{if(vs.transition=null,Tn=16>e?16:e,yu===null)var n=!1;else{if(e=yu,yu=null,ex=0,hn&6)throw Error(xt(331));var i=hn;for(hn|=4,ir=e.current;ir!==null;){var o=ir,u=o.child;if(ir.flags&16){var a=o.deletions;if(a!==null){for(var p=0;p<a.length;p++){var m=a[p];for(ir=m;ir!==null;){var w=ir;switch(w.tag){case 0:case 11:case 15:qg(8,w,o)}var C=w.child;if(C!==null)C.return=w,ir=C;else for(;ir!==null;){w=ir;var T=w.sibling,P=w.return;if(P4(w),w===m){ir=null;break}if(T!==null){T.return=P,ir=T;break}ir=P}}}var R=o.alternate;if(R!==null){var $=R.child;if($!==null){R.child=null;do{var H=$.sibling;$.sibling=null,$=H}while($!==null)}}ir=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,ir=u;else e:for(;ir!==null;){if(o=ir,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qg(9,o,o.return)}var D=o.sibling;if(D!==null){D.return=o.return,ir=D;break e}ir=o.return}}var O=e.current;for(ir=O;ir!==null;){u=ir;var L=u.child;if(u.subtreeFlags&2064&&L!==null)L.return=u,ir=L;else e:for(u=O;ir!==null;){if(a=ir,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bb(9,a)}}catch(V){yi(a,a.return,V)}if(a===u){ir=null;break e}var Q=a.sibling;if(Q!==null){Q.return=a.return,ir=Q;break e}ir=a.return}}if(hn=i,qu(),Rl&&typeof Rl.onPostCommitFiberRoot=="function")try{Rl.onPostCommitFiberRoot(Pb,e)}catch{}n=!0}return n}finally{Tn=r,vs.transition=t}}return!1}function FR(e,t,r){t=gp(r,t),t=_4(e,t,1),e=Cu(e,t,1),t=Yo(),e!==null&&(vy(e,1,t),ya(e,t))}function yi(e,t,r){if(e.tag===3)FR(e,e,r);else for(;t!==null;){if(t.tag===3){FR(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Tu===null||!Tu.has(n))){e=gp(r,e),e=x4(t,e,1),t=Cu(t,e,1),e=Yo(),t!==null&&(vy(t,1,e),ya(t,e));break}}t=t.return}}function QG(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Yo(),e.pingedLanes|=e.suspendedLanes&r,Yi===e&&(vo&r)===r&&(Vi===4||Vi===3&&(vo&130023424)===vo&&500>Ii()-JE?Lh(e,0):XE|=r),ya(e,t)}function N4(e,t){t===0&&(e.mode&1?(t=f_,f_<<=1,!(f_&130023424)&&(f_=4194304)):t=1);var r=Yo();e=Ac(e,t),e!==null&&(vy(e,t,r),ya(e,r))}function eq(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),N4(e,r)}function tq(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(xt(314))}n!==null&&n.delete(t),N4(e,r)}var j4;j4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ga.current)ma=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ma=!1,VG(e,t,r);ma=!!(e.flags&131072)}else ma=!1,Qn&&t.flags&1048576&&GO(t,G1,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;n1(e,t),e=t.pendingProps;var i=dp(t,zo.current);rp(t,r),i=HE(null,t,n,e,i,r);var o=GE();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,va(n)?(o=!0,U1(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,FE(t),i.updater=$b,t.stateNode=i,i._reactInternals=t,ET(t,n,e,r),t=PT(null,t,n,!0,o,r)):(t.tag=0,Qn&&o&&RE(t),Ko(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(n1(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=nq(n),e=Ns(n,e),i){case 0:t=MT(null,t,n,e,r);break e;case 1:t=MR(null,t,n,e,r);break e;case 11:t=ER(null,t,n,e,r);break e;case 14:t=IR(null,t,n,Ns(n.type,e),r);break e}throw Error(xt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ns(n,i),MT(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ns(n,i),MR(e,t,n,i,r);case 3:e:{if(C4(t),e===null)throw Error(xt(387));n=t.pendingProps,o=t.memoizedState,i=o.element,JO(e,t),Z1(t,n,null,r);var u=t.memoizedState;if(n=u.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=gp(Error(xt(423)),t),t=PR(e,t,n,r,i);break e}else if(n!==i){i=gp(Error(xt(424)),t),t=PR(e,t,n,r,i);break e}else for(Na=Su(t.stateNode.containerInfo.firstChild),Ua=t,Qn=!0,Us=null,r=KO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fp(),n===i){t=Rc(e,t,r);break e}Ko(e,t,n,r)}t=t.child}return t;case 5:return YO(t),e===null&&CT(t),n=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,u=i.children,_T(n,i)?u=null:o!==null&&_T(n,o)&&(t.flags|=32),S4(e,t),Ko(e,t,u,r),t.child;case 6:return e===null&&CT(t),null;case 13:return T4(e,t,r);case 4:return NE(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pp(t,null,n,r):Ko(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ns(n,i),ER(e,t,n,i,r);case 7:return Ko(e,t,t.pendingProps,r),t.child;case 8:return Ko(e,t,t.pendingProps.children,r),t.child;case 12:return Ko(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,jn(q1,n._currentValue),n._currentValue=u,o!==null)if(el(o.value,u)){if(o.children===i.children&&!ga.current){t=Rc(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){u=o.child;for(var p=a.firstContext;p!==null;){if(p.context===n){if(o.tag===1){p=Sc(-1,r&-r),p.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var w=m.pending;w===null?p.next=p:(p.next=w.next,w.next=p),m.pending=p}}o.lanes|=r,p=o.alternate,p!==null&&(p.lanes|=r),TT(o.return,r,t),a.lanes|=r;break}p=p.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(xt(341));u.lanes|=r,a=u.alternate,a!==null&&(a.lanes|=r),TT(u,r,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Ko(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,rp(t,r),i=_s(i),n=n(i),t.flags|=1,Ko(e,t,n,r),t.child;case 14:return n=t.type,i=Ns(n,t.pendingProps),i=Ns(n.type,i),IR(e,t,n,i,r);case 15:return b4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ns(n,i),n1(e,t),t.tag=1,va(n)?(e=!0,U1(t)):e=!1,rp(t,r),y4(t,n,i),ET(t,n,i,r),PT(null,t,n,!0,e,r);case 19:return k4(e,t,r);case 22:return w4(e,t,r)}throw Error(xt(156,t.tag))};function V4(e,t){return mO(e,t)}function rq(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(e,t,r,n){return new rq(e,t,r,n)}function tI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nq(e){if(typeof e=="function")return tI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xE)return 11;if(e===bE)return 14}return 2}function Eu(e,t){var r=e.alternate;return r===null?(r=ps(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function a1(e,t,r,n,i,o){var u=2;if(n=e,typeof e=="function")tI(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Ef:return Oh(r.children,i,o,t);case _E:u=8,i|=8;break;case JC:return e=ps(12,r,t,i|2),e.elementType=JC,e.lanes=o,e;case YC:return e=ps(13,r,t,i),e.elementType=YC,e.lanes=o,e;case QC:return e=ps(19,r,t,i),e.elementType=QC,e.lanes=o,e;case YL:return Nb(r,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case XL:u=10;break e;case JL:u=9;break e;case xE:u=11;break e;case bE:u=14;break e;case uu:u=16,n=null;break e}throw Error(xt(130,e==null?e:typeof e,""))}return t=ps(u,r,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Oh(e,t,r,n){return e=ps(7,e,n,t),e.lanes=r,e}function Nb(e,t,r,n){return e=ps(22,e,n,t),e.elementType=YL,e.lanes=r,e.stateNode={isHidden:!1},e}function dS(e,t,r){return e=ps(6,e,null,t),e.lanes=r,e}function fS(e,t,r){return t=ps(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iq(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=W2(0),this.expirationTimes=W2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=W2(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rI(e,t,r,n,i,o,u,a,p){return e=new iq(e,t,r,a,p),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ps(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},FE(o),e}function oq(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kf,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function U4(e){if(!e)return Ru;e=e._reactInternals;e:{if(sd(e)!==e||e.tag!==1)throw Error(xt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(va(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xt(171))}if(e.tag===1){var r=e.type;if(va(r))return UO(e,r,t)}return t}function H4(e,t,r,n,i,o,u,a,p){return e=rI(r,n,!0,e,i,o,u,a,p),e.context=U4(null),r=e.current,n=Yo(),i=ku(r),o=Sc(n,i),o.callback=t??null,Cu(r,o,i),e.current.lanes=i,vy(e,i,n),ya(e,n),e}function jb(e,t,r,n){var i=t.current,o=Yo(),u=ku(i);return r=U4(r),t.context===null?t.context=r:t.pendingContext=r,t=Sc(o,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Cu(i,t,u),e!==null&&(Zs(e,i,u,o),e1(e,i,u)),u}function rx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function NR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nI(e,t){NR(e,t),(e=e.alternate)&&NR(e,t)}var G4=typeof reportError=="function"?reportError:function(e){console.error(e)};function iI(e){this._internalRoot=e}Vb.prototype.render=iI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xt(409));jb(e,t,null,null)};Vb.prototype.unmount=iI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wh(function(){jb(null,e,null,null)}),t[Pc]=null}};function Vb(e){this._internalRoot=e}Vb.prototype.unstable_scheduleHydration=function(e){if(e){var t=wO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<du.length&&t!==0&&t<du[r].priority;r++);du.splice(r,0,e),r===0&&CO(e)}};function oI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ub(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jR(){}function aq(e,t,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var m=rx(u);o.call(m)}}var u=H4(t,n,e,0,null,!1,!1,"",jR);return e._reactRootContainer=u,e[Pc]=u.current,xv(e.nodeType===8?e.parentNode:e),Wh(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var m=rx(p);a.call(m)}}var p=rI(e,0,!1,null,null,!1,!1,"",jR);return e._reactRootContainer=p,e[Pc]=p.current,xv(e.nodeType===8?e.parentNode:e),Wh(function(){jb(t,p,r,n)}),p}function Hb(e,t,r,n,i){var o=r._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var a=i;i=function(){var p=rx(u);a.call(p)}}jb(t,u,e,i)}else u=aq(r,t,e,i,n);return rx(u)}xO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ig(t.pendingLanes);r!==0&&(CE(t,r|1),ya(t,Ii()),!(hn&6)&&(vp=Ii()+500,qu()))}break;case 13:Wh(function(){var n=Ac(e,1);if(n!==null){var i=Yo();Zs(n,e,1,i)}}),nI(e,1)}};TE=function(e){if(e.tag===13){var t=Ac(e,134217728);if(t!==null){var r=Yo();Zs(t,e,134217728,r)}nI(e,134217728)}};bO=function(e){if(e.tag===13){var t=ku(e),r=Ac(e,t);if(r!==null){var n=Yo();Zs(r,e,t,n)}nI(e,t)}};wO=function(){return Tn};SO=function(e,t){var r=Tn;try{return Tn=e,t()}finally{Tn=r}};cT=function(e,t,r){switch(t){case"input":if(rT(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=zb(n);if(!i)throw Error(xt(90));eO(n),rT(n,i)}}}break;case"textarea":rO(e,r);break;case"select":t=r.value,t!=null&&Yf(e,!!r.multiple,t,!1)}};cO=YE;uO=Wh;var sq={usingClientEntryPoint:!1,Events:[_y,Af,zb,sO,lO,YE]},hg={findFiberByHostInstance:Ah,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lq={bundleType:hg.bundleType,version:hg.version,rendererPackageName:hg.rendererPackageName,rendererConfig:hg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fO(e),e===null?null:e.stateNode},findFiberByHostInstance:hg.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var C_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C_.isDisabled&&C_.supportsFiber)try{Pb=C_.inject(lq),Rl=C_}catch{}}Za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sq;Za.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oI(t))throw Error(xt(200));return oq(e,t,null,r)};Za.createRoot=function(e,t){if(!oI(e))throw Error(xt(299));var r=!1,n="",i=G4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=rI(e,1,!1,null,null,r,!1,n,i),e[Pc]=t.current,xv(e.nodeType===8?e.parentNode:e),new iI(t)};Za.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xt(188)):(e=Object.keys(e).join(","),Error(xt(268,e)));return e=fO(t),e=e===null?null:e.stateNode,e};Za.flushSync=function(e){return Wh(e)};Za.hydrate=function(e,t,r){if(!Ub(t))throw Error(xt(200));return Hb(null,e,t,!0,r)};Za.hydrateRoot=function(e,t,r){if(!oI(e))throw Error(xt(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",u=G4;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=H4(t,null,e,1,r??null,i,!1,o,u),e[Pc]=t.current,xv(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Vb(t)};Za.render=function(e,t,r){if(!Ub(t))throw Error(xt(200));return Hb(null,e,t,!1,r)};Za.unmountComponentAtNode=function(e){if(!Ub(e))throw Error(xt(40));return e._reactRootContainer?(Wh(function(){Hb(null,null,e,!1,function(){e._reactRootContainer=null,e[Pc]=null})}),!0):!1};Za.unstable_batchedUpdates=YE;Za.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ub(r))throw Error(xt(200));if(e==null||e._reactInternals===void 0)throw Error(xt(38));return Hb(e,t,r,!1,n)};Za.version="18.3.1-next-f1338f8080-20240426";function q4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q4)}catch(e){console.error(e)}}q4(),qL.exports=Za;var ld=qL.exports;const T_=ay(ld);function cq(e){return typeof e=="function"?e():e}const W4=z.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[u,a]=z.useState(null),p=fn(z.isValidElement(n)?my(n):null,r);if(Ec(()=>{o||a(cq(i)||document.body)},[i,o]),Ec(()=>{if(u&&!o)return R1(r,u),()=>{R1(r,null)}},[r,u,o]),o){if(z.isValidElement(n)){const m={ref:p};return z.cloneElement(n,m)}return N.jsx(z.Fragment,{children:n})}return N.jsx(z.Fragment,{children:u&&ld.createPortal(n,u)})});function uq(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:n}=e,i=z.useContext(kb);if(i===null)throw new Error("useMenuButton: no menu context available.");const{state:o,dispatch:u,registerTrigger:a,popupId:p}=i,{getRootProps:m,rootRef:w,active:C}=ol({disabled:t,focusableWhenDisabled:r,rootRef:n}),T=fn(w,a),P=D=>O=>{var L;(L=D.onClick)==null||L.call(D,O),!O.defaultMuiPrevented&&u({type:Hs.toggle,event:O})},R=D=>O=>{var L;(L=D.onKeyDown)==null||L.call(D,O),!O.defaultMuiPrevented&&(O.key==="ArrowDown"||O.key==="ArrowUp")&&(O.preventDefault(),u({type:Hs.open,event:O}))},$=(D={})=>({onClick:P(D),onKeyDown:R(D)});return{active:C,getRootProps:(D={})=>{const O=go(D),L=Ic($,m);return K({"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":p},D,O,L(O),{tabIndex:0,ref:T})},open:o.open,rootRef:T}}function hq(e){return`menu-item-${e.size}`}const dq={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function fq(e){var t;const{disabled:r=!1,id:n,rootRef:i,label:o,disableFocusOnHover:u=!1}=e,a=wa(n),p=z.useRef(null),m=z.useMemo(()=>({disabled:r,id:a??"",label:o,ref:p}),[r,a,o]),{dispatch:w}=(t=z.useContext(kb))!=null?t:dq,{getRootProps:C,highlighted:T}=mE({item:a,handlePointerOverEvents:!u}),{index:P,totalItemCount:R}=Mb(a??hq,m),{getRootProps:$,focusVisible:H,rootRef:D}=ol({disabled:r,focusableWhenDisabled:!0}),O=fn(D,i,p);z.useDebugValue({id:a,highlighted:T,disabled:r,label:o});const L=F=>X=>{var re;(re=F.onClick)==null||re.call(F,X),!X.defaultMuiPrevented&&w({type:Hs.close,event:X})},Q=(F={})=>K({},F,{onClick:L(F)});function V(F={}){const X=go(F),re=Ic(Q,Ic($,C));return K({},F,X,re(X),{id:a,ref:O,role:"menuitem"})}return a===void 0?{getRootProps:V,disabled:!1,focusVisible:H,highlighted:!1,index:-1,totalItemCount:0,rootRef:O}:{getRootProps:V,disabled:r,focusVisible:H,highlighted:T,index:P,totalItemCount:R,rootRef:O}}function pq(e){const t=z.useContext(Uu);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=wa(e),{getItemState:n,dispatch:i}=t;let o;r!=null?o=n(r):o={focusable:!0,highlighted:!1,selected:!1};const{highlighted:u,selected:a,focusable:p}=o,m=z.useCallback(C=>{if(C!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${C} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:u,selected:a,focusable:p}},[u,a,p,r]);return{contextValue:z.useMemo(()=>({dispatch:i,getItemState:m}),[i,m]),id:r}}function mq(e){const t=Al(e);return t.body===e?fy(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Kg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function VR(e){return parseInt(fy(e).getComputedStyle(e).paddingRight,10)||0}function gq(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function UR(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,u=>{const a=o.indexOf(u)===-1,p=!gq(u);a&&p&&Kg(u,i)})}function pS(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function vq(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(mq(n)){const u=k7(Al(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${VR(n)+u}px`;const a=Al(n).querySelectorAll(".mui-fixed");[].forEach.call(a,p=>{r.push({value:p.style.paddingRight,property:"padding-right",el:p}),p.style.paddingRight=`${VR(p)+u}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=Al(n).body;else{const u=n.parentElement,a=fy(n);o=(u==null?void 0:u.nodeName)==="HTML"&&a.getComputedStyle(u).overflowY==="scroll"?u:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:u,property:a})=>{o?u.style.setProperty(a,o):u.style.removeProperty(a)})}}function yq(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class _q{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&Kg(t.modalRef,!1);const i=yq(r);UR(r,t.mount,t.modalRef,i,!0);const o=pS(this.containers,u=>u.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=pS(this.containers,o=>o.modals.indexOf(t)!==-1),i=this.containers[n];i.restore||(i.restore=vq(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=pS(this.containers,u=>u.modals.indexOf(t)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&Kg(t.modalRef,r),UR(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const u=o.modals[o.modals.length-1];u.modalRef&&Kg(u.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function xq(e){return typeof e=="function"?e():e}function bq(e){return e?e.props.hasOwnProperty("in"):!1}const wq=new _q;function Sq(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,manager:i=wq,closeAfterTransition:o=!1,onTransitionEnter:u,onTransitionExited:a,children:p,onClose:m,open:w,rootRef:C}=e,T=z.useRef({}),P=z.useRef(null),R=z.useRef(null),$=fn(R,C),[H,D]=z.useState(!w),O=bq(p);let L=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(L=!1);const Q=()=>Al(P.current),V=()=>(T.current.modalRef=R.current,T.current.mount=P.current,T.current),F=()=>{i.mount(V(),{disableScrollLock:n}),R.current&&(R.current.scrollTop=0)},X=gu(()=>{const Se=xq(t)||Q().body;i.add(V(),Se),R.current&&F()}),re=z.useCallback(()=>i.isTopModal(V()),[i]),ye=gu(Se=>{P.current=Se,Se&&(w&&re()?F():R.current&&Kg(R.current,L))}),me=z.useCallback(()=>{i.remove(V(),L)},[L,i]);z.useEffect(()=>()=>{me()},[me]),z.useEffect(()=>{w?X():(!O||!o)&&me()},[w,me,O,o,X]);const we=Se=>Fe=>{var Ce;(Ce=Se.onKeyDown)==null||Ce.call(Se,Fe),!(Fe.key!=="Escape"||Fe.which===229||!re())&&(r||(Fe.stopPropagation(),m&&m(Fe,"escapeKeyDown")))},ke=Se=>Fe=>{var Ce;(Ce=Se.onClick)==null||Ce.call(Se,Fe),Fe.target===Fe.currentTarget&&m&&m(Fe,"backdropClick")};return{getRootProps:(Se={})=>{const Fe=go(e);delete Fe.onTransitionEnter,delete Fe.onTransitionExited;const Ce=K({},Fe,Se);return K({role:"presentation"},Ce,{onKeyDown:we(Ce),ref:$})},getBackdropProps:(Se={})=>{const Fe=Se;return K({"aria-hidden":!0},Fe,{onClick:ke(Fe),open:w})},getTransitionProps:()=>{const Se=()=>{D(!1),u&&u()},Fe=()=>{D(!0),a&&a(),o&&me()};return{onEnter:SA(Se,p==null?void 0:p.props.onEnter),onExited:SA(Fe,p==null?void 0:p.props.onExited)}},rootRef:$,portalRef:ye,isTopModal:re,exited:H,hasTransition:O}}function Cq(e){const{value:t,label:r,disabled:n,rootRef:i,id:o}=e,{getRootProps:u,highlighted:a,selected:p}=mE({item:t}),{getRootProps:m,rootRef:w}=ol({disabled:n,focusableWhenDisabled:!0}),C=wa(o),T=z.useRef(null),P=z.useMemo(()=>({disabled:n,label:r,value:t,ref:T,id:C}),[n,r,t,C]),{index:R}=Mb(t,P),$=fn(i,T,w),H=O=>L=>{var Q;(Q=O.onKeyDown)==null||Q.call(O,L),!L.defaultMuiPrevented&&[" ","Enter"].includes(L.key)&&(L.defaultMuiPrevented=!0)},D=(O={})=>({onKeyDown:H(O)});return{getRootProps:(O={})=>{const L=go(O),Q=Ic(u,Ic(m,D));return K({},O,L,Q(L),{id:C,ref:$,role:"option","aria-selected":p})},highlighted:a,index:R,selected:p,rootRef:$}}function Tq(e){const t=z.useContext(Uu);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:n}=t,{highlighted:i,selected:o,focusable:u}=r(e),a=z.useCallback(m=>{if(m!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:i,selected:o,focusable:u}},[i,o,u,e]);return{contextValue:z.useMemo(()=>({dispatch:n,getItemState:a}),[n,a])}}var _a="top",bs="bottom",ws="right",xa="left",aI="auto",by=[_a,bs,ws,xa],yp="start",Mv="end",kq="clippingParents",Z4="viewport",dg="popper",Eq="reference",HR=by.reduce(function(e,t){return e.concat([t+"-"+yp,t+"-"+Mv])},[]),K4=[].concat(by,[aI]).reduce(function(e,t){return e.concat([t,t+"-"+yp,t+"-"+Mv])},[]),Iq="beforeRead",Mq="read",Pq="afterRead",Aq="beforeMain",Rq="main",Dq="afterMain",zq="beforeWrite",Lq="write",Oq="afterWrite",$q=[Iq,Mq,Pq,Aq,Rq,Dq,zq,Lq,Oq];function jl(e){return e?(e.nodeName||"").toLowerCase():null}function qa(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Zh(e){var t=qa(e).Element;return e instanceof t||e instanceof Element}function ys(e){var t=qa(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function sI(e){if(typeof ShadowRoot>"u")return!1;var t=qa(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Bq(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!ys(o)||!jl(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(u){var a=i[u];a===!1?o.removeAttribute(u):o.setAttribute(u,a===!0?"":a)}))})}function Fq(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=u.reduce(function(p,m){return p[m]="",p},{});!ys(i)||!jl(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(p){i.removeAttribute(p)}))})}}const Nq={name:"applyStyles",enabled:!0,phase:"write",fn:Bq,effect:Fq,requires:["computeStyles"]};function zl(e){return e.split("-")[0]}var $h=Math.max,nx=Math.min,_p=Math.round;function VT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function X4(){return!/^((?!chrome|android).)*safari/i.test(VT())}function xp(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&ys(e)&&(i=e.offsetWidth>0&&_p(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&_p(n.height)/e.offsetHeight||1);var u=Zh(e)?qa(e):window,a=u.visualViewport,p=!X4()&&r,m=(n.left+(p&&a?a.offsetLeft:0))/i,w=(n.top+(p&&a?a.offsetTop:0))/o,C=n.width/i,T=n.height/o;return{width:C,height:T,top:w,right:m+C,bottom:w+T,left:m,x:m,y:w}}function lI(e){var t=xp(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function J4(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&sI(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Dc(e){return qa(e).getComputedStyle(e)}function jq(e){return["table","td","th"].indexOf(jl(e))>=0}function Wu(e){return((Zh(e)?e.ownerDocument:e.document)||window.document).documentElement}function Gb(e){return jl(e)==="html"?e:e.assignedSlot||e.parentNode||(sI(e)?e.host:null)||Wu(e)}function GR(e){return!ys(e)||Dc(e).position==="fixed"?null:e.offsetParent}function Vq(e){var t=/firefox/i.test(VT()),r=/Trident/i.test(VT());if(r&&ys(e)){var n=Dc(e);if(n.position==="fixed")return null}var i=Gb(e);for(sI(i)&&(i=i.host);ys(i)&&["html","body"].indexOf(jl(i))<0;){var o=Dc(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function wy(e){for(var t=qa(e),r=GR(e);r&&jq(r)&&Dc(r).position==="static";)r=GR(r);return r&&(jl(r)==="html"||jl(r)==="body"&&Dc(r).position==="static")?t:r||Vq(e)||t}function cI(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xg(e,t,r){return $h(e,nx(t,r))}function Uq(e,t,r){var n=Xg(e,t,r);return n>r?r:n}function Y4(){return{top:0,right:0,bottom:0,left:0}}function Q4(e){return Object.assign({},Y4(),e)}function e$(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Hq=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Q4(typeof t!="number"?t:e$(t,by))};function Gq(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,u=r.modifiersData.popperOffsets,a=zl(r.placement),p=cI(a),m=[xa,ws].indexOf(a)>=0,w=m?"height":"width";if(!(!o||!u)){var C=Hq(i.padding,r),T=lI(o),P=p==="y"?_a:xa,R=p==="y"?bs:ws,$=r.rects.reference[w]+r.rects.reference[p]-u[p]-r.rects.popper[w],H=u[p]-r.rects.reference[p],D=wy(o),O=D?p==="y"?D.clientHeight||0:D.clientWidth||0:0,L=$/2-H/2,Q=C[P],V=O-T[w]-C[R],F=O/2-T[w]/2+L,X=Xg(Q,F,V),re=p;r.modifiersData[n]=(t={},t[re]=X,t.centerOffset=X-F,t)}}function qq(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||J4(t.elements.popper,i)&&(t.elements.arrow=i))}const Wq={name:"arrow",enabled:!0,phase:"main",fn:Gq,effect:qq,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bp(e){return e.split("-")[1]}var Zq={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kq(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:_p(r*i)/i||0,y:_p(n*i)/i||0}}function qR(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,u=e.offsets,a=e.position,p=e.gpuAcceleration,m=e.adaptive,w=e.roundOffsets,C=e.isFixed,T=u.x,P=T===void 0?0:T,R=u.y,$=R===void 0?0:R,H=typeof w=="function"?w({x:P,y:$}):{x:P,y:$};P=H.x,$=H.y;var D=u.hasOwnProperty("x"),O=u.hasOwnProperty("y"),L=xa,Q=_a,V=window;if(m){var F=wy(r),X="clientHeight",re="clientWidth";if(F===qa(r)&&(F=Wu(r),Dc(F).position!=="static"&&a==="absolute"&&(X="scrollHeight",re="scrollWidth")),F=F,i===_a||(i===xa||i===ws)&&o===Mv){Q=bs;var ye=C&&F===V&&V.visualViewport?V.visualViewport.height:F[X];$-=ye-n.height,$*=p?1:-1}if(i===xa||(i===_a||i===bs)&&o===Mv){L=ws;var me=C&&F===V&&V.visualViewport?V.visualViewport.width:F[re];P-=me-n.width,P*=p?1:-1}}var we=Object.assign({position:a},m&&Zq),ke=w===!0?Kq({x:P,y:$},qa(r)):{x:P,y:$};if(P=ke.x,$=ke.y,p){var Ie;return Object.assign({},we,(Ie={},Ie[Q]=O?"0":"",Ie[L]=D?"0":"",Ie.transform=(V.devicePixelRatio||1)<=1?"translate("+P+"px, "+$+"px)":"translate3d("+P+"px, "+$+"px, 0)",Ie))}return Object.assign({},we,(t={},t[Q]=O?$+"px":"",t[L]=D?P+"px":"",t.transform="",t))}function Xq(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,u=o===void 0?!0:o,a=r.roundOffsets,p=a===void 0?!0:a,m={placement:zl(t.placement),variation:bp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,qR(Object.assign({},m,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:p})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,qR(Object.assign({},m,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Jq={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xq,data:{}};var k_={passive:!0};function Yq(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,u=n.resize,a=u===void 0?!0:u,p=qa(t.elements.popper),m=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&m.forEach(function(w){w.addEventListener("scroll",r.update,k_)}),a&&p.addEventListener("resize",r.update,k_),function(){o&&m.forEach(function(w){w.removeEventListener("scroll",r.update,k_)}),a&&p.removeEventListener("resize",r.update,k_)}}const Qq={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Yq,data:{}};var eW={left:"right",right:"left",bottom:"top",top:"bottom"};function s1(e){return e.replace(/left|right|bottom|top/g,function(t){return eW[t]})}var tW={start:"end",end:"start"};function WR(e){return e.replace(/start|end/g,function(t){return tW[t]})}function uI(e){var t=qa(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function hI(e){return xp(Wu(e)).left+uI(e).scrollLeft}function rW(e,t){var r=qa(e),n=Wu(e),i=r.visualViewport,o=n.clientWidth,u=n.clientHeight,a=0,p=0;if(i){o=i.width,u=i.height;var m=X4();(m||!m&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}return{width:o,height:u,x:a+hI(e),y:p}}function nW(e){var t,r=Wu(e),n=uI(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=$h(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=$h(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+hI(e),p=-n.scrollTop;return Dc(i||r).direction==="rtl"&&(a+=$h(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:u,x:a,y:p}}function dI(e){var t=Dc(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function t$(e){return["html","body","#document"].indexOf(jl(e))>=0?e.ownerDocument.body:ys(e)&&dI(e)?e:t$(Gb(e))}function Jg(e,t){var r;t===void 0&&(t=[]);var n=t$(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=qa(n),u=i?[o].concat(o.visualViewport||[],dI(n)?n:[]):n,a=t.concat(u);return i?a:a.concat(Jg(Gb(u)))}function UT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function iW(e,t){var r=xp(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function ZR(e,t,r){return t===Z4?UT(rW(e,r)):Zh(t)?iW(t,r):UT(nW(Wu(e)))}function oW(e){var t=Jg(Gb(e)),r=["absolute","fixed"].indexOf(Dc(e).position)>=0,n=r&&ys(e)?wy(e):e;return Zh(n)?t.filter(function(i){return Zh(i)&&J4(i,n)&&jl(i)!=="body"}):[]}function aW(e,t,r,n){var i=t==="clippingParents"?oW(e):[].concat(t),o=[].concat(i,[r]),u=o[0],a=o.reduce(function(p,m){var w=ZR(e,m,n);return p.top=$h(w.top,p.top),p.right=nx(w.right,p.right),p.bottom=nx(w.bottom,p.bottom),p.left=$h(w.left,p.left),p},ZR(e,u,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function r$(e){var t=e.reference,r=e.element,n=e.placement,i=n?zl(n):null,o=n?bp(n):null,u=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,p;switch(i){case _a:p={x:u,y:t.y-r.height};break;case bs:p={x:u,y:t.y+t.height};break;case ws:p={x:t.x+t.width,y:a};break;case xa:p={x:t.x-r.width,y:a};break;default:p={x:t.x,y:t.y}}var m=i?cI(i):null;if(m!=null){var w=m==="y"?"height":"width";switch(o){case yp:p[m]=p[m]-(t[w]/2-r[w]/2);break;case Mv:p[m]=p[m]+(t[w]/2-r[w]/2);break}}return p}function Pv(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,u=o===void 0?e.strategy:o,a=r.boundary,p=a===void 0?kq:a,m=r.rootBoundary,w=m===void 0?Z4:m,C=r.elementContext,T=C===void 0?dg:C,P=r.altBoundary,R=P===void 0?!1:P,$=r.padding,H=$===void 0?0:$,D=Q4(typeof H!="number"?H:e$(H,by)),O=T===dg?Eq:dg,L=e.rects.popper,Q=e.elements[R?O:T],V=aW(Zh(Q)?Q:Q.contextElement||Wu(e.elements.popper),p,w,u),F=xp(e.elements.reference),X=r$({reference:F,element:L,strategy:"absolute",placement:i}),re=UT(Object.assign({},L,X)),ye=T===dg?re:F,me={top:V.top-ye.top+D.top,bottom:ye.bottom-V.bottom+D.bottom,left:V.left-ye.left+D.left,right:ye.right-V.right+D.right},we=e.modifiersData.offset;if(T===dg&&we){var ke=we[i];Object.keys(me).forEach(function(Ie){var qe=[ws,bs].indexOf(Ie)>=0?1:-1,Re=[_a,bs].indexOf(Ie)>=0?"y":"x";me[Ie]+=ke[Re]*qe})}return me}function sW(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,u=r.padding,a=r.flipVariations,p=r.allowedAutoPlacements,m=p===void 0?K4:p,w=bp(n),C=w?a?HR:HR.filter(function(R){return bp(R)===w}):by,T=C.filter(function(R){return m.indexOf(R)>=0});T.length===0&&(T=C);var P=T.reduce(function(R,$){return R[$]=Pv(e,{placement:$,boundary:i,rootBoundary:o,padding:u})[zl($)],R},{});return Object.keys(P).sort(function(R,$){return P[R]-P[$]})}function lW(e){if(zl(e)===aI)return[];var t=s1(e);return[WR(e),t,WR(t)]}function cW(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!0:u,p=r.fallbackPlacements,m=r.padding,w=r.boundary,C=r.rootBoundary,T=r.altBoundary,P=r.flipVariations,R=P===void 0?!0:P,$=r.allowedAutoPlacements,H=t.options.placement,D=zl(H),O=D===H,L=p||(O||!R?[s1(H)]:lW(H)),Q=[H].concat(L).reduce(function(Ct,Bt){return Ct.concat(zl(Bt)===aI?sW(t,{placement:Bt,boundary:w,rootBoundary:C,padding:m,flipVariations:R,allowedAutoPlacements:$}):Bt)},[]),V=t.rects.reference,F=t.rects.popper,X=new Map,re=!0,ye=Q[0],me=0;me<Q.length;me++){var we=Q[me],ke=zl(we),Ie=bp(we)===yp,qe=[_a,bs].indexOf(ke)>=0,Re=qe?"width":"height",Se=Pv(t,{placement:we,boundary:w,rootBoundary:C,altBoundary:T,padding:m}),Fe=qe?Ie?ws:xa:Ie?bs:_a;V[Re]>F[Re]&&(Fe=s1(Fe));var Ce=s1(Fe),Ne=[];if(o&&Ne.push(Se[ke]<=0),a&&Ne.push(Se[Fe]<=0,Se[Ce]<=0),Ne.every(function(Ct){return Ct})){ye=we,re=!1;break}X.set(we,Ne)}if(re)for(var Je=R?3:1,at=function(Bt){var Tt=Q.find(function(it){var Ze=X.get(it);if(Ze)return Ze.slice(0,Bt).every(function(rt){return rt})});if(Tt)return ye=Tt,"break"},st=Je;st>0;st--){var Dt=at(st);if(Dt==="break")break}t.placement!==ye&&(t.modifiersData[n]._skip=!0,t.placement=ye,t.reset=!0)}}const uW={name:"flip",enabled:!0,phase:"main",fn:cW,requiresIfExists:["offset"],data:{_skip:!1}};function KR(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function XR(e){return[_a,ws,bs,xa].some(function(t){return e[t]>=0})}function hW(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,u=Pv(t,{elementContext:"reference"}),a=Pv(t,{altBoundary:!0}),p=KR(u,n),m=KR(a,i,o),w=XR(p),C=XR(m);t.modifiersData[r]={referenceClippingOffsets:p,popperEscapeOffsets:m,isReferenceHidden:w,hasPopperEscaped:C},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":C})}const dW={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hW};function fW(e,t,r){var n=zl(e),i=[xa,_a].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,u=o[0],a=o[1];return u=u||0,a=(a||0)*i,[xa,ws].indexOf(n)>=0?{x:a,y:u}:{x:u,y:a}}function pW(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,u=K4.reduce(function(w,C){return w[C]=fW(C,t.rects,o),w},{}),a=u[t.placement],p=a.x,m=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=p,t.modifiersData.popperOffsets.y+=m),t.modifiersData[n]=u}const mW={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pW};function gW(e){var t=e.state,r=e.name;t.modifiersData[r]=r$({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const vW={name:"popperOffsets",enabled:!0,phase:"read",fn:gW,data:{}};function yW(e){return e==="x"?"y":"x"}function _W(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!1:u,p=r.boundary,m=r.rootBoundary,w=r.altBoundary,C=r.padding,T=r.tether,P=T===void 0?!0:T,R=r.tetherOffset,$=R===void 0?0:R,H=Pv(t,{boundary:p,rootBoundary:m,padding:C,altBoundary:w}),D=zl(t.placement),O=bp(t.placement),L=!O,Q=cI(D),V=yW(Q),F=t.modifiersData.popperOffsets,X=t.rects.reference,re=t.rects.popper,ye=typeof $=="function"?$(Object.assign({},t.rects,{placement:t.placement})):$,me=typeof ye=="number"?{mainAxis:ye,altAxis:ye}:Object.assign({mainAxis:0,altAxis:0},ye),we=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ke={x:0,y:0};if(F){if(o){var Ie,qe=Q==="y"?_a:xa,Re=Q==="y"?bs:ws,Se=Q==="y"?"height":"width",Fe=F[Q],Ce=Fe+H[qe],Ne=Fe-H[Re],Je=P?-re[Se]/2:0,at=O===yp?X[Se]:re[Se],st=O===yp?-re[Se]:-X[Se],Dt=t.elements.arrow,Ct=P&&Dt?lI(Dt):{width:0,height:0},Bt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Y4(),Tt=Bt[qe],it=Bt[Re],Ze=Xg(0,X[Se],Ct[Se]),rt=L?X[Se]/2-Je-Ze-Tt-me.mainAxis:at-Ze-Tt-me.mainAxis,pt=L?-X[Se]/2+Je+Ze+it+me.mainAxis:st+Ze+it+me.mainAxis,ur=t.elements.arrow&&wy(t.elements.arrow),or=ur?Q==="y"?ur.clientTop||0:ur.clientLeft||0:0,Er=(Ie=we==null?void 0:we[Q])!=null?Ie:0,jr=Fe+rt-Er-or,ar=Fe+pt-Er,It=Xg(P?nx(Ce,jr):Ce,Fe,P?$h(Ne,ar):Ne);F[Q]=It,ke[Q]=It-Fe}if(a){var gr,Wt=Q==="x"?_a:xa,Br=Q==="x"?bs:ws,He=F[V],Cr=V==="y"?"height":"width",Rr=He+H[Wt],tr=He-H[Br],lr=[_a,xa].indexOf(D)!==-1,Pr=(gr=we==null?void 0:we[V])!=null?gr:0,Fr=lr?Rr:He-X[Cr]-re[Cr]-Pr+me.altAxis,Ir=lr?He+X[Cr]+re[Cr]-Pr-me.altAxis:tr,vr=P&&lr?Uq(Fr,He,Ir):Xg(P?Fr:Rr,He,P?Ir:tr);F[V]=vr,ke[V]=vr-He}t.modifiersData[n]=ke}}const xW={name:"preventOverflow",enabled:!0,phase:"main",fn:_W,requiresIfExists:["offset"]};function bW(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function wW(e){return e===qa(e)||!ys(e)?uI(e):bW(e)}function SW(e){var t=e.getBoundingClientRect(),r=_p(t.width)/e.offsetWidth||1,n=_p(t.height)/e.offsetHeight||1;return r!==1||n!==1}function CW(e,t,r){r===void 0&&(r=!1);var n=ys(t),i=ys(t)&&SW(t),o=Wu(t),u=xp(e,i,r),a={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(n||!n&&!r)&&((jl(t)!=="body"||dI(o))&&(a=wW(t)),ys(t)?(p=xp(t,!0),p.x+=t.clientLeft,p.y+=t.clientTop):o&&(p.x=hI(o))),{x:u.left+a.scrollLeft-p.x,y:u.top+a.scrollTop-p.y,width:u.width,height:u.height}}function TW(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var u=[].concat(o.requires||[],o.requiresIfExists||[]);u.forEach(function(a){if(!r.has(a)){var p=t.get(a);p&&i(p)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function kW(e){var t=TW(e);return $q.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function EW(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function IW(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var JR={placement:"bottom",modifiers:[],strategy:"absolute"};function YR(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function MW(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?JR:i;return function(a,p,m){m===void 0&&(m=o);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},JR,o),modifiersData:{},elements:{reference:a,popper:p},attributes:{},styles:{}},C=[],T=!1,P={state:w,setOptions:function(D){var O=typeof D=="function"?D(w.options):D;$(),w.options=Object.assign({},o,w.options,O),w.scrollParents={reference:Zh(a)?Jg(a):a.contextElement?Jg(a.contextElement):[],popper:Jg(p)};var L=kW(IW([].concat(n,w.options.modifiers)));return w.orderedModifiers=L.filter(function(Q){return Q.enabled}),R(),P.update()},forceUpdate:function(){if(!T){var D=w.elements,O=D.reference,L=D.popper;if(YR(O,L)){w.rects={reference:CW(O,wy(L),w.options.strategy==="fixed"),popper:lI(L)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(me){return w.modifiersData[me.name]=Object.assign({},me.data)});for(var Q=0;Q<w.orderedModifiers.length;Q++){if(w.reset===!0){w.reset=!1,Q=-1;continue}var V=w.orderedModifiers[Q],F=V.fn,X=V.options,re=X===void 0?{}:X,ye=V.name;typeof F=="function"&&(w=F({state:w,options:re,name:ye,instance:P})||w)}}}},update:EW(function(){return new Promise(function(H){P.forceUpdate(),H(w)})}),destroy:function(){$(),T=!0}};if(!YR(a,p))return P;P.setOptions(m).then(function(H){!T&&m.onFirstUpdate&&m.onFirstUpdate(H)});function R(){w.orderedModifiers.forEach(function(H){var D=H.name,O=H.options,L=O===void 0?{}:O,Q=H.effect;if(typeof Q=="function"){var V=Q({state:w,name:D,instance:P,options:L}),F=function(){};C.push(V||F)}})}function $(){C.forEach(function(H){return H()}),C=[]}return P}}var PW=[Qq,vW,Jq,Nq,mW,uW,xW,Wq,dW],AW=MW({defaultModifiers:PW});const n$="Popper";function RW(e){return HL(n$,e)}wU(n$,["root"]);const DW=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],zW=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function LW(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function HT(e){return typeof e=="function"?e():e}function OW(e){return e.nodeType!==void 0}const $W=()=>qr({root:["root"]},yU(RW)),BW={},FW=z.forwardRef(function(t,r){var n;const{anchorEl:i,children:o,direction:u,disablePortal:a,modifiers:p,open:m,placement:w,popperOptions:C,popperRef:T,slotProps:P={},slots:R={},TransitionProps:$}=t,H=Gt(t,DW),D=z.useRef(null),O=fn(D,r),L=z.useRef(null),Q=fn(L,T),V=z.useRef(Q);Ec(()=>{V.current=Q},[Q]),z.useImperativeHandle(T,()=>L.current,[]);const F=LW(w,u),[X,re]=z.useState(F),[ye,me]=z.useState(HT(i));z.useEffect(()=>{L.current&&L.current.forceUpdate()}),z.useEffect(()=>{i&&me(HT(i))},[i]),Ec(()=>{if(!ye||!m)return;const Re=Ce=>{re(Ce.placement)};let Se=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ce})=>{Re(Ce)}}];p!=null&&(Se=Se.concat(p)),C&&C.modifiers!=null&&(Se=Se.concat(C.modifiers));const Fe=AW(ye,D.current,K({placement:F},C,{modifiers:Se}));return V.current(Fe),()=>{Fe.destroy(),V.current(null)}},[ye,a,p,m,C,F]);const we={placement:X};$!==null&&(we.TransitionProps=$);const ke=$W(),Ie=(n=R.root)!=null?n:"div",qe=LL({elementType:Ie,externalSlotProps:P.root,externalForwardedProps:H,additionalProps:{role:"tooltip",ref:O},ownerState:t,className:ke.root});return N.jsx(Ie,K({},qe,{children:typeof o=="function"?o(we):o}))}),qb=z.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:u="ltr",disablePortal:a=!1,keepMounted:p=!1,modifiers:m,open:w,placement:C="bottom",popperOptions:T=BW,popperRef:P,style:R,transition:$=!1,slotProps:H={},slots:D={}}=t,O=Gt(t,zW),[L,Q]=z.useState(!0),V=()=>{Q(!1)},F=()=>{Q(!0)};if(!p&&!w&&(!$||L))return null;let X;if(o)X=o;else if(n){const me=HT(n);X=me&&OW(me)?Al(me).body:Al(null).body}const re=!w&&p&&(!$||L)?"none":void 0,ye=$?{in:w,onEnter:V,onExited:F}:void 0;return N.jsx(W4,{disablePortal:a,container:X,children:N.jsx(FW,K({anchorEl:n,direction:u,disablePortal:a,modifiers:m,ref:r,open:$?!L:w,placement:C,popperOptions:T,popperRef:P,slotProps:H,slots:D},O,{style:K({position:"fixed",top:0,left:0,display:re},R),TransitionProps:ye,children:i}))})}),ix={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},NW=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function jW(e,t){const{open:r}=e,{context:{selectionMode:n}}=t;if(t.type===ix.buttonClick){var i;const p=(i=e.selectedValues[0])!=null?i:Ki(null,"start",t.context);return K({},e,{open:!r,highlightedValue:r?null:p})}if(t.type===ix.browserAutoFill)return fE(t.item,e,t.context);const o=Eb(e,t);switch(t.type){case Pn.keyDown:if(e.open){if(t.event.key==="Escape")return K({},o,{open:!1})}else{if(t.event.key==="ArrowDown"){var u;return K({},e,{open:!0,highlightedValue:(u=e.selectedValues[0])!=null?u:Ki(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var a;return K({},e,{open:!0,highlightedValue:(a=e.selectedValues[0])!=null?a:Ki(null,"end",t.context)})}}break;case Pn.itemClick:if(n==="single")return K({},o,{open:!1});break;case Pn.blur:return K({},o,{open:!1});default:return o}return o}function VW(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function UW(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:n=!1,defaultValue:i,disabled:o=!1,listboxId:u,listboxRef:a,multiple:p=!1,name:m,required:w,onChange:C,onHighlightChange:T,onOpenChange:P,open:R,options:$,getOptionAsString:H=NW,getSerializedValue:D=VW,value:O,componentName:L="useSelect"}=e,Q=z.useRef(null),V=fn(r,Q),F=z.useRef(null),X=wa(u);let re;O===void 0&&i===void 0?re=[]:i!==void 0&&(p?re=i:re=i==null?[]:[i]);const ye=z.useMemo(()=>{if(O!==void 0)return p?O:O==null?[]:[O]},[O,p]),{subitems:me,contextValue:we}=Ib(),ke=z.useMemo(()=>$!=null?new Map($.map((je,kt)=>[je.value,{value:je.value,label:je.label,disabled:je.disabled,ref:z.createRef(),id:`${X}_${kt}`}])):me,[$,me,X]),Ie=fn(a,F),{getRootProps:qe,active:Re,focusVisible:Se,rootRef:Fe}=ol({disabled:o,rootRef:V}),Ce=z.useMemo(()=>Array.from(ke.keys()),[ke]),Ne=z.useCallback(je=>{if(t!==void 0){const kt=Ce.find(wt=>t(wt,je));return ke.get(kt)}return ke.get(je)},[ke,t,Ce]),Je=z.useCallback(je=>{var kt;const wt=Ne(je);return(kt=wt==null?void 0:wt.disabled)!=null?kt:!1},[Ne]),at=z.useCallback(je=>{const kt=Ne(je);return kt?H(kt):""},[Ne,H]),st=z.useMemo(()=>({selectedValues:ye,open:R}),[ye,R]),Dt=z.useCallback(je=>{var kt;return(kt=ke.get(je))==null?void 0:kt.id},[ke]),Ct=z.useCallback((je,kt)=>{if(p)C==null||C(je,kt);else{var wt;C==null||C(je,(wt=kt[0])!=null?wt:null)}},[p,C]),Bt=z.useCallback((je,kt)=>{T==null||T(je,kt??null)},[T]),Tt=z.useCallback((je,kt,wt)=>{if(kt==="open"&&(P==null||P(wt),wt===!1&&(je==null?void 0:je.type)!=="blur")){var Ee;(Ee=Q.current)==null||Ee.focus()}},[P]),it=z.useCallback(je=>{var kt,wt;return je==null?null:(kt=(wt=me.get(je))==null?void 0:wt.ref.current)!=null?kt:null},[me]),Ze={getInitialState:()=>{var je;return{highlightedValue:null,selectedValues:(je=re)!=null?je:[],open:n}},getItemId:Dt,controlledProps:st,focusManagement:"DOM",getItemDomElement:it,itemComparer:t,isItemDisabled:Je,rootRef:Ie,onChange:Ct,onHighlightChange:Bt,onStateChange:Tt,reducerActionContext:z.useMemo(()=>({multiple:p}),[p]),items:Ce,getItemAsString:at,selectionMode:p?"multiple":"single",stateReducer:jW,componentName:L},{dispatch:rt,getRootProps:pt,contextValue:ur,state:{open:or,highlightedValue:Er,selectedValues:jr},rootRef:ar}=pE(Ze),It=z.useRef(or);Ec(()=>{if(or&&Er!==null){var je;const kt=(je=Ne(Er))==null?void 0:je.ref;if(!F.current||!(kt!=null&&kt.current))return;It.current||kt.current.focus({preventScroll:!0});const wt=F.current.getBoundingClientRect(),Ee=kt.current.getBoundingClientRect();Ee.top<wt.top?F.current.scrollTop-=wt.top-Ee.top:Ee.bottom>wt.bottom&&(F.current.scrollTop+=Ee.bottom-wt.bottom)}},[or,Er,Ne]);const gr=z.useCallback(je=>Ne(je),[Ne]),Wt=je=>kt=>{var wt;if(je==null||(wt=je.onClick)==null||wt.call(je,kt),!kt.defaultMuiPrevented){const Ee={type:ix.buttonClick,event:kt};rt(Ee)}},Br=je=>kt=>{var wt;(wt=je.onKeyDown)==null||wt.call(je,kt),!kt.defaultMuiPrevented&&(kt.key==="ArrowDown"||kt.key==="ArrowUp")&&(kt.preventDefault(),rt({type:Pn.keyDown,key:kt.key,event:kt}))},He=(je={})=>({onClick:Wt(je),onKeyDown:Br(je)}),Cr=(je={})=>K({},je,He(je),{role:"combobox","aria-expanded":or,"aria-controls":X}),Rr=(je={})=>{const kt=go(je),wt=Ic(Cr,qe);return K({},je,wt(kt))},tr=je=>kt=>{var wt,Ee;(wt=je.onBlur)==null||wt.call(je,kt),!kt.defaultMuiPrevented&&((Ee=F.current)!=null&&Ee.contains(kt.relatedTarget)||kt.relatedTarget===Q.current)&&(kt.defaultMuiPrevented=!0)},lr=(je={})=>({onBlur:tr(je)}),Pr=(je={})=>{const kt=go(je),wt=Ic(lr,pt);return K({id:X,role:"listbox","aria-multiselectable":p?"true":void 0},je,wt(kt))};z.useDebugValue({selectedOptions:jr,highlightedOption:Er,open:or});const Fr=z.useMemo(()=>K({},ur,we),[ur,we]);let Ir;e.multiple?Ir=jr:Ir=jr.length>0?jr[0]:null;let vr;if(p)vr=Ir.map(je=>gr(je)).filter(je=>je!==void 0);else{var rr;vr=(rr=gr(Ir))!=null?rr:null}const mr=je=>kt=>{var wt;if(je==null||(wt=je.onChange)==null||wt.call(je,kt),kt.defaultMuiPrevented)return;const Ee=ke.get(kt.target.value);kt.target.value===""?rt({type:Pn.clearSelection}):Ee!==void 0&&rt({type:ix.browserAutoFill,item:Ee.value,event:kt})};return{buttonActive:Re,buttonFocusVisible:Se,buttonRef:Fe,contextValue:Fr,disabled:o,dispatch:rt,getButtonProps:Rr,getHiddenInputProps:(je={})=>{const kt=go(je);return K({name:m,tabIndex:-1,"aria-hidden":!0,required:w?!0:void 0,value:D(vr),style:I7},je,{onChange:mr(kt)})},getListboxProps:Pr,getOptionMetadata:gr,listboxRef:ar,open:or,options:Ce,value:Ir,highlightedOption:Er}}function HW(e){const{value:t,children:r}=e,{dispatch:n,getItemIndex:i,getItemState:o,registerItem:u,totalSubitemCount:a}=t,p=z.useMemo(()=>({dispatch:n,getItemState:o,getItemIndex:i}),[n,i,o]),m=z.useMemo(()=>({getItemIndex:i,registerItem:u,totalSubitemCount:a}),[u,i,a]);return N.jsx(gy.Provider,{value:m,children:N.jsx(Uu.Provider,{value:p,children:r})})}function GW(e){const{checked:t,defaultChecked:r,disabled:n,onBlur:i,onChange:o,onFocus:u,onFocusVisible:a,readOnly:p,required:m}=e,[w,C]=Jf({controlled:t,default:!!r,name:"Switch",state:"checked"}),T=re=>ye=>{var me;ye.nativeEvent.defaultPrevented||(C(ye.target.checked),o==null||o(ye),(me=re.onChange)==null||me.call(re,ye))},{isFocusVisibleRef:P,onBlur:R,onFocus:$,ref:H}=lE(),[D,O]=z.useState(!1);n&&D&&O(!1),z.useEffect(()=>{P.current=D},[D,P]);const L=z.useRef(null),Q=re=>ye=>{var me;L.current||(L.current=ye.currentTarget),$(ye),P.current===!0&&(O(!0),a==null||a(ye)),u==null||u(ye),(me=re.onFocus)==null||me.call(re,ye)},V=re=>ye=>{var me;R(ye),P.current===!1&&O(!1),i==null||i(ye),(me=re.onBlur)==null||me.call(re,ye)},F=fn(H,L);return{checked:w,disabled:!!n,focusVisible:D,getInputProps:(re={})=>K({checked:t,defaultChecked:r,disabled:n,readOnly:p,ref:F,required:m,type:"checkbox",role:"switch","aria-checked":t},re,{onChange:T(re),onFocus:Q(re),onBlur:V(re)}),inputRef:F,readOnly:!!p}}function qW(e){const{value:t,defaultValue:r,onChange:n,orientation:i="horizontal",direction:o="ltr",selectionFollowsFocus:u=!1}=e,[a,p]=Jf({controlled:t,default:r,name:"Tabs",state:"value"}),m=z.useCallback((H,D)=>{p(D),n==null||n(H,D)},[n,p]),{subitems:w,contextValue:C}=Ib(),T=z.useRef(()=>{}),P=z.useCallback(H=>{var D;return(D=w.get(H))==null?void 0:D.id},[w]),R=z.useCallback(H=>T.current(H),[]),$=z.useCallback(H=>{T.current=H},[]);return{contextValue:K({direction:o,getTabId:R,getTabPanelId:P,onSelected:m,orientation:i,registerTabIdLookup:$,selectionFollowsFocus:u,value:a},C)}}const i$=z.createContext(null);function Wb(){const e=z.useContext(i$);if(e==null)throw new Error("No TabsContext provided");return e}function WW(e){const{value:t,children:r}=e,{direction:n,getItemIndex:i,onSelected:o,orientation:u,registerItem:a,registerTabIdLookup:p,selectionFollowsFocus:m,totalSubitemCount:w,value:C,getTabId:T,getTabPanelId:P}=t,R=z.useMemo(()=>({getItemIndex:i,registerItem:a,totalSubitemCount:w}),[a,i,w]),$=z.useMemo(()=>({direction:n,getTabId:T,getTabPanelId:P,onSelected:o,orientation:u,registerTabIdLookup:p,selectionFollowsFocus:m,value:C}),[n,T,P,o,u,p,m,C]);return N.jsx(gy.Provider,{value:R,children:N.jsx(i$.Provider,{value:$,children:r})})}function ZW(e){return e.size}function KW(e){const{value:t,id:r,rootRef:n}=e,i=Wb();if(i===null)throw new Error("No TabContext provided");const{value:o,getTabId:u}=i,a=wa(r),p=z.useRef(null),m=fn(p,n),w=z.useMemo(()=>({id:a,ref:p}),[a]),{id:C}=Mb(t??ZW,w),T=C!==o,P=C!==void 0?u(C):void 0;return{hidden:T,getRootProps:($={})=>K({"aria-labelledby":P??void 0,hidden:T,id:a??void 0},$,{ref:m}),rootRef:m}}const o$={valueChange:"valueChange"};function XW(e,t){if(t.type===o$.valueChange)return K({},e,{highlightedValue:t.value});const r=Eb(e,t),{context:{selectionFollowsFocus:n}}=t;if(t.type===Pn.itemsChange){if(r.selectedValues.length>0)return K({},r,{highlightedValue:r.selectedValues[0]});Ki(null,"reset",t.context)}return n&&r.highlightedValue!=null?K({},r,{selectedValues:[r.highlightedValue]}):r}function JW(e){var t;const{rootRef:r}=e,{direction:n="ltr",onSelected:i,orientation:o="horizontal",value:u,registerTabIdLookup:a,selectionFollowsFocus:p}=Wb(),{subitems:m,contextValue:w}=Ib(),C=z.useCallback(we=>{var ke;return(ke=m.get(we))==null?void 0:ke.id},[m]);a(C);const T=z.useMemo(()=>Array.from(m.keys()),[m]),P=z.useCallback(we=>{var ke,Ie;return we==null?null:(ke=(Ie=m.get(we))==null?void 0:Ie.ref.current)!=null?ke:null},[m]),R=n==="rtl";let $;o==="vertical"?$="vertical":$=R?"horizontal-rtl":"horizontal-ltr";const H=z.useCallback((we,ke)=>{var Ie;i(we,(Ie=ke[0])!=null?Ie:null)},[i]),D=z.useMemo(()=>u===void 0?{}:u!=null?{selectedValues:[u]}:{selectedValues:[]},[u]),O=z.useCallback(we=>{var ke,Ie;return(ke=(Ie=m.get(we))==null?void 0:Ie.disabled)!=null?ke:!1},[m]),{contextValue:L,dispatch:Q,getRootProps:V,state:{highlightedValue:F,selectedValues:X},rootRef:re}=pE({controlledProps:D,disabledItemsFocusable:!p,focusManagement:"DOM",getItemDomElement:P,isItemDisabled:O,items:T,rootRef:r,onChange:H,orientation:$,reducerActionContext:z.useMemo(()=>({selectionFollowsFocus:p||!1}),[p]),selectionMode:"single",stateReducer:XW});z.useEffect(()=>{u!==void 0&&u!=null&&Q({type:o$.valueChange,value:u})},[Q,u]);const ye=(we={})=>K({},we,V(we),{"aria-orientation":o==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:z.useMemo(()=>K({},w,L),[w,L]),dispatch:Q,getRootProps:ye,highlightedValue:F,isRtl:R,orientation:o,rootRef:re,selectedValue:(t=X[0])!=null?t:null}}function YW(e){const{value:t,children:r}=e,{dispatch:n,getItemIndex:i,getItemState:o,registerItem:u,totalSubitemCount:a}=t,p=z.useMemo(()=>({dispatch:n,getItemState:o,getItemIndex:i}),[n,i,o]),m=z.useMemo(()=>({getItemIndex:i,registerItem:u,totalSubitemCount:a}),[u,i,a]);return N.jsx(gy.Provider,{value:m,children:N.jsx(Uu.Provider,{value:p,children:r})})}function QW(e){return e.size}function eZ(e){const{value:t,rootRef:r,disabled:n=!1,id:i}=e,o=z.useRef(null),u=wa(i),{value:a,selectionFollowsFocus:p,getTabPanelId:m}=Wb(),w=z.useMemo(()=>({disabled:n,ref:o,id:u}),[n,o,u]),{id:C,index:T,totalItemCount:P}=Mb(t??QW,w),{getRootProps:R,highlighted:$,selected:H}=mE({item:C}),{getRootProps:D,rootRef:O,active:L,focusVisible:Q,setFocusVisible:V}=ol({disabled:n,focusableWhenDisabled:!p,type:"button"}),F=fn(o,r,O),X=C!==void 0?m(C):void 0;return{getRootProps:(ye={})=>{const me=go(ye),we=Ic(R,D);return K({},ye,we(me),{role:"tab","aria-controls":X,"aria-selected":H,id:u,ref:F})},active:L,focusVisible:Q,highlighted:$,index:T,rootRef:F,selected:H||C===a,setFocusVisible:V,totalTabsCount:P}}function QR(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function fI(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:n,matchFrom:i="any",stringify:o,trim:u=!1}=e;return(a,{inputValue:p,getOptionLabel:m})=>{let w=u?p.trim():p;r&&(w=w.toLowerCase()),t&&(w=QR(w));const C=w?a.filter(T=>{let P=(o||m)(T);return r&&(P=P.toLowerCase()),t&&(P=QR(P)),i==="start"?P.indexOf(w)===0:P.indexOf(w)>-1}):a;return typeof n=="number"?C.slice(0,n):C}}function E_(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const tZ=fI(),e5=5,rZ=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},nZ=[];function iZ(e){const{unstable_isActiveElementInListbox:t=rZ,unstable_classNamePrefix:r="Mui",autoComplete:n=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:u=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:p=!1,componentName:m="useAutocomplete",defaultValue:w=e.multiple?nZ:null,disableClearable:C=!1,disableCloseOnSelect:T=!1,disabled:P,disabledItemsFocusable:R=!1,disableListWrap:$=!1,filterOptions:H=tZ,filterSelectedOptions:D=!1,freeSolo:O=!1,getOptionDisabled:L,getOptionKey:Q,getOptionLabel:V=Oe=>{var $e;return($e=Oe.label)!=null?$e:Oe},groupBy:F,handleHomeEndKeys:X=!e.freeSolo,id:re,includeInputInList:ye=!1,inputValue:me,isOptionEqualToValue:we=(Oe,$e)=>Oe===$e,multiple:ke=!1,onChange:Ie,onClose:qe,onHighlightChange:Re,onInputChange:Se,onOpen:Fe,open:Ce,openOnFocus:Ne=!1,options:Je,readOnly:at=!1,selectOnFocus:st=!e.freeSolo,value:Dt}=e,Ct=wa(re);let Bt=V;Bt=Oe=>{const $e=V(Oe);return typeof $e!="string"?String($e):$e};const Tt=z.useRef(!1),it=z.useRef(!0),Ze=z.useRef(null),rt=z.useRef(null),[pt,ur]=z.useState(null),[or,Er]=z.useState(-1),jr=i?0:-1,ar=z.useRef(jr),[It,gr]=Jf({controlled:Dt,default:w,name:m}),[Wt,Br]=Jf({controlled:me,default:"",name:m,state:"inputValue"}),[He,Cr]=z.useState(!1),Rr=z.useCallback((Oe,$e)=>{if(!(ke?It.length<$e.length:$e!==null)&&!a)return;let dt;if(ke)dt="";else if($e==null)dt="";else{const Lt=Bt($e);dt=typeof Lt=="string"?Lt:""}Wt!==dt&&(Br(dt),Se&&Se(Oe,dt,"reset"))},[Bt,Wt,ke,Se,Br,a,It]),[tr,lr]=Jf({controlled:Ce,default:!1,name:m,state:"open"}),[Pr,Fr]=z.useState(!0),Ir=!ke&&It!=null&&Wt===Bt(It),vr=tr&&!at,rr=vr?H(Je.filter(Oe=>!(D&&(ke?It:[It]).some($e=>$e!==null&&we(Oe,$e)))),{inputValue:Ir&&Pr?"":Wt,getOptionLabel:Bt}):[],mr=E7({filteredOptions:rr,value:It,inputValue:Wt});z.useEffect(()=>{const Oe=It!==mr.value;He&&!Oe||O&&!Oe||Rr(null,It)},[It,Rr,He,mr.value,O]);const ln=tr&&rr.length>0&&!at,je=gu(Oe=>{Oe===-1?Ze.current.focus():pt.querySelector(`[data-tag-index="${Oe}"]`).focus()});z.useEffect(()=>{ke&&or>It.length-1&&(Er(-1),je(-1))},[It,ke,or,je]);function kt(Oe,$e){if(!rt.current||Oe<0||Oe>=rr.length)return-1;let tt=Oe;for(;;){const dt=rt.current.querySelector(`[data-option-index="${tt}"]`),Lt=R?!1:!dt||dt.disabled||dt.getAttribute("aria-disabled")==="true";if(dt&&dt.hasAttribute("tabindex")&&!Lt)return tt;if($e==="next"?tt=(tt+1)%rr.length:tt=(tt-1+rr.length)%rr.length,tt===Oe)return-1}}const wt=gu(({event:Oe,index:$e,reason:tt="auto"})=>{if(ar.current=$e,$e===-1?Ze.current.removeAttribute("aria-activedescendant"):Ze.current.setAttribute("aria-activedescendant",`${Ct}-option-${$e}`),Re&&Re(Oe,$e===-1?null:rr[$e],tt),!rt.current)return;const dt=rt.current.querySelector(`[role="option"].${r}-focused`);dt&&(dt.classList.remove(`${r}-focused`),dt.classList.remove(`${r}-focusVisible`));let Lt=rt.current;if(rt.current.getAttribute("role")!=="listbox"&&(Lt=rt.current.parentElement.querySelector('[role="listbox"]')),!Lt)return;if($e===-1){Lt.scrollTop=0;return}const yr=rt.current.querySelector(`[data-option-index="${$e}"]`);if(yr&&(yr.classList.add(`${r}-focused`),tt==="keyboard"&&yr.classList.add(`${r}-focusVisible`),Lt.scrollHeight>Lt.clientHeight&&tt!=="mouse"&&tt!=="touch")){const sr=yr,Wr=Lt.clientHeight+Lt.scrollTop,xn=sr.offsetTop+sr.offsetHeight;xn>Wr?Lt.scrollTop=xn-Lt.clientHeight:sr.offsetTop-sr.offsetHeight*(F?1.3:0)<Lt.scrollTop&&(Lt.scrollTop=sr.offsetTop-sr.offsetHeight*(F?1.3:0))}}),Ee=gu(({event:Oe,diff:$e,direction:tt="next",reason:dt="auto"})=>{if(!vr)return;const yr=kt((()=>{const sr=rr.length-1;if($e==="reset")return jr;if($e==="start")return 0;if($e==="end")return sr;const Wr=ar.current+$e;return Wr<0?Wr===-1&&ye?-1:$&&ar.current!==-1||Math.abs($e)>1?0:sr:Wr>sr?Wr===sr+1&&ye?-1:$||Math.abs($e)>1?sr:0:Wr})(),tt);if(wt({index:yr,reason:dt,event:Oe}),n&&$e!=="reset")if(yr===-1)Ze.current.value=Wt;else{const sr=Bt(rr[yr]);Ze.current.value=sr,sr.toLowerCase().indexOf(Wt.toLowerCase())===0&&Wt.length>0&&Ze.current.setSelectionRange(Wt.length,sr.length)}}),Ve=()=>{const Oe=($e,tt)=>{const dt=$e?Bt($e):"",Lt=tt?Bt(tt):"";return dt===Lt};if(ar.current!==-1&&mr.filteredOptions&&mr.filteredOptions.length!==rr.length&&mr.inputValue===Wt&&(ke?It.length===mr.value.length&&mr.value.every(($e,tt)=>Bt(It[tt])===Bt($e)):Oe(mr.value,It))){const $e=mr.filteredOptions[ar.current];if($e)return E_(rr,tt=>Bt(tt)===Bt($e))}return-1},Xe=z.useCallback(()=>{if(!vr)return;const Oe=Ve();if(Oe!==-1){ar.current=Oe;return}const $e=ke?It[0]:It;if(rr.length===0||$e==null){Ee({diff:"reset"});return}if(rt.current){if($e!=null){const tt=rr[ar.current];if(ke&&tt&&E_(It,Lt=>we(tt,Lt))!==-1)return;const dt=E_(rr,Lt=>we(Lt,$e));dt===-1?Ee({diff:"reset"}):wt({index:dt});return}if(ar.current>=rr.length-1){wt({index:rr.length-1});return}wt({index:ar.current})}},[rr.length,ke?!1:It,D,Ee,wt,vr,Wt,ke]),Et=gu(Oe=>{R1(rt,Oe),Oe&&Xe()});z.useEffect(()=>{Xe()},[Xe]);const vt=Oe=>{tr||(lr(!0),Fr(!0),Fe&&Fe(Oe))},Rt=(Oe,$e)=>{tr&&(lr(!1),qe&&qe(Oe,$e))},br=(Oe,$e,tt,dt)=>{if(ke){if(It.length===$e.length&&It.every((Lt,yr)=>Lt===$e[yr]))return}else if(It===$e)return;Ie&&Ie(Oe,$e,tt,dt),gr($e)},Ft=z.useRef(!1),_r=(Oe,$e,tt="selectOption",dt="options")=>{let Lt=tt,yr=$e;if(ke){yr=Array.isArray(It)?It.slice():[];const sr=E_(yr,Wr=>we($e,Wr));sr===-1?yr.push($e):dt!=="freeSolo"&&(yr.splice(sr,1),Lt="removeOption")}Rr(Oe,yr),br(Oe,yr,Lt,{option:$e}),!T&&(!Oe||!Oe.ctrlKey&&!Oe.metaKey)&&Rt(Oe,Lt),(u===!0||u==="touch"&&Ft.current||u==="mouse"&&!Ft.current)&&Ze.current.blur()};function ue(Oe,$e){if(Oe===-1)return-1;let tt=Oe;for(;;){if($e==="next"&&tt===It.length||$e==="previous"&&tt===-1)return-1;const dt=pt.querySelector(`[data-tag-index="${tt}"]`);if(!dt||!dt.hasAttribute("tabindex")||dt.disabled||dt.getAttribute("aria-disabled")==="true")tt+=$e==="next"?1:-1;else return tt}}const Y=(Oe,$e)=>{if(!ke)return;Wt===""&&Rt(Oe,"toggleInput");let tt=or;or===-1?Wt===""&&$e==="previous"&&(tt=It.length-1):(tt+=$e==="next"?1:-1,tt<0&&(tt=0),tt===It.length&&(tt=-1)),tt=ue(tt,$e),Er(tt),je(tt)},ee=Oe=>{Tt.current=!0,Br(""),Se&&Se(Oe,"","clear"),br(Oe,ke?[]:null,"clear")},U=Oe=>$e=>{if(Oe.onKeyDown&&Oe.onKeyDown($e),!$e.defaultMuiPrevented&&(or!==-1&&["ArrowLeft","ArrowRight"].indexOf($e.key)===-1&&(Er(-1),je(-1)),$e.which!==229))switch($e.key){case"Home":vr&&X&&($e.preventDefault(),Ee({diff:"start",direction:"next",reason:"keyboard",event:$e}));break;case"End":vr&&X&&($e.preventDefault(),Ee({diff:"end",direction:"previous",reason:"keyboard",event:$e}));break;case"PageUp":$e.preventDefault(),Ee({diff:-e5,direction:"previous",reason:"keyboard",event:$e}),vt($e);break;case"PageDown":$e.preventDefault(),Ee({diff:e5,direction:"next",reason:"keyboard",event:$e}),vt($e);break;case"ArrowDown":$e.preventDefault(),Ee({diff:1,direction:"next",reason:"keyboard",event:$e}),vt($e);break;case"ArrowUp":$e.preventDefault(),Ee({diff:-1,direction:"previous",reason:"keyboard",event:$e}),vt($e);break;case"ArrowLeft":Y($e,"previous");break;case"ArrowRight":Y($e,"next");break;case"Enter":if(ar.current!==-1&&vr){const tt=rr[ar.current],dt=L?L(tt):!1;if($e.preventDefault(),dt)return;_r($e,tt,"selectOption"),n&&Ze.current.setSelectionRange(Ze.current.value.length,Ze.current.value.length)}else O&&Wt!==""&&Ir===!1&&(ke&&$e.preventDefault(),_r($e,Wt,"createOption","freeSolo"));break;case"Escape":vr?($e.preventDefault(),$e.stopPropagation(),Rt($e,"escape")):p&&(Wt!==""||ke&&It.length>0)&&($e.preventDefault(),$e.stopPropagation(),ee($e));break;case"Backspace":if(ke&&!at&&Wt===""&&It.length>0){const tt=or===-1?It.length-1:or,dt=It.slice();dt.splice(tt,1),br($e,dt,"removeOption",{option:It[tt]})}break;case"Delete":if(ke&&!at&&Wt===""&&It.length>0&&or!==-1){const tt=or,dt=It.slice();dt.splice(tt,1),br($e,dt,"removeOption",{option:It[tt]})}break}},J=Oe=>{Cr(!0),Ne&&!Tt.current&&vt(Oe)},ne=Oe=>{if(t(rt)){Ze.current.focus();return}Cr(!1),it.current=!0,Tt.current=!1,o&&ar.current!==-1&&vr?_r(Oe,rr[ar.current],"blur"):o&&O&&Wt!==""?_r(Oe,Wt,"blur","freeSolo"):a&&Rr(Oe,It),Rt(Oe,"blur")},de=Oe=>{const $e=Oe.target.value;Wt!==$e&&(Br($e),Fr(!1),Se&&Se(Oe,$e,"input")),$e===""?!C&&!ke&&br(Oe,null,"clear"):vt(Oe)},pe=Oe=>{const $e=Number(Oe.currentTarget.getAttribute("data-option-index"));ar.current!==$e&&wt({event:Oe,index:$e,reason:"mouse"})},se=Oe=>{wt({event:Oe,index:Number(Oe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ft.current=!0},xe=Oe=>{const $e=Number(Oe.currentTarget.getAttribute("data-option-index"));_r(Oe,rr[$e],"selectOption"),Ft.current=!1},Pe=Oe=>$e=>{const tt=It.slice();tt.splice(Oe,1),br($e,tt,"removeOption",{option:It[Oe]})},Le=Oe=>{tr?Rt(Oe,"toggleInput"):vt(Oe)},Ae=Oe=>{Oe.currentTarget.contains(Oe.target)&&Oe.target.getAttribute("id")!==Ct&&Oe.preventDefault()},ot=Oe=>{Oe.currentTarget.contains(Oe.target)&&(Ze.current.focus(),st&&it.current&&Ze.current.selectionEnd-Ze.current.selectionStart===0&&Ze.current.select(),it.current=!1)},ht=Oe=>{!P&&(Wt===""||!tr)&&Le(Oe)};let ut=O&&Wt.length>0;ut=ut||(ke?It.length>0:It!==null);let Mt=rr;return F&&(Mt=rr.reduce((Oe,$e,tt)=>{const dt=F($e);return Oe.length>0&&Oe[Oe.length-1].group===dt?Oe[Oe.length-1].options.push($e):Oe.push({key:tt,index:tt,group:dt,options:[$e]}),Oe},[])),P&&He&&ne(),{getRootProps:(Oe={})=>K({"aria-owns":ln?`${Ct}-listbox`:null},Oe,{onKeyDown:U(Oe),onMouseDown:Ae,onClick:ot}),getInputLabelProps:()=>({id:`${Ct}-label`,htmlFor:Ct}),getInputProps:()=>({id:Ct,value:Wt,onBlur:ne,onFocus:J,onChange:de,onMouseDown:ht,"aria-activedescendant":vr?"":null,"aria-autocomplete":n?"both":"list","aria-controls":ln?`${Ct}-listbox`:void 0,"aria-expanded":ln,autoComplete:"off",ref:Ze,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:P}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:ee}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Le}),getTagProps:({index:Oe})=>K({key:Oe,"data-tag-index":Oe,tabIndex:-1},!at&&{onDelete:Pe(Oe)}),getListboxProps:()=>({role:"listbox",id:`${Ct}-listbox`,"aria-labelledby":`${Ct}-label`,ref:Et,onMouseDown:Oe=>{Oe.preventDefault()}}),getOptionProps:({index:Oe,option:$e})=>{var tt;const dt=(ke?It:[It]).some(yr=>yr!=null&&we($e,yr)),Lt=L?L($e):!1;return{key:(tt=Q==null?void 0:Q($e))!=null?tt:Bt($e),tabIndex:-1,role:"option",id:`${Ct}-option-${Oe}`,onMouseMove:pe,onClick:xe,onTouchStart:se,"data-option-index":Oe,"aria-disabled":Lt,"aria-selected":dt}},id:Ct,inputValue:Wt,value:It,dirty:ut,expanded:vr&&pt,popupOpen:vr,focused:He||or!==-1,anchorEl:pt,setAnchorEl:ur,focusedTag:or,groupedOptions:Mt}}const oZ=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],aZ=["component","slots","slotProps"],sZ=["component"];function Nt(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:o,getSlotOwnerState:u,internalForwardedProps:a}=t,p=Gt(t,oZ),{component:m,slots:w={[e]:void 0},slotProps:C={[e]:void 0}}=o,T=Gt(o,aZ),P=w[e]||n,R=zL(C[e],i),$=DL(K({className:r},p,{externalForwardedProps:e==="root"?T:void 0,externalSlotProps:R})),{props:{component:H},internalRef:D}=$,O=Gt($.props,sZ),L=fn(D,R==null?void 0:R.ref,t.ref),Q=u?u(O):{},V=K({},i,Q),F=e==="root"?H||m:H,X=RL(P,K({},e==="root"&&!m&&!w[e]&&a,e!=="root"&&!w[e]&&a,O,F&&{as:F},{ref:L}),V);return Object.keys(Q).forEach(re=>{delete X[re]}),[P,X]}function lZ(e){return en("MuiListItem",e)}const ox=Jr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),ax=z.createContext(!1),cd=z.createContext(!1),a$=z.createContext(!1),pI=z.createContext(void 0),s$=z.createContext(void 0),Zb=z.createContext(void 0),cZ=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],uZ=e=>{const{sticky:t,nested:r,nesting:n,variant:i,color:o}=e,u={root:["root",r&&"nested",n&&"nesting",t&&"sticky",o&&`color${bt(o)}`,i&&`variant${bt(i)}`],startAction:["startAction"],endAction:["endAction"]};return qr(u,lZ,{})},hZ=ft("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},K({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&K({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${ox.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),dZ=ft(hZ,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),fZ=ft("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),pZ=ft("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),Fc=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyListItem"}),i=z.useContext(Zb),o=z.useContext(pI),u=z.useContext(cd),a=z.useContext(a$),p=z.useContext(ax),{component:m,className:w,children:C,nested:T=!1,sticky:P=!1,variant:R="plain",color:$="neutral",startAction:H,endAction:D,role:O,slots:L={},slotProps:Q={}}=n,V=Gt(n,cZ),[F,X]=z.useState(""),[re,ye]=(o==null?void 0:o.split(":"))||["",""],me=m||(re&&!re.match(/^(ul|ol|menu)$/)?"div":void 0);let we=i==="menu"?"none":void 0;o&&(we={menu:"none",menubar:"none",group:"presentation"}[ye]),O&&(we=O);const ke=K({},n,{sticky:P,startAction:H,endAction:D,row:u,wrap:a,variant:R,color:$,nesting:p,nested:T,component:me,role:we}),Ie=uZ(ke),qe=K({},V,{component:me,slots:L,slotProps:Q}),[Re,Se]=Nt("root",{additionalProps:{role:we},ref:r,className:ei(Ie.root,w),elementType:dZ,externalForwardedProps:qe,ownerState:ke}),[Fe,Ce]=Nt("startAction",{className:Ie.startAction,elementType:fZ,externalForwardedProps:qe,ownerState:ke}),[Ne,Je]=Nt("endAction",{className:Ie.endAction,elementType:pZ,externalForwardedProps:qe,ownerState:ke});return N.jsx(s$.Provider,{value:X,children:N.jsx(ax.Provider,{value:T?F||!0:!1,children:N.jsxs(Re,K({},Se,{children:[H&&N.jsx(Fe,K({},Ce,{children:H})),z.Children.map(C,(at,st)=>{var Dt;return z.isValidElement(at)?z.cloneElement(at,K({},st===0&&{"data-first-child":""},Sb(at,["ListItem"])&&{component:((Dt=at.props)==null?void 0:Dt.component)||"div"})):at}),D&&N.jsx(Ne,K({},Je,{children:D}))]}))})})});Fc.muiName="ListItem";const Kb={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function Sy(e){const{children:t,nested:r,row:n=!1,wrap:i=!1}=e,o=N.jsx(cd.Provider,{value:n,children:N.jsx(a$.Provider,{value:i,children:z.Children.map(t,(u,a)=>z.isValidElement(u)?z.cloneElement(u,K({},a===0&&{"data-first-child":""},a===z.Children.count(t)-1&&{"data-last-child":""})):u)})});return r===void 0?o:N.jsx(ax.Provider,{value:r,children:o})}const ud=({theme:e,ownerState:t},r)=>{let n={};function i(o){if(typeof o=="function"){const u=o(e);i(u)}else Array.isArray(o)?o.forEach(u=>{typeof u!="boolean"&&i(u)}):typeof o=="object"&&(n=K({},n,o))}return t.sx&&(i(t.sx),r.forEach(o=>{const u=n[o];if(typeof u=="string"||typeof u=="number")if(o==="borderRadius")if(typeof u=="number")n[o]=`${u}px`;else{var a;n[o]=((a=e.vars)==null?void 0:a.radius[u])||u}else["p","padding","m","margin"].indexOf(o)!==-1&&typeof u=="number"?n[o]=e.spacing(u):n[o]=u;else typeof u=="function"?n[o]=u(e):n[o]=void 0})),n};function mZ(e){return en("MuiList",e)}const gZ=Jr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),vZ=z.createContext(void 0),yZ=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],_Z=e=>{const{variant:t,color:r,size:n,nesting:i,orientation:o,instanceSize:u}=e,a={root:["root",o,t&&`variant${bt(t)}`,r&&`color${bt(r)}`,!u&&!i&&n&&`size${bt(n)}`,u&&`size${bt(u)}`,i&&"nesting"]};return qr(a,mZ,{})},Cy=ft("ul")(({theme:e,ownerState:t})=>{var r;const{p:n,padding:i,borderRadius:o}=ud({theme:e,ownerState:t},["p","padding","borderRadius"]);function u(a){return a==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:a==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:a==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&K({},u(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&K({},u(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?K({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),K({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},o!==void 0&&{"--List-radius":o},n!==void 0&&{"--List-padding":n},i!==void 0&&{"--List-padding":i})]}),xZ=ft(Cy,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),hd=z.forwardRef(function(t,r){var n;const i=z.useContext(ax),o=z.useContext(Zb),u=z.useContext(vZ),a=tn({props:t,name:"JoyList"}),{component:p,className:m,children:w,size:C,orientation:T="vertical",wrap:P=!1,variant:R="plain",color:$="neutral",role:H,slots:D={},slotProps:O={}}=a,L=Gt(a,yZ),Q=C||((n=t.size)!=null?n:"md");let V;o&&(V="group"),u&&(V="presentation"),H&&(V=H);const F=K({},a,{instanceSize:t.size,size:Q,nesting:i,orientation:T,wrap:P,variant:R,color:$,role:V}),X=_Z(F),re=K({},L,{component:p,slots:D,slotProps:O}),[ye,me]=Nt("root",{ref:r,className:ei(X.root,m),elementType:xZ,externalForwardedProps:re,ownerState:F,additionalProps:{as:p,role:V,"aria-labelledby":typeof i=="string"?i:void 0}});return N.jsx(ye,K({},me,{children:N.jsx(pI.Provider,{value:`${typeof p=="string"?p:""}:${V||""}`,children:N.jsx(Sy,{row:T==="horizontal",wrap:P,children:w})})}))});function bZ(e){return en("MuiListItemButton",e)}const l1=Jr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),Xb=z.createContext("horizontal"),wZ=["children","className","action","component","orientation","role","selected","color","variant","slots","slotProps"],SZ=e=>{const{color:t,disabled:r,focusVisible:n,focusVisibleClassName:i,selected:o,variant:u}=e,a={root:["root",r&&"disabled",n&&"focusVisible",t&&`color${bt(t)}`,o&&"selected",u&&`variant${bt(u)}`]},p=qr(a,bZ,{});return n&&i&&(p.root+=` ${i}`),p},Ty=ft("div")(({theme:e,ownerState:t})=>{var r,n,i,o,u,a;return K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:K({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(n=e.variants[`${t.variant}Active`])==null?void 0:n[t.color],[`.${ox.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${l1.selected}`]:K({},(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${l1.selected}, [aria-selected="true"])`]:{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color],"&:active":(u=e.variants[`${t.variant}Active`])==null?void 0:u[t.color]},[`&.${l1.disabled}`]:K({},(a=e.variants[`${t.variant}Disabled`])==null?void 0:a[t.color])})}),CZ=ft(Ty,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>K({},!e.row&&{[`&.${l1.selected}`]:{fontWeight:t.vars.fontWeight.md}})),l$=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyListItemButton"}),i=z.useContext(cd),{children:o,className:u,action:a,component:p="div",orientation:m="horizontal",role:w,selected:C=!1,color:T="neutral",variant:P="plain",slots:R={},slotProps:$={}}=n,H=Gt(n,wZ),D=z.useRef(null),O=fn(D,r),{focusVisible:L,setFocusVisible:Q,getRootProps:V}=ol(K({},n,{rootRef:O}));z.useImperativeHandle(a,()=>({focusVisible:()=>{var we;Q(!0),(we=D.current)==null||we.focus()}}),[Q]);const F=K({},n,{component:p,color:T,focusVisible:L,orientation:m,row:i,selected:C,variant:P}),X=SZ(F),re=K({},H,{component:p,slots:R,slotProps:$}),[ye,me]=Nt("root",{ref:r,className:ei(X.root,u),elementType:CZ,externalForwardedProps:re,ownerState:F,getSlotProps:V});return N.jsx(Xb.Provider,{value:m,children:N.jsx(ye,K({},me,{role:w??me.role,children:o}))})});function TZ(e){return en("MuiSvgIcon",e)}Jr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const kZ=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],EZ=e=>{const{color:t,size:r,fontSize:n}=e,i={root:["root",t&&t!=="inherit"&&`color${bt(t)}`,r&&`size${bt(r)}`,n&&`fontSize${bt(n)}`]};return qr(i,TZ,{})},t5={sm:"xl",md:"xl2",lg:"xl3"},IZ=ft("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[t5[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[t5[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&K({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),r5=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoySvgIcon"}),{children:i,className:o,color:u,component:a="svg",fontSize:p,htmlColor:m,inheritViewBox:w=!1,titleAccess:C,viewBox:T="0 0 24 24",size:P="md",slots:R={},slotProps:$={}}=n,H=Gt(n,kZ),D=z.isValidElement(i)&&i.type==="svg",O=K({},n,{color:u,component:a,size:P,instanceSize:t.size,fontSize:p,instanceFontSize:t.fontSize,inheritViewBox:w,viewBox:T,hasSvgAsChild:D}),L=EZ(O),Q=K({},H,{component:a,slots:R,slotProps:$}),[V,F]=Nt("root",{ref:r,className:ei(L.root,o),elementType:IZ,externalForwardedProps:Q,ownerState:O,additionalProps:K({color:m,focusable:!1},C&&{role:"img"},!C&&{"aria-hidden":!0},!w&&{viewBox:T},D&&i.props)});return N.jsxs(V,K({},F,{children:[D?i.props.children:i,C?N.jsx("title",{children:C}):null]}))});function Up(e,t){function r(n,i){return N.jsx(r5,K({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=r5.muiName,z.memo(z.forwardRef(r))}const mI=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,wp="data-skip-inverted-colors",c$=`& :not([${wp}], [${wp}] *)`,u$=e=>{var t,r,n,i,o,u,a,p,m,w,C,T,P,R,$,H,D,O,L,Q,V,F;const X=mI(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[X("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[X("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[X("--palette-background-surface")]:`${(n=e.colorSchemes.light)==null?void 0:n.palette.background.surface} !important`,[X("--palette-background-popup")]:`${(i=e.colorSchemes.light)==null?void 0:i.palette.background.popup} !important`,[X("--palette-background-level1")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.level1} !important`,[X("--palette-background-level2")]:`${(u=e.colorSchemes.light)==null?void 0:u.palette.background.level2} !important`,[X("--palette-background-level3")]:`${(a=e.colorSchemes.light)==null?void 0:a.palette.background.level3} !important`,[X("--palette-text-primary")]:`${(p=e.colorSchemes.light)==null?void 0:p.palette.text.primary} !important`,[X("--palette-text-secondary")]:`${(m=e.colorSchemes.light)==null?void 0:m.palette.text.secondary} !important`,[X("--palette-text-tertiary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.tertiary} !important`,[X("--palette-divider")]:`${(C=e.colorSchemes.light)==null?void 0:C.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[X("--palette-focusVisible")]:`${(T=e.colorSchemes.dark)==null?void 0:T.palette.focusVisible} !important`,[X("--palette-background-body")]:`${(P=e.colorSchemes.dark)==null?void 0:P.palette.background.body} !important`,[X("--palette-background-surface")]:`${(R=e.colorSchemes.dark)==null?void 0:R.palette.background.surface} !important`,[X("--palette-background-popup")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.popup} !important`,[X("--palette-background-level1")]:`${(H=e.colorSchemes.dark)==null?void 0:H.palette.background.level1} !important`,[X("--palette-background-level2")]:`${(D=e.colorSchemes.dark)==null?void 0:D.palette.background.level2} !important`,[X("--palette-background-level3")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.background.level3} !important`,[X("--palette-text-primary")]:`${(L=e.colorSchemes.dark)==null?void 0:L.palette.text.primary} !important`,[X("--palette-text-secondary")]:`${(Q=e.colorSchemes.dark)==null?void 0:Q.palette.text.secondary} !important`,[X("--palette-text-tertiary")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.text.tertiary} !important`,[X("--palette-divider")]:`${(F=e.colorSchemes.dark)==null?void 0:F.palette.divider} !important`}}};function MZ(e){return e.theme!==void 0}const Jb=e=>t=>{const r=MZ(t)?t.theme:t,n=Tb(r.cssVarPrefix),i=mI(r.cssVarPrefix),o=u=>{const a=u.split("-");return n(u,r.palette[a[1]][a[2]])};return{[c$]:{"--Badge-ringColor":o(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[i("--palette-focusVisible")]:o(`palette-${e}-200`),[i("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[i("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[i("--palette-background-popup")]:o(`palette-${e}-700`),[i("--palette-background-level1")]:`rgba(${o(`palette-${e}-darkChannel`)} / 0.2)`,[i("--palette-background-level2")]:`rgba(${o(`palette-${e}-darkChannel`)} / 0.36)`,[i("--palette-background-level3")]:`rgba(${o(`palette-${e}-darkChannel`)} / 0.6)`,[i("--palette-text-primary")]:o("palette-common-white"),[i("--palette-text-secondary")]:o(`palette-${e}-200`),[i("--palette-text-tertiary")]:o(`palette-${e}-300`),[i("--palette-text-icon")]:o(`palette-${e}-200`),[i("--palette-divider")]:`rgba(${o(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":o(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${o(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":o(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${o(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":o(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${o(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":o("palette-common-white"),"--variant-softHoverColor":o("palette-common-white"),"--variant-softBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${o(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":o(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":o("palette-common-white"),"--variant-solidHoverBg":o("palette-common-white"),"--variant-solidActiveBg":o(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${o(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${wp}]`]:u$(r)}},Yb=e=>t=>{const{theme:r=t}=t,n=Tb(r.cssVarPrefix),i=mI(r.cssVarPrefix),o=u=>{const a=u.split("-");return n(u,r.palette[a[1]][a[2]])};return{[c$]:{"--Badge-ringColor":o(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[i("--palette-focusVisible")]:o(`palette-${e}-300`),[i("--palette-background-body")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.1)`,[i("--palette-background-surface")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.08)`,[i("--palette-background-level1")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.2)`,[i("--palette-background-level2")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.4)`,[i("--palette-background-level3")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.6)`,[i("--palette-text-primary")]:o(`palette-${e}-100`),[i("--palette-text-secondary")]:`rgba(${o(`palette-${e}-lightChannel`)} / 0.72)`,[i("--palette-text-tertiary")]:`rgba(${o(`palette-${e}-lightChannel`)} / 0.6)`,[i("--palette-text-icon")]:`rgba(${o(`palette-${e}-lightChannel`)} / 0.6)`,[i("--palette-divider")]:`rgba(${o(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${o(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":o(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${o(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":o(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${o(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":o(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${o(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":o(`palette-${e}-200`),"--variant-softBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":o(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":o(`palette-${e}-600`),"--variant-solidActiveBg":o(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[i("--palette-focusVisible")]:o(`palette-${e}-500`),[i("--palette-background-body")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.1)`,[i("--palette-background-surface")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.08)`,[i("--palette-background-level1")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.2)`,[i("--palette-background-level2")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.32)`,[i("--palette-background-level3")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.48)`,[i("--palette-text-primary")]:o(`palette-${e}-700`),[i("--palette-text-secondary")]:`rgba(${o(`palette-${e}-darkChannel`)} / 0.8)`,[i("--palette-text-tertiary")]:`rgba(${o(`palette-${e}-darkChannel`)} / 0.68)`,[i("--palette-text-icon")]:o(`palette-${e}-500`),[i("--palette-divider")]:`rgba(${o(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${o(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${o(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${o(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${o(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":o(`palette-${e}-600`),"--variant-outlinedHoverBorder":o(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${o(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":o(`palette-${e}-600`),"--variant-softBg":`rgba(${o(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":o(`palette-${e}-700`),"--variant-softHoverBg":o(`palette-${e}-200`),"--variant-softActiveBg":o(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":o("palette-common-white"),"--variant-solidBg":o(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":o("palette-common-white"),"--variant-solidHoverBg":o(`palette-${e}-600`),"--variant-solidActiveBg":o(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${o(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${o(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${wp}]`]:u$(r)}},h$=Up(N.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),PZ=Up(N.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),d$=z.createContext(void 0);function Eh(e,t){let r=t,n=e;return e==="outlined"&&(r="neutral",n="plain"),e==="plain"&&(r="neutral"),{variant:n,color:r}}function Qb(e,t,r=!1){const n=z.useContext(d$),[i,o]=typeof n=="string"?n.split(":"):[],u=Eh(i||void 0,o||void 0);return u.variant=e||u.variant,u.color=t||(r?o:u.color),u}function ew({children:e,color:t,variant:r}){return N.jsx(d$.Provider,{value:`${r||""}:${t||""}`,children:e})}function AZ(e){return en("MuiIconButton",e)}const n5=Jr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]),tw=z.createContext({}),f$=z.createContext(void 0);function RZ(e){return en("MuiCircularProgress",e)}Jr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let DZ=e=>e,i5;const zZ=["color","backgroundColor"],LZ=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],OZ=pL({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),$Z=e=>{const{determinate:t,color:r,variant:n,size:i}=e,o={root:["root",t&&"determinate",r&&`color${bt(r)}`,n&&`variant${bt(n)}`,i&&`size${bt(i)}`],svg:["svg"],track:["track"],progress:["progress"]};return qr(o,RZ,{})};function af(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const BZ=ft("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n,i,o;const u=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:a,backgroundColor:p}=u,m=Gt(u,zZ);return K({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":p,"--CircularProgress-progressColor":a,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":af("track","3px"),"--_progress-thickness":af("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":af("track","6px"),"--_progress-thickness":af("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":af("track","8px"),"--_progress-thickness":af("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:a},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},m,e.variant==="outlined"&&{"&::before":K({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},m)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(n=t.variants.solid)==null?void 0:n[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(i=t.variants.softHover)==null?void 0:i[e.color].backgroundColor,"--CircularProgress-progressColor":(o=t.variants.solid)==null?void 0:o[e.color].backgroundColor})}),FZ=ft("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),NZ=ft("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),jZ=ft("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&Jk(i5||(i5=DZ`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),OZ)),rw=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyCircularProgress"}),{children:i,className:o,color:u="primary",size:a="md",variant:p="soft",thickness:m,determinate:w=!1,value:C=w?0:25,component:T,slots:P={},slotProps:R={}}=n,$=Gt(n,LZ),H=K({},n,{color:u,size:a,variant:p,thickness:m,value:C,determinate:w,instanceSize:t.size}),D=$Z(H),O=K({},$,{component:T,slots:P,slotProps:R}),[L,Q]=Nt("root",{ref:r,className:ei(D.root,o),elementType:BZ,externalForwardedProps:O,ownerState:H,additionalProps:K({role:"progressbar",style:{"--CircularProgress-percent":C}},C&&w&&{"aria-valuenow":Math.round(typeof C=="number"?C:Number(C||0))})}),[V,F]=Nt("svg",{className:D.svg,elementType:FZ,externalForwardedProps:O,ownerState:H}),[X,re]=Nt("track",{className:D.track,elementType:NZ,externalForwardedProps:O,ownerState:H}),[ye,me]=Nt("progress",{className:D.progress,elementType:jZ,externalForwardedProps:O,ownerState:H});return N.jsxs(L,K({},Q,{children:[N.jsxs(V,K({},F,{children:[N.jsx(X,K({},re)),N.jsx(ye,K({},me))]})),i]}))}),VZ=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],UZ=e=>{const{color:t,disabled:r,focusVisible:n,focusVisibleClassName:i,size:o,variant:u,loading:a}=e,p={root:["root",r&&"disabled",n&&"focusVisible",u&&`variant${bt(u)}`,t&&`color${bt(t)}`,o&&`size${bt(o)}`,a&&"loading"],loadingIndicator:["loadingIndicator"]},m=qr(p,AZ,{});return n&&i&&(m.root+=` ${i}`),m},ky=ft("button")(({theme:e,ownerState:t})=>{var r,n,i,o;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:K({"--Icon-color":"currentColor"},e.focus.default)}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":K({"--Icon-color":"currentColor"},(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color])},'&:active, &[aria-pressed="true"]':K({"--Icon-color":"currentColor"},(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color]),"&:disabled":(o=e.variants[`${t.variant}Disabled`])==null?void 0:o[t.color]})]}),HZ=ft(ky,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),GZ=ft("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,n;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color})}),Du=z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyIconButton"}),{children:o,action:u,component:a="button",color:p="neutral",disabled:m,variant:w="plain",loading:C=!1,loadingIndicator:T,size:P="md",slots:R={},slotProps:$={}}=i,H=Gt(i,VZ),D=z.useContext(tw),O=z.useContext(f$),L=t.variant||D.variant||w,Q=t.size||D.size||P,V=t.color||D.color||p,F=(n=t.loading||t.disabled)!=null?n:D.disabled||C||m,X=z.useRef(null),re=fn(X,r),{focusVisible:ye,setFocusVisible:me,getRootProps:we}=ol(K({},i,{disabled:F,rootRef:re})),ke=T??N.jsx(rw,{color:V,thickness:{sm:2,md:3,lg:4}[Q]||3});z.useImperativeHandle(u,()=>({focusVisible:()=>{var st;me(!0),(st=X.current)==null||st.focus()}}),[me]);const Ie=K({},i,{component:a,color:V,disabled:F,variant:L,loading:C,size:Q,focusVisible:ye,instanceSize:t.size}),qe=UZ(Ie),Re=st=>{var Dt;let Ct=i.onClick;if(typeof $.root=="function"?Ct=$.root(Ie).onClick:$.root&&(Ct=$.root.onClick),(Dt=Ct)==null||Dt(st),O){var Bt;(Bt=O.onClick)==null||Bt.call(O,st,i.value)}};let Se=i["aria-pressed"];typeof $.root=="function"?Se=$.root(Ie)["aria-pressed"]:$.root&&(Se=$.root["aria-pressed"]),O!=null&&O.value&&(Array.isArray(O.value)?Se=O.value.indexOf(i.value)!==-1:Se=O.value===i.value);const Fe=K({},H,{component:a,slots:R,slotProps:$}),[Ce,Ne]=Nt("root",{ref:r,className:qe.root,elementType:HZ,getSlotProps:we,externalForwardedProps:Fe,ownerState:Ie,additionalProps:{onClick:Re,"aria-pressed":Se}}),[Je,at]=Nt("loadingIndicator",{className:qe.loadingIndicator,elementType:GZ,externalForwardedProps:Fe,ownerState:Ie});return N.jsx(Ce,K({},Ne,{children:C?N.jsx(Je,K({},at,{children:ke})):o}))});Du.muiName="IconButton";function qZ(e){return en("MuiChip",e)}const GT=Jr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),p$=z.createContext({disabled:void 0,variant:void 0,color:void 0}),WZ=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],ZZ=e=>{const{disabled:t,size:r,color:n,clickable:i,variant:o,focusVisible:u}=e,a={root:["root",t&&"disabled",n&&`color${bt(n)}`,r&&`size${bt(r)}`,o&&`variant${bt(o)}`,i&&"clickable"],action:["action",t&&"disabled",u&&"focusVisible"],label:["label",r&&`label${bt(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return qr(a,qZ,{})},KZ=ft("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n,i;const o=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:u}=ud({theme:e,ownerState:t},["borderRadius"]);return[K({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${GT.disabled}`]:{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:o==null?void 0:o.color}]:[K({backgroundColor:e.vars.palette.background.surface},o,{[`&.${GT.disabled}`]:(i=e.variants[`${t.variant}Disabled`])==null?void 0:i[t.color]})],u!==void 0&&{"--_Chip-radius":u}]}),XZ=ft("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),JZ=ft("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,n,i,o;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},K({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color]}},{"&:active":(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color]},{[`&.${GT.disabled}`]:(o=e.variants[`${t.variant}Disabled`])==null?void 0:o[t.color]}]}),YZ=ft("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),QZ=ft("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),eK=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyChip"}),{children:i,className:o,color:u="neutral",onClick:a,disabled:p=!1,size:m="md",variant:w="soft",startDecorator:C,endDecorator:T,component:P,slots:R={},slotProps:$={}}=n,H=Gt(n,WZ),D=!!a||!!$.action,O=K({},n,{disabled:p,size:m,color:u,variant:w,clickable:D,focusVisible:!1}),L=typeof $.action=="function"?$.action(O):$.action,Q=z.useRef(null),{focusVisible:V,getRootProps:F}=ol(K({},L,{disabled:p,rootRef:Q}));O.focusVisible=V;const X=ZZ(O),re=K({},H,{component:P,slots:R,slotProps:$}),[ye,me]=Nt("root",{ref:r,className:ei(X.root,o),elementType:KZ,externalForwardedProps:re,ownerState:O}),[we,ke]=Nt("label",{className:X.label,elementType:XZ,externalForwardedProps:re,ownerState:O}),Ie=wa(ke.id),[qe,Re]=Nt("action",{className:X.action,elementType:JZ,externalForwardedProps:re,ownerState:O,getSlotProps:F,additionalProps:{"aria-labelledby":Ie,as:L==null?void 0:L.component,onClick:a}}),[Se,Fe]=Nt("startDecorator",{className:X.startDecorator,elementType:YZ,externalForwardedProps:re,ownerState:O}),[Ce,Ne]=Nt("endDecorator",{className:X.endDecorator,elementType:QZ,externalForwardedProps:re,ownerState:O}),Je=z.useMemo(()=>({disabled:p}),[p]);return N.jsx(p$.Provider,{value:Je,children:N.jsx(ew,{variant:w,color:u,children:N.jsxs(ye,K({},me,{children:[D&&N.jsx(qe,K({},Re)),N.jsx(we,K({},ke,{id:Ie,children:i})),C&&N.jsx(Se,K({},Fe,{children:C})),T&&N.jsx(Ce,K({},Ne,{children:T}))]}))})})}),tK=Up(N.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function rK(e){return en("MuiChipDelete",e)}Jr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var o5;const nK=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],iK=["onDelete"],oK=e=>{const{focusVisible:t,variant:r,color:n,disabled:i}=e,o={root:["root",i&&"disabled",t&&"focusVisible",r&&`variant${bt(r)}`,n&&`color${bt(n)}`]};return qr(o,rK,{})},aK=ft(ky,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),sK=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyChipDelete"}),{children:i,variant:o="plain",color:u="neutral",disabled:a,onKeyDown:p,onDelete:m,onClick:w,component:C,slots:T={},slotProps:P={}}=n,R=Gt(n,nK),$=z.useContext(p$),{variant:H=o,color:D=u}=Qb(t.variant,t.color,!0),O=t.color||D,L=a??$.disabled,Q=z.useRef(null),V=fn(Q,r),{focusVisible:F,getRootProps:X}=ol(K({},n,{disabled:L,rootRef:V})),re=K({},n,{disabled:L,variant:H,color:O,focusVisible:F}),ye=oK(re),me=K({},R,{component:C,slots:T,slotProps:P}),we=Se=>{!L&&m&&m(Se),w&&w(Se)},ke=Se=>{["Backspace","Enter","Delete"].includes(Se.key)&&(Se.preventDefault(),!L&&m&&m(Se)),p&&p(Se)},[Ie,qe]=Nt("root",{ref:r,elementType:aK,getSlotProps:X,externalForwardedProps:me,ownerState:re,additionalProps:{as:C,onKeyDown:ke,onClick:we},className:ye.root}),Re=Gt(qe,iK);return N.jsx(Ie,K({},Re,{children:i??(o5||(o5=N.jsx(tK,{})))}))});function lK(e){return en("MuiInput",e)}const m$=Jr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),nw=z.createContext(void 0),cK=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function uK(e,t){var r;const n=z.useContext(nw),{"aria-describedby":i,"aria-label":o,"aria-labelledby":u,autoComplete:a,autoFocus:p,className:m,defaultValue:w,disabled:C,disabledInProp:T,error:P,id:R,name:$,onClick:H,onChange:D,onKeyDown:O,onKeyUp:L,onFocus:Q,onBlur:V,placeholder:F,readOnly:X,required:re,type:ye,value:me}=e,we=Gt(e,cK),{getRootProps:ke,getInputProps:Ie,focused:qe,error:Re,disabled:Se}=$U({disabled:(r=T??(n==null?void 0:n.disabled))!=null?r:C,defaultValue:w,error:P,onBlur:V,onClick:H,onChange:D,onFocus:Q,required:re??(n==null?void 0:n.required),value:me}),Fe={[t.disabled]:Se,[t.error]:Re,[t.focused]:qe,[t.formControl]:!!n,[m]:m},Ce={[t.disabled]:Se};return K({formControl:n,propsToForward:{"aria-describedby":i,"aria-label":o,"aria-labelledby":u,autoComplete:a,autoFocus:p,disabled:Se,id:R,onKeyDown:O,onKeyUp:L,name:$,placeholder:F,readOnly:X,type:ye},rootStateClasses:Fe,inputStateClasses:Ce,getRootProps:ke,getInputProps:Ie,focused:qe,error:Re,disabled:Se},we)}const hK=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],dK=e=>{const{disabled:t,fullWidth:r,variant:n,color:i,size:o}=e,u={root:["root",t&&"disabled",r&&"fullWidth",n&&`variant${bt(n)}`,i&&`color${bt(i)}`,o&&`size${bt(o)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return qr(u,lK,{})},g$=ft("div")(({theme:e,ownerState:t})=>{var r,n,i,o,u,a;const p=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[K({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(n=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:n[500],[`&:not([${wp}])`]:K({},t.instanceColor&&{"--_Input-focusedHighlight":(i=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:i[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],p,{backgroundColor:(o=p==null?void 0:p.backgroundColor)!=null?o:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":K({},(u=e.variants[`${t.variant}Hover`])==null?void 0:u[t.color],{backgroundColor:null}),[`&.${m$.disabled}`]:(a=e.variants[`${t.variant}Disabled`])==null?void 0:a[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),v$=ft("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":K({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),y$=ft("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),_$=ft("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),fK=ft(g$,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),pK=ft(v$,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),mK=ft(y$,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),gK=ft(_$,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),vK=z.forwardRef(function(t,r){var n,i,o,u,a,p;const m=tn({props:t,name:"JoyInput"}),w=uK(K({},m,{disabledInProp:t.disabled}),m$),{propsToForward:C,rootStateClasses:T,inputStateClasses:P,getRootProps:R,getInputProps:$,formControl:H,focused:D,error:O=!1,disabled:L,fullWidth:Q=!1,size:V="md",color:F="neutral",variant:X="outlined",startDecorator:re,endDecorator:ye,component:me,slots:we={},slotProps:ke={}}=w,Ie=Gt(w,hK),qe=(n=(i=t.error)!=null?i:H==null?void 0:H.error)!=null?n:O,Re=(o=(u=t.size)!=null?u:H==null?void 0:H.size)!=null?o:V,Se=(a=t.color)!=null?a:qe?"danger":(p=H==null?void 0:H.color)!=null?p:F,Fe=K({instanceColor:qe?"danger":t.color},m,{fullWidth:Q,color:Se,disabled:L,error:qe,focused:D,size:Re,variant:X}),Ce=dK(Fe),Ne=K({},Ie,{component:me,slots:we,slotProps:ke}),[Je,at]=Nt("root",{ref:r,className:[Ce.root,T],elementType:fK,getSlotProps:R,externalForwardedProps:Ne,ownerState:Fe}),[st,Dt]=Nt("input",K({},H&&{additionalProps:{id:H.htmlFor,"aria-describedby":H["aria-describedby"]}},{className:[Ce.input,P],elementType:pK,getSlotProps:$,internalForwardedProps:C,externalForwardedProps:Ne,ownerState:Fe})),[Ct,Bt]=Nt("startDecorator",{className:Ce.startDecorator,elementType:mK,externalForwardedProps:Ne,ownerState:Fe}),[Tt,it]=Nt("endDecorator",{className:Ce.endDecorator,elementType:gK,externalForwardedProps:Ne,ownerState:Fe});return N.jsxs(Je,K({},at,{children:[re&&N.jsx(Ct,K({},Bt,{children:re})),N.jsx(st,K({},Dt)),ye&&N.jsx(Tt,K({},it,{children:ye}))]}))});function yK(e){return en("MuiListSubheader",e)}Jr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const _K=["component","className","children","id","sticky","variant","color","slots","slotProps"],xK=e=>{const{variant:t,color:r,sticky:n}=e,i={root:["root",n&&"sticky",r&&`color${bt(r)}`,t&&`variant${bt(t)}`]};return qr(i,yK,{})},bK=ft("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;return K({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${wp}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(n=e.variants[t.variant])==null?void 0:n[t.color])}),wK=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyListSubheader"}),{component:i,className:o,children:u,id:a,sticky:p=!1,variant:m,color:w,slots:C={},slotProps:T={}}=n,P=Gt(n,_K),R=wa(a),$=z.useContext(s$);z.useEffect(()=>{$&&$(R||"")},[$,R]);const H=K({instanceColor:t.color},n,{id:R,sticky:p,variant:m,color:m?w??"neutral":w}),D=xK(H),O=K({},P,{component:i,slots:C,slotProps:T}),[L,Q]=Nt("root",{ref:r,className:ei(D.root,o),elementType:bK,externalForwardedProps:O,ownerState:H,additionalProps:{as:i,id:R}});return N.jsx(L,K({},Q,{children:u}))});function SK(e){return en("MuiAutocomplete",e)}const pu=Jr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),x$=ft(Cy)(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(n==null?void 0:n.backgroundColor)||(n==null?void 0:n.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Kb,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(n!=null&&n.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${ox.nested}, & .${ox.nested} .${gZ.root}`]:{position:"initial"}})});ft(x$,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function CK(e){return en("MuiAutocompleteOption",e)}Jr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const TK=["children","component","color","variant","className","slots","slotProps"],kK=e=>{const{color:t,variant:r}=e,n={root:["root",t&&`color${bt(t)}`,r&&`variant${bt(r)}`]};return qr(n,CK,{})},b$=ft(Ty)(({theme:e,ownerState:t})=>{var r,n;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':K({},(n=e.variants[`${t.variant}Active`])==null?void 0:n[t.color],{fontWeight:e.vars.fontWeight.md})}}),EK=ft(b$,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),IK=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyAutocompleteOption"}),{children:i,component:o="li",color:u="neutral",variant:a="plain",className:p,slots:m={},slotProps:w={}}=n,C=Gt(n,TK),{variant:T=a,color:P=u}=Qb(t.variant,t.color),R=K({},n,{component:o,color:P,variant:T}),$=kK(R),H=K({},C,{component:o,slots:m,slotProps:w}),[D,O]=Nt("root",{ref:r,className:ei($.root,p),elementType:EK,externalForwardedProps:H,ownerState:R,additionalProps:{as:o,role:"option"}});return N.jsx(D,K({},O,{children:i}))});var a5,s5;const MK=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],PK=["onDelete"],AK=["key"],RK=["onBlur","onFocus","onMouseDown"],DK=["key"],zK=e=>e.current!==null&&e.current.contains(document.activeElement),LK=e=>{var t;return(t=e.label)!=null?t:e},OK=e=>`+${e}`,$K=e=>N.jsxs(Fc,{nested:!0,children:[N.jsx(wK,{sticky:!0,children:e.group}),N.jsx(hd,{children:e.children})]},e.key),BK=e=>{const{disabled:t,focused:r,hasClearIcon:n,hasPopupIcon:i,popupOpen:o,variant:u,color:a,size:p,multiple:m}=e,w={root:["root",r&&"focused",n&&"hasClearIcon",i&&"hasPopupIcon",u&&`variant${bt(u)}`,a&&`color${bt(a)}`,p&&`size${bt(p)}`],wrapper:["wrapper",m&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",o&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return qr(w,SK,{})},FK=ft(g$,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${pu.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),NK=ft("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${pu.multiple}`]:K({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),jK=ft(v$,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>K({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),VK=ft(y$,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),UK=ft(_$,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>K({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),HK=ft(ky,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>K({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),GK=ft(ky,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${pu.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),qK=ft(x$,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),WK=ft(b$,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),ZK=ft(Fc,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),KK=ft(Fc,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),XK=ft("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),sx=z.forwardRef(function(t,r){var n,i,o,u,a,p,m;const w=tn({props:t,name:"JoyAutocomplete"}),{"aria-describedby":C,"aria-label":T,"aria-labelledby":P,autoFocus:R,clearIcon:$=a5||(a5=N.jsx(h$,{fontSize:"md"})),clearText:H="Clear",closeText:D="Close",disableClearable:O=!1,disabled:L,endDecorator:Q,error:V=!1,forcePopupIcon:F="auto",freeSolo:X=!1,getLimitTagsText:re=OK,getOptionLabel:ye=LK,groupBy:me,id:we,limitTags:ke=-1,loading:Ie=!1,loadingText:qe="Loading",multiple:Re=!1,name:Se,noOptionsText:Fe="No options",openText:Ce="Open",placeholder:Ne,popupIcon:Je=s5||(s5=N.jsx(PZ,{})),readOnly:at=!1,renderGroup:st=$K,renderOption:Dt,renderTags:Ct,required:Bt,type:Tt,startDecorator:it,size:Ze="md",color:rt="neutral",variant:pt="outlined",component:ur,slots:or={},slotProps:Er={}}=w,jr=Gt(w,MK),ar=z.useContext(nw),It=(n=(i=t.error)!=null?i:ar==null?void 0:ar.error)!=null?n:V,gr=(o=(u=t.size)!=null?u:ar==null?void 0:ar.size)!=null?o:Ze,Wt=(a=t.color)!=null?a:It?"danger":(p=ar==null?void 0:ar.color)!=null?p:rt,Br=(m=L??(ar==null?void 0:ar.disabled))!=null?m:!1,{getRootProps:He,getInputProps:Cr,getPopupIndicatorProps:Rr,getClearProps:tr,getTagProps:lr,getListboxProps:Pr,getOptionProps:Fr,value:Ir,dirty:vr,popupOpen:rr,focused:mr,focusedTag:ln,anchorEl:je,setAnchorEl:kt,inputValue:wt,groupedOptions:Ee}=iZ(K({},w,{id:we??(ar==null?void 0:ar.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:zK})),{onMouseDown:Ve}=Cr(),{onClick:Xe}=He(),Et=!O&&!Br&&vr&&!at,vt=(!X||F===!0)&&F!==!1,Rt=K({instanceColor:t.color},w,{value:Ir,disabled:Br,focused:mr,getOptionLabel:ye,hasOptions:!!Ee.length,hasClearIcon:Et,hasPopupIcon:vt,inputFocused:ln===-1,popupOpen:rr,size:gr,color:Wt,variant:pt}),br=BK(Rt),Ft=K({},jr,{component:ur,slots:or,slotProps:Er});let _r;if(Re&&Ir.length>0){const Kt=Kr=>{const Yr=lr(Kr),{onDelete:to}=Yr,ti=Gt(Yr,PK);return K({disabled:Br,size:gr,onClick:to},ti)};Ct?_r=Ct(Ir,Kt,Rt):_r=Ir.map((Kr,Yr)=>{const to=Kt({index:Yr}),{key:ti}=to,ri=Gt(to,AK);return N.jsx(eK,{size:gr,variant:"soft",color:"neutral",endDecorator:N.jsx(sK,K({},ri),ti),sx:{minWidth:0},children:ye(Kr)},Yr)})}const ue=fn(r,kt),Y={[pu.disabled]:Br,[pu.error]:It,[pu.focused]:mr,[pu.formControl]:!!ar},[ee,U]=Nt("root",{ref:ue,className:[br.root,Y],elementType:FK,externalForwardedProps:Ft,ownerState:Rt,getSlotProps:He,additionalProps:{onClick:Kt=>{Xe&&Xe(Kt),Kt.currentTarget===Kt.target&&Ve&&Ve(Kt)}}}),[J,ne]=Nt("wrapper",{className:br.wrapper,elementType:NK,externalForwardedProps:Ft,ownerState:Rt}),de={[pu.disabled]:Br},[pe,se]=Nt("input",{className:[br.input,de],elementType:jK,getSlotProps:Kt=>{const Kr=Cr(),{onBlur:Yr,onFocus:to,onMouseDown:ti}=Kr,ri=Gt(Kr,RK);return K({},ri,{onBlur:Bo=>{var ro;Yr==null||Yr(Bo),(ro=Kt.onBlur)==null||ro.call(Kt,Bo)},onFocus:Bo=>{var ro;to==null||to(Bo),(ro=Kt.onFocus)==null||ro.call(Kt,Bo)},onMouseDown:Bo=>{var ro;ti==null||ti(Bo),(ro=Kt.onMouseDown)==null||ro.call(Kt,Bo)}})},externalForwardedProps:Ft,ownerState:Rt,additionalProps:{autoFocus:R,placeholder:Ne,name:Se,readOnly:at,disabled:Br,required:Bt??(ar==null?void 0:ar.required),type:Tt,"aria-invalid":It||void 0,"aria-label":T,"aria-labelledby":P,"aria-describedby":C??(ar==null?void 0:ar["aria-describedby"])}}),[xe,Pe]=Nt("startDecorator",{className:br.startDecorator,elementType:VK,externalForwardedProps:Ft,ownerState:Rt}),[Le,Ae]=Nt("endDecorator",{className:br.endDecorator,elementType:UK,externalForwardedProps:Ft,ownerState:Rt}),[ot,ht]=Nt("clearIndicator",{className:br.clearIndicator,elementType:HK,getSlotProps:tr,externalForwardedProps:Ft,ownerState:Rt,getSlotOwnerState:Kt=>({size:Kt.size||gr,variant:Kt.variant||Eh(pt,Wt).variant||"plain",color:Kt.color||Eh(pt,Wt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":H,title:H}}),[ut,Mt]=Nt("popupIndicator",{className:br.popupIndicator,elementType:GK,getSlotProps:Rr,externalForwardedProps:Ft,ownerState:Rt,getSlotOwnerState:Kt=>({size:Kt.size||gr,variant:Kt.variant||Eh(pt,Wt).variant||"plain",color:Kt.color||Eh(pt,Wt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Br,"aria-label":rr?D:Ce,title:rr?D:Ce,type:"button"}}),[Oe,$e]=Nt("listbox",{className:br.listbox,elementType:qK,getSlotProps:Pr,externalForwardedProps:Ft,ownerState:Rt,getSlotOwnerState:Kt=>({size:Kt.size||gr,variant:Kt.variant||pt,color:Kt.color||Wt,disableColorInversion:!Kt.disablePortal}),additionalProps:{anchorEl:je,open:rr,style:je?{width:je.clientWidth}:{}}}),[tt,dt]=Nt("loading",{className:br.loading,elementType:ZK,externalForwardedProps:Ft,ownerState:Rt}),[Lt,yr]=Nt("noOptions",{className:br.noOptions,elementType:KK,externalForwardedProps:Ft,ownerState:Rt,additionalProps:{role:"presentation",onMouseDown:Kt=>{Kt.preventDefault()}}}),[sr,Wr]=Nt("limitTag",{className:br.limitTag,elementType:XK,externalForwardedProps:Ft,ownerState:Rt});if(ke>-1&&Array.isArray(_r)){const Kt=_r.length-ke;!mr&&Kt>0&&(_r=_r.splice(0,ke),_r.push(N.jsx(sr,K({},Wr,{children:re(Kt)}),_r.length)))}const[xn,Zn]=Nt("option",{className:br.option,elementType:WK,externalForwardedProps:Ft,ownerState:Rt,getSlotOwnerState:Kt=>({variant:Kt.variant||Eh(pt,Wt).variant||"plain",color:Kt.color||Eh(pt,Wt).color||"neutral",disableColorInversion:!$e.disablePortal}),additionalProps:{as:"li"}}),$o=Dt||((Kt,Kr)=>{const{key:Yr}=Kt,to=Gt(Kt,DK);return N.jsx(xn,K({},to,{children:ye(Kr)}),Yr)}),Zr=(Kt,Kr)=>{const Yr=Fr({option:Kt,index:Kr});return $o(K({},Zn,Yr),Kt,{selected:!!Yr["aria-selected"],inputValue:wt,ownerState:Rt})},di=z.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...$e.modifiers||[]],[$e.modifiers]);let Vr=null;if(je){var ia;Vr=N.jsx(ew,{variant:pt,color:Wt,children:N.jsx(Sy,{nested:!0,children:N.jsxs(Oe,K({},$e,{className:ei($e.className),modifiers:di},!((ia=w.slots)!=null&&ia.listbox)&&{as:qb,slots:{root:$e.as||"ul"}},{children:[Ee.map((Kt,Kr)=>{if(me){const Yr=Kt;return st({key:String(Yr.key),group:Yr.group,children:Yr.options.map((to,ti)=>Zr(to,Yr.index+ti))})}return Zr(Kt,Kr)}),Ie&&Ee.length===0?N.jsx(tt,K({},dt,{children:qe})):null,Ee.length===0&&!X&&!Ie?N.jsx(Lt,K({},yr,{children:Fe})):null]}))})})}return N.jsxs(z.Fragment,{children:[N.jsxs(ee,K({},U,{children:[it&&N.jsx(xe,K({},Pe,{children:it})),N.jsxs(J,K({},ne,{children:[_r,N.jsx(pe,K({},se))]})),Q&&N.jsx(Le,K({},Ae,{children:Q})),Et?N.jsx(ot,K({},ht,{children:$})):null,vt?N.jsx(ut,K({},Mt,{children:Je})):null]})),Vr]})}),JK=db("MuiBox",["root"]),Sa=KV({themeId:ly,defaultTheme:Np,defaultClassName:JK.root,generateClassName:SL.generate});function YK(e){return en("MuiTypography",e)}Jr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const QK=["color","textColor"],eX=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],qT=z.createContext(!1),tX=z.createContext(!1),rX=e=>{const{gutterBottom:t,noWrap:r,level:n,color:i,variant:o}=e,u={root:["root",n,t&&"gutterBottom",r&&"noWrap",i&&`color${bt(i)}`,o&&`variant${bt(o)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return qr(u,YK,{})},nX=ft("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),iX=ft("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),oX=ft("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n,i,o,u;const a=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${a})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:K({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&K({display:"flex",alignItems:"center"},t.nesting&&K({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(n=(i=e.typography[t.level])==null?void 0:i.fontSize)!=null?n:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(o=e.vars.palette[t.color])==null?void 0:o.mainChannel} / 1))`},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(u=e.variants[t.variant])==null?void 0:u[t.color]))}),l5={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Ln=z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyTypography"}),{color:o,textColor:u}=i,a=Gt(i,QK),p=z.useContext(qT),m=z.useContext(tX),w=hb(K({},a,{color:u})),{component:C,gutterBottom:T=!1,noWrap:P=!1,level:R="body-md",levelMapping:$=l5,children:H,endDecorator:D,startDecorator:O,variant:L,slots:Q={},slotProps:V={}}=w,F=Gt(w,eX),X=(n=t.color)!=null?n:L?o??"neutral":o,re=p||m?t.level||"inherit":R,ye=Sb(H,["Skeleton"]),me=C||(p?"span":$[re]||l5[re]||"span"),we=K({},w,{level:re,component:me,color:X,gutterBottom:T,noWrap:P,nesting:p,variant:L,unstable_hasSkeleton:ye}),ke=rX(we),Ie=K({},F,{component:me,slots:Q,slotProps:V}),[qe,Re]=Nt("root",{ref:r,className:ke.root,elementType:oX,externalForwardedProps:Ie,ownerState:we}),[Se,Fe]=Nt("startDecorator",{className:ke.startDecorator,elementType:nX,externalForwardedProps:Ie,ownerState:we}),[Ce,Ne]=Nt("endDecorator",{className:ke.endDecorator,elementType:iX,externalForwardedProps:Ie,ownerState:we});return N.jsx(qT.Provider,{value:!0,children:N.jsxs(qe,K({},Re,{children:[O&&N.jsx(Se,K({},Fe,{children:O})),ye?z.cloneElement(H,{variant:H.props.variant||"inline"}):H,D&&N.jsx(Ce,K({},Ne,{children:D}))]}))})});Ln.muiName="Typography";function aX(e){return en("MuiButton",e)}const lx=Jr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),sX=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],lX=e=>{const{color:t,disabled:r,focusVisible:n,focusVisibleClassName:i,fullWidth:o,size:u,variant:a,loading:p}=e,m={root:["root",r&&"disabled",n&&"focusVisible",o&&"fullWidth",a&&`variant${bt(a)}`,t&&`color${bt(t)}`,u&&`size${bt(u)}`,p&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},w=qr(m,aX,{});return n&&i&&(w.root+=` ${i}`),w},cX=ft("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),uX=ft("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),hX=ft("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,n;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color})}),w$=({theme:e,ownerState:t})=>{var r,n,i,o;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color]},'&:active, &[aria-pressed="true"]':(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],[`&.${lx.disabled}`]:(o=e.variants[`${t.variant}Disabled`])==null?void 0:o[t.color]},t.loadingPosition==="center"&&{[`&.${lx.loading}`]:{color:"transparent"}})]},dX=ft("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(w$),Sp=z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyButton"}),{children:o,action:u,color:a="primary",variant:p="solid",size:m="md",fullWidth:w=!1,startDecorator:C,endDecorator:T,loading:P=!1,loadingPosition:R="center",loadingIndicator:$,disabled:H,component:D,slots:O={},slotProps:L={}}=i,Q=Gt(i,sX),V=z.useContext(tw),F=z.useContext(f$),X=t.variant||V.variant||p,re=t.size||V.size||m,ye=t.color||V.color||a,me=(n=t.loading||t.disabled)!=null?n:V.disabled||P||H,we=z.useRef(null),ke=fn(we,r),{focusVisible:Ie,setFocusVisible:qe,getRootProps:Re}=ol(K({},i,{disabled:me,rootRef:ke})),Se=$??N.jsx(rw,{color:ye,thickness:{sm:2,md:3,lg:4}[re]||3});z.useImperativeHandle(u,()=>({focusVisible:()=>{var pt;qe(!0),(pt=we.current)==null||pt.focus()}}),[qe]);const Fe=K({},i,{color:ye,fullWidth:w,variant:X,size:re,focusVisible:Ie,loading:P,loadingPosition:R,disabled:me}),Ce=lX(Fe),Ne=pt=>{var ur;let or=i.onClick;if(typeof L.root=="function"?or=L.root(Fe).onClick:L.root&&(or=L.root.onClick),(ur=or)==null||ur(pt),F){var Er;(Er=F.onClick)==null||Er.call(F,pt,i.value)}};let Je=i["aria-pressed"];typeof L.root=="function"?Je=L.root(Fe)["aria-pressed"]:L.root&&(Je=L.root["aria-pressed"]),F!=null&&F.value&&(Array.isArray(F.value)?Je=F.value.indexOf(i.value)!==-1:Je=F.value===i.value);const at=K({},Q,{component:D,slots:O,slotProps:L}),[st,Dt]=Nt("root",{ref:r,className:Ce.root,elementType:dX,externalForwardedProps:at,getSlotProps:Re,ownerState:Fe,additionalProps:{onClick:Ne,"aria-pressed":Je}}),[Ct,Bt]=Nt("startDecorator",{className:Ce.startDecorator,elementType:cX,externalForwardedProps:at,ownerState:Fe}),[Tt,it]=Nt("endDecorator",{className:Ce.endDecorator,elementType:uX,externalForwardedProps:at,ownerState:Fe}),[Ze,rt]=Nt("loadingIndicatorCenter",{className:Ce.loadingIndicatorCenter,elementType:hX,externalForwardedProps:at,ownerState:Fe});return N.jsxs(st,K({},Dt,{children:[(C||P&&R==="start")&&N.jsx(Ct,K({},Bt,{children:P&&R==="start"?Se:C})),o,P&&R==="center"&&N.jsx(Ze,K({},rt,{children:Se})),(T||P&&R==="end")&&N.jsx(Tt,K({},it,{children:P&&R==="end"?Se:T}))]}))});Sp.muiName="Button";function fX(e){return en("MuiButtonGroup",e)}Jr("MuiButtonGroup",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const pX=["buttonFlex","className","component","disabled","size","color","variant","children","orientation","slots","slotProps","spacing"],mX=e=>{const{size:t,variant:r,color:n,orientation:i}=e,o={root:["root",i,r&&`variant${bt(r)}`,n&&`color${bt(n)}`,t&&`size${bt(t)}`]};return qr(o,fX,{})},gX=ft("div")(({theme:e,ownerState:t})=>{var r,n,i;const{borderRadius:o}=ud({theme:e,ownerState:t},["borderRadius"]),u=t.orientation==="vertical"?"var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius)":"var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius)",a=t.orientation==="vertical"?"var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius)":"var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius)",p=t.orientation==="vertical"?"calc(var(--ButtonGroup-separatorSize) * -1) 0 0 0":"0 0 0 calc(var(--ButtonGroup-separatorSize) * -1)",m={};Q7(e.breakpoints,t.spacing,(P,R)=>{if(R!==null){var $;P(m,{"--ButtonGroup-connected":R.toString().match(/^0(?!\.)/)?"1":"0",gap:typeof R=="string"?R:($=e.spacing)==null?void 0:$.call(e,R)})}});const w=(r=e.variants.outlined)==null?void 0:r[t.color],C=(n=e.variants.outlinedDisabled)==null?void 0:n[t.color],T=(i=e.variants.outlinedHover)==null?void 0:i[t.color];return[K({"--ButtonGroup-separatorSize":t.variant==="outlined"?"1px":"calc(var(--ButtonGroup-connected) * 1px)","--ButtonGroup-separatorColor":w==null?void 0:w.borderColor,"--ButtonGroup-radius":e.vars.radius.sm,"--Divider-inset":"0.5rem","--unstable_childRadius":"calc((1 - var(--ButtonGroup-connected)) * var(--ButtonGroup-radius) - var(--variant-borderWidth, 0px))"},m,{display:"flex",borderRadius:"var(--ButtonGroup-radius)",flexDirection:t.orientation==="vertical"?"column":"row","& > [data-first-child]":K({"--Button-radius":u,"--IconButton-radius":u},t.orientation==="horizontal"&&{borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :not([data-first-child]):not([data-last-child]):not(:only-child)":K({"--Button-radius":"var(--unstable_childRadius)","--IconButton-radius":"var(--unstable_childRadius)",borderRadius:"var(--unstable_childRadius)"},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > [data-last-child]":K({"--Button-radius":a,"--IconButton-radius":a},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :only-child":{"--Button-radius":"var(--ButtonGroup-radius)","--IconButton-radius":"var(--ButtonGroup-radius)"},"& > :not([data-first-child]):not(:only-child)":{"--Button-margin":p,"--IconButton-margin":p},[`& .${lx.root}, & .${n5.root}`]:K({"&:not(:disabled)":{zIndex:1},"&:disabled":{"--ButtonGroup-separatorColor":C==null?void 0:C.borderColor}},t.variant==="outlined"&&{"&:hover":{"--ButtonGroup-separatorColor":T==null?void 0:T.borderColor}},{[`&:hover, ${e.focus.selector}`]:{zIndex:2}})},t.buttonFlex&&{[`& > *:not(.${n5.root})`]:{flex:t.buttonFlex},[`& > :not(button) > .${lx.root}`]:{width:"100%"}}),o!==void 0&&{"--ButtonGroup-radius":o}]}),vX=ft(gX,{name:"JoyButtonGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yX=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyButtonGroup"}),{buttonFlex:i,className:o,component:u="div",disabled:a=!1,size:p="md",color:m="neutral",variant:w="outlined",children:C,orientation:T="horizontal",slots:P={},slotProps:R={},spacing:$=0}=n,H=Gt(n,pX),D=K({},n,{buttonFlex:i,color:m,component:u,orientation:T,spacing:$,size:p,variant:w}),O=mX(D),L=K({},H,{component:u,slots:P,slotProps:R}),[Q,V]=Nt("root",{ref:r,className:ei(O.root,o),elementType:vX,externalForwardedProps:L,additionalProps:{role:"group"},ownerState:D}),F=z.useMemo(()=>({variant:w,color:m,size:p,disabled:a}),[w,m,p,a]);return N.jsx(Q,K({},V,{children:N.jsx(tw.Provider,{value:F,children:z.Children.map(C,(X,re)=>{if(!z.isValidElement(X))return X;const ye={};if(Sb(X,["Divider"])){var me,we;const ke=X.props;ye.inset=(me=ke==null?void 0:ke.inset)!=null?me:"context";const Ie=T==="vertical"?"horizontal":"vertical";ye.orientation=(we=ke==null?void 0:ke.orientation)!=null?we:Ie,ye.role="presentation",ye.component="span"}return z.Children.count(C)>1&&(re===0&&(ye["data-first-child"]=""),re===z.Children.count(C)-1&&(ye["data-last-child"]="")),z.cloneElement(X,ye)})})}))});function _X(e){return en("MuiCard",e)}Jr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const xX=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],bX=e=>{const{size:t,variant:r,color:n,orientation:i}=e,o={root:["root",i,r&&`variant${bt(r)}`,n&&`color${bt(n)}`,t&&`size${bt(t)}`]};return qr(o,_X,{})},wX=ft("div")(({theme:e,ownerState:t})=>{var r;const{p:n,padding:i,borderRadius:o}=ud({theme:e,ownerState:t},["p","padding","borderRadius"]);return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&Jb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Yb(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color]),n!==void 0&&{"--Card-padding":n},i!==void 0&&{"--Card-padding":i},o!==void 0&&{"--Card-radius":o}]}),SX=ft(wX,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),CX=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyCard"}),{className:i,color:o="neutral",component:u="div",invertedColors:a=!1,size:p="md",variant:m="outlined",children:w,orientation:C="vertical",slots:T={},slotProps:P={}}=n,R=Gt(n,xX),$=K({},n,{color:o,component:u,orientation:C,size:p,variant:m,invertedColors:a}),H=bX($),D=K({},R,{component:u,slots:T,slotProps:P}),[O,L]=Nt("root",{ref:r,className:ei(H.root,i),elementType:SX,externalForwardedProps:D,ownerState:$});return N.jsx(O,K({},L,{children:z.Children.map(w,(Q,V)=>{if(!z.isValidElement(Q))return Q;const F={};if(Sb(Q,["Divider"])){var X,re;const ye=Q.props;F.inset=(X=ye==null?void 0:ye.inset)!=null?X:"context";const me=C==="vertical"?"horizontal":"vertical";F.orientation=(re=ye==null?void 0:ye.orientation)!=null?re:me}return V===0&&(F["data-first-child"]=""),V===z.Children.count(w)-1&&(F["data-last-child"]=""),z.cloneElement(Q,F)})}))}),S$=Jr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function TX(e){return en("MuiDivider",e)}Jr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const C$=ft("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${S$.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));ft(C$,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const kX=Jr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function EX(e){return en("MuiCheckbox",e)}const Bh=Jr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),IX=Up(N.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),MX=Up(N.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),PX=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],AX=e=>{const{checked:t,disabled:r,disableIcon:n,focusVisible:i,color:o,variant:u,size:a,indeterminate:p}=e,m={root:["root",t&&"checked",r&&"disabled",i&&"focusVisible",u&&`variant${bt(u)}`,o&&`color${bt(o)}`,a&&`size${bt(a)}`],checkbox:["checkbox",t&&"checked",p&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",n&&r&&"disabled",i&&"focusVisible"],input:["input"],label:["label"]};return qr(m,EX,{})},RX=ft("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n,i;return K({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${Bh.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[e.color])==null?void 0:r.color}},e.disableIcon&&{color:(n=t.variants[e.variant])==null||(n=n[e.color])==null?void 0:n.color,[`&.${Bh.disabled}`]:{color:(i=t.variants[`${e.variant}Disabled`])==null||(i=i[e.color])==null?void 0:i.color}})}),DX=ft("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var r,n,i,o,u;const a=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${Bh.checked}, &.${Bh.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[K({},a,{backgroundColor:(n=a==null?void 0:a.backgroundColor)!=null?n:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]}},{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color]},{[`&.${Bh.disabled}`]:(u=e.variants[`${t.variant}Disabled`])==null?void 0:u[t.color]}]]}),zX=ft("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,n,i,o;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color]},{"&:active":(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color]},{[`&.${Bh.disabled}`]:(o=e.variants[`${t.variant}Disabled`])==null?void 0:o[t.color]}]:[]]}),LX=ft("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),OX=ft("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),$X=N.jsx(IX,{}),BX=N.jsx(MX,{}),Cp=z.forwardRef(function(t,r){var n,i,o,u,a;const p=tn({props:t,name:"JoyCheckbox"}),{checked:m,uncheckedIcon:w,checkedIcon:C=$X,label:T,defaultChecked:P,disabled:R,disableIcon:$=!1,overlay:H,id:D,indeterminate:O=!1,indeterminateIcon:L=BX,name:Q,onBlur:V,onChange:F,onFocus:X,onFocusVisible:re,readOnly:ye,required:me,value:we,color:ke,variant:Ie,size:qe="md",component:Re,slots:Se={},slotProps:Fe={}}=p,Ce=Gt(p,PX),Ne=z.useContext(nw),Je=(n=(i=t.disabled)!=null?i:Ne==null?void 0:Ne.disabled)!=null?n:R,at=(o=(u=t.size)!=null?u:Ne==null?void 0:Ne.size)!=null?o:qe,st=wa(D??(Ne==null?void 0:Ne.htmlFor)),Dt={checked:m,defaultChecked:P,disabled:Je,onBlur:V,onChange:F,onFocus:X,onFocusVisible:re},{getInputProps:Ct,checked:Bt,disabled:Tt,focusVisible:it}=GW(Dt),Ze=Bt||O,ur=Ze?Ie||"solid":Ie||"outlined",or=t.color||(Ne!=null&&Ne.error?"danger":(a=Ne==null?void 0:Ne.color)!=null?a:ke),ar=K({},p,{checked:Bt,disabled:Tt,disableIcon:$,overlay:H,focusVisible:it,color:Ze?or||"primary":or||"neutral",variant:ur,size:at}),It=AX(ar),gr=K({},Ce,{component:Re,slots:Se,slotProps:Fe}),[Wt,Br]=Nt("root",{ref:r,className:It.root,elementType:RX,externalForwardedProps:gr,ownerState:ar}),[He,Cr]=Nt("checkbox",{className:It.checkbox,elementType:DX,externalForwardedProps:gr,ownerState:ar}),[Rr,tr]=Nt("action",{className:It.action,elementType:zX,externalForwardedProps:gr,ownerState:ar}),[lr,Pr]=Nt("input",{additionalProps:K({id:st,name:Q,value:we,readOnly:ye,role:void 0,required:me??(Ne==null?void 0:Ne.required),"aria-describedby":Ne==null?void 0:Ne["aria-describedby"]},O&&{"aria-checked":"mixed"}),className:It.input,elementType:LX,externalForwardedProps:gr,getSlotProps:Ct,ownerState:ar}),[Fr,Ir]=Nt("label",{additionalProps:{htmlFor:st},className:It.label,elementType:OX,externalForwardedProps:gr,ownerState:ar});let vr=w;return $?vr=null:O?vr=L:Bt&&(vr=C),N.jsxs(Wt,K({},Br,{children:[N.jsxs(He,K({},Cr,{children:[N.jsx(Rr,K({},tr,{children:N.jsx(lr,K({},Pr))})),vr]})),T&&N.jsx(qT.Provider,{value:!0,children:N.jsx(Fr,K({},Ir,{children:T}))})]}))});function FX(e){const{children:t,disableColorScheme:r=!1}=e;return N.jsxs(z.Fragment,{children:[N.jsx(mU,{styles:n=>{var i,o;const u={};r||Object.entries(n.colorSchemes).forEach(([p,m])=>{var w;u[n.getColorSchemeSelector(p).replace(/\s*&/,"")]={colorScheme:(w=m.palette)==null?void 0:w.mode}});const a=(i=(o=n.components)==null||(o=o.JoyTypography)==null||(o=o.defaultProps)==null?void 0:o.level)!=null?i:"body-md";return K({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.vars.fontWeight.lg},body:K({margin:0,color:n.vars.palette.text.primary,fontFamily:n.vars.fontFamily.body},n.typography[a],{backgroundColor:n.vars.palette.background.body,"@media print":{backgroundColor:n.vars.palette.common.white},"&::backdrop":{backgroundColor:n.vars.palette.background.backdrop}})},u)},defaultTheme:Np}),t]})}function NX(e){return en("MuiDialogContent",e)}Jr("MuiDialogContent",["root"]);const iw=z.createContext(void 0);function jX(e){return en("MuiDialogTitle",e)}const T$=Jr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),VX=["component","children","orientation","slots","slotProps"],UX=()=>qr({root:["root"]},NX,{}),HX=ft(C$,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${kX.root} > .${T$.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),k$=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyDialogContent"}),i=z.useContext(iw),{component:o="div",children:u,orientation:a="vertical",slots:p={},slotProps:m={}}=n,w=Gt(n,VX),C=K({},w,{component:o,slots:p,slotProps:m}),T=K({},n,{component:o,orientation:a}),P=UX(),[R,$]=Nt("root",{ref:r,className:P.root,elementType:HX,externalForwardedProps:C,ownerState:T,additionalProps:{id:i==null?void 0:i.describedBy}});return N.jsx(R,K({},$,{children:u}))}),gI=z.createContext(void 0),GX=["component","children","variant","color","level","slots","slotProps"],qX=e=>{const{level:t,color:r,variant:n}=e,i={root:["root",t,r&&`color${bt(r)}`,n&&`variant${bt(n)}`]};return qr(i,jX,{})},WX=ft("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;const i=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${i})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(n=e.variants[t.variant])==null?void 0:n[t.color]),{[`.${S$.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),ZX={sm:"title-md",md:"title-lg",lg:"h4"},E$=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyDialogTitle"}),i=z.useContext(gI),o=z.useContext(iw),{component:u="h2",children:a,variant:p,color:m,level:w=ZX[i||"md"],slots:C={},slotProps:T={}}=n,P=Gt(n,GX),R=t.color||(p?m??"neutral":m),$=K({},P,{component:u,slots:C,slotProps:T}),H=K({},n,{component:u,color:R,variant:p,level:w}),D=qX(H),[O,L]=Nt("root",{ref:r,className:D.root,elementType:WX,externalForwardedProps:$,ownerState:H,additionalProps:{id:o==null?void 0:o.labelledBy}});return N.jsx(O,K({},L,{children:a}))}),KX=["className","children","component","inset","orientation","role","slots","slotProps"],XX=e=>{const{orientation:t,inset:r}=e,n={root:["root",t,r&&`inset${bt(r)}`]};return qr(n,TX,{})},I$=ft("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>K({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?K({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),Ey=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyDivider"}),{className:i,children:o,component:u=o!=null?"div":"hr",inset:a,orientation:p="horizontal",role:m=u!=="hr"?"separator":void 0,slots:w={},slotProps:C={}}=n,T=Gt(n,KX),P=K({},n,{inset:a,role:m,orientation:p,component:u}),R=XX(P),$=K({},T,{component:u,slots:w,slotProps:C}),[H,D]=Nt("root",{ref:r,className:ei(R.root,i),elementType:I$,externalForwardedProps:$,ownerState:P,additionalProps:K({as:u,role:m},m==="separator"&&p==="vertical"&&{"aria-orientation":"vertical"})});return N.jsx(H,K({},D,{children:o}))});Ey.muiName="Divider";const M$=z.createContext(void 0),P$=ft("div")(({ownerState:e,theme:t})=>K({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));ft(P$,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const A$=ft("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));ft(A$,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function JX(e){return en("MuiDrawer",e)}Jr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const YX=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],QX=e=>{const{open:t,variant:r,color:n,size:i}=e,o={root:["root",!t&&"hidden",r&&`variant${bt(r)}`,n&&`color${bt(n)}`,i&&`size${bt(i)}`],backdrop:["backdrop"],content:["content"]};return qr(o,JX,{})},eJ=ft(P$,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),tJ=ft(A$,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),rJ=ft("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return K({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&Jb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Yb(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${T$.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),R$=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyDrawer"}),{children:i,anchor:o="left",container:u,disableAutoFocus:a=!1,disableEnforceFocus:p=!1,disableEscapeKeyDown:m=!1,disablePortal:w=!1,disableRestoreFocus:C=!1,disableScrollLock:T=!1,hideBackdrop:P=!1,color:R="neutral",variant:$="plain",invertedColors:H=!1,size:D="md",onClose:O,open:L,component:Q,slots:V={},slotProps:F={}}=n,X=Gt(n,YX),re=K({},n,{anchor:o,disableAutoFocus:a,disableEnforceFocus:p,disableEscapeKeyDown:m,disablePortal:w,disableRestoreFocus:C,disableScrollLock:T,hideBackdrop:P,invertedColors:H,color:R,variant:$,size:D}),{getRootProps:ye,getBackdropProps:me,rootRef:we,portalRef:ke,isTopModal:Ie}=Sq(K({},re,{rootRef:r,children:null})),qe=QX(re),Re=K({},X,{component:Q,slots:V,slotProps:F}),Se=wa(),Fe=wa(),Ce=z.useMemo(()=>({variant:$,color:R,labelledBy:Se,describedBy:Fe}),[R,$,Se,Fe]),[Ne,Je]=Nt("root",{ref:we,className:qe.root,elementType:eJ,externalForwardedProps:Re,getSlotProps:ye,ownerState:re}),[at,st]=Nt("backdrop",{className:qe.backdrop,elementType:tJ,externalForwardedProps:Re,getSlotProps:me,ownerState:re}),[Dt,Ct]=Nt("content",{className:qe.content,elementType:rJ,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Se,"aria-describedby":Fe},externalForwardedProps:Re,ownerState:re});return N.jsx(M$.Provider,{value:O,children:N.jsx(gI.Provider,{value:D,children:N.jsx(iw.Provider,{value:Ce,children:N.jsx(W4,{ref:ke,container:u,disablePortal:w,children:N.jsxs(Ne,K({},Je,{children:[P?null:N.jsx(at,K({},st)),N.jsx(zU,{disableEnforceFocus:p,disableAutoFocus:a,disableRestoreFocus:C,isEnabled:Ie,open:L,children:N.jsx(Dt,K({},Ct,{children:i}))})]}))})})})})});function nJ(e){return en("MuiListDivider",e)}Jr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const iJ=["component","role","className","children","inset","orientation","slots","slotProps"],oJ=e=>{const{orientation:t,inset:r}=e,n={root:["root",t,r&&r!=="context"&&`inset${bt(r)}`]};return qr(n,nJ,{})},aJ=ft(I$,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&K({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&K({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),ow=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyListDivider"}),i=z.useContext(cd),o=z.useContext(pI),{component:u,role:a,className:p,children:m,inset:w="context",orientation:C,slots:T={},slotProps:P={}}=n,R=Gt(n,iJ),[$]=(o==null?void 0:o.split(":"))||["",""],H=u||($&&!$.match(/^(ul|ol|menu)$/)?"div":"li"),D=a||(H==="li"?"separator":void 0),O=C||(i?"vertical":"horizontal"),L=K({},n,{inset:w,row:i,orientation:O,component:H,role:D}),Q=oJ(L),V=K({},R,{component:H,slots:T,slotProps:P}),[F,X]=Nt("root",{ref:r,className:ei(Q.root,p),elementType:aJ,externalForwardedProps:V,ownerState:L,additionalProps:K({as:H,role:D},D==="separator"&&O==="vertical"&&{"aria-orientation":"vertical"})});return N.jsx(F,K({},X,{children:m}))});function sJ(e){return en("MuiListItemContent",e)}Jr("MuiListItemContent",["root"]);const lJ=["component","className","children","slots","slotProps"],cJ=()=>qr({root:["root"]},sJ,{}),uJ=ft("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),hJ=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyListItemContent"}),{component:i,className:o,children:u,slots:a={},slotProps:p={}}=n,m=Gt(n,lJ),w=K({},n),C=cJ(),T=K({},m,{component:i,slots:a,slotProps:p}),[P,R]=Nt("root",{ref:r,className:ei(C.root,o),elementType:uJ,externalForwardedProps:T,ownerState:w});return N.jsx(P,K({},R,{children:u}))});function dJ(e){return en("MuiListItemDecorator",e)}Jr("MuiListItemDecorator",["root"]);const fJ=["component","className","children","slots","slotProps"],pJ=()=>qr({root:["root"]},dJ,{}),mJ=ft("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),c1=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyListItemDecorator"}),{component:i,className:o,children:u,slots:a={},slotProps:p={}}=n,m=Gt(n,fJ),w=z.useContext(Xb),C=K({parentOrientation:w},n),T=pJ(),P=K({},m,{component:i,slots:a,slotProps:p}),[R,$]=Nt("root",{ref:r,className:ei(T.root,o),elementType:mJ,externalForwardedProps:P,ownerState:C});return N.jsx(R,K({},$,{children:u}))});function gJ(e){return en("MuiMenu",e)}Jr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const vJ=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],yJ=e=>{const{open:t,variant:r,color:n,size:i}=e,o={root:["root",t&&"expanded",r&&`variant${bt(r)}`,n&&`color${bt(n)}`,i&&`size${bt(i)}`],listbox:["listbox"]};return qr(o,gJ,{})},c5=ft(Cy,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;const i=(r=e.variants[t.variant])==null?void 0:r[t.color];return[K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Kb,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(i!=null&&i.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&Jb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Yb(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color])]}),_J=z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyMenu"}),{actions:o,children:u,color:a="neutral",component:p,disablePortal:m=!1,keepMounted:w=!1,id:C,invertedColors:T=!1,onItemsChange:P,modifiers:R,variant:$="outlined",size:H="md",slots:D={},slotProps:O={}}=i,L=Gt(i,vJ),{contextValue:Q,getListboxProps:V,dispatch:F,open:X,triggerElement:re}=iH({onItemsChange:P,id:C,listboxRef:r});z.useImperativeHandle(o,()=>({dispatch:F,resetHighlight:()=>F({type:Pn.resetHighlight,event:null})}),[F]);const ye=K({},i,{disablePortal:m,invertedColors:T,color:a,variant:$,size:H,open:X,nesting:!1,row:!1}),me=yJ(ye),we=K({},L,{component:p,slots:D,slotProps:O}),ke=z.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...R||[]],[R]),Ie=LL({elementType:c5,getSlotProps:V,externalForwardedProps:we,externalSlotProps:{},ownerState:ye,additionalProps:{anchorEl:re,open:X&&re!==null,disablePortal:m,keepMounted:w,modifiers:ke},className:me.root});return N.jsx(c5,K({},Ie,!((n=i.slots)!=null&&n.root)&&{as:qb,slots:{root:p||"ul"}},{children:N.jsx(oH,{value:Q,children:N.jsx(ew,{variant:T?void 0:$,color:a,children:N.jsx(Zb.Provider,{value:"menu",children:N.jsx(Sy,{nested:!0,children:u})})})})}))});function xJ(e){return en("MuiMenuButton",e)}Jr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const bJ=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],wJ=e=>{const{color:t,disabled:r,fullWidth:n,size:i,variant:o,loading:u}=e,a={root:["root",r&&"disabled",n&&"fullWidth",o&&`variant${bt(o)}`,t&&`color${bt(t)}`,i&&`size${bt(i)}`,u&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return qr(a,xJ,{})},SJ=ft("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(w$),CJ=ft("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),TJ=ft("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),kJ=ft("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,n;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color})}),EJ=z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyMenuButton"}),{children:o,color:u="neutral",component:a,disabled:p=!1,endDecorator:m,loading:w=!1,loadingPosition:C="center",loadingIndicator:T,size:P="md",slotProps:R={},slots:$={},startDecorator:H,variant:D="outlined"}=i,O=Gt(i,bJ),L=z.useContext(tw),Q=t.variant||L.variant||D,V=t.size||L.size||P,F=(n=t.disabled)!=null?n:L.disabled||p||w,{getRootProps:X,open:re,active:ye}=uq({rootRef:r,disabled:F}),me=T??N.jsx(rw,{color:u,thickness:{sm:2,md:3,lg:4}[V]||3}),we=K({},i,{active:ye,color:u,disabled:F,open:re,size:V,variant:Q}),ke=wJ(we),Ie=K({},O,{component:a,slots:$,slotProps:R}),[qe,Re]=Nt("root",{elementType:SJ,getSlotProps:X,externalForwardedProps:Ie,ref:r,ownerState:we,className:ke.root}),[Se,Fe]=Nt("startDecorator",{className:ke.startDecorator,elementType:CJ,externalForwardedProps:Ie,ownerState:we}),[Ce,Ne]=Nt("endDecorator",{className:ke.endDecorator,elementType:TJ,externalForwardedProps:Ie,ownerState:we}),[Je,at]=Nt("loadingIndicatorCenter",{className:ke.loadingIndicatorCenter,elementType:kJ,externalForwardedProps:Ie,ownerState:we});return N.jsxs(qe,K({},Re,{children:[(H||w&&C==="start")&&N.jsx(Se,K({},Fe,{children:w&&C==="start"?me:H})),o,w&&C==="center"&&N.jsx(Je,K({},at,{children:me})),(m||w&&C==="end")&&N.jsx(Ce,K({},Ne,{children:w&&C==="end"?me:m}))]}))});function IJ(e){return en("MuiMenuItem",e)}Jr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const MJ=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],PJ=e=>{const{focusVisible:t,disabled:r,selected:n,color:i,variant:o}=e,u={root:["root",t&&"focusVisible",r&&"disabled",n&&"selected",i&&`color${bt(i)}`,o&&`variant${bt(o)}`]};return qr(u,IJ,{})},AJ=ft(Ty,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),RJ=z.memo(z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyMenuItem"}),i=z.useContext(cd),{children:o,disabled:u=!1,component:a="li",selected:p=!1,color:m="neutral",orientation:w="horizontal",variant:C="plain",slots:T={},slotProps:P={},id:R}=n,$=Gt(n,MJ),{variant:H=C,color:D=m}=Qb(t.variant,t.color),{getRootProps:O,disabled:L,focusVisible:Q}=fq({id:R,disabled:u,rootRef:r}),V=K({},n,{component:a,color:D,disabled:L,focusVisible:Q,orientation:w,selected:p,row:i,variant:H}),F=PJ(V),X=K({},$,{component:a,slots:T,slotProps:P}),[re,ye]=Nt("root",{ref:r,elementType:AJ,getSlotProps:O,externalForwardedProps:X,className:F.root,ownerState:V});return N.jsx(Xb.Provider,{value:w,children:N.jsx(re,K({},ye,{children:o}))})})),mS=z.forwardRef(function(t,r){const{contextValue:n,id:i}=pq(t.id);return N.jsx(Uu.Provider,{value:n,children:N.jsx(RJ,K({},t,{id:i,ref:r}))})});function DJ(e){return en("MuiModalClose",e)}Jr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var u5;const zJ=["component","color","variant","size","onClick","slots","slotProps"],LJ=e=>{const{variant:t,color:r,disabled:n,focusVisible:i,size:o}=e,u={root:["root",n&&"disabled",i&&"focusVisible",t&&`variant${bt(t)}`,r&&`color${bt(r)}`,o&&`size${bt(o)}`]};return qr(u,DJ,{})},OJ=ft(ky,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r;return K({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((r=t.variants[e.variant])!=null&&(r=r[e.color])!=null&&r.backgroundColor)&&{color:t.vars.palette.text.secondary})}),$J={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},D$=z.forwardRef(function(t,r){var n,i,o,u,a,p;const m=tn({props:t,name:"JoyModalClose"}),{component:w="button",color:C="neutral",variant:T="plain",size:P="md",onClick:R,slots:$={},slotProps:H={}}=m,D=Gt(m,zJ),O=z.useContext(M$),L=z.useContext(iw),Q=(n=(i=t.variant)!=null?i:$J[L==null?void 0:L.variant])!=null?n:T,V=(o=(u=t.color)!=null?u:L==null?void 0:L.color)!=null?o:C,F=z.useContext(gI),X=(a=(p=t.size)!=null?p:F)!=null?a:P,{focusVisible:re,getRootProps:ye}=ol(K({},m,{rootRef:r})),me=K({},m,{color:V,component:w,variant:Q,size:X,focusVisible:re}),we=LJ(me),[ke,Ie]=Nt("root",{ref:r,elementType:OJ,getSlotProps:ye,externalForwardedProps:K({onClick:qe=>{O==null||O(qe,"closeClick"),R==null||R(qe)}},D,{component:w,slots:$,slotProps:H}),className:we.root,ownerState:me});return N.jsx(ke,K({},Ie,{children:u5||(u5=N.jsx(h$,{}))}))});function BJ(e){return en("MuiOption",e)}const FJ=Jr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),NJ=["component","children","disabled","value","label","variant","color","slots","slotProps"],jJ=e=>{const{disabled:t,highlighted:r,selected:n}=e;return qr({root:["root",t&&"disabled",r&&"highlighted",n&&"selected"]},BJ,{})},VJ=ft(Ty,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[`${t.variant}Hover`])==null?void 0:r[t.color];return{[`&.${FJ.highlighted}:not([aria-selected="true"])`]:{backgroundColor:n==null?void 0:n.backgroundColor}}}),UJ=z.memo(z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyOption"}),{component:o="li",children:u,disabled:a=!1,value:p,label:m,variant:w="plain",color:C="neutral",slots:T={},slotProps:P={}}=i,R=Gt(i,NJ),$=z.useContext(cd),{variant:H=w,color:D=C}=Qb(t.variant,t.color),O=z.useRef(null),L=fn(O,r),Q=m??(typeof u=="string"?u:(n=O.current)==null?void 0:n.innerText),{getRootProps:V,selected:F,highlighted:X,index:re}=Cq({disabled:a,label:Q,value:p,rootRef:L}),ye=K({},i,{disabled:a,selected:F,highlighted:X,index:re,component:o,variant:H,color:D,row:$}),me=jJ(ye),we=K({},R,{component:o,slots:T,slotProps:P}),[ke,Ie]=Nt("root",{ref:r,getSlotProps:V,elementType:VJ,externalForwardedProps:we,className:me.root,ownerState:ye});return N.jsx(ke,K({},Ie,{children:u}))})),HJ=z.forwardRef(function(t,r){const{contextValue:n}=Tq(t.value);return N.jsx(Uu.Provider,{value:n,children:N.jsx(UJ,K({},t,{ref:r}))})}),GJ=Up(N.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function qJ(e){return en("MuiSelect",e)}const ip=Jr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var h5;const WJ=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function ZJ(e){var t;return Array.isArray(e)?N.jsx(z.Fragment,{children:e.map(r=>r.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const KJ=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],XJ=e=>{const{color:t,disabled:r,focusVisible:n,size:i,variant:o,open:u,multiple:a}=e,p={root:["root",r&&"disabled",n&&"focusVisible",u&&"expanded",o&&`variant${bt(o)}`,t&&`color${bt(t)}`,i&&`size${bt(i)}`,a&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",u&&"expanded"],listbox:["listbox",u&&"expanded",r&&"disabled"]};return qr(p,qJ,{})},JJ=ft("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n,i,o,u;const a=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color],{borderRadius:p}=ud({theme:e,ownerState:t},["borderRadius"]);return[K({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(n=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:n[500],'&:not([data-inverted-colors="false"])':K({},t.instanceColor&&{"--_Select-focusedHighlight":(i=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:i[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":a!=null&&a.backgroundColor?a==null?void 0:a.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(a!=null&&a.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],a,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${ip.focusVisible}`]:{"--Select-indicatorColor":a==null?void 0:a.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${ip.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color],[`&.${ip.disabled}`]:(u=e.variants[`${t.variant}Disabled`])==null?void 0:u[t.color]},p!==void 0&&{"--Select-radius":p}]}),YJ=ft("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>K({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),QJ=ft(Cy,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(n==null?void 0:n.backgroundColor)||(n==null?void 0:n.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Kb,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(n!=null&&n.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),eY=ft("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),tY=ft("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),rY=ft("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${ip.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${ip.expanded}, .${ip.disabled} > &`]:{"--Icon-color":"currentColor"}})),nY=z.forwardRef(function(t,r){var n,i,o,u,a,p,m;const w=tn({props:t,name:"JoySelect"}),C=w,{action:T,autoFocus:P,children:R,defaultValue:$,defaultListboxOpen:H=!1,disabled:D,getSerializedValue:O,placeholder:L,listboxId:Q,listboxOpen:V,onChange:F,onListboxOpenChange:X,onClose:re,renderValue:ye,required:me=!1,value:we,size:ke="md",variant:Ie="outlined",color:qe="neutral",startDecorator:Re,endDecorator:Se,indicator:Fe=h5||(h5=N.jsx(GJ,{})),"aria-describedby":Ce,"aria-label":Ne,"aria-labelledby":Je,id:at,name:st,multiple:Dt=!1,slots:Ct={},slotProps:Bt={}}=C,Tt=Gt(C,WJ),it=z.useContext(nw),Ze=(n=(i=t.disabled)!=null?i:it==null?void 0:it.disabled)!=null?n:D,rt=(o=(u=t.size)!=null?u:it==null?void 0:it.size)!=null?o:ke,pt=(a=t.color)!=null?a:it!=null&&it.error?"danger":(p=it==null?void 0:it.color)!=null?p:qe,ur=ye??ZJ,[or,Er]=z.useState(null),jr=z.useRef(null),ar=z.useRef(null),It=fn(r,jr);z.useImperativeHandle(T,()=>({focusVisible:()=>{var ee;(ee=ar.current)==null||ee.focus()}}),[]),z.useEffect(()=>{Er(jr.current)},[]),z.useEffect(()=>{P&&ar.current.focus()},[P]);const gr=z.useCallback(ee=>{X==null||X(ee),ee||re==null||re()},[re,X]),{buttonActive:Wt,buttonFocusVisible:Br,contextValue:He,disabled:Cr,getButtonProps:Rr,getListboxProps:tr,getHiddenInputProps:lr,getOptionMetadata:Pr,open:Fr,value:Ir}=UW({buttonRef:ar,defaultOpen:H,defaultValue:$,disabled:Ze,getSerializedValue:O,listboxId:Q,multiple:Dt,name:st,required:me,onChange:F,onOpenChange:gr,open:V,value:we}),vr=K({},w,{active:Wt,defaultListboxOpen:H,disabled:Cr,focusVisible:Br,open:Fr,renderValue:ur,value:Ir,size:rt,variant:Ie,color:pt}),rr=XJ(vr),mr=K({},Tt,{slots:Ct,slotProps:Bt}),ln=z.useMemo(()=>{let ee;if(Dt)ee=Ir.map(J=>Pr(J)).filter(J=>J!==void 0);else{var U;ee=(U=Pr(Ir))!=null?U:null}return ee},[Pr,Ir,Dt]),[je,kt]=Nt("root",{ref:It,className:rr.root,elementType:JJ,externalForwardedProps:mr,ownerState:vr}),[wt,Ee]=Nt("button",{additionalProps:{"aria-describedby":Ce??(it==null?void 0:it["aria-describedby"]),"aria-label":Ne,"aria-labelledby":Je??(it==null?void 0:it.labelId),"aria-required":me?"true":void 0,id:at??(it==null?void 0:it.htmlFor),name:st},className:rr.button,elementType:YJ,externalForwardedProps:mr,getSlotProps:Rr,ownerState:vr}),[Ve,Xe]=Nt("listbox",{additionalProps:{anchorEl:or,open:Fr,placement:"bottom",keepMounted:!0},className:rr.listbox,elementType:QJ,externalForwardedProps:mr,getSlotProps:tr,ownerState:K({},vr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:ee=>({size:ee.size||rt,variant:ee.variant||Ie,color:ee.color||(ee.disablePortal?pt:qe),disableColorInversion:!ee.disablePortal})}),[Et,vt]=Nt("startDecorator",{className:rr.startDecorator,elementType:eY,externalForwardedProps:mr,ownerState:vr}),[Rt,br]=Nt("endDecorator",{className:rr.endDecorator,elementType:tY,externalForwardedProps:mr,ownerState:vr}),[Ft,_r]=Nt("indicator",{className:rr.indicator,elementType:rY,externalForwardedProps:mr,ownerState:vr}),ue=z.useMemo(()=>[...KJ,...Xe.modifiers||[]],[Xe.modifiers]);let Y=L;return(Array.isArray(ln)&&ln.length>0||!Array.isArray(ln)&&ln)&&(Y=ur(ln)),N.jsxs(z.Fragment,{children:[N.jsxs(je,K({},kt,{children:[Re&&N.jsx(Et,K({},vt,{children:Re})),N.jsx(wt,K({},Ee,{children:Y})),Se&&N.jsx(Rt,K({},br,{children:Se})),Fe&&N.jsx(Ft,K({},_r,{children:Fe})),N.jsx("input",K({},lr()))]})),or&&N.jsx(Ve,K({},Xe,{className:ei(Xe.className),modifiers:ue},!((m=w.slots)!=null&&m.listbox)&&{as:qb,slots:{root:Xe.as||"ul"}},{children:N.jsx(HW,{value:He,children:N.jsx(ew,{variant:Ie,color:qe,children:N.jsx(Zb.Provider,{value:"select",children:N.jsx(Sy,{nested:!0,children:R})})})})}))]})});function iY(e){return en("MuiSheet",e)}Jr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const oY=["className","color","component","variant","invertedColors","slots","slotProps"],aY=e=>{const{variant:t,color:r}=e,n={root:["root",t&&`variant${bt(t)}`,r&&`color${bt(r)}`]};return qr(n,iY,{})},sY=ft("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;const i=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:o,bgcolor:u,backgroundColor:a,background:p}=ud({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),m=Pu(e,`palette.${u}`)||u||Pu(e,`palette.${a}`)||a||p||(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||e.vars.palette.background.surface;return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":m==="transparent"?"initial":m,"--Sheet-background":m==="transparent"?"initial":m},o!==void 0&&{"--List-radius":`calc(${o} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${o} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),K({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&Jb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Yb(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color],i)]}),aw=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoySheet"}),{className:i,color:o="neutral",component:u="div",variant:a="plain",invertedColors:p=!1,slots:m={},slotProps:w={}}=n,C=Gt(n,oY),T=K({},n,{color:o,component:u,invertedColors:p,variant:a}),P=aY(T),R=K({},C,{component:u,slots:m,slotProps:w}),[$,H]=Nt("root",{ref:r,className:ei(P.root,i),elementType:sY,externalForwardedProps:R,ownerState:T});return N.jsx($,K({},H))}),Mi=sU({createStyledComponent:ft("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>tn({props:e,name:"JoyStack"})});function lY(e){return en("MuiTab",e)}const cY=Jr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),uY=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],hY=e=>{const{selected:t,disabled:r,focusVisible:n,variant:i,color:o,orientation:u}=e,a={root:["root",u,r&&"disabled",n&&"focusVisible",t&&"selected",i&&`variant${bt(i)}`,o&&`color${bt(o)}`]};return qr(a,lY,{})},dY=ft(Ty,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),gS=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyTab"}),i=z.useContext(cd),{action:o,children:u,disabled:a=!1,component:p="button",orientation:m="horizontal",variant:w="plain",color:C="neutral",disableIndicator:T=!1,indicatorPlacement:P=i?"bottom":"right",indicatorInset:R=!1,slots:$={},slotProps:H={}}=n,D=Gt(n,uY),O=z.useRef(null),L=fn(O,r),{active:Q,focusVisible:V,setFocusVisible:F,selected:X,getRootProps:re}=eZ(K({},n,{rootRef:L}));z.useImperativeHandle(o,()=>({focusVisible:()=>{F(!0),O.current.focus()}}),[F]);const ye=K({},n,{disableIndicator:T,indicatorPlacement:P,indicatorInset:R,orientation:m,row:i,active:Q,focusVisible:V,disabled:a,selected:X,variant:w,color:C}),me=hY(ye),we=K({},D,{component:p,slots:$,slotProps:H}),[ke,Ie]=Nt("root",{ref:r,elementType:dY,getSlotProps:re,externalForwardedProps:we,ownerState:ye,className:me.root});return N.jsx(Xb.Provider,{value:m,children:N.jsx(ke,K({},Ie,{children:u}))})}),vI=z.createContext("md");function fY(e){return en("MuiTabList",e)}Jr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const pY=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],mY=e=>{const{orientation:t,size:r,variant:n,color:i}=e,o={root:["root",t,n&&`variant${bt(n)}`,i&&`color${bt(i)}`,r&&`size${bt(r)}`]};return qr(o,fY,{})},gY=ft(Cy,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},Kb,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(n==null?void 0:n.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&K({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${cY.root}`]:{flex:t.tabFlex}})}),vY=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyTabList"}),i=z.useContext(vI),{isRtl:o,orientation:u,getRootProps:a,contextValue:p}=JW({rootRef:r}),{component:m="div",children:w,variant:C="plain",color:T="neutral",size:P,disableUnderline:R=!1,underlinePlacement:$=u==="horizontal"?"bottom":"right",tabFlex:H,sticky:D,slots:O={},slotProps:L={}}=n,Q=Gt(n,pY),F=K({},n,{isRtl:o,orientation:u,variant:C,color:T,size:P??i,sticky:D,tabFlex:H,nesting:!1,disableUnderline:R,underlinePlacement:$}),X=mY(F),re=K({},Q,{component:m,slots:O,slotProps:L}),[ye,me]=Nt("root",{ref:r,elementType:gY,getSlotProps:a,externalForwardedProps:re,ownerState:F,className:X.root});return N.jsx(ye,K({},me,{children:N.jsx(YW,{value:p,children:N.jsx(Sy,{row:u==="horizontal",nested:!0,children:w})})}))});function yY(e){return en("MuiTabPanel",e)}Jr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const _Y=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],xY=e=>{const{hidden:t,size:r,variant:n,color:i,orientation:o}=e,u={root:["root",t&&"hidden",r&&`size${bt(r)}`,o,n&&`variant${bt(n)}`,i&&`color${bt(i)}`,r&&`size${bt(r)}`]};return qr(u,yY,{})},bY=ft("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),vS=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyTabPanel"}),{orientation:i}=Wb()||{orientation:"horizontal"},o=z.useContext(vI),{children:u,value:a=0,component:p,color:m="neutral",variant:w="plain",size:C,slots:T={},slotProps:P={},keepMounted:R=!1}=n,$=Gt(n,_Y),{hidden:H,getRootProps:D}=KW(K({},n,{value:a})),L=K({},n,{orientation:i,hidden:H,size:C??o,color:m,variant:w}),Q=xY(L),V=K({},$,{component:p,slots:T,slotProps:P}),[F,X]=Nt("root",{ref:r,elementType:bY,getSlotProps:D,externalForwardedProps:V,additionalProps:{role:"tabpanel",ref:r,as:p},ownerState:L,className:Q.root});return R?N.jsx(F,K({},X,{children:u})):N.jsx(F,K({},X,{children:!H&&u}))});function wY(e){return en("MuiTabs",e)}Jr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const SY=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],CY=e=>{const{orientation:t,variant:r,color:n,size:i}=e,o={root:["root",t,r&&`variant${bt(r)}`,n&&`color${bt(n)}`,i&&`size${bt(i)}`]};return qr(o,wY,{})},TY=ft("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n;const i=(r=t.variants[e.variant])==null?void 0:r[e.color],{bgcolor:o,backgroundColor:u,background:a,p,padding:m}=ud({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),w=Pu(t,`palette.${o}`)||o||Pu(t,`palette.${u}`)||u||a||(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||t.vars.palette.background.surface;return K({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":w==="transparent"?"initial":w,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(n=t.variants[e.variant])==null?void 0:n[e.color],p!==void 0&&{"--Tabs-padding":p},m!==void 0&&{"--Tabs-padding":m})}),d5=z.forwardRef(function(t,r){const n=tn({props:t,name:"JoyTabs"}),{children:i,value:o,defaultValue:u,orientation:a="horizontal",direction:p="ltr",component:m,variant:w="plain",color:C="neutral",size:T="md",slots:P={},slotProps:R={}}=n,$=Gt(n,SY),H=u||(o===void 0?0:void 0),{contextValue:D}=qW(K({},n,{orientation:a,defaultValue:H})),O=K({},n,{orientation:a,direction:p,variant:w,color:C,size:T}),L=CY(O),Q=K({},$,{component:m,slots:P,slotProps:R}),[V,F]=Nt("root",{ref:r,elementType:TY,externalForwardedProps:Q,additionalProps:{ref:r,as:m},ownerState:O,className:L.root});return N.jsx(V,K({},F,{children:N.jsx(WW,{value:D,children:N.jsx(vI.Provider,{value:T,children:i})})}))});function kY(e){return en("MuiTooltip",e)}Jr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const EY=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],IY=e=>{const{arrow:t,variant:r,color:n,size:i,placement:o,touch:u}=e,a={root:["root",t&&"tooltipArrow",u&&"touch",i&&`size${bt(i)}`,n&&`color${bt(n)}`,r&&`variant${bt(r)}`,`tooltipPlacement${bt(o.split("-")[0])}`],arrow:["arrow"]};return qr(a,kY,{})},MY=ft("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n,i;const o=(r=t.variants[e.variant])==null?void 0:r[e.color];return K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],o,!o.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(n=e.placement)!=null&&n.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(i=e.placement)!=null&&i.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),PY=ft("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var r,n,i;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(n=o==null?void 0:o.backgroundColor)!=null?n:e.vars.palette.background.surface,borderRightColor:(i=o==null?void 0:o.backgroundColor)!=null?i:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${o.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let I_=!1;const f5=new py;let fg={x:0,y:0};function p5(e,t){return r=>{t&&t(r),e(r)}}function m5(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const AY=z.forwardRef(function(t,r){var n;const i=tn({props:t,name:"JoyTooltip"}),{children:o,className:u,component:a,arrow:p=!1,describeChild:m=!1,disableFocusListener:w=!1,disableHoverListener:C=!1,disableInteractive:T=!1,disableTouchListener:P=!1,enterDelay:R=100,enterNextDelay:$=0,enterTouchDelay:H=700,followCursor:D=!1,id:O,leaveDelay:L=0,leaveTouchDelay:Q=1500,onClose:V,onOpen:F,open:X,disablePortal:re,direction:ye,keepMounted:me,modifiers:we,placement:ke="bottom",title:Ie,color:qe="neutral",variant:Re="solid",size:Se="md",slots:Fe={},slotProps:Ce={}}=i,Ne=Gt(i,EY),[Je,at]=z.useState(),[st,Dt]=z.useState(null),Ct=z.useRef(!1),Bt=T||D,Tt=Tg(),it=Tg(),Ze=Tg(),rt=Tg(),[pt,ur]=Jf({controlled:X,default:!1,name:"Tooltip",state:"open"});let or=pt;const Er=wa(O),jr=z.useRef(void 0),ar=gu(()=>{jr.current!==void 0&&(document.body.style.WebkitUserSelect=jr.current,jr.current=void 0),rt.clear()});z.useEffect(()=>ar,[ar]);const It=U=>{f5.clear(),I_=!0,ur(!0),F&&!or&&F(U)},gr=gu(U=>{f5.start(800+L,()=>{I_=!1}),ur(!1),V&&or&&V(U),Tt.start(150,()=>{Ct.current=!1})}),Wt=U=>{Ct.current&&U.type!=="touchstart"||(Je&&Je.removeAttribute("title"),it.clear(),Ze.clear(),R||I_&&$?it.start(I_?$:R,()=>{It(U)}):It(U))},Br=U=>{it.clear(),Ze.start(L,()=>{gr(U)})},{isFocusVisibleRef:He,onBlur:Cr,onFocus:Rr,ref:tr}=lE(),[,lr]=z.useState(!1),Pr=U=>{Cr(U),He.current===!1&&(lr(!1),Br(U))},Fr=U=>{Je||at(U.currentTarget),Rr(U),He.current===!0&&(lr(!0),Wt(U))},Ir=U=>{Ct.current=!0;const J=o.props;J.onTouchStart&&J.onTouchStart(U)},vr=U=>{Ir(U),Ze.clear(),Tt.clear(),ar(),jr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",rt.start(H,()=>{document.body.style.WebkitUserSelect=jr.current,Wt(U)})},rr=U=>{o.props.onTouchEnd&&o.props.onTouchEnd(U),ar(),Ze.start(Q,()=>{gr(U)})};z.useEffect(()=>{if(!or)return;function U(J){(J.key==="Escape"||J.key==="Esc")&&gr(J)}return document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}},[gr,or]);const mr=fn(at,r),ln=fn(tr,mr),je=fn(my(o),ln);typeof Ie!="number"&&!Ie&&(or=!1);const kt=z.useRef(null),wt=U=>{const J=o.props;J.onMouseMove&&J.onMouseMove(U),fg={x:U.clientX,y:U.clientY},kt.current&&kt.current.update()},Ee={},Ve=typeof Ie=="string";m?(Ee.title=!or&&Ve&&!C?Ie:null,Ee["aria-describedby"]=or?Er:null):(Ee["aria-label"]=Ve?Ie:null,Ee["aria-labelledby"]=or&&!Ve?Er:null);const Xe=K({},Ee,Ne,{component:a},o.props,{className:ei(u,o.props.className),onTouchStart:Ir,ref:je},D?{onMouseMove:wt}:{}),Et={};P||(Xe.onTouchStart=vr,Xe.onTouchEnd=rr),C||(Xe.onMouseOver=p5(Wt,Xe.onMouseOver),Xe.onMouseLeave=p5(Br,Xe.onMouseLeave),Bt||(Et.onMouseOver=Wt,Et.onMouseLeave=Br)),w||(Xe.onFocus=m5(Fr,Xe.onFocus),Xe.onBlur=m5(Pr,Xe.onBlur),Bt||(Et.onFocus=Fr,Et.onBlur=Pr));const vt=K({},i,{arrow:p,disableInteractive:Bt,placement:ke,touch:Ct.current,color:qe,variant:Re,size:Se}),Rt=IY(vt),br=K({},Ne,{component:a,slots:Fe,slotProps:Ce}),Ft=z.useMemo(()=>[{name:"arrow",enabled:!!st,options:{element:st,padding:6}},{name:"offset",options:{offset:[0,10]}},...we||[]],[st,we]),[_r,ue]=Nt("root",{additionalProps:K({id:Er,popperRef:kt,placement:ke,anchorEl:D?{getBoundingClientRect:()=>({top:fg.y,left:fg.x,right:fg.x,bottom:fg.y,width:0,height:0})}:Je,open:Je?or:!1,disablePortal:re,keepMounted:me,direction:ye,modifiers:Ft},Et),ref:null,className:Rt.root,elementType:MY,externalForwardedProps:br,ownerState:vt}),[Y,ee]=Nt("arrow",{ref:Dt,className:Rt.arrow,elementType:PY,externalForwardedProps:br,ownerState:vt});return N.jsxs(z.Fragment,{children:[z.isValidElement(o)&&z.cloneElement(o,Xe),N.jsxs(_r,K({},ue,!((n=i.slots)!=null&&n.root)&&{as:qb,slots:{root:a||"div"}},{children:[Ie,p?N.jsx(Y,K({},ee)):null]}))]})}),sw="$$material";function RY(e,t){return K({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Ai={},z$={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(z$);var L$=z$.exports;const DY=Oc(Fj),zY=Oc(d7);var O$=L$;Object.defineProperty(Ai,"__esModule",{value:!0});Ai.alpha=N$;Ai.blend=ZY;Ai.colorChannel=void 0;var LY=Ai.darken=_I;Ai.decomposeColor=Ss;Ai.emphasize=j$;var OY=Ai.getContrastRatio=UY;Ai.getLuminance=cx;Ai.hexToRgb=$$;var $Y=Ai.hslToRgb=F$,BY=Ai.lighten=xI,M_=Ai.private_safeAlpha=HY,Bf=Ai.private_safeColorChannel=void 0,Dn=Ai.private_safeDarken=GY,P_=Ai.private_safeEmphasize=WY,zn=Ai.private_safeLighten=qY;Ai.recomposeColor=Hp;Ai.rgbToHex=VY;var g5=O$(DY),FY=O$(zY);function yI(e,t=0,r=1){return(0,FY.default)(e,t,r)}function $$(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function NY(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Ss(e){if(e.type)return e;if(e.charAt(0)==="#")return Ss($$(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,g5.default)(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,g5.default)(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const B$=e=>{const t=Ss(e);return t.values.slice(0,3).map((r,n)=>t.type.indexOf("hsl")!==-1&&n!==0?`${r}%`:r).join(" ")};Ai.colorChannel=B$;const jY=(e,t)=>{try{return B$(e)}catch{return e}};Bf=Ai.private_safeColorChannel=jY;function Hp(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function VY(e){if(e.indexOf("#")===0)return e;const{values:t}=Ss(e);return`#${t.map((r,n)=>NY(n===3?Math.round(255*r):r)).join("")}`}function F$(e){e=Ss(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),u=(m,w=(m+r/30)%12)=>i-o*Math.max(Math.min(w-3,9-w,1),-1);let a="rgb";const p=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return e.type==="hsla"&&(a+="a",p.push(t[3])),Hp({type:a,values:p})}function cx(e){e=Ss(e);let t=e.type==="hsl"||e.type==="hsla"?Ss(F$(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function UY(e,t){const r=cx(e),n=cx(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function N$(e,t){return e=Ss(e),t=yI(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Hp(e)}function HY(e,t,r){try{return N$(e,t)}catch{return e}}function _I(e,t){if(e=Ss(e),t=yI(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Hp(e)}function GY(e,t,r){try{return _I(e,t)}catch{return e}}function xI(e,t){if(e=Ss(e),t=yI(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Hp(e)}function qY(e,t,r){try{return xI(e,t)}catch{return e}}function j$(e,t=.15){return cx(e)>.5?_I(e,t):xI(e,t)}function WY(e,t,r){try{return j$(e,t)}catch{return e}}function ZY(e,t,r,n=1){const i=(p,m)=>Math.round((p**(1/n)*(1-r)+m**(1/n)*r)**n),o=Ss(e),u=Ss(t),a=[i(o.values[0],u.values[0]),i(o.values[1],u.values[1]),i(o.values[2],u.values[2])];return Hp({type:"rgb",values:a})}const Av={black:"#000",white:"#fff"},KY={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},sf={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lf={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},pg={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},cf={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},uf={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},hf={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},XY=["mode","contrastThreshold","tonalOffset"],v5={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Av.white,default:Av.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},yS={text:{primary:Av.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Av.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y5(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=BY(e.main,i):t==="dark"&&(e.dark=LY(e.main,o)))}function JY(e="light"){return e==="dark"?{main:cf[200],light:cf[50],dark:cf[400]}:{main:cf[700],light:cf[400],dark:cf[800]}}function YY(e="light"){return e==="dark"?{main:sf[200],light:sf[50],dark:sf[400]}:{main:sf[500],light:sf[300],dark:sf[700]}}function QY(e="light"){return e==="dark"?{main:lf[500],light:lf[300],dark:lf[700]}:{main:lf[700],light:lf[400],dark:lf[800]}}function eQ(e="light"){return e==="dark"?{main:uf[400],light:uf[300],dark:uf[700]}:{main:uf[700],light:uf[500],dark:uf[900]}}function tQ(e="light"){return e==="dark"?{main:hf[400],light:hf[300],dark:hf[700]}:{main:hf[800],light:hf[500],dark:hf[900]}}function rQ(e="light"){return e==="dark"?{main:pg[400],light:pg[300],dark:pg[700]}:{main:"#ed6c02",light:pg[500],dark:pg[900]}}function nQ(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,i=Gt(e,XY),o=e.primary||JY(t),u=e.secondary||YY(t),a=e.error||QY(t),p=e.info||eQ(t),m=e.success||tQ(t),w=e.warning||rQ(t);function C($){return OY($,yS.text.primary)>=r?yS.text.primary:v5.text.primary}const T=({color:$,name:H,mainShade:D=500,lightShade:O=300,darkShade:L=700})=>{if($=K({},$),!$.main&&$[D]&&($.main=$[D]),!$.hasOwnProperty("main"))throw new Error(kc(11,H?` (${H})`:"",D));if(typeof $.main!="string")throw new Error(kc(12,H?` (${H})`:"",JSON.stringify($.main)));return y5($,"light",O,n),y5($,"dark",L,n),$.contrastText||($.contrastText=C($.main)),$},P={dark:yS,light:v5};return Oi(K({common:K({},Av),mode:t,primary:T({color:o,name:"primary"}),secondary:T({color:u,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:a,name:"error"}),warning:T({color:w,name:"warning"}),info:T({color:p,name:"info"}),success:T({color:m,name:"success"}),grey:KY,contrastThreshold:r,getContrastText:C,augmentColor:T,tonalOffset:n},P[t]),i)}const iQ=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function oQ(e){return Math.round(e*1e5)/1e5}const _5={textTransform:"uppercase"},x5='"Roboto", "Helvetica", "Arial", sans-serif';function V$(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:n=x5,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:u=400,fontWeightMedium:a=500,fontWeightBold:p=700,htmlFontSize:m=16,allVariants:w,pxToRem:C}=r,T=Gt(r,iQ),P=i/14,R=C||(D=>`${D/m*P}rem`),$=(D,O,L,Q,V)=>K({fontFamily:n,fontWeight:D,fontSize:R(O),lineHeight:L},n===x5?{letterSpacing:`${oQ(Q/O)}em`}:{},V,w),H={h1:$(o,96,1.167,-1.5),h2:$(o,60,1.2,-.5),h3:$(u,48,1.167,0),h4:$(u,34,1.235,.25),h5:$(u,24,1.334,0),h6:$(a,20,1.6,.15),subtitle1:$(u,16,1.75,.15),subtitle2:$(a,14,1.57,.1),body1:$(u,16,1.5,.15),body2:$(u,14,1.43,.15),button:$(a,14,1.75,.4,_5),caption:$(u,12,1.66,.4),overline:$(u,12,2.66,1,_5),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Oi(K({htmlFontSize:m,pxToRem:R,fontFamily:n,fontSize:i,fontWeightLight:o,fontWeightRegular:u,fontWeightMedium:a,fontWeightBold:p},H),T,{clone:!1})}const aQ=.2,sQ=.14,lQ=.12;function Yn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${aQ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${sQ})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${lQ})`].join(",")}const cQ=["none",Yn(0,2,1,-1,0,1,1,0,0,1,3,0),Yn(0,3,1,-2,0,2,2,0,0,1,5,0),Yn(0,3,3,-2,0,3,4,0,0,1,8,0),Yn(0,2,4,-1,0,4,5,0,0,1,10,0),Yn(0,3,5,-1,0,5,8,0,0,1,14,0),Yn(0,3,5,-1,0,6,10,0,0,1,18,0),Yn(0,4,5,-2,0,7,10,1,0,2,16,1),Yn(0,5,5,-3,0,8,10,1,0,3,14,2),Yn(0,5,6,-3,0,9,12,1,0,3,16,2),Yn(0,6,6,-3,0,10,14,1,0,4,18,3),Yn(0,6,7,-4,0,11,15,1,0,4,20,3),Yn(0,7,8,-4,0,12,17,2,0,5,22,4),Yn(0,7,8,-4,0,13,19,2,0,5,24,4),Yn(0,7,9,-4,0,14,21,2,0,5,26,4),Yn(0,8,9,-5,0,15,22,2,0,6,28,5),Yn(0,8,10,-5,0,16,24,2,0,6,30,5),Yn(0,8,11,-5,0,17,26,2,0,6,32,5),Yn(0,9,11,-5,0,18,28,2,0,7,34,6),Yn(0,9,12,-6,0,19,29,2,0,7,36,6),Yn(0,10,13,-6,0,20,31,3,0,8,38,7),Yn(0,10,13,-6,0,21,33,3,0,8,40,7),Yn(0,10,14,-6,0,22,35,3,0,8,42,7),Yn(0,11,14,-7,0,23,36,3,0,9,44,8),Yn(0,11,15,-7,0,24,38,3,0,9,46,8)],uQ=["duration","easing","delay"],hQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},U$={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function b5(e){return`${Math.round(e)}ms`}function dQ(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function fQ(e){const t=K({},hQ,e.easing),r=K({},U$,e.duration);return K({getAutoHeightDuration:dQ,create:(i=["all"],o={})=>{const{duration:u=r.standard,easing:a=t.easeInOut,delay:p=0}=o;return Gt(o,uQ),(Array.isArray(i)?i:[i]).map(m=>`${m} ${typeof u=="string"?u:b5(u)} ${a} ${typeof p=="string"?p:b5(p)}`).join(",")}},e,{easing:t,duration:r})}const pQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},mQ=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function WT(e={},...t){const{mixins:r={},palette:n={},transitions:i={},typography:o={}}=e,u=Gt(e,mQ);if(e.vars)throw new Error(kc(18));const a=nQ(n),p=hy(e);let m=Oi(p,{mixins:RY(p.breakpoints,r),palette:a,shadows:cQ.slice(),typography:V$(a,o),transitions:fQ(i),zIndex:K({},pQ)});return m=Oi(m,u),m=t.reduce((w,C)=>Oi(w,C),m),m.unstable_sxConfig=K({},od,u==null?void 0:u.unstable_sxConfig),m.unstable_sx=function(C){return $c({sx:C,theme:this})},m}const H$=WT();function bI(){const e=ub(H$);return e[sw]||e}var Iy={},_S={exports:{}},w5;function gQ(){return w5||(w5=1,function(e){function t(r,n){if(r==null)return{};var i={};for(var o in r)if({}.hasOwnProperty.call(r,o)){if(n.includes(o))continue;i[o]=r[o]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_S)),_S.exports}const vQ=Oc(W9),yQ=Oc(Z9),_Q=Oc(eV),xQ=Oc(e7),bQ=Oc(NV),wQ=Oc(qV);var Gp=L$;Object.defineProperty(Iy,"__esModule",{value:!0});var SQ=Iy.default=OQ;Iy.shouldForwardProp=u1;Iy.systemDefaultTheme=void 0;var ss=Gp(fL()),ZT=Gp(gQ()),S5=PQ(vQ),CQ=yQ;Gp(_Q);Gp(xQ);var TQ=Gp(bQ),kQ=Gp(wQ);const EQ=["ownerState"],IQ=["variants"],MQ=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function G$(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(G$=function(n){return n?r:t})(e)}function PQ(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=G$(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function AQ(e){return Object.keys(e).length===0}function RQ(e){return typeof e=="string"&&e.charCodeAt(0)>96}function u1(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const DQ=Iy.systemDefaultTheme=(0,TQ.default)(),zQ=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function A_({defaultTheme:e,theme:t,themeId:r}){return AQ(t)?e:t[r]||t}function LQ(e){return e?(t,r)=>r[e]:null}function h1(e,t){let{ownerState:r}=t,n=(0,ZT.default)(t,EQ);const i=typeof e=="function"?e((0,ss.default)({ownerState:r},n)):e;if(Array.isArray(i))return i.flatMap(o=>h1(o,(0,ss.default)({ownerState:r},n)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=(0,ZT.default)(i,IQ);return o.forEach(p=>{let m=!0;typeof p.props=="function"?m=p.props((0,ss.default)({ownerState:r},n,r)):Object.keys(p.props).forEach(w=>{(r==null?void 0:r[w])!==p.props[w]&&n[w]!==p.props[w]&&(m=!1)}),m&&(Array.isArray(a)||(a=[a]),a.push(typeof p.style=="function"?p.style((0,ss.default)({ownerState:r},n,r)):p.style))}),a}return i}function OQ(e={}){const{themeId:t,defaultTheme:r=DQ,rootShouldForwardProp:n=u1,slotShouldForwardProp:i=u1}=e,o=u=>(0,kQ.default)((0,ss.default)({},u,{theme:A_((0,ss.default)({},u,{defaultTheme:r,themeId:t}))}));return o.__mui_systemSx=!0,(u,a={})=>{(0,S5.internal_processStyles)(u,V=>V.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:p,slot:m,skipVariantsResolver:w,skipSx:C,overridesResolver:T=LQ(zQ(m))}=a,P=(0,ZT.default)(a,MQ),R=w!==void 0?w:m&&m!=="Root"&&m!=="root"||!1,$=C||!1;let H,D=u1;m==="Root"||m==="root"?D=n:m?D=i:RQ(u)&&(D=void 0);const O=(0,S5.default)(u,(0,ss.default)({shouldForwardProp:D,label:H},P)),L=V=>typeof V=="function"&&V.__emotion_real!==V||(0,CQ.isPlainObject)(V)?F=>h1(V,(0,ss.default)({},F,{theme:A_({theme:F.theme,defaultTheme:r,themeId:t})})):V,Q=(V,...F)=>{let X=L(V);const re=F?F.map(L):[];p&&T&&re.push(we=>{const ke=A_((0,ss.default)({},we,{defaultTheme:r,themeId:t}));if(!ke.components||!ke.components[p]||!ke.components[p].styleOverrides)return null;const Ie=ke.components[p].styleOverrides,qe={};return Object.entries(Ie).forEach(([Re,Se])=>{qe[Re]=h1(Se,(0,ss.default)({},we,{theme:ke}))}),T(we,qe)}),p&&!R&&re.push(we=>{var ke;const Ie=A_((0,ss.default)({},we,{defaultTheme:r,themeId:t})),qe=Ie==null||(ke=Ie.components)==null||(ke=ke[p])==null?void 0:ke.variants;return h1({variants:qe},(0,ss.default)({},we,{theme:Ie}))}),$||re.push(o);const ye=re.length-F.length;if(Array.isArray(V)&&ye>0){const we=new Array(ye).fill("");X=[...V,...we],X.raw=[...V.raw,...we]}const me=O(X,...re);return u.muiName&&(me.muiName=u.muiName),me};return O.withConfig&&(Q.withConfig=O.withConfig),Q}}function $Q(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const BQ=e=>$Q(e)&&e!=="classes",lw=SQ({themeId:sw,defaultTheme:H$,rootShouldForwardProp:BQ});function FQ(e){var t;return!!e[0].match(/(cssVarPrefix|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const NQ=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},jQ=["colorSchemes","cssVarPrefix","shouldSkipGeneratingVar"],VQ=["palette"],UQ=[...Array(25)].map((e,t)=>{if(t===0)return;const r=NQ(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function HQ(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Qe(e,t,r){!e[t]&&r&&(e[t]=r)}function Pg(e){return!e||!e.startsWith("hsl")?e:$Y(e)}function cc(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Bf(Pg(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const _l=e=>{try{return e()}catch{}},GQ=(e="mui")=>Tb(e);function q$(e={},...t){var r,n,i,o,u,a;const{colorSchemes:p={},cssVarPrefix:m="mui",shouldSkipGeneratingVar:w=FQ}=e,C=Gt(e,jQ),T=GQ(m),P=WT(K({},C,p.light&&{palette:(r=p.light)==null?void 0:r.palette})),{palette:R}=P,$=Gt(P,VQ),{palette:H}=WT({palette:K({mode:"dark"},(n=p.dark)==null?void 0:n.palette)});let D=K({},$,{cssVarPrefix:m,getCssVar:T,colorSchemes:K({},p,{light:K({},p.light,{palette:R,opacity:K({inputPlaceholder:.42,inputUnderline:.42,switchTrackDisabled:.12,switchTrack:.38},(i=p.light)==null?void 0:i.opacity),overlays:((o=p.light)==null?void 0:o.overlays)||[]}),dark:K({},p.dark,{palette:H,opacity:K({inputPlaceholder:.5,inputUnderline:.7,switchTrackDisabled:.2,switchTrack:.3},(u=p.dark)==null?void 0:u.opacity),overlays:((a=p.dark)==null?void 0:a.overlays)||UQ})})});Object.keys(D.colorSchemes).forEach(V=>{const F=D.colorSchemes[V].palette,X=re=>{const ye=re.split("-"),me=ye[1],we=ye[2];return T(re,F[me][we])};if(V==="light"?(Qe(F.common,"background","#fff"),Qe(F.common,"onBackground","#000")):(Qe(F.common,"background","#000"),Qe(F.common,"onBackground","#fff")),HQ(F,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),V==="light"){Qe(F.Alert,"errorColor",Dn(F.error.light,.6)),Qe(F.Alert,"infoColor",Dn(F.info.light,.6)),Qe(F.Alert,"successColor",Dn(F.success.light,.6)),Qe(F.Alert,"warningColor",Dn(F.warning.light,.6)),Qe(F.Alert,"errorFilledBg",X("palette-error-main")),Qe(F.Alert,"infoFilledBg",X("palette-info-main")),Qe(F.Alert,"successFilledBg",X("palette-success-main")),Qe(F.Alert,"warningFilledBg",X("palette-warning-main")),Qe(F.Alert,"errorFilledColor",_l(()=>R.getContrastText(F.error.main))),Qe(F.Alert,"infoFilledColor",_l(()=>R.getContrastText(F.info.main))),Qe(F.Alert,"successFilledColor",_l(()=>R.getContrastText(F.success.main))),Qe(F.Alert,"warningFilledColor",_l(()=>R.getContrastText(F.warning.main))),Qe(F.Alert,"errorStandardBg",zn(F.error.light,.9)),Qe(F.Alert,"infoStandardBg",zn(F.info.light,.9)),Qe(F.Alert,"successStandardBg",zn(F.success.light,.9)),Qe(F.Alert,"warningStandardBg",zn(F.warning.light,.9)),Qe(F.Alert,"errorIconColor",X("palette-error-main")),Qe(F.Alert,"infoIconColor",X("palette-info-main")),Qe(F.Alert,"successIconColor",X("palette-success-main")),Qe(F.Alert,"warningIconColor",X("palette-warning-main")),Qe(F.AppBar,"defaultBg",X("palette-grey-100")),Qe(F.Avatar,"defaultBg",X("palette-grey-400")),Qe(F.Button,"inheritContainedBg",X("palette-grey-300")),Qe(F.Button,"inheritContainedHoverBg",X("palette-grey-A100")),Qe(F.Chip,"defaultBorder",X("palette-grey-400")),Qe(F.Chip,"defaultAvatarColor",X("palette-grey-700")),Qe(F.Chip,"defaultIconColor",X("palette-grey-700")),Qe(F.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Qe(F.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Qe(F.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Qe(F.LinearProgress,"primaryBg",zn(F.primary.main,.62)),Qe(F.LinearProgress,"secondaryBg",zn(F.secondary.main,.62)),Qe(F.LinearProgress,"errorBg",zn(F.error.main,.62)),Qe(F.LinearProgress,"infoBg",zn(F.info.main,.62)),Qe(F.LinearProgress,"successBg",zn(F.success.main,.62)),Qe(F.LinearProgress,"warningBg",zn(F.warning.main,.62)),Qe(F.Skeleton,"bg",`rgba(${X("palette-text-primaryChannel")} / 0.11)`),Qe(F.Slider,"primaryTrack",zn(F.primary.main,.62)),Qe(F.Slider,"secondaryTrack",zn(F.secondary.main,.62)),Qe(F.Slider,"errorTrack",zn(F.error.main,.62)),Qe(F.Slider,"infoTrack",zn(F.info.main,.62)),Qe(F.Slider,"successTrack",zn(F.success.main,.62)),Qe(F.Slider,"warningTrack",zn(F.warning.main,.62));const re=P_(F.background.default,.8);Qe(F.SnackbarContent,"bg",re),Qe(F.SnackbarContent,"color",_l(()=>R.getContrastText(re))),Qe(F.SpeedDialAction,"fabHoverBg",P_(F.background.paper,.15)),Qe(F.StepConnector,"border",X("palette-grey-400")),Qe(F.StepContent,"border",X("palette-grey-400")),Qe(F.Switch,"defaultColor",X("palette-common-white")),Qe(F.Switch,"defaultDisabledColor",X("palette-grey-100")),Qe(F.Switch,"primaryDisabledColor",zn(F.primary.main,.62)),Qe(F.Switch,"secondaryDisabledColor",zn(F.secondary.main,.62)),Qe(F.Switch,"errorDisabledColor",zn(F.error.main,.62)),Qe(F.Switch,"infoDisabledColor",zn(F.info.main,.62)),Qe(F.Switch,"successDisabledColor",zn(F.success.main,.62)),Qe(F.Switch,"warningDisabledColor",zn(F.warning.main,.62)),Qe(F.TableCell,"border",zn(M_(F.divider,1),.88)),Qe(F.Tooltip,"bg",M_(F.grey[700],.92))}else{Qe(F.Alert,"errorColor",zn(F.error.light,.6)),Qe(F.Alert,"infoColor",zn(F.info.light,.6)),Qe(F.Alert,"successColor",zn(F.success.light,.6)),Qe(F.Alert,"warningColor",zn(F.warning.light,.6)),Qe(F.Alert,"errorFilledBg",X("palette-error-dark")),Qe(F.Alert,"infoFilledBg",X("palette-info-dark")),Qe(F.Alert,"successFilledBg",X("palette-success-dark")),Qe(F.Alert,"warningFilledBg",X("palette-warning-dark")),Qe(F.Alert,"errorFilledColor",_l(()=>H.getContrastText(F.error.dark))),Qe(F.Alert,"infoFilledColor",_l(()=>H.getContrastText(F.info.dark))),Qe(F.Alert,"successFilledColor",_l(()=>H.getContrastText(F.success.dark))),Qe(F.Alert,"warningFilledColor",_l(()=>H.getContrastText(F.warning.dark))),Qe(F.Alert,"errorStandardBg",Dn(F.error.light,.9)),Qe(F.Alert,"infoStandardBg",Dn(F.info.light,.9)),Qe(F.Alert,"successStandardBg",Dn(F.success.light,.9)),Qe(F.Alert,"warningStandardBg",Dn(F.warning.light,.9)),Qe(F.Alert,"errorIconColor",X("palette-error-main")),Qe(F.Alert,"infoIconColor",X("palette-info-main")),Qe(F.Alert,"successIconColor",X("palette-success-main")),Qe(F.Alert,"warningIconColor",X("palette-warning-main")),Qe(F.AppBar,"defaultBg",X("palette-grey-900")),Qe(F.AppBar,"darkBg",X("palette-background-paper")),Qe(F.AppBar,"darkColor",X("palette-text-primary")),Qe(F.Avatar,"defaultBg",X("palette-grey-600")),Qe(F.Button,"inheritContainedBg",X("palette-grey-800")),Qe(F.Button,"inheritContainedHoverBg",X("palette-grey-700")),Qe(F.Chip,"defaultBorder",X("palette-grey-700")),Qe(F.Chip,"defaultAvatarColor",X("palette-grey-300")),Qe(F.Chip,"defaultIconColor",X("palette-grey-300")),Qe(F.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Qe(F.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Qe(F.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Qe(F.LinearProgress,"primaryBg",Dn(F.primary.main,.5)),Qe(F.LinearProgress,"secondaryBg",Dn(F.secondary.main,.5)),Qe(F.LinearProgress,"errorBg",Dn(F.error.main,.5)),Qe(F.LinearProgress,"infoBg",Dn(F.info.main,.5)),Qe(F.LinearProgress,"successBg",Dn(F.success.main,.5)),Qe(F.LinearProgress,"warningBg",Dn(F.warning.main,.5)),Qe(F.Skeleton,"bg",`rgba(${X("palette-text-primaryChannel")} / 0.13)`),Qe(F.Slider,"primaryTrack",Dn(F.primary.main,.5)),Qe(F.Slider,"secondaryTrack",Dn(F.secondary.main,.5)),Qe(F.Slider,"errorTrack",Dn(F.error.main,.5)),Qe(F.Slider,"infoTrack",Dn(F.info.main,.5)),Qe(F.Slider,"successTrack",Dn(F.success.main,.5)),Qe(F.Slider,"warningTrack",Dn(F.warning.main,.5));const re=P_(F.background.default,.98);Qe(F.SnackbarContent,"bg",re),Qe(F.SnackbarContent,"color",_l(()=>H.getContrastText(re))),Qe(F.SpeedDialAction,"fabHoverBg",P_(F.background.paper,.15)),Qe(F.StepConnector,"border",X("palette-grey-600")),Qe(F.StepContent,"border",X("palette-grey-600")),Qe(F.Switch,"defaultColor",X("palette-grey-300")),Qe(F.Switch,"defaultDisabledColor",X("palette-grey-600")),Qe(F.Switch,"primaryDisabledColor",Dn(F.primary.main,.55)),Qe(F.Switch,"secondaryDisabledColor",Dn(F.secondary.main,.55)),Qe(F.Switch,"errorDisabledColor",Dn(F.error.main,.55)),Qe(F.Switch,"infoDisabledColor",Dn(F.info.main,.55)),Qe(F.Switch,"successDisabledColor",Dn(F.success.main,.55)),Qe(F.Switch,"warningDisabledColor",Dn(F.warning.main,.55)),Qe(F.TableCell,"border",Dn(M_(F.divider,1),.68)),Qe(F.Tooltip,"bg",M_(F.grey[700],.92))}cc(F.background,"default"),cc(F.background,"paper"),cc(F.common,"background"),cc(F.common,"onBackground"),cc(F,"divider"),Object.keys(F).forEach(re=>{const ye=F[re];ye&&typeof ye=="object"&&(ye.main&&Qe(F[re],"mainChannel",Bf(Pg(ye.main))),ye.light&&Qe(F[re],"lightChannel",Bf(Pg(ye.light))),ye.dark&&Qe(F[re],"darkChannel",Bf(Pg(ye.dark))),ye.contrastText&&Qe(F[re],"contrastTextChannel",Bf(Pg(ye.contrastText))),re==="text"&&(cc(F[re],"primary"),cc(F[re],"secondary")),re==="action"&&(ye.active&&cc(F[re],"active"),ye.selected&&cc(F[re],"selected")))})}),D=t.reduce((V,F)=>Oi(V,F),D);const O={prefix:m,shouldSkipGeneratingVar:w},{vars:L,generateCssVars:Q}=jL(D,O);return D.vars=L,D.generateCssVars=Q,D.shouldSkipGeneratingVar=w,D.unstable_sxConfig=K({},od,C==null?void 0:C.unstable_sxConfig),D.unstable_sx=function(F){return $c({sx:F,theme:this})},D}const qQ=e=>[...[...Array(24)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r+1}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],mg={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},WQ=q$(),{CssVarsProvider:ZQ,useColorScheme:s_e,getInitColorSchemeScript:l_e}=NL({themeId:sw,theme:WQ,attribute:mg.attribute,colorSchemeStorageKey:mg.colorSchemeStorageKey,modeStorageKey:mg.modeStorageKey,defaultColorScheme:{light:mg.defaultLightColorScheme,dark:mg.defaultDarkColorScheme},resolveTheme:e=>{const t=K({},e,{typography:V$(e.palette,e.typography)});return t.unstable_sx=function(n){return $c({sx:n,theme:this})},t},excludeVariablesFromRoot:qQ});function KQ(e){return e}function XQ(e){return e.length===0?KQ:e.length===1?e[0]:function(r){return e.reduce((n,i)=>i(n),r)}}function W$(e){const t={subscribe(r){let n=null,i=!1,o=!1,u=!1;function a(){if(n===null){u=!0;return}o||(o=!0,typeof n=="function"?n():n&&n.unsubscribe())}return n=e({next(p){var m;i||(m=r.next)==null||m.call(r,p)},error(p){var m;i||(i=!0,(m=r.error)==null||m.call(r,p),a())},complete(){var p;i||(i=!0,(p=r.complete)==null||p.call(r),a())}}),u&&a(),{unsubscribe:a}},pipe(...r){return XQ(r)(t)}};return t}function JQ(e){return t=>{let r=0,n=null;const i=[];function o(){n||(n=t.subscribe({next(a){var p;for(const m of i)(p=m.next)==null||p.call(m,a)},error(a){var p;for(const m of i)(p=m.error)==null||p.call(m,a)},complete(){var a;for(const p of i)(a=p.complete)==null||a.call(p)}}))}function u(){if(r===0&&n){const a=n;n=null,a.unsubscribe()}}return{subscribe(a){return r++,i.push(a),o(),{unsubscribe(){r--,u();const p=i.findIndex(m=>m===a);p>-1&&i.splice(p,1)}}}}}}class wI extends Error{constructor(t){super(t),this.name="ObservableAbortError",Object.setPrototypeOf(this,wI.prototype)}}function YQ(e){let t;return{promise:new Promise((n,i)=>{let o=!1;function u(){o||(o=!0,i(new wI("This operation was aborted.")),a.unsubscribe())}const a=e.subscribe({next(p){o=!0,n(p),u()},error(p){o=!0,i(p),u()},complete(){o=!0,u()}});t=u}),abort:t}}function QQ(e){return W$(t=>{function r(i=0,o=e.op){const u=e.links[i];if(!u)throw new Error("No more links to execute - did you forget to add an ending link?");return u({op:o,next(p){return r(i+1,p)}})}return r().subscribe(t)})}function Z$(e){const t=Object.create(null);for(const r in e){const n=e[r];t[n]=r}return t}const K$={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};Z$(K$);Z$(K$);const X$=()=>{};function J$(e,t){return new Proxy(X$,{get(n,i){if(!(typeof i!="string"||i==="then"))return J$(e,[...t,i])},apply(n,i,o){const u=t[t.length-1]==="apply";return e({args:u?o.length>=2?o[1]:[]:o,path:u?t.slice(0,-1):t})}})}const eee=e=>J$(e,[]),tee=e=>new Proxy(X$,{get(t,r){if(!(typeof r!="string"||r==="then"))return e(r)}});function ree(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}class nee extends Error{}function iee(e){if(e instanceof Error)return e;const t=typeof e;if(!(t==="undefined"||t==="function"||e===null)){if(t!=="object")return new Error(String(e));if(ree(e)){const r=new nee;for(const n in e)r[n]=e[n];return r}}}function ux(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function oee(e,t){if("error"in e){const n=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:n}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:t.transformer.deserialize(e.result.data)}}}}class xS extends Error{constructor(){super("Unable to transform response from server")}}function aee(e,t){let r;try{r=oee(e,t)}catch{throw new xS}if(!r.ok&&(!ux(r.error.error)||typeof r.error.error.code!="number"))throw new xS;if(r.ok&&!ux(r.result))throw new xS;return r}function see(e){return e instanceof bc||e instanceof Error&&e.name==="TRPCClientError"}function lee(e){return ux(e)&&ux(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}class bc extends Error{static from(t,r={}){const n=t;return see(n)?(r.meta&&(n.meta={...n.meta,...r.meta}),n):lee(n)?new bc(n.error.message,{...r,result:n}):n instanceof Error?new bc(n.message,{...r,cause:iee(n)}):new bc("Unknown error",{...r,cause:n})}constructor(t,r){var i,o;const n=r==null?void 0:r.cause;super(t,{cause:n}),this.meta=r==null?void 0:r.meta,this.cause=n,this.shape=(i=r==null?void 0:r.result)==null?void 0:i.error,this.data=(o=r==null?void 0:r.result)==null?void 0:o.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,bc.prototype)}}/* istanbul ignore next -- @preserve */const cee=e=>e===0?0:Math.min(1e3*2**e,3e4);function uee(e){const{url:t,WebSocket:r=WebSocket,retryDelayMs:n=cee,onOpen:i,onClose:o}=e;/* istanbul ignore next -- @preserve */if(!r)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");let u=[];const a=Object.create(null);let p=0,m=null,w=null,C=Q(),T="connecting";function P(){T!=="open"||m||(m=setTimeout(()=>{m=null,u.length===1?C.send(JSON.stringify(u.pop())):C.send(JSON.stringify(u)),u=[]}))}function R(){if(w!==null||T==="closed")return;const F=n(p++);H(F)}function $(){T="connecting";const F=C;C=Q(),D(F)}function H(F){w||(T="connecting",w=setTimeout($,F))}function D(F){Object.values(a).some(re=>re.ws===F)||F.close()}function O(){Object.values(a).forEach(F=>{F.type==="subscription"&&F.callbacks.complete()})}function L(F){u.some(X=>X.id===F.op.id)||V(F.op,F.callbacks)}function Q(){const F=typeof t=="function"?t():t,X=new r(F);clearTimeout(w),w=null,X.addEventListener("open",()=>{/* istanbul ignore next -- @preserve */X===C&&(p=0,T="open",i==null||i(),P())}),X.addEventListener("error",()=>{X===C&&R()});const re=me=>{if(me.method==="reconnect"&&X===C){T==="open"&&(o==null||o()),$();for(const we of Object.values(a))we.type==="subscription"&&L(we)}},ye=me=>{var ke,Ie;const we=me.id!==null&&a[me.id];if(we){if((Ie=(ke=we.callbacks).next)==null||Ie.call(ke,me),we.ws!==C&&X===C){const qe=we.ws;we.ws=C,D(qe)}"result"in me&&me.result.type==="stopped"&&X===C&&we.callbacks.complete()}};return X.addEventListener("message",({data:me})=>{const we=JSON.parse(me);"method"in we?re(we):ye(we),(X!==C||T==="closed")&&D(X)}),X.addEventListener("close",({code:me})=>{var we,ke,Ie,qe;T==="open"&&(o==null||o({code:me})),C===X&&R();for(const[Re,Se]of Object.entries(a))if(Se.ws===X){if(T==="closed"){delete a[Re],(ke=(we=Se.callbacks).complete)==null||ke.call(we);continue}Se.type==="subscription"?L(Se):(delete a[Re],(qe=(Ie=Se.callbacks).error)==null||qe.call(Ie,bc.from(new SI("WebSocket closed prematurely"))))}}),X}function V(F,X){const{type:re,input:ye,path:me,id:we}=F,ke={id:we,method:re,params:{input:ye,path:me}};return a[we]={ws:C,type:re,callbacks:X,op:F},u.push(ke),P(),()=>{var qe,Re;const Ie=(qe=a[we])==null?void 0:qe.callbacks;delete a[we],u=u.filter(Se=>Se.id!==we),(Re=Ie==null?void 0:Ie.complete)==null||Re.call(Ie),C.readyState===r.OPEN&&F.type==="subscription"&&(u.push({id:we,method:"subscription.stop"}),P())}}return{close:()=>{T="closed",o==null||o(),O(),D(C),clearTimeout(w),w=null},request:V,getConnection(){return C}}}class SI extends Error{constructor(t){super(t),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,SI.prototype)}}function hee(e){return t=>{const{client:r}=e;return({op:n})=>W$(i=>{const{type:o,path:u,id:a,context:p}=n,m=t.transformer.serialize(n.input),w=r.request({type:o,path:u,input:m,id:a,context:p},{error(C){i.error(C),w()},complete(){i.complete()},next(C){const T=aee(C,t);if(!T.ok){i.error(bc.from(T.error));return}i.next({result:T.result}),n.type!=="subscription"&&(w(),i.complete())}});return()=>{w()}})}}class dee{$request({type:t,input:r,path:n,context:i={}}){return QQ({links:this.links,op:{id:++this.requestId,type:t,path:n,input:r,context:i}}).pipe(JQ())}requestAsPromise(t){const r=this.$request(t),{promise:n,abort:i}=YQ(r);return new Promise((u,a)=>{var p;(p=t.signal)==null||p.addEventListener("abort",i),n.then(m=>{u(m.result.data)}).catch(m=>{a(bc.from(m))})})}query(t,r,n){return this.requestAsPromise({type:"query",path:t,input:r,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}mutation(t,r,n){return this.requestAsPromise({type:"mutation",path:t,input:r,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}subscription(t,r,n){return this.$request({type:"subscription",path:t,input:r,context:n==null?void 0:n.context}).subscribe({next(o){var u,a,p;o.result.type==="started"?(u=n.onStarted)==null||u.call(n):o.result.type==="stopped"?(a=n.onStopped)==null||a.call(n):(p=n.onData)==null||p.call(n,o.result.data)},error(o){var u;(u=n.onError)==null||u.call(n,o)},complete(){var o;(o=n.onComplete)==null||o.call(n)}})}constructor(t){this.requestId=0;const r=(()=>{const n=t.transformer;return n?"input"in n?t.transformer:{input:n,output:n}:{input:{serialize:i=>i,deserialize:i=>i},output:{serialize:i=>i,deserialize:i=>i}}})();this.runtime={transformer:{serialize:n=>r.input.serialize(n),deserialize:n=>r.output.deserialize(n)},combinedTransformer:r},this.links=t.links.map(n=>n(this.runtime))}}const fee={query:"query",mutate:"mutation",subscribe:"subscription"},pee=e=>fee[e];function mee(e){return tee(t=>e.hasOwnProperty(t)?e[t]:t==="__untypedClient"?e:eee(({path:r,args:n})=>{const i=[t,...r],o=pee(i.pop()),u=i.join(".");return e[o](u,...n)}))}function gee(e){const t=new dee(e);return mee(t)}function Y$(e){return N7(e)}function vee(e){return dy("MuiSvgIcon",e)}db("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const yee=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],_ee=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${bt(t)}`,`fontSize${bt(r)}`]};return qr(i,vee,n)},xee=lw("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${bt(r.color)}`],t[`fontSize${bt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,n,i,o,u,a,p,m,w,C,T,P,R;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(n=r.create)==null?void 0:n.call(r,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=e.typography)==null||(u=o.pxToRem)==null?void 0:u.call(o,20))||"1.25rem",medium:((a=e.typography)==null||(p=a.pxToRem)==null?void 0:p.call(a,24))||"1.5rem",large:((m=e.typography)==null||(w=m.pxToRem)==null?void 0:w.call(m,35))||"2.1875rem"}[t.fontSize],color:(C=(T=(e.vars||e).palette)==null||(T=T[t.color])==null?void 0:T.main)!=null?C:{action:(P=(e.vars||e).palette)==null||(P=P.action)==null?void 0:P.active,disabled:(R=(e.vars||e).palette)==null||(R=R.action)==null?void 0:R.disabled,inherit:void 0}[t.color]}}),KT=z.forwardRef(function(t,r){const n=Y$({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:u="inherit",component:a="svg",fontSize:p="medium",htmlColor:m,inheritViewBox:w=!1,titleAccess:C,viewBox:T="0 0 24 24"}=n,P=Gt(n,yee),R=z.isValidElement(i)&&i.type==="svg",$=K({},n,{color:u,component:a,fontSize:p,instanceFontSize:t.fontSize,inheritViewBox:w,viewBox:T,hasSvgAsChild:R}),H={};w||(H.viewBox=T);const D=_ee($);return N.jsxs(xee,K({as:a,className:ei(D.root,o),focusable:"false",color:m,"aria-hidden":C?void 0:!0,role:C?"img":void 0,ref:r},H,P,R&&i.props,{ownerState:$,children:[R?i.props.children:i,C?N.jsx("title",{children:C}):null]}))});KT.muiName="SvgIcon";function Ri(e,t){function r(n,i){return N.jsx(KT,K({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=KT.muiName,z.memo(z.forwardRef(r))}function XT(e,t){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},XT(e,t)}function bee(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,XT(e,t)}const C5={disabled:!1},Q$=Gs.createContext(null);var wee=function(t){return t.scrollTop},Ag="unmounted",Ih="exited",Mh="entering",_f="entered",JT="exiting",al=function(e){bee(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=i,a=u&&!u.isMounting?n.enter:n.appear,p;return o.appearStatus=null,n.in?a?(p=Ih,o.appearStatus=Mh):p=_f:n.unmountOnExit||n.mountOnEnter?p=Ag:p=Ih,o.state={status:p},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var u=i.in;return u&&o.status===Ag?{status:Ih}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var u=this.state.status;this.props.in?u!==Mh&&u!==_f&&(o=Mh):(u===Mh||u===_f)&&(o=JT)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,u,a;return o=u=a=i,i!=null&&typeof i!="number"&&(o=i.exit,u=i.enter,a=i.appear!==void 0?i.appear:u),{exit:o,enter:u,appear:a}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Mh){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:T_.findDOMNode(this);u&&wee(u)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ih&&this.setState({status:Ag})},r.performEnter=function(i){var o=this,u=this.props.enter,a=this.context?this.context.isMounting:i,p=this.props.nodeRef?[a]:[T_.findDOMNode(this),a],m=p[0],w=p[1],C=this.getTimeouts(),T=a?C.appear:C.enter;if(!i&&!u||C5.disabled){this.safeSetState({status:_f},function(){o.props.onEntered(m)});return}this.props.onEnter(m,w),this.safeSetState({status:Mh},function(){o.props.onEntering(m,w),o.onTransitionEnd(T,function(){o.safeSetState({status:_f},function(){o.props.onEntered(m,w)})})})},r.performExit=function(){var i=this,o=this.props.exit,u=this.getTimeouts(),a=this.props.nodeRef?void 0:T_.findDOMNode(this);if(!o||C5.disabled){this.safeSetState({status:Ih},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:JT},function(){i.props.onExiting(a),i.onTransitionEnd(u.exit,function(){i.safeSetState({status:Ih},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,u=!0;return this.nextCallback=function(a){u&&(u=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:T_.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!u||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],m=p[0],w=p[1];this.props.addEndListener(m,w)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===Ag)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=Gt(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Gs.createElement(Q$.Provider,{value:null},typeof u=="function"?u(i,a):Gs.cloneElement(Gs.Children.only(u),a))},t}(Gs.Component);al.contextType=Q$;al.propTypes={};function df(){}al.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:df,onEntering:df,onEntered:df,onExit:df,onExiting:df,onExited:df};al.UNMOUNTED=Ag;al.EXITED=Ih;al.ENTERING=Mh;al.ENTERED=_f;al.EXITING=JT;const e6=e=>e.scrollTop;function Tp(e,t){var r,n;const{timeout:i,easing:o,style:u={}}=e;return{duration:(r=u.transitionDuration)!=null?r:typeof i=="number"?i:i[t.mode]||0,easing:(n=u.transitionTimingFunction)!=null?n:typeof o=="object"?o[t.mode]:o,delay:u.transitionDelay}}function See(e){return dy("MuiCollapse",e)}db("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Cee=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Tee=e=>{const{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return qr(n,See,r)},kee=lw("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>K({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&K({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Eee=lw("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>K({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Iee=lw("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>K({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),CI=z.forwardRef(function(t,r){const n=Y$({props:t,name:"MuiCollapse"}),{addEndListener:i,children:o,className:u,collapsedSize:a="0px",component:p,easing:m,in:w,onEnter:C,onEntered:T,onEntering:P,onExit:R,onExited:$,onExiting:H,orientation:D="vertical",style:O,timeout:L=U$.standard,TransitionComponent:Q=al}=n,V=Gt(n,Cee),F=K({},n,{orientation:D,collapsedSize:a}),X=Tee(F),re=bI(),ye=Tg(),me=z.useRef(null),we=z.useRef(),ke=typeof a=="number"?`${a}px`:a,Ie=D==="horizontal",qe=Ie?"width":"height",Re=z.useRef(null),Se=fn(r,Re),Fe=Tt=>it=>{if(Tt){const Ze=Re.current;it===void 0?Tt(Ze):Tt(Ze,it)}},Ce=()=>me.current?me.current[Ie?"clientWidth":"clientHeight"]:0,Ne=Fe((Tt,it)=>{me.current&&Ie&&(me.current.style.position="absolute"),Tt.style[qe]=ke,C&&C(Tt,it)}),Je=Fe((Tt,it)=>{const Ze=Ce();me.current&&Ie&&(me.current.style.position="");const{duration:rt,easing:pt}=Tp({style:O,timeout:L,easing:m},{mode:"enter"});if(L==="auto"){const ur=re.transitions.getAutoHeightDuration(Ze);Tt.style.transitionDuration=`${ur}ms`,we.current=ur}else Tt.style.transitionDuration=typeof rt=="string"?rt:`${rt}ms`;Tt.style[qe]=`${Ze}px`,Tt.style.transitionTimingFunction=pt,P&&P(Tt,it)}),at=Fe((Tt,it)=>{Tt.style[qe]="auto",T&&T(Tt,it)}),st=Fe(Tt=>{Tt.style[qe]=`${Ce()}px`,R&&R(Tt)}),Dt=Fe($),Ct=Fe(Tt=>{const it=Ce(),{duration:Ze,easing:rt}=Tp({style:O,timeout:L,easing:m},{mode:"exit"});if(L==="auto"){const pt=re.transitions.getAutoHeightDuration(it);Tt.style.transitionDuration=`${pt}ms`,we.current=pt}else Tt.style.transitionDuration=typeof Ze=="string"?Ze:`${Ze}ms`;Tt.style[qe]=ke,Tt.style.transitionTimingFunction=rt,H&&H(Tt)}),Bt=Tt=>{L==="auto"&&ye.start(we.current||0,Tt),i&&i(Re.current,Tt)};return N.jsx(Q,K({in:w,onEnter:Ne,onEntered:at,onEntering:Je,onExit:st,onExited:Dt,onExiting:Ct,addEndListener:Bt,nodeRef:Re,timeout:L==="auto"?null:L},V,{children:(Tt,it)=>N.jsx(kee,K({as:p,className:ei(X.root,u,{entered:X.entered,exited:!w&&ke==="0px"&&X.hidden}[Tt]),style:K({[Ie?"minWidth":"minHeight"]:ke},O),ref:Se},it,{ownerState:K({},F,{state:Tt}),children:N.jsx(Eee,{ownerState:K({},F,{state:Tt}),className:X.wrapper,ref:me,children:N.jsx(Iee,{ownerState:K({},F,{state:Tt}),className:X.wrapperInner,children:o})})}))}))});CI.muiSupportAuto=!0;const Mee=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Pee(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=fy(t);let u;if(t.fakeTransform)u=t.fakeTransform;else{const m=o.getComputedStyle(t);u=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("transform")}let a=0,p=0;if(u&&u!=="none"&&typeof u=="string"){const m=u.split("(")[1].split(")")[0].split(",");a=parseInt(m[4],10),p=parseInt(m[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${o.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+p-n.top}px)`:`translateY(${o.innerHeight+p-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-p}px)`:`translateY(-${n.top+n.height-p}px)`}function Aee(e){return typeof e=="function"?e():e}function R_(e,t,r){const n=Aee(r),i=Pee(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const TI=z.forwardRef(function(t,r){const n=bI(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:u,appear:a=!0,children:p,container:m,direction:w="down",easing:C=i,in:T,onEnter:P,onEntered:R,onEntering:$,onExit:H,onExited:D,onExiting:O,style:L,timeout:Q=o,TransitionComponent:V=al}=t,F=Gt(t,Mee),X=z.useRef(null),re=fn(my(p),X,r),ye=Ce=>Ne=>{Ce&&(Ne===void 0?Ce(X.current):Ce(X.current,Ne))},me=ye((Ce,Ne)=>{R_(w,Ce,m),e6(Ce),P&&P(Ce,Ne)}),we=ye((Ce,Ne)=>{const Je=Tp({timeout:Q,style:L,easing:C},{mode:"enter"});Ce.style.webkitTransition=n.transitions.create("-webkit-transform",K({},Je)),Ce.style.transition=n.transitions.create("transform",K({},Je)),Ce.style.webkitTransform="none",Ce.style.transform="none",$&&$(Ce,Ne)}),ke=ye(R),Ie=ye(O),qe=ye(Ce=>{const Ne=Tp({timeout:Q,style:L,easing:C},{mode:"exit"});Ce.style.webkitTransition=n.transitions.create("-webkit-transform",Ne),Ce.style.transition=n.transitions.create("transform",Ne),R_(w,Ce,m),H&&H(Ce)}),Re=ye(Ce=>{Ce.style.webkitTransition="",Ce.style.transition="",D&&D(Ce)}),Se=Ce=>{u&&u(X.current,Ce)},Fe=z.useCallback(()=>{X.current&&R_(w,X.current,m)},[w,m]);return z.useEffect(()=>{if(T||w==="down"||w==="right")return;const Ce=p7(()=>{X.current&&R_(w,X.current,m)}),Ne=fy(X.current);return Ne.addEventListener("resize",Ce),()=>{Ce.clear(),Ne.removeEventListener("resize",Ce)}},[w,T,m]),z.useEffect(()=>{T||Fe()},[T,Fe]),N.jsx(V,K({nodeRef:X,onEnter:me,onEntered:ke,onEntering:we,onExit:qe,onExited:Re,onExiting:Ie,addEndListener:Se,appear:a,in:T,timeout:Q},F,{children:(Ce,Ne)=>z.cloneElement(p,K({ref:re,style:K({visibility:Ce==="exited"&&!T?"hidden":void 0},L,p.props.style)},Ne))}))}),Ree=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Dee={entering:{transform:"none"},entered:{transform:"none"}},zee=z.forwardRef(function(t,r){const n=bI(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:u=!0,children:a,easing:p,in:m,onEnter:w,onEntered:C,onEntering:T,onExit:P,onExited:R,onExiting:$,style:H,timeout:D=i,TransitionComponent:O=al}=t,L=Gt(t,Ree),Q=z.useRef(null),V=fn(Q,my(a),r),F=qe=>Re=>{if(qe){const Se=Q.current;Re===void 0?qe(Se):qe(Se,Re)}},X=F(T),re=F((qe,Re)=>{e6(qe);const Se=Tp({style:H,timeout:D,easing:p},{mode:"enter"});qe.style.webkitTransition=n.transitions.create("transform",Se),qe.style.transition=n.transitions.create("transform",Se),w&&w(qe,Re)}),ye=F(C),me=F($),we=F(qe=>{const Re=Tp({style:H,timeout:D,easing:p},{mode:"exit"});qe.style.webkitTransition=n.transitions.create("transform",Re),qe.style.transition=n.transitions.create("transform",Re),P&&P(qe)}),ke=F(R),Ie=qe=>{o&&o(Q.current,qe)};return N.jsx(O,K({appear:u,in:m,nodeRef:Q,onEnter:re,onEntered:ye,onEntering:X,onExit:we,onExited:ke,onExiting:me,addEndListener:Ie,timeout:D},L,{children:(qe,Re)=>z.cloneElement(a,K({style:K({transform:"scale(0)",visibility:qe==="exited"&&!m?"hidden":void 0},Dee[qe],H,a.props.style),ref:V},Re))}))});function un(e,t){if(e==null)throw new Error(t);return e}function kI(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}function dn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Lee={};function cw(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Lee}var t6=Object.assign,hx=Object.getOwnPropertyDescriptor,Ll=Object.defineProperty,uw=Object.prototype,YT=[];Object.freeze(YT);var EI={};Object.freeze(EI);var Oee=typeof Proxy<"u",$ee=Object.toString();function r6(){Oee||dn("Proxy not available")}function n6(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Ff=function(){};function tl(e){return typeof e=="function"}function Kh(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function hw(e){return e!==null&&typeof e=="object"}function zc(e){if(!hw(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===$ee}function i6(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function My(e,t,r){Ll(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function o6(e,t,r){Ll(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function dd(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return hw(n)&&n[r]===!0}}function qp(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function Bee(e){var t=Object.getPrototypeOf(e),r=Object.getPrototypeOf(t),n=Object.getPrototypeOf(r);return n===null}function vc(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var a6=typeof Object.getOwnPropertySymbols<"u";function Fee(e){var t=Object.keys(e);if(!a6)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return uw.propertyIsEnumerable.call(e,n)})):t}var kp=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:a6?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function s6(e){return e===null?null:typeof e=="object"?""+e:e}function Cc(e,t){return uw.hasOwnProperty.call(e,t)}var Nee=Object.getOwnPropertyDescriptors||function(t){var r={};return kp(t).forEach(function(n){r[n]=hx(t,n)}),r};function La(e,t){return!!(e&t)}function Oa(e,t,r){return r?e|=t:e&=~t,e}function T5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uee(n.key),n)}}function Wp(e,t,r){return t&&jee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nf(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=Hee(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xh.apply(null,arguments)}function l6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,QT(e,t)}function QT(e,t){return QT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},QT(e,t)}function Vee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Uee(e){var t=Vee(e,"string");return typeof t=="symbol"?t:t+""}function Hee(e,t){if(e){if(typeof e=="string")return T5(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T5(e,t):void 0}}var Il=Symbol("mobx-stored-annotations");function Ol(e){function t(r,n){if(Ay(n))return e.decorate_20223_(r,n);Py(r,n,e)}return Object.assign(t,e)}function Py(e,t,r){Cc(e,Il)||My(e,Il,Xh({},e[Il])),Qee(r)||(e[Il][t]=r)}function Gee(e){return Cc(e,Il)||My(e,Il,Xh({},e[Il])),e[Il]}function Ay(e){return typeof e=="object"&&typeof e.kind=="string"}var wr=Symbol("mobx administration"),Zu=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=mn.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return C6(this)},t.reportChanged=function(){ms(),T6(this),gs()},t.toString=function(){return this.name_},Wp(e,[{key:"isBeingObserved",get:function(){return La(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return La(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return La(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Oa(this.flags_,e.diffValueMask_,n===1)}}])}();Zu.isBeingObservedMask_=1;Zu.isPendingUnobservationMask_=2;Zu.diffValueMask_=4;var II=dd("Atom",Zu);function c6(e,t,r){t===void 0&&(t=Ff),r===void 0&&(r=Ff);var n=new Zu(e);return t!==Ff&&ire(n,t),r!==Ff&&A6(n,r),n}function qee(e,t){return e===t}function Wee(e,t){return zI(e,t)}function Zee(e,t){return zI(e,t,1)}function Kee(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Ep={identity:qee,structural:Wee,default:Kee,shallow:Zee};function Jh(e,t,r){return O6(e)?e:Array.isArray(e)?ci.array(e,{name:r}):zc(e)?ci.object(e,void 0,{name:r}):qp(e)?ci.map(e,{name:r}):vc(e)?ci.set(e,{name:r}):typeof e=="function"&&!Dv(e)&&!zv(e)?i6(e)?Ip(e):Rv(r,e):e}function Xee(e,t,r){if(e==null||yw(e)||vw(e)||pd(e)||El(e))return e;if(Array.isArray(e))return ci.array(e,{name:r,deep:!1});if(zc(e))return ci.object(e,void 0,{name:r,deep:!1});if(qp(e))return ci.map(e,{name:r,deep:!1});if(vc(e))return ci.set(e,{name:r,deep:!1})}function dw(e){return e}function Jee(e,t){return zI(e,t)?t:e}var Yee="override";function Qee(e){return e.annotationType_===Yee}function Ry(e,t){return{annotationType_:e,options_:t,make_:ete,extend_:tte,decorate_20223_:rte}}function ete(e,t,r,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(Dv(r.value))return 1;var o=u6(e,this,t,r,!1);return Ll(n,t,o),2}function tte(e,t,r,n){var i=u6(e,this,t,r);return e.defineProperty_(t,i,n)}function rte(e,t){var r=t.kind,n=t.name,i=t.addInitializer,o=this,u=function(m){var w,C,T,P;return Yh((w=(C=o.options_)==null?void 0:C.name)!=null?w:n.toString(),m,(T=(P=o.options_)==null?void 0:P.autoAction)!=null?T:!1)};if(r=="field")return function(p){var m,w=p;return Dv(w)||(w=u(w)),(m=o.options_)!=null&&m.bound&&(w=w.bind(this),w.isMobxAction=!0),w};if(r=="method"){var a;return Dv(e)||(e=u(e)),(a=this.options_)!=null&&a.bound&&i(function(){var p=this,m=p[n].bind(p);m.isMobxAction=!0,p[n]=m}),e}dn("Cannot apply '"+o.annotationType_+"' to '"+String(n)+"' (kind: "+r+"):"+(`
'`+o.annotationType_+"' can only be used on properties with a function value."))}function nte(e,t,r,n){t.annotationType_,n.value}function u6(e,t,r,n,i){var o,u,a,p,m,w,C;i===void 0&&(i=jt.safeDescriptors),nte(e,t,r,n);var T=n.value;if((o=t.options_)!=null&&o.bound){var P;T=T.bind((P=e.proxy_)!=null?P:e.target_)}return{value:Yh((u=(a=t.options_)==null?void 0:a.name)!=null?u:r.toString(),T,(p=(m=t.options_)==null?void 0:m.autoAction)!=null?p:!1,(w=t.options_)!=null&&w.bound?(C=e.proxy_)!=null?C:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function h6(e,t){return{annotationType_:e,options_:t,make_:ite,extend_:ote,decorate_20223_:ate}}function ite(e,t,r,n){var i;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Cc(e.target_,t)||!zv(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(zv(r.value))return 1;var o=d6(e,this,t,r,!1,!1);return Ll(n,t,o),2}function ote(e,t,r,n){var i,o=d6(e,this,t,r,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,o,n)}function ate(e,t){var r,n=t.name,i=t.addInitializer;return zv(e)||(e=Ip(e)),(r=this.options_)!=null&&r.bound&&i(function(){var o=this,u=o[n].bind(o);u.isMobXFlow=!0,o[n]=u}),e}function ste(e,t,r,n){t.annotationType_,n.value}function d6(e,t,r,n,i,o){o===void 0&&(o=jt.safeDescriptors),ste(e,t,r,n);var u=n.value;if(zv(u)||(u=Ip(u)),i){var a;u=u.bind((a=e.proxy_)!=null?a:e.target_),u.isMobXFlow=!0}return{value:u,configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function MI(e,t){return{annotationType_:e,options_:t,make_:lte,extend_:cte,decorate_20223_:ute}}function lte(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function cte(e,t,r,n){return hte(e,this,t,r),e.defineComputedProperty_(t,Xh({},this.options_,{get:r.get,set:r.set}),n)}function ute(e,t){var r=this,n=t.name,i=t.addInitializer;return i(function(){var o=md(this)[wr],u=Xh({},r.options_,{get:e,context:this});u.name||(u.name="ObservableObject."+n.toString()),o.values_.set(n,new rl(u))}),function(){return this[wr].getObservablePropValue_(n)}}function hte(e,t,r,n){t.annotationType_,n.get}function fw(e,t){return{annotationType_:e,options_:t,make_:dte,extend_:fte,decorate_20223_:pte}}function dte(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function fte(e,t,r,n){var i,o;return mte(e,this),e.defineObservableProperty_(t,r.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:Jh,n)}function pte(e,t){var r=this,n=t.kind,i=t.name,o=new WeakSet;function u(a,p){var m,w,C=md(a)[wr],T=new Fh(p,(m=(w=r.options_)==null?void 0:w.enhancer)!=null?m:Jh,"ObservableObject."+i.toString(),!1);C.values_.set(i,T),o.add(a)}if(n=="accessor")return{get:function(){return o.has(this)||u(this,e.get.call(this)),this[wr].getObservablePropValue_(i)},set:function(p){return o.has(this)||u(this,p),this[wr].setObservablePropValue_(i,p)},init:function(p){return o.has(this)||u(this,p),p}}}function mte(e,t,r,n){t.annotationType_}var gte="true",vte=f6();function f6(e){return{annotationType_:gte,options_:e,make_:yte,extend_:_te,decorate_20223_:xte}}function yte(e,t,r,n){var i,o;if(r.get)return Dy.make_(e,t,r,n);if(r.set){var u=Yh(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:jt.safeDescriptors?e.isPlainObject_:!0,set:u})===null?0:2:(Ll(n,t,{configurable:!0,set:u}),2)}if(n!==e.target_&&typeof r.value=="function"){var a;if(i6(r.value)){var p,m=(p=this.options_)!=null&&p.autoBind?Ip.bound:Ip;return m.make_(e,t,r,n)}var w=(a=this.options_)!=null&&a.autoBind?Rv.bound:Rv;return w.make_(e,t,r,n)}var C=((i=this.options_)==null?void 0:i.deep)===!1?ci.ref:ci;if(typeof r.value=="function"&&(o=this.options_)!=null&&o.autoBind){var T;r.value=r.value.bind((T=e.proxy_)!=null?T:e.target_)}return C.make_(e,t,r,n)}function _te(e,t,r,n){var i,o;if(r.get)return Dy.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:jt.safeDescriptors?e.isPlainObject_:!0,set:Yh(t.toString(),r.set)},n);if(typeof r.value=="function"&&(i=this.options_)!=null&&i.autoBind){var u;r.value=r.value.bind((u=e.proxy_)!=null?u:e.target_)}var a=((o=this.options_)==null?void 0:o.deep)===!1?ci.ref:ci;return a.extend_(e,t,r,n)}function xte(e,t){dn("'"+this.annotationType_+"' cannot be used as a decorator")}var bte="observable",wte="observable.ref",Ste="observable.shallow",Cte="observable.struct",p6={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(p6);function D_(e){return e||p6}var ek=fw(bte),Tte=fw(wte,{enhancer:dw}),kte=fw(Ste,{enhancer:Xee}),Ete=fw(Cte,{enhancer:Jee}),m6=Ol(ek);function z_(e){return e.deep===!0?Jh:e.deep===!1?dw:Mte(e.defaultDecorator)}function Ite(e){var t;return e?(t=e.defaultDecorator)!=null?t:f6(e):void 0}function Mte(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:Jh}function g6(e,t,r){if(Ay(t))return ek.decorate_20223_(e,t);if(Kh(t)){Py(e,t,ek);return}return O6(e)?e:zc(e)?ci.object(e,t,r):Array.isArray(e)?ci.array(e,t):qp(e)?ci.map(e,t):vc(e)?ci.set(e,t):typeof e=="object"&&e!==null?e:ci.box(e,t)}t6(g6,m6);var Pte={box:function(t,r){var n=D_(r);return new Fh(t,z_(n),n.name,!0,n.equals)},array:function(t,r){var n=D_(r);return(jt.useProxies===!1||n.proxy===!1?Ire:yre)(t,z_(n),n.name)},map:function(t,r){var n=D_(r);return new B6(t,z_(n),n.name)},set:function(t,r){var n=D_(r);return new F6(t,z_(n),n.name)},object:function(t,r,n){return Ku(function(){return D6(jt.useProxies===!1||(n==null?void 0:n.proxy)===!1?md({},n):pre({},n),t,r)})},ref:Ol(Tte),shallow:Ol(kte),deep:m6,struct:Ol(Ete)},ci=t6(g6,Pte),v6="computed",Ate="computed.struct",tk=MI(v6),Rte=MI(Ate,{equals:Ep.structural}),Dy=function(t,r){if(Ay(r))return tk.decorate_20223_(t,r);if(Kh(r))return Py(t,r,tk);if(zc(t))return Ol(MI(v6,t));var n=zc(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new rl(n)};Object.assign(Dy,tk);Dy.struct=Ol(Rte);var k5,E5,dx=0,Dte=1,zte=(k5=(E5=hx(function(){},"name"))==null?void 0:E5.configurable)!=null?k5:!1,I5={value:"action",configurable:!0,writable:!1,enumerable:!1};function Yh(e,t,r,n){r===void 0&&(r=!1);function i(){return Lte(e,r,t,n||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return t.toString()},zte&&(I5.value=e,Ll(i,"name",I5)),i}function Lte(e,t,r,n,i){var o=Ote(e,t);try{return r.apply(n,i)}catch(u){throw o.error_=u,u}finally{$te(o)}}function Ote(e,t,r,n){var i=!1,o=0,u=jt.trackingDerivation,a=!t||!u;ms();var p=jt.allowStateChanges;a&&(fd(),p=pw(!0));var m=PI(!0),w={runAsAction_:a,prevDerivation_:u,prevAllowStateChanges_:p,prevAllowStateReads_:m,notifySpy_:i,startTime_:o,actionId_:Dte++,parentActionId_:dx};return dx=w.actionId_,w}function $te(e){dx!==e.actionId_&&dn(30),dx=e.parentActionId_,e.error_!==void 0&&(jt.suppressReactionErrors=!0),mw(e.prevAllowStateChanges_),Yg(e.prevAllowStateReads_),gs(),e.runAsAction_&&Tc(e.prevDerivation_),jt.suppressReactionErrors=!1}function Bte(e,t){var r=pw(e);try{return t()}finally{mw(r)}}function pw(e){var t=jt.allowStateChanges;return jt.allowStateChanges=e,t}function mw(e){jt.allowStateChanges=e}var Fh=function(e){function t(n,i,o,u,a){var p;return o===void 0&&(o="ObservableValue"),a===void 0&&(a=Ep.default),p=e.call(this,o)||this,p.enhancer=void 0,p.name_=void 0,p.equals=void 0,p.hasUnreportedChange_=!1,p.interceptors_=void 0,p.changeListeners_=void 0,p.value_=void 0,p.dehancer=void 0,p.enhancer=i,p.name_=o,p.equals=a,p.value_=i(n,void 0,o),p}l6(t,e);var r=t.prototype;return r.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},r.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==jt.UNCHANGED&&this.setNewValue_(i)},r.prepareNewValue_=function(i){if(ds(this)){var o=fs(this,{object:this,type:$l,newValue:i});if(!o)return jt.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?jt.UNCHANGED:i},r.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),Ks(this)&&Xs(this,{type:$l,object:this,newValue:i,oldValue:o})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(i){return zy(this,i)},r.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:$l,newValue:this.value_,oldValue:void 0}),Ly(this,i)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return s6(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Zu),rl=function(){function e(r){this.dependenciesState_=mn.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=mn.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new px(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=fx.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||dn(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=Yh("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?Ep.structural:Ep.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){Ute(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing&&dn(32,this.name_,this.derivation),jt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)rk(this)&&(this.warnAboutUntrackedRead_(),ms(),this.value_=this.computeValue_(!1),gs());else if(C6(this),rk(this)){var n=jt.trackingContext;this.keepAlive_&&!n&&(jt.trackingContext=this),this.trackAndCompute()&&Vte(this),jt.trackingContext=n}var i=this.value_;if(d1(i))throw i.cause;return i},t.set=function(n){if(this.setter_){this.isRunningSetter&&dn(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter=!1}}else dn(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===mn.NOT_TRACKING_,o=this.computeValue_(!0),u=i||d1(n)||d1(o)||!this.equals_(n,o);return u&&(this.value_=o),u},t.computeValue_=function(n){this.isComputing=!0;var i=pw(!1),o;if(n)o=y6(this,this.derivation,this.scope_);else if(jt.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(u){o=new px(u)}return mw(i),this.isComputing=!1,o},t.suspend_=function(){this.keepAlive_||(nk(this),this.value_=void 0)},t.observe_=function(n,i){var o=this,u=!0,a=void 0;return Qte(function(){var p=o.get();if(!u||i){var m=fd();n({observableKind:"computed",debugObjectName:o.name_,type:$l,object:o,newValue:p,oldValue:a}),Tc(m)}u=!1,a=p})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return s6(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},Wp(e,[{key:"isComputing",get:function(){return La(this.flags_,e.isComputingMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isComputingMask_,n)}},{key:"isRunningSetter",get:function(){return La(this.flags_,e.isRunningSetterMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isRunningSetterMask_,n)}},{key:"isBeingObserved",get:function(){return La(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return La(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return La(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Oa(this.flags_,e.diffValueMask_,n===1)}}])}();rl.isComputingMask_=1;rl.isRunningSetterMask_=2;rl.isBeingObservedMask_=4;rl.isPendingUnobservationMask_=8;rl.diffValueMask_=16;var gw=dd("ComputedValue",rl),mn;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(mn||(mn={}));var fx;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(fx||(fx={}));var px=function(t){this.cause=void 0,this.cause=t};function d1(e){return e instanceof px}function rk(e){switch(e.dependenciesState_){case mn.UP_TO_DATE_:return!1;case mn.NOT_TRACKING_:case mn.STALE_:return!0;case mn.POSSIBLY_STALE_:{for(var t=PI(!0),r=fd(),n=e.observing_,i=n.length,o=0;o<i;o++){var u=n[o];if(gw(u)){if(jt.disableErrorBoundaries)u.get();else try{u.get()}catch{return Tc(r),Yg(t),!0}if(e.dependenciesState_===mn.STALE_)return Tc(r),Yg(t),!0}}return x6(e),Tc(r),Yg(t),!1}}}function y6(e,t,r){var n=PI(!0);x6(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++jt.runId;var i=jt.trackingDerivation;jt.trackingDerivation=e,jt.inBatch++;var o;if(jt.disableErrorBoundaries===!0)o=t.call(r);else try{o=t.call(r)}catch(u){o=new px(u)}return jt.inBatch--,jt.trackingDerivation=i,Fte(e),Yg(n),o}function Fte(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=mn.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,u=0;u<o;u++){var a=r[u];a.diffValue===0&&(a.diffValue=1,i!==u&&(r[i]=a),i++),a.dependenciesState_>n&&(n=a.dependenciesState_)}for(r.length=i,e.newObserving_=null,o=t.length;o--;){var p=t[o];p.diffValue===0&&w6(p,e),p.diffValue=0}for(;i--;){var m=r[i];m.diffValue===1&&(m.diffValue=0,jte(m,e))}n!==mn.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function nk(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)w6(t[r],e);e.dependenciesState_=mn.NOT_TRACKING_}function _6(e){var t=fd();try{return e()}finally{Tc(t)}}function fd(){var e=jt.trackingDerivation;return jt.trackingDerivation=null,e}function Tc(e){jt.trackingDerivation=e}function PI(e){var t=jt.allowStateReads;return jt.allowStateReads=e,t}function Yg(e){jt.allowStateReads=e}function x6(e){if(e.dependenciesState_!==mn.UP_TO_DATE_){e.dependenciesState_=mn.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=mn.UP_TO_DATE_}}var f1=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},p1=!0,b6=!1,jt=function(){var e=cw();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(p1=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new f1().version&&(p1=!1),p1?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new f1):(setTimeout(function(){b6||dn(35)},1),new f1)}();function Nte(){if((jt.pendingReactions.length||jt.inBatch||jt.isRunningReactions)&&dn(36),b6=!0,p1){var e=cw();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),jt=new f1}}function jte(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function w6(e,t){e.observers_.delete(t),e.observers_.size===0&&S6(e)}function S6(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,jt.pendingUnobservations.push(e))}function ms(){jt.inBatch++}function gs(){if(--jt.inBatch===0){k6();for(var e=jt.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof rl&&r.suspend_())}jt.pendingUnobservations=[]}}function C6(e){var t=jt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&jt.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&jt.inBatch>0&&S6(e),!1)}function T6(e){e.lowestObserverState_!==mn.STALE_&&(e.lowestObserverState_=mn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===mn.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=mn.STALE_}))}function Vte(e){e.lowestObserverState_!==mn.STALE_&&(e.lowestObserverState_=mn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===mn.POSSIBLY_STALE_?t.dependenciesState_=mn.STALE_:t.dependenciesState_===mn.UP_TO_DATE_&&(e.lowestObserverState_=mn.UP_TO_DATE_)}))}function Ute(e){e.lowestObserverState_===mn.UP_TO_DATE_&&(e.lowestObserverState_=mn.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===mn.UP_TO_DATE_&&(t.dependenciesState_=mn.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Vl=function(){function e(r,n,i,o){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=mn.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=fx.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,jt.pendingReactions.push(this),k6())},t.runReaction_=function(){if(!this.isDisposed){ms(),this.isScheduled=!1;var n=jt.trackingContext;if(jt.trackingContext=this,rk(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}jt.trackingContext=n,gs()}},t.track=function(n){if(!this.isDisposed){ms(),this.isRunning=!0;var i=jt.trackingContext;jt.trackingContext=this;var o=y6(this,n,void 0);jt.trackingContext=i,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&nk(this),d1(o)&&this.reportExceptionInDerivation_(o.cause),gs()}},t.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(jt.disableErrorBoundaries)throw n;var o="[mobx] uncaught error in '"+this+"'";jt.suppressReactionErrors||console.error(o,n),jt.globalReactionErrorHandlers.forEach(function(u){return u(n,i)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(ms(),nk(this),gs()))},t.getDisposer_=function(n){var i=this,o=function u(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",u)};return n==null||n.addEventListener==null||n.addEventListener("abort",o),o[wr]=this,o},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){},Wp(e,[{key:"isDisposed",get:function(){return La(this.flags_,e.isDisposedMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isDisposedMask_,n)}},{key:"isScheduled",get:function(){return La(this.flags_,e.isScheduledMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isScheduledMask_,n)}},{key:"isTrackPending",get:function(){return La(this.flags_,e.isTrackPendingMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isTrackPendingMask_,n)}},{key:"isRunning",get:function(){return La(this.flags_,e.isRunningMask_)},set:function(n){this.flags_=Oa(this.flags_,e.isRunningMask_,n)}},{key:"diffValue",get:function(){return La(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=Oa(this.flags_,e.diffValueMask_,n===1)}}])}();Vl.isDisposedMask_=1;Vl.isScheduledMask_=2;Vl.isTrackPendingMask_=4;Vl.isRunningMask_=8;Vl.diffValueMask_=16;var Hte=100,ik=function(t){return t()};function k6(){jt.inBatch>0||jt.isRunningReactions||ik(Gte)}function Gte(){jt.isRunningReactions=!0;for(var e=jt.pendingReactions,t=0;e.length>0;){++t===Hte&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}jt.isRunningReactions=!1}var mx=dd("Reaction",Vl);function qte(e){var t=ik;ik=function(n){return e(function(){return t(n)})}}function Qg(){return!1}function Wte(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var E6="action",Zte="action.bound",I6="autoAction",Kte="autoAction.bound",Xte="<unnamed action>",ok=Ry(E6),Jte=Ry(Zte,{bound:!0}),ak=Ry(I6,{autoAction:!0}),Yte=Ry(Kte,{autoAction:!0,bound:!0});function M6(e){var t=function(n,i){if(tl(n))return Yh(n.name||Xte,n,e);if(tl(i))return Yh(n,i,e);if(Ay(i))return(e?ak:ok).decorate_20223_(n,i);if(Kh(i))return Py(n,i,e?ak:ok);if(Kh(n))return Ol(Ry(e?I6:E6,{name:n,autoAction:e}))};return t}var Sn=M6(!1);Object.assign(Sn,ok);var Rv=M6(!0);Object.assign(Rv,ak);Sn.bound=Ol(Jte);Rv.bound=Ol(Yte);function Dv(e){return tl(e)&&e.isMobxAction===!0}function Qte(e,t){var r,n,i,o;t===void 0&&(t=EI);var u=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",a=!t.scheduler&&!t.delay,p;if(a)p=new Vl(u,function(){this.track(C)},t.onError,t.requiresObservable);else{var m=P6(t),w=!1;p=new Vl(u,function(){w||(w=!0,m(function(){w=!1,p.isDisposed||p.track(C)}))},t.onError,t.requiresObservable)}function C(){e(p)}return(i=t)!=null&&(i=i.signal)!=null&&i.aborted||p.schedule_(),p.getDisposer_((o=t)==null?void 0:o.signal)}var ere=function(t){return t()};function P6(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ere}function bS(e,t,r){var n,i,o;r===void 0&&(r=EI);var u=(n=r.name)!=null?n:"Reaction",a=Sn(u,r.onError?tre(r.onError,t):t),p=!r.scheduler&&!r.delay,m=P6(r),w=!0,C=!1,T,P=r.compareStructural?Ep.structural:r.equals||Ep.default,R=new Vl(u,function(){w||p?$():C||(C=!0,m($))},r.onError,r.requiresObservable);function $(){if(C=!1,!R.isDisposed){var H=!1,D=T;R.track(function(){var O=Bte(!1,function(){return e(R)});H=w||!P(T,O),T=O}),(w&&r.fireImmediately||!w&&H)&&a(T,D,R),w=!1}}return(i=r)!=null&&(i=i.signal)!=null&&i.aborted||R.schedule_(),R.getDisposer_((o=r)==null?void 0:o.signal)}function tre(e,t){return function(){try{return t.apply(this,arguments)}catch(r){e.call(this,r)}}}var rre="onBO",nre="onBUO";function ire(e,t,r){return R6(rre,e,t,r)}function A6(e,t,r){return R6(nre,e,t,r)}function R6(e,t,r,n){var i=yx(t),o=tl(n)?n:r,u=e+"L";return i[u]?i[u].add(o):i[u]=new Set([o]),function(){var a=i[u];a&&(a.delete(o),a.size===0&&delete i[u])}}var ore="never",L_="always",are="observed";function sre(e){e.isolateGlobalState===!0&&Nte();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(jt.useProxies=t===L_?!0:t===ore?!1:typeof Proxy<"u"),t==="ifavailable"&&(jt.verifyProxies=!0),r!==void 0){var n=r===L_?L_:r===are;jt.enforceActions=n,jt.allowStateChanges=!(n===!0||n===L_)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(jt[i]=!!e[i])}),jt.allowStateReads=!jt.observableRequiresReaction,e.reactionScheduler&&qte(e.reactionScheduler)}function D6(e,t,r,n){var i=Nee(t);return Ku(function(){var o=md(e,n)[wr];kp(i).forEach(function(u){o.extend_(u,i[u],r&&u in r?r[u]:!0)})}),e}function lre(e,t){return z6(yx(e,t))}function z6(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=cre(e.observing_).map(z6)),t}function cre(e){return Array.from(new Set(e))}var ure=0;function L6(){this.message="FLOW_CANCELLED"}L6.prototype=Object.create(Error.prototype);var wS=h6("flow"),hre=h6("flow.bound",{bound:!0}),Ip=Object.assign(function(t,r){if(Ay(r))return wS.decorate_20223_(t,r);if(Kh(r))return Py(t,r,wS);var n=t,i=n.name||"<unnamed flow>",o=function(){var a=this,p=arguments,m=++ure,w=Sn(i+" - runid: "+m+" - init",n).apply(a,p),C,T=void 0,P=new Promise(function(R,$){var H=0;C=$;function D(Q){T=void 0;var V;try{V=Sn(i+" - runid: "+m+" - yield "+H++,w.next).call(w,Q)}catch(F){return $(F)}L(V)}function O(Q){T=void 0;var V;try{V=Sn(i+" - runid: "+m+" - yield "+H++,w.throw).call(w,Q)}catch(F){return $(F)}L(V)}function L(Q){if(tl(Q==null?void 0:Q.then)){Q.then(L,$);return}return Q.done?R(Q.value):(T=Promise.resolve(Q.value),T.then(D,O))}D(void 0)});return P.cancel=Sn(i+" - runid: "+m+" - cancel",function(){try{T&&M5(T);var R=w.return(void 0),$=Promise.resolve(R.value);$.then(Ff,Ff),M5($),C(new L6)}catch(H){C(H)}}),P};return o.isMobXFlow=!0,o},wS);Ip.bound=Ol(hre);function M5(e){tl(e.cancel)&&e.cancel()}function zv(e){return(e==null?void 0:e.isMobXFlow)===!0}function dre(e,t){return e?yw(e)||!!e[wr]||II(e)||mx(e)||gw(e):!1}function O6(e){return dre(e)}function yc(e,t){t===void 0&&(t=void 0),ms();try{return e.apply(t)}finally{gs()}}function ff(e){return e[wr]}var fre={has:function(t,r){return ff(t).has_(r)},get:function(t,r){return ff(t).get_(r)},set:function(t,r,n){var i;return Kh(r)?(i=ff(t).set_(r,n,!0))!=null?i:!0:!1},deleteProperty:function(t,r){var n;return Kh(r)?(n=ff(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var i;return(i=ff(t).defineProperty_(r,n))!=null?i:!0},ownKeys:function(t){return ff(t).ownKeys_()},preventExtensions:function(t){dn(13)}};function pre(e,t){var r,n;return r6(),e=md(e,t),(n=(r=e[wr]).proxy_)!=null?n:r.proxy_=new Proxy(e,fre)}function ds(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function zy(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),n6(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function fs(e,t){var r=fd();try{for(var n=[].concat(e.interceptors_||[]),i=0,o=n.length;i<o&&(t=n[i](t),t&&!t.type&&dn(14),!!t);i++);return t}finally{Tc(r)}}function Ks(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function Ly(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),n6(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Xs(e,t){var r=fd(),n=e.changeListeners_;if(n){n=n.slice();for(var i=0,o=n.length;i<o;i++)n[i](t);Tc(r)}}function mre(e,t,r){return Ku(function(){var n,i=md(e,r)[wr];(n=t)!=null||(t=Gee(e)),kp(t).forEach(function(o){return i.make_(o,t[o])})}),e}var SS=Symbol("mobx-keys");function AI(e,t,r){return zc(e)?D6(e,e,t,r):(Ku(function(){var n=md(e,r)[wr];if(!e[SS]){var i=Object.getPrototypeOf(e),o=new Set([].concat(kp(e),kp(i)));o.delete("constructor"),o.delete(wr),My(i,SS,o)}e[SS].forEach(function(u){return n.make_(u,t&&u in t?t[u]:!0)})}),e)}var P5="splice",$l="update",gre=1e4,vre={get:function(t,r){var n=t[wr];return r===wr?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):Cc(gx,r)?gx[r]:t[r]},set:function(t,r,n){var i=t[wr];return r==="length"&&i.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:i.set_(parseInt(r),n),!0},preventExtensions:function(){dn(15)}},RI=function(){function e(r,n,i,o){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new Zu(r),this.enhancer_=function(u,a){return n(u,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return zy(this,n)},t.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ly(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&dn("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var o=new Array(n-i),u=0;u<n-i;u++)o[u]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(n,i-n)},t.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&dn(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&U6(n+i+1)},t.spliceWithArray_=function(n,i,o){var u=this;this.atom_;var a=this.values_.length;if(n===void 0?n=0:n>a?n=a:n<0&&(n=Math.max(0,a+n)),arguments.length===1?i=a-n:i==null?i=0:i=Math.max(0,Math.min(i,a-n)),o===void 0&&(o=YT),ds(this)){var p=fs(this,{object:this.proxy_,type:P5,index:n,removedCount:i,added:o});if(!p)return YT;i=p.removedCount,o=p.added}if(o=o.length===0?o:o.map(function(C){return u.enhancer_(C,void 0)}),this.legacyMode_){var m=o.length-i;this.updateArrayLength_(a,m)}var w=this.spliceItemsIntoValues_(n,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(n,o,w),this.dehanceValues_(w)},t.spliceItemsIntoValues_=function(n,i,o){if(o.length<gre){var u;return(u=this.values_).splice.apply(u,[n,i].concat(o))}else{var a=this.values_.slice(n,n+i),p=this.values_.slice(n+i);this.values_.length+=o.length-i;for(var m=0;m<o.length;m++)this.values_[n+m]=o[m];for(var w=0;w<p.length;w++)this.values_[n+o.length+w]=p[w];return a}},t.notifyArrayChildUpdate_=function(n,i,o){var u=!this.owned_&&Qg(),a=Ks(this),p=a||u?{observableKind:"array",object:this.proxy_,type:$l,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),a&&Xs(this,p)},t.notifyArraySplice_=function(n,i,o){var u=!this.owned_&&Qg(),a=Ks(this),p=a||u?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:P5,index:n,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&Xs(this,p)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,i){var o=this.values_;if(this.legacyMode_&&n>o.length&&dn(17,n,o.length),n<o.length){this.atom_;var u=o[n];if(ds(this)){var a=fs(this,{type:$l,object:this.proxy_,index:n,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,u);var p=i!==u;p&&(o[n]=i,this.notifyArrayChildUpdate_(n,i,u))}else{for(var m=new Array(n+1-o.length),w=0;w<m.length-1;w++)m[w]=void 0;m[m.length-1]=i,this.spliceWithArray_(o.length,0,m)}},e}();function yre(e,t,r,n){return r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),r6(),Ku(function(){var i=new RI(r,t,n,!1);o6(i.values_,wr,i);var o=new Proxy(i.values_,vre);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o})}var gx={clear:function(){return this.splice(0)},replace:function(t){var r=this[wr];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var u=this[wr];switch(arguments.length){case 0:return[];case 1:return u.spliceWithArray_(t);case 2:return u.spliceWithArray_(t,r)}return u.spliceWithArray_(t,r,i)},spliceWithArray:function(t,r,n){return this[wr].spliceWithArray_(t,r,n)},push:function(){for(var t=this[wr],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[wr].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[wr],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return jt.trackingDerivation&&dn(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){jt.trackingDerivation&&dn(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[wr],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};Vn("at",Xa);Vn("concat",Xa);Vn("flat",Xa);Vn("includes",Xa);Vn("indexOf",Xa);Vn("join",Xa);Vn("lastIndexOf",Xa);Vn("slice",Xa);Vn("toString",Xa);Vn("toLocaleString",Xa);Vn("toSorted",Xa);Vn("toSpliced",Xa);Vn("with",Xa);Vn("every",sl);Vn("filter",sl);Vn("find",sl);Vn("findIndex",sl);Vn("findLast",sl);Vn("findLastIndex",sl);Vn("flatMap",sl);Vn("forEach",sl);Vn("map",sl);Vn("some",sl);Vn("toReversed",sl);Vn("reduce",$6);Vn("reduceRight",$6);function Vn(e,t){typeof Array.prototype[e]=="function"&&(gx[e]=t(e))}function Xa(e){return function(){var t=this[wr];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function sl(e){return function(t,r){var n=this,i=this[wr];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[e](function(u,a){return t.call(r,u,a,n)})}}function $6(e){return function(){var t=this,r=this[wr];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(o,u,a){return i(o,u,a,t)},n[e].apply(n,arguments)}}var _re=dd("ObservableArrayAdministration",RI);function vw(e){return hw(e)&&_re(e[wr])}var xre={},_u="add",vx="delete",B6=function(){function e(r,n,i){var o=this;n===void 0&&(n=Jh),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[wr]=xre,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,tl(Map)||dn(18),Ku(function(){o.keysAtom_=c6("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,r&&o.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var i=this;if(!jt.trackingDerivation)return this.has_(n);var o=this.hasMap_.get(n);if(!o){var u=o=new Fh(this.has_(n),dw,"ObservableMap.key?",!1);this.hasMap_.set(n,u),A6(u,function(){return i.hasMap_.delete(n)})}return o.get()},t.set=function(n,i){var o=this.has_(n);if(ds(this)){var u=fs(this,{type:o?$l:_u,object:this,newValue:i,name:n});if(!u)return this;i=u.newValue}return o?this.updateValue_(n,i):this.addValue_(n,i),this},t.delete=function(n){var i=this;if(this.keysAtom_,ds(this)){var o=fs(this,{type:vx,object:this,name:n});if(!o)return!1}if(this.has_(n)){var u=Qg(),a=Ks(this),p=a||u?{observableKind:"map",debugObjectName:this.name_,type:vx,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return yc(function(){var m;i.keysAtom_.reportChanged(),(m=i.hasMap_.get(n))==null||m.setNewValue_(!1);var w=i.data_.get(n);w.setNewValue_(void 0),i.data_.delete(n)}),a&&Xs(this,p),!0}return!1},t.updateValue_=function(n,i){var o=this.data_.get(n);if(i=o.prepareNewValue_(i),i!==jt.UNCHANGED){var u=Qg(),a=Ks(this),p=a||u?{observableKind:"map",debugObjectName:this.name_,type:$l,object:this,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),a&&Xs(this,p)}},t.addValue_=function(n,i){var o=this;this.keysAtom_,yc(function(){var m,w=new Fh(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(n,w),i=w.value_,(m=o.hasMap_.get(n))==null||m.setNewValue_(!0),o.keysAtom_.reportChanged()});var u=Qg(),a=Ks(this),p=a||u?{observableKind:"map",debugObjectName:this.name_,type:_u,object:this,name:n,newValue:i}:null;a&&Xs(this,p)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,i=this.keys();return A5({next:function(){var u=i.next(),a=u.done,p=u.value;return{done:a,value:a?void 0:n.get(p)}}})},t.entries=function(){var n=this,i=this.keys();return A5({next:function(){var u=i.next(),a=u.done,p=u.value;return{done:a,value:a?void 0:[p,n.get(p)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(n,i){for(var o=Nf(this),u;!(u=o()).done;){var a=u.value,p=a[0],m=a[1];n.call(i,m,p,this)}},t.merge=function(n){var i=this;return pd(n)&&(n=new Map(n)),yc(function(){zc(n)?Fee(n).forEach(function(o){return i.set(o,n[o])}):Array.isArray(n)?n.forEach(function(o){var u=o[0],a=o[1];return i.set(u,a)}):qp(n)?(Bee(n)||dn(19,n),n.forEach(function(o,u){return i.set(u,o)})):n!=null&&dn(20,n)}),this},t.clear=function(){var n=this;yc(function(){_6(function(){for(var i=Nf(n.keys()),o;!(o=i()).done;){var u=o.value;n.delete(u)}})})},t.replace=function(n){var i=this;return yc(function(){for(var o=bre(n),u=new Map,a=!1,p=Nf(i.data_.keys()),m;!(m=p()).done;){var w=m.value;if(!o.has(w)){var C=i.delete(w);if(C)a=!0;else{var T=i.data_.get(w);u.set(w,T)}}}for(var P=Nf(o.entries()),R;!(R=P()).done;){var $=R.value,H=$[0],D=$[1],O=i.data_.has(H);if(i.set(H,D),i.data_.has(H)){var L=i.data_.get(H);u.set(H,L),O||(a=!0)}}if(!a)if(i.data_.size!==u.size)i.keysAtom_.reportChanged();else for(var Q=i.data_.keys(),V=u.keys(),F=Q.next(),X=V.next();!F.done;){if(F.value!==X.value){i.keysAtom_.reportChanged();break}F=Q.next(),X=V.next()}i.data_=u}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,i){return Ly(this,n)},t.intercept_=function(n){return zy(this,n)},Wp(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),pd=dd("ObservableMap",B6);function A5(e){return e[Symbol.toStringTag]="MapIterator",LI(e)}function bre(e){if(qp(e)||pd(e))return e;if(Array.isArray(e))return new Map(e);if(zc(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return dn(21,e)}var wre={},F6=function(){function e(r,n,i){var o=this;n===void 0&&(n=Jh),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[wr]=wre,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,tl(Set)||dn(22),this.enhancer_=function(u,a){return n(u,a,i)},Ku(function(){o.atom_=c6(o.name_),r&&o.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;yc(function(){_6(function(){for(var i=Nf(n.data_.values()),o;!(o=i()).done;){var u=o.value;n.delete(u)}})})},t.forEach=function(n,i){for(var o=Nf(this),u;!(u=o()).done;){var a=u.value;n.call(i,a,a,this)}},t.add=function(n){var i=this;if(this.atom_,ds(this)){var o=fs(this,{type:_u,object:this,newValue:n});if(!o)return this}if(!this.has(n)){yc(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var u=!1,a=Ks(this),p=a||u?{observableKind:"set",debugObjectName:this.name_,type:_u,object:this,newValue:n}:null;a&&Xs(this,p)}return this},t.delete=function(n){var i=this;if(ds(this)){var o=fs(this,{type:vx,object:this,oldValue:n});if(!o)return!1}if(this.has(n)){var u=!1,a=Ks(this),p=a||u?{observableKind:"set",debugObjectName:this.name_,type:vx,object:this,oldValue:n}:null;return yc(function(){i.atom_.reportChanged(),i.data_.delete(n)}),a&&Xs(this,p),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,i=Array.from(this.keys()),o=Array.from(this.values());return R5({next:function(){var a=n;return n+=1,a<o.length?{value:[i[a],o[a]],done:!1}:{value:void 0,done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,i=0,o=Array.from(this.data_.values());return R5({next:function(){return i<o.length?{value:n.dehanceValue_(o[i++]),done:!1}:{value:void 0,done:!0}}})},t.intersection=function(n){if(vc(n)&&!El(n))return n.intersection(this);var i=new Set(this);return i.intersection(n)},t.union=function(n){if(vc(n)&&!El(n))return n.union(this);var i=new Set(this);return i.union(n)},t.difference=function(n){return new Set(this).difference(n)},t.symmetricDifference=function(n){if(vc(n)&&!El(n))return n.symmetricDifference(this);var i=new Set(this);return i.symmetricDifference(n)},t.isSubsetOf=function(n){return new Set(this).isSubsetOf(n)},t.isSupersetOf=function(n){return new Set(this).isSupersetOf(n)},t.isDisjointFrom=function(n){if(vc(n)&&!El(n))return n.isDisjointFrom(this);var i=new Set(this);return i.isDisjointFrom(n)},t.replace=function(n){var i=this;return El(n)&&(n=new Set(n)),yc(function(){Array.isArray(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):vc(n)?(i.clear(),n.forEach(function(o){return i.add(o)})):n!=null&&dn("Cannot initialize set from "+n)}),this},t.observe_=function(n,i){return Ly(this,n)},t.intercept_=function(n){return zy(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},Wp(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),El=dd("ObservableSet",F6);function R5(e){return e[Symbol.toStringTag]="SetIterator",LI(e)}var D5=Object.create(null),z5="remove",N6=function(){function e(r,n,i,o){n===void 0&&(n=new Map),o===void 0&&(o=vte),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new Zu("ObservableObject.keys"),this.isPlainObject_=zc(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,i){var o=this.values_.get(n);if(o instanceof rl)return o.set(i),!0;if(ds(this)){var u=fs(this,{type:$l,object:this.proxy_||this.target_,name:n,newValue:i});if(!u)return null;i=u.newValue}if(i=o.prepareNewValue_(i),i!==jt.UNCHANGED){var a=Ks(this),p=!1,m=a||p?{type:$l,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:n,newValue:i}:null;o.setNewValue_(i),a&&Xs(this,m)}return!0},t.get_=function(n){return jt.trackingDerivation&&!Cc(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,i,o){return o===void 0&&(o=!1),Cc(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):o?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(n){if(!jt.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new Fh(n in this.target_,dw,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},t.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var o;if((o=this.target_[Il])!=null&&o[n])return;dn(1,i.annotationType_,this.name_+"."+n.toString())}for(var u=this.target_;u&&u!==uw;){var a=hx(u,n);if(a){var p=i.make_(this,n,a,u);if(p===0)return;if(p===1)break}u=Object.getPrototypeOf(u)}O5(this,i,n)}},t.extend_=function(n,i,o,u){if(u===void 0&&(u=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(n,i,u);var a=o.extend_(this,n,i,u);return a&&O5(this,o,n),a},t.defineProperty_=function(n,i,o){o===void 0&&(o=!1),this.keysAtom_;try{ms();var u=this.delete_(n);if(!u)return u;if(ds(this)){var a=fs(this,{object:this.proxy_||this.target_,name:n,type:_u,newValue:i.value});if(!a)return null;var p=a.newValue;i.value!==p&&(i=Xh({},i,{value:p}))}if(o){if(!Reflect.defineProperty(this.target_,n,i))return!1}else Ll(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{gs()}return!0},t.defineObservableProperty_=function(n,i,o,u){u===void 0&&(u=!1),this.keysAtom_;try{ms();var a=this.delete_(n);if(!a)return a;if(ds(this)){var p=fs(this,{object:this.proxy_||this.target_,name:n,type:_u,newValue:i});if(!p)return null;i=p.newValue}var m=L5(n),w={configurable:jt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:m.get,set:m.set};if(u){if(!Reflect.defineProperty(this.target_,n,w))return!1}else Ll(this.target_,n,w);var C=new Fh(i,o,"ObservableObject.key",!1);this.values_.set(n,C),this.notifyPropertyAddition_(n,C.value_)}finally{gs()}return!0},t.defineComputedProperty_=function(n,i,o){o===void 0&&(o=!1),this.keysAtom_;try{ms();var u=this.delete_(n);if(!u)return u;if(ds(this)){var a=fs(this,{object:this.proxy_||this.target_,name:n,type:_u,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var p=L5(n),m={configurable:jt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:p.get,set:p.set};if(o){if(!Reflect.defineProperty(this.target_,n,m))return!1}else Ll(this.target_,n,m);this.values_.set(n,new rl(i)),this.notifyPropertyAddition_(n,void 0)}finally{gs()}return!0},t.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Cc(this.target_,n))return!0;if(ds(this)){var o=fs(this,{object:this.proxy_||this.target_,name:n,type:z5});if(!o)return null}try{var u;ms();var a=Ks(this),p=!1,m=this.values_.get(n),w=void 0;if(!m&&(a||p)){var C;w=(C=hx(this.target_,n))==null?void 0:C.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(m&&(this.values_.delete(n),m instanceof Fh&&(w=m.value_),T6(m)),this.keysAtom_.reportChanged(),(u=this.pendingKeys_)==null||(u=u.get(n))==null||u.set(n in this.target_),a||p){var T={type:z5,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:w,name:n};a&&Xs(this,T)}}finally{gs()}return!0},t.observe_=function(n,i){return Ly(this,n)},t.intercept_=function(n){return zy(this,n)},t.notifyPropertyAddition_=function(n,i){var o,u=Ks(this),a=!1;if(u||a){var p=u||a?{type:_u,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;u&&Xs(this,p)}(o=this.pendingKeys_)==null||(o=o.get(n))==null||o.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),kp(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function md(e,t){var r;if(Cc(e,wr))return e;var n=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",i=new N6(e,new Map,String(n),Ite(t));return My(e,wr,i),e}var Sre=dd("ObservableObjectAdministration",N6);function L5(e){return D5[e]||(D5[e]={get:function(){return this[wr].getObservablePropValue_(e)},set:function(r){return this[wr].setObservablePropValue_(e,r)}})}function yw(e){return hw(e)?Sre(e[wr]):!1}function O5(e,t,r){var n;(n=e.target_[Il])==null||delete n[r]}var Cre=V6(0),Tre=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),CS=0,j6=function(){};function kre(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}kre(j6,Array.prototype);var DI=function(e){function t(n,i,o,u){var a;return o===void 0&&(o="ObservableArray"),u===void 0&&(u=!1),a=e.call(this)||this,Ku(function(){var p=new RI(o,i,u,!0);p.proxy_=a,o6(a,wr,p),n&&n.length&&a.spliceWithArray(0,0,n),Tre&&Object.defineProperty(a,"0",Cre)}),a}l6(t,e);var r=t.prototype;return r.concat=function(){this[wr].atom_.reportObserved();for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return Array.prototype.concat.apply(this.slice(),o.map(function(a){return vw(a)?a.slice():a}))},r[Symbol.iterator]=function(){var n=this,i=0;return LI({next:function(){return i<n.length?{value:n[i++],done:!1}:{done:!0,value:void 0}}})},Wp(t,[{key:"length",get:function(){return this[wr].getArrayLength_()},set:function(i){this[wr].setArrayLength_(i)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(j6);Object.entries(gx).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&My(DI.prototype,t,r)});function V6(e){return{enumerable:!1,configurable:!0,get:function(){return this[wr].get_(e)},set:function(r){this[wr].set_(e,r)}}}function Ere(e){Ll(DI.prototype,""+e,V6(e))}function U6(e){if(e>CS){for(var t=CS;t<e+100;t++)Ere(t);CS=e}}U6(1e3);function Ire(e,t,r){return new DI(e,t,r)}function yx(e,t){if(typeof e=="object"&&e!==null){if(vw(e))return t!==void 0&&dn(23),e[wr].atom_;if(El(e))return e.atom_;if(pd(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||dn(25,t,sk(e)),r}if(yw(e)){if(!t)return dn(26);var n=e[wr].values_.get(t);return n||dn(27,t,sk(e)),n}if(II(e)||gw(e)||mx(e))return e}else if(tl(e)&&mx(e[wr]))return e[wr];dn(28)}function Mre(e,t){if(e||dn(29),II(e)||gw(e)||mx(e)||pd(e)||El(e))return e;if(e[wr])return e[wr];dn(24,e)}function sk(e,t){var r;if(t!==void 0)r=yx(e,t);else{if(Dv(e))return e.name;yw(e)||pd(e)||El(e)?r=Mre(e):r=yx(e)}return r.name_}function Ku(e){var t=fd(),r=pw(!0);ms();try{return e()}finally{gs(),mw(r),Tc(t)}}var $5=uw.toString;function zI(e,t,r){return r===void 0&&(r=-1),lk(e,t,r)}function lk(e,t,r,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var u=$5.call(e);if(u!==$5.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=B5(e),t=B5(t);var a=u==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var p=e.constructor,m=t.constructor;if(p!==m&&!(tl(p)&&p instanceof p&&tl(m)&&m instanceof m)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],i=i||[];for(var w=n.length;w--;)if(n[w]===e)return i[w]===t;if(n.push(e),i.push(t),a){if(w=e.length,w!==t.length)return!1;for(;w--;)if(!lk(e[w],t[w],r-1,n,i))return!1}else{var C=Object.keys(e),T;if(w=C.length,Object.keys(t).length!==w)return!1;for(;w--;)if(T=C[w],!(Cc(t,T)&&lk(e[T],t[T],r-1,n,i)))return!1}return n.pop(),i.pop(),!0}function B5(e){return vw(e)?e.slice():qp(e)||pd(e)||vc(e)||El(e)?Array.from(e.entries()):e}var F5,Pre=((F5=cw().Iterator)==null?void 0:F5.prototype)||{};function LI(e){return e[Symbol.iterator]=Are,Object.assign(Object.create(Pre),e)}function Are(){return this}["Symbol","Map","Set"].forEach(function(e){var t=cw();typeof t[e]>"u"&&dn("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Wte,extras:{getDebugName:sk},$mobx:wr});if(!z.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!mre)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Rre(e){e()}function Dre(e){e||(e=Rre),sre({reactionScheduler:e})}function zre(e){return lre(e)}var Lre=1e4,Ore=1e4,$re=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=Lre),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var i=Date.now();r.registrations.forEach(function(o,u){i-o.registeredAt>=n&&(r.finalize(o.value),r.registrations.delete(u))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){this.registrations.set(n,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Ore))}}),e}(),Bre=typeof FinalizationRegistry<"u"?FinalizationRegistry:$re,ck=new Bre(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),H6={exports:{}},G6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=z;function Fre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nre=typeof Object.is=="function"?Object.is:Fre,jre=Mp.useState,Vre=Mp.useEffect,Ure=Mp.useLayoutEffect,Hre=Mp.useDebugValue;function Gre(e,t){var r=t(),n=jre({inst:{value:r,getSnapshot:t}}),i=n[0].inst,o=n[1];return Ure(function(){i.value=r,i.getSnapshot=t,TS(i)&&o({inst:i})},[e,r,t]),Vre(function(){return TS(i)&&o({inst:i}),e(function(){TS(i)&&o({inst:i})})},[e]),Hre(r),r}function TS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Nre(e,r)}catch{return!0}}function qre(e,t){return t()}var Wre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qre:Gre;G6.useSyncExternalStore=Mp.useSyncExternalStore!==void 0?Mp.useSyncExternalStore:Wre;H6.exports=G6;var Zre=H6.exports;function N5(e){e.reaction=new Vl("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function Kre(e,t){t===void 0&&(t="observed");var r=Gs.useRef(null);if(!r.current){var n={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(a){return ck.unregister(n),n.onStoreChange=a,n.reaction||(N5(n),n.stateVersion=Symbol()),function(){var p;n.onStoreChange=null,(p=n.reaction)===null||p===void 0||p.dispose(),n.reaction=null}},getSnapshot:function(){return n.stateVersion}};r.current=n}var i=r.current;i.reaction||(N5(i),ck.register(r,i,i)),Gs.useDebugValue(i.reaction,zre),Zre.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot);var o,u;if(i.reaction.track(function(){try{o=e()}catch(a){u=a}}),u)throw u;return o}var kS,ES,q6=typeof Symbol=="function"&&Symbol.for,Xre=(ES=(kS=Object.getOwnPropertyDescriptor(function(){},"name"))===null||kS===void 0?void 0:kS.configurable)!==null&&ES!==void 0?ES:!1,j5=q6?Symbol.for("react.forward_ref"):typeof z.forwardRef=="function"&&z.forwardRef(function(e){return null}).$$typeof,V5=q6?Symbol.for("react.memo"):typeof z.memo=="function"&&z.memo(function(e){return null}).$$typeof;function Xo(e,t){var r;if(V5&&e.$$typeof===V5)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var n=(r=void 0)!==null&&r!==void 0?r:!1,i=e,o=e.displayName||e.name;if(j5&&e.$$typeof===j5&&(n=!0,i=e.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var u=function(a,p){return Kre(function(){return i(a,p)},o)};return u.displayName=e.displayName,Xre&&Object.defineProperty(u,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(u.contextTypes=e.contextTypes),n&&(u=z.forwardRef(u)),u=z.memo(u),Yre(e,u),u}var Jre={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function Yre(e,t){Object.keys(e).forEach(function(r){Jre[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var IS;Dre(ld.unstable_batchedUpdates);IS=ck.finalizeAllImmediately;const Qre="modulepreload",ene=function(e){return"/"+e},U5={},tne=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),a=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(r.map(p=>{if(p=ene(p),p in U5)return;U5[p]=!0;const m=p.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const C=document.createElement("link");if(C.rel=m?"stylesheet":Qre,m||(C.as="script"),C.crossOrigin="",C.href=p,a&&C.setAttribute("nonce",a),document.head.appendChild(C),m)return new Promise((T,P)=>{C.addEventListener("load",T),C.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=u,window.dispatchEvent(a),!a.defaultPrevented)throw u}return i.then(u=>{for(const a of u||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},W6=z.createContext(null);function rne(){var e;const t=(e=z.useContext(W6))===null||e===void 0?void 0:e.maps,r=z.useContext(gd);return z.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function nne(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,n=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return r===i&&n===o}function $a(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!$a(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r)if(!t.hasOwnProperty(i)||!$a(e[i],t[i]))return!1;return!0}return!1}function ine(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function H5(e,t){if(!e.getProjection)return;const r=e.getProjection(),n=t.getProjection();$a(r,n)||t.setProjection(r)}function G5(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function q5(e,t){const r=t.viewState||t;let n=!1;if("zoom"in r){const i=e.zoom;e.zoom=r.zoom,n=n||i!==e.zoom}if("bearing"in r){const i=e.bearing;e.bearing=r.bearing,n=n||i!==e.bearing}if("pitch"in r){const i=e.pitch;e.pitch=r.pitch,n=n||i!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(n=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const i=e.center;e.center=new i.constructor(r.longitude,r.latitude),n=n||i!==e.center}return n}const one=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function W5(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const n of e.layers)t[n.id]=n;const r=e.layers.map(n=>{let i=null;"interactive"in n&&(i=Object.assign({},n),delete i.interactive);const o=t[n.ref];if(o){i=i||Object.assign({},n),delete i.ref;for(const u of one)u in o&&(i[u]=o[u])}return i||n});return{...e,layers:r}}var Z5={};const K5={version:8,sources:{},layers:[]},X5={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},MS={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},J5={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ane=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],sne=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Pp{constructor(t,r,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const o=this.props[J5[i.type]];o?o(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[X5[i.type]];o&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const o=this.props[MS[i.type]];o&&o(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=t,this.props=r,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const n=this._updateSettings(t,r);n&&this._createShadowTransform(this._map);const i=this._updateSize(t),o=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(n||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const n=Pp.savedMaps.pop();if(!n)return null;const i=n.map,o=i.getContainer();for(r.className=o.className;o.childNodes.length>0;)r.appendChild(o.childNodes[0]);i._container=r;const u=i._resizeObserver;u&&(u.disconnect(),u.observe(r)),n.setProps({...t,styleDiffing:!1}),i.resize();const{initialViewState:a}=t;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):n._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),n}_initialize(t){const{props:r}=this,{mapStyle:n=K5}=r,i={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||lne()||null,container:t,style:W5(n)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),r.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,r.gl)}const u=new this._MapClass(i);o.padding&&u.setPadding(o.padding),r.cursor&&(u.getCanvas().style.cursor=r.cursor),this._createShadowTransform(u);const a=u._render;u._render=w=>{this._inRender=!0,a.call(u,w),this._inRender=!1};const p=u._renderTaskQueue.run;u._renderTaskQueue.run=w=>{p.call(u._renderTaskQueue,w),this._onBeforeRepaint()},u.on("render",()=>this._onAfterRepaint());const m=u.fire;u.fire=this._fireEvent.bind(this,m),u.on("resize",()=>{this._renderTransform.resize(u.transform.width,u.transform.height)}),u.on("styledata",()=>{this._updateStyleComponents(this.props,{}),H5(u.transform,this._renderTransform)}),u.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in X5)u.on(w,this._onPointerEvent);for(const w in MS)u.on(w,this._onCameraEvent);for(const w in J5)u.on(w,this._onEvent);this._map=u}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Pp.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=ine(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const n=this._map;if(r.width!==n.transform.width||r.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:o,pitch:u,bearing:a}=i,p=n.isMoving();p&&(i.cameraElevationReference="sea");const m=q5(i,{...G5(n.transform),...t});if(p&&(i.cameraElevationReference="ground"),m&&r){const w=this._deferredEvents;w.move=!0,w.zoom||(w.zoom=o!==i.zoom),w.rotate||(w.rotate=a!==i.bearing),w.pitch||(w.pitch=u!==i.pitch)}return p||q5(n.transform,t),m}_updateSettings(t,r){const n=this._map;let i=!1;for(const o of ane)if(o in t&&!$a(t[o],r[o])){i=!0;const u=n[`set${o[0].toUpperCase()}${o.slice(1)}`];u==null||u.call(n,t[o])}return i}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:n=K5,styleDiffing:i=!0}=t,o={diff:i};return"localIdeographFontFamily"in t&&(o.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(W5(n),o),!0}return!1}_updateStyleComponents(t,r){const n=this._map;let i=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!$a(t.light,r.light)&&(i=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!$a(t.fog,r.fog)&&(i=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!$a(t.terrain,r.terrain)&&(!t.terrain||n.getSource(t.terrain.source))&&(i=!0,n.setTerrain(t.terrain))),i}_updateHandlers(t,r){var n,i;const o=this._map;let u=!1;for(const a of sne){const p=(n=t[a])!==null&&n!==void 0?n:!0,m=(i=r[a])!==null&&i!==void 0?i:!0;$a(p,m)||(u=!0,p?o[a].enable(p):o[a].disable())}return u}_queryRenderedFeatures(t){const r=this._map,n=r.transform,{interactiveLayerIds:i=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:i.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=n}}_updateHover(t){var r;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const o=t.type,u=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,a=this._queryRenderedFeatures(t.point),p=a.length>0;!p&&u&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=a,p&&!u&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=o}else this._hoveredFeatures=null}_fireEvent(t,r,n){const i=this._map,o=i.transform,u=typeof r=="string"?r:r.type;return u==="move"&&this._updateViewState(this.props,!1),u in MS&&(typeof r=="object"&&(r.viewState=G5(o)),this._map.isMoving())?(i.transform=this._renderTransform,t.call(i,r,n),i.transform=o,i):(t.call(i,r,n),i)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{H5(this._renderTransform,r),t.transform=r}}}Pp.savedMaps=[];function lne(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Z5.MapboxAccessToken}catch{}try{e=e||Z5.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const cne=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function une(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const i=t.transform;t.transform=e.transform;const o=t.project(n);return t.transform=i,o},unproject:n=>{const i=t.transform;t.transform=e.transform;const o=t.unproject(n);return t.transform=i,o},queryTerrainElevation:(n,i)=>{const o=t.transform;t.transform=e.transform;const u=t.queryTerrainElevation(n,i);return t.transform=o,u},queryRenderedFeatures:(n,i)=>{const o=t.transform;t.transform=e.transform;const u=t.queryRenderedFeatures(n,i);return t.transform=o,u}};for(const n of hne(t))!(n in r)&&!cne.includes(n)&&(r[n]=t[n].bind(t));return r}function hne(e){const t=new Set;let r=e;for(;r;){for(const n of Object.getOwnPropertyNames(r))n[0]!=="_"&&typeof e[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&t.add(n);r=Object.getPrototypeOf(r)}return Array.from(t)}const dne=typeof document<"u"?z.useLayoutEffect:z.useEffect,fne=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function pne(e,t){for(const n of fne)n in t&&(e[n]=t[n]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,n=>{n&&console.error(n)},!0)}const gd=z.createContext(null);function mne(e,t,r){const n=z.useContext(W6),[i,o]=z.useState(null),u=z.useRef(),{current:a}=z.useRef({mapLib:null,map:null});z.useEffect(()=>{const w=e.mapLib;let C=!0,T;return Promise.resolve(w||r).then(P=>{if(!C)return;if(!P)throw new Error("Invalid mapLib");const R="Map"in P?P:P.default;if(!R.Map)throw new Error("Invalid mapLib");if(pne(R,e),!R.supported||R.supported(e))e.reuseMaps&&(T=Pp.reuse(e,u.current)),T||(T=new Pp(R.Map,e,u.current)),a.map=une(T),a.mapLib=R,o(T),n==null||n.onMapMount(a.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(P=>{const{onError:R}=e;R?R({type:"error",target:null,originalEvent:null,error:P}):console.error(P)}),()=>{C=!1,T&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),dne(()=>{i&&i.setProps(e)}),z.useImperativeHandle(t,()=>a.map,[i]);const p=z.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),m={height:"100%"};return z.createElement("div",{id:e.id,ref:u,style:p},i&&z.createElement(gd.Provider,{value:a},z.createElement("div",{"mapboxgl-children":"",style:m},e.children)))}const gne=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function vd(e,t){if(!e||!t)return;const r=e.style;for(const n in t){const i=t[n];Number.isFinite(i)&&!gne.test(n)?r[n]=`${i}px`:r[n]=i}}function vne(e,t){const{map:r,mapLib:n}=z.useContext(gd),i=z.useRef({props:e});i.current.props=e;const o=z.useMemo(()=>{let $=!1;z.Children.forEach(e.children,O=>{O&&($=!0)});const H={...e,element:$?document.createElement("div"):null},D=new n.Marker(H);return D.setLngLat([e.longitude,e.latitude]),D.getElement().addEventListener("click",O=>{var L,Q;(Q=(L=i.current.props).onClick)===null||Q===void 0||Q.call(L,{type:"click",target:D,originalEvent:O})}),D.on("dragstart",O=>{var L,Q;const V=O;V.lngLat=o.getLngLat(),(Q=(L=i.current.props).onDragStart)===null||Q===void 0||Q.call(L,V)}),D.on("drag",O=>{var L,Q;const V=O;V.lngLat=o.getLngLat(),(Q=(L=i.current.props).onDrag)===null||Q===void 0||Q.call(L,V)}),D.on("dragend",O=>{var L,Q;const V=O;V.lngLat=o.getLngLat(),(Q=(L=i.current.props).onDragEnd)===null||Q===void 0||Q.call(L,V)}),D},[]);z.useEffect(()=>(o.addTo(r.getMap()),()=>{o.remove()}),[]);const{longitude:u,latitude:a,offset:p,style:m,draggable:w=!1,popup:C=null,rotation:T=0,rotationAlignment:P="auto",pitchAlignment:R="auto"}=e;return z.useEffect(()=>{vd(o.getElement(),m)},[m]),z.useImperativeHandle(t,()=>o,[]),(o.getLngLat().lng!==u||o.getLngLat().lat!==a)&&o.setLngLat([u,a]),p&&!nne(o.getOffset(),p)&&o.setOffset(p),o.isDraggable()!==w&&o.setDraggable(w),o.getRotation()!==T&&o.setRotation(T),o.getRotationAlignment()!==P&&o.setRotationAlignment(P),o.getPitchAlignment()!==R&&o.setPitchAlignment(R),o.getPopup()!==C&&o.setPopup(C),ld.createPortal(e.children,o.getElement())}const yne=z.memo(z.forwardRef(vne));function Y5(e){return new Set(e?e.trim().split(/\s+/):[])}function _ne(e,t){const{map:r,mapLib:n}=z.useContext(gd),i=z.useMemo(()=>document.createElement("div"),[]),o=z.useRef({props:e});o.current.props=e;const u=z.useMemo(()=>{const a={...e},p=new n.Popup(a);return p.setLngLat([e.longitude,e.latitude]),p.once("open",m=>{var w,C;(C=(w=o.current.props).onOpen)===null||C===void 0||C.call(w,m)}),p},[]);if(z.useEffect(()=>{const a=p=>{var m,w;(w=(m=o.current.props).onClose)===null||w===void 0||w.call(m,p)};return u.on("close",a),u.setDOMContent(i).addTo(r.getMap()),()=>{u.off("close",a),u.isOpen()&&u.remove()}},[]),z.useEffect(()=>{vd(u.getElement(),e.style)},[e.style]),z.useImperativeHandle(t,()=>u,[]),u.isOpen()&&((u.getLngLat().lng!==e.longitude||u.getLngLat().lat!==e.latitude)&&u.setLngLat([e.longitude,e.latitude]),e.offset&&!$a(u.options.offset,e.offset)&&u.setOffset(e.offset),(u.options.anchor!==e.anchor||u.options.maxWidth!==e.maxWidth)&&(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){const a=Y5(u.options.className),p=Y5(e.className);for(const m of a)p.has(m)||u.removeClassName(m);for(const m of p)a.has(m)||u.addClassName(m);u.options.className=e.className}return ld.createPortal(e.children,i)}z.memo(z.forwardRef(_ne));function Nc(e,t,r,n){const i=z.useContext(gd),o=z.useMemo(()=>e(i),[]);return z.useEffect(()=>{const u=t,a=typeof t=="function"?t:null,{map:p}=i;return p.hasControl(o)||p.addControl(o,u==null?void 0:u.position),()=>{a&&a(i),p.hasControl(o)&&p.removeControl(o)}},[]),o}function xne(e){const t=Nc(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return z.useEffect(()=>{vd(t._container,e.style)},[e.style]),null}const bne=z.memo(xne);function wne(e){const t=Nc(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return z.useEffect(()=>{vd(t._controlContainer,e.style)},[e.style]),null}const Sne=z.memo(wne);function Cne(e,t){const r=z.useRef({props:e}),n=Nc(({mapLib:i})=>{const o=new i.GeolocateControl(e),u=o._setupUI;return o._setupUI=a=>{o._container.hasChildNodes()||u(a)},o.on("geolocate",a=>{var p,m;(m=(p=r.current.props).onGeolocate)===null||m===void 0||m.call(p,a)}),o.on("error",a=>{var p,m;(m=(p=r.current.props).onError)===null||m===void 0||m.call(p,a)}),o.on("outofmaxbounds",a=>{var p,m;(m=(p=r.current.props).onOutOfMaxBounds)===null||m===void 0||m.call(p,a)}),o.on("trackuserlocationstart",a=>{var p,m;(m=(p=r.current.props).onTrackUserLocationStart)===null||m===void 0||m.call(p,a)}),o.on("trackuserlocationend",a=>{var p,m;(m=(p=r.current.props).onTrackUserLocationEnd)===null||m===void 0||m.call(p,a)}),o},{position:e.position});return r.current.props=e,z.useImperativeHandle(t,()=>n,[]),z.useEffect(()=>{vd(n._container,e.style)},[e.style]),null}z.memo(z.forwardRef(Cne));function Tne(e){const t=Nc(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return z.useEffect(()=>{vd(t._container,e.style)},[e.style]),null}const kne=z.memo(Tne);function Ene(e){const t=Nc(({mapLib:o})=>new o.ScaleControl(e),{position:e.position}),r=z.useRef(e),n=r.current;r.current=e;const{style:i}=e;return e.maxWidth!==void 0&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==n.unit&&t.setUnit(e.unit),z.useEffect(()=>{vd(t._container,i)},[i]),null}z.memo(Ene);function _x(e,t){if(!e)throw new Error(t)}function Ine(e,t,r,n){if(_x(r.id===n.id,"layer id changed"),_x(r.type===n.type,"layer type changed"),r.type==="custom"||n.type==="custom")return;const{layout:i={},paint:o={},filter:u,minzoom:a,maxzoom:p,beforeId:m}=r;if(m!==n.beforeId&&e.moveLayer(t,m),i!==n.layout){const w=n.layout||{};for(const C in i)$a(i[C],w[C])||e.setLayoutProperty(t,C,i[C]);for(const C in w)i.hasOwnProperty(C)||e.setLayoutProperty(t,C,void 0)}if(o!==n.paint){const w=n.paint||{};for(const C in o)$a(o[C],w[C])||e.setPaintProperty(t,C,o[C]);for(const C in w)o.hasOwnProperty(C)||e.setPaintProperty(t,C,void 0)}$a(u,n.filter)||e.setFilter(t,u),(a!==n.minzoom||p!==n.maxzoom)&&e.setLayerZoomRange(t,a,p)}function Mne(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const n={...r,id:t};delete n.beforeId,e.addLayer(n,r.beforeId)}}let Pne=0;function Ane(e){const t=z.useContext(gd).map.getMap(),r=z.useRef(e),[,n]=z.useState(0),i=z.useMemo(()=>e.id||`jsx-layer-${Pne++}`,[]);if(z.useEffect(()=>{if(t){const u=()=>n(a=>a+1);return t.on("styledata",u),u(),()=>{t.off("styledata",u),t.style&&t.style._loaded&&t.getLayer(i)&&t.removeLayer(i)}}},[t]),t&&t.style&&t.getLayer(i))try{Ine(t,i,e,r.current)}catch(u){console.warn(u)}else Mne(t,i,e);return r.current=e,null}let Rne=0;function Dne(e,t,r){if(e.style&&e.style._loaded){const n={...r};return delete n.id,delete n.children,e.addSource(t,n),e.getSource(t)}return null}function zne(e,t,r){_x(t.id===r.id,"source id changed"),_x(t.type===r.type,"source type changed");let n="",i=0;for(const u in t)u!=="children"&&u!=="id"&&!$a(r[u],t[u])&&(n=u,i++);if(!i)return;const o=t.type;o==="geojson"?e.setData(t.data):o==="image"?e.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in e&&i===1&&n==="coordinates"?e.setCoordinates(t.coordinates):"setUrl"in e&&n==="url"?e.setUrl(t.url):"setTiles"in e&&n==="tiles"?e.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${n}`)}function Lne(e){const t=z.useContext(gd).map.getMap(),r=z.useRef(e),[,n]=z.useState(0),i=z.useMemo(()=>e.id||`jsx-source-${Rne++}`,[]);z.useEffect(()=>{if(t){const u=()=>setTimeout(()=>n(a=>a+1),0);return t.on("styledata",u),u(),()=>{var a;if(t.off("styledata",u),t.style&&t.style._loaded&&t.getSource(i)){const p=(a=t.getStyle())===null||a===void 0?void 0:a.layers;if(p)for(const m of p)m.source===i&&t.removeLayer(m.id);t.removeSource(i)}}}},[t]);let o=t&&t.style&&t.getSource(i);return o?zne(o,e,r.current):o=Dne(t,i,e),r.current=e,o&&z.Children.map(e.children,u=>u&&z.cloneElement(u,{source:i}))||null}function OI(){return rne()}const One=tne(()=>Promise.resolve().then(()=>tae),[]),$I=z.forwardRef(function(t,r){return mne(t,r,One)}),Lv=yne,BI=bne,Z6=Sne,K6=kne,sn=Ane,zu=Lne;var cn;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const o={};for(const u of i)o[u]=u;return o},e.getValidEnumValues=i=>{const o=e.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),u={};for(const a of o)u[a]=i[a];return e.objectValues(u)},e.objectValues=i=>e.objectKeys(i).map(function(o){return i[o]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const u in i)Object.prototype.hasOwnProperty.call(i,u)&&o.push(u);return o},e.find=(i,o)=>{for(const u of i)if(o(u))return u},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}e.joinValues=n,e.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(cn||(cn={}));var uk;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(uk||(uk={}));const er=cn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mc=e=>{switch(typeof e){case"undefined":return er.undefined;case"string":return er.string;case"number":return isNaN(e)?er.nan:er.number;case"boolean":return er.boolean;case"function":return er.function;case"bigint":return er.bigint;case"symbol":return er.symbol;case"object":return Array.isArray(e)?er.array:e===null?er.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?er.promise:typeof Map<"u"&&e instanceof Map?er.map:typeof Set<"u"&&e instanceof Set?er.set:typeof Date<"u"&&e instanceof Date?er.date:er.object;default:return er.unknown}},yt=cn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$ne=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ha extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},n={_errors:[]},i=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(i);else if(u.code==="invalid_return_type")i(u.returnTypeError);else if(u.code==="invalid_arguments")i(u.argumentsError);else if(u.path.length===0)n._errors.push(r(u));else{let a=n,p=0;for(;p<u.path.length;){const m=u.path[p];p===u.path.length-1?(a[m]=a[m]||{_errors:[]},a[m]._errors.push(r(u))):a[m]=a[m]||{_errors:[]},a=a[m],p++}}};return i(this),n}static assert(t){if(!(t instanceof Ha))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,cn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ha.create=e=>new Ha(e);const Ap=(e,t)=>{let r;switch(e.code){case yt.invalid_type:e.received===er.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case yt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,cn.jsonStringifyReplacer)}`;break;case yt.unrecognized_keys:r=`Unrecognized key(s) in object: ${cn.joinValues(e.keys,", ")}`;break;case yt.invalid_union:r="Invalid input";break;case yt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${cn.joinValues(e.options)}`;break;case yt.invalid_enum_value:r=`Invalid enum value. Expected ${cn.joinValues(e.options)}, received '${e.received}'`;break;case yt.invalid_arguments:r="Invalid function arguments";break;case yt.invalid_return_type:r="Invalid function return type";break;case yt.invalid_date:r="Invalid date";break;case yt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:cn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case yt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case yt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case yt.custom:r="Invalid input";break;case yt.invalid_intersection_types:r="Intersection results could not be merged";break;case yt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case yt.not_finite:r="Number must be finite";break;default:r=t.defaultError,cn.assertNever(e)}return{message:r}};let X6=Ap;function Bne(e){X6=e}function xx(){return X6}const bx=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,o=[...r,...i.path||[]],u={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="";const p=n.filter(m=>!!m).slice().reverse();for(const m of p)a=m(u,{data:t,defaultError:a}).message;return{...i,path:o,message:a}},Fne=[];function Ht(e,t){const r=xx(),n=bx({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Ap?void 0:Ap].filter(i=>!!i)});e.common.issues.push(n)}class Lo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return Sr;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const o=await i.key,u=await i.value;n.push({key:o,value:u})}return Lo.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:o,value:u}=i;if(o.status==="aborted"||u.status==="aborted")return Sr;o.status==="dirty"&&t.dirty(),u.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||i.alwaysSet)&&(n[o.value]=u.value)}return{status:t.value,value:n}}}const Sr=Object.freeze({status:"aborted"}),jf=e=>({status:"dirty",value:e}),Qo=e=>({status:"valid",value:e}),hk=e=>e.status==="aborted",dk=e=>e.status==="dirty",Qh=e=>e.status==="valid",Ov=e=>typeof Promise<"u"&&e instanceof Promise;function wx(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function J6(e,t,r,n,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var dr;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(dr||(dr={}));var Rg,Dg;class Ul{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Q5=(e,t)=>{if(Qh(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ha(e.common.issues);return this._error=r,this._error}}};function Or(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(u,a)=>{var p,m;const{message:w}=e;return u.code==="invalid_enum_value"?{message:w??a.defaultError}:typeof a.data>"u"?{message:(p=w??n)!==null&&p!==void 0?p:a.defaultError}:u.code!=="invalid_type"?{message:a.defaultError}:{message:(m=w??r)!==null&&m!==void 0?m:a.defaultError}},description:i}}class Gr{get description(){return this._def.description}_getType(t){return mc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:mc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lo,ctx:{common:t.parent.common,data:t.data,parsedType:mc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Ov(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mc(t)},o=this._parseSync({data:t,path:i.path,parent:i});return Q5(i,o)}"~validate"(t){var r,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mc(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:i});return Qh(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o==null?void 0:o.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(o=>Qh(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:mc(t)},i=this._parse({data:t,path:n.path,parent:n}),o=await(Ov(i)?i:Promise.resolve(i));return Q5(n,o)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{const u=t(i),a=()=>o.addIssue({code:yt.custom,...n(i)});return typeof Promise<"u"&&u instanceof Promise?u.then(p=>p?!0:(a(),!1)):u?!0:(a(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new nl({schema:this,typeName:xr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Bl.create(this,this._def)}nullable(){return Bu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return Dp.create(this,this._def)}or(t){return Nv.create([this,t],this._def)}and(t){return jv.create(this,t,this._def)}transform(t){return new nl({...Or(this._def),schema:this,typeName:xr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new qv({...Or(this._def),innerType:this,defaultValue:r,typeName:xr.ZodDefault})}brand(){return new FI({typeName:xr.ZodBranded,type:this,...Or(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Wv({...Or(this._def),innerType:this,catchValue:r,typeName:xr.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Oy.create(this,t)}readonly(){return Zv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Nne=/^c[^\s-]{8,}$/i,jne=/^[0-9a-z]+$/,Vne=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Une=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Hne=/^[a-z0-9_-]{21}$/i,Gne=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,qne=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Wne=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zne="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let PS;const Kne=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Xne=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Jne=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yne=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qne=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Y6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tie=new RegExp(`^${Y6}$`);function Q6(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function rie(e){return new RegExp(`^${Q6(e)}$`)}function eB(e){let t=`${Y6}T${Q6(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function nie(e,t){return!!((t==="v4"||!t)&&Kne.test(e)||(t==="v6"||!t)&&Jne.test(e))}function iie(e,t){if(!Gne.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function oie(e,t){return!!((t==="v4"||!t)&&Xne.test(e)||(t==="v6"||!t)&&Yne.test(e))}class qs extends Gr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==er.string){const o=this._getOrReturnCtx(t);return Ht(o,{code:yt.invalid_type,expected:er.string,received:o.parsedType}),Sr}const n=new Lo;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const u=t.data.length>o.value,a=t.data.length<o.value;(u||a)&&(i=this._getOrReturnCtx(t,i),u?Ht(i,{code:yt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&Ht(i,{code:yt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Wne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"email",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")PS||(PS=new RegExp(Zne,"u")),PS.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"emoji",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Une.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"uuid",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Hne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"nanoid",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Nne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"cuid",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")jne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"cuid2",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Vne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"ulid",code:yt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ht(i,{validation:"url",code:yt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"regex",code:yt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?eB(o).test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?tie.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?rie(o).test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?qne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"duration",code:yt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?nie(t.data,o.version)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"ip",code:yt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?iie(t.data,o.alg)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"jwt",code:yt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?oie(t.data,o.version)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"cidr",code:yt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Qne.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"base64",code:yt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?eie.test(t.data)||(i=this._getOrReturnCtx(t,i),Ht(i,{validation:"base64url",code:yt.invalid_string,message:o.message}),n.dirty()):cn.assertNever(o);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:yt.invalid_string,...dr.errToObj(n)})}_addCheck(t){return new qs({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...dr.errToObj(t)})}url(t){return this._addCheck({kind:"url",...dr.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...dr.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...dr.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...dr.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...dr.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...dr.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...dr.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...dr.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...dr.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...dr.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...dr.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...dr.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...dr.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...dr.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...dr.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...dr.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...dr.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...dr.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...dr.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...dr.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...dr.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...dr.errToObj(r)})}nonempty(t){return this.min(1,dr.errToObj(t))}trim(){return new qs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}qs.create=e=>{var t;return new qs({checks:[],typeName:xr.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Or(e)})};function aie(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(e.toFixed(i).replace(".","")),u=parseInt(t.toFixed(i).replace(".",""));return o%u/Math.pow(10,i)}class Lu extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==er.number){const o=this._getOrReturnCtx(t);return Ht(o,{code:yt.invalid_type,expected:er.number,received:o.parsedType}),Sr}let n;const i=new Lo;for(const o of this._def.checks)o.kind==="int"?cn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?aie(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.not_finite,message:o.message}),i.dirty()):cn.assertNever(o);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,dr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,dr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,dr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,dr.toString(r))}setLimit(t,r,n,i){return new Lu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:dr.toString(i)}]})}_addCheck(t){return new Lu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:dr.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:dr.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:dr.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dr.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dr.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&cn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Lu.create=e=>new Lu({checks:[],typeName:xr.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Or(e)});class Ou extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==er.bigint)return this._getInvalidInput(t);let n;const i=new Lo;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Ht(n,{code:yt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):cn.assertNever(o);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ht(r,{code:yt.invalid_type,expected:er.bigint,received:r.parsedType}),Sr}gte(t,r){return this.setLimit("min",t,!0,dr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,dr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,dr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,dr.toString(r))}setLimit(t,r,n,i){return new Ou({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:dr.toString(i)}]})}_addCheck(t){return new Ou({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:dr.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Ou.create=e=>{var t;return new Ou({checks:[],typeName:xr.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Or(e)})};class $v extends Gr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==er.boolean){const n=this._getOrReturnCtx(t);return Ht(n,{code:yt.invalid_type,expected:er.boolean,received:n.parsedType}),Sr}return Qo(t.data)}}$v.create=e=>new $v({typeName:xr.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Or(e)});class ed extends Gr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==er.date){const o=this._getOrReturnCtx(t);return Ht(o,{code:yt.invalid_type,expected:er.date,received:o.parsedType}),Sr}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return Ht(o,{code:yt.invalid_date}),Sr}const n=new Lo;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),Ht(i,{code:yt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):cn.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ed({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:dr.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:dr.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}ed.create=e=>new ed({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:xr.ZodDate,...Or(e)});class Sx extends Gr{_parse(t){if(this._getType(t)!==er.symbol){const n=this._getOrReturnCtx(t);return Ht(n,{code:yt.invalid_type,expected:er.symbol,received:n.parsedType}),Sr}return Qo(t.data)}}Sx.create=e=>new Sx({typeName:xr.ZodSymbol,...Or(e)});class Bv extends Gr{_parse(t){if(this._getType(t)!==er.undefined){const n=this._getOrReturnCtx(t);return Ht(n,{code:yt.invalid_type,expected:er.undefined,received:n.parsedType}),Sr}return Qo(t.data)}}Bv.create=e=>new Bv({typeName:xr.ZodUndefined,...Or(e)});class Fv extends Gr{_parse(t){if(this._getType(t)!==er.null){const n=this._getOrReturnCtx(t);return Ht(n,{code:yt.invalid_type,expected:er.null,received:n.parsedType}),Sr}return Qo(t.data)}}Fv.create=e=>new Fv({typeName:xr.ZodNull,...Or(e)});class Rp extends Gr{constructor(){super(...arguments),this._any=!0}_parse(t){return Qo(t.data)}}Rp.create=e=>new Rp({typeName:xr.ZodAny,...Or(e)});class Nh extends Gr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Qo(t.data)}}Nh.create=e=>new Nh({typeName:xr.ZodUnknown,...Or(e)});class Lc extends Gr{_parse(t){const r=this._getOrReturnCtx(t);return Ht(r,{code:yt.invalid_type,expected:er.never,received:r.parsedType}),Sr}}Lc.create=e=>new Lc({typeName:xr.ZodNever,...Or(e)});class Cx extends Gr{_parse(t){if(this._getType(t)!==er.undefined){const n=this._getOrReturnCtx(t);return Ht(n,{code:yt.invalid_type,expected:er.void,received:n.parsedType}),Sr}return Qo(t.data)}}Cx.create=e=>new Cx({typeName:xr.ZodVoid,...Or(e)});class Js extends Gr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==er.array)return Ht(r,{code:yt.invalid_type,expected:er.array,received:r.parsedType}),Sr;if(i.exactLength!==null){const u=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(u||a)&&(Ht(r,{code:u?yt.too_big:yt.too_small,minimum:a?i.exactLength.value:void 0,maximum:u?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Ht(r,{code:yt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Ht(r,{code:yt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((u,a)=>i.type._parseAsync(new Ul(r,u,r.path,a)))).then(u=>Lo.mergeArray(n,u));const o=[...r.data].map((u,a)=>i.type._parseSync(new Ul(r,u,r.path,a)));return Lo.mergeArray(n,o)}get element(){return this._def.type}min(t,r){return new Js({...this._def,minLength:{value:t,message:dr.toString(r)}})}max(t,r){return new Js({...this._def,maxLength:{value:t,message:dr.toString(r)}})}length(t,r){return new Js({...this._def,exactLength:{value:t,message:dr.toString(r)}})}nonempty(t){return this.min(1,t)}}Js.create=(e,t)=>new Js({type:e,minLength:null,maxLength:null,exactLength:null,typeName:xr.ZodArray,...Or(t)});function xf(e){if(e instanceof ai){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Bl.create(xf(n))}return new ai({...e._def,shape:()=>t})}else return e instanceof Js?new Js({...e._def,type:xf(e.element)}):e instanceof Bl?Bl.create(xf(e.unwrap())):e instanceof Bu?Bu.create(xf(e.unwrap())):e instanceof Hl?Hl.create(e.items.map(t=>xf(t))):e}class ai extends Gr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=cn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==er.object){const m=this._getOrReturnCtx(t);return Ht(m,{code:yt.invalid_type,expected:er.object,received:m.parsedType}),Sr}const{status:n,ctx:i}=this._processInputParams(t),{shape:o,keys:u}=this._getCached(),a=[];if(!(this._def.catchall instanceof Lc&&this._def.unknownKeys==="strip"))for(const m in i.data)u.includes(m)||a.push(m);const p=[];for(const m of u){const w=o[m],C=i.data[m];p.push({key:{status:"valid",value:m},value:w._parse(new Ul(i,C,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Lc){const m=this._def.unknownKeys;if(m==="passthrough")for(const w of a)p.push({key:{status:"valid",value:w},value:{status:"valid",value:i.data[w]}});else if(m==="strict")a.length>0&&(Ht(i,{code:yt.unrecognized_keys,keys:a}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const w of a){const C=i.data[w];p.push({key:{status:"valid",value:w},value:m._parse(new Ul(i,C,i.path,w)),alwaysSet:w in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const m=[];for(const w of p){const C=await w.key,T=await w.value;m.push({key:C,value:T,alwaysSet:w.alwaysSet})}return m}).then(m=>Lo.mergeObjectSync(n,m)):Lo.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(t){return dr.errToObj,new ai({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o,u,a;const p=(u=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&u!==void 0?u:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=dr.errToObj(t).message)!==null&&a!==void 0?a:p}:{message:p}}}:{}})}strip(){return new ai({...this._def,unknownKeys:"strip"})}passthrough(){return new ai({...this._def,unknownKeys:"passthrough"})}extend(t){return new ai({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ai({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:xr.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new ai({...this._def,catchall:t})}pick(t){const r={};return cn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new ai({...this._def,shape:()=>r})}omit(t){const r={};return cn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new ai({...this._def,shape:()=>r})}deepPartial(){return xf(this)}partial(t){const r={};return cn.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new ai({...this._def,shape:()=>r})}required(t){const r={};return cn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Bl;)o=o._def.innerType;r[n]=o}}),new ai({...this._def,shape:()=>r})}keyof(){return tB(cn.objectKeys(this.shape))}}ai.create=(e,t)=>new ai({shape:()=>e,unknownKeys:"strip",catchall:Lc.create(),typeName:xr.ZodObject,...Or(t)});ai.strictCreate=(e,t)=>new ai({shape:()=>e,unknownKeys:"strict",catchall:Lc.create(),typeName:xr.ZodObject,...Or(t)});ai.lazycreate=(e,t)=>new ai({shape:e,unknownKeys:"strip",catchall:Lc.create(),typeName:xr.ZodObject,...Or(t)});class Nv extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(o){for(const a of o)if(a.result.status==="valid")return a.result;for(const a of o)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const u=o.map(a=>new Ha(a.ctx.common.issues));return Ht(r,{code:yt.invalid_union,unionErrors:u}),Sr}if(r.common.async)return Promise.all(n.map(async o=>{const u={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:u}),ctx:u}})).then(i);{let o;const u=[];for(const p of n){const m={...r,common:{...r.common,issues:[]},parent:null},w=p._parseSync({data:r.data,path:r.path,parent:m});if(w.status==="valid")return w;w.status==="dirty"&&!o&&(o={result:w,ctx:m}),m.common.issues.length&&u.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const a=u.map(p=>new Ha(p));return Ht(r,{code:yt.invalid_union,unionErrors:a}),Sr}}get options(){return this._def.options}}Nv.create=(e,t)=>new Nv({options:e,typeName:xr.ZodUnion,...Or(t)});const hc=e=>e instanceof Uv?hc(e.schema):e instanceof nl?hc(e.innerType()):e instanceof Hv?[e.value]:e instanceof $u?e.options:e instanceof Gv?cn.objectValues(e.enum):e instanceof qv?hc(e._def.innerType):e instanceof Bv?[void 0]:e instanceof Fv?[null]:e instanceof Bl?[void 0,...hc(e.unwrap())]:e instanceof Bu?[null,...hc(e.unwrap())]:e instanceof FI||e instanceof Zv?hc(e.unwrap()):e instanceof Wv?hc(e._def.innerType):[];class _w extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==er.object)return Ht(r,{code:yt.invalid_type,expected:er.object,received:r.parsedType}),Sr;const n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(Ht(r,{code:yt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Sr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const i=new Map;for(const o of r){const u=hc(o.shape[t]);if(!u.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of u){if(i.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);i.set(a,o)}}return new _w({typeName:xr.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Or(n)})}}function fk(e,t){const r=mc(e),n=mc(t);if(e===t)return{valid:!0,data:e};if(r===er.object&&n===er.object){const i=cn.objectKeys(t),o=cn.objectKeys(e).filter(a=>i.indexOf(a)!==-1),u={...e,...t};for(const a of o){const p=fk(e[a],t[a]);if(!p.valid)return{valid:!1};u[a]=p.data}return{valid:!0,data:u}}else if(r===er.array&&n===er.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<e.length;o++){const u=e[o],a=t[o],p=fk(u,a);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===er.date&&n===er.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class jv extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(o,u)=>{if(hk(o)||hk(u))return Sr;const a=fk(o.value,u.value);return a.valid?((dk(o)||dk(u))&&r.dirty(),{status:r.value,value:a.data}):(Ht(n,{code:yt.invalid_intersection_types}),Sr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,u])=>i(o,u)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}jv.create=(e,t,r)=>new jv({left:e,right:t,typeName:xr.ZodIntersection,...Or(r)});class Hl extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.array)return Ht(n,{code:yt.invalid_type,expected:er.array,received:n.parsedType}),Sr;if(n.data.length<this._def.items.length)return Ht(n,{code:yt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Sr;!this._def.rest&&n.data.length>this._def.items.length&&(Ht(n,{code:yt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...n.data].map((u,a)=>{const p=this._def.items[a]||this._def.rest;return p?p._parse(new Ul(n,u,n.path,a)):null}).filter(u=>!!u);return n.common.async?Promise.all(o).then(u=>Lo.mergeArray(r,u)):Lo.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new Hl({...this._def,rest:t})}}Hl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Hl({items:e,typeName:xr.ZodTuple,rest:null,...Or(t)})};class Vv extends Gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.object)return Ht(n,{code:yt.invalid_type,expected:er.object,received:n.parsedType}),Sr;const i=[],o=this._def.keyType,u=this._def.valueType;for(const a in n.data)i.push({key:o._parse(new Ul(n,a,n.path,a)),value:u._parse(new Ul(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Lo.mergeObjectAsync(r,i):Lo.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Gr?new Vv({keyType:t,valueType:r,typeName:xr.ZodRecord,...Or(n)}):new Vv({keyType:qs.create(),valueType:t,typeName:xr.ZodRecord,...Or(r)})}}class Tx extends Gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.map)return Ht(n,{code:yt.invalid_type,expected:er.map,received:n.parsedType}),Sr;const i=this._def.keyType,o=this._def.valueType,u=[...n.data.entries()].map(([a,p],m)=>({key:i._parse(new Ul(n,a,n.path,[m,"key"])),value:o._parse(new Ul(n,p,n.path,[m,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const p of u){const m=await p.key,w=await p.value;if(m.status==="aborted"||w.status==="aborted")return Sr;(m.status==="dirty"||w.status==="dirty")&&r.dirty(),a.set(m.value,w.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const p of u){const m=p.key,w=p.value;if(m.status==="aborted"||w.status==="aborted")return Sr;(m.status==="dirty"||w.status==="dirty")&&r.dirty(),a.set(m.value,w.value)}return{status:r.value,value:a}}}}Tx.create=(e,t,r)=>new Tx({valueType:t,keyType:e,typeName:xr.ZodMap,...Or(r)});class td extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==er.set)return Ht(n,{code:yt.invalid_type,expected:er.set,received:n.parsedType}),Sr;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ht(n,{code:yt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ht(n,{code:yt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const o=this._def.valueType;function u(p){const m=new Set;for(const w of p){if(w.status==="aborted")return Sr;w.status==="dirty"&&r.dirty(),m.add(w.value)}return{status:r.value,value:m}}const a=[...n.data.values()].map((p,m)=>o._parse(new Ul(n,p,n.path,m)));return n.common.async?Promise.all(a).then(p=>u(p)):u(a)}min(t,r){return new td({...this._def,minSize:{value:t,message:dr.toString(r)}})}max(t,r){return new td({...this._def,maxSize:{value:t,message:dr.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}td.create=(e,t)=>new td({valueType:e,minSize:null,maxSize:null,typeName:xr.ZodSet,...Or(t)});class op extends Gr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==er.function)return Ht(r,{code:yt.invalid_type,expected:er.function,received:r.parsedType}),Sr;function n(a,p){return bx({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,xx(),Ap].filter(m=>!!m),issueData:{code:yt.invalid_arguments,argumentsError:p}})}function i(a,p){return bx({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,xx(),Ap].filter(m=>!!m),issueData:{code:yt.invalid_return_type,returnTypeError:p}})}const o={errorMap:r.common.contextualErrorMap},u=r.data;if(this._def.returns instanceof Dp){const a=this;return Qo(async function(...p){const m=new Ha([]),w=await a._def.args.parseAsync(p,o).catch(P=>{throw m.addIssue(n(p,P)),m}),C=await Reflect.apply(u,this,w);return await a._def.returns._def.type.parseAsync(C,o).catch(P=>{throw m.addIssue(i(C,P)),m})})}else{const a=this;return Qo(function(...p){const m=a._def.args.safeParse(p,o);if(!m.success)throw new Ha([n(p,m.error)]);const w=Reflect.apply(u,this,m.data),C=a._def.returns.safeParse(w,o);if(!C.success)throw new Ha([i(w,C.error)]);return C.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new op({...this._def,args:Hl.create(t).rest(Nh.create())})}returns(t){return new op({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new op({args:t||Hl.create([]).rest(Nh.create()),returns:r||Nh.create(),typeName:xr.ZodFunction,...Or(n)})}}class Uv extends Gr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Uv.create=(e,t)=>new Uv({getter:e,typeName:xr.ZodLazy,...Or(t)});class Hv extends Gr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Ht(r,{received:r.data,code:yt.invalid_literal,expected:this._def.value}),Sr}return{status:"valid",value:t.data}}get value(){return this._def.value}}Hv.create=(e,t)=>new Hv({value:e,typeName:xr.ZodLiteral,...Or(t)});function tB(e,t){return new $u({values:e,typeName:xr.ZodEnum,...Or(t)})}class $u extends Gr{constructor(){super(...arguments),Rg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Ht(r,{expected:cn.joinValues(n),received:r.parsedType,code:yt.invalid_type}),Sr}if(wx(this,Rg)||J6(this,Rg,new Set(this._def.values)),!wx(this,Rg).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Ht(r,{received:r.data,code:yt.invalid_enum_value,options:n}),Sr}return Qo(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return $u.create(t,{...this._def,...r})}exclude(t,r=this._def){return $u.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Rg=new WeakMap;$u.create=tB;class Gv extends Gr{constructor(){super(...arguments),Dg.set(this,void 0)}_parse(t){const r=cn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==er.string&&n.parsedType!==er.number){const i=cn.objectValues(r);return Ht(n,{expected:cn.joinValues(i),received:n.parsedType,code:yt.invalid_type}),Sr}if(wx(this,Dg)||J6(this,Dg,new Set(cn.getValidEnumValues(this._def.values))),!wx(this,Dg).has(t.data)){const i=cn.objectValues(r);return Ht(n,{received:n.data,code:yt.invalid_enum_value,options:i}),Sr}return Qo(t.data)}get enum(){return this._def.values}}Dg=new WeakMap;Gv.create=(e,t)=>new Gv({values:e,typeName:xr.ZodNativeEnum,...Or(t)});class Dp extends Gr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==er.promise&&r.common.async===!1)return Ht(r,{code:yt.invalid_type,expected:er.promise,received:r.parsedType}),Sr;const n=r.parsedType===er.promise?r.data:Promise.resolve(r.data);return Qo(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Dp.create=(e,t)=>new Dp({type:e,typeName:xr.ZodPromise,...Or(t)});class nl extends Gr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,o={addIssue:u=>{Ht(n,u),u.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const u=i.transform(n.data,o);if(n.common.async)return Promise.resolve(u).then(async a=>{if(r.value==="aborted")return Sr;const p=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return p.status==="aborted"?Sr:p.status==="dirty"||r.value==="dirty"?jf(p.value):p});{if(r.value==="aborted")return Sr;const a=this._def.schema._parseSync({data:u,path:n.path,parent:n});return a.status==="aborted"?Sr:a.status==="dirty"||r.value==="dirty"?jf(a.value):a}}if(i.type==="refinement"){const u=a=>{const p=i.refinement(a,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Sr:(a.status==="dirty"&&r.dirty(),u(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Sr:(a.status==="dirty"&&r.dirty(),u(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Qh(u))return u;const a=i.transform(u.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>Qh(u)?Promise.resolve(i.transform(u.value,o)).then(a=>({status:r.value,value:a})):u);cn.assertNever(i)}}nl.create=(e,t,r)=>new nl({schema:e,typeName:xr.ZodEffects,effect:t,...Or(r)});nl.createWithPreprocess=(e,t,r)=>new nl({schema:t,effect:{type:"preprocess",transform:e},typeName:xr.ZodEffects,...Or(r)});class Bl extends Gr{_parse(t){return this._getType(t)===er.undefined?Qo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Bl.create=(e,t)=>new Bl({innerType:e,typeName:xr.ZodOptional,...Or(t)});class Bu extends Gr{_parse(t){return this._getType(t)===er.null?Qo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Bu.create=(e,t)=>new Bu({innerType:e,typeName:xr.ZodNullable,...Or(t)});class qv extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===er.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}qv.create=(e,t)=>new qv({innerType:e,typeName:xr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Or(t)});class Wv extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ov(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ha(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ha(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Wv.create=(e,t)=>new Wv({innerType:e,typeName:xr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Or(t)});class kx extends Gr{_parse(t){if(this._getType(t)!==er.nan){const n=this._getOrReturnCtx(t);return Ht(n,{code:yt.invalid_type,expected:er.nan,received:n.parsedType}),Sr}return{status:"valid",value:t.data}}}kx.create=e=>new kx({typeName:xr.ZodNaN,...Or(e)});const sie=Symbol("zod_brand");class FI extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Oy extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Sr:o.status==="dirty"?(r.dirty(),jf(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Sr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new Oy({in:t,out:r,typeName:xr.ZodPipeline})}}class Zv extends Gr{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Qh(i)&&(i.value=Object.freeze(i.value)),i);return Ov(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Zv.create=(e,t)=>new Zv({innerType:e,typeName:xr.ZodReadonly,...Or(t)});function rB(e,t={},r){return e?Rp.create().superRefine((n,i)=>{var o,u;if(!e(n)){const a=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,p=(u=(o=a.fatal)!==null&&o!==void 0?o:r)!==null&&u!==void 0?u:!0,m=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...m,fatal:p})}}):Rp.create()}const lie={object:ai.lazycreate};var xr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(xr||(xr={}));const cie=(e,t={message:`Input not instance of ${e.name}`})=>rB(r=>r instanceof e,t),nB=qs.create,iB=Lu.create,uie=kx.create,hie=Ou.create,oB=$v.create,die=ed.create,fie=Sx.create,pie=Bv.create,mie=Fv.create,gie=Rp.create,vie=Nh.create,yie=Lc.create,_ie=Cx.create,xie=Js.create,bie=ai.create,wie=ai.strictCreate,Sie=Nv.create,Cie=_w.create,Tie=jv.create,kie=Hl.create,Eie=Vv.create,Iie=Tx.create,Mie=td.create,Pie=op.create,Aie=Uv.create,Rie=Hv.create,Die=$u.create,zie=Gv.create,Lie=Dp.create,e3=nl.create,Oie=Bl.create,$ie=Bu.create,Bie=nl.createWithPreprocess,Fie=Oy.create,Nie=()=>nB().optional(),jie=()=>iB().optional(),Vie=()=>oB().optional(),Uie={string:e=>qs.create({...e,coerce:!0}),number:e=>Lu.create({...e,coerce:!0}),boolean:e=>$v.create({...e,coerce:!0}),bigint:e=>Ou.create({...e,coerce:!0}),date:e=>ed.create({...e,coerce:!0})},Hie=Sr;var as=Object.freeze({__proto__:null,defaultErrorMap:Ap,setErrorMap:Bne,getErrorMap:xx,makeIssue:bx,EMPTY_PATH:Fne,addIssueToContext:Ht,ParseStatus:Lo,INVALID:Sr,DIRTY:jf,OK:Qo,isAborted:hk,isDirty:dk,isValid:Qh,isAsync:Ov,get util(){return cn},get objectUtil(){return uk},ZodParsedType:er,getParsedType:mc,ZodType:Gr,datetimeRegex:eB,ZodString:qs,ZodNumber:Lu,ZodBigInt:Ou,ZodBoolean:$v,ZodDate:ed,ZodSymbol:Sx,ZodUndefined:Bv,ZodNull:Fv,ZodAny:Rp,ZodUnknown:Nh,ZodNever:Lc,ZodVoid:Cx,ZodArray:Js,ZodObject:ai,ZodUnion:Nv,ZodDiscriminatedUnion:_w,ZodIntersection:jv,ZodTuple:Hl,ZodRecord:Vv,ZodMap:Tx,ZodSet:td,ZodFunction:op,ZodLazy:Uv,ZodLiteral:Hv,ZodEnum:$u,ZodNativeEnum:Gv,ZodPromise:Dp,ZodEffects:nl,ZodTransformer:nl,ZodOptional:Bl,ZodNullable:Bu,ZodDefault:qv,ZodCatch:Wv,ZodNaN:kx,BRAND:sie,ZodBranded:FI,ZodPipeline:Oy,ZodReadonly:Zv,custom:rB,Schema:Gr,ZodSchema:Gr,late:lie,get ZodFirstPartyTypeKind(){return xr},coerce:Uie,any:gie,array:xie,bigint:hie,boolean:oB,date:die,discriminatedUnion:Cie,effect:e3,enum:Die,function:Pie,instanceof:cie,intersection:Tie,lazy:Aie,literal:Rie,map:Iie,nan:uie,nativeEnum:zie,never:yie,null:mie,nullable:$ie,number:iB,object:bie,oboolean:Vie,onumber:jie,optional:Oie,ostring:Nie,pipeline:Fie,preprocess:Bie,promise:Lie,record:Eie,set:Mie,strictObject:wie,string:nB,symbol:fie,transformer:e3,tuple:kie,undefined:pie,union:Sie,unknown:vie,void:_ie,NEVER:Hie,ZodIssueCode:yt,quotelessJson:$ne,ZodError:Ha}),Da=(e=>(e[e.COMPANY=0]="COMPANY",e[e.FUEL=1]="FUEL",e[e.REST=2]="REST",e[e.SERVICE=3]="SERVICE",e[e.DEALER=4]="DEALER",e[e.RECRUITING=5]="RECRUITING",e))(Da||{}),aB=(e=>(e[e.NEARBY=0]="NEARBY",e[e.ROUTE=1]="ROUTE",e))(aB||{});const Gie=as.object({key:as.string(),lonLats:as.array(as.tuple([as.number(),as.number()])),distance:as.number(),time:as.number(),strategy:as.enum(["shortest","smallRoads"])});as.object({id:as.string(),segments:as.array(Gie)});const sB={[Da.COMPANY]:"Companies",[Da.FUEL]:"Fuel Stations",[Da.REST]:"Rest Stops",[Da.SERVICE]:"Service Centers",[Da.DEALER]:"Dealerships",[Da.RECRUITING]:"Recruitment Agencies"};var wc=(e=>(e[e.FOLLOW=0]="FOLLOW",e[e.FREE=1]="FREE",e))(wc||{}),po=(e=>(e[e.CATEGORIES=0]="CATEGORIES",e[e.DESTINATIONS=1]="DESTINATIONS",e[e.ROUTES=2]="ROUTES",e))(po||{});const qie=e=>(console.log("render destination markers",{highlighted:e.selectedDestinationNodeUid,dests:e.destinations}),N.jsx(N.Fragment,{children:e.destinations.map((t,r)=>N.jsx(Lv,{longitude:t.lonLat[0],latitude:t.lonLat[1],style:{zIndex:e.selectedDestinationNodeUid===t.nodeUid?e.destinations.length:"auto"},children:N.jsx(Sp,{size:e.selectedDestinationNodeUid===t.nodeUid?"lg":"md",onClick:()=>e.onDestinationClick(t),sx:{width:"1em",height:"1em",border:1,backgroundColor:e.selectedDestinationNodeUid==null||e.selectedDestinationNodeUid===t.nodeUid?"primary":"#aaa",display:e.currentPageKey===po.DESTINATIONS||e.selectedDestinationNodeUid===t.nodeUid?void 0:"none"},children:r+1})},t.nodeUid))}));var lB={exports:{}},cB={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},uB={exports:{}},Wie=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},Zie=Wie,Kie=Array.prototype.concat,Xie=Array.prototype.slice,t3=uB.exports=function(t){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n];Zie(o)?r=Kie.call(r,Xie.call(o)):r.push(o)}return r};t3.wrap=function(e){return function(){return e(t3(arguments))}};var Jie=uB.exports,ev=cB,$y=Jie,hB=Object.hasOwnProperty,dB=Object.create(null);for(var AS in ev)hB.call(ev,AS)&&(dB[ev[AS]]=AS);var ja=lB.exports={to:{},get:{}};ja.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=ja.get.hsl(e),n="hsl";break;case"hwb":r=ja.get.hwb(e),n="hwb";break;default:r=ja.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};ja.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,u=[0,0,0,1],a,p,m;if(a=e.match(r)){for(m=a[2],a=a[1],p=0;p<3;p++){var w=p*2;u[p]=parseInt(a.slice(w,w+2),16)}m&&(u[3]=parseInt(m,16)/255)}else if(a=e.match(t)){for(a=a[1],m=a[3],p=0;p<3;p++)u[p]=parseInt(a[p]+a[p],16);m&&(u[3]=parseInt(m+m,16)/255)}else if(a=e.match(n)){for(p=0;p<3;p++)u[p]=parseInt(a[p+1],0);a[4]&&(a[5]?u[3]=parseFloat(a[4])*.01:u[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(p=0;p<3;p++)u[p]=Math.round(parseFloat(a[p+1])*2.55);a[4]&&(a[5]?u[3]=parseFloat(a[4])*.01:u[3]=parseFloat(a[4]))}else return(a=e.match(o))?a[1]==="transparent"?[0,0,0,0]:hB.call(ev,a[1])?(u=ev[a[1]],u[3]=1,u):null:null;for(p=0;p<3;p++)u[p]=Iu(u[p],0,255);return u[3]=Iu(u[3],0,1),u};ja.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=Iu(parseFloat(r[2]),0,100),u=Iu(parseFloat(r[3]),0,100),a=Iu(isNaN(n)?1:n,0,1);return[i,o,u,a]}return null};ja.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=Iu(parseFloat(r[2]),0,100),u=Iu(parseFloat(r[3]),0,100),a=Iu(isNaN(n)?1:n,0,1);return[i,o,u,a]}return null};ja.to.hex=function(){var e=$y(arguments);return"#"+O_(e[0])+O_(e[1])+O_(e[2])+(e[3]<1?O_(Math.round(e[3]*255)):"")};ja.to.rgb=function(){var e=$y(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};ja.to.rgb.percent=function(){var e=$y(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};ja.to.hsl=function(){var e=$y(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};ja.to.hwb=function(){var e=$y(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};ja.to.keyword=function(e){return dB[e.slice(0,3)]};function Iu(e,t,r){return Math.min(Math.max(t,e),r)}function O_(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var Yie=lB.exports;const Kv=cB,fB={};for(const e of Object.keys(Kv))fB[Kv[e]]=e;const hr={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var pB=hr;for(const e of Object.keys(hr)){if(!("channels"in hr[e]))throw new Error("missing channels property: "+e);if(!("labels"in hr[e]))throw new Error("missing channel labels property: "+e);if(hr[e].labels.length!==hr[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=hr[e];delete hr[e].channels,delete hr[e].labels,Object.defineProperty(hr[e],"channels",{value:t}),Object.defineProperty(hr[e],"labels",{value:r})}hr.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),u=o-i;let a,p;o===i?a=0:t===o?a=(r-n)/u:r===o?a=2+(n-t)/u:n===o&&(a=4+(t-r)/u),a=Math.min(a*60,360),a<0&&(a+=360);const m=(i+o)/2;return o===i?p=0:m<=.5?p=u/(o+i):p=u/(2-o-i),[a,p*100,m*100]};hr.rgb.hsv=function(e){let t,r,n,i,o;const u=e[0]/255,a=e[1]/255,p=e[2]/255,m=Math.max(u,a,p),w=m-Math.min(u,a,p),C=function(T){return(m-T)/6/w+1/2};return w===0?(i=0,o=0):(o=w/m,t=C(u),r=C(a),n=C(p),u===m?i=n-r:a===m?i=1/3+t-n:p===m&&(i=2/3+r-t),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,m*100]};hr.rgb.hwb=function(e){const t=e[0],r=e[1];let n=e[2];const i=hr.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[i,o*100,n*100]};hr.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(1-t,1-r,1-n),o=(1-t-i)/(1-i)||0,u=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,u*100,a*100,i*100]};function Qie(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}hr.rgb.keyword=function(e){const t=fB[e];if(t)return t;let r=1/0,n;for(const i of Object.keys(Kv)){const o=Kv[i],u=Qie(e,o);u<r&&(r=u,n=i)}return n};hr.keyword.rgb=function(e){return Kv[e]};hr.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const i=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,u=t*.0193+r*.1192+n*.9505;return[i*100,o*100,u*100]};hr.rgb.lab=function(e){const t=hr.rgb.xyz(e);let r=t[0],n=t[1],i=t[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*n-16,u=500*(r-n),a=200*(n-i);return[o,u,a]};hr.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;let i,o,u;if(r===0)return u=n*255,[u,u,u];n<.5?i=n*(1+r):i=n+r-n*r;const a=2*n-i,p=[0,0,0];for(let m=0;m<3;m++)o=t+1/3*-(m-1),o<0&&o++,o>1&&o--,6*o<1?u=a+(i-a)*6*o:2*o<1?u=i:3*o<2?u=a+(i-a)*(2/3-o)*6:u=a,p[m]=u*255;return p};hr.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,n=e[2]/100,i=r;const o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;const u=(n+r)/2,a=n===0?2*i/(o+i):2*r/(n+r);return[t,a*100,u*100]};hr.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let n=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),u=255*n*(1-r),a=255*n*(1-r*o),p=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,p,u];case 1:return[a,n,u];case 2:return[u,n,p];case 3:return[u,a,n];case 4:return[p,u,n];case 5:return[n,u,a]}};hr.hsv.hsl=function(e){const t=e[0],r=e[1]/100,n=e[2]/100,i=Math.max(n,.01);let o,u;u=(2-r)*n;const a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,u/=2,[t,o*100,u*100]};hr.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,n=e[2]/100;const i=r+n;let o;i>1&&(r/=i,n/=i);const u=Math.floor(6*t),a=1-n;o=6*t-u,u&1&&(o=1-o);const p=r+o*(a-r);let m,w,C;switch(u){default:case 6:case 0:m=a,w=p,C=r;break;case 1:m=p,w=a,C=r;break;case 2:m=r,w=a,C=p;break;case 3:m=r,w=p,C=a;break;case 4:m=p,w=r,C=a;break;case 5:m=a,w=r,C=p;break}return[m*255,w*255,C*255]};hr.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100,i=e[3]/100,o=1-Math.min(1,t*(1-i)+i),u=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,u*255,a*255]};hr.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,n=e[2]/100;let i,o,u;return i=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,u=t*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),u=Math.min(Math.max(0,u),1),[i*255,o*255,u*255]};hr.xyz.lab=function(e){let t=e[0],r=e[1],n=e[2];t/=95.047,r/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const i=116*r-16,o=500*(t-r),u=200*(r-n);return[i,o,u]};hr.lab.xyz=function(e){const t=e[0],r=e[1],n=e[2];let i,o,u;o=(t+16)/116,i=r/500+o,u=o-n/200;const a=o**3,p=i**3,m=u**3;return o=a>.008856?a:(o-16/116)/7.787,i=p>.008856?p:(i-16/116)/7.787,u=m>.008856?m:(u-16/116)/7.787,i*=95.047,o*=100,u*=108.883,[i,o,u]};hr.lab.lch=function(e){const t=e[0],r=e[1],n=e[2];let i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);const u=Math.sqrt(r*r+n*n);return[t,u,i]};hr.lch.lab=function(e){const t=e[0],r=e[1],i=e[2]/360*2*Math.PI,o=r*Math.cos(i),u=r*Math.sin(i);return[t,o,u]};hr.rgb.ansi16=function(e,t=null){const[r,n,i]=e;let o=t===null?hr.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let u=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(u+=60),u};hr.hsv.ansi16=function(e){return hr.rgb.ansi16(hr.hsv.rgb(e),e[2])};hr.rgb.ansi256=function(e){const t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};hr.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=(~~(e>50)+1)*.5,n=(t&1)*r*255,i=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,i,o]};hr.ansi256.rgb=function(e){if(e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let t;const r=Math.floor(e/36)/5*255,n=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[r,n,i]};hr.rgb.hex=function(e){const r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};hr.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(a=>a+a).join(""));const n=parseInt(r,16),i=n>>16&255,o=n>>8&255,u=n&255;return[i,o,u]};hr.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),u=i-o;let a,p;return u<1?a=o/(1-u):a=0,u<=0?p=0:i===t?p=(r-n)/u%6:i===r?p=2+(n-t)/u:p=4+(t-r)/u,p/=6,p%=1,[p*360,u*100,a*100]};hr.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=r<.5?2*t*r:2*t*(1-r);let i=0;return n<1&&(i=(r-.5*n)/(1-n)),[e[0],n*100,i*100]};hr.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,n=t*r;let i=0;return n<1&&(i=(r-n)/(1-n)),[e[0],n*100,i*100]};hr.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];const i=[0,0,0],o=t%1*6,u=o%1,a=1-u;let p=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=u,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=u;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=u,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return p=(1-r)*n,[(r*i[0]+p)*255,(r*i[1]+p)*255,(r*i[2]+p)*255]};hr.hcg.hsv=function(e){const t=e[1]/100,r=e[2]/100,n=t+r*(1-t);let i=0;return n>0&&(i=t/n),[e[0],i*100,n*100]};hr.hcg.hsl=function(e){const t=e[1]/100,n=e[2]/100*(1-t)+.5*t;let i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],i*100,n*100]};hr.hcg.hwb=function(e){const t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};hr.hwb.hcg=function(e){const t=e[1]/100,n=1-e[2]/100,i=n-t;let o=0;return i<1&&(o=(n-i)/(1-i)),[e[0],i*100,o*100]};hr.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};hr.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};hr.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};hr.gray.hsl=function(e){return[0,0,e[0]]};hr.gray.hsv=hr.gray.hsl;hr.gray.hwb=function(e){return[0,100,e[0]]};hr.gray.cmyk=function(e){return[0,0,0,e[0]]};hr.gray.lab=function(e){return[e[0],0,0]};hr.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};hr.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const Ex=pB;function eoe(){const e={},t=Object.keys(Ex);for(let r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function toe(e){const t=eoe(),r=[e];for(t[e].distance=0;r.length;){const n=r.pop(),i=Object.keys(Ex[n]);for(let o=i.length,u=0;u<o;u++){const a=i[u],p=t[a];p.distance===-1&&(p.distance=t[n].distance+1,p.parent=n,r.unshift(a))}}return t}function roe(e,t){return function(r){return t(e(r))}}function noe(e,t){const r=[t[e].parent,e];let n=Ex[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)r.unshift(t[i].parent),n=roe(Ex[t[i].parent][i],n),i=t[i].parent;return n.conversion=r,n}var ioe=function(e){const t=toe(e),r={},n=Object.keys(t);for(let i=n.length,o=0;o<i;o++){const u=n[o];t[u].parent!==null&&(r[u]=noe(u,t))}return r};const pk=pB,ooe=ioe,bf={},aoe=Object.keys(pk);function soe(e){const t=function(...r){const n=r[0];return n==null?n:(n.length>1&&(r=n),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function loe(e){const t=function(...r){const n=r[0];if(n==null)return n;n.length>1&&(r=n);const i=e(r);if(typeof i=="object")for(let o=i.length,u=0;u<o;u++)i[u]=Math.round(i[u]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}aoe.forEach(e=>{bf[e]={},Object.defineProperty(bf[e],"channels",{value:pk[e].channels}),Object.defineProperty(bf[e],"labels",{value:pk[e].labels});const t=ooe(e);Object.keys(t).forEach(n=>{const i=t[n];bf[e][n]=loe(i),bf[e][n].raw=soe(i)})});var coe=bf;const wf=Yie,Ba=coe,mB=["keyword","gray","hex"],mk={};for(const e of Object.keys(Ba))mk[[...Ba[e].labels].sort().join("")]=e;const Ix={};function Ji(e,t){if(!(this instanceof Ji))return new Ji(e,t);if(t&&t in mB&&(t=null),t&&!(t in Ba))throw new Error("Unknown model: "+t);let r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Ji)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=wf.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,n=Ba[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(e.length>0){this.model=t||"rgb",n=Ba[this.model].channels;const i=Array.prototype.slice.call(e,0,n);this.color=gk(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const o=i.sort().join("");if(!(o in mk))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=mk[o];const{labels:u}=Ba[this.model],a=[];for(r=0;r<u.length;r++)a.push(e[u[r]]);this.color=gk(a)}if(Ix[this.model])for(n=Ba[this.model].channels,r=0;r<n;r++){const i=Ix[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ji.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in wf.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const r=t.valpha===1?t.color:[...t.color,this.valpha];return wf.to[t.model](r)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:[...t.color,this.valpha];return wf.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Ba[this.model],{labels:r}=Ba[this.model];for(let n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new Ji([...this.color.map(hoe(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new Ji([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:mi("rgb",0,Ni(255)),green:mi("rgb",1,Ni(255)),blue:mi("rgb",2,Ni(255)),hue:mi(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:mi("hsl",1,Ni(100)),lightness:mi("hsl",2,Ni(100)),saturationv:mi("hsv",1,Ni(100)),value:mi("hsv",2,Ni(100)),chroma:mi("hcg",1,Ni(100)),gray:mi("hcg",2,Ni(100)),white:mi("hwb",1,Ni(100)),wblack:mi("hwb",2,Ni(100)),cyan:mi("cmyk",0,Ni(100)),magenta:mi("cmyk",1,Ni(100)),yellow:mi("cmyk",2,Ni(100)),black:mi("cmyk",3,Ni(100)),x:mi("xyz",0,Ni(95.047)),y:mi("xyz",1,Ni(100)),z:mi("xyz",2,Ni(108.833)),l:mi("lab",0,Ni(100)),a:mi("lab",1),b:mi("lab",2),keyword(e){return e!==void 0?new Ji(e):Ba[this.model].keyword(this.color)},hex(e){return e!==void 0?new Ji(e):wf.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new Ji(e);const t=this.rgb().round().color;let r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),wf.to.hex(t)+r},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[r,n]of e.entries()){const i=n/255;t[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Ji.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const r=e.rgb(),n=this.rgb(),i=t===void 0?.5:t,o=2*i-1,u=r.alpha()-n.alpha(),a=((o*u===-1?o:(o+u)/(1+o*u))+1)/2,p=1-a;return Ji.rgb(a*r.red()+p*n.red(),a*r.green()+p*n.green(),a*r.blue()+p*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(const e of Object.keys(Ba)){if(mB.includes(e))continue;const{channels:t}=Ba[e];Ji.prototype[e]=function(...r){return this.model===e?new Ji(this):r.length>0?new Ji(r,e):new Ji([...doe(Ba[this.model][e].raw(this.color)),this.valpha],e)},Ji[e]=function(...r){let n=r[0];return typeof n=="number"&&(n=gk(r,t)),new Ji(n,e)}}function uoe(e,t){return Number(e.toFixed(t))}function hoe(e){return function(t){return uoe(t,e)}}function mi(e,t,r){e=Array.isArray(e)?e:[e];for(const n of e)(Ix[n]||(Ix[n]=[]))[t]=r;return e=e[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[e](),i.color[t]=n,i):(i=this[e]().color[t],r&&(i=r(i)),i)}}function Ni(e){return function(t){return Math.max(0,Math.min(e,t))}}function doe(e){return Array.isArray(e)?e:[e]}function gk(e,t){for(let r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}var foe=Ji;const gB=ay(foe);class fa extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class rd{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return un(t,r)}}function poe(e,t){return goe(e,t,(r,n,i,o)=>Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2)))}function NI(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const o of e)Array.isArray(o)?(t=Math.min(t,o[0]),n=Math.max(n,o[0]),r=Math.min(r,o[1]),i=Math.max(i,o[1])):(t=Math.min(t,o.x),n=Math.max(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.y));return[t,r,n,i]}function moe(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function vk(e){return moe(e*Math.PI/180)}function r3(e,t){let r,n;return Array.isArray(e)?(rd.checkArgument(e.length>=2),r=e[0],n=e[1]):(r=e.x,n=e.y),t(r,n)}function goe(e,t,r){const[n,i]=r3(e,(a,p)=>[a,p]),[o,u]=r3(t,(a,p)=>[a,p]);return r(n,i,o,u)}function voe(e,t,r){let n=r.get(e);return n==null&&(n=t,r.set(e,n)),n}var Ao=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Kansas=4]="Kansas",e[e.Montana=5]="Montana",e[e.Nebraska=6]="Nebraska",e[e.Nevada=7]="Nevada",e[e.NewMexico=8]="NewMexico",e[e.Oklahoma=9]="Oklahoma",e[e.Oregon=10]="Oregon",e[e.Texas=11]="Texas",e[e.Utah=12]="Utah",e[e.Washington=13]="Washington",e[e.Wyoming=14]="Wyoming",e))(Ao||{});const Xv=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),yoe={7:"Nevada",0:"Arizona",8:"New Mexico",10:"Oregon",13:"Washington",12:"Utah",3:"Idaho",2:"Colorado",14:"Wyoming",5:"Montana",11:"Texas",9:"Oklahoma",4:"Kansas",6:"Nebraska",1:"Arkansas"},vB={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},_oe={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values(_oe))e!==0&&kI(vB[e].size===1);function xw(e){const t=new Set;for(const[r,n]of Object.entries(vB))[...n].every(i=>e.has(i))&&t.add(Number(r));return t}const xoe=new Set([]);var Fs=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(Fs||{});Fs.Road+"",Fs.Light+"",Fs.Dark+"",Fs.Green+"",Fs.NavRed+"",Fs.NavGreen+"",Fs.NavBlue+"",Fs.NavYellow+"",Fs.NavPurple+"";var Mr=(e=>(e[e.THROUGH=0]="THROUGH",e[e.SLIGHT_LEFT=1]="SLIGHT_LEFT",e[e.LEFT=2]="LEFT",e[e.SHARP_LEFT=3]="SHARP_LEFT",e[e.U_TURN_LEFT=4]="U_TURN_LEFT",e[e.SLIGHT_RIGHT=11]="SLIGHT_RIGHT",e[e.RIGHT=12]="RIGHT",e[e.SHARP_RIGHT=13]="SHARP_RIGHT",e[e.U_TURN_RIGHT=14]="U_TURN_RIGHT",e[e.MERGE=-1]="MERGE",e))(Mr||{});const jI=e=>{const{branches:t,activeBranch:r,highlightColor:n="#000",dimColor:i="#ccc"}=e,o=[...t].sort((w,C)=>w===r?1:C===r?-1:0),u=o.some(w=>0<Number(w)&&Number(w)<10),a=o.some(w=>Number(w)>=10),p=o.length===1?"single":u&&!a?"left":a&&!u?"right":"left-and-right",m=o.map(w=>{switch(w){case Mr.THROUGH:{let C,T;switch(p){case"single":C=0;break;case"left-and-right":T=-1;break;case"left":C=2,T=-1;break;case"right":C=-2,T=-1;break;default:throw new fa(p)}return N.jsx(boe,{offsetX:C,offsetY:T,color:w===r?n:i},w)}case Mr.SLIGHT_LEFT:case Mr.SLIGHT_RIGHT:{let C,T,P;const R=Mr.SLIGHT_LEFT&&t.includes(Mr.LEFT)||Mr.SLIGHT_RIGHT&&t.includes(Mr.RIGHT);switch(p){case"single":C=0;break;case"left-and-right":{C=w===Mr.SLIGHT_LEFT?-2:2,T=t.includes(Mr.THROUGH)?void 0:R?10:9;break}case"left":case"right":T=t.includes(Mr.THROUGH)?void 0:9;break;default:throw new fa(p)}return N.jsx(woe,{offsetX:C,stemLength:T,angleLeg:P,orientation:w===Mr.SLIGHT_LEFT?"left":"right",color:w===r?n:i},w)}case Mr.LEFT:case Mr.RIGHT:{let C,T,P,R;const $=w===Mr.LEFT&&t.includes(Mr.SLIGHT_LEFT)||w===Mr.RIGHT&&t.includes(Mr.SLIGHT_RIGHT);switch(p){case"single":C=0;break;case"left-and-right":C=w===Mr.LEFT?-4:4,T=$?9:10,P=10,R=t.includes(Mr.THROUGH)?4:void 0;break;case"left":case"right":C=p==="left"?-2:2,T=$?9:10,P=10,R=t.includes(Mr.THROUGH)?4:void 0;break;default:throw new fa(p)}return N.jsx(Soe,{offsetX:C,stemLength:T,endLength:P,radius:R,orientation:w===Mr.LEFT?"left":"right",color:w===r?n:i},w)}case Mr.SHARP_LEFT:case Mr.SHARP_RIGHT:{let C,T,P;const R=w===Mr.SHARP_LEFT&&t.includes(Mr.SLIGHT_LEFT)||w===Mr.SHARP_RIGHT&&t.includes(Mr.SLIGHT_RIGHT);switch(p){case"single":C=0,T=11,P=9,R||T++;break;case"left-and-right":C=w===Mr.SHARP_LEFT?-2:2,(w===Mr.SHARP_LEFT&&!t.includes(Mr.LEFT)||w===Mr.SHARP_RIGHT&&!t.includes(Mr.RIGHT))&&(T=9,P=8),R||(T=T==null?9:T+1);break;case"left":case"right":t.length===2&&t.includes(Mr.THROUGH)&&(T=10,P=9),R||(T=T==null?9:T+1);break;default:throw new fa(p)}return N.jsx(Coe,{offsetX:C,stemLength:T,angleLeg:P,orientation:w===Mr.SHARP_LEFT?"left":"right",color:w===r?n:i},w)}case Mr.U_TURN_LEFT:case Mr.U_TURN_RIGHT:{let C,T,P,R,$;const H=w===Mr.U_TURN_LEFT&&t.includes(Mr.LEFT)||w===Mr.U_TURN_RIGHT&&t.includes(Mr.RIGHT);switch(p){case"single":break;case"left-and-right":C=w===Mr.U_TURN_LEFT?-5:5,P=6,$=4,R=3.5,T=-1,H&&(R--,$+=2);break;case"left":case"right":C=w===Mr.U_TURN_LEFT?-3:3,T=-1,P=6,$=4,R=3.5,H&&(R--,$+=2);break;default:throw new fa(p)}return N.jsx(Toe,{offsetX:C,offsetY:T,stemLength:P,radius:R,endLength:$,orientation:w===Mr.U_TURN_LEFT?"left":"right",color:w===r?n:i},w)}case Mr.MERGE:return kI(t.length===1,"MERGE must appear alone"),N.jsx(koe,{},"merge");default:throw new fa(w)}});return N.jsxs("svg",{viewBox:"0 0 24 24",children:[N.jsx("defs",{children:N.jsx("g",{id:"arrow","transform-origin":"0 0",transform:"translate(0,1.414) rotate(135) ",children:N.jsx("path",{fill:"none",strokeWidth:"2",d:"M0,-4 0,0 4,0"})})}),m]})},boe=e=>{const t=[12,21],{color:r="black",orientation:n="left",offsetX:i=0,offsetY:o=0,stemLength:u=18}=e,a=[t[0],t[1]-u];return N.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${i}, ${o})scale(${n==="left"?"":"-"}1, 1)`,children:[N.jsx("path",{fill:"none",strokeWidth:"2",d:`M${t.join()} v-${u-1.414}`}),N.jsx("use",{href:"#arrow",x:a[0],y:a[1]})]})},woe=e=>{const t=[14,20],{color:r="black",orientation:n="left",offsetX:i=0,offsetY:o=0,stemLength:u=8,angleLeg:a=8}=e,p=[t[0]-a,t[1]-u-a];return N.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${i}, ${o})scale(${n==="left"?"":"-"}1, 1)`,children:[N.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()}v-${u}l-${a-1.414},-${a-1.414}`}),N.jsx("use",{href:"#arrow","transform-origin":p.join(" "),transform:"rotate(-45)",x:p[0],y:p[1]})]})},Soe=e=>{const t=[16,20],{color:r="black",orientation:n="left",offsetX:i=0,offsetY:o=0,stemLength:u=10,radius:a=1,endLength:p=12}=e,m=[t[0]-p,t[1]-u];return N.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${i}, ${o})scale(${n==="left"?"":"-"}1, 1)`,children:[N.jsx("path",{fill:"none",strokeWidth:"2",d:`M${t.join()}v-${u-a}a${a} ${a} 0 0 0 -${a},-${a}h-${p-a-1.414}`}),N.jsx("use",{href:"#arrow",x:m[0],y:m[1],"transform-origin":m.join(" "),transform:"rotate(-90)"})]})},Coe=e=>{const t=[14,20],{color:r="black",orientation:n="left",offsetX:i=0,offsetY:o=0,stemLength:u=8,angleLeg:a=8}=e,p=[t[0]-a,t[1]-u+a];return N.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${i}, ${o})scale(${n==="left"?"":"-"}1, 1)`,children:[N.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()}v-${u}l-${a-1.414},${a-1.414}`}),N.jsx("use",{href:"#arrow",x:p[0],y:p[1],"transform-origin":p.join(" "),transform:"rotate(-135)"})]})},Toe=e=>{const t=[17,21],{color:r="black",orientation:n="left",offsetX:i=0,offsetY:o=0,stemLength:u=12,radius:a=5,endLength:p=8}=e,m=[t[0]-a*2,t[1]-u+p];return N.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${i}, ${o})scale(${n==="left"?"":"-"}1, 1)`,children:[N.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()} v-${u}a${a} ${a} 0 1 0 -${a*2},0v${p-1.414}`}),N.jsx("use",{href:"#arrow",x:m[0],y:m[1],"transform-origin":m.join(" "),transform:"rotate(180)"})]})},koe=e=>{const{color:t="black",offsetX:r=0,offsetY:n=0,stemLength:i=11,baseLeg:o=6}=e,u=[12,3];return N.jsxs("g",{stroke:t,"transform-origin":"12 12",transform:`translate(${r}, ${n})`,children:[N.jsx("path",{fill:"none",strokeWidth:"2",d:`M${u[0]},${u[1]+1.414}V${u[1]+i}l-${o},${o}m${o},-${o}l${o},${o}`}),N.jsx("use",{href:"#arrow",x:u[0],y:u[1]})]})},Mx=gB("hsl(151,82%,35%)"),Eoe=e=>{const t=!!e.laneHint||!!e.thenHint,{length:r,unit:n}=Poe(e.distanceMeters);return N.jsxs(Mi,{fontSize:"0.75rem",children:[N.jsxs(Mi,{direction:"row",alignItems:"center",px:2,py:1,spacing:2,bgcolor:Mx.string(),borderRadius:t?"1em 1em 1em 0":"1em",children:[N.jsxs(Mi,{alignItems:"center",children:[N.jsx(Sa,{width:"4em",children:N.jsx(jI,{branches:[e.direction],dimColor:"#fff"})}),N.jsxs(Ln,{level:"h3",textColor:"#fff",textAlign:"center",width:"2.5em",display:"block",children:[r,N.jsx(Ln,{level:"body-sm",textColor:"#fffa",children:n})]})]}),N.jsx(Ln,{level:"h1",fontWeight:"normal",textColor:"#fff",children:"Main St"})]}),e.laneHint&&N.jsx(Ioe,{roundBottomLeft:!e.thenHint,hint:e.laneHint}),e.thenHint&&N.jsx(Moe,{hint:e.thenHint})]})},Ioe=e=>N.jsx(Sa,{children:N.jsx(Mi,{display:"inline-flex",direction:"row",height:"5em",px:2,py:1,spacing:.5,divider:N.jsx(Ey,{orientation:"vertical",sx:{"--Divider-lineColor":"#fffc",height:"calc(0.75em)",alignSelf:"end",bottom:"-0.5em"}}),sx:{justifyContent:"center"},bgcolor:Mx.darken(.33).string(),borderRadius:`0 0 1em ${e.roundBottomLeft?"1em":0}`,children:e.hint.lanes.map(({branches:t,activeBranch:r},n)=>N.jsx(jI,{branches:t,activeBranch:r,dimColor:Mx.mix(gB("gray"),.5).string(),highlightColor:"#fff"},n))})}),Moe=e=>N.jsx(Sa,{children:N.jsxs(Mi,{display:"inline-flex",alignItems:"center",direction:"row",height:"5em",px:2,py:1,spacing:1,bgcolor:Mx.darken(.33).string(),borderRadius:"0 0 1em 1em",children:[N.jsx(Ln,{textColor:"#fff",level:"body-lg",children:"Then"}),N.jsx(Sa,{width:"2.5em",height:"2.5em",children:N.jsx(jI,{branches:[e.hint.direction],activeBranch:e.hint.direction,highlightColor:"#fff"})})]})});function Poe(e){const t=e*3.28084;if(t<=500)return{length:Number(Math.round(t).toPrecision(2)),unit:"ft"};const r=e*.0006213712;return r<=1?{length:Number(r.toPrecision(1)),unit:"mi"}:r<=10?{length:Number(r.toPrecision(2)),unit:"mi"}:{length:Math.round(r),unit:"mi"}}const Aoe=Ri(N.jsx("path",{d:"m9.78 11.16-1.42 1.42c-.68-.69-1.34-1.58-1.79-2.94l1.94-.49c.32.89.77 1.5 1.27 2.01M11 6 7 2 3 6h3.02c.02.81.08 1.54.19 2.17l1.94-.49C8.08 7.2 8.03 6.63 8.02 6zm10 0-4-4-4 4h2.99c-.1 3.68-1.28 4.75-2.54 5.88-.5.44-1.01.92-1.45 1.55-.34-.49-.73-.88-1.13-1.24L9.46 13.6c.93.85 1.54 1.54 1.54 3.4v5h2v-5c0-2.02.71-2.66 1.79-3.63 1.38-1.24 3.08-2.78 3.2-7.37z"}),"AltRoute"),Roe=Ri(N.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew"),Doe=Ri(N.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),zoe=Ri(N.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),Loe=Ri(N.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),Ooe=Ri(N.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),$oe=Ri(N.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build"),Boe=Ri(N.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Foe=Ri(N.jsx("path",{d:"m21.41 10.59-7.99-8c-.78-.78-2.05-.78-2.83 0l-8.01 8c-.78.78-.78 2.05 0 2.83l8.01 8c.78.78 2.05.78 2.83 0l7.99-8c.79-.79.79-2.05 0-2.83M13.5 14.5V12H10v3H8v-4c0-.55.45-1 1-1h4.5V7.5L17 11z"}),"Directions"),yB=Ri(N.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),Noe=Ri(N.jsx("path",{d:"M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3m12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4"}),"Hotel"),joe=Ri(N.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),Voe=Ri(N.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),Uoe=Ri(N.jsx("path",{d:"m19.77 7.23.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77M12 10H6V5h6zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"LocalGasStation"),Hoe=Ri(N.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),_B=Ri(N.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),Goe=Ri(N.jsx("path",{d:"M12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"Navigation"),qoe=Ri(N.jsx("path",{d:"m12 7.27 4.28 10.43-3.47-1.53-.81-.36-.81.36-3.47 1.53zM12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"NavigationOutlined"),Woe=Ri([N.jsx("circle",{cx:"10",cy:"8",r:"4"},"0"),N.jsx("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch"),Zoe=Ri(N.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),Koe=Ri(N.jsx("path",{d:"m20.55 5.22-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28M12 9.5l5.5 5.5H14v2h-4v-2H6.5zM5.12 5l.82-1h12l.93 1z"}),"Unarchive"),Xoe=z.forwardRef((e,t)=>N.jsx(Lv,{ref:t,longitude:e.longitude??0,latitude:e.latitude??0,pitchAlignment:"map",rotationAlignment:"map",children:N.jsx(Sa,{sx:{width:64,height:64,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(255,255,255,0.8)",borderRadius:"50%",boxShadow:"0 1px 1px 1px rgba(128,128,128,.2)"},children:N.jsx(Goe,{sx:{transform:"scale(4)",fill:"#09f"}})})})),Joe={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},Yoe={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},Qoe={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},eae={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},VI={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:Joe,secondaryTextPaint:Yoe,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:Qoe,secondaryTextPaint:eae,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var xB={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(jC,function(){var r,n,i;function o(a,p){if(!r)r=p;else if(!n)n=p;else{var m="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",w={};r(w),i=p(w),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([m],{type:"text/javascript"})))}}o(["exports"],function(a){function p(c,s,h,f){return new(h||(h=Promise))(function(v,x){function S(B){try{M(f.next(B))}catch(G){x(G)}}function k(B){try{M(f.throw(B))}catch(G){x(G)}}function M(B){var G;B.done?v(B.value):(G=B.value,G instanceof h?G:new h(function(Z){Z(G)})).then(S,k)}M((f=f.apply(c,s||[])).next())})}function m(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var w=C;function C(c,s){this.x=c,this.y=s}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,h=c.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),h=Math.sin(c),f=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=f,this},_rotateAround:function(c,s){var h=Math.cos(c),f=Math.sin(c),v=s.y+f*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-f*(this.y-s.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(c){return c instanceof C?c:Array.isArray(c)?new C(c[0],c[1]):c};var T=m(w),P=R;function R(c,s,h,f){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(f-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=f}R.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,f=0;f<8;f++){var v=this.sampleCurveX(h)-c;if(Math.abs(v)<s)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=v/x}var S=0,k=1;for(h=c,f=0;f<20&&(v=this.sampleCurveX(h),!(Math.abs(v-c)<s));f++)c>v?S=h:k=h,h=.5*(k-S)+S;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};var $=m(P);let H,D;function O(){return H==null&&(H=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function L(){if(D==null&&(D=!1,O())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let f=0;f<5*5;f++){const v=4*f;s.fillStyle=`rgb(${v},${v+1},${v+2})`,s.fillRect(f%5,Math.floor(f/5),1,1)}const h=s.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&h[f]!==f){D=!0;break}}}return D||!1}function Q(c,s,h,f){const v=new $(c,s,h,f);return function(x){return v.solve(x)}}const V=Q(.25,.1,.25,1);function F(c,s,h){return Math.min(h,Math.max(s,c))}function X(c,s,h){const f=h-s,v=((c-s)%f+f)%f+s;return v===s?h:v}function re(c,...s){for(const h of s)for(const f in h)c[f]=h[f];return c}let ye=1;function me(c,s,h){const f={};for(const v in c)f[v]=s.call(h||this,c[v],v,c);return f}function we(c,s,h){const f={};for(const v in c)s.call(h||this,c[v],v,c)&&(f[v]=c[v]);return f}function ke(c){return Array.isArray(c)?c.map(ke):typeof c=="object"&&c?me(c,ke):c}const Ie={};function qe(c){Ie[c]||(typeof console<"u"&&console.warn(c),Ie[c]=!0)}function Re(c,s,h){return(h.y-c.y)*(s.x-c.x)>(s.y-c.y)*(h.x-c.x)}function Se(c){let s=0;for(let h,f,v=0,x=c.length,S=x-1;v<x;S=v++)h=c[v],f=c[S],s+=(f.x-h.x)*(h.y+f.y);return s}function Fe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ce=null;function Ne(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function at(c,s,h,f,v){return p(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(c,{timestamp:0});try{const S=x==null?void 0:x.format;if(!S||!S.startsWith("BGR")&&!S.startsWith("RGB"))throw new Error(`Unrecognized format ${S}`);const k=S.startsWith("BGR"),M=new Uint8ClampedArray(f*v*4);if(yield x.copyTo(M,function(B,G,Z,te,oe){const ae=4*Math.max(-G,0),ce=(Math.max(0,Z)-Z)*te*4+ae,ve=4*te,be=Math.max(0,G),ze=Math.max(0,Z);return{rect:{x:be,y:ze,width:Math.min(B.width,G+te)-be,height:Math.min(B.height,Z+oe)-ze},layout:[{offset:ce,stride:ve}]}}(c,s,h,f,v)),k)for(let B=0;B<M.length;B+=4){const G=M[B];M[B]=M[B+2],M[B+2]=G}return M}finally{x.close()}})}let st,Dt,Ct,Bt;const Tt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){return this.getImageCanvasContext(c).getImageData(-s,-s,c.width+2*s,c.height+2*s)},getImageCanvasContext(c){const s=window.document.createElement("canvas"),h=s.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return s.width=c.width,s.height=c.height,h.drawImage(c,0,0,c.width,c.height),h},resolveURL:c=>(Ct||(Ct=document.createElement("a")),Ct.href=c,Ct.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Bt==null&&(Bt=matchMedia("(prefers-reduced-motion: reduce)")),Bt.matches)}},it={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ze extends Error{constructor(s,h,f,v){super(`AJAXError: ${h} (${s}): ${f}`),this.status=s,this.statusText=h,this.url=f,this.body=v}}const rt=Fe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,pt=c=>it.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function ur(c,s){const h=new AbortController,f=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:rt(),signal:h.signal});let v=!1,x=!1;return c.type==="json"&&f.headers.set("Accept","application/json"),x||fetch(f).then(S=>S.ok?(k=>{(c.type==="arrayBuffer"||c.type==="image"?k.arrayBuffer():c.type==="json"?k.json():k.text()).then(M=>{x||(v=!0,s(null,M,k.headers.get("Cache-Control"),k.headers.get("Expires")))}).catch(M=>{x||s(new Error(M.message))})})(S):S.blob().then(k=>s(new Ze(S.status,S.statusText,c.url,k)))).catch(S=>{S.code!==20&&s(new Error(S.message))}),{cancel:()=>{x=!0,v||h.abort()}}}const or=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!Fe())return(pt(c.url)||ur)(c,s)}if(!(/^file:/.test(h=c.url)||/^file:/.test(rt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ur(c,s);if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var h;return function(f,v){const x=new XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(x.responseType="arraybuffer");for(const S in f.headers)x.setRequestHeader(S,f.headers[S]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{v(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let S=x.response;if(f.type==="json")try{S=JSON.parse(x.response)}catch(k){return v(k)}v(null,S,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const S=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});v(new Ze(x.status,x.statusText,f.url,S))}},x.send(f.body),{cancel:()=>x.abort()}}(c,s)},Er=function(c,s){return or(re(c,{type:"arrayBuffer"}),s)};function jr(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),h=window.location;return s.protocol===h.protocol&&s.host===h.host}function ar(c,s,h){h[c]&&h[c].indexOf(s)!==-1||(h[c]=h[c]||[],h[c].push(s))}function It(c,s,h){if(h&&h[c]){const f=h[c].indexOf(s);f!==-1&&h[c].splice(f,1)}}class gr{constructor(s,h={}){re(this,h),this.type=s}}class Wt extends gr{constructor(s,h={}){super("error",re({error:s},h))}}class Br{on(s,h){return this._listeners=this._listeners||{},ar(s,h,this._listeners),this}off(s,h){return It(s,h,this._listeners),It(s,h,this._oneTimeListeners),this}once(s,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},ar(s,h,this._oneTimeListeners),this):new Promise(f=>this.once(s,f))}fire(s,h){typeof s=="string"&&(s=new gr(s,h||{}));const f=s.type;if(this.listens(f)){s.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const k of v)k.call(this,s);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const k of x)It(f,k,this._oneTimeListeners),k.call(this,s);const S=this._eventedParent;S&&(re(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),S.fire(s))}else s instanceof Wt&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var He={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Cr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Rr(c,s){const h={};for(const f in c)f!=="ref"&&(h[f]=c[f]);return Cr.forEach(f=>{f in s&&(h[f]=s[f])}),h}function tr(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let h=0;h<c.length;h++)if(!tr(c[h],s[h]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const h in c)if(!tr(c[h],s[h]))return!1;return!0}return c===s}const lr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Pr(c,s,h){h.push({command:lr.addSource,args:[c,s[c]]})}function Fr(c,s,h){s.push({command:lr.removeSource,args:[c]}),h[c]=!0}function Ir(c,s,h,f){Fr(c,h,f),Pr(c,s,h)}function vr(c,s,h){let f;for(f in c[h])if(Object.prototype.hasOwnProperty.call(c[h],f)&&f!=="data"&&!tr(c[h][f],s[h][f]))return!1;for(f in s[h])if(Object.prototype.hasOwnProperty.call(s[h],f)&&f!=="data"&&!tr(c[h][f],s[h][f]))return!1;return!0}function rr(c,s,h,f,v,x){let S;for(S in s=s||{},c=c||{})Object.prototype.hasOwnProperty.call(c,S)&&(tr(c[S],s[S])||h.push({command:x,args:[f,S,s[S],v]}));for(S in s)Object.prototype.hasOwnProperty.call(s,S)&&!Object.prototype.hasOwnProperty.call(c,S)&&(tr(c[S],s[S])||h.push({command:x,args:[f,S,s[S],v]}))}function mr(c){return c.id}function ln(c,s){return c[s.id]=s,c}class je{constructor(s,h,f,v){this.message=(s?`${s}: `:"")+f,v&&(this.identifier=v),h!=null&&h.__line__&&(this.line=h.__line__)}}function kt(c,...s){for(const h of s)for(const f in h)c[f]=h[f];return c}class wt extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}class Ee{constructor(s,h=[]){this.parent=s,this.bindings={};for(const[f,v]of h)this.bindings[f]=v}concat(s){return new Ee(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Ve={kind:"null"},Xe={kind:"number"},Et={kind:"string"},vt={kind:"boolean"},Rt={kind:"color"},br={kind:"object"},Ft={kind:"value"},_r={kind:"collator"},ue={kind:"formatted"},Y={kind:"padding"},ee={kind:"resolvedImage"},U={kind:"variableAnchorOffsetCollection"};function J(c,s){return{kind:"array",itemType:c,N:s}}function ne(c){if(c.kind==="array"){const s=ne(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const de=[Ve,Xe,Et,vt,Rt,ue,br,J(Ft),Y,ee,U];function pe(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!pe(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const h of de)if(!pe(h,s))return null}}return`Expected ${ne(c)} but found ${ne(s)} instead.`}function se(c,s){return s.some(h=>h.kind===c.kind)}function xe(c,s){return s.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}function Pe(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Le=.96422,Ae=.82521,ot=4/29,ht=6/29,ut=3*ht*ht,Mt=ht*ht*ht,Oe=Math.PI/180,$e=180/Math.PI;function tt(c){return(c%=360)<0&&(c+=360),c}function dt([c,s,h,f]){let v,x;const S=yr((.2225045*(c=Lt(c))+.7168786*(s=Lt(s))+.0606169*(h=Lt(h)))/1);c===s&&s===h?v=x=S:(v=yr((.4360747*c+.3850649*s+.1430804*h)/Le),x=yr((.0139322*c+.0971045*s+.7141733*h)/Ae));const k=116*S-16;return[k<0?0:k,500*(v-S),200*(S-x),f]}function Lt(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function yr(c){return c>Mt?Math.pow(c,1/3):c/ut+ot}function sr([c,s,h,f]){let v=(c+16)/116,x=isNaN(s)?v:v+s/500,S=isNaN(h)?v:v-h/200;return v=1*xn(v),x=Le*xn(x),S=Ae*xn(S),[Wr(3.1338561*x-1.6168667*v-.4906146*S),Wr(-.9787684*x+1.9161415*v+.033454*S),Wr(.0719453*x-.2289914*v+1.4052427*S),f]}function Wr(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function xn(c){return c>ht?c*c*c:ut*(c-ot)}function Zn(c){return parseInt(c.padEnd(2,c),16)/255}function ll(c,s){return $o(s?c/100:c,0,1)}function $o(c,s,h){return Math.min(Math.max(s,c),h)}function Zr(c){return!c.some(Number.isNaN)}const di={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Vr{constructor(s,h,f,v=1,x=!0){this.r=s,this.g=h,this.b=f,this.a=v,x||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[s,h,f,v]))}static parse(s){if(s instanceof Vr)return s;if(typeof s!="string")return;const h=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=di[f];if(v){const[S,k,M]=v;return[S/255,k/255,M/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const S=f.length<6?1:2;let k=1;return[Zn(f.slice(k,k+=S)),Zn(f.slice(k,k+=S)),Zn(f.slice(k,k+=S)),Zn(f.slice(k,k+S)||"ff")]}if(f.startsWith("rgb")){const S=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[k,M,B,G,Z,te,oe,ae,ce,ve,be,ze]=S,Te=[G||" ",oe||" ",ve].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Be=[B,te,ce].join(""),Ge=Be==="%%%"?100:Be===""?255:0;if(Ge){const et=[$o(+M/Ge,0,1),$o(+Z/Ge,0,1),$o(+ae/Ge,0,1),be?ll(+be,ze):1];if(Zr(et))return et}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,k,M,B,G,Z,te,oe,ae]=x,ce=[M||" ",G||" ",te].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const ve=[+k,$o(+B,0,100),$o(+Z,0,100),oe?ll(+oe,ae):1];if(Zr(ve))return function([be,ze,Te,Be]){function Ge(et){const $t=(et+be/30)%12,Jt=ze*Math.min(Te,1-Te);return Te-Jt*Math.max(-1,Math.min($t-3,9-$t,1))}return be=tt(be),ze/=100,Te/=100,[Ge(0),Ge(8),Ge(4),Be]}(ve)}}}(s);return h?new Vr(...h,!1):void 0}get rgb(){const{r:s,g:h,b:f,a:v}=this,x=v||1/0;return this.overwriteGetter("rgb",[s/x,h/x,f/x,v])}get hcl(){return this.overwriteGetter("hcl",function(s){const[h,f,v,x]=dt(s),S=Math.sqrt(f*f+v*v);return[Math.round(1e4*S)?tt(Math.atan2(v,f)*$e):NaN,S,h,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",dt(this.rgb))}overwriteGetter(s,h){return Object.defineProperty(this,s,{value:h}),h}toString(){const[s,h,f,v]=this.rgb;return`rgba(${[s,h,f].map(x=>Math.round(255*x)).join(",")},${v})`}}Vr.black=new Vr(0,0,0,1),Vr.white=new Vr(1,1,1,1),Vr.transparent=new Vr(0,0,0,0),Vr.red=new Vr(1,0,0,1);class ia{constructor(s,h,f){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Kt{constructor(s,h,f,v,x){this.text=s,this.image=h,this.scale=f,this.fontStack=v,this.textColor=x}}class Kr{constructor(s){this.sections=s}static fromString(s){return new Kr([new Kt(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof Kr?s:Kr.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class Yr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Yr)return s;if(typeof s=="number")return new Yr([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const h of s)if(typeof h!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Yr(s)}}toString(){return JSON.stringify(this.values)}}const to=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ti{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof ti)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let h=0;h<s.length;h+=2){const f=s[h],v=s[h+1];if(typeof f!="string"||!to.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new ti(s)}}toString(){return JSON.stringify(this.values)}}class ri{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new ri({name:s,available:!1}):null}}function Bo(c,s,h,f){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,s,h,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,s,h,f]:[c,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ro(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Vr||c instanceof ia||c instanceof Kr||c instanceof Yr||c instanceof ti||c instanceof ri)return!0;if(Array.isArray(c)){for(const s of c)if(!ro(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!ro(c[s]))return!1;return!0}return!1}function $n(c){if(c===null)return Ve;if(typeof c=="string")return Et;if(typeof c=="boolean")return vt;if(typeof c=="number")return Xe;if(c instanceof Vr)return Rt;if(c instanceof ia)return _r;if(c instanceof Kr)return ue;if(c instanceof Yr)return Y;if(c instanceof ti)return U;if(c instanceof ri)return ee;if(Array.isArray(c)){const s=c.length;let h;for(const f of c){const v=$n(f);if(h){if(h===v)continue;h=Ft;break}h=v}return J(h||Ft,s)}return br}function nn(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof Vr||c instanceof Kr||c instanceof Yr||c instanceof ti||c instanceof ri?c.toString():JSON.stringify(c)}class Wl{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(s.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!ro(s[1]))return h.error("invalid value");const f=s[1];let v=$n(f);const x=h.expectedType;return v.kind!=="array"||v.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(v=x),new Wl(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Un{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const bd={string:Et,number:Xe,boolean:vt,object:br};class oa{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let f,v=1;const x=s[0];if(x==="array"){let k,M;if(s.length>2){const B=s[1];if(typeof B!="string"||!(B in bd)||B==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);k=bd[B],v++}else k=Ft;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return h.error('The length argument to "array" must be a positive integer literal',2);M=s[2],v++}f=J(k,M)}else{if(!bd[x])throw new Error(`Types doesn't contain name = ${x}`);f=bd[x]}const S=[];for(;v<s.length;v++){const k=h.parse(s[v],v,Ft);if(!k)return null;S.push(k)}return new oa(f,S)}evaluate(s){for(let h=0;h<this.args.length;h++){const f=this.args[h].evaluate(s);if(!pe(this.type,$n(f)))return f;if(h===this.args.length-1)throw new Un(`Expected value to be of type ${ne(this.type)}, but found ${ne($n(f))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Xp={"to-boolean":vt,"to-color":Rt,"to-number":Xe,"to-string":Et};class cl{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const f=s[0];if(!Xp[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&s.length!==2)return h.error("Expected one argument.");const v=Xp[f],x=[];for(let S=1;S<s.length;S++){const k=h.parse(s[S],S,Ft);if(!k)return null;x.push(k)}return new cl(v,x)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let h,f;for(const v of this.args){if(h=v.evaluate(s),f=null,h instanceof Vr)return h;if(typeof h=="string"){const x=s.parseColor(h);if(x)return x}else if(Array.isArray(h)&&(f=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Bo(h[0],h[1],h[2],h[3]),!f))return new Vr(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Un(f||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const f of this.args){h=f.evaluate(s);const v=Yr.parse(h);if(v)return v}throw new Un(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const f of this.args){h=f.evaluate(s);const v=ti.parse(h);if(v)return v}throw new Un(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const f of this.args){if(h=f.evaluate(s),h===null)return 0;const v=Number(h);if(!isNaN(v))return v}throw new Un(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Kr.fromString(nn(this.args[0].evaluate(s)));case"resolvedImage":return ri.fromString(nn(this.args[0].evaluate(s)));default:return nn(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const e0=["Unknown","Point","LineString","Polygon"];class Jp{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?e0[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let h=this._parseColorCache[s];return h||(h=this._parseColorCache[s]=Vr.parse(s)),h}}class wd{constructor(s,h,f=[],v,x=new Ee,S=[]){this.registry=s,this.path=f,this.key=f.map(k=>`[${k}]`).join(""),this.scope=x,this.errors=S,this.expectedType=v,this._isConstant=h}parse(s,h,f,v,x={}){return h?this.concat(h,f,v)._parse(s,x):this._parse(s,x)}_parse(s,h){function f(v,x,S){return S==="assert"?new oa(x,[v]):S==="coerce"?new cl(x,[v]):v}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=s[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[v];if(x){let S=x.parse(s,this);if(!S)return null;if(this.expectedType){const k=this.expectedType,M=S.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||M.kind!=="value")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(k.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array")if(k.kind!=="variableAnchorOffsetCollection"||M.kind!=="value"&&M.kind!=="array"){if(this.checkSubtype(k,M))return null}else S=f(S,k,h.typeAnnotation||"coerce");else S=f(S,k,h.typeAnnotation||"coerce");else S=f(S,k,h.typeAnnotation||"coerce");else S=f(S,k,h.typeAnnotation||"assert")}if(!(S instanceof Wl)&&S.type.kind!=="resolvedImage"&&this._isConstant(S)){const k=new Jp;try{S=new Wl(S.type,S.evaluate(k))}catch(M){return this.error(M.message),null}}return S}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,h,f){const v=typeof s=="number"?this.path.concat(s):this.path,x=f?this.scope.concat(f):this.scope;return new wd(this.registry,this._isConstant,v,h||null,x,this.errors)}error(s,...h){const f=`${this.key}${h.map(v=>`[${v}]`).join("")}`;this.errors.push(new wt(f,s))}checkSubtype(s,h){const f=pe(s,h);return f&&this.error(f),f}}class Sd{constructor(s,h,f){this.type=_r,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(s.length!==2)return h.error("Expected one argument.");const f=s[1];if(typeof f!="object"||Array.isArray(f))return h.error("Collator options argument must be an object.");const v=h.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,vt);if(!v)return null;const x=h.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,vt);if(!x)return null;let S=null;return f.locale&&(S=h.parse(f.locale,1,Et),!S)?null:new Sd(v,x,S)}evaluate(s){return new ia(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const ul=8192;function Yp(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function th(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function t0(c,s){const h=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,v=Math.pow(2,s.z);return[Math.round(h*v*ul),Math.round(f*v*ul)]}function Mw(c,s,h){const f=c[0]-s[0],v=c[1]-s[1],x=c[0]-h[0],S=c[1]-h[1];return f*S-x*v==0&&f*x<=0&&v*S<=0}function Qp(c,s){let h=!1;for(let S=0,k=s.length;S<k;S++){const M=s[S];for(let B=0,G=M.length;B<G-1;B++){if(Mw(c,M[B],M[B+1]))return!1;(v=M[B])[1]>(f=c)[1]!=(x=M[B+1])[1]>f[1]&&f[0]<(x[0]-v[0])*(f[1]-v[1])/(x[1]-v[1])+v[0]&&(h=!h)}}var f,v,x;return h}function em(c,s){for(let h=0;h<s.length;h++)if(Qp(c,s[h]))return!0;return!1}function r0(c,s,h,f){const v=f[0]-h[0],x=f[1]-h[1],S=(c[0]-h[0])*x-v*(c[1]-h[1]),k=(s[0]-h[0])*x-v*(s[1]-h[1]);return S>0&&k<0||S<0&&k>0}function Pw(c,s,h){for(const B of h)for(let G=0;G<B.length-1;++G)if((k=[(S=B[G+1])[0]-(x=B[G])[0],S[1]-x[1]])[0]*(M=[(v=s)[0]-(f=c)[0],v[1]-f[1]])[1]-k[1]*M[0]!=0&&r0(f,v,x,S)&&r0(x,S,f,v))return!0;var f,v,x,S,k,M;return!1}function n0(c,s){for(let h=0;h<c.length;++h)if(!Qp(c[h],s))return!1;for(let h=0;h<c.length-1;++h)if(Pw(c[h],c[h+1],s))return!1;return!0}function i0(c,s){for(let h=0;h<s.length;h++)if(n0(c,s[h]))return!0;return!1}function Cd(c,s,h){const f=[];for(let v=0;v<c.length;v++){const x=[];for(let S=0;S<c[v].length;S++){const k=t0(c[v][S],h);Yp(s,k),x.push(k)}f.push(x)}return f}function o0(c,s,h){const f=[];for(let v=0;v<c.length;v++){const x=Cd(c[v],s,h);f.push(x)}return f}function a0(c,s,h,f){if(c[0]<h[0]||c[0]>h[2]){const v=.5*f;let x=c[0]-h[0]>v?-f:h[0]-c[0]>v?f:0;x===0&&(x=c[0]-h[2]>v?-f:h[2]-c[0]>v?f:0),c[0]+=x}Yp(s,c)}function tm(c,s,h,f){const v=Math.pow(2,f.z)*ul,x=[f.x*ul,f.y*ul],S=[];for(const k of c)for(const M of k){const B=[M.x+x[0],M.y+x[1]];a0(B,s,h,v),S.push(B)}return S}function rm(c,s,h,f){const v=Math.pow(2,f.z)*ul,x=[f.x*ul,f.y*ul],S=[];for(const M of c){const B=[];for(const G of M){const Z=[G.x+x[0],G.y+x[1]];Yp(s,Z),B.push(Z)}S.push(B)}if(s[2]-s[0]<=v/2){(k=s)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const M of S)for(const B of M)a0(B,s,h,v)}var k;return S}class Zl{constructor(s,h){this.type=vt,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(ro(s[1])){const f=s[1];if(f.type==="FeatureCollection")for(let v=0;v<f.features.length;++v){const x=f.features[v].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Zl(f,f.features[v].geometry)}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Zl(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new Zl(f,f)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,f){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],S=h.canonicalID();if(f.type==="Polygon"){const k=Cd(f.coordinates,x,S),M=tm(h.geometry(),v,x,S);if(!th(v,x))return!1;for(const B of M)if(!Qp(B,k))return!1}if(f.type==="MultiPolygon"){const k=o0(f.coordinates,x,S),M=tm(h.geometry(),v,x,S);if(!th(v,x))return!1;for(const B of M)if(!em(B,k))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,f){const v=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],S=h.canonicalID();if(f.type==="Polygon"){const k=Cd(f.coordinates,x,S),M=rm(h.geometry(),v,x,S);if(!th(v,x))return!1;for(const B of M)if(!n0(B,k))return!1}if(f.type==="MultiPolygon"){const k=o0(f.coordinates,x,S),M=rm(h.geometry(),v,x,S);if(!th(v,x))return!1;for(const B of M)if(!i0(B,k))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Td{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(s.length!==2||typeof s[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const f=s[1];return h.scope.has(f)?new Td(f,h.scope.get(f)):h.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class aa{constructor(s,h,f,v){this.name=s,this.type=h,this._evaluate=f,this.args=v}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,h){const f=s[0],v=aa.definitions[f];if(!v)return h.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(v)?v[0]:v.type,S=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,k=S.filter(([B])=>!Array.isArray(B)||B.length===s.length-1);let M=null;for(const[B,G]of k){M=new wd(h.registry,kd,h.path,null,h.scope);const Z=[];let te=!1;for(let oe=1;oe<s.length;oe++){const ae=s[oe],ce=Array.isArray(B)?B[oe-1]:B.type,ve=M.parse(ae,1+Z.length,ce);if(!ve){te=!0;break}Z.push(ve)}if(!te)if(Array.isArray(B)&&B.length!==Z.length)M.error(`Expected ${B.length} arguments, but found ${Z.length} instead.`);else{for(let oe=0;oe<Z.length;oe++){const ae=Array.isArray(B)?B[oe]:B.type,ce=Z[oe];M.concat(oe+1).checkSubtype(ae,ce.type)}if(M.errors.length===0)return new aa(f,x,G,Z)}}if(k.length===1)h.errors.push(...M.errors);else{const B=(k.length?k:S).map(([Z])=>{return te=Z,Array.isArray(te)?`(${te.map(ne).join(", ")})`:`(${ne(te.type)}...)`;var te}).join(" | "),G=[];for(let Z=1;Z<s.length;Z++){const te=h.parse(s[Z],1+G.length);if(!te)return null;G.push(ne(te.type))}h.error(`Expected arguments of type ${B}, but found (${G.join(", ")}) instead.`)}return null}static register(s,h){aa.definitions=h;for(const f in h)s[f]=aa}}function kd(c){if(c instanceof Td)return kd(c.boundExpression);if(c instanceof aa&&c.name==="error"||c instanceof Sd||c instanceof Zl)return!1;const s=c instanceof cl||c instanceof oa;let h=!0;return c.eachChild(f=>{h=s?h&&kd(f):h&&f instanceof Wl}),!!h&&Ed(c)&&Id(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ed(c){if(c instanceof aa&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Zl)return!1;let s=!0;return c.eachChild(h=>{s&&!Ed(h)&&(s=!1)}),s}function rh(c){if(c instanceof aa&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(h=>{s&&!rh(h)&&(s=!1)}),s}function Id(c,s){if(c instanceof aa&&s.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(f=>{h&&!Id(f,s)&&(h=!1)}),h}function Hc(c,s){const h=c.length-1;let f,v,x=0,S=h,k=0;for(;x<=S;)if(k=Math.floor((x+S)/2),f=c[k],v=c[k+1],f<=s){if(k===h||s<v)return k;x=k+1}else{if(!(f>s))throw new Un("Input is not a number.");S=k-1}return 0}class hl{constructor(s,h,f){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(const[v,x]of f)this.labels.push(v),this.outputs.push(x)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");const f=h.parse(s[1],1,Xe);if(!f)return null;const v=[];let x=null;h.expectedType&&h.expectedType.kind!=="value"&&(x=h.expectedType);for(let S=1;S<s.length;S+=2){const k=S===1?-1/0:s[S],M=s[S+1],B=S,G=S+1;if(typeof k!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(v.length&&v[v.length-1][0]>=k)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const Z=h.parse(M,G,x);if(!Z)return null;x=x||Z.type,v.push([k,Z])}return new hl(x,f,v)}evaluate(s){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(s);const v=this.input.evaluate(s);if(v<=h[0])return f[0].evaluate(s);const x=h.length;return v>=h[x-1]?f[x-1].evaluate(s):f[Hc(h,v)].evaluate(s)}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Ur(c,s,h){return c+h*(s-c)}function Md(c,s,h){return c.map((f,v)=>Ur(f,s[v],h))}const Fo={number:Ur,color:function(c,s,h,f="rgb"){switch(f){case"rgb":{const[v,x,S,k]=Md(c.rgb,s.rgb,h);return new Vr(v,x,S,k,!1)}case"hcl":{const[v,x,S,k]=c.hcl,[M,B,G,Z]=s.hcl;let te,oe;if(isNaN(v)||isNaN(M))isNaN(v)?isNaN(M)?te=NaN:(te=M,S!==1&&S!==0||(oe=B)):(te=v,G!==1&&G!==0||(oe=x));else{let ze=M-v;M>v&&ze>180?ze-=360:M<v&&v-M>180&&(ze+=360),te=v+h*ze}const[ae,ce,ve,be]=function([ze,Te,Be,Ge]){return ze=isNaN(ze)?0:ze*Oe,sr([Be,Math.cos(ze)*Te,Math.sin(ze)*Te,Ge])}([te,oe??Ur(x,B,h),Ur(S,G,h),Ur(k,Z,h)]);return new Vr(ae,ce,ve,be,!1)}case"lab":{const[v,x,S,k]=sr(Md(c.lab,s.lab,h));return new Vr(v,x,S,k,!1)}}},array:Md,padding:function(c,s,h){return new Yr(Md(c.values,s.values,h))},variableAnchorOffsetCollection:function(c,s,h){const f=c.values,v=s.values;if(f.length!==v.length)throw new Un(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${s.toString()}`);const x=[];for(let S=0;S<f.length;S+=2){if(f[S]!==v[S])throw new Un(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${f[S]}, to[${S}]: ${v[S]}`);x.push(f[S]);const[k,M]=f[S+1],[B,G]=v[S+1];x.push([Ur(k,B,h),Ur(M,G,h)])}return new ti(x)}};class No{constructor(s,h,f,v,x){this.type=s,this.operator=h,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[S,k]of x)this.labels.push(S),this.outputs.push(k)}static interpolationFactor(s,h,f,v){let x=0;if(s.name==="exponential")x=nm(h,s.base,f,v);else if(s.name==="linear")x=nm(h,1,f,v);else if(s.name==="cubic-bezier"){const S=s.controlPoints;x=new $(S[0],S[1],S[2],S[3]).solve(nm(h,1,f,v))}return x}static parse(s,h){let[f,v,x,...S]=s;if(!Array.isArray(v)||v.length===0)return h.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const B=v[1];if(typeof B!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:B}}else{if(v[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const B=v.slice(1);if(B.length!==4||B.some(G=>typeof G!="number"||G<0||G>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:B}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(x=h.parse(x,2,Xe),!x)return null;const k=[];let M=null;f==="interpolate-hcl"||f==="interpolate-lab"?M=Rt:h.expectedType&&h.expectedType.kind!=="value"&&(M=h.expectedType);for(let B=0;B<S.length;B+=2){const G=S[B],Z=S[B+1],te=B+3,oe=B+4;if(typeof G!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(k.length&&k[k.length-1][0]>=G)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',te);const ae=h.parse(Z,oe,M);if(!ae)return null;M=M||ae.type,k.push([G,ae])}return Pe(M,Xe)||Pe(M,Rt)||Pe(M,Y)||Pe(M,U)||Pe(M,J(Xe))?new No(M,f,v,x,k):h.error(`Type ${ne(M)} is not interpolatable.`)}evaluate(s){const h=this.labels,f=this.outputs;if(h.length===1)return f[0].evaluate(s);const v=this.input.evaluate(s);if(v<=h[0])return f[0].evaluate(s);const x=h.length;if(v>=h[x-1])return f[x-1].evaluate(s);const S=Hc(h,v),k=No.interpolationFactor(this.interpolation,v,h[S],h[S+1]),M=f[S].evaluate(s),B=f[S+1].evaluate(s);switch(this.operator){case"interpolate":return Fo[this.type.kind](M,B,k);case"interpolate-hcl":return Fo.color(M,B,k,"hcl");case"interpolate-lab":return Fo.color(M,B,k,"lab")}}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function nm(c,s,h,f){const v=f-h,x=c-h;return v===0?0:s===1?x/v:(Math.pow(s,x)-1)/(Math.pow(s,v)-1)}class Pd{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expectected at least one argument.");let f=null;const v=h.expectedType;v&&v.kind!=="value"&&(f=v);const x=[];for(const k of s.slice(1)){const M=h.parse(k,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!M)return null;f=f||M.type,x.push(M)}if(!f)throw new Error("No output type");const S=v&&x.some(k=>pe(v,k.type));return new Pd(S?Ft:f,x)}evaluate(s){let h,f=null,v=0;for(const x of this.args)if(v++,f=x.evaluate(s),f&&f instanceof ri&&!f.available&&(h||(h=f.name),f=null,v===this.args.length&&(f=h)),f!==null)break;return f}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class Ad{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const f=[];for(let x=1;x<s.length-1;x+=2){const S=s[x];if(typeof S!="string")return h.error(`Expected string, but found ${typeof S} instead.`,x);if(/[^a-zA-Z0-9_]/.test(S))return h.error("Variable names must contain only alphanumeric characters or '_'.",x);const k=h.parse(s[x+1],x+1);if(!k)return null;f.push([S,k])}const v=h.parse(s[s.length-1],s.length-1,h.expectedType,f);return v?new Ad(f,v):null}outputDefined(){return this.result.outputDefined()}}class im{constructor(s,h,f){this.type=s,this.index=h,this.input=f}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=h.parse(s[1],1,Xe),v=h.parse(s[2],2,J(h.expectedType||Ft));return f&&v?new im(v.type.itemType,f,v):null}evaluate(s){const h=this.index.evaluate(s),f=this.input.evaluate(s);if(h<0)throw new Un(`Array index out of bounds: ${h} < 0.`);if(h>=f.length)throw new Un(`Array index out of bounds: ${h} > ${f.length-1}.`);if(h!==Math.floor(h))throw new Un(`Array index must be an integer, but found ${h} instead.`);return f[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class om{constructor(s,h){this.type=vt,this.needle=s,this.haystack=h}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const f=h.parse(s[1],1,Ft),v=h.parse(s[2],2,Ft);return f&&v?se(f.type,[vt,Et,Xe,Ve,Ft])?new om(f,v):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ne(f.type)} instead`):null}evaluate(s){const h=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!f)return!1;if(!xe(h,["boolean","string","number","null"]))throw new Un(`Expected first argument to be of type boolean, string, number or null, but found ${ne($n(h))} instead.`);if(!xe(f,["string","array"]))throw new Un(`Expected second argument to be of type array or string, but found ${ne($n(f))} instead.`);return f.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class Rd{constructor(s,h,f){this.type=Xe,this.needle=s,this.haystack=h,this.fromIndex=f}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=h.parse(s[1],1,Ft),v=h.parse(s[2],2,Ft);if(!f||!v)return null;if(!se(f.type,[vt,Et,Xe,Ve,Ft]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ne(f.type)} instead`);if(s.length===4){const x=h.parse(s[3],3,Xe);return x?new Rd(f,v,x):null}return new Rd(f,v)}evaluate(s){const h=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!xe(h,["boolean","string","number","null"]))throw new Un(`Expected first argument to be of type boolean, string, number or null, but found ${ne($n(h))} instead.`);if(!xe(f,["string","array"]))throw new Un(`Expected second argument to be of type array or string, but found ${ne($n(f))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(s);return f.indexOf(h,v)}return f.indexOf(h)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class am{constructor(s,h,f,v,x,S){this.inputType=s,this.type=h,this.input=f,this.cases=v,this.outputs=x,this.otherwise=S}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let f,v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const x={},S=[];for(let B=2;B<s.length-1;B+=2){let G=s[B];const Z=s[B+1];Array.isArray(G)||(G=[G]);const te=h.concat(B);if(G.length===0)return te.error("Expected at least one branch label.");for(const ae of G){if(typeof ae!="number"&&typeof ae!="string")return te.error("Branch labels must be numbers or strings.");if(typeof ae=="number"&&Math.abs(ae)>Number.MAX_SAFE_INTEGER)return te.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ae=="number"&&Math.floor(ae)!==ae)return te.error("Numeric branch labels must be integer values.");if(f){if(te.checkSubtype(f,$n(ae)))return null}else f=$n(ae);if(x[String(ae)]!==void 0)return te.error("Branch labels must be unique.");x[String(ae)]=S.length}const oe=h.parse(Z,B,v);if(!oe)return null;v=v||oe.type,S.push(oe)}const k=h.parse(s[1],1,Ft);if(!k)return null;const M=h.parse(s[s.length-1],s.length-1,v);return M?k.type.kind!=="value"&&h.concat(1).checkSubtype(f,k.type)?null:new am(f,v,k,x,S,M):null}evaluate(s){const h=this.input.evaluate(s);return($n(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class sm{constructor(s,h,f){this.type=s,this.branches=h,this.otherwise=f}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let f;h.expectedType&&h.expectedType.kind!=="value"&&(f=h.expectedType);const v=[];for(let S=1;S<s.length-1;S+=2){const k=h.parse(s[S],S,vt);if(!k)return null;const M=h.parse(s[S+1],S+1,f);if(!M)return null;v.push([k,M]),f=f||M.type}const x=h.parse(s[s.length-1],s.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new sm(f,v,x)}evaluate(s){for(const[h,f]of this.branches)if(h.evaluate(s))return f.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[h,f]of this.branches)s(h),s(f);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Dd{constructor(s,h,f,v){this.type=s,this.input=h,this.beginIndex=f,this.endIndex=v}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const f=h.parse(s[1],1,Ft),v=h.parse(s[2],2,Xe);if(!f||!v)return null;if(!se(f.type,[J(Ft),Et,Ft]))return h.error(`Expected first argument to be of type array or string, but found ${ne(f.type)} instead`);if(s.length===4){const x=h.parse(s[3],3,Xe);return x?new Dd(f.type,f,v,x):null}return new Dd(f.type,f,v)}evaluate(s){const h=this.input.evaluate(s),f=this.beginIndex.evaluate(s);if(!xe(h,["string","array"]))throw new Un(`Expected first argument to be of type array or string, but found ${ne($n(h))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(s);return h.slice(f,v)}return h.slice(f)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function s0(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function l0(c,s,h,f){return f.compare(s,h)===0}function Gc(c,s,h){const f=c!=="=="&&c!=="!=";return class bB{constructor(x,S,k){this.type=vt,this.lhs=x,this.rhs=S,this.collator=k,this.hasUntypedArgument=x.type.kind==="value"||S.type.kind==="value"}static parse(x,S){if(x.length!==3&&x.length!==4)return S.error("Expected two or three arguments.");const k=x[0];let M=S.parse(x[1],1,Ft);if(!M)return null;if(!s0(k,M.type))return S.concat(1).error(`"${k}" comparisons are not supported for type '${ne(M.type)}'.`);let B=S.parse(x[2],2,Ft);if(!B)return null;if(!s0(k,B.type))return S.concat(2).error(`"${k}" comparisons are not supported for type '${ne(B.type)}'.`);if(M.type.kind!==B.type.kind&&M.type.kind!=="value"&&B.type.kind!=="value")return S.error(`Cannot compare types '${ne(M.type)}' and '${ne(B.type)}'.`);f&&(M.type.kind==="value"&&B.type.kind!=="value"?M=new oa(B.type,[M]):M.type.kind!=="value"&&B.type.kind==="value"&&(B=new oa(M.type,[B])));let G=null;if(x.length===4){if(M.type.kind!=="string"&&B.type.kind!=="string"&&M.type.kind!=="value"&&B.type.kind!=="value")return S.error("Cannot use collator to compare non-string types.");if(G=S.parse(x[3],3,_r),!G)return null}return new bB(M,B,G)}evaluate(x){const S=this.lhs.evaluate(x),k=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const M=$n(S),B=$n(k);if(M.kind!==B.kind||M.kind!=="string"&&M.kind!=="number")throw new Un(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${M.kind}, ${B.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const M=$n(S),B=$n(k);if(M.kind!=="string"||B.kind!=="string")return s(x,S,k)}return this.collator?h(x,S,k,this.collator.evaluate(x)):s(x,S,k)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Aw=Gc("==",function(c,s,h){return s===h},l0),Rw=Gc("!=",function(c,s,h){return s!==h},function(c,s,h,f){return!l0(0,s,h,f)}),Dw=Gc("<",function(c,s,h){return s<h},function(c,s,h,f){return f.compare(s,h)<0}),zw=Gc(">",function(c,s,h){return s>h},function(c,s,h,f){return f.compare(s,h)>0}),Lw=Gc("<=",function(c,s,h){return s<=h},function(c,s,h,f){return f.compare(s,h)<=0}),Ow=Gc(">=",function(c,s,h){return s>=h},function(c,s,h,f){return f.compare(s,h)>=0});class lm{constructor(s,h,f,v,x){this.type=Et,this.number=s,this.locale=h,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(s,h){if(s.length!==3)return h.error("Expected two arguments.");const f=h.parse(s[1],1,Xe);if(!f)return null;const v=s[2];if(typeof v!="object"||Array.isArray(v))return h.error("NumberFormat options argument must be an object.");let x=null;if(v.locale&&(x=h.parse(v.locale,1,Et),!x))return null;let S=null;if(v.currency&&(S=h.parse(v.currency,1,Et),!S))return null;let k=null;if(v["min-fraction-digits"]&&(k=h.parse(v["min-fraction-digits"],1,Xe),!k))return null;let M=null;return v["max-fraction-digits"]&&(M=h.parse(v["max-fraction-digits"],1,Xe),!M)?null:new lm(f,x,S,k,M)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class zd{constructor(s){this.type=ue,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const f=s[1];if(!Array.isArray(f)&&typeof f=="object")return h.error("First argument must be an image or text section.");const v=[];let x=!1;for(let S=1;S<=s.length-1;++S){const k=s[S];if(x&&typeof k=="object"&&!Array.isArray(k)){x=!1;let M=null;if(k["font-scale"]&&(M=h.parse(k["font-scale"],1,Xe),!M))return null;let B=null;if(k["text-font"]&&(B=h.parse(k["text-font"],1,J(Et)),!B))return null;let G=null;if(k["text-color"]&&(G=h.parse(k["text-color"],1,Rt),!G))return null;const Z=v[v.length-1];Z.scale=M,Z.font=B,Z.textColor=G}else{const M=h.parse(s[S],1,Ft);if(!M)return null;const B=M.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,v.push({content:M,scale:null,font:null,textColor:null})}}return new zd(v)}evaluate(s){return new Kr(this.sections.map(h=>{const f=h.content.evaluate(s);return $n(f)===ee?new Kt("",f,null,null,null):new Kt(nn(f),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null)}))}eachChild(s){for(const h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor)}outputDefined(){return!1}}class cm{constructor(s){this.type=ee,this.input=s}static parse(s,h){if(s.length!==2)return h.error("Expected two arguments.");const f=h.parse(s[1],1,Et);return f?new cm(f):h.error("No image name provided.")}evaluate(s){const h=this.input.evaluate(s),f=ri.fromString(h);return f&&s.availableImages&&(f.available=s.availableImages.indexOf(h)>-1),f}eachChild(s){s(this.input)}outputDefined(){return!1}}class um{constructor(s){this.type=Xe,this.input=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);const f=h.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${ne(f.type)} instead.`):new um(f):null}evaluate(s){const h=this.input.evaluate(s);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Un(`Expected value to be of type string or array, but found ${ne($n(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const qc={"==":Aw,"!=":Rw,">":zw,"<":Dw,">=":Ow,"<=":Lw,array:oa,at:im,boolean:oa,case:sm,coalesce:Pd,collator:Sd,format:zd,image:cm,in:om,"index-of":Rd,interpolate:No,"interpolate-hcl":No,"interpolate-lab":No,length:um,let:Ad,literal:Wl,match:am,number:oa,"number-format":lm,object:oa,slice:Dd,step:hl,string:oa,"to-boolean":cl,"to-color":cl,"to-number":cl,"to-string":cl,var:Td,within:Zl};function c0(c,[s,h,f,v]){s=s.evaluate(c),h=h.evaluate(c),f=f.evaluate(c);const x=v?v.evaluate(c):1,S=Bo(s,h,f,x);if(S)throw new Un(S);return new Vr(s/255,h/255,f/255,x,!1)}function u0(c,s){return c in s}function hm(c,s){const h=s[c];return h===void 0?null:h}function Kl(c){return{type:c}}function h0(c){return{result:"success",value:c}}function dl(c){return{result:"error",value:c}}function Wc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function d0(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function dm(c){return!!c.expression&&c.expression.interpolated}function on(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Bn(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function $w(c){return c}function Hr(c,s){const h=s.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",v=f||!(f||c.property!==void 0),x=c.type||(dm(s)?"exponential":"interval");if(h||s.type==="padding"){const G=h?Vr.parse:Yr.parse;(c=kt({},c)).stops&&(c.stops=c.stops.map(Z=>[Z[0],G(Z[1])])),c.default=G(c.default?c.default:s.default)}if(c.colorSpace&&(S=c.colorSpace)!=="rgb"&&S!=="hcl"&&S!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var S;let k,M,B;if(x==="exponential")k=nh;else if(x==="interval")k=An;else if(x==="categorical"){k=Fn,M=Object.create(null);for(const G of c.stops)M[G[0]]=G[1];B=typeof c.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);k=f0}if(f){const G={},Z=[];for(let ae=0;ae<c.stops.length;ae++){const ce=c.stops[ae],ve=ce[0].zoom;G[ve]===void 0&&(G[ve]={zoom:ve,type:c.type,property:c.property,default:c.default,stops:[]},Z.push(ve)),G[ve].stops.push([ce[0].value,ce[1]])}const te=[];for(const ae of Z)te.push([G[ae].zoom,Hr(G[ae],s)]);const oe={name:"linear"};return{kind:"composite",interpolationType:oe,interpolationFactor:No.interpolationFactor.bind(void 0,oe),zoomStops:te.map(ae=>ae[0]),evaluate:({zoom:ae},ce)=>nh({stops:te,base:c.base},s,ae).evaluate(ae,ce)}}if(v){const G=x==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:No.interpolationFactor.bind(void 0,G),zoomStops:c.stops.map(Z=>Z[0]),evaluate:({zoom:Z})=>k(c,s,Z,M,B)}}return{kind:"source",evaluate(G,Z){const te=Z&&Z.properties?Z.properties[c.property]:void 0;return te===void 0?Xl(c.default,s.default):k(c,s,te,M,B)}}}function Xl(c,s,h){return c!==void 0?c:s!==void 0?s:h!==void 0?h:void 0}function Fn(c,s,h,f,v){return Xl(typeof h===v?f[h]:void 0,c.default,s.default)}function An(c,s,h){if(on(h)!=="number")return Xl(c.default,s.default);const f=c.stops.length;if(f===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[f-1][0])return c.stops[f-1][1];const v=Hc(c.stops.map(x=>x[0]),h);return c.stops[v][1]}function nh(c,s,h){const f=c.base!==void 0?c.base:1;if(on(h)!=="number")return Xl(c.default,s.default);const v=c.stops.length;if(v===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[v-1][0])return c.stops[v-1][1];const x=Hc(c.stops.map(G=>G[0]),h),S=function(G,Z,te,oe){const ae=oe-te,ce=G-te;return ae===0?0:Z===1?ce/ae:(Math.pow(Z,ce)-1)/(Math.pow(Z,ae)-1)}(h,f,c.stops[x][0],c.stops[x+1][0]),k=c.stops[x][1],M=c.stops[x+1][1],B=Fo[s.type]||$w;return typeof k.evaluate=="function"?{evaluate(...G){const Z=k.evaluate.apply(void 0,G),te=M.evaluate.apply(void 0,G);if(Z!==void 0&&te!==void 0)return B(Z,te,S,c.colorSpace)}}:B(k,M,S,c.colorSpace)}function f0(c,s,h){switch(s.type){case"color":h=Vr.parse(h);break;case"formatted":h=Kr.fromString(h.toString());break;case"resolvedImage":h=ri.fromString(h.toString());break;case"padding":h=Yr.parse(h);break;default:on(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0)}return Xl(h,c.default,s.default)}aa.register(qc,{error:[{kind:"error"},[Et],(c,[s])=>{throw new Un(s.evaluate(c))}],typeof:[Et,[Ft],(c,[s])=>ne($n(s.evaluate(c)))],"to-rgba":[J(Xe,4),[Rt],(c,[s])=>{const[h,f,v,x]=s.evaluate(c).rgb;return[255*h,255*f,255*v,x]}],rgb:[Rt,[Xe,Xe,Xe],c0],rgba:[Rt,[Xe,Xe,Xe,Xe],c0],has:{type:vt,overloads:[[[Et],(c,[s])=>u0(s.evaluate(c),c.properties())],[[Et,br],(c,[s,h])=>u0(s.evaluate(c),h.evaluate(c))]]},get:{type:Ft,overloads:[[[Et],(c,[s])=>hm(s.evaluate(c),c.properties())],[[Et,br],(c,[s,h])=>hm(s.evaluate(c),h.evaluate(c))]]},"feature-state":[Ft,[Et],(c,[s])=>hm(s.evaluate(c),c.featureState||{})],properties:[br,[],c=>c.properties()],"geometry-type":[Et,[],c=>c.geometryType()],id:[Ft,[],c=>c.id()],zoom:[Xe,[],c=>c.globals.zoom],"heatmap-density":[Xe,[],c=>c.globals.heatmapDensity||0],"line-progress":[Xe,[],c=>c.globals.lineProgress||0],accumulated:[Ft,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Xe,Kl(Xe),(c,s)=>{let h=0;for(const f of s)h+=f.evaluate(c);return h}],"*":[Xe,Kl(Xe),(c,s)=>{let h=1;for(const f of s)h*=f.evaluate(c);return h}],"-":{type:Xe,overloads:[[[Xe,Xe],(c,[s,h])=>s.evaluate(c)-h.evaluate(c)],[[Xe],(c,[s])=>-s.evaluate(c)]]},"/":[Xe,[Xe,Xe],(c,[s,h])=>s.evaluate(c)/h.evaluate(c)],"%":[Xe,[Xe,Xe],(c,[s,h])=>s.evaluate(c)%h.evaluate(c)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(c,[s,h])=>Math.pow(s.evaluate(c),h.evaluate(c))],sqrt:[Xe,[Xe],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Xe,[Xe],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Xe,[Xe],(c,[s])=>Math.log(s.evaluate(c))],log2:[Xe,[Xe],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Xe,[Xe],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Xe,[Xe],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Xe,[Xe],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Xe,[Xe],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Xe,[Xe],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Xe,[Xe],(c,[s])=>Math.atan(s.evaluate(c))],min:[Xe,Kl(Xe),(c,s)=>Math.min(...s.map(h=>h.evaluate(c)))],max:[Xe,Kl(Xe),(c,s)=>Math.max(...s.map(h=>h.evaluate(c)))],abs:[Xe,[Xe],(c,[s])=>Math.abs(s.evaluate(c))],round:[Xe,[Xe],(c,[s])=>{const h=s.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Xe,[Xe],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Xe,[Xe],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[vt,[Et,Ft],(c,[s,h])=>c.properties()[s.value]===h.value],"filter-id-==":[vt,[Ft],(c,[s])=>c.id()===s.value],"filter-type-==":[vt,[Et],(c,[s])=>c.geometryType()===s.value],"filter-<":[vt,[Et,Ft],(c,[s,h])=>{const f=c.properties()[s.value],v=h.value;return typeof f==typeof v&&f<v}],"filter-id-<":[vt,[Ft],(c,[s])=>{const h=c.id(),f=s.value;return typeof h==typeof f&&h<f}],"filter->":[vt,[Et,Ft],(c,[s,h])=>{const f=c.properties()[s.value],v=h.value;return typeof f==typeof v&&f>v}],"filter-id->":[vt,[Ft],(c,[s])=>{const h=c.id(),f=s.value;return typeof h==typeof f&&h>f}],"filter-<=":[vt,[Et,Ft],(c,[s,h])=>{const f=c.properties()[s.value],v=h.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[vt,[Ft],(c,[s])=>{const h=c.id(),f=s.value;return typeof h==typeof f&&h<=f}],"filter->=":[vt,[Et,Ft],(c,[s,h])=>{const f=c.properties()[s.value],v=h.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[vt,[Ft],(c,[s])=>{const h=c.id(),f=s.value;return typeof h==typeof f&&h>=f}],"filter-has":[vt,[Ft],(c,[s])=>s.value in c.properties()],"filter-has-id":[vt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[vt,[J(Et)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[vt,[J(Ft)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[vt,[Et,J(Ft)],(c,[s,h])=>h.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[vt,[Et,J(Ft)],(c,[s,h])=>function(f,v,x,S){for(;x<=S;){const k=x+S>>1;if(v[k]===f)return!0;v[k]>f?S=k-1:x=k+1}return!1}(c.properties()[s.value],h.value,0,h.value.length-1)],all:{type:vt,overloads:[[[vt,vt],(c,[s,h])=>s.evaluate(c)&&h.evaluate(c)],[Kl(vt),(c,s)=>{for(const h of s)if(!h.evaluate(c))return!1;return!0}]]},any:{type:vt,overloads:[[[vt,vt],(c,[s,h])=>s.evaluate(c)||h.evaluate(c)],[Kl(vt),(c,s)=>{for(const h of s)if(h.evaluate(c))return!0;return!1}]]},"!":[vt,[vt],(c,[s])=>!s.evaluate(c)],"is-supported-script":[vt,[Et],(c,[s])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(s.evaluate(c))}],upcase:[Et,[Et],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Et,[Et],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Et,Kl(Ft),(c,s)=>s.map(h=>nn(h.evaluate(c))).join("")],"resolved-locale":[Et,[_r],(c,[s])=>s.evaluate(c).resolvedLocale()]});class fm{constructor(s,h){var f;this.expression=s,this._warningHistory={},this._evaluator=new Jp,this._defaultValue=h?(f=h).type==="color"&&Bn(f.default)?new Vr(0,0,0,0):f.type==="color"?Vr.parse(f.default)||null:f.type==="padding"?Yr.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?ti.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(s,h,f,v,x,S){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=S,this.expression.evaluate(this._evaluator)}evaluate(s,h,f,v,x,S){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=S||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new Un(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Ld(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in qc}function Od(c,s){const h=new wd(qc,kd,[],s?function(v){const x={color:Rt,string:Et,number:Xe,enum:Et,boolean:vt,formatted:ue,padding:Y,resolvedImage:ee,variableAnchorOffsetCollection:U};return v.type==="array"?J(x[v.value]||Ft,v.length):x[v.type]}(s):void 0),f=h.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?h0(new fm(f,s)):dl(h.errors)}class pm{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent=s!=="constant"&&!rh(h.expression)}evaluateWithoutErrorHandling(s,h,f,v,x,S){return this._styleExpression.evaluateWithoutErrorHandling(s,h,f,v,x,S)}evaluate(s,h,f,v,x,S){return this._styleExpression.evaluate(s,h,f,v,x,S)}}class $d{constructor(s,h,f,v){this.kind=s,this.zoomStops=f,this._styleExpression=h,this.isStateDependent=s!=="camera"&&!rh(h.expression),this.interpolationType=v}evaluateWithoutErrorHandling(s,h,f,v,x,S){return this._styleExpression.evaluateWithoutErrorHandling(s,h,f,v,x,S)}evaluate(s,h,f,v,x,S){return this._styleExpression.evaluate(s,h,f,v,x,S)}interpolationFactor(s,h,f){return this.interpolationType?No.interpolationFactor(this.interpolationType,s,h,f):0}}function mm(c,s){const h=Od(c,s);if(h.result==="error")return h;const f=h.value.expression,v=Ed(f);if(!v&&!Wc(s))return dl([new wt("","data expressions not supported")]);const x=Id(f,["zoom"]);if(!x&&!d0(s))return dl([new wt("","zoom expressions not supported")]);const S=oh(f);return S||x?S instanceof wt?dl([S]):S instanceof No&&!dm(s)?dl([new wt("",'"interpolate" expressions cannot be used with this property')]):h0(S?new $d(v?"camera":"composite",h.value,S.labels,S instanceof No?S.interpolation:void 0):new pm(v?"constant":"source",h.value)):dl([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ih{constructor(s,h){this._parameters=s,this._specification=h,kt(this,Hr(this._parameters,this._specification))}static deserialize(s){return new ih(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function oh(c){let s=null;if(c instanceof Ad)s=oh(c.result);else if(c instanceof Pd){for(const h of c.args)if(s=oh(h),s)break}else(c instanceof hl||c instanceof No)&&c.input instanceof aa&&c.input.name==="zoom"&&(s=c);return s instanceof wt||c.eachChild(h=>{const f=oh(h);f instanceof wt?s=f:!s&&f?s=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&f&&s!==f&&(s=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function ah(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!ah(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const Bw={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gm(c){if(c==null)return{filter:()=>!0,needGeometry:!1};ah(c)||(c=Bd(c));const s=Od(c,Bw);if(s.result==="error")throw new Error(s.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,f,v)=>s.value.evaluate(h,f,{},v),needGeometry:p0(c)}}function Fw(c,s){return c<s?-1:c>s?1:0}function p0(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(p0(c[s]))return!0;return!1}function Bd(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?vm(c[1],c[2],"=="):s==="!="?sh(vm(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?vm(c[1],c[2],s):s==="any"?(h=c.slice(1),["any"].concat(h.map(Bd))):s==="all"?["all"].concat(c.slice(1).map(Bd)):s==="none"?["all"].concat(c.slice(1).map(Bd).map(sh)):s==="in"?m0(c[1],c.slice(2)):s==="!in"?sh(m0(c[1],c.slice(2))):s==="has"?g0(c[1]):s==="!has"?sh(g0(c[1])):s!=="within"||c;var h}function vm(c,s,h){switch(c){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,c,s]}}function m0(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",c,["literal",s.sort(Fw)]]:["filter-in-small",c,["literal",s]]}}function g0(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function sh(c){return["!",c]}function Fd(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let v="[";for(const x of c)v+=`${Fd(x)},`;return`${v}]`}const h=Object.keys(c).sort();let f="{";for(let v=0;v<h.length;v++)f+=`${JSON.stringify(h[v])}:${Fd(c[h[v]])},`;return`${f}}`}function Nd(c){let s="";for(const h of Cr)s+=`/${Fd(c[h])}`;return s}function v0(c){const s=c.value;return s?[new je(c.key,s,"constants have been deprecated as of v8")]:[]}function Hn(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Jl(c){if(Array.isArray(c))return c.map(Jl);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const h in c)s[h]=Jl(c[h]);return s}return Hn(c)}function _o(c){const s=c.key,h=c.value,f=c.valueSpec||{},v=c.objectElementValidators||{},x=c.style,S=c.styleSpec,k=c.validateSpec;let M=[];const B=on(h);if(B!=="object")return[new je(s,h,`object expected, ${B} found`)];for(const G in h){const Z=G.split(".")[0],te=f[Z]||f["*"];let oe;if(v[Z])oe=v[Z];else if(f[Z])oe=k;else if(v["*"])oe=v["*"];else{if(!f["*"]){M.push(new je(s,h[G],`unknown property "${G}"`));continue}oe=k}M=M.concat(oe({key:(s&&`${s}.`)+G,value:h[G],valueSpec:te,style:x,styleSpec:S,object:h,objectKey:G,validateSpec:k},h))}for(const G in f)v[G]||f[G].required&&f[G].default===void 0&&h[G]===void 0&&M.push(new je(s,h,`missing required property "${G}"`));return M}function Zc(c){const s=c.value,h=c.valueSpec,f=c.style,v=c.styleSpec,x=c.key,S=c.arrayElementValidator||c.validateSpec;if(on(s)!=="array")return[new je(x,s,`array expected, ${on(s)} found`)];if(h.length&&s.length!==h.length)return[new je(x,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new je(x,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let k={type:h.value,values:h.values};v.$version<7&&(k.function=h.function),on(h.value)==="object"&&(k=h.value);let M=[];for(let B=0;B<s.length;B++)M=M.concat(S({array:s,arrayIndex:B,value:s[B],valueSpec:k,validateSpec:c.validateSpec,style:f,styleSpec:v,key:`${x}[${B}]`}));return M}function lh(c){const s=c.key,h=c.value,f=c.valueSpec;let v=on(h);return v==="number"&&h!=h&&(v="NaN"),v!=="number"?[new je(s,h,`number expected, ${v} found`)]:"minimum"in f&&h<f.minimum?[new je(s,h,`${h} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&h>f.maximum?[new je(s,h,`${h} is greater than the maximum value ${f.maximum}`)]:[]}function jd(c){const s=c.valueSpec,h=Hn(c.value.type);let f,v,x,S={};const k=h!=="categorical"&&c.value.property===void 0,M=!k,B=on(c.value.stops)==="array"&&on(c.value.stops[0])==="array"&&on(c.value.stops[0][0])==="object",G=_o({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(oe){if(h==="identity")return[new je(oe.key,oe.value,'identity function may not have a "stops" property')];let ae=[];const ce=oe.value;return ae=ae.concat(Zc({key:oe.key,value:ce,valueSpec:oe.valueSpec,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:Z})),on(ce)==="array"&&ce.length===0&&ae.push(new je(oe.key,ce,"array must have at least one stop")),ae},default:function(oe){return oe.validateSpec({key:oe.key,value:oe.value,valueSpec:s,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec})}}});return h==="identity"&&k&&G.push(new je(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||G.push(new je(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!dm(c.valueSpec)&&G.push(new je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(M&&!Wc(c.valueSpec)?G.push(new je(c.key,c.value,"property functions not supported")):k&&!d0(c.valueSpec)&&G.push(new je(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!B||c.value.property!==void 0||G.push(new je(c.key,c.value,'"property" property is required')),G;function Z(oe){let ae=[];const ce=oe.value,ve=oe.key;if(on(ce)!=="array")return[new je(ve,ce,`array expected, ${on(ce)} found`)];if(ce.length!==2)return[new je(ve,ce,`array length 2 expected, length ${ce.length} found`)];if(B){if(on(ce[0])!=="object")return[new je(ve,ce,`object expected, ${on(ce[0])} found`)];if(ce[0].zoom===void 0)return[new je(ve,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new je(ve,ce,"object stop key must have value")];if(x&&x>Hn(ce[0].zoom))return[new je(ve,ce[0].zoom,"stop zoom values must appear in ascending order")];Hn(ce[0].zoom)!==x&&(x=Hn(ce[0].zoom),v=void 0,S={}),ae=ae.concat(_o({key:`${ve}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:lh,value:te}}))}else ae=ae.concat(te({key:`${ve}[0]`,value:ce[0],valueSpec:{},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec},ce));return Ld(Jl(ce[1]))?ae.concat([new je(`${ve}[1]`,ce[1],"expressions are not allowed in function stops.")]):ae.concat(oe.validateSpec({key:`${ve}[1]`,value:ce[1],valueSpec:s,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec}))}function te(oe,ae){const ce=on(oe.value),ve=Hn(oe.value),be=oe.value!==null?oe.value:ae;if(f){if(ce!==f)return[new je(oe.key,be,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new je(oe.key,be,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&h!=="categorical"){let ze=`number expected, ${ce} found`;return Wc(s)&&h===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(oe.key,be,ze)]}return h!=="categorical"||ce!=="number"||isFinite(ve)&&Math.floor(ve)===ve?h!=="categorical"&&ce==="number"&&v!==void 0&&ve<v?[new je(oe.key,be,"stop domain values must appear in ascending order")]:(v=ve,h==="categorical"&&ve in S?[new je(oe.key,be,"stop domain values must be unique")]:(S[ve]=!0,[])):[new je(oe.key,be,`integer expected, found ${ve}`)]}}function Yl(c){const s=(c.expressionContext==="property"?mm:Od)(Jl(c.value),c.valueSpec);if(s.result==="error")return s.value.map(f=>new je(`${c.key}${f.key}`,c.value,f.message));const h=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!rh(h))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!rh(h))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Id(h,["zoom","feature-state"]))return[new je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ed(h))return[new je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ch(c){const s=c.key,h=c.value,f=c.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(Hn(h))===-1&&v.push(new je(s,h,`expected one of [${f.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(f.values).indexOf(Hn(h))===-1&&v.push(new je(s,h,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(h)} found`)),v}function Kc(c){return ah(Jl(c.value))?Yl(kt({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):y0(c)}function y0(c){const s=c.value,h=c.key;if(on(s)!=="array")return[new je(h,s,`array expected, ${on(s)} found`)];const f=c.styleSpec;let v,x=[];if(s.length<1)return[new je(h,s,"filter array must have at least 1 element")];switch(x=x.concat(ch({key:`${h}[0]`,value:s[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),Hn(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&Hn(s[1])==="$type"&&x.push(new je(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&x.push(new je(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(v=on(s[1]),v!=="string"&&x.push(new je(`${h}[1]`,s[1],`string expected, ${v} found`)));for(let S=2;S<s.length;S++)v=on(s[S]),Hn(s[1])==="$type"?x=x.concat(ch({key:`${h}[${S}]`,value:s[S],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&x.push(new je(`${h}[${S}]`,s[S],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let S=1;S<s.length;S++)x=x.concat(y0({key:`${h}[${S}]`,value:s[S],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":v=on(s[1]),s.length!==2?x.push(new je(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):v!=="string"&&x.push(new je(`${h}[1]`,s[1],`string expected, ${v} found`));break;case"within":v=on(s[1]),s.length!==2?x.push(new je(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):v!=="object"&&x.push(new je(`${h}[1]`,s[1],`object expected, ${v} found`))}return x}function _0(c,s){const h=c.key,f=c.validateSpec,v=c.style,x=c.styleSpec,S=c.value,k=c.objectKey,M=x[`${s}_${c.layerType}`];if(!M)return[];const B=k.match(/^(.*)-transition$/);if(s==="paint"&&B&&M[B[1]]&&M[B[1]].transition)return f({key:h,value:S,valueSpec:x.transition,style:v,styleSpec:x});const G=c.valueSpec||M[k];if(!G)return[new je(h,S,`unknown property "${k}"`)];let Z;if(on(S)==="string"&&Wc(G)&&!G.tokens&&(Z=/^{([^}]+)}$/.exec(S)))return[new je(h,S,`"${k}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Z[1])} }\`.`)];const te=[];return c.layerType==="symbol"&&(k==="text-field"&&v&&!v.glyphs&&te.push(new je(h,S,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&Bn(Jl(S))&&Hn(S.type)==="identity"&&te.push(new je(h,S,'"text-font" does not support identity functions'))),te.concat(f({key:c.key,value:S,valueSpec:G,style:v,styleSpec:x,expressionContext:"property",propertyType:s,propertyKey:k}))}function x0(c){return _0(c,"paint")}function b0(c){return _0(c,"layout")}function w0(c){let s=[];const h=c.value,f=c.key,v=c.style,x=c.styleSpec;h.type||h.ref||s.push(new je(f,h,'either "type" or "ref" is required'));let S=Hn(h.type);const k=Hn(h.ref);if(h.id){const M=Hn(h.id);for(let B=0;B<c.arrayIndex;B++){const G=v.layers[B];Hn(G.id)===M&&s.push(new je(f,h.id,`duplicate layer id "${h.id}", previously used at line ${G.id.__line__}`))}}if("ref"in h){let M;["type","source","source-layer","filter","layout"].forEach(B=>{B in h&&s.push(new je(f,h[B],`"${B}" is prohibited for ref layers`))}),v.layers.forEach(B=>{Hn(B.id)===k&&(M=B)}),M?M.ref?s.push(new je(f,h.ref,"ref cannot reference another ref layer")):S=Hn(M.type):s.push(new je(f,h.ref,`ref layer "${k}" not found`))}else if(S!=="background")if(h.source){const M=v.sources&&v.sources[h.source],B=M&&Hn(M.type);M?B==="vector"&&S==="raster"?s.push(new je(f,h.source,`layer "${h.id}" requires a raster source`)):B!=="raster-dem"&&S==="hillshade"?s.push(new je(f,h.source,`layer "${h.id}" requires a raster-dem source`)):B==="raster"&&S!=="raster"?s.push(new je(f,h.source,`layer "${h.id}" requires a vector source`)):B!=="vector"||h["source-layer"]?B==="raster-dem"&&S!=="hillshade"?s.push(new je(f,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!h.paint||!h.paint["line-gradient"]||B==="geojson"&&M.lineMetrics||s.push(new je(f,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new je(f,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new je(f,h.source,`source "${h.source}" not found`))}else s.push(new je(f,h,'missing required property "source"'));return s=s.concat(_o({key:f,value:h,valueSpec:x.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${f}.type`,value:h.type,valueSpec:x.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:h,objectKey:"type"}),filter:Kc,layout:M=>_o({layer:h,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":B=>b0(kt({layerType:S},B))}}),paint:M=>_o({layer:h,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":B=>x0(kt({layerType:S},B))}})}})),s}function Ja(c){const s=c.value,h=c.key,f=on(s);return f!=="string"?[new je(h,s,`string expected, ${f} found`)]:[]}const uh={promoteId:function({key:c,value:s}){if(on(s)==="string")return Ja({key:c,value:s});{const h=[];for(const f in s)h.push(...Ja({key:`${c}.${f}`,value:s[f]}));return h}}};function jo(c){const s=c.value,h=c.key,f=c.styleSpec,v=c.style,x=c.validateSpec;if(!s.type)return[new je(h,s,'"type" is required')];const S=Hn(s.type);let k;switch(S){case"vector":case"raster":return k=_o({key:h,value:s,valueSpec:f[`source_${S.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:uh,validateSpec:x}),k;case"raster-dem":return k=function(M){var B;const G=(B=M.sourceName)!==null&&B!==void 0?B:"",Z=M.value,te=M.styleSpec,oe=te.source_raster_dem,ae=M.style;let ce=[];const ve=on(Z);if(Z===void 0)return ce;if(ve!=="object")return ce.push(new je("source_raster_dem",Z,`object expected, ${ve} found`)),ce;const be=Hn(Z.encoding)==="custom",ze=["redFactor","greenFactor","blueFactor","baseShift"],Te=M.value.encoding?`"${M.value.encoding}"`:"Default";for(const Be in Z)!be&&ze.includes(Be)?ce.push(new je(Be,Z[Be],`In "${G}": "${Be}" is only valid when "encoding" is set to "custom". ${Te} encoding found`)):oe[Be]?ce=ce.concat(M.validateSpec({key:Be,value:Z[Be],valueSpec:oe[Be],validateSpec:M.validateSpec,style:ae,styleSpec:te})):ce.push(new je(Be,Z[Be],`unknown property "${Be}"`));return ce}({sourceName:h,value:s,style:c.style,styleSpec:f,validateSpec:x}),k;case"geojson":if(k=_o({key:h,value:s,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:x,objectElementValidators:uh}),s.cluster)for(const M in s.clusterProperties){const[B,G]=s.clusterProperties[M],Z=typeof B=="string"?[B,["accumulated"],["get",M]]:B;k.push(...Yl({key:`${h}.${M}.map`,value:G,validateSpec:x,expressionContext:"cluster-map"})),k.push(...Yl({key:`${h}.${M}.reduce`,value:Z,validateSpec:x,expressionContext:"cluster-reduce"}))}return k;case"video":return _o({key:h,value:s,valueSpec:f.source_video,style:v,validateSpec:x,styleSpec:f});case"image":return _o({key:h,value:s,valueSpec:f.source_image,style:v,validateSpec:x,styleSpec:f});case"canvas":return[new je(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ch({key:`${h}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,validateSpec:x,styleSpec:f})}}function hh(c){const s=c.value,h=c.styleSpec,f=h.light,v=c.style;let x=[];const S=on(s);if(s===void 0)return x;if(S!=="object")return x=x.concat([new je("light",s,`object expected, ${S} found`)]),x;for(const k in s){const M=k.match(/^(.*)-transition$/);x=x.concat(M&&f[M[1]]&&f[M[1]].transition?c.validateSpec({key:k,value:s[k],valueSpec:h.transition,validateSpec:c.validateSpec,style:v,styleSpec:h}):f[k]?c.validateSpec({key:k,value:s[k],valueSpec:f[k],validateSpec:c.validateSpec,style:v,styleSpec:h}):[new je(k,s[k],`unknown property "${k}"`)])}return x}function S0(c){const s=c.value,h=c.styleSpec,f=h.terrain,v=c.style;let x=[];const S=on(s);if(s===void 0)return x;if(S!=="object")return x=x.concat([new je("terrain",s,`object expected, ${S} found`)]),x;for(const k in s)x=x.concat(f[k]?c.validateSpec({key:k,value:s[k],valueSpec:f[k],validateSpec:c.validateSpec,style:v,styleSpec:h}):[new je(k,s[k],`unknown property "${k}"`)]);return x}function C0(c){let s=[];const h=c.value,f=c.key;if(Array.isArray(h)){const v=[],x=[];for(const S in h)h[S].id&&v.includes(h[S].id)&&s.push(new je(f,h,`all the sprites' ids must be unique, but ${h[S].id} is duplicated`)),v.push(h[S].id),h[S].url&&x.includes(h[S].url)&&s.push(new je(f,h,`all the sprites' URLs must be unique, but ${h[S].url} is duplicated`)),x.push(h[S].url),s=s.concat(_o({key:`${f}[${S}]`,value:h[S],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return Ja({key:f,value:h})}const T0={"*":()=>[],array:Zc,boolean:function(c){const s=c.value,h=c.key,f=on(s);return f!=="boolean"?[new je(h,s,`boolean expected, ${f} found`)]:[]},number:lh,color:function(c){const s=c.key,h=c.value,f=on(h);return f!=="string"?[new je(s,h,`color expected, ${f} found`)]:Vr.parse(String(h))?[]:[new je(s,h,`color expected, "${h}" found`)]},constants:v0,enum:ch,filter:Kc,function:jd,layer:w0,object:_o,source:jo,light:hh,terrain:S0,string:Ja,formatted:function(c){return Ja(c).length===0?[]:Yl(c)},resolvedImage:function(c){return Ja(c).length===0?[]:Yl(c)},padding:function(c){const s=c.key,h=c.value;if(on(h)==="array"){if(h.length<1||h.length>4)return[new je(s,h,`padding requires 1 to 4 values; ${h.length} values found`)];const f={type:"number"};let v=[];for(let x=0;x<h.length;x++)v=v.concat(c.validateSpec({key:`${s}[${x}]`,value:h[x],validateSpec:c.validateSpec,valueSpec:f}));return v}return lh({key:s,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const s=c.key,h=c.value,f=on(h),v=c.styleSpec;if(f!=="array"||h.length<1||h.length%2!=0)return[new je(s,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let S=0;S<h.length;S+=2)x=x.concat(ch({key:`${s}[${S}]`,value:h[S],valueSpec:v.layout_symbol["text-anchor"]})),x=x.concat(Zc({key:`${s}[${S+1}]`,value:h[S+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:v}));return x},sprite:C0};function ks(c){const s=c.value,h=c.valueSpec,f=c.styleSpec;return c.validateSpec=ks,h.expression&&Bn(Hn(s))?jd(c):h.expression&&Ld(Jl(s))?Yl(c):h.type&&T0[h.type]?T0[h.type](c):_o(kt({},c,{valueSpec:h.type?f[h.type]:h}))}function k0(c){const s=c.value,h=c.key,f=Ja(c);return f.length||(s.indexOf("{fontstack}")===-1&&f.push(new je(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&f.push(new je(h,s,'"glyphs" url must include a "{range}" token'))),f}function sa(c,s=He){let h=[];return h=h.concat(ks({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:ks,objectElementValidators:{glyphs:k0,"*":()=>[]}})),c.constants&&(h=h.concat(v0({key:"constants",value:c.constants,style:c,styleSpec:s,validateSpec:ks}))),Vd(h)}function Es(c){return function(s){return c({...s,validateSpec:ks})}}function Vd(c){return[].concat(c).sort((s,h)=>s.line-h.line)}function Is(c){return function(...s){return Vd(c.apply(this,s))}}sa.source=Is(Es(jo)),sa.sprite=Is(Es(C0)),sa.glyphs=Is(Es(k0)),sa.light=Is(Es(hh)),sa.terrain=Is(Es(S0)),sa.layer=Is(Es(w0)),sa.filter=Is(Es(Kc)),sa.paintProperty=Is(Es(x0)),sa.layoutProperty=Is(Es(b0));const Ms=sa,Nw=Ms.light,ym=Ms.paintProperty,E0=Ms.layoutProperty;function Ud(c,s){let h=!1;if(s&&s.length)for(const f of s)c.fire(new Wt(new Error(f.message))),h=!0;return h}class Xc{constructor(s,h,f){const v=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const S=new Int32Array(this.arrayBuffer);s=S[0],this.d=(h=S[1])+2*(f=S[2]);for(let M=0;M<this.d*this.d;M++){const B=S[3+M],G=S[3+M+1];v.push(B===G?null:S.subarray(B,G))}const k=S[3+v.length+1];this.keys=S.subarray(S[3+v.length],k),this.bboxes=S.subarray(k),this.insert=this._insertReadonly}else{this.d=h+2*f;for(let S=0;S<this.d*this.d;S++)v.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=f,this.scale=h/s,this.uid=0;const x=f/h*s;this.min=-x,this.max=s+x}insert(s,h,f,v,x){this._forEachCell(h,f,v,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,h,f,v,x,S){this.cells[x].push(S)}query(s,h,f,v,x){const S=this.min,k=this.max;if(s<=S&&h<=S&&k<=f&&k<=v&&!x)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(s,h,f,v,this._queryCell,M,{},x),M}}_queryCell(s,h,f,v,x,S,k,M){const B=this.cells[x];if(B!==null){const G=this.keys,Z=this.bboxes;for(let te=0;te<B.length;te++){const oe=B[te];if(k[oe]===void 0){const ae=4*oe;(M?M(Z[ae+0],Z[ae+1],Z[ae+2],Z[ae+3]):s<=Z[ae+2]&&h<=Z[ae+3]&&f>=Z[ae+0]&&v>=Z[ae+1])?(k[oe]=!0,S.push(G[oe])):k[oe]=!1}}}}_forEachCell(s,h,f,v,x,S,k,M){const B=this._convertToCellCoord(s),G=this._convertToCellCoord(h),Z=this._convertToCellCoord(f),te=this._convertToCellCoord(v);for(let oe=B;oe<=Z;oe++)for(let ae=G;ae<=te;ae++){const ce=this.d*ae+oe;if((!M||M(this._convertFromCellCoord(oe),this._convertFromCellCoord(ae),this._convertFromCellCoord(oe+1),this._convertFromCellCoord(ae+1)))&&x.call(this,s,h,f,v,ce,S,k,M))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,h=3+this.cells.length+1+1;let f=0;for(let S=0;S<this.cells.length;S++)f+=this.cells[S].length;const v=new Int32Array(h+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let x=h;for(let S=0;S<s.length;S++){const k=s[S];v[3+S]=x,v.set(k,x),x+=k.length}return v[3+s.length]=x,v.set(this.keys,x),x+=this.keys.length,v[3+s.length+1]=x,v.set(this.bboxes,x),x+=this.bboxes.length,v.buffer}static serialize(s,h){const f=s.toArrayBuffer();return h&&h.push(f),{buffer:f}}static deserialize(s){return new Xc(s.buffer)}}const Ps={};function Vt(c,s,h={}){if(Ps[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Ps[c]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}Vt("Object",Object),Vt("TransferableGridIndex",Xc),Vt("Color",Vr),Vt("Error",Error),Vt("AJAXError",Ze),Vt("ResolvedImage",ri),Vt("StylePropertyFunction",ih),Vt("StyleExpression",fm,{omit:["_evaluator"]}),Vt("ZoomDependentExpression",$d),Vt("ZoomConstantExpression",pm),Vt("CompoundExpression",aa,{omit:["_evaluate"]});for(const c in qc)qc[c]._classRegistryKey||Vt(`Expression_${c}`,qc[c]);function Hd(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function fl(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Hd(c)||Ne(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return s&&s.push(h.buffer),h}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const f of c)h.push(fl(f,s));return h}if(typeof c=="object"){const h=c.constructor,f=h._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Ps[f])throw new Error(`${f} is not registered.`);const v=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&v===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in c){if(!c.hasOwnProperty(x)||Ps[f].omit.indexOf(x)>=0)continue;const S=c[x];v[x]=Ps[f].shallow.indexOf(x)>=0?S:fl(S,s)}c instanceof Error&&(v.message=c.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(v.$name=f),v}throw new Error("can't serialize object of type "+typeof c)}function Jc(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Hd(c)||Ne(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(Jc);if(typeof c=="object"){const s=c.$name||"Object";if(!Ps[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:h}=Ps[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(c);const f=Object.create(h.prototype);for(const v of Object.keys(c)){if(v==="$name")continue;const x=c[v];f[v]=Ps[s].shallow.indexOf(v)>=0?x:Jc(x)}return f}throw new Error("can't deserialize object of type "+typeof c)}class I0{constructor(){this.first=!0}update(s,h){const f=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=h),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=f,!0))}}const Ot={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function _m(c){for(const s of c)if(bm(s.charCodeAt(0)))return!0;return!1}function xm(c){for(const s of c)if(!jw(s.charCodeAt(0)))return!1;return!0}function jw(c){return!(Ot.Arabic(c)||Ot["Arabic Supplement"](c)||Ot["Arabic Extended-A"](c)||Ot["Arabic Presentation Forms-A"](c)||Ot["Arabic Presentation Forms-B"](c))}function bm(c){return!(c!==746&&c!==747&&(c<4352||!(Ot["Bopomofo Extended"](c)||Ot.Bopomofo(c)||Ot["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Ot["CJK Compatibility Ideographs"](c)||Ot["CJK Compatibility"](c)||Ot["CJK Radicals Supplement"](c)||Ot["CJK Strokes"](c)||!(!Ot["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Ot["CJK Unified Ideographs Extension A"](c)||Ot["CJK Unified Ideographs"](c)||Ot["Enclosed CJK Letters and Months"](c)||Ot["Hangul Compatibility Jamo"](c)||Ot["Hangul Jamo Extended-A"](c)||Ot["Hangul Jamo Extended-B"](c)||Ot["Hangul Jamo"](c)||Ot["Hangul Syllables"](c)||Ot.Hiragana(c)||Ot["Ideographic Description Characters"](c)||Ot.Kanbun(c)||Ot["Kangxi Radicals"](c)||Ot["Katakana Phonetic Extensions"](c)||Ot.Katakana(c)&&c!==12540||!(!Ot["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Ot["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Ot["Unified Canadian Aboriginal Syllabics"](c)||Ot["Unified Canadian Aboriginal Syllabics Extended"](c)||Ot["Vertical Forms"](c)||Ot["Yijing Hexagram Symbols"](c)||Ot["Yi Syllables"](c)||Ot["Yi Radicals"](c))))}function M0(c){return!(bm(c)||function(s){return!!(Ot["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ot["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ot["Letterlike Symbols"](s)||Ot["Number Forms"](s)||Ot["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ot["Control Pictures"](s)&&s!==9251||Ot["Optical Character Recognition"](s)||Ot["Enclosed Alphanumerics"](s)||Ot["Geometric Shapes"](s)||Ot["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ot["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ot["CJK Symbols and Punctuation"](s)||Ot.Katakana(s)||Ot["Private Use Area"](s)||Ot["CJK Compatibility Forms"](s)||Ot["Small Form Variants"](s)||Ot["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function P0(c){return c>=1424&&c<=2303||Ot["Arabic Presentation Forms-A"](c)||Ot["Arabic Presentation Forms-B"](c)}function A0(c,s){return!(!s&&P0(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Ot.Khmer(c))}function Vw(c){for(const s of c)if(P0(s.charCodeAt(0)))return!0;return!1}const wm="deferred",Sm="loading",Cm="loaded";let Tm=null,xo="unavailable",pl=null;const dh=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(xo="error"),Tm&&Tm(c)};function km(){fh.fire(new gr("pluginStateChange",{pluginStatus:xo,pluginURL:pl}))}const fh=new Br,Em=function(){return xo},R0=function(){if(xo!==wm||!pl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xo=Sm,km(),pl&&Er({url:pl},c=>{c?dh(c):(xo=Cm,km())})},Vo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>xo===Cm||Vo.applyArabicShaping!=null,isLoading:()=>xo===Sm,setState(c){if(!Fe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");xo=c.pluginStatus,pl=c.pluginURL},isParsed(){if(!Fe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Vo.applyArabicShaping!=null&&Vo.processBidirectionalText!=null&&Vo.processStyledBidirectionalText!=null},getPluginURL(){if(!Fe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return pl}};class En{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new I0,this.transition={})}isSupportedScript(s){return function(h,f){for(const v of h)if(!A0(v.charCodeAt(0),f))return!1;return!0}(s,Vo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,h=s-Math.floor(s),f=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*h}}}class Gd{constructor(s,h){this.property=s,this.value=h,this.expression=function(f,v){if(Bn(f))return new ih(f,v);if(Ld(f)){const x=mm(f,v);if(x.result==="error")throw new Error(x.value.map(S=>`${S.key}: ${S.message}`).join(", "));return x.value}{let x=f;return v.type==="color"&&typeof f=="string"?x=Vr.parse(f):v.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(x=ti.parse(f)):x=Yr.parse(f),{kind:"constant",evaluate:()=>x}}}(h===void 0?s.specification.default:h,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,h,f){return this.property.possiblyEvaluate(this,s,h,f)}}class Im{constructor(s){this.property=s,this.value=new Gd(s,void 0)}transitioned(s,h){return new z0(this.property,this.value,h,re({},s.transition,this.transition),s.now)}untransitioned(){return new z0(this.property,this.value,null,{},0)}}class D0{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return ke(this._values[s].value.value)}setValue(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Im(this._values[s].property)),this._values[s].value=new Gd(this._values[s].property,h===null?void 0:ke(h))}getTransition(s){return ke(this._values[s].transition)}setTransition(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Im(this._values[s].property)),this._values[s].transition=ke(h)||void 0}serialize(){const s={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(s[h]=f);const v=this.getTransition(h);v!==void 0&&(s[`${h}-transition`]=v)}return s}transitioned(s,h){const f=new L0(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(s,h._values[v]);return f}untransitioned(){const s=new L0(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class z0{constructor(s,h,f,v,x){this.property=s,this.value=h,this.begin=x+v.delay||0,this.end=this.begin+v.duration||0,s.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(s,h,f){const v=s.now||0,x=this.value.possiblyEvaluate(s,h,f),S=this.prior;if(S){if(v>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(v<this.begin)return S.possiblyEvaluate(s,h,f);{const k=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(S.possiblyEvaluate(s,h,f),x,function(M){if(M<=0)return 0;if(M>=1)return 1;const B=M*M,G=B*M;return 4*(M<.5?G:3*(M-B)+G-.75)}(k))}}return x}}class L0{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,f){const v=new qd(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(s,h,f);return v}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Uw{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return ke(this._values[s].value)}setValue(s,h){this._values[s]=new Gd(this._values[s].property,h===null?void 0:ke(h))}serialize(){const s={};for(const h of Object.keys(this._values)){const f=this.getValue(h);f!==void 0&&(s[h]=f)}return s}possiblyEvaluate(s,h,f){const v=new qd(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].possiblyEvaluate(s,h,f);return v}}class no{constructor(s,h,f){this.property=s,this.value=h,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,h,f,v){return this.property.evaluate(this.value,this.parameters,s,h,f,v)}}class qd{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class nr{constructor(s){this.specification=s}possiblyEvaluate(s,h){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(h)}interpolate(s,h,f){const v=Fo[this.specification.type];return v?v(s,h,f):s}}class fr{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,f,v){return new no(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(h,null,{},f,v)}:s.expression,h)}interpolate(s,h,f){if(s.value.kind!=="constant"||h.value.kind!=="constant")return s;if(s.value.value===void 0||h.value.value===void 0)return new no(this,{kind:"constant",value:void 0},s.parameters);const v=Fo[this.specification.type];if(v){const x=v(s.value.value,h.value.value,f);return new no(this,{kind:"constant",value:x},s.parameters)}return s}evaluate(s,h,f,v,x,S){return s.kind==="constant"?s.value:s.evaluate(h,f,v,x,S)}}class ph extends fr{possiblyEvaluate(s,h,f,v){if(s.value===void 0)return new no(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){const x=s.expression.evaluate(h,null,{},f,v),S=s.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,k=this._calculate(S,S,S,h);return new no(this,{kind:"constant",value:k},h)}if(s.expression.kind==="camera"){const x=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new no(this,{kind:"constant",value:x},h)}return new no(this,s.expression,h)}evaluate(s,h,f,v,x,S){if(s.kind==="source"){const k=s.evaluate(h,f,v,x,S);return this._calculate(k,k,k,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},f,v),s.evaluate({zoom:Math.floor(h.zoom)},f,v),s.evaluate({zoom:Math.floor(h.zoom)+1},f,v),h):s.value}_calculate(s,h,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:f,to:h}}interpolate(s){return s}}class Mm{constructor(s){this.specification=s}possiblyEvaluate(s,h,f,v){if(s.value!==void 0){if(s.expression.kind==="constant"){const x=s.expression.evaluate(h,null,{},f,v);return this._calculate(x,x,x,h)}return this._calculate(s.expression.evaluate(new En(Math.floor(h.zoom-1),h)),s.expression.evaluate(new En(Math.floor(h.zoom),h)),s.expression.evaluate(new En(Math.floor(h.zoom+1),h)),h)}}_calculate(s,h,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:f,to:h}}interpolate(s){return s}}class Pm{constructor(s){this.specification=s}possiblyEvaluate(s,h,f,v){return!!s.expression.evaluate(h,null,{},f,v)}interpolate(){return!1}}class ni{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in s){const f=s[h];f.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new Gd(f,void 0),x=this.defaultTransitionablePropertyValues[h]=new Im(f);this.defaultTransitioningPropertyValues[h]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate({})}}}Vt("DataDrivenProperty",fr),Vt("DataConstantProperty",nr),Vt("CrossFadedDataDrivenProperty",ph),Vt("CrossFadedProperty",Mm),Vt("ColorRampProperty",Pm);const Am="-transition";class la extends Br{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new Uw(h.layout)),h.paint)){this._transitionablePaint=new D0(h.paint);for(const f in s.paint)this.setPaintProperty(f,s.paint[f],{validate:!1});for(const f in s.layout)this.setLayoutProperty(f,s.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qd(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,f={}){h!=null&&this._validate(E0,`layers.${this.id}.layout.${s}`,s,h,f)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return s.endsWith(Am)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,f={}){if(h!=null&&this._validate(ym,`layers.${this.id}.paint.${s}`,s,h,f))return!1;if(s.endsWith(Am))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;{const v=this._transitionablePaint._values[s],x=v.property.specification["property-type"]==="cross-faded-data-driven",S=v.value.isDataDriven(),k=v.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);const M=this._transitionablePaint._values[s].value;return M.isDataDriven()||S||x||this._handleOverridablePaintPropertyUpdate(s,k,M)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,h,f){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),we(s,(h,f)=>!(h===void 0||f==="layout"&&!Object.keys(h).length||f==="paint"&&!Object.keys(h).length))}_validate(s,h,f,v,x={}){return(!x||x.validate!==!1)&&Ud(this,s.call(Ms,{key:h,layerType:this.type,objectKey:f,value:v,styleSpec:He,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const h=this.paint.get(s);if(h instanceof no&&Wc(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const O0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ql{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Gn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Nn(c,s=1){let h=0,f=0;return{members:c.map(v=>{const x=O0[v.type].BYTES_PER_ELEMENT,S=h=Yc(h,Math.max(s,x)),k=v.components||1;return f=Math.max(f,x),h+=x*k,{name:v.name,type:v.type,components:k,offset:S}}),size:Yc(h,Math.max(f,s)),alignment:s}}function Yc(c,s){return Math.ceil(c/s)*s}class mh extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){const f=this.length;return this.resize(f+1),this.emplace(f,s,h)}emplace(s,h,f){const v=2*s;return this.int16[v+0]=h,this.int16[v+1]=f,s}}mh.prototype.bytesPerElement=4,Vt("StructArrayLayout2i4",mh);class gh extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,h,f)}emplace(s,h,f,v){const x=3*s;return this.int16[x+0]=h,this.int16[x+1]=f,this.int16[x+2]=v,s}}gh.prototype.bytesPerElement=6,Vt("StructArrayLayout3i6",gh);class ec extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,s,h,f,v)}emplace(s,h,f,v,x){const S=4*s;return this.int16[S+0]=h,this.int16[S+1]=f,this.int16[S+2]=v,this.int16[S+3]=x,s}}ec.prototype.bytesPerElement=8,Vt("StructArrayLayout4i8",ec);class Rm extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S){const k=this.length;return this.resize(k+1),this.emplace(k,s,h,f,v,x,S)}emplace(s,h,f,v,x,S,k){const M=6*s;return this.int16[M+0]=h,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=x,this.int16[M+4]=S,this.int16[M+5]=k,s}}Rm.prototype.bytesPerElement=12,Vt("StructArrayLayout2i4i12",Rm);class Dm extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S){const k=this.length;return this.resize(k+1),this.emplace(k,s,h,f,v,x,S)}emplace(s,h,f,v,x,S,k){const M=4*s,B=8*s;return this.int16[M+0]=h,this.int16[M+1]=f,this.uint8[B+4]=v,this.uint8[B+5]=x,this.uint8[B+6]=S,this.uint8[B+7]=k,s}}Dm.prototype.bytesPerElement=8,Vt("StructArrayLayout2i4ub8",Dm);class Qc extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){const f=this.length;return this.resize(f+1),this.emplace(f,s,h)}emplace(s,h,f){const v=2*s;return this.float32[v+0]=h,this.float32[v+1]=f,s}}Qc.prototype.bytesPerElement=8,Vt("StructArrayLayout2f8",Qc);class zm extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S,k,M,B,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,s,h,f,v,x,S,k,M,B,G)}emplace(s,h,f,v,x,S,k,M,B,G,Z){const te=10*s;return this.uint16[te+0]=h,this.uint16[te+1]=f,this.uint16[te+2]=v,this.uint16[te+3]=x,this.uint16[te+4]=S,this.uint16[te+5]=k,this.uint16[te+6]=M,this.uint16[te+7]=B,this.uint16[te+8]=G,this.uint16[te+9]=Z,s}}zm.prototype.bytesPerElement=20,Vt("StructArrayLayout10ui20",zm);class Lm extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S,k,M,B,G,Z,te){const oe=this.length;return this.resize(oe+1),this.emplace(oe,s,h,f,v,x,S,k,M,B,G,Z,te)}emplace(s,h,f,v,x,S,k,M,B,G,Z,te,oe){const ae=12*s;return this.int16[ae+0]=h,this.int16[ae+1]=f,this.int16[ae+2]=v,this.int16[ae+3]=x,this.uint16[ae+4]=S,this.uint16[ae+5]=k,this.uint16[ae+6]=M,this.uint16[ae+7]=B,this.int16[ae+8]=G,this.int16[ae+9]=Z,this.int16[ae+10]=te,this.int16[ae+11]=oe,s}}Lm.prototype.bytesPerElement=24,Vt("StructArrayLayout4i4ui4i24",Lm);class an extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,h,f)}emplace(s,h,f,v){const x=3*s;return this.float32[x+0]=h,this.float32[x+1]=f,this.float32[x+2]=v,s}}an.prototype.bytesPerElement=12,Vt("StructArrayLayout3f12",an);class _ extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}_.prototype.bytesPerElement=4,Vt("StructArrayLayout1ul4",_);class l extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S,k,M,B){const G=this.length;return this.resize(G+1),this.emplace(G,s,h,f,v,x,S,k,M,B)}emplace(s,h,f,v,x,S,k,M,B,G){const Z=10*s,te=5*s;return this.int16[Z+0]=h,this.int16[Z+1]=f,this.int16[Z+2]=v,this.int16[Z+3]=x,this.int16[Z+4]=S,this.int16[Z+5]=k,this.uint32[te+3]=M,this.uint16[Z+8]=B,this.uint16[Z+9]=G,s}}l.prototype.bytesPerElement=20,Vt("StructArrayLayout6i1ul2ui20",l);class d extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S){const k=this.length;return this.resize(k+1),this.emplace(k,s,h,f,v,x,S)}emplace(s,h,f,v,x,S,k){const M=6*s;return this.int16[M+0]=h,this.int16[M+1]=f,this.int16[M+2]=v,this.int16[M+3]=x,this.int16[M+4]=S,this.int16[M+5]=k,s}}d.prototype.bytesPerElement=12,Vt("StructArrayLayout2i2i2i12",d);class g extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,s,h,f,v,x)}emplace(s,h,f,v,x,S){const k=4*s,M=8*s;return this.float32[k+0]=h,this.float32[k+1]=f,this.float32[k+2]=v,this.int16[M+6]=x,this.int16[M+7]=S,s}}g.prototype.bytesPerElement=16,Vt("StructArrayLayout2f1f2i16",g);class y extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,s,h,f,v)}emplace(s,h,f,v,x){const S=12*s,k=3*s;return this.uint8[S+0]=h,this.uint8[S+1]=f,this.float32[k+1]=v,this.float32[k+2]=x,s}}y.prototype.bytesPerElement=12,Vt("StructArrayLayout2ub2f12",y);class b extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,h,f)}emplace(s,h,f,v){const x=3*s;return this.uint16[x+0]=h,this.uint16[x+1]=f,this.uint16[x+2]=v,s}}b.prototype.bytesPerElement=6,Vt("StructArrayLayout3ui6",b);class E extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce,ve,be){const ze=this.length;return this.resize(ze+1),this.emplace(ze,s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce,ve,be)}emplace(s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce,ve,be,ze){const Te=24*s,Be=12*s,Ge=48*s;return this.int16[Te+0]=h,this.int16[Te+1]=f,this.uint16[Te+2]=v,this.uint16[Te+3]=x,this.uint32[Be+2]=S,this.uint32[Be+3]=k,this.uint32[Be+4]=M,this.uint16[Te+10]=B,this.uint16[Te+11]=G,this.uint16[Te+12]=Z,this.float32[Be+7]=te,this.float32[Be+8]=oe,this.uint8[Ge+36]=ae,this.uint8[Ge+37]=ce,this.uint8[Ge+38]=ve,this.uint32[Be+10]=be,this.int16[Te+22]=ze,s}}E.prototype.bytesPerElement=48,Vt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",E);class I extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce,ve,be,ze,Te,Be,Ge,et,$t,Jt,zt,At,_t,Ut){const St=this.length;return this.resize(St+1),this.emplace(St,s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce,ve,be,ze,Te,Be,Ge,et,$t,Jt,zt,At,_t,Ut)}emplace(s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce,ve,be,ze,Te,Be,Ge,et,$t,Jt,zt,At,_t,Ut,St){const ct=32*s,cr=16*s;return this.int16[ct+0]=h,this.int16[ct+1]=f,this.int16[ct+2]=v,this.int16[ct+3]=x,this.int16[ct+4]=S,this.int16[ct+5]=k,this.int16[ct+6]=M,this.int16[ct+7]=B,this.uint16[ct+8]=G,this.uint16[ct+9]=Z,this.uint16[ct+10]=te,this.uint16[ct+11]=oe,this.uint16[ct+12]=ae,this.uint16[ct+13]=ce,this.uint16[ct+14]=ve,this.uint16[ct+15]=be,this.uint16[ct+16]=ze,this.uint16[ct+17]=Te,this.uint16[ct+18]=Be,this.uint16[ct+19]=Ge,this.uint16[ct+20]=et,this.uint16[ct+21]=$t,this.uint16[ct+22]=Jt,this.uint32[cr+12]=zt,this.float32[cr+13]=At,this.float32[cr+14]=_t,this.uint16[ct+30]=Ut,this.uint16[ct+31]=St,s}}I.prototype.bytesPerElement=64,Vt("StructArrayLayout8i15ui1ul2f2ui64",I);class A extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}A.prototype.bytesPerElement=4,Vt("StructArrayLayout1f4",A);class j extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,h,f)}emplace(s,h,f,v){const x=3*s;return this.uint16[6*s+0]=h,this.float32[x+1]=f,this.float32[x+2]=v,s}}j.prototype.bytesPerElement=12,Vt("StructArrayLayout1ui2f12",j);class q extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,h,f)}emplace(s,h,f,v){const x=4*s;return this.uint32[2*s+0]=h,this.uint16[x+2]=f,this.uint16[x+3]=v,s}}q.prototype.bytesPerElement=8,Vt("StructArrayLayout1ul2ui8",q);class W extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){const f=this.length;return this.resize(f+1),this.emplace(f,s,h)}emplace(s,h,f){const v=2*s;return this.uint16[v+0]=h,this.uint16[v+1]=f,s}}W.prototype.bytesPerElement=4,Vt("StructArrayLayout2ui4",W);class ie extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}ie.prototype.bytesPerElement=2,Vt("StructArrayLayout1ui2",ie);class fe extends Gn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,s,h,f,v)}emplace(s,h,f,v,x){const S=4*s;return this.float32[S+0]=h,this.float32[S+1]=f,this.float32[S+2]=v,this.float32[S+3]=x,s}}fe.prototype.bytesPerElement=16,Vt("StructArrayLayout4f16",fe);class he extends Ql{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}he.prototype.size=20;class ge extends l{get(s){return new he(this,s)}}Vt("CollisionBoxArray",ge);class le extends Ql{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}le.prototype.size=48;class Me extends E{get(s){return new le(this,s)}}Vt("PlacedSymbolArray",Me);class Ue extends Ql{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ue.prototype.size=64;class _e extends I{get(s){return new Ue(this,s)}}Vt("SymbolInstanceArray",_e);class De extends A{getoffsetX(s){return this.float32[1*s+0]}}Vt("GlyphOffsetArray",De);class We extends gh{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Vt("SymbolLineVertexArray",We);class Ke extends Ql{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ke.prototype.size=12;class Ye extends j{get(s){return new Ke(this,s)}}Vt("TextAnchorOffsetArray",Ye);class lt extends Ql{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}lt.prototype.size=8;class nt extends q{get(s){return new lt(this,s)}}Vt("FeatureIndexArray",nt);class mt extends mh{}class Xt extends mh{}class zr extends mh{}class Pt extends Rm{}class pr extends Dm{}class Yt extends Qc{}class pn extends zm{}class Dr extends Lm{}class Tr extends an{}class Lr extends _{}class Kn extends d{}class Cn extends y{}class $i extends b{}class _i extends W{}const ii=Nn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Uo}=ii;class In{constructor(s=[]){this.segments=s}prepareSegment(s,h,f,v){let x=this.segments[this.segments.length-1];return s>In.MAX_VERTEX_ARRAY_LENGTH&&qe(`Max vertices per segment is ${In.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!x||x.vertexLength+s>In.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==v)&&(x={vertexOffset:h.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},v!==void 0&&(x.sortKey=v),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const s of this.segments)for(const h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,f,v){return new In([{vertexOffset:s,primitiveOffset:h,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function Ya(c,s){return 256*(c=F(Math.floor(c),0,255))+F(Math.floor(s),0,255)}In.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Vt("SegmentVector",In);const Qa=Nn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ml={exports:{}},tc={exports:{}};tc.exports=function(c,s){var h,f,v,x,S,k,M,B;for(f=c.length-(h=3&c.length),v=s,S=3432918353,k=461845907,B=0;B<f;)M=255&c.charCodeAt(B)|(255&c.charCodeAt(++B))<<8|(255&c.charCodeAt(++B))<<16|(255&c.charCodeAt(++B))<<24,++B,v=27492+(65535&(x=5*(65535&(v=(v^=M=(65535&(M=(M=(65535&M)*S+(((M>>>16)*S&65535)<<16)&4294967295)<<15|M>>>17))*k+(((M>>>16)*k&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(M=0,h){case 3:M^=(255&c.charCodeAt(B+2))<<16;case 2:M^=(255&c.charCodeAt(B+1))<<8;case 1:v^=M=(65535&(M=(M=(65535&(M^=255&c.charCodeAt(B)))*S+(((M>>>16)*S&65535)<<16)&4294967295)<<15|M>>>17))*k+(((M>>>16)*k&65535)<<16)&4294967295}return v^=c.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var eu=tc.exports,Ui={exports:{}};Ui.exports=function(c,s){for(var h,f=c.length,v=s^f,x=0;f>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(x)|(255&c.charCodeAt(++x))<<8|(255&c.charCodeAt(++x))<<16|(255&c.charCodeAt(++x))<<24))+((1540483477*(h>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:v^=(255&c.charCodeAt(x+2))<<16;case 2:v^=(255&c.charCodeAt(x+1))<<8;case 1:v=1540483477*(65535&(v^=255&c.charCodeAt(x)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var Bi=eu,io=Ui.exports;ml.exports=Bi,ml.exports.murmur3=Bi,ml.exports.murmur2=io;var rc=m(ml.exports);class Xn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,f,v){this.ids.push(xi(s)),this.positions.push(h,f,v)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=xi(s);let f=0,v=this.ids.length-1;for(;f<v;){const S=f+v>>1;this.ids[S]>=h?v=S:f=S+1}const x=[];for(;this.ids[f]===h;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(s,h){const f=new Float64Array(s.ids),v=new Uint32Array(s.positions);return bo(f,v,0,f.length-1),h&&h.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(s){const h=new Xn;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function xi(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:rc(String(c))}function bo(c,s,h,f){for(;h<f;){const v=c[h+f>>1];let x=h-1,S=f+1;for(;;){do x++;while(c[x]<v);do S--;while(c[S]>v);if(x>=S)break;Jn(c,x,S),Jn(s,3*x,3*S),Jn(s,3*x+1,3*S+1),Jn(s,3*x+2,3*S+2)}S-h<f-S?(bo(c,s,h,S),h=S+1):(bo(c,s,S+1,f),f=S)}}function Jn(c,s,h){const f=c[s];c[s]=c[h],c[h]=f}Vt("FeaturePositionMap",Xn);class nc{constructor(s,h){this.gl=s.gl,this.location=h}}class Wd extends nc{constructor(s,h){super(s,h),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class $0 extends nc{constructor(s,h){super(s,h),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class B0 extends nc{constructor(s,h){super(s,h),this.current=Vr.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const Hw=new Float32Array(16);function Om(c){return[Ya(255*c.r,255*c.g),Ya(255*c.b,255*c.a)]}class es{constructor(s,h,f){this.value=s,this.uniformNames=h.map(v=>`u_${v}`),this.type=f}setUniform(s,h,f){s.set(f.constantOr(this.value))}getBinding(s,h,f){return this.type==="color"?new B0(s,h):new Wd(s,h)}}class ic{constructor(s,h){this.uniformNames=h.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=s.tlbr}setUniform(s,h,f,v){const x=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&s.set(x)}getBinding(s,h,f){return f.substr(0,9)==="u_pattern"?new $0(s,h):new Wd(s,h)}}class ts{constructor(s,h,f,v){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=h.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(s,h,f,v,x){const S=this.paintVertexArray.length,k=this.expression.evaluate(new En(0),h,{},v,[],x);this.paintVertexArray.resize(s),this._setPaintValue(S,s,k)}updatePaintArray(s,h,f,v){const x=this.expression.evaluate({zoom:0},f,v);this._setPaintValue(s,h,x)}_setPaintValue(s,h,f){if(this.type==="color"){const v=Om(f);for(let x=s;x<h;x++)this.paintVertexArray.emplace(x,v[0],v[1])}else{for(let v=s;v<h;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ca{constructor(s,h,f,v,x,S){this.expression=s,this.uniformNames=h.map(k=>`u_${k}_t`),this.type=f,this.useIntegerZoom=v,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=h.map(k=>({name:`a_${k}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new S}populatePaintArray(s,h,f,v,x){const S=this.expression.evaluate(new En(this.zoom),h,{},v,[],x),k=this.expression.evaluate(new En(this.zoom+1),h,{},v,[],x),M=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(M,s,S,k)}updatePaintArray(s,h,f,v){const x=this.expression.evaluate({zoom:this.zoom},f,v),S=this.expression.evaluate({zoom:this.zoom+1},f,v);this._setPaintValue(s,h,x,S)}_setPaintValue(s,h,f,v){if(this.type==="color"){const x=Om(f),S=Om(v);for(let k=s;k<h;k++)this.paintVertexArray.emplace(k,x[0],x[1],S[0],S[1])}else{for(let x=s;x<h;x++)this.paintVertexArray.emplace(x,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h){const f=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,v=F(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);s.set(v)}getBinding(s,h,f){return new Wd(s,h)}}class rs{constructor(s,h,f,v,x,S){this.expression=s,this.type=h,this.useIntegerZoom=f,this.zoom=v,this.layerId=S,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(s,h,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(v,s,h.patterns&&h.patterns[this.layerId],f)}updatePaintArray(s,h,f,v,x){this._setPaintValues(s,h,f.patterns&&f.patterns[this.layerId],x)}_setPaintValues(s,h,f,v){if(!v||!f)return;const{min:x,mid:S,max:k}=f,M=v[x],B=v[S],G=v[k];if(M&&B&&G)for(let Z=s;Z<h;Z++)this.zoomInPaintVertexArray.emplace(Z,B.tl[0],B.tl[1],B.br[0],B.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],B.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(Z,B.tl[0],B.tl[1],B.br[0],B.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],B.pixelRatio,G.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Qa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Qa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $m{constructor(s,h,f){this.binders={},this._buffers=[];const v=[];for(const x in s.paint._values){if(!f(x))continue;const S=s.paint.get(x);if(!(S instanceof no&&Wc(S.property.specification)))continue;const k=wN(x,s.type),M=S.value,B=S.property.specification.type,G=S.property.useIntegerZoom,Z=S.property.specification["property-type"],te=Z==="cross-faded"||Z==="cross-faded-data-driven";if(M.kind==="constant")this.binders[x]=te?new ic(M.value,k):new es(M.value,k,B),v.push(`/u_${x}`);else if(M.kind==="source"||te){const oe=TM(x,B,"source");this.binders[x]=te?new rs(M,B,G,h,oe,s.id):new ts(M,k,B,oe),v.push(`/a_${x}`)}else{const oe=TM(x,B,"composite");this.binders[x]=new ca(M,k,B,G,h,oe),v.push(`/z_${x}`)}}this.cacheKey=v.sort().join("")}getMaxValue(s){const h=this.binders[s];return h instanceof ts||h instanceof ca?h.maxValue:0}populatePaintArrays(s,h,f,v,x){for(const S in this.binders){const k=this.binders[S];(k instanceof ts||k instanceof ca||k instanceof rs)&&k.populatePaintArray(s,h,f,v,x)}}setConstantPatternPositions(s,h){for(const f in this.binders){const v=this.binders[f];v instanceof ic&&v.setConstantPatternPositions(s,h)}}updatePaintArrays(s,h,f,v,x){let S=!1;for(const k in s){const M=h.getPositions(k);for(const B of M){const G=f.feature(B.index);for(const Z in this.binders){const te=this.binders[Z];if((te instanceof ts||te instanceof ca||te instanceof rs)&&te.expression.isStateDependent===!0){const oe=v.paint.get(Z);te.expression=oe.value,te.updatePaintArray(B.start,B.end,G,s[k],x),S=!0}}}}return S}defines(){const s=[];for(const h in this.binders){const f=this.binders[h];(f instanceof es||f instanceof ic)&&s.push(...f.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return s}getBinderAttributes(){const s=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof ts||f instanceof ca)for(let v=0;v<f.paintVertexAttributes.length;v++)s.push(f.paintVertexAttributes[v].name);else if(f instanceof rs)for(let v=0;v<Qa.members.length;v++)s.push(Qa.members[v].name)}return s}getBinderUniforms(){const s=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof es||f instanceof ic||f instanceof ca)for(const v of f.uniformNames)s.push(v)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,h){const f=[];for(const v in this.binders){const x=this.binders[v];if(x instanceof es||x instanceof ic||x instanceof ca){for(const S of x.uniformNames)if(h[S]){const k=x.getBinding(s,h[S],S);f.push({name:S,property:v,binding:k})}}}return f}setUniforms(s,h,f,v){for(const{name:x,property:S,binding:k}of h)this.binders[S].setUniform(k,v,f.get(S),x)}updatePaintBuffers(s){this._buffers=[];for(const h in this.binders){const f=this.binders[h];if(s&&f instanceof rs){const v=s.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof ts||f instanceof ca)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(s){for(const h in this.binders){const f=this.binders[h];(f instanceof ts||f instanceof ca||f instanceof rs)&&f.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const h=this.binders[s];(h instanceof ts||h instanceof ca||h instanceof rs)&&h.destroy()}}}class As{constructor(s,h,f=()=>!0){this.programConfigurations={};for(const v of s)this.programConfigurations[v.id]=new $m(v,h,f);this.needsUpload=!1,this._featureMap=new Xn,this._bufferOffset=0}populatePaintArrays(s,h,f,v,x,S){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(s,h,v,x,S);h.id!==void 0&&this._featureMap.add(h.id,f,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,f,v){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(s,this._featureMap,h,x,v)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function wN(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function TM(c,s,h){const f={color:{source:Qc,composite:fe},number:{source:A,composite:Qc}},v=function(x){return{"line-pattern":{source:pn,composite:pn},"fill-pattern":{source:pn,composite:pn},"fill-extrusion-pattern":{source:pn,composite:pn}}[x]}(c);return v&&v[h]||f[s][h]}Vt("ConstantBinder",es),Vt("CrossFadedConstantBinder",ic),Vt("SourceExpressionBinder",ts),Vt("CrossFadedCompositeBinder",rs),Vt("CompositeExpressionBinder",ca),Vt("ProgramConfiguration",$m,{omit:["_buffers"]}),Vt("ProgramConfigurationSet",As);const fi=8192,Gw=Math.pow(2,14)-1,kM=-Gw-1;function vh(c){const s=fi/c.extent,h=c.loadGeometry();for(let f=0;f<h.length;f++){const v=h[f];for(let x=0;x<v.length;x++){const S=v[x],k=Math.round(S.x*s),M=Math.round(S.y*s);S.x=F(k,kM,Gw),S.y=F(M,kM,Gw),(k<S.x||k>S.x+1||M<S.y||M>S.y+1)&&qe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function yh(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?vh(c):[]}}function F0(c,s,h,f,v){c.emplaceBack(2*s+(f+1)/2,2*h+(v+1)/2)}class qw{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Xt,this.indexArray=new $i,this.segments=new In,this.programConfigurations=new As(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,f){const v=this.layers[0],x=[];let S=null,k=!1;v.type==="circle"&&(S=v.layout.get("circle-sort-key"),k=!S.isConstant());for(const{feature:M,id:B,index:G,sourceLayerIndex:Z}of s){const te=this.layers[0]._featureFilter.needGeometry,oe=yh(M,te);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),oe,f))continue;const ae=k?S.evaluate(oe,{},f):void 0,ce={id:B,properties:M.properties,type:M.type,sourceLayerIndex:Z,index:G,geometry:te?oe.geometry:vh(M),patterns:{},sortKey:ae};x.push(ce)}k&&x.sort((M,B)=>M.sortKey-B.sortKey);for(const M of x){const{geometry:B,index:G,sourceLayerIndex:Z}=M,te=s[G].feature;this.addFeature(M,B,G,f),h.featureIndex.insert(te,B,G,Z,this.index)}}update(s,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Uo),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,f,v){for(const x of h)for(const S of x){const k=S.x,M=S.y;if(k<0||k>=fi||M<0||M>=fi)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),G=B.vertexLength;F0(this.layoutVertexArray,k,M,-1,-1),F0(this.layoutVertexArray,k,M,1,-1),F0(this.layoutVertexArray,k,M,1,1),F0(this.layoutVertexArray,k,M,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+3,G+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},v)}}function EM(c,s){for(let h=0;h<c.length;h++)if(Zd(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(Zd(c,s[h]))return!0;return!!Ww(c,s)}function SN(c,s,h){return!!Zd(c,s)||!!Zw(s,c,h)}function IM(c,s){if(c.length===1)return PM(s,c[0]);for(let h=0;h<s.length;h++){const f=s[h];for(let v=0;v<f.length;v++)if(Zd(c,f[v]))return!0}for(let h=0;h<c.length;h++)if(PM(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(Ww(c,s[h]))return!0;return!1}function CN(c,s,h){if(c.length>1){if(Ww(c,s))return!0;for(let f=0;f<s.length;f++)if(Zw(s[f],c,h))return!0}for(let f=0;f<c.length;f++)if(Zw(c[f],s,h))return!0;return!1}function Ww(c,s){if(c.length===0||s.length===0)return!1;for(let h=0;h<c.length-1;h++){const f=c[h],v=c[h+1];for(let x=0;x<s.length-1;x++)if(TN(f,v,s[x],s[x+1]))return!0}return!1}function TN(c,s,h,f){return Re(c,h,f)!==Re(s,h,f)&&Re(c,s,h)!==Re(c,s,f)}function Zw(c,s,h){const f=h*h;if(s.length===1)return c.distSqr(s[0])<f;for(let v=1;v<s.length;v++)if(MM(c,s[v-1],s[v])<f)return!0;return!1}function MM(c,s,h){const f=s.distSqr(h);if(f===0)return c.distSqr(s);const v=((c.x-s.x)*(h.x-s.x)+(c.y-s.y)*(h.y-s.y))/f;return c.distSqr(v<0?s:v>1?h:h.sub(s)._mult(v)._add(s))}function PM(c,s){let h,f,v,x=!1;for(let S=0;S<c.length;S++){h=c[S];for(let k=0,M=h.length-1;k<h.length;M=k++)f=h[k],v=h[M],f.y>s.y!=v.y>s.y&&s.x<(v.x-f.x)*(s.y-f.y)/(v.y-f.y)+f.x&&(x=!x)}return x}function Zd(c,s){let h=!1;for(let f=0,v=c.length-1;f<c.length;v=f++){const x=c[f],S=c[v];x.y>s.y!=S.y>s.y&&s.x<(S.x-x.x)*(s.y-x.y)/(S.y-x.y)+x.x&&(h=!h)}return h}function kN(c,s,h){const f=h[0],v=h[2];if(c.x<f.x&&s.x<f.x||c.x>v.x&&s.x>v.x||c.y<f.y&&s.y<f.y||c.y>v.y&&s.y>v.y)return!1;const x=Re(c,s,h[0]);return x!==Re(c,s,h[1])||x!==Re(c,s,h[2])||x!==Re(c,s,h[3])}function Bm(c,s,h){const f=s.paint.get(c).value;return f.kind==="constant"?f.value:h.programConfigurations.get(s.id).getMaxValue(c)}function N0(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function j0(c,s,h,f,v){if(!s[0]&&!s[1])return c;const x=T.convert(s)._mult(v);h==="viewport"&&x._rotate(-f);const S=[];for(let k=0;k<c.length;k++)S.push(c[k].sub(x));return S}let AM,RM;Vt("CircleBucket",qw,{omit:["layers"]});var EN={get paint(){return RM=RM||new ni({"circle-radius":new fr(He.paint_circle["circle-radius"]),"circle-color":new fr(He.paint_circle["circle-color"]),"circle-blur":new fr(He.paint_circle["circle-blur"]),"circle-opacity":new fr(He.paint_circle["circle-opacity"]),"circle-translate":new nr(He.paint_circle["circle-translate"]),"circle-translate-anchor":new nr(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nr(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nr(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fr(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fr(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fr(He.paint_circle["circle-stroke-opacity"])})},get layout(){return AM=AM||new ni({"circle-sort-key":new fr(He.layout_circle["circle-sort-key"])})}},wo=1e-6,Kd=typeof Float32Array<"u"?Float32Array:Array;function Kw(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function DM(c,s,h){var f=s[0],v=s[1],x=s[2],S=s[3],k=s[4],M=s[5],B=s[6],G=s[7],Z=s[8],te=s[9],oe=s[10],ae=s[11],ce=s[12],ve=s[13],be=s[14],ze=s[15],Te=h[0],Be=h[1],Ge=h[2],et=h[3];return c[0]=Te*f+Be*k+Ge*Z+et*ce,c[1]=Te*v+Be*M+Ge*te+et*ve,c[2]=Te*x+Be*B+Ge*oe+et*be,c[3]=Te*S+Be*G+Ge*ae+et*ze,c[4]=(Te=h[4])*f+(Be=h[5])*k+(Ge=h[6])*Z+(et=h[7])*ce,c[5]=Te*v+Be*M+Ge*te+et*ve,c[6]=Te*x+Be*B+Ge*oe+et*be,c[7]=Te*S+Be*G+Ge*ae+et*ze,c[8]=(Te=h[8])*f+(Be=h[9])*k+(Ge=h[10])*Z+(et=h[11])*ce,c[9]=Te*v+Be*M+Ge*te+et*ve,c[10]=Te*x+Be*B+Ge*oe+et*be,c[11]=Te*S+Be*G+Ge*ae+et*ze,c[12]=(Te=h[12])*f+(Be=h[13])*k+(Ge=h[14])*Z+(et=h[15])*ce,c[13]=Te*v+Be*M+Ge*te+et*ve,c[14]=Te*x+Be*B+Ge*oe+et*be,c[15]=Te*S+Be*G+Ge*ae+et*ze,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Fm,IN=DM;function V0(c,s,h){var f=s[0],v=s[1],x=s[2],S=s[3];return c[0]=h[0]*f+h[4]*v+h[8]*x+h[12]*S,c[1]=h[1]*f+h[5]*v+h[9]*x+h[13]*S,c[2]=h[2]*f+h[6]*v+h[10]*x+h[14]*S,c[3]=h[3]*f+h[7]*v+h[11]*x+h[15]*S,c}Fm=new Kd(4),Kd!=Float32Array&&(Fm[0]=0,Fm[1]=0,Fm[2]=0,Fm[3]=0);class MN extends la{constructor(s){super(s,EN)}createBucket(s){return new qw(s)}queryRadius(s){const h=s;return Bm("circle-radius",this,h)+Bm("circle-stroke-width",this,h)+N0(this.paint.get("circle-translate"))}queryIntersectsFeature(s,h,f,v,x,S,k,M){const B=j0(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,k),G=this.paint.get("circle-radius").evaluate(h,f)+this.paint.get("circle-stroke-width").evaluate(h,f),Z=this.paint.get("circle-pitch-alignment")==="map",te=Z?B:function(ae,ce){return ae.map(ve=>zM(ve,ce))}(B,M),oe=Z?G*k:G;for(const ae of v)for(const ce of ae){const ve=Z?ce:zM(ce,M);let be=oe;const ze=V0([],[ce.x,ce.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=ze[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=S.cameraToCenterDistance/ze[3]),SN(te,ve,be))return!0}return!1}}function zM(c,s){const h=V0([],[c.x,c.y,0,1],s);return new T(h[0]/h[3],h[1]/h[3])}class LM extends qw{}let OM;Vt("HeatmapBucket",LM,{omit:["layers"]});var PN={get paint(){return OM=OM||new ni({"heatmap-radius":new fr(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fr(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nr(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pm(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nr(He.paint_heatmap["heatmap-opacity"])})}};function Xw(c,{width:s,height:h},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==s*h*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${s*h*f}`)}else v=new Uint8Array(s*h*f);return c.width=s,c.height=h,c.data=v,c}function $M(c,{width:s,height:h},f){if(s===c.width&&h===c.height)return;const v=Xw({},{width:s,height:h},f);Jw(c,v,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,h)},f),c.width=s,c.height=h,c.data=v.data}function Jw(c,s,h,f,v,x){if(v.width===0||v.height===0)return s;if(v.width>c.width||v.height>c.height||h.x>c.width-v.width||h.y>c.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>s.width||v.height>s.height||f.x>s.width-v.width||f.y>s.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const S=c.data,k=s.data;if(S===k)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<v.height;M++){const B=((h.y+M)*c.width+h.x)*x,G=((f.y+M)*s.width+f.x)*x;for(let Z=0;Z<v.width*x;Z++)k[G+Z]=S[B+Z]}return s}class Nm{constructor(s,h){Xw(this,s,1,h)}resize(s){$M(this,s,1)}clone(){return new Nm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,f,v,x){Jw(s,h,f,v,x,1)}}class ka{constructor(s,h){Xw(this,s,4,h)}resize(s){$M(this,s,4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ka({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,f,v,x){Jw(s,h,f,v,x,4)}}function BM(c){const s={},h=c.resolution||256,f=c.clips?c.clips.length:1,v=c.image||new ka({width:h,height:f});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const x=(S,k,M)=>{s[c.evaluationKey]=M;const B=c.expression.evaluate(s);v.data[S+k+0]=Math.floor(255*B.r/B.a),v.data[S+k+1]=Math.floor(255*B.g/B.a),v.data[S+k+2]=Math.floor(255*B.b/B.a),v.data[S+k+3]=Math.floor(255*B.a)};if(c.clips)for(let S=0,k=0;S<f;++S,k+=4*h)for(let M=0,B=0;M<h;M++,B+=4){const G=M/(h-1),{start:Z,end:te}=c.clips[S];x(k,B,Z*(1-G)+te*G)}else for(let S=0,k=0;S<h;S++,k+=4)x(0,k,S/(h-1));return v}Vt("AlphaImage",Nm),Vt("RGBAImage",ka);class AN extends la{createBucket(s){return new LM(s)}constructor(s){super(s,PN),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=BM({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let FM;var RN={get paint(){return FM=FM||new ni({"hillshade-illumination-direction":new nr(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new nr(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nr(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nr(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nr(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nr(He.paint_hillshade["hillshade-accent-color"])})}};class DN extends la{constructor(s){super(s,RN)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const zN=Nn([{name:"a_pos",components:2,type:"Int16"}],4),{members:LN}=zN;var Yw={exports:{}};function U0(c,s,h){h=h||2;var f,v,x,S,k,M,B,G=s&&s.length,Z=G?s[0]*h:c.length,te=NM(c,0,Z,h,!0),oe=[];if(!te||te.next===te.prev)return oe;if(G&&(te=function(ce,ve,be,ze){var Te,Be,Ge,et=[];for(Te=0,Be=ve.length;Te<Be;Te++)(Ge=NM(ce,ve[Te]*ze,Te<Be-1?ve[Te+1]*ze:ce.length,ze,!1))===Ge.next&&(Ge.steiner=!0),et.push(UN(Ge));for(et.sort(NN),Te=0;Te<et.length;Te++)be=jN(et[Te],be);return be}(c,s,te,h)),c.length>80*h){f=x=c[0],v=S=c[1];for(var ae=h;ae<Z;ae+=h)(k=c[ae])<f&&(f=k),(M=c[ae+1])<v&&(v=M),k>x&&(x=k),M>S&&(S=M);B=(B=Math.max(x-f,S-v))!==0?32767/B:0}return jm(te,oe,h,f,v,B,0),oe}function NM(c,s,h,f,v){var x,S;if(v===t2(c,s,h,f)>0)for(x=s;x<h;x+=f)S=UM(x,c[x],c[x+1],S);else for(x=h-f;x>=s;x-=f)S=UM(x,c[x],c[x+1],S);return S&&H0(S,S.next)&&(Um(S),S=S.next),S}function _h(c,s){if(!c)return c;s||(s=c);var h,f=c;do if(h=!1,f.steiner||!H0(f,f.next)&&oi(f.prev,f,f.next)!==0)f=f.next;else{if(Um(f),(f=s=f.prev)===f.next)break;h=!0}while(h||f!==s);return s}function jm(c,s,h,f,v,x,S){if(c){!S&&x&&function(G,Z,te,oe){var ae=G;do ae.z===0&&(ae.z=Qw(ae.x,ae.y,Z,te,oe)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==G);ae.prevZ.nextZ=null,ae.prevZ=null,function(ce){var ve,be,ze,Te,Be,Ge,et,$t,Jt=1;do{for(be=ce,ce=null,Be=null,Ge=0;be;){for(Ge++,ze=be,et=0,ve=0;ve<Jt&&(et++,ze=ze.nextZ);ve++);for($t=Jt;et>0||$t>0&&ze;)et!==0&&($t===0||!ze||be.z<=ze.z)?(Te=be,be=be.nextZ,et--):(Te=ze,ze=ze.nextZ,$t--),Be?Be.nextZ=Te:ce=Te,Te.prevZ=Be,Be=Te;be=ze}Be.nextZ=null,Jt*=2}while(Ge>1)}(ae)}(c,f,v,x);for(var k,M,B=c;c.prev!==c.next;)if(k=c.prev,M=c.next,x?$N(c,f,v,x):ON(c))s.push(k.i/h|0),s.push(c.i/h|0),s.push(M.i/h|0),Um(c),c=M.next,B=M.next;else if((c=M)===B){S?S===1?jm(c=BN(_h(c),s,h),s,h,f,v,x,2):S===2&&FN(c,s,h,f,v,x):jm(_h(c),s,h,f,v,x,1);break}}}function ON(c){var s=c.prev,h=c,f=c.next;if(oi(s,h,f)>=0)return!1;for(var v=s.x,x=h.x,S=f.x,k=s.y,M=h.y,B=f.y,G=v<x?v<S?v:S:x<S?x:S,Z=k<M?k<B?k:B:M<B?M:B,te=v>x?v>S?v:S:x>S?x:S,oe=k>M?k>B?k:B:M>B?M:B,ae=f.next;ae!==s;){if(ae.x>=G&&ae.x<=te&&ae.y>=Z&&ae.y<=oe&&Xd(v,k,x,M,S,B,ae.x,ae.y)&&oi(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function $N(c,s,h,f){var v=c.prev,x=c,S=c.next;if(oi(v,x,S)>=0)return!1;for(var k=v.x,M=x.x,B=S.x,G=v.y,Z=x.y,te=S.y,oe=k<M?k<B?k:B:M<B?M:B,ae=G<Z?G<te?G:te:Z<te?Z:te,ce=k>M?k>B?k:B:M>B?M:B,ve=G>Z?G>te?G:te:Z>te?Z:te,be=Qw(oe,ae,s,h,f),ze=Qw(ce,ve,s,h,f),Te=c.prevZ,Be=c.nextZ;Te&&Te.z>=be&&Be&&Be.z<=ze;){if(Te.x>=oe&&Te.x<=ce&&Te.y>=ae&&Te.y<=ve&&Te!==v&&Te!==S&&Xd(k,G,M,Z,B,te,Te.x,Te.y)&&oi(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,Be.x>=oe&&Be.x<=ce&&Be.y>=ae&&Be.y<=ve&&Be!==v&&Be!==S&&Xd(k,G,M,Z,B,te,Be.x,Be.y)&&oi(Be.prev,Be,Be.next)>=0))return!1;Be=Be.nextZ}for(;Te&&Te.z>=be;){if(Te.x>=oe&&Te.x<=ce&&Te.y>=ae&&Te.y<=ve&&Te!==v&&Te!==S&&Xd(k,G,M,Z,B,te,Te.x,Te.y)&&oi(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;Be&&Be.z<=ze;){if(Be.x>=oe&&Be.x<=ce&&Be.y>=ae&&Be.y<=ve&&Be!==v&&Be!==S&&Xd(k,G,M,Z,B,te,Be.x,Be.y)&&oi(Be.prev,Be,Be.next)>=0)return!1;Be=Be.nextZ}return!0}function BN(c,s,h){var f=c;do{var v=f.prev,x=f.next.next;!H0(v,x)&&jM(v,f,f.next,x)&&Vm(v,x)&&Vm(x,v)&&(s.push(v.i/h|0),s.push(f.i/h|0),s.push(x.i/h|0),Um(f),Um(f.next),f=c=x),f=f.next}while(f!==c);return _h(f)}function FN(c,s,h,f,v,x){var S=c;do{for(var k=S.next.next;k!==S.prev;){if(S.i!==k.i&&HN(S,k)){var M=VM(S,k);return S=_h(S,S.next),M=_h(M,M.next),jm(S,s,h,f,v,x,0),void jm(M,s,h,f,v,x,0)}k=k.next}S=S.next}while(S!==c)}function NN(c,s){return c.x-s.x}function jN(c,s){var h=function(v,x){var S,k=x,M=v.x,B=v.y,G=-1/0;do{if(B<=k.y&&B>=k.next.y&&k.next.y!==k.y){var Z=k.x+(B-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(Z<=M&&Z>G&&(G=Z,S=k.x<k.next.x?k:k.next,Z===M))return S}k=k.next}while(k!==x);if(!S)return null;var te,oe=S,ae=S.x,ce=S.y,ve=1/0;k=S;do M>=k.x&&k.x>=ae&&M!==k.x&&Xd(B<ce?M:G,B,ae,ce,B<ce?G:M,B,k.x,k.y)&&(te=Math.abs(B-k.y)/(M-k.x),Vm(k,v)&&(te<ve||te===ve&&(k.x>S.x||k.x===S.x&&VN(S,k)))&&(S=k,ve=te)),k=k.next;while(k!==oe);return S}(c,s);if(!h)return s;var f=VM(h,c);return _h(f,f.next),_h(h,h.next)}function VN(c,s){return oi(c.prev,c,s.prev)<0&&oi(s.next,c,c.next)<0}function Qw(c,s,h,f,v){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*v|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-f)*v|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function UN(c){var s=c,h=c;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==c);return h}function Xd(c,s,h,f,v,x,S,k){return(v-S)*(s-k)>=(c-S)*(x-k)&&(c-S)*(f-k)>=(h-S)*(s-k)&&(h-S)*(x-k)>=(v-S)*(f-k)}function HN(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(h,f){var v=h;do{if(v.i!==h.i&&v.next.i!==h.i&&v.i!==f.i&&v.next.i!==f.i&&jM(v,v.next,h,f))return!0;v=v.next}while(v!==h);return!1}(c,s)&&(Vm(c,s)&&Vm(s,c)&&function(h,f){var v=h,x=!1,S=(h.x+f.x)/2,k=(h.y+f.y)/2;do v.y>k!=v.next.y>k&&v.next.y!==v.y&&S<(v.next.x-v.x)*(k-v.y)/(v.next.y-v.y)+v.x&&(x=!x),v=v.next;while(v!==h);return x}(c,s)&&(oi(c.prev,c,s.prev)||oi(c,s.prev,s))||H0(c,s)&&oi(c.prev,c,c.next)>0&&oi(s.prev,s,s.next)>0)}function oi(c,s,h){return(s.y-c.y)*(h.x-s.x)-(s.x-c.x)*(h.y-s.y)}function H0(c,s){return c.x===s.x&&c.y===s.y}function jM(c,s,h,f){var v=q0(oi(c,s,h)),x=q0(oi(c,s,f)),S=q0(oi(h,f,c)),k=q0(oi(h,f,s));return v!==x&&S!==k||!(v!==0||!G0(c,h,s))||!(x!==0||!G0(c,f,s))||!(S!==0||!G0(h,c,f))||!(k!==0||!G0(h,s,f))}function G0(c,s,h){return s.x<=Math.max(c.x,h.x)&&s.x>=Math.min(c.x,h.x)&&s.y<=Math.max(c.y,h.y)&&s.y>=Math.min(c.y,h.y)}function q0(c){return c>0?1:c<0?-1:0}function Vm(c,s){return oi(c.prev,c,c.next)<0?oi(c,s,c.next)>=0&&oi(c,c.prev,s)>=0:oi(c,s,c.prev)<0||oi(c,c.next,s)<0}function VM(c,s){var h=new e2(c.i,c.x,c.y),f=new e2(s.i,s.x,s.y),v=c.next,x=s.prev;return c.next=s,s.prev=c,h.next=v,v.prev=h,f.next=h,h.prev=f,x.next=f,f.prev=x,f}function UM(c,s,h,f){var v=new e2(c,s,h);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Um(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function e2(c,s,h){this.i=c,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function t2(c,s,h,f){for(var v=0,x=s,S=h-f;x<h;x+=f)v+=(c[S]-c[x])*(c[x+1]+c[S+1]),S=x;return v}Yw.exports=U0,Yw.exports.default=U0,U0.deviation=function(c,s,h,f){var v=s&&s.length,x=Math.abs(t2(c,0,v?s[0]*h:c.length,h));if(v)for(var S=0,k=s.length;S<k;S++)x-=Math.abs(t2(c,s[S]*h,S<k-1?s[S+1]*h:c.length,h));var M=0;for(S=0;S<f.length;S+=3){var B=f[S]*h,G=f[S+1]*h,Z=f[S+2]*h;M+=Math.abs((c[B]-c[Z])*(c[G+1]-c[B+1])-(c[B]-c[G])*(c[Z+1]-c[B+1]))}return x===0&&M===0?0:Math.abs((M-x)/x)},U0.flatten=function(c){for(var s=c[0][0].length,h={vertices:[],holes:[],dimensions:s},f=0,v=0;v<c.length;v++){for(var x=0;x<c[v].length;x++)for(var S=0;S<s;S++)h.vertices.push(c[v][x][S]);v>0&&h.holes.push(f+=c[v-1].length)}return h};var HM=m(Yw.exports);function GN(c,s,h,f,v){GM(c,s,h,f||c.length-1,v)}function GM(c,s,h,f,v){for(;f>h;){if(f-h>600){var x=f-h+1,S=s-h+1,k=Math.log(x),M=.5*Math.exp(2*k/3),B=.5*Math.sqrt(k*M*(x-M)/x)*(S-x/2<0?-1:1);GM(c,s,Math.max(h,Math.floor(s-S*M/x+B)),Math.min(f,Math.floor(s+(x-S)*M/x+B)),v)}var G=c[s],Z=h,te=f;for(Hm(c,h,s),v(c[f],G)>0&&Hm(c,h,f);Z<te;){for(Hm(c,Z,te),Z++,te--;v(c[Z],G)<0;)Z++;for(;v(c[te],G)>0;)te--}v(c[h],G)===0?Hm(c,h,te):Hm(c,++te,f),te<=s&&(h=te+1),s<=te&&(f=te-1)}}function Hm(c,s,h){var f=c[s];c[s]=c[h],c[h]=f}function r2(c,s){const h=c.length;if(h<=1)return[c];const f=[];let v,x;for(let S=0;S<h;S++){const k=Se(c[S]);k!==0&&(c[S].area=Math.abs(k),x===void 0&&(x=k<0),x===k<0?(v&&f.push(v),v=[c[S]]):v.push(c[S]))}if(v&&f.push(v),s>1)for(let S=0;S<f.length;S++)f[S].length<=s||(GN(f[S],s,1,f[S].length-1,qN),f[S]=f[S].slice(0,s));return f}function qN(c,s){return s.area-c.area}function n2(c,s,h){const f=h.patternDependencies;let v=!1;for(const x of s){const S=x.paint.get(`${c}-pattern`);S.isConstant()||(v=!0);const k=S.constantOr(null);k&&(v=!0,f[k.to]=!0,f[k.from]=!0)}return v}function i2(c,s,h,f,v){const x=v.patternDependencies;for(const S of s){const k=S.paint.get(`${c}-pattern`).value;if(k.kind!=="constant"){let M=k.evaluate({zoom:f-1},h,{},v.availableImages),B=k.evaluate({zoom:f},h,{},v.availableImages),G=k.evaluate({zoom:f+1},h,{},v.availableImages);M=M&&M.name?M.name:M,B=B&&B.name?B.name:B,G=G&&G.name?G.name:G,x[M]=!0,x[B]=!0,x[G]=!0,h.patterns[S.id]={min:M,mid:B,max:G}}}return h}class o2{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zr,this.indexArray=new $i,this.indexArray2=new _i,this.programConfigurations=new As(s.layers,s.zoom),this.segments=new In,this.segments2=new In,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,f){this.hasPattern=n2("fill",this.layers,h);const v=this.layers[0].layout.get("fill-sort-key"),x=!v.isConstant(),S=[];for(const{feature:k,id:M,index:B,sourceLayerIndex:G}of s){const Z=this.layers[0]._featureFilter.needGeometry,te=yh(k,Z);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),te,f))continue;const oe=x?v.evaluate(te,{},f,h.availableImages):void 0,ae={id:M,properties:k.properties,type:k.type,sourceLayerIndex:G,index:B,geometry:Z?te.geometry:vh(k),patterns:{},sortKey:oe};S.push(ae)}x&&S.sort((k,M)=>k.sortKey-M.sortKey);for(const k of S){const{geometry:M,index:B,sourceLayerIndex:G}=k;if(this.hasPattern){const Z=i2("fill",this.layers,k,this.zoom,h);this.patternFeatures.push(Z)}else this.addFeature(k,M,B,f,{});h.featureIndex.insert(s[B].feature,M,B,G,this.index)}}update(s,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,f)}addFeatures(s,h,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,LN),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,f,v,x){for(const S of r2(h,500)){let k=0;for(const oe of S)k+=oe.length;const M=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),B=M.vertexLength,G=[],Z=[];for(const oe of S){if(oe.length===0)continue;oe!==S[0]&&Z.push(G.length/2);const ae=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),ce=ae.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(ce+oe.length-1,ce),G.push(oe[0].x),G.push(oe[0].y);for(let ve=1;ve<oe.length;ve++)this.layoutVertexArray.emplaceBack(oe[ve].x,oe[ve].y),this.indexArray2.emplaceBack(ce+ve-1,ce+ve),G.push(oe[ve].x),G.push(oe[ve].y);ae.vertexLength+=oe.length,ae.primitiveLength+=oe.length}const te=HM(G,Z);for(let oe=0;oe<te.length;oe+=3)this.indexArray.emplaceBack(B+te[oe],B+te[oe+1],B+te[oe+2]);M.vertexLength+=k,M.primitiveLength+=te.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,v)}}let qM,WM;Vt("FillBucket",o2,{omit:["layers","patternFeatures"]});var WN={get paint(){return WM=WM||new ni({"fill-antialias":new nr(He.paint_fill["fill-antialias"]),"fill-opacity":new fr(He.paint_fill["fill-opacity"]),"fill-color":new fr(He.paint_fill["fill-color"]),"fill-outline-color":new fr(He.paint_fill["fill-outline-color"]),"fill-translate":new nr(He.paint_fill["fill-translate"]),"fill-translate-anchor":new nr(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new ph(He.paint_fill["fill-pattern"])})},get layout(){return qM=qM||new ni({"fill-sort-key":new fr(He.layout_fill["fill-sort-key"])})}};class ZN extends la{constructor(s){super(s,WN)}recalculate(s,h){super.recalculate(s,h);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new o2(s)}queryRadius(){return N0(this.paint.get("fill-translate"))}queryIntersectsFeature(s,h,f,v,x,S,k){return IM(j0(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,k),v)}isTileClipped(){return!0}}const KN=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),XN=Nn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:JN}=KN;var tu={},YN=w,ZM=Jd;function Jd(c,s,h,f,v){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=v,c.readFields(QN,this,s)}function QN(c,s,h){c==1?s.id=h.readVarint():c==2?function(f,v){for(var x=f.readVarint()+f.pos;f.pos<x;){var S=v._keys[f.readVarint()],k=v._values[f.readVarint()];v.properties[S]=k}}(h,s):c==3?s.type=h.readVarint():c==4&&(s._geometry=h.pos)}function e8(c){for(var s,h,f=0,v=0,x=c.length,S=x-1;v<x;S=v++)f+=((h=c[S]).x-(s=c[v]).x)*(s.y+h.y);return f}Jd.types=["Unknown","Point","LineString","Polygon"],Jd.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,h=c.readVarint()+c.pos,f=1,v=0,x=0,S=0,k=[];c.pos<h;){if(v<=0){var M=c.readVarint();f=7&M,v=M>>3}if(v--,f===1||f===2)x+=c.readSVarint(),S+=c.readSVarint(),f===1&&(s&&k.push(s),s=[]),s.push(new YN(x,S));else{if(f!==7)throw new Error("unknown command "+f);s&&s.push(s[0].clone())}}return s&&k.push(s),k},Jd.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,h=1,f=0,v=0,x=0,S=1/0,k=-1/0,M=1/0,B=-1/0;c.pos<s;){if(f<=0){var G=c.readVarint();h=7&G,f=G>>3}if(f--,h===1||h===2)(v+=c.readSVarint())<S&&(S=v),v>k&&(k=v),(x+=c.readSVarint())<M&&(M=x),x>B&&(B=x);else if(h!==7)throw new Error("unknown command "+h)}return[S,M,k,B]},Jd.prototype.toGeoJSON=function(c,s,h){var f,v,x=this.extent*Math.pow(2,h),S=this.extent*c,k=this.extent*s,M=this.loadGeometry(),B=Jd.types[this.type];function G(oe){for(var ae=0;ae<oe.length;ae++){var ce=oe[ae];oe[ae]=[360*(ce.x+S)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+k)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var Z=[];for(f=0;f<M.length;f++)Z[f]=M[f][0];G(M=Z);break;case 2:for(f=0;f<M.length;f++)G(M[f]);break;case 3:for(M=function(oe){var ae=oe.length;if(ae<=1)return[oe];for(var ce,ve,be=[],ze=0;ze<ae;ze++){var Te=e8(oe[ze]);Te!==0&&(ve===void 0&&(ve=Te<0),ve===Te<0?(ce&&be.push(ce),ce=[oe[ze]]):ce.push(oe[ze]))}return ce&&be.push(ce),be}(M),f=0;f<M.length;f++)for(v=0;v<M[f].length;v++)G(M[f][v])}M.length===1?M=M[0]:B="Multi"+B;var te={type:"Feature",geometry:{type:B,coordinates:M},properties:this.properties};return"id"in this&&(te.id=this.id),te};var t8=ZM,KM=XM;function XM(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(r8,this,s),this.length=this._features.length}function r8(c,s,h){c===15?s.version=h.readVarint():c===1?s.name=h.readString():c===5?s.extent=h.readVarint():c===2?s._features.push(h.pos):c===3?s._keys.push(h.readString()):c===4&&s._values.push(function(f){for(var v=null,x=f.readVarint()+f.pos;f.pos<x;){var S=f.readVarint()>>3;v=S===1?f.readString():S===2?f.readFloat():S===3?f.readDouble():S===4?f.readVarint64():S===5?f.readVarint():S===6?f.readSVarint():S===7?f.readBoolean():null}return v}(h))}XM.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new t8(this._pbf,s,this.extent,this._keys,this._values)};var n8=KM;function i8(c,s,h){if(c===3){var f=new n8(h,h.readVarint()+h.pos);f.length&&(s[f.name]=f)}}tu.VectorTile=function(c,s){this.layers=c.readFields(i8,{},s)},tu.VectorTileFeature=ZM,tu.VectorTileLayer=KM;const o8=tu.VectorTileFeature.types,a2=Math.pow(2,13);function Gm(c,s,h,f,v,x,S,k){c.emplaceBack(s,h,2*Math.floor(f*a2)+S,v*a2*2,x*a2*2,Math.round(k))}class s2{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Pt,this.centroidVertexArray=new mt,this.indexArray=new $i,this.programConfigurations=new As(s.layers,s.zoom),this.segments=new In,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,f){this.features=[],this.hasPattern=n2("fill-extrusion",this.layers,h);for(const{feature:v,id:x,index:S,sourceLayerIndex:k}of s){const M=this.layers[0]._featureFilter.needGeometry,B=yh(v,M);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),B,f))continue;const G={id:x,sourceLayerIndex:k,index:S,geometry:M?B.geometry:vh(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(i2("fill-extrusion",this.layers,G,this.zoom,h)):this.addFeature(G,G.geometry,S,f,{}),h.featureIndex.insert(v,G.geometry,S,k,this.index,!0)}}addFeatures(s,h,f){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,h,f)}}update(s,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,JN),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,XN.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,h,f,v,x){const S={x:0,y:0,vertexCount:0};for(const k of r2(h,500)){let M=0;for(const ae of k)M+=ae.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ae of k){if(ae.length===0||s8(ae))continue;let ce=0;for(let ve=0;ve<ae.length;ve++){const be=ae[ve];if(ve>=1){const ze=ae[ve-1];if(!a8(be,ze)){B.vertexLength+4>In.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Te=be.sub(ze)._perp()._unit(),Be=ze.dist(be);ce+Be>32768&&(ce=0),Gm(this.layoutVertexArray,be.x,be.y,Te.x,Te.y,0,0,ce),Gm(this.layoutVertexArray,be.x,be.y,Te.x,Te.y,0,1,ce),S.x+=2*be.x,S.y+=2*be.y,S.vertexCount+=2,ce+=Be,Gm(this.layoutVertexArray,ze.x,ze.y,Te.x,Te.y,0,0,ce),Gm(this.layoutVertexArray,ze.x,ze.y,Te.x,Te.y,0,1,ce),S.x+=2*ze.x,S.y+=2*ze.y,S.vertexCount+=2;const Ge=B.vertexLength;this.indexArray.emplaceBack(Ge,Ge+2,Ge+1),this.indexArray.emplaceBack(Ge+1,Ge+2,Ge+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+M>In.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),o8[s.type]!=="Polygon")continue;const G=[],Z=[],te=B.vertexLength;for(const ae of k)if(ae.length!==0){ae!==k[0]&&Z.push(G.length/2);for(let ce=0;ce<ae.length;ce++){const ve=ae[ce];Gm(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),S.x+=ve.x,S.y+=ve.y,S.vertexCount+=1,G.push(ve.x),G.push(ve.y)}}const oe=HM(G,Z);for(let ae=0;ae<oe.length;ae+=3)this.indexArray.emplaceBack(te+oe[ae],te+oe[ae+2],te+oe[ae+1]);B.primitiveLength+=oe.length/3,B.vertexLength+=M}for(let k=0;k<S.vertexCount;k++)this.centroidVertexArray.emplaceBack(Math.floor(S.x/S.vertexCount),Math.floor(S.y/S.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,v)}}function a8(c,s){return c.x===s.x&&(c.x<0||c.x>fi)||c.y===s.y&&(c.y<0||c.y>fi)}function s8(c){return c.every(s=>s.x<0)||c.every(s=>s.x>fi)||c.every(s=>s.y<0)||c.every(s=>s.y>fi)}let JM;Vt("FillExtrusionBucket",s2,{omit:["layers","features"]});var l8={get paint(){return JM=JM||new ni({"fill-extrusion-opacity":new nr(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fr(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nr(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nr(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ph(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fr(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fr(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nr(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class c8 extends la{constructor(s){super(s,l8)}createBucket(s){return new s2(s)}queryRadius(){return N0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,h,f,v,x,S,k,M){const B=j0(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,k),G=this.paint.get("fill-extrusion-height").evaluate(h,f),Z=this.paint.get("fill-extrusion-base").evaluate(h,f),te=function(ae,ce,ve,be){const ze=[];for(const Te of ae){const Be=[Te.x,Te.y,0,1];V0(Be,Be,ce),ze.push(new T(Be[0]/Be[3],Be[1]/Be[3]))}return ze}(B,M),oe=function(ae,ce,ve,be){const ze=[],Te=[],Be=be[8]*ce,Ge=be[9]*ce,et=be[10]*ce,$t=be[11]*ce,Jt=be[8]*ve,zt=be[9]*ve,At=be[10]*ve,_t=be[11]*ve;for(const Ut of ae){const St=[],ct=[];for(const cr of Ut){const Qt=cr.x,Ar=cr.y,Mn=be[0]*Qt+be[4]*Ar+be[12],Rn=be[1]*Qt+be[5]*Ar+be[13],wi=be[2]*Qt+be[6]*Ar+be[14],ua=be[3]*Qt+be[7]*Ar+be[15],So=wi+et,pi=ua+$t,Fi=Mn+Jt,Gi=Rn+zt,Co=wi+At,To=ua+_t,Si=new T((Mn+Be)/pi,(Rn+Ge)/pi);Si.z=So/pi,St.push(Si);const Ci=new T(Fi/To,Gi/To);Ci.z=Co/To,ct.push(Ci)}ze.push(St),Te.push(ct)}return[ze,Te]}(v,Z,G,M);return function(ae,ce,ve){let be=1/0;IM(ve,ce)&&(be=YM(ve,ce[0]));for(let ze=0;ze<ce.length;ze++){const Te=ce[ze],Be=ae[ze];for(let Ge=0;Ge<Te.length-1;Ge++){const et=Te[Ge],$t=[et,Te[Ge+1],Be[Ge+1],Be[Ge],et];EM(ve,$t)&&(be=Math.min(be,YM(ve,$t)))}}return be!==1/0&&be}(oe[0],oe[1],te)}}function qm(c,s){return c.x*s.x+c.y*s.y}function YM(c,s){if(c.length===1){let h=0;const f=s[h++];let v;for(;!v||f.equals(v);)if(v=s[h++],!v)return 1/0;for(;h<s.length;h++){const x=s[h],S=c[0],k=v.sub(f),M=x.sub(f),B=S.sub(f),G=qm(k,k),Z=qm(k,M),te=qm(M,M),oe=qm(B,k),ae=qm(B,M),ce=G*te-Z*Z,ve=(te*oe-Z*ae)/ce,be=(G*ae-Z*oe)/ce,ze=f.z*(1-ve-be)+v.z*ve+x.z*be;if(isFinite(ze))return ze}return 1/0}{let h=1/0;for(const f of s)h=Math.min(h,f.z);return h}}const u8=Nn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:h8}=u8,d8=Nn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:f8}=d8,p8=tu.VectorTileFeature.types,m8=Math.cos(Math.PI/180*37.5),QM=Math.pow(2,14)/.5;class l2{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new pr,this.layoutVertexArray2=new Yt,this.indexArray=new $i,this.programConfigurations=new As(s.layers,s.zoom),this.segments=new In,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,f){this.hasPattern=n2("line",this.layers,h);const v=this.layers[0].layout.get("line-sort-key"),x=!v.isConstant(),S=[];for(const{feature:k,id:M,index:B,sourceLayerIndex:G}of s){const Z=this.layers[0]._featureFilter.needGeometry,te=yh(k,Z);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),te,f))continue;const oe=x?v.evaluate(te,{},f):void 0,ae={id:M,properties:k.properties,type:k.type,sourceLayerIndex:G,index:B,geometry:Z?te.geometry:vh(k),patterns:{},sortKey:oe};S.push(ae)}x&&S.sort((k,M)=>k.sortKey-M.sortKey);for(const k of S){const{geometry:M,index:B,sourceLayerIndex:G}=k;if(this.hasPattern){const Z=i2("line",this.layers,k,this.zoom,h);this.patternFeatures.push(Z)}else this.addFeature(k,M,B,f,{});h.featureIndex.insert(s[B].feature,M,B,G,this.index)}}update(s,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,f)}addFeatures(s,h,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,f8)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,h8),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,f,v,x){const S=this.layers[0].layout,k=S.get("line-join").evaluate(s,{}),M=S.get("line-cap"),B=S.get("line-miter-limit"),G=S.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const Z of h)this.addLine(Z,s,k,M,B,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,x,v)}addLine(s,h,f,v,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<s.length-1;be++)this.totalDistance+=s[be].dist(s[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=p8[h.type]==="Polygon";let M=s.length;for(;M>=2&&s[M-1].equals(s[M-2]);)M--;let B=0;for(;B<M-1&&s[B].equals(s[B+1]);)B++;if(M<(k?3:2))return;f==="bevel"&&(x=1.05);const G=this.overscaling<=16?15*fi/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let te,oe,ae,ce,ve;this.e1=this.e2=-1,k&&(te=s[M-2],ve=s[B].sub(te)._unit()._perp());for(let be=B;be<M;be++){if(ae=be===M-1?k?s[B+1]:void 0:s[be+1],ae&&s[be].equals(ae))continue;ve&&(ce=ve),te&&(oe=te),te=s[be],ve=ae?ae.sub(te)._unit()._perp():ce,ce=ce||ve;let ze=ce.add(ve);ze.x===0&&ze.y===0||ze._unit();const Te=ce.x*ve.x+ce.y*ve.y,Be=ze.x*ve.x+ze.y*ve.y,Ge=Be!==0?1/Be:1/0,et=2*Math.sqrt(2-2*Be),$t=Be<m8&&oe&&ae,Jt=ce.x*ve.y-ce.y*ve.x>0;if($t&&be>B){const _t=te.dist(oe);if(_t>2*G){const Ut=te.sub(te.sub(oe)._mult(G/_t)._round());this.updateDistance(oe,Ut),this.addCurrentVertex(Ut,ce,0,0,Z),oe=Ut}}const zt=oe&&ae;let At=zt?f:k?"butt":v;if(zt&&At==="round"&&(Ge<S?At="miter":Ge<=2&&(At="fakeround")),At==="miter"&&Ge>x&&(At="bevel"),At==="bevel"&&(Ge>2&&(At="flipbevel"),Ge<x&&(At="miter")),oe&&this.updateDistance(oe,te),At==="miter")ze._mult(Ge),this.addCurrentVertex(te,ze,0,0,Z);else if(At==="flipbevel"){if(Ge>100)ze=ve.mult(-1);else{const _t=Ge*ce.add(ve).mag()/ce.sub(ve).mag();ze._perp()._mult(_t*(Jt?-1:1))}this.addCurrentVertex(te,ze,0,0,Z),this.addCurrentVertex(te,ze.mult(-1),0,0,Z)}else if(At==="bevel"||At==="fakeround"){const _t=-Math.sqrt(Ge*Ge-1),Ut=Jt?_t:0,St=Jt?0:_t;if(oe&&this.addCurrentVertex(te,ce,Ut,St,Z),At==="fakeround"){const ct=Math.round(180*et/Math.PI/20);for(let cr=1;cr<ct;cr++){let Qt=cr/ct;if(Qt!==.5){const Mn=Qt-.5;Qt+=Qt*Mn*(Qt-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*Mn*Mn+(.848013+Te*(.215638*Te-1.06021)))}const Ar=ve.sub(ce)._mult(Qt)._add(ce)._unit()._mult(Jt?-1:1);this.addHalfVertex(te,Ar.x,Ar.y,!1,Jt,0,Z)}}ae&&this.addCurrentVertex(te,ve,-Ut,-St,Z)}else if(At==="butt")this.addCurrentVertex(te,ze,0,0,Z);else if(At==="square"){const _t=oe?1:-1;this.addCurrentVertex(te,ze,_t,_t,Z)}else At==="round"&&(oe&&(this.addCurrentVertex(te,ce,0,0,Z),this.addCurrentVertex(te,ce,1,1,Z,!0)),ae&&(this.addCurrentVertex(te,ve,-1,-1,Z,!0),this.addCurrentVertex(te,ve,0,0,Z)));if($t&&be<M-1){const _t=te.dist(ae);if(_t>2*G){const Ut=te.add(ae.sub(te)._mult(G/_t)._round());this.updateDistance(te,Ut),this.addCurrentVertex(Ut,ve,0,0,Z),te=Ut}}}}addCurrentVertex(s,h,f,v,x,S=!1){const k=h.y*v-h.x,M=-h.y-h.x*v;this.addHalfVertex(s,h.x+h.y*f,h.y-h.x*f,S,!1,f,x),this.addHalfVertex(s,k,M,S,!0,-v,x),this.distance>QM/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,h,f,v,x,S))}addHalfVertex({x:s,y:h},f,v,x,S,k,M){const B=.5*(this.lineClips?this.scaledDistance*(QM-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(x?1:0),(h<<1)+(S?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(k===0?0:k<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,G),M.primitiveLength++),S?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}let eP,tP;Vt("LineBucket",l2,{omit:["layers","patternFeatures"]});var rP={get paint(){return tP=tP||new ni({"line-opacity":new fr(He.paint_line["line-opacity"]),"line-color":new fr(He.paint_line["line-color"]),"line-translate":new nr(He.paint_line["line-translate"]),"line-translate-anchor":new nr(He.paint_line["line-translate-anchor"]),"line-width":new fr(He.paint_line["line-width"]),"line-gap-width":new fr(He.paint_line["line-gap-width"]),"line-offset":new fr(He.paint_line["line-offset"]),"line-blur":new fr(He.paint_line["line-blur"]),"line-dasharray":new Mm(He.paint_line["line-dasharray"]),"line-pattern":new ph(He.paint_line["line-pattern"]),"line-gradient":new Pm(He.paint_line["line-gradient"])})},get layout(){return eP=eP||new ni({"line-cap":new nr(He.layout_line["line-cap"]),"line-join":new fr(He.layout_line["line-join"]),"line-miter-limit":new nr(He.layout_line["line-miter-limit"]),"line-round-limit":new nr(He.layout_line["line-round-limit"]),"line-sort-key":new fr(He.layout_line["line-sort-key"])})}};class g8 extends fr{possiblyEvaluate(s,h){return h=new En(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(s,h)}evaluate(s,h,f,v){return h=re({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(s,h,f,v)}}let W0;class v8 extends la{constructor(s){super(s,rP),this.gradientVersion=0,W0||(W0=new g8(rP.paint.properties["line-width"].specification),W0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof hl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,h){super.recalculate(s,h),this.paint._values["line-floorwidth"]=W0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new l2(s)}queryRadius(s){const h=s,f=nP(Bm("line-width",this,h),Bm("line-gap-width",this,h)),v=Bm("line-offset",this,h);return f/2+Math.abs(v)+N0(this.paint.get("line-translate"))}queryIntersectsFeature(s,h,f,v,x,S,k){const M=j0(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,k),B=k/2*nP(this.paint.get("line-width").evaluate(h,f),this.paint.get("line-gap-width").evaluate(h,f)),G=this.paint.get("line-offset").evaluate(h,f);return G&&(v=function(Z,te){const oe=[];for(let ae=0;ae<Z.length;ae++){const ce=Z[ae],ve=[];for(let be=0;be<ce.length;be++){const ze=ce[be-1],Te=ce[be],Be=ce[be+1],Ge=be===0?new T(0,0):Te.sub(ze)._unit()._perp(),et=be===ce.length-1?new T(0,0):Be.sub(Te)._unit()._perp(),$t=Ge._add(et)._unit(),Jt=$t.x*et.x+$t.y*et.y;Jt!==0&&$t._mult(1/Jt),ve.push($t._mult(te)._add(Te))}oe.push(ve)}return oe}(v,G*k)),function(Z,te,oe){for(let ae=0;ae<te.length;ae++){const ce=te[ae];if(Z.length>=3){for(let ve=0;ve<ce.length;ve++)if(Zd(Z,ce[ve]))return!0}if(CN(Z,ce,oe))return!0}return!1}(M,v,B)}isTileClipped(){return!0}}function nP(c,s){return s>0?s+2*c:c}const y8=Nn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_8=Nn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Nn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const x8=Nn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Nn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const iP=Nn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),b8=Nn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function w8(c,s,h){return c.sections.forEach(f=>{f.text=function(v,x,S){const k=x.layout.get("text-transform").evaluate(S,{});return k==="uppercase"?v=v.toLocaleUpperCase():k==="lowercase"&&(v=v.toLocaleLowerCase()),Vo.applyArabicShaping&&(v=Vo.applyArabicShaping(v)),v}(f.text,s,h)}),c}Nn([{name:"triangle",components:3,type:"Uint16"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Nn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Nn([{type:"Float32",name:"offsetX"}]),Nn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Nn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wm={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var bi=24,oP=gn,aP=function(c,s,h,f,v){var x,S,k=8*v-f-1,M=(1<<k)-1,B=M>>1,G=-7,Z=v-1,te=-1,oe=c[s+Z];for(Z+=te,x=oe&(1<<-G)-1,oe>>=-G,G+=k;G>0;x=256*x+c[s+Z],Z+=te,G-=8);for(S=x&(1<<-G)-1,x>>=-G,G+=f;G>0;S=256*S+c[s+Z],Z+=te,G-=8);if(x===0)x=1-B;else{if(x===M)return S?NaN:1/0*(oe?-1:1);S+=Math.pow(2,f),x-=B}return(oe?-1:1)*S*Math.pow(2,x-f)},sP=function(c,s,h,f,v,x){var S,k,M,B=8*x-v-1,G=(1<<B)-1,Z=G>>1,te=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,oe=0,ae=1,ce=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(k=isNaN(s)?1:0,S=G):(S=Math.floor(Math.log(s)/Math.LN2),s*(M=Math.pow(2,-S))<1&&(S--,M*=2),(s+=S+Z>=1?te/M:te*Math.pow(2,1-Z))*M>=2&&(S++,M/=2),S+Z>=G?(k=0,S=G):S+Z>=1?(k=(s*M-1)*Math.pow(2,v),S+=Z):(k=s*Math.pow(2,Z-1)*Math.pow(2,v),S=0));v>=8;c[h+oe]=255&k,oe+=ae,k/=256,v-=8);for(S=S<<v|k,B+=v;B>0;c[h+oe]=255&S,oe+=ae,S/=256,B-=8);c[h+oe-ae]|=128*ce};function gn(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}gn.Varint=0,gn.Fixed64=1,gn.Bytes=2,gn.Fixed32=5;var c2=4294967296,lP=1/c2,cP=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function oc(c){return c.type===gn.Bytes?c.readVarint()+c.pos:c.pos+1}function Yd(c,s,h){return h?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function uP(c,s,h){var f=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(f);for(var v=h.pos-1;v>=c;v--)h.buf[v+f]=h.buf[v]}function S8(c,s){for(var h=0;h<c.length;h++)s.writeVarint(c[h])}function C8(c,s){for(var h=0;h<c.length;h++)s.writeSVarint(c[h])}function T8(c,s){for(var h=0;h<c.length;h++)s.writeFloat(c[h])}function k8(c,s){for(var h=0;h<c.length;h++)s.writeDouble(c[h])}function E8(c,s){for(var h=0;h<c.length;h++)s.writeBoolean(c[h])}function I8(c,s){for(var h=0;h<c.length;h++)s.writeFixed32(c[h])}function M8(c,s){for(var h=0;h<c.length;h++)s.writeSFixed32(c[h])}function P8(c,s){for(var h=0;h<c.length;h++)s.writeFixed64(c[h])}function A8(c,s){for(var h=0;h<c.length;h++)s.writeSFixed64(c[h])}function Z0(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Qd(c,s,h){c[h]=s,c[h+1]=s>>>8,c[h+2]=s>>>16,c[h+3]=s>>>24}function hP(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}gn.prototype={destroy:function(){this.buf=null},readFields:function(c,s,h){for(h=h||this.length;this.pos<h;){var f=this.readVarint(),v=f>>3,x=this.pos;this.type=7&f,c(v,s,this),this.pos===x&&this.skip(f)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=Z0(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=hP(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Z0(this.buf,this.pos)+Z0(this.buf,this.pos+4)*c2;return this.pos+=8,c},readSFixed64:function(){var c=Z0(this.buf,this.pos)+hP(this.buf,this.pos+4)*c2;return this.pos+=8,c},readFloat:function(){var c=aP(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=aP(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,h,f=this.buf;return s=127&(h=f[this.pos++]),h<128?s:(s|=(127&(h=f[this.pos++]))<<7,h<128?s:(s|=(127&(h=f[this.pos++]))<<14,h<128?s:(s|=(127&(h=f[this.pos++]))<<21,h<128?s:function(v,x,S){var k,M,B=S.buf;if(k=(112&(M=B[S.pos++]))>>4,M<128||(k|=(127&(M=B[S.pos++]))<<3,M<128)||(k|=(127&(M=B[S.pos++]))<<10,M<128)||(k|=(127&(M=B[S.pos++]))<<17,M<128)||(k|=(127&(M=B[S.pos++]))<<24,M<128)||(k|=(1&(M=B[S.pos++]))<<31,M<128))return Yd(v,k,x);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&cP?function(h,f,v){return cP.decode(h.subarray(f,v))}(this.buf,s,c):function(h,f,v){for(var x="",S=f;S<v;){var k,M,B,G=h[S],Z=null,te=G>239?4:G>223?3:G>191?2:1;if(S+te>v)break;te===1?G<128&&(Z=G):te===2?(192&(k=h[S+1]))==128&&(Z=(31&G)<<6|63&k)<=127&&(Z=null):te===3?(M=h[S+2],(192&(k=h[S+1]))==128&&(192&M)==128&&((Z=(15&G)<<12|(63&k)<<6|63&M)<=2047||Z>=55296&&Z<=57343)&&(Z=null)):te===4&&(M=h[S+2],B=h[S+3],(192&(k=h[S+1]))==128&&(192&M)==128&&(192&B)==128&&((Z=(15&G)<<18|(63&k)<<12|(63&M)<<6|63&B)<=65535||Z>=1114112)&&(Z=null)),Z===null?(Z=65533,te=1):Z>65535&&(Z-=65536,x+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),x+=String.fromCharCode(Z),S+=te}return x}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==gn.Bytes)return c.push(this.readVarint(s));var h=oc(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==gn.Bytes)return c.push(this.readSVarint());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==gn.Bytes)return c.push(this.readBoolean());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==gn.Bytes)return c.push(this.readFloat());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==gn.Bytes)return c.push(this.readDouble());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==gn.Bytes)return c.push(this.readFixed32());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==gn.Bytes)return c.push(this.readSFixed32());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==gn.Bytes)return c.push(this.readFixed64());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==gn.Bytes)return c.push(this.readSFixed64());var s=oc(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===gn.Varint)for(;this.buf[this.pos++]>127;);else if(s===gn.Bytes)this.pos=this.readVarint()+this.pos;else if(s===gn.Fixed32)this.pos+=4;else{if(s!==gn.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Qd(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Qd(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Qd(this.buf,-1&c,this.pos),Qd(this.buf,Math.floor(c*lP),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Qd(this.buf,-1&c,this.pos),Qd(this.buf,Math.floor(c*lP),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,h){var f,v;if(s>=0?(f=s%4294967296|0,v=s/4294967296|0):(v=~(-s/4294967296),4294967295^(f=~(-s%4294967296))?f=f+1|0:(f=0,v=v+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(x,S,k){k.buf[k.pos++]=127&x|128,x>>>=7,k.buf[k.pos++]=127&x|128,x>>>=7,k.buf[k.pos++]=127&x|128,x>>>=7,k.buf[k.pos++]=127&x|128,k.buf[k.pos]=127&(x>>>=7)}(f,0,h),function(x,S){var k=(7&x)<<4;S.buf[S.pos++]|=k|((x>>>=3)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x|((x>>>=7)?128:0),x&&(S.buf[S.pos++]=127&x)))))}(v,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(f,v,x){for(var S,k,M=0;M<v.length;M++){if((S=v.charCodeAt(M))>55295&&S<57344){if(!k){S>56319||M+1===v.length?(f[x++]=239,f[x++]=191,f[x++]=189):k=S;continue}if(S<56320){f[x++]=239,f[x++]=191,f[x++]=189,k=S;continue}S=k-55296<<10|S-56320|65536,k=null}else k&&(f[x++]=239,f[x++]=191,f[x++]=189,k=null);S<128?f[x++]=S:(S<2048?f[x++]=S>>6|192:(S<65536?f[x++]=S>>12|224:(f[x++]=S>>18|240,f[x++]=S>>12&63|128),f[x++]=S>>6&63|128),f[x++]=63&S|128)}return x}(this.buf,c,this.pos);var h=this.pos-s;h>=128&&uP(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),sP(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),sP(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,s){this.pos++;var h=this.pos;c(s,this);var f=this.pos-h;f>=128&&uP(h,f,this),this.pos=h-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,s,h){this.writeTag(c,gn.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,S8,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,C8,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,E8,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,T8,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,k8,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,I8,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,M8,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,P8,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,A8,s)},writeBytesField:function(c,s){this.writeTag(c,gn.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,gn.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,gn.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,gn.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,gn.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,gn.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,gn.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,gn.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,gn.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,gn.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};var u2=m(oP);const h2=3;function R8(c,s,h){c===1&&h.readMessage(D8,s)}function D8(c,s,h){if(c===3){const{id:f,bitmap:v,width:x,height:S,left:k,top:M,advance:B}=h.readMessage(z8,{});s.push({id:f,bitmap:new Nm({width:x+2*h2,height:S+2*h2},v),metrics:{width:x,height:S,left:k,top:M,advance:B}})}}function z8(c,s,h){c===1?s.id=h.readVarint():c===2?s.bitmap=h.readBytes():c===3?s.width=h.readVarint():c===4?s.height=h.readVarint():c===5?s.left=h.readSVarint():c===6?s.top=h.readSVarint():c===7&&(s.advance=h.readVarint())}const dP=h2;function fP(c){let s=0,h=0;for(const S of c)s+=S.w*S.h,h=Math.max(h,S.w);c.sort((S,k)=>k.h-S.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}];let v=0,x=0;for(const S of c)for(let k=f.length-1;k>=0;k--){const M=f[k];if(!(S.w>M.w||S.h>M.h)){if(S.x=M.x,S.y=M.y,x=Math.max(x,S.y+S.h),v=Math.max(v,S.x+S.w),S.w===M.w&&S.h===M.h){const B=f.pop();k<f.length&&(f[k]=B)}else S.h===M.h?(M.x+=S.w,M.w-=S.w):S.w===M.w?(M.y+=S.h,M.h-=S.h):(f.push({x:M.x+S.w,y:M.y,w:M.w-S.w,h:S.h}),M.y+=S.h,M.h-=S.h);break}}return{w:v,h:x,fill:s/(v*x)||0}}const Ho=1;class d2{constructor(s,{pixelRatio:h,version:f,stretchX:v,stretchY:x,content:S}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=v,this.stretchY=x,this.content=S,this.version=f}get tl(){return[this.paddedRect.x+Ho,this.paddedRect.y+Ho]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ho,this.paddedRect.y+this.paddedRect.h-Ho]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ho)/this.pixelRatio,(this.paddedRect.h-2*Ho)/this.pixelRatio]}}class pP{constructor(s,h){const f={},v={};this.haveRenderCallbacks=[];const x=[];this.addImages(s,f,x),this.addImages(h,v,x);const{w:S,h:k}=fP(x),M=new ka({width:S||1,height:k||1});for(const B in s){const G=s[B],Z=f[B].paddedRect;ka.copy(G.data,M,{x:0,y:0},{x:Z.x+Ho,y:Z.y+Ho},G.data)}for(const B in h){const G=h[B],Z=v[B].paddedRect,te=Z.x+Ho,oe=Z.y+Ho,ae=G.data.width,ce=G.data.height;ka.copy(G.data,M,{x:0,y:0},{x:te,y:oe},G.data),ka.copy(G.data,M,{x:0,y:ce-1},{x:te,y:oe-1},{width:ae,height:1}),ka.copy(G.data,M,{x:0,y:0},{x:te,y:oe+ce},{width:ae,height:1}),ka.copy(G.data,M,{x:ae-1,y:0},{x:te-1,y:oe},{width:1,height:ce}),ka.copy(G.data,M,{x:0,y:0},{x:te+ae,y:oe},{width:1,height:ce})}this.image=M,this.iconPositions=f,this.patternPositions=v}addImages(s,h,f){for(const v in s){const x=s[v],S={x:0,y:0,w:x.data.width+2*Ho,h:x.data.height+2*Ho};f.push(S),h[v]=new d2(S,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(s,h){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in s.updatedImages)this.patchUpdatedImage(this.iconPositions[f],s.getImage(f),h),this.patchUpdatedImage(this.patternPositions[f],s.getImage(f),h)}patchUpdatedImage(s,h,f){if(!s||!h||s.version===h.version)return;s.version=h.version;const[v,x]=s.tl;f.update(h.data,void 0,{x:v,y:x})}}var ru;Vt("ImagePosition",d2),Vt("ImageAtlas",pP),a.ai=void 0,(ru=a.ai||(a.ai={}))[ru.none=0]="none",ru[ru.horizontal=1]="horizontal",ru[ru.vertical=2]="vertical",ru[ru.horizontalOnly=3]="horizontalOnly";const Zm=-17;class Km{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,h){const f=new Km;return f.scale=s||1,f.fontStack=h,f}static forImage(s){const h=new Km;return h.imageName=s,h}}class ef{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){const f=new ef;for(let v=0;v<s.sections.length;v++){const x=s.sections[v];x.image?f.addImageSection(x):f.addTextSection(x,h)}return f}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let h="";for(let f=0;f<s.length;f++){const v=s.charCodeAt(f+1)||null,x=s.charCodeAt(f-1)||null;h+=v&&M0(v)&&!Wm[s[f+1]]||x&&M0(x)&&!Wm[s[f-1]]||!Wm[s[f]]?s[f]:Wm[s[f]]}return h}(this.text)}trim(){let s=0;for(let f=0;f<this.text.length&&X0[this.text.charCodeAt(f)];f++)s++;let h=this.text.length;for(let f=this.text.length-1;f>=0&&f>=s&&X0[this.text.charCodeAt(f)];f--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){const f=new ef;return f.text=this.text.substring(s,h),f.sectionIndex=this.sectionIndex.slice(s,h),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}addTextSection(s,h){this.text+=s.text,this.sections.push(Km.forText(s.scale,s.fontStack||h));const f=this.sections.length-1;for(let v=0;v<s.text.length;++v)this.sectionIndex.push(f)}addImageSection(s){const h=s.image?s.image.name:"";if(h.length===0)return void qe("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Km.forImage(h)),this.sectionIndex.push(this.sections.length-1)):qe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function K0(c,s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae,ce){const ve=ef.fromFeature(c,v);let be;Z===a.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:ze,processStyledBidirectionalText:Te}=Vo;if(ze&&ve.sections.length===1){be=[];const et=ze(ve.toString(),f2(ve,B,x,s,f,oe,ae));for(const $t of et){const Jt=new ef;Jt.text=$t,Jt.sections=ve.sections;for(let zt=0;zt<$t.length;zt++)Jt.sectionIndex.push(0);be.push(Jt)}}else if(Te){be=[];const et=Te(ve.text,ve.sectionIndex,f2(ve,B,x,s,f,oe,ae));for(const $t of et){const Jt=new ef;Jt.text=$t[0],Jt.sectionIndex=$t[1],Jt.sections=ve.sections,be.push(Jt)}}else be=function(et,$t){const Jt=[],zt=et.text;let At=0;for(const _t of $t)Jt.push(et.substring(At,_t)),At=_t;return At<zt.length&&Jt.push(et.substring(At,zt.length)),Jt}(ve,f2(ve,B,x,s,f,oe,ae));const Be=[],Ge={positionedLines:Be,text:ve.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:Z,iconsInText:!1,verticalizable:!1};return function(et,$t,Jt,zt,At,_t,Ut,St,ct,cr,Qt,Ar){let Mn=0,Rn=Zm,wi=0,ua=0;const So=St==="right"?1:St==="left"?0:.5;let pi=0;for(const Si of At){Si.trim();const Ci=Si.getMaxScale(),oo=(Ci-1)*bi,ko={positionedGlyphs:[],lineOffset:0};et.positionedLines[pi]=ko;const ao=ko.positionedGlyphs;let Go=0;if(!Si.length()){Rn+=_t,++pi;continue}for(let Ti=0;Ti<Si.length();Ti++){const Nr=Si.getSection(Ti),so=Si.getSectionIndex(Ti),qi=Si.getCharCode(Ti);let ki=0,ns=null,Rs=null,Ds=null,ac=bi;const is=!(ct===a.ai.horizontal||!Qt&&!bm(qi)||Qt&&(X0[qi]||(Fi=qi,Ot.Arabic(Fi)||Ot["Arabic Supplement"](Fi)||Ot["Arabic Extended-A"](Fi)||Ot["Arabic Presentation Forms-A"](Fi)||Ot["Arabic Presentation Forms-B"](Fi))));if(Nr.imageName){const Ia=zt[Nr.imageName];if(!Ia)continue;Ds=Nr.imageName,et.iconsInText=et.iconsInText||!0,Rs=Ia.paddedRect;const Wo=Ia.displaySize;Nr.scale=Nr.scale*bi/Ar,ns={width:Wo[0],height:Wo[1],left:Ho,top:-dP,advance:is?Wo[1]:Wo[0]},ki=oo+(bi-Wo[1]*Nr.scale),ac=ns.advance;const sc=is?Wo[0]*Nr.scale-bi*Ci:Wo[1]*Nr.scale-bi*Ci;sc>0&&sc>Go&&(Go=sc)}else{const Ia=Jt[Nr.fontStack],Wo=Ia&&Ia[qi];if(Wo&&Wo.rect)Rs=Wo.rect,ns=Wo.metrics;else{const sc=$t[Nr.fontStack],eg=sc&&sc[qi];if(!eg)continue;ns=eg.metrics}ki=(Ci-Nr.scale)*bi}is?(et.verticalizable=!0,ao.push({glyph:qi,imageName:Ds,x:Mn,y:Rn+ki,vertical:is,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:so,metrics:ns,rect:Rs}),Mn+=ac*Nr.scale+cr):(ao.push({glyph:qi,imageName:Ds,x:Mn,y:Rn+ki,vertical:is,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:so,metrics:ns,rect:Rs}),Mn+=ns.advance*Nr.scale+cr)}ao.length!==0&&(wi=Math.max(Mn-cr,wi),$8(ao,0,ao.length-1,So,Go)),Mn=0;const qo=_t*Ci+Go;ko.lineOffset=Math.max(Go,oo),Rn+=qo,ua=Math.max(qo,ua),++pi}var Fi;const Gi=Rn-Zm,{horizontalAlign:Co,verticalAlign:To}=p2(Ut);(function(Si,Ci,oo,ko,ao,Go,qo,Ti,Nr){const so=(Ci-oo)*ao;let qi=0;qi=Go!==qo?-Ti*ko-Zm:(-ko*Nr+.5)*qo;for(const ki of Si)for(const ns of ki.positionedGlyphs)ns.x+=so,ns.y+=qi})(et.positionedLines,So,Co,To,wi,ua,_t,Gi,At.length),et.top+=-To*Gi,et.bottom=et.top+Gi,et.left+=-Co*wi,et.right=et.left+wi}(Ge,s,h,f,be,S,k,M,Z,B,te,ce),!function(et){for(const $t of et)if($t.positionedGlyphs.length!==0)return!1;return!0}(Be)&&Ge}const X0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},L8={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function mP(c,s,h,f,v,x){if(s.imageName){const S=f[s.imageName];return S?S.displaySize[0]*s.scale*bi/x+v:0}{const S=h[s.fontStack],k=S&&S[c];return k?k.metrics.advance*s.scale+v:0}}function gP(c,s,h,f){const v=Math.pow(c-s,2);return f?c<s?v/2:2*v:v+Math.abs(h)*h}function O8(c,s,h){let f=0;return c===10&&(f-=1e4),h&&(f+=150),c!==40&&c!==65288||(f+=50),s!==41&&s!==65289||(f+=50),f}function vP(c,s,h,f,v,x){let S=null,k=gP(s,h,v,x);for(const M of f){const B=gP(s-M.x,h,v,x)+M.badness;B<=k&&(S=M,k=B)}return{index:c,x:s,priorBreak:S,badness:k}}function yP(c){return c?yP(c.priorBreak).concat(c.index):[]}function f2(c,s,h,f,v,x,S){if(x!=="point")return[];if(!c)return[];const k=[],M=function(te,oe,ae,ce,ve,be){let ze=0;for(let Te=0;Te<te.length();Te++){const Be=te.getSection(Te);ze+=mP(te.getCharCode(Te),Be,ce,ve,oe,be)}return ze/Math.max(1,Math.ceil(ze/ae))}(c,s,h,f,v,S),B=c.text.indexOf("")>=0;let G=0;for(let te=0;te<c.length();te++){const oe=c.getSection(te),ae=c.getCharCode(te);if(X0[ae]||(G+=mP(ae,oe,f,v,s,S)),te<c.length()-1){const ce=!((Z=ae)<11904||!(Ot["Bopomofo Extended"](Z)||Ot.Bopomofo(Z)||Ot["CJK Compatibility Forms"](Z)||Ot["CJK Compatibility Ideographs"](Z)||Ot["CJK Compatibility"](Z)||Ot["CJK Radicals Supplement"](Z)||Ot["CJK Strokes"](Z)||Ot["CJK Symbols and Punctuation"](Z)||Ot["CJK Unified Ideographs Extension A"](Z)||Ot["CJK Unified Ideographs"](Z)||Ot["Enclosed CJK Letters and Months"](Z)||Ot["Halfwidth and Fullwidth Forms"](Z)||Ot.Hiragana(Z)||Ot["Ideographic Description Characters"](Z)||Ot["Kangxi Radicals"](Z)||Ot["Katakana Phonetic Extensions"](Z)||Ot.Katakana(Z)||Ot["Vertical Forms"](Z)||Ot["Yi Radicals"](Z)||Ot["Yi Syllables"](Z)));(L8[ae]||ce||oe.imageName)&&k.push(vP(te+1,G,M,k,O8(ae,c.getCharCode(te+1),ce&&B),!1))}}var Z;return yP(vP(c.length(),G,M,k,0,!0))}function p2(c){let s=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function $8(c,s,h,f,v){if(!f&&!v)return;const x=c[h],S=(c[h].x+x.metrics.advance*x.scale)*f;for(let k=s;k<=h;k++)c[k].x-=S,c[k].y+=v}function B8(c,s,h){const{horizontalAlign:f,verticalAlign:v}=p2(h),x=s[0]-c.displaySize[0]*f,S=s[1]-c.displaySize[1]*v;return{image:c,top:S,bottom:S+c.displaySize[1],left:x,right:x+c.displaySize[0]}}function _P(c,s,h,f,v,x){const S=c.image;let k;if(S.content){const ve=S.content,be=S.pixelRatio||1;k=[ve[0]/be,ve[1]/be,S.displaySize[0]-ve[2]/be,S.displaySize[1]-ve[3]/be]}const M=s.left*x,B=s.right*x;let G,Z,te,oe;h==="width"||h==="both"?(oe=v[0]+M-f[3],Z=v[0]+B+f[1]):(oe=v[0]+(M+B-S.displaySize[0])/2,Z=oe+S.displaySize[0]);const ae=s.top*x,ce=s.bottom*x;return h==="height"||h==="both"?(G=v[1]+ae-f[0],te=v[1]+ce+f[2]):(G=v[1]+(ae+ce-S.displaySize[1])/2,te=G+S.displaySize[1]),{image:S,top:G,right:Z,bottom:te,left:oe,collisionPadding:k}}const Xm=255,gl=128,nu=Xm*gl;function xP(c,s){const{expression:h}=s;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new En(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=h;let x=0;for(;x<f.length&&f[x]<=c;)x++;x=Math.max(0,x-1);let S=x;for(;S<f.length&&f[S]<c+1;)S++;S=Math.min(f.length-1,S);const k=f[x],M=f[S];return h.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:M,interpolationType:v}:{kind:"camera",minZoom:k,maxZoom:M,minSize:h.evaluate(new En(k)),maxSize:h.evaluate(new En(M)),interpolationType:v}}}function m2(c,s,h){let f="never";const v=c.get(s);return v?f=v:c.get(h)&&(f="always"),f}const F8=tu.VectorTileFeature.types,N8=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function J0(c,s,h,f,v,x,S,k,M,B,G,Z,te){const oe=k?Math.min(nu,Math.round(k[0])):0,ae=k?Math.min(nu,Math.round(k[1])):0;c.emplaceBack(s,h,Math.round(32*f),Math.round(32*v),x,S,(oe<<1)+(M?1:0),ae,16*B,16*G,256*Z,256*te)}function g2(c,s,h){c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h)}function j8(c){for(const s of c.sections)if(Vw(s.text))return!0;return!1}class v2{constructor(s){this.layoutVertexArray=new Dr,this.indexArray=new $i,this.programConfigurations=s,this.segments=new In,this.dynamicLayoutVertexArray=new Tr,this.opacityVertexArray=new Lr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,h,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,y8.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,_8.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,N8,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Vt("SymbolBuffers",v2);class y2{constructor(s,h,f){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new f,this.segments=new In,this.collisionVertexArray=new Cn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,x8.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Vt("CollisionBuffers",y2);class tf{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(S=>S.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Kw([]),this.placementViewportMatrix=Kw([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=xP(this.zoom,h["text-size"]),this.iconSizeData=xP(this.zoom,h["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=m2(f,"text-overlap","text-allow-overlap")!=="never"||m2(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(S=>a.ai[S])),this.stateDependentLayerIds=this.layers.filter(S=>S.isStateDependent()).map(S=>S.id),this.sourceID=s.sourceID}createArrays(){this.text=new v2(new As(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new v2(new As(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new De,this.lineVertexArray=new We,this.symbolInstances=new _e,this.textAnchorOffsets=new Ye}calculateGlyphDependencies(s,h,f,v,x){for(let S=0;S<s.length;S++)if(h[s.charCodeAt(S)]=!0,(f||v)&&x){const k=Wm[s.charAt(S)];k&&(h[k.charCodeAt(0)]=!0)}}populate(s,h,f){const v=this.layers[0],x=v.layout,S=x.get("text-font"),k=x.get("text-field"),M=x.get("icon-image"),B=(k.value.kind!=="constant"||k.value.value instanceof Kr&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),G=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,Z=x.get("symbol-sort-key");if(this.features=[],!B&&!G)return;const te=h.iconDependencies,oe=h.glyphDependencies,ae=h.availableImages,ce=new En(this.zoom);for(const{feature:ve,id:be,index:ze,sourceLayerIndex:Te}of s){const Be=v._featureFilter.needGeometry,Ge=yh(ve,Be);if(!v._featureFilter.filter(ce,Ge,f))continue;let et,$t;if(Be||(Ge.geometry=vh(ve)),B){const zt=v.getValueAndResolveTokens("text-field",Ge,f,ae),At=Kr.factory(zt);j8(At)&&(this.hasRTLText=!0),(!this.hasRTLText||Em()==="unavailable"||this.hasRTLText&&Vo.isParsed())&&(et=w8(At,v,Ge))}if(G){const zt=v.getValueAndResolveTokens("icon-image",Ge,f,ae);$t=zt instanceof ri?zt:ri.fromString(zt)}if(!et&&!$t)continue;const Jt=this.sortFeaturesByKey?Z.evaluate(Ge,{},f):void 0;if(this.features.push({id:be,text:et,icon:$t,index:ze,sourceLayerIndex:Te,geometry:Ge.geometry,properties:ve.properties,type:F8[ve.type],sortKey:Jt}),$t&&(te[$t.name]=!0),et){const zt=S.evaluate(Ge,{},f).join(","),At=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ai.vertical)>=0;for(const _t of et.sections)if(_t.image)te[_t.image.name]=!0;else{const Ut=_m(et.toString()),St=_t.fontStack||zt,ct=oe[St]=oe[St]||{};this.calculateGlyphDependencies(_t.text,ct,At,this.allowVerticalPlacement,Ut)}}}x.get("symbol-placement")==="line"&&(this.features=function(ve){const be={},ze={},Te=[];let Be=0;function Ge(zt){Te.push(ve[zt]),Be++}function et(zt,At,_t){const Ut=ze[zt];return delete ze[zt],ze[At]=Ut,Te[Ut].geometry[0].pop(),Te[Ut].geometry[0]=Te[Ut].geometry[0].concat(_t[0]),Ut}function $t(zt,At,_t){const Ut=be[At];return delete be[At],be[zt]=Ut,Te[Ut].geometry[0].shift(),Te[Ut].geometry[0]=_t[0].concat(Te[Ut].geometry[0]),Ut}function Jt(zt,At,_t){const Ut=_t?At[0][At[0].length-1]:At[0][0];return`${zt}:${Ut.x}:${Ut.y}`}for(let zt=0;zt<ve.length;zt++){const At=ve[zt],_t=At.geometry,Ut=At.text?At.text.toString():null;if(!Ut){Ge(zt);continue}const St=Jt(Ut,_t),ct=Jt(Ut,_t,!0);if(St in ze&&ct in be&&ze[St]!==be[ct]){const cr=$t(St,ct,_t),Qt=et(St,ct,Te[cr].geometry);delete be[St],delete ze[ct],ze[Jt(Ut,Te[Qt].geometry,!0)]=Qt,Te[cr].geometry=null}else St in ze?et(St,ct,_t):ct in be?$t(St,ct,_t):(Ge(zt),be[St]=Be-1,ze[ct]=Be-1)}return Te.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,be)=>ve.sortKey-be.sortKey)}update(s,h,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,f),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){const f=this.lineVertexArray.length;if(s.segment!==void 0){let v=s.dist(h[s.segment+1]),x=s.dist(h[s.segment]);const S={};for(let k=s.segment+1;k<h.length;k++)S[k]={x:h[k].x,y:h[k].y,tileUnitDistanceFromAnchor:v},k<h.length-1&&(v+=h[k+1].dist(h[k]));for(let k=s.segment||0;k>=0;k--)S[k]={x:h[k].x,y:h[k].y,tileUnitDistanceFromAnchor:x},k>0&&(x+=h[k-1].dist(h[k]));for(let k=0;k<h.length;k++){const M=S[k];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(s,h,f,v,x,S,k,M,B,G,Z,te){const oe=s.indexArray,ae=s.layoutVertexArray,ce=s.segments.prepareSegment(4*h.length,ae,oe,this.canOverlap?S.sortKey:void 0),ve=this.glyphOffsetArray.length,be=ce.vertexLength,ze=this.allowVerticalPlacement&&k===a.ai.vertical?Math.PI/2:0,Te=S.text&&S.text.sections;for(let Be=0;Be<h.length;Be++){const{tl:Ge,tr:et,bl:$t,br:Jt,tex:zt,pixelOffsetTL:At,pixelOffsetBR:_t,minFontScaleX:Ut,minFontScaleY:St,glyphOffset:ct,isSDF:cr,sectionIndex:Qt}=h[Be],Ar=ce.vertexLength,Mn=ct[1];J0(ae,M.x,M.y,Ge.x,Mn+Ge.y,zt.x,zt.y,f,cr,At.x,At.y,Ut,St),J0(ae,M.x,M.y,et.x,Mn+et.y,zt.x+zt.w,zt.y,f,cr,_t.x,At.y,Ut,St),J0(ae,M.x,M.y,$t.x,Mn+$t.y,zt.x,zt.y+zt.h,f,cr,At.x,_t.y,Ut,St),J0(ae,M.x,M.y,Jt.x,Mn+Jt.y,zt.x+zt.w,zt.y+zt.h,f,cr,_t.x,_t.y,Ut,St),g2(s.dynamicLayoutVertexArray,M,ze),oe.emplaceBack(Ar,Ar+1,Ar+2),oe.emplaceBack(Ar+1,Ar+2,Ar+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),Be!==h.length-1&&Qt===h[Be+1].sectionIndex||s.programConfigurations.populatePaintArrays(ae.length,S,S.index,{},te,Te&&Te[Qt])}s.placedSymbolArray.emplaceBack(M.x,M.y,ve,this.glyphOffsetArray.length-ve,be,B,G,M.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],k,0,!1,0,Z)}_addCollisionDebugVertex(s,h,f,v,x,S){return h.emplaceBack(0,0),s.emplaceBack(f.x,f.y,v,x,Math.round(S.x),Math.round(S.y))}addCollisionDebugVertices(s,h,f,v,x,S,k){const M=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),B=M.vertexLength,G=x.layoutVertexArray,Z=x.collisionVertexArray,te=k.anchorX,oe=k.anchorY;this._addCollisionDebugVertex(G,Z,S,te,oe,new T(s,h)),this._addCollisionDebugVertex(G,Z,S,te,oe,new T(f,h)),this._addCollisionDebugVertex(G,Z,S,te,oe,new T(f,v)),this._addCollisionDebugVertex(G,Z,S,te,oe,new T(s,v)),M.vertexLength+=4;const ae=x.indexArray;ae.emplaceBack(B,B+1),ae.emplaceBack(B+1,B+2),ae.emplaceBack(B+2,B+3),ae.emplaceBack(B+3,B),M.primitiveLength+=4}addDebugCollisionBoxes(s,h,f,v){for(let x=s;x<h;x++){const S=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(S.x1,S.y1,S.x2,S.y2,v?this.textCollisionBox:this.iconCollisionBox,S.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new y2(Kn,iP.members,_i),this.iconCollisionBox=new y2(Kn,iP.members,_i);for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(s,h,f,v,x,S,k,M,B){const G={};for(let Z=h;Z<f;Z++){const te=s.get(Z);G.textBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},G.textFeatureIndex=te.featureIndex;break}for(let Z=v;Z<x;Z++){const te=s.get(Z);G.verticalTextBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},G.verticalTextFeatureIndex=te.featureIndex;break}for(let Z=S;Z<k;Z++){const te=s.get(Z);G.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},G.iconFeatureIndex=te.featureIndex;break}for(let Z=M;Z<B;Z++){const te=s.get(Z);G.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},G.verticalIconFeatureIndex=te.featureIndex;break}return G}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const f=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){const f=s.placedSymbolArray.get(h),v=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<v;x+=4)s.indexArray.emplaceBack(x,x+1,x+2),s.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(s),f=Math.cos(s),v=[],x=[],S=[];for(let k=0;k<this.symbolInstances.length;++k){S.push(k);const M=this.symbolInstances.get(k);v.push(0|Math.round(h*M.anchorX+f*M.anchorY)),x.push(M.featureIndex)}return S.sort((k,M)=>v[k]-v[M]||x[M]-x[k]),S}addToSortKeyRanges(s,h){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===h?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const f=this.symbolInstances.get(h);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((v,x,S)=>{v>=0&&S.indexOf(v)===x&&this.addIndicesForPlacedSymbol(this.text,v)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let bP,wP;Vt("SymbolBucket",tf,{omit:["layers","collisionBoxArray","features","compareText"]}),tf.MAX_GLYPHS=65535,tf.addDynamicAttributes=g2;var _2={get paint(){return wP=wP||new ni({"icon-opacity":new fr(He.paint_symbol["icon-opacity"]),"icon-color":new fr(He.paint_symbol["icon-color"]),"icon-halo-color":new fr(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new fr(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fr(He.paint_symbol["icon-halo-blur"]),"icon-translate":new nr(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new nr(He.paint_symbol["icon-translate-anchor"]),"text-opacity":new fr(He.paint_symbol["text-opacity"]),"text-color":new fr(He.paint_symbol["text-color"],{runtimeType:Rt,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new fr(He.paint_symbol["text-halo-color"]),"text-halo-width":new fr(He.paint_symbol["text-halo-width"]),"text-halo-blur":new fr(He.paint_symbol["text-halo-blur"]),"text-translate":new nr(He.paint_symbol["text-translate"]),"text-translate-anchor":new nr(He.paint_symbol["text-translate-anchor"])})},get layout(){return bP=bP||new ni({"symbol-placement":new nr(He.layout_symbol["symbol-placement"]),"symbol-spacing":new nr(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nr(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fr(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nr(He.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nr(He.layout_symbol["icon-allow-overlap"]),"icon-overlap":new nr(He.layout_symbol["icon-overlap"]),"icon-ignore-placement":new nr(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new nr(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nr(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new fr(He.layout_symbol["icon-size"]),"icon-text-fit":new nr(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nr(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new fr(He.layout_symbol["icon-image"]),"icon-rotate":new fr(He.layout_symbol["icon-rotate"]),"icon-padding":new fr(He.layout_symbol["icon-padding"]),"icon-keep-upright":new nr(He.layout_symbol["icon-keep-upright"]),"icon-offset":new fr(He.layout_symbol["icon-offset"]),"icon-anchor":new fr(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nr(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nr(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nr(He.layout_symbol["text-rotation-alignment"]),"text-field":new fr(He.layout_symbol["text-field"]),"text-font":new fr(He.layout_symbol["text-font"]),"text-size":new fr(He.layout_symbol["text-size"]),"text-max-width":new fr(He.layout_symbol["text-max-width"]),"text-line-height":new nr(He.layout_symbol["text-line-height"]),"text-letter-spacing":new fr(He.layout_symbol["text-letter-spacing"]),"text-justify":new fr(He.layout_symbol["text-justify"]),"text-radial-offset":new fr(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nr(He.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new fr(He.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new fr(He.layout_symbol["text-anchor"]),"text-max-angle":new nr(He.layout_symbol["text-max-angle"]),"text-writing-mode":new nr(He.layout_symbol["text-writing-mode"]),"text-rotate":new fr(He.layout_symbol["text-rotate"]),"text-padding":new nr(He.layout_symbol["text-padding"]),"text-keep-upright":new nr(He.layout_symbol["text-keep-upright"]),"text-transform":new fr(He.layout_symbol["text-transform"]),"text-offset":new fr(He.layout_symbol["text-offset"]),"text-allow-overlap":new nr(He.layout_symbol["text-allow-overlap"]),"text-overlap":new nr(He.layout_symbol["text-overlap"]),"text-ignore-placement":new nr(He.layout_symbol["text-ignore-placement"]),"text-optional":new nr(He.layout_symbol["text-optional"])})}};class SP{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Ve,this.defaultValue=s}evaluate(s){if(s.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Vt("FormatSectionOverride",SP,{omit:["defaultValue"]});class Y0 extends la{constructor(s){super(s,_2)}recalculate(s,h){if(super.recalculate(s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const x of f)v.indexOf(x)<0&&v.push(x);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,h,f,v){const x=this.layout.get(s).evaluate(h,{},f,v),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||Ld(S.value)||!x?x:function(k,M){return M.replace(/{([^{}]+)}/g,(B,G)=>k&&G in k?String(k[G]):"")}(h.properties,x)}createBucket(s){return new tf(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of _2.paint.overridableProperties){if(!Y0.hasPaintOverride(this.layout,s))continue;const h=this.paint.get(s),f=new SP(h),v=new fm(f,h.property.specification);let x=null;x=h.value.kind==="constant"||h.value.kind==="source"?new pm("source",v):new $d("composite",v,h.value.zoomStops),this.paint._values[s]=new no(h.property,x,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,f){return!(!this.layout||h.isDataDriven()||f.isDataDriven())&&Y0.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){const f=s.get("text-field"),v=_2.paint.properties[h];let x=!1;const S=k=>{for(const M of k)if(v.overrides&&v.overrides.hasOverride(M))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Kr)S(f.value.value.sections);else if(f.value.kind==="source"){const k=B=>{x||(B instanceof Wl&&$n(B.value)===ue?S(B.value.sections):B instanceof zd?S(B.sections):B.eachChild(k))},M=f.value;M._styleExpression&&k(M._styleExpression.expression)}return x}}let CP;var V8={get paint(){return CP=CP||new ni({"background-color":new nr(He.paint_background["background-color"]),"background-pattern":new Mm(He.paint_background["background-pattern"]),"background-opacity":new nr(He.paint_background["background-opacity"])})}};class U8 extends la{constructor(s){super(s,V8)}}let TP;var H8={get paint(){return TP=TP||new ni({"raster-opacity":new nr(He.paint_raster["raster-opacity"]),"raster-hue-rotate":new nr(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nr(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nr(He.paint_raster["raster-brightness-max"]),"raster-saturation":new nr(He.paint_raster["raster-saturation"]),"raster-contrast":new nr(He.paint_raster["raster-contrast"]),"raster-resampling":new nr(He.paint_raster["raster-resampling"]),"raster-fade-duration":new nr(He.paint_raster["raster-fade-duration"])})}};class G8 extends la{constructor(s){super(s,H8)}}class q8 extends la{constructor(s){super(s,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class W8{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const x2=63710088e-1;class iu{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new iu(X(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const h=Math.PI/180,f=this.lat*h,v=s.lat*h,x=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((s.lng-this.lng)*h);return x2*Math.acos(Math.min(x,1))}static convert(s){if(s instanceof iu)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new iu(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new iu(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const kP=2*Math.PI*x2;function EP(c){return kP*Math.cos(c*Math.PI/180)}function IP(c){return(180+c)/360}function MP(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function PP(c,s){return c/EP(s)}function AP(c){return 360*c-180}function b2(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Q0{constructor(s,h,f=0){this.x=+s,this.y=+h,this.z=+f}static fromLngLat(s,h=0){const f=iu.convert(s);return new Q0(IP(f.lng),MP(f.lat),PP(h,f.lat))}toLngLat(){return new iu(AP(this.x),b2(this.y))}toAltitude(){return this.z*EP(b2(this.y))}meterInMercatorCoordinateUnits(){return 1/kP*(s=b2(this.y),1/Math.cos(s*Math.PI/180));var s}}function RP(c,s,h){var f=2*Math.PI*6378137/256/Math.pow(2,h);return[c*f-2*Math.PI*6378137/2,s*f-2*Math.PI*6378137/2]}class w2{constructor(s,h,f){if(s<0||s>25||f<0||f>=Math.pow(2,s)||h<0||h>=Math.pow(2,s))throw new Error(`x=${h}, y=${f}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=h,this.y=f,this.key=Jm(0,s,s,h,f)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h,f){const v=(S=this.y,k=this.z,M=RP(256*(x=this.x),256*(S=Math.pow(2,k)-S-1),k),B=RP(256*(x+1),256*(S+1),k),M[0]+","+M[1]+","+B[0]+","+B[1]);var x,S,k,M,B;const G=function(Z,te,oe){let ae,ce="";for(let ve=Z;ve>0;ve--)ae=1<<ve-1,ce+=(te&ae?1:0)+(oe&ae?2:0);return ce}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,v)}isChildOf(s){const h=this.z-s.z;return h>0&&s.x===this.x>>h&&s.y===this.y>>h}getTilePoint(s){const h=Math.pow(2,this.z);return new T((s.x*h-this.x)*fi,(s.y*h-this.y)*fi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class DP{constructor(s,h){this.wrap=s,this.canonical=h,this.key=Jm(s,h.z,h.z,h.x,h.y)}}class Ea{constructor(s,h,f,v,x){if(s<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${f}`);this.overscaledZ=s,this.wrap=h,this.canonical=new w2(f,+v,+x),this.key=Jm(h,s,f,v,x)}clone(){return new Ea(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-s;return s>this.canonical.z?new Ea(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ea(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-s;return s>this.canonical.z?Jm(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y):Jm(this.wrap*+h,s,s,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const h=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new Ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new Ea(h,this.wrap,h,f,v),new Ea(h,this.wrap,h,f+1,v),new Ea(h,this.wrap,h,f,v+1),new Ea(h,this.wrap,h,f+1,v+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new Ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new Ea(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new DP(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Q0(s.x-this.wrap,s.y))}}function Jm(c,s,h,f,v){(c*=2)<0&&(c=-1*c-1);const x=1<<h;return(x*x*c+x*v+f).toString(36)+h.toString(36)+s.toString(36)}Vt("CanonicalTileID",w2),Vt("OverscaledTileID",Ea,{omit:["posMatrix"]});class zP{constructor(s,h,f,v=1,x=1,S=1,k=0){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void qe(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const M=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=x,this.blueFactor=S,this.baseShift=k;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<M;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(M,B)]=this.data[this._idx(M-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,M)]=this.data[this._idx(B,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<M;B++)for(let G=0;G<M;G++){const Z=this.get(B,G);Z>this.max&&(this.max=Z),Z<this.min&&(this.min=Z)}}get(s,h){const f=new Uint8Array(this.data.buffer),v=4*this._idx(s,h);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}unpack(s,h,f){return s*this.redFactor+h*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new ka({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,h,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let v=h*this.dim,x=h*this.dim+this.dim,S=f*this.dim,k=f*this.dim+this.dim;switch(h){case-1:v=x-1;break;case 1:x=v+1}switch(f){case-1:S=k-1;break;case 1:k=S+1}const M=-h*this.dim,B=-f*this.dim;for(let G=S;G<k;G++)for(let Z=v;Z<x;Z++)this.data[this._idx(Z,G)]=s.data[this._idx(Z+M,G+B)]}}Vt("DEMData",zP);class LP{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){const f=s[h];this._stringToNumber[f]=h,this._numberToString[h]=f}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class OP{constructor(s,h,f,v,x){this.type="Feature",this._vectorTileFeature=s,s._z=h,s._x=f,s._y=v,this.properties=s.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(s[h]=this[h]);return s}}class $P{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Xc(fi,16,0),this.grid3D=new Xc(fi,16,0),this.featureIndexArray=new nt,this.promoteId=h}insert(s,h,f,v,x,S){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,x);const M=S?this.grid3D:this.grid;for(let B=0;B<h.length;B++){const G=h[B],Z=[1/0,1/0,-1/0,-1/0];for(let te=0;te<G.length;te++){const oe=G[te];Z[0]=Math.min(Z[0],oe.x),Z[1]=Math.min(Z[1],oe.y),Z[2]=Math.max(Z[2],oe.x),Z[3]=Math.max(Z[3],oe.y)}Z[0]<fi&&Z[1]<fi&&Z[2]>=0&&Z[3]>=0&&M.insert(k,Z[0],Z[1],Z[2],Z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new tu.VectorTile(new u2(this.rawTileData)).layers,this.sourceLayerCoder=new LP(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,h,f,v){this.loadVTLayers();const x=s.params||{},S=fi/s.tileSize/s.scale,k=gm(x.filter),M=s.queryGeometry,B=s.queryPadding*S,G=FP(M),Z=this.grid.query(G.minX-B,G.minY-B,G.maxX+B,G.maxY+B),te=FP(s.cameraQueryGeometry),oe=this.grid3D.query(te.minX-B,te.minY-B,te.maxX+B,te.maxY+B,(ve,be,ze,Te)=>function(Be,Ge,et,$t,Jt){for(const At of Be)if(Ge<=At.x&&et<=At.y&&$t>=At.x&&Jt>=At.y)return!0;const zt=[new T(Ge,et),new T(Ge,Jt),new T($t,Jt),new T($t,et)];if(Be.length>2){for(const At of zt)if(Zd(Be,At))return!0}for(let At=0;At<Be.length-1;At++)if(kN(Be[At],Be[At+1],zt))return!0;return!1}(s.cameraQueryGeometry,ve-B,be-B,ze+B,Te+B));for(const ve of oe)Z.push(ve);Z.sort(Z8);const ae={};let ce;for(let ve=0;ve<Z.length;ve++){const be=Z[ve];if(be===ce)continue;ce=be;const ze=this.featureIndexArray.get(be);let Te=null;this.loadMatchingFeature(ae,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,k,x.layers,x.availableImages,h,f,v,(Be,Ge,et)=>(Te||(Te=vh(Be)),Ge.queryIntersectsFeature(M,Be,et,Te,this.z,s.transform,S,s.pixelPosMatrix)))}return ae}loadMatchingFeature(s,h,f,v,x,S,k,M,B,G,Z){const te=this.bucketLayerIDs[h];if(S&&!function(ve,be){for(let ze=0;ze<ve.length;ze++)if(be.indexOf(ve[ze])>=0)return!0;return!1}(S,te))return;const oe=this.sourceLayerCoder.decode(f),ae=this.vtLayers[oe].feature(v);if(x.needGeometry){const ve=yh(ae,!0);if(!x.filter(new En(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!x.filter(new En(this.tileID.overscaledZ),ae))return;const ce=this.getId(ae,oe);for(let ve=0;ve<te.length;ve++){const be=te[ve];if(S&&S.indexOf(be)<0)continue;const ze=M[be];if(!ze)continue;let Te={};ce&&G&&(Te=G.getState(ze.sourceLayer||"_geojsonTileLayer",ce));const Be=re({},B[be]);Be.paint=BP(Be.paint,ze.paint,ae,Te,k),Be.layout=BP(Be.layout,ze.layout,ae,Te,k);const Ge=!Z||Z(ae,ze,Te);if(!Ge)continue;const et=new OP(ae,this.z,this.x,this.y,ce);et.layer=Be;let $t=s[be];$t===void 0&&($t=s[be]=[]),$t.push({featureIndex:v,feature:et,intersectionZ:Ge})}}lookupSymbolFeatures(s,h,f,v,x,S,k,M){const B={};this.loadVTLayers();const G=gm(x);for(const Z of s)this.loadMatchingFeature(B,f,v,Z,G,S,k,M,h);return B}hasLayer(s){for(const h of this.bucketLayerIDs)for(const f of h)if(s===f)return!0;return!1}getId(s,h){let f=s.id;return this.promoteId&&(f=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof f=="boolean"&&(f=Number(f))),f}}function BP(c,s,h,f,v){return me(c,(x,S)=>{const k=s instanceof qd?s.get(S):null;return k&&k.evaluate?k.evaluate(h,f,v):k})}function FP(c){let s=1/0,h=1/0,f=-1/0,v=-1/0;for(const x of c)s=Math.min(s,x.x),h=Math.min(h,x.y),f=Math.max(f,x.x),v=Math.max(v,x.y);return{minX:s,minY:h,maxX:f,maxY:v}}function Z8(c,s){return s-c}function NP(c,s,h,f,v){const x=[];for(let S=0;S<c.length;S++){const k=c[S];let M;for(let B=0;B<k.length-1;B++){let G=k[B],Z=k[B+1];G.x<s&&Z.x<s||(G.x<s?G=new T(s,G.y+(s-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x<s&&(Z=new T(s,G.y+(s-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y<h&&Z.y<h||(G.y<h?G=new T(G.x+(h-G.y)/(Z.y-G.y)*(Z.x-G.x),h)._round():Z.y<h&&(Z=new T(G.x+(h-G.y)/(Z.y-G.y)*(Z.x-G.x),h)._round()),G.x>=f&&Z.x>=f||(G.x>=f?G=new T(f,G.y+(f-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x>=f&&(Z=new T(f,G.y+(f-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y>=v&&Z.y>=v||(G.y>=v?G=new T(G.x+(v-G.y)/(Z.y-G.y)*(Z.x-G.x),v)._round():Z.y>=v&&(Z=new T(G.x+(v-G.y)/(Z.y-G.y)*(Z.x-G.x),v)._round()),M&&G.equals(M[M.length-1])||(M=[G],x.push(M)),M.push(Z)))))}}return x}Vt("FeatureIndex",$P,{omit:["rawTileData","sourceLayerCoder"]});class ou extends T{constructor(s,h,f,v){super(s,h),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new ou(this.x,this.y,this.angle,this.segment)}}function jP(c,s,h,f,v){if(s.segment===void 0||h===0)return!0;let x=s,S=s.segment+1,k=0;for(;k>-h/2;){if(S--,S<0)return!1;k-=c[S].dist(x),x=c[S]}k+=c[S].dist(c[S+1]),S++;const M=[];let B=0;for(;k<h/2;){const G=c[S],Z=c[S+1];if(!Z)return!1;let te=c[S-1].angleTo(G)-G.angleTo(Z);for(te=Math.abs((te+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:k,angleDelta:te}),B+=te;k-M[0].distance>f;)B-=M.shift().angleDelta;if(B>v)return!1;S++,k+=G.dist(Z)}return!0}function VP(c){let s=0;for(let h=0;h<c.length-1;h++)s+=c[h].dist(c[h+1]);return s}function UP(c,s,h){return c?.6*s*h:0}function HP(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function K8(c,s,h,f,v,x){const S=UP(h,v,x),k=HP(h,f)*x;let M=0;const B=VP(c)/2;for(let G=0;G<c.length-1;G++){const Z=c[G],te=c[G+1],oe=Z.dist(te);if(M+oe>B){const ae=(B-M)/oe,ce=Fo.number(Z.x,te.x,ae),ve=Fo.number(Z.y,te.y,ae),be=new ou(ce,ve,te.angleTo(Z),G);return be._round(),!S||jP(c,be,k,S,s)?be:void 0}M+=oe}}function X8(c,s,h,f,v,x,S,k,M){const B=UP(f,x,S),G=HP(f,v),Z=G*S,te=c[0].x===0||c[0].x===M||c[0].y===0||c[0].y===M;return s-Z<s/4&&(s=Z+s/4),GP(c,te?s/2*k%s:(G/2+2*x)*S*k%s,s,B,h,Z,te,!1,M)}function GP(c,s,h,f,v,x,S,k,M){const B=x/2,G=VP(c);let Z=0,te=s-h,oe=[];for(let ae=0;ae<c.length-1;ae++){const ce=c[ae],ve=c[ae+1],be=ce.dist(ve),ze=ve.angleTo(ce);for(;te+h<Z+be;){te+=h;const Te=(te-Z)/be,Be=Fo.number(ce.x,ve.x,Te),Ge=Fo.number(ce.y,ve.y,Te);if(Be>=0&&Be<M&&Ge>=0&&Ge<M&&te-B>=0&&te+B<=G){const et=new ou(Be,Ge,ze,ae);et._round(),f&&!jP(c,et,x,f,v)||oe.push(et)}}Z+=be}return k||oe.length||S||(oe=GP(c,Z/2,h,f,v,x,S,!0,M)),oe}Vt("Anchor",ou);const rf=Ho;function qP(c,s,h,f){const v=[],x=c.image,S=x.pixelRatio,k=x.paddedRect.w-2*rf,M=x.paddedRect.h-2*rf,B=c.right-c.left,G=c.bottom-c.top,Z=x.stretchX||[[0,k]],te=x.stretchY||[[0,M]],oe=(_t,Ut)=>_t+Ut[1]-Ut[0],ae=Z.reduce(oe,0),ce=te.reduce(oe,0),ve=k-ae,be=M-ce;let ze=0,Te=ae,Be=0,Ge=ce,et=0,$t=ve,Jt=0,zt=be;if(x.content&&f){const _t=x.content;ze=e_(Z,0,_t[0]),Be=e_(te,0,_t[1]),Te=e_(Z,_t[0],_t[2]),Ge=e_(te,_t[1],_t[3]),et=_t[0]-ze,Jt=_t[1]-Be,$t=_t[2]-_t[0]-Te,zt=_t[3]-_t[1]-Ge}const At=(_t,Ut,St,ct)=>{const cr=t_(_t.stretch-ze,Te,B,c.left),Qt=r_(_t.fixed-et,$t,_t.stretch,ae),Ar=t_(Ut.stretch-Be,Ge,G,c.top),Mn=r_(Ut.fixed-Jt,zt,Ut.stretch,ce),Rn=t_(St.stretch-ze,Te,B,c.left),wi=r_(St.fixed-et,$t,St.stretch,ae),ua=t_(ct.stretch-Be,Ge,G,c.top),So=r_(ct.fixed-Jt,zt,ct.stretch,ce),pi=new T(cr,Ar),Fi=new T(Rn,Ar),Gi=new T(Rn,ua),Co=new T(cr,ua),To=new T(Qt/S,Mn/S),Si=new T(wi/S,So/S),Ci=s*Math.PI/180;if(Ci){const ao=Math.sin(Ci),Go=Math.cos(Ci),qo=[Go,-ao,ao,Go];pi._matMult(qo),Fi._matMult(qo),Co._matMult(qo),Gi._matMult(qo)}const oo=_t.stretch+_t.fixed,ko=Ut.stretch+Ut.fixed;return{tl:pi,tr:Fi,bl:Co,br:Gi,tex:{x:x.paddedRect.x+rf+oo,y:x.paddedRect.y+rf+ko,w:St.stretch+St.fixed-oo,h:ct.stretch+ct.fixed-ko},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:To,pixelOffsetBR:Si,minFontScaleX:$t/S/B,minFontScaleY:zt/S/G,isSDF:h}};if(f&&(x.stretchX||x.stretchY)){const _t=WP(Z,ve,ae),Ut=WP(te,be,ce);for(let St=0;St<_t.length-1;St++){const ct=_t[St],cr=_t[St+1];for(let Qt=0;Qt<Ut.length-1;Qt++)v.push(At(ct,Ut[Qt],cr,Ut[Qt+1]))}}else v.push(At({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:M+1}));return v}function e_(c,s,h){let f=0;for(const v of c)f+=Math.max(s,Math.min(h,v[1]))-Math.max(s,Math.min(h,v[0]));return f}function WP(c,s,h){const f=[{fixed:-rf,stretch:0}];for(const[v,x]of c){const S=f[f.length-1];f.push({fixed:v-S.stretch,stretch:S.stretch}),f.push({fixed:v-S.stretch,stretch:S.stretch+(x-v)})}return f.push({fixed:s+rf,stretch:h}),f}function t_(c,s,h,f){return c/s*h+f}function r_(c,s,h,f){return c-s*h/f}class n_{constructor(s,h,f,v,x,S,k,M,B,G){if(this.boxStartIndex=s.length,B){let Z=S.top,te=S.bottom;const oe=S.collisionPadding;oe&&(Z-=oe[1],te+=oe[3]);let ae=te-Z;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{let Z=S.top*k-M[0],te=S.bottom*k+M[2],oe=S.left*k-M[3],ae=S.right*k+M[1];const ce=S.collisionPadding;if(ce&&(oe-=ce[0]*k,Z-=ce[1]*k,ae+=ce[2]*k,te+=ce[3]*k),G){const ve=new T(oe,Z),be=new T(ae,Z),ze=new T(oe,te),Te=new T(ae,te),Be=G*Math.PI/180;ve._rotate(Be),be._rotate(Be),ze._rotate(Be),Te._rotate(Be),oe=Math.min(ve.x,be.x,ze.x,Te.x),ae=Math.max(ve.x,be.x,ze.x,Te.x),Z=Math.min(ve.y,be.y,ze.y,Te.y),te=Math.max(ve.y,be.y,ze.y,Te.y)}s.emplaceBack(h.x,h.y,oe,Z,ae,te,f,v,x)}this.boxEndIndex=s.length}}class J8{constructor(s=[],h=Y8){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:h,compare:f}=this,v=h[s];for(;s>0;){const x=s-1>>1,S=h[x];if(f(v,S)>=0)break;h[s]=S,s=x}h[s]=v}_down(s){const{data:h,compare:f}=this,v=this.length>>1,x=h[s];for(;s<v;){let S=1+(s<<1),k=h[S];const M=S+1;if(M<this.length&&f(h[M],k)<0&&(S=M,k=h[M]),f(k,x)>=0)break;h[s]=k,s=S}h[s]=x}}function Y8(c,s){return c<s?-1:c>s?1:0}function Q8(c,s=1,h=!1){let f=1/0,v=1/0,x=-1/0,S=-1/0;const k=c[0];for(let oe=0;oe<k.length;oe++){const ae=k[oe];(!oe||ae.x<f)&&(f=ae.x),(!oe||ae.y<v)&&(v=ae.y),(!oe||ae.x>x)&&(x=ae.x),(!oe||ae.y>S)&&(S=ae.y)}const M=Math.min(x-f,S-v);let B=M/2;const G=new J8([],ej);if(M===0)return new T(f,v);for(let oe=f;oe<x;oe+=M)for(let ae=v;ae<S;ae+=M)G.push(new nf(oe+B,ae+B,B,c));let Z=function(oe){let ae=0,ce=0,ve=0;const be=oe[0];for(let ze=0,Te=be.length,Be=Te-1;ze<Te;Be=ze++){const Ge=be[ze],et=be[Be],$t=Ge.x*et.y-et.x*Ge.y;ce+=(Ge.x+et.x)*$t,ve+=(Ge.y+et.y)*$t,ae+=3*$t}return new nf(ce/ae,ve/ae,0,oe)}(c),te=G.length;for(;G.length;){const oe=G.pop();(oe.d>Z.d||!Z.d)&&(Z=oe,h&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,te)),oe.max-Z.d<=s||(B=oe.h/2,G.push(new nf(oe.p.x-B,oe.p.y-B,B,c)),G.push(new nf(oe.p.x+B,oe.p.y-B,B,c)),G.push(new nf(oe.p.x-B,oe.p.y+B,B,c)),G.push(new nf(oe.p.x+B,oe.p.y+B,B,c)),te+=4)}return h&&(console.log(`num probes: ${te}`),console.log(`best distance: ${Z.d}`)),Z.p}function ej(c,s){return s.max-c.max}function nf(c,s,h,f){this.p=new T(c,s),this.h=h,this.d=function(v,x){let S=!1,k=1/0;for(let M=0;M<x.length;M++){const B=x[M];for(let G=0,Z=B.length,te=Z-1;G<Z;te=G++){const oe=B[G],ae=B[te];oe.y>v.y!=ae.y>v.y&&v.x<(ae.x-oe.x)*(v.y-oe.y)/(ae.y-oe.y)+oe.x&&(S=!S),k=Math.min(k,MM(v,oe,ae))}}return(S?1:-1)*Math.sqrt(k)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Hi;a.aq=void 0,(Hi=a.aq||(a.aq={}))[Hi.center=1]="center",Hi[Hi.left=2]="left",Hi[Hi.right=3]="right",Hi[Hi.top=4]="top",Hi[Hi.bottom=5]="bottom",Hi[Hi["top-left"]=6]="top-left",Hi[Hi["top-right"]=7]="top-right",Hi[Hi["bottom-left"]=8]="bottom-left",Hi[Hi["bottom-right"]=9]="bottom-right";const au=7,S2=Number.POSITIVE_INFINITY;function ZP(c,s){return s[1]!==S2?function(h,f,v){let x=0,S=0;switch(f=Math.abs(f),v=Math.abs(v),h){case"top-right":case"top-left":case"top":S=v-au;break;case"bottom-right":case"bottom-left":case"bottom":S=-v+au}switch(h){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,S]}(c,s[0],s[1]):function(h,f){let v=0,x=0;f<0&&(f=0);const S=f/Math.SQRT2;switch(h){case"top-right":case"top-left":x=S-au;break;case"bottom-right":case"bottom-left":x=-S+au;break;case"bottom":x=-f+au;break;case"top":x=f-au}switch(h){case"top-right":case"bottom-right":v=-S;break;case"top-left":case"bottom-left":v=S;break;case"left":v=f;break;case"right":v=-f}return[v,x]}(c,s[0])}function KP(c,s,h){var f;const v=c.layout,x=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(s,{},h);if(x){const k=x.values,M=[];for(let B=0;B<k.length;B+=2){const G=M[B]=k[B],Z=k[B+1].map(te=>te*bi);G.startsWith("top")?Z[1]-=au:G.startsWith("bottom")&&(Z[1]+=au),M[B+1]=Z}return new ti(M)}const S=v.get("text-variable-anchor");if(S){let k;k=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(s,{},h)*bi,S2]:v.get("text-offset").evaluate(s,{},h).map(B=>B*bi);const M=[];for(const B of S)M.push(B,ZP(B,k));return new ti(M)}return null}function C2(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tj(c,s,h,f,v,x,S,k,M,B,G){let Z=x.textMaxSize.evaluate(s,{});Z===void 0&&(Z=S);const te=c.layers[0].layout,oe=te.get("icon-offset").evaluate(s,{},G),ae=JP(h.horizontal),ce=S/24,ve=c.tilePixelRatio*ce,be=c.tilePixelRatio*Z/24,ze=c.tilePixelRatio*k,Te=c.tilePixelRatio*te.get("symbol-spacing"),Be=te.get("text-padding")*c.tilePixelRatio,Ge=function(ct,cr,Qt,Ar=1){const Mn=ct.get("icon-padding").evaluate(cr,{},Qt),Rn=Mn&&Mn.values;return[Rn[0]*Ar,Rn[1]*Ar,Rn[2]*Ar,Rn[3]*Ar]}(te,s,G,c.tilePixelRatio),et=te.get("text-max-angle")/180*Math.PI,$t=te.get("text-rotation-alignment")!=="viewport"&&te.get("symbol-placement")!=="point",Jt=te.get("icon-rotation-alignment")==="map"&&te.get("symbol-placement")!=="point",zt=te.get("symbol-placement"),At=Te/2,_t=te.get("icon-text-fit");let Ut;f&&_t!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(Ut=_P(f,h.vertical,_t,te.get("icon-text-fit-padding"),oe,ce)),ae&&(f=_P(f,ae,_t,te.get("icon-text-fit-padding"),oe,ce)));const St=(ct,cr)=>{cr.x<0||cr.x>=fi||cr.y<0||cr.y>=fi||function(Qt,Ar,Mn,Rn,wi,ua,So,pi,Fi,Gi,Co,To,Si,Ci,oo,ko,ao,Go,qo,Ti,Nr,so,qi,ki,ns){const Rs=Qt.addToLineVertexArray(Ar,Mn);let Ds,ac,is,Ia,Wo=0,sc=0,eg=0,tA=0,R2=-1,D2=-1;const lc={};let rA=rc("");if(Qt.allowVerticalPlacement&&Rn.vertical){const lo=pi.layout.get("text-rotate").evaluate(Nr,{},ki)+90;is=new n_(Fi,Ar,Gi,Co,To,Rn.vertical,Si,Ci,oo,lo),So&&(Ia=new n_(Fi,Ar,Gi,Co,To,So,ao,Go,oo,lo))}if(wi){const lo=pi.layout.get("icon-rotate").evaluate(Nr,{}),Ma=pi.layout.get("icon-text-fit")!=="none",xh=qP(wi,lo,qi,Ma),Ls=So?qP(So,lo,qi,Ma):void 0;ac=new n_(Fi,Ar,Gi,Co,To,wi,ao,Go,!1,lo),Wo=4*xh.length;const bh=Qt.iconSizeData;let vl=null;bh.kind==="source"?(vl=[gl*pi.layout.get("icon-size").evaluate(Nr,{})],vl[0]>nu&&qe(`${Qt.layerIds[0]}: Value for "icon-size" is >= ${Xm}. Reduce your "icon-size".`)):bh.kind==="composite"&&(vl=[gl*so.compositeIconSizes[0].evaluate(Nr,{},ki),gl*so.compositeIconSizes[1].evaluate(Nr,{},ki)],(vl[0]>nu||vl[1]>nu)&&qe(`${Qt.layerIds[0]}: Value for "icon-size" is >= ${Xm}. Reduce your "icon-size".`)),Qt.addSymbols(Qt.icon,xh,vl,Ti,qo,Nr,a.ai.none,Ar,Rs.lineStartIndex,Rs.lineLength,-1,ki),R2=Qt.icon.placedSymbolArray.length-1,Ls&&(sc=4*Ls.length,Qt.addSymbols(Qt.icon,Ls,vl,Ti,qo,Nr,a.ai.vertical,Ar,Rs.lineStartIndex,Rs.lineLength,-1,ki),D2=Qt.icon.placedSymbolArray.length-1)}const nA=Object.keys(Rn.horizontal);for(const lo of nA){const Ma=Rn.horizontal[lo];if(!Ds){rA=rc(Ma.text);const Ls=pi.layout.get("text-rotate").evaluate(Nr,{},ki);Ds=new n_(Fi,Ar,Gi,Co,To,Ma,Si,Ci,oo,Ls)}const xh=Ma.positionedLines.length===1;if(eg+=XP(Qt,Ar,Ma,ua,pi,oo,Nr,ko,Rs,Rn.vertical?a.ai.horizontal:a.ai.horizontalOnly,xh?nA:[lo],lc,R2,so,ki),xh)break}Rn.vertical&&(tA+=XP(Qt,Ar,Rn.vertical,ua,pi,oo,Nr,ko,Rs,a.ai.vertical,["vertical"],lc,D2,so,ki));const ij=Ds?Ds.boxStartIndex:Qt.collisionBoxArray.length,oj=Ds?Ds.boxEndIndex:Qt.collisionBoxArray.length,aj=is?is.boxStartIndex:Qt.collisionBoxArray.length,sj=is?is.boxEndIndex:Qt.collisionBoxArray.length,lj=ac?ac.boxStartIndex:Qt.collisionBoxArray.length,cj=ac?ac.boxEndIndex:Qt.collisionBoxArray.length,uj=Ia?Ia.boxStartIndex:Qt.collisionBoxArray.length,hj=Ia?Ia.boxEndIndex:Qt.collisionBoxArray.length;let zs=-1;const o_=(lo,Ma)=>lo&&lo.circleDiameter?Math.max(lo.circleDiameter,Ma):Ma;zs=o_(Ds,zs),zs=o_(is,zs),zs=o_(ac,zs),zs=o_(Ia,zs);const iA=zs>-1?1:0;iA&&(zs*=ns/bi),Qt.glyphOffsetArray.length>=tf.MAX_GLYPHS&&qe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Nr.sortKey!==void 0&&Qt.addToSortKeyRanges(Qt.symbolInstances.length,Nr.sortKey);const dj=KP(pi,Nr,ki),[fj,pj]=function(lo,Ma){const xh=lo.length,Ls=Ma==null?void 0:Ma.values;if((Ls==null?void 0:Ls.length)>0)for(let bh=0;bh<Ls.length;bh+=2){const vl=Ls[bh+1];lo.emplaceBack(a.aq[Ls[bh]],vl[0],vl[1])}return[xh,lo.length]}(Qt.textAnchorOffsets,dj);Qt.symbolInstances.emplaceBack(Ar.x,Ar.y,lc.right>=0?lc.right:-1,lc.center>=0?lc.center:-1,lc.left>=0?lc.left:-1,lc.vertical||-1,R2,D2,rA,ij,oj,aj,sj,lj,cj,uj,hj,Gi,eg,tA,Wo,sc,iA,0,Si,zs,fj,pj)}(c,cr,ct,h,f,v,Ut,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,ve,[Be,Be,Be,Be],$t,M,ze,Ge,Jt,oe,s,x,B,G,S)};if(zt==="line")for(const ct of NP(s.geometry,0,0,fi,fi)){const cr=X8(ct,Te,et,h.vertical||ae,f,24,be,c.overscaling,fi);for(const Qt of cr)ae&&rj(c,ae.text,At,Qt)||St(ct,Qt)}else if(zt==="line-center"){for(const ct of s.geometry)if(ct.length>1){const cr=K8(ct,et,h.vertical||ae,f,24,be);cr&&St(ct,cr)}}else if(s.type==="Polygon")for(const ct of r2(s.geometry,0)){const cr=Q8(ct,16);St(ct[0],new ou(cr.x,cr.y,0))}else if(s.type==="LineString")for(const ct of s.geometry)St(ct,new ou(ct[0].x,ct[0].y,0));else if(s.type==="Point")for(const ct of s.geometry)for(const cr of ct)St([cr],new ou(cr.x,cr.y,0))}function XP(c,s,h,f,v,x,S,k,M,B,G,Z,te,oe,ae){const ce=function(ze,Te,Be,Ge,et,$t,Jt,zt){const At=Ge.layout.get("text-rotate").evaluate($t,{})*Math.PI/180,_t=[];for(const Ut of Te.positionedLines)for(const St of Ut.positionedGlyphs){if(!St.rect)continue;const ct=St.rect||{};let cr=dP+1,Qt=!0,Ar=1,Mn=0;const Rn=(et||zt)&&St.vertical,wi=St.metrics.advance*St.scale/2;if(zt&&Te.verticalizable&&(Mn=Ut.lineOffset/2-(St.imageName?-(bi-St.metrics.width*St.scale)/2:(St.scale-1)*bi)),St.imageName){const Ti=Jt[St.imageName];Qt=Ti.sdf,Ar=Ti.pixelRatio,cr=Ho/Ar}const ua=et?[St.x+wi,St.y]:[0,0];let So=et?[0,0]:[St.x+wi+Be[0],St.y+Be[1]-Mn],pi=[0,0];Rn&&(pi=So,So=[0,0]);const Fi=St.metrics.isDoubleResolution?2:1,Gi=(St.metrics.left-cr)*St.scale-wi+So[0],Co=(-St.metrics.top-cr)*St.scale+So[1],To=Gi+ct.w/Fi*St.scale/Ar,Si=Co+ct.h/Fi*St.scale/Ar,Ci=new T(Gi,Co),oo=new T(To,Co),ko=new T(Gi,Si),ao=new T(To,Si);if(Rn){const Ti=new T(-wi,wi-Zm),Nr=-Math.PI/2,so=bi/2-wi,qi=new T(5-Zm-so,-(St.imageName?so:0)),ki=new T(...pi);Ci._rotateAround(Nr,Ti)._add(qi)._add(ki),oo._rotateAround(Nr,Ti)._add(qi)._add(ki),ko._rotateAround(Nr,Ti)._add(qi)._add(ki),ao._rotateAround(Nr,Ti)._add(qi)._add(ki)}if(At){const Ti=Math.sin(At),Nr=Math.cos(At),so=[Nr,-Ti,Ti,Nr];Ci._matMult(so),oo._matMult(so),ko._matMult(so),ao._matMult(so)}const Go=new T(0,0),qo=new T(0,0);_t.push({tl:Ci,tr:oo,bl:ko,br:ao,tex:ct,writingMode:Te.writingMode,glyphOffset:ua,sectionIndex:St.sectionIndex,isSDF:Qt,pixelOffsetTL:Go,pixelOffsetBR:qo,minFontScaleX:0,minFontScaleY:0})}return _t}(0,h,k,v,x,S,f,c.allowVerticalPlacement),ve=c.textSizeData;let be=null;ve.kind==="source"?(be=[gl*v.layout.get("text-size").evaluate(S,{})],be[0]>nu&&qe(`${c.layerIds[0]}: Value for "text-size" is >= ${Xm}. Reduce your "text-size".`)):ve.kind==="composite"&&(be=[gl*oe.compositeTextSizes[0].evaluate(S,{},ae),gl*oe.compositeTextSizes[1].evaluate(S,{},ae)],(be[0]>nu||be[1]>nu)&&qe(`${c.layerIds[0]}: Value for "text-size" is >= ${Xm}. Reduce your "text-size".`)),c.addSymbols(c.text,ce,be,k,x,S,B,s,M.lineStartIndex,M.lineLength,te,ae);for(const ze of G)Z[ze]=c.text.placedSymbolArray.length-1;return 4*ce.length}function JP(c){for(const s in c)return c[s];return null}function rj(c,s,h,f){const v=c.compareText;if(s in v){const x=v[s];for(let S=x.length-1;S>=0;S--)if(f.dist(x[S])<h)return!0}else v[s]=[];return v[s].push(f),!1}const YP=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class T2{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,f]=new Uint8Array(s,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const x=YP[15&f];if(!x)throw new Error("Unrecognized array type.");const[S]=new Uint16Array(s,2,1),[k]=new Uint32Array(s,4,1);return new T2(k,S,x,s)}constructor(s,h=64,f=Float64Array,v){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=f,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const x=YP.indexOf(this.ArrayType),S=2*s*this.ArrayType.BYTES_PER_ELEMENT,k=s*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-k%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+k+M,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+S+k+M),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+k+M,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=s)}add(s,h){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=s,this.coords[this._pos++]=h,f}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return k2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,h,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:S,nodeSize:k}=this,M=[0,x.length-1,0],B=[];for(;M.length;){const G=M.pop()||0,Z=M.pop()||0,te=M.pop()||0;if(Z-te<=k){for(let ve=te;ve<=Z;ve++){const be=S[2*ve],ze=S[2*ve+1];be>=s&&be<=f&&ze>=h&&ze<=v&&B.push(x[ve])}continue}const oe=te+Z>>1,ae=S[2*oe],ce=S[2*oe+1];ae>=s&&ae<=f&&ce>=h&&ce<=v&&B.push(x[oe]),(G===0?s<=ae:h<=ce)&&(M.push(te),M.push(oe-1),M.push(1-G)),(G===0?f>=ae:v>=ce)&&(M.push(oe+1),M.push(Z),M.push(1-G))}return B}within(s,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,k=[0,v.length-1,0],M=[],B=f*f;for(;k.length;){const G=k.pop()||0,Z=k.pop()||0,te=k.pop()||0;if(Z-te<=S){for(let ve=te;ve<=Z;ve++)eA(x[2*ve],x[2*ve+1],s,h)<=B&&M.push(v[ve]);continue}const oe=te+Z>>1,ae=x[2*oe],ce=x[2*oe+1];eA(ae,ce,s,h)<=B&&M.push(v[oe]),(G===0?s-f<=ae:h-f<=ce)&&(k.push(te),k.push(oe-1),k.push(1-G)),(G===0?s+f>=ae:h+f>=ce)&&(k.push(oe+1),k.push(Z),k.push(1-G))}return M}}function k2(c,s,h,f,v,x){if(v-f<=h)return;const S=f+v>>1;QP(c,s,S,f,v,x),k2(c,s,h,f,S-1,1-x),k2(c,s,h,S+1,v,1-x)}function QP(c,s,h,f,v,x){for(;v>f;){if(v-f>600){const B=v-f+1,G=h-f+1,Z=Math.log(B),te=.5*Math.exp(2*Z/3),oe=.5*Math.sqrt(Z*te*(B-te)/B)*(G-B/2<0?-1:1);QP(c,s,h,Math.max(f,Math.floor(h-G*te/B+oe)),Math.min(v,Math.floor(h+(B-G)*te/B+oe)),x)}const S=s[2*h+x];let k=f,M=v;for(Ym(c,s,f,h),s[2*v+x]>S&&Ym(c,s,f,v);k<M;){for(Ym(c,s,k,M),k++,M--;s[2*k+x]<S;)k++;for(;s[2*M+x]>S;)M--}s[2*f+x]===S?Ym(c,s,f,M):(M++,Ym(c,s,M,v)),M<=h&&(f=M+1),h<=M&&(v=M-1)}}function Ym(c,s,h,f){E2(c,h,f),E2(s,2*h,2*f),E2(s,2*h+1,2*f+1)}function E2(c,s,h){const f=c[s];c[s]=c[h],c[h]=f}function eA(c,s,h,f){const v=c-h,x=s-f;return v*v+x*x}var I2;a.bh=void 0,(I2=a.bh||(a.bh={})).create="create",I2.load="load",I2.fullLoad="fullLoad";let i_=null,Qm=[];const M2=1e3/60,P2="loadTime",A2="fullLoadTime",nj={mark(c){performance.mark(c)},frame(c){const s=c;i_!=null&&Qm.push(s-i_),i_=s},clearMetrics(){i_=null,Qm=[],performance.clearMeasures(P2),performance.clearMeasures(A2);for(const c in a.bh)performance.clearMarks(a.bh[c])},getPerformanceMetrics(){performance.measure(P2,a.bh.create,a.bh.load),performance.measure(A2,a.bh.create,a.bh.fullLoad);const c=performance.getEntriesByName(P2)[0].duration,s=performance.getEntriesByName(A2)[0].duration,h=Qm.length,f=1/(Qm.reduce((x,S)=>x+S,0)/h/1e3),v=Qm.filter(x=>x>M2).reduce((x,S)=>x+(S-M2)/M2,0);return{loadTime:c,fullLoadTime:s,fps:f,percentDroppedFrames:v/(h+v)*100,totalFrames:h}}};a.$=function(c,s,h){var f,v,x,S,k,M,B,G,Z,te,oe,ae,ce=h[0],ve=h[1],be=h[2];return s===c?(c[12]=s[0]*ce+s[4]*ve+s[8]*be+s[12],c[13]=s[1]*ce+s[5]*ve+s[9]*be+s[13],c[14]=s[2]*ce+s[6]*ve+s[10]*be+s[14],c[15]=s[3]*ce+s[7]*ve+s[11]*be+s[15]):(v=s[1],x=s[2],S=s[3],k=s[4],M=s[5],B=s[6],G=s[7],Z=s[8],te=s[9],oe=s[10],ae=s[11],c[0]=f=s[0],c[1]=v,c[2]=x,c[3]=S,c[4]=k,c[5]=M,c[6]=B,c[7]=G,c[8]=Z,c[9]=te,c[10]=oe,c[11]=ae,c[12]=f*ce+k*ve+Z*be+s[12],c[13]=v*ce+M*ve+te*be+s[13],c[14]=x*ce+B*ve+oe*be+s[14],c[15]=S*ce+G*ve+ae*be+s[15]),c},a.A=Kd,a.B=Fo,a.C=class{constructor(c,s,h){this.receive=f=>{const v=f.data,x=v.id;if(x&&(!v.targetMapId||this.mapId===v.targetMapId))if(v.type==="<cancel>"){delete this.tasks[x];const S=this.cancelCallbacks[x];delete this.cancelCallbacks[x],S&&S()}else Fe()||v.mustQueue?(this.tasks[x]=v,this.taskQueue.push(x),this.invoker.trigger()):this.processTask(x,v)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),v=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),v&&this.processTask(f,v)},this.target=c,this.parent=s,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new W8(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Fe()?c:window}send(c,s,h,f,v=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[x]=h);const S=[],k={id:x,type:c,hasCallback:!!h,targetMapId:f,mustQueue:v,sourceMapId:this.mapId,data:fl(s,S)};return this.target.postMessage(k,{transfer:S}),{cancel:()=>{h&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(c,s){if(s.type==="<response>"){const h=this.callbacks[c];delete this.callbacks[c],h&&(s.error?h(Jc(s.error)):h(null,Jc(s.data)))}else{let h=!1;const f=[],v=s.hasCallback?(k,M)=>{h=!0,delete this.cancelCallbacks[c];const B={id:c,type:"<response>",sourceMapId:this.mapId,error:k?fl(k):null,data:fl(M,f)};this.target.postMessage(B,{transfer:f})}:k=>{h=!0};let x=null;const S=Jc(s.data);if(this.parent[s.type])x=this.parent[s.type](s.sourceMapId,S,v);else if("getWorkerSource"in this.parent){const k=s.type.split(".");x=this.parent.getWorkerSource(s.sourceMapId,k[0],S.source)[k[1]](S,v)}else v(new Error(`Could not find function ${s.type}`));!h&&x&&x.cancel&&(this.cancelCallbacks[c]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.D=nr,a.E=Br,a.F=function(c,s){const h={};for(let f=0;f<s.length;f++){const v=s[f];v in c&&(h[v]=c[v])}return h},a.G=IP,a.H=MP,a.I=d2,a.J=O,a.K=L,a.L=iu,a.M=at,a.N=fi,a.O=Ea,a.P=T,a.Q=Nn,a.R=ka,a.S=In,a.T=D0,a.U=Q0,a.V=class extends ec{},a.W=w2,a.X=function(c,s){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){s(null,h)};for(let f=0;f<c.length;f++){const v=window.document.createElement("source");jr(c[f])||(h.crossOrigin="Anonymous"),v.src=c[f],h.appendChild(v)}return{cancel:()=>{}}},a.Y=je,a.Z=function(){var c=new Kd(16);return Kd!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},a._=p,a.a=Ne,a.a$=class extends ie{},a.a0=function(c,s,h){var f=h[0],v=h[1],x=h[2];return c[0]=s[0]*f,c[1]=s[1]*f,c[2]=s[2]*f,c[3]=s[3]*f,c[4]=s[4]*v,c[5]=s[5]*v,c[6]=s[6]*v,c[7]=s[7]*v,c[8]=s[8]*x,c[9]=s[9]*x,c[10]=s[10]*x,c[11]=s[11]*x,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.a1=DM,a.a2=function(){return ye++},a.a3=ge,a.a4=tf,a.a5=function(){Vo.isLoading()||Vo.isLoaded()||Em()!=="deferred"||R0()},a.a6=gm,a.a7=yh,a.a8=En,a.a9=OP,a.aA=dh,a.aB=function(c){c=c.slice();const s=Object.create(null);for(let h=0;h<c.length;h++)s[c[h].id]=c[h];for(let h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=Rr(c[h],s[c[h].ref]));return c},a.aC=function(c){if(c.type==="custom")return new q8(c);switch(c.type){case"background":return new U8(c);case"circle":return new MN(c);case"fill":return new ZN(c);case"fill-extrusion":return new c8(c);case"heatmap":return new AN(c);case"hillshade":return new DN(c);case"line":return new v8(c);case"raster":return new G8(c);case"symbol":return new Y0(c)}},a.aD=ke,a.aE=function(c,s){if(!c)return[{command:lr.setStyle,args:[s]}];let h=[];try{if(!tr(c.version,s.version))return[{command:lr.setStyle,args:[s]}];tr(c.center,s.center)||h.push({command:lr.setCenter,args:[s.center]}),tr(c.zoom,s.zoom)||h.push({command:lr.setZoom,args:[s.zoom]}),tr(c.bearing,s.bearing)||h.push({command:lr.setBearing,args:[s.bearing]}),tr(c.pitch,s.pitch)||h.push({command:lr.setPitch,args:[s.pitch]}),tr(c.sprite,s.sprite)||h.push({command:lr.setSprite,args:[s.sprite]}),tr(c.glyphs,s.glyphs)||h.push({command:lr.setGlyphs,args:[s.glyphs]}),tr(c.transition,s.transition)||h.push({command:lr.setTransition,args:[s.transition]}),tr(c.light,s.light)||h.push({command:lr.setLight,args:[s.light]});const f={},v=[];(function(S,k,M,B){let G;for(G in k=k||{},S=S||{})Object.prototype.hasOwnProperty.call(S,G)&&(Object.prototype.hasOwnProperty.call(k,G)||Fr(G,M,B));for(G in k)Object.prototype.hasOwnProperty.call(k,G)&&(Object.prototype.hasOwnProperty.call(S,G)?tr(S[G],k[G])||(S[G].type==="geojson"&&k[G].type==="geojson"&&vr(S,k,G)?M.push({command:lr.setGeoJSONSourceData,args:[G,k[G].data]}):Ir(G,k,M,B)):Pr(G,k,M))})(c.sources,s.sources,v,f);const x=[];c.layers&&c.layers.forEach(S=>{f[S.source]?h.push({command:lr.removeLayer,args:[S.id]}):x.push(S)}),h=h.concat(v),function(S,k,M){k=k||[];const B=(S=S||[]).map(mr),G=k.map(mr),Z=S.reduce(ln,{}),te=k.reduce(ln,{}),oe=B.slice(),ae=Object.create(null);let ce,ve,be,ze,Te,Be,Ge;for(ce=0,ve=0;ce<B.length;ce++)be=B[ce],Object.prototype.hasOwnProperty.call(te,be)?ve++:(M.push({command:lr.removeLayer,args:[be]}),oe.splice(oe.indexOf(be,ve),1));for(ce=0,ve=0;ce<G.length;ce++)be=G[G.length-1-ce],oe[oe.length-1-ce]!==be&&(Object.prototype.hasOwnProperty.call(Z,be)?(M.push({command:lr.removeLayer,args:[be]}),oe.splice(oe.lastIndexOf(be,oe.length-ve),1)):ve++,Be=oe[oe.length-ce],M.push({command:lr.addLayer,args:[te[be],Be]}),oe.splice(oe.length-ce,0,be),ae[be]=!0);for(ce=0;ce<G.length;ce++)if(be=G[ce],ze=Z[be],Te=te[be],!ae[be]&&!tr(ze,Te))if(tr(ze.source,Te.source)&&tr(ze["source-layer"],Te["source-layer"])&&tr(ze.type,Te.type)){for(Ge in rr(ze.layout,Te.layout,M,be,null,lr.setLayoutProperty),rr(ze.paint,Te.paint,M,be,null,lr.setPaintProperty),tr(ze.filter,Te.filter)||M.push({command:lr.setFilter,args:[be,Te.filter]}),tr(ze.minzoom,Te.minzoom)&&tr(ze.maxzoom,Te.maxzoom)||M.push({command:lr.setLayerZoomRange,args:[be,Te.minzoom,Te.maxzoom]}),ze)Object.prototype.hasOwnProperty.call(ze,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?rr(ze[Ge],Te[Ge],M,be,Ge.slice(6),lr.setPaintProperty):tr(ze[Ge],Te[Ge])||M.push({command:lr.setLayerProperty,args:[be,Ge,Te[Ge]]}));for(Ge in Te)Object.prototype.hasOwnProperty.call(Te,Ge)&&!Object.prototype.hasOwnProperty.call(ze,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?rr(ze[Ge],Te[Ge],M,be,Ge.slice(6),lr.setPaintProperty):tr(ze[Ge],Te[Ge])||M.push({command:lr.setLayerProperty,args:[be,Ge,Te[Ge]]}))}else M.push({command:lr.removeLayer,args:[be]}),Be=oe[oe.lastIndexOf(be)+1],M.push({command:lr.addLayer,args:[Te,Be]})}(x,s.layers,h)}catch(f){console.warn("Unable to compute style diff:",f),h=[{command:lr.setStyle,args:[s]}]}return h},a.aF=function(c){const s=[],h=c.id;return h===void 0&&s.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},a.aG=function c(s,h){if(Array.isArray(s)){if(!Array.isArray(h)||s.length!==h.length)return!1;for(let f=0;f<s.length;f++)if(!c(s[f],h[f]))return!1;return!0}if(typeof s=="object"&&s!==null&&h!==null){if(typeof h!="object"||Object.keys(s).length!==Object.keys(h).length)return!1;for(const f in s)if(!c(s[f],h[f]))return!1;return!0}return s===h},a.aH=me,a.aI=we,a.aJ=fh,a.aK=function(c){return c({pluginStatus:xo,pluginURL:pl}),fh.on("pluginStateChange",c),c},a.aL=class extends nc{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},a.aM=Wd,a.aN=class extends nc{constructor(c,s){super(c,s),this.current=Hw}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},a.aO=$0,a.aP=class extends nc{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},a.aQ=class extends nc{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},a.aR=B0,a.aS=function(c,s,h,f,v,x,S){var k=1/(s-h),M=1/(f-v),B=1/(x-S);return c[0]=-2*k,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*M,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*B,c[11]=0,c[12]=(s+h)*k,c[13]=(v+f)*M,c[14]=(S+x)*B,c[15]=1,c},a.aT=Vr,a.aU=IN,a.aV=class extends g{},a.aW=b8,a.aX=class extends b{},a.aY=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},a.aZ=BM,a.a_=mt,a.aa=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,f,v,x)=>{const S=v||x;return s[f]=!S||S.toLowerCase(),""}),s["max-age"]){const h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s},a.ab=function(c,s){const h=[];for(const f in c)f in s||h.push(f);return h},a.ac=function(c){if(Ce==null){const s=c.navigator?c.navigator.userAgent:null;Ce=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return Ce},a.ad=F,a.ae=function(c,s,h){var f=Math.sin(h),v=Math.cos(h),x=s[0],S=s[1],k=s[2],M=s[3],B=s[4],G=s[5],Z=s[6],te=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=x*v+B*f,c[1]=S*v+G*f,c[2]=k*v+Z*f,c[3]=M*v+te*f,c[4]=B*v-x*f,c[5]=G*v-S*f,c[6]=Z*v-k*f,c[7]=te*v-M*f,c},a.af=function(c){var s=new Kd(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},a.ag=V0,a.ah=function(c,s){let h=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:v,minZoom:x,maxZoom:S}=c,k=v?F(No.interpolationFactor(v,s,x,S),0,1):0;c.kind==="camera"?f=Fo.number(c.minSize,c.maxSize,k):h=k}return{uSizeT:h,uSize:f}},a.aj=function(c,{uSize:s,uSizeT:h},{lowerSize:f,upperSize:v}){return c.kind==="source"?f/gl:c.kind==="composite"?Fo.number(f/gl,v/gl,h):s},a.ak=g2,a.al=function(c,s,h,f){const v=s.y-c.y,x=s.x-c.x,S=f.y-h.y,k=f.x-h.x,M=S*x-k*v;if(M===0)return null;const B=(k*(c.y-h.y)-S*(c.x-h.x))/M;return new T(c.x+B*x,c.y+B*v)},a.am=NP,a.an=EM,a.ao=Kw,a.ap=bi,a.ar=m2,a.as=function(c,s){var h=s[0],f=s[1],v=s[2],x=s[3],S=s[4],k=s[5],M=s[6],B=s[7],G=s[8],Z=s[9],te=s[10],oe=s[11],ae=s[12],ce=s[13],ve=s[14],be=s[15],ze=h*k-f*S,Te=h*M-v*S,Be=h*B-x*S,Ge=f*M-v*k,et=f*B-x*k,$t=v*B-x*M,Jt=G*ce-Z*ae,zt=G*ve-te*ae,At=G*be-oe*ae,_t=Z*ve-te*ce,Ut=Z*be-oe*ce,St=te*be-oe*ve,ct=ze*St-Te*Ut+Be*_t+Ge*At-et*zt+$t*Jt;return ct?(c[0]=(k*St-M*Ut+B*_t)*(ct=1/ct),c[1]=(v*Ut-f*St-x*_t)*ct,c[2]=(ce*$t-ve*et+be*Ge)*ct,c[3]=(te*et-Z*$t-oe*Ge)*ct,c[4]=(M*At-S*St-B*zt)*ct,c[5]=(h*St-v*At+x*zt)*ct,c[6]=(ve*Be-ae*$t-be*Te)*ct,c[7]=(G*$t-te*Be+oe*Te)*ct,c[8]=(S*Ut-k*At+B*Jt)*ct,c[9]=(f*At-h*Ut-x*Jt)*ct,c[10]=(ae*et-ce*Be+be*ze)*ct,c[11]=(Z*Be-G*et-oe*ze)*ct,c[12]=(k*zt-S*_t-M*Jt)*ct,c[13]=(h*_t-f*zt+v*Jt)*ct,c[14]=(ce*Te-ae*Ge-ve*ze)*ct,c[15]=(G*Ge-Z*Te+te*ze)*ct,c):null},a.at=C2,a.au=p2,a.av=T2,a.aw=function(){const c={},s=He.$version;for(const h in He.$root){const f=He.$root[h];if(f.required){let v=null;v=h==="version"?s:f.type==="array"?[]:{},v!=null&&(c[h]=v)}}return c},a.ax=lr,a.ay=I0,a.az=rt,a.b=function(c,s){const h=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(h).then(f=>{s(null,f)}).catch(f=>{s(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.b0=$i,a.b1=function(c,s){var h=c[0],f=c[1],v=c[2],x=c[3],S=c[4],k=c[5],M=c[6],B=c[7],G=c[8],Z=c[9],te=c[10],oe=c[11],ae=c[12],ce=c[13],ve=c[14],be=c[15],ze=s[0],Te=s[1],Be=s[2],Ge=s[3],et=s[4],$t=s[5],Jt=s[6],zt=s[7],At=s[8],_t=s[9],Ut=s[10],St=s[11],ct=s[12],cr=s[13],Qt=s[14],Ar=s[15];return Math.abs(h-ze)<=wo*Math.max(1,Math.abs(h),Math.abs(ze))&&Math.abs(f-Te)<=wo*Math.max(1,Math.abs(f),Math.abs(Te))&&Math.abs(v-Be)<=wo*Math.max(1,Math.abs(v),Math.abs(Be))&&Math.abs(x-Ge)<=wo*Math.max(1,Math.abs(x),Math.abs(Ge))&&Math.abs(S-et)<=wo*Math.max(1,Math.abs(S),Math.abs(et))&&Math.abs(k-$t)<=wo*Math.max(1,Math.abs(k),Math.abs($t))&&Math.abs(M-Jt)<=wo*Math.max(1,Math.abs(M),Math.abs(Jt))&&Math.abs(B-zt)<=wo*Math.max(1,Math.abs(B),Math.abs(zt))&&Math.abs(G-At)<=wo*Math.max(1,Math.abs(G),Math.abs(At))&&Math.abs(Z-_t)<=wo*Math.max(1,Math.abs(Z),Math.abs(_t))&&Math.abs(te-Ut)<=wo*Math.max(1,Math.abs(te),Math.abs(Ut))&&Math.abs(oe-St)<=wo*Math.max(1,Math.abs(oe),Math.abs(St))&&Math.abs(ae-ct)<=wo*Math.max(1,Math.abs(ae),Math.abs(ct))&&Math.abs(ce-cr)<=wo*Math.max(1,Math.abs(ce),Math.abs(cr))&&Math.abs(ve-Qt)<=wo*Math.max(1,Math.abs(ve),Math.abs(Qt))&&Math.abs(be-Ar)<=wo*Math.max(1,Math.abs(be),Math.abs(Ar))},a.b2=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.b3=function(c,s,h){return c[0]=s[0]*h[0],c[1]=s[1]*h[1],c[2]=s[2]*h[2],c[3]=s[3]*h[3],c},a.b4=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},a.b5=X,a.b6=DP,a.b7=PP,a.b8=function(c,s,h,f,v){var x,S=1/Math.tan(s/2);return c[0]=S/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=S,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,v!=null&&v!==1/0?(c[10]=(v+f)*(x=1/(f-v)),c[14]=2*v*f*x):(c[10]=-1,c[14]=-2*f),c},a.b9=function(c,s,h){var f=Math.sin(h),v=Math.cos(h),x=s[4],S=s[5],k=s[6],M=s[7],B=s[8],G=s[9],Z=s[10],te=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=x*v+B*f,c[5]=S*v+G*f,c[6]=k*v+Z*f,c[7]=M*v+te*f,c[8]=B*v-x*f,c[9]=G*v-S*f,c[10]=Z*v-k*f,c[11]=te*v-M*f,c},a.bA=w,a.bB=oP,a.bC=Od,a.bD=Vo,a.ba=Q,a.bb=V,a.bc=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},a.bd=class extends gh{},a.be=x2,a.bf=AP,a.bg=nj,a.bi=Ze,a.bj=function(c,s,h=!1){if(xo===wm||xo===Sm||xo===Cm)throw new Error("setRTLTextPlugin cannot be called multiple times.");pl=Tt.resolveURL(c),xo=wm,Tm=s,km(),h||R0()},a.bk=Em,a.bl=function(c,s){const h={};for(let v=0;v<c.length;v++){const x=s&&s[c[v].id]||Nd(c[v]);s&&(s[c[v].id]=x);let S=h[x];S||(S=h[x]=[]),S.push(c[v])}const f=[];for(const v in h)f.push(h[v]);return f},a.bm=Vt,a.bn=LP,a.bo=$P,a.bp=pP,a.bq=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=fi/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],h=s.layout,f=s._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new En(c.bucket.zoom+1),c.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new En(c.bucket.zoom+1),c.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new En(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:G}=c.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new En(B),c.canonical),f["text-size"].possiblyEvaluate(new En(G),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:G}=c.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new En(B),c.canonical),f["icon-size"].possiblyEvaluate(new En(G),c.canonical)]}const x=h.get("text-line-height")*bi,S=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",k=h.get("text-keep-upright"),M=h.get("text-size");for(const B of c.bucket.features){const G=h.get("text-font").evaluate(B,{},c.canonical).join(","),Z=M.evaluate(B,{},c.canonical),te=v.layoutTextSize.evaluate(B,{},c.canonical),oe=v.layoutIconSize.evaluate(B,{},c.canonical),ae={horizontal:{},vertical:void 0},ce=B.text;let ve,be=[0,0];if(ce){const Be=ce.toString(),Ge=h.get("text-letter-spacing").evaluate(B,{},c.canonical)*bi,et=xm(Be)?Ge:0,$t=h.get("text-anchor").evaluate(B,{},c.canonical),Jt=KP(s,B,c.canonical);if(!Jt){const St=h.get("text-radial-offset").evaluate(B,{},c.canonical);be=St?ZP($t,[St*bi,S2]):h.get("text-offset").evaluate(B,{},c.canonical).map(ct=>ct*bi)}let zt=S?"center":h.get("text-justify").evaluate(B,{},c.canonical);const At=h.get("symbol-placement"),_t=At==="point"?h.get("text-max-width").evaluate(B,{},c.canonical)*bi:0,Ut=()=>{c.bucket.allowVerticalPlacement&&_m(Be)&&(ae.vertical=K0(ce,c.glyphMap,c.glyphPositions,c.imagePositions,G,_t,x,$t,"left",et,be,a.ai.vertical,!0,At,te,Z))};if(!S&&Jt){const St=new Set;if(zt==="auto")for(let cr=0;cr<Jt.values.length;cr+=2)St.add(C2(Jt.values[cr]));else St.add(zt);let ct=!1;for(const cr of St)if(!ae.horizontal[cr])if(ct)ae.horizontal[cr]=ae.horizontal[0];else{const Qt=K0(ce,c.glyphMap,c.glyphPositions,c.imagePositions,G,_t,x,"center",cr,et,be,a.ai.horizontal,!1,At,te,Z);Qt&&(ae.horizontal[cr]=Qt,ct=Qt.positionedLines.length===1)}Ut()}else{zt==="auto"&&(zt=C2($t));const St=K0(ce,c.glyphMap,c.glyphPositions,c.imagePositions,G,_t,x,$t,zt,et,be,a.ai.horizontal,!1,At,te,Z);St&&(ae.horizontal[zt]=St),Ut(),_m(Be)&&S&&k&&(ae.vertical=K0(ce,c.glyphMap,c.glyphPositions,c.imagePositions,G,_t,x,$t,zt,et,be,a.ai.vertical,!1,At,te,Z))}}let ze=!1;if(B.icon&&B.icon.name){const Be=c.imageMap[B.icon.name];Be&&(ve=B8(c.imagePositions[B.icon.name],h.get("icon-offset").evaluate(B,{},c.canonical),h.get("icon-anchor").evaluate(B,{},c.canonical)),ze=!!Be.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=ze:c.bucket.sdfIcons!==ze&&qe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Be.pixelRatio!==c.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Te=JP(ae.horizontal)||ae.vertical;c.bucket.iconsInText=!!Te&&Te.iconsInText,(Te||ve)&&tj(c.bucket,B,ae,ve,c.imageMap,v,te,oe,be,ze,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},a.br=l2,a.bs=o2,a.bt=s2,a.bu=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},a.bv=u2,a.bw=tu,a.bx=function(c,s,h,f,v){return p(this,void 0,void 0,function*(){if(L())try{return yield at(c,s,h,f,v)}catch{}return function(x,S,k,M,B){const G=x.width,Z=x.height;st&&Dt||(st=new OffscreenCanvas(G,Z),Dt=st.getContext("2d",{willReadFrequently:!0})),st.width=G,st.height=Z,Dt.drawImage(x,0,0,G,Z);const te=Dt.getImageData(S,k,M,B);return Dt.clearRect(0,0,G,Z),te.data}(c,s,h,f,v)})},a.by=zP,a.bz=m,a.c=it,a.d=function(c,s){const h=new Image;h.onload=()=>{s(null,h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Je})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(c)],{type:"image/png"});h.src=c.byteLength?URL.createObjectURL(f):Je},a.e=re,a.f=function(c,s){return or(re(c,{type:"json"}),s)},a.g=pt,a.h=Tt,a.i=Fe,a.j=Wt,a.k=gr,a.l=Er,a.m=or,a.n=function(c){return new u2(c).readFields(R8,[])},a.o=function(c,s,h){if(!c.length)return h(null,[]);let f=c.length;const v=new Array(c.length);let x=null;c.forEach((S,k)=>{s(S,(M,B)=>{M&&(x=M),v[k]=B,--f==0&&h(x,v)})})},a.p=fP,a.q=Nm,a.r=ni,a.s=jr,a.t=Nw,a.u=Ot,a.v=He,a.w=qe,a.x=Ud,a.y=Ms,a.z=function([c,s,h]){return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(h),y:c*Math.sin(s)*Math.sin(h),z:c*Math.cos(h)}}}),o(["./shared"],function(a){class p{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,ee){for(const J of Y){this._layerConfigs[J.id]=J;const ne=this._layers[J.id]=a.aC(J);ne._featureFilter=a.a6(ne.filter),this.keyCache[J.id]&&delete this.keyCache[J.id]}for(const J of ee)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};const U=a.bl(Object.values(this._layerConfigs),this.keyCache);for(const J of U){const ne=J.map(Le=>this._layers[Le.id]),de=ne[0];if(de.visibility==="none")continue;const pe=de.source||"";let se=this.familiesBySource[pe];se||(se=this.familiesBySource[pe]={});const xe=de.sourceLayer||"_geojsonTileLayer";let Pe=se[xe];Pe||(Pe=se[xe]=[]),Pe.push(ne)}}}class m{constructor(Y){const ee={},U=[];for(const pe in Y){const se=Y[pe],xe=ee[pe]={};for(const Pe in se){const Le=se[+Pe];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const Ae={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};U.push(Ae),xe[Pe]={rect:Ae,metrics:Le.metrics}}}const{w:J,h:ne}=a.p(U),de=new a.q({width:J||1,height:ne||1});for(const pe in Y){const se=Y[pe];for(const xe in se){const Pe=se[+xe];if(!Pe||Pe.bitmap.width===0||Pe.bitmap.height===0)continue;const Le=ee[pe][xe].rect;a.q.copy(Pe.bitmap,de,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Pe.bitmap)}}this.image=de,this.positions=ee}}a.bm("GlyphAtlas",m);class w{constructor(Y){this.tileID=new a.O(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Y,ee,U,J,ne){this.status="parsing",this.data=Y,this.collisionBoxArray=new a.a3;const de=new a.bn(Object.keys(Y.layers).sort()),pe=new a.bo(this.tileID,this.promoteId);pe.bucketLayerIDs=[];const se={},xe={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:U},Pe=ee.familiesBySource[this.source];for(const dt in Pe){const Lt=Y.layers[dt];if(!Lt)continue;Lt.version===1&&a.w(`Vector tile source "${this.source}" layer "${dt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const yr=de.encode(dt),sr=[];for(let Wr=0;Wr<Lt.length;Wr++){const xn=Lt.feature(Wr),Zn=pe.getId(xn,dt);sr.push({feature:xn,id:Zn,index:Wr,sourceLayerIndex:yr})}for(const Wr of Pe[dt]){const xn=Wr[0];xn.source!==this.source&&a.w(`layer.source = ${xn.source} does not equal this.source = ${this.source}`),xn.minzoom&&this.zoom<Math.floor(xn.minzoom)||xn.maxzoom&&this.zoom>=xn.maxzoom||xn.visibility!=="none"&&(C(Wr,this.zoom,U),(se[xn.id]=xn.createBucket({index:pe.bucketLayerIDs.length,layers:Wr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yr,sourceID:this.source})).populate(sr,xe,this.tileID.canonical),pe.bucketLayerIDs.push(Wr.map(Zn=>Zn.id)))}}let Le,Ae,ot,ht;const ut=a.aH(xe.glyphDependencies,dt=>Object.keys(dt).map(Number));this.inFlightDependencies.forEach(dt=>dt==null?void 0:dt.cancel()),this.inFlightDependencies=[];const Mt=++this.dependencySentinel;Object.keys(ut).length?this.inFlightDependencies.push(J.send("getGlyphs",{uid:this.uid,stacks:ut,source:this.source,tileID:this.tileID,type:"glyphs"},(dt,Lt)=>{Mt===this.dependencySentinel&&(Le||(Le=dt,Ae=Lt,tt.call(this)))})):Ae={};const Oe=Object.keys(xe.iconDependencies);Oe.length?this.inFlightDependencies.push(J.send("getImages",{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"},(dt,Lt)=>{Mt===this.dependencySentinel&&(Le||(Le=dt,ot=Lt,tt.call(this)))})):ot={};const $e=Object.keys(xe.patternDependencies);function tt(){if(Le)return ne(Le);if(Ae&&ot&&ht){const dt=new m(Ae),Lt=new a.bp(ot,ht);for(const yr in se){const sr=se[yr];sr instanceof a.a4?(C(sr.layers,this.zoom,U),a.bq({bucket:sr,glyphMap:Ae,glyphPositions:dt.positions,imageMap:ot,imagePositions:Lt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):sr.hasPattern&&(sr instanceof a.br||sr instanceof a.bs||sr instanceof a.bt)&&(C(sr.layers,this.zoom,U),sr.addFeatures(xe,this.tileID.canonical,Lt.patternPositions))}this.status="done",ne(null,{buckets:Object.values(se).filter(yr=>!yr.isEmpty()),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dt.image,imageAtlas:Lt,glyphMap:this.returnDependencies?Ae:null,iconMap:this.returnDependencies?ot:null,glyphPositions:this.returnDependencies?dt.positions:null})}}$e.length?this.inFlightDependencies.push(J.send("getImages",{icons:$e,source:this.source,tileID:this.tileID,type:"patterns"},(dt,Lt)=>{Mt===this.dependencySentinel&&(Le||(Le=dt,ht=Lt,tt.call(this)))})):ht={},tt.call(this)}}function C(ue,Y,ee){const U=new a.a8(Y);for(const J of ue)J.recalculate(U,ee)}function T(ue,Y){const ee=a.l(ue.request,(U,J,ne,de)=>{if(U)Y(U);else if(J)try{const pe=new a.bw.VectorTile(new a.bv(J));Y(null,{vectorTile:pe,rawData:J,cacheControl:ne,expires:de})}catch(pe){const se=new Uint8Array(J);let xe=`Unable to parse the tile at ${ue.request.url}, `;xe+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.messge}`,Y(new Error(xe))}});return()=>{ee.cancel(),Y()}}class P{constructor(Y,ee,U,J){this.actor=Y,this.layerIndex=ee,this.availableImages=U,this.loadVectorData=J||T,this.fetching={},this.loading={},this.loaded={}}loadTile(Y,ee){const U=Y.uid;this.loading||(this.loading={});const J=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.bu(Y.request),ne=this.loading[U]=new w(Y);ne.abort=this.loadVectorData(Y,(de,pe)=>{if(delete this.loading[U],de||!pe)return ne.status="done",this.loaded[U]=ne,ee(de);const se=pe.rawData,xe={};pe.expires&&(xe.expires=pe.expires),pe.cacheControl&&(xe.cacheControl=pe.cacheControl);const Pe={};if(J){const Le=J.finish();Le&&(Pe.resourceTiming=JSON.parse(JSON.stringify(Le)))}ne.vectorTile=pe.vectorTile,ne.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Le,Ae)=>{if(delete this.fetching[U],Le||!Ae)return ee(Le);ee(null,a.e({rawTileData:se.slice(0)},Ae,xe,Pe))}),this.loaded=this.loaded||{},this.loaded[U]=ne,this.fetching[U]={rawTileData:se,cacheControl:xe,resourceTiming:Pe}})}reloadTile(Y,ee){const U=this.loaded,J=Y.uid;if(U&&U[J]){const ne=U[J];ne.showCollisionBoxes=Y.showCollisionBoxes,ne.status==="parsing"?ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(de,pe)=>{if(de||!pe)return ee(de,pe);let se;if(this.fetching[J]){const{rawTileData:xe,cacheControl:Pe,resourceTiming:Le}=this.fetching[J];delete this.fetching[J],se=a.e({rawTileData:xe.slice(0)},pe,Pe,Le)}else se=pe;ee(null,se)}):ne.status==="done"&&(ne.vectorTile?ne.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,ee):ee())}}abortTile(Y,ee){const U=this.loading,J=Y.uid;U&&U[J]&&U[J].abort&&(U[J].abort(),delete U[J]),ee()}removeTile(Y,ee){const U=this.loaded,J=Y.uid;U&&U[J]&&delete U[J],ee()}}class R{constructor(){this.loaded={}}loadTile(Y,ee){return a._(this,void 0,void 0,function*(){const{uid:U,encoding:J,rawImageData:ne,redFactor:de,greenFactor:pe,blueFactor:se,baseShift:xe}=Y,Pe=ne.width+2,Le=ne.height+2,Ae=a.a(ne)?new a.R({width:Pe,height:Le},yield a.bx(ne,-1,-1,Pe,Le)):ne,ot=new a.by(U,Ae,J,de,pe,se,xe);this.loaded=this.loaded||{},this.loaded[U]=ot,ee(null,ot)})}removeTile(Y){const ee=this.loaded,U=Y.uid;ee&&ee[U]&&delete ee[U]}}function $(ue,Y){if(ue.length!==0){H(ue[0],Y);for(var ee=1;ee<ue.length;ee++)H(ue[ee],!Y)}}function H(ue,Y){for(var ee=0,U=0,J=0,ne=ue.length,de=ne-1;J<ne;de=J++){var pe=(ue[J][0]-ue[de][0])*(ue[de][1]+ue[J][1]),se=ee+pe;U+=Math.abs(ee)>=Math.abs(pe)?ee-se+pe:pe-se+ee,ee=se}ee+U>=0!=!!Y&&ue.reverse()}var D=a.bz(function ue(Y,ee){var U,J=Y&&Y.type;if(J==="FeatureCollection")for(U=0;U<Y.features.length;U++)ue(Y.features[U],ee);else if(J==="GeometryCollection")for(U=0;U<Y.geometries.length;U++)ue(Y.geometries[U],ee);else if(J==="Feature")ue(Y.geometry,ee);else if(J==="Polygon")$(Y.coordinates,ee);else if(J==="MultiPolygon")for(U=0;U<Y.coordinates.length;U++)$(Y.coordinates[U],ee);return Y});const O=a.bw.VectorTileFeature.prototype.toGeoJSON;var L={exports:{}},Q=a.bA,V=a.bw.VectorTileFeature,F=X;function X(ue,Y){this.options=Y||{},this.features=ue,this.length=ue.length}function re(ue,Y){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=Y||4096}X.prototype.feature=function(ue){return new re(this.features[ue],this.options.extent)},re.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var Y=0;Y<ue.length;Y++){for(var ee=ue[Y],U=[],J=0;J<ee.length;J++)U.push(new Q(ee[J][0],ee[J][1]));this.geometry.push(U)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,Y=1/0,ee=-1/0,U=1/0,J=-1/0,ne=0;ne<ue.length;ne++)for(var de=ue[ne],pe=0;pe<de.length;pe++){var se=de[pe];Y=Math.min(Y,se.x),ee=Math.max(ee,se.x),U=Math.min(U,se.y),J=Math.max(J,se.y)}return[Y,U,ee,J]},re.prototype.toGeoJSON=V.prototype.toGeoJSON;var ye=a.bB,me=F;function we(ue){var Y=new ye;return function(ee,U){for(var J in ee.layers)U.writeMessage(3,ke,ee.layers[J])}(ue,Y),Y.finish()}function ke(ue,Y){var ee;Y.writeVarintField(15,ue.version||1),Y.writeStringField(1,ue.name||""),Y.writeVarintField(5,ue.extent||4096);var U={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<ue.length;ee++)U.feature=ue.feature(ee),Y.writeMessage(2,Ie,U);var J=U.keys;for(ee=0;ee<J.length;ee++)Y.writeStringField(3,J[ee]);var ne=U.values;for(ee=0;ee<ne.length;ee++)Y.writeMessage(4,Ce,ne[ee])}function Ie(ue,Y){var ee=ue.feature;ee.id!==void 0&&Y.writeVarintField(1,ee.id),Y.writeMessage(2,qe,ue),Y.writeVarintField(3,ee.type),Y.writeMessage(4,Fe,ee)}function qe(ue,Y){var ee=ue.feature,U=ue.keys,J=ue.values,ne=ue.keycache,de=ue.valuecache;for(var pe in ee.properties){var se=ee.properties[pe],xe=ne[pe];if(se!==null){xe===void 0&&(U.push(pe),ne[pe]=xe=U.length-1),Y.writeVarint(xe);var Pe=typeof se;Pe!=="string"&&Pe!=="boolean"&&Pe!=="number"&&(se=JSON.stringify(se));var Le=Pe+":"+se,Ae=de[Le];Ae===void 0&&(J.push(se),de[Le]=Ae=J.length-1),Y.writeVarint(Ae)}}}function Re(ue,Y){return(Y<<3)+(7&ue)}function Se(ue){return ue<<1^ue>>31}function Fe(ue,Y){for(var ee=ue.loadGeometry(),U=ue.type,J=0,ne=0,de=ee.length,pe=0;pe<de;pe++){var se=ee[pe],xe=1;U===1&&(xe=se.length),Y.writeVarint(Re(1,xe));for(var Pe=U===3?se.length-1:se.length,Le=0;Le<Pe;Le++){Le===1&&U!==1&&Y.writeVarint(Re(2,Pe-1));var Ae=se[Le].x-J,ot=se[Le].y-ne;Y.writeVarint(Se(Ae)),Y.writeVarint(Se(ot)),J+=Ae,ne+=ot}U===3&&Y.writeVarint(Re(7,1))}}function Ce(ue,Y){var ee=typeof ue;ee==="string"?Y.writeStringField(1,ue):ee==="boolean"?Y.writeBooleanField(7,ue):ee==="number"&&(ue%1!=0?Y.writeDoubleField(3,ue):ue<0?Y.writeSVarintField(6,ue):Y.writeVarintField(5,ue))}L.exports=we,L.exports.fromVectorTileJs=we,L.exports.fromGeojsonVt=function(ue,Y){Y=Y||{};var ee={};for(var U in ue)ee[U]=new me(ue[U].features,Y),ee[U].name=U,ee[U].version=Y.version,ee[U].extent=Y.extent;return we({layers:ee})},L.exports.GeoJSONWrapper=me;var Ne=a.bz(L.exports);const Je={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},at=Math.fround||(st=new Float32Array(1),ue=>(st[0]=+ue,st[0]));var st;const Dt=3,Ct=5,Bt=6;class Tt{constructor(Y){this.options=Object.assign(Object.create(Je),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:ee,minZoom:U,maxZoom:J}=this.options;ee&&console.time("total time");const ne=`prepare ${Y.length} points`;ee&&console.time(ne),this.points=Y;const de=[];for(let se=0;se<Y.length;se++){const xe=Y[se];if(!xe.geometry)continue;const[Pe,Le]=xe.geometry.coordinates,Ae=at(rt(Pe)),ot=at(pt(Le));de.push(Ae,ot,1/0,se,-1,1),this.options.reduce&&de.push(0)}let pe=this.trees[J+1]=this._createTree(de);ee&&console.timeEnd(ne);for(let se=J;se>=U;se--){const xe=+Date.now();pe=this.trees[se]=this._createTree(this._cluster(pe,se)),ee&&console.log("z%d: %d clusters in %dms",se,pe.numItems,+Date.now()-xe)}return ee&&console.timeEnd("total time"),this}getClusters(Y,ee){let U=((Y[0]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,Y[1]));let ne=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)U=-180,ne=180;else if(U>ne){const Le=this.getClusters([U,J,180,de],ee),Ae=this.getClusters([-180,J,ne,de],ee);return Le.concat(Ae)}const pe=this.trees[this._limitZoom(ee)],se=pe.range(rt(U),pt(de),rt(ne),pt(J)),xe=pe.data,Pe=[];for(const Le of se){const Ae=this.stride*Le;Pe.push(xe[Ae+Ct]>1?it(xe,Ae,this.clusterProps):this.points[xe[Ae+Dt]])}return Pe}getChildren(Y){const ee=this._getOriginId(Y),U=this._getOriginZoom(Y),J="No cluster with the specified id.",ne=this.trees[U];if(!ne)throw new Error(J);const de=ne.data;if(ee*this.stride>=de.length)throw new Error(J);const pe=this.options.radius/(this.options.extent*Math.pow(2,U-1)),se=ne.within(de[ee*this.stride],de[ee*this.stride+1],pe),xe=[];for(const Pe of se){const Le=Pe*this.stride;de[Le+4]===Y&&xe.push(de[Le+Ct]>1?it(de,Le,this.clusterProps):this.points[de[Le+Dt]])}if(xe.length===0)throw new Error(J);return xe}getLeaves(Y,ee,U){const J=[];return this._appendLeaves(J,Y,ee=ee||10,U=U||0,0),J}getTile(Y,ee,U){const J=this.trees[this._limitZoom(Y)],ne=Math.pow(2,Y),{extent:de,radius:pe}=this.options,se=pe/de,xe=(U-se)/ne,Pe=(U+1+se)/ne,Le={features:[]};return this._addTileFeatures(J.range((ee-se)/ne,xe,(ee+1+se)/ne,Pe),J.data,ee,U,ne,Le),ee===0&&this._addTileFeatures(J.range(1-se/ne,xe,1,Pe),J.data,ne,U,ne,Le),ee===ne-1&&this._addTileFeatures(J.range(0,xe,se/ne,Pe),J.data,-1,U,ne,Le),Le.features.length?Le:null}getClusterExpansionZoom(Y){let ee=this._getOriginZoom(Y)-1;for(;ee<=this.options.maxZoom;){const U=this.getChildren(Y);if(ee++,U.length!==1)break;Y=U[0].properties.cluster_id}return ee}_appendLeaves(Y,ee,U,J,ne){const de=this.getChildren(ee);for(const pe of de){const se=pe.properties;if(se&&se.cluster?ne+se.point_count<=J?ne+=se.point_count:ne=this._appendLeaves(Y,se.cluster_id,U,J,ne):ne<J?ne++:Y.push(pe),Y.length===U)break}return ne}_createTree(Y){const ee=new a.av(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let U=0;U<Y.length;U+=this.stride)ee.add(Y[U],Y[U+1]);return ee.finish(),ee.data=Y,ee}_addTileFeatures(Y,ee,U,J,ne,de){for(const pe of Y){const se=pe*this.stride,xe=ee[se+Ct]>1;let Pe,Le,Ae;if(xe)Pe=Ze(ee,se,this.clusterProps),Le=ee[se],Ae=ee[se+1];else{const ut=this.points[ee[se+Dt]];Pe=ut.properties;const[Mt,Oe]=ut.geometry.coordinates;Le=rt(Mt),Ae=pt(Oe)}const ot={type:1,geometry:[[Math.round(this.options.extent*(Le*ne-U)),Math.round(this.options.extent*(Ae*ne-J))]],tags:Pe};let ht;ht=xe||this.options.generateId?ee[se+Dt]:this.points[ee[se+Dt]].id,ht!==void 0&&(ot.id=ht),de.features.push(ot)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,ee){const{radius:U,extent:J,reduce:ne,minPoints:de}=this.options,pe=U/(J*Math.pow(2,ee)),se=Y.data,xe=[],Pe=this.stride;for(let Le=0;Le<se.length;Le+=Pe){if(se[Le+2]<=ee)continue;se[Le+2]=ee;const Ae=se[Le],ot=se[Le+1],ht=Y.within(se[Le],se[Le+1],pe),ut=se[Le+Ct];let Mt=ut;for(const Oe of ht){const $e=Oe*Pe;se[$e+2]>ee&&(Mt+=se[$e+Ct])}if(Mt>ut&&Mt>=de){let Oe,$e=Ae*ut,tt=ot*ut,dt=-1;const Lt=((Le/Pe|0)<<5)+(ee+1)+this.points.length;for(const yr of ht){const sr=yr*Pe;if(se[sr+2]<=ee)continue;se[sr+2]=ee;const Wr=se[sr+Ct];$e+=se[sr]*Wr,tt+=se[sr+1]*Wr,se[sr+4]=Lt,ne&&(Oe||(Oe=this._map(se,Le,!0),dt=this.clusterProps.length,this.clusterProps.push(Oe)),ne(Oe,this._map(se,sr)))}se[Le+4]=Lt,xe.push($e/Mt,tt/Mt,1/0,Lt,-1,Mt),ne&&xe.push(dt)}else{for(let Oe=0;Oe<Pe;Oe++)xe.push(se[Le+Oe]);if(Mt>1)for(const Oe of ht){const $e=Oe*Pe;if(!(se[$e+2]<=ee)){se[$e+2]=ee;for(let tt=0;tt<Pe;tt++)xe.push(se[$e+tt])}}}}return xe}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,ee,U){if(Y[ee+Ct]>1){const de=this.clusterProps[Y[ee+Bt]];return U?Object.assign({},de):de}const J=this.points[Y[ee+Dt]].properties,ne=this.options.map(J);return U&&ne===J?Object.assign({},ne):ne}}function it(ue,Y,ee){return{type:"Feature",id:ue[Y+Dt],properties:Ze(ue,Y,ee),geometry:{type:"Point",coordinates:[(U=ue[Y],360*(U-.5)),ur(ue[Y+1])]}};var U}function Ze(ue,Y,ee){const U=ue[Y+Ct],J=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U,ne=ue[Y+Bt],de=ne===-1?{}:Object.assign({},ee[ne]);return Object.assign(de,{cluster:!0,cluster_id:ue[Y+Dt],point_count:U,point_count_abbreviated:J})}function rt(ue){return ue/360+.5}function pt(ue){const Y=Math.sin(ue*Math.PI/180),ee=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ee<0?0:ee>1?1:ee}function ur(ue){const Y=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function or(ue,Y,ee,U){for(var J,ne=U,de=ee-Y>>1,pe=ee-Y,se=ue[Y],xe=ue[Y+1],Pe=ue[ee],Le=ue[ee+1],Ae=Y+3;Ae<ee;Ae+=3){var ot=Er(ue[Ae],ue[Ae+1],se,xe,Pe,Le);if(ot>ne)J=Ae,ne=ot;else if(ot===ne){var ht=Math.abs(Ae-de);ht<pe&&(J=Ae,pe=ht)}}ne>U&&(J-Y>3&&or(ue,Y,J,U),ue[J+2]=ne,ee-J>3&&or(ue,J,ee,U))}function Er(ue,Y,ee,U,J,ne){var de=J-ee,pe=ne-U;if(de!==0||pe!==0){var se=((ue-ee)*de+(Y-U)*pe)/(de*de+pe*pe);se>1?(ee=J,U=ne):se>0&&(ee+=de*se,U+=pe*se)}return(de=ue-ee)*de+(pe=Y-U)*pe}function jr(ue,Y,ee,U){var J={id:ue===void 0?null:ue,type:Y,geometry:ee,tags:U,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ne){var de=ne.geometry,pe=ne.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")ar(ne,de);else if(pe==="Polygon"||pe==="MultiLineString")for(var se=0;se<de.length;se++)ar(ne,de[se]);else if(pe==="MultiPolygon")for(se=0;se<de.length;se++)for(var xe=0;xe<de[se].length;xe++)ar(ne,de[se][xe])}(J),J}function ar(ue,Y){for(var ee=0;ee<Y.length;ee+=3)ue.minX=Math.min(ue.minX,Y[ee]),ue.minY=Math.min(ue.minY,Y[ee+1]),ue.maxX=Math.max(ue.maxX,Y[ee]),ue.maxY=Math.max(ue.maxY,Y[ee+1])}function It(ue,Y,ee,U){if(Y.geometry){var J=Y.geometry.coordinates,ne=Y.geometry.type,de=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2),pe=[],se=Y.id;if(ee.promoteId?se=Y.properties[ee.promoteId]:ee.generateId&&(se=U||0),ne==="Point")gr(J,pe);else if(ne==="MultiPoint")for(var xe=0;xe<J.length;xe++)gr(J[xe],pe);else if(ne==="LineString")Wt(J,pe,de,!1);else if(ne==="MultiLineString"){if(ee.lineMetrics){for(xe=0;xe<J.length;xe++)Wt(J[xe],pe=[],de,!1),ue.push(jr(se,"LineString",pe,Y.properties));return}Br(J,pe,de,!1)}else if(ne==="Polygon")Br(J,pe,de,!0);else{if(ne!=="MultiPolygon"){if(ne==="GeometryCollection"){for(xe=0;xe<Y.geometry.geometries.length;xe++)It(ue,{id:se,geometry:Y.geometry.geometries[xe],properties:Y.properties},ee,U);return}throw new Error("Input data is not a valid GeoJSON object.")}for(xe=0;xe<J.length;xe++){var Pe=[];Br(J[xe],Pe,de,!0),pe.push(Pe)}}ue.push(jr(se,ne,pe,Y.properties))}}function gr(ue,Y){Y.push(He(ue[0])),Y.push(Cr(ue[1])),Y.push(0)}function Wt(ue,Y,ee,U){for(var J,ne,de=0,pe=0;pe<ue.length;pe++){var se=He(ue[pe][0]),xe=Cr(ue[pe][1]);Y.push(se),Y.push(xe),Y.push(0),pe>0&&(de+=U?(J*xe-se*ne)/2:Math.sqrt(Math.pow(se-J,2)+Math.pow(xe-ne,2))),J=se,ne=xe}var Pe=Y.length-3;Y[2]=1,or(Y,0,Pe,ee),Y[Pe+2]=1,Y.size=Math.abs(de),Y.start=0,Y.end=Y.size}function Br(ue,Y,ee,U){for(var J=0;J<ue.length;J++){var ne=[];Wt(ue[J],ne,ee,U),Y.push(ne)}}function He(ue){return ue/360+.5}function Cr(ue){var Y=Math.sin(ue*Math.PI/180),ee=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ee<0?0:ee>1?1:ee}function Rr(ue,Y,ee,U,J,ne,de,pe){if(U/=Y,ne>=(ee/=Y)&&de<U)return ue;if(de<ee||ne>=U)return null;for(var se=[],xe=0;xe<ue.length;xe++){var Pe=ue[xe],Le=Pe.geometry,Ae=Pe.type,ot=J===0?Pe.minX:Pe.minY,ht=J===0?Pe.maxX:Pe.maxY;if(ot>=ee&&ht<U)se.push(Pe);else if(!(ht<ee||ot>=U)){var ut=[];if(Ae==="Point"||Ae==="MultiPoint")tr(Le,ut,ee,U,J);else if(Ae==="LineString")lr(Le,ut,ee,U,J,!1,pe.lineMetrics);else if(Ae==="MultiLineString")Fr(Le,ut,ee,U,J,!1);else if(Ae==="Polygon")Fr(Le,ut,ee,U,J,!0);else if(Ae==="MultiPolygon")for(var Mt=0;Mt<Le.length;Mt++){var Oe=[];Fr(Le[Mt],Oe,ee,U,J,!0),Oe.length&&ut.push(Oe)}if(ut.length){if(pe.lineMetrics&&Ae==="LineString"){for(Mt=0;Mt<ut.length;Mt++)se.push(jr(Pe.id,Ae,ut[Mt],Pe.tags));continue}Ae!=="LineString"&&Ae!=="MultiLineString"||(ut.length===1?(Ae="LineString",ut=ut[0]):Ae="MultiLineString"),Ae!=="Point"&&Ae!=="MultiPoint"||(Ae=ut.length===3?"Point":"MultiPoint"),se.push(jr(Pe.id,Ae,ut,Pe.tags))}}}return se.length?se:null}function tr(ue,Y,ee,U,J){for(var ne=0;ne<ue.length;ne+=3){var de=ue[ne+J];de>=ee&&de<=U&&(Y.push(ue[ne]),Y.push(ue[ne+1]),Y.push(ue[ne+2]))}}function lr(ue,Y,ee,U,J,ne,de){for(var pe,se,xe=Pr(ue),Pe=J===0?vr:rr,Le=ue.start,Ae=0;Ae<ue.length-3;Ae+=3){var ot=ue[Ae],ht=ue[Ae+1],ut=ue[Ae+2],Mt=ue[Ae+3],Oe=ue[Ae+4],$e=J===0?ot:ht,tt=J===0?Mt:Oe,dt=!1;de&&(pe=Math.sqrt(Math.pow(ot-Mt,2)+Math.pow(ht-Oe,2))),$e<ee?tt>ee&&(se=Pe(xe,ot,ht,Mt,Oe,ee),de&&(xe.start=Le+pe*se)):$e>U?tt<U&&(se=Pe(xe,ot,ht,Mt,Oe,U),de&&(xe.start=Le+pe*se)):Ir(xe,ot,ht,ut),tt<ee&&$e>=ee&&(se=Pe(xe,ot,ht,Mt,Oe,ee),dt=!0),tt>U&&$e<=U&&(se=Pe(xe,ot,ht,Mt,Oe,U),dt=!0),!ne&&dt&&(de&&(xe.end=Le+pe*se),Y.push(xe),xe=Pr(ue)),de&&(Le+=pe)}var Lt=ue.length-3;ot=ue[Lt],ht=ue[Lt+1],ut=ue[Lt+2],($e=J===0?ot:ht)>=ee&&$e<=U&&Ir(xe,ot,ht,ut),Lt=xe.length-3,ne&&Lt>=3&&(xe[Lt]!==xe[0]||xe[Lt+1]!==xe[1])&&Ir(xe,xe[0],xe[1],xe[2]),xe.length&&Y.push(xe)}function Pr(ue){var Y=[];return Y.size=ue.size,Y.start=ue.start,Y.end=ue.end,Y}function Fr(ue,Y,ee,U,J,ne){for(var de=0;de<ue.length;de++)lr(ue[de],Y,ee,U,J,ne,!1)}function Ir(ue,Y,ee,U){ue.push(Y),ue.push(ee),ue.push(U)}function vr(ue,Y,ee,U,J,ne){var de=(ne-Y)/(U-Y);return ue.push(ne),ue.push(ee+(J-ee)*de),ue.push(1),de}function rr(ue,Y,ee,U,J,ne){var de=(ne-ee)/(J-ee);return ue.push(Y+(U-Y)*de),ue.push(ne),ue.push(1),de}function mr(ue,Y){for(var ee=[],U=0;U<ue.length;U++){var J,ne=ue[U],de=ne.type;if(de==="Point"||de==="MultiPoint"||de==="LineString")J=ln(ne.geometry,Y);else if(de==="MultiLineString"||de==="Polygon"){J=[];for(var pe=0;pe<ne.geometry.length;pe++)J.push(ln(ne.geometry[pe],Y))}else if(de==="MultiPolygon")for(J=[],pe=0;pe<ne.geometry.length;pe++){for(var se=[],xe=0;xe<ne.geometry[pe].length;xe++)se.push(ln(ne.geometry[pe][xe],Y));J.push(se)}ee.push(jr(ne.id,de,J,ne.tags))}return ee}function ln(ue,Y){var ee=[];ee.size=ue.size,ue.start!==void 0&&(ee.start=ue.start,ee.end=ue.end);for(var U=0;U<ue.length;U+=3)ee.push(ue[U]+Y,ue[U+1],ue[U+2]);return ee}function je(ue,Y){if(ue.transformed)return ue;var ee,U,J,ne=1<<ue.z,de=ue.x,pe=ue.y;for(ee=0;ee<ue.features.length;ee++){var se=ue.features[ee],xe=se.geometry,Pe=se.type;if(se.geometry=[],Pe===1)for(U=0;U<xe.length;U+=2)se.geometry.push(kt(xe[U],xe[U+1],Y,ne,de,pe));else for(U=0;U<xe.length;U++){var Le=[];for(J=0;J<xe[U].length;J+=2)Le.push(kt(xe[U][J],xe[U][J+1],Y,ne,de,pe));se.geometry.push(Le)}}return ue.transformed=!0,ue}function kt(ue,Y,ee,U,J,ne){return[Math.round(ee*(ue*U-J)),Math.round(ee*(Y*U-ne))]}function wt(ue,Y,ee,U,J){for(var ne=Y===J.maxZoom?0:J.tolerance/((1<<Y)*J.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ee,y:U,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<ue.length;pe++){de.numFeatures++,Ee(de,ue[pe],ne,J);var se=ue[pe].minX,xe=ue[pe].minY,Pe=ue[pe].maxX,Le=ue[pe].maxY;se<de.minX&&(de.minX=se),xe<de.minY&&(de.minY=xe),Pe>de.maxX&&(de.maxX=Pe),Le>de.maxY&&(de.maxY=Le)}return de}function Ee(ue,Y,ee,U){var J=Y.geometry,ne=Y.type,de=[];if(ne==="Point"||ne==="MultiPoint")for(var pe=0;pe<J.length;pe+=3)de.push(J[pe]),de.push(J[pe+1]),ue.numPoints++,ue.numSimplified++;else if(ne==="LineString")Ve(de,J,ue,ee,!1,!1);else if(ne==="MultiLineString"||ne==="Polygon")for(pe=0;pe<J.length;pe++)Ve(de,J[pe],ue,ee,ne==="Polygon",pe===0);else if(ne==="MultiPolygon")for(var se=0;se<J.length;se++){var xe=J[se];for(pe=0;pe<xe.length;pe++)Ve(de,xe[pe],ue,ee,!0,pe===0)}if(de.length){var Pe=Y.tags||null;if(ne==="LineString"&&U.lineMetrics){for(var Le in Pe={},Y.tags)Pe[Le]=Y.tags[Le];Pe.mapbox_clip_start=J.start/J.size,Pe.mapbox_clip_end=J.end/J.size}var Ae={geometry:de,type:ne==="Polygon"||ne==="MultiPolygon"?3:ne==="LineString"||ne==="MultiLineString"?2:1,tags:Pe};Y.id!==null&&(Ae.id=Y.id),ue.features.push(Ae)}}function Ve(ue,Y,ee,U,J,ne){var de=U*U;if(U>0&&Y.size<(J?de:U))ee.numPoints+=Y.length/3;else{for(var pe=[],se=0;se<Y.length;se+=3)(U===0||Y[se+2]>de)&&(ee.numSimplified++,pe.push(Y[se]),pe.push(Y[se+1])),ee.numPoints++;J&&function(xe,Pe){for(var Le=0,Ae=0,ot=xe.length,ht=ot-2;Ae<ot;ht=Ae,Ae+=2)Le+=(xe[Ae]-xe[ht])*(xe[Ae+1]+xe[ht+1]);if(Le>0===Pe)for(Ae=0,ot=xe.length;Ae<ot/2;Ae+=2){var ut=xe[Ae],Mt=xe[Ae+1];xe[Ae]=xe[ot-2-Ae],xe[Ae+1]=xe[ot-1-Ae],xe[ot-2-Ae]=ut,xe[ot-1-Ae]=Mt}}(pe,ne),ue.push(pe)}}function Xe(ue,Y){var ee=(Y=this.options=function(J,ne){for(var de in ne)J[de]=ne[de];return J}(Object.create(this.options),Y)).debug;if(ee&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var U=function(J,ne){var de=[];if(J.type==="FeatureCollection")for(var pe=0;pe<J.features.length;pe++)It(de,J.features[pe],ne,pe);else It(de,J.type==="Feature"?J:{geometry:J},ne);return de}(ue,Y);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),U=function(J,ne){var de=ne.buffer/ne.extent,pe=J,se=Rr(J,1,-1-de,de,0,-1,2,ne),xe=Rr(J,1,1-de,2+de,0,-1,2,ne);return(se||xe)&&(pe=Rr(J,1,-de,1+de,0,-1,2,ne)||[],se&&(pe=mr(se,1).concat(pe)),xe&&(pe=pe.concat(mr(xe,-1)))),pe}(U,Y),U.length&&this.splitTile(U,0,0,0),ee&&(U.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Et(ue,Y,ee){return 32*((1<<ue)*ee+Y)+ue}function vt(ue,Y){return Y?ue.properties[Y]:ue.id}function Rt(ue,Y){if(ue==null)return!0;if(ue.type==="Feature")return vt(ue,Y)!=null;if(ue.type==="FeatureCollection"){const ee=new Set;for(const U of ue.features){const J=vt(U,Y);if(J==null||ee.has(J))return!1;ee.add(J)}return!0}return!1}function br(ue,Y){const ee=new Map;if(ue!=null)if(ue.type==="Feature")ee.set(vt(ue,Y),ue);else for(const U of ue.features)ee.set(vt(U,Y),U);return ee}Xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Xe.prototype.splitTile=function(ue,Y,ee,U,J,ne,de){for(var pe=[ue,Y,ee,U],se=this.options,xe=se.debug;pe.length;){U=pe.pop(),ee=pe.pop(),Y=pe.pop(),ue=pe.pop();var Pe=1<<Y,Le=Et(Y,ee,U),Ae=this.tiles[Le];if(!Ae&&(xe>1&&console.time("creation"),Ae=this.tiles[Le]=wt(ue,Y,ee,U,se),this.tileCoords.push({z:Y,x:ee,y:U}),xe)){xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,ee,U,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));var ot="z"+Y;this.stats[ot]=(this.stats[ot]||0)+1,this.total++}if(Ae.source=ue,J){if(Y===se.maxZoom||Y===J)continue;var ht=1<<J-Y;if(ee!==Math.floor(ne/ht)||U!==Math.floor(de/ht))continue}else if(Y===se.indexMaxZoom||Ae.numPoints<=se.indexMaxPoints)continue;if(Ae.source=null,ue.length!==0){xe>1&&console.time("clipping");var ut,Mt,Oe,$e,tt,dt,Lt=.5*se.buffer/se.extent,yr=.5-Lt,sr=.5+Lt,Wr=1+Lt;ut=Mt=Oe=$e=null,tt=Rr(ue,Pe,ee-Lt,ee+sr,0,Ae.minX,Ae.maxX,se),dt=Rr(ue,Pe,ee+yr,ee+Wr,0,Ae.minX,Ae.maxX,se),ue=null,tt&&(ut=Rr(tt,Pe,U-Lt,U+sr,1,Ae.minY,Ae.maxY,se),Mt=Rr(tt,Pe,U+yr,U+Wr,1,Ae.minY,Ae.maxY,se),tt=null),dt&&(Oe=Rr(dt,Pe,U-Lt,U+sr,1,Ae.minY,Ae.maxY,se),$e=Rr(dt,Pe,U+yr,U+Wr,1,Ae.minY,Ae.maxY,se),dt=null),xe>1&&console.timeEnd("clipping"),pe.push(ut||[],Y+1,2*ee,2*U),pe.push(Mt||[],Y+1,2*ee,2*U+1),pe.push(Oe||[],Y+1,2*ee+1,2*U),pe.push($e||[],Y+1,2*ee+1,2*U+1)}}},Xe.prototype.getTile=function(ue,Y,ee){var U=this.options,J=U.extent,ne=U.debug;if(ue<0||ue>24)return null;var de=1<<ue,pe=Et(ue,Y=(Y%de+de)%de,ee);if(this.tiles[pe])return je(this.tiles[pe],J);ne>1&&console.log("drilling down to z%d-%d-%d",ue,Y,ee);for(var se,xe=ue,Pe=Y,Le=ee;!se&&xe>0;)xe--,Pe=Math.floor(Pe/2),Le=Math.floor(Le/2),se=this.tiles[Et(xe,Pe,Le)];return se&&se.source?(ne>1&&console.log("found parent tile z%d-%d-%d",xe,Pe,Le),ne>1&&console.time("drilling down"),this.splitTile(se.source,xe,Pe,Le,ue,Y,ee),ne>1&&console.timeEnd("drilling down"),this.tiles[pe]?je(this.tiles[pe],J):null):null};class Ft extends P{constructor(Y,ee,U,J){super(Y,ee,U),this._dataUpdateable=new Map,this.loadGeoJSON=(ne,de)=>{const{promoteId:pe}=ne;if(ne.request)return a.f(ne.request,(se,xe,Pe,Le)=>{this._dataUpdateable=Rt(xe,pe)?br(xe,pe):void 0,de(se,xe,Pe,Le)});if(typeof ne.data=="string")try{const se=JSON.parse(ne.data);this._dataUpdateable=Rt(se,pe)?br(se,pe):void 0,de(null,se)}catch{de(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`))}else ne.dataDiff?this._dataUpdateable?(function(se,xe,Pe){var Le,Ae,ot,ht;if(xe.removeAll&&se.clear(),xe.remove)for(const ut of xe.remove)se.delete(ut);if(xe.add)for(const ut of xe.add){const Mt=vt(ut,Pe);Mt!=null&&se.set(Mt,ut)}if(xe.update)for(const ut of xe.update){let Mt=se.get(ut.id);if(Mt==null)continue;const Oe=!ut.removeAllProperties&&(((Le=ut.removeProperties)===null||Le===void 0?void 0:Le.length)>0||((Ae=ut.addOrUpdateProperties)===null||Ae===void 0?void 0:Ae.length)>0);if((ut.newGeometry||ut.removeAllProperties||Oe)&&(Mt=Object.assign({},Mt),se.set(ut.id,Mt),Oe&&(Mt.properties=Object.assign({},Mt.properties))),ut.newGeometry&&(Mt.geometry=ut.newGeometry),ut.removeAllProperties)Mt.properties={};else if(((ot=ut.removeProperties)===null||ot===void 0?void 0:ot.length)>0)for(const $e of ut.removeProperties)Object.prototype.hasOwnProperty.call(Mt.properties,$e)&&delete Mt.properties[$e];if(((ht=ut.addOrUpdateProperties)===null||ht===void 0?void 0:ht.length)>0)for(const{key:$e,value:tt}of ut.addOrUpdateProperties)Mt.properties[$e]=tt}}(this._dataUpdateable,ne.dataDiff,pe),de(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):de(new Error(`Cannot update existing geojson data in ${ne.source}`)):de(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,J&&(this.loadGeoJSON=J)}loadGeoJSONTile(Y,ee){const U=Y.tileID.canonical;if(!this._geoJSONIndex)return ee(null,null);const J=this._geoJSONIndex.getTile(U.z,U.x,U.y);if(!J)return ee(null,null);const ne=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.N,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(se){this._feature=se,this.extent=a.N,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const xe of this._feature.geometry)se.push([new a.P(xe[0],xe[1])]);return se}{const se=[];for(const xe of this._feature.geometry){const Pe=[];for(const Le of xe)Pe.push(new a.P(Le[0],Le[1]));se.push(Pe)}return se}}toGeoJSON(se,xe,Pe){return O.call(this,se,xe,Pe)}}(this._features[pe])}}(J.features);let de=Ne(ne);de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),ee(null,{vectorTile:ne,rawData:de.buffer})}loadData(Y,ee){var U;(U=this._pendingRequest)===null||U===void 0||U.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const J=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.bu(Y.request);this._pendingCallback=ee,this._pendingRequest=this.loadGeoJSON(Y,(ne,de)=>{if(delete this._pendingCallback,delete this._pendingRequest,ne||!de)return ee(ne);if(typeof de!="object")return ee(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{D(de,!0);try{if(Y.filter){const se=a.bC(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(Pe=>`${Pe.key}: ${Pe.message}`).join(", "));de={type:"FeatureCollection",features:de.features.filter(Pe=>se.value.evaluate({zoom:0},Pe))}}this._geoJSONIndex=Y.cluster?new Tt(function({superclusterOptions:se,clusterProperties:xe}){if(!xe||!se)return se;const Pe={},Le={},Ae={accumulated:null,zoom:0},ot={properties:null},ht=Object.keys(xe);for(const ut of ht){const[Mt,Oe]=xe[ut],$e=a.bC(Oe),tt=a.bC(typeof Mt=="string"?[Mt,["accumulated"],["get",ut]]:Mt);Pe[ut]=$e.value,Le[ut]=tt.value}return se.map=ut=>{ot.properties=ut;const Mt={};for(const Oe of ht)Mt[Oe]=Pe[Oe].evaluate(Ae,ot);return Mt},se.reduce=(ut,Mt)=>{ot.properties=Mt;for(const Oe of ht)Ae.accumulated=ut[Oe],ut[Oe]=Le[Oe].evaluate(Ae,ot)},se}(Y)).load(de.features):function(se,xe){return new Xe(se,xe)}(de,Y.geojsonVtOptions)}catch(se){return ee(se)}this.loaded={};const pe={};if(J){const se=J.finish();se&&(pe.resourceTiming={},pe.resourceTiming[Y.source]=JSON.parse(JSON.stringify(se)))}ee(null,pe)}})}reloadTile(Y,ee){const U=this.loaded;return U&&U[Y.uid]?super.reloadTile(Y,ee):this.loadTile(Y,ee)}removeSource(Y,ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ee()}getClusterExpansionZoom(Y,ee){try{ee(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(U){ee(U)}}getClusterChildren(Y,ee){try{ee(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(U){ee(U)}}getClusterLeaves(Y,ee){try{ee(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(U){ee(U)}}}class _r{constructor(Y){this.self=Y,this.actor=new a.C(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:P,geojson:Ft},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ee,U)=>{if(this.workerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.workerSourceTypes[ee]=U},this.self.registerRTLTextPlugin=ee=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.applyArabicShaping=ee.applyArabicShaping,a.bD.processBidirectionalText=ee.processBidirectionalText,a.bD.processStyledBidirectionalText=ee.processStyledBidirectionalText}}setReferrer(Y,ee){this.referrer=ee}setImages(Y,ee,U){this.availableImages[Y]=ee;for(const J in this.workerSources[Y]){const ne=this.workerSources[Y][J];for(const de in ne)ne[de].availableImages=ee}U()}setLayers(Y,ee,U){this.getLayerIndex(Y).replace(ee),U()}updateLayers(Y,ee,U){this.getLayerIndex(Y).update(ee.layers,ee.removedIds),U()}loadTile(Y,ee,U){this.getWorkerSource(Y,ee.type,ee.source).loadTile(ee,U)}loadDEMTile(Y,ee,U){this.getDEMWorkerSource(Y,ee.source).loadTile(ee,U)}reloadTile(Y,ee,U){this.getWorkerSource(Y,ee.type,ee.source).reloadTile(ee,U)}abortTile(Y,ee,U){this.getWorkerSource(Y,ee.type,ee.source).abortTile(ee,U)}removeTile(Y,ee,U){this.getWorkerSource(Y,ee.type,ee.source).removeTile(ee,U)}removeDEMTile(Y,ee){this.getDEMWorkerSource(Y,ee.source).removeTile(ee)}removeSource(Y,ee,U){if(!this.workerSources[Y]||!this.workerSources[Y][ee.type]||!this.workerSources[Y][ee.type][ee.source])return;const J=this.workerSources[Y][ee.type][ee.source];delete this.workerSources[Y][ee.type][ee.source],J.removeSource!==void 0?J.removeSource(ee,U):U()}loadWorkerSource(Y,ee,U){try{this.self.importScripts(ee.url),U()}catch(J){U(J.toString())}}syncRTLPluginState(Y,ee,U){try{a.bD.setState(ee);const J=a.bD.getPluginURL();if(a.bD.isLoaded()&&!a.bD.isParsed()&&J!=null){this.self.importScripts(J);const ne=a.bD.isParsed();U(ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${J}`),ne)}}catch(J){U(J.toString())}}getAvailableImages(Y){let ee=this.availableImages[Y];return ee||(ee=[]),ee}getLayerIndex(Y){let ee=this.layerIndexes[Y];return ee||(ee=this.layerIndexes[Y]=new p),ee}getWorkerSource(Y,ee,U){return this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][ee]||(this.workerSources[Y][ee]={}),this.workerSources[Y][ee][U]||(this.workerSources[Y][ee][U]=new this.workerSourceTypes[ee]({send:(J,ne,de)=>{this.actor.send(J,ne,de,Y)}},this.getLayerIndex(Y),this.getAvailableImages(Y))),this.workerSources[Y][ee][U]}getDEMWorkerSource(Y,ee){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][ee]||(this.demWorkerSources[Y][ee]=new R),this.demWorkerSources[Y][ee]}}return a.i()&&(self.worker=new _r(self)),_r}),o(["./shared"],function(a){var p="3.6.2";class m{static testProp(l){if(!m.docStyle)return l[0];for(let d=0;d<l.length;d++)if(l[d]in m.docStyle)return l[d];return l[0]}static create(l,d,g){const y=window.document.createElement(l);return d!==void 0&&(y.className=d),g&&g.appendChild(y),y}static createNS(l,d){return window.document.createElementNS(l,d)}static disableDrag(){m.docStyle&&m.selectProp&&(m.userSelect=m.docStyle[m.selectProp],m.docStyle[m.selectProp]="none")}static enableDrag(){m.docStyle&&m.selectProp&&(m.docStyle[m.selectProp]=m.userSelect)}static setTransform(l,d){l.style[m.transformProp]=d}static addEventListener(l,d,g,y={}){l.addEventListener(d,g,"passive"in y?y:y.capture)}static removeEventListener(l,d,g,y={}){l.removeEventListener(d,g,"passive"in y?y:y.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",m.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",m.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",m.suppressClickInternal,!0)},0)}static mousePos(l,d){const g=l.getBoundingClientRect();return new a.P(d.clientX-g.left-l.clientLeft,d.clientY-g.top-l.clientTop)}static touchPos(l,d){const g=l.getBoundingClientRect(),y=[];for(let b=0;b<d.length;b++)y.push(new a.P(d[b].clientX-g.left-l.clientLeft,d[b].clientY-g.top-l.clientTop));return y}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}m.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,m.selectProp=m.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),m.transformProp=m.testProp(["transform","WebkitTransform"]);const w={supported:!1,testSupport:function(_){!P&&T&&(R?$(_):C=_)}};let C,T,P=!1,R=!1;function $(_){const l=_.createTexture();_.bindTexture(_.TEXTURE_2D,l);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,T),_.isContextLost())return;w.supported=!0}catch{}_.deleteTexture(l),P=!0}var H,D;typeof document<"u"&&(T=document.createElement("img"),T.onload=function(){C&&$(C),C=null,R=!0},T.onerror=function(){P=!0,C=null},T.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let l,d,g,y;_.resetRequestQueue=()=>{l=[],d=0,g=0,y={}},_.addThrottleControl=j=>{const q=g++;return y[q]=j,q},_.removeThrottleControl=j=>{delete y[j],I()},_.getImage=(j,q,W=!0)=>{w.supported&&(j.headers||(j.headers={}),j.headers.accept="image/webp,*/*");const ie={requestParameters:j,supportImageRefresh:W,callback:q,cancelled:!1,completed:!1,cancel:()=>{ie.completed||ie.cancelled||(ie.cancelled=!0,ie.innerRequest&&(ie.innerRequest.cancel(),d--),I())}};return l.push(ie),I(),ie};const b=j=>{const{requestParameters:q,supportImageRefresh:W,callback:ie}=j;return a.e(q,{type:"image"}),(W!==!1||a.i()||a.g(q.url)||q.headers&&!Object.keys(q.headers).reduce((fe,he)=>fe&&he==="accept",!0)?a.m:A)(q,(fe,he,ge,le)=>{E(j,ie,fe,he,ge,le)})},E=(j,q,W,ie,fe,he)=>{W?q(W):ie instanceof HTMLImageElement||a.a(ie)?q(null,ie):ie&&((ge,le)=>{typeof createImageBitmap=="function"?a.b(ge,le):a.d(ge,le)})(ie,(ge,le)=>{ge!=null?q(ge):le!=null&&q(null,le,{cacheControl:fe,expires:he})}),j.cancelled||(j.completed=!0,d--,I())},I=()=>{const j=(()=>{const q=Object.keys(y);let W=!1;if(q.length>0){for(const ie of q)if(W=y[ie](),W)break}return W})()?a.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=d;q<j&&l.length>0;q++){const W=l.shift();if(W.cancelled){q--;continue}const ie=b(W);d++,W.innerRequest=ie}},A=(j,q)=>{const W=new Image,ie=j.url;let fe=!1;const he=j.credentials;return he&&he==="include"?W.crossOrigin="use-credentials":(he&&he==="same-origin"||!a.s(ie))&&(W.crossOrigin="anonymous"),W.fetchPriority="high",W.onload=()=>{q(null,W),W.onerror=W.onload=null},W.onerror=()=>{fe||q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),W.onerror=W.onload=null},W.src=ie,{cancel:()=>{fe=!0,W.src=""}}}}(H||(H={})),H.resetRequestQueue(),function(_){_.Glyphs="Glyphs",_.Image="Image",_.Source="Source",_.SpriteImage="SpriteImage",_.SpriteJSON="SpriteJSON",_.Style="Style",_.Tile="Tile",_.Unknown="Unknown"}(D||(D={}));class O{constructor(l){this._transformRequestFn=l}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeSpriteURL(l,d,g){const y=function(b){const E=b.match(L);if(!E)throw new Error(`Unable to parse URL "${b}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(l);return y.path+=`${d}${g}`,function(b){const E=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${E}`}(y)}setTransformRequest(l){this._transformRequestFn=l}}const L=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Q(_){var l=new a.A(3);return l[0]=_[0],l[1]=_[1],l[2]=_[2],l}var V,F=function(_,l,d){return _[0]=l[0]-d[0],_[1]=l[1]-d[1],_[2]=l[2]-d[2],_};V=new a.A(3),a.A!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0);var X=function(_){var l=_[0],d=_[1];return l*l+d*d};function re(_){const l=[];if(typeof _=="string")l.push({id:"default",url:_});else if(_&&_.length>0){const d=[];for(const{id:g,url:y}of _){const b=`${g}${y}`;d.indexOf(b)===-1&&(d.push(b),l.push({id:g,url:y}))}}return l}function ye(_,l,d,g,y){if(g)return void _(g);if(y!==Object.values(l).length||y!==Object.values(d).length)return;const b={};for(const E in l){b[E]={};const I=a.h.getImageCanvasContext(d[E]),A=l[E];for(const j in A){const{width:q,height:W,x:ie,y:fe,sdf:he,pixelRatio:ge,stretchX:le,stretchY:Me,content:Ue}=A[j];b[E][j]={data:null,pixelRatio:ge,sdf:he,stretchX:le,stretchY:Me,content:Ue,spriteData:{width:q,height:W,x:ie,y:fe,context:I}}}}_(null,b)}(function(){var _=new a.A(2);a.A!=Float32Array&&(_[0]=0,_[1]=0)})();class me{constructor(l,d,g,y){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(d,y)}update(l,d,g){const{width:y,height:b}=l,E=!(this.size&&this.size[0]===y&&this.size[1]===b||g),{context:I}=this,{gl:A}=I;if(this.useMipmap=!!(d&&d.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!d||d.premultiply!==!1)),E)this.size=[y,b],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.a(l)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,l):A.texImage2D(A.TEXTURE_2D,0,this.format,y,b,0,this.format,A.UNSIGNED_BYTE,l.data);else{const{x:j,y:q}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.a(l)?A.texSubImage2D(A.TEXTURE_2D,0,j,q,A.RGBA,A.UNSIGNED_BYTE,l):A.texSubImage2D(A.TEXTURE_2D,0,j,q,y,b,A.RGBA,A.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(l,d,g){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),g!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=b.LINEAR),l!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,g||l),this.filter=l),d!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,d),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function we(_){const{userImage:l}=_;return!!(l&&l.render&&l.render())&&(_.data.replace(new Uint8Array(l.data.buffer)),!0)}class ke extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}getImage(l){const d=this.images[l];if(d&&!d.data&&d.spriteData){const g=d.spriteData;d.data=new a.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),d.spriteData=null}return d}addImage(l,d){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,d)&&(this.images[l]=d)}_validate(l,d){let g=!0;const y=d.data||d.spriteData;return this._validateStretch(d.stretchX,y&&y.width)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,y&&y.height)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new a.j(new Error(`Image "${l}" has invalid "content" value`))),g=!1),g}_validateStretch(l,d){if(!l)return!0;let g=0;for(const y of l){if(y[0]<g||y[1]<y[0]||d<y[1])return!1;g=y[1]}return!0}_validateContent(l,d){if(!l)return!0;if(l.length!==4)return!1;const g=d.spriteData,y=g&&g.width||d.data.width,b=g&&g.height||d.data.height;return!(l[0]<0||y<l[0]||l[1]<0||b<l[1]||l[2]<0||y<l[2]||l[3]<0||b<l[3]||l[2]<l[0]||l[3]<l[1])}updateImage(l,d,g=!0){const y=this.getImage(l);if(g&&(y.data.width!==d.data.width||y.data.height!==d.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=y.version+1,this.images[l]=d,this.updatedImages[l]=!0}removeImage(l){const d=this.images[l];delete this.images[l],delete this.patterns[l],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,d){let g=!0;if(!this.isLoaded())for(const y of l)this.images[y]||(g=!1);this.isLoaded()||g?this._notify(l,d):this.requestors.push({ids:l,callback:d})}_notify(l,d){const g={};for(const y of l){let b=this.getImage(y);b||(this.fire(new a.k("styleimagemissing",{id:y})),b=this.getImage(y)),b?g[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:l,height:d}=this.atlasImage;return{width:l,height:d}}getPattern(l){const d=this.patterns[l],g=this.getImage(l);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},b=new a.I(y,g);this.patterns[l]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const d=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new me(l,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const b in this.patterns)l.push(this.patterns[b].bin);const{w:d,h:g}=a.p(l),y=this.atlasImage;y.resize({width:d||1,height:g||1});for(const b in this.patterns){const{bin:E}=this.patterns[b],I=E.x+1,A=E.y+1,j=this.getImage(b).data,q=j.width,W=j.height;a.R.copy(j,y,{x:0,y:0},{x:I,y:A},{width:q,height:W}),a.R.copy(j,y,{x:0,y:W-1},{x:I,y:A-1},{width:q,height:1}),a.R.copy(j,y,{x:0,y:0},{x:I,y:A+W},{width:q,height:1}),a.R.copy(j,y,{x:q-1,y:0},{x:I-1,y:A},{width:1,height:W}),a.R.copy(j,y,{x:0,y:0},{x:I+q,y:A},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const d of l){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.getImage(d);g||a.w(`Image with ID: "${d}" was not found`),we(g)&&this.updateImage(d,g)}}}const Ie=1e20;function qe(_,l,d,g,y,b,E,I,A){for(let j=l;j<l+g;j++)Re(_,d*b+j,b,y,E,I,A);for(let j=d;j<d+y;j++)Re(_,j*b+l,1,g,E,I,A)}function Re(_,l,d,g,y,b,E){b[0]=0,E[0]=-Ie,E[1]=Ie,y[0]=_[l];for(let I=1,A=0,j=0;I<g;I++){y[I]=_[l+I*d];const q=I*I;do{const W=b[A];j=(y[I]-y[W]+q-W*W)/(I-W)/2}while(j<=E[A]&&--A>-1);A++,b[A]=I,E[A]=j,E[A+1]=Ie}for(let I=0,A=0;I<g;I++){for(;E[A+1]<I;)A++;const j=b[A],q=I-j;_[l+I*d]=y[j]+q*q}}class Se{constructor(l,d){this.requestManager=l,this.localIdeographFontFamily=d,this.entries={}}setURL(l){this.url=l}getGlyphs(l,d){const g=[];for(const y in l)for(const b of l[y])g.push({stack:y,id:b});a.o(g,({stack:y,id:b},E)=>{let I=this.entries[y];I||(I=this.entries[y]={glyphs:{},requests:{},ranges:{}});let A=I.glyphs[b];if(A!==void 0)return void E(null,{stack:y,id:b,glyph:A});if(A=this._tinySDF(I,y,b),A)return I.glyphs[b]=A,void E(null,{stack:y,id:b,glyph:A});const j=Math.floor(b/256);if(256*j>65535)return void E(new Error("glyphs > 65535 not supported"));if(I.ranges[j])return void E(null,{stack:y,id:b,glyph:A});if(!this.url)return void E(new Error("glyphsUrl is not set"));let q=I.requests[j];q||(q=I.requests[j]=[],Se.loadGlyphRange(y,j,this.url,this.requestManager,(W,ie)=>{if(ie){for(const fe in ie)this._doesCharSupportLocalGlyph(+fe)||(I.glyphs[+fe]=ie[+fe]);I.ranges[j]=!0}for(const fe of q)fe(W,ie);delete I.requests[j]})),q.push((W,ie)=>{W?E(W):ie&&E(null,{stack:y,id:b,glyph:ie[b]||null})})},(y,b)=>{if(y)d(y);else if(b){const E={};for(const{stack:I,id:A,glyph:j}of b)(E[I]||(E[I]={}))[A]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};d(null,E)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](l)||a.u["Hangul Syllables"](l)||a.u.Hiragana(l)||a.u.Katakana(l))}_tinySDF(l,d,g){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let b=l.tinySDF;if(!b){let I="400";/bold/i.test(d)?I="900":/medium/i.test(d)?I="500":/light/i.test(d)&&(I="200"),b=l.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:I})}const E=b.draw(String.fromCharCode(g));return{id:g,bitmap:new a.q({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(_,l,d,g,y){const b=256*l,E=b+255,I=g.transformRequest(d.replace("{fontstack}",_).replace("{range}",`${b}-${E}`),D.Glyphs);a.l(I,(A,j)=>{if(A)y(A);else if(j){const q={};for(const W of a.n(j))q[W.id]=W;y(null,q)}})},Se.TinySDF=class{constructor({fontSize:_=24,buffer:l=3,radius:d=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:E="normal"}={}){this.buffer=l,this.cutoff=g,this.radius=d;const I=this.size=_+4*l,A=this._createCanvas(I),j=this.ctx=A.getContext("2d",{willReadFrequently:!0});j.font=`${E} ${b} ${_}px ${y}`,j.textBaseline="alphabetic",j.textAlign="left",j.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(_){const l=document.createElement("canvas");return l.width=l.height=_,l}draw(_){const{width:l,actualBoundingBoxAscent:d,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(_),E=Math.ceil(d),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),A=Math.min(this.size-this.buffer,E+Math.ceil(g)),j=I+2*this.buffer,q=A+2*this.buffer,W=Math.max(j*q,0),ie=new Uint8ClampedArray(W),fe={data:ie,width:j,height:q,glyphWidth:I,glyphHeight:A,glyphTop:E,glyphLeft:0,glyphAdvance:l};if(I===0||A===0)return fe;const{ctx:he,buffer:ge,gridInner:le,gridOuter:Me}=this;he.clearRect(ge,ge,I,A),he.fillText(_,ge,ge+E);const Ue=he.getImageData(ge,ge,I,A);Me.fill(Ie,0,W),le.fill(0,0,W);for(let _e=0;_e<A;_e++)for(let De=0;De<I;De++){const We=Ue.data[4*(_e*I+De)+3]/255;if(We===0)continue;const Ke=(_e+ge)*j+De+ge;if(We===1)Me[Ke]=0,le[Ke]=Ie;else{const Ye=.5-We;Me[Ke]=Ye>0?Ye*Ye:0,le[Ke]=Ye<0?Ye*Ye:0}}qe(Me,0,0,j,q,j,this.f,this.v,this.z),qe(le,ge,ge,I,A,j,this.f,this.v,this.z);for(let _e=0;_e<W;_e++){const De=Math.sqrt(Me[_e])-Math.sqrt(le[_e]);ie[_e]=Math.round(255-255*(De/this.radius+this.cutoff))}return fe}};class Fe{constructor(){this.specification=a.v.light.position}possiblyEvaluate(l,d){return a.z(l.expression.evaluate(d))}interpolate(l,d,g){return{x:a.B.number(l.x,d.x,g),y:a.B.number(l.y,d.y,g),z:a.B.number(l.z,d.z,g)}}}let Ce;class Ne extends a.E{constructor(l){super(),Ce=Ce||new a.r({anchor:new a.D(a.v.light.anchor),position:new Fe,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Ce),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d={}){if(!this._validate(a.t,l,d))for(const g in l){const y=l[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,g){return(!g||g.validate!==!1)&&a.x(this,l.call(a.y,a.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}}class Je{constructor(l,d){this.width=l,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,d){const g=l.join(",")+String(d);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(l,d)),this.dashEntry[g]}getDashRanges(l,d,g){const y=[];let b=l.length%2==1?-l[l.length-1]*g:0,E=l[0]*g,I=!0;y.push({left:b,right:E,isDash:I,zeroLength:l[0]===0});let A=l[0];for(let j=1;j<l.length;j++){I=!I;const q=l[j];b=A*g,A+=q,E=A*g,y.push({left:b,right:E,isDash:I,zeroLength:q===0})}return y}addRoundDash(l,d,g){const y=d/2;for(let b=-g;b<=g;b++){const E=this.width*(this.nextRow+g+b);let I=0,A=l[I];for(let j=0;j<this.width;j++){j/A.right>1&&(A=l[++I]);const q=Math.abs(j-A.left),W=Math.abs(j-A.right),ie=Math.min(q,W);let fe;const he=b/g*(y+1);if(A.isDash){const ge=y-Math.abs(he);fe=Math.sqrt(ie*ie+ge*ge)}else fe=y-Math.sqrt(ie*ie+he*he);this.data[E+j]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(l){for(let I=l.length-1;I>=0;--I){const A=l[I],j=l[I+1];A.zeroLength?l.splice(I,1):j&&j.isDash===A.isDash&&(j.left=A.left,l.splice(I,1))}const d=l[0],g=l[l.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const y=this.width*this.nextRow;let b=0,E=l[b];for(let I=0;I<this.width;I++){I/E.right>1&&(E=l[++b]);const A=Math.abs(I-E.left),j=Math.abs(I-E.right),q=Math.min(A,j);this.data[y+I]=Math.max(0,Math.min(255,(E.isDash?q:-q)+128))}}addDash(l,d){const g=d?7:0,y=2*g+1;if(this.nextRow+y>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let I=0;I<l.length;I++)b+=l[I];if(b!==0){const I=this.width/b,A=this.getDashRanges(l,this.width,I);d?this.addRoundDash(A,I,g):this.addRegularDash(A)}const E={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:b};return this.nextRow+=y,this.dirty=!0,E}bind(l){const d=l.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class at{constructor(l,d,g){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=g;const y=this.workerPool.acquire(g);for(let b=0;b<y.length;b++){const E=new a.C(y[b],d,g);E.name=`Worker ${b}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,d,g){a.o(this.actors,(y,b)=>{y.send(l,d,b)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(l=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],l&&this.workerPool.release(this.id)}}function st(_,l,d){const g=function(y,b){if(y)return d(y);if(b){const E=a.F(a.e(b,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(E.vectorLayers=b.vector_layers,E.vectorLayerIds=E.vectorLayers.map(I=>I.id)),d(null,E)}};return _.url?a.f(l.transformRequest(_.url,D.Source),g):a.h.frame(()=>g(null,_))}class Dt{constructor(l,d){l&&(d?this.setSouthWest(l).setNorthEast(d):Array.isArray(l)&&(l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1])))}setNorthEast(l){return this._ne=l instanceof a.L?new a.L(l.lng,l.lat):a.L.convert(l),this}setSouthWest(l){return this._sw=l instanceof a.L?new a.L(l.lng,l.lat):a.L.convert(l),this}extend(l){const d=this._sw,g=this._ne;let y,b;if(l instanceof a.L)y=l,b=l;else{if(!(l instanceof Dt))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(Dt.convert(l)):this.extend(a.L.convert(l)):l&&("lng"in l||"lon"in l)&&"lat"in l?this.extend(a.L.convert(l)):this;if(y=l._sw,b=l._ne,!y||!b)return this}return d||g?(d.lng=Math.min(y.lng,d.lng),d.lat=Math.min(y.lat,d.lat),g.lng=Math.max(b.lng,g.lng),g.lat=Math.max(b.lat,g.lat)):(this._sw=new a.L(y.lng,y.lat),this._ne=new a.L(b.lng,b.lat)),this}getCenter(){return new a.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.L(this.getWest(),this.getNorth())}getSouthEast(){return new a.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(l){const{lng:d,lat:g}=a.L.convert(l);let y=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(l){return l instanceof Dt?l:l&&new Dt(l)}static fromLngLat(l,d=0){const g=360*d/40075017,y=g/Math.cos(Math.PI/180*l.lat);return new Dt(new a.L(l.lng-y,l.lat-g),new a.L(l.lng+y,l.lat+g))}}class Ct{constructor(l,d,g){this.bounds=Dt.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),g=Math.floor(a.G(this.bounds.getWest())*d),y=Math.floor(a.H(this.bounds.getNorth())*d),b=Math.ceil(a.G(this.bounds.getEast())*d),E=Math.ceil(a.H(this.bounds.getSouth())*d);return l.x>=g&&l.x<b&&l.y>=y&&l.y<E}}class Bt extends a.E{constructor(l,d,g,y){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=st(this._options,this.map._requestManager,(b,E)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),b?this.fire(new a.j(b)):E&&(a.e(this,E),E.bounds&&(this.tileBounds=new Ct(E.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.e({},this._options),this.id=l,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.F(d,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(g,D.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(E,I){return delete l.request,l.aborted?d(null):E&&E.status!==404?d(E):(I&&I.resourceTiming&&(l.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&l.setExpiryData(I),l.loadVectorData(I,this.map.painter),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",y,b.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",y,b.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Tt extends a.E{constructor(l,d,g,y){super(),this.id=l,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},d),a.e(this,a.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=st(this._options,this.map._requestManager,(l,d)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new a.j(l)):d&&(a.e(this,d),d.bounds&&(this.tileBounds=new Ct(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}serialize(){return a.e({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=H.getImage(this.map._requestManager.transformRequest(g,D.Tile),(y,b,E)=>{if(delete l.request,l.aborted)l.state="unloaded",d(null);else if(y)l.state="errored",d(y);else if(b){this.map._refreshExpiredTiles&&E&&l.setExpiryData(E);const I=this.map.painter.context,A=I.gl;l.texture=this.map.painter.getTileTexture(b.width),l.texture?l.texture.update(b,{useMipmap:!0}):(l.texture=new me(I,b,A.RGBA,{useMipmap:!0}),l.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),l.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d()}unloadTile(l,d){l.texture&&this.map.painter.saveTileTexture(l.texture),d()}hasTransition(){return!1}}class it extends Tt{constructor(l,d,g,y){super(l,d,g,y),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(g,D.Tile);function b(E,I){E&&(l.state="errored",d(E)),I&&(l.dem=I,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",d(null))}l.neighboringTiles=this._getNeighboringTiles(l.tileID),l.request=H.getImage(y,(E,I,A)=>a._(this,void 0,void 0,function*(){if(delete l.request,l.aborted)l.state="unloaded",d(null);else if(E)l.state="errored",d(E);else if(I){this.map._refreshExpiredTiles&&l.setExpiryData(A);const j=a.a(I)&&a.J()?I:yield function(W){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.K()){const ie=W.width+2,fe=W.height+2;try{return new a.R({width:ie,height:fe},yield a.M(W,-1,-1,ie,fe))}catch{}}return a.h.getImageData(W,1)})}(I),q={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:j,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",q,b))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(l){const d=l.canonical,g=Math.pow(2,d.z),y=(d.x-1+g)%g,b=d.x===0?l.wrap-1:l.wrap,E=(d.x+1+g)%g,I=d.x+1===g?l.wrap+1:l.wrap,A={};return A[new a.O(l.overscaledZ,b,d.z,y,d.y).key]={backfilled:!1},A[new a.O(l.overscaledZ,I,d.z,E,d.y).key]={backfilled:!1},d.y>0&&(A[new a.O(l.overscaledZ,b,d.z,y,d.y-1).key]={backfilled:!1},A[new a.O(l.overscaledZ,l.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},A[new a.O(l.overscaledZ,I,d.z,E,d.y-1).key]={backfilled:!1}),d.y+1<g&&(A[new a.O(l.overscaledZ,b,d.z,y,d.y+1).key]={backfilled:!1},A[new a.O(l.overscaledZ,l.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},A[new a.O(l.overscaledZ,I,d.z,E,d.y+1).key]={backfilled:!1}),A}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class Ze extends a.E{constructor(l,d,g,y){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.e({},this._options,{type:this.type,data:this._data}),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=d.data,this._options=a.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const b=a.N/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*b,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*b,extent:a.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.N,radius:(d.clusterRadius||50)*b,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData(),this}updateData(l){return this._updateWorkerData(l),this}setClusterOptions(l){return this.workerOptions.cluster=l.cluster,l&&(l.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=l.clusterRadius),l.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=l.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(l,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},d),this}getClusterChildren(l,d){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},d),this}getClusterLeaves(l,d,g,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:d,offset:g},y),this}_updateWorkerData(l){const d=a.e({},this.workerOptions);l?d.dataDiff=l:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(a.h.resolveURL(this._data),D.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(g,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let b=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0)),g)return void this.fire(new a.j(g));const E={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(E,{resourceTiming:b}),this.fire(new a.k("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(l,d){const g=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const y={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(g,y,(b,E)=>(delete l.request,l.unloadVectorData(),l.aborted?d(null):b?d(b):(l.loadVectorData(E,this.map.painter,g==="reloadTile"),d(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var rt=a.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pt extends a.E{constructor(l,d,g,y){super(),this.load=(b,E)=>{this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=H.getImage(this.map._requestManager.transformRequest(this.url,D.Image),(I,A)=>{this._request=null,this._loaded=!0,I?this.fire(new a.j(I)):A&&(this.image=A,b&&(this.coordinates=b),E&&E(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const b=this.map.painter.context,E=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new me(b,this.image,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let I=!1;for(const A in this.tiles){const j=this.tiles[A];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,I=!0)}I&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=l,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}loaded(){return this._loaded}updateImage(l){return l.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(l){this.coordinates=l;const d=l.map(a.U.fromLngLat);this.tileID=function(y){let b=1/0,E=1/0,I=-1/0,A=-1/0;for(const ie of y)b=Math.min(b,ie.x),E=Math.min(E,ie.y),I=Math.max(I,ie.x),A=Math.max(A,ie.y);const j=Math.max(I-b,A-E),q=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),W=Math.pow(2,q);return new a.W(q,Math.floor((b+I)/2*W),Math.floor((E+A)/2*W))}(d),this.minzoom=this.maxzoom=this.tileID.z;const g=d.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new a.V,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,a.N,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,a.N),this._boundsArray.emplaceBack(g[2].x,g[2].y,a.N,a.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(l,d){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},d(null)):(l.state="errored",d(null))}hasTransition(){return!1}}class ur extends pt{constructor(l,d,g,y){super(l,d,g,y),this.load=()=>{this._loaded=!1;const b=this.options;this.urls=[];for(const E of b.urls)this.urls.push(this.map._requestManager.transformRequest(E,D.Source).url);a.X(this.urls,(E,I)=>{this._loaded=!0,E?this.fire(new a.j(E)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const b=this.map.painter.context,E=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.texSubImage2D(E.TEXTURE_2D,0,0,0,E.RGBA,E.UNSIGNED_BYTE,this.video)):(this.texture=new me(b,this.video,E.RGBA),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE));let I=!1;for(const A in this.tiles){const j=this.tiles[A];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,I=!0)}I&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const d=this.video.seekable;l<d.start(0)||l>d.end(0)?this.fire(new a.j(new a.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class or extends pt{constructor(l,d,g,y){super(l,d,g,y),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const E=this.map.painter.context,I=E.gl;this.boundsBuffer||(this.boundsBuffer=E.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=a.S.simpleSegment(0,0,4,2)),this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new me(E,this.canvas,I.RGBA,{premultiply:!0});let A=!1;for(const j in this.tiles){const q=this.tiles[j];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture,A=!0)}A&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(E=>typeof E!="number"))||this.fire(new a.j(new a.Y(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.Y(`sources.${l}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.j(new a.Y(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.Y(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.Y(`sources.${l}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Er={},jr=_=>{switch(_){case"geojson":return Ze;case"image":return pt;case"raster":return Tt;case"raster-dem":return it;case"vector":return Bt;case"video":return ur;case"canvas":return or}return Er[_]};function ar(_,l){const d=a.Z();return a.$(d,d,[1,1,0]),a.a0(d,d,[.5*_.width,.5*_.height,1]),a.a1(d,d,_.calculatePosMatrix(l.toUnwrapped()))}function It(_,l,d,g,y,b){const E=function(W,ie,fe){if(W)for(const he of W){const ge=ie[he];if(ge&&ge.source===fe&&ge.type==="fill-extrusion")return!0}else for(const he in ie){const ge=ie[he];if(ge.source===fe&&ge.type==="fill-extrusion")return!0}return!1}(y&&y.layers,l,_.id),I=b.maxPitchScaleFactor(),A=_.tilesIn(g,I,E);A.sort(gr);const j=[];for(const W of A)j.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(l,d,_._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,y,b,I,ar(_.transform,W.tileID))});const q=function(W){const ie={},fe={};for(const he of W){const ge=he.queryResults,le=he.wrappedTileID,Me=fe[le]=fe[le]||{};for(const Ue in ge){const _e=ge[Ue],De=Me[Ue]=Me[Ue]||{},We=ie[Ue]=ie[Ue]||[];for(const Ke of _e)De[Ke.featureIndex]||(De[Ke.featureIndex]=!0,We.push(Ke))}}return ie}(j);for(const W in q)q[W].forEach(ie=>{const fe=ie.feature,he=_.getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=he});return q}function gr(_,l){const d=_.tileID,g=l.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}class Wt{constructor(l,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=l,this.uid=a.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const d=l+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(l,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(y,b){const E={};if(!b)return E;for(const I of y){const A=I.layerIds.map(j=>b.getLayer(j)).filter(Boolean);if(A.length!==0){I.layers=A,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(j=>A.filter(q=>q.id===j)[0]));for(const j of A)E[j.id]=I}}return E}(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.a4){if(this.hasSymbolBuckets=!0,!g)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof a.a4&&b.hasRTLText){this.hasRTLText=!0,a.a5();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(y).queryRadius(b))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.a3}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(l)}const d=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new me(l,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new me(l,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,d,g,y,b,E,I,A,j,q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:E,tileSize:this.tileSize,pixelPosMatrix:q,transform:A,params:I,queryPadding:this.queryPadding*j},l,d,g):{}}querySourceFeatures(l,d){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const y=g.loadVTLayers(),b=d&&d.sourceLayer?d.sourceLayer:"",E=y._geojsonTileLayer||y[b];if(!E)return;const I=a.a6(d&&d.filter),{z:A,x:j,y:q}=this.tileID.canonical,W={z:A,x:j,y:q};for(let ie=0;ie<E.length;ie++){const fe=E.feature(ie);if(I.needGeometry){const le=a.a7(fe,!0);if(!I.filter(new a.a8(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!I.filter(new a.a8(this.tileID.overscaledZ),fe))continue;const he=g.getId(fe,b),ge=new a.a9(fe,A,j,q,he);ge.tile=W,l.push(ge)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const g=a.aa(l.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const g=Date.now();let y=!1;if(this.expirationTime>g)y=!1;else if(d)if(this.expirationTime<d)y=!0;else{const b=this.expirationTime-d;b?this.expirationTime=g+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!d.style.hasLayer(y))continue;const b=this.buckets[y],E=b.layers[0].sourceLayer||"_geojsonTileLayer",I=g[E],A=l[E];if(!I||!A||Object.keys(A).length===0)continue;b.update(A,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const j=d&&d.style&&d.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=a.h.now()+l}setDependencies(l,d){const g={};for(const y of d)g[y]=!0;this.dependencies[l]=g}hasDependency(l,d){for(const g of l){const y=this.dependencies[g];if(y){for(const b of d)if(y[b])return!0}}return!1}}class Br{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,g){const y=l.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:d,timeout:void 0};if(g!==void 0&&(b.timeout=setTimeout(()=>{this.remove(l,b)},g)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const g=l.wrapped().key,y=d===void 0?0:this.data[g].indexOf(d),b=this.data[g][y];return this.data[g].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(b.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const g in this.data)for(const y of this.data[g])l(y.value)||d.push(y);for(const g of d)this.remove(g.value.tileID,g)}}class He{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,g){const y=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][y]=this.stateChanges[l][y]||{},a.e(this.stateChanges[l][y],g),this.deletedStates[l]===null){this.deletedStates[l]={};for(const b in this.state[l])b!==y&&(this.deletedStates[l][b]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][y]===null){this.deletedStates[l][y]={};for(const b in this.state[l][y])g[b]||(this.deletedStates[l][y][b]=null)}else for(const b in g)this.deletedStates[l]&&this.deletedStates[l][y]&&this.deletedStates[l][y][b]===null&&delete this.deletedStates[l][y][b]}removeFeatureState(l,d,g){if(this.deletedStates[l]===null)return;const y=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},g&&d!==void 0)this.deletedStates[l][y]!==null&&(this.deletedStates[l][y]=this.deletedStates[l][y]||{},this.deletedStates[l][y][g]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][y])for(g in this.deletedStates[l][y]={},this.stateChanges[l][y])this.deletedStates[l][y][g]=null;else this.deletedStates[l][y]=null;else this.deletedStates[l]=null}getState(l,d){const g=String(d),y=a.e({},(this.state[l]||{})[g],(this.stateChanges[l]||{})[g]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const b=this.deletedStates[l][d];if(b===null)return{};for(const E in b)delete y[E]}return y}initializeTileState(l,d){l.setFeatureState(this.state,d)}coalesceChanges(l,d){const g={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const E in this.stateChanges[y])this.state[y][E]||(this.state[y][E]={}),a.e(this.state[y][E],this.stateChanges[y][E]),b[E]=this.state[y][E];g[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const E in this.state[y])b[E]={},this.state[y][E]={};else for(const E in this.deletedStates[y]){if(this.deletedStates[y][E]===null)this.state[y][E]={};else for(const I of Object.keys(this.deletedStates[y][E]))delete this.state[y][E][I];b[E]=this.state[y][E]}g[y]=g[y]||{},a.e(g[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const y in l)l[y].setFeatureState(g,d)}}class Cr extends a.E{constructor(l,d,g){super(),this.id=l,this.dispatcher=g,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,b,E,I)=>{const A=new(jr(b.type))(y,b,E,I);if(A.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${A.id}`);return A})(l,d,g,this),this._tiles={},this._cache=new Br(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new He,this._didEmitContent=!1,this._updated=!1}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._maxTileCacheZoomLevels=l?l._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const l in this._tiles){const d=this._tiles[l];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,d){return this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new a.k("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const g=this._tiles[d];g.upload(l),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(Rr).map(l=>l.key)}getRenderableIds(l){const d=[];for(const g in this._tiles)this._isIdRenderable(g,l)&&d.push(this._tiles[g]);return l?d.sort((g,y)=>{const b=g.tileID,E=y.tileID,I=new a.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),A=new a.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-E.overscaledZ||A.y-I.y||A.x-I.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(Rr).map(g=>g.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,d){const g=this._tiles[l];g&&(g.state!=="loading"&&(g.state=d),this._loadTile(g,this._tileLoaded.bind(this,g,l,d)))}_tileLoaded(l,d,g,y){if(y)return l.state="errored",void(y.status!==404?this._source.fire(new a.j(y,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=a.h.now(),g==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const d=this.getRenderableIds();for(let y=0;y<d.length;y++){const b=d[y];if(l.neighboringTiles&&l.neighboringTiles[b]){const E=this.getTileByID(b);g(l,E),g(E,l)}}function g(y,b){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let E=b.tileID.canonical.x-y.tileID.canonical.x;const I=b.tileID.canonical.y-y.tileID.canonical.y,A=Math.pow(2,y.tileID.canonical.z),j=b.tileID.key;E===0&&I===0||Math.abs(I)>1||(Math.abs(E)>1&&(Math.abs(E+A)===1?E+=A:Math.abs(E-A)===1&&(E-=A)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,E,I),y.neighboringTiles&&y.neighboringTiles[j]&&(y.neighboringTiles[j].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,g,y){for(const b in this._tiles){let E=this._tiles[b];if(y[b]||!E.hasData()||E.tileID.overscaledZ<=d||E.tileID.overscaledZ>g)continue;let I=E.tileID;for(;E&&E.tileID.overscaledZ>d+1;){const j=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[j.key],E&&E.hasData()&&(I=j)}let A=I;for(;A.overscaledZ>d;)if(A=A.scaledTo(A.overscaledZ-1),l[A.key]){y[I.key]=I;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const g=this._loadedParentTiles[l.key];return g&&g.tileID.overscaledZ>=d?g:null}for(let g=l.overscaledZ-1;g>=d;g--){const y=l.scaledTo(g),b=this._getLoadedTile(y);if(b)return b}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const d=Math.ceil(l.width/this._source.tileSize)+1,g=Math.ceil(l.height/this._source.tileSize)+1,y=Math.floor(d*g*(this._maxTileCacheZoomLevels===null?a.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const g={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),g[b.tileID.key]=b}this._tiles=g;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(l,d){if(this.transform=l,this.terrain=d,!this._sourceLoaded||this._paused)return;let g;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(q=>new a.O(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y)):(g=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(g=g.filter(q=>this._source.hasTile(q)))):g=[];const y=l.coveringZoomLevel(this._source),b=Math.max(y-Cr.maxOverzooming,this._source.minzoom),E=Math.max(y+Cr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const q={};for(const W of g)if(W.canonical.z>this._source.minzoom){const ie=W.scaledTo(W.canonical.z-1);q[ie.key]=ie;const fe=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));q[fe.key]=fe}g=g.concat(Object.values(q))}const I=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(g,y);if(tr(this._source.type)){const q={},W={},ie=Object.keys(A),fe=a.h.now();for(const he of ie){const ge=A[he],le=this._tiles[he];if(!le||le.fadeEndTime!==0&&le.fadeEndTime<=fe)continue;const Me=this.findLoadedParent(ge,b);Me&&(this._addTile(Me.tileID),q[Me.tileID.key]=Me.tileID),W[he]=ge}this._retainLoadedChildren(W,y,E,A);for(const he in q)A[he]||(this._coveredTiles[he]=!0,A[he]=q[he]);if(d){const he={},ge={};for(const le of g)this._tiles[le.key].hasData()?he[le.key]=le:ge[le.key]=le;for(const le in ge){const Me=ge[le].children(this._source.maxzoom);this._tiles[Me[0].key]&&this._tiles[Me[1].key]&&this._tiles[Me[2].key]&&this._tiles[Me[3].key]&&(he[Me[0].key]=A[Me[0].key]=Me[0],he[Me[1].key]=A[Me[1].key]=Me[1],he[Me[2].key]=A[Me[2].key]=Me[2],he[Me[3].key]=A[Me[3].key]=Me[3],delete ge[le])}for(const le in ge){const Me=this.findLoadedParent(ge[le],this._source.minzoom);if(Me){he[Me.tileID.key]=A[Me.tileID.key]=Me.tileID;for(const Ue in he)he[Ue].isChildOf(Me.tileID)&&delete he[Ue]}}for(const le in this._tiles)he[le]||(this._coveredTiles[le]=!0)}}for(const q in A)this._tiles[q].clearFadeHold();const j=a.ab(this._tiles,A);for(const q of j){const W=this._tiles[q];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(q)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,d){const g={},y={},b=Math.max(d-Cr.maxOverzooming,this._source.minzoom),E=Math.max(d+Cr.maxUnderzooming,this._source.minzoom),I={};for(const A of l){const j=this._addTile(A);g[A.key]=A,j.hasData()||d<this._source.maxzoom&&(I[A.key]=A)}this._retainLoadedChildren(I,d,E,g);for(const A of l){let j=this._tiles[A.key];if(j.hasData())continue;if(d+1>this._source.maxzoom){const W=A.children(this._source.maxzoom)[0],ie=this.getTile(W);if(ie&&ie.hasData()){g[W.key]=W;continue}}else{const W=A.children(this._source.maxzoom);if(g[W[0].key]&&g[W[1].key]&&g[W[2].key]&&g[W[3].key])continue}let q=j.wasRequested();for(let W=A.overscaledZ-1;W>=b;--W){const ie=A.scaledTo(W);if(y[ie.key])break;if(y[ie.key]=!0,j=this.getTile(ie),!j&&q&&(j=this._addTile(ie)),j){const fe=j.hasData();if((q||fe)&&(g[ie.key]=ie),q=j.wasRequested(),fe)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let g,y=this._tiles[l].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}d.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(b),g)break;y=b}for(const b of d)this._loadedParentTiles[b]=g}}_addTile(l){let d=this._tiles[l.key];if(d)return d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const g=d;return d||(d=new Wt(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))),d.uses++,this._tiles[l.key]=d,g||this._source.fire(new a.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const g=d.getExpiryTimeout();g&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},g))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,d,g){const y=[],b=this.transform;if(!b)return y;const E=g?b.getCameraQueryGeometry(l):l,I=l.map(he=>b.pointCoordinate(he,this.terrain)),A=E.map(he=>b.pointCoordinate(he,this.terrain)),j=this.getIds();let q=1/0,W=1/0,ie=-1/0,fe=-1/0;for(const he of A)q=Math.min(q,he.x),W=Math.min(W,he.y),ie=Math.max(ie,he.x),fe=Math.max(fe,he.y);for(let he=0;he<j.length;he++){const ge=this._tiles[j[he]];if(ge.holdingForFade())continue;const le=ge.tileID,Me=Math.pow(2,b.zoom-ge.tileID.overscaledZ),Ue=d*ge.queryPadding*a.N/ge.tileSize/Me,_e=[le.getTilePoint(new a.U(q,W)),le.getTilePoint(new a.U(ie,fe))];if(_e[0].x-Ue<a.N&&_e[0].y-Ue<a.N&&_e[1].x+Ue>=0&&_e[1].y+Ue>=0){const De=I.map(Ke=>le.getTilePoint(Ke)),We=A.map(Ke=>le.getTilePoint(Ke));y.push({tile:ge,tileID:le,queryGeometry:De,cameraQueryGeometry:We,scale:Me})}}return y}getVisibleCoordinates(l){const d=this.getRenderableIds(l).map(g=>this._tiles[g].tileID);for(const g of d)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(tr(this._source.type)){const l=a.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=l)return!0}return!1}setFeatureState(l,d,g){this._state.updateState(l=l||"_geojsonTileLayer",d,g)}removeFeatureState(l,d,g){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,g)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,g){const y=this._tiles[l];y&&y.setDependencies(d,g)}reloadTilesForDependencies(l,d){for(const g in this._tiles)this._tiles[g].hasDependency(l,d)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(l,d))}}function Rr(_,l){const d=Math.abs(2*_.wrap)-+(_.wrap<0),g=Math.abs(2*l.wrap)-+(l.wrap<0);return _.overscaledZ-l.overscaledZ||g-d||l.canonical.y-_.canonical.y||l.canonical.x-_.canonical.x}function tr(_){return _==="raster"||_==="image"||_==="video"}Cr.maxOverzooming=10,Cr.maxUnderzooming=3;const lr="mapboxgl_preloaded_worker_pool";class Pr{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Pr.workerCount;)this.workers.push(new Worker(a.c.WORKER_URL));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[lr]}numActive(){return Object.keys(this.active).length}}const Fr=Math.floor(a.h.hardwareConcurrency/2);let Ir;function vr(){return Ir||(Ir=new Pr),Ir}Pr.workerCount=a.ac(globalThis)?Math.max(Math.min(Fr,3),1):1;class rr{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.ad(l,0,1);let d=1,g=this._distances[d];const y=l*this.paddedLength+this.padding;for(;g<y&&d<this._distances.length;)g=this._distances[++d];const b=d-1,E=this._distances[b],I=g-E,A=I>0?(y-E)/I:0;return this.points[b].mult(1-A).add(this.points[d].mult(A))}}function mr(_,l){let d=!0;return _==="always"||_!=="never"&&l!=="never"||(d=!1),d}class ln{constructor(l,d,g){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(l/g),this.yCellCount=Math.ceil(d/g);for(let E=0;E<this.xCellCount*this.yCellCount;E++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,g,y,b){this._forEachCell(d,g,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(l,d,g,y){this._forEachCell(d-y,g-y,d+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(g),this.circles.push(y)}_insertBoxCell(l,d,g,y,b,E){this.boxCells[b].push(E)}_insertCircleCell(l,d,g,y,b,E){this.circleCells[b].push(E)}_query(l,d,g,y,b,E,I){if(g<0||l>this.width||y<0||d>this.height)return[];const A=[];if(l<=0&&d<=0&&this.width<=g&&this.height<=y){if(b)return[{key:null,x1:l,y1:d,x2:g,y2:y}];for(let j=0;j<this.boxKeys.length;j++)A.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const q=this.circles[3*j],W=this.circles[3*j+1],ie=this.circles[3*j+2];A.push({key:this.circleKeys[j],x1:q-ie,y1:W-ie,x2:q+ie,y2:W+ie})}}else this._forEachCell(l,d,g,y,this._queryCell,A,{hitTest:b,overlapMode:E,seenUids:{box:{},circle:{}}},I);return A}query(l,d,g,y){return this._query(l,d,g,y,!1,null)}hitTest(l,d,g,y,b,E){return this._query(l,d,g,y,!0,b,E).length>0}hitTestCircle(l,d,g,y,b){const E=l-g,I=l+g,A=d-g,j=d+g;if(I<0||E>this.width||j<0||A>this.height)return!1;const q=[];return this._forEachCell(E,A,I,j,this._queryCellCircle,q,{hitTest:!0,overlapMode:y,circle:{x:l,y:d,radius:g},seenUids:{box:{},circle:{}}},b),q.length>0}_queryCell(l,d,g,y,b,E,I,A){const{seenUids:j,hitTest:q,overlapMode:W}=I,ie=this.boxCells[b];if(ie!==null){const he=this.bboxes;for(const ge of ie)if(!j.box[ge]){j.box[ge]=!0;const le=4*ge,Me=this.boxKeys[ge];if(l<=he[le+2]&&d<=he[le+3]&&g>=he[le+0]&&y>=he[le+1]&&(!A||A(Me))&&(!q||!mr(W,Me.overlapMode))&&(E.push({key:Me,x1:he[le],y1:he[le+1],x2:he[le+2],y2:he[le+3]}),q))return!0}}const fe=this.circleCells[b];if(fe!==null){const he=this.circles;for(const ge of fe)if(!j.circle[ge]){j.circle[ge]=!0;const le=3*ge,Me=this.circleKeys[ge];if(this._circleAndRectCollide(he[le],he[le+1],he[le+2],l,d,g,y)&&(!A||A(Me))&&(!q||!mr(W,Me.overlapMode))){const Ue=he[le],_e=he[le+1],De=he[le+2];if(E.push({key:Me,x1:Ue-De,y1:_e-De,x2:Ue+De,y2:_e+De}),q)return!0}}}return!1}_queryCellCircle(l,d,g,y,b,E,I,A){const{circle:j,seenUids:q,overlapMode:W}=I,ie=this.boxCells[b];if(ie!==null){const he=this.bboxes;for(const ge of ie)if(!q.box[ge]){q.box[ge]=!0;const le=4*ge,Me=this.boxKeys[ge];if(this._circleAndRectCollide(j.x,j.y,j.radius,he[le+0],he[le+1],he[le+2],he[le+3])&&(!A||A(Me))&&!mr(W,Me.overlapMode))return E.push(!0),!0}}const fe=this.circleCells[b];if(fe!==null){const he=this.circles;for(const ge of fe)if(!q.circle[ge]){q.circle[ge]=!0;const le=3*ge,Me=this.circleKeys[ge];if(this._circlesCollide(he[le],he[le+1],he[le+2],j.x,j.y,j.radius)&&(!A||A(Me))&&!mr(W,Me.overlapMode))return E.push(!0),!0}}}_forEachCell(l,d,g,y,b,E,I,A){const j=this._convertToXCellCoord(l),q=this._convertToYCellCoord(d),W=this._convertToXCellCoord(g),ie=this._convertToYCellCoord(y);for(let fe=j;fe<=W;fe++)for(let he=q;he<=ie;he++)if(b.call(this,l,d,g,y,this.xCellCount*he+fe,E,I,A))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,g,y,b,E){const I=y-l,A=b-d,j=g+E;return j*j>I*I+A*A}_circleAndRectCollide(l,d,g,y,b,E,I){const A=(E-y)/2,j=Math.abs(l-(y+A));if(j>A+g)return!1;const q=(I-b)/2,W=Math.abs(d-(b+q));if(W>q+g)return!1;if(j<=A||W<=q)return!0;const ie=j-A,fe=W-q;return ie*ie+fe*fe<=g*g}}function je(_,l,d,g,y){const b=a.Z();return l?(a.a0(b,b,[1/y,1/y,1]),d||a.ae(b,b,g.angle)):a.a1(b,g.labelPlaneMatrix,_),b}function kt(_,l,d,g,y){if(l){const b=a.af(_);return a.a0(b,b,[y,y,1]),d||a.ae(b,b,-g.angle),b}return g.glCoordMatrix}function wt(_,l,d){let g;d?(g=[_.x,_.y,d(_.x,_.y),1],a.ag(g,g,l)):(g=[_.x,_.y,0,1],J(g,g,l));const y=g[3];return{point:new a.P(g[0]/y,g[1]/y),signedDistanceFromCamera:y}}function Ee(_,l){return .5+_/l*.5}function Ve(_,l){const d=_[0]/_[3],g=_[1]/_[3];return d>=-l[0]&&d<=l[0]&&g>=-l[1]&&g<=l[1]}function Xe(_,l,d,g,y,b,E,I,A,j){const q=g?_.textSizeData:_.iconSizeData,W=a.ah(q,d.transform.zoom),ie=[256/d.width*2+1,256/d.height*2+1],fe=g?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;fe.clear();const he=_.lineVertexArray,ge=g?_.text.placedSymbolArray:_.icon.placedSymbolArray,le=d.transform.width/d.transform.height;let Me=!1;for(let Ue=0;Ue<ge.length;Ue++){const _e=ge.get(Ue);if(_e.hidden||_e.writingMode===a.ai.vertical&&!Me){U(_e.numGlyphs,fe);continue}let De;if(Me=!1,j?(De=[_e.anchorX,_e.anchorY,j(_e.anchorX,_e.anchorY),1],a.ag(De,De,l)):(De=[_e.anchorX,_e.anchorY,0,1],J(De,De,l)),!Ve(De,ie)){U(_e.numGlyphs,fe);continue}const We=Ee(d.transform.cameraToCenterDistance,De[3]),Ke=a.aj(q,W,_e),Ye=E?Ke/We:Ke*We,lt=new a.P(_e.anchorX,_e.anchorY),nt=wt(lt,y,j).point,mt={projections:{},offsets:{}},Xt=Rt(_e,Ye,!1,I,l,y,b,_.glyphOffsetArray,he,fe,nt,lt,mt,le,A,j);Me=Xt.useVertical,(Xt.notEnoughRoom||Me||Xt.needsFlipping&&Rt(_e,Ye,!0,I,l,y,b,_.glyphOffsetArray,he,fe,nt,lt,mt,le,A,j).notEnoughRoom)&&U(_e.numGlyphs,fe)}g?_.text.dynamicLayoutVertexBuffer.updateData(fe):_.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Et(_,l,d,g,y,b,E,I,A,j,q,W,ie){const fe=I.glyphStartIndex+I.numGlyphs,he=I.lineStartIndex,ge=I.lineStartIndex+I.lineLength,le=l.getoffsetX(I.glyphStartIndex),Me=l.getoffsetX(fe-1),Ue=Y(_*le,d,g,y,b,E,I.segment,he,ge,A,j,q,W,ie);if(!Ue)return null;const _e=Y(_*Me,d,g,y,b,E,I.segment,he,ge,A,j,q,W,ie);return _e?{first:Ue,last:_e}:null}function vt(_,l,d,g){return _===a.ai.horizontal&&Math.abs(d.y-l.y)>Math.abs(d.x-l.x)*g?{useVertical:!0}:(_===a.ai.vertical?l.y<d.y:l.x>d.x)?{needsFlipping:!0}:null}function Rt(_,l,d,g,y,b,E,I,A,j,q,W,ie,fe,he,ge){const le=l/24,Me=_.lineOffsetX*le,Ue=_.lineOffsetY*le;let _e;if(_.numGlyphs>1){const De=_.glyphStartIndex+_.numGlyphs,We=_.lineStartIndex,Ke=_.lineStartIndex+_.lineLength,Ye=Et(le,I,Me,Ue,d,q,W,_,A,b,ie,he,ge);if(!Ye)return{notEnoughRoom:!0};const lt=wt(Ye.first.point,E,ge).point,nt=wt(Ye.last.point,E,ge).point;if(g&&!d){const mt=vt(_.writingMode,lt,nt,fe);if(mt)return mt}_e=[Ye.first];for(let mt=_.glyphStartIndex+1;mt<De-1;mt++)_e.push(Y(le*I.getoffsetX(mt),Me,Ue,d,q,W,_.segment,We,Ke,A,b,ie,he,ge));_e.push(Ye.last)}else{if(g&&!d){const We=wt(W,y,ge).point,Ke=_.lineStartIndex+_.segment+1,Ye=new a.P(A.getx(Ke),A.gety(Ke)),lt=wt(Ye,y,ge),nt=lt.signedDistanceFromCamera>0?lt.point:br(W,Ye,We,1,y,ge),mt=vt(_.writingMode,We,nt,fe);if(mt)return mt}const De=Y(le*I.getoffsetX(_.glyphStartIndex),Me,Ue,d,q,W,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,A,b,ie,he,ge);if(!De)return{notEnoughRoom:!0};_e=[De]}for(const De of _e)a.ak(j,De.point,De.angle);return{}}function br(_,l,d,g,y,b){const E=wt(_.add(_.sub(l)._unit()),y,b).point,I=d.sub(E);return d.add(I._mult(g/I.mag()))}function Ft(_,l){const{projectionCache:d,lineVertexArray:g,labelPlaneMatrix:y,tileAnchorPoint:b,distanceFromAnchor:E,getElevation:I,previousVertex:A,direction:j,absOffsetX:q}=l;if(d.projections[_])return d.projections[_];const W=new a.P(g.getx(_),g.gety(_)),ie=wt(W,y,I);if(ie.signedDistanceFromCamera>0)return d.projections[_]=ie.point,ie.point;const fe=_-j;return br(E===0?b:new a.P(g.getx(fe),g.gety(fe)),W,A,q-E+1,y,I)}function _r(_,l,d){return _._unit()._perp()._mult(l*d)}function ue(_,l,d,g,y,b,E,I){const{projectionCache:A,direction:j}=I;if(A.offsets[_])return A.offsets[_];const q=d.add(l);if(_+j<g||_+j>=y)return A.offsets[_]=q,q;const W=Ft(_+j,I),ie=_r(W.sub(d),E,j),fe=d.add(ie),he=W.add(ie);return A.offsets[_]=a.al(b,q,fe,he)||q,A.offsets[_]}function Y(_,l,d,g,y,b,E,I,A,j,q,W,ie,fe){const he=g?_-l:_+l;let ge=he>0?1:-1,le=0;g&&(ge*=-1,le=Math.PI),ge<0&&(le+=Math.PI);let Me,Ue,_e=ge>0?I+E:I+E+1,De=y,We=y,Ke=0,Ye=0;const lt=Math.abs(he),nt=[];let mt;for(;Ke+Ye<=lt;){if(_e+=ge,_e<I||_e>=A)return null;Ke+=Ye,We=De,Ue=Me;const Pt={projectionCache:W,lineVertexArray:j,labelPlaneMatrix:q,tileAnchorPoint:b,distanceFromAnchor:Ke,getElevation:fe,previousVertex:We,direction:ge,absOffsetX:lt};if(De=Ft(_e,Pt),d===0)nt.push(We),mt=De.sub(We);else{let pr;const Yt=De.sub(We);pr=Yt.mag()===0?_r(Ft(_e+ge,Pt).sub(De),d,ge):_r(Yt,d,ge),Ue||(Ue=We.add(pr)),Me=ue(_e,pr,De,I,A,Ue,d,Pt),nt.push(Ue),mt=Me.sub(Ue)}Ye=mt.mag()}const Xt=mt._mult((lt-Ke)/Ye)._add(Ue||We),zr=le+Math.atan2(De.y-We.y,De.x-We.x);return nt.push(Xt),{point:Xt,angle:ie?zr:0,path:nt}}const ee=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function U(_,l){for(let d=0;d<_;d++){const g=l.length;l.resize(g+4),l.float32.set(ee,3*g)}}function J(_,l,d){const g=l[0],y=l[1];return _[0]=d[0]*g+d[4]*y+d[12],_[1]=d[1]*g+d[5]*y+d[13],_[3]=d[3]*g+d[7]*y+d[15],_}const ne=100;class de{constructor(l,d=new ln(l.width+200,l.height+200,25),g=new ln(l.width+200,l.height+200,25)){this.transform=l,this.grid=d,this.ignoredGrid=g,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+ne,this.screenBottomBoundary=l.height+ne,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,d,g,y,b,E){const I=this.projectAndGetPerspectiveRatio(y,l.anchorPointX,l.anchorPointY,E),A=g*I.perspectiveRatio,j=l.x1*A+I.point.x,q=l.y1*A+I.point.y,W=l.x2*A+I.point.x,ie=l.y2*A+I.point.y;return!this.isInsideGrid(j,q,W,ie)||d!=="always"&&this.grid.hitTest(j,q,W,ie,d,b)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[j,q,W,ie],offscreen:this.isOffscreen(j,q,W,ie)}}placeCollisionCircles(l,d,g,y,b,E,I,A,j,q,W,ie,fe,he){const ge=[],le=new a.P(d.anchorX,d.anchorY),Me=wt(le,E,he),Ue=Ee(this.transform.cameraToCenterDistance,Me.signedDistanceFromCamera),_e=(q?b/Ue:b*Ue)/a.ap,De=wt(le,I,he).point,We=Et(_e,y,d.lineOffsetX*_e,d.lineOffsetY*_e,!1,De,le,d,g,I,{projections:{},offsets:{}},!1,he);let Ke=!1,Ye=!1,lt=!0;if(We){const nt=.5*ie*Ue+fe,mt=new a.P(-100,-100),Xt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),zr=new rr,Pt=We.first,pr=We.last;let Yt=[];for(let Tr=Pt.path.length-1;Tr>=1;Tr--)Yt.push(Pt.path[Tr]);for(let Tr=1;Tr<pr.path.length;Tr++)Yt.push(pr.path[Tr]);const pn=2.5*nt;if(A){const Tr=Yt.map(Lr=>wt(Lr,A,he));Yt=Tr.some(Lr=>Lr.signedDistanceFromCamera<=0)?[]:Tr.map(Lr=>Lr.point)}let Dr=[];if(Yt.length>0){const Tr=Yt[0].clone(),Lr=Yt[0].clone();for(let Kn=1;Kn<Yt.length;Kn++)Tr.x=Math.min(Tr.x,Yt[Kn].x),Tr.y=Math.min(Tr.y,Yt[Kn].y),Lr.x=Math.max(Lr.x,Yt[Kn].x),Lr.y=Math.max(Lr.y,Yt[Kn].y);Dr=Tr.x>=mt.x&&Lr.x<=Xt.x&&Tr.y>=mt.y&&Lr.y<=Xt.y?[Yt]:Lr.x<mt.x||Tr.x>Xt.x||Lr.y<mt.y||Tr.y>Xt.y?[]:a.am([Yt],mt.x,mt.y,Xt.x,Xt.y)}for(const Tr of Dr){zr.reset(Tr,.25*nt);let Lr=0;Lr=zr.length<=.5*nt?1:Math.ceil(zr.paddedLength/pn)+1;for(let Kn=0;Kn<Lr;Kn++){const Cn=Kn/Math.max(Lr-1,1),$i=zr.lerp(Cn),_i=$i.x+ne,ii=$i.y+ne;ge.push(_i,ii,nt,0);const Uo=_i-nt,In=ii-nt,Ya=_i+nt,Qa=ii+nt;if(lt=lt&&this.isOffscreen(Uo,In,Ya,Qa),Ye=Ye||this.isInsideGrid(Uo,In,Ya,Qa),l!=="always"&&this.grid.hitTestCircle(_i,ii,nt,l,W)&&(Ke=!0,!j))return{circles:[],offscreen:!1,collisionDetected:Ke}}}}return{circles:!j&&Ke||!Ye||Ue<this.perspectiveRatioCutoff?[]:ge,offscreen:lt,collisionDetected:Ke}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,y=1/0,b=-1/0,E=-1/0;for(const q of l){const W=new a.P(q.x+ne,q.y+ne);g=Math.min(g,W.x),y=Math.min(y,W.y),b=Math.max(b,W.x),E=Math.max(E,W.y),d.push(W)}const I=this.grid.query(g,y,b,E).concat(this.ignoredGrid.query(g,y,b,E)),A={},j={};for(const q of I){const W=q.key;if(A[W.bucketInstanceId]===void 0&&(A[W.bucketInstanceId]={}),A[W.bucketInstanceId][W.featureIndex])continue;const ie=[new a.P(q.x1,q.y1),new a.P(q.x2,q.y1),new a.P(q.x2,q.y2),new a.P(q.x1,q.y2)];a.an(d,ie)&&(A[W.bucketInstanceId][W.featureIndex]=!0,j[W.bucketInstanceId]===void 0&&(j[W.bucketInstanceId]=[]),j[W.bucketInstanceId].push(W.featureIndex))}return j}insertCollisionBox(l,d,g,y,b,E){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:E,overlapMode:d},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,g,y,b,E){const I=g?this.ignoredGrid:this.grid,A={bucketInstanceId:y,featureIndex:b,collisionGroupID:E,overlapMode:d};for(let j=0;j<l.length;j+=4)I.insertCircle(A,l[j],l[j+1],l[j+2])}projectAndGetPerspectiveRatio(l,d,g,y){let b;return y?(b=[d,g,y(d,g),1],a.ag(b,b,l)):(b=[d,g,0,1],J(b,b,l)),{point:new a.P((b[0]/b[3]+1)/2*this.transform.width+ne,(-b[1]/b[3]+1)/2*this.transform.height+ne),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(l,d,g,y){return g<ne||l>=this.screenRightBoundary||y<ne||d>this.screenBottomBoundary}isInsideGrid(l,d,g,y){return g>=0&&l<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=a.ao([]);return a.$(l,l,[-100,-100,0]),l}}function pe(_,l,d){return l*(a.N/(_.tileSize*Math.pow(2,d-_.tileID.overscaledZ)))}class se{constructor(l,d,g,y){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class xe{constructor(l,d,g,y,b){this.text=new se(l?l.text:null,d,g,b),this.icon=new se(l?l.icon:null,d,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pe{constructor(l,d,g){this.text=l,this.icon=d,this.skipFade=g}}class Le{constructor(){this.invProjMatrix=a.Z(),this.viewportMatrix=a.Z(),this.circles=[]}}class Ae{constructor(l,d,g,y,b){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=b}}class ot{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[l]}}function ht(_,l,d,g,y){const{horizontalAlign:b,verticalAlign:E}=a.au(_);return new a.P(-(b-.5)*l+g[0]*y,-(E-.5)*d+g[1]*y)}function ut(_,l,d,g,y,b){const{x1:E,x2:I,y1:A,y2:j,anchorPointX:q,anchorPointY:W}=_,ie=new a.P(l,d);return g&&ie._rotate(y?b:-b),{x1:E+ie.x,y1:A+ie.y,x2:I+ie.x,y2:j+ie.y,anchorPointX:q,anchorPointY:W}}class Mt{constructor(l,d,g,y,b){this.transform=l.clone(),this.terrain=d,this.collisionIndex=new de(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new ot(y),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,g,y){const b=g.getBucket(d),E=g.latestFeatureIndex;if(!b||!E||d.id!==b.layerIds[0])return;const I=g.collisionBoxArray,A=b.layers[0].layout,j=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),q=g.tileSize/a.N,W=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),ie=A.get("text-pitch-alignment")==="map",fe=A.get("text-rotation-alignment")==="map",he=pe(g,1,this.transform.zoom),ge=je(W,ie,fe,this.transform,he);let le=null;if(ie){const Ue=kt(W,ie,fe,this.transform,he);le=a.a1([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[b.bucketInstanceId]=new Ae(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,g.tileID);const Me={bucket:b,layout:A,posMatrix:W,textLabelPlaneMatrix:ge,labelToScreenMatrix:le,scale:j,textPixelRatio:q,holdingForFade:g.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.ah(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const Ue of b.sortKeyRanges){const{sortKey:_e,symbolInstanceStart:De,symbolInstanceEnd:We}=Ue;l.push({sortKey:_e,symbolInstanceStart:De,symbolInstanceEnd:We,parameters:Me})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(l,d,g,y,b,E,I,A,j,q,W,ie,fe,he,ge,le){const Me=a.aq[l.textAnchor],Ue=[l.textOffset0,l.textOffset1],_e=ht(Me,g,y,Ue,b),De=this.collisionIndex.placeCollisionBox(ut(d,_e.x,_e.y,E,I,this.transform.angle),W,A,j,q.predicate,le);if((!ge||this.collisionIndex.placeCollisionBox(ut(ge,_e.x,_e.y,E,I,this.transform.angle),W,A,j,q.predicate,le).box.length!==0)&&De.box.length>0){let We;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID].text&&(We=this.prevPlacement.variableOffsets[ie.crossTileID].anchor),ie.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ie.crossTileID]={textOffset:Ue,width:g,height:y,anchor:Me,textBoxScale:b,prevAnchor:We},this.markUsedJustification(fe,Me,ie,he),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,he,ie),this.placedOrientations[ie.crossTileID]=he),{shift:_e,placedGlyphBoxes:De}}}placeLayerBucketPart(l,d,g){const{bucket:y,layout:b,posMatrix:E,textLabelPlaneMatrix:I,labelToScreenMatrix:A,textPixelRatio:j,holdingForFade:q,collisionBoxArray:W,partiallyEvaluatedTextSize:ie,collisionGroup:fe}=l.parameters,he=b.get("text-optional"),ge=b.get("icon-optional"),le=a.ar(b,"text-overlap","text-allow-overlap"),Me=le==="always",Ue=a.ar(b,"icon-overlap","icon-allow-overlap"),_e=Ue==="always",De=b.get("text-rotation-alignment")==="map",We=b.get("text-pitch-alignment")==="map",Ke=b.get("icon-text-fit")!=="none",Ye=b.get("symbol-z-order")==="viewport-y",lt=Me&&(_e||!y.hasIconData()||ge),nt=_e&&(Me||!y.hasTextData()||he);!y.collisionArrays&&W&&y.deserializeCollisionBoxes(W);const mt=this.retainedQueryData[y.bucketInstanceId].tileID,Xt=this.terrain?(Pt,pr)=>this.terrain.getElevation(mt,Pt,pr):null,zr=(Pt,pr)=>{var Yt,pn;if(d[Pt.crossTileID])return;if(q)return void(this.placements[Pt.crossTileID]=new Pe(!1,!1,!1));let Dr=!1,Tr=!1,Lr=!0,Kn=null,Cn={box:null,offscreen:null},$i={box:null,offscreen:null},_i=null,ii=null,Uo=null,In=0,Ya=0,Qa=0;pr.textFeatureIndex?In=pr.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(In=Pt.featureIndex),pr.verticalTextFeatureIndex&&(Ya=pr.verticalTextFeatureIndex);const ml=pr.textBox;if(ml){const Ui=Xn=>{let xi=a.ai.horizontal;if(y.allowVerticalPlacement&&!Xn&&this.prevPlacement){const bo=this.prevPlacement.placedOrientations[Pt.crossTileID];bo&&(this.placedOrientations[Pt.crossTileID]=bo,xi=bo,this.markUsedOrientation(y,xi,Pt))}return xi},Bi=(Xn,xi)=>{if(y.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&pr.verticalTextBox){for(const bo of y.writingModes)if(bo===a.ai.vertical?(Cn=xi(),$i=Cn):Cn=Xn(),Cn&&Cn.box&&Cn.box.length)break}else Cn=Xn()},io=Pt.textAnchorOffsetStartIndex,rc=Pt.textAnchorOffsetEndIndex;if(rc===io){const Xn=(xi,bo)=>{const Jn=this.collisionIndex.placeCollisionBox(xi,le,j,E,fe.predicate,Xt);return Jn&&Jn.box&&Jn.box.length&&(this.markUsedOrientation(y,bo,Pt),this.placedOrientations[Pt.crossTileID]=bo),Jn};Bi(()=>Xn(ml,a.ai.horizontal),()=>{const xi=pr.verticalTextBox;return y.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&xi?Xn(xi,a.ai.vertical):{box:null,offscreen:null}}),Ui(Cn&&Cn.box&&Cn.box.length)}else{let Xn=a.aq[(pn=(Yt=this.prevPlacement)===null||Yt===void 0?void 0:Yt.variableOffsets[Pt.crossTileID])===null||pn===void 0?void 0:pn.anchor];const xi=(Jn,nc,Wd)=>{const $0=Jn.x2-Jn.x1,B0=Jn.y2-Jn.y1,Hw=Pt.textBoxScale,Om=Ke&&Ue==="never"?nc:null;let es={box:[],offscreen:!1},ic=le==="never"?1:2,ts="never";Xn&&ic++;for(let ca=0;ca<ic;ca++){for(let rs=io;rs<rc;rs++){const $m=y.textAnchorOffsets.get(rs);if(Xn&&$m.textAnchor!==Xn)continue;const As=this.attemptAnchorPlacement($m,Jn,$0,B0,Hw,De,We,j,E,fe,ts,Pt,y,Wd,Om,Xt);if(As&&(es=As.placedGlyphBoxes,es&&es.box&&es.box.length))return Dr=!0,Kn=As.shift,es}Xn?Xn=null:ts=le}return es};Bi(()=>xi(ml,pr.iconBox,a.ai.horizontal),()=>{const Jn=pr.verticalTextBox;return y.allowVerticalPlacement&&!(Cn&&Cn.box&&Cn.box.length)&&Pt.numVerticalGlyphVertices>0&&Jn?xi(Jn,pr.verticalIconBox,a.ai.vertical):{box:null,offscreen:null}}),Cn&&(Dr=Cn.box,Lr=Cn.offscreen);const bo=Ui(Cn&&Cn.box);if(!Dr&&this.prevPlacement){const Jn=this.prevPlacement.variableOffsets[Pt.crossTileID];Jn&&(this.variableOffsets[Pt.crossTileID]=Jn,this.markUsedJustification(y,Jn.anchor,Pt,bo))}}}if(_i=Cn,Dr=_i&&_i.box&&_i.box.length>0,Lr=_i&&_i.offscreen,Pt.useRuntimeCollisionCircles){const Ui=y.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),Bi=a.aj(y.textSizeData,ie,Ui),io=b.get("text-padding");ii=this.collisionIndex.placeCollisionCircles(le,Ui,y.lineVertexArray,y.glyphOffsetArray,Bi,E,I,A,g,We,fe.predicate,Pt.collisionCircleDiameter,io,Xt),ii.circles.length&&ii.collisionDetected&&!g&&a.w("Collisions detected, but collision boxes are not shown"),Dr=Me||ii.circles.length>0&&!ii.collisionDetected,Lr=Lr&&ii.offscreen}if(pr.iconFeatureIndex&&(Qa=pr.iconFeatureIndex),pr.iconBox){const Ui=Bi=>{const io=Ke&&Kn?ut(Bi,Kn.x,Kn.y,De,We,this.transform.angle):Bi;return this.collisionIndex.placeCollisionBox(io,Ue,j,E,fe.predicate,Xt)};$i&&$i.box&&$i.box.length&&pr.verticalIconBox?(Uo=Ui(pr.verticalIconBox),Tr=Uo.box.length>0):(Uo=Ui(pr.iconBox),Tr=Uo.box.length>0),Lr=Lr&&Uo.offscreen}const tc=he||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,eu=ge||Pt.numIconVertices===0;if(tc||eu?eu?tc||(Tr=Tr&&Dr):Dr=Tr&&Dr:Tr=Dr=Tr&&Dr,Dr&&_i&&_i.box&&this.collisionIndex.insertCollisionBox(_i.box,le,b.get("text-ignore-placement"),y.bucketInstanceId,$i&&$i.box&&Ya?Ya:In,fe.ID),Tr&&Uo&&this.collisionIndex.insertCollisionBox(Uo.box,Ue,b.get("icon-ignore-placement"),y.bucketInstanceId,Qa,fe.ID),ii&&(Dr&&this.collisionIndex.insertCollisionCircles(ii.circles,le,b.get("text-ignore-placement"),y.bucketInstanceId,In,fe.ID),g)){const Ui=y.bucketInstanceId;let Bi=this.collisionCircleArrays[Ui];Bi===void 0&&(Bi=this.collisionCircleArrays[Ui]=new Le);for(let io=0;io<ii.circles.length;io+=4)Bi.circles.push(ii.circles[io+0]),Bi.circles.push(ii.circles[io+1]),Bi.circles.push(ii.circles[io+2]),Bi.circles.push(ii.collisionDetected?1:0)}if(Pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Pt.crossTileID]=new Pe(Dr||lt,Tr||nt,Lr||y.justReloaded),d[Pt.crossTileID]=!0};if(Ye){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Pt=y.getSortedSymbolIndexes(this.transform.angle);for(let pr=Pt.length-1;pr>=0;--pr){const Yt=Pt[pr];zr(y.symbolInstances.get(Yt),y.collisionArrays[Yt])}}else for(let Pt=l.symbolInstanceStart;Pt<l.symbolInstanceEnd;Pt++)zr(y.symbolInstances.get(Pt),y.collisionArrays[Pt]);if(g&&y.bucketInstanceId in this.collisionCircleArrays){const Pt=this.collisionCircleArrays[y.bucketInstanceId];a.as(Pt.invProjMatrix,E),Pt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(l,d,g,y){let b;b=y===a.ai.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[a.at(d)];const E=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const I of E)I>=0&&(l.text.placedSymbolArray.get(I).crossTileID=b>=0&&I!==b?0:g.crossTileID)}markUsedOrientation(l,d,g){const y=d===a.ai.horizontal||d===a.ai.horizontalOnly?d:0,b=d===a.ai.vertical?d:0,E=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const I of E)l.text.placedSymbolArray.get(I).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const y=d?d.symbolFadeChange(l):1,b=d?d.opacities:{},E=d?d.variableOffsets:{},I=d?d.placedOrientations:{};for(const A in this.placements){const j=this.placements[A],q=b[A];q?(this.opacities[A]=new xe(q,y,j.text,j.icon),g=g||j.text!==q.text.placed||j.icon!==q.icon.placed):(this.opacities[A]=new xe(null,y,j.text,j.icon,j.skipFade),g=g||j.text||j.icon)}for(const A in b){const j=b[A];if(!this.opacities[A]){const q=new xe(j,y,!1,!1);q.isHidden()||(this.opacities[A]=q,g=g||j.text.placed||j.icon.placed)}}for(const A in E)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=E[A]);for(const A in I)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=I[A]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d){const g={};for(const y of d){const b=y.getBucket(l);b&&y.latestFeatureIndex&&l.id===b.layerIds[0]&&this.updateBucketOpacities(b,g,y.collisionBoxArray)}}updateBucketOpacities(l,d,g){l.hasTextData()&&(l.text.opacityVertexArray.clear(),l.text.hasVisibleVertices=!1),l.hasIconData()&&(l.icon.opacityVertexArray.clear(),l.icon.hasVisibleVertices=!1),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const y=l.layers[0],b=y.layout,E=new xe(null,0,!1,!1,!0),I=b.get("text-allow-overlap"),A=b.get("icon-allow-overlap"),j=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=b.get("text-rotation-alignment")==="map",W=b.get("text-pitch-alignment")==="map",ie=b.get("icon-text-fit")!=="none",fe=new xe(null,0,I&&(A||!l.hasIconData()||b.get("icon-optional")),A&&(I||!l.hasTextData()||b.get("text-optional")),!0);!l.collisionArrays&&g&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(g);const he=(ge,le,Me)=>{for(let Ue=0;Ue<le/4;Ue++)ge.opacityVertexArray.emplaceBack(Me);ge.hasVisibleVertices=ge.hasVisibleVertices||Me!==Zn};for(let ge=0;ge<l.symbolInstances.length;ge++){const le=l.symbolInstances.get(ge),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Ue,crossTileID:_e}=le;let De=this.opacities[_e];d[_e]?De=E:De||(De=fe,this.opacities[_e]=De),d[_e]=!0;const We=le.numIconVertices>0,Ke=this.placedOrientations[le.crossTileID],Ye=Ke===a.ai.vertical,lt=Ke===a.ai.horizontal||Ke===a.ai.horizontalOnly;if(Me>0||Ue>0){const nt=xn(De.text);he(l.text,Me,Ye?Zn:nt),he(l.text,Ue,lt?Zn:nt);const mt=De.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(Pt=>{Pt>=0&&(l.text.placedSymbolArray.get(Pt).hidden=mt||Ye?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=mt||lt?1:0);const Xt=this.variableOffsets[le.crossTileID];Xt&&this.markUsedJustification(l,Xt.anchor,le,Ke);const zr=this.placedOrientations[le.crossTileID];zr&&(this.markUsedJustification(l,"left",le,zr),this.markUsedOrientation(l,zr,le))}if(We){const nt=xn(De.icon),mt=!(ie&&le.verticalPlacedIconSymbolIndex&&Ye);le.placedIconSymbolIndex>=0&&(he(l.icon,le.numIconVertices,mt?nt:Zn),l.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=De.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(he(l.icon,le.numVerticalIconVertices,mt?Zn:nt),l.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const nt=l.collisionArrays[ge];if(nt){let mt=new a.P(0,0);if(nt.textBox||nt.verticalTextBox){let zr=!0;if(j){const Pt=this.variableOffsets[_e];Pt?(mt=ht(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textBoxScale),q&&mt._rotate(W?this.transform.angle:-this.transform.angle)):zr=!1}nt.textBox&&Oe(l.textCollisionBox.collisionVertexArray,De.text.placed,!zr||Ye,mt.x,mt.y),nt.verticalTextBox&&Oe(l.textCollisionBox.collisionVertexArray,De.text.placed,!zr||lt,mt.x,mt.y)}const Xt=!!(!lt&&nt.verticalIconBox);nt.iconBox&&Oe(l.iconCollisionBox.collisionVertexArray,De.icon.placed,Xt,ie?mt.x:0,ie?mt.y:0),nt.verticalIconBox&&Oe(l.iconCollisionBox.collisionVertexArray,De.icon.placed,!Xt,ie?mt.x:0,ie?mt.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ge.invProjMatrix,l.placementViewportMatrix=ge.viewportMatrix,l.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>l}setStale(){this.stale=!0}}function Oe(_,l,d,g,y){_.emplaceBack(l?1:0,d?1:0,g||0,y||0),_.emplaceBack(l?1:0,d?1:0,g||0,y||0),_.emplaceBack(l?1:0,d?1:0,g||0,y||0),_.emplaceBack(l?1:0,d?1:0,g||0,y||0)}const $e=Math.pow(2,25),tt=Math.pow(2,24),dt=Math.pow(2,17),Lt=Math.pow(2,16),yr=Math.pow(2,9),sr=Math.pow(2,8),Wr=Math.pow(2,1);function xn(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const l=_.placed?1:0,d=Math.floor(127*_.opacity);return d*$e+l*tt+d*dt+l*Lt+d*yr+l*sr+d*Wr+l}const Zn=0;class ll{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,d,g,y,b){const E=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(E,y,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((I,A)=>I.sortKey-A.sortKey));this._currentPartIndex<E.length;)if(d.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,b())return!0;return!1}}class $o{constructor(l,d,g,y,b,E,I,A){this.placement=new Mt(l,d,E,I,A),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(l,d,g){const y=a.h.now(),b=()=>!this._forceFullPlacement&&a.h.now()-y>2;for(;this._currentPlacementIndex>=0;){const E=d[l[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=I)&&(!E.maxzoom||E.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new ll(E)),this._inProgressLayer.continuePlacement(g[E.source],this.placement,this._showCollisionBoxes,E,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Zr=512/a.N/2;class di{constructor(l,d,g){this.tileID=l,this.bucketInstanceId=g,this._symbolsByKey={};const y=new Map;for(let b=0;b<d.length;b++){const E=d.get(b),I=E.key,A=y.get(I);A?A.push(E):y.set(I,[E])}for(const[b,E]of y){const I={positions:E.map(A=>({x:Math.floor(A.anchorX*Zr),y:Math.floor(A.anchorY*Zr)})),crossTileIDs:E.map(A=>A.crossTileID)};if(I.positions.length>128){const A=new a.av(I.positions.length,16,Uint16Array);for(const{x:j,y:q}of I.positions)A.add(j,q);A.finish(),delete I.positions,I.index=A}this._symbolsByKey[b]=I}}getScaledCoordinates(l,d){const{x:g,y,z:b}=this.tileID.canonical,{x:E,y:I,z:A}=d.canonical,j=Zr/Math.pow(2,A-b),q=(I*a.N+l.anchorY)*j,W=y*a.N*Zr;return{x:Math.floor((E*a.N+l.anchorX)*j-g*a.N*Zr),y:Math.floor(q-W)}}findMatches(l,d,g){const y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let b=0;b<l.length;b++){const E=l.get(b);if(E.crossTileID)continue;const I=this._symbolsByKey[E.key];if(!I)continue;const A=this.getScaledCoordinates(E,d);if(I.index){const j=I.index.range(A.x-y,A.y-y,A.x+y,A.y+y).sort();for(const q of j){const W=I.crossTileIDs[q];if(!g[W]){g[W]=!0,E.crossTileID=W;break}}}else if(I.positions)for(let j=0;j<I.positions.length;j++){const q=I.positions[j],W=I.crossTileIDs[j];if(Math.abs(q.x-A.x)<=y&&Math.abs(q.y-A.y)<=y&&!g[W]){g[W]=!0,E.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:l})=>l)}}class Vr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ia{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const g in this.indexes){const y=this.indexes[g],b={};for(const E in y){const I=y[E];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+d),b[I.tileID.key]=I}this.indexes[g]=b}this.lng=l}addBucket(l,d,g){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let b=0;b<d.symbolInstances.length;b++)d.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const y=this.usedCrossTileIDs[l.overscaledZ];for(const b in this.indexes){const E=this.indexes[b];if(Number(b)>l.overscaledZ)for(const I in E){const A=E[I];A.tileID.isChildOf(l)&&A.findMatches(d.symbolInstances,l,y)}else{const I=E[l.scaledTo(Number(b)).key];I&&I.findMatches(d.symbolInstances,l,y)}}for(let b=0;b<d.symbolInstances.length;b++){const E=d.symbolInstances.get(b);E.crossTileID||(E.crossTileID=g.generate(),y[E.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new di(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const g of d.getCrossTileIDsLists())for(const y of g)delete this.usedCrossTileIDs[l][y]}removeStaleBuckets(l){let d=!1;for(const g in this.indexes){const y=this.indexes[g];for(const b in y)l[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[b]),delete y[b],d=!0)}return d}}class Kt{constructor(){this.layerIndexes={},this.crossTileIDs=new Vr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,g){let y=this.layerIndexes[l.id];y===void 0&&(y=this.layerIndexes[l.id]=new ia);let b=!1;const E={};y.handleWrapJump(g);for(const I of d){const A=I.getBucket(l);A&&l.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(I.tileID,A,this.crossTileIDs)&&(b=!0),E[A.bucketInstanceId]=!0)}return y.removeStaleBuckets(E)&&(b=!0),b}pruneUnusedLayers(l){const d={};l.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}const Kr=(_,l)=>a.x(_,l&&l.filter(d=>d.identifier!=="source.canvas")),Yr=a.F(a.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),to=a.F(a.ax,["setCenter","setZoom","setBearing","setPitch"]),ti=a.aw();class ri extends a.E{constructor(l,d={}){super(),this.map=l,this.dispatcher=new at(vr(),this,l._getMapId()),this.imageManager=new ke,this.imageManager.setEventedParent(this),this.glyphManager=new Se(l._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Je(256,512),this.crossTileSymbolIndex=new Kt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.az());const g=this;this._rtlTextPluginCallback=ri.registerForPluginStateChange(y=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(b,E)=>{if(a.aA(b),E&&E.every(I=>I))for(const I in g.sourceCaches){const A=g.sourceCaches[I].getSource().type;A!=="vector"&&A!=="geojson"||g.sourceCaches[I].reload()}})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const b=this.sourceCaches[y.sourceId];if(!b)return;const E=b.getSource();if(E&&E.vectorLayerIds)for(const I in this._layers){const A=this._layers[I];A.source===E.id&&this._validateLayer(A)}})}loadURL(l,d={},g){this.fire(new a.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const y=this.map._requestManager.transformRequest(l,D.Style);this._request=a.f(y,(b,E)=>{this._request=null,b?this.fire(new a.j(b)):E&&this._load(E,d,g)})}loadJSON(l,d={},g){this.fire(new a.k("dataloading",{dataType:"style"})),this._request=a.h.frame(()=>{this._request=null,d.validate=d.validate!==!1,this._load(l,d,g)})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(ti,{validate:!1})}_load(l,d,g){var y;const b=d.transformStyle?d.transformStyle(g,l):l;if(!d.validate||!Kr(this,a.y(b))){this._loaded=!0,this.stylesheet=b;for(const E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Ne(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const l=a.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",l),this._order=l.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of l){const g=a.aC(d);g.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=g}}_loadSprite(l,d=!1,g=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(y,b,E,I){const A=re(y),j=A.length,q=E>1?"@2x":"",W={},ie={},fe={};for(const{id:he,url:ge}of A){const le=b.transformRequest(b.normalizeSpriteURL(ge,q,".json"),D.SpriteJSON),Me=`${he}_${le.url}`;W[Me]=a.f(le,(De,We)=>{delete W[Me],ie[he]=We,ye(I,ie,fe,De,j)});const Ue=b.transformRequest(b.normalizeSpriteURL(ge,q,".png"),D.SpriteImage),_e=`${he}_${Ue.url}`;W[_e]=H.getImage(Ue,(De,We)=>{delete W[_e],fe[he]=We,ye(I,ie,fe,De,j)})}return{cancel(){for(const he of Object.values(W))he.cancel()}}}(l,this.map._requestManager,this.map.getPixelRatio(),(y,b)=>{if(this._spriteRequest=null,y)this.fire(new a.j(y));else if(b)for(const E in b){this._spritesImagesIds[E]=[];const I=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(A=>!(A in b)):[];for(const A of I)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in b[E]){const j=E==="default"?A:`${E}:${A}`;this._spritesImagesIds[E].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,b[E][A],!1):this.imageManager.addImage(j,b[E][A]),d&&(this._changedImages[j]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),g&&g(y)})}_unloadSprite(){for(const l of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(l),this._changedImages[l]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(l){const d=this.sourceCaches[l.source];if(!d)return;const g=l.sourceLayer;if(!g)return;const y=d.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new a.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(l){const d=this._serializedAllLayers();if(!l||l.length===0)return Object.values(d);const g=[];for(const y of l)d[y]&&g.push(d[y]);return g}_serializedAllLayers(){let l=this._serializedLayers;if(l)return l;l=this._serializedLayers={};const d=Object.keys(this._layers);for(const g of d){const y=this._layers[g];y.type!=="custom"&&(l[g]=y.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const d=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const E in this._updatedSources){const I=this._updatedSources[E];if(I==="reload")this._reloadSource(E);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const g={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];g[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(l,this._availableImages),!b.isHidden(l.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in g){const b=this.sourceCaches[y];g[y]!==b.used&&b.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(l),this.z=l.zoom,d&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(l,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(l),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(l,d={}){this._checkLoaded();const g=this.serialize();if(l=d.transformStyle?d.transformStyle(g,l):l,Kr(this,a.y(l)))return!1;(l=a.aD(l)).layers=a.aB(l.layers);const y=a.aE(g,l).filter(E=>!(E.command in to));if(y.length===0)return!1;const b=y.filter(E=>!(E.command in Yr));if(b.length>0)throw new Error(`Unimplemented: ${b.map(E=>E.command).join(", ")}.`);for(const E of y)E.command!=="setTransition"&&this[E.command].apply(this,E.args);return this.stylesheet=l,this._serializedLayers=null,!0}addImage(l,d){if(this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,d),this._afterImageUpdated(l)}updateImage(l,d){this.imageManager.updateImage(l,d)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.j(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,d,g={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.y.source,`sources.${l}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const y=this.sourceCaches[l]=new Cr(l,d,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:l})),y.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===l)return this.fire(new a.j(new Error(`Source "${l}" cannot be removed while layer "${g}" is using it.`)));const d=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],d.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,d){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const g=this.sourceCaches[l].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(d),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,d,g={}){this._checkLoaded();const y=l.id;if(this.getLayer(y))return void this.fire(new a.j(new Error(`Layer "${y}" already exists on this map.`)));let b;if(l.type==="custom"){if(Kr(this,a.aF(l)))return;b=a.aC(l)}else{if("source"in l&&typeof l.source=="object"&&(this.addSource(y,l.source),l=a.aD(l),l=a.e(l,{source:y})),this._validate(a.y.layer,`layers.${y}`,l,{arrayIndex:-1},g))return;b=a.aC(l),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const E=d?this._order.indexOf(d):this._order.length;if(d&&E===-1)this.fire(new a.j(new Error(`Cannot add layer "${y}" before non-existing layer "${d}".`)));else{if(this._order.splice(E,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const I=this._removedLayers[y];delete this._removedLayers[y],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(l,d){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.j(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===d)return;const g=this._order.indexOf(l);this._order.splice(g,1);const y=d?this._order.indexOf(d):this._order.length;d&&y===-1?this.fire(new a.j(new Error(`Cannot move layer "${l}" before non-existing layer "${d}".`))):(this._order.splice(y,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const d=this._layers[l];if(!d)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${l}".`)));d.setEventedParent(null);const g=this._order.indexOf(l);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=d,delete this._layers[l],this._serializedLayers&&delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],d.onRemove&&d.onRemove(this.map)}getLayer(l){return this._layers[l]}getLayersOrder(){return[...this._order]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,d,g){this._checkLoaded();const y=this.getLayer(l);y?y.minzoom===d&&y.maxzoom===g||(d!=null&&(y.minzoom=d),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,d,g={}){this._checkLoaded();const y=this.getLayer(l);if(y){if(!a.aG(y.filter,d))return d==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(a.y.filter,`layers.${y.id}.filter`,d,null,g)||(y.filter=a.aD(d),this._updateLayer(y)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.aD(this.getLayer(l).filter)}setLayoutProperty(l,d,g,y={}){this._checkLoaded();const b=this.getLayer(l);b?a.aG(b.getLayoutProperty(d),g)||(b.setLayoutProperty(d,g,y),this._updateLayer(b)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,d){const g=this.getLayer(l);if(g)return g.getLayoutProperty(d);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,d,g,y={}){this._checkLoaded();const b=this.getLayer(l);b?a.aG(b.getPaintProperty(d),g)||(b.setPaintProperty(d,g,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,d){return this.getLayer(l).getPaintProperty(d)}setFeatureState(l,d){this._checkLoaded();const g=l.source,y=l.sourceLayer,b=this.sourceCaches[g];if(b===void 0)return void this.fire(new a.j(new Error(`The source '${g}' does not exist in the map's style.`)));const E=b.getSource().type;E==="geojson"&&y?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||y?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,l.id,d)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,d){this._checkLoaded();const g=l.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new a.j(new Error(`The source '${g}' does not exist in the map's style.`)));const b=y.getSource().type,E=b==="vector"?l.sourceLayer:void 0;b!=="vector"||E?d&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(E,l.id,d):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const d=l.source,g=l.sourceLayer,y=this.sourceCaches[d];if(y!==void 0)return y.getSource().type!=="vector"||g?(l.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,l.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const l=a.aH(this.sourceCaches,b=>b.serialize()),d=this._serializeByIds(this._order),g=this.map.getTerrain()||void 0,y=this.stylesheet;return a.aI({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:l,layers:d,terrain:g},b=>b!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(l){const d=E=>this._layers[E].type==="fill-extrusion",g={},y=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(d(I)){g[I]=E;for(const A of l){const j=A[I];if(j)for(const q of j)y.push(q)}}}y.sort((E,I)=>I.intersectionZ-E.intersectionZ);const b=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(d(I))for(let A=y.length-1;A>=0;A--){const j=y[A].feature;if(g[j.layer.id]<E)break;b.push(j),y.pop()}else for(const A of l){const j=A[I];if(j)for(const q of j)b.push(q.feature)}}return b}queryRenderedFeatures(l,d,g){d&&d.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const y={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const I of d.layers){const A=this._layers[I];if(!A)return this.fire(new a.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];y[A.source]=!0}}const b=[];d.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const I in this.sourceCaches)d.layers&&!y[I]||b.push(It(this.sourceCaches[I],this._layers,E,l,d,g));return this.placement&&b.push(function(I,A,j,q,W,ie,fe){const he={},ge=ie.queryRenderedSymbols(q),le=[];for(const Me of Object.keys(ge).map(Number))le.push(fe[Me]);le.sort(gr);for(const Me of le){const Ue=Me.featureIndex.lookupSymbolFeatures(ge[Me.bucketInstanceId],A,Me.bucketIndex,Me.sourceLayerIndex,W.filter,W.layers,W.availableImages,I);for(const _e in Ue){const De=he[_e]=he[_e]||[],We=Ue[_e];We.sort((Ke,Ye)=>{const lt=Me.featureSortOrder;if(lt){const nt=lt.indexOf(Ke.featureIndex);return lt.indexOf(Ye.featureIndex)-nt}return Ye.featureIndex-Ke.featureIndex});for(const Ke of We)De.push(Ke)}}for(const Me in he)he[Me].forEach(Ue=>{const _e=Ue.feature,De=j[I[Me].source].getFeatureState(_e.layer["source-layer"],_e.id);_e.source=_e.layer.source,_e.layer["source-layer"]&&(_e.sourceLayer=_e.layer["source-layer"]),_e.state=De});return he}(this._layers,E,this.sourceCaches,l,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(l,d){d&&d.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",d.filter,null,d);const g=this.sourceCaches[l];return g?function(y,b){const E=y.getRenderableIds().map(j=>y.getTileByID(j)),I=[],A={};for(let j=0;j<E.length;j++){const q=E[j],W=q.tileID.canonical.key;A[W]||(A[W]=!0,q.querySourceFeatures(I,b))}return I}(g,d):[]}addSourceType(l,d,g){return jr(l)?g(new Error(`A source type called "${l}" already exists.`)):(((y,b)=>{Er[y]=b})(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(l,d={}){this._checkLoaded();const g=this.light.getLight();let y=!1;for(const E in l)if(!a.aG(l[E],g[E])){y=!0;break}if(!y)return;const b={now:a.h.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,d),this.light.updateTransitions(b)}_validate(l,d,g,y,b={}){return(!b||b.validate!==!1)&&Kr(this,l.call(a.y,a.e({key:d,style:this.serialize(),value:g,styleSpec:a.v},y)))}_remove(l=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const g=this.sourceCaches[d];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(l)}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const d in this.sourceCaches)this.sourceCaches[d].update(l,this.map.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,d,g,y,b=!1){let E=!1,I=!1;const A={};for(const j of this._order){const q=this._layers[j];if(q.type!=="symbol")continue;if(!A[q.source]){const ie=this.sourceCaches[q.source];A[q.source]=ie.getRenderableIds(!0).map(fe=>ie.getTileByID(fe)).sort((fe,he)=>he.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(he.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(q,A[q.source],l.center.lng);E=E||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.h.now(),l.zoom))&&(this.pauseablePlacement=new $o(l,this.map.terrain,this._order,b,d,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.h.now()),I=!0),E&&this.pauseablePlacement.placement.setStale()),I||E)for(const j of this._order){const q=this._layers[j];q.type==="symbol"&&this.placement.updateLayerOpacities(q,A[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.h.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const y=this.sourceCaches[d.source];y&&y.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(l,d,g){this.glyphManager.getGlyphs(d.stacks,g);const y=this.sourceCaches[d.source];y&&y.setDependencies(d.tileID.key,d.type,[""])}getResource(l,d,g){return a.m(d,g)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(l,d={}){this._checkLoaded(),l&&this._validate(a.y.glyphs,"glyphs",l,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=l,this.glyphManager.entries={},this.glyphManager.setURL(l))}addSprite(l,d,g={},y){this._checkLoaded();const b=[{id:l,url:d}],E=[...re(this.stylesheet.sprite),...b];this._validate(a.y.sprite,"sprite",E,null,g)||(this.stylesheet.sprite=E,this._loadSprite(b,!0,y))}removeSprite(l){this._checkLoaded();const d=re(this.stylesheet.sprite);if(d.find(g=>g.id===l)){if(this._spritesImagesIds[l])for(const g of this._spritesImagesIds[l])this.imageManager.removeImage(g),this._changedImages[g]=!0;d.splice(d.findIndex(g=>g.id===l),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[l],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${l}" doesn't exists on this map.`)))}getSprite(){return re(this.stylesheet.sprite)}setSprite(l,d={},g){this._checkLoaded(),l&&this._validate(a.y.sprite,"sprite",l,null,d)||(this.stylesheet.sprite=l,l?this._loadSprite(l,!0,g):(this._unloadSprite(),g&&g(null)))}}ri.registerForPluginStateChange=a.aK;var Bo=a.Q([{name:"a_pos",type:"Int16",components:2}]),ro="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const $n={prelude:nn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:nn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:nn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:nn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:nn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:nn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:nn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:nn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:nn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:nn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:nn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:nn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ro),terrainDepth:nn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ro),terrainCoords:nn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ro)};function nn(_,l){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute ([\w]+) ([\w]+)/g),y=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=b?b.concat(y):y,I={};return{fragmentSource:_=_.replace(d,(A,j,q,W,ie)=>(I[ie]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
varying ${q} ${W} ${ie};
#else
uniform ${q} ${W} u_${ie};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ie}
    ${q} ${W} ${ie} = u_${ie};
#endif
`)),vertexSource:l=l.replace(d,(A,j,q,W,ie)=>{const fe=W==="float"?"vec2":"vec4",he=ie.match(/color/)?"color":fe;return I[ie]?j==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
attribute ${q} ${fe} a_${ie};
varying ${q} ${W} ${ie};
#else
uniform ${q} ${W} u_${ie};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = a_${ie};
#else
    ${q} ${W} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = unpack_mix_${he}(a_${ie}, u_${ie}_t);
#else
    ${q} ${W} ${ie} = u_${ie};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
attribute ${q} ${fe} a_${ie};
#else
uniform ${q} ${W} u_${ie};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${q} ${W} ${ie} = a_${ie};
#else
    ${q} ${W} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${q} ${W} ${ie} = unpack_mix_${he}(a_${ie}, u_${ie}_t);
#else
    ${q} ${W} ${ie} = u_${ie};
#endif
`}),staticAttributes:g,staticUniforms:E}}class Wl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,d,g,y,b,E,I,A,j){this.context=l;let q=this.boundPaintVertexBuffers.length!==y.length;for(let W=0;!q&&W<y.length;W++)this.boundPaintVertexBuffers[W]!==y[W]&&(q=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||q||this.boundIndexBuffer!==b||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==j?this.freshBind(d,g,y,b,E,I,A,j):(l.bindVertexArray.set(this.vao),I&&I.bind(),b&&b.dynamicDraw&&b.bind(),A&&A.bind(),j&&j.bind())}freshBind(l,d,g,y,b,E,I,A){const j=l.numAttributes,q=this.context,W=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=A,d.enableAttributes(W,l);for(const ie of g)ie.enableAttributes(W,l);E&&E.enableAttributes(W,l),I&&I.enableAttributes(W,l),A&&A.enableAttributes(W,l),d.bind(),d.setVertexAttribPointers(W,l,b);for(const ie of g)ie.bind(),ie.setVertexAttribPointers(W,l,b);E&&(E.bind(),E.setVertexAttribPointers(W,l,b)),y&&y.bind(),I&&(I.bind(),I.setVertexAttribPointers(W,l,b)),A&&(A.bind(),A.setVertexAttribPointers(W,l,b)),q.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Un(_){const l=[];for(let d=0;d<_.length;d++){if(_[d]===null)continue;const g=_[d].split(" ");l.push(g.pop())}return l}class bd{constructor(l,d,g,y,b,E){const I=l.gl;this.program=I.createProgram();const A=Un(d.staticAttributes),j=g?g.getBinderAttributes():[],q=A.concat(j),W=$n.prelude.staticUniforms?Un($n.prelude.staticUniforms):[],ie=d.staticUniforms?Un(d.staticUniforms):[],fe=g?g.getBinderUniforms():[],he=W.concat(ie).concat(fe),ge=[];for(const Ke of he)ge.indexOf(Ke)<0&&ge.push(Ke);const le=g?g.defines():[];b&&le.push("#define OVERDRAW_INSPECTOR;"),E&&le.push("#define TERRAIN3D;");const Me=le.concat($n.prelude.fragmentSource,d.fragmentSource).join(`
`),Ue=le.concat($n.prelude.vertexSource,d.vertexSource).join(`
`),_e=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(_e,Me),I.compileShader(_e),!I.getShaderParameter(_e,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(_e)}`);I.attachShader(this.program,_e);const De=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(De,Ue),I.compileShader(De),!I.getShaderParameter(De,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(De)}`);I.attachShader(this.program,De),this.attributes={};const We={};this.numAttributes=q.length;for(let Ke=0;Ke<this.numAttributes;Ke++)q[Ke]&&(I.bindAttribLocation(this.program,Ke,q[Ke]),this.attributes[q[Ke]]=Ke);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(De),I.deleteShader(_e);for(let Ke=0;Ke<ge.length;Ke++){const Ye=ge[Ke];if(Ye&&!We[Ye]){const lt=I.getUniformLocation(this.program,Ye);lt&&(We[Ye]=lt)}}this.fixedUniforms=y(l,We),this.terrainUniforms=((Ke,Ye)=>({u_depth:new a.aL(Ke,Ye.u_depth),u_terrain:new a.aL(Ke,Ye.u_terrain),u_terrain_dim:new a.aM(Ke,Ye.u_terrain_dim),u_terrain_matrix:new a.aN(Ke,Ye.u_terrain_matrix),u_terrain_unpack:new a.aO(Ke,Ye.u_terrain_unpack),u_terrain_exaggeration:new a.aM(Ke,Ye.u_terrain_exaggeration)}))(l,We),this.binderUniforms=g?g.getUniforms(l,We):[]}draw(l,d,g,y,b,E,I,A,j,q,W,ie,fe,he,ge,le,Me,Ue){const _e=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(g),l.setStencilMode(y),l.setColorMode(b),l.setCullFace(E),A){l.activeTexture.set(_e.TEXTURE2),_e.bindTexture(_e.TEXTURE_2D,A.depthTexture),l.activeTexture.set(_e.TEXTURE3),_e.bindTexture(_e.TEXTURE_2D,A.texture);for(const We in this.terrainUniforms)this.terrainUniforms[We].set(A[We])}for(const We in this.fixedUniforms)this.fixedUniforms[We].set(I[We]);ge&&ge.setUniforms(l,this.binderUniforms,fe,{zoom:he});let De=0;switch(d){case _e.LINES:De=2;break;case _e.TRIANGLES:De=3;break;case _e.LINE_STRIP:De=1}for(const We of ie.get()){const Ke=We.vaos||(We.vaos={});(Ke[j]||(Ke[j]=new Wl)).bind(l,this,q,ge?ge.getPaintVertexBuffers():[],W,We.vertexOffset,le,Me,Ue),_e.drawElements(d,We.primitiveLength*De,_e.UNSIGNED_SHORT,We.primitiveOffset*De*2)}}}function oa(_,l,d){const g=1/pe(d,1,l.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),b=d.tileSize*Math.pow(2,l.transform.tileZoom)/y,E=b*(d.tileID.canonical.x+d.tileID.wrap*y),I=b*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[g,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}const Xp=(_,l,d,g)=>{const y=l.style.light,b=y.properties.get("position"),E=[b.x,b.y,b.z],I=function(){var j=new a.A(9);return a.A!=Float32Array&&(j[1]=0,j[2]=0,j[3]=0,j[5]=0,j[6]=0,j[7]=0),j[0]=1,j[4]=1,j[8]=1,j}();y.properties.get("anchor")==="viewport"&&function(j,q){var W=Math.sin(q),ie=Math.cos(q);j[0]=ie,j[1]=W,j[2]=0,j[3]=-W,j[4]=ie,j[5]=0,j[6]=0,j[7]=0,j[8]=1}(I,-l.transform.angle),function(j,q,W){var ie=q[0],fe=q[1],he=q[2];j[0]=ie*W[0]+fe*W[3]+he*W[6],j[1]=ie*W[1]+fe*W[4]+he*W[7],j[2]=ie*W[2]+fe*W[5]+he*W[8]}(E,E,I);const A=y.properties.get("color");return{u_matrix:_,u_lightpos:E,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+d,u_opacity:g}},cl=(_,l,d,g,y,b,E)=>a.e(Xp(_,l,d,g),oa(b,l,E),{u_height_factor:-Math.pow(2,y.overscaledZ)/E.tileSize/8}),e0=_=>({u_matrix:_}),Jp=(_,l,d,g)=>a.e(e0(_),oa(d,l,g)),wd=(_,l)=>({u_matrix:_,u_world:l}),Sd=(_,l,d,g,y)=>a.e(Jp(_,l,d,g),{u_world:y}),ul=(_,l,d,g)=>{const y=_.transform;let b,E;if(g.paint.get("circle-pitch-alignment")==="map"){const I=pe(d,1,y.zoom);b=!0,E=[I,I]}else b=!1,E=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(l.posMatrix,d,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:E}},Yp=(_,l,d)=>{const g=pe(d,1,l.zoom),y=Math.pow(2,l.zoom-d.tileID.overscaledZ),b=d.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[l.pixelsToGLUnits[0]/(g*y),l.pixelsToGLUnits[1]/(g*y)],u_overscale_factor:b}},th=(_,l,d=1)=>({u_matrix:_,u_color:l,u_overlay:0,u_overlay_scale:d}),t0=_=>({u_matrix:_}),Mw=(_,l,d,g)=>({u_matrix:_,u_extrude_scale:pe(l,1,d),u_intensity:g});function Qp(_,l){const d=Math.pow(2,l.canonical.z),g=l.canonical.y;return[new a.U(0,g/d).toLngLat().lat,new a.U(0,(g+1)/d).toLngLat().lat]}const em=(_,l,d,g)=>{const y=_.transform;return{u_matrix:Cd(_,l,d,g),u_ratio:1/pe(l,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},r0=(_,l,d,g,y)=>a.e(em(_,l,d,y),{u_image:0,u_image_height:g}),Pw=(_,l,d,g,y)=>{const b=_.transform,E=i0(l,b);return{u_matrix:Cd(_,l,d,y),u_texsize:l.imageAtlasTexture.size,u_ratio:1/pe(l,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[E,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},n0=(_,l,d,g,y,b)=>{const E=_.lineAtlas,I=i0(l,_.transform),A=d.layout.get("line-cap")==="round",j=E.getDash(g.from,A),q=E.getDash(g.to,A),W=j.width*y.fromScale,ie=q.width*y.toScale;return a.e(em(_,l,d,b),{u_patternscale_a:[I/W,-j.height/2],u_patternscale_b:[I/ie,-q.height/2],u_sdfgamma:E.width/(256*Math.min(W,ie)*_.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:q.y,u_mix:y.t})};function i0(_,l){return 1/pe(_,1,l.tileZoom)}function Cd(_,l,d,g){return _.translatePosMatrix(g?g.posMatrix:l.tileID.posMatrix,l,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const o0=(_,l,d,g,y)=>{return{u_matrix:_,u_tl_parent:l,u_scale_parent:d,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(E=y.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:a0(y.paint.get("raster-hue-rotate"))};var b,E};function a0(_){_*=Math.PI/180;const l=Math.sin(_),d=Math.cos(_);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const tm=(_,l,d,g,y,b,E,I,A,j)=>{const q=y.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:q.cameraToCenterDistance,u_pitch:q.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:q.width/q.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:E,u_coord_matrix:I,u_is_text:+A,u_pitch_with_map:+g,u_texsize:j,u_texture:0}},rm=(_,l,d,g,y,b,E,I,A,j,q)=>{const W=y.transform;return a.e(tm(_,l,d,g,y,b,E,I,A,j),{u_gamma_scale:g?Math.cos(W._pitch)*W.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+q})},Zl=(_,l,d,g,y,b,E,I,A,j)=>a.e(rm(_,l,d,g,y,b,E,I,!0,A,!0),{u_texsize_icon:j,u_texture_icon:1}),Td=(_,l,d)=>({u_matrix:_,u_opacity:l,u_color:d}),aa=(_,l,d,g,y,b)=>a.e(function(E,I,A,j){const q=A.imageManager.getPattern(E.from.toString()),W=A.imageManager.getPattern(E.to.toString()),{width:ie,height:fe}=A.imageManager.getPixelSize(),he=Math.pow(2,j.tileID.overscaledZ),ge=j.tileSize*Math.pow(2,A.transform.tileZoom)/he,le=ge*(j.tileID.canonical.x+j.tileID.wrap*he),Me=ge*j.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:q.tl,u_pattern_br_a:q.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[ie,fe],u_mix:I.t,u_pattern_size_a:q.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/pe(j,1,A.transform.tileZoom),u_pixel_coord_upper:[le>>16,Me>>16],u_pixel_coord_lower:[65535&le,65535&Me]}}(g,b,d,y),{u_matrix:_,u_opacity:l}),kd={fillExtrusion:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_lightpos:new a.aP(_,l.u_lightpos),u_lightintensity:new a.aM(_,l.u_lightintensity),u_lightcolor:new a.aP(_,l.u_lightcolor),u_vertical_gradient:new a.aM(_,l.u_vertical_gradient),u_opacity:new a.aM(_,l.u_opacity)}),fillExtrusionPattern:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_lightpos:new a.aP(_,l.u_lightpos),u_lightintensity:new a.aM(_,l.u_lightintensity),u_lightcolor:new a.aP(_,l.u_lightcolor),u_vertical_gradient:new a.aM(_,l.u_vertical_gradient),u_height_factor:new a.aM(_,l.u_height_factor),u_image:new a.aL(_,l.u_image),u_texsize:new a.aQ(_,l.u_texsize),u_pixel_coord_upper:new a.aQ(_,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(_,l.u_pixel_coord_lower),u_scale:new a.aP(_,l.u_scale),u_fade:new a.aM(_,l.u_fade),u_opacity:new a.aM(_,l.u_opacity)}),fill:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix)}),fillPattern:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_image:new a.aL(_,l.u_image),u_texsize:new a.aQ(_,l.u_texsize),u_pixel_coord_upper:new a.aQ(_,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(_,l.u_pixel_coord_lower),u_scale:new a.aP(_,l.u_scale),u_fade:new a.aM(_,l.u_fade)}),fillOutline:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_world:new a.aQ(_,l.u_world)}),fillOutlinePattern:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_world:new a.aQ(_,l.u_world),u_image:new a.aL(_,l.u_image),u_texsize:new a.aQ(_,l.u_texsize),u_pixel_coord_upper:new a.aQ(_,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(_,l.u_pixel_coord_lower),u_scale:new a.aP(_,l.u_scale),u_fade:new a.aM(_,l.u_fade)}),circle:(_,l)=>({u_camera_to_center_distance:new a.aM(_,l.u_camera_to_center_distance),u_scale_with_map:new a.aL(_,l.u_scale_with_map),u_pitch_with_map:new a.aL(_,l.u_pitch_with_map),u_extrude_scale:new a.aQ(_,l.u_extrude_scale),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_matrix:new a.aN(_,l.u_matrix)}),collisionBox:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_camera_to_center_distance:new a.aM(_,l.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aM(_,l.u_pixels_to_tile_units),u_extrude_scale:new a.aQ(_,l.u_extrude_scale),u_overscale_factor:new a.aM(_,l.u_overscale_factor)}),collisionCircle:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_inv_matrix:new a.aN(_,l.u_inv_matrix),u_camera_to_center_distance:new a.aM(_,l.u_camera_to_center_distance),u_viewport_size:new a.aQ(_,l.u_viewport_size)}),debug:(_,l)=>({u_color:new a.aR(_,l.u_color),u_matrix:new a.aN(_,l.u_matrix),u_overlay:new a.aL(_,l.u_overlay),u_overlay_scale:new a.aM(_,l.u_overlay_scale)}),clippingMask:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix)}),heatmap:(_,l)=>({u_extrude_scale:new a.aM(_,l.u_extrude_scale),u_intensity:new a.aM(_,l.u_intensity),u_matrix:new a.aN(_,l.u_matrix)}),heatmapTexture:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_world:new a.aQ(_,l.u_world),u_image:new a.aL(_,l.u_image),u_color_ramp:new a.aL(_,l.u_color_ramp),u_opacity:new a.aM(_,l.u_opacity)}),hillshade:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_image:new a.aL(_,l.u_image),u_latrange:new a.aQ(_,l.u_latrange),u_light:new a.aQ(_,l.u_light),u_shadow:new a.aR(_,l.u_shadow),u_highlight:new a.aR(_,l.u_highlight),u_accent:new a.aR(_,l.u_accent)}),hillshadePrepare:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_image:new a.aL(_,l.u_image),u_dimension:new a.aQ(_,l.u_dimension),u_zoom:new a.aM(_,l.u_zoom),u_unpack:new a.aO(_,l.u_unpack)}),line:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_ratio:new a.aM(_,l.u_ratio),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(_,l.u_units_to_pixels)}),lineGradient:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_ratio:new a.aM(_,l.u_ratio),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(_,l.u_units_to_pixels),u_image:new a.aL(_,l.u_image),u_image_height:new a.aM(_,l.u_image_height)}),linePattern:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_texsize:new a.aQ(_,l.u_texsize),u_ratio:new a.aM(_,l.u_ratio),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_image:new a.aL(_,l.u_image),u_units_to_pixels:new a.aQ(_,l.u_units_to_pixels),u_scale:new a.aP(_,l.u_scale),u_fade:new a.aM(_,l.u_fade)}),lineSDF:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_ratio:new a.aM(_,l.u_ratio),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_units_to_pixels:new a.aQ(_,l.u_units_to_pixels),u_patternscale_a:new a.aQ(_,l.u_patternscale_a),u_patternscale_b:new a.aQ(_,l.u_patternscale_b),u_sdfgamma:new a.aM(_,l.u_sdfgamma),u_image:new a.aL(_,l.u_image),u_tex_y_a:new a.aM(_,l.u_tex_y_a),u_tex_y_b:new a.aM(_,l.u_tex_y_b),u_mix:new a.aM(_,l.u_mix)}),raster:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_tl_parent:new a.aQ(_,l.u_tl_parent),u_scale_parent:new a.aM(_,l.u_scale_parent),u_buffer_scale:new a.aM(_,l.u_buffer_scale),u_fade_t:new a.aM(_,l.u_fade_t),u_opacity:new a.aM(_,l.u_opacity),u_image0:new a.aL(_,l.u_image0),u_image1:new a.aL(_,l.u_image1),u_brightness_low:new a.aM(_,l.u_brightness_low),u_brightness_high:new a.aM(_,l.u_brightness_high),u_saturation_factor:new a.aM(_,l.u_saturation_factor),u_contrast_factor:new a.aM(_,l.u_contrast_factor),u_spin_weights:new a.aP(_,l.u_spin_weights)}),symbolIcon:(_,l)=>({u_is_size_zoom_constant:new a.aL(_,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(_,l.u_is_size_feature_constant),u_size_t:new a.aM(_,l.u_size_t),u_size:new a.aM(_,l.u_size),u_camera_to_center_distance:new a.aM(_,l.u_camera_to_center_distance),u_pitch:new a.aM(_,l.u_pitch),u_rotate_symbol:new a.aL(_,l.u_rotate_symbol),u_aspect_ratio:new a.aM(_,l.u_aspect_ratio),u_fade_change:new a.aM(_,l.u_fade_change),u_matrix:new a.aN(_,l.u_matrix),u_label_plane_matrix:new a.aN(_,l.u_label_plane_matrix),u_coord_matrix:new a.aN(_,l.u_coord_matrix),u_is_text:new a.aL(_,l.u_is_text),u_pitch_with_map:new a.aL(_,l.u_pitch_with_map),u_texsize:new a.aQ(_,l.u_texsize),u_texture:new a.aL(_,l.u_texture)}),symbolSDF:(_,l)=>({u_is_size_zoom_constant:new a.aL(_,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(_,l.u_is_size_feature_constant),u_size_t:new a.aM(_,l.u_size_t),u_size:new a.aM(_,l.u_size),u_camera_to_center_distance:new a.aM(_,l.u_camera_to_center_distance),u_pitch:new a.aM(_,l.u_pitch),u_rotate_symbol:new a.aL(_,l.u_rotate_symbol),u_aspect_ratio:new a.aM(_,l.u_aspect_ratio),u_fade_change:new a.aM(_,l.u_fade_change),u_matrix:new a.aN(_,l.u_matrix),u_label_plane_matrix:new a.aN(_,l.u_label_plane_matrix),u_coord_matrix:new a.aN(_,l.u_coord_matrix),u_is_text:new a.aL(_,l.u_is_text),u_pitch_with_map:new a.aL(_,l.u_pitch_with_map),u_texsize:new a.aQ(_,l.u_texsize),u_texture:new a.aL(_,l.u_texture),u_gamma_scale:new a.aM(_,l.u_gamma_scale),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_is_halo:new a.aL(_,l.u_is_halo)}),symbolTextAndIcon:(_,l)=>({u_is_size_zoom_constant:new a.aL(_,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aL(_,l.u_is_size_feature_constant),u_size_t:new a.aM(_,l.u_size_t),u_size:new a.aM(_,l.u_size),u_camera_to_center_distance:new a.aM(_,l.u_camera_to_center_distance),u_pitch:new a.aM(_,l.u_pitch),u_rotate_symbol:new a.aL(_,l.u_rotate_symbol),u_aspect_ratio:new a.aM(_,l.u_aspect_ratio),u_fade_change:new a.aM(_,l.u_fade_change),u_matrix:new a.aN(_,l.u_matrix),u_label_plane_matrix:new a.aN(_,l.u_label_plane_matrix),u_coord_matrix:new a.aN(_,l.u_coord_matrix),u_is_text:new a.aL(_,l.u_is_text),u_pitch_with_map:new a.aL(_,l.u_pitch_with_map),u_texsize:new a.aQ(_,l.u_texsize),u_texsize_icon:new a.aQ(_,l.u_texsize_icon),u_texture:new a.aL(_,l.u_texture),u_texture_icon:new a.aL(_,l.u_texture_icon),u_gamma_scale:new a.aM(_,l.u_gamma_scale),u_device_pixel_ratio:new a.aM(_,l.u_device_pixel_ratio),u_is_halo:new a.aL(_,l.u_is_halo)}),background:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_opacity:new a.aM(_,l.u_opacity),u_color:new a.aR(_,l.u_color)}),backgroundPattern:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_opacity:new a.aM(_,l.u_opacity),u_image:new a.aL(_,l.u_image),u_pattern_tl_a:new a.aQ(_,l.u_pattern_tl_a),u_pattern_br_a:new a.aQ(_,l.u_pattern_br_a),u_pattern_tl_b:new a.aQ(_,l.u_pattern_tl_b),u_pattern_br_b:new a.aQ(_,l.u_pattern_br_b),u_texsize:new a.aQ(_,l.u_texsize),u_mix:new a.aM(_,l.u_mix),u_pattern_size_a:new a.aQ(_,l.u_pattern_size_a),u_pattern_size_b:new a.aQ(_,l.u_pattern_size_b),u_scale_a:new a.aM(_,l.u_scale_a),u_scale_b:new a.aM(_,l.u_scale_b),u_pixel_coord_upper:new a.aQ(_,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.aQ(_,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aM(_,l.u_tile_units_to_pixels)}),terrain:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_texture:new a.aL(_,l.u_texture),u_ele_delta:new a.aM(_,l.u_ele_delta)}),terrainDepth:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_ele_delta:new a.aM(_,l.u_ele_delta)}),terrainCoords:(_,l)=>({u_matrix:new a.aN(_,l.u_matrix),u_texture:new a.aL(_,l.u_texture),u_terrain_coords_id:new a.aM(_,l.u_terrain_coords_id),u_ele_delta:new a.aM(_,l.u_ele_delta)})};class Ed{constructor(l,d,g){this.context=l;const y=l.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const rh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Id{constructor(l,d,g,y){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=l;const b=l.gl;this.buffer=b.createBuffer(),l.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let g=0;g<this.attributes.length;g++){const y=d.attributes[this.attributes[g].name];y!==void 0&&l.enableVertexAttribArray(y)}}setVertexAttribPointers(l,d,g){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],E=d.attributes[b.name];E!==void 0&&l.vertexAttribPointer(E,b.components,l[rh[b.type]],!1,this.itemSize,b.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hc=new WeakMap;function hl(_){var l;if(Hc.has(_))return Hc.get(_);{const d=(l=_.getParameter(_.VERSION))===null||l===void 0?void 0:l.startsWith("WebGL 2.0");return Hc.set(_,d),d}}class Ur{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Md extends Ur{getDefault(){return a.aT.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Fo extends Ur{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class No extends Ur{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class nm extends Ur{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Pd extends Ur{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Ad extends Ur{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class im extends Ur{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class om extends Ur{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Rd extends Ur{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class am extends Ur{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class sm extends Ur{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class Dd extends Ur{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class s0 extends Ur{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class l0 extends Ur{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Gc extends Ur{getDefault(){return a.aT.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Aw extends Ur{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class Rw extends Ur{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class Dw extends Ur{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class zw extends Ur{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Lw extends Ur{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Ow extends Ur{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class lm extends Ur{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class zd extends Ur{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class cm extends Ur{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class um extends Ur{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class qc extends Ur{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class c0 extends Ur{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class u0 extends Ur{getDefault(){return null}set(l){var d;if(l===this.current&&!this.dirty)return;const g=this.gl;hl(g)?g.bindVertexArray(l):(d=g.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(l),this.current=l,this.dirty=!1}}class hm extends Ur{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Kl extends Ur{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class h0 extends Ur{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class dl extends Ur{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class Wc extends dl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class d0 extends dl{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class dm extends dl{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class on{constructor(l,d,g,y,b){this.context=l,this.width=d,this.height=g;const E=l.gl,I=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new Wc(l,I),y)this.depthAttachment=b?new dm(l,I):new d0(l,I);else if(b)throw new Error("Stencil cannot be setted without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,d=this.colorAttachment.get();if(d&&l.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&l.deleteRenderbuffer(g)}l.deleteFramebuffer(this.framebuffer)}}class Bn{constructor(l,d,g){this.blendFunction=l,this.blendColor=d,this.mask=g}}Bn.Replace=[1,0],Bn.disabled=new Bn(Bn.Replace,a.aT.transparent,[!1,!1,!1,!1]),Bn.unblended=new Bn(Bn.Replace,a.aT.transparent,[!0,!0,!0,!0]),Bn.alphaBlended=new Bn([1,771],a.aT.transparent,[!0,!0,!0,!0]);class $w{constructor(l){var d,g;if(this.gl=l,this.clearColor=new Md(this),this.clearDepth=new Fo(this),this.clearStencil=new No(this),this.colorMask=new nm(this),this.depthMask=new Pd(this),this.stencilMask=new Ad(this),this.stencilFunc=new im(this),this.stencilOp=new om(this),this.stencilTest=new Rd(this),this.depthRange=new am(this),this.depthTest=new sm(this),this.depthFunc=new Dd(this),this.blend=new s0(this),this.blendFunc=new l0(this),this.blendColor=new Gc(this),this.blendEquation=new Aw(this),this.cullFace=new Rw(this),this.cullFaceSide=new Dw(this),this.frontFace=new zw(this),this.program=new Lw(this),this.activeTexture=new Ow(this),this.viewport=new lm(this),this.bindFramebuffer=new zd(this),this.bindRenderbuffer=new cm(this),this.bindTexture=new um(this),this.bindVertexBuffer=new qc(this),this.bindElementBuffer=new c0(this),this.bindVertexArray=new u0(this),this.pixelStoreUnpack=new hm(this),this.pixelStoreUnpackPremultiplyAlpha=new Kl(this),this.pixelStoreUnpackFlipY=new h0(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),hl(l)){this.HALF_FLOAT=l.HALF_FLOAT;const y=l.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=l.RGBA16F)!==null&&d!==void 0?d:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=l.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,l.getExtension("EXT_color_buffer_float")}else{l.getExtension("EXT_color_buffer_half_float"),l.getExtension("OES_texture_half_float_linear");const y=l.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d){return new Ed(this,l,d)}createVertexBuffer(l,d,g){return new Id(this,l,d,g)}createRenderbuffer(l,d,g){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,l,d,g),this.bindRenderbuffer.set(null),b}createFramebuffer(l,d,g,y){return new on(this,l,d,g,y)}clear({color:l,depth:d,stencil:g}){const y=this.gl;let b=0;l&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(b)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){a.aG(l.blendFunction,Bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}createVertexArray(){var l;return hl(this.gl)?this.gl.createVertexArray():(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.createVertexArrayOES()}deleteVertexArray(l){var d;return hl(this.gl)?this.gl.deleteVertexArray(l):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(l)}unbindVAO(){this.bindVertexArray.set(null)}}class Hr{constructor(l,d,g){this.func=l,this.mask=d,this.range=g}}Hr.ReadOnly=!1,Hr.ReadWrite=!0,Hr.disabled=new Hr(519,Hr.ReadOnly,[0,1]);const Xl=7680;class Fn{constructor(l,d,g,y,b,E){this.test=l,this.ref=d,this.mask=g,this.fail=y,this.depthFail=b,this.pass=E}}Fn.disabled=new Fn({func:519,mask:0},0,0,Xl,Xl,Xl);class An{constructor(l,d,g){this.enable=l,this.mode=d,this.frontFace=g}}let nh;function f0(_,l,d,g,y,b,E){const I=_.context,A=I.gl,j=_.useProgram("collisionBox"),q=[];let W=0,ie=0;for(let _e=0;_e<g.length;_e++){const De=g[_e],We=l.getTile(De),Ke=We.getBucket(d);if(!Ke)continue;let Ye=De.posMatrix;y[0]===0&&y[1]===0||(Ye=_.translatePosMatrix(De.posMatrix,We,y,b));const lt=E?Ke.textCollisionBox:Ke.iconCollisionBox,nt=Ke.collisionCircleArray;if(nt.length>0){const mt=a.Z(),Xt=Ye;a.aU(mt,Ke.placementInvProjMatrix,_.transform.glCoordMatrix),a.aU(mt,mt,Ke.placementViewportMatrix),q.push({circleArray:nt,circleOffset:ie,transform:Xt,invTransform:mt,coord:De}),W+=nt.length/4,ie=W}lt&&j.draw(I,A.LINES,Hr.disabled,Fn.disabled,_.colorModeForRenderPass(),An.disabled,Yp(Ye,_.transform,We),_.style.map.terrain&&_.style.map.terrain.getTerrainData(De),d.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,null,_.transform.zoom,null,null,lt.collisionVertexBuffer)}if(!E||!q.length)return;const fe=_.useProgram("collisionCircle"),he=new a.aV;he.resize(4*W),he._trim();let ge=0;for(const _e of q)for(let De=0;De<_e.circleArray.length/4;De++){const We=4*De,Ke=_e.circleArray[We+0],Ye=_e.circleArray[We+1],lt=_e.circleArray[We+2],nt=_e.circleArray[We+3];he.emplace(ge++,Ke,Ye,lt,nt,0),he.emplace(ge++,Ke,Ye,lt,nt,1),he.emplace(ge++,Ke,Ye,lt,nt,2),he.emplace(ge++,Ke,Ye,lt,nt,3)}(!nh||nh.length<2*W)&&(nh=function(_e){const De=2*_e,We=new a.aX;We.resize(De),We._trim();for(let Ke=0;Ke<De;Ke++){const Ye=6*Ke;We.uint16[Ye+0]=4*Ke+0,We.uint16[Ye+1]=4*Ke+1,We.uint16[Ye+2]=4*Ke+2,We.uint16[Ye+3]=4*Ke+2,We.uint16[Ye+4]=4*Ke+3,We.uint16[Ye+5]=4*Ke+0}return We}(W));const le=I.createIndexBuffer(nh,!0),Me=I.createVertexBuffer(he,a.aW.members,!0);for(const _e of q){const De={u_matrix:_e.transform,u_inv_matrix:_e.invTransform,u_camera_to_center_distance:(Ue=_.transform).cameraToCenterDistance,u_viewport_size:[Ue.width,Ue.height]};fe.draw(I,A.TRIANGLES,Hr.disabled,Fn.disabled,_.colorModeForRenderPass(),An.disabled,De,_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e.coord),d.id,Me,le,a.S.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,_.transform.zoom,null,null,null)}var Ue;Me.destroy(),le.destroy()}An.disabled=new An(!1,1029,2305),An.backCCW=new An(!0,1029,2305);const fm=a.ao(new Float32Array(16));function Ld(_,l,d,g,y,b){const{horizontalAlign:E,verticalAlign:I}=a.au(_);return new a.P((-(E-.5)*l/y+g[0])*b,(-(I-.5)*d/y+g[1])*b)}function Od(_,l,d,g,y,b,E,I,A,j,q){const W=_.text.placedSymbolArray,ie=_.text.dynamicLayoutVertexArray,fe=_.icon.dynamicLayoutVertexArray,he={};ie.clear();for(let ge=0;ge<W.length;ge++){const le=W.get(ge),Me=le.hidden||!le.crossTileID||_.allowVerticalPlacement&&!le.placedOrientation?null:g[le.crossTileID];if(Me){const Ue=new a.P(le.anchorX,le.anchorY),_e=wt(Ue,d?E:b,q),De=Ee(y.cameraToCenterDistance,_e.signedDistanceFromCamera);let We=a.aj(_.textSizeData,A,le)*De/a.ap;d&&(We*=_.tilePixelRatio/I);const{width:Ke,height:Ye,anchor:lt,textOffset:nt,textBoxScale:mt}=Me,Xt=Ld(lt,Ke,Ye,nt,mt,We),zr=d?wt(Ue.add(Xt),b,q).point:_e.point.add(l?Xt.rotate(-y.angle):Xt),Pt=_.allowVerticalPlacement&&le.placedOrientation===a.ai.vertical?Math.PI/2:0;for(let pr=0;pr<le.numGlyphs;pr++)a.ak(ie,zr,Pt);j&&le.associatedIconIndex>=0&&(he[le.associatedIconIndex]={shiftedAnchor:zr,angle:Pt})}else U(le.numGlyphs,ie)}if(j){fe.clear();const ge=_.icon.placedSymbolArray;for(let le=0;le<ge.length;le++){const Me=ge.get(le);if(Me.hidden)U(Me.numGlyphs,fe);else{const Ue=he[le];if(Ue)for(let _e=0;_e<Me.numGlyphs;_e++)a.ak(fe,Ue.shiftedAnchor,Ue.angle);else U(Me.numGlyphs,fe)}}_.icon.dynamicLayoutVertexBuffer.updateData(fe)}_.text.dynamicLayoutVertexBuffer.updateData(ie)}function pm(_,l,d){return d.iconsInText&&l?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function $d(_,l,d,g,y,b,E,I,A,j,q,W){const ie=_.context,fe=ie.gl,he=_.transform,ge=I==="map",le=A==="map",Me=I!=="viewport"&&d.layout.get("symbol-placement")!=="point",Ue=ge&&!le&&!Me,_e=!d.layout.get("symbol-sort-key").isConstant();let De=!1;const We=_.depthModeForSublayer(0,Hr.ReadOnly),Ke=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ye=[];for(const lt of g){const nt=l.getTile(lt),mt=nt.getBucket(d);if(!mt)continue;const Xt=y?mt.text:mt.icon;if(!Xt||!Xt.segments.get().length||!Xt.hasVisibleVertices)continue;const zr=Xt.programConfigurations.get(d.id),Pt=y||mt.sdfIcons,pr=y?mt.textSizeData:mt.iconSizeData,Yt=le||he.pitch!==0,pn=_.useProgram(pm(Pt,y,mt),zr),Dr=a.ah(pr,he.zoom),Tr=_.style.map.terrain&&_.style.map.terrain.getTerrainData(lt);let Lr,Kn,Cn,$i,_i=[0,0],ii=null;if(y)Kn=nt.glyphAtlasTexture,Cn=fe.LINEAR,Lr=nt.glyphAtlasTexture.size,mt.iconsInText&&(_i=nt.imageAtlasTexture.size,ii=nt.imageAtlasTexture,$i=Yt||_.options.rotating||_.options.zooming||pr.kind==="composite"||pr.kind==="camera"?fe.LINEAR:fe.NEAREST);else{const Xn=d.layout.get("icon-size").constantOr(0)!==1||mt.iconsNeedLinear;Kn=nt.imageAtlasTexture,Cn=Pt||_.options.rotating||_.options.zooming||Xn||Yt?fe.LINEAR:fe.NEAREST,Lr=nt.imageAtlasTexture.size}const Uo=pe(nt,1,_.transform.zoom),In=je(lt.posMatrix,le,ge,_.transform,Uo),Ya=kt(lt.posMatrix,le,ge,_.transform,Uo),Qa=Ke&&mt.hasTextData(),ml=d.layout.get("icon-text-fit")!=="none"&&Qa&&mt.hasIconData();if(Me){const Xn=_.style.map.terrain?(bo,Jn)=>_.style.map.terrain.getElevation(lt,bo,Jn):null,xi=d.layout.get("text-rotation-alignment")==="map";Xe(mt,lt.posMatrix,_,y,In,Ya,le,j,xi,Xn)}const tc=_.translatePosMatrix(lt.posMatrix,nt,b,E),eu=Me||y&&Ke||ml?fm:In,Ui=_.translatePosMatrix(Ya,nt,b,E,!0),Bi=Pt&&d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let io;io=Pt?mt.iconsInText?Zl(pr.kind,Dr,Ue,le,_,tc,eu,Ui,Lr,_i):rm(pr.kind,Dr,Ue,le,_,tc,eu,Ui,y,Lr,!0):tm(pr.kind,Dr,Ue,le,_,tc,eu,Ui,y,Lr);const rc={program:pn,buffers:Xt,uniformValues:io,atlasTexture:Kn,atlasTextureIcon:ii,atlasInterpolation:Cn,atlasInterpolationIcon:$i,isSDF:Pt,hasHalo:Bi};if(_e&&mt.canOverlap){De=!0;const Xn=Xt.segments.get();for(const xi of Xn)Ye.push({segments:new a.S([xi]),sortKey:xi.sortKey,state:rc,terrainData:Tr})}else Ye.push({segments:Xt.segments,sortKey:0,state:rc,terrainData:Tr})}De&&Ye.sort((lt,nt)=>lt.sortKey-nt.sortKey);for(const lt of Ye){const nt=lt.state;if(ie.activeTexture.set(fe.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,fe.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(ie.activeTexture.set(fe.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),nt.isSDF){const mt=nt.uniformValues;nt.hasHalo&&(mt.u_is_halo=1,mm(nt.buffers,lt.segments,d,_,nt.program,We,q,W,mt,lt.terrainData)),mt.u_is_halo=0}mm(nt.buffers,lt.segments,d,_,nt.program,We,q,W,nt.uniformValues,lt.terrainData)}}function mm(_,l,d,g,y,b,E,I,A,j){const q=g.context;y.draw(q,q.gl.TRIANGLES,b,E,I,An.disabled,A,j,d.id,_.layoutVertexBuffer,_.indexBuffer,l,d.paint,g.transform.zoom,_.programConfigurations.get(d.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function ih(_,l,d,g,y){if(!d||!g||!g.imageAtlas)return;const b=g.imageAtlas.patternPositions;let E=b[d.to.toString()],I=b[d.from.toString()];if(!E&&I&&(E=I),!I&&E&&(I=E),!E||!I){const A=y.getPaintProperty(l);E=b[A],I=b[A]}E&&I&&_.setConstantPatternPositions(E,I)}function oh(_,l,d,g,y,b,E){const I=_.context.gl,A="fill-pattern",j=d.paint.get(A),q=j&&j.constantOr(1),W=d.getCrossfadeParameters();let ie,fe,he,ge,le;E?(fe=q&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ie=I.LINES):(fe=q?"fillPattern":"fill",ie=I.TRIANGLES);const Me=j.constantOr(null);for(const Ue of g){const _e=l.getTile(Ue);if(q&&!_e.patternsLoaded())continue;const De=_e.getBucket(d);if(!De)continue;const We=De.programConfigurations.get(d.id),Ke=_.useProgram(fe,We),Ye=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ue);q&&(_.context.activeTexture.set(I.TEXTURE0),_e.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),We.updatePaintBuffers(W)),ih(We,A,Me,_e,d);const lt=Ye?Ue:null,nt=_.translatePosMatrix(lt?lt.posMatrix:Ue.posMatrix,_e,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(E){ge=De.indexBuffer2,le=De.segments2;const mt=[I.drawingBufferWidth,I.drawingBufferHeight];he=fe==="fillOutlinePattern"&&q?Sd(nt,_,W,_e,mt):wd(nt,mt)}else ge=De.indexBuffer,le=De.segments,he=q?Jp(nt,_,W,_e):e0(nt);Ke.draw(_.context,ie,y,_.stencilModeForClipping(Ue),b,An.disabled,he,Ye,d.id,De.layoutVertexBuffer,ge,le,d.paint,_.transform.zoom,We)}}function ah(_,l,d,g,y,b,E){const I=_.context,A=I.gl,j="fill-extrusion-pattern",q=d.paint.get(j),W=q.constantOr(1),ie=d.getCrossfadeParameters(),fe=d.paint.get("fill-extrusion-opacity"),he=q.constantOr(null);for(const ge of g){const le=l.getTile(ge),Me=le.getBucket(d);if(!Me)continue;const Ue=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ge),_e=Me.programConfigurations.get(d.id),De=_.useProgram(W?"fillExtrusionPattern":"fillExtrusion",_e);W&&(_.context.activeTexture.set(A.TEXTURE0),le.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),_e.updatePaintBuffers(ie)),ih(_e,j,he,le,d);const We=_.translatePosMatrix(ge.posMatrix,le,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ke=d.paint.get("fill-extrusion-vertical-gradient"),Ye=W?cl(We,_,Ke,fe,ge,ie,le):Xp(We,_,Ke,fe);De.draw(I,I.gl.TRIANGLES,y,b,E,An.backCCW,Ye,Ue,d.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,d.paint,_.transform.zoom,_e,_.style.map.terrain&&Me.centroidVertexBuffer)}}function Bw(_,l,d,g,y,b,E){const I=_.context,A=I.gl,j=d.fbo;if(!j)return;const q=_.useProgram("hillshade"),W=_.style.map.terrain&&_.style.map.terrain.getTerrainData(l);I.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,j.colorAttachment.get()),q.draw(I,A.TRIANGLES,y,b,E,An.disabled,((ie,fe,he,ge)=>{const le=he.paint.get("hillshade-shadow-color"),Me=he.paint.get("hillshade-highlight-color"),Ue=he.paint.get("hillshade-accent-color");let _e=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(_e-=ie.transform.angle);const De=!ie.options.moving;return{u_matrix:ge?ge.posMatrix:ie.transform.calculatePosMatrix(fe.tileID.toUnwrapped(),De),u_image:0,u_latrange:Qp(0,fe.tileID),u_light:[he.paint.get("hillshade-exaggeration"),_e],u_shadow:le,u_highlight:Me,u_accent:Ue}})(_,d,g,W?l:null),W,g.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function gm(_,l,d,g,y,b){const E=_.context,I=E.gl,A=l.dem;if(A&&A.data){const j=A.dim,q=A.stride,W=A.getPixels();if(E.activeTexture.set(I.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||_.getTileTexture(q),l.demTexture){const fe=l.demTexture;fe.update(W,{premultiply:!1}),fe.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else l.demTexture=new me(E,W,I.RGBA,{premultiply:!1}),l.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);E.activeTexture.set(I.TEXTURE0);let ie=l.fbo;if(!ie){const fe=new me(E,{width:j,height:j,data:null},I.RGBA);fe.bind(I.LINEAR,I.CLAMP_TO_EDGE),ie=l.fbo=E.createFramebuffer(j,j,!0,!1),ie.colorAttachment.set(fe.texture)}E.bindFramebuffer.set(ie.framebuffer),E.viewport.set([0,0,j,j]),_.useProgram("hillshadePrepare").draw(E,I.TRIANGLES,g,y,b,An.disabled,((fe,he)=>{const ge=he.stride,le=a.Z();return a.aS(le,0,a.N,-a.N,0,0,1),a.$(le,le,[0,-a.N,0]),{u_matrix:le,u_image:1,u_dimension:[ge,ge],u_zoom:fe.overscaledZ,u_unpack:he.getUnpackVector()}})(l.tileID,A),null,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Fw(_,l,d,g,y,b){const E=g.paint.get("raster-fade-duration");if(!b&&E>0){const I=a.h.now(),A=(I-_.timeAdded)/E,j=l?(I-l.timeAdded)/E:-1,q=d.getSource(),W=y.coveringZoomLevel({tileSize:q.tileSize,roundZoom:q.roundZoom}),ie=!l||Math.abs(l.tileID.overscaledZ-W)>Math.abs(_.tileID.overscaledZ-W),fe=ie&&_.refreshedUponExpiration?1:a.ad(ie?A:1-j,0,1);return _.refreshedUponExpiration&&A>=1&&(_.refreshedUponExpiration=!1),l?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const p0=new a.aT(1,0,0,1),Bd=new a.aT(0,1,0,1),vm=new a.aT(0,0,1,1),m0=new a.aT(1,0,1,1),g0=new a.aT(0,1,1,1);function sh(_,l,d,g){Nd(_,0,l+d/2,_.transform.width,d,g)}function Fd(_,l,d,g){Nd(_,l-d/2,0,d,_.transform.height,g)}function Nd(_,l,d,g,y,b){const E=_.context,I=E.gl;I.enable(I.SCISSOR_TEST),I.scissor(l*_.pixelRatio,d*_.pixelRatio,g*_.pixelRatio,y*_.pixelRatio),E.clear({color:b}),I.disable(I.SCISSOR_TEST)}function v0(_,l,d){const g=_.context,y=g.gl,b=d.posMatrix,E=_.useProgram("debug"),I=Hr.disabled,A=Fn.disabled,j=_.colorModeForRenderPass(),q="$debug",W=_.style.map.terrain&&_.style.map.terrain.getTerrainData(d);g.activeTexture.set(y.TEXTURE0);const ie=l.getTileByID(d.key).latestRawTileData,fe=Math.floor((ie&&ie.byteLength||0)/1024),he=l.getTile(d).tileSize,ge=512/Math.min(he,512)*(d.overscaledZ/_.transform.zoom)*.5;let le=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(le+=` => ${d.overscaledZ}`),function(Me,Ue){Me.initDebugOverlayCanvas();const _e=Me.debugOverlayCanvas,De=Me.context.gl,We=Me.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,_e.width,_e.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(Ue,5,5),We.strokeText(Ue,5,5),Me.debugOverlayTexture.update(_e),Me.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(_,`${le} ${fe}kB`),E.draw(g,y.TRIANGLES,I,A,Bn.alphaBlended,An.disabled,th(b,a.aT.transparent,ge),null,q,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),E.draw(g,y.LINE_STRIP,I,A,j,An.disabled,th(b,a.aT.red),W,q,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Hn(_,l,d){const g=_.context,y=g.gl,b=_.colorModeForRenderPass(),E=new Hr(y.LEQUAL,Hr.ReadWrite,_.depthRangeFor3D),I=_.useProgram("terrain"),A=l.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,_.width,_.height]);for(const j of d){const q=_.renderToTexture.getTexture(j),W=l.getTerrainData(j.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,q.texture);const ie={u_matrix:_.transform.calculatePosMatrix(j.tileID.toUnwrapped()),u_texture:0,u_ele_delta:l.getMeshFrameDelta(_.transform.zoom)};I.draw(g,y.TRIANGLES,E,Fn.disabled,b,An.backCCW,ie,W,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class Jl{constructor(l,d){this.context=new $w(l),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.Z(),renderTime:0},this.setup(),this.numSublayers=Cr.maxUnderzooming+Cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kt}resize(l,d,g){if(this.width=Math.floor(l*g),this.height=Math.floor(d*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const l=this.context,d=new a.a_;d.emplaceBack(0,0),d.emplaceBack(a.N,0),d.emplaceBack(0,a.N),d.emplaceBack(a.N,a.N),this.tileExtentBuffer=l.createVertexBuffer(d,Bo.members),this.tileExtentSegments=a.S.simpleSegment(0,0,4,2);const g=new a.a_;g.emplaceBack(0,0),g.emplaceBack(a.N,0),g.emplaceBack(0,a.N),g.emplaceBack(a.N,a.N),this.debugBuffer=l.createVertexBuffer(g,Bo.members),this.debugSegments=a.S.simpleSegment(0,0,4,5);const y=new a.V;y.emplaceBack(0,0,0,0),y.emplaceBack(a.N,0,a.N,0),y.emplaceBack(0,a.N,0,a.N),y.emplaceBack(a.N,a.N,a.N,a.N),this.rasterBoundsBuffer=l.createVertexBuffer(y,rt.members),this.rasterBoundsSegments=a.S.simpleSegment(0,0,4,2);const b=new a.a_;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(b,Bo.members),this.viewportSegments=a.S.simpleSegment(0,0,4,2);const E=new a.a$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(E);const I=new a.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(I);const A=this.context.gl;this.stencilClearMode=new Fn({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const l=this.context,d=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=a.Z();a.aS(g,0,this.width,this.height,0,0,1),a.a0(g,g,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,d.TRIANGLES,Hr.disabled,this.stencilClearMode,Bn.disabled,An.disabled,t0(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,d){if(this.currentStencilSource===l.source||!l.isTileClipped()||!d||!d.length)return;this.currentStencilSource=l.source;const g=this.context,y=g.gl;this.nextStencilID+d.length>256&&this.clearStencil(),g.setColorMode(Bn.disabled),g.setDepthMode(Hr.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of d){const I=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);b.draw(g,y.TRIANGLES,Hr.disabled,new Fn({func:y.ALWAYS,mask:0},I,255,y.KEEP,y.KEEP,y.REPLACE),Bn.disabled,An.disabled,t0(E.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new Fn({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){const d=this.context.gl;return new Fn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,g=l.sort((E,I)=>I.overscaledZ-E.overscaledZ),y=g[g.length-1].overscaledZ,b=g[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const E={};for(let I=0;I<b;I++)E[I+y]=new Fn({func:d.GEQUAL,mask:255},I+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=b,[E,g]}return[{[y]:Fn.disabled},g]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Bn([l.CONSTANT_COLOR,l.ONE],new a.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Bn.unblended:Bn.alphaBlended}depthModeForSublayer(l,d,g){if(!this.opaquePassEnabledForLayer())return Hr.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Hr(g||this.context.gl.LEQUAL,d,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,d){this.style=l,this.options=d,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.h.now()),this.imageManager.beginFrame();const g=this.style._order,y=this.style.sourceCaches,b={},E={},I={};for(const A in y){const j=y[A];j.used&&j.prepare(this.context),b[A]=j.getVisibleCoordinates(),E[A]=b[A].slice().reverse(),I[A]=j.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<g.length;A++)if(this.style._layers[g[A]].is3D()){this.opaquePassCutoff=A;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const A=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||A.length)&&(a.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(j,q){const W=j.context,ie=W.gl,fe=Bn.unblended,he=new Hr(ie.LEQUAL,Hr.ReadWrite,[0,1]),ge=q.getTerrainMesh(),le=q.sourceCache.getRenderableTiles(),Me=j.useProgram("terrainDepth");W.bindFramebuffer.set(q.getFramebuffer("depth").framebuffer),W.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),W.clear({color:a.aT.transparent,depth:1});for(const Ue of le){const _e=q.getTerrainData(Ue.tileID),De={u_matrix:j.transform.calculatePosMatrix(Ue.tileID.toUnwrapped()),u_ele_delta:q.getMeshFrameDelta(j.transform.zoom)};Me.draw(W,ie.TRIANGLES,he,Fn.disabled,fe,An.backCCW,De,_e,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}W.bindFramebuffer.set(null),W.viewport.set([0,0,j.width,j.height])}(this,this.style.map.terrain),function(j,q){const W=j.context,ie=W.gl,fe=Bn.unblended,he=new Hr(ie.LEQUAL,Hr.ReadWrite,[0,1]),ge=q.getTerrainMesh(),le=q.getCoordsTexture(),Me=q.sourceCache.getRenderableTiles(),Ue=j.useProgram("terrainCoords");W.bindFramebuffer.set(q.getFramebuffer("coords").framebuffer),W.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),W.clear({color:a.aT.transparent,depth:1}),q.coordsIndex=[];for(const _e of Me){const De=q.getTerrainData(_e.tileID);W.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,le.texture);const We={u_matrix:j.transform.calculatePosMatrix(_e.tileID.toUnwrapped()),u_terrain_coords_id:(255-q.coordsIndex.length)/255,u_texture:0,u_ele_delta:q.getMeshFrameDelta(j.transform.zoom)};Ue.draw(W,ie.TRIANGLES,he,Fn.disabled,fe,An.backCCW,We,De,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),q.coordsIndex.push(_e.tileID.key)}W.bindFramebuffer.set(null),W.viewport.set([0,0,j.width,j.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const A of g){const j=this.style._layers[A];if(!j.hasOffscreenPass()||j.isHidden(this.transform.zoom))continue;const q=E[j.source];(j.type==="custom"||q.length)&&this.renderLayer(this,y[j.source],j,q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?a.aT.black:a.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const A=this.style._layers[g[this.currentLayer]],j=y[A.source],q=b[A.source];this._renderTileClippingMasks(A,q),this.renderLayer(this,j,A,q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const A=this.style._layers[g[this.currentLayer]],j=y[A.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(A))continue;const q=(A.type==="symbol"?I:E)[A.source];this._renderTileClippingMasks(A,b[A.source]),this.renderLayer(this,j,A,q)}if(this.options.showTileBoundaries){const A=function(j,q){let W=null;const ie=Object.values(j._layers).flatMap(le=>le.source&&!le.isHidden(q)?[j.sourceCaches[le.source]]:[]),fe=ie.filter(le=>le.getSource().type==="vector"),he=ie.filter(le=>le.getSource().type!=="vector"),ge=le=>{(!W||W.getSource().maxzoom<le.getSource().maxzoom)&&(W=le)};return fe.forEach(le=>ge(le)),W||he.forEach(le=>ge(le)),W}(this.style,this.transform.zoom);A&&function(j,q,W){for(let ie=0;ie<W.length;ie++)v0(j,q,W[ie])}(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){const j=A.transform.padding;sh(A,A.transform.height-(j.top||0),3,p0),sh(A,j.bottom||0,3,Bd),Fd(A,j.left||0,3,vm),Fd(A,A.transform.width-(j.right||0),3,m0);const q=A.transform.centerPoint;(function(W,ie,fe,he){Nd(W,ie-1,fe-10,2,20,he),Nd(W,ie-10,fe-1,20,2,he)})(A,q.x,A.transform.height-q.y,g0)}(this),this.context.setDefault()}renderLayer(l,d,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(b,E,I,A,j){if(b.renderPass!=="translucent")return;const q=Fn.disabled,W=b.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ie,fe,he,ge,le,Me,Ue){const _e=fe.transform,De=le==="map",We=Me==="map";for(const Ke of ie){const Ye=ge.getTile(Ke),lt=Ye.getBucket(he);if(!lt||!lt.text||!lt.text.segments.get().length)continue;const nt=a.ah(lt.textSizeData,_e.zoom),mt=pe(Ye,1,fe.transform.zoom),Xt=je(Ke.posMatrix,We,De,fe.transform,mt),zr=he.layout.get("icon-text-fit")!=="none"&&lt.hasIconData();if(nt){const Pt=Math.pow(2,_e.zoom-Ye.tileID.overscaledZ);Od(lt,De,We,Ue,_e,Xt,Ke.posMatrix,Pt,nt,zr,fe.style.map.terrain?(pr,Yt)=>fe.style.map.terrain.getElevation(Ke,pr,Yt):null)}}}(A,b,I,E,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),j),I.paint.get("icon-opacity").constantOr(1)!==0&&$d(b,E,I,A,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),q,W),I.paint.get("text-opacity").constantOr(1)!==0&&$d(b,E,I,A,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),q,W),E.map.showCollisionBoxes&&(f0(b,E,I,A,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),f0(b,E,I,A,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(l,d,g,y,this.style.placement.variableOffsets);break;case"circle":(function(b,E,I,A){if(b.renderPass!=="translucent")return;const j=I.paint.get("circle-opacity"),q=I.paint.get("circle-stroke-width"),W=I.paint.get("circle-stroke-opacity"),ie=!I.layout.get("circle-sort-key").isConstant();if(j.constantOr(1)===0&&(q.constantOr(1)===0||W.constantOr(1)===0))return;const fe=b.context,he=fe.gl,ge=b.depthModeForSublayer(0,Hr.ReadOnly),le=Fn.disabled,Me=b.colorModeForRenderPass(),Ue=[];for(let _e=0;_e<A.length;_e++){const De=A[_e],We=E.getTile(De),Ke=We.getBucket(I);if(!Ke)continue;const Ye=Ke.programConfigurations.get(I.id),lt=b.useProgram("circle",Ye),nt=Ke.layoutVertexBuffer,mt=Ke.indexBuffer,Xt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(De),zr={programConfiguration:Ye,program:lt,layoutVertexBuffer:nt,indexBuffer:mt,uniformValues:ul(b,De,We,I),terrainData:Xt};if(ie){const Pt=Ke.segments.get();for(const pr of Pt)Ue.push({segments:new a.S([pr]),sortKey:pr.sortKey,state:zr})}else Ue.push({segments:Ke.segments,sortKey:0,state:zr})}ie&&Ue.sort((_e,De)=>_e.sortKey-De.sortKey);for(const _e of Ue){const{programConfiguration:De,program:We,layoutVertexBuffer:Ke,indexBuffer:Ye,uniformValues:lt,terrainData:nt}=_e.state;We.draw(fe,he.TRIANGLES,ge,le,Me,An.disabled,lt,nt,I.id,Ke,Ye,_e.segments,I.paint,b.transform.zoom,De)}})(l,d,g,y);break;case"heatmap":(function(b,E,I,A){if(I.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const j=b.context,q=j.gl,W=Fn.disabled,ie=new Bn([q.ONE,q.ONE],a.aT.transparent,[!0,!0,!0,!0]);(function(fe,he,ge){const le=fe.gl;fe.activeTexture.set(le.TEXTURE1),fe.viewport.set([0,0,he.width/4,he.height/4]);let Me=ge.heatmapFbo;if(Me)le.bindTexture(le.TEXTURE_2D,Me.colorAttachment.get()),fe.bindFramebuffer.set(Me.framebuffer);else{const Ue=le.createTexture();le.bindTexture(le.TEXTURE_2D,Ue),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),Me=ge.heatmapFbo=fe.createFramebuffer(he.width/4,he.height/4,!1,!1),function(_e,De,We,Ke){var Ye,lt;const nt=_e.gl,mt=(Ye=_e.HALF_FLOAT)!==null&&Ye!==void 0?Ye:nt.UNSIGNED_BYTE,Xt=(lt=_e.RGBA16F)!==null&&lt!==void 0?lt:nt.RGBA;nt.texImage2D(nt.TEXTURE_2D,0,Xt,De.width/4,De.height/4,0,nt.RGBA,mt,null),Ke.colorAttachment.set(We)}(fe,he,Ue,Me)}})(j,b,I),j.clear({color:a.aT.transparent});for(let fe=0;fe<A.length;fe++){const he=A[fe];if(E.hasRenderableParent(he))continue;const ge=E.getTile(he),le=ge.getBucket(I);if(!le)continue;const Me=le.programConfigurations.get(I.id),Ue=b.useProgram("heatmap",Me),{zoom:_e}=b.transform;Ue.draw(j,q.TRIANGLES,Hr.disabled,W,ie,An.disabled,Mw(he.posMatrix,ge,_e,I.paint.get("heatmap-intensity")),null,I.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,I.paint,b.transform.zoom,Me)}j.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(j,q){const W=j.context,ie=W.gl,fe=q.heatmapFbo;if(!fe)return;W.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,fe.colorAttachment.get()),W.activeTexture.set(ie.TEXTURE1);let he=q.colorRampTexture;he||(he=q.colorRampTexture=new me(W,q.colorRamp,ie.RGBA)),he.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),j.useProgram("heatmapTexture").draw(W,ie.TRIANGLES,Hr.disabled,Fn.disabled,j.colorModeForRenderPass(),An.disabled,((ge,le,Me,Ue)=>{const _e=a.Z();a.aS(_e,0,ge.width,ge.height,0,0,1);const De=ge.context.gl;return{u_matrix:_e,u_world:[De.drawingBufferWidth,De.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}})(j,q),null,q.id,j.viewportBuffer,j.quadTriangleIndexBuffer,j.viewportSegments,q.paint,j.transform.zoom)}(b,I))})(l,d,g,y);break;case"line":(function(b,E,I,A){if(b.renderPass!=="translucent")return;const j=I.paint.get("line-opacity"),q=I.paint.get("line-width");if(j.constantOr(1)===0||q.constantOr(1)===0)return;const W=b.depthModeForSublayer(0,Hr.ReadOnly),ie=b.colorModeForRenderPass(),fe=I.paint.get("line-dasharray"),he=I.paint.get("line-pattern"),ge=he.constantOr(1),le=I.paint.get("line-gradient"),Me=I.getCrossfadeParameters(),Ue=ge?"linePattern":fe?"lineSDF":le?"lineGradient":"line",_e=b.context,De=_e.gl;let We=!0;for(const Ke of A){const Ye=E.getTile(Ke);if(ge&&!Ye.patternsLoaded())continue;const lt=Ye.getBucket(I);if(!lt)continue;const nt=lt.programConfigurations.get(I.id),mt=b.context.program.get(),Xt=b.useProgram(Ue,nt),zr=We||Xt.program!==mt,Pt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ke),pr=he.constantOr(null);if(pr&&Ye.imageAtlas){const Dr=Ye.imageAtlas,Tr=Dr.patternPositions[pr.to.toString()],Lr=Dr.patternPositions[pr.from.toString()];Tr&&Lr&&nt.setConstantPatternPositions(Tr,Lr)}const Yt=Pt?Ke:null,pn=ge?Pw(b,Ye,I,Me,Yt):fe?n0(b,Ye,I,fe,Me,Yt):le?r0(b,Ye,I,lt.lineClipsArray.length,Yt):em(b,Ye,I,Yt);if(ge)_e.activeTexture.set(De.TEXTURE0),Ye.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),nt.updatePaintBuffers(Me);else if(fe&&(zr||b.lineAtlas.dirty))_e.activeTexture.set(De.TEXTURE0),b.lineAtlas.bind(_e);else if(le){const Dr=lt.gradients[I.id];let Tr=Dr.texture;if(I.gradientVersion!==Dr.version){let Lr=256;if(I.stepInterpolant){const Kn=E.getSource().maxzoom,Cn=Ke.canonical.z===Kn?Math.ceil(1<<b.transform.maxZoom-Ke.canonical.z):1;Lr=a.ad(a.aY(lt.maxLineLength/a.N*1024*Cn),256,_e.maxTextureSize)}Dr.gradient=a.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:Lr,image:Dr.gradient||void 0,clips:lt.lineClipsArray}),Dr.texture?Dr.texture.update(Dr.gradient):Dr.texture=new me(_e,Dr.gradient,De.RGBA),Dr.version=I.gradientVersion,Tr=Dr.texture}_e.activeTexture.set(De.TEXTURE0),Tr.bind(I.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}Xt.draw(_e,De.TRIANGLES,W,b.stencilModeForClipping(Ke),ie,An.disabled,pn,Pt,I.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,I.paint,b.transform.zoom,nt,lt.layoutVertexBuffer2),We=!1}})(l,d,g,y);break;case"fill":(function(b,E,I,A){const j=I.paint.get("fill-color"),q=I.paint.get("fill-opacity");if(q.constantOr(1)===0)return;const W=b.colorModeForRenderPass(),ie=I.paint.get("fill-pattern"),fe=b.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&j.constantOr(a.aT.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===fe){const he=b.depthModeForSublayer(1,b.renderPass==="opaque"?Hr.ReadWrite:Hr.ReadOnly);oh(b,E,I,A,he,W,!1)}if(b.renderPass==="translucent"&&I.paint.get("fill-antialias")){const he=b.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Hr.ReadOnly);oh(b,E,I,A,he,W,!0)}})(l,d,g,y);break;case"fill-extrusion":(function(b,E,I,A){const j=I.paint.get("fill-extrusion-opacity");if(j!==0&&b.renderPass==="translucent"){const q=new Hr(b.context.gl.LEQUAL,Hr.ReadWrite,b.depthRangeFor3D);if(j!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))ah(b,E,I,A,q,Fn.disabled,Bn.disabled),ah(b,E,I,A,q,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const W=b.colorModeForRenderPass();ah(b,E,I,A,q,Fn.disabled,W)}}})(l,d,g,y);break;case"hillshade":(function(b,E,I,A){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const j=b.context,q=b.depthModeForSublayer(0,Hr.ReadOnly),W=b.colorModeForRenderPass(),[ie,fe]=b.renderPass==="translucent"?b.stencilConfigForOverlap(A):[{},A];for(const he of fe){const ge=E.getTile(he);ge.needsHillshadePrepare!==void 0&&ge.needsHillshadePrepare&&b.renderPass==="offscreen"?gm(b,ge,I,q,Fn.disabled,W):b.renderPass==="translucent"&&Bw(b,he,ge,I,q,ie[he.overscaledZ],W)}j.viewport.set([0,0,b.width,b.height])})(l,d,g,y);break;case"raster":(function(b,E,I,A){if(b.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!A.length)return;const j=b.context,q=j.gl,W=E.getSource(),ie=b.useProgram("raster"),fe=b.colorModeForRenderPass(),[he,ge]=W instanceof pt?[{},A]:b.stencilConfigForOverlap(A),le=ge[ge.length-1].overscaledZ,Me=!b.options.moving;for(const Ue of ge){const _e=b.depthModeForSublayer(Ue.overscaledZ-le,I.paint.get("raster-opacity")===1?Hr.ReadWrite:Hr.ReadOnly,q.LESS),De=E.getTile(Ue);De.registerFadeDuration(I.paint.get("raster-fade-duration"));const We=E.findLoadedParent(Ue,0),Ke=Fw(De,We,E,I,b.transform,b.style.map.terrain);let Ye,lt;const nt=I.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;j.activeTexture.set(q.TEXTURE0),De.texture.bind(nt,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(q.TEXTURE1),We?(We.texture.bind(nt,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Ye=Math.pow(2,We.tileID.overscaledZ-De.tileID.overscaledZ),lt=[De.tileID.canonical.x*Ye%1,De.tileID.canonical.y*Ye%1]):De.texture.bind(nt,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);const mt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ue),Xt=mt?Ue:null,zr=Xt?Xt.posMatrix:b.transform.calculatePosMatrix(Ue.toUnwrapped(),Me),Pt=o0(zr,lt||[0,0],Ye||1,Ke,I);W instanceof pt?ie.draw(j,q.TRIANGLES,_e,Fn.disabled,fe,An.disabled,Pt,mt,I.id,W.boundsBuffer,b.quadTriangleIndexBuffer,W.boundsSegments):ie.draw(j,q.TRIANGLES,_e,he[Ue.overscaledZ],fe,An.disabled,Pt,mt,I.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(l,d,g,y);break;case"background":(function(b,E,I,A){const j=I.paint.get("background-color"),q=I.paint.get("background-opacity");if(q===0)return;const W=b.context,ie=W.gl,fe=b.transform,he=fe.tileSize,ge=I.paint.get("background-pattern");if(b.isPatternMissing(ge))return;const le=!ge&&j.a===1&&q===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==le)return;const Me=Fn.disabled,Ue=b.depthModeForSublayer(0,le==="opaque"?Hr.ReadWrite:Hr.ReadOnly),_e=b.colorModeForRenderPass(),De=b.useProgram(ge?"backgroundPattern":"background"),We=A||fe.coveringTiles({tileSize:he,terrain:b.style.map.terrain});ge&&(W.activeTexture.set(ie.TEXTURE0),b.imageManager.bind(b.context));const Ke=I.getCrossfadeParameters();for(const Ye of We){const lt=A?Ye.posMatrix:b.transform.calculatePosMatrix(Ye.toUnwrapped()),nt=ge?aa(lt,q,b,ge,{tileID:Ye,tileSize:he},Ke):Td(lt,q,j),mt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ye);De.draw(W,ie.TRIANGLES,Ue,Me,_e,An.disabled,nt,mt,I.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(l,0,g,y);break;case"custom":(function(b,E,I){const A=b.context,j=I.implementation;if(b.renderPass==="offscreen"){const q=j.prerender;q&&(b.setCustomLayerDefaults(),A.setColorMode(b.colorModeForRenderPass()),q.call(j,A.gl,b.transform.customLayerMatrix()),A.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),A.setColorMode(b.colorModeForRenderPass()),A.setStencilMode(Fn.disabled);const q=j.renderingMode==="3d"?new Hr(b.context.gl.LEQUAL,Hr.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Hr.ReadOnly);A.setDepthMode(q),j.render(A.gl,b.transform.customLayerMatrix()),A.setDirty(),b.setBaseState(),A.bindFramebuffer.set(null)}})(l,0,g)}}translatePosMatrix(l,d,g,y,b){if(!g[0]&&!g[1])return l;const E=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(E){const j=Math.sin(E),q=Math.cos(E);g=[g[0]*q-g[1]*j,g[0]*j+g[1]*q]}const I=[b?g[0]:pe(d,g[0],this.transform.zoom),b?g[1]:pe(d,g[1],this.transform.zoom),0],A=new Float32Array(16);return a.$(A,l,I),A}saveTileTexture(l){const d=this._tileTextures[l.size[0]];d?d.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const d=this.imageManager.getPattern(l.from.toString()),g=this.imageManager.getPattern(l.to.toString());return!d||!g}useProgram(l,d){this.cache=this.cache||{};const g=l+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new bd(this.context,$n[l],d,kd[l],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new me(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:l,drawingBufferHeight:d}=this.context.gl;return this.width!==l||this.height!==d}}class _o{constructor(l,d){this.points=l,this.planes=d}static fromInvProjectionMatrix(l,d,g){const y=Math.pow(2,g),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const A=1/(I=a.ag([],I,l))[3]/d*y;return a.b3(I,I,[A,A,1/I[3],A])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const A=function(ie,fe){var he=fe[0],ge=fe[1],le=fe[2],Me=he*he+ge*ge+le*le;return Me>0&&(Me=1/Math.sqrt(Me)),ie[0]=fe[0]*Me,ie[1]=fe[1]*Me,ie[2]=fe[2]*Me,ie}([],function(ie,fe,he){var ge=fe[0],le=fe[1],Me=fe[2],Ue=he[0],_e=he[1],De=he[2];return ie[0]=le*De-Me*_e,ie[1]=Me*Ue-ge*De,ie[2]=ge*_e-le*Ue,ie}([],F([],b[I[0]],b[I[1]]),F([],b[I[2]],b[I[1]]))),j=-((q=A)[0]*(W=b[I[1]])[0]+q[1]*W[1]+q[2]*W[2]);var q,W;return A.concat(j)});return new _o(b,E)}}class Zc{constructor(l,d){this.min=l,this.max=d,this.center=function(g,y,b){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g}([],function(g,y,b){return g[0]=y[0]+b[0],g[1]=y[1]+b[1],g[2]=y[2]+b[2],g}([],this.min,this.max))}quadrant(l){const d=[l%2==0,l<2],g=Q(this.min),y=Q(this.max);for(let b=0;b<d.length;b++)g[b]=d[b]?this.min[b]:this.center[b],y[b]=d[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Zc(g,y)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let y=0;y<l.planes.length;y++){const b=l.planes[y];let E=0;for(let I=0;I<d.length;I++)a.b4(b,d[I])>=0&&E++;if(E===0)return 0;E!==d.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let I=0;I<l.points.length;I++){const A=l.points[I][y]-this.min[y];b=Math.min(b,A),E=Math.max(E,A)}if(E<0||b>this.max[y]-this.min[y])return 0}return 1}}class lh{constructor(l=0,d=0,g=0,y=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=g,this.right=y}interpolate(l,d,g){return d.top!=null&&l.top!=null&&(this.top=a.B.number(l.top,d.top,g)),d.bottom!=null&&l.bottom!=null&&(this.bottom=a.B.number(l.bottom,d.bottom,g)),d.left!=null&&l.left!=null&&(this.left=a.B.number(l.left,d.left,g)),d.right!=null&&l.right!=null&&(this.right=a.B.number(l.right,d.right,g)),this}getCenter(l,d){const g=a.ad((this.left+l-this.right)/2,0,l),y=a.ad((this.top+d-this.bottom)/2,0,d);return new a.P(g,y)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new lh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class jd{constructor(l,d,g,y,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new lh,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const l=new jd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.apply(this),l}apply(l){this.tileSize=l.tileSize,this.latRange=l.latRange,this.width=l.width,this.height=l.height,this._center=l._center,this._elevation=l._elevation,this._minEleveationForCurrentTile=l._minEleveationForCurrentTile,this.zoom=l.zoom,this.angle=l.angle,this._fov=l._fov,this._pitch=l._pitch,this._unmodified=l._unmodified,this._edgeInsets=l._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const d=-a.b5(l,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var g=new a.A(4);return a.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,y,b){var E=y[0],I=y[1],A=y[2],j=y[3],q=Math.sin(b),W=Math.cos(b);g[0]=E*W+A*q,g[1]=I*W+j*q,g[2]=E*-q+A*W,g[3]=I*-q+j*W}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=a.ad(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,g){this._unmodified=!1,this._edgeInsets.interpolate(l,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new a.b6(0,l)];if(this._renderWorldCopies){const g=this.pointCoordinate(new a.P(0,0)),y=this.pointCoordinate(new a.P(this.width,0)),b=this.pointCoordinate(new a.P(this.width,this.height)),E=this.pointCoordinate(new a.P(0,this.height)),I=Math.floor(Math.min(g.x,y.x,b.x,E.x)),A=Math.floor(Math.max(g.x,y.x,b.x,E.x)),j=1;for(let q=I-j;q<=A+j;q++)q!==0&&d.push(new a.b6(q,l))}return d}coveringTiles(l){var d,g;let y=this.coveringZoomLevel(l);const b=y;if(l.minzoom!==void 0&&y<l.minzoom)return[];l.maxzoom!==void 0&&y>l.maxzoom&&(y=l.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),I=a.U.fromLngLat(this.center),A=Math.pow(2,y),j=[A*E.x,A*E.y,0],q=[A*I.x,A*I.y,0],W=_o.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let ie=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ie=y);const fe=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,he=_e=>({aabb:new Zc([_e*A,0,0],[(_e+1)*A,A,0]),zoom:0,x:0,y:0,wrap:_e,fullyVisible:!1}),ge=[],le=[],Me=y,Ue=l.reparseOverscaled?b:y;if(this._renderWorldCopies)for(let _e=1;_e<=3;_e++)ge.push(he(-_e)),ge.push(he(_e));for(ge.push(he(0));ge.length>0;){const _e=ge.pop(),De=_e.x,We=_e.y;let Ke=_e.fullyVisible;if(!Ke){const Xt=_e.aabb.intersects(W);if(Xt===0)continue;Ke=Xt===2}const Ye=l.terrain?j:q,lt=_e.aabb.distanceX(Ye),nt=_e.aabb.distanceY(Ye),mt=Math.max(Math.abs(lt),Math.abs(nt));if(_e.zoom===Me||mt>fe+(1<<Me-_e.zoom)-2&&_e.zoom>=ie){const Xt=Me-_e.zoom,zr=j[0]-.5-(De<<Xt),Pt=j[1]-.5-(We<<Xt);le.push({tileID:new a.O(_e.zoom===Me?Ue:_e.zoom,_e.wrap,_e.zoom,De,We),distanceSq:X([q[0]-.5-De,q[1]-.5-We]),tileDistanceToCamera:Math.sqrt(zr*zr+Pt*Pt)})}else for(let Xt=0;Xt<4;Xt++){const zr=(De<<1)+Xt%2,Pt=(We<<1)+(Xt>>1),pr=_e.zoom+1;let Yt=_e.aabb.quadrant(Xt);if(l.terrain){const pn=new a.O(pr,_e.wrap,pr,zr,Pt),Dr=l.terrain.getMinMaxElevation(pn),Tr=(d=Dr.minElevation)!==null&&d!==void 0?d:this.elevation,Lr=(g=Dr.maxElevation)!==null&&g!==void 0?g:this.elevation;Yt=new Zc([Yt.min[0],Yt.min[1],Tr],[Yt.max[0],Yt.max[1],Lr])}ge.push({aabb:Yt,zoom:pr,x:zr,y:Pt,wrap:_e.wrap,fullyVisible:Ke})}}return le.sort((_e,De)=>_e.distanceSq-De.distanceSq).map(_e=>_e.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=a.ad(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.P(a.G(l.lng)*this.worldSize,a.H(d)*this.worldSize)}unproject(l){return new a.U(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const d=this.pointLocation(this.centerPoint,l),g=l.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-g))return;const y=this.getCameraPosition(),b=a.U.fromLngLat(y.lngLat,y.altitude),E=a.U.fromLngLat(d,g),I=b.x-E.x,A=b.y-E.y,j=b.z-E.z,q=Math.sqrt(I*I+A*A+j*j),W=this.scaleZoom(this.cameraToCenterDistance/q/this.tileSize);this._elevation=g,this._center=d,this.zoom=W}setLocationAtPoint(l,d){const g=this.pointCoordinate(d),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(l),E=new a.U(b.x-(g.x-y.x),b.y-(g.y-y.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,d){return d?this.coordinatePoint(this.locationCoordinate(l),d.getElevationForLngLatZoom(l,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,d){return this.coordinateLocation(this.pointCoordinate(l,d))}locationCoordinate(l){return a.U.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,d){if(d){const ie=d.pointCoordinate(l);if(ie!=null)return ie}const g=[l.x,l.y,0,1],y=[l.x,l.y,1,1];a.ag(g,g,this.pixelMatrixInverse),a.ag(y,y,this.pixelMatrixInverse);const b=g[3],E=y[3],I=g[1]/b,A=y[1]/E,j=g[2]/b,q=y[2]/E,W=j===q?0:(0-j)/(q-j);return new a.U(a.B.number(g[0]/b,y[0]/E,W)/this.worldSize,a.B.number(I,A,W)/this.worldSize)}coordinatePoint(l,d=0,g=this.pixelMatrix){const y=[l.x*this.worldSize,l.y*this.worldSize,d,1];return a.ag(y,y,g),new a.P(y[0]/y[3],y[1]/y[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new a.P(0,l))).extend(this.pointLocation(new a.P(this.width,l))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,d=!1){const g=l.key,y=d?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];const b=l.canonical,E=this.worldSize/this.zoomScale(b.z),I=b.x+Math.pow(2,b.z)*l.wrap,A=a.ao(new Float64Array(16));return a.$(A,A,[I*E,b.y*E,0]),a.a0(A,A,[E/a.N,E/a.N,1]),a.a1(A,d?this.alignedProjMatrix:this.projMatrix,A),y[g]=new Float32Array(A),y[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,d,g,y,b=-90,E=90,I=-180,A=180;const j=this.size,q=this._unmodified;if(this.latRange){const fe=this.latRange;b=a.H(fe[1])*this.worldSize,E=a.H(fe[0])*this.worldSize,l=E-b<j.y?j.y/(E-b):0}if(this.lngRange){const fe=this.lngRange;I=a.b5(a.G(fe[0])*this.worldSize,0,this.worldSize),A=a.b5(a.G(fe[1])*this.worldSize,0,this.worldSize),A<I&&(A+=this.worldSize),d=A-I<j.x?j.x/(A-I):0}const W=this.point,ie=Math.max(d||0,l||0);if(ie)return this.center=this.unproject(new a.P(d?(A+I)/2:W.x,l?(E+b)/2:W.y)),this.zoom+=this.scaleZoom(ie),this._unmodified=q,void(this._constraining=!1);if(this.latRange){const fe=W.y,he=j.y/2;fe-he<b&&(y=b+he),fe+he>E&&(y=E-he)}if(this.lngRange){const fe=(I+A)/2,he=a.b5(W.x,fe-this.worldSize/2,fe+this.worldSize/2),ge=j.x/2;he-ge<I&&(g=I+ge),he+ge>A&&(g=A-ge)}g===void 0&&y===void 0||(this.center=this.unproject(new a.P(g!==void 0?g:W.x,y!==void 0?y:W.y)).wrap()),this._unmodified=q,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b7(1,this.center.lat)*this.worldSize;let y=a.ao(new Float64Array(16));a.a0(y,y,[this.width/2,-this.height/2,1]),a.$(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=a.ao(new Float64Array(16)),a.a0(y,y,[1,-1,1]),a.$(y,y,[-1,-1,0]),a.a0(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this._minEleveationForCurrentTile),I=b-E*this._pixelPerMeter/Math.cos(this._pitch),A=E<0?I:b,j=Math.PI/2+this._pitch,q=this._fov*(.5+l.y/this.height),W=Math.sin(q)*A/Math.sin(a.ad(Math.PI-j-q,.01,Math.PI-.01)),ie=this.getHorizon(),fe=2*Math.atan(ie/this.cameraToCenterDistance)*(.5+l.y/(2*ie)),he=Math.sin(fe)*A/Math.sin(a.ad(Math.PI-j-fe,.01,Math.PI-.01)),ge=Math.min(W,he),le=1.01*(Math.cos(Math.PI/2-this._pitch)*ge+A),Me=this.height/50;y=new Float64Array(16),a.b8(y,this._fov,this.width/this.height,Me,le),y[8]=2*-l.x/this.width,y[9]=2*l.y/this.height,a.a0(y,y,[1,-1,1]),a.$(y,y,[0,0,-this.cameraToCenterDistance]),a.b9(y,y,this._pitch),a.ae(y,y,this.angle),a.$(y,y,[-d,-g,0]),this.mercatorMatrix=a.a0([],y,[this.worldSize,this.worldSize,this.worldSize]),a.a0(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.a1(new Float64Array(16),this.labelPlaneMatrix,y),a.$(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=a.as([],y),this.pixelMatrix3D=a.a1(new Float64Array(16),this.labelPlaneMatrix,y);const Ue=this.width%2/2,_e=this.height%2/2,De=Math.cos(this.angle),We=Math.sin(this.angle),Ke=d-Math.round(d)+De*Ue+We*_e,Ye=g-Math.round(g)+De*_e+We*Ue,lt=new Float64Array(y);if(a.$(lt,lt,[Ke>.5?Ke-1:Ke,Ye>.5?Ye-1:Ye,0]),this.alignedProjMatrix=lt,y=a.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new a.P(0,0)),d=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,l))}getCameraQueryGeometry(l){const d=this.getCameraPoint();if(l.length===1)return[l[0],d];{let g=d.x,y=d.y,b=d.x,E=d.y;for(const I of l)g=Math.min(g,I.x),y=Math.min(y,I.y),b=Math.max(b,I.x),E=Math.max(E,I.y);return[new a.P(g,y),new a.P(b,y),new a.P(b,E),new a.P(g,E),new a.P(g,y)]}}}function Yl(_,l){let d,g=!1,y=null,b=null;const E=()=>{y=null,g&&(_.apply(b,d),y=setTimeout(E,l),g=!1)};return(...I)=>(g=!0,b=this,d=I,y||E(),y)}class ch{constructor(l){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let g;return d.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(g=y)}),(g&&g[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:g,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Yl(this._updateHashUnthrottled,300),this._hashName=l&&encodeURIComponent(l)}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const d=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),E=Math.round(d.lng*b)/b,I=Math.round(d.lat*b)/b,A=this._map.getBearing(),j=this._map.getPitch();let q="";if(q+=l?`/${E}/${I}/${g}`:`${g}/${I}/${E}`,(A||j)&&(q+="/"+Math.round(10*A)/10),j&&(q+=`/${Math.round(j)}`),this._hashName){const W=this._hashName;let ie=!1;const fe=window.location.hash.slice(1).split("&").map(he=>{const ge=he.split("=")[0];return ge===W?(ie=!0,`${ge}=${q}`):he}).filter(he=>he);return ie||fe.push(`${W}=${q}`),`#${fe.join("&")}`}return`#${q}`}}const Kc={linearity:.3,easing:a.ba(0,0,.3,1)},y0=a.e({deceleration:2500,maxSpeed:1400},Kc),_0=a.e({deceleration:20,maxSpeed:1400},Kc),x0=a.e({deceleration:1e3,maxSpeed:360},Kc),b0=a.e({deceleration:1e3,maxSpeed:90},Kc);class w0{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.h.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=a.h.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)d.zoom+=b.zoomDelta||0,d.bearing+=b.bearingDelta||0,d.pitch+=b.pitchDelta||0,b.panDelta&&d.pan._add(b.panDelta),b.around&&(d.around=b.around),b.pinchAround&&(d.pinchAround=b.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){const b=uh(d.pan.mag(),g,a.e({},y0,l||{}));y.offset=d.pan.mult(b.amount/d.pan.mag()),y.center=this._map.transform.center,Ja(y,b)}if(d.zoom){const b=uh(d.zoom,g,_0);y.zoom=this._map.transform.zoom+b.amount,Ja(y,b)}if(d.bearing){const b=uh(d.bearing,g,x0);y.bearing=this._map.transform.bearing+a.ad(b.amount,-179,179),Ja(y,b)}if(d.pitch){const b=uh(d.pitch,g,b0);y.pitch=this._map.transform.pitch+b.amount,Ja(y,b)}if(y.zoom||y.bearing){const b=d.pinchAround===void 0?d.around:d.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(y,{noMoveStart:!0})}}function Ja(_,l){(!_.duration||_.duration<l.duration)&&(_.duration=l.duration,_.easing=l.easing)}function uh(_,l,d){const{maxSpeed:g,linearity:y,deceleration:b}=d,E=a.ad(_*y/(l/1e3),-g,g),I=Math.abs(E)/(b*y);return{easing:d.easing,duration:1e3*I,amount:E*(I/2)}}class jo extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,g,y={}){const b=m.mousePos(d.getCanvasContainer(),g),E=d.unproject(b);super(l,a.e({point:b,lngLat:E,originalEvent:g},y)),this._defaultPrevented=!1,this.target=d}}class hh extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,g){const y=l==="touchend"?g.changedTouches:g.touches,b=m.touchPos(d.getCanvasContainer(),y),E=b.map(A=>d.unproject(A)),I=b.reduce((A,j,q,W)=>A.add(j.div(W.length)),new a.P(0,0));super(l,{points:b,point:I,lngLats:E,lngLat:d.unproject(I),originalEvent:g}),this._defaultPrevented=!1}}class S0 extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,g){super(l,{originalEvent:g}),this._defaultPrevented=!1}}class C0{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new S0(l.type,this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new jo(l.type,this._map,l))}mouseup(l){this._map.fire(new jo(l.type,this._map,l))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new jo(l.type,this._map,l))}dblclick(l){return this._firePreventable(new jo(l.type,this._map,l))}mouseover(l){this._map.fire(new jo(l.type,this._map,l))}mouseout(l){this._map.fire(new jo(l.type,this._map,l))}touchstart(l){return this._firePreventable(new hh(l.type,this._map,l))}touchmove(l){this._map.fire(new hh(l.type,this._map,l))}touchend(l){this._map.fire(new hh(l.type,this._map,l))}touchcancel(l){this._map.fire(new hh(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class T0{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new jo(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new jo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new jo(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ks{constructor(l){this._map=l}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(l){return this.transform.pointLocation(a.P.convert(l),this._map.terrain)}}class k0{constructor(l,d){this._map=l,this._tr=new ks(l),this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(m.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const g=d;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=g,this._box||(this._box=m.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",l));const b=Math.min(y.x,g.x),E=Math.max(y.x,g.x),I=Math.min(y.y,g.y),A=Math.max(y.y,g.y);m.setTransform(this._box,`translate(${b}px,${I}px)`),this._box.style.width=E-b+"px",this._box.style.height=A-I+"px"}mouseupWindow(l,d){if(!this._active||l.button!==0)return;const g=this._startPos,y=d;if(this.reset(),m.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:l})),{cameraAnimation:b=>b.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(m.remove(this._box),this._box=null),m.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new a.k(l,{originalEvent:d}))}}function sa(_,l){if(_.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${l.length}`);const d={};for(let g=0;g<_.length;g++)d[_[g].identifier]=l[g];return d}class Es{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),g.length===this.numTouches&&(this.centroid=function(y){const b=new a.P(0,0);for(const E of y)b._add(E);return b.div(y.length)}(d),this.touches=sa(g,d)))}touchmove(l,d,g){if(this.aborted||!this.centroid)return;const y=sa(g,d);for(const b in this.touches){const E=y[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(l,d,g){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Vd{constructor(l){this.singleTap=new Es(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,d,g){this.singleTap.touchstart(l,d,g)}touchmove(l,d,g){this.singleTap.touchmove(l,d,g)}touchend(l,d,g){const y=this.singleTap.touchend(l,d,g);if(y){const b=l.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(y)<30;if(b&&E||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Is{constructor(l){this._tr=new ks(l),this._zoomIn=new Vd({numTouches:1,numTaps:2}),this._zoomOut=new Vd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,g){this._zoomIn.touchstart(l,d,g),this._zoomOut.touchstart(l,d,g)}touchmove(l,d,g){this._zoomIn.touchmove(l,d,g),this._zoomOut.touchmove(l,d,g)}touchend(l,d,g){const y=this._zoomIn.touchend(l,d,g),b=this._zoomOut.touchend(l,d,g),E=this._tr;return y?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(y)},{originalEvent:l})}):b?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(b)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ms{constructor(l){this._enabled=!!l.enable,this._moveStateManager=l.moveStateManager,this._clickTolerance=l.clickTolerance||1,this._moveFunction=l.move,this._activateOnStart=!!l.activateOnStart,l.assignEvents(this),this.reset()}reset(l){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(l)}_move(...l){const d=this._moveFunction(...l);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(l,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(l)&&(this._moveStateManager.startMove(l),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(l,d){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(l.preventDefault(),!this._moveStateManager.isValidMoveEvent(l))return void this.reset(l);const y=d.length?d[0]:d;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(l){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(l)&&(this._moved&&m.suppressClick(),this.reset(l))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Nw={0:1,2:2};class ym{constructor(l){this._correctEvent=l.checkCorrectEvent}startMove(l){const d=m.mouseButton(l);this._eventButton=d}endMove(l){delete this._eventButton}isValidStartEvent(l){return this._correctEvent(l)}isValidMoveEvent(l){return!function(d,g){const y=Nw[g];return d.buttons===void 0||(d.buttons&y)!==y}(l,this._eventButton)}isValidEndEvent(l){return m.mouseButton(l)===this._eventButton}}class E0{constructor(){this._firstTouch=void 0}_isOneFingerTouch(l){return l.targetTouches.length===1}_isSameTouchEvent(l){return l.targetTouches[0].identifier===this._firstTouch}startMove(l){this._firstTouch=l.targetTouches[0].identifier}endMove(l){delete this._firstTouch}isValidStartEvent(l){return this._isOneFingerTouch(l)}isValidMoveEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}isValidEndEvent(l){return this._isOneFingerTouch(l)&&this._isSameTouchEvent(l)}}const Ud=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=function(l){l.preventDefault()}},Xc=({enable:_,clickTolerance:l,bearingDegreesPerPixelMoved:d=.8})=>{const g=new ym({checkCorrectEvent:y=>m.mouseButton(y)===0&&y.ctrlKey||m.mouseButton(y)===2});return new Ms({clickTolerance:l,move:(y,b)=>({bearingDelta:(b.x-y.x)*d}),moveStateManager:g,enable:_,assignEvents:Ud})},Ps=({enable:_,clickTolerance:l,pitchDegreesPerPixelMoved:d=-.5})=>{const g=new ym({checkCorrectEvent:y=>m.mouseButton(y)===0&&y.ctrlKey||m.mouseButton(y)===2});return new Ms({clickTolerance:l,move:(y,b)=>({pitchDelta:(b.y-y.y)*d}),moveStateManager:g,enable:_,assignEvents:Ud})};class Vt{constructor(l,d){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(l,d,g){return this._calculateTransform(l,d,g)}touchmove(l,d,g){if(this._map._cooperativeGestures&&(this._minTouches===2&&g.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,g.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(g.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,d,g)}touchend(l,d,g){this._calculateTransform(l,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,g){g.length>0&&(this._active=!0);const y=sa(g,d),b=new a.P(0,0),E=new a.P(0,0);let I=0;for(const j in y){const q=y[j],W=this._touches[j];W&&(b._add(q),E._add(q.sub(W)),I++,y[j]=q)}if(this._touches=y,I<this._minTouches||!E.mag())return;const A=E.div(I);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(I),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(l,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,g){if(!this._firstTwoTouches)return;l.preventDefault();const[y,b]=this._firstTwoTouches,E=fl(g,d,y),I=fl(g,d,b);if(!E||!I)return;const A=this._aroundCenter?null:E.add(I).div(2);return this._move([E,I],A,l)}touchend(l,d,g){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,E=fl(g,d,y),I=fl(g,d,b);E&&I||(this._active&&m.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fl(_,l,d){for(let g=0;g<_.length;g++)if(_[g].identifier===d)return l[g]}function Jc(_,l){return Math.log(_/l)/Math.LN2}class I0 extends Hd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const g=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Jc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Jc(this._distance,g),pinchAround:d}}}function Ot(_,l){return 180*_.angleWith(l)/Math.PI}class _m extends Hd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const g=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ot(this._vector,g),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,g=Ot(l,this._startVector);return Math.abs(g)<d}}function xm(_){return Math.abs(_.y)>Math.abs(_.x)}class jw extends Hd{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,d,g){super.touchstart(l,d,g),this._currentTouchCount=g.length}_start(l){this._lastPoints=l,xm(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,g){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=l[0].sub(this._lastPoints[0]),b=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,g.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(l,d,g){if(this._valid!==void 0)return this._valid;const y=l.mag()>=2,b=d.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const E=l.y>0==d.y>0;return xm(l)&&xm(d)&&E}}const bm={panStep:100,bearingStep:15,pitchStep:10};class M0{constructor(l){this._tr=new ks(l);const d=bm;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,g=0,y=0,b=0,E=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?g=-1:(l.preventDefault(),b=-1);break;case 39:l.shiftKey?g=1:(l.preventDefault(),b=1);break;case 38:l.shiftKey?y=1:(l.preventDefault(),E=-1);break;case 40:l.shiftKey?y=-1:(l.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:I=>{const A=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:P0,zoom:d?Math.round(A.zoom)+d*(l.shiftKey?2:1):A.zoom,bearing:A.bearing+g*this._bearingStep,pitch:A.pitch+y*this._pitchStep,offset:[-b*this._panStep,-E*this._panStep],center:A.center},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function P0(_){return _*(2-_)}const A0=4.000244140625;class Vw{constructor(l,d){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=l,this._tr=new ks(l),this._el=l.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!l[this._map._metaKey])return;l.preventDefault()}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const g=a.h.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%A0==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=m.mousePos(this._el,l),g=this._tr;this._around=a.L.convert(this._aroundCenter?g.center:g.unproject(d)),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>A0?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&A!==0&&(A=1/A);const j=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(j*A))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,g=this._startZoom,y=this._easing;let b,E=!1;if(this._type==="wheel"&&g&&y){const I=Math.min((a.h.now()-this._lastWheelEventTime)/200,1),A=y(I);b=a.B.number(g,d,A),I<1?this._frameId||(this._frameId=!0):E=!0}else b=d,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:b-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=a.bb;if(this._prevEase){const g=this._prevEase,y=(a.h.now()-g.start)/g.duration,b=g.easing(y+.01)-g.easing(y),E=.27/Math.sqrt(b*b+1e-4)*.01,I=Math.sqrt(.0729-E*E);d=a.ba(E,I,.25,1)}return this._prevEase={start:a.h.now(),duration:l,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class wm{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Sm{constructor(l){this._tr=new ks(l),this.reset()}reset(){this._active=!1}dblclick(l,d){return l.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(l.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cm{constructor(){this._tap=new Vd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(l,d,g){if(!this._swipePoint)if(this._tapTime){const y=d[0],b=l.timeStamp-this._tapTime<500,E=this._tapPoint.dist(y)<30;b&&E?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(l,d,g)}touchmove(l,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const y=d[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,l.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(l,d,g)}touchend(l,d,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const y=this._tap.touchend(l,d,g);y&&(this._tapTime=l.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tm{constructor(l,d,g){this._el=l,this._mousePan=d,this._touchPan=g}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xo{constructor(l,d,g){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class pl{constructor(l,d,g,y){this._el=l,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const dh=_=>_.zoom||_.drag||_.pitch||_.rotate;class km extends a.k{}function fh(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Em{constructor(l,d){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=y.type==="renderFrame"?void 0:y,I={needsRenderFrame:!1},A={},j={},q=y.touches,W=q?this._getMapTouches(q):void 0,ie=W?m.touchPos(this._el,W):m.mousePos(this._el,y);for(const{handlerName:ge,handler:le,allowed:Me}of this._handlers){if(!le.isEnabled())continue;let Ue;this._blockedByActive(j,Me,ge)?le.reset():le[b||y.type]&&(Ue=le[b||y.type](y,ie,W),this.mergeHandlerResult(I,A,Ue,ge,E),Ue&&Ue.needsRenderFrame&&this._triggerRenderFrame()),(Ue||le.isActive())&&(j[ge]=le)}const fe={};for(const ge in this._previousActiveHandlers)j[ge]||(fe[ge]=E);this._previousActiveHandlers=j,(Object.keys(fe).length||fh(I))&&(this._changes.push([I,A,fe]),this._triggerRenderFrame()),(Object.keys(j).length||fh(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=I;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new w0(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,E]of this._listeners)m.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[l,d,g]of this._listeners)m.removeEventListener(l,d,l===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(l){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new C0(d,l));const y=d.boxZoom=new k0(d,l);this._add("boxZoom",y),l.interactive&&l.boxZoom&&y.enable();const b=new Is(d),E=new Sm(d);d.doubleClickZoom=new wm(E,b),this._add("tapZoom",b),this._add("clickZoom",E),l.interactive&&l.doubleClickZoom&&d.doubleClickZoom.enable();const I=new Cm;this._add("tapDragZoom",I);const A=d.touchPitch=new jw(d);this._add("touchPitch",A),l.interactive&&l.touchPitch&&d.touchPitch.enable(l.touchPitch);const j=Xc(l),q=Ps(l);d.dragRotate=new xo(l,j,q),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]),l.interactive&&l.dragRotate&&d.dragRotate.enable();const W=(({enable:Me,clickTolerance:Ue})=>{const _e=new ym({checkCorrectEvent:De=>m.mouseButton(De)===0&&!De.ctrlKey});return new Ms({clickTolerance:Ue,move:(De,We)=>({around:We,panDelta:We.sub(De)}),activateOnStart:!0,moveStateManager:_e,enable:Me,assignEvents:Ud})})(l),ie=new Vt(l,d);d.dragPan=new Tm(g,W,ie),this._add("mousePan",W),this._add("touchPan",ie,["touchZoom","touchRotate"]),l.interactive&&l.dragPan&&d.dragPan.enable(l.dragPan);const fe=new _m,he=new I0;d.touchZoomRotate=new pl(g,he,fe,I),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),l.interactive&&l.touchZoomRotate&&d.touchZoomRotate.enable(l.touchZoomRotate);const ge=d.scrollZoom=new Vw(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ge,["mousePan"]),l.interactive&&l.scrollZoom&&d.scrollZoom.enable(l.scrollZoom);const le=d.keyboard=new M0(d);this._add("keyboard",le),l.interactive&&l.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new T0(d))}_add(l,d,g){this._handlers.push({handlerName:l,handler:d,allowed:g}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!dh(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,d,g){for(const y in l)if(y!==g&&(!d||d.indexOf(y)<0))return!0;return!1}_getMapTouches(l){const d=[];for(const g of l)this._el.contains(g.target)&&d.push(g);return d}mergeHandlerResult(l,d,g,y,b){if(!g)return;a.e(l,g);const E={handlerName:y,originalEvent:g.originalEvent||b};g.zoomDelta!==void 0&&(d.zoom=E),g.panDelta!==void 0&&(d.drag=E),g.pitchDelta!==void 0&&(d.pitch=E),g.bearingDelta!==void 0&&(d.rotate=E)}_applyChanges(){const l={},d={},g={};for(const[y,b,E]of this._changes)y.panDelta&&(l.panDelta=(l.panDelta||new a.P(0,0))._add(y.panDelta)),y.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(l.around=y.around),y.pinchAround!==void 0&&(l.pinchAround=y.pinchAround),y.noInertia&&(l.noInertia=y.noInertia),a.e(d,b),a.e(g,E);this._updateMapTransform(l,d,g),this._changes=[]}_updateMapTransform(l,d,g){const y=this._map,b=y._getTransformForUpdate(),E=y.terrain;if(!(fh(l)||E&&this._terrainMovement))return this._fireEvents(d,g,!0);let{panDelta:I,zoomDelta:A,bearingDelta:j,pitchDelta:q,around:W,pinchAround:ie}=l;ie!==void 0&&(W=ie),y._stop(!0),W=W||y.transform.centerPoint;const fe=b.pointLocation(I?W.sub(I):W);j&&(b.bearing+=j),q&&(b.pitch+=q),A&&(b.zoom+=A),E?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(I)):b.setLocationAtPoint(fe,W):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(fe,W),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(y.terrain)})):b.setLocationAtPoint(fe,W),y._applyUpdatedTransform(b),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,g,!0)}_fireEvents(l,d,g){const y=dh(this._eventsInProgress),b=dh(l),E={};for(const q in l){const{originalEvent:W}=l[q];this._eventsInProgress[q]||(E[`${q}start`]=W),this._eventsInProgress[q]=l[q]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const q in E)this._fireEvent(q,E[q]);b&&this._fireEvent("move",b.originalEvent);for(const q in l){const{originalEvent:W}=l[q];this._fireEvent(q,W)}const I={};let A;for(const q in this._eventsInProgress){const{handlerName:W,originalEvent:ie}=this._eventsInProgress[q];this._handlersById[W].isActive()||(delete this._eventsInProgress[q],A=d[W]||ie,I[`${q}end`]=A)}for(const q in I)this._fireEvent(q,I[q]);const j=dh(this._eventsInProgress);if(g&&(y||b)&&!j){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;!q||!q.essential&&a.h.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:A})),W(this._map.getBearing())&&this._map.resetNorth()):(W(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new a.k(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new km("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class R0 extends a.E{constructor(l,d){super(),this._renderFrameCallback=()=>{const g=Math.min((a.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.L(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,g){return l=a.P.convert(l).mult(-1),this.panTo(this.transform.center,a.e({offset:l},d),g)}panTo(l,d,g){return this.easeTo(a.e({center:l},d),g)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,g){return this.easeTo(a.e({zoom:l},d),g)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,g){return this.easeTo(a.e({bearing:l},d),g)}resetNorth(l,d){return this.rotateTo(0,a.e({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=Dt.convert(l);const g=d&&d.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),g,d)}_cameraForBoxAndBearing(l,d,g,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const We=y.padding;y.padding={top:We,bottom:We,right:We,left:We}}y.padding=a.e(b,y.padding);const E=this.transform,I=E.padding,A=E.project(a.L.convert(l)),j=E.project(a.L.convert(d)),q=A.rotate(-g*Math.PI/180),W=j.rotate(-g*Math.PI/180),ie=new a.P(Math.max(q.x,W.x),Math.max(q.y,W.y)),fe=new a.P(Math.min(q.x,W.x),Math.min(q.y,W.y)),he=ie.sub(fe),ge=(E.width-(I.left+I.right+y.padding.left+y.padding.right))/he.x,le=(E.height-(I.top+I.bottom+y.padding.top+y.padding.bottom))/he.y;if(le<0||ge<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Me=Math.min(E.scaleZoom(E.scale*Math.min(ge,le)),y.maxZoom),Ue=a.P.convert(y.offset),_e=new a.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(g*Math.PI/180),De=Ue.add(_e).mult(E.scale/E.zoomScale(Me));return{center:E.unproject(A.add(j).div(2).sub(De)),zoom:Me,bearing:g}}fitBounds(l,d,g){return this._fitInternal(this.cameraForBounds(l,d),d,g)}fitScreenCoordinates(l,d,g,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(l)),this.transform.pointLocation(a.P.convert(d)),g,y),y,b)}_fitInternal(l,d,g){return l?(delete(d=a.e(l,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(l,d){this.stop();const g=this._getTransformForUpdate();let y=!1,b=!1,E=!1;return"zoom"in l&&g.zoom!==+l.zoom&&(y=!0,g.zoom=+l.zoom),l.center!==void 0&&(g.center=a.L.convert(l.center)),"bearing"in l&&g.bearing!==+l.bearing&&(b=!0,g.bearing=+l.bearing),"pitch"in l&&g.pitch!==+l.pitch&&(E=!0,g.pitch=+l.pitch),l.padding==null||g.isPaddingEqual(l.padding)||(g.padding=l.padding),this._applyUpdatedTransform(g),this.fire(new a.k("movestart",d)).fire(new a.k("move",d)),y&&this.fire(new a.k("zoomstart",d)).fire(new a.k("zoom",d)).fire(new a.k("zoomend",d)),b&&this.fire(new a.k("rotatestart",d)).fire(new a.k("rotate",d)).fire(new a.k("rotateend",d)),E&&this.fire(new a.k("pitchstart",d)).fire(new a.k("pitch",d)).fire(new a.k("pitchend",d)),this.fire(new a.k("moveend",d))}calculateCameraOptionsFromTo(l,d,g,y=0){const b=a.U.fromLngLat(l,d),E=a.U.fromLngLat(g,y),I=E.x-b.x,A=E.y-b.y,j=E.z-b.z,q=Math.hypot(I,A,j);if(q===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(I,A),ie=this.transform.scaleZoom(this.transform.cameraToCenterDistance/q/this.transform.tileSize),fe=180*Math.atan2(I,-A)/Math.PI;let he=180*Math.acos(W/q)/Math.PI;return he=j<0?90-he:90+he,{center:E.toLngLat(),zoom:ie,pitch:he,bearing:fe}}easeTo(l,d){this._stop(!1,l.easeId),((l=a.e({offset:[0,0],duration:500,easing:a.bb},l)).animate===!1||!l.essential&&a.h.prefersReducedMotion)&&(l.duration=0);const g=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),E=this.getPitch(),I=this.getPadding(),A="zoom"in l?+l.zoom:y,j="bearing"in l?this._normalizeBearing(l.bearing,b):b,q="pitch"in l?+l.pitch:E,W="padding"in l?l.padding:g.padding,ie=a.P.convert(l.offset);let fe=g.centerPoint.add(ie);const he=g.pointLocation(fe),ge=a.L.convert(l.center||he);this._normalizeCenter(ge);const le=g.project(he),Me=g.project(ge).sub(le),Ue=g.zoomScale(A-y);let _e,De;l.around&&(_e=a.L.convert(l.around),De=g.locationPoint(_e));const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||A!==y,this._rotating=this._rotating||b!==j,this._pitching=this._pitching||q!==E,this._padding=!g.isPaddingEqual(W),this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,We),this.terrain&&this._prepareElevation(ge),this._ease(Ke=>{if(this._zooming&&(g.zoom=a.B.number(y,A,Ke)),this._rotating&&(g.bearing=a.B.number(b,j,Ke)),this._pitching&&(g.pitch=a.B.number(E,q,Ke)),this._padding&&(g.interpolatePadding(I,W,Ke),fe=g.centerPoint.add(ie)),this.terrain&&!l.freezeElevation&&this._updateElevation(Ke),_e)g.setLocationAtPoint(_e,De);else{const Ye=g.zoomScale(g.zoom-y),lt=A>y?Math.min(2,Ue):Math.max(.5,Ue),nt=Math.pow(lt,1-Ke),mt=g.unproject(le.add(Me.mult(Ke*nt)).mult(Ye));g.setLocationAtPoint(g.renderWorldCopies?mt.wrap():mt,fe)}this._applyUpdatedTransform(g),this._fireMoveEvents(d)},Ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,Ke)},l),this}_prepareEase(l,d,g={}){this._moving=!0,d||g.moving||this.fire(new a.k("movestart",l)),this._zooming&&!g.zooming&&this.fire(new a.k("zoomstart",l)),this._rotating&&!g.rotating&&this.fire(new a.k("rotatestart",l)),this._pitching&&!g.pitching&&this.fire(new a.k("pitchstart",l))}_prepareElevation(l){this._elevationCenter=l,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(l){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(l<1&&d!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=l*(g-(d-(g*l+this._elevationStart))/(1-l)),this._elevationTarget=d}this.transform.elevation=a.B.number(this._elevationStart,this._elevationTarget,l)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(l){if(!this.transformCameraUpdate)return;const d=l.clone(),{center:g,zoom:y,pitch:b,bearing:E,elevation:I}=this.transformCameraUpdate(d);g&&(d.center=g),y!==void 0&&(d.zoom=y),b!==void 0&&(d.pitch=b),E!==void 0&&(d.bearing=E),I!==void 0&&(d.elevation=I),this.transform.apply(d)}_fireMoveEvents(l){this.fire(new a.k("move",l)),this._zooming&&this.fire(new a.k("zoom",l)),this._rotating&&this.fire(new a.k("rotate",l)),this._pitching&&this.fire(new a.k("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const g=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new a.k("zoomend",l)),y&&this.fire(new a.k("rotateend",l)),b&&this.fire(new a.k("pitchend",l)),this.fire(new a.k("moveend",l))}flyTo(l,d){if(!l.essential&&a.h.prefersReducedMotion){const Yt=a.F(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yt,d)}this.stop(),l=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.bb},l);const g=this._getTransformForUpdate(),y=this.getZoom(),b=this.getBearing(),E=this.getPitch(),I=this.getPadding(),A="zoom"in l?a.ad(+l.zoom,g.minZoom,g.maxZoom):y,j="bearing"in l?this._normalizeBearing(l.bearing,b):b,q="pitch"in l?+l.pitch:E,W="padding"in l?l.padding:g.padding,ie=g.zoomScale(A-y),fe=a.P.convert(l.offset);let he=g.centerPoint.add(fe);const ge=g.pointLocation(he),le=a.L.convert(l.center||ge);this._normalizeCenter(le);const Me=g.project(ge),Ue=g.project(le).sub(Me);let _e=l.curve;const De=Math.max(g.width,g.height),We=De/ie,Ke=Ue.mag();if("minZoom"in l){const Yt=a.ad(Math.min(l.minZoom,y,A),g.minZoom,g.maxZoom),pn=De/g.zoomScale(Yt-y);_e=Math.sqrt(pn/Ke*2)}const Ye=_e*_e;function lt(Yt){const pn=(We*We-De*De+(Yt?-1:1)*Ye*Ye*Ke*Ke)/(2*(Yt?We:De)*Ye*Ke);return Math.log(Math.sqrt(pn*pn+1)-pn)}function nt(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function mt(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}const Xt=lt(!1);let zr=function(Yt){return mt(Xt)/mt(Xt+_e*Yt)},Pt=function(Yt){return De*((mt(Xt)*(nt(pn=Xt+_e*Yt)/mt(pn))-nt(Xt))/Ye)/Ke;var pn},pr=(lt(!0)-Xt)/_e;if(Math.abs(Ke)<1e-6||!isFinite(pr)){if(Math.abs(De-We)<1e-6)return this.easeTo(l,d);const Yt=We<De?-1:1;pr=Math.abs(Math.log(We/De))/_e,Pt=function(){return 0},zr=function(pn){return Math.exp(Yt*_e*pn)}}return l.duration="duration"in l?+l.duration:1e3*pr/("screenSpeed"in l?+l.screenSpeed/_e:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=b!==j,this._pitching=q!==E,this._padding=!g.isPaddingEqual(W),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(le),this._ease(Yt=>{const pn=Yt*pr,Dr=1/zr(pn);g.zoom=Yt===1?A:y+g.scaleZoom(Dr),this._rotating&&(g.bearing=a.B.number(b,j,Yt)),this._pitching&&(g.pitch=a.B.number(E,q,Yt)),this._padding&&(g.interpolatePadding(I,W,Yt),he=g.centerPoint.add(fe)),this.terrain&&!l.freezeElevation&&this._updateElevation(Yt);const Tr=Yt===1?le:g.unproject(Me.add(Ue.mult(Pt(pn))).mult(Dr));g.setLocationAtPoint(g.renderWorldCopies?Tr.wrap():Tr,he),this._applyUpdatedTransform(g),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!l){const g=this.handlers;g&&g.stop(!1)}return this}_ease(l,d,g){g.animate===!1||g.duration===0?(l(1),d()):(this._easeStart=a.h.now(),this._easeOptions=g,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(l,d){l=a.b5(l,-180,180);const g=Math.abs(l-d);return Math.abs(l-360-d)<g&&(l-=360),Math.abs(l+360-d)<g&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const g=l.lng-d.center.lng;l.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(l){return this.terrain?this.terrain.getElevationForLngLatZoom(a.L.convert(l),this.transform.tileZoom)-this.transform.elevation:null}}class Vo{constructor(l={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=l}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=m.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=m.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=m.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){m.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,d){const g=this._map._getUIString(`AttributionControl.${d}`);l.title=g,l.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const d=this._map.style.sourceCaches;for(const y in d){const b=d[y];if(b.used||b.usedForTerrain){const E=b.getSource();E.attribution&&l.indexOf(E.attribution)<0&&l.push(E.attribution)}}l=l.filter(y=>String(y).trim()),l.sort((y,b)=>y.length-b.length),l=l.filter((y,b)=>{for(let E=b+1;E<l.length;E++)if(l[E].indexOf(y)>=0)return!1;return!0});const g=l.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,l.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class En{constructor(l={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const g=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=l}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=m.create("div","maplibregl-ctrl");const d=m.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){m.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Gd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const y of g)if(y.id===l)return void(y.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Im={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var D0=a.Q([{name:"a_pos3d",type:"Int16",components:3}]);class z0 extends a.E{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(l,d){this.sourceCache.update(l,d),this._renderableTilesKeys=[];const g={};for(const y of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),a.aS(y.posMatrix,0,a.N,0,a.N,0,1),this._tiles[y.key]=new Wt(y,this.tileSize));for(const y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(l){for(const d in this._tiles){const g=this._tiles[d];(!l||g.tileID.equals(l)||g.tileID.isChildOf(l)||l.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const d={};for(const g of this._renderableTilesKeys){const y=this._tiles[g].tileID;if(y.canonical.equals(l.canonical)){const b=l.clone();b.posMatrix=new Float64Array(16),a.aS(b.posMatrix,0,a.N,0,a.N,0,1),d[g]=b}else if(y.canonical.isChildOf(l.canonical)){const b=l.clone();b.posMatrix=new Float64Array(16);const E=y.canonical.z-l.canonical.z,I=y.canonical.x-(y.canonical.x>>E<<E),A=y.canonical.y-(y.canonical.y>>E<<E),j=a.N>>E;a.aS(b.posMatrix,0,j,0,j,0,1),a.$(b.posMatrix,b.posMatrix,[-I*j,-A*j,0]),d[g]=b}else if(l.canonical.isChildOf(y.canonical)){const b=l.clone();b.posMatrix=new Float64Array(16);const E=l.canonical.z-y.canonical.z,I=l.canonical.x-(l.canonical.x>>E<<E),A=l.canonical.y-(l.canonical.y>>E<<E),j=a.N>>E;a.aS(b.posMatrix,0,a.N,0,a.N,0,1),a.$(b.posMatrix,b.posMatrix,[I*j,A*j,0]),a.a0(b.posMatrix,b.posMatrix,[1/2**E,1/2**E,0]),d[g]=b}}return d}getSourceTile(l,d){const g=this.sourceCache._source;let y=l.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(y).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!b||!b.dem)&&d)for(;y>=g.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(l.scaledTo(y--).key);return b}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=l)}}class L0{constructor(l,d,g){this.painter=l,this.sourceCache=new z0(d),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(l,d,g,y=a.N){var b;if(!(d>=0&&d<y&&g>=0&&g<y))return 0;const E=this.getTerrainData(l),I=(b=E.tile)===null||b===void 0?void 0:b.dem;if(!I)return 0;const A=function(he,ge,le){var Me=ge[0],Ue=ge[1];return he[0]=le[0]*Me+le[4]*Ue+le[12],he[1]=le[1]*Me+le[5]*Ue+le[13],he}([],[d/y*a.N,g/y*a.N],E.u_terrain_matrix),j=[A[0]*I.dim,A[1]*I.dim],q=Math.floor(j[0]),W=Math.floor(j[1]),ie=j[0]-q,fe=j[1]-W;return I.get(q,W)*(1-ie)*(1-fe)+I.get(q+1,W)*ie*(1-fe)+I.get(q,W+1)*(1-ie)*fe+I.get(q+1,W+1)*ie*fe}getElevationForLngLatZoom(l,d){const{tileID:g,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(l,d);return this.getElevation(g,y%a.N,b%a.N,a.N)}getElevation(l,d,g,y=a.N){return this.getDEMElevation(l,d,g,y)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const y=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new me(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new me(y,new a.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ao([])}const d=this.sourceCache.getSourceTile(l,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const y=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new me(y,d.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),d.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const g=d&&d+d.tileID.key+l.key;if(g&&!this._demMatrixCache[g]){const y=this.sourceCache.sourceCache._source.maxzoom;let b=l.canonical.z-d.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=y?b=l.canonical.z-y:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=l.canonical.x-(l.canonical.x>>b<<b),I=l.canonical.y-(l.canonical.y>>b<<b),A=a.bc(new Float64Array(16),[1/(a.N<<b),1/(a.N<<b),0]);a.$(A,A,[E*a.N,I*a.N,0]),this._demMatrixCache[l.key]={matrix:A,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(l){const d=this.painter,g=d.width/devicePixelRatio,y=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new me(d.context,{width:g,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new me(d.context,{width:g,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,E=0;b<this._coordsTextureSize;b++)for(let I=0;I<this._coordsTextureSize;I++,E+=4)d[E+0]=255&I,d[E+1]=255&b,d[E+2]=I>>8<<4|b>>8,d[E+3]=0;const g=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),y=new me(l,g,l.gl.RGBA,{premultiply:!1});return y.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(l){const d=new Uint8Array(4),g=this.painter.context,y=g.gl;g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(l.x,this.painter.height/devicePixelRatio-l.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),g.bindFramebuffer.set(null);const b=d[0]+(d[2]>>4<<8),E=d[1]+((15&d[2])<<8),I=this.coordsIndex[255-d[3]],A=I&&this.sourceCache.getTileByID(I);if(!A)return null;const j=this._coordsTextureSize,q=(1<<A.tileID.canonical.z)*j;return new a.U(this._allowMercatorOverflow(l,(A.tileID.canonical.x*j+b)/q),(A.tileID.canonical.y*j+E)/q,this.getElevation(A.tileID,b,E,j))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.painter.context,d=new a.bd,g=new a.b0,y=this.meshSize,b=a.N/y,E=y*y;for(let W=0;W<=y;W++)for(let ie=0;ie<=y;ie++)d.emplaceBack(ie*b,W*b,0);for(let W=0;W<E;W+=y+1)for(let ie=0;ie<y;ie++)g.emplaceBack(ie+W,y+ie+W+1,y+ie+W+2),g.emplaceBack(ie+W,y+ie+W+2,ie+W+1);const I=d.length,A=I+2*(y+1);for(const W of[0,1])for(let ie=0;ie<=y;ie++)for(const fe of[0,1])d.emplaceBack(ie*b,W*a.N,fe);for(let W=0;W<2*y;W+=2)g.emplaceBack(A+W,A+W+1,A+W+3),g.emplaceBack(A+W,A+W+3,A+W+2),g.emplaceBack(I+W,I+W+3,I+W+1),g.emplaceBack(I+W,I+W+2,I+W+3);const j=d.length,q=j+2*(y+1);for(const W of[0,1])for(let ie=0;ie<=y;ie++)for(const fe of[0,1])d.emplaceBack(W*a.N,ie*b,fe);for(let W=0;W<2*y;W+=2)g.emplaceBack(j+W,j+W+1,j+W+3),g.emplaceBack(j+W,j+W+3,j+W+2),g.emplaceBack(q+W,q+W+3,q+W+1),g.emplaceBack(q+W,q+W+2,q+W+3);return this._mesh={indexBuffer:l.createIndexBuffer(g),vertexBuffer:l.createVertexBuffer(d,D0.members),segments:a.S.simpleSegment(0,0,d.length,g.length)},this._mesh}getMeshFrameDelta(l){return 2*Math.PI*a.be/Math.pow(2,l)/5}getMinTileElevationForLngLatZoom(l,d){var g;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(l,d);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(l){const d=this.getTerrainData(l).tile,g={minElevation:null,maxElevation:null};return d&&d.dem&&(g.minElevation=d.dem.min*this.exaggeration,g.maxElevation=d.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(l,d){const g=a.U.fromLngLat(l.wrap()),y=(1<<d)*a.N,b=g.x*y,E=g.y*y,I=Math.floor(b/a.N),A=Math.floor(E/a.N);return{tileID:new a.O(d,0,d,I,A),mercatorX:b,mercatorY:E}}_allowMercatorOverflow(l,d){const g=l.x<this.painter.width/2;let y=a.bf(d);const b=this.painter.transform.center.lng;return g&&Math.sign(y)>0&&Math.sign(b)<0||!g&&Math.sign(y)<0&&Math.sign(b)>0?(y=360*Math.sign(b)+y,a.G(y)):d}}class Uw{constructor(l,d,g){this._context=l,this._size=d,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const l of this._objects)l.texture.destroy(),l.fbo.destroy()}_createObject(l){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new me(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(g.texture),{id:l,fbo:d,texture:g,stamp:-1,inUse:!1}}getObjectForId(l){return this._objects[l]}useObject(l){l.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>l.id!==d),this._recentlyUsed.push(l.id)}stampObject(l){l.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const l=this._createObject(this._objects.length);return this._objects.push(l),l}freeObject(l){l.inUse=!1}freeAllObjects(){for(const l of this._objects)this.freeObject(l)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(l=>!l.inUse)===!1}}const no={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class qd{constructor(l,d){this.painter=l,this.terrain=d,this.pool=new Uw(l.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(l){return this.pool.getObjectForId(l.rtt[this._stacks.length-1].id).texture}prepareForRender(l,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=l._order.filter(g=>!l._layers[g].isHidden(d)),this._coordsDescendingInv={};for(const g in l.sourceCaches){this._coordsDescendingInv[g]={};const y=l.sourceCaches[g].getVisibleCoordinates();for(const b of y){const E=this.terrain.sourceCache.getTerrainCoords(b);for(const I in E)this._coordsDescendingInv[g][I]||(this._coordsDescendingInv[g][I]=[]),this._coordsDescendingInv[g][I].push(E[I])}}this._coordsDescendingInvStr={};for(const g of l._order){const y=l._layers[g],b=y.source;if(no[y.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const E in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][E]=this._coordsDescendingInv[b][E].map(I=>I.key).sort().join()}}for(const g of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[y][g.tileID.key];b&&b!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(l){if(l.isHidden(this.painter.transform.zoom))return!1;const d=l.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===l.id;if(no[d]&&(this._prevType&&no[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(l.id),!y))return!0;if(no[this._prevType]||no[d]&&y){this._prevType=d;const b=this._stacks.length-1,E=this._stacks[b]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(Hn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[b]){const j=this.pool.getObjectForId(I.rtt[b].id);if(j.stamp===I.rtt[b].stamp){this.pool.useObject(j);continue}}const A=this.pool.getOrCreateFreeObject();this.pool.useObject(A),this.pool.stampObject(A),I.rtt[b]={id:A.id,stamp:A.stamp},g.context.bindFramebuffer.set(A.fbo.framebuffer),g.context.clear({color:a.aT.transparent,stencil:0}),g.currentStencilSource=void 0;for(let j=0;j<E.length;j++){const q=g.style._layers[E[j]],W=q.source?this._coordsDescendingInv[q.source][I.tileID.key]:[I.tileID];g.context.viewport.set([0,0,A.fbo.width,A.fbo.height]),g._renderTileClippingMasks(q,W),g.renderLayer(g,g.style.sourceCaches[q.source],q,W),q.source&&(I.rttCoords[q.source]=this._coordsDescendingInvStr[q.source][I.tileID.key])}}return Hn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),no[d]}return!1}}const nr=p,fr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},ph=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Mm={showCompass:!0,showZoom:!0,visualizePitch:!1};class Pm{constructor(l,d,g=!1){this.mousedown=E=>{this.startMouse(a.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),m.mousePos(this.element,E)),m.addEventListener(window,"mousemove",this.mousemove),m.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,m.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=m.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),m.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),m.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=m.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=l.dragRotate._mouseRotate.getClickTolerance(),b=l.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Xc({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:I,bearingDegreesPerPixelMoved:A=.8})=>{const j=new E0;return new Ms({clickTolerance:I,move:(q,W)=>({bearingDelta:(W.x-q.x)*A}),moveStateManager:j,enable:E,assignEvents:ph})})({clickTolerance:y,enable:!0}),this.map=l,g&&(this.mousePitch=Ps({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:I,pitchDegreesPerPixelMoved:A=-.5})=>{const j=new E0;return new Ms({clickTolerance:I,move:(q,W)=>({pitchDelta:(W.y-q.y)*A}),moveStateManager:j,enable:E,assignEvents:ph})})({clickTolerance:b,enable:!0})),m.addEventListener(d,"mousedown",this.mousedown),m.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),m.addEventListener(d,"touchcancel",this.reset)}startMouse(l,d){this.mouseRotate.dragStart(l,d),this.mousePitch&&this.mousePitch.dragStart(l,d),m.disableDrag()}startTouch(l,d){this.touchRotate.dragStart(l,d),this.touchPitch&&this.touchPitch.dragStart(l,d),m.disableDrag()}moveMouse(l,d){const g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(l,d)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(l,d)||{};b&&g.setPitch(g.getPitch()+b)}}moveTouch(l,d){const g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(l,d)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(l,d)||{};b&&g.setPitch(g.getPitch()+b)}}off(){const l=this.element;m.removeEventListener(l,"mousedown",this.mousedown),m.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),m.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),m.removeEventListener(window,"touchend",this.touchend),m.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){m.enableDrag(),m.removeEventListener(window,"mousemove",this.mousemove),m.removeEventListener(window,"mouseup",this.mouseup),m.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),m.removeEventListener(window,"touchend",this.touchend)}}let ni;function Am(_,l,d){if(_=new a.L(_.lng,_.lat),l){const g=new a.L(_.lng-360,_.lat),y=new a.L(_.lng+360,_.lat),b=d.locationPoint(_).distSqr(l);d.locationPoint(g).distSqr(l)<b?_=g:d.locationPoint(y).distSqr(l)<b&&(_=y)}for(;Math.abs(_.lng-d.center.lng)>180;){const g=d.locationPoint(_);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;_.lng>d.center.lng?_.lng-=360:_.lng+=360}return _}const la={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function O0(_,l,d){const g=_.classList;for(const y in la)g.remove(`maplibregl-${d}-anchor-${y}`);g.add(`maplibregl-${d}-anchor-${l}`)}class Ql extends a.E{constructor(l){if(super(),this._onKeyPress=d=>{const g=d.code,y=d.charCode||d.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=d=>{const g=d.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!g)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Am(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),m.setTransform(this._element,`${la[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const E=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=E.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=a.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=m.create("div"),this._element.setAttribute("aria-label","Map marker");const d=m.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${g}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);const b=m.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const E=m.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const I=m.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Me of A){const Ue=m.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",Me.rx),Ue.setAttributeNS(null,"ry",Me.ry),I.appendChild(Ue)}const j=m.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const q=m.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(q);const W=m.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const ie=m.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(ie);const fe=m.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const he=m.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=m.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const le=m.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),he.appendChild(ge),he.appendChild(le),E.appendChild(I),E.appendChild(j),E.appendChild(W),E.appendChild(fe),E.appendChild(he),d.appendChild(E),d.setAttributeNS(null,"height",g*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=a.P.convert(l&&l.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),O0(this._element,this._anchor,"marker"),l&&l.className)for(const d of l.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),l.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),m.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.L.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const y=Math.abs(13.5)/Math.SQRT2;l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(l){return this._offset=a.P.convert(l),this._update(),this}addClassName(l){this._element.classList.add(l)}removeClassName(l){this._element.classList.remove(l)}toggleClassName(l){return this._element.classList.toggle(l)}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Gn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Nn=0,Yc=!1;const mh={maxWidth:100,unit:"metric"};function gh(_,l,d){const g=d&&d.maxWidth||100,y=_._container.clientHeight/2,b=_.unproject([0,y]),E=_.unproject([g,y]),I=b.distanceTo(E);if(d&&d.unit==="imperial"){const A=3.2808*I;A>5280?ec(l,g,A/5280,_._getUIString("ScaleControl.Miles")):ec(l,g,A,_._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?ec(l,g,I/1852,_._getUIString("ScaleControl.NauticalMiles")):I>=1e3?ec(l,g,I/1e3,_._getUIString("ScaleControl.Kilometers")):ec(l,g,I,_._getUIString("ScaleControl.Meters"))}function ec(_,l,d,g){const y=function(b){const E=Math.pow(10,`${Math.floor(b)}`.length-1);let I=b/E;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(A){const j=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*j)/j}(I),E*I}(d);_.style.width=l*(y/d)+"px",_.innerHTML=`${y}&nbsp;${g}`}const Rm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Dm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qc(_){if(_){if(typeof _=="number"){const l=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(l,l),"top-right":new a.P(-l,l),bottom:new a.P(0,-_),"bottom-left":new a.P(l,-l),"bottom-right":new a.P(-l,-l),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){const l=a.P.convert(_);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return Qc(new a.P(0,0))}const zm={extend:(_,...l)=>a.e(_,...l),run(_){_()},logToElement(_,l=!1,d="log"){const g=window.document.getElementById(d);g&&(l&&(g.innerHTML=""),g.innerHTML+=`<br>${_}`)}},Lm=p;class an{static get version(){return Lm}static get workerCount(){return Pr.workerCount}static set workerCount(l){Pr.workerCount=l}static get maxParallelImageRequests(){return a.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(l){a.c.MAX_PARALLEL_IMAGE_REQUESTS=l}static get workerUrl(){return a.c.WORKER_URL}static set workerUrl(l){a.c.WORKER_URL=l}static addProtocol(l,d){a.c.REGISTERED_PROTOCOLS[l]=d}static removeProtocol(l){delete a.c.REGISTERED_PROTOCOLS[l]}}return an.Map=class extends R0{constructor(_){if(a.bg.mark(a.bh.create),(_=a.e({},fr,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new jd(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._cooperativeGesturesOnWheel=l=>{this._onCooperativeGesture(l,l[this._metaKey],1)},this._contextLost=l=>{l.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._cooperativeGestures=_.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new Gd,this._controls=[],this._mapId=a.a2(),this._locale=a.e({},Im,_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new O(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const d=Yl(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{l?d(g):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Em(this,_),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=_.hash&&new ch(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,a.e({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Vo({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new En,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new a.k(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new a.k(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new a.k("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(_,l){if(l===void 0&&(l=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=_.onAdd(this);this._controls.push(_);const g=this._controlPositions[l];return l.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(_);return l>-1&&this._controls.splice(l,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,l,d,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,l,d,g)}resize(_){var l;const d=this._containerDimensions(),g=d[0],y=d[1],b=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,b),this.painter.resize(g,y,b),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const A=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,A),this.painter.resize(g,y,A)}this.transform.resize(g,y),(l=this._requestedCameraState)===null||l===void 0||l.resize(g,y);const E=!this._moving;return E&&(this.stop(),this.fire(new a.k("movestart",_)).fire(new a.k("move",_))),this.fire(new a.k("resize",_)),E&&this.fire(new a.k("moveend",_)),this}_getClampedPixelRatio(_,l){const{0:d,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),b=_*y,E=l*y;return Math.min(b>d?d/b:1,E>g?g/E:1)*y}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Dt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(_){return this._cooperativeGestures=_,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(_){return this.transform.locationPoint(a.L.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,l,d){if(_==="mouseenter"||_==="mouseover"){let g=!1;return{layer:l,listener:d,delegates:{mousemove:b=>{const E=this.getLayer(l)?this.queryRenderedFeatures(b.point,{layers:[l]}):[];E.length?g||(g=!0,d.call(this,new jo(_,this,b.originalEvent,{features:E}))):g=!1},mouseout:()=>{g=!1}}}}if(_==="mouseleave"||_==="mouseout"){let g=!1;return{layer:l,listener:d,delegates:{mousemove:E=>{(this.getLayer(l)?this.queryRenderedFeatures(E.point,{layers:[l]}):[]).length?g=!0:g&&(g=!1,d.call(this,new jo(_,this,E.originalEvent)))},mouseout:E=>{g&&(g=!1,d.call(this,new jo(_,this,E.originalEvent)))}}}}{const g=y=>{const b=this.getLayer(l)?this.queryRenderedFeatures(y.point,{layers:[l]}):[];b.length&&(y.features=b,d.call(this,y),delete y.features)};return{layer:l,listener:d,delegates:{[_]:g}}}}on(_,l,d){if(d===void 0)return super.on(_,l);const g=this._createDelegatedListener(_,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(g);for(const y in g.delegates)this.on(y,g.delegates[y]);return this}once(_,l,d){if(d===void 0)return super.once(_,l);const g=this._createDelegatedListener(_,l,d);for(const y in g.delegates)this.once(y,g.delegates[y]);return this}off(_,l,d){return d===void 0?super.off(_,l):(this._delegatedListeners&&this._delegatedListeners[_]&&(g=>{const y=this._delegatedListeners[_];for(let b=0;b<y.length;b++){const E=y[b];if(E.layer===l&&E.listener===d){for(const I in E.delegates)this.off(I,E.delegates[I]);return y.splice(b,1),this}}})(),this)}queryRenderedFeatures(_,l){if(!this.style)return[];let d;const g=_ instanceof a.P||Array.isArray(_),y=g?_:[[0,0],[this.transform.width,this.transform.height]];if(l=l||(g?{}:_)||{},y instanceof a.P||typeof y[0]=="number")d=[a.P.convert(y)];else{const b=a.P.convert(y[0]),E=a.P.convert(y[1]);d=[b,new a.P(E.x,b.y),E,new a.P(b.x,E.y),b]}return this.style.queryRenderedFeatures(d,l,this.transform)}querySourceFeatures(_,l){return this.style.querySourceFeatures(_,l)}setStyle(_,l){return(l=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(_,l))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const l=this._locale[_];if(l==null)throw new Error(`Missing UI string '${_}'`);return l}_updateStyle(_,l){if(l.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,l));const d=this.style&&l.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new ri(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,l,d):this.style.loadJSON(_,l,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ri(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,l){if(typeof _=="string"){const d=this._requestManager.transformRequest(_,D.Style);a.f(d,(g,y)=>{g?this.fire(new a.j(g)):y&&this._updateDiff(y,l)})}else typeof _=="object"&&this._updateDiff(_,l)}_updateDiff(_,l){try{this.style.setState(_,l)&&this._update(!0)}catch(d){a.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(_,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,l){return this._lazyInitEmptyStyle(),this.style.addSource(_,l),this._update(!0)}isSourceLoaded(_){const l=this.style&&this.style.sourceCaches[_];if(l!==void 0)return l.loaded();this.fire(new a.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const l=this.style.sourceCaches[_.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);for(const d in this.style._layers){const g=this.style._layers[d];g.type==="hillshade"&&g.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new L0(this.painter,l,_),this.painter.renderToTexture=new qd(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==_.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:_})),this}getTerrain(){var _,l;return(l=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&l!==void 0?l:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const l in _){const d=_[l]._tiles;for(const g in d){const y=d[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(_,l,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,l,d)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,l,d={}){const{pixelRatio:g=1,sdf:y=!1,stretchX:b,stretchY:E,content:I}=d;if(this._lazyInitEmptyStyle(),!(l instanceof HTMLImageElement||a.a(l))){if(l.width===void 0||l.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:A,height:j,data:q}=l,W=l;return this.style.addImage(_,{data:new a.R({width:A,height:j},new Uint8Array(q)),pixelRatio:g,stretchX:b,stretchY:E,content:I,sdf:y,version:0,userImage:W}),W.onAdd&&W.onAdd(this,_),this}}{const{width:A,height:j,data:q}=a.h.getImageData(l);this.style.addImage(_,{data:new a.R({width:A,height:j},q),pixelRatio:g,stretchX:b,stretchY:E,content:I,sdf:y,version:0})}}updateImage(_,l){const d=this.style.getImage(_);if(!d)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=l instanceof HTMLImageElement||a.a(l)?a.h.getImageData(l):l,{width:y,height:b,data:E}=g;if(y===void 0||b===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==d.data.width||b!==d.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(l instanceof HTMLImageElement||a.a(l));return d.data.replace(E,I),this.style.updateImage(_,d),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,l){H.getImage(this._requestManager.transformRequest(_,D.Image),l)}listImages(){return this.style.listImages()}addLayer(_,l){return this._lazyInitEmptyStyle(),this.style.addLayer(_,l),this._update(!0)}moveLayer(_,l){return this.style.moveLayer(_,l),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,l,d){return this.style.setLayerZoomRange(_,l,d),this._update(!0)}setFilter(_,l,d={}){return this.style.setFilter(_,l,d),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,l,d,g={}){return this.style.setPaintProperty(_,l,d,g),this._update(!0)}getPaintProperty(_,l){return this.style.getPaintProperty(_,l)}setLayoutProperty(_,l,d,g={}){return this.style.setLayoutProperty(_,l,d,g),this._update(!0)}getLayoutProperty(_,l){return this.style.getLayoutProperty(_,l)}setGlyphs(_,l={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,l),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,l,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,l,d,g=>{g||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,l={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,l,d=>{d||this._update(!0)}),this}setLight(_,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,l){return this.style.setFeatureState(_,l),this._update()}removeFeatureState(_,l){return this.style.removeFeatureState(_,l),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,l=0;return this._container&&(_=this._container.clientWidth||400,l=this._container.clientHeight||300),[_,l]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const l=this._canvasContainer=m.create("div","maplibregl-canvas-container",_);this._interactive&&l.classList.add("maplibregl-interactive"),this._canvas=m.create("canvas","maplibregl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),g=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],g);const y=this._controlContainer=m.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=m.create("div",`maplibregl-ctrl-${E} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=m.create("div","maplibregl-cooperative-gesture-screen",this._container);let _=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){m.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(_,l,d){this._canvas.width=Math.floor(d*_),this._canvas.height=Math.floor(d*l),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let l=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{l={requestedAttributes:_},g&&(l.statusMessage=g.statusMessage,l.type=g.type)},{once:!0});const d=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!d){const g="Failed to initialize WebGL";throw l?(l.message=g,new Error(JSON.stringify(l))):new Error(g)}this.painter=new Jl(d,this.transform),w.testSupport(d)}_onCooperativeGesture(_,l,d){return!l&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const l=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,b=a.h.now();this.style.zoomHistory.update(y,b);const E=new a.a8(y,{now:b,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=E.crossFadingFactor();I===1&&I===this._crossFadingFactor||(d=!0,this._crossFadingFactor=I),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bg.mark(a.bh.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,a.bg.mark(a.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l&&l.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),m.remove(this._canvasContainer),m.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.bg.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.h.frame(_=>{a.bg.frame(_),this._frame=null,this._render(_)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return nr}getCameraTargetElevation(){return this.transform.elevation}},an.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const l=this._map.getZoom(),d=l===this._map.getMaxZoom(),g=l===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=l},this._setButtonTitle=(l,d)=>{const g=this._map._getUIString(`NavigationControl.${d}`);l.title=g,l.setAttribute("aria-label",g)},this.options=a.e({},Mm,_),this._container=m.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),m.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),m.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=m.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){m.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,l){const d=m.create("button",_,this._container);return d.type="button",d.addEventListener("click",l),d}},an.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=l=>{if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",l)),this._finish()}},this._updateCamera=l=>{const d=new a.L(l.coords.longitude,l.coords.latitude),g=l.coords.accuracy,y=this._map.getBearing(),b=a.e({bearing:y},this.options.fitBoundsOptions),E=Dt.fromLngLat(d,g);this._map.fitBounds(E,b,{geolocateSource:!0})},this._updateMarker=l=>{if(l){const d=new a.L(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=l=>{if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&Yc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",l)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=l=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=m.create("button","maplibregl-ctrl-geolocate",this._container),m.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",l===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=m.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ql({element:this._dotElement}),this._circleElement=m.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ql({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},Gn,_)}onAdd(_){return this._map=_,this._container=m.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(l,d=!1){ni===void 0||d?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(g=>{ni=g.state!=="denied",l(ni)}).catch(()=>{ni=!!window.navigator.geolocation,l(ni)}):(ni=!!window.navigator.geolocation,l(ni)):l(ni)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),m.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nn=0,Yc=!1}_isOutOfMapMaxBounds(_){const l=this._map.getMaxBounds(),d=_.coords;return l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),l=_.getSouthEast(),d=_.getNorthEast(),g=l.distanceTo(d),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nn--,Yc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nn++,Nn>1?(_={maximumAge:6e5,timeout:0},Yc=!0):(_=this.options.positionOptions,Yc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},an.AttributionControl=Vo,an.LogoControl=En,an.ScaleControl=class{constructor(_){this._onMove=()=>{gh(this._map,this._container,this.options)},this.setUnit=l=>{this.options.unit=l,gh(this._map,this._container,this.options)},this.options=a.e({},mh,_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=m.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){m.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},an.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=m.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){m.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=m.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);m.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},an.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=_}onAdd(_){return this._map=_,this._container=m.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=m.create("button","maplibregl-ctrl-terrain",this._container),m.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){m.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},an.Popup=class extends a.E{constructor(_){super(),this.remove=()=>(this._content&&m.remove(this._content),this._container&&(m.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.k("close")),this),this._onMouseUp=l=>{this._update(l.point)},this._onMouseMove=l=>{this._update(l.point)},this._onDrag=l=>{this._update(l.point)},this._update=l=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=m.create("div","maplibregl-popup",this._map.getContainer()),this._tip=m.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Am(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!l)return;const d=this._pos=this._trackPointer&&l?l:this._map.project(this._lngLat);let g=this.options.anchor;const y=Qc(this.options.offset);if(!g){const E=this._container.offsetWidth,I=this._container.offsetHeight;let A;A=d.y+y.bottom.y<I?["top"]:d.y>this._map.transform.height-I?["bottom"]:[],d.x<E/2?A.push("left"):d.x>this._map.transform.width-E/2&&A.push("right"),g=A.length===0?"bottom":A.join("-")}const b=d.add(y[g]).round();m.setTransform(this._container,`${la[g]} translate(${b.x}px,${b.y}px)`),O0(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Rm),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.L.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const l=document.createDocumentFragment(),d=document.createElement("body");let g;for(d.innerHTML=_;g=d.firstChild,g;)l.appendChild(g);return this.setDOMContent(l)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=m.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=m.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Dm);_&&_.focus()}},an.Marker=Ql,an.Style=ri,an.LngLat=a.L,an.LngLatBounds=Dt,an.Point=a.P,an.MercatorCoordinate=a.U,an.Evented=a.E,an.AJAXError=a.bi,an.config=a.c,an.CanvasSource=or,an.GeoJSONSource=Ze,an.ImageSource=pt,an.RasterDEMTileSource=it,an.RasterTileSource=Tt,an.VectorTileSource=Bt,an.VideoSource=ur,an.setRTLTextPlugin=a.bj,an.getRTLTextPluginStatus=a.bk,an.prewarm=function(){vr().acquire(lr)},an.clearPrewarmedResources=function(){const _=Ir;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(lr),Ir=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},zm.extend(an,{isSafari:a.ac,getPerformanceMetrics:a.bg.getPerformanceMetrics}),an});var u=i;return u})})(xB);var bw=xB.exports;const wB=ay(bw),tae=$z({__proto__:null,default:wB},[bw]);var ap=Math.pow,mo=(e,t,r)=>new Promise((n,i)=>{var o=p=>{try{a(r.next(p))}catch(m){i(m)}},u=p=>{try{a(r.throw(p))}catch(m){i(m)}},a=p=>p.done?n(p.value):Promise.resolve(p.value).then(o,u);a((r=r.apply(e,t)).next())}),Fa=Uint8Array,tv=Uint16Array,rae=Int32Array,SB=new Fa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),CB=new Fa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nae=new Fa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),TB=function(e,t){for(var r=new tv(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new rae(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},kB=TB(SB,2),EB=kB.b,iae=kB.r;EB[28]=258,iae[258]=28;var oae=TB(CB,0),aae=oae.b,IB=new tv(32768);for(_n=0;_n<32768;++_n)uc=(_n&43690)>>1|(_n&21845)<<1,uc=(uc&52428)>>2|(uc&13107)<<2,uc=(uc&61680)>>4|(uc&3855)<<4,IB[_n]=((uc&65280)>>8|(uc&255)<<8)>>1;var uc,_n,rv=function(e,t,r){for(var n=e.length,i=0,o=new tv(t);i<n;++i)e[i]&&++o[e[i]-1];var u=new tv(t);for(i=1;i<t;++i)u[i]=u[i-1]+o[i-1]<<1;var a;{a=new tv(1<<t);var p=15-t;for(i=0;i<n;++i)if(e[i])for(var m=i<<4|e[i],w=t-e[i],C=u[e[i]-1]++<<w,T=C|(1<<w)-1;C<=T;++C)a[IB[C]>>p]=m}return a},By=new Fa(288);for(_n=0;_n<144;++_n)By[_n]=8;var _n;for(_n=144;_n<256;++_n)By[_n]=9;var _n;for(_n=256;_n<280;++_n)By[_n]=7;var _n;for(_n=280;_n<288;++_n)By[_n]=8;var _n,MB=new Fa(32);for(_n=0;_n<32;++_n)MB[_n]=5;var _n,sae=rv(By,9),lae=rv(MB,5),RS=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},$s=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},DS=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},cae=function(e){return(e+7)/8|0},uae=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var n=new Fa(r-t);return n.set(e.subarray(t,r)),n},hae=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Aa=function(e,t,r){var n=new Error(t||hae[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Aa),!r)throw n;return n},UI=function(e,t,r,n){var i=e.length,o=0;if(!i||t.f&&!t.l)return r||new Fa(0);var u=!r||t.i!=2,a=t.i;r||(r=new Fa(i*3));var p=function(pt){var ur=r.length;if(pt>ur){var or=new Fa(Math.max(ur*2,pt));or.set(r),r=or}},m=t.f||0,w=t.p||0,C=t.b||0,T=t.l,P=t.d,R=t.m,$=t.n,H=i*8;do{if(!T){m=$s(e,w,1);var D=$s(e,w+1,3);if(w+=3,D)if(D==1)T=sae,P=lae,R=9,$=5;else if(D==2){var V=$s(e,w,31)+257,F=$s(e,w+10,15)+4,X=V+$s(e,w+5,31)+1;w+=14;for(var re=new Fa(X),ye=new Fa(19),me=0;me<F;++me)ye[nae[me]]=$s(e,w+me*3,7);w+=F*3;for(var we=RS(ye),ke=(1<<we)-1,Ie=rv(ye,we),me=0;me<X;){var qe=Ie[$s(e,w,ke)];w+=qe&15;var O=qe>>4;if(O<16)re[me++]=O;else{var Re=0,Se=0;for(O==16?(Se=3+$s(e,w,3),w+=2,Re=re[me-1]):O==17?(Se=3+$s(e,w,7),w+=3):O==18&&(Se=11+$s(e,w,127),w+=7);Se--;)re[me++]=Re}}var Fe=re.subarray(0,V),Ce=re.subarray(V);R=RS(Fe),$=RS(Ce),T=rv(Fe,R),P=rv(Ce,$)}else Aa(1);else{var O=cae(w)+4,L=e[O-4]|e[O-3]<<8,Q=O+L;if(Q>i){a&&Aa(0);break}u&&p(C+L),r.set(e.subarray(O,Q),C),t.b=C+=L,t.p=w=Q*8,t.f=m;continue}if(w>H){a&&Aa(0);break}}u&&p(C+131072);for(var Ne=(1<<R)-1,Je=(1<<$)-1,at=w;;at=w){var Re=T[DS(e,w)&Ne],st=Re>>4;if(w+=Re&15,w>H){a&&Aa(0);break}if(Re||Aa(2),st<256)r[C++]=st;else if(st==256){at=w,T=null;break}else{var Dt=st-254;if(st>264){var me=st-257,Ct=SB[me];Dt=$s(e,w,(1<<Ct)-1)+EB[me],w+=Ct}var Bt=P[DS(e,w)&Je],Tt=Bt>>4;Bt||Aa(3),w+=Bt&15;var Ce=aae[Tt];if(Tt>3){var Ct=CB[Tt];Ce+=DS(e,w)&(1<<Ct)-1,w+=Ct}if(w>H){a&&Aa(0);break}u&&p(C+131072);var it=C+Dt;if(C<Ce){var Ze=o-Ce,rt=Math.min(Ce,it);for(Ze+C<0&&Aa(3);C<rt;++C)r[C]=n[Ze+C]}for(;C<it;C+=4)r[C]=r[C-Ce],r[C+1]=r[C+1-Ce],r[C+2]=r[C+2-Ce],r[C+3]=r[C+3-Ce];C=it}}t.l=T,t.p=at,t.b=C,t.f=m,T&&(m=1,t.m=R,t.d=P,t.n=$)}while(!m);return C==r.length?r:uae(r,0,C)},dae=new Fa(0),fae=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Aa(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[r++]);return r+(t&2)},pae=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},mae=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Aa(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Aa(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function gae(e,t){return UI(e,{i:2},t,t)}function vae(e,t){var r=fae(e);return r+8>e.length&&Aa(6,"invalid gzip data"),UI(e.subarray(r,-8),{i:2},new Fa(pae(e)),t)}function yae(e,t){return UI(e.subarray(mae(e,t),-4),{i:2},t,t)}function yk(e,t){return e[0]==31&&e[1]==139&&e[2]==8?vae(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?gae(e,t):yae(e,t)}var _ae=typeof TextDecoder<"u"&&new TextDecoder,xae=0;try{_ae.decode(dae,{stream:!0}),xae=1}catch{}var PB=(e,t)=>e*ap(2,t),gg=(e,t)=>Math.floor(e/ap(2,t)),Px=(e,t)=>PB(e.getUint16(t+1,!0),8)+e.getUint8(t),AB=(e,t)=>PB(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),bae=(e,t,r,n,i)=>{if(e!==n.getUint8(i))return e-n.getUint8(i);const o=Px(n,i+1);if(t!==o)return t-o;const u=Px(n,i+4);return r!==u?r-u:0},wae=(e,t,r,n)=>{const i=RB(e,t|128,r,n);return i?{z:t,x:r,y:n,offset:i[0],length:i[1],isDir:!0}:null},n3=(e,t,r,n)=>{const i=RB(e,t,r,n);return i?{z:t,x:r,y:n,offset:i[0],length:i[1],isDir:!1}:null},RB=(e,t,r,n)=>{let i=0,o=e.byteLength/17-1;for(;i<=o;){const u=o+i>>1,a=bae(t,r,n,e,u*17);if(a>0)i=u+1;else if(a<0)o=u-1;else return[AB(e,u*17+7),e.getUint32(u*17+13,!0)]}return null},Sae=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,DB=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Px(e,t*17+1),y:Px(e,t*17+4),offset:AB(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},i3=e=>{const t=[],r=new DataView(e);for(let n=0;n<r.byteLength/17;n++)t.push(DB(r,n));return Cae(t)},Cae=e=>{e.sort(Sae);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++){const i=e[n];let o=i.z;i.isDir&&(o=o|128),r[n*17]=o,r[n*17+1]=i.x&255,r[n*17+2]=i.x>>8&255,r[n*17+3]=i.x>>16&255,r[n*17+4]=i.y&255,r[n*17+5]=i.y>>8&255,r[n*17+6]=i.y>>16&255,r[n*17+7]=i.offset&255,r[n*17+8]=gg(i.offset,8)&255,r[n*17+9]=gg(i.offset,16)&255,r[n*17+10]=gg(i.offset,24)&255,r[n*17+11]=gg(i.offset,32)&255,r[n*17+12]=gg(i.offset,48)&255,r[n*17+13]=i.length&255,r[n*17+14]=i.length>>8&255,r[n*17+15]=i.length>>16&255,r[n*17+16]=i.length>>24&255}return t},Tae=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,n=DB(e,r-1);if(n.isDir){const i=n.z,o=t.z-i,u=Math.trunc(t.x/(1<<o)),a=Math.trunc(t.y/(1<<o));return{z:i,x:u,y:a}}return null};function kae(e){return mo(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),n=r.getUint32(4,!0),i=r.getUint16(8,!0),o=new TextDecoder("utf-8"),u=JSON.parse(o.decode(new DataView(t.data,10,n)));let a=0;u.compression==="gzip"&&(a=2);let p=0;"minzoom"in u&&(p=+u.minzoom);let m=0;"maxzoom"in u&&(m=+u.maxzoom);let w=0,C=0,T=0,P=-180,R=-85,$=180,H=85;if(u.bounds){const O=u.bounds.split(",");P=+O[0],R=+O[1],$=+O[2],H=+O[3]}if(u.center){const O=u.center.split(",");w=+O[0],C=+O[1],T=+O[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:a,tileType:1,minZoom:p,maxZoom:m,minLon:P,minLat:R,maxLon:$,maxLat:H,centerZoom:T,centerLon:w,centerLat:C,etag:t.etag}})}function Eae(e,t,r,n,i,o,u){return mo(this,null,function*(){let a=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(a=i3(a));const p=n3(new DataView(a),n,i,o);if(p){let C=(yield t.getBytes(p.offset,p.length,u)).data;const T=new DataView(C);return T.getUint8(0)===31&&T.getUint8(1)===139&&(C=yk(new Uint8Array(C))),{data:C}}const m=Tae(new DataView(a),{z:n,x:i,y:o});if(m){const w=wae(new DataView(a),m.z,m.x,m.y);if(w){let C=yield r.getArrayBuffer(t,w.offset,w.length,e);e.specVersion===1&&(C=i3(C));const T=n3(new DataView(C),n,i,o);if(T){let R=(yield t.getBytes(T.offset,T.length,u)).data;const $=new DataView(R);return $.getUint8(0)===31&&$.getUint8(1)===139&&(R=yk(new Uint8Array(R))),{data:R}}}}})}var zB={getHeader:kae,getZxy:Eae},Iae=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const n=new AbortController;return e(t,n).then(i=>r(void 0,i.data,i.cacheControl||"",i.expires||""),i=>r(i)).catch(i=>r(i)),{cancel:()=>n.abort()}},Mae=class{constructor(e){this.tilev4=(t,r)=>mo(this,null,function*(){if(t.type==="json"){const T=t.url.substr(10);let P=this.tiles.get(T);if(P||(P=new o3(T),this.tiles.set(T,P)),this.metadata)return{data:yield P.getTileJson(t.url)};const R=yield P.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:R.minZoom,maxzoom:R.maxZoom,bounds:[R.minLon,R.minLat,R.maxLon,R.maxLat]}}}const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=t.url.match(n);if(!i)throw new Error("Invalid PMTiles protocol URL");const o=i[1];let u=this.tiles.get(o);u||(u=new o3(o),this.tiles.set(o,u));const a=i[2],p=i[3],m=i[4],w=yield u.getHeader(),C=yield u==null?void 0:u.getZxy(+a,+p,+m,r.signal);return C?{data:new Uint8Array(C.data),cacheControl:C.cacheControl,expires:C.expires}:w.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=Iae(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function pf(e,t){return(t>>>0)*4294967296+(e>>>0)}function Pae(e,t){const r=t.buf;let n=r[t.pos++],i=(n&112)>>4;if(n<128||(n=r[t.pos++],i|=(n&127)<<3,n<128)||(n=r[t.pos++],i|=(n&127)<<10,n<128)||(n=r[t.pos++],i|=(n&127)<<17,n<128)||(n=r[t.pos++],i|=(n&127)<<24,n<128)||(n=r[t.pos++],i|=(n&1)<<31,n<128))return pf(e,i);throw new Error("Expected varint not more than 10 bytes")}function vg(e){const t=e.buf;let r=t[e.pos++],n=r&127;return r<128||(r=t[e.pos++],n|=(r&127)<<7,r<128)||(r=t[e.pos++],n|=(r&127)<<14,r<128)||(r=t[e.pos++],n|=(r&127)<<21,r<128)?n:(r=t[e.pos],n|=(r&15)<<28,Pae(n,e))}function Aae(e,t,r,n){if(n===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}var Rae=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Dae(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>ap(2,e)-1||r>ap(2,e)-1)throw Error("tile x/y outside zoom level bounds");const n=Rae[e],i=ap(2,e);let o=0,u=0,a=0;const p=[t,r];let m=i/2;for(;m>0;)o=(p[0]&m)>0?1:0,u=(p[1]&m)>0?1:0,a+=m*m*(3*o^u),Aae(m,p,o,u),m=m/2;return n+a}function LB(e,t){return mo(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return yk(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const n=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}throw Error("Compression method not supported")})}function zae(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var Lae=127;function Oae(e,t){let r=0,n=e.length-1;for(;r<=n;){const i=n+r>>1,o=t-e[i].tileId;if(o>0)r=i+1;else if(o<0)n=i-1;else return e[i]}return n>=0&&(e[n].runLength===0||t-e[n].tileId<e[n].runLength)?e[n]:null}var $ae=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");const n=r.indexOf("Windows")>-1,i=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,n&&i&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,n){return mo(this,null,function*(){let i,o;r?o=r:(i=new AbortController,o=i.signal);const u=new Headers(this.customHeaders);u.set("range",`bytes=${e}-${e+t-1}`);let a;this.mustReload?a="reload":this.chromeWindowsNoCache&&(a="no-store");let p=yield fetch(this.url,{signal:o,cache:a,headers:u});if(e===0&&p.status===416){const T=p.headers.get("Content-Range");if(!T||!T.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const P=+T.substr(8);p=yield fetch(this.url,{signal:o,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let m=p.headers.get("Etag");if(m!=null&&m.startsWith("W/")&&(m=null),p.status===416||n&&m&&m!==n)throw this.mustReload=!0,new _k(`Server returned non-matching ETag ${n} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(p.status>=300)throw Error(`Bad response code: ${p.status}`);const w=p.headers.get("Content-Length");if(p.status===200&&(!w||+w>t))throw i&&i.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield p.arrayBuffer(),etag:m||void 0,cacheControl:p.headers.get("Cache-Control")||void 0,expires:p.headers.get("Expires")||void 0}})}};function Bs(e,t){const r=e.getUint32(t+4,!0),n=e.getUint32(t+0,!0);return r*ap(2,32)+n}function Bae(e,t){const r=new DataView(e),n=r.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:Bs(r,8),rootDirectoryLength:Bs(r,16),jsonMetadataOffset:Bs(r,24),jsonMetadataLength:Bs(r,32),leafDirectoryOffset:Bs(r,40),leafDirectoryLength:Bs(r,48),tileDataOffset:Bs(r,56),tileDataLength:Bs(r,64),numAddressedTiles:Bs(r,72),numTileEntries:Bs(r,80),numTileContents:Bs(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function OB(e){const t={buf:new Uint8Array(e),pos:0},r=vg(t),n=[];let i=0;for(let o=0;o<r;o++){const u=vg(t);n.push({tileId:i+u,offset:0,length:0,runLength:1}),i+=u}for(let o=0;o<r;o++)n[o].runLength=vg(t);for(let o=0;o<r;o++)n[o].length=vg(t);for(let o=0;o<r;o++){const u=vg(t);u===0&&o>0?n[o].offset=n[o-1].offset+n[o-1].length:n[o].offset=u-1}return n}function Fae(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var _k=class extends Error{};function Nae(e,t){return mo(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Fae(r.data)<3)return[yield zB.getHeader(e)];const i=r.data.slice(0,Lae),o=Bae(i,r.etag),u=r.data.slice(o.rootDirectoryOffset,o.rootDirectoryOffset+o.rootDirectoryLength),a=`${e.getKey()}|${o.etag||""}|${o.rootDirectoryOffset}|${o.rootDirectoryLength}`,p=OB(yield t(u,o.internalCompression));return[o,[a,p.length,p]]})}function jae(e,t,r,n,i){return mo(this,null,function*(){const o=yield e.getBytes(r,n,void 0,i.etag),u=yield t(o.data,i.internalCompression),a=OB(u);if(a.length===0)throw new Error("Empty directory is invalid");return a})}var Vae=class{constructor(e=100,t=!0,r=LB){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return mo(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const n=new Promise((i,o)=>{Nae(e,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),i(u[0]),this.prune()}).catch(u=>{o(u)})});return this.cache.set(t,{lastUsed:this.counter++,data:n}),n})}getDirectory(e,t,r,n){return mo(this,null,function*(){const i=`${e.getKey()}|${n.etag||""}|${t}|${r}`,o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,yield o.data;const u=new Promise((a,p)=>{jae(e,this.decompress,t,r,n).then(m=>{a(m),this.prune()}).catch(m=>{p(m)})});return this.cache.set(i,{lastUsed:this.counter++,data:u}),u})}getArrayBuffer(e,t,r,n){return mo(this,null,function*(){const i=`${e.getKey()}|${n.etag||""}|${t}|${r}`,o=this.cache.get(i);if(o)return o.lastUsed=this.counter++,yield o.data;const u=new Promise((a,p)=>{e.getBytes(t,r,void 0,n.etag).then(m=>{a(m.data),this.cache.has(i),this.prune()}).catch(m=>{p(m)})});return this.cache.set(i,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,n)=>{r.lastUsed<e&&(e=r.lastUsed,t=n)}),t&&this.cache.delete(t)}}invalidate(e){return mo(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((n,i)=>{this.getHeader(e).then(o=>{n(),this.invalidations.delete(t)}).catch(o=>{i(o)})});this.invalidations.set(t,r)})}},o3=class{constructor(e,t,r){typeof e=="string"?this.source=new $ae(e):this.source=e,r?this.decompress=r:this.decompress=LB,t?this.cache=t:this.cache=new Vae}getHeader(){return mo(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,n){return mo(this,null,function*(){const i=Dae(e,t,r),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return zB.getZxy(o,this.source,this.cache,e,t,r,n);if(e<o.minZoom||e>o.maxZoom)return;let u=o.rootDirectoryOffset,a=o.rootDirectoryLength;for(let p=0;p<=3;p++){const m=yield this.cache.getDirectory(this.source,u,a,o),w=Oae(m,i);if(w){if(w.runLength>0){const C=yield this.source.getBytes(o.tileDataOffset+w.offset,w.length,n,o.etag);return{data:yield this.decompress(C.data,o.tileCompression),cacheControl:C.cacheControl,expires:C.expires}}u=o.leafDirectoryOffset+w.offset,a=w.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,n){return mo(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,n)}catch(i){if(i instanceof _k)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,n);throw i}})}getMetadataAttempt(){return mo(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(r))})}getMetadata(){return mo(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof _k)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return mo(this,null,function*(){const t=yield this.getHeader(),r=yield this.getMetadata(),n=zae(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${n}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let a3=!1;function HI(){if(a3)return;const e=new Mae;wB.addProtocol("pmtiles",e.tile),a3=!0}const GI=e=>{HI();const{mode:t="light",children:r}=e,n=VI[t];return N.jsxs(N.Fragment,{children:[N.jsx(sn,{id:"background",type:"background",paint:{"background-color":n.land}}),N.jsxs(zu,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[N.jsx(sn,{"source-layer":"water",type:"fill",paint:{"fill-color":n.water}}),r,N.jsx(sn,{"source-layer":"states",type:"line",paint:{"line-color":n.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),N.jsx(sn,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":n.countryBorder,"line-width":2,"line-opacity":1}}),N.jsx(sn,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":n.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},xk=e=>(HI(),N.jsx(zu,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:N.jsx(sn,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));var Di=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(Di||{});const Jv=new Set(Array.from({length:17},(e,t)=>t)),Yv=e=>{const{game:t,visibleIcons:r=Jv,enableIconAutoHide:n=!0,mode:i="light"}=e,o=t==="ats"?c3(t,e.dlcs??Xv):c3(t,e.dlcs??xoe),u=VI[i];return HI(),N.jsxs(zu,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[N.jsx(sn,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],o],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":LS(i),"fill-outline-color":["case",["==",["get","color"],Fs.Road],u.mapAreaOutline,LS(i)]}}),N.jsx(sn,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],o],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":LS(i)}}),N.jsx(Uae,{game:t,mode:i,color:u.footprint}),N.jsx(sn,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],o],paint:{"line-color":u.hiddenRoad,"line-width":1,"line-opacity":.7}}),N.jsx(sn,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],o],layout:u3,paint:{"line-color":Wae(i),"line-gap-width":h3,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),N.jsx(sn,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],o],layout:u3,paint:{"line-color":qae(i),"line-width":h3}}),N.jsx(sn,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":u.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),N.jsx(sn,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":u.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),N.jsx(sn,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":u.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),N.jsx(sn,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":u.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),N.jsx(sn,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...dc,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":u.ferryHalo,"text-color":u.ferryLabel}}),N.jsx(sn,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...dc,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":u.trainHalo,"text-color":u.trainLabel}}),r.has(15)&&N.jsx(sn,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:n?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],o],layout:Sh(n,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&N.jsx(sn,{id:"euro-road-overlays","source-layer":t,minzoom:n?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",s3]]]],layout:Sh(n,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&N.jsx(sn,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],o],layout:Sh(n,.4,.75,1.25)}),t==="ats"&&r.has(16)&&N.jsx(sn,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:n?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],o],layout:Sh(n,.4,.75,1.25)}),t==="ats"&&r.has(16)&&N.jsx(sn,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:n?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],o,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",s3]]]]],layout:Sh(n,.4,.75,1.25)}),r.has(14)&&N.jsx(sn,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:n?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],o],layout:{...dc,"text-field":"{name}","text-allow-overlap":!n,"text-variable-anchor":Sf,"text-size":12,"icon-image":zS,"icon-allow-overlap":!n,"icon-size":.6},paint:u.primaryTextPaint}),r.has(14)&&N.jsx(sn,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:n?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],o],layout:{...dc,"text-field":"{name}","text-allow-overlap":!n,"text-variable-anchor":Sf,"text-size":13,"icon-image":zS,"icon-allow-overlap":!n,"icon-size":.6},paint:u.primaryTextPaint}),r.has(14)&&N.jsx(sn,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:n?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],o],layout:{...dc,"text-field":"{name}","text-allow-overlap":!n,"text-variable-anchor":Sf,"text-size":14,"icon-image":zS,"icon-allow-overlap":!n,"icon-size":.8},paint:u.primaryTextPaint}),t==="ets2"&&r.has(14)&&N.jsx(sn,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...dc,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Sf,"text-size":14},paint:u.primaryTextPaint}),t==="ats"&&r.has(14)&&N.jsx(sn,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...dc,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":Sf,"text-size":["step",["zoom"],10,5,13]},paint:u.secondaryTextPaint}),bk(r)&&N.jsx(sn,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:n?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],l3(r),o],layout:Sh(n,.6,1.25,2.5,{vertical:2,horizontal:2})}),bk(r)&&(r.has(8)||r.has(9))&&N.jsx(sn,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:n?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["in",["get","poiType"],["literal",["viewpoint","landmark"]]],l3(r),o],layout:{...Sh(n,.6,1.25,2.5,{vertical:2,horizontal:2}),...dc,"text-field":"{poiName}","text-allow-overlap":!n,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:u.primaryTextPaint})]})},Uae=({game:e,color:t,mode:r})=>N.jsxs(zu,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[N.jsx(sn,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),N.jsx(sn,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function Sh(e,t,r,n,i={vertical:10,horizontal:30}){const o=["literal",[i.vertical,i.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":o,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,n]}}const zS=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],Hae=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],s3=["weigh_ico","toll_ico","agri_check","border_ico"];function bk(e){return Hae.some(t=>e.has(t))}function l3(e){rd.checkArgument(bk(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const n=[];e.has(13)&&n.push("weigh_ico"),e.has(1)&&n.push("toll_ico"),e.has(10)&&n.push("agri_check"),e.has(11)&&n.push("border_ico");const i=t.length>0?["in",["get","poiType"],["literal",t]]:!1,o=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,u=n.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",n]]]:!1;return["any",i,o,u]}function c3(e,t){if(e!=="ats")return["boolean",!0];const r=xw(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Sf=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],dc={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},u3={"line-cap":"round","line-join":"bevel"},h3=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],$B={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},Gae={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},qae=e=>["match",["get","roadType"],...Object.entries($B[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],Wae=e=>["match",["get","roadType"],...Object.entries($B[e]).flatMap(([t,[,r]])=>[t,r]),"#b0b"],LS=e=>["match",["get","color"],...Object.entries(Gae[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],BB="https://raw.githubusercontent.com/nautofon/ats-towns/california/all-towns.geojson",FB="/ets2-villages.geojson";var co=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(co||{});const Zae={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},Kae=new Set(Object.keys(Zae)),Qv=e=>{const{game:t,enableAutoHide:r=!0,mode:n="light"}=e,i=t==="ats"?BB:FB,o=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??Kae]]]:["boolean",!0],u=VI[n];return N.jsx(zu,{id:`${t}-scenery-towns`,type:"geojson",data:i,children:N.jsx(sn,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:o,layout:{...dc,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Sf,"text-size":10.5},paint:u.primaryTextPaint})})},qI=new Proxy({version:8,sprite:"/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]},{get(e,t,r){var n;return t==="sprite"&&((n=e.sprite)!=null&&n.toString().match(/^\/\w/))?window.location.origin+e.sprite.toString():Reflect.get(e,t,r)}}),Xae=e=>{console.log("render slippy map");const{Destinations:t,TrailerOrWaypointMarkers:r,PlayerMarker:n}=e,i=z.useRef(null),o=z.useRef(null);return N.jsxs($I,{ref:i,onLoad:()=>e.onLoad(un(i.current),un(o.current)),onDragStart:()=>e.onDragStart(),onZoomStart:u=>{u.originalEvent&&e.onDragStart()},style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,mapStyle:qI,children:[N.jsx(GI,{}),N.jsx(Yv,{game:"ats"}),N.jsx(Yv,{game:"ets2"}),N.jsx(Qv,{game:"ats"}),N.jsx(Qv,{game:"ets2"}),N.jsx(zu,{id:"activeRoute",type:"geojson",data:{type:"FeatureCollection",features:[]},children:N.jsx(sn,{id:"activeRouteLayer",type:"line",paint:{"line-color":"#f00","line-width":5,"line-opacity":1}})}),Array.from({length:2},(u,a)=>N.jsx(zu,{id:`previewRoute-${a}`,type:"geojson",data:{type:"FeatureCollection",features:[]},children:N.jsx(sn,{id:`previewRouteLayer-${a}`,type:"line",paint:{"line-color":"#f00","line-width":5,"line-opacity":1}})},`previewRoute-${a}`)),N.jsx(t,{}),N.jsx(r,{}),N.jsx(n,{ref:o}),N.jsx(BI,{compact:!0,style:{marginLeft:54,opacity:.5},customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."})]})},Jae=e=>{if(console.log("render trailer or waypoints"),e.trailerPoint)return N.jsx(Lv,{color:"#0f0",longitude:e.trailerPoint[0],latitude:e.trailerPoint[1]});if(!e.activeRoute)return null;const t=[],r=e.activeRoute.segments.length;for(let n=0;n<r;n++){const i=e.activeRoute.segments[n],o=un(i.lonLats.at(-1)),u=n===r-1;t.push(N.jsx(Lv,{color:u?"red":"blue",longitude:o[0],latitude:o[1]},o.join()+n))}return t};function Yae(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var nd=1,id=2,sp=3,Qae=4,wk=5,d3=6378137,ese=6356752314e-3,f3=.0066943799901413165,nv=484813681109536e-20,gt=Math.PI/2,tse=.16666666666666666,rse=.04722222222222222,nse=.022156084656084655,qt=1e-10,ho=.017453292519943295,Ml=57.29577951308232,bn=Math.PI/4,ey=Math.PI*2,Ei=3.14159265359,Ca={};Ca.greenwich=0;Ca.lisbon=-9.131906111111;Ca.paris=2.337229166667;Ca.bogota=-74.080916666667;Ca.madrid=-3.687938888889;Ca.rome=12.452333333333;Ca.bern=7.439583333333;Ca.jakarta=106.807719444444;Ca.ferro=-17.666666666667;Ca.brussels=4.367975;Ca.stockholm=18.058277777778;Ca.athens=23.7163375;Ca.oslo=10.722916666667;const ise={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var p3=/[\s_\-\/\(\)]/g;function Fu(e,t){if(e[t])return e[t];for(var r=Object.keys(e),n=t.toLowerCase().replace(p3,""),i=-1,o,u;++i<r.length;)if(o=r[i],u=o.toLowerCase().replace(p3,""),u===n)return e[o]}function Sk(e){var t={},r=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,p){var m=p.split("=");return m.push(!0),a[m[0].toLowerCase()]=m[1],a},{}),n,i,o,u={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*ho},lat_1:function(a){t.lat1=a*ho},lat_2:function(a){t.lat2=a*ho},lat_ts:function(a){t.lat_ts=a*ho},lon_0:function(a){t.long0=a*ho},lon_1:function(a){t.long1=a*ho},lon_2:function(a){t.long2=a*ho},alpha:function(a){t.alpha=parseFloat(a)*ho},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*ho},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r:function(a){t.a=t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(p){return parseFloat(p)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var p=Fu(ise,a);p&&(t.to_meter=p.to_meter)},from_greenwich:function(a){t.from_greenwich=a*ho},pm:function(a){var p=Fu(Ca,a);t.from_greenwich=(p||parseFloat(a))*ho},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var p="ewnsud";a.length===3&&p.indexOf(a.substr(0,1))!==-1&&p.indexOf(a.substr(1,1))!==-1&&p.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(n in r)i=r[n],n in u?(o=u[n],typeof o=="function"?o(i):t[o]=i):t[n]=i;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var ty=1,NB=2,jB=3,Ax=4,VB=5,WI=-1,ose=/\s/,ase=/[A-Za-z]/,sse=/[A-Za-z84_]/,ww=/[,\]]/,UB=/[\d\.E\-\+]/;function jc(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ty}jc.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Ax)for(;ose.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case ty:return this.neutral(e);case NB:return this.keyword(e);case Ax:return this.quoted(e);case VB:return this.afterquote(e);case jB:return this.number(e);case WI:return}};jc.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Ax;return}if(ww.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};jc.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ty;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ty,this.currentObject=this.stack.pop(),this.currentObject||(this.state=WI);return}};jc.prototype.number=function(e){if(UB.test(e)){this.word+=e;return}if(ww.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};jc.prototype.quoted=function(e){if(e==='"'){this.state=VB;return}this.word+=e};jc.prototype.keyword=function(e){if(sse.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=ty;return}if(ww.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};jc.prototype.neutral=function(e){if(ase.test(e)){this.word=e,this.state=NB;return}if(e==='"'){this.word="",this.state=Ax;return}if(UB.test(e)){this.word=e,this.state=jB;return}if(ww.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};jc.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===WI)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function lse(e){var t=new jc(e);return t.output()}function OS(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,i=r.reduce(function(o,u){return Vf(u,o),o},n);t&&(e[t]=i)}function Vf(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},Vf(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var n;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Vf(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Vf(e[3],t[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],OS(t,r,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],OS(t,r,e),t[r].type=r;return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return Vf(e,t[r]);return OS(t,r,e)}}var cse=.017453292519943295,use=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function hse(e,t){var r=t[0],n=t[1];!(r in e)&&n in e&&(e[r]=e[n],t.length===3&&(e[r]=t[2](e[r])))}function xl(e){return e*cse}function HB(e){for(var t=Object.keys(e),r=0,n=t.length;r<n;++r){var i=t[r];use.indexOf(i)!==-1&&dse(e[i]),typeof e[i]=="object"&&HB(e[i])}}function dse(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",n=0,i=e.AXIS.length;n<i;++n){var o=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?r+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?r+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?r+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(r+="w")}r.length===2&&(r+="u"),r.length===3&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var u=e.GEOGCS;e.type==="GEOGCS"&&(u=e),u&&(u.DATUM?e.datumCode=u.DATUM.name.toLowerCase():e.datumCode=u.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),u.DATUM&&u.DATUM.SPHEROID&&(e.ellps=u.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=u.DATUM.SPHEROID.a,e.rf=parseFloat(u.DATUM.SPHEROID.rf,10)),u.DATUM&&u.DATUM.TOWGS84&&(e.datum_params=u.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function a(w){var C=e.to_meter||1;return w*C}var p=function(w){return hse(e,w)},m=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",xl],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",xl],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",xl],["lat0","latitude_of_origin",xl],["lat0","standard_parallel_1",xl],["lat1","standard_parallel_1",xl],["lat2","standard_parallel_2",xl],["azimuth","Azimuth"],["alpha","azimuth",xl],["srsCode","name"]];m.forEach(p),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=xl(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=xl(e.lat0>0?90:-90))}function GB(e){var t=lse(e),r=t[0],n={};return Vf(t,n),HB(n),n[r]}function Zo(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?Zo[e]=Sk(arguments[1]):Zo[e]=GB(arguments[1]):Zo[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?Zo.apply(t,n):Zo(n)});if(typeof e=="string"){if(e in Zo)return Zo[e]}else"EPSG"in e?Zo["EPSG:"+e.EPSG]=e:"ESRI"in e?Zo["ESRI:"+e.ESRI]=e:"IAU2000"in e?Zo["IAU2000:"+e.IAU2000]=e:console.log(e);return}}Yae(Zo);function fse(e){return typeof e=="string"}function pse(e){return e in Zo}var mse=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function gse(e){return mse.some(function(t){return e.indexOf(t)>-1})}var vse=["3857","900913","3785","102113"];function yse(e){var t=Fu(e,"authority");if(t){var r=Fu(t,"epsg");return r&&vse.indexOf(r)>-1}}function _se(e){var t=Fu(e,"extension");if(t)return Fu(t,"proj4")}function xse(e){return e[0]==="+"}function bse(e){if(fse(e)){if(pse(e))return Zo[e];if(gse(e)){var t=GB(e);if(yse(t))return Zo["EPSG:3857"];var r=_se(t);return r?Sk(r):t}if(xse(e))return Sk(e)}else return e}function m3(e,t){e=e||{};var r,n;if(!t)return e;for(n in t)r=t[n],r!==void 0&&(e[n]=r);return e}function Gl(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)}function Fy(e){return e<0?-1:1}function Zt(e){return Math.abs(e)<=Ei?e:e-Fy(e)*ey}function Ys(e,t,r){var n=e*r,i=.5*e;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(gt-t))/n}function ry(e,t){for(var r=.5*e,n,i,o=gt-2*Math.atan(t),u=0;u<=15;u++)if(n=e*Math.sin(o),i=gt-2*Math.atan(t*Math.pow((1-n)/(1+n),r))-o,o+=i,Math.abs(i)<=1e-10)return o;return-9999}function wse(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Gl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Sse(e){var t=e.x,r=e.y;if(r*Ml>90&&r*Ml<-90&&t*Ml>180&&t*Ml<-180)return null;var n,i;if(Math.abs(Math.abs(r)-gt)<=qt)return null;if(this.sphere)n=this.x0+this.a*this.k0*Zt(t-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(bn+.5*r));else{var o=Math.sin(r),u=Ys(this.e,r,o);n=this.x0+this.a*this.k0*Zt(t-this.long0),i=this.y0-this.a*this.k0*Math.log(u)}return e.x=n,e.y=i,e}function Cse(e){var t=e.x-this.x0,r=e.y-this.y0,n,i;if(this.sphere)i=gt-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(i=ry(this.e,o),i===-9999)return null}return n=Zt(this.long0+t/(this.a*this.k0)),e.x=n,e.y=i,e}var Tse=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const kse={init:wse,forward:Sse,inverse:Cse,names:Tse};function Ese(){}function g3(e){return e}var Ise=["longlat","identity"];const Mse={init:Ese,forward:g3,inverse:g3,names:Ise};var Pse=[kse,Mse],m1={},Rx=[];function qB(e,t){var r=Rx.length;return e.names?(Rx[r]=e,e.names.forEach(function(n){m1[n.toLowerCase()]=r}),this):(console.log(t),!0)}function Ase(e){if(!e)return!1;var t=e.toLowerCase();if(typeof m1[t]<"u"&&Rx[m1[t]])return Rx[m1[t]]}function Rse(){Pse.forEach(qB)}const Dse={start:Rse,add:qB,get:Ase};var kr={};kr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};kr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};kr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};kr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};kr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};kr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};kr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};kr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};kr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};kr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};kr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};kr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};kr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};kr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};kr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};kr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};kr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};kr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};kr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};kr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};kr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};kr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};kr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};kr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};kr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};kr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};kr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};kr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};kr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};kr.hough={a:6378270,rf:297,ellipseName:"Hough"};kr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};kr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};kr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};kr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};kr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};kr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};kr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};kr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};kr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};kr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};kr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};kr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var zse=kr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};kr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Lse(e,t,r,n){var i=e*e,o=t*t,u=(i-o)/i,a=0;n?(e*=1-u*(tse+u*(rse+u*nse)),i=e*e,u=0):a=Math.sqrt(u);var p=(i-o)/o;return{es:u,e:a,ep2:p}}function Ose(e,t,r,n,i){if(!e){var o=Fu(kr,n);o||(o=zse),e=o.a,t=o.b,r=o.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<qt)&&(i=!0,t=e),{a:e,b:t,rf:r,sphere:i}}var g1={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var $se in g1){var v3=g1[$se];g1[v3.datumName]=v3}function Bse(e,t,r,n,i,o,u){var a={};return e===void 0||e==="none"?a.datum_type=wk:a.datum_type=Qae,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=nd),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=id,a.datum_params[3]*=nv,a.datum_params[4]*=nv,a.datum_params[5]*=nv,a.datum_params[6]=a.datum_params[6]/1e6+1)),u&&(a.datum_type=sp,a.grids=u),a.a=r,a.b=n,a.es=i,a.ep2=o,a}var WB={};function Fse(e,t){var r=new DataView(t),n=Vse(r),i=Use(r,n),o=Hse(r,i,n),u={header:i,subgrids:o};return WB[e]=u,u}function Nse(e){if(e===void 0)return null;var t=e.split(",");return t.map(jse)}function jse(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:WB[e]||null,isNull:!1}}function Uf(e){return e/3600*Math.PI/180}function Vse(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Use(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Ck(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function Ck(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function Hse(e,t,r){for(var n=176,i=[],o=0;o<t.nSubgrids;o++){var u=qse(e,n,r),a=Wse(e,n,u,r),p=Math.round(1+(u.upperLongitude-u.lowerLongitude)/u.longitudeInterval),m=Math.round(1+(u.upperLatitude-u.lowerLatitude)/u.latitudeInterval);i.push({ll:[Uf(u.lowerLongitude),Uf(u.lowerLatitude)],del:[Uf(u.longitudeInterval),Uf(u.latitudeInterval)],lim:[p,m],count:u.gridNodeCount,cvs:Gse(a)}),n+=176+u.gridNodeCount*16}return i}function Gse(e){return e.map(function(t){return[Uf(t.longitudeShift),Uf(t.latitudeShift)]})}function qse(e,t,r){return{name:Ck(e,t+8,t+16).trim(),parent:Ck(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function Wse(e,t,r,n){for(var i=t+176,o=16,u=[],a=0;a<r.gridNodeCount;a++){var p={latitudeShift:e.getFloat32(i+a*o,n),longitudeShift:e.getFloat32(i+a*o+4,n),latitudeAccuracy:e.getFloat32(i+a*o+8,n),longitudeAccuracy:e.getFloat32(i+a*o+12,n)};u.push(p)}return u}function Fl(e,t){if(!(this instanceof Fl))return new Fl(e);t=t||function(m){if(m)throw m};var r=bse(e);if(typeof r!="object"){t("Could not parse to valid json: "+e);return}var n=Fl.projections.get(r.projName);if(!n){t("Could not get projection name from: "+e);return}if(r.datumCode&&r.datumCode!=="none"){var i=Fu(g1,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var o=Ose(r.a,r.b,r.rf,r.ellps,r.sphere),u=Lse(o.a,o.b,o.rf,r.R_A),a=Nse(r.nadgrids),p=r.datum||Bse(r.datumCode,r.datum_params,o.a,o.b,u.es,u.ep2,a);m3(this,r),m3(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=u.es,this.e=u.e,this.ep2=u.ep2,this.datum=p,this.init(),t(null,this)}Fl.projections=Dse;Fl.projections.start();function Zse(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===nd?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===id?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function ZB(e,t,r){var n=e.x,i=e.y,o=e.z?e.z:0,u,a,p,m;if(i<-gt&&i>-1.001*gt)i=-gt;else if(i>gt&&i<1.001*gt)i=gt;else{if(i<-gt)return{x:-1/0,y:-1/0,z:e.z};if(i>gt)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),a=Math.sin(i),m=Math.cos(i),p=a*a,u=r/Math.sqrt(1-t*p),{x:(u+o)*m*Math.cos(n),y:(u+o)*m*Math.sin(n),z:(u*(1-t)+o)*a}}function KB(e,t,r,n){var i=1e-12,o=i*i,u=30,a,p,m,w,C,T,P,R,$,H,D,O,L,Q=e.x,V=e.y,F=e.z?e.z:0,X,re,ye;if(a=Math.sqrt(Q*Q+V*V),p=Math.sqrt(Q*Q+V*V+F*F),a/r<i){if(X=0,p/r<i)return re=gt,ye=-n,{x:e.x,y:e.y,z:e.z}}else X=Math.atan2(V,Q);m=F/p,w=a/p,C=1/Math.sqrt(1-t*(2-t)*w*w),R=w*(1-t)*C,$=m*C,L=0;do L++,P=r/Math.sqrt(1-t*$*$),ye=a*R+F*$-P*(1-t*$*$),T=t*P/(P+ye),C=1/Math.sqrt(1-T*(2-T)*w*w),H=w*(1-T)*C,D=m*C,O=D*R-H*$,R=H,$=D;while(O*O>o&&L<u);return re=Math.atan(D/Math.abs(H)),{x:X,y:re,z:ye}}function Kse(e,t,r){if(t===nd)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===id){var n=r[0],i=r[1],o=r[2],u=r[3],a=r[4],p=r[5],m=r[6];return{x:m*(e.x-p*e.y+a*e.z)+n,y:m*(p*e.x+e.y-u*e.z)+i,z:m*(-a*e.x+u*e.y+e.z)+o}}}function Xse(e,t,r){if(t===nd)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===id){var n=r[0],i=r[1],o=r[2],u=r[3],a=r[4],p=r[5],m=r[6],w=(e.x-n)/m,C=(e.y-i)/m,T=(e.z-o)/m;return{x:w+p*C-a*T,y:-p*w+C+u*T,z:a*w-u*C+T}}}function $_(e){return e===nd||e===id}function Jse(e,t,r){if(Zse(e,t)||e.datum_type===wk||t.datum_type===wk)return r;var n=e.a,i=e.es;if(e.datum_type===sp){var o=y3(e,!1,r);if(o!==0)return;n=d3,i=f3}var u=t.a,a=t.b,p=t.es;if(t.datum_type===sp&&(u=d3,a=ese,p=f3),i===p&&n===u&&!$_(e.datum_type)&&!$_(t.datum_type))return r;if(r=ZB(r,i,n),$_(e.datum_type)&&(r=Kse(r,e.datum_type,e.datum_params)),$_(t.datum_type)&&(r=Xse(r,t.datum_type,t.datum_params)),r=KB(r,p,u,a),t.datum_type===sp){var m=y3(t,!0,r);if(m!==0)return}return r}function y3(e,t,r){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},o=[];e:for(var u=0;u<e.grids.length;u++){var a=e.grids[u];if(o.push(a.name),a.isNull){i=n;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var p=a.grid.subgrids,m=0,w=p.length;m<w;m++){var C=p[m],T=(Math.abs(C.del[1])+Math.abs(C.del[0]))/1e4,P=C.ll[0]-T,R=C.ll[1]-T,$=C.ll[0]+(C.lim[0]-1)*C.del[0]+T,H=C.ll[1]+(C.lim[1]-1)*C.del[1]+T;if(!(R>n.y||P>n.x||H<n.y||$<n.x)&&(i=Yse(n,t,C),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Ml+" "+n.y*Ml+" tried: '"+o+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function Yse(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var i={x:e.x,y:e.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=Zt(i.x-Math.PI)+Math.PI;var o=_3(i,r);if(t){if(isNaN(o.x))return n;o.x=i.x-o.x,o.y=i.y-o.y;var u=9,a=1e-12,p,m;do{if(m=_3(o,r),isNaN(m.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}p={x:i.x-(m.x+o.x),y:i.y-(m.y+o.y)},o.x+=p.x,o.y+=p.y}while(u--&&Math.abs(p.x)>a&&Math.abs(p.y)>a);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Zt(o.x+r.ll[0]),n.y=o.y+r.ll[1]}else isNaN(o.x)||(n.x=e.x+o.x,n.y=e.y+o.y);return n}function _3(e,t){var r={x:e.x/t.del[0],y:e.y/t.del[1]},n={x:Math.floor(r.x),y:Math.floor(r.y)},i={x:r.x-1*n.x,y:r.y-1*n.y},o={x:Number.NaN,y:Number.NaN},u;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return o;u=n.y*t.lim[0]+n.x;var a={x:t.cvs[u][0],y:t.cvs[u][1]};u++;var p={x:t.cvs[u][0],y:t.cvs[u][1]};u+=t.lim[0];var m={x:t.cvs[u][0],y:t.cvs[u][1]};u--;var w={x:t.cvs[u][0],y:t.cvs[u][1]},C=i.x*i.y,T=i.x*(1-i.y),P=(1-i.x)*(1-i.y),R=(1-i.x)*i.y;return o.x=P*a.x+T*p.x+R*w.x+C*m.x,o.y=P*a.y+T*p.y+R*w.y+C*m.y,o}function x3(e,t,r){var n=r.x,i=r.y,o=r.z||0,u,a,p,m={};for(p=0;p<3;p++)if(!(t&&p===2&&r.z===void 0))switch(p===0?(u=n,"ew".indexOf(e.axis[p])!==-1?a="x":a="y"):p===1?(u=i,"ns".indexOf(e.axis[p])!==-1?a="y":a="x"):(u=o,a="z"),e.axis[p]){case"e":m[a]=u;break;case"w":m[a]=-u;break;case"n":m[a]=u;break;case"s":m[a]=-u;break;case"u":r[a]!==void 0&&(m.z=u);break;case"d":r[a]!==void 0&&(m.z=-u);break;default:return null}return m}function XB(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function Qse(e){b3(e.x),b3(e.y)}function b3(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ele(e,t){return(e.datum.datum_type===nd||e.datum.datum_type===id||e.datum.datum_type===sp)&&t.datumCode!=="WGS84"||(t.datum.datum_type===nd||t.datum.datum_type===id||t.datum.datum_type===sp)&&e.datumCode!=="WGS84"}function Dx(e,t,r,n){var i;Array.isArray(r)?r=XB(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var o=r.z!==void 0;if(Qse(r),e.datum&&t.datum&&ele(e,t)&&(i=new Fl("WGS84"),r=Dx(e,i,r,n),e=i),n&&e.axis!=="enu"&&(r=x3(e,!1,r)),e.projName==="longlat")r={x:r.x*ho,y:r.y*ho,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r),!r)return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=Jse(e.datum,t.datum,r),!!r)return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*Ml,y:r.y*Ml,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),n&&t.axis!=="enu"?x3(t,!0,r):(r&&!o&&delete r.z,r)}var w3=Fl("WGS84");function $S(e,t,r,n){var i,o,u;return Array.isArray(r)?(i=Dx(e,t,r,n)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(r.slice(3)):[i.x,i.y,r[2]].concat(r.slice(3)):[i.x,i.y].concat(r.slice(2)):[i.x,i.y]):(o=Dx(e,t,r,n),u=Object.keys(r),u.length===2||u.forEach(function(a){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=r[a]}),o)}function S3(e){return e instanceof Fl?e:e.oProj?e.oProj:Fl(e)}function ea(e,t,r){e=S3(e);var n=!1,i;return typeof t>"u"?(t=e,e=w3,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,t=e,e=w3,n=!0),t=S3(t),r?$S(e,t,r):(i={forward:function(o,u){return $S(e,t,o,u)},inverse:function(o,u){return $S(t,e,o,u)}},n&&(i.oProj=t),i)}var C3=6,JB="AJSAJS",YB="AFAFAF",Hf=65,ha=73,os=79,zg=86,Lg=90;const tle={forward:QB,inverse:rle,toPoint:eF};function QB(e,t){return t=t||5,ole(nle({lat:e[1],lon:e[0]}),t)}function rle(e){var t=ZI(rF(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function eF(e){var t=ZI(rF(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function BS(e){return e*(Math.PI/180)}function T3(e){return 180*(e/Math.PI)}function nle(e){var t=e.lat,r=e.lon,n=6378137,i=.00669438,o=.9996,u,a,p,m,w,C,T,P=BS(t),R=BS(r),$,H;H=Math.floor((r+180)/6)+1,r===180&&(H=60),t>=56&&t<64&&r>=3&&r<12&&(H=32),t>=72&&t<84&&(r>=0&&r<9?H=31:r>=9&&r<21?H=33:r>=21&&r<33?H=35:r>=33&&r<42&&(H=37)),u=(H-1)*6-180+3,$=BS(u),a=i/(1-i),p=n/Math.sqrt(1-i*Math.sin(P)*Math.sin(P)),m=Math.tan(P)*Math.tan(P),w=a*Math.cos(P)*Math.cos(P),C=Math.cos(P)*(R-$),T=n*((1-i/4-3*i*i/64-5*i*i*i/256)*P-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*P)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*P)-35*i*i*i/3072*Math.sin(6*P));var D=o*p*(C+(1-m+w)*C*C*C/6+(5-18*m+m*m+72*w-58*a)*C*C*C*C*C/120)+5e5,O=o*(T+p*Math.tan(P)*(C*C/2+(5-m+9*w+4*w*w)*C*C*C*C/24+(61-58*m+m*m+600*w-330*a)*C*C*C*C*C*C/720));return t<0&&(O+=1e7),{northing:Math.round(O),easting:Math.round(D),zoneNumber:H,zoneLetter:ile(t)}}function ZI(e){var t=e.northing,r=e.easting,n=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var o=.9996,u=6378137,a=.00669438,p,m=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),w,C,T,P,R,$,H,D,O,L=r-5e5,Q=t;n<"N"&&(Q-=1e7),H=(i-1)*6-180+3,p=a/(1-a),$=Q/o,D=$/(u*(1-a/4-3*a*a/64-5*a*a*a/256)),O=D+(3*m/2-27*m*m*m/32)*Math.sin(2*D)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*D)+151*m*m*m/96*Math.sin(6*D),w=u/Math.sqrt(1-a*Math.sin(O)*Math.sin(O)),C=Math.tan(O)*Math.tan(O),T=p*Math.cos(O)*Math.cos(O),P=u*(1-a)/Math.pow(1-a*Math.sin(O)*Math.sin(O),1.5),R=L/(w*o);var V=O-w*Math.tan(O)/P*(R*R/2-(5+3*C+10*T-4*T*T-9*p)*R*R*R*R/24+(61+90*C+298*T+45*C*C-252*p-3*T*T)*R*R*R*R*R*R/720);V=T3(V);var F=(R-(1+2*C+T)*R*R*R/6+(5-2*T+28*C-3*T*T+8*p+24*C*C)*R*R*R*R*R/120)/Math.cos(O);F=H+T3(F);var X;if(e.accuracy){var re=ZI({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});X={top:re.lat,right:re.lon,bottom:V,left:F}}else X={lat:V,lon:F};return X}function ile(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function ole(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+ale(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t)}function ale(e,t,r){var n=tF(r),i=Math.floor(e/1e5),o=Math.floor(t/1e5)%20;return sle(i,o,n)}function tF(e){var t=e%C3;return t===0&&(t=C3),t}function sle(e,t,r){var n=r-1,i=JB.charCodeAt(n),o=YB.charCodeAt(n),u=i+e-1,a=o+t,p=!1;u>Lg&&(u=u-Lg+Hf-1,p=!0),(u===ha||i<ha&&u>ha||(u>ha||i<ha)&&p)&&u++,(u===os||i<os&&u>os||(u>os||i<os)&&p)&&(u++,u===ha&&u++),u>Lg&&(u=u-Lg+Hf-1),a>zg?(a=a-zg+Hf-1,p=!0):p=!1,(a===ha||o<ha&&a>ha||(a>ha||o<ha)&&p)&&a++,(a===os||o<os&&a>os||(a>os||o<os)&&p)&&(a++,a===ha&&a++),a>zg&&(a=a-zg+Hf-1);var m=String.fromCharCode(u)+String.fromCharCode(a);return m}function rF(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,n="",i,o=0;!/[A-Z]/.test(i=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;n+=i,o++}var u=parseInt(n,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;r=e.substring(o,o+=2);for(var p=tF(u),m=lle(r.charAt(0),p),w=cle(r.charAt(1),p);w<ule(a);)w+=2e6;var C=t-o;if(C%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var T=C/2,P=0,R=0,$,H,D,O,L;return T>0&&($=1e5/Math.pow(10,T),H=e.substring(o,o+T),P=parseFloat(H)*$,D=e.substring(o+T),R=parseFloat(D)*$),O=P+m,L=R+w,{easting:O,northing:L,zoneLetter:a,zoneNumber:u,accuracy:$}}function lle(e,t){for(var r=JB.charCodeAt(t-1),n=1e5,i=!1;r!==e.charCodeAt(0);){if(r++,r===ha&&r++,r===os&&r++,r>Lg){if(i)throw"Bad character: "+e;r=Hf,i=!0}n+=1e5}return n}function cle(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=YB.charCodeAt(t-1),n=0,i=!1;r!==e.charCodeAt(0);){if(r++,r===ha&&r++,r===os&&r++,r>zg){if(i)throw"Bad character: "+e;r=Hf,i=!0}n+=1e5}return n}function ule(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function zp(e,t,r){if(!(this instanceof zp))return new zp(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}zp.fromMGRS=function(e){return new zp(eF(e))};zp.prototype.toMGRS=function(e){return QB([this.x,this.y],e)};var hle=1,dle=.25,k3=.046875,E3=.01953125,I3=.01068115234375,fle=.75,ple=.46875,mle=.013020833333333334,gle=.007120768229166667,vle=.3645833333333333,yle=.005696614583333333,_le=.3076171875;function KI(e){var t=[];t[0]=hle-e*(dle+e*(k3+e*(E3+e*I3))),t[1]=e*(fle-e*(k3+e*(E3+e*I3)));var r=e*e;return t[2]=r*(ple-e*(mle+e*gle)),r*=e,t[3]=r*(vle-e*yle),t[4]=r*e*_le,t}function Zp(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var xle=20;function XI(e,t,r){for(var n=1/(1-t),i=e,o=xle;o;--o){var u=Math.sin(i),a=1-t*u*u;if(a=(Zp(i,u,Math.cos(i),r)-e)*(a*Math.sqrt(a))*n,i-=a,Math.abs(a)<qt)return i}return i}function ble(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=KI(this.es),this.ml0=Zp(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function wle(e){var t=e.x,r=e.y,n=Zt(t-this.long0),i,o,u,a=Math.sin(r),p=Math.cos(r);if(this.es){var w=p*n,C=Math.pow(w,2),T=this.ep2*Math.pow(p,2),P=Math.pow(T,2),R=Math.abs(p)>qt?Math.tan(r):0,$=Math.pow(R,2),H=Math.pow($,2);i=1-this.es*Math.pow(a,2),w=w/Math.sqrt(i);var D=Zp(r,a,p,this.en);o=this.a*(this.k0*w*(1+C/6*(1-$+T+C/20*(5-18*$+H+14*T-58*$*T+C/42*(61+179*H-H*$-479*$)))))+this.x0,u=this.a*(this.k0*(D-this.ml0+a*n*w/2*(1+C/12*(5-$+9*T+4*P+C/30*(61+H-58*$+270*T-330*$*T+C/56*(1385+543*H-H*$-3111*$))))))+this.y0}else{var m=p*Math.sin(n);if(Math.abs(Math.abs(m)-1)<qt)return 93;if(o=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,u=p*Math.cos(n)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(u),m>=1){if(m-1>qt)return 93;u=0}else u=Math.acos(u);r<0&&(u=-u),u=this.a*this.k0*(u-this.lat0)+this.y0}return e.x=o,e.y=u,e}function Sle(e){var t,r,n,i,o=(e.x-this.x0)*(1/this.a),u=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+u/this.k0,r=XI(t,this.es,this.en),Math.abs(r)<gt){var C=Math.sin(r),T=Math.cos(r),P=Math.abs(T)>qt?Math.tan(r):0,R=this.ep2*Math.pow(T,2),$=Math.pow(R,2),H=Math.pow(P,2),D=Math.pow(H,2);t=1-this.es*Math.pow(C,2);var O=o*Math.sqrt(t)/this.k0,L=Math.pow(O,2);t=t*P,n=r-t*L/(1-this.es)*.5*(1-L/12*(5+3*H-9*R*H+R-4*$-L/30*(61+90*H-252*R*H+45*D+46*R-L/56*(1385+3633*H+4095*D+1574*D*H)))),i=Zt(this.long0+O*(1-L/6*(1+2*H+R-L/20*(5+28*H+24*D+8*R*H+6*R-L/42*(61+662*H+1320*D+720*D*H))))/T)}else n=gt*Fy(u),i=0;else{var a=Math.exp(o/this.k0),p=.5*(a-1/a),m=this.lat0+u/this.k0,w=Math.cos(m);t=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(p,2))),n=Math.asin(t),u<0&&(n=-n),p===0&&w===0?i=0:i=Zt(Math.atan2(p,w)+this.long0)}return e.x=i,e.y=n,e}var Cle=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const v1={init:ble,forward:wle,inverse:Sle,names:Cle};function nF(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function pa(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function Tle(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function kle(e){var t=Math.abs(e);return t=Tle(t*(1+t/(pa(1,t)+1))),e<0?-t:t}function JI(e,t){for(var r=2*Math.cos(2*t),n=e.length-1,i=e[n],o=0,u;--n>=0;)u=-o+r*i+e[n],o=i,i=u;return t+u*Math.sin(2*t)}function Ele(e,t){for(var r=2*Math.cos(t),n=e.length-1,i=e[n],o=0,u;--n>=0;)u=-o+r*i+e[n],o=i,i=u;return Math.sin(t)*u}function Ile(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function iF(e,t,r){for(var n=Math.sin(t),i=Math.cos(t),o=nF(r),u=Ile(r),a=2*i*u,p=-2*n*o,m=e.length-1,w=e[m],C=0,T=0,P=0,R,$;--m>=0;)R=T,$=C,T=w,C=P,w=-R+a*T-p*C+e[m],P=-$+p*T+a*C;return a=n*u,p=i*o,[a*w-p*P,a*P+p*w]}function Mle(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(v1.init.apply(this),this.forward=v1.forward,this.inverse=v1.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var n=JI(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Ele(this.gtu,2*n))}function Ple(e){var t=Zt(e.x-this.long0),r=e.y;r=JI(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(t),u=Math.cos(t);r=Math.atan2(n,u*i),t=Math.atan2(o*i,pa(n,i*u)),t=kle(Math.tan(t));var a=iF(this.gtu,2*r,2*t);r=r+a[0],t=t+a[1];var p,m;return Math.abs(t)<=2.623395162778?(p=this.a*(this.Qn*t)+this.x0,m=this.a*(this.Qn*r+this.Zb)+this.y0):(p=1/0,m=1/0),e.x=p,e.y=m,e}function Ale(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var n,i;if(Math.abs(t)<=2.623395162778){var o=iF(this.utg,2*r,2*t);r=r+o[0],t=t+o[1],t=Math.atan(nF(t));var u=Math.sin(r),a=Math.cos(r),p=Math.sin(t),m=Math.cos(t);r=Math.atan2(u*m,pa(p,m*a)),t=Math.atan2(p,m*a),n=Zt(t+this.long0),i=JI(this.cgb,r)}else n=1/0,i=1/0;return e.x=n,e.y=i,e}var Rle=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const y1={init:Mle,forward:Ple,inverse:Ale,names:Rle};function Dle(e,t){if(e===void 0){if(e=Math.floor((Zt(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var zle="etmerc";function Lle(){var e=Dle(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*ho,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,y1.init.apply(this),this.forward=y1.forward,this.inverse=y1.inverse}var Ole=["Universal Transverse Mercator System","utm"];const $le={init:Lle,names:Ole,dependsOn:zle};function YI(e,t){return Math.pow((1-e)/(1+e),t)}var Ble=20;function Fle(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+bn)/(Math.pow(Math.tan(.5*this.lat0+bn),this.C)*YI(this.e*e,this.ratexp))}function Nle(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+bn),this.C)*YI(this.e*Math.sin(r),this.ratexp))-gt,e.x=this.C*t,e}function jle(e){for(var t=1e-14,r=e.x/this.C,n=e.y,i=Math.pow(Math.tan(.5*n+bn)/this.K,1/this.C),o=Ble;o>0&&(n=2*Math.atan(i*YI(this.e*Math.sin(e.y),-.5*this.e))-gt,!(Math.abs(n-e.y)<t));--o)e.y=n;return o?(e.x=r,e.y=n,e):null}var Vle=["gauss"];const QI={init:Fle,forward:Nle,inverse:jle,names:Vle};function Ule(){QI.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Hle(e){var t,r,n,i;return e.x=Zt(e.x-this.long0),QI.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=i*r*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Gle(e){var t,r,n,i,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=pa(e.x,e.y)){var u=2*Math.atan2(o,this.R2);t=Math.sin(u),r=Math.cos(u),i=Math.asin(r*this.sinc0+e.y*t*this.cosc0/o),n=Math.atan2(e.x*t,o*this.cosc0*r-e.y*this.sinc0*t)}else i=this.phic0,n=0;return e.x=n,e.y=i,QI.inverse.apply(this,[e]),e.x=Zt(e.x+this.long0),e}var qle=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Wle={init:Ule,forward:Hle,inverse:Gle,names:qle};function Zle(e,t,r){return t*=r,Math.tan(.5*(gt+e))*Math.pow((1-t)/(1+t),.5*r)}function Kle(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=qt&&(this.k0=.5*(1+Fy(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=qt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=qt&&Math.abs(Math.cos(this.lat_ts))>qt&&(this.k0=.5*this.cons*Gl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ys(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Gl(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-gt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Xle(e){var t=e.x,r=e.y,n=Math.sin(r),i=Math.cos(r),o,u,a,p,m,w,C=Zt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=qt&&Math.abs(r+this.lat0)<=qt?(e.x=NaN,e.y=NaN,e):this.sphere?(o=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(C)),e.x=this.a*o*i*Math.sin(C)+this.x0,e.y=this.a*o*(this.coslat0*n-this.sinlat0*i*Math.cos(C))+this.y0,e):(u=2*Math.atan(this.ssfn_(r,n,this.e))-gt,p=Math.cos(u),a=Math.sin(u),Math.abs(this.coslat0)<=qt?(m=Ys(this.e,r*this.con,this.con*n),w=2*this.a*this.k0*m/this.cons,e.x=this.x0+w*Math.sin(t-this.long0),e.y=this.y0-this.con*w*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<qt?(o=2*this.a*this.k0/(1+p*Math.cos(C)),e.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*p*Math.cos(C))),e.y=o*(this.cosX0*a-this.sinX0*p*Math.cos(C))+this.y0),e.x=o*p*Math.sin(C)+this.x0,e))}function Jle(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,o,u=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(u/(2*this.a*this.k0));return t=this.long0,r=this.lat0,u<=qt?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/u),Math.abs(this.coslat0)<qt?this.lat0>0?t=Zt(this.long0+Math.atan2(e.x,-1*e.y)):t=Zt(this.long0+Math.atan2(e.x,e.y)):t=Zt(this.long0+Math.atan2(e.x*Math.sin(a),u*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=qt){if(u<=qt)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=u*this.cons/(2*this.a*this.k0),r=this.con*ry(this.e,n),t=this.con*Zt(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(u*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,u<=qt?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/u),t=Zt(this.long0+Math.atan2(e.x*Math.sin(i),u*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),r=-1*ry(this.e,Math.tan(.5*(gt+o)));return e.x=t,e.y=r,e}var Yle=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const Qle={init:Kle,forward:Xle,inverse:Jle,names:Yle,ssfn_:Zle};function ece(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=this.rf,i=1/n,o=2*i-Math.pow(i,2),u=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),p=Math.log(Math.tan(Math.PI/4+e/2)),m=Math.log((1+u*t)/(1-u*t));this.K=a-this.alpha*p+this.alpha*u/2*m}function tce(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),u=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*u+this.x0,e}function rce(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),u=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+u/this.alpha,p=0,m=o,w=-1e3,C=0;Math.abs(m-w)>1e-7;){if(++C>20)return;p=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(m))/2)),w=m,m=2*Math.atan(Math.exp(p))-Math.PI/2}return e.x=a,e.y=m,e}var nce=["somerc"];const ice={init:ece,forward:tce,inverse:rce,names:nce};var Cf=1e-7;function oce(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(r)!==-1}function ace(){var e,t,r,n,i,o,u,a,p,m,w=0,C,T=0,P=0,R=0,$=0,H=0,D=0;this.no_off=oce(this),this.no_rot="no_rot"in this;var O=!1;"alpha"in this&&(O=!0);var L=!1;if("rectified_grid_angle"in this&&(L=!0),O&&(D=this.alpha),L&&(w=this.rectified_grid_angle*ho),O||L)T=this.longc;else if(P=this.long1,$=this.lat1,R=this.long2,H=this.lat2,Math.abs($-H)<=Cf||(e=Math.abs($))<=Cf||Math.abs(e-gt)<=Cf||Math.abs(Math.abs(this.lat0)-gt)<=Cf||Math.abs(Math.abs(H)-gt)<=Cf)throw new Error;var Q=1-this.es;t=Math.sqrt(Q),Math.abs(this.lat0)>qt?(a=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*a*a,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/Q),this.A=this.B*this.k0*t/e,n=this.B*t/(r*Math.sqrt(e)),i=n*n-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(Ys(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=i=1),O||L?(O?(C=Math.asin(Math.sin(D)/n),L||(w=D)):(C=w,D=Math.asin(n*Math.sin(C))),this.lam0=T-Math.asin(.5*(i-1/i)*Math.tan(C))/this.B):(o=Math.pow(Ys(this.e,$,Math.sin($)),this.B),u=Math.pow(Ys(this.e,H,Math.sin(H)),this.B),i=this.E/o,p=(u-o)/(u+o),m=this.E*this.E,m=(m-u*o)/(m+u*o),e=P-R,e<-Math.pi?R-=ey:e>Math.pi&&(R+=ey),this.lam0=Zt(.5*(P+R)-Math.atan(m*Math.tan(.5*this.B*(P-R))/p)/this.B),C=Math.atan(2*Math.sin(this.B*Zt(P-this.lam0))/(i-1/i)),w=D=Math.asin(n*Math.sin(C))),this.singam=Math.sin(C),this.cosgam=Math.cos(C),this.sinrot=Math.sin(w),this.cosrot=Math.cos(w),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(D))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*C,this.v_pole_n=this.ArB*Math.log(Math.tan(bn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(bn+i))}function sce(e){var t={},r,n,i,o,u,a,p,m;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-gt)>qt){if(u=this.E/Math.pow(Ys(this.e,e.y,Math.sin(e.y)),this.B),a=1/u,r=.5*(u-a),n=.5*(u+a),o=Math.sin(this.B*e.x),i=(r*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(i)-1)<qt)throw new Error;m=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*e.x),Math.abs(a)<Cf?p=this.A*e.x:p=this.ArB*Math.atan2(r*this.cosgam+o*this.singam,a)}else m=e.y>0?this.v_pole_n:this.v_pole_s,p=this.ArB*e.y;return this.no_rot?(t.x=p,t.y=m):(p-=this.u_0,t.x=m*this.cosrot+p*this.sinrot,t.y=p*this.cosrot-m*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function lce(e){var t,r,n,i,o,u,a,p={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*r),i=.5*(n-1/n),o=.5*(n+1/n),u=Math.sin(this.BrA*t),a=(u*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(a)-1)<qt)p.x=0,p.y=a<0?-gt:gt;else{if(p.y=this.E/Math.sqrt((1+a)/(1-a)),p.y=ry(this.e,Math.pow(p.y,1/this.B)),p.y===1/0)throw new Error;p.x=-this.rB*Math.atan2(i*this.cosgam-u*this.singam,Math.cos(this.BrA*t))}return p.x+=this.lam0,p}var cce=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const uce={init:ace,forward:sce,inverse:lce,names:cce};function hce(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<qt)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=Gl(this.e,t,r),i=Ys(this.e,this.lat1,t),o=Math.sin(this.lat2),u=Math.cos(this.lat2),a=Gl(this.e,o,u),p=Ys(this.e,this.lat2,o),m=Ys(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>qt?this.ns=Math.log(n/a)/Math.log(i/p):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function dce(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=qt&&(r=Fy(r)*(gt-2*qt));var n=Math.abs(Math.abs(r)-gt),i,o;if(n>qt)i=Ys(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(i,this.ns);else{if(n=r*this.ns,n<=0)return null;o=0}var u=this.ns*Zt(t-this.long0);return e.x=this.k0*(o*Math.sin(u))+this.x0,e.y=this.k0*(this.rh-o*Math.cos(u))+this.y0,e}function fce(e){var t,r,n,i,o,u=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(u*u+a*a),r=1):(t=-Math.sqrt(u*u+a*a),r=-1);var p=0;if(t!==0&&(p=Math.atan2(r*u,r*a)),t!==0||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),i=ry(this.e,n),i===-9999)return null}else i=-gt;return o=Zt(p/this.ns+this.long0),e.x=o,e.y=i,e}var pce=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const mce={init:hce,forward:dce,inverse:fce,names:pce};function gce(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function vce(e){var t,r,n,i,o,u,a,p=e.x,m=e.y,w=Zt(p-this.long0);return t=Math.pow((1+this.e*Math.sin(m))/(1-this.e*Math.sin(m)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(m/2+this.s45),this.alfa)/t)-this.s45),n=-w*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),u=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=a*Math.cos(u)/1,e.x=a*Math.sin(u)/1,this.czech||(e.y*=-1,e.x*=-1),e}function yce(e){var t,r,n,i,o,u,a,p,m=e.x;e.x=e.y,e.y=m,this.czech||(e.y*=-1,e.x*=-1),u=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x),i=o/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/u,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,p=0;var w=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(p=1),a=e.y,w+=1;while(p===0&&w<15);return w>=15?null:e}var _ce=["Krovak","krovak"];const xce={init:gce,forward:vce,inverse:yce,names:_ce};function Jo(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}function Ny(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function jy(e){return .375*e*(1+.25*e*(1+.46875*e))}function Vy(e){return .05859375*e*e*(1+.75*e)}function Uy(e){return e*e*e*(35/3072)}function Lp(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)}function Xu(e){return Math.abs(e)<gt?e:e-Fy(e)*Math.PI}function zx(e,t,r,n,i){var o,u;o=e/t;for(var a=0;a<15;a++)if(u=(e-(t*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),o+=u,Math.abs(u)<=1e-10)return o;return NaN}function bce(){this.sphere||(this.e0=Ny(this.es),this.e1=jy(this.es),this.e2=Vy(this.es),this.e3=Uy(this.es),this.ml0=this.a*Jo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function wce(e){var t,r,n=e.x,i=e.y;if(n=Zt(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),u=Math.cos(i),a=Lp(this.a,this.e,o),p=Math.tan(i)*Math.tan(i),m=n*Math.cos(i),w=m*m,C=this.es*u*u/(1-this.es),T=this.a*Jo(this.e0,this.e1,this.e2,this.e3,i);t=a*m*(1-w*p*(1/6-(8-p+8*C)*w/120)),r=T-this.ml0+a*o/u*w*(.5+(5-p+6*C)*w/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function Sce(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,n,i;if(this.sphere){var o=r+this.lat0;n=Math.asin(Math.sin(o)*Math.cos(t)),i=Math.atan2(Math.tan(t),Math.cos(o))}else{var u=this.ml0/this.a+r,a=zx(u,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-gt)<=qt)return e.x=this.long0,e.y=gt,r<0&&(e.y*=-1),e;var p=Lp(this.a,this.e,Math.sin(a)),m=p*p*p/this.a/this.a*(1-this.es),w=Math.pow(Math.tan(a),2),C=t*this.a/p,T=C*C;n=a-p*Math.tan(a)/m*C*C*(.5-(1+3*w)*C*C/24),i=C*(1-T*(w/3+(1+3*w)*w*T/15))/Math.cos(a)}return e.x=Zt(i+this.long0),e.y=Xu(n),e}var Cce=["Cassini","Cassini_Soldner","cass"];const Tce={init:bce,forward:wce,inverse:Sce,names:Cce};function Mu(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var kce=1,Ece=2,Ice=3,Mce=4;function Pce(){var e=Math.abs(this.lat0);if(Math.abs(e-gt)<qt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<qt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Mu(this.e,1),this.mmf=.5/(1-this.es),this.apa=Fce(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Mu(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ace(e){var t,r,n,i,o,u,a,p,m,w,C=e.x,T=e.y;if(C=Zt(C-this.long0),this.sphere){if(o=Math.sin(T),w=Math.cos(T),n=Math.cos(C),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+w*n:1+this.sinph0*o+this.cosph0*w*n,r<=qt)return null;r=Math.sqrt(2/r),t=r*w*Math.sin(C),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*w*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(T+this.lat0)<qt)return null;r=bn-T*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(C),r*=n}}else{switch(a=0,p=0,m=0,n=Math.cos(C),i=Math.sin(C),o=Math.sin(T),u=Mu(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=u/this.qp,p=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:m=1+this.sinb1*a+this.cosb1*p*n;break;case this.EQUIT:m=1+p*n;break;case this.N_POLE:m=gt+T,u=this.qp-u;break;case this.S_POLE:m=T-gt,u=this.qp+u;break}if(Math.abs(m)<qt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),this.mode===this.OBLIQ?r=this.ymf*m*(this.cosb1*a-this.sinb1*p*n):r=(m=Math.sqrt(2/(1+p*n)))*a*this.ymf,t=this.xmf*m*p*i;break;case this.N_POLE:case this.S_POLE:u>=0?(t=(m=Math.sqrt(u))*i,r=n*(this.mode===this.S_POLE?m:-m)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function Rce(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,n,i,o,u,a,p,m;if(this.sphere){var w=0,C,T=0;if(C=Math.sqrt(t*t+r*r),i=C*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(T=Math.sin(i),w=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(C)<=qt?0:Math.asin(r*T/C),t*=T,r=w*C;break;case this.OBLIQ:i=Math.abs(C)<=qt?this.lat0:Math.asin(w*this.sinph0+r*T*this.cosph0/C),t*=T*this.cosph0,r=(w-Math.sin(i)*this.sinph0)*C;break;case this.N_POLE:r=-r,i=gt-i;break;case this.S_POLE:i-=gt;break}n=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(m=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,p=Math.sqrt(t*t+r*r),p<qt)return e.x=this.long0,e.y=this.lat0,e;u=2*Math.asin(.5*p/this.rq),o=Math.cos(u),t*=u=Math.sin(u),this.mode===this.OBLIQ?(m=o*this.sinb1+r*u*this.cosb1/p,a=this.qp*m,r=p*this.cosb1*o-r*this.sinb1*u):(m=r*u/p,a=this.qp*m,r=p*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),a=t*t+r*r,!a)return e.x=this.long0,e.y=this.lat0,e;m=1-a/this.qp,this.mode===this.S_POLE&&(m=-m)}n=Math.atan2(t,r),i=Nce(Math.asin(m),this.apa)}return e.x=Zt(this.long0+n),e.y=i,e}var Dce=.3333333333333333,zce=.17222222222222222,Lce=.10257936507936508,Oce=.06388888888888888,$ce=.0664021164021164,Bce=.016415012942191543;function Fce(e){var t,r=[];return r[0]=e*Dce,t=e*e,r[0]+=t*zce,r[1]=t*Oce,t*=e,r[0]+=t*Lce,r[1]+=t*$ce,r[2]=t*Bce,r}function Nce(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var jce=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Vce={init:Pce,forward:Ace,inverse:Rce,names:jce,S_POLE:kce,N_POLE:Ece,EQUIT:Ice,OBLIQ:Mce};function Nu(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Uce(){Math.abs(this.lat1+this.lat2)<qt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Gl(this.e3,this.sin_po,this.cos_po),this.qs1=Mu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Gl(this.e3,this.sin_po,this.cos_po),this.qs2=Mu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Mu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>qt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Hce(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=Mu(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*Zt(t-this.long0),u=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return e.x=u,e.y=a,e}function Gce(e){var t,r,n,i,o,u;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),i=0,t!==0&&(i=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?u=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,u=this.phi1z(this.e3,r)),o=Zt(i/this.ns0+this.long0),e.x=o,e.y=u,e}function qce(e,t){var r,n,i,o,u,a=Nu(.5*t);if(e<qt)return a;for(var p=e*e,m=1;m<=25;m++)if(r=Math.sin(a),n=Math.cos(a),i=e*r,o=1-i*i,u=.5*o*o/n*(t/(1-p)-r/o+.5/e*Math.log((1-i)/(1+i))),a=a+u,Math.abs(u)<=1e-7)return a;return null}var Wce=["Albers_Conic_Equal_Area","Albers","aea"];const Zce={init:Uce,forward:Hce,inverse:Gce,names:Wce,phi1z:qce};function Kce(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Xce(e){var t,r,n,i,o,u,a,p,m=e.x,w=e.y;return n=Zt(m-this.long0),t=Math.sin(w),r=Math.cos(w),i=Math.cos(n),u=this.sin_p14*t+this.cos_p14*r*i,o=1,u>0||Math.abs(u)<=qt?(a=this.x0+this.a*o*r*Math.sin(n)/u,p=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*r*i)/u):(a=this.x0+this.infinity_dist*r*Math.sin(n),p=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*i)),e.x=a,e.y=p,e}function Jce(e){var t,r,n,i,o,u;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),r=Math.sin(i),n=Math.cos(i),u=Nu(n*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),o=Zt(this.long0+o)):(u=this.phic0,o=0),e.x=o,e.y=u,e}var Yce=["gnom"];const Qce={init:Kce,forward:Xce,inverse:Jce,names:Yce};function eue(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*gt:gt;for(var n=Math.asin(.5*t),i,o,u,a,p=0;p<30;p++)if(o=Math.sin(n),u=Math.cos(n),a=e*o,i=Math.pow(1-a*a,2)/(2*u)*(t/(1-e*e)-o/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),n+=i,Math.abs(i)<=1e-10)return n;return NaN}function tue(){this.sphere||(this.k0=Gl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function rue(e){var t=e.x,r=e.y,n,i,o=Zt(t-this.long0);if(this.sphere)n=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var u=Mu(this.e,Math.sin(r));n=this.x0+this.a*this.k0*o,i=this.y0+this.a*u*.5/this.k0}return e.x=n,e.y=i,e}function nue(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=Zt(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=eue(this.e,2*e.y*this.k0/this.a),t=Zt(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var iue=["cea"];const oue={init:tue,forward:rue,inverse:nue,names:iue};function aue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function sue(e){var t=e.x,r=e.y,n=Zt(t-this.long0),i=Xu(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*i,e}function lue(e){var t=e.x,r=e.y;return e.x=Zt(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Xu(this.lat0+(r-this.y0)/this.a),e}var cue=["Equirectangular","Equidistant_Cylindrical","eqc"];const uue={init:aue,forward:sue,inverse:lue,names:cue};var M3=20;function hue(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ny(this.es),this.e1=jy(this.es),this.e2=Vy(this.es),this.e3=Uy(this.es),this.ml0=this.a*Jo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function due(e){var t=e.x,r=e.y,n,i,o,u=Zt(t-this.long0);if(o=u*Math.sin(r),this.sphere)Math.abs(r)<=qt?(n=this.a*u,i=-1*this.a*this.lat0):(n=this.a*Math.sin(o)/Math.tan(r),i=this.a*(Xu(r-this.lat0)+(1-Math.cos(o))/Math.tan(r)));else if(Math.abs(r)<=qt)n=this.a*u,i=-1*this.ml0;else{var a=Lp(this.a,this.e,Math.sin(r))/Math.tan(r);n=a*Math.sin(o),i=this.a*Jo(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(o))}return e.x=n+this.x0,e.y=i+this.y0,e}function fue(e){var t,r,n,i,o,u,a,p,m;if(n=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=qt)t=Zt(n/this.a+this.long0),r=0;else{u=this.lat0+i/this.a,a=n*n/this.a/this.a+u*u,p=u;var w;for(o=M3;o;--o)if(w=Math.tan(p),m=-1*(u*(p*w+1)-p-.5*(p*p+a)*w)/((p-u)/w-1),p+=m,Math.abs(m)<=qt){r=p;break}t=Zt(this.long0+Math.asin(n*Math.tan(p)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=qt)r=0,t=Zt(this.long0+n/this.a);else{u=(this.ml0+i)/this.a,a=n*n/this.a/this.a+u*u,p=u;var C,T,P,R,$;for(o=M3;o;--o)if($=this.e*Math.sin(p),C=Math.sqrt(1-$*$)*Math.tan(p),T=this.a*Jo(this.e0,this.e1,this.e2,this.e3,p),P=this.e0-2*this.e1*Math.cos(2*p)+4*this.e2*Math.cos(4*p)-6*this.e3*Math.cos(6*p),R=T/this.a,m=(u*(C*R+1)-R-.5*C*(R*R+a))/(this.es*Math.sin(2*p)*(R*R+a-2*u*R)/(4*C)+(u-R)*(C*P-2/Math.sin(2*p))-P),p-=m,Math.abs(m)<=qt){r=p;break}C=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Zt(this.long0+Math.asin(n*C/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var pue=["Polyconic","poly"];const mue={init:hue,forward:due,inverse:fue,names:pue};function gue(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function vue(e){var t,r=e.x,n=e.y,i=n-this.lat0,o=r-this.long0,u=i/nv*1e-5,a=o,p=1,m=0;for(t=1;t<=10;t++)p=p*u,m=m+this.A[t]*p;var w=m,C=a,T=1,P=0,R,$,H=0,D=0;for(t=1;t<=6;t++)R=T*w-P*C,$=P*w+T*C,T=R,P=$,H=H+this.B_re[t]*T-this.B_im[t]*P,D=D+this.B_im[t]*T+this.B_re[t]*P;return e.x=D*this.a+this.x0,e.y=H*this.a+this.y0,e}function yue(e){var t,r=e.x,n=e.y,i=r-this.x0,o=n-this.y0,u=o/this.a,a=i/this.a,p=1,m=0,w,C,T=0,P=0;for(t=1;t<=6;t++)w=p*u-m*a,C=m*u+p*a,p=w,m=C,T=T+this.C_re[t]*p-this.C_im[t]*m,P=P+this.C_im[t]*p+this.C_re[t]*m;for(var R=0;R<this.iterations;R++){var $=T,H=P,D,O,L=u,Q=a;for(t=2;t<=6;t++)D=$*T-H*P,O=H*T+$*P,$=D,H=O,L=L+(t-1)*(this.B_re[t]*$-this.B_im[t]*H),Q=Q+(t-1)*(this.B_im[t]*$+this.B_re[t]*H);$=1,H=0;var V=this.B_re[1],F=this.B_im[1];for(t=2;t<=6;t++)D=$*T-H*P,O=H*T+$*P,$=D,H=O,V=V+t*(this.B_re[t]*$-this.B_im[t]*H),F=F+t*(this.B_im[t]*$+this.B_re[t]*H);var X=V*V+F*F;T=(L*V+Q*F)/X,P=(Q*V-L*F)/X}var re=T,ye=P,me=1,we=0;for(t=1;t<=9;t++)me=me*re,we=we+this.D[t]*me;var ke=this.lat0+we*nv*1e5,Ie=this.long0+ye;return e.x=Ie,e.y=ke,e}var _ue=["New_Zealand_Map_Grid","nzmg"];const xue={init:gue,forward:vue,inverse:yue,names:_ue};function bue(){}function wue(e){var t=e.x,r=e.y,n=Zt(t-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=i,e.y=o,e}function Sue(e){e.x-=this.x0,e.y-=this.y0;var t=Zt(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var Cue=["Miller_Cylindrical","mill"];const Tue={init:bue,forward:wue,inverse:Sue,names:Cue};var kue=20;function Eue(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=KI(this.es)}function Iue(e){var t,r,n=e.x,i=e.y;if(n=Zt(n-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var o=this.n*Math.sin(i),u=kue;u;--u){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<qt)break}t=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var p=Math.sin(i),m=Math.cos(i);r=this.a*Zp(i,p,m,this.en),t=this.a*n*m/Math.sqrt(1-this.es*p*p)}return e.x=t,e.y=r,e}function Mue(e){var t,r,n,i;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Nu((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Nu(Math.sin(t)/this.n)),n=Zt(n+this.long0),t=Xu(t)):(t=XI(e.y/this.a,this.es,this.en),i=Math.abs(t),i<gt?(i=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),n=Zt(r)):i-qt<gt&&(n=this.long0)),e.x=n,e.y=t,e}var Pue=["Sinusoidal","sinu"];const Aue={init:Eue,forward:Iue,inverse:Mue,names:Pue};function Rue(){}function Due(e){for(var t=e.x,r=e.y,n=Zt(t-this.long0),i=r,o=Math.PI*Math.sin(r);;){var u=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=u,Math.abs(u)<qt)break}i/=2,Math.PI/2-Math.abs(r)<qt&&(n=0);var a=.900316316158*this.a*n*Math.cos(i)+this.x0,p=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=a,e.y=p,e}function zue(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=Zt(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return e.x=n,e.y=i,e}var Lue=["Mollweide","moll"];const Oue={init:Rue,forward:Due,inverse:zue,names:Lue};function $ue(){Math.abs(this.lat1+this.lat2)<qt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ny(this.es),this.e1=jy(this.es),this.e2=Vy(this.es),this.e3=Uy(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Gl(this.e,this.sinphi,this.cosphi),this.ml1=Jo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<qt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Gl(this.e,this.sinphi,this.cosphi),this.ml2=Jo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Jo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Bue(e){var t=e.x,r=e.y,n;if(this.sphere)n=this.a*(this.g-r);else{var i=Jo(this.e0,this.e1,this.e2,this.e3,r);n=this.a*(this.g-i)}var o=this.ns*Zt(t-this.long0),u=this.x0+n*Math.sin(o),a=this.y0+this.rh-n*Math.cos(o);return e.x=u,e.y=a,e}function Fue(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,n,i;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(r!==0&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=Zt(this.long0+o/this.ns),n=Xu(this.g-r/this.a),e.x=i,e.y=n,e;var u=this.g-r/this.a;return n=zx(u,this.e0,this.e1,this.e2,this.e3),i=Zt(this.long0+o/this.ns),e.x=i,e.y=n,e}var Nue=["Equidistant_Conic","eqdc"];const jue={init:$ue,forward:Bue,inverse:Fue,names:Nue};function Vue(){this.R=this.a}function Uue(e){var t=e.x,r=e.y,n=Zt(t-this.long0),i,o;Math.abs(r)<=qt&&(i=this.x0+this.R*n,o=this.y0);var u=Nu(2*Math.abs(r/Math.PI));(Math.abs(n)<=qt||Math.abs(Math.abs(r)-gt)<=qt)&&(i=this.x0,r>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*u):o=this.y0+Math.PI*this.R*-Math.tan(.5*u));var a=.5*Math.abs(Math.PI/n-n/Math.PI),p=a*a,m=Math.sin(u),w=Math.cos(u),C=w/(m+w-1),T=C*C,P=C*(2/m-1),R=P*P,$=Math.PI*this.R*(a*(C-R)+Math.sqrt(p*(C-R)*(C-R)-(R+p)*(T-R)))/(R+p);n<0&&($=-$),i=this.x0+$;var H=p+C;return $=Math.PI*this.R*(P*H-a*Math.sqrt((R+p)*(p+1)-H*H))/(R+p),r>=0?o=this.y0+$:o=this.y0-$,e.x=i,e.y=o,e}function Hue(e){var t,r,n,i,o,u,a,p,m,w,C,T,P;return e.x-=this.x0,e.y-=this.y0,C=Math.PI*this.R,n=e.x/C,i=e.y/C,o=n*n+i*i,u=-Math.abs(i)*(1+o),a=u-2*i*i+n*n,p=-2*u+1+2*i*i+o*o,P=i*i/p+(2*a*a*a/p/p/p-9*u*a/p/p)/27,m=(u-a*a/3/p)/p,w=2*Math.sqrt(-m/3),C=3*P/m/w,Math.abs(C)>1&&(C>=0?C=1:C=-1),T=Math.acos(C)/3,e.y>=0?r=(-w*Math.cos(T+Math.PI/3)-a/3/p)*Math.PI:r=-(-w*Math.cos(T+Math.PI/3)-a/3/p)*Math.PI,Math.abs(n)<qt?t=this.long0:t=Zt(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),e.x=t,e.y=r,e}var Gue=["Van_der_Grinten_I","VanDerGrinten","vandg"];const que={init:Vue,forward:Uue,inverse:Hue,names:Gue};function Wue(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Zue(e){var t=e.x,r=e.y,n=Math.sin(e.y),i=Math.cos(e.y),o=Zt(t-this.long0),u,a,p,m,w,C,T,P,R,$,H,D,O,L,Q,V,F,X,re,ye,me,we,ke;return this.sphere?Math.abs(this.sin_p12-1)<=qt?(e.x=this.x0+this.a*(gt-r)*Math.sin(o),e.y=this.y0-this.a*(gt-r)*Math.cos(o),e):Math.abs(this.sin_p12+1)<=qt?(e.x=this.x0+this.a*(gt+r)*Math.sin(o),e.y=this.y0+this.a*(gt+r)*Math.cos(o),e):(X=this.sin_p12*n+this.cos_p12*i*Math.cos(o),V=Math.acos(X),F=V?V/Math.sin(V):1,e.x=this.x0+this.a*F*i*Math.sin(o),e.y=this.y0+this.a*F*(this.cos_p12*n-this.sin_p12*i*Math.cos(o)),e):(u=Ny(this.es),a=jy(this.es),p=Vy(this.es),m=Uy(this.es),Math.abs(this.sin_p12-1)<=qt?(w=this.a*Jo(u,a,p,m,gt),C=this.a*Jo(u,a,p,m,r),e.x=this.x0+(w-C)*Math.sin(o),e.y=this.y0-(w-C)*Math.cos(o),e):Math.abs(this.sin_p12+1)<=qt?(w=this.a*Jo(u,a,p,m,gt),C=this.a*Jo(u,a,p,m,r),e.x=this.x0+(w+C)*Math.sin(o),e.y=this.y0+(w+C)*Math.cos(o),e):(T=n/i,P=Lp(this.a,this.e,this.sin_p12),R=Lp(this.a,this.e,n),$=Math.atan((1-this.es)*T+this.es*P*this.sin_p12/(R*i)),H=Math.atan2(Math.sin(o),this.cos_p12*Math.tan($)-this.sin_p12*Math.cos(o)),H===0?re=Math.asin(this.cos_p12*Math.sin($)-this.sin_p12*Math.cos($)):Math.abs(Math.abs(H)-Math.PI)<=qt?re=-Math.asin(this.cos_p12*Math.sin($)-this.sin_p12*Math.cos($)):re=Math.asin(Math.sin(o)*Math.cos($)/Math.sin(H)),D=this.e*this.sin_p12/Math.sqrt(1-this.es),O=this.e*this.cos_p12*Math.cos(H)/Math.sqrt(1-this.es),L=D*O,Q=O*O,ye=re*re,me=ye*re,we=me*re,ke=we*re,V=P*re*(1-ye*Q*(1-Q)/6+me/8*L*(1-2*Q)+we/120*(Q*(4-7*Q)-3*D*D*(1-7*Q))-ke/48*L),e.x=this.x0+V*Math.sin(H),e.y=this.y0+V*Math.cos(H),e))}function Kue(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,o,u,a,p,m,w,C,T,P,R,$,H,D,O,L,Q,V,F,X,re;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*gt*this.a?void 0:(r=t/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(t)<=qt?u=this.lat0:(u=Nu(i*this.sin_p12+e.y*n*this.cos_p12/t),a=Math.abs(this.lat0)-gt,Math.abs(a)<=qt?this.lat0>=0?o=Zt(this.long0+Math.atan2(e.x,-e.y)):o=Zt(this.long0-Math.atan2(-e.x,e.y)):o=Zt(this.long0+Math.atan2(e.x*n,t*this.cos_p12*i-e.y*this.sin_p12*n))),e.x=o,e.y=u,e)):(p=Ny(this.es),m=jy(this.es),w=Vy(this.es),C=Uy(this.es),Math.abs(this.sin_p12-1)<=qt?(T=this.a*Jo(p,m,w,C,gt),t=Math.sqrt(e.x*e.x+e.y*e.y),P=T-t,u=zx(P/this.a,p,m,w,C),o=Zt(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=u,e):Math.abs(this.sin_p12+1)<=qt?(T=this.a*Jo(p,m,w,C,gt),t=Math.sqrt(e.x*e.x+e.y*e.y),P=t-T,u=zx(P/this.a,p,m,w,C),o=Zt(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=u,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),H=Math.atan2(e.x,e.y),R=Lp(this.a,this.e,this.sin_p12),D=Math.cos(H),O=this.e*this.cos_p12*D,L=-O*O/(1-this.es),Q=3*this.es*(1-L)*this.sin_p12*this.cos_p12*D/(1-this.es),V=t/R,F=V-L*(1+L)*Math.pow(V,3)/6-Q*(1+3*L)*Math.pow(V,4)/24,X=1-L*F*F/2-V*F*F*F/6,$=Math.asin(this.sin_p12*Math.cos(F)+this.cos_p12*Math.sin(F)*D),o=Zt(this.long0+Math.asin(Math.sin(H)*Math.sin(F)/Math.cos($))),re=Math.sin($),u=Math.atan2((re-this.es*X*this.sin_p12)*Math.tan($),re*(1-this.es)),e.x=o,e.y=u,e))}var Xue=["Azimuthal_Equidistant","aeqd"];const Jue={init:Wue,forward:Zue,inverse:Kue,names:Xue};function Yue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Que(e){var t,r,n,i,o,u,a,p,m=e.x,w=e.y;return n=Zt(m-this.long0),t=Math.sin(w),r=Math.cos(w),i=Math.cos(n),u=this.sin_p14*t+this.cos_p14*r*i,o=1,(u>0||Math.abs(u)<=qt)&&(a=this.a*o*r*Math.sin(n),p=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*r*i)),e.x=a,e.y=p,e}function ehe(e){var t,r,n,i,o,u,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=Nu(t/this.a),n=Math.sin(r),i=Math.cos(r),u=this.long0,Math.abs(t)<=qt?(a=this.lat0,e.x=u,e.y=a,e):(a=Nu(i*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.abs(this.lat0)-gt,Math.abs(o)<=qt?(this.lat0>=0?u=Zt(this.long0+Math.atan2(e.x,-e.y)):u=Zt(this.long0-Math.atan2(-e.x,e.y)),e.x=u,e.y=a,e):(u=Zt(this.long0+Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n)),e.x=u,e.y=a,e))}var the=["ortho"];const rhe={init:Yue,forward:Que,inverse:ehe,names:the};var si={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},wn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function nhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=gt-bn/2?this.face=si.TOP:this.lat0<=-(gt-bn/2)?this.face=si.BOTTOM:Math.abs(this.long0)<=bn?this.face=si.FRONT:Math.abs(this.long0)<=gt+bn?this.face=this.long0>0?si.RIGHT:si.LEFT:this.face=si.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function ihe(e){var t={x:0,y:0},r,n,i,o,u,a,p={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,n=e.x,this.face===si.TOP)o=gt-r,n>=bn&&n<=gt+bn?(p.value=wn.AREA_0,i=n-gt):n>gt+bn||n<=-(gt+bn)?(p.value=wn.AREA_1,i=n>0?n-Ei:n+Ei):n>-(gt+bn)&&n<=-bn?(p.value=wn.AREA_2,i=n+gt):(p.value=wn.AREA_3,i=n);else if(this.face===si.BOTTOM)o=gt+r,n>=bn&&n<=gt+bn?(p.value=wn.AREA_0,i=-n+gt):n<bn&&n>=-bn?(p.value=wn.AREA_1,i=-n):n<-bn&&n>=-(gt+bn)?(p.value=wn.AREA_2,i=-n-gt):(p.value=wn.AREA_3,i=n>0?-n+Ei:-n-Ei);else{var m,w,C,T,P,R,$;this.face===si.RIGHT?n=lp(n,+gt):this.face===si.BACK?n=lp(n,+Ei):this.face===si.LEFT&&(n=lp(n,-gt)),T=Math.sin(r),P=Math.cos(r),R=Math.sin(n),$=Math.cos(n),m=P*$,w=P*R,C=T,this.face===si.FRONT?(o=Math.acos(m),i=B_(o,C,w,p)):this.face===si.RIGHT?(o=Math.acos(w),i=B_(o,C,-m,p)):this.face===si.BACK?(o=Math.acos(-m),i=B_(o,C,-w,p)):this.face===si.LEFT?(o=Math.acos(-w),i=B_(o,C,m,p)):(o=i=0,p.value=wn.AREA_0)}return a=Math.atan(12/Ei*(i+Math.acos(Math.sin(i)*Math.cos(bn))-gt)),u=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),p.value===wn.AREA_1?a+=gt:p.value===wn.AREA_2?a+=Ei:p.value===wn.AREA_3&&(a+=1.5*Ei),t.x=u*Math.cos(a),t.y=u*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function ohe(e){var t={lam:0,phi:0},r,n,i,o,u,a,p,m,w,C={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?C.value=wn.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(C.value=wn.AREA_1,r-=gt):e.x<0&&-e.x>=Math.abs(e.y)?(C.value=wn.AREA_2,r=r<0?r+Ei:r-Ei):(C.value=wn.AREA_3,r+=gt),w=Ei/12*Math.tan(r),u=Math.sin(w)/(Math.cos(w)-1/Math.sqrt(2)),a=Math.atan(u),i=Math.cos(r),o=Math.tan(n),p=1-i*i*o*o*(1-Math.cos(Math.atan(1/Math.cos(a)))),p<-1?p=-1:p>1&&(p=1),this.face===si.TOP)m=Math.acos(p),t.phi=gt-m,C.value===wn.AREA_0?t.lam=a+gt:C.value===wn.AREA_1?t.lam=a<0?a+Ei:a-Ei:C.value===wn.AREA_2?t.lam=a-gt:t.lam=a;else if(this.face===si.BOTTOM)m=Math.acos(p),t.phi=m-gt,C.value===wn.AREA_0?t.lam=-a+gt:C.value===wn.AREA_1?t.lam=-a:C.value===wn.AREA_2?t.lam=-a-gt:t.lam=a<0?-a-Ei:-a+Ei;else{var T,P,R;T=p,w=T*T,w>=1?R=0:R=Math.sqrt(1-w)*Math.sin(a),w+=R*R,w>=1?P=0:P=Math.sqrt(1-w),C.value===wn.AREA_1?(w=P,P=-R,R=w):C.value===wn.AREA_2?(P=-P,R=-R):C.value===wn.AREA_3&&(w=P,P=R,R=-w),this.face===si.RIGHT?(w=T,T=-P,P=w):this.face===si.BACK?(T=-T,P=-P):this.face===si.LEFT&&(w=T,T=P,P=-w),t.phi=Math.acos(-R)-gt,t.lam=Math.atan2(P,T),this.face===si.RIGHT?t.lam=lp(t.lam,-gt):this.face===si.BACK?t.lam=lp(t.lam,-Ei):this.face===si.LEFT&&(t.lam=lp(t.lam,+gt))}if(this.es!==0){var $,H,D;$=t.phi<0?1:0,H=Math.tan(t.phi),D=this.b/Math.sqrt(H*H+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-D*D)/(this.one_minus_f*D)),$&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function B_(e,t,r,n){var i;return e<qt?(n.value=wn.AREA_0,i=0):(i=Math.atan2(t,r),Math.abs(i)<=bn?n.value=wn.AREA_0:i>bn&&i<=gt+bn?(n.value=wn.AREA_1,i-=gt):i>gt+bn||i<=-(gt+bn)?(n.value=wn.AREA_2,i=i>=0?i-Ei:i+Ei):(n.value=wn.AREA_3,i+=gt)),i}function lp(e,t){var r=e+t;return r<-Ei?r+=ey:r>+Ei&&(r-=ey),r}var ahe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const she={init:nhe,forward:ihe,inverse:ohe,names:ahe};var Tk=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Og=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],oF=.8487,aF=1.3523,sF=Ml/5,lhe=1/sF,Gf=18,Lx=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},che=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function uhe(e,t,r,n){for(var i=t;n;--n){var o=e(i);if(i-=o,Math.abs(o)<r)break}return i}function hhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function dhe(e){var t=Zt(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*sF);n<0?n=0:n>=Gf&&(n=Gf-1),r=Ml*(r-lhe*n);var i={x:Lx(Tk[n],r)*t,y:Lx(Og[n],r)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*oF+this.x0,i.y=i.y*this.a*aF+this.y0,i}function fhe(e){var t={x:(e.x-this.x0)/(this.a*oF),y:Math.abs(e.y-this.y0)/(this.a*aF)};if(t.y>=1)t.x/=Tk[Gf][0],t.y=e.y<0?-gt:gt;else{var r=Math.floor(t.y*Gf);for(r<0?r=0:r>=Gf&&(r=Gf-1);;)if(Og[r][0]>t.y)--r;else if(Og[r+1][0]<=t.y)++r;else break;var n=Og[r],i=5*(t.y-n[0])/(Og[r+1][0]-n[0]);i=uhe(function(o){return(Lx(n,o)-t.y)/che(n,o)},i,qt,100),t.x/=Lx(Tk[r],i),t.y=(5*r+i)*ho,e.y<0&&(t.y=-t.y)}return t.x=Zt(t.x+this.long0),t}var phe=["Robinson","robin"];const mhe={init:hhe,forward:dhe,inverse:fhe,names:phe};function ghe(){this.name="geocent"}function vhe(e){var t=ZB(e,this.es,this.a);return t}function yhe(e){var t=KB(e,this.es,this.a,this.b);return t}var _he=["Geocentric","geocentric","geocent","Geocent"];const xhe={init:ghe,forward:vhe,inverse:yhe,names:_he};var Ro={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},yg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function bhe(){if(Object.keys(yg).forEach((function(r){if(typeof this[r]>"u")this[r]=yg[r].def;else{if(yg[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);yg[r].num&&(this[r]=parseFloat(this[r]))}yg[r].degrees&&(this[r]=this[r]*ho)}).bind(this)),Math.abs(Math.abs(this.lat0)-gt)<qt?this.mode=this.lat0<0?Ro.S_POLE:Ro.N_POLE:Math.abs(this.lat0)<qt?this.mode=Ro.EQUIT:(this.mode=Ro.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function whe(e){e.x-=this.long0;var t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i,o;switch(this.mode){case Ro.OBLIQ:o=this.sinph0*t+this.cosph0*r*n;break;case Ro.EQUIT:o=r*n;break;case Ro.S_POLE:o=-t;break;case Ro.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),i=o*r*Math.sin(e.x),this.mode){case Ro.OBLIQ:o*=this.cosph0*t-this.sinph0*r*n;break;case Ro.EQUIT:o*=t;break;case Ro.N_POLE:o*=-(r*n);break;case Ro.S_POLE:o*=r*n;break}var u,a;return u=o*this.cg+i*this.sg,a=1/(u*this.sw*this.h1+this.cw),i=(i*this.cg-o*this.sg)*this.cw*a,o=u*a,e.x=i*this.a,e.y=o*this.a,e}function She(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},r,n,i;i=1/(this.pn1-e.y*this.sw),r=this.pn1*e.x*i,n=this.pn1*e.y*this.cw*i,e.x=r*this.cg+n*this.sg,e.y=n*this.cg-r*this.sg;var o=pa(e.x,e.y);if(Math.abs(o)<qt)t.x=0,t.y=e.y;else{var u,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),u=Math.sqrt(1-a*a),this.mode){case Ro.OBLIQ:t.y=Math.asin(u*this.sinph0+e.y*a*this.cosph0/o),e.y=(u-this.sinph0*Math.sin(t.y))*o,e.x*=a*this.cosph0;break;case Ro.EQUIT:t.y=Math.asin(e.y*a/o),e.y=u*o,e.x*=a;break;case Ro.N_POLE:t.y=Math.asin(u),e.y=-e.y;break;case Ro.S_POLE:t.y=-Math.asin(u);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var Che=["Tilted_Perspective","tpers"];const The={init:bhe,forward:whe,inverse:She,names:Che};function khe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Ehe(e){var t=e.x,r=e.y,n,i,o,u;if(t=t-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var a=this.radius_p/pa(this.radius_p*Math.cos(r),Math.sin(r));if(i=a*Math.cos(t)*Math.cos(r),o=a*Math.sin(t)*Math.cos(r),u=a*Math.sin(r),(this.radius_g-i)*i-o*o-u*u*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(o/pa(u,n)),e.y=this.radius_g_1*Math.atan(u/n)):(e.x=this.radius_g_1*Math.atan(o/n),e.y=this.radius_g_1*Math.atan(u/pa(o,n)))}else this.shape==="sphere"&&(n=Math.cos(r),i=Math.cos(t)*n,o=Math.sin(t)*n,u=Math.sin(r),n=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(o/pa(u,n)),e.y=this.radius_g_1*Math.atan(u/n)):(e.x=this.radius_g_1*Math.atan(o/n),e.y=this.radius_g_1*Math.atan(u/pa(o,n))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function Ihe(e){var t=-1,r=0,n=0,i,o,u,a;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*pa(1,n)):(r=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*pa(1,r));var p=n/this.radius_p;if(i=r*r+p*p+t*t,o=2*this.radius_g*t,u=o*o-4*i*this.C,u<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-o-Math.sqrt(u))/(2*i),t=this.radius_g+a*t,r*=a,n*=a,e.x=Math.atan2(r,t),e.y=Math.atan(n*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+n*n)):(r=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+r*r)),i=r*r+n*n+t*t,o=2*this.radius_g*t,u=o*o-4*i*this.C,u<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-o-Math.sqrt(u))/(2*i),t=this.radius_g+a*t,r*=a,n*=a,e.x=Math.atan2(r,t),e.y=Math.atan(n*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var Mhe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Phe={init:khe,forward:Ehe,inverse:Ihe,names:Mhe};var iv=1.340264,ov=-.081106,av=893e-6,sv=.003796,Ox=Math.sqrt(3)/2;function Ahe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Rhe(e){var t=Zt(e.x-this.long0),r=e.y,n=Math.asin(Ox*Math.sin(r)),i=n*n,o=i*i*i;return e.x=t*Math.cos(n)/(Ox*(iv+3*ov*i+o*(7*av+9*sv*i))),e.y=n*(iv+ov*i+o*(av+sv*i)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Dhe(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,r=12,n=e.y,i,o,u,a,p,m;for(m=0;m<r&&(i=n*n,o=i*i*i,u=n*(iv+ov*i+o*(av+sv*i))-e.y,a=iv+3*ov*i+o*(7*av+9*sv*i),n-=p=u/a,!(Math.abs(p)<t));++m);return i=n*n,o=i*i*i,e.x=Ox*e.x*(iv+3*ov*i+o*(7*av+9*sv*i))/Math.cos(n),e.y=Math.asin(Math.sin(n)/Ox),e.x=Zt(e.x+this.long0),e}var zhe=["eqearth","Equal Earth","Equal_Earth"];const Lhe={init:Ahe,forward:Rhe,inverse:Dhe,names:zhe};var ny=1e-10;function Ohe(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<ny)throw new Error;this.es?(this.en=KI(this.es),this.m1=Zp(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Bhe,this.forward=$he):(Math.abs(this.phi1)+ny>=gt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Nhe,this.forward=Fhe)}function $he(e){var t=Zt(e.x-(this.long0||0)),r=e.y,n,i,o;return n=this.am1+this.m1-Zp(r,i=Math.sin(r),o=Math.cos(r),this.en),i=o*t/(n*Math.sqrt(1-this.es*i*i)),e.x=n*Math.sin(i),e.y=this.am1-n*Math.cos(i),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Bhe(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,n,i;if(r=pa(e.x,e.y=this.am1-e.y),i=XI(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(i))<gt)t=Math.sin(i),n=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(i);else if(Math.abs(t-gt)<=ny)n=0;else throw new Error;return e.x=Zt(n+(this.long0||0)),e.y=Xu(i),e}function Fhe(e){var t=Zt(e.x-(this.long0||0)),r=e.y,n,i;return i=this.cphi1+this.phi1-r,Math.abs(i)>ny?(e.x=i*Math.sin(n=t*Math.cos(r)/i),e.y=this.cphi1-i*Math.cos(n)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Nhe(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,n=pa(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-n,Math.abs(r)>gt)throw new Error;return Math.abs(Math.abs(r)-gt)<=ny?t=0:t=n*Math.atan2(e.x,e.y)/Math.cos(r),e.x=Zt(t+(this.long0||0)),e.y=Xu(r),e}var jhe=["bonne","Bonne (Werner lat_1=90)"];const Vhe={init:Ohe,names:jhe};function Uhe(e){e.Proj.projections.add(v1),e.Proj.projections.add(y1),e.Proj.projections.add($le),e.Proj.projections.add(Wle),e.Proj.projections.add(Qle),e.Proj.projections.add(ice),e.Proj.projections.add(uce),e.Proj.projections.add(mce),e.Proj.projections.add(xce),e.Proj.projections.add(Tce),e.Proj.projections.add(Vce),e.Proj.projections.add(Zce),e.Proj.projections.add(Qce),e.Proj.projections.add(oue),e.Proj.projections.add(uue),e.Proj.projections.add(mue),e.Proj.projections.add(xue),e.Proj.projections.add(Tue),e.Proj.projections.add(Aue),e.Proj.projections.add(Oue),e.Proj.projections.add(jue),e.Proj.projections.add(que),e.Proj.projections.add(Jue),e.Proj.projections.add(rhe),e.Proj.projections.add(she),e.Proj.projections.add(mhe),e.Proj.projections.add(xhe),e.Proj.projections.add(The),e.Proj.projections.add(Phe),e.Proj.projections.add(Lhe),e.Proj.projections.add(Vhe)}ea.defaultDatum="WGS84";ea.Proj=Fl;ea.WGS84=new ea.Proj("WGS84");ea.Point=zp;ea.toPoint=XB;ea.defs=Zo;ea.nadgrid=Fse;ea.transform=Dx;ea.mgrs=tle;ea.version="__VERSION__";Uhe(ea);const qf={mapProjection:"lambert_conic",standardParalel1:33,standardParalel2:45,mapOrigin:[39,-96],mapFactor:[-.00017706234,.000176689948]},Hhe=Math.abs(uF(qf.mapOrigin[0])*qf.mapFactor[0]),Ghe=["+proj=lcc","+units=m","+ellps=sphere",`+lat_1=${qf.standardParalel1}`,`+lat_2=${qf.standardParalel2}`,`+lat_0=${qf.mapOrigin[0]}`,`+lon_0=${qf.mapOrigin[1]}`,`+k_0=${1/Hhe}`].join(" "),qhe=ea(Ghe),Whe=([e,t])=>{const r=[e,-t];return qhe.inverse(r)},Wf={mapProjection:"lambert_conic",standardParalel1:37,standardParalel2:65,mapOrigin:[50,15],mapOffset:[16660,4150],mapFactor:[-.000171570875,.0001729241463]},lF=Math.abs(uF(Wf.mapOrigin[0])*Wf.mapFactor[0]),cF=["+proj=lcc","+units=m","+ellps=sphere",`+lat_1=${Wf.standardParalel1}`,`+lat_2=${Wf.standardParalel2}`,`+lat_0=${Wf.mapOrigin[0]}`,`+lon_0=${Wf.mapOrigin[1]}`],Zhe=[...cF,`+k_0=${1/lF}`].join(" "),Khe=[...cF,`+k_0=${1/(lF*.75)}`].join(" ");ea(Zhe);ea(Khe);function uF(e){const t=111132.92,r=-559.82,n=1.175,i=-.0023,o=vk(e);return t+r*Math.cos(2*o)+n*Math.cos(4*o)+i*Math.cos(6*o)}class Xhe{constructor(){Wi(this,"cameraMode",wc.FOLLOW);Wi(this,"activeRoute");Wi(this,"trailerPoint");Wi(this,"showNavSheet",!1);Wi(this,"routeDirection");AI(this,{activeRoute:ci.ref,routeDirection:ci.ref})}}class Jhe{constructor(){Wi(this,"map");Wi(this,"playerMarker")}fitPoints(t){if(!this.map||!this.playerMarker){console.warn("tried to view points but map/marker hasn't loaded");return}const r=NI([...t,this.playerMarker.getLngLat().toArray()]),n=[r[0],r[1]],i=[r[2],r[3]];this.map.fitBounds([n,i],{duration:500,linear:!0,pitch:0,bearing:0,padding:50})}onMapLoad(t,r){rd.checkState(this.map==null),rd.checkState(this.playerMarker==null),this.map=t,this.playerMarker=r}onMapDragStart(t){t.cameraMode=wc.FREE}setFollow(t){t.cameraMode=wc.FOLLOW}startRouteFlow(t){t.showNavSheet=!0}hideNavSheet(t){console.log("hide nav sheet"),t.showNavSheet=!1}setDestinationNodeUid(t,r,n){n.previewRoutes.query({toNodeUid:r}).then(Sn(([i])=>{i||console.warn("could not find route to",r),this.setActiveRoute(t,i,n)}))}setActiveRoute(t,r,n){t.activeRoute=r,this.renderActiveRoute(r),n.setActiveRoute.mutate(r==null?void 0:r.segments.map(i=>i.key))}startListening(t,r){let n=[0,0],i=[0,0];const o=[0,0];let u=0,a=0,p=0;console.log("subscribing"),r.onRouteUpdate.subscribe(void 0,{onData:Sn(m=>{t.activeRoute=m,this.renderActiveRoute(m)})}),r.onPositionUpdate.subscribe(void 0,{onData:m=>{const{map:w,playerMarker:C}=this;if(!w||!C)return;const{speedMph:T,position:P,bearing:R}=m;switch(n.every($=>!$)&&w.setCenter(P),n=i,i=P,u=a,a=R,t.cameraMode){case wc.FOLLOW:w.easeTo({...Yhe(P,R,T),duration:500,padding:{left:t.showNavSheet?440:0,top:400},easing:$=>(o[0]=n[0]+$*(i[0]-n[0]),o[1]=n[1]+$*(i[1]-n[1]),p=u+$*(a-u),C.setLngLat(o),C.setRotation(R3(p)),$)});break;case wc.FREE:C.setLngLat(P),C.setRotation(R3(R));break;default:throw new fa(t.cameraMode)}}}),r.onTrailerUpdate.subscribe(void 0,{onData:Sn(m=>t.trailerPoint=m?Whe([m.x,m.y]):void 0)})}renderActiveRoute(t){const{map:r}=this;if(!r)return;const n=un(r.getSource("activeRoute"));if(!t){n.setData(P3);return}console.log("setting route data",t),n.setData(A3(t)),r.getMap().setLayoutProperty("activeRouteLayer","visibility","visible")}renderRoutePreview(t,r){const{map:n}=this;if(!n)return;console.log("rendering route preview");const i=un(n.getSource(`previewRoute-${r.index}`));if(!t){i.setData(P3);return}i.setData(A3(t)),n.getMap().setPaintProperty(`previewRouteLayer-${r.index}`,"line-opacity",r.highlight?1:.25).setLayoutProperty("activeRouteLayer","visibility","none")}}const P3={type:"FeatureCollection",features:[]};function A3(e){return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:e.segments.flatMap(t=>t.lonLats)},properties:null}]}}function R3(e){return e>=0?e:360+e}function Yhe(e,t,r){let n,i;return r>60?(n=11.5,i=30):r>30?(n=13,i=45):(n=14,i=50),{center:e,bearing:t,zoom:n,pitch:i}}const Qhe={p:2,borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.2) 0px 3px 5px -1px, rgba(0, 0, 0, 0.14) 0px 6px 10px 0px, rgba(0, 0, 0, 0.12) 0px 1px 18px 0px"},FS=e=>N.jsx(zee,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,children:N.jsx(Du,{size:"lg",color:"primary",variant:e.variant??"solid",sx:{...Qhe,backgroundColor:e.backgroundColor??"primary.500"},onClick:e.onClick,children:N.jsx(e.Icon,{})})}),ede=e=>(console.log("render controls"),N.jsxs(Mi,{padding:2,paddingBlockEnd:6,height:"100vh",direction:"column",justifyContent:"space-between",sx:{position:"absolute",top:0,right:0},children:[N.jsxs(Mi,{gap:1,alignSelf:"end",alignItems:"center",children:[N.jsx(e.Direction,{}),N.jsx(e.SpeedLimit,{})]}),N.jsxs(Mi,{gap:2,alignSelf:"end",alignItems:"center",children:[N.jsx(e.RecenterFab,{}),N.jsx(e.RouteFab,{}),N.jsx(e.SearchFab,{})]})]})),tde=z.forwardRef((e,t)=>N.jsx(Sa,{boxShadow:"0 0 2px 0 #0008",padding:.25,borderRadius:4,sx:{backgroundColor:"white"},ref:t,children:N.jsxs(Sa,{border:2,padding:.5,paddingBottom:0,borderRadius:4,children:[N.jsxs(Ln,{textAlign:"center",lineHeight:1.2,level:"body-xs",children:["SPEED",N.jsx("br",{}),"LIMIT"]}),N.jsx(Ln,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{WebkitTextStroke:1.25},children:e.limitMph})]})})),rde=e=>N.jsx(aw,{variant:"solid",sx:{p:.5,px:2,borderRadius:8,fontWeight:"bold"},children:e.direction});class nde{constructor(t){Wi(this,"direction","N");Wi(this,"limitMph",0);this.appStore=t,AI(this)}get showRecenterFab(){return this.appStore.cameraMode===wc.FREE}get showRouteFab(){return!this.appStore.activeRoute&&!this.appStore.showNavSheet}get showSearchFab(){return!!this.appStore.activeRoute&&!this.appStore.showNavSheet}}class ide{startListening(t,r){r.onPositionUpdate.subscribe(void 0,{onData:Sn(n=>{t.direction=hF(n.bearing),t.limitMph=n.speedLimit})})}}function hF(e){const t=e>=0?e:360+e;return 337.5<=t||t<22.5?"N":22.5<=t&&t<67.5?"NE":67.5<=t&&t<112.5?"E":112.5<=t&&t<157.5?"SE":157.5<=t&&t<202.5?"S":202.5<=t&&t<247.5?"SW":247.5<=t&&t<292.5?"W":(kI(292.5<=t&&t<337.5),"NW")}function ode(e){const{appStore:t}=e,r=new nde(t),n=new ide,i=Xo(()=>N.jsx(rde,{direction:r.direction})),o=Xo(()=>N.jsx(TI,{in:r.limitMph>=5,direction:"left",mountOnEnter:!0,unmountOnExit:!0,children:N.jsx(tde,{limitMph:r.limitMph})})),u=Xo(m=>N.jsx(FS,{show:r.showRecenterFab,variant:"plain",backgroundColor:"background.body",Icon:()=>N.jsx(qoe,{sx:{transform:"scale(1.25) rotate(30deg)"}}),onClick:m.onClick})),a=Xo(m=>N.jsx(FS,{show:!1,Icon:()=>N.jsx(Foe,{sx:{transform:"scale(1.25)"}}),onClick:m.onClick})),p=Xo(m=>N.jsx(FS,{show:!1,Icon:()=>N.jsx(Zoe,{sx:{transform:"scale(1.25)"}}),onClick:m.onClick}));return{Controls:m=>N.jsx(ede,{Direction:i,SpeedLimit:o,RecenterFab:()=>N.jsx(u,{onClick:m.onRecenterFabClick}),RouteFab:()=>N.jsx(a,{onClick:m.onRouteFabClick}),SearchFab:()=>N.jsx(p,{onClick:m.onSearchFabClick})}),store:r,controller:n}}const ade=e=>(console.log("render collapsible button bar"),N.jsx(CI,{in:e.visible,children:N.jsxs(yX,{variant:"outlined",size:"lg",buttonFlex:"1 0 50%",sx:{mt:2,mb:1},children:[N.jsx(Sp,{startDecorator:N.jsx(Aoe,{}),onClick:t=>{e.onDestinationRoutesClick(),t.stopPropagation()},children:"Routes"}),N.jsx(Sp,{variant:"solid",color:"success",onClick:t=>{e.onDestinationGoClick(),t.stopPropagation()},children:"Go!"})]})})),sde=e=>N.jsxs(N.Fragment,{children:[N.jsx(Fc,{children:N.jsxs(l$,{onClick:e.onDestinationHighlight,sx:{display:"flex",flexDirection:"column",gap:0,alignItems:"normal"},children:[N.jsxs(Mi,{direction:"row",gap:1,children:[N.jsx(Sa,{width:"1em",mr:1,children:N.jsxs(Ln,{fontSize:"lg",textAlign:"right",children:[e.index+1,"."]})}),N.jsx(Sa,{marginTop:.5,children:N.jsx("img",{src:e.destination.logoUrl,style:{width:"4rem"}})}),N.jsxs(Mi,{flexDirection:"column",flexGrow:1,children:[N.jsxs(Mi,{flexDirection:"row",gap:1,justifyContent:"space-between",children:[N.jsx(Ln,{fontSize:"lg",children:e.destination.name}),N.jsx(Mi,{direction:"row",alignItems:"center",gap:.5,children:e.destination.facilityUrls.map(t=>N.jsx("img",{src:t,style:{width:"1.5rem"}},t))})]}),N.jsxs(Mi,{flexDirection:"row",gap:1,alignItems:"baseline",children:[N.jsxs(Ln,{noWrap:!0,color:"neutral",fontSize:"sm",flexGrow:1,width:100,children:[e.destination.isCityStateApproximate?"Near ":"",e.destination.city,", ",e.destination.state]}),N.jsxs(Ln,{color:"neutral",fontSize:"md",flexGrow:0,children:[Number((e.destination.distanceMeters/1609.344).toFixed(1)).toLocaleString(),N.jsx(Ln,{fontSize:"xs",children:"mi"})]}),N.jsx(Ln,{color:"neutral",fontSize:"md",fontWeight:"bold",flex:"0 1 2em",textAlign:"center",children:hF(e.destination.bearing)})]})]})]}),N.jsx(e.CollapsibleButtonBar,{})]})}),N.jsx(ow,{})]}),lde=e=>(console.log("render dest list"),N.jsx(hd,{size:"lg",children:e.destinations.map((t,r)=>N.jsx(sde,{destination:t,index:r,onDestinationHighlight:()=>e.onDestinationHighlight(t),CollapsibleButtonBar:()=>N.jsx(e.CollapsibleButtonBar,{destination:t})},t.nodeUid))})),cde={[Da.COMPANY]:{Icon:Koe,color:"orange"},[Da.FUEL]:{Icon:Uoe,color:"#008234"},[Da.REST]:{Icon:Noe,color:"#1f6eb7"},[Da.SERVICE]:{Icon:$oe,color:"#8e0d0d"},[Da.DEALER]:{Icon:Hoe,color:"#7c2391"},[Da.RECRUITING]:{Icon:Woe,color:"#918d00"}},ude=e=>N.jsx(Sa,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2,children:Object.entries(cde).map(([t,{Icon:r,color:n}])=>N.jsx(hde,{Icon:r,color:n,label:sB[Number(t)],onClick:()=>e.onClick(Number(t))},t))}),hde=({Icon:e,color:t,label:r,onClick:n})=>N.jsx(N.Fragment,{children:N.jsxs(Sa,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:1,children:[N.jsx(Du,{size:"lg",variant:"solid",sx:{borderRadius:"50%",p:2.5,backgroundColor:t},onClick:n,children:N.jsx(e,{sx:{transform:"scale(1.25)"}})}),N.jsx(Ln,{children:r})]})}),dde=e=>N.jsx(aw,{variant:"outlined",sx:{p:2,borderRadius:12,height:"100%"},children:N.jsxs(Mi,{gap:2,height:"100%",overflow:"hidden",children:[N.jsx(e.TitleControls,{}),N.jsx(Ey,{}),N.jsx(Sa,{overflow:"auto",display:"flex",justifyContent:"center",sx:{m:-2,p:2},children:N.jsx(e.CurrentPage,{})})]})}),fde=e=>N.jsxs(N.Fragment,{children:[N.jsx(Fc,{children:N.jsxs(l$,{onClick:e.onRouteHighlight,sx:{gap:1},children:[N.jsxs(Mi,{direction:"column",flexGrow:1,children:[N.jsx(Ln,{fontSize:"lg",children:"12 hours, 34 minutes"}),N.jsxs(Ln,{color:"neutral",fontSize:"sm",children:[(500+Math.round(Math.random()*1e3)).toLocaleString()," miles  ",pde(e.route.segments[0].strategy)]})]}),N.jsx(Sp,{size:"lg",variant:"solid",color:"success",onClick:t=>{e.onRouteGoClick(),t.stopPropagation()},children:"Go!"})]})}),N.jsx(ow,{})]});function pde(e){switch(e){case"shortest":return"Shortest";case"smallRoads":return"Prefer small roads";default:throw new fa(e)}}const mde=e=>{console.log("render route list");const{onRouteHighlight:t,onRouteGoClick:r}=e,n=i=>N.jsx(fde,{route:i.route,onRouteHighlight:()=>t(i.route),onRouteGoClick:()=>r(i.route)});return N.jsx(hd,{size:"lg",children:e.routes.map(i=>N.jsx(n,{route:i},i.id))})},gde=e=>N.jsxs(Mi,{gap:1,direction:"row",alignItems:"center",children:[N.jsx(CI,{in:e.showBackButton,orientation:"horizontal",children:N.jsx(Du,{onClick:e.onBackClick,children:N.jsx(Roe,{})})}),N.jsx(Ln,{flexGrow:1,level:"title-lg",fontSize:"xl",children:e.title}),N.jsx(Du,{onClick:e.onCloseClick,children:N.jsx(Boe,{})})]});function D3(e){return function(t){return t.isLoading?N.jsx(rw,{size:"lg"}):N.jsx(e,{...t})}}const kk={title:"Choose destination",currentPageKey:po.CATEGORIES};class vde{constructor(){Wi(this,"currentPageKey",kk.currentPageKey);Wi(this,"isLoading",!1);Wi(this,"selectedDestinationType");Wi(this,"destinations",[]);Wi(this,"selectedDestination");Wi(this,"routes",[]);Wi(this,"selectedRoute");AI(this,{destinations:ci.ref,selectedDestination:ci.ref,routes:ci.ref,selectedRoute:ci.ref})}get title(){switch(this.currentPageKey){case po.CATEGORIES:return kk.title;case po.DESTINATIONS:return sB[un(this.selectedDestinationType)];case po.ROUTES:return`Routes to ${un(this.selectedDestination).name}`;default:throw new fa(this.currentPageKey)}}get showBackButton(){return this.currentPageKey!==po.CATEGORIES}}class yde{constructor(t){this.appClient=t}onBackClick(t){switch(t.currentPageKey){case po.CATEGORIES:throw new Error;case po.DESTINATIONS:this.reset(t);break;case po.ROUTES:t.currentPageKey=po.DESTINATIONS,t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0;break;default:throw new fa(t.currentPageKey)}}onDestinationTypeClick(t,r){t.selectedDestinationType=r,t.currentPageKey=po.DESTINATIONS,t.isLoading=!0,this.appClient.search.query({type:r,scope:aB.NEARBY}).then(Sn(n=>{t.destinations=n,t.selectedDestination=void 0})).finally(Sn(()=>t.isLoading=!1))}onDestinationHighlight(t,r){t.selectedDestination=r===t.selectedDestination?void 0:r}onDestinationGoClick(t,r){console.log("go",r),t.selectedDestination=r}onDestinationRoutesClick(t,r){console.log("routes",r),t.selectedDestination=r,t.currentPageKey=po.ROUTES,t.isLoading=!0,this.appClient.previewRoutes.query({toNodeUid:r.nodeUid}).then(Sn(n=>{t.isLoading=!1,t.routes=n,t.selectedRoute=t.routes[0]}))}onRouteHighlight(t,r){console.log("highlight route",r),t.selectedRoute=r}onRouteGoClick(t,r){console.log("go route",r),t.selectedRoute=r}reset(t){console.log("nav sheet reset"),t.currentPageKey=kk.currentPageKey,t.isLoading=!1,t.selectedDestinationType=void 0,t.destinations=[],t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0}}function _de({appClient:e}){const t=new vde,r=new yde(e),{CurrentNavPage:n}=xde({store:t,controller:r}),i=Xo(u=>N.jsx(gde,{showBackButton:t.showBackButton,title:t.title,onBackClick:Sn(()=>r.onBackClick(t)),onCloseClick:u.onCloseClick}));return{NavSheet:u=>N.jsx(dde,{TitleControls:()=>N.jsx(i,{onCloseClick:u.onCloseClick}),CurrentPage:()=>N.jsx(n,{onDestinationGoClick:u.onDestinationGoClick,onRouteGoClick:u.onRouteGoClick})}),store:t,controller:r}}function xde(e){const{store:t,controller:r}=e,n=()=>N.jsx(ude,{onClick:Sn(p=>r.onDestinationTypeClick(t,p))}),i=D3(lde),o=Xo(p=>{const m=Xo(({destination:w})=>{const C=Dy(()=>t.selectedDestination===w);return N.jsx(ade,{visible:C.get(),onDestinationRoutesClick:Sn(()=>r.onDestinationRoutesClick(t,w)),onDestinationGoClick:Sn(()=>{r.onDestinationGoClick(t,w),p.onDestinationGoClick()})})});return N.jsx(i,{isLoading:t.isLoading,destinations:t.destinations,CollapsibleButtonBar:m,onDestinationHighlight:Sn(w=>r.onDestinationHighlight(t,w))})}),u=D3(mde),a=Xo(p=>N.jsx(u,{isLoading:t.isLoading,routes:t.routes,onRouteHighlight:Sn(m=>r.onRouteHighlight(t,m)),onRouteGoClick:Sn(m=>{r.onRouteGoClick(t,m),p.onRouteGoClick()})}));return{CurrentNavPage:Xo(p=>{switch(console.log("render current nav pag",t.currentPageKey),t.currentPageKey){case po.CATEGORIES:return N.jsx(n,{});case po.DESTINATIONS:return N.jsx(o,{onDestinationGoClick:p.onDestinationGoClick});case po.ROUTES:return N.jsx(a,{onRouteGoClick:p.onRouteGoClick});default:throw new fa(t.currentPageKey)}})}}function bde({appClient:e,transitionDurationMs:t}){const r=new Xhe,n=new Jhe,{NavSheet:i,controller:o,store:u}=_de({appClient:e}),a=Sn(()=>{n.hideNavSheet(r),Tde(t).then(Sn(()=>o.reset(u))),u.destinations=[]}),p=()=>N.jsx(i,{onCloseClick:a,onDestinationGoClick:()=>{n.setDestinationNodeUid(r,un(u.selectedDestination).nodeUid,e),a()},onRouteGoClick:Sn(()=>{n.setActiveRoute(r,u.selectedRoute,e),a()})});bS(()=>u.destinations.length>0,O=>r.cameraMode=O?wc.FREE:wc.FOLLOW),bS(()=>{if(!(u.destinations.length===0||u.currentPageKey!==po.DESTINATIONS))return u.destinations.map(O=>O.lonLat)},O=>O&&n.fitPoints(O)),bS(()=>({routes:u.routes,selected:u.selectedRoute}),({routes:O,selected:L})=>{[0,1].forEach(Q=>{var V;return n.renderRoutePreview(O[Q],{index:Q,highlight:(L==null?void 0:L.id)===((V=O[Q])==null?void 0:V.id)})}),O.length===0&&!L&&n.renderActiveRoute(r.activeRoute)});const{Controls:m,controller:w,store:C}=ode({appStore:r}),T=()=>N.jsx(m,{onRecenterFabClick:Sn(()=>n.setFollow(r)),onRouteFabClick:Sn(()=>n.startRouteFlow(r)),onSearchFabClick:Sn(()=>n.startRouteFlow(r))}),P=Sn((O,L)=>{n.onMapLoad(O,L),n.startListening(r,e),w.startListening(C,e)}),R=Xo(()=>{var O;return N.jsx(qie,{destinations:u.destinations,selectedDestinationNodeUid:(O=u.selectedDestination)==null?void 0:O.nodeUid,currentPageKey:u.currentPageKey,onDestinationClick:Sn(L=>o.onDestinationRoutesClick(u,L))})}),$=Xo(()=>N.jsx(Jae,{trailerPoint:r.trailerPoint,activeRoute:r.activeRoute})),H=()=>N.jsx(Xae,{onLoad:P,onDragStart:Sn(()=>n.onMapDragStart(r)),Destinations:R,TrailerOrWaypointMarkers:$,PlayerMarker:Xoe}),D=Xo(()=>r.routeDirection?N.jsx(Eoe,{direction:r.routeDirection.direction,distanceMeters:r.routeDirection.distanceMeters,laneHint:r.routeDirection.laneHint,thenHint:r.routeDirection.thenHint}):N.jsx(N.Fragment,{}));return{App:()=>N.jsx(wde,{store:r,SlippyMap:H,NavSheet:p,Directions:D,Controls:T})}}const wde=e=>{console.log("render app");const{SlippyMap:t,NavSheet:r,Directions:n,Controls:i}=e;return N.jsxs(N.Fragment,{children:[N.jsx(t,{}),N.jsx(i,{}),N.jsx(Sde,{store:e.store,children:N.jsx(r,{})}),N.jsx(Cde,{store:e.store,children:N.jsx(n,{})})]})},Sde=Xo(e=>N.jsx(TI,{in:e.store.showNavSheet,direction:"right",children:N.jsx(Sa,{padding:1,height:"100vh",width:"42vw",sx:{position:"absolute",top:0,left:0,zIndex:999},children:e.children})})),Cde=Xo(e=>N.jsx(TI,{in:e.store.activeRoute!=null,direction:"right",children:N.jsx(Sa,{padding:1,height:"100vh",width:"42vw",sx:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:e.children})})),Tde=e=>new Promise(t=>setTimeout(t,e));var dF,z3=ld;dF=z3.createRoot,z3.hydrateRoot;var eM={};Object.defineProperty(eM,"__esModule",{value:!0});eM.parse=Rde;eM.serialize=Dde;const kde=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Ede=/^[\u0021-\u003A\u003C-\u007E]*$/,Ide=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Mde=/^[\u0020-\u003A\u003D-\u007E]*$/,Pde=Object.prototype.toString,Ade=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Rde(e,t){const r=new Ade,n=e.length;if(n<2)return r;const i=(t==null?void 0:t.decode)||zde;let o=0;do{const u=e.indexOf("=",o);if(u===-1)break;const a=e.indexOf(";",o),p=a===-1?n:a;if(u>p){o=e.lastIndexOf(";",u-1)+1;continue}const m=L3(e,o,u),w=O3(e,u,m),C=e.slice(m,w);if(r[C]===void 0){let T=L3(e,u+1,p),P=O3(e,p,T);const R=i(e.slice(T,P));r[C]=R}o=p+1}while(o<n);return r}function L3(e,t,r){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function O3(e,t,r){for(;t>r;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function Dde(e,t,r){const n=(r==null?void 0:r.encode)||encodeURIComponent;if(!kde.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=n(t);if(!Ede.test(i))throw new TypeError(`argument val is invalid: ${t}`);let o=e+"="+i;if(!r)return o;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);o+="; Max-Age="+r.maxAge}if(r.domain){if(!Ide.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);o+="; Domain="+r.domain}if(r.path){if(!Mde.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);o+="; Path="+r.path}if(r.expires){if(!Lde(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return o}function zde(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function Lde(e){return Pde.call(e)==="[object Date]"}/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $3="popstate";function Ode(e={}){function t(n,i){let{pathname:o,search:u,hash:a}=n.location;return iy("",{pathname:o,search:u,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:ju(i)}return Bde(t,r,null,e)}function Xr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $de(){return Math.random().toString(36).substring(2,10)}function B3(e,t){return{usr:e.state,key:e.key,idx:t}}function iy(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ju(t):t,state:r,key:t&&t.key||n||$de()}}function ju({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ju(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Bde(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,u=i.history,a="POP",p=null,m=w();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function w(){return(u.state||{idx:null}).idx}function C(){a="POP";let H=w(),D=H==null?null:H-m;m=H,p&&p({action:a,location:$.location,delta:D})}function T(H,D){a="PUSH";let O=iy($.location,H,D);m=w()+1;let L=B3(O,m),Q=$.createHref(O);try{u.pushState(L,"",Q)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(Q)}o&&p&&p({action:a,location:$.location,delta:1})}function P(H,D){a="REPLACE";let O=iy($.location,H,D);m=w();let L=B3(O,m),Q=$.createHref(O);u.replaceState(L,"",Q),o&&p&&p({action:a,location:$.location,delta:0})}function R(H){let D=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof H=="string"?H:ju(H);return O=O.replace(/ $/,"%20"),Xr(D,`No window.location.(origin|href) available to create URL for href: ${O}`),new URL(O,D)}let $={get action(){return a},get location(){return e(i,u)},listen(H){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener($3,C),p=H,()=>{i.removeEventListener($3,C),p=null}},createHref(H){return t(i,H)},createURL:R,encodeLocation(H){let D=R(H);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:T,replace:P,go(H){return u.go(H)}};return $}var Fde=new Set(["lazy","caseSensitive","path","id","index","children"]);function Nde(e){return e.index===!0}function $x(e,t,r=[],n={}){return e.map((i,o)=>{let u=[...r,String(o)],a=typeof i.id=="string"?i.id:u.join("-");if(Xr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Xr(!n[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),Nde(i)){let p={...i,...t(i),id:a};return n[a]=p,p}else{let p={...i,...t(i),id:a,children:void 0};return n[a]=p,i.children&&(p.children=$x(i.children,t,u,n)),p}})}function mu(e,t,r="/"){return _1(e,t,r,!1)}function _1(e,t,r,n){let i=typeof t=="string"?Ju(t):t,o=il(i.pathname||"/",r);if(o==null)return null;let u=fF(e);Vde(u);let a=null;for(let p=0;a==null&&p<u.length;++p){let m=Qde(o);a=Jde(u[p],m,n)}return a}function jde(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function fF(e,t=[],r=[],n=""){let i=(o,u,a)=>{let p={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};p.relativePath.startsWith("/")&&(Xr(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length));let m=Nl([n,p.relativePath]),w=r.concat(p);o.children&&o.children.length>0&&(Xr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),fF(o.children,t,w,m)),!(o.path==null&&!o.index)&&t.push({path:m,score:Kde(m,o.index),routesMeta:w})};return e.forEach((o,u)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,u);else for(let p of pF(o.path))i(o,u,p)}),t}function pF(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let u=pF(n.join("/")),a=[];return a.push(...u.map(p=>p===""?o:[o,p].join("/"))),i&&a.push(...u),a.map(p=>e.startsWith("/")&&p===""?"/":p)}function Vde(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xde(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Ude=/^:[\w-]+$/,Hde=3,Gde=2,qde=1,Wde=10,Zde=-2,F3=e=>e==="*";function Kde(e,t){let r=e.split("/"),n=r.length;return r.some(F3)&&(n+=Zde),t&&(n+=Gde),r.filter(i=>!F3(i)).reduce((i,o)=>i+(Ude.test(o)?Hde:o===""?qde:Wde),n)}function Xde(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Jde(e,t,r=!1){let{routesMeta:n}=e,i={},o="/",u=[];for(let a=0;a<n.length;++a){let p=n[a],m=a===n.length-1,w=o==="/"?t:t.slice(o.length)||"/",C=Bx({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},w),T=p.route;if(!C&&m&&r&&!n[n.length-1].route.index&&(C=Bx({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!C)return null;Object.assign(i,C.params),u.push({params:i,pathname:Nl([o,C.pathname]),pathnameBase:rfe(Nl([o,C.pathnameBase])),route:T}),C.pathnameBase!=="/"&&(o=Nl([o,C.pathnameBase]))}return u}function Bx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Yde(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((m,{paramName:w,isOptional:C},T)=>{if(w==="*"){let R=a[T]||"";u=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const P=a[T];return C&&!P?m[w]=void 0:m[w]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:e}}function Yde(e,t=!1,r=!0){Qi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,a,p)=>(n.push({paramName:a,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Qde(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qi(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function il(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function efe(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Ju(e):e;return{pathname:r?r.startsWith("/")?r:tfe(r,t):t,search:nfe(n),hash:ife(i)}}function tfe(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function NS(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mF(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tM(e){let t=mF(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function rM(e,t,r,n=!1){let i;typeof e=="string"?i=Ju(e):(i={...e},Xr(!i.pathname||!i.pathname.includes("?"),NS("?","pathname","search",i)),Xr(!i.pathname||!i.pathname.includes("#"),NS("#","pathname","hash",i)),Xr(!i.search||!i.search.includes("#"),NS("#","search","hash",i)));let o=e===""||i.pathname==="",u=o?"/":i.pathname,a;if(u==null)a=r;else{let C=t.length-1;if(!n&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),C-=1;i.pathname=T.join("/")}a=C>=0?t[C]:"/"}let p=efe(i,a),m=u&&u!=="/"&&u.endsWith("/"),w=(o||u===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(m||w)&&(p.pathname+="/"),p}var Nl=e=>e.join("/").replace(/\/\/+/g,"/"),rfe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nfe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ife=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Fx=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Sw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var gF=["POST","PUT","PATCH","DELETE"],ofe=new Set(gF),afe=["GET",...gF],sfe=new Set(afe),lfe=new Set([301,302,303,307,308]),cfe=new Set([307,308]),jS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ufe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},_g={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},nM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hfe=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),vF="remix-router-transitions",yF=Symbol("ResetLoaderData");function dfe(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";Xr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.mapRouteProperties||hfe,i={},o=$x(e.routes,n,void 0,i),u,a=e.basename||"/",p=e.dataStrategy||vfe,m=e.patchRoutesOnNavigation,w={...e.future},C=null,T=new Set,P=null,R=null,$=null,H=e.hydrationData!=null,D=mu(o,e.history.location,a),O=null;if(D==null&&!m){let U=ls(404,{pathname:e.history.location.pathname}),{matches:J,route:ne}=X3(o);D=J,O={[ne.id]:U}}D&&!e.hydrationData&&_r(D,o,e.history.location.pathname).active&&(D=null);let L;if(D)if(D.some(U=>U.route.lazy))L=!1;else if(!D.some(U=>U.route.loader))L=!0;else{let U=e.hydrationData?e.hydrationData.loaderData:null,J=e.hydrationData?e.hydrationData.errors:null;if(J){let ne=D.findIndex(de=>J[de.route.id]!==void 0);L=D.slice(0,ne+1).every(de=>!Ik(de.route,U,J))}else L=D.every(ne=>!Ik(ne.route,U,J))}else{L=!1,D=[];let U=_r(null,o,e.history.location.pathname);U.active&&U.matches&&(D=U.matches)}let Q,V={historyAction:e.history.action,location:e.history.location,matches:D,initialized:L,navigation:jS,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||O,fetchers:new Map,blockers:new Map},F="POP",X=!1,re,ye=!1,me=new Map,we=null,ke=!1,Ie=!1,qe=new Set,Re=new Map,Se=0,Fe=-1,Ce=new Map,Ne=new Set,Je=new Map,at=new Map,st=new Set,Dt=new Map,Ct,Bt=null;function Tt(){if(C=e.history.listen(({action:U,location:J,delta:ne})=>{if(Ct){Ct(),Ct=void 0;return}Qi(Dt.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=Xe({currentLocation:V.location,nextLocation:J,historyAction:U});if(de&&ne!=null){let pe=new Promise(se=>{Ct=se});e.history.go(ne*-1),Ve(de,{state:"blocked",location:J,proceed(){Ve(de,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),pe.then(()=>e.history.go(ne))},reset(){let se=new Map(V.blockers);se.set(de,_g),rt({blockers:se})}});return}return Er(U,J)}),r){Ife(t,me);let U=()=>Mfe(t,me);t.addEventListener("pagehide",U),we=()=>t.removeEventListener("pagehide",U)}return V.initialized||Er("POP",V.location,{initialHydration:!0}),Q}function it(){C&&C(),we&&we(),T.clear(),re&&re.abort(),V.fetchers.forEach((U,J)=>vr(J)),V.blockers.forEach((U,J)=>Ee(J))}function Ze(U){return T.add(U),()=>T.delete(U)}function rt(U,J={}){V={...V,...U};let ne=[],de=[];V.fetchers.forEach((pe,se)=>{pe.state==="idle"&&(st.has(se)?ne.push(se):de.push(se))}),[...T].forEach(pe=>pe(V,{deletedFetchers:ne,viewTransitionOpts:J.viewTransitionOpts,flushSync:J.flushSync===!0})),ne.forEach(pe=>vr(pe)),de.forEach(pe=>V.fetchers.delete(pe))}function pt(U,J,{flushSync:ne}={}){var Ae,ot;let de=V.actionData!=null&&V.navigation.formMethod!=null&&Vs(V.navigation.formMethod)&&V.navigation.state==="loading"&&((Ae=U.state)==null?void 0:Ae._isRedirect)!==!0,pe;J.actionData?Object.keys(J.actionData).length>0?pe=J.actionData:pe=null:de?pe=V.actionData:pe=null;let se=J.loaderData?Z3(V.loaderData,J.loaderData,J.matches||[],J.errors):V.loaderData,xe=V.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((ht,ut)=>xe.set(ut,_g)));let Pe=X===!0||V.navigation.formMethod!=null&&Vs(V.navigation.formMethod)&&((ot=U.state)==null?void 0:ot._isRedirect)!==!0;u&&(o=u,u=void 0),ke||F==="POP"||(F==="PUSH"?e.history.push(U,U.state):F==="REPLACE"&&e.history.replace(U,U.state));let Le;if(F==="POP"){let ht=me.get(V.location.pathname);ht&&ht.has(U.pathname)?Le={currentLocation:V.location,nextLocation:U}:me.has(U.pathname)&&(Le={currentLocation:U,nextLocation:V.location})}else if(ye){let ht=me.get(V.location.pathname);ht?ht.add(U.pathname):(ht=new Set([U.pathname]),me.set(V.location.pathname,ht)),Le={currentLocation:V.location,nextLocation:U}}rt({...J,actionData:pe,loaderData:se,historyAction:F,location:U,initialized:!0,navigation:jS,revalidation:"idle",restoreScrollPosition:Ft(U,J.matches||V.matches),preventScrollReset:Pe,blockers:xe},{viewTransitionOpts:Le,flushSync:ne===!0}),F="POP",X=!1,ye=!1,ke=!1,Ie=!1,Bt==null||Bt.resolve(),Bt=null}async function ur(U,J){if(typeof U=="number"){e.history.go(U);return}let ne=Ek(V.location,V.matches,a,U,J==null?void 0:J.fromRouteId,J==null?void 0:J.relative),{path:de,submission:pe,error:se}=N3(!1,ne,J),xe=V.location,Pe=iy(V.location,de,J&&J.state);Pe={...Pe,...e.history.encodeLocation(Pe)};let Le=J&&J.replace!=null?J.replace:void 0,Ae="PUSH";Le===!0?Ae="REPLACE":Le===!1||pe!=null&&Vs(pe.formMethod)&&pe.formAction===V.location.pathname+V.location.search&&(Ae="REPLACE");let ot=J&&"preventScrollReset"in J?J.preventScrollReset===!0:void 0,ht=(J&&J.flushSync)===!0,ut=Xe({currentLocation:xe,nextLocation:Pe,historyAction:Ae});if(ut){Ve(ut,{state:"blocked",location:Pe,proceed(){Ve(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:Pe}),ur(U,J)},reset(){let Mt=new Map(V.blockers);Mt.set(ut,_g),rt({blockers:Mt})}});return}await Er(Ae,Pe,{submission:pe,pendingError:se,preventScrollReset:ot,replace:J&&J.replace,enableViewTransition:J&&J.viewTransition,flushSync:ht})}function or(){Bt||(Bt=Pfe()),lr(),rt({revalidation:"loading"});let U=Bt.promise;return V.navigation.state==="submitting"?U:V.navigation.state==="idle"?(Er(V.historyAction,V.location,{startUninterruptedRevalidation:!0}),U):(Er(F||V.historyAction,V.navigation.location,{overrideNavigation:V.navigation,enableViewTransition:ye===!0}),U)}async function Er(U,J,ne){re&&re.abort(),re=null,F=U,ke=(ne&&ne.startUninterruptedRevalidation)===!0,br(V.location,V.matches),X=(ne&&ne.preventScrollReset)===!0,ye=(ne&&ne.enableViewTransition)===!0;let de=u||o,pe=ne&&ne.overrideNavigation,se=mu(de,J,a),xe=(ne&&ne.flushSync)===!0,Pe=_r(se,de,J.pathname);if(Pe.active&&Pe.matches&&(se=Pe.matches),!se){let{error:Oe,notFoundMatches:$e,route:tt}=Et(J.pathname);pt(J,{matches:$e,loaderData:{},errors:{[tt.id]:Oe}},{flushSync:xe});return}if(V.initialized&&!Ie&&Sfe(V.location,J)&&!(ne&&ne.submission&&Vs(ne.submission.formMethod))){pt(J,{matches:se},{flushSync:xe});return}re=new AbortController;let Le=mf(e.history,J,re.signal,ne&&ne.submission),Ae;if(ne&&ne.pendingError)Ae=[Ph(se).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&Vs(ne.submission.formMethod)){let Oe=await jr(Le,J,ne.submission,se,Pe.active,{replace:ne.replace,flushSync:xe});if(Oe.shortCircuited)return;if(Oe.pendingActionResult){let[$e,tt]=Oe.pendingActionResult;if(Ra(tt)&&Sw(tt.error)&&tt.error.status===404){re=null,pt(J,{matches:Oe.matches,loaderData:{},errors:{[$e]:tt.error}});return}}se=Oe.matches||se,Ae=Oe.pendingActionResult,pe=VS(J,ne.submission),xe=!1,Pe.active=!1,Le=mf(e.history,Le.url,Le.signal)}let{shortCircuited:ot,matches:ht,loaderData:ut,errors:Mt}=await ar(Le,J,se,Pe.active,pe,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,xe,Ae);ot||(re=null,pt(J,{matches:ht||se,...K3(Ae),loaderData:ut,errors:Mt}))}async function jr(U,J,ne,de,pe,se={}){lr();let xe=kfe(J,ne);if(rt({navigation:xe},{flushSync:se.flushSync===!0}),pe){let Ae=await ue(de,J.pathname,U.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){let ot=Ph(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,pendingActionResult:[ot,{type:"error",error:Ae.error}]}}else if(Ae.matches)de=Ae.matches;else{let{notFoundMatches:ot,error:ht,route:ut}=Et(J.pathname);return{matches:ot,pendingActionResult:[ut.id,{type:"error",error:ht}]}}}let Pe,Le=$g(de,J);if(!Le.route.action&&!Le.route.lazy)Pe={type:"error",error:ls(405,{method:U.method,pathname:J.pathname,routeId:Le.route.id})};else if(Pe=(await Rr("action",V,U,[Le],de,null))[Le.route.id],U.signal.aborted)return{shortCircuited:!0};if(zh(Pe)){let Ae;return se&&se.replace!=null?Ae=se.replace:Ae=G3(Pe.response.headers.get("Location"),new URL(U.url),a)===V.location.pathname+V.location.search,await Cr(U,Pe,!0,{submission:ne,replace:Ae}),{shortCircuited:!0}}if(Ra(Pe)){let Ae=Ph(de,Le.route.id);return(se&&se.replace)!==!0&&(F="PUSH"),{matches:de,pendingActionResult:[Ae.route.id,Pe]}}return{matches:de,pendingActionResult:[Le.route.id,Pe]}}async function ar(U,J,ne,de,pe,se,xe,Pe,Le,Ae,ot){let ht=pe||VS(J,se),ut=se||xe||Y3(ht),Mt=!ke&&!Le;if(de){if(Mt){let di=It(ot);rt({navigation:ht,...di!==void 0?{actionData:di}:{}},{flushSync:Ae})}let Zr=await ue(ne,J.pathname,U.signal);if(Zr.type==="aborted")return{shortCircuited:!0};if(Zr.type==="error"){let di=Ph(Zr.partialMatches).route.id;return{matches:Zr.partialMatches,loaderData:{},errors:{[di]:Zr.error}}}else if(Zr.matches)ne=Zr.matches;else{let{error:di,notFoundMatches:Vr,route:ia}=Et(J.pathname);return{matches:Vr,loaderData:{},errors:{[ia.id]:di}}}}let Oe=u||o,[$e,tt]=V3(e.history,V,ne,ut,J,Le===!0,Ie,qe,st,Je,Ne,Oe,a,ot);if(Fe=++Se,$e.length===0&&tt.length===0){let Zr=je();return pt(J,{matches:ne,loaderData:{},errors:ot&&Ra(ot[1])?{[ot[0]]:ot[1].error}:null,...K3(ot),...Zr?{fetchers:new Map(V.fetchers)}:{}},{flushSync:Ae}),{shortCircuited:!0}}if(Mt){let Zr={};if(!de){Zr.navigation=ht;let di=It(ot);di!==void 0&&(Zr.actionData=di)}tt.length>0&&(Zr.fetchers=gr(tt)),rt(Zr,{flushSync:Ae})}tt.forEach(Zr=>{mr(Zr.key),Zr.controller&&Re.set(Zr.key,Zr.controller)});let dt=()=>tt.forEach(Zr=>mr(Zr.key));re&&re.signal.addEventListener("abort",dt);let{loaderResults:Lt,fetcherResults:yr}=await tr(V,ne,$e,tt,U);if(U.signal.aborted)return{shortCircuited:!0};re&&re.signal.removeEventListener("abort",dt),tt.forEach(Zr=>Re.delete(Zr.key));let sr=F_(Lt);if(sr)return await Cr(U,sr.result,!0,{replace:Pe}),{shortCircuited:!0};if(sr=F_(yr),sr)return Ne.add(sr.key),await Cr(U,sr.result,!0,{replace:Pe}),{shortCircuited:!0};let{loaderData:Wr,errors:xn}=W3(V,ne,Lt,ot,tt,yr);Le&&V.errors&&(xn={...V.errors,...xn});let Zn=je(),ll=kt(Fe),$o=Zn||ll||tt.length>0;return{matches:ne,loaderData:Wr,errors:xn,...$o?{fetchers:new Map(V.fetchers)}:{}}}function It(U){if(U&&!Ra(U[1]))return{[U[0]]:U[1].data};if(V.actionData)return Object.keys(V.actionData).length===0?null:V.actionData}function gr(U){return U.forEach(J=>{let ne=V.fetchers.get(J.key),de=xg(void 0,ne?ne.data:void 0);V.fetchers.set(J.key,de)}),new Map(V.fetchers)}async function Wt(U,J,ne,de){mr(U);let pe=(de&&de.flushSync)===!0,se=u||o,xe=Ek(V.location,V.matches,a,ne,J,de==null?void 0:de.relative),Pe=mu(se,xe,a),Le=_r(Pe,se,xe);if(Le.active&&Le.matches&&(Pe=Le.matches),!Pe){Fr(U,J,ls(404,{pathname:xe}),{flushSync:pe});return}let{path:Ae,submission:ot,error:ht}=N3(!0,xe,de);if(ht){Fr(U,J,ht,{flushSync:pe});return}let ut=$g(Pe,Ae),Mt=(de&&de.preventScrollReset)===!0;if(ot&&Vs(ot.formMethod)){await Br(U,J,Ae,ut,Pe,Le.active,pe,Mt,ot);return}Je.set(U,{routeId:J,path:Ae}),await He(U,J,Ae,ut,Pe,Le.active,pe,Mt,ot)}async function Br(U,J,ne,de,pe,se,xe,Pe,Le){lr(),Je.delete(U);function Ae(Kt){if(!Kt.route.action&&!Kt.route.lazy){let Kr=ls(405,{method:Le.formMethod,pathname:ne,routeId:J});return Fr(U,J,Kr,{flushSync:xe}),!0}return!1}if(!se&&Ae(de))return;let ot=V.fetchers.get(U);Pr(U,Efe(Le,ot),{flushSync:xe});let ht=new AbortController,ut=mf(e.history,ne,ht.signal,Le);if(se){let Kt=await ue(pe,ne,ut.signal);if(Kt.type==="aborted")return;if(Kt.type==="error"){Fr(U,J,Kt.error,{flushSync:xe});return}else if(Kt.matches){if(pe=Kt.matches,de=$g(pe,ne),Ae(de))return}else{Fr(U,J,ls(404,{pathname:ne}),{flushSync:xe});return}}Re.set(U,ht);let Mt=Se,$e=(await Rr("action",V,ut,[de],pe,U))[de.route.id];if(ut.signal.aborted){Re.get(U)===ht&&Re.delete(U);return}if(st.has(U)){if(zh($e)||Ra($e)){Pr(U,cu(void 0));return}}else{if(zh($e))if(Re.delete(U),Fe>Mt){Pr(U,cu(void 0));return}else return Ne.add(U),Pr(U,xg(Le)),Cr(ut,$e,!1,{fetcherSubmission:Le,preventScrollReset:Pe});if(Ra($e)){Fr(U,J,$e.error);return}}let tt=V.navigation.location||V.location,dt=mf(e.history,tt,ht.signal),Lt=u||o,yr=V.navigation.state!=="idle"?mu(Lt,V.navigation.location,a):V.matches;Xr(yr,"Didn't find any matches after fetcher action");let sr=++Se;Ce.set(U,sr);let Wr=xg(Le,$e.data);V.fetchers.set(U,Wr);let[xn,Zn]=V3(e.history,V,yr,Le,tt,!1,Ie,qe,st,Je,Ne,Lt,a,[de.route.id,$e]);Zn.filter(Kt=>Kt.key!==U).forEach(Kt=>{let Kr=Kt.key,Yr=V.fetchers.get(Kr),to=xg(void 0,Yr?Yr.data:void 0);V.fetchers.set(Kr,to),mr(Kr),Kt.controller&&Re.set(Kr,Kt.controller)}),rt({fetchers:new Map(V.fetchers)});let ll=()=>Zn.forEach(Kt=>mr(Kt.key));ht.signal.addEventListener("abort",ll);let{loaderResults:$o,fetcherResults:Zr}=await tr(V,yr,xn,Zn,dt);if(ht.signal.aborted)return;ht.signal.removeEventListener("abort",ll),Ce.delete(U),Re.delete(U),Zn.forEach(Kt=>Re.delete(Kt.key));let di=F_($o);if(di)return Cr(dt,di.result,!1,{preventScrollReset:Pe});if(di=F_(Zr),di)return Ne.add(di.key),Cr(dt,di.result,!1,{preventScrollReset:Pe});let{loaderData:Vr,errors:ia}=W3(V,yr,$o,void 0,Zn,Zr);if(V.fetchers.has(U)){let Kt=cu($e.data);V.fetchers.set(U,Kt)}kt(sr),V.navigation.state==="loading"&&sr>Fe?(Xr(F,"Expected pending action"),re&&re.abort(),pt(V.navigation.location,{matches:yr,loaderData:Vr,errors:ia,fetchers:new Map(V.fetchers)})):(rt({errors:ia,loaderData:Z3(V.loaderData,Vr,yr,ia),fetchers:new Map(V.fetchers)}),Ie=!1)}async function He(U,J,ne,de,pe,se,xe,Pe,Le){let Ae=V.fetchers.get(U);Pr(U,xg(Le,Ae?Ae.data:void 0),{flushSync:xe});let ot=new AbortController,ht=mf(e.history,ne,ot.signal);if(se){let $e=await ue(pe,ne,ht.signal);if($e.type==="aborted")return;if($e.type==="error"){Fr(U,J,$e.error,{flushSync:xe});return}else if($e.matches)pe=$e.matches,de=$g(pe,ne);else{Fr(U,J,ls(404,{pathname:ne}),{flushSync:xe});return}}Re.set(U,ot);let ut=Se,Oe=(await Rr("loader",V,ht,[de],pe,U))[de.route.id];if(Re.get(U)===ot&&Re.delete(U),!ht.signal.aborted){if(st.has(U)){Pr(U,cu(void 0));return}if(zh(Oe))if(Fe>ut){Pr(U,cu(void 0));return}else{Ne.add(U),await Cr(ht,Oe,!1,{preventScrollReset:Pe});return}if(Ra(Oe)){Fr(U,J,Oe.error);return}Pr(U,cu(Oe.data))}}async function Cr(U,J,ne,{submission:de,fetcherSubmission:pe,preventScrollReset:se,replace:xe}={}){J.response.headers.has("X-Remix-Revalidate")&&(Ie=!0);let Pe=J.response.headers.get("Location");Xr(Pe,"Expected a Location header on the redirect Response"),Pe=G3(Pe,new URL(U.url),a);let Le=iy(V.location,Pe,{_isRedirect:!0});if(r){let Oe=!1;if(J.response.headers.has("X-Remix-Reload-Document"))Oe=!0;else if(nM.test(Pe)){const $e=e.history.createURL(Pe);Oe=$e.origin!==t.location.origin||il($e.pathname,a)==null}if(Oe){xe?t.location.replace(Pe):t.location.assign(Pe);return}}re=null;let Ae=xe===!0||J.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ot,formAction:ht,formEncType:ut}=V.navigation;!de&&!pe&&ot&&ht&&ut&&(de=Y3(V.navigation));let Mt=de||pe;if(cfe.has(J.response.status)&&Mt&&Vs(Mt.formMethod))await Er(Ae,Le,{submission:{...Mt,formAction:Pe},preventScrollReset:se||X,enableViewTransition:ne?ye:void 0});else{let Oe=VS(Le,de);await Er(Ae,Le,{overrideNavigation:Oe,fetcherSubmission:pe,preventScrollReset:se||X,enableViewTransition:ne?ye:void 0})}}async function Rr(U,J,ne,de,pe,se){let xe,Pe={};try{xe=await yfe(p,U,J,ne,de,pe,se,i,n)}catch(Le){return de.forEach(Ae=>{Pe[Ae.route.id]={type:"error",error:Le}}),Pe}for(let[Le,Ae]of Object.entries(xe))if(Cfe(Ae)){let ot=Ae.result;Pe[Le]={type:"redirect",response:bfe(ot,ne,Le,pe,a)}}else Pe[Le]=await xfe(Ae);return Pe}async function tr(U,J,ne,de,pe){let se=Rr("loader",U,pe,ne,J,null),xe=Promise.all(de.map(async Ae=>{if(Ae.matches&&Ae.match&&Ae.controller){let ht=(await Rr("loader",U,mf(e.history,Ae.path,Ae.controller.signal),[Ae.match],Ae.matches,Ae.key))[Ae.match.route.id];return{[Ae.key]:ht}}else return Promise.resolve({[Ae.key]:{type:"error",error:ls(404,{pathname:Ae.path})}})})),Pe=await se,Le=(await xe).reduce((Ae,ot)=>Object.assign(Ae,ot),{});return{loaderResults:Pe,fetcherResults:Le}}function lr(){Ie=!0,Je.forEach((U,J)=>{Re.has(J)&&qe.add(J),mr(J)})}function Pr(U,J,ne={}){V.fetchers.set(U,J),rt({fetchers:new Map(V.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function Fr(U,J,ne,de={}){let pe=Ph(V.matches,J);vr(U),rt({errors:{[pe.route.id]:ne},fetchers:new Map(V.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function Ir(U){return at.set(U,(at.get(U)||0)+1),st.has(U)&&st.delete(U),V.fetchers.get(U)||ufe}function vr(U){let J=V.fetchers.get(U);Re.has(U)&&!(J&&J.state==="loading"&&Ce.has(U))&&mr(U),Je.delete(U),Ce.delete(U),Ne.delete(U),st.delete(U),qe.delete(U),V.fetchers.delete(U)}function rr(U){let J=(at.get(U)||0)-1;J<=0?(at.delete(U),st.add(U)):at.set(U,J),rt({fetchers:new Map(V.fetchers)})}function mr(U){let J=Re.get(U);J&&(J.abort(),Re.delete(U))}function ln(U){for(let J of U){let ne=Ir(J),de=cu(ne.data);V.fetchers.set(J,de)}}function je(){let U=[],J=!1;for(let ne of Ne){let de=V.fetchers.get(ne);Xr(de,`Expected fetcher: ${ne}`),de.state==="loading"&&(Ne.delete(ne),U.push(ne),J=!0)}return ln(U),J}function kt(U){let J=[];for(let[ne,de]of Ce)if(de<U){let pe=V.fetchers.get(ne);Xr(pe,`Expected fetcher: ${ne}`),pe.state==="loading"&&(mr(ne),Ce.delete(ne),J.push(ne))}return ln(J),J.length>0}function wt(U,J){let ne=V.blockers.get(U)||_g;return Dt.get(U)!==J&&Dt.set(U,J),ne}function Ee(U){V.blockers.delete(U),Dt.delete(U)}function Ve(U,J){let ne=V.blockers.get(U)||_g;Xr(ne.state==="unblocked"&&J.state==="blocked"||ne.state==="blocked"&&J.state==="blocked"||ne.state==="blocked"&&J.state==="proceeding"||ne.state==="blocked"&&J.state==="unblocked"||ne.state==="proceeding"&&J.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${J.state}`);let de=new Map(V.blockers);de.set(U,J),rt({blockers:de})}function Xe({currentLocation:U,nextLocation:J,historyAction:ne}){if(Dt.size===0)return;Dt.size>1&&Qi(!1,"A router only supports one blocker at a time");let de=Array.from(Dt.entries()),[pe,se]=de[de.length-1],xe=V.blockers.get(pe);if(!(xe&&xe.state==="proceeding")&&se({currentLocation:U,nextLocation:J,historyAction:ne}))return pe}function Et(U){let J=ls(404,{pathname:U}),ne=u||o,{matches:de,route:pe}=X3(ne);return{notFoundMatches:de,route:pe,error:J}}function vt(U,J,ne){if(P=U,$=J,R=ne||null,!H&&V.navigation===jS){H=!0;let de=Ft(V.location,V.matches);de!=null&&rt({restoreScrollPosition:de})}return()=>{P=null,$=null,R=null}}function Rt(U,J){return R&&R(U,J.map(de=>jde(de,V.loaderData)))||U.key}function br(U,J){if(P&&$){let ne=Rt(U,J);P[ne]=$()}}function Ft(U,J){if(P){let ne=Rt(U,J),de=P[ne];if(typeof de=="number")return de}return null}function _r(U,J,ne){if(m)if(U){if(Object.keys(U[0].params).length>0)return{active:!0,matches:_1(J,ne,a,!0)}}else return{active:!0,matches:_1(J,ne,a,!0)||[]};return{active:!1,matches:null}}async function ue(U,J,ne){if(!m)return{type:"success",matches:U};let de=U;for(;;){let pe=u==null,se=u||o,xe=i;try{await m({path:J,matches:de,patch:(Ae,ot)=>{ne.aborted||H3(Ae,ot,se,xe,n)}})}catch(Ae){return{type:"error",error:Ae,partialMatches:de}}finally{pe&&!ne.aborted&&(o=[...o])}if(ne.aborted)return{type:"aborted"};let Pe=mu(se,J,a);if(Pe)return{type:"success",matches:Pe};let Le=_1(se,J,a,!0);if(!Le||de.length===Le.length&&de.every((Ae,ot)=>Ae.route.id===Le[ot].route.id))return{type:"success",matches:null};de=Le}}function Y(U){i={},u=$x(U,n,void 0,i)}function ee(U,J){let ne=u==null;H3(U,J,u||o,i,n),ne&&(o=[...o],rt({}))}return Q={get basename(){return a},get future(){return w},get state(){return V},get routes(){return o},get window(){return t},initialize:Tt,subscribe:Ze,enableScrollRestoration:vt,navigate:ur,fetch:Wt,revalidate:or,createHref:U=>e.history.createHref(U),encodeLocation:U=>e.history.encodeLocation(U),getFetcher:Ir,deleteFetcher:rr,dispose:it,getBlocker:wt,deleteBlocker:Ee,patchRoutes:ee,_internalFetchControllers:Re,_internalSetRoutes:Y},Q}function ffe(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Ek(e,t,r,n,i,o){let u,a;if(i){u=[];for(let m of t)if(u.push(m),m.route.id===i){a=m;break}}else u=t,a=t[t.length-1];let p=rM(n||".",tM(u),il(e.pathname,r)||e.pathname,o==="path");if(n==null&&(p.search=e.search,p.hash=e.hash),(n==null||n===""||n===".")&&a){let m=iM(p.search);if(a.route.index&&!m)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&m){let w=new URLSearchParams(p.search),C=w.getAll("index");w.delete("index"),C.filter(P=>P).forEach(P=>w.append("index",P));let T=w.toString();p.search=T?`?${T}`:""}}return r!=="/"&&(p.pathname=p.pathname==="/"?r:Nl([r,p.pathname])),ju(p)}function N3(e,t,r){if(!r||!ffe(r))return{path:t};if(r.formMethod&&!Tfe(r.formMethod))return{path:t,error:ls(405,{method:r.formMethod})};let n=()=>({path:t,error:ls(400,{type:"invalid-body"})}),o=(r.formMethod||"get").toUpperCase(),u=xF(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Vs(o))return n();let C=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((T,[P,R])=>`${T}${P}=${R}
`,""):String(r.body);return{path:t,submission:{formMethod:o,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:C}}}else if(r.formEncType==="application/json"){if(!Vs(o))return n();try{let C=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:o,formAction:u,formEncType:r.formEncType,formData:void 0,json:C,text:void 0}}}catch{return n()}}}Xr(typeof FormData=="function","FormData is not available in this environment");let a,p;if(r.formData)a=Mk(r.formData),p=r.formData;else if(r.body instanceof FormData)a=Mk(r.body),p=r.body;else if(r.body instanceof URLSearchParams)a=r.body,p=q3(a);else if(r.body==null)a=new URLSearchParams,p=new FormData;else try{a=new URLSearchParams(r.body),p=q3(a)}catch{return n()}let m={formMethod:o,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Vs(m.formMethod))return{path:t,submission:m};let w=Ju(t);return e&&w.search&&iM(w.search)&&a.append("index",""),w.search=`?${a}`,{path:ju(w),submission:m}}function j3(e,t,r=!1){let n=e.findIndex(i=>i.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function V3(e,t,r,n,i,o,u,a,p,m,w,C,T,P){let R=P?Ra(P[1])?P[1].error:P[1].data:void 0,$=e.createURL(t.location),H=e.createURL(i),D=r;o&&t.errors?D=j3(r,Object.keys(t.errors)[0],!0):P&&Ra(P[1])&&(D=j3(r,P[0]));let O=P?P[1].statusCode:void 0,L=O&&O>=400,Q=D.filter((F,X)=>{let{route:re}=F;if(re.lazy)return!0;if(re.loader==null)return!1;if(o)return Ik(re,t.loaderData,t.errors);if(pfe(t.loaderData,t.matches[X],F))return!0;let ye=t.matches[X],me=F;return U3(F,{currentUrl:$,currentParams:ye.params,nextUrl:H,nextParams:me.params,...n,actionResult:R,actionStatus:O,defaultShouldRevalidate:L?!1:u||$.pathname+$.search===H.pathname+H.search||$.search!==H.search||mfe(ye,me)})}),V=[];return m.forEach((F,X)=>{if(o||!r.some(ke=>ke.route.id===F.routeId)||p.has(X))return;let re=mu(C,F.path,T);if(!re){V.push({key:X,routeId:F.routeId,path:F.path,matches:null,match:null,controller:null});return}let ye=t.fetchers.get(X),me=$g(re,F.path),we=!1;w.has(X)?we=!1:a.has(X)?(a.delete(X),we=!0):ye&&ye.state!=="idle"&&ye.data===void 0?we=u:we=U3(me,{currentUrl:$,currentParams:t.matches[t.matches.length-1].params,nextUrl:H,nextParams:r[r.length-1].params,...n,actionResult:R,actionStatus:O,defaultShouldRevalidate:L?!1:u}),we&&V.push({key:X,routeId:F.routeId,path:F.path,matches:re,match:me,controller:new AbortController})}),[Q,V]}function Ik(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function pfe(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}function mfe(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function U3(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function H3(e,t,r,n,i){let o;if(e){let p=n[e];Xr(p,`No route found to patch children into: routeId = ${e}`),p.children||(p.children=[]),o=p.children}else o=r;let u=t.filter(p=>!o.some(m=>_F(p,m))),a=$x(u,i,[e||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...a)}function _F(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var i;return(i=t.children)==null?void 0:i.some(o=>_F(r,o))}):!1}async function gfe(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Xr(i,"No route found in manifest");let o={};for(let u in n){let p=i[u]!==void 0&&u!=="hasErrorBoundary";Qi(!p,`Route "${i.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!p&&!Fde.has(u)&&(o[u]=n[u])}Object.assign(i,o),Object.assign(i,{...t(i),lazy:void 0})}async function vfe({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,i,o)=>Object.assign(n,{[t[o].route.id]:i}),{})}async function yfe(e,t,r,n,i,o,u,a,p,m){let w=o.map(P=>P.route.lazy?gfe(P.route,p,a):void 0),C=o.map((P,R)=>{let $=w[R],H=i.some(O=>O.route.id===P.route.id);return{...P,shouldLoad:H,resolve:async O=>(O&&n.method==="GET"&&(P.route.lazy||P.route.loader)&&(H=!0),H?_fe(t,n,P,$,O,m):Promise.resolve({type:"data",result:void 0}))}}),T=await e({matches:C,request:n,params:o[0].params,fetcherKey:u,context:m});try{await Promise.all(w)}catch{}return T}async function _fe(e,t,r,n,i,o){let u,a,p=m=>{let w,C=new Promise((R,$)=>w=$);a=()=>w(),t.signal.addEventListener("abort",a);let T=R=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${r.route.id}]`)):m({request:t,params:r.params,context:o},...R!==void 0?[R]:[]),P=(async()=>{try{return{type:"data",result:await(i?i($=>T($)):T())}}catch(R){return{type:"error",result:R}}})();return Promise.race([P,C])};try{let m=r.route[e];if(n)if(m){let w,[C]=await Promise.all([p(m).catch(T=>{w=T}),n]);if(w!==void 0)throw w;u=C}else if(await n,m=r.route[e],m)u=await p(m);else if(e==="action"){let w=new URL(t.url),C=w.pathname+w.search;throw ls(405,{method:t.method,pathname:C,routeId:r.route.id})}else return{type:"data",result:void 0};else if(m)u=await p(m);else{let w=new URL(t.url),C=w.pathname+w.search;throw ls(404,{pathname:C})}}catch(m){return{type:"error",result:m}}finally{a&&t.signal.removeEventListener("abort",a)}return u}async function xfe(e){var n,i,o,u;let{result:t,type:r}=e;if(bF(t)){let a;try{let p=t.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?t.body==null?a=null:a=await t.json():a=await t.text()}catch(p){return{type:"error",error:p}}return r==="error"?{type:"error",error:new Fx(t.status,t.statusText,a),statusCode:t.status,headers:t.headers}:{type:"data",data:a,statusCode:t.status,headers:t.headers}}if(r==="error"){if(J3(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status};t=new Fx(((i=t.init)==null?void 0:i.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:Sw(t)?t.status:void 0}}return J3(t)?{type:"data",data:t.data,statusCode:(o=t.init)==null?void 0:o.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function bfe(e,t,r,n,i){let o=e.headers.get("Location");if(Xr(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!nM.test(o)){let u=n.slice(0,n.findIndex(a=>a.route.id===r)+1);o=Ek(new URL(t.url),u,i,o),e.headers.set("Location",o)}return e}function G3(e,t,r){if(nM.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),o=il(i.pathname,r)!=null;if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function mf(e,t,r,n){let i=e.createURL(xF(t)).toString(),o={signal:r};if(n&&Vs(n.formMethod)){let{formMethod:u,formEncType:a}=n;o.method=u.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(n.json)):a==="text/plain"?o.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?o.body=Mk(n.formData):o.body=n.formData}return new Request(i,o)}function Mk(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function q3(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function wfe(e,t,r,n=!1,i=!1){let o={},u=null,a,p=!1,m={},w=r&&Ra(r[1])?r[1].error:void 0;return e.forEach(C=>{if(!(C.route.id in t))return;let T=C.route.id,P=t[T];if(Xr(!zh(P),"Cannot handle redirect results in processLoaderData"),Ra(P)){let R=P.error;if(w!==void 0&&(R=w,w=void 0),u=u||{},i)u[T]=R;else{let $=Ph(e,T);u[$.route.id]==null&&(u[$.route.id]=R)}n||(o[T]=yF),p||(p=!0,a=Sw(P.error)?P.error.status:500),P.headers&&(m[T]=P.headers)}else o[T]=P.data,P.statusCode&&P.statusCode!==200&&!p&&(a=P.statusCode),P.headers&&(m[T]=P.headers)}),w!==void 0&&r&&(u={[r[0]]:w},o[r[0]]=void 0),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:m}}function W3(e,t,r,n,i,o){let{loaderData:u,errors:a}=wfe(t,r,n);return i.forEach(p=>{let{key:m,match:w,controller:C}=p,T=o[m];if(Xr(T,"Did not find corresponding fetcher result"),!(C&&C.signal.aborted))if(Ra(T)){let P=Ph(e.matches,w==null?void 0:w.route.id);a&&a[P.route.id]||(a={...a,[P.route.id]:T.error}),e.fetchers.delete(m)}else if(zh(T))Xr(!1,"Unhandled fetcher revalidation redirect");else{let P=cu(T.data);e.fetchers.set(m,P)}}),{loaderData:u,errors:a}}function Z3(e,t,r,n){let i=Object.entries(t).filter(([,o])=>o!==yF).reduce((o,[u,a])=>(o[u]=a,o),{});for(let o of r){let u=o.route.id;if(!t.hasOwnProperty(u)&&e.hasOwnProperty(u)&&o.route.loader&&(i[u]=e[u]),n&&n.hasOwnProperty(u))break}return i}function K3(e){return e?Ra(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ph(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function X3(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ls(e,{pathname:t,routeId:r,method:n,type:i,message:o}={}){let u="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(u="Bad Request",n&&t&&r?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):e===403?(u="Forbidden",a=`Route "${r}" does not match URL "${t}"`):e===404?(u="Not Found",a=`No route matches URL "${t}"`):e===405&&(u="Method Not Allowed",n&&t&&r?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new Fx(e||500,u,new Error(a),!0)}function F_(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(zh(i))return{key:n,result:i}}}function xF(e){let t=typeof e=="string"?Ju(e):e;return ju({...t,hash:""})}function Sfe(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Cfe(e){return bF(e.result)&&lfe.has(e.result.status)}function Ra(e){return e.type==="error"}function zh(e){return(e&&e.type)==="redirect"}function J3(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function bF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Tfe(e){return sfe.has(e.toUpperCase())}function Vs(e){return ofe.has(e.toUpperCase())}function iM(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function $g(e,t){let r=typeof t=="string"?Ju(t).search:t.search;if(e[e.length-1].route.index&&iM(r||""))return e[e.length-1];let n=mF(e);return n[n.length-1]}function Y3(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:o,json:u}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:r,formEncType:n,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function VS(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kfe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function xg(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Efe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function cu(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ife(e,t){try{let r=e.sessionStorage.getItem(vF);if(r){let n=JSON.parse(r);for(let[i,o]of Object.entries(n||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function Mfe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(vF,JSON.stringify(r))}catch(n){Qi(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function Pfe(){let e,t,r=new Promise((n,i)=>{e=async o=>{n(o);try{await r}catch{}},t=async o=>{i(o);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var yd=z.createContext(null);yd.displayName="DataRouter";var Hy=z.createContext(null);Hy.displayName="DataRouterState";var oM=z.createContext({isTransitioning:!1});oM.displayName="ViewTransition";var wF=z.createContext(new Map);wF.displayName="Fetchers";var Afe=z.createContext(null);Afe.displayName="Await";var ql=z.createContext(null);ql.displayName="Navigation";var Cw=z.createContext(null);Cw.displayName="Location";var Vc=z.createContext({outlet:null,matches:[],isDataRoute:!1});Vc.displayName="Route";var aM=z.createContext(null);aM.displayName="RouteError";function Rfe(e,{relative:t}={}){Xr(Gy(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=z.useContext(ql),{hash:i,pathname:o,search:u}=qy(e,{relative:t}),a=o;return r!=="/"&&(a=o==="/"?r:Nl([r,o])),n.createHref({pathname:a,search:u,hash:i})}function Gy(){return z.useContext(Cw)!=null}function Yu(){return Xr(Gy(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Cw).location}var SF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CF(e){z.useContext(ql).static||z.useLayoutEffect(e)}function TF(){let{isDataRoute:e}=z.useContext(Vc);return e?Gfe():Dfe()}function Dfe(){Xr(Gy(),"useNavigate() may be used only in the context of a <Router> component.");let e=z.useContext(yd),{basename:t,navigator:r}=z.useContext(ql),{matches:n}=z.useContext(Vc),{pathname:i}=Yu(),o=JSON.stringify(tM(n)),u=z.useRef(!1);return CF(()=>{u.current=!0}),z.useCallback((p,m={})=>{if(Qi(u.current,SF),!u.current)return;if(typeof p=="number"){r.go(p);return}let w=rM(p,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:Nl([t,w.pathname])),(m.replace?r.replace:r.push)(w,m.state,m)},[t,r,o,i,e])}z.createContext(null);function qy(e,{relative:t}={}){let{matches:r}=z.useContext(Vc),{pathname:n}=Yu(),i=JSON.stringify(tM(r));return z.useMemo(()=>rM(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function zfe(e,t,r,n){Xr(Gy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=z.useContext(ql),{matches:o}=z.useContext(Vc),u=o[o.length-1],a=u?u.params:{},p=u?u.pathname:"/",m=u?u.pathnameBase:"/",w=u&&u.route;{let D=w&&w.path||"";kF(p,!w||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let C=Yu(),T;T=C;let P=T.pathname||"/",R=P;if(m!=="/"){let D=m.replace(/^\//,"").split("/");R="/"+P.replace(/^\//,"").split("/").slice(D.length).join("/")}let $=mu(e,{pathname:R});return Qi(w||$!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Qi($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Ffe($&&$.map(D=>Object.assign({},D,{params:Object.assign({},a,D.params),pathname:Nl([m,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?m:Nl([m,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,r,n)}function Lfe(){let e=Hfe(),t=Sw(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},t),r?z.createElement("pre",{style:i},r):null,u)}var Ofe=z.createElement(Lfe,null),$fe=class extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?z.createElement(Vc.Provider,{value:this.props.routeContext},z.createElement(aM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Bfe({routeContext:e,match:t,children:r}){let n=z.useContext(yd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),z.createElement(Vc.Provider,{value:e},r)}function Ffe(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let p=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);Xr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let u=!1,a=-1;if(r)for(let p=0;p<i.length;p++){let m=i[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(a=p),m.route.id){let{loaderData:w,errors:C}=r,T=m.route.loader&&!w.hasOwnProperty(m.route.id)&&(!C||C[m.route.id]===void 0);if(m.route.lazy||T){u=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((p,m,w)=>{let C,T=!1,P=null,R=null;r&&(C=o&&m.route.id?o[m.route.id]:void 0,P=m.route.errorElement||Ofe,u&&(a<0&&w===0?(kF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,R=null):a===w&&(T=!0,R=m.route.hydrateFallbackElement||null)));let $=t.concat(i.slice(0,w+1)),H=()=>{let D;return C?D=P:T?D=R:m.route.Component?D=z.createElement(m.route.Component,null):m.route.element?D=m.route.element:D=p,z.createElement(Bfe,{match:m,routeContext:{outlet:p,matches:$,isDataRoute:r!=null},children:D})};return r&&(m.route.ErrorBoundary||m.route.errorElement||w===0)?z.createElement($fe,{location:r.location,revalidation:r.revalidation,component:P,error:C,children:H(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):H()},null)}function sM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nfe(e){let t=z.useContext(yd);return Xr(t,sM(e)),t}function jfe(e){let t=z.useContext(Hy);return Xr(t,sM(e)),t}function Vfe(e){let t=z.useContext(Vc);return Xr(t,sM(e)),t}function lM(e){let t=Vfe(e),r=t.matches[t.matches.length-1];return Xr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Ufe(){return lM("useRouteId")}function Hfe(){var n;let e=z.useContext(aM),t=jfe("useRouteError"),r=lM("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Gfe(){let{router:e}=Nfe("useNavigate"),t=lM("useNavigate"),r=z.useRef(!1);return CF(()=>{r.current=!0}),z.useCallback(async(i,o={})=>{Qi(r.current,SF),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var Q3={};function kF(e,t,r){!t&&!Q3[e]&&(Q3[e]=!0,Qi(!1,r))}var eD={};function tD(e,t){!e&&!eD[t]&&(eD[t]=!0,console.warn(t))}function qfe(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Qi(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:z.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Qi(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:z.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Qi(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:z.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var Wfe=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Zfe({router:e,flushSync:t}){let[r,n]=z.useState(e.state),[i,o]=z.useState(),[u,a]=z.useState({isTransitioning:!1}),[p,m]=z.useState(),[w,C]=z.useState(),[T,P]=z.useState(),R=z.useRef(new Map),$=z.useCallback((L,{deletedFetchers:Q,flushSync:V,viewTransitionOpts:F})=>{Q.forEach(re=>R.current.delete(re)),L.fetchers.forEach((re,ye)=>{re.data!==void 0&&R.current.set(ye,re.data)}),tD(V===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let X=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(tD(F==null||X,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!F||!X){t&&V?t(()=>n(L)):z.startTransition(()=>n(L));return}if(t&&V){t(()=>{w&&(p&&p.resolve(),w.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let re=e.window.document.startViewTransition(()=>{t(()=>n(L))});re.finished.finally(()=>{t(()=>{m(void 0),C(void 0),o(void 0),a({isTransitioning:!1})})}),t(()=>C(re));return}w?(p&&p.resolve(),w.skipTransition(),P({state:L,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(o(L),a({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[e.window,t,w,p]);z.useLayoutEffect(()=>e.subscribe($),[e,$]),z.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new Wfe)},[u]),z.useEffect(()=>{if(p&&i&&e.window){let L=i,Q=p.promise,V=e.window.document.startViewTransition(async()=>{z.startTransition(()=>n(L)),await Q});V.finished.finally(()=>{m(void 0),C(void 0),o(void 0),a({isTransitioning:!1})}),C(V)}},[i,p,e.window]),z.useEffect(()=>{p&&i&&r.location.key===i.location.key&&p.resolve()},[p,w,r.location,i]),z.useEffect(()=>{!u.isTransitioning&&T&&(o(T.state),a({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),P(void 0))},[u.isTransitioning,T]);let H=z.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:L=>e.navigate(L),push:(L,Q,V)=>e.navigate(L,{state:Q,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(L,Q,V)=>e.navigate(L,{replace:!0,state:Q,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[e]),D=e.basename||"/",O=z.useMemo(()=>({router:e,navigator:H,static:!1,basename:D}),[e,H,D]);return z.createElement(z.Fragment,null,z.createElement(yd.Provider,{value:O},z.createElement(Hy.Provider,{value:r},z.createElement(wF.Provider,{value:R.current},z.createElement(oM.Provider,{value:u},z.createElement(Jfe,{basename:D,location:r.location,navigationType:r.historyAction,navigator:H},z.createElement(Kfe,{routes:e.routes,future:e.future,state:r})))))),null)}var Kfe=z.memo(Xfe);function Xfe({routes:e,future:t,state:r}){return zfe(e,void 0,r,t)}function x1(e){Xr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jfe({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:o=!1}){Xr(!Gy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),a=z.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof r=="string"&&(r=Ju(r));let{pathname:p="/",search:m="",hash:w="",state:C=null,key:T="default"}=r,P=z.useMemo(()=>{let R=il(p,u);return R==null?null:{location:{pathname:R,search:m,hash:w,state:C,key:T},navigationType:n}},[u,p,m,w,C,T,n]);return Qi(P!=null,`<Router basename="${u}"> is not able to match the URL "${p}${m}${w}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:z.createElement(ql.Provider,{value:a},z.createElement(Cw.Provider,{children:t,value:P}))}function Pk(e,t=[]){let r=[];return z.Children.forEach(e,(n,i)=>{if(!z.isValidElement(n))return;let o=[...t,i];if(n.type===z.Fragment){r.push.apply(r,Pk(n.props.children,o));return}Xr(n.type===x1,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=Pk(n.props.children,o)),r.push(u)}),r}var Yfe=Pk,b1="get",w1="application/x-www-form-urlencoded";function Tw(e){return e!=null&&typeof e.tagName=="string"}function Qfe(e){return Tw(e)&&e.tagName.toLowerCase()==="button"}function epe(e){return Tw(e)&&e.tagName.toLowerCase()==="form"}function tpe(e){return Tw(e)&&e.tagName.toLowerCase()==="input"}function rpe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function npe(e,t){return e.button===0&&(!t||t==="_self")&&!rpe(e)}function Ak(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function ipe(e,t){let r=Ak(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(o=>{r.append(i,o)})}),r}var N_=null;function ope(){if(N_===null)try{new FormData(document.createElement("form"),0),N_=!1}catch{N_=!0}return N_}var ape=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function US(e){return e!=null&&!ape.has(e)?(Qi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${w1}"`),null):e}function spe(e,t){let r,n,i,o,u;if(epe(e)){let a=e.getAttribute("action");n=a?il(a,t):null,r=e.getAttribute("method")||b1,i=US(e.getAttribute("enctype"))||w1,o=new FormData(e)}else if(Qfe(e)||tpe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||a.getAttribute("action");if(n=p?il(p,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||b1,i=US(e.getAttribute("formenctype"))||US(a.getAttribute("enctype"))||w1,o=new FormData(a,e),!ope()){let{name:m,type:w,value:C}=e;if(w==="image"){let T=m?`${m}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else m&&o.append(m,C)}}else{if(Tw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=b1,n=null,i=w1,u=e}return o&&i==="text/plain"&&(u=o,o=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:o,body:u}}function cM(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function lpe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cpe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function upe(e,t,r){let n=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let u=await lpe(o,r);return u.links?u.links():[]}return[]}));return ppe(n.flat(1).filter(cpe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rD(e,t,r,n,i,o){let u=(p,m)=>r[m]?p.route.id!==r[m].route.id:!0,a=(p,m)=>{var w;return r[m].pathname!==p.pathname||((w=r[m].route.path)==null?void 0:w.endsWith("*"))&&r[m].params["*"]!==p.params["*"]};return o==="assets"?t.filter((p,m)=>u(p,m)||a(p,m)):o==="data"?t.filter((p,m)=>{var C;let w=n.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(u(p,m)||a(p,m))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((C=r[0])==null?void 0:C.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function hpe(e,t){return dpe(e.map(r=>{let n=t.routes[r.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function dpe(e){return[...new Set(e)]}function fpe(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function ppe(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let o=JSON.stringify(fpe(i));return r.has(o)||(r.add(o),n.push({key:o,link:i})),n},[])}function mpe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function gpe(){let e=z.useContext(yd);return cM(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vpe(){let e=z.useContext(Hy);return cM(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var uM=z.createContext(void 0);uM.displayName="FrameworkContext";function EF(){let e=z.useContext(uM);return cM(e,"You must render this element inside a <HydratedRouter> element"),e}function ype(e,t){let r=z.useContext(uM),[n,i]=z.useState(!1),[o,u]=z.useState(!1),{onFocus:a,onBlur:p,onMouseEnter:m,onMouseLeave:w,onTouchStart:C}=t,T=z.useRef(null);z.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let $=D=>{D.forEach(O=>{u(O.isIntersecting)})},H=new IntersectionObserver($,{threshold:.5});return T.current&&H.observe(T.current),()=>{H.disconnect()}}},[e]),z.useEffect(()=>{if(n){let $=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout($)}}},[n]);let P=()=>{i(!0)},R=()=>{i(!1),u(!1)};return r?e!=="intent"?[o,T,{}]:[o,T,{onFocus:bg(a,P),onBlur:bg(p,R),onMouseEnter:bg(m,P),onMouseLeave:bg(w,R),onTouchStart:bg(C,P)}]:[!1,T,{}]}function bg(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function _pe({page:e,...t}){let{router:r}=gpe(),n=z.useMemo(()=>mu(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?z.createElement(bpe,{page:e,matches:n,...t}):null}function xpe(e){let{manifest:t,routeModules:r}=EF(),[n,i]=z.useState([]);return z.useEffect(()=>{let o=!1;return upe(e,t,r).then(u=>{o||i(u)}),()=>{o=!0}},[e,t,r]),n}function bpe({page:e,matches:t,...r}){let n=Yu(),{manifest:i,routeModules:o}=EF(),{loaderData:u,matches:a}=vpe(),p=z.useMemo(()=>rD(e,t,a,i,n,"data"),[e,t,a,i,n]),m=z.useMemo(()=>rD(e,t,a,i,n,"assets"),[e,t,a,i,n]),w=z.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let P=new Set,R=!1;if(t.forEach(H=>{var O;let D=i.routes[H.route.id];!D||!D.hasLoader||(!p.some(L=>L.route.id===H.route.id)&&H.route.id in u&&((O=o[H.route.id])!=null&&O.shouldRevalidate)||D.hasClientLoader?R=!0:P.add(H.route.id))}),P.size===0)return[];let $=mpe(e);return R&&P.size>0&&$.searchParams.set("_routes",t.filter(H=>P.has(H.route.id)).map(H=>H.route.id).join(",")),[$.pathname+$.search]},[u,n,i,p,t,e,o]),C=z.useMemo(()=>hpe(m,i),[m,i]),T=xpe(m);return z.createElement(z.Fragment,null,w.map(P=>z.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...r})),C.map(P=>z.createElement("link",{key:P,rel:"modulepreload",href:P,...r})),T.map(({key:P,link:R})=>z.createElement("link",{key:P,...R})))}function wpe(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var IF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IF&&(window.__reactRouterVersion="7.1.1")}catch{}function Spe(e,t){return dfe({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:Ode({window:t==null?void 0:t.window}),hydrationData:Cpe(),routes:e,mapRouteProperties:qfe,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function Cpe(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Tpe(e.errors)}),e}function Tpe(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new Fx(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let u=new o(i.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let o=new Error(i.message);o.stack="",r[n]=o}}else r[n]=i;return r}var MF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PF=z.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:o,replace:u,state:a,target:p,to:m,preventScrollReset:w,viewTransition:C,...T},P){let{basename:R}=z.useContext(ql),$=typeof m=="string"&&MF.test(m),H,D=!1;if(typeof m=="string"&&$&&(H=m,IF))try{let ye=new URL(window.location.href),me=m.startsWith("//")?new URL(ye.protocol+m):new URL(m),we=il(me.pathname,R);me.origin===ye.origin&&we!=null?m=we+me.search+me.hash:D=!0}catch{Qi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=Rfe(m,{relative:i}),[L,Q,V]=ype(n,T),F=Mpe(m,{replace:u,state:a,target:p,preventScrollReset:w,relative:i,viewTransition:C});function X(ye){t&&t(ye),ye.defaultPrevented||F(ye)}let re=z.createElement("a",{...T,...V,href:H||O,onClick:D||o?t:X,ref:wpe(P,Q),target:p,"data-discover":!$&&r==="render"?"true":void 0});return L&&!$?z.createElement(z.Fragment,null,re,z.createElement(_pe,{page:O})):re});PF.displayName="Link";var kpe=z.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:o,to:u,viewTransition:a,children:p,...m},w){let C=qy(u,{relative:m.relative}),T=Yu(),P=z.useContext(Hy),{navigator:R,basename:$}=z.useContext(ql),H=P!=null&&Lpe(C)&&a===!0,D=R.encodeLocation?R.encodeLocation(C).pathname:C.pathname,O=T.pathname,L=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;r||(O=O.toLowerCase(),L=L?L.toLowerCase():null,D=D.toLowerCase()),L&&$&&(L=il(L,$)||L);const Q=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let V=O===D||!i&&O.startsWith(D)&&O.charAt(Q)==="/",F=L!=null&&(L===D||!i&&L.startsWith(D)&&L.charAt(D.length)==="/"),X={isActive:V,isPending:F,isTransitioning:H},re=V?t:void 0,ye;typeof n=="function"?ye=n(X):ye=[n,V?"active":null,F?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let me=typeof o=="function"?o(X):o;return z.createElement(PF,{...m,"aria-current":re,className:ye,ref:w,style:me,to:u,viewTransition:a},typeof p=="function"?p(X):p)});kpe.displayName="NavLink";var Epe=z.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:o,method:u=b1,action:a,onSubmit:p,relative:m,preventScrollReset:w,viewTransition:C,...T},P)=>{let R=Dpe(),$=zpe(a,{relative:m}),H=u.toLowerCase()==="get"?"get":"post",D=typeof a=="string"&&MF.test(a),O=L=>{if(p&&p(L),L.defaultPrevented)return;L.preventDefault();let Q=L.nativeEvent.submitter,V=(Q==null?void 0:Q.getAttribute("formmethod"))||u;R(Q||L.currentTarget,{fetcherKey:t,method:V,navigate:r,replace:i,state:o,relative:m,preventScrollReset:w,viewTransition:C})};return z.createElement("form",{ref:P,method:H,action:$,onSubmit:n?p:O,...T,"data-discover":!D&&e==="render"?"true":void 0})});Epe.displayName="Form";function Ipe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AF(e){let t=z.useContext(yd);return Xr(t,Ipe(e)),t}function Mpe(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:o,viewTransition:u}={}){let a=TF(),p=Yu(),m=qy(e,{relative:o});return z.useCallback(w=>{if(npe(w,t)){w.preventDefault();let C=r!==void 0?r:ju(p)===ju(m);a(e,{replace:C,state:n,preventScrollReset:i,relative:o,viewTransition:u})}},[p,a,m,r,n,t,e,i,o,u])}function Ppe(e){Qi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=z.useRef(Ak(e)),r=z.useRef(!1),n=Yu(),i=z.useMemo(()=>ipe(n.search,r.current?null:t.current),[n.search]),o=TF(),u=z.useCallback((a,p)=>{const m=Ak(typeof a=="function"?a(i):a);r.current=!0,o("?"+m,p)},[o,i]);return[i,u]}var Ape=0,Rpe=()=>`__${String(++Ape)}__`;function Dpe(){let{router:e}=AF("useSubmit"),{basename:t}=z.useContext(ql),r=Ufe();return z.useCallback(async(n,i={})=>{let{action:o,method:u,encType:a,formData:p,body:m}=spe(n,t);if(i.navigate===!1){let w=i.fetcherKey||Rpe();await e.fetch(w,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:m,formMethod:i.method||u,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:m,formMethod:i.method||u,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function zpe(e,{relative:t}={}){let{basename:r}=z.useContext(ql),n=z.useContext(Vc);Xr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...qy(e||".",{relative:t})},u=Yu();if(e==null){o.search=u.search;let a=new URLSearchParams(o.search),p=a.getAll("index");if(p.some(w=>w==="")){a.delete("index"),p.filter(C=>C).forEach(C=>a.append("index",C));let w=a.toString();o.search=w?`?${w}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:Nl([r,o.pathname])),ju(o)}function Lpe(e,t={}){let r=z.useContext(oM);Xr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=AF("useViewTransitionState"),i=qy(e,{relative:t.relative});if(!r.isTransitioning)return!1;let o=il(r.currentLocation.pathname,n)||r.currentLocation.pathname,u=il(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bx(i.pathname,u)!=null||Bx(i.pathname,o)!=null}new TextEncoder;/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ope(e){return z.createElement(Zfe,{flushSync:ld.flushSync,...e})}const RF={[Di.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[Di.Toll]:{iconName:"toll_ico",label:"Toll gate"},[Di.Parking]:{iconName:"parking_ico",label:"Rest stop"},[Di.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[Di.Service]:{iconName:"service_ico",label:"Service"},[Di.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[Di.Port]:{iconName:"port_overlay",label:"Port"},[Di.Train]:{iconName:"train_ico",label:"Train"},[Di.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[Di.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[Di.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[Di.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[Di.Garage]:{iconName:"garage_large_ico",label:"Garage"},[Di.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[Di.CityNames]:{iconName:"city_names_ico",label:"City names"},[Di.Company]:{iconName:"companies_ico",label:"Companies"},[Di.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},nD=new Map(Object.entries(RF).map(([e,t])=>[Number(e),t.label])),iD=new Map(Object.entries(yoe).map(([e,t])=>[Number(e),t]));function Nx(e,t,r){return{selectedItems:e,onSelectAllToggle:n=>t(new Set(n?r:[])),onItemToggle:(n,i)=>{t(o=>{const u=new Set(o);return i?u.add(n):u.delete(n),u})}}}const DF=e=>{const t=z.useRef(null),[r,n]=z.useState(!1),[i,o]=z.useState(0);return Nc(()=>({onAdd:()=>un(t.current),onRemove:()=>un(t.current).remove()}),{position:"bottom-left"}),N.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[N.jsx(Du,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>n(!0),children:N.jsx(Voe,{})}),N.jsx(R$,{open:r,onClose:()=>n(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:N.jsxs(aw,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[N.jsx(E$,{children:"Map Options"}),N.jsx(D$,{}),N.jsx(d5,{onChange:(u,a)=>o(Number(a)),children:N.jsxs(vY,{tabFlex:1,sx:{borderRadius:0},children:[N.jsx(gS,{children:"Icons"}),N.jsx(gS,{children:"ATS DLC"}),N.jsx(gS,{children:"Advanced"})]})}),N.jsx(k$,{sx:{overflowX:"hidden"},children:N.jsxs(d5,{value:i,children:[N.jsx(vS,{sx:{p:0},value:0,children:N.jsx(oD,{items:nD,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:u=>N.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${RF[u].iconName}.png`})})}),N.jsx(vS,{sx:{p:0},value:1,children:N.jsx(oD,{items:iD,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),N.jsx(vS,{sx:{p:0},value:2,children:N.jsx(Npe,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),N.jsx(Ey,{}),i===0&&N.jsx($pe,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===nD.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),i===1&&N.jsx(Fpe,{enableSelectAll:e.atsDlcs.selectedItems.size===iD.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},$pe=z.memo(e=>N.jsxs(Mi,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[N.jsx(AY,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:N.jsx(Cp,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),N.jsx(Cp,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),Bpe=e=>N.jsx(hd,{size:"lg",sx:{p:0,[`& .${Bh.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var n;return N.jsxs(Fc,{children:[(n=e.icon)==null?void 0:n.call(e,t),N.jsx(Cp,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:i=>e.onItemToggle(t,i.target.checked)})]},String(t))})}),oD=z.memo(Bpe),Fpe=z.memo(e=>N.jsx(Mi,{direction:"row",justifyContent:"end",gap:1,mx:2,children:N.jsx(Cp,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),Npe=e=>N.jsxs(Mi,{mx:2,children:[N.jsx(Ln,{mb:2,level:"title-lg",children:"Experimental Features"}),N.jsxs(CX,{children:[N.jsx(Cp,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),N.jsx(Ln,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),zF=()=>{const e=z.useRef(null),{mode:t="light",setMode:r}=dE();return Nc(()=>({onAdd:()=>un(e.current),onRemove:()=>un(e.current).remove()})),N.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:N.jsxs(EU,{children:[N.jsx(EJ,{slots:{root:Du},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:N.jsx(Doe,{})}),N.jsxs(_J,{placement:"left",children:[N.jsx(Fc,{sticky:!0,children:N.jsx(Ln,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),N.jsxs(mS,{onClick:()=>r("light"),selected:t==="light",children:[N.jsx(c1,{children:N.jsx(Loe,{})})," ","Light"]}),N.jsxs(mS,{onClick:()=>r("dark"),selected:t==="dark",children:[N.jsx(c1,{children:N.jsx(Ooe,{})})," ","Dark"]}),N.jsxs(mS,{onClick:()=>r("system"),selected:t==="system",children:[N.jsx(c1,{children:N.jsx(zoe,{})})," ","Auto"]})]})]})})},jpe=e=>{const{map:t,selectDecorator:r,onSelect:n}=e,[i,o]=z.useState([]);z.useEffect(()=>{const p=t==="usa"?"ats":"ets2";Promise.all([fetch(`${p}-achievements.json`).then(m=>m.json()),fetch(`${p}-achievements.geojson`).then(m=>m.json())]).then(([m,w])=>{const C=new Map;for(const P of w.features)voe(P.properties.name,[],C).push({coordinates:P.geometry.coordinates,dlcGuard:P.properties.dlcGuard});const T=new Set(w.features.map(P=>P.properties.name));o([...m.data.filter(P=>T.has(P.id)).map(P=>({...P,label:P.title,value:P.id,features:un(C.get(P.id))})).sort((P,R)=>P.label.localeCompare(R.label))])},()=>console.error("could not load achievements json."))},[t]);const u=i.filter(p=>{if(t==="europe")return!0;const m=xw(e.visibleStateDlcs);return p.features.some(w=>m.has(w.dlcGuard))}),a=fI({stringify:p=>[p.label,p.desc].join(" ")});return N.jsx(sx,{onChange:(p,m)=>n(m),placeholder:"Search achievements...",options:u,filterOptions:a,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r,renderOption:(p,m)=>z.createElement(IK,{...p,key:m.value},N.jsx(c1,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:N.jsx("img",{loading:"lazy",width:"48",height:"48",src:m.imgUrl,alt:""})}),N.jsxs(hJ,{children:[N.jsx(Ln,{level:"title-md",children:m.label}),N.jsx(Ln,{level:"body-xs",children:m.desc})]}))},t)},Vpe=e=>{const{map:t,selectDecorator:r,onSelect:n}=e,[i,o]=z.useState([]);z.useEffect(()=>{Promise.all([fetch("cities.geojson").then(p=>p.json()),fetch(BB).then(p=>p.json()),fetch(FB).then(p=>p.json())]).then(([p,m,w])=>{o(Hpe(p,m,w))},()=>console.error("could not load cities/towns geojson."))},[]);const u=i.filter(p=>{const m=p.map===t;return t==="europe"?m:m&&e.visibleStates.has(p.stateCode)}),a=fI({stringify:p=>[p.state,p.label].join(" ")});return N.jsx(sx,{onChange:(p,m)=>m&&n(m),placeholder:"Search cities...",options:u,filterOptions:a,groupBy:p=>p.state,blurOnSelect:!0,autoComplete:!0,renderGroup:Upe,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r},t)};function Upe(e){return N.jsxs(z.Fragment,{children:[N.jsx(Ln,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),N.jsx(hd,{children:e.children}),N.jsx(ow,{})]},e.key)}function Hpe(e,t,r){const n=[],i=new Map;for(const o of e.features)if(o.properties.type==="city")n.push(o);else if(o.properties.type==="country")i.set(o.properties.code,o.properties.name);else throw new Error;for(const o of t.features)n.push({type:"Feature",geometry:o.geometry,properties:{type:"city",map:"usa",countryCode:o.properties.state,name:o.properties.name}});for(const o of r.features)n.push({type:"Feature",geometry:o.geometry,properties:{type:"city",map:"europe",countryCode:o.properties.state,name:o.properties.name}});return n.map(({properties:o,geometry:u})=>({map:o.map,state:un(i.get(o.countryCode)),stateCode:o.countryCode,label:o.name,value:u.coordinates})).sort((o,u)=>o.state!==u.state?o.state.localeCompare(u.state):o.label.localeCompare(u.label))}var aD=Object.prototype.toString,LF=function(t){var r=aD.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&aD.call(t.callee)==="[object Function]"),n},HS,sD;function Gpe(){if(sD)return HS;sD=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=LF,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(T){var P=T.constructor;return P&&P.prototype===T},m={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w=function(){if(typeof window>"u")return!1;for(var T in window)try{if(!m["$"+T]&&t.call(window,T)&&window[T]!==null&&typeof window[T]=="object")try{p(window[T])}catch{return!0}}catch{return!0}return!1}(),C=function(T){if(typeof window>"u"||!w)return p(T);try{return p(T)}catch{return!1}};e=function(P){var R=P!==null&&typeof P=="object",$=r.call(P)==="[object Function]",H=n(P),D=R&&r.call(P)==="[object String]",O=[];if(!R&&!$&&!H)throw new TypeError("Object.keys called on a non-object");var L=u&&$;if(D&&P.length>0&&!t.call(P,0))for(var Q=0;Q<P.length;++Q)O.push(String(Q));if(H&&P.length>0)for(var V=0;V<P.length;++V)O.push(String(V));else for(var F in P)!(L&&F==="prototype")&&t.call(P,F)&&O.push(String(F));if(o)for(var X=C(P),re=0;re<a.length;++re)!(X&&a[re]==="constructor")&&t.call(P,a[re])&&O.push(a[re]);return O}}return HS=e,HS}var qpe=Array.prototype.slice,Wpe=LF,lD=Object.keys,S1=lD?function(t){return lD(t)}:Gpe(),cD=Object.keys;S1.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Wpe(n)?cD(qpe.call(n)):cD(n)})}else Object.keys=S1;return Object.keys||S1};var Zpe=S1,C1=Object.defineProperty||!1;if(C1)try{C1({},"a",{value:1})}catch{C1=!1}var Wy=C1,Qu=SyntaxError,$r=TypeError,Kpe=Object.getOwnPropertyDescriptor,T1=Kpe;if(T1)try{T1([],"length")}catch{T1=null}var Kp=T1,uD=Wy,Xpe=Qu,gf=$r,hD=Kp,OF=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new gf("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new gf("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new gf("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new gf("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new gf("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new gf("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,p=!!hD&&hD(t,r);if(uD)uD(t,r,{configurable:u===null&&p?p.configurable:!u,enumerable:i===null&&p?p.enumerable:!i,value:n,writable:o===null&&p?p.writable:!o});else if(a||!i&&!o&&!u)t[r]=n;else throw new Xpe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Rk=Wy,$F=function(){return!!Rk};$F.hasArrayLengthDefineBug=function(){if(!Rk)return null;try{return Rk([],"length",{value:1}).length!==1}catch{return!0}};var hM=$F,Jpe=Zpe,Ype=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Qpe=Object.prototype.toString,eme=Array.prototype.concat,dD=OF,tme=function(e){return typeof e=="function"&&Qpe.call(e)==="[object Function]"},BF=hM(),rme=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!tme(n)||!n())return}BF?dD(e,t,r,!0):dD(e,t,r)},FF=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Jpe(t);Ype&&(n=eme.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)rme(e,n[i],t[n[i]],r[n[i]])};FF.supportsDescriptors=!!BF;var NF=FF,jF={exports:{}},nme=Object,ime=Error,ome=EvalError,ame=RangeError,sme=ReferenceError,lme=URIError,VF=Math.abs,UF=Math.floor,cme=Math.max,ume=Math.min,hme=Math.pow,GS,fD;function HF(){return fD||(fD=1,GS=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var u=Object.getOwnPropertySymbols(t);if(u.length!==1||u[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),GS}var qS,pD;function kw(){if(pD)return qS;pD=1;var e=typeof Symbol<"u"&&Symbol,t=HF();return qS=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},qS}var dme="Function.prototype.bind called on incompatible ",fme=Object.prototype.toString,pme=Math.max,mme="[object Function]",mD=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},gme=function(t,r){for(var n=[],i=r,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},vme=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},yme=function(t){var r=this;if(typeof r!="function"||fme.apply(r)!==mme)throw new TypeError(dme+r);for(var n=gme(arguments,1),i,o=function(){if(this instanceof i){var w=r.apply(this,mD(n,arguments));return Object(w)===w?w:this}return r.apply(t,mD(n,arguments))},u=pme(0,r.length-n.length),a=[],p=0;p<u;p++)a[p]="$"+p;if(i=Function("binder","return function ("+vme(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var m=function(){};m.prototype=r.prototype,i.prototype=new m,m.prototype=null}return i},_me=yme,Zy=Function.prototype.bind||_me,dM=Function.prototype.call,fM=Function.prototype.apply,xme=typeof Reflect<"u"&&Reflect&&Reflect.apply,bme=Zy,wme=fM,Sme=dM,Cme=xme,GF=Cme||bme.call(Sme,wme),Tme=Zy,kme=$r,Eme=dM,Ime=GF,pM=function(t){if(t.length<1||typeof t[0]!="function")throw new kme("a function is required");return Ime(Tme,Eme,t)},WS,gD;function Mme(){if(gD)return WS;gD=1;var e=pM,t=Kp,r;try{r=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var n=!!r&&t&&t(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return WS=n&&typeof n.get=="function"?e([n.get]):typeof o=="function"?function(a){return o(a==null?a:i(a))}:!1,WS}var ZS,vD;function Uc(){if(vD)return ZS;vD=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Zy;return ZS=r.call(e,t),ZS}var rn,qF=nme,Pme=ime,Ame=ome,Rme=ame,Dme=sme,Op=Qu,cp=$r,zme=lme,Lme=VF,Ome=UF,$me=cme,Bme=ume,Fme=hme,WF=Function,KS=function(e){try{return WF('"use strict"; return ('+e+").constructor;")()}catch{}},oy=Kp,Nme=Wy,XS=function(){throw new cp},jme=oy?function(){try{return arguments.callee,XS}catch{try{return oy(arguments,"callee").get}catch{return XS}}}():XS,vf=kw()(),Vme=Mme(),Zi=typeof Reflect=="function"&&Reflect.getPrototypeOf||qF.getPrototypeOf||Vme,ZF=fM,Ky=dM,Tf={},Ume=typeof Uint8Array>"u"||!Zi?rn:Zi(Uint8Array),jh={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?rn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?rn:ArrayBuffer,"%ArrayIteratorPrototype%":vf&&Zi?Zi([][Symbol.iterator]()):rn,"%AsyncFromSyncIteratorPrototype%":rn,"%AsyncFunction%":Tf,"%AsyncGenerator%":Tf,"%AsyncGeneratorFunction%":Tf,"%AsyncIteratorPrototype%":Tf,"%Atomics%":typeof Atomics>"u"?rn:Atomics,"%BigInt%":typeof BigInt>"u"?rn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?rn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?rn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?rn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Pme,"%eval%":eval,"%EvalError%":Ame,"%Float32Array%":typeof Float32Array>"u"?rn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?rn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?rn:FinalizationRegistry,"%Function%":WF,"%GeneratorFunction%":Tf,"%Int8Array%":typeof Int8Array>"u"?rn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?rn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?rn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":vf&&Zi?Zi(Zi([][Symbol.iterator]())):rn,"%JSON%":typeof JSON=="object"?JSON:rn,"%Map%":typeof Map>"u"?rn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!vf||!Zi?rn:Zi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":qF,"%Object.getOwnPropertyDescriptor%":oy,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?rn:Promise,"%Proxy%":typeof Proxy>"u"?rn:Proxy,"%RangeError%":Rme,"%ReferenceError%":Dme,"%Reflect%":typeof Reflect>"u"?rn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?rn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!vf||!Zi?rn:Zi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?rn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":vf&&Zi?Zi(""[Symbol.iterator]()):rn,"%Symbol%":vf?Symbol:rn,"%SyntaxError%":Op,"%ThrowTypeError%":jme,"%TypedArray%":Ume,"%TypeError%":cp,"%Uint8Array%":typeof Uint8Array>"u"?rn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?rn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?rn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?rn:Uint32Array,"%URIError%":zme,"%WeakMap%":typeof WeakMap>"u"?rn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?rn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?rn:WeakSet,"%Function.prototype.call%":Ky,"%Function.prototype.apply%":ZF,"%Object.defineProperty%":Nme,"%Math.abs%":Lme,"%Math.floor%":Ome,"%Math.max%":$me,"%Math.min%":Bme,"%Math.pow%":Fme};if(Zi)try{null.error}catch(e){var Hme=Zi(Zi(e));jh["%Error.prototype%"]=Hme}var Gme=function e(t){var r;if(t==="%AsyncFunction%")r=KS("async function () {}");else if(t==="%GeneratorFunction%")r=KS("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=KS("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Zi&&(r=Zi(i.prototype))}return jh[t]=r,r},yD={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Xy=Zy,jx=Uc(),qme=Xy.call(Ky,Array.prototype.concat),Wme=Xy.call(ZF,Array.prototype.splice),_D=Xy.call(Ky,String.prototype.replace),Vx=Xy.call(Ky,String.prototype.slice),Zme=Xy.call(Ky,RegExp.prototype.exec),Kme=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Xme=/\\(\\)?/g,Jme=function(t){var r=Vx(t,0,1),n=Vx(t,-1);if(r==="%"&&n!=="%")throw new Op("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Op("invalid intrinsic syntax, expected opening `%`");var i=[];return _D(t,Kme,function(o,u,a,p){i[i.length]=a?_D(p,Xme,"$1"):u||o}),i},Yme=function(t,r){var n=t,i;if(jx(yD,n)&&(i=yD[n],n="%"+i[0]+"%"),jx(jh,n)){var o=jh[n];if(o===Tf&&(o=Gme(n)),typeof o>"u"&&!r)throw new cp("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Op("intrinsic "+t+" does not exist!")},Oo=function(t,r){if(typeof t!="string"||t.length===0)throw new cp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new cp('"allowMissing" argument must be a boolean');if(Zme(/^%?[^%]*%?$/,t)===null)throw new Op("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Jme(t),i=n.length>0?n[0]:"",o=Yme("%"+i+"%",r),u=o.name,a=o.value,p=!1,m=o.alias;m&&(i=m[0],Wme(n,qme([0,1],m)));for(var w=1,C=!0;w<n.length;w+=1){var T=n[w],P=Vx(T,0,1),R=Vx(T,-1);if((P==='"'||P==="'"||P==="`"||R==='"'||R==="'"||R==="`")&&P!==R)throw new Op("property names with quotes must have matching quotes");if((T==="constructor"||!C)&&(p=!0),i+="."+T,u="%"+i+"%",jx(jh,u))a=jh[u];else if(a!=null){if(!(T in a)){if(!r)throw new cp("base intrinsic for "+t+" exists, but the property is not available.");return}if(oy&&w+1>=n.length){var $=oy(a,T);C=!!$,C&&"get"in $&&!("originalValue"in $.get)?a=$.get:a=a[T]}else C=jx(a,T),a=a[T];C&&!p&&(jh[u]=a)}}return a},Qme=Oo,xD=OF,ege=hM(),bD=Kp,wD=$r,tge=Qme("%Math.floor%"),rge=function(t,r){if(typeof t!="function")throw new wD("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||tge(r)!==r)throw new wD("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&bD){var u=bD(t,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(o=!1)}return(i||o||!n)&&(ege?xD(t,"length",r,!0,!0):xD(t,"length",r)),t},nge=Zy,ige=fM,oge=GF,age=function(){return oge(nge,ige,arguments)};(function(e){var t=rge,r=Wy,n=pM,i=age;e.exports=function(u){var a=n(arguments),p=u.length-(arguments.length-1);return t(a,1+(p>0?p:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i})(jF);var KF=jF.exports,_d=function(t){return typeof t=="string"||typeof t=="symbol"},sge=$r,wg=Uc(),lge={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},xd=function(t){if(!t||typeof t!="object")return!1;for(var r in t)if(wg(t,r)&&!lge[r])return!1;var n=wg(t,"[[Value]]")||wg(t,"[[Writable]]"),i=wg(t,"[[Get]]")||wg(t,"[[Set]]");if(n&&i)throw new sge("Property Descriptors may not be both accessor and data descriptors");return!0},cge=$r,SD=Uc(),uge=xd,mM=function(t){if(typeof t>"u")return!1;if(!uge(t))throw new cge("Assertion failed: `Desc` must be a Property Descriptor");return!(!SD(t,"[[Get]]")&&!SD(t,"[[Set]]"))},JS,CD;function hge(){return CD||(CD=1,JS=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),JS}var XF=Oo,dge=XF("%Object.preventExtensions%",!0),fge=XF("%Object.isExtensible%",!0),TD=hge(),pge=dge?function(t){return!TD(t)&&fge(t)}:function(t){return!TD(t)},JF=Function.prototype.toString,Zf=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Dk,k1;if(typeof Zf=="function"&&typeof Object.defineProperty=="function")try{Dk=Object.defineProperty({},"length",{get:function(){throw k1}}),k1={},Zf(function(){throw 42},null,Dk)}catch(e){e!==k1&&(Zf=null)}else Zf=null;var mge=/^\s*class\b/,zk=function(t){try{var r=JF.call(t);return mge.test(r)}catch{return!1}},YS=function(t){try{return zk(t)?!1:(JF.call(t),!0)}catch{return!1}},E1=Object.prototype.toString,gge="[object Object]",vge="[object Function]",yge="[object GeneratorFunction]",_ge="[object HTMLAllCollection]",xge="[object HTML document.all class]",bge="[object HTMLCollection]",wge=typeof Symbol=="function"&&!!Symbol.toStringTag,Sge=!(0 in[,]),Lk=function(){return!1};if(typeof document=="object"){var Cge=document.all;E1.call(Cge)===E1.call(document.all)&&(Lk=function(t){if((Sge||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=E1.call(t);return(r===_ge||r===xge||r===bge||r===gge)&&t("")==null}catch{}return!1})}var YF=Zf?function(t){if(Lk(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Zf(t,null,Dk)}catch(r){if(r!==k1)return!1}return!zk(t)&&YS(t)}:function(t){if(Lk(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(wge)return YS(t);if(zk(t))return!1;var r=E1.call(t);return r!==vge&&r!==yge&&!/^\[object HTML/.test(r)?!1:YS(t)},Jy=YF,QF=function(t){return!!t},na=function(t){return!!t&&(typeof t=="function"||typeof t=="object")},bl=Uc(),j_=$r,kD=Jy,QS=QF,Tge=na,kge=function(t){if(!Tge(t))throw new j_("ToPropertyDescriptor requires an object");var r={};if(bl(t,"enumerable")&&(r["[[Enumerable]]"]=QS(t.enumerable)),bl(t,"configurable")&&(r["[[Configurable]]"]=QS(t.configurable)),bl(t,"value")&&(r["[[Value]]"]=t.value),bl(t,"writable")&&(r["[[Writable]]"]=QS(t.writable)),bl(t,"get")){var n=t.get;if(typeof n<"u"&&!kD(n))throw new j_("getter must be a function");r["[[Get]]"]=n}if(bl(t,"set")){var i=t.set;if(typeof i<"u"&&!kD(i))throw new j_("setter must be a function");r["[[Set]]"]=i}if((bl(r,"[[Get]]")||bl(r,"[[Set]]"))&&(bl(r,"[[Value]]")||bl(r,"[[Writable]]")))throw new j_("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r},gM=Number.isNaN||function(t){return t!==t},ED=gM,vM=function(t,r){return t===r?t===0?1/t===1/r:!0:ED(t)&&ED(r)},eN=Oo,tN=pM,Ege=tN([eN("%String.prototype.indexOf%")]),Ta=function(t,r){var n=eN(t,!!r);return typeof n=="function"&&Ege(t,".prototype.")>-1?tN([n]):n},eC,ID;function yM(){if(ID)return eC;ID=1;var e=Oo,t=e("%Array%"),r=!t.isArray&&Ta("Object.prototype.toString");return eC=t.isArray||function(i){return r(i)==="[object Array]"},eC}var Ige=hM,MD=Wy,rN=Ige.hasArrayLengthDefineBug(),Mge=rN&&yM(),Pge=Ta,Age=Pge("Object.prototype.propertyIsEnumerable"),Rge=function(t,r,n,i,o,u){if(!MD){if(!t(u)||!u["[[Configurable]]"]||!u["[[Writable]]"]||o in i&&Age(i,o)!==!!u["[[Enumerable]]"])return!1;var a=u["[[Value]]"];return i[o]=a,r(i[o],a)}return rN&&o==="length"&&"[[Value]]"in u&&Mge(i)&&i.length!==u["[[Value]]"]?(i.length=u["[[Value]]"],i.length===u["[[Value]]"]):(MD(i,o,n(u)),!0)},Dge=xd,zge=function(t,r){return Dge(r)&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))},Lge=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r},Oge=$r,$ge=xd,Bge=Lge,Fge=function(t){if(typeof t<"u"&&!$ge(t))throw new Oge("Assertion failed: `Desc` must be a Property Descriptor");return Bge(t)},Nge=$r,PD=Uc(),jge=xd,nN=function(t){if(typeof t>"u")return!1;if(!jge(t))throw new Nge("Assertion failed: `Desc` must be a Property Descriptor");return!(!PD(t,"[[Value]]")&&!PD(t,"[[Writable]]"))},Vge=$r,Uge=mM,Hge=nN,Gge=xd,qge=function(t){if(typeof t>"u")return!1;if(!Gge(t))throw new Vge("Assertion failed: `Desc` must be a Property Descriptor");return!Uge(t)&&!Hge(t)},Wge=na,Zge=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(Wge(t))return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"},Kge=Zge,Xge=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":Kge(t)},yf=$r,Sg=Rge,Jge=zge,AD=xd,Cg=Fge,Ch=mM,lu=nN,Yge=qge,Qge=_d,wl=vM,eve=Xge,tve=na,rve=function(t,r,n,i,o){var u=eve(t);if(typeof t<"u"&&!tve(t))throw new yf("Assertion failed: O must be undefined or an Object");if(!Qge(r))throw new yf("Assertion failed: P must be a Property Key");if(typeof n!="boolean")throw new yf("Assertion failed: extensible must be a Boolean");if(!AD(i))throw new yf("Assertion failed: Desc must be a Property Descriptor");if(typeof o<"u"&&!AD(o))throw new yf("Assertion failed: current must be a Property Descriptor, or undefined");if(typeof o>"u")return n?u==="Undefined"?!0:Ch(i)?Sg(lu,wl,Cg,t,r,i):Sg(lu,wl,Cg,t,r,{"[[Configurable]]":!!i["[[Configurable]]"],"[[Enumerable]]":!!i["[[Enumerable]]"],"[[Value]]":i["[[Value]]"],"[[Writable]]":!!i["[[Writable]]"]}):!1;if(!Jge({IsAccessorDescriptor:Ch,IsDataDescriptor:lu},o))throw new yf("`current`, when present, must be a fully populated and valid Property Descriptor");if(!o["[[Configurable]]"]){if("[[Configurable]]"in i&&i["[[Configurable]]"]||"[[Enumerable]]"in i&&!wl(i["[[Enumerable]]"],o["[[Enumerable]]"])||!Yge(i)&&!wl(Ch(i),Ch(o)))return!1;if(Ch(o)){if("[[Get]]"in i&&!wl(i["[[Get]]"],o["[[Get]]"])||"[[Set]]"in i&&!wl(i["[[Set]]"],o["[[Set]]"]))return!1}else if(!o["[[Writable]]"]&&("[[Writable]]"in i&&i["[[Writable]]"]||"[[Value]]"in i&&!wl(i["[[Value]]"],o["[[Value]]"])))return!1}if(u!=="Undefined"){var a,p;return lu(o)&&Ch(i)?(a=("[[Configurable]]"in i?i:o)["[[Configurable]]"],p=("[[Enumerable]]"in i?i:o)["[[Enumerable]]"],Sg(lu,wl,Cg,t,r,{"[[Configurable]]":!!a,"[[Enumerable]]":!!p,"[[Get]]":("[[Get]]"in i?i:o)["[[Get]]"],"[[Set]]":("[[Set]]"in i?i:o)["[[Set]]"]})):Ch(o)&&lu(i)?(a=("[[Configurable]]"in i?i:o)["[[Configurable]]"],p=("[[Enumerable]]"in i?i:o)["[[Enumerable]]"],Sg(lu,wl,Cg,t,r,{"[[Configurable]]":!!a,"[[Enumerable]]":!!p,"[[Value]]":("[[Value]]"in i?i:o)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in i?i:o)["[[Writable]]"]})):Sg(lu,wl,Cg,t,r,i)}return!0},RD=Kp,DD=Qu,tC=$r,nve=xd,ive=mM,ove=pge,ave=_d,sve=kge,lve=vM,cve=rve,uve=na,hve=function(t,r,n){if(!uve(t))throw new tC("Assertion failed: O must be an Object");if(!ave(r))throw new tC("Assertion failed: P must be a Property Key");if(!nve(n))throw new tC("Assertion failed: Desc must be a Property Descriptor");if(!RD){if(ive(n))throw new DD("This environment does not support accessor property descriptors.");var i=!(r in t)&&n["[[Writable]]"]&&n["[[Enumerable]]"]&&n["[[Configurable]]"]&&"[[Value]]"in n,o=r in t&&(!("[[Configurable]]"in n)||n["[[Configurable]]"])&&(!("[[Enumerable]]"in n)||n["[[Enumerable]]"])&&(!("[[Writable]]"in n)||n["[[Writable]]"])&&"[[Value]]"in n;if(i||o)return t[r]=n["[[Value]]"],lve(t[r],n["[[Value]]"]);throw new DD("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var u=RD(t,r),a=u&&sve(u),p=ove(t);return cve(t,r,p,n,a)},zD=$r,dve=_d,fve=hve,pve=na,mve=function(t,r,n){if(!pve(t))throw new zD("Assertion failed: Type(O) is not Object");if(!dve(r))throw new zD("Assertion failed: P is not a Property Key");var i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0};return fve(t,r,i)},rC=$r,gve=mve,vve=na,yve=_d,_ve=function(t,r,n){if(!vve(t))throw new rC("Assertion failed: Type(O) is not Object");if(!yve(r))throw new rC("Assertion failed: P is not a Property Key");var i=gve(t,r,n);if(!i)throw new rC("unable to create data property")},nC,LD;function _M(){return LD||(LD=1,nC=yM()),nC}var xM=function(t,r){for(var n=0;n<t.length;n+=1)r(t[n],n,t)};const xve={},bve=Object.freeze(Object.defineProperty({__proto__:null,default:xve},Symbol.toStringTag,{value:"Module"})),wve=Oc(bve);var iC,OD;function eh(){if(OD)return iC;OD=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&typeof t.get=="function"?t.get:null,n=e&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=i&&o&&typeof o.get=="function"?o.get:null,a=i&&Set.prototype.forEach,p=typeof WeakMap=="function"&&WeakMap.prototype,m=p?WeakMap.prototype.has:null,w=typeof WeakSet=="function"&&WeakSet.prototype,C=w?WeakSet.prototype.has:null,T=typeof WeakRef=="function"&&WeakRef.prototype,P=T?WeakRef.prototype.deref:null,R=Boolean.prototype.valueOf,$=Object.prototype.toString,H=Function.prototype.toString,D=String.prototype.match,O=String.prototype.slice,L=String.prototype.replace,Q=String.prototype.toUpperCase,V=String.prototype.toLowerCase,F=RegExp.prototype.test,X=Array.prototype.concat,re=Array.prototype.join,ye=Array.prototype.slice,me=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ke=Object.getOwnPropertySymbols,Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Re=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qe||!0)?Symbol.toStringTag:null,Se=Object.prototype.propertyIsEnumerable,Fe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ee){return Ee.__proto__}:null);function Ce(Ee,Ve){if(Ee===1/0||Ee===-1/0||Ee!==Ee||Ee&&Ee>-1e3&&Ee<1e3||F.call(/e/,Ve))return Ve;var Xe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ee=="number"){var Et=Ee<0?-me(-Ee):me(Ee);if(Et!==Ee){var vt=String(Et),Rt=O.call(Ve,vt.length+1);return L.call(vt,Xe,"$&_")+"."+L.call(L.call(Rt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return L.call(Ve,Xe,"$&_")}var Ne=wve,Je=Ne.custom,at=Er(Je)?Je:null,st={__proto__:null,double:'"',single:"'"},Dt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};iC=function Ee(Ve,Xe,Et,vt){var Rt=Xe||{};if(It(Rt,"quoteStyle")&&!It(st,Rt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(It(Rt,"maxStringLength")&&(typeof Rt.maxStringLength=="number"?Rt.maxStringLength<0&&Rt.maxStringLength!==1/0:Rt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var br=It(Rt,"customInspect")?Rt.customInspect:!0;if(typeof br!="boolean"&&br!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(It(Rt,"indent")&&Rt.indent!==null&&Rt.indent!=="	"&&!(parseInt(Rt.indent,10)===Rt.indent&&Rt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(It(Rt,"numericSeparator")&&typeof Rt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ft=Rt.numericSeparator;if(typeof Ve>"u")return"undefined";if(Ve===null)return"null";if(typeof Ve=="boolean")return Ve?"true":"false";if(typeof Ve=="string")return Fr(Ve,Rt);if(typeof Ve=="number"){if(Ve===0)return 1/0/Ve>0?"0":"-0";var _r=String(Ve);return Ft?Ce(Ve,_r):_r}if(typeof Ve=="bigint"){var ue=String(Ve)+"n";return Ft?Ce(Ve,ue):ue}var Y=typeof Rt.depth>"u"?5:Rt.depth;if(typeof Et>"u"&&(Et=0),Et>=Y&&Y>0&&typeof Ve=="object")return Tt(Ve)?"[Array]":"[Object]";var ee=je(Rt,Et);if(typeof vt>"u")vt=[];else if(Br(vt,Ve)>=0)return"[Circular]";function U(dt,Lt,yr){if(Lt&&(vt=ye.call(vt),vt.push(Lt)),yr){var sr={depth:Rt.depth};return It(Rt,"quoteStyle")&&(sr.quoteStyle=Rt.quoteStyle),Ee(dt,sr,Et+1,vt)}return Ee(dt,Rt,Et+1,vt)}if(typeof Ve=="function"&&!Ze(Ve)){var J=Wt(Ve),ne=wt(Ve,U);return"[Function"+(J?": "+J:" (anonymous)")+"]"+(ne.length>0?" { "+re.call(ne,", ")+" }":"")}if(Er(Ve)){var de=qe?L.call(String(Ve),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ie.call(Ve);return typeof Ve=="object"&&!qe?vr(de):de}if(Pr(Ve)){for(var pe="<"+V.call(String(Ve.nodeName)),se=Ve.attributes||[],xe=0;xe<se.length;xe++)pe+=" "+se[xe].name+"="+Ct(Bt(se[xe].value),"double",Rt);return pe+=">",Ve.childNodes&&Ve.childNodes.length&&(pe+="..."),pe+="</"+V.call(String(Ve.nodeName))+">",pe}if(Tt(Ve)){if(Ve.length===0)return"[]";var Pe=wt(Ve,U);return ee&&!ln(Pe)?"["+kt(Pe,ee)+"]":"[ "+re.call(Pe,", ")+" ]"}if(rt(Ve)){var Le=wt(Ve,U);return!("cause"in Error.prototype)&&"cause"in Ve&&!Se.call(Ve,"cause")?"{ ["+String(Ve)+"] "+re.call(X.call("[cause]: "+U(Ve.cause),Le),", ")+" }":Le.length===0?"["+String(Ve)+"]":"{ ["+String(Ve)+"] "+re.call(Le,", ")+" }"}if(typeof Ve=="object"&&br){if(at&&typeof Ve[at]=="function"&&Ne)return Ne(Ve,{depth:Y-Et});if(br!=="symbol"&&typeof Ve.inspect=="function")return Ve.inspect()}if(He(Ve)){var Ae=[];return n&&n.call(Ve,function(dt,Lt){Ae.push(U(Lt,Ve,!0)+" => "+U(dt,Ve))}),mr("Map",r.call(Ve),Ae,ee)}if(tr(Ve)){var ot=[];return a&&a.call(Ve,function(dt){ot.push(U(dt,Ve))}),mr("Set",u.call(Ve),ot,ee)}if(Cr(Ve))return rr("WeakMap");if(lr(Ve))return rr("WeakSet");if(Rr(Ve))return rr("WeakRef");if(ur(Ve))return vr(U(Number(Ve)));if(jr(Ve))return vr(U(we.call(Ve)));if(or(Ve))return vr(R.call(Ve));if(pt(Ve))return vr(U(String(Ve)));if(typeof window<"u"&&Ve===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ve===globalThis||typeof jC<"u"&&Ve===jC)return"{ [object globalThis] }";if(!it(Ve)&&!Ze(Ve)){var ht=wt(Ve,U),ut=Fe?Fe(Ve)===Object.prototype:Ve instanceof Object||Ve.constructor===Object,Mt=Ve instanceof Object?"":"null prototype",Oe=!ut&&Re&&Object(Ve)===Ve&&Re in Ve?O.call(gr(Ve),8,-1):Mt?"Object":"",$e=ut||typeof Ve.constructor!="function"?"":Ve.constructor.name?Ve.constructor.name+" ":"",tt=$e+(Oe||Mt?"["+re.call(X.call([],Oe||[],Mt||[]),": ")+"] ":"");return ht.length===0?tt+"{}":ee?tt+"{"+kt(ht,ee)+"}":tt+"{ "+re.call(ht,", ")+" }"}return String(Ve)};function Ct(Ee,Ve,Xe){var Et=Xe.quoteStyle||Ve,vt=st[Et];return vt+Ee+vt}function Bt(Ee){return L.call(String(Ee),/"/g,"&quot;")}function Tt(Ee){return gr(Ee)==="[object Array]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function it(Ee){return gr(Ee)==="[object Date]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function Ze(Ee){return gr(Ee)==="[object RegExp]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function rt(Ee){return gr(Ee)==="[object Error]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function pt(Ee){return gr(Ee)==="[object String]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function ur(Ee){return gr(Ee)==="[object Number]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function or(Ee){return gr(Ee)==="[object Boolean]"&&(!Re||!(typeof Ee=="object"&&Re in Ee))}function Er(Ee){if(qe)return Ee&&typeof Ee=="object"&&Ee instanceof Symbol;if(typeof Ee=="symbol")return!0;if(!Ee||typeof Ee!="object"||!Ie)return!1;try{return Ie.call(Ee),!0}catch{}return!1}function jr(Ee){if(!Ee||typeof Ee!="object"||!we)return!1;try{return we.call(Ee),!0}catch{}return!1}var ar=Object.prototype.hasOwnProperty||function(Ee){return Ee in this};function It(Ee,Ve){return ar.call(Ee,Ve)}function gr(Ee){return $.call(Ee)}function Wt(Ee){if(Ee.name)return Ee.name;var Ve=D.call(H.call(Ee),/^function\s*([\w$]+)/);return Ve?Ve[1]:null}function Br(Ee,Ve){if(Ee.indexOf)return Ee.indexOf(Ve);for(var Xe=0,Et=Ee.length;Xe<Et;Xe++)if(Ee[Xe]===Ve)return Xe;return-1}function He(Ee){if(!r||!Ee||typeof Ee!="object")return!1;try{r.call(Ee);try{u.call(Ee)}catch{return!0}return Ee instanceof Map}catch{}return!1}function Cr(Ee){if(!m||!Ee||typeof Ee!="object")return!1;try{m.call(Ee,m);try{C.call(Ee,C)}catch{return!0}return Ee instanceof WeakMap}catch{}return!1}function Rr(Ee){if(!P||!Ee||typeof Ee!="object")return!1;try{return P.call(Ee),!0}catch{}return!1}function tr(Ee){if(!u||!Ee||typeof Ee!="object")return!1;try{u.call(Ee);try{r.call(Ee)}catch{return!0}return Ee instanceof Set}catch{}return!1}function lr(Ee){if(!C||!Ee||typeof Ee!="object")return!1;try{C.call(Ee,C);try{m.call(Ee,m)}catch{return!0}return Ee instanceof WeakSet}catch{}return!1}function Pr(Ee){return!Ee||typeof Ee!="object"?!1:typeof HTMLElement<"u"&&Ee instanceof HTMLElement?!0:typeof Ee.nodeName=="string"&&typeof Ee.getAttribute=="function"}function Fr(Ee,Ve){if(Ee.length>Ve.maxStringLength){var Xe=Ee.length-Ve.maxStringLength,Et="... "+Xe+" more character"+(Xe>1?"s":"");return Fr(O.call(Ee,0,Ve.maxStringLength),Ve)+Et}var vt=Dt[Ve.quoteStyle||"single"];vt.lastIndex=0;var Rt=L.call(L.call(Ee,vt,"\\$1"),/[\x00-\x1f]/g,Ir);return Ct(Rt,"single",Ve)}function Ir(Ee){var Ve=Ee.charCodeAt(0),Xe={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ve];return Xe?"\\"+Xe:"\\x"+(Ve<16?"0":"")+Q.call(Ve.toString(16))}function vr(Ee){return"Object("+Ee+")"}function rr(Ee){return Ee+" { ? }"}function mr(Ee,Ve,Xe,Et){var vt=Et?kt(Xe,Et):re.call(Xe,", ");return Ee+" ("+Ve+") {"+vt+"}"}function ln(Ee){for(var Ve=0;Ve<Ee.length;Ve++)if(Br(Ee[Ve],`
`)>=0)return!1;return!0}function je(Ee,Ve){var Xe;if(Ee.indent==="	")Xe="	";else if(typeof Ee.indent=="number"&&Ee.indent>0)Xe=re.call(Array(Ee.indent+1)," ");else return null;return{base:Xe,prev:re.call(Array(Ve+1),Xe)}}function kt(Ee,Ve){if(Ee.length===0)return"";var Xe=`
`+Ve.prev+Ve.base;return Xe+re.call(Ee,","+Xe)+`
`+Ve.prev}function wt(Ee,Ve){var Xe=Tt(Ee),Et=[];if(Xe){Et.length=Ee.length;for(var vt=0;vt<Ee.length;vt++)Et[vt]=It(Ee,vt)?Ve(Ee[vt],Ee):""}var Rt=typeof ke=="function"?ke(Ee):[],br;if(qe){br={};for(var Ft=0;Ft<Rt.length;Ft++)br["$"+Rt[Ft]]=Rt[Ft]}for(var _r in Ee)It(Ee,_r)&&(Xe&&String(Number(_r))===_r&&_r<Ee.length||qe&&br["$"+_r]instanceof Symbol||(F.call(/[^\w$]/,_r)?Et.push(Ve(_r,Ee)+": "+Ve(Ee[_r],Ee)):Et.push(_r+": "+Ve(Ee[_r],Ee))));if(typeof ke=="function")for(var ue=0;ue<Rt.length;ue++)Se.call(Ee,Rt[ue])&&Et.push("["+Ve(Rt[ue])+"]: "+Ve(Ee[Rt[ue]],Ee));return Et}return iC}var oC,$D;function Sve(){if($D)return oC;$D=1;var e=eh(),t=$r,r=function(a,p,m){for(var w=a,C;(C=w.next)!=null;w=C)if(C.key===p)return w.next=C.next,m||(C.next=a.next,a.next=C),C},n=function(a,p){if(a){var m=r(a,p);return m&&m.value}},i=function(a,p,m){var w=r(a,p);w?w.value=m:a.next={key:p,next:a.next,value:m}},o=function(a,p){return a?!!r(a,p):!1},u=function(a,p){if(a)return r(a,p,!0)};return oC=function(){var p,m={assert:function(w){if(!m.has(w))throw new t("Side channel does not contain "+e(w))},delete:function(w){var C=p&&p.next,T=u(p,w);return T&&C&&C===T&&(p=void 0),!!T},get:function(w){return n(p,w)},has:function(w){return o(p,w)},set:function(w,C){p||(p={next:void 0}),i(p,w,C)}};return m},oC}var aC,BD;function iN(){if(BD)return aC;BD=1;var e=Oo,t=Ta,r=eh(),n=$r,i=e("%Map%",!0),o=t("Map.prototype.get",!0),u=t("Map.prototype.set",!0),a=t("Map.prototype.has",!0),p=t("Map.prototype.delete",!0),m=t("Map.prototype.size",!0);return aC=!!i&&function(){var C,T={assert:function(P){if(!T.has(P))throw new n("Side channel does not contain "+r(P))},delete:function(P){if(C){var R=p(C,P);return m(C)===0&&(C=void 0),R}return!1},get:function(P){if(C)return o(C,P)},has:function(P){return C?a(C,P):!1},set:function(P,R){C||(C=new i),u(C,P,R)}};return T},aC}var sC,FD;function Cve(){if(FD)return sC;FD=1;var e=Oo,t=Ta,r=eh(),n=iN(),i=$r,o=e("%WeakMap%",!0),u=t("WeakMap.prototype.get",!0),a=t("WeakMap.prototype.set",!0),p=t("WeakMap.prototype.has",!0),m=t("WeakMap.prototype.delete",!0);return sC=o?function(){var C,T,P={assert:function(R){if(!P.has(R))throw new i("Side channel does not contain "+r(R))},delete:function(R){if(o&&R&&(typeof R=="object"||typeof R=="function")){if(C)return m(C,R)}else if(n&&T)return T.delete(R);return!1},get:function(R){return o&&R&&(typeof R=="object"||typeof R=="function")&&C?u(C,R):T&&T.get(R)},has:function(R){return o&&R&&(typeof R=="object"||typeof R=="function")&&C?p(C,R):!!T&&T.has(R)},set:function(R,$){o&&R&&(typeof R=="object"||typeof R=="function")?(C||(C=new o),a(C,R,$)):n&&(T||(T=n()),T.set(R,$))}};return P}:n,sC}var lC,ND;function Tve(){if(ND)return lC;ND=1;var e=$r,t=eh(),r=Sve(),n=iN(),i=Cve(),o=i||n||r;return lC=function(){var a,p={assert:function(m){if(!p.has(m))throw new e("Side channel does not contain "+t(m))},delete:function(m){return!!a&&a.delete(m)},get:function(m){return a&&a.get(m)},has:function(m){return!!a&&a.has(m)},set:function(m,w){a||(a=o()),a.set(m,w)}};return p},lC}var cC,jD;function bM(){if(jD)return cC;jD=1;var e=Uc(),t=Tve()(),r=$r,n={assert:function(i,o){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof o!="string")throw new r("`slot` must be a string");if(t.assert(i),!n.has(i,o))throw new r("`"+o+"` is not present on `O`")},get:function(i,o){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof o!="string")throw new r("`slot` must be a string");var u=t.get(i);return u&&u["$"+o]},has:function(i,o){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof o!="string")throw new r("`slot` must be a string");var u=t.get(i);return!!u&&e(u,"$"+o)},set:function(i,o,u){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof o!="string")throw new r("`slot` must be a string");var a=t.get(i);a||(a={},t.set(i,a)),a["$"+o]=u}};return Object.freeze&&Object.freeze(n),cC=n,cC}var uC,VD;function kve(){if(VD)return uC;VD=1;var e={__proto__:null,foo:{}},t={__proto__:e}.foo===e.foo&&!(e instanceof Object);return uC=function(){return t},uC}var Eve=Oo,UD=Eve("%Object.create%",!0),HD=$r,Ive=Qu,Mve=_M(),Pve=xM,Ave=na,Rve=bM(),Dve=kve()(),oN=function(t){if(t!==null&&!Ave(t))throw new HD("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!Mve(r))throw new HD("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(UD)n=UD(t);else if(Dve)n={__proto__:t};else{if(t===null)throw new Ive("native Object.create support is required to create null objects");var i=function(){};i.prototype=t,n=new i}return r.length>0&&Pve(r,function(o){Rve.set(n,o,void 0)}),n},zve=function(t){return t===0&&1/t===-1/0},aN=Number.MAX_SAFE_INTEGER||9007199254740991,hC,GD;function Lve(){return GD||(GD=1,hC=function(t,r){for(var n=0;n<t.length;n+=1)if(!r(t[n],n,t))return!1;return!0}),hC}var qD=$r,Ove=Ta,WD=Ove("Array.prototype.push"),$ve=vM,sN=yM(),Bve=Lve(),Fve=xM,ZD=Uc(),Nve=function(e){return ZD(e,"[[Key]]")&&ZD(e,"[[Elements]]")&&sN(e["[[Elements]]"])},jve=function(t,r,n){if(!sN(t)||t.length>0&&!Bve(t,Nve))throw new qD("Assertion failed: `groups` must be a List of Records with [[Key]] and [[Elements]]");var i=0;if(Fve(t,function(u){if($ve(u["[[Key]]"],r)){if(i+=1,i>1)throw new qD("Assertion failed: Exactly one element of groups meets this criterion");WD(u["[[Elements]]"],n)}}),i===0){var o={"[[Key]]":r,"[[Elements]]":[n]};WD(t,o)}},Vve=Oo,Uve=Ta,Hve=$r,Gve=_M(),qve=Vve("%Reflect.apply%",!0)||Uve("Function.prototype.apply"),Yy=function(t,r){var n=arguments.length>2?arguments[2]:[];if(!Gve(n))throw new Hve("Assertion failed: optional `argumentsList`, if provided, must be a List");return qve(t,r,n)},dC,KD;function lN(){return KD||(KD=1,dC=function(t){return typeof t=="number"&&t>=55296&&t<=56319}),dC}var fC,XD;function cN(){return XD||(XD=1,fC=function(t){return typeof t=="number"&&t>=56320&&t<=57343}),fC}var pC,JD;function Wve(){if(JD)return pC;JD=1;var e=Oo,t=$r,r=e("%String.fromCharCode%"),n=lN(),i=cN();return pC=function(u,a){if(!n(u)||!i(a))throw new t("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return r(u)+r(a)},pC}var mC,YD;function Zve(){if(YD)return mC;YD=1;var e=$r,t=Ta,r=lN(),n=cN(),i=Wve(),o=t("String.prototype.charAt"),u=t("String.prototype.charCodeAt");return mC=function(p,m){if(typeof p!="string")throw new e("Assertion failed: `string` must be a String");var w=p.length;if(m<0||m>=w)throw new e("Assertion failed: `position` must be >= 0, and < the length of `string`");var C=u(p,m),T=o(p,m),P=r(C),R=n(C);if(!P&&!R)return{"[[CodePoint]]":T,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(R||m+1===w)return{"[[CodePoint]]":T,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var $=u(p,m+1);return n($)?{"[[CodePoint]]":i(C,$),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":T,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}},mC}var gC,QD;function Kve(){if(QD)return gC;QD=1;var e=gM;return gC=function(r){return(typeof r=="number"||typeof r=="bigint")&&!e(r)&&r!==1/0&&r!==-1/0},gC}var vC,ez;function Xve(){if(ez)return vC;ez=1;var e=VF,t=UF,r=gM,n=Kve();return vC=function(o){if(typeof o!="number"||r(o)||!n(o))return!1;var u=e(o);return t(u)===u},vC}var yC,tz;function Jve(){if(tz)return yC;tz=1;var e=Zve(),t=$r,r=Xve(),n=aN;return yC=function(o,u,a){if(typeof o!="string")throw new t("Assertion failed: `S` must be a String");if(!r(u)||u<0||u>n)throw new t("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof a!="boolean")throw new t("Assertion failed: `unicode` must be a Boolean");if(!a)return u+1;var p=o.length;if(u+1>=p)return u+1;var m=e(o,u);return u+m["[[CodeUnitCount]]"]},yC}var _C,rz;function uN(){if(rz)return _C;rz=1;var e=$r;return _C=function(r,n){if(typeof n!="boolean")throw new e("Assertion failed: Type(done) is not Boolean");return{value:r,done:n}},_C}var nz=$r,Yve=eh(),Qve=na,eye=_d,Ew=function(t,r){if(!Qve(t))throw new nz("Assertion failed: Type(O) is not Object");if(!eye(r))throw new nz("Assertion failed: P is not a Property Key, got "+Yve(r));return t[r]},tye=$r,rye=Ew,nye=QF,iye=na,hN=function(t){if(!iye(t))throw new tye("Assertion failed: Type(iterResult) is not Object");return nye(rye(t,"done"))},oye=$r,aye=Ew,sye=na,dN=function(t){if(!sye(t))throw new oye("Assertion failed: Type(iterResult) is not Object");return aye(t,"value")},xC,iz;function lye(){if(iz)return xC;iz=1;var e=Oo,t=KF,r=Qu,n=e("%Promise.resolve%",!0),i=n&&t(n);return xC=function(u,a){if(!i)throw new r("This environment does not support Promises.");return i(u,a)},xC}var bC,oz;function cye(){if(oz)return bC;oz=1;var e=Oo,t=Qu,r=$r,n=e("%Promise%",!0),i=Ta,o=uN(),u=hN,a=dN,p=lye(),m=na,w=i("Promise.prototype.then",!0);return bC=function(T){if(!m(T))throw new r("Assertion failed: Type(O) is not Object");if(arguments.length>1)throw new t("although AsyncFromSyncIteratorContinuation should take a second argument, it is not used in this implementation");if(!n)throw new t("This environment does not support Promises.");return new n(function(P){var R=u(T),$=a(T),H=p(n,$),D=function(O){return o(O,R)};P(w(H,D))})},bC}var uye=$r,hye=eh(),dye=_d,fye=function(t,r){if(!dye(r))throw new uye("Assertion failed: P is not a Property Key, got "+hye(r));return t[r]},az=$r,pye=fye,mye=Jy,gye=_d,sz=eh(),wM=function(t,r){if(!gye(r))throw new az("Assertion failed: P is not a Property Key");var n=pye(t,r);if(n!=null){if(!mye(n))throw new az(sz(r)+" is not a function: "+sz(n));return n}},wC=Uc(),Iw=function(t){return!!t&&typeof t=="object"&&wC(t,"[[Iterator]]")&&wC(t,"[[NextMethod]]")&&wC(t,"[[Done]]")&&typeof t["[[Done]]"]=="boolean"},lz=$r,cz=Yy,vye=na,yye=Iw,fN=function(t){if(!yye(t))throw new lz("Assertion failed: `iteratorRecord` must be an Iterator Record");var r;if(arguments.length<2?r=cz(t["[[NextMethod]]"],t["[[Iterator]]"]):r=cz(t["[[NextMethod]]"],t["[[Iterator]]"],[arguments[1]]),!vye(r))throw new lz("iterator next must return an object");return r},SC,uz;function _ye(){if(uz)return SC;uz=1;var e=Oo,t=Qu,r=$r,n=e("%Promise%",!0),i=cye(),o=Yy,u=uN(),a=Ew,p=wM,m=fN,w=oN,C=na,T=Iw,P=bM(),R=e("%AsyncFromSyncIteratorPrototype%",!0)||{next:function(H){if(!n)throw new t("This environment does not support Promises.");var D=this;P.assert(D,"[[SyncIteratorRecord]]");var O=arguments.length;return new n(function(L){var Q=P.get(D,"[[SyncIteratorRecord]]"),V;O>0?V=m(Q,H):V=m(Q),L(i(V))})},return:function(){if(!n)throw new t("This environment does not support Promises.");var $=this;P.assert($,"[[SyncIteratorRecord]]");var H=arguments.length>0,D=H?arguments[0]:void 0;return new n(function(O,L){var Q=P.get($,"[[SyncIteratorRecord]]")["[[Iterator]]"],V=p(Q,"return");if(typeof V>"u"){var F=u(D,!0);o(O,void 0,[F]);return}var X;if(H?X=o(V,Q,[D]):X=o(V,Q),!C(X)){o(L,void 0,[new r("Iterator `return` method returned a non-object value.")]);return}O(i(X))})},throw:function(){if(!n)throw new t("This environment does not support Promises.");var $=this;P.assert($,"[[SyncIteratorRecord]]");var H=arguments.length>0,D=H?arguments[0]:void 0;return new n(function(O,L){var Q=P.get($,"[[SyncIteratorRecord]]")["[[Iterator]]"],V=p(Q,"throw");if(typeof V>"u"){o(L,void 0,[D]);return}var F;if(H?F=o(V,Q,[D]):F=o(V,Q),!C(F)){o(L,void 0,[new r("Iterator `throw` method returned a non-object value.")]);return}O(i(F))})}};return SC=function(H){if(!T(H))throw new r("Assertion failed: `syncIteratorRecord` must be an Iterator Record");var D=w(R);P.set(D,"[[SyncIteratorRecord]]",H);var O=a(D,"next");return{"[[Iterator]]":D,"[[NextMethod]]":O,"[[Done]]":!1}},SC}var CC,hz;function xye(){if(hz)return CC;hz=1;var e=$r,t=Yy,r=Ew,n=Jy,i=na;return CC=function(u,a){if(!n(a))throw new e("method must be a function");var p=t(a,u);if(!i(p))throw new e("iterator must return an object");var m=r(p,"next");return{"[[Iterator]]":p,"[[NextMethod]]":m,"[[Done]]":!1}},CC}var TC,dz;function SM(){if(dz)return TC;dz=1;var e=HF();return TC=function(){return e()&&!!Symbol.toStringTag},TC}var kC,fz;function bye(){if(fz)return kC;fz=1;var e=Ta,t=e("String.prototype.valueOf"),r=function(a){try{return t(a),!0}catch{return!1}},n=e("Object.prototype.toString"),i="[object String]",o=SM()();return kC=function(a){return typeof a=="string"?!0:!a||typeof a!="object"?!1:o?r(a):n(a)===i},kC}var EC,pz;function wye(){if(pz)return EC;pz=1;var e=kw()(),t=Oo,r=Ta,n=bye(),i=t("%Symbol.iterator%",!0),o=r("String.prototype.slice"),u=t("%String%");return EC=function(p,m){var w;return e?w=p.GetMethod(m,i):p.IsArray(m)?w=function(){var C=-1,T=this;return{next:function(){return C+=1,{done:C>=T.length,value:T[C]}}}}:n(m)&&(w=function(){var C=0;return{next:function(){var T=p.AdvanceStringIndex(u(m),C,!0),P=o(m,C,T);return C=T,{done:T>m.length,value:P}}}}),w},EC}var Sye=Oo,IC=$r,mz=Sye("%Symbol.asyncIterator%",!0),Cye=eh(),Tye=kw()(),kye=Jve(),Eye=_ye(),gz=xye(),pN=wM,Iye=_M(),Mye={AdvanceStringIndex:kye,GetMethod:pN,IsArray:Iye},Pye=wye(),Aye=function(t,r){if(r!=="SYNC"&&r!=="ASYNC")throw new IC("Assertion failed: `kind` must be one of 'sync' or 'async', got "+Cye(r));var n;if(r==="ASYNC"&&Tye&&mz&&(n=pN(t,mz)),typeof n>"u"){var i=Pye(Mye,t);if(r==="ASYNC"){if(typeof i>"u")throw new IC("iterator method is `undefined`");var o=gz(t,i);return Eye(o)}n=i}if(typeof n>"u")throw new IC("iterator method is `undefined`");return gz(t,n)},mN=Qu,Vu=bM(),Qy=function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=="normal"&&t!=="break"&&t!=="continue"&&t!=="return"&&t!=="throw")throw new mN('Assertion failed: `type` must be one of "normal", "break", "continue", "return", or "throw"');Vu.set(this,"[[Type]]",t),Vu.set(this,"[[Value]]",r)};Qy.prototype.type=function(){return Vu.get(this,"[[Type]]")};Qy.prototype.value=function(){return Vu.get(this,"[[Value]]")};Qy.prototype["?"]=function(){var t=Vu.get(this,"[[Type]]"),r=Vu.get(this,"[[Value]]");if(t==="throw")throw r;return r};Qy.prototype["!"]=function(){var t=Vu.get(this,"[[Type]]");if(t!=="normal")throw new mN('Assertion failed: Completion Record is not of type "normal"');return Vu.get(this,"[[Value]]")};var gN=Qy,V_=$r,Rye=Yy,vz=gN,Dye=wM,zye=Jy,yz=na,Lye=Iw,Oye=function(t,r){if(!Lye(t))throw new V_("Assertion failed: `iteratorRecord` must be an Iterator Record");if(!yz(t["[[Iterator]]"]))throw new V_("Assertion failed: iteratorRecord.[[Iterator]] must be an Object");if(!zye(r)&&!(r instanceof vz))throw new V_("Assertion failed: completion is not a thunk representing a Completion Record, nor a Completion Record instance");var n=r instanceof vz?function(){return r["?"]()}:r,i=t["[[Iterator]]"],o;try{o=Dye(i,"return")}catch(p){throw n(),n=null,p}if(typeof o>"u")return n();var u;try{u=Rye(o,i,[])}catch(p){throw n(),n=null,p}var a=n();if(n=null,!yz(u))throw new V_("iterator .return must return an object");return a},$ye=$r,Bye=hN,Fye=fN,Nye=Iw,jye=function(t){if(!Nye(t))throw new $ye("Assertion failed: `iteratorRecord` must be an Iterator Record");var r=Fye(t),n=Bye(r);return n===!0?!1:r},Vye=$r,Uye=function(t){if(t==null)throw new Vye(arguments.length>0&&arguments[1]||"Cannot call method on "+t);return t},Hye=Uye,Gye=gN,qye=function(t){return new Gye("throw",t)},MC,_z;function Wye(){return _z||(_z=1,MC=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),MC}var PC,xz;function Zye(){if(xz)return PC;xz=1;var e=Ta,t=e("Date.prototype.getDay"),r=function(a){try{return t(a),!0}catch{return!1}},n=e("Object.prototype.toString"),i="[object Date]",o=SM()();return PC=function(a){return typeof a!="object"||a===null?!1:o?r(a):n(a)===i},PC}var U_={exports:{}},AC,bz;function Kye(){if(bz)return AC;bz=1;var e=Ta,t=SM()(),r=Uc(),n=Kp,i;if(t){var o=e("RegExp.prototype.exec"),u={},a=function(){throw u},p={toString:a,valueOf:a};typeof Symbol.toPrimitive=="symbol"&&(p[Symbol.toPrimitive]=a),i=function(T){if(!T||typeof T!="object")return!1;var P=n(T,"lastIndex"),R=P&&r(P,"value");if(!R)return!1;try{o(T,p)}catch($){return $===u}}}else{var m=e("Object.prototype.toString"),w="[object RegExp]";i=function(T){return!T||typeof T!="object"&&typeof T!="function"?!1:m(T)===w}}return AC=i,AC}var RC,wz;function Xye(){if(wz)return RC;wz=1;var e=Ta,t=Kye(),r=e("RegExp.prototype.exec"),n=$r;return RC=function(o){if(!t(o))throw new n("`regex` must be a RegExp");return function(a){return r(o,a)!==null}},RC}var Sz;function Jye(){if(Sz)return U_.exports;Sz=1;var e=Ta,t=e("Object.prototype.toString"),r=kw()(),n=Xye();if(r){var i=e("Symbol.prototype.toString"),o=n(/^Symbol\(.*\)$/),u=function(p){return typeof p.valueOf()!="symbol"?!1:o(i(p))};U_.exports=function(p){if(typeof p=="symbol")return!0;if(!p||typeof p!="object"||t(p)!=="[object Symbol]")return!1;try{return u(p)}catch{return!1}}}else U_.exports=function(p){return!1};return U_.exports}var DC,Cz;function Yye(){if(Cz)return DC;Cz=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=Wye(),r=YF,n=Zye(),i=Jye(),o=function(p,m){if(typeof p>"u"||p===null)throw new TypeError("Cannot call method on "+p);if(typeof m!="string"||m!=="number"&&m!=="string")throw new TypeError('hint must be "string" or "number"');var w=m==="string"?["toString","valueOf"]:["valueOf","toString"],C,T,P;for(P=0;P<w.length;++P)if(C=p[w[P]],r(C)&&(T=C.call(p),t(T)))return T;throw new TypeError("No default value")},u=function(p,m){var w=p[m];if(w!==null&&typeof w<"u"){if(!r(w))throw new TypeError(w+" returned for property "+String(m)+" of object "+p+" is not a function");return w}};return DC=function(p){if(t(p))return p;var m="default";arguments.length>1&&(arguments[1]===String?m="string":arguments[1]===Number&&(m="number"));var w;if(e&&(Symbol.toPrimitive?w=u(p,Symbol.toPrimitive):i(p)&&(w=Symbol.prototype.valueOf)),typeof w<"u"){var C=w.call(p,m);if(t(C))return C;throw new TypeError("unable to convert exotic object to primitive")}return m==="default"&&(n(p)||i(p))&&(m="string"),o(p,m==="default"?"number":m)},DC}var zC,Tz;function Qye(){if(Tz)return zC;Tz=1;var e=Yye();return zC=function(r){return arguments.length>1?e(r,arguments[1]):e(r)},zC}var LC,kz;function e0e(){if(kz)return LC;kz=1;var e=Oo,t=e("%String%"),r=$r;return LC=function(i){if(typeof i=="symbol")throw new r("Cannot convert a Symbol value to a string");return t(i)},LC}var t0e=Oo,r0e=t0e("%String%"),n0e=Qye(),i0e=e0e(),o0e=function(t){var r=n0e(t,r0e);return typeof r=="symbol"?r:i0e(r)},H_=$r,a0e=zve,s0e=aN,l0e=jve,c0e=Yy,u0e=Aye,h0e=Jy,OC=Oye,d0e=jye,f0e=dN,p0e=Hye,$C=qye,m0e=o0e,g0e=function(t,r,n){if(n!=="PROPERTY"&&n!=="ZERO")throw new H_('Assertion failed: `keyCoercion` must be `"PROPERTY"` or `"ZERO"`');if(p0e(t),!h0e(r))throw new H_("callbackfn must be callable");for(var i=[],o=u0e(t,"SYNC"),u=0;;){if(u>=s0e){var a=$C(new H_("k must be less than 2 ** 53 - 1"));OC(o,a);return}var p=d0e(o);if(!p)return i;var m=f0e(p),w;try{w=c0e(r,void 0,[m,u])}catch(C){OC(o,$C(C));return}if(n==="PROPERTY")try{w=m0e(w)}catch(C){OC(o,$C(C));return}else{if(n!=="ZERO")throw new H_("keyCoercion must be ~PROPERTY~ or ~ZERO~");a0e(w)&&(w=0)}l0e(i,w,m),u+=1}},v0e=_ve,y0e=oN,_0e=xM,x0e=g0e,vN=function(t,r){var n=x0e(t,r,"PROPERTY"),i=y0e(null);return _0e(n,function(o){v0e(i,o["[[Key]]"],o["[[Elements]]"])}),i},b0e=vN,yN=function(){return Object.groupBy||b0e},BC,Ez;function w0e(){if(Ez)return BC;Ez=1;var e=NF,t=yN;return BC=function(){var n=t();return e(Object,{groupBy:n},{groupBy:function(){return Object.groupBy!==n}}),n},BC}var S0e=NF,C0e=KF,T0e=vN,_N=yN,k0e=_N(),E0e=w0e(),xN=C0e(k0e,Object);S0e(xN,{getPolyfill:_N,implementation:T0e,shim:E0e});var I0e=xN;const M0e=ay(I0e),Ok=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],FC=(e,t)=>rd.checkExists(Ok.find(r=>r.value.map===e&&r.value.search===t)),Iz=({selected:e,onSelect:t})=>N.jsx(nY,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(r,n)=>{r!=null&&t(un(Ok.find(i=>i.value===n)))},renderValue:r=>{if(r)return N.jsxs(Mi,{direction:"row",gap:1,sx:{alignItems:"center"},children:[N.jsx(Ln,{level:"body-xs",fontWeight:"lg",children:r.value.map==="usa"?"ATS":"ETS2"}),r.value.search==="cities"?N.jsx(_B,{}):N.jsx(yB,{})]})},children:Object.entries(M0e(Ok,({label:r})=>r)).map(([r,n])=>N.jsxs(hd,{children:[N.jsx(Fc,{children:N.jsx(Ln,{level:"body-xs",fontWeight:"lg",children:r})}),n==null?void 0:n.map(i=>N.jsxs(HJ,{value:i.value,sx:{px:"1em",textTransform:"capitalize"},children:[N.jsx(P0e,{search:i.value.search}),i.value.search]},i.value.search))]},r))}),P0e=({search:e})=>{switch(e){case"cities":return N.jsx(_B,{});case"achievements":return N.jsx(yB,{});default:throw new fa(e)}},I1={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},A0e=e=>{const t=z.useRef(null);Nc(()=>({onAdd:()=>un(t.current),onRemove:()=>un(t.current).remove()}),{position:"top-left"});const{current:r}=OI(),[n,i]=z.useState(FC(localStorage.getItem("tm-map")==="europe"?"europe":"usa",localStorage.getItem("tm-search")==="achievements"?"achievements":"cities")),o=Gs.useCallback(T=>{if(T==null||(i(T),localStorage.setItem("tm-map",T.value.map),localStorage.setItem("tm-search",T.value.search),!r||T.value.map===n.value.map))return;const{longitude:P,latitude:R}=I1[T.value.map];r.easeTo({zoom:4,center:[P,R]})},[r,n]);z.useEffect(()=>{if(!r)return;const T=()=>{const P=r.getCenter().lng,R=Mz(P,I1.usa.longitude),$=Mz(P,I1.europe.longitude);R<$&&n.value.map!=="usa"?(i(FC("usa",n.value.search)),localStorage.setItem("tm-map","usa")):$<R&&n.value.map!=="europe"&&(i(FC("europe",n.value.search)),localStorage.setItem("tm-map","europe"))};return r.on("moveend",T),()=>void r.off("moveend",T)},[r,n,i]);const u=Gs.useCallback(T=>{r==null||T==null||(r.flyTo({curve:1,zoom:9,center:T.value.map(P=>Number(P.toFixed(3)))}),r.once("moveend",P=>{const{lat:R,lng:$}=P.target.getCenter(),H=P.target.getZoom(),D=Number(P.target.getBearing().toFixed(1)),O=Math.round(P.target.getPitch());O?window.location.hash=`${H}/${R.toFixed(3)}/${$.toFixed(3)}/${D}/${O}`:D?window.location.hash=`${H}/${R.toFixed(3)}/${$.toFixed(3)}/${D}`:window.location.hash=`${H}/${R.toFixed(3)}/${$.toFixed(3)}`}))},[r]),[a,p]=z.useState([]),[m,w]=z.useState(null),C=Gs.useCallback((T,P={enableFitBounds:!0})=>{if(a.forEach(H=>H.remove()),w(T),r==null||T==null)return;const R=xw(e.visibleStateDlcs),$=T.features.filter(H=>R.has(H.dlcGuard)).map(({coordinates:H})=>new bw.Marker().setLngLat(H).addTo(r.getMap()));if(p($),$.length&&P.enableFitBounds){const H=NI($.map(L=>L.getLngLat().toArray())),D=[H[0],H[1]],O=[H[2],H[3]];r.fitBounds([D,O],{curve:1,padding:100,maxZoom:9})}},[r,a,w,p,e.visibleStates]);return z.useEffect(()=>{C(m,{enableFitBounds:!1})},[m,e.visibleStates]),N.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:N.jsx(Mi,{direction:"row",gap:1,children:n.value.search==="cities"?N.jsx(Vpe,{selectDecorator:N.jsx(Iz,{selected:n.value,onSelect:o}),map:n.value.map,onSelect:u,visibleStates:e.visibleStates}):N.jsx(jpe,{selectDecorator:N.jsx(Iz,{selected:n.value,onSelect:o}),map:n.value.map,onSelect:C,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})};function Mz(e,t){const r=vk(e)/2,n=vk(t)/2;return Math.abs(Math.sin(r)-Math.sin(n))}const NC=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},R0e=()=>{const e=z.useRef(null),[t,r]=z.useState(!1),[n,i]=z.useState(!1),[o,u]=z.useState(window.location.origin),a=OI();return Nc(()=>({onAdd:()=>un(e.current),onRemove:()=>un(e.current).remove()})),z.useEffect(()=>{const p=a.current;if(!p||!t)return;const m=()=>{const T=p.getCenter(),P=p.getBearing(),R=p.getPitch(),$=P||R?[P,R]:[],H=p.getZoom(),D=w?"?"+new URLSearchParams({mlat:String(NC(w.getLngLat().lat,2)),mlon:String(NC(w.getLngLat().lng,2))}).toString():"",O="#"+[H,T.lat,T.lng,...$].map(L=>NC(L,2)).join("/");u(window.location.origin+D+O)};let w,C;if(n){w=new bw.Marker,w.setLngLat(p.getCenter()).setDraggable(!0).addTo(p.getMap());let T=!0;C=()=>T&&w.setLngLat(p.getCenter()),w.on("dragend",()=>{T=!1,p.easeTo({center:w==null?void 0:w.getLngLat()}),p.once("moveend",()=>T=!0)})}return m(),p.on("moveend",m),C&&p.on("move",C),()=>{p.off("moveend",m),C&&p.off("move",C),w==null||w.remove()}},[a,t,n]),N.jsxs("div",{ref:e,children:[N.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:N.jsx(Du,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:N.jsx(joe,{})})}),N.jsx(R$,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:N.jsxs(aw,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[N.jsx(E$,{children:"Share"}),N.jsx(D$,{}),N.jsx(Ey,{}),N.jsxs(k$,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[N.jsx(Ln,{children:"Share a link to this map"}),N.jsx(vK,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:p=>p.target.select(),value:o,endDecorator:N.jsx(Sp,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(o).catch(()=>alert("Could not copy to clipboard ")),children:"Copy"})}),N.jsx(Cp,{label:"Include marker",checked:n,onChange:p=>i(p.target.checked)})]})]})})]})};function bN(e){return new Set([...e].map(D0e).concat(co.CA))}function D0e(e){switch(e){case Ao.Arizona:return co.AZ;case Ao.Arkansas:return co.AR;case Ao.Colorado:return co.CO;case Ao.Idaho:return co.ID;case Ao.Kansas:return co.KS;case Ao.Montana:return co.MT;case Ao.Nebraska:return co.NE;case Ao.Nevada:return co.NV;case Ao.NewMexico:return co.NM;case Ao.Oklahoma:return co.OK;case Ao.Oregon:return co.OR;case Ao.Texas:return co.TX;case Ao.Utah:return co.UT;case Ao.Washington:return co.WA;case Ao.Wyoming:return co.WY;default:throw new fa(e)}}const Pz=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,z0e=()=>{const{mode:e,systemMode:t}=dE(),r=e==="system"?t:e,{longitude:n,latitude:i}=I1[L0e(localStorage.getItem("tm-map"))],[o]=Ppe(),u=Number(o.get("mlat")??void 0),a=Number(o.get("mlon")??void 0),p=Pz(u,[-90,90])&&Pz(a,[-180,180])?{lat:u,lon:a}:void 0,[m,w]=z.useState(!0),[C,T]=z.useState(new Set(Jv)),[P,R]=z.useState(new Set(Xv)),$=bN(P),H=Nx(C,T,Jv),D=Nx(P,R,Xv),[O,L]=z.useState(!1);return N.jsxs($I,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:qI,initialViewState:{longitude:n,latitude:i,zoom:4},children:[p&&N.jsx(Lv,{longitude:p.lon,latitude:p.lat}),N.jsxs(GI,{mode:r,children:[N.jsx(xk,{game:"ats",showContours:O}),N.jsx(xk,{game:"ets2",showContours:O})]}),N.jsx(Yv,{game:"ats",mode:r,enableIconAutoHide:m,visibleIcons:C,dlcs:P}),N.jsx(Yv,{game:"ets2",mode:r,enableIconAutoHide:m,visibleIcons:C}),C.has(Di.CityNames)&&N.jsx(Qv,{game:"ats",mode:r,enableAutoHide:m,enabledStates:$}),C.has(Di.CityNames)&&N.jsx(Qv,{game:"ets2",mode:r,enableAutoHide:m}),N.jsx(K6,{visualizePitch:!0}),N.jsx(Z6,{containerId:"fsElem"}),N.jsx(R0e,{}),N.jsx(zF,{}),N.jsx(BI,{compact:!0,style:{marginLeft:54},customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),N.jsx(A0e,{visibleStates:$,visibleStateDlcs:P}),N.jsx(DF,{icons:{...H,enableAutoHiding:m,onAutoHidingToggle:w},advanced:{showContours:O,onContoursToggle:L},atsDlcs:D})]})};function L0e(e){return e==="europe"?e:"usa"}var O0e=Object.defineProperty,$0e=(e,t,r)=>t in e?O0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B0e=(e,t,r)=>($0e(e,t+"",r),r);class F0e{constructor(t){B0e(this,"_kind"),this._kind=t}}function N0e(e,t){const r=e.toString(),n=t.toString();return r>n?1:r<n?-1:0}const j0e=N0e;var V0e=Object.defineProperty,U0e=(e,t,r)=>t in e?V0e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Az=(e,t,r)=>(U0e(e,typeof t!="symbol"?t+"":t,r),r);function H0e(e,t,r){const n=t*2,i=t*2+1;let o=t;return n<e.length&&r(e[o],e[n])<0&&(o=n),i<e.length&&r(e[o],e[i])<0&&(o=i),o}function CM(e,t,r){const n=H0e(e,t,r);if(n!==t){const i=e[t];e[t]=e[n],e[n]=i,CM(e,n,r)}}function Rz(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)CM(e.collection,t,e.comparator)}class Ux extends F0e{constructor({comparator:t=j0e}={}){super("BinaryHeap"),Az(this,"comparator"),Az(this,"collection",[]),this.comparator=t}static from(t,r={}){const n=new Ux(r);return n.collection=Array.from(t),Rz(n),n}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),CM(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let n=r.length-1,i=Math.floor(n/2);n>0&&this.comparator(r[i],r[n])<0;n=i,i=Math.floor(i/2)){const o=r[n];r[n]=r[i],r[i]=o}}merge(t){t instanceof Ux?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),Rz(this),t.clear()}isEmpty(){return!this.collection.length}}function G0e(e,t,r,n,i){const o=`${e}-${t}-${r}-${n}`,{nodeLUT:u,graph:a}=i,p=un(u.get(e)),m=un(u.get(t)),w=new W0e({comparator:(O,L)=>{const Q=H.get(O)??1/0;return(H.get(L)??1/0)-Q}}),C={nodeId:e,distance:0,direction:r,dlcGuard:-1};w.push(C);const T=new Map,P=new Map;P.set(C,0);const R=O=>poe(O,m),$=(O,L)=>{switch(n){case"shortest":return L.distance;case"smallRoads":return L.isOneLaneRoad?L.distance:L.distance*10;default:throw new fa(n)}},H=new Map;H.set(C,R(p));let D=0;for(;!w.isEmpty();){D++;const O=w.pop();if(O.nodeId===t)return{success:!0,key:o,mode:n,...q0e(T,O)};const L=a.get(O.nodeId);if(!L)continue;const Q=O.direction==="forward"?L.forward:L.backward;for(const V of Q){if(!i.enabledDlcGuards.has(V.dlcGuard))continue;const F=(P.get(O)??1/0)+$(O,V);F<(P.get(V)??1/0)&&(T.set(V,O),P.set(V,F),H.set(V,F+R(un(u.get(V.nodeId)))),w.has(V)||w.push(V))}}return{success:!1,key:o,mode:n,numIters:D}}function q0e(e,t){let r=0;const n=[t];for(;e.has(t);)t=e.get(t),n.unshift(t),r+=t.distance;return n.length===1&&n.push(n[0]),{route:n,distance:r}}class W0e extends Ux{constructor(r){super(r);Wi(this,"items",new Set)}has(r){return this.items.has(r)}push(r){rd.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return rd.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const n of this.collection)this.items.add(n)}}const Z0e=()=>{const{mode:e,systemMode:t}=dE(),r=e==="system"?t:e,[n,i]=z.useState(!0),[o,u]=z.useState(new Set(Jv)),[a,p]=z.useState(new Set(Xv)),m=bN(a),w=Nx(o,u,Jv),C=Nx(a,p,Xv),[T,P]=z.useState(!1);return N.jsxs($I,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:qI,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[N.jsx(GI,{mode:r,children:N.jsx(xk,{game:"ats",showContours:T})}),N.jsx(Yv,{game:"ats",mode:r,enableIconAutoHide:n,visibleIcons:o,dlcs:a}),N.jsx(Qv,{game:"ats",mode:r,enableAutoHide:n,enabledStates:m}),N.jsx(zu,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:N.jsx(sn,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),N.jsx(K6,{visualizePitch:!0}),N.jsx(Z6,{}),N.jsx(zF,{}),N.jsx(BI,{compact:!0,customAttribution:" Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),N.jsx(K0e,{dlcs:a}),N.jsx(DF,{icons:{...w,enableAutoHiding:n,onAutoHidingToggle:i},advanced:{showContours:T,onContoursToggle:P},atsDlcs:C})]})},K0e=e=>{const{current:t}=OI(),r=xw(e.dlcs),[n,i]=z.useState(void 0),[o,u]=z.useState(void 0),[a,p]=z.useState([]),[m,w]=z.useState([]);z.useEffect(()=>{fetch("usa-graph-demo.json").then(X=>X.json()).then(X=>{p(X.demoCompanies.map(Lz)),u(X0e(X)),i(X)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[C,T]=z.useState(void 0),[P,R]=z.useState(void 0),$=z.useCallback(X=>{X=un(X),T(X.value);let re;if(n!=null){re=un(n.demoCompanies.find(we=>we.n===X.value));const ye=un(n.demoCompanyDefs.find(we=>we.t===re.t)),me=new Set(ye.d);w(n.demoCompanies.filter(we=>me.has(we.t)).map(Lz))}if(!(t==null||o==null)&&(P!=null&&(un(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),R(void 0)),re)){const ye=un(o.nodeLUT.get(re.n));t.flyTo({curve:1,zoom:9,center:[ye.x,ye.y]})}},[t,P,o,n]),H=z.useCallback(X=>{X=un(X),R(X.value),!(t==null||o==null)&&D(un(C),X.value,t,{...o,enabledDlcGuards:r})},[t,C,o,e.dlcs]),D=(X,re,ye,me)=>{Promise.all([Oz(X,re,"shortest",me),Oz(X,re,"smallRoads",me)]).then(we=>{const ke=un(ye.getSource("route1"));if(we.some(qe=>qe==null)){alert("Cannot calculate a route "),ke.setData({type:"FeatureCollection",features:[]});return}const Ie=we;ke.setData({type:"FeatureCollection",features:Ie}),ye.fitBounds(NI(Ie.flatMap(qe=>qe.geometry.coordinates)),{padding:150,curve:1,duration:2500})},we=>{console.error("error finding route",we)})},O=new Map;if(n)for(const[,X]of n.demoGraph)for(const re of[...X.b??[],...X.f??[]]){const ye=O.get(re.n)??0;O.set(re.n,ye||re.g)}const L=X=>{if(o==null)return!0;const re=un(O.get(X.value));return r.has(re)},Q=(X,re)=>X.city!==re.city?X.city.localeCompare(re.city):X.label.localeCompare(re.label),V=a.filter(L).sort(Q),F=m.filter(L).sort(Q);return N.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[N.jsx("h2",{children:"Start"}),N.jsx(sx,{options:V,onChange:(X,re)=>re&&$(re),groupBy:X=>X.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:Dz}),N.jsx("h2",{children:"End"}),N.jsx(sx,{options:F,onChange:(X,re)=>re&&H(re),groupBy:X=>X.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:C==null,renderGroup:Dz},C)]})};function Dz(e){return N.jsxs(N.Fragment,{children:[N.jsx(Ln,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),N.jsx(hd,{children:e.children}),N.jsx(ow,{})]})}function X0e(e){const t=new Map,r=new Map;for(const[n,i]of e.demoGraph)t.set(n,{forward:(i.f??[]).map(zz),backward:(i.b??[]).map(zz)});for(const[n,i]of e.demoNodes)r.set(n,{x:i[0],y:i[1]});return{graph:t,nodeLUT:r}}function zz(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function Lz(e){return{label:e.t,city:e.c,value:e.n}}function Oz(e,t,r,n){return new Promise(i=>{const o=G0e(e,t,"forward",r,n);if(!o.success){i(void 0);return}i({type:"Feature",geometry:{type:"LineString",coordinates:o.route.map(u=>{const a=un(n.nodeLUT.get(u.nodeId));return[a.x,a.y]})},properties:{distance:o.distance,mode:r}})})}const J0e=gee({links:[hee({client:uee({url:"ws://localhost:3000"})})]}),{App:Y0e}=bde({appClient:J0e,transitionDurationMs:300}),Q0e=Spe(Yfe([N.jsx(x1,{path:"/",element:N.jsx(z0e,{})}),N.jsx(x1,{path:"routes",element:N.jsx(Z0e,{})}),N.jsx(x1,{path:"navigator",element:N.jsx(Y0e,{})})])),e_e=VL({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),t_e=q$(),r_e=document.getElementById("root"),n_e=dF(r_e);n_e.render(N.jsx(z.StrictMode,{children:N.jsx(ZQ,{theme:{[sw]:t_e},children:N.jsxs(pU,{defaultMode:"system",modeStorageKey:"tm-mode",theme:e_e,children:[N.jsx(FX,{}),N.jsx(Ope,{router:Q0e})]})})}))});export default i_e();
